"use strict";(self.webpackChunkfull_app=self.webpackChunkfull_app||[]).push([[731],{4731:(bH,od,L)=>{L.r(od),L.d(od,{StaffingUpModule:()=>fH});var Em=L(6814),R=L(8926),Y=L(3306),p=L(498),C=L(646),y=L(6673),I=L(7825),v=L(557),S=L(9556),A=L(4459),D=L(4823),E=L(3391),Un="dx-state-focused",Im="dx-cell-focus-disabled",ld=".dx-datagrid-rowsview .dx-row",dd="".concat(ld," > td"),ud=".dx-treelist-rowsview .dx-row",hd="".concat(ud," > td"),cd={groupPanel:[".dx-datagrid-group-panel .dx-group-panel-item[tabindex]"],columnHeaders:[".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action",".dx-treelist-headers .dx-header-row > td.dx-treelist-action"],filterRow:[".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input",".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input"],rowsView:["".concat(".dx-row-focused"),"".concat(ld,"[tabindex]"),"".concat(dd,"[tabindex]"),"".concat(dd),"".concat(ud,"[tabindex]"),"".concat(hd,"[tabindex]"),"".concat(hd)],footer:[".dx-datagrid-total-footer .dx-datagrid-summary-item",".dx-treelist-total-footer .dx-treelist-summary-item"],filterPanel:[".dx-datagrid-filter-panel .dx-icon-filter",".dx-treelist-filter-panel .dx-icon-filter"],pager:[".dx-datagrid-pager [tabindex]",".dx-treelist-pager [tabindex]"]},Yn=!1,lr=!1,Ti=null;function pd(t,e){var i=(0,p.Z)(t),a=i.attr("aria-label"),n=_d(a,e.element()).index(i);Ti=(0,C.l)({},{ariaLabel:a,index:n},{viewInstance:e})}function _d(t,e){return(0,p.Z)(e).find(t?'[aria-label="'.concat(t,'"][tabindex]'):"[tabindex]")}function Dm(t,e){var i=e?.getRootNode()||Y.Z.getDocument();for(var a in t){var r=t[a],n=(0,p.Z)(i).find(r).first();if(n.length)return n}}function vd(){lr="visible"===Y.Z.getDocument().visibilityState}function gd(){S.Z.off(Y.Z.getDocument(),"visibilitychange",vd)}function fd(t,e,i,a,r,n){if(e.option("useLegacyKeyboardNavigation"))return E.ZT;var s=()=>(0,p.Z)(e.element()),o=u=>function Am(t,e,i,a,r,n){var s=function Om(t,e,i){var a={event:e,handled:!1};return i?i(a):t._createActionByOption("onKeyDown")(a),a.handled}(e,i.originalEvent,n);if(!s){var o=(0,D.EV)(i);"enter"===o||"space"===o?(pd(i.target,e),a&&a({event:i})):"tab"===o?r.addClass(Un):qn(t,e,i)}}(t,e,u,r,s(),n),l=()=>{Yn=!0,s().removeClass(Un)},d=()=>{!Yn&&!lr&&s().addClass(Un),Yn=!1};return S.Z.on(i,"keydown",a,o),S.Z.on(i,"mousedown",a,l),S.Z.on(i,"focusin",a,d),()=>{S.Z.off(i,"keydown",a,o),S.Z.off(i,"mousedown",a,l),S.Z.off(i,"focusin",a,d)}}function jn(t){if(!t.option("useLegacyKeyboardNavigation")&&Ti){var e=Ti.viewInstance;if(e){var a=_d(Ti.ariaLabel,e.element()).eq(Ti.index);Ti=null,S.Z.trigger(a,"focus")}}}function qn(t,e,i){var a=(0,D.EV)(i);if(i.ctrlKey&&("upArrow"===a||"downArrow"===a))for(var r=Object.keys(cd),n=r.indexOf(t);n>=0&&n<r.length;){n="upArrow"===a?--n:++n;var l=Dm(cd[r[n]],i.target);if(l&&l.length){l.attr("tabindex",e.option("tabindex")||0),S.Z.trigger(l,"focus"),l.removeClass(Im);break}}}var na=function(t,e,i,a,r){var n=e.getController("keyboardNavigation");e.option("useLegacyKeyboardNavigation")||n&&!n.isKeyboardEnabled()||(e.createAction("onKeyDown"),fd(t,e,i,a,r,s=>{e.executeAction("onKeyDown",s)}))},W=L(7285),Ai=L(692),ve=L(120),b=L(3687),se=L(4813),Ne=L(8182),Ue=L(5386),Z=L(6831),ie=L(344),st=L(1664),Ce=L(5874),md=L(6078),sa="dxdblclick",Cd=(0,D.V4)(ie.u,"dxDblClick"),Pm=Ce.Z.inherit({ctor:function(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick:function(){this._firstClickTarget=null,this._lastClickTimeStamp=-300},add:function(){this._handlerCount<=0&&S.Z.on(Y.Z.getDocument(),Cd,this._clickHandler.bind(this)),this._handlerCount++},_clickHandler:function(t){var e=t.timeStamp||Date.now(),i=e-this._lastClickTimeStamp;!(i<0)&&i<300?((0,D.BX)({type:sa,target:(0,st.Ls)(this._firstClickTarget,t.target),originalEvent:t}),this._forgetLastClick()):(this._firstClickTarget=t.target,this._lastClickTimeStamp=e)},remove:function(){this._handlerCount--,this._handlerCount<=0&&(this._forgetLastClick(),S.Z.off(Y.Z.getDocument(),Cd))}});(0,md.Z)(sa,new Pm);var re=L(9627),dr=L(8126),xd="dx-column-indicators";const Mm={_applyColumnState(t){var e,i=this.option("rtlEnabled"),a=this._getColumnAlignment(t.column.alignment,i),r=(0,C.l)(!0,{columnAlignment:a},t),n=r.rootElement.hasClass("dx-group-panel-item"),s=this._createIndicatorContainer(r,n),o=(0,p.Z)("<span>").addClass(this._getIndicatorClassName(t.name)),l=null===(e=this.component)||void 0===e?void 0:e.getController("columns"),d=l?.getHeaderContentAlignment(a)||a;return r.container=s,r.indicator=o,this._renderIndicator(r),s[!n&&t.showColumnLines||"left"!==d?"prependTo":"appendTo"](t.rootElement),o},_getIndicatorClassName:E.ZT,_getColumnAlignment(t,e){return e=e||this.option("rtlEnabled"),t&&"center"!==t?t:(0,se.q)(e)},_createIndicatorContainer(t,e){var i=this._getIndicatorContainer(t.rootElement),a="left"===t.columnAlignment?"right":"left";return i.length||(i=(0,p.Z)("<div>").addClass(xd)),this.setAria("role","presentation",i),i.css("float",t.showColumnLines&&!e?a:null)},_getIndicatorContainer:t=>t&&t.find(".".concat(xd)),_getIndicatorElements(t){var e=this._getIndicatorContainer(t);return e&&e.children()},_renderIndicator(t){var e=t.container,i=t.indicator;e&&i&&e.append(i)},_updateIndicators(t){var a,e=this.getColumns(),i=this.getColumnElements();if(i&&e.length===i.length)for(var r=0;r<e.length;r++){a=i.eq(r),this._updateIndicator(a,e[r],t);var n=a.parent().data("options");n&&n.cells&&(n.cells[a.index()].column=e[r])}},_updateIndicator(t,e,i){if(!e.command)return this._applyColumnState({name:i,rootElement:t,column:e,showColumnLines:this.option("showColumnLines")})}};var M=L(7462),ge=L(9343),ee=L(977),bd=Ce.Z.inherit({_endUpdateCore(){},ctor(t){var e=this;e._updateLockCount=0,e.component=t,e._actions={},e._actionConfigs={},(0,y.S6)(this.callbackNames()||[],function(i,a){var r=e.callbackFlags(a)||{};r.unique=!0,r.syncStrategy=!0,e[this]=(0,ge.Z)(r)})},init(){},callbackNames(){},callbackFlags(){},publicMethods(){},beginUpdate(){this._updateLockCount++},endUpdate(){this._updateLockCount>0&&(this._updateLockCount--,this._updateLockCount||this._endUpdateCore())},option(t){var{component:e}=this,i=e._optionCache;return 1===arguments.length&&i?(t in i||(i[t]=e.option(t)),i[t]):e.option.apply(e,arguments)},_silentOption(t,e){var{component:i}=this,a=i._optionCache;return a&&(a[t]=e),i._setOptionWithoutOptionChange(t,e)},localize(t){var e=this.component._optionCache;return e?(t in e||(e[t]=A.Z.format(t)),e[t]):A.Z.format(t)},on(){return this.component.on.apply(this.component,arguments)},off(){return this.component.off.apply(this.component,arguments)},optionChanged(t){t.name in this._actions&&(this.createAction(t.name,this._actionConfigs[t.name]),t.handled=!0)},getAction(t){return this._actions[t]},setAria(t,e,i){var a=i.get(0),r="role"!==t&&"id"!==t?"aria-":"";a.setAttribute?a.setAttribute(r+t,e):i.attr(r+t,e)},_createComponent(){return this.component._createComponent.apply(this.component,arguments)},getController(t){return this.component._controllers[t]},createAction(t,e){if((0,v.mf)(t)){var i=this.component._createAction(t.bind(this),e);return function(a){i({event:a})}}this._actions[t]=this.component._createActionByOption(t,e),this._actionConfigs[t]=e},executeAction(t,e){var i=this._actions[t];return i&&i(e)},dispose(){var t=this;(0,y.S6)(t.callbackNames()||[],function(){t[this].empty()})},addWidgetPrefix(t){return"dx-".concat(this.component.NAME.slice(2).toLowerCase()).concat(t?"-".concat(t):"")},getWidgetContainerClass(){return this.addWidgetPrefix("dxDataGrid"===this.component.NAME?null:"container")},elementIsInsideGrid(t){return t.closest(".".concat(this.getWidgetContainerClass())).parent().is(this.component.$element())}}),Xn=bd,Nm=Xn.inherit({getView(t){return this.component._views[t]},getViews(){return this.component._views}}),wd=bd.inherit({_isReady(){return this.component.isReady()},_endUpdateCore(){this.callBase(),!this._isReady()&&this._requireReady&&(this._requireRender=!1,this.component._requireResize=!1),this._requireRender&&(this._requireRender=!1,this.render(this._$parent))},_invalidate(t,e){this._requireRender=!0,this.component._requireResize=(0,Z.Ym)()&&(this.component._requireResize||t),this._requireReady=this._requireReady||e},_renderCore(){},_resizeCore(){},_parentElement(){return this._$parent},ctor(t){this.callBase(t),this.renderCompleted=(0,ge.Z)(),this.resizeCompleted=(0,ge.Z)()},element(){return this._$element},getElementHeight(){var t=this.element();if(!t)return 0;var e=parseFloat(t.css("marginTop"))||0,i=parseFloat(t.css("marginBottom"))||0,{offsetHeight:a}=t.get(0);return a+e+i},isVisible:()=>!0,getTemplate(t){return this.component._getTemplate(t)},render(t,e){var i=this._$element,a=this.isVisible();if((i||t)&&(this._requireReady=!1,i||(i=this._$element=(0,p.Z)("<div>").appendTo(t),this._$parent=t),i.toggleClass("dx-hidden",!a),a)){this.component._optionCache={};var r=this._renderCore(e);this.component._optionCache=void 0,r?r.done(()=>{this.renderCompleted.fire(e)}):this.renderCompleted.fire(e)}},resize(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1},focus(t){this.element().get(0).focus({preventScroll:t})}});function Ed(t){var i={};return Object.entries(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).forEach(a=>{var[r,n]=a,s=t[r];s&&(i[r]=(0,v.mf)(n)?n(s):s.inherit(n))}),i}const ne={modules:[],View:wd,ViewController:Nm,Controller:Xn,registerModule(t,e){for(var{modules:i}=this,a=0;a<i.length;a++)if(i[a].name===t)return;e.name=t,i.push(e)},registerModulesOrder(t){this.modulesOrder=t},unregisterModule(t){this.modules=(0,E.h3)(this.modules,e=>e.name!==t)},processModules:function Zm(t,e){var{modules:i}=e,{modulesOrder:a}=e;function r(u){var h={};return(0,y.S6)(u,(c,_)=>{var g=new _(t);g.name=c,function Hm(t,e,i){var a=i.publicMethods();a&&(0,y.S6)(a,(r,n)=>{if(!i[n])throw ee.Z.Error("E1006",e,n);if(t[n])throw ee.Z.Error("E1005",n);t[n]=function(){return i[n](...arguments)}})}(t,c,g),h[c]=g}),h}a&&i.sort((u,h)=>{var c=a.indexOf(u.name),_=a.indexOf(h.name);return c<0&&(c=1e6),_<0&&(_=1e6),c-_});var n={},s={};i.forEach(u=>{var{name:h,controllers:c={},views:_={}}=u;Object.entries(c).forEach(g=>{var x,[f,m]=g;if(n[f])throw ee.Z.Error("E1001",h,f);if(null===(x=m?.subclassOf)||void 0===x||!x.call(m,Xn))throw ee.Z.Error("E1002",h,f);n[f]=m}),Object.entries(_).forEach(g=>{var x,[f,m]=g;if(s[f])throw ee.Z.Error("E1003",h,f);if(null===(x=m?.subclassOf)||void 0===x||!x.call(m,wd))throw ee.Z.Error("E1004",h,f);s[f]=m})});var o=i.filter(u=>{var{extenders:h}=u;return!!h}),l=o.reduce((u,h)=>{var{extenders:c}=h;return(0,M.Z)((0,M.Z)({},u),Ed(u,c?.controllers))},n),d=o.reduce((u,h)=>{var{extenders:c}=h;return(0,M.Z)((0,M.Z)({},u),Ed(u,c?.views))},s);t._controllers=r(l),t._views=r(d)},callModuleItemsMethod:function(t,e,i){i=i||[],t._controllers&&(0,y.S6)(t._controllers,function(){this[e]&&this[e].apply(this,i)}),t._views&&(0,y.S6)(t._views,function(){this[e]&&this[e].apply(this,i)})}};var Q=L(9754),ot=L(265),tt=L(8021),ti=L(9024),oa=L(9840),lt=L(2649),Id=L(1225),J=L(5587),it=L(5203),Nt=L(9970),oe=L(7484),Td="dx-loadpanel-indicator",Ad="dx-loadpanel-message",Dd=Nt.Z.inherit({_supportedKeys:function(){return(0,C.l)(this.callBase(),{escape:E.ZT})},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{message:A.Z.format("Loading"),width:222,height:90,animation:null,showIndicator:!0,indicatorSrc:"",showPane:!0,delay:0,templatesRenderAsynchronously:!1,hideTopOverlayHandler:null,focusStateEnabled:!1,propagateOutsideClick:!0,preventScrollEvents:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"generic"},options:{shadingColor:"transparent"}},{device:function(){return(0,oe.x2)()},options:{message:"",width:60,height:60,maxHeight:60,maxWidth:60}}])},_init:function(){this.callBase.apply(this,arguments)},_render:function(){this.callBase(),this.$element().addClass("dx-loadpanel"),this.$wrapper().addClass("dx-loadpanel-wrapper")},_renderContentImpl:function(){this.callBase(),this.$content().addClass("dx-loadpanel-content"),this._$loadPanelContentWrapper=(0,p.Z)("<div>").addClass("dx-loadpanel-content-wrapper"),this._$loadPanelContentWrapper.appendTo(this.$content()),this._togglePaneVisible(),this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage()},_show:function(){var t=this.option("delay");if(!t)return this.callBase();var e=new b.BH,i=this.callBase.bind(this);return this._clearShowTimeout(),this._showTimeout=setTimeout(function(){i().done(function(){e.resolve()})},t),e.promise()},_hide:function(){return this._clearShowTimeout(),this.callBase()},_clearShowTimeout:function(){clearTimeout(this._showTimeout)},_renderMessage:function(){if(this._$loadPanelContentWrapper){var t=this.option("message");if(t){var e=(0,p.Z)("<div>").addClass(Ad).text(t);this._$loadPanelContentWrapper.append(e)}}},_renderLoadIndicator:function(){!this._$loadPanelContentWrapper||!this.option("showIndicator")||(this._$indicator||(this._$indicator=(0,p.Z)("<div>").addClass(Td).appendTo(this._$loadPanelContentWrapper)),this._createComponent(this._$indicator,it.Z,{indicatorSrc:this.option("indicatorSrc")}))},_cleanPreviousContent:function(){this.$content().find("."+Ad).remove(),this.$content().find("."+Td).remove(),delete this._$indicator},_togglePaneVisible:function(){this.$content().toggleClass("dx-loadpanel-pane-hidden",!this.option("showPane"))},_optionChanged:function(t){switch(t.name){case"delay":break;case"message":case"showIndicator":this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage();break;case"showPane":this._togglePaneVisible();break;case"indicatorSrc":this._renderLoadIndicator();break;default:this.callBase(t)}},_dispose:function(){this._clearShowTimeout(),this.callBase()}});(0,J.Z)("dxLoadPanel",Dd);const Od=Dd;var Ym=["year","month","day"],jm=["year","month","day","hour","minute"],Jn=function(t){return"date"===t||"datetime"===t},Qn=function(t){var e,i=[],a=["year","month","day","hour","minute","second"],r=t.headerFilter&&t.headerFilter.groupInterval,n="quarter"===r?"month":r;return Jn(t.dataType)&&null!==r?(i="datetime"===t.dataType?jm:Ym,(e=a.indexOf(n))>=0&&(i=a.slice(0,e)).push(r),i):(0,v.$K)(r)?Array.isArray(r)?r:[r]:void 0};const ii=(t=function(r,n){var s=r.dataField||r.selector;return"search"===n&&(s=r.displayField||r.calculateDisplayValue||s),s},e=function(r,n){var s,o,l,u,d=t(this,n);if(Array.isArray(r)&&(0,v.$K)(r[0])&&(0,v.$K)(r[1]))return o=[d,">=",r[0]],l=[d,"<=",r[1]],Jn(this.dataType)&&(u=r[1]).getHours()+u.getMinutes()+u.getSeconds()+u.getMilliseconds()<1&&(s=new Date(r[1].getTime()),"date"===this.dataType&&s.setDate(r[1].getDate()+1),l=[d,"<",s]),[o,"and",l]},i=function(r,n,s){var o,l,d,c,u=(0,v.J_)(c=r)?[c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds()]:(0,y.UI)((""+c).split("/"),function(_,g){return 1===g?Number(_)-1:Number(_)}),h=t(this,s);switch("headerFilter"===s?d=Qn(this)[u.length-1]:"datetime"===this.dataType&&(d="minute"),d){case"year":o=new Date(u[0],0,1),l=new Date(u[0]+1,0,1);break;case"month":o=new Date(u[0],u[1],1),l=new Date(u[0],u[1]+1,1);break;case"quarter":o=new Date(u[0],3*u[1],1),l=new Date(u[0],3*u[1]+3,1);break;case"hour":o=new Date(u[0],u[1],u[2],u[3]),l=new Date(u[0],u[1],u[2],u[3]+1);break;case"minute":o=new Date(u[0],u[1],u[2],u[3],u[4]),l=new Date(u[0],u[1],u[2],u[3],u[4]+1);break;case"second":o=new Date(u[0],u[1],u[2],u[3],u[4],u[5]),l=new Date(u[0],u[1],u[2],u[3],u[4],u[5]+1);break;default:o=new Date(u[0],u[1],u[2]),l=new Date(u[0],u[1],u[2]+1)}switch(n){case"<":return[h,"<",o];case"<=":return[h,"<",l];case">":return[h,">=",l];case">=":return[h,">=",o];case"<>":return[[h,"<",o],"or",[h,">=",l]];default:return[[h,">=",o],"and",[h,"<",l]]}},a=function(r,n,s){var o=t(this,s),l=Qn(this);if("headerFilter"===s&&l&&(0,v.$K)(r)){var d=(""+r).split("/"),u=Number(d[d.length-1]);return[[o,">=",u],"and",[o,"<",u+l[d.length-1]]]}return[o,n||"=",r]},{defaultCalculateFilterExpression:function(r,n,s){var o=this,l=t(o,s),d=o.calculateDisplayValue&&"search"===s,u=d&&o.lookup&&o.lookup.dataType||o.dataType,h=null;if("headerFilter"!==s&&"filterBuilder"!==s||null!==r)if("string"!==u||o.lookup&&!d){if("between"===n)return e.apply(o,[r,s]);if(Jn(u)&&(0,v.$K)(r))return i.apply(o,arguments);if("number"===u)return a.apply(o,arguments);h=[l,n||"=",r]}else h=[l,n||"contains",r];else h=[l,n||"=",null],"string"===u&&(h=[h,"="===n?"or":"and",[l,n||"=",""]]);return h},getGroupInterval:Qn});var t,e,i,a,Rd="virtual",Bd="scrolling.mode",rC={year:t=>t&&t.getFullYear(),month:t=>t&&t.getMonth()+1,day:t=>t&&t.getDate(),quarter:t=>t&&Math.floor(t.getMonth()/3)+1,hour:t=>t&&t.getHours(),minute:t=>t&&t.getMinutes(),second:t=>t&&t.getSeconds()},nC=function(){var e=this.calculateCellValue(arguments[1]);if(!(0,v.$K)(e))return null;if(Ld(this.dataType))return rC[arguments[0]](e);if("number"===this.dataType){var a=arguments[0];return Math.floor(Number(e)/a)*a}},sC=function(t,e){return(0,v.mf)(t)&&(0,v.mf)(e)&&t.originalCallback&&e.originalCallback?t.originalCallback===e.originalCallback&&t.columnIndex===e.columnIndex:t===e};function Ld(t){return"date"===t||"datetime"===t}var Vd=function(t){t.get(0).textContent="\xa0"},es=function(t){for(var e=(0,lt.G5)(t=t||[]),i=0;i<t.length;i++)t&&t[i]&&void 0!==t[i].isExpanded&&(e[i].isExpanded=t[i].isExpanded),t&&t[i]&&void 0!==t[i].groupInterval&&(e[i].groupInterval=t[i].groupInterval);return e},Pd=function(t,e){var i=Id.Z.format(t,e.format)||t&&t.toString()||"",a={value:t,valueText:e.getDisplayFormat?e.getDisplayFormat(i):i,target:e.target||"row",groupInterval:e.groupInterval};return e.customizeText?e.customizeText.call(e,a):a.valueText},Fd=function(t,e){var i=t.displayFormat||t.columnCaption&&e["".concat(t.summaryType,"OtherColumn")]||e[t.summaryType];return Pd(t.value,{format:t.valueFormat,getDisplayFormat:a=>i?(0,ot.WU)(i,a,t.columnCaption):a,customizeText:t.customizeText})},Md=function(t){var e=t.data&&t.data(),i=e&&e.dxComponents,a=i&&i[0];return a&&e[a]};const V={renderNoDataText(t){if(t=t||this.element()){var e=this.addWidgetPrefix("nodata"),i=t.find(".".concat(e)).last(),a=this._dataController.isEmpty(),r=this._dataController.isLoading();i.length||(i=(0,p.Z)("<span>").addClass(e)),i.parent().is(t)||i.appendTo(t),a&&!r?i.removeClass("dx-hidden").text(this._getNoDataText()):i.addClass("dx-hidden")}},renderLoadPanel(t,e,i){var a;this._loadPanel&&this._loadPanel.$element().remove(),(a=this.option("loadPanel"))&&("auto"===a.enabled?!i:a.enabled)?(a=(0,C.l)({shading:!1,message:a.text,container:e},a),this._loadPanel=this._createComponent((0,p.Z)("<div>").appendTo(e),Od,a)):this._loadPanel=null},calculateLoadPanelPosition(t){var e=(0,p.Z)((0,Z.Jj)());return(0,I.Cr)(t)>(0,I.Cr)(e)?{of:e,boundary:t,collision:"fit"}:{of:t}},getIndexByKey(t,e,i){var a=-1;if(void 0!==t&&Array.isArray(e)){i=arguments.length<=2?"key":i;for(var r=0;r<e.length;r++){var n=(0,v.$K)(i)?e[r][i]:e[r];if((0,E.bY)(t,n)){a=r;break}}}return a},combineFilters(t,e){var i,a=[];e=e||"and";for(var r=0;r<t.length;r++)if(t[r]){if(1===(null===(i=t[r])||void 0===i?void 0:i.length)&&"!"===t[r][0]){if("and"===e)return["!"];if("or"===e)continue}a.length&&a.push(e),a.push(t[r])}if(1===a.length&&(a=a[0]),a.length)return a},checkChanges(t,e){for(var i=0,a=0;a<e.length;a++)t[e[a]]&&i++;return t.length&&t.length===i},equalFilterParameters:function t(e,i){if(Array.isArray(e)&&Array.isArray(i)){if(e.length!==i.length)return!1;for(var a=0;a<e.length;a++)if(!t(e[a],i[a]))return!1;return!0}return(0,v.mf)(e)&&e.columnIndex>=0&&(0,v.mf)(i)&&i.columnIndex>=0?e.columnIndex===i.columnIndex&&(0,Q.Ex)(e.filterValue)===(0,Q.Ex)(i.filterValue)&&(0,Q.Ex)(e.selectedFilterOperation)===(0,Q.Ex)(i.selectedFilterOperation):(0,Q.Ex)(e)==(0,Q.Ex)(i)},proxyMethod(t,e,i){t[e]||(t[e]=function(){var a=this._dataSource;return a?a[e].apply(a,arguments):i})},formatValue:Pd,getFormatOptionsByColumn:(t,e)=>({format:t.format,getDisplayFormat:t.getDisplayFormat,customizeText:t.customizeText,target:e,trueText:t.trueText,falseText:t.falseText}),getDisplayValue:(t,e,i,a)=>t.displayValueMap&&void 0!==t.displayValueMap[e]?t.displayValueMap[e]:t.calculateDisplayValue&&i&&"group"!==a?t.calculateDisplayValue(i):!t.lookup||"group"===a&&(t.calculateGroupValue||t.calculateDisplayValue)?e:t.lookup.calculateCellValue(e),getGroupRowSummaryText(t,e){for(var i="(",a=0;a<t.length;a++)i+=(a>0?", ":"")+Fd(t[a],e);return i+")"},getSummaryText:Fd,normalizeSortingInfo:es,getFormatByDataType(t){switch(t){case"date":return"shortDate";case"datetime":return"shortDateShortTime";default:return}},getHeaderFilterGroupParameters(t,e){var i=[],a=t.dataField||t.name,r=ii.getGroupInterval(t);return r?((0,y.S6)(r,(n,s)=>{i.push(e?{selector:a,groupInterval:s,isExpanded:n<r.length-1}:nC.bind(t,s))}),i):(e?i=[{selector:a,isExpanded:!1}]:(i=function(n){var s=t.calculateCellValue(n);return(void 0===s||""===s)&&(s=null),s},t.sortingMethod&&(i=[{selector:i,compare:t.sortingMethod.bind(t)}])),i)},equalSortParameters(t,e,i){if(t=es(t),e=es(e),Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var a=0;a<t.length;a++)if(!sC(t[a].selector,e[a].selector)||t[a].desc!==e[a].desc||t[a].groupInterval!==e[a].groupInterval||!i&&!!t[a].isExpanded!=!!e[a].isExpanded)return!1;return!0}return(!t||!t.length)==(!e||!e.length)},getPointsByColumns(t,e,i,a){for(var s,o,u,r=t.length,n=!1,l=a||0,d=[],h=0;h<=r;h++){h<r&&(o=(s=t.eq(h)).offset(),u="rtl"===s.css("direction"));var c={index:l,x:o?o.left+(!i&&u^h===r?(0,se.l)(s[0]).width:0):0,y:o?o.top+(i&&h===r?(0,se.l)(s[0]).height:0):0,columnIndex:l};if(!i&&h>0){var _=t.eq(h-1).offset();_.top<c.y&&(c.y=_.top)}e&&(n=e(c)),n||d.push(c),l++}return d},getExpandCellTemplate:()=>({allowRenderToDetachedContainer:!0,render(t,e){var i=(0,p.Z)(t);if(!(0,v.$K)(e.value)||e.data&&e.data.isContinuation||e.row.isNewRow)Vd(i);else{var a=e.component.getView("rowsView");i.addClass("dx-datagrid-expand").addClass("dx-selection-disabled"),(0,p.Z)("<div>").addClass(e.value?"dx-datagrid-group-opened":"dx-datagrid-group-closed").appendTo(i),a.setAria("label",a.localize(e.value?"dxDataGrid-ariaCollapse":"dxDataGrid-ariaExpand"),i)}}}),setEmptyText:Vd,isDateType:Ld,getSelectionRange(t){try{if(t)return{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd}}catch{}return{}},setSelectionRange(t,e){try{t&&t.setSelectionRange&&t.setSelectionRange(e.selectionStart,e.selectionEnd)}catch{}},focusAndSelectElement(t,e){var i=e.is(":focus");S.Z.trigger(e,"focus");var a=t.option("editing.selectTextOnEditStart"),r=e.get(0);if(!i&&a&&e.is(".dx-texteditor-input")&&!e.is("[readonly]")){var n=Md(e.closest(".dx-texteditor"));(0,b.gx)(n&&n._loadItemDeferred).done(()=>{r.select()})}},getWidgetInstance:Md,getLastResizableColumnIndex(t,e){var a,i=t.some(o=>o&&!o.command&&!o.fixed&&!1!==o.allowResizing);for(a=t.length-1;t[a];a--){var r=t[a];if(!(r.command||r.fixed||"adaptiveHidden"===(e&&e[a])||i&&!1===r.allowResizing))break}return a},isElementInCurrentGrid:(t,e)=>!(!e||!e.length)&&e.closest(".".concat(t.getWidgetContainerClass())).parent().is(t.component.$element()),isVirtualRowRendering(t){var e=t.option("scrolling.rowRenderingMode"),i=t.option(Bd)===Rd,a="infinite"===t.option(Bd);return!(!1!==t.option("scrolling.legacyMode")||!i&&!a)||e===Rd},getPixelRatio:t=>t.devicePixelRatio||1,getContentHeightLimit(t){return t.mozilla?8e6:15e6/this.getPixelRatio((0,Z.Jj)())},normalizeLookupDataSource(t){var e;return t.items?e=t.items:(0,v.mf)(e=t.dataSource)&&!tt.default.isWrapped(e)&&(e=e({})),(0,oa.aN)(e)},getWrappedLookupDataSource(t,e,i){if(!e)return[];var a=this.normalizeLookupDataSource(t.lookup);if(t.calculateCellValue!==t.defaultCalculateCellValue)return a;var s,o,l,r=e.remoteOperations().groupPaging,n=t.displayField&&(0,v.HD)(t.displayField),d=(h,c)=>{var _,g=null!==(_=c.skip)&&void 0!==_?_:0;return h.slice(g,c.take?g+c.take:h.length)},u=(0,M.Z)((0,M.Z)({},a),{__dataGridSourceFilter:i,load:h=>{var _,g,f,c=new b.BH;return(_=h,g=function lC(t){return Array.isArray(t)||(t=[t]),t.map((e,i)=>(0,v.HD)(e)?{selector:e,isExpanded:i<t.length-1}:e)}(n?[t.dataField,t.displayField]:t.dataField),f=new b.BH,s&&(!r||_.skip===l&&_.take===o)?f.resolve(d(s,_)):(l=_.skip,o=_.take,e.load({filter:i,group:g,take:r?_.take:void 0,skip:r?_.skip:void 0}).done(x=>{s=x,f.resolve(r?x:d(x,_))}).fail(f.fail)),f).done(_=>{if(0!==_.length){var g=this.combineFilters(_.flatMap(m=>m.key).map(m=>[t.lookup.valueExpr,m]),"or");new ti.o((0,M.Z)((0,M.Z)((0,M.Z)({},a),h),{filter:this.combineFilters([g,h.filter],"and"),paginate:!1})).load().done(c.resolve).fail(c.fail)}else c.resolve([])}).fail(c.fail),c},key:t.lookup.valueExpr,byKey(h){var c=(0,b.BH)();return this.load({filter:[t.lookup.valueExpr,"=",h]}).done(_=>{c.resolve(_[0])}),c.promise()}});return u},logHeaderFilterDeprecatedWarningIfNeed(t){var e=t._logDeprecatedOptionWarning.bind(t);(0,v.$K)(t.option("headerFilter.allowSearch"))&&e("headerFilter.allowSearch",{since:"23.1",alias:"headerFilter.search.enabled"}),(0,v.$K)(t.option("headerFilter.searchTimeout"))&&e("headerFilter.searchTimeout",{since:"23.1",alias:"headerFilter.search.timeout"});var i="dxPivotGrid"===t.NAME?"dataSource.fields":"columns",a=t.option(i);if(Array.isArray(a)){var r=n=>{n.forEach(s=>{var o,l=s.headerFilter||{};(0,v.$K)(l.allowSearch)&&e("".concat(i,"[].headerFilter.allowSearch"),{since:"23.1",alias:"".concat(i,"[].headerFilter.search.enabled")}),(0,v.$K)(l.searchMode)&&e("".concat(i,"[].headerFilter.searchMode"),{since:"23.1",alias:"".concat(i,"[].headerFilter.search.mode")}),null!==(o=s.columns)&&void 0!==o&&o.length&&r(s.columns)})};r(a)}}};var kd="scroll-container",la="dx-row",ts="dx-group-row",is="dx-master-detail-row",Nd="0.0001px",as="dxCellHintVisible",SC={render(t){t.container.append(t.content)}},ur=function(t){return"auto"===t?"":(0,v.kE)(t)?"".concat(t,"px"):t},Hd=function(t,e,i){t.style.width=t.style.maxWidth="auto"===e.width?"":i},wC=function(t){t.resolve()},Zd=t=>"number"==typeof t?"".concat(t.toFixed(3),"px"):"adaptiveHidden"===t?Nd:t,yC=ne.View.inherit(Mm);class da extends yC{setTableRole(e){}_createScrollableOptions(){var e=this.option("scrolling"),i=this.option("scrolling.useNative"),a=(0,C.l)({},e,{direction:"both",bounceEnabled:!1,useKeyboard:!1});return void 0===i&&(i=!0),"auto"===i?(delete a.useNative,delete a.useSimulatedScrollbar):(a.useNative=!!i,a.useSimulatedScrollbar=!i),a}_updateCell(e,i){i.rowType&&this._cellPrepared(e,i)}_createCell(e){var{column:i}=e,a=i.alignment||(0,se.q)(this.option("rtlEnabled")),r=Y.Z.createElement("td");r.style.textAlign=a;var n=(0,p.Z)(r);return"data"===e.rowType&&i.headerId&&!i.type&&this.component.option("showColumnHeaders")&&this.setAria("describedby",i.headerId,n),i.cssClass&&n.addClass(i.cssClass),Array.isArray(i.elementAttr)&&i.elementAttr.forEach(s=>{var{name:o,value:l}=s;n.attr(o,l)}),"expand"===i.command&&(n.addClass(i.cssClass),n.addClass(this.addWidgetPrefix("group-space"))),i.colspan>1?n.attr("colSpan",i.colspan):!i.isBand&&"auto"!==i.visibleWidth&&this.option("columnAutoWidth")&&((i.width||i.minWidth)&&(r.style.minWidth=ur(i.minWidth||i.width)),i.width&&Hd(r,i,ur(i.width))),n}_createRow(e,i){var a=(0,p.Z)("<".concat(i=i||"tr",">")).addClass(la);return this.setAria("role","row",a),a}_isAltRow(e){return e&&e.dataIndex%2==1}_createTable(e,i){var a=(0,p.Z)("<table>").addClass(this.addWidgetPrefix("table")).addClass(this.addWidgetPrefix("table-fixed"));if(e&&!i?(a.append(this._createColGroup(e)),ve.Z.safari&&a.append((0,p.Z)("<thead>").append("<tr>")),this.setTableRole(a)):this.setAria("hidden",!0,a),this.setAria("role","presentation",(0,p.Z)("<tbody>").appendTo(a)),i)return a;ve.Z.mozilla&&S.Z.on(a,"mousedown","td",n=>{n.ctrlKey&&n.preventDefault()}),this.option("cellHintEnabled")&&S.Z.on(a,"mousemove",".dx-row > td",this.createAction(n=>{var s=n.event,o=(0,p.Z)(s.target),l=(0,p.Z)(s.currentTarget),d=l.parent(),u=this._columnsController.getVisibleColumns(),h=d.data("options"),c=l.index(),_=h&&h.cells&&h.cells[c],g=_?_.column:u[c],f=d.hasClass("dx-header-row"),m=d.hasClass("dx-data-row"),x=d.hasClass(is),w=d.hasClass(ts),T=d.hasClass(this.addWidgetPrefix("filter-row")),O=m&&(!g||g.cellTemplate);x||T||m&&_&&(h.isEditing||_.isEditing||g?.showEditorAlways)||O||f&&(!g||g.headerCellTemplate)||w&&(!g||g.groupIndex&&g.groupCellTemplate)||(o.data(as)&&(o.removeAttr("title"),o.data(as,!1)),o[0].scrollWidth-o[0].clientWidth>0&&!(0,v.$K)(o.attr("title"))&&(o.attr("title",o.text()),o.data(as,!0)))}));var r=n=>{var s=(0,p.Z)(n.currentTarget),o=(0,p.Z)(n.target).closest(".".concat("dx-field-item-content")),l=s.parent(),d=l.data("options"),u=d&&d.cells&&d.cells[s.index()];if(s.closest("table").is(n.delegateTarget)){var h=(0,C.l)({},u,{cellElement:(0,W.u)(s),event:n,eventType:n.type});if(h.rowIndex=this.getRowIndex(l),o.length){var c=o.data("dx-form-item");c.column&&(h.column=c.column,h.columnIndex=this._columnsController.getVisibleIndex(h.column.index))}return h}};return S.Z.on(a,"mouseover",".dx-row > td",n=>{var s=r(n);s&&this.executeAction("onCellHoverChanged",s)}),S.Z.on(a,"mouseout",".dx-row > td",n=>{var s=r(n);s&&this.executeAction("onCellHoverChanged",s)}),S.Z.on(a,ie.u,".dx-row > td",n=>{var s=r(n);s&&this.executeAction("onCellClick",s)}),S.Z.on(a,sa,".dx-row > td",n=>{var s=r(n);s&&this.executeAction("onCellDblClick",s)}),function(t,e){var i,a,r;function n(s){return setTimeout(()=>{i=a=null},s)}S.Z.on(e,"touchstart touchend",".dx-row",s=>{clearTimeout(r),"touchstart"===s.type?(i=s.target,a=s.currentTarget,r=n(1e3)):r=n()}),S.Z.on(e,[ie.u,sa,re.Z.down].join(" "),".dx-row",t.createAction(s=>{var{event:o}=s;i&&(o.target=i,o.currentTarget=a),(0,p.Z)(o.target).closest("a").length||(s.rowIndex=t.getRowIndex(o.currentTarget),s.rowIndex>=0&&(s.rowElement=(0,W.u)((0,p.Z)(o.currentTarget)),s.columns=t.getColumns(),o.type===re.Z.down?t._rowPointerDown(s):o.type===ie.u?t._rowClick(s):t._rowDblClick(s)))}))}(this,a),a}_rowPointerDown(){}_rowClick(){}_rowDblClick(){}_createColGroup(e){for(var i=(0,p.Z)("<colgroup>"),a=0;a<e.length;a++)for(var r=e[a].colspan||1,n=0;n<r;n++)i.append(this._createCol(e[a]));return i}_createCol(e){var i=e.visibleWidth||e.width;"adaptiveHidden"===i&&(i=Nd);var a=(0,p.Z)("<col>");return(0,Ne.cl)(a,i),a}renderDelayedTemplates(e){var i=this._delayedTemplates,a=i.filter(n=>!n.async),r=i.filter(n=>n.async);this._delayedTemplates=[],this._renderDelayedTemplatesCore(a,!1,e),this._renderDelayedTemplatesCoreAsync(r)}_renderDelayedTemplatesCoreAsync(e){if(e.length){var i=(0,Z.Jj)().setTimeout(()=>{this._templateTimeouts.delete(i),this._renderDelayedTemplatesCore(e,!0)});this._templateTimeouts.add(i)}}_renderDelayedTemplatesCore(e,i,a){for(var r=new Date;e.length;){var n=e.shift(),{options:s}=n,o=Y.Z.getRootNode((0,p.Z)(s.container).get(0)),l=this.needWaitAsyncTemplates();if((!i||(0,p.Z)(s.container).closest(o).length||l)&&(a&&(s.change=a),n.template.render(s)),i&&new Date-r>30){this._renderDelayedTemplatesCoreAsync(e);break}}!e.length&&this._delayedTemplates.length&&this.renderDelayedTemplates()}_processTemplate(e,i){var a;if(e&&e.render&&!(0,v.ZU)(e))a={allowRenderToDetachedContainer:e.allowRenderToDetachedContainer,render(n){e.render(n.container,n.model,n.change),n.deferred&&n.deferred.resolve()}};else if((0,v.mf)(e))a={render(n){var s=e((0,W.u)(n.container),n.model,n.change);s&&(s.nodeType||(0,v.ZU)(s))&&n.container.append(s),n.deferred&&n.deferred.resolve()}};else{var r=(0,v.HD)(e)?e:(0,p.Z)(e).attr("id");r?(this._templatesCache[r]||(this._templatesCache[r]=this.getTemplate(e)),a=this._templatesCache[r]):a=this.getTemplate(e)}return a}renderTemplate(e,i,a,r,n){var s,o=this._processTemplate(i,a),{column:l}=a,d="data"===a.rowType,u=new b.BH,h={container:e,model:a,deferred:u,onRendered:()=>{this.isDisposed()?u.reject():u.resolve()}};if(o){a.component=this.component;var c=l&&(l.renderAsync&&d||this.option("renderAsync")&&(!1!==l.renderAsync&&(l.command||l.showEditorAlways)&&d||"filter"===a.rowType)),_=null!==(s=a.renderAsync)&&void 0!==s?s:c;!o.allowRenderToDetachedContainer&&!r||_?this._delayedTemplates.push({template:o,options:h,async:_}):o.render(h),this._templateDeferreds.add(u),S.Z.on(e,dr.x,wC.bind(null,u))}else u.reject();return u.promise().always(()=>{this._templateDeferreds.delete(u)})}_getBodies(e){return(0,p.Z)(e).children("tbody").not(".dx-header").not(".dx-footer")}_needWrapRow(e){var i;return!!this.option().rowTemplate&&!(null===(i=this._getBodies(e))||void 0===i||!i.filter(".".concat(la)).length)}_wrapRowIfNeed(e,i,a){if(this._needWrapRow(a?e||this._tableElement:this._tableElement||e)){var s=(0,p.Z)("<tbody>").addClass(i.attr("class"));return this.setAria("role","presentation",s),s.append(i)}return i}_appendRow(e,i,a){(a=a||SC).render({content:i,container:e})}_resizeCore(){var e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}_renderCore(e){var i=this.element().parent();(!i||i.parent().length)&&this.renderDelayedTemplates(e)}_renderTable(e){(e=e||{}).columns=this._columnsController.getVisibleColumns();var i=e.change&&e.change.changeType,a=this._createTable(e.columns,"append"===i||"prepend"===i||"update"===i);return this._renderRows(a,e),a}_renderRows(e,i){for(var a=this._getRows(i.change),r=i.change&&i.change.columnIndices||[],n=i.change&&i.change.changeTypes||[],s=0;s<a.length;s++)this._renderRow(e,(0,C.l)({row:a[s],columnIndices:r[s],changeType:n[s]},i))}_renderRow(e,i){i.columnIndices||(i.row.cells=[]);var a=this._createRow(i.row),r=this._wrapRowIfNeed(e,a);"remove"!==i.changeType&&this._renderCells(a,i),this._appendRow(e,r);var n=(0,C.l)({columns:i.columns},i.row);this._addWatchMethod(n,i.row),this._rowPrepared(r,n,i.row)}_needRenderCell(e,i){return!i||i.indexOf(e)>=0}_renderCells(e,i){for(var a=0,{row:r}=i,{columns:n}=i,s=0;s<n.length;s++)this._needRenderCell(s,i.columnIndices)&&this._renderCell(e,(0,C.l)({column:n[s],columnIndex:a,value:r.values&&r.values[a],oldValue:r.oldValues&&r.oldValues[a]},i)),n[s].colspan>1?a+=n[s].colspan:a++}_updateCells(e,i,a){var r=e.children(),n=i.children(),s=this.option("highlightChanges"),o=this.addWidgetPrefix("cell-updated-animation");a.forEach((l,d)=>{var u=r.eq(l),h=n.eq(d);u.replaceWith(h),s&&!h.hasClass("dx-command-expand")&&h.addClass(o)}),function(t,e){if(t&&e){var r,i=t.attributes,a=e.attributes;for(r=0;r<i.length;r++){var n=i[r].nodeName;e.hasAttribute(n)||t.removeAttribute(n)}for(r=0;r<a.length;r++)t.setAttribute(a[r].nodeName,a[r].nodeValue)}}(e.get(0),i.get(0))}_setCellAriaAttributes(e,i){if("freeSpace"!==i.rowType){this.setAria("role","gridcell",e);var a=this._columnsController.getColumnIndexOffset();this.setAria("colindex",i.columnIndex+a+1,e)}}_renderCell(e,i){var a=this._getCellOptions(i);if(i.columnIndices){if(i.row.cells){var r=i.row.cells.findIndex(s=>s.columnIndex===a.columnIndex);i.row.cells[r]=a}}else i.row.cells.push(a);var n=this._createCell(a);return this._setCellAriaAttributes(n,a),this._renderCellContent(n,a,i),e.get(0).appendChild(n.get(0)),n}_renderCellContent(e,i,a){var r=this._getCellTemplate(i);(0,b.gx)(!r||this.renderTemplate(e,r,i,void 0,a.change)).done(()=>{this._updateCell(e,i)})}_getCellTemplate(e){}_getRows(e){return[]}_getCellOptions(e){var i={column:e.column,columnIndex:e.columnIndex,rowType:e.row.rowType,isAltRow:this._isAltRow(e.row)};return this._addWatchMethod(i),i}_addWatchMethod(e,i){if(this.option("repaintChangesOnly")){var a=[];return(i=i||e).watch=i.watch||function(r,n,s){var o=r(i.data),l=function(d){d&&s&&s(d);var u=r(i.data);JSON.stringify(o)!==JSON.stringify(u)&&(d&&n(u),o=u)};return a.push(l),function(){var d=a.indexOf(l);d>=0&&a.splice(d,1)}},i.update=i.update||function(r,n){r&&(this.data=e.data=r.data,this.rowIndex=e.rowIndex=r.rowIndex,this.dataIndex=e.dataIndex=r.dataIndex,this.isExpanded=e.isExpanded=r.isExpanded,e.row&&!n&&(e.row=r)),a.forEach(s=>{s(r)})},i!==e&&(e.watch=i.watch.bind(i)),e}}_cellPrepared(e,i){i.cellElement=(0,W.u)((0,p.Z)(e)),this.executeAction("onCellPrepared",i)}_rowPrepared(e,i,a){(0,Ai.aT)(e.get(0),"options",i),i.rowElement=(0,W.u)(e),this.executeAction("onRowPrepared",i)}_columnOptionChanged(e){var{optionNames:i}=e;if(V.checkChanges(i,["width","visibleWidth"])){var r=this._columnsController.getVisibleColumns().map(n=>n.visibleWidth||n.width);this.setColumnWidths({widths:r,optionNames:i})}else this._requireReady||this.render()}getCellIndex(e){return e.length?e[0].cellIndex:-1}getTableElements(){return this._tableElement||(0,p.Z)()}getTableElement(e){return this._tableElement}setTableElement(e,i){this._tableElement=e}optionChanged(e){switch(super.optionChanged(e),e.name){case"cellHintEnabled":case"onCellPrepared":case"onRowPrepared":case"onCellHoverChanged":case"keyboardNavigation":this._invalidate(!0,!0),e.handled=!0}}init(){this._scrollLeft=-1,this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._delayedTemplates=[],this._templateDeferreds=new Set,this._templatesCache={},this._templateTimeouts=new Set,this.createAction("onCellClick"),this.createAction("onRowClick"),this.createAction("onCellDblClick"),this.createAction("onRowDblClick"),this.createAction("onCellHoverChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onCellPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onRowPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering",afterExecute:e=>{this._afterRowPrepared(e)}}),this._columnsController.columnsChanged.add(this._columnOptionChanged.bind(this)),this._dataController&&this._dataController.changed.add(this._handleDataChanged.bind(this))}_afterRowPrepared(e){}_handleDataChanged(){}callbackNames(){return["scrollChanged"]}_updateScrollLeftPosition(){var e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}scrollTo(e){var i=this.element(),a=i&&i.children(".".concat(this.addWidgetPrefix(kd))).not(".".concat(this.addWidgetPrefix("content-fixed")));(0,v.$K)(e)&&(0,v.$K)(e.left)&&this._scrollLeft!==e.left&&(this._scrollLeft=e.left,a&&a.scrollLeft(e.left))}_getContent(e){var i;return null===(i=this._tableElement)||void 0===i?void 0:i.parent()}_removeContent(e){var i=this._getContent(e);i?.length&&i.remove()}_wrapTableInScrollContainer(e,i){var a=(0,p.Z)("<div>"),r=this.option("scrolling.useNative");return(!1===r||"auto"===r&&!Ue.nativeScrolling)&&a.addClass(this.addWidgetPrefix("scrollable-simulated")),S.Z.on(a,"scroll",()=>{var n=a.scrollLeft();n!==this._scrollLeft&&this.scrollChanged.fire({left:n},this.name)}),a.addClass(this.addWidgetPrefix("content")).addClass(this.addWidgetPrefix(kd)).append(e).appendTo(this.element()),this.setAria("role","presentation",a),a}needWaitAsyncTemplates(){return this.option("templatesRenderAsynchronously")&&!1===this.option("renderAsync")}waitAsyncTemplates(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=new b.BH;if(!e&&!this.needWaitAsyncTemplates())return i.resolve();var r=()=>b.gx.apply(this,Array.from(this._templateDeferreds)).done(()=>{this.isDisposed()?i.reject():this._templateDeferreds.size>0?r():i.resolve()}).fail(i.reject);return r(),i.promise()}_updateContent(e,i,a){return this.waitAsyncTemplates().done(()=>{this._removeContent(a),this.setTableElement(e,a),this._wrapTableInScrollContainer(e,a)})}_findContentElement(){}_getWidths(e){if(!e)return[];var i=[];return e.toArray().forEach(r=>{var n=r.offsetWidth;if(r.getBoundingClientRect){var s=(0,se.l)(r);s.width>r.offsetWidth-1&&(n=s.width)}i.push(n)}),i}getColumnWidths(e){if((this.option("forceApplyBindings")||E.ZT)(),e=e??this.getTableElement())for(var i=e.children("tbody:not(.dx-header)").children(),a=0;a<i.length;a++){var r=i.eq(a),n=r.hasClass(ts),s=r.hasClass(is),o=r.hasClass("dx-error-row");if(!("none"===r.get(0).style.display||r.hasClass("dx-state-invisible")||n||s||o)){var u=r.children("td");return this._getWidths(u)}}return[]}getVisibleColumnIndex(e,i){return e}setColumnWidths(e){var{widths:i}=e,r=this.getTableElement();if(r?.length&&i){var n=this.getColumns(),s=this.option("columnAutoWidth"),o=r.children("colgroup").children("col");o.toArray().forEach(l=>l.removeAttribute("style")),n.forEach((l,d)=>{if(s&&l.width&&!l.command)for(var u=ur(l.visibleWidth||l.width),h=ur(l.minWidth||u),c=r.children().children(".dx-row").not(".".concat(is)),_=0;_<c.length;_++){var g=c.eq(_),f=this.getVisibleColumnIndex(d,_),x=(g.hasClass(ts)?g.find("td[aria-colindex='".concat(f+1,"']:not(.").concat("dx-group-cell",")")):g.find("td").eq(f)).get(0);x&&(Hd(x,l,u),x.style.minWidth=h)}var w=Zd(i[d]);(0,v.$K)(w)&&(0,Ne.cl)(o.eq(d),w)})}}getCellElements(e){return this._getCellElementsCore(e)}_getCellElementsCore(e){if(!(e<0))return this._getRowElements().eq(e).children()}_getCellElement(e,i){var a=this.getCellElements(e),r=this._getVisibleColumnIndex(a,e,i);if(a?.length&&!(r<0)){var n=a.eq(r);return n.length>0?n:void 0}}_getRowElement(e){var i=this,a=(0,p.Z)(),r=i.getTableElements();if(y.S6(r,(n,s)=>{a=a.add(i._getRowElements((0,p.Z)(s)).eq(e))}),a.length)return a}getCellElement(e,i){var a=this._getCellElement(e,i);if(a)return(0,W.u)(a)}getRowElement(e){var i=this._getRowElement(e),a=[];if(i&&!(0,W.u)(i).get)for(var r=0;r<i.length;r++)a.push(i[r]);else a=i;return a}_getVisibleColumnIndex(e,i,a){if((0,v.HD)(a)){var r=this._columnsController.columnOption(a,"index");return this._columnsController.getVisibleIndex(r)}return a}getColumnElements(){}getColumns(e){return this._columnsController.getVisibleColumns(e)}getCell(e,i,a){var n,r=i||this._getRowElements();if(r.length>0&&e.rowIndex>=0&&("virtual"!==this.option("scrolling.mode")&&"virtual"!==this.option("scrolling.rowRenderingMode")&&(e.rowIndex=e.rowIndex<r.length?e.rowIndex:r.length-1),n=a||this.getCellElements(e.rowIndex),n?.length>0))return n.eq(n.length>e.columnIndex?e.columnIndex:n.length-1)}getRowsCount(){var e=this.getTableElement();return e&&1===e.length?e[0].rows.length:0}_getRowElementsCore(e){if(e=e||this.getTableElement()){var a=(this.option().rowTemplate||this.option("dataRowTemplate"))&&e.find("> tbody.".concat(la));return a&&a.length?a:e.find("> tbody > "+".".concat(la,", > .").concat(la))}return(0,p.Z)()}_getRowElements(e){return this._getRowElementsCore(e)}getRowIndex(e){return this._getRowElements().index(e)}getBoundingRect(){}getName(){}setScrollerSpacing(e){var i=this.element(),a=this.option("rtlEnabled");i&&i.css({paddingLeft:a?e:"",paddingRight:a?"":e})}isScrollbarVisible(e){var i=this.element(),a=this._tableElement;return!(!i||!a)&&(e?(0,I.Y_)(a)-(0,I.dz)(i)>0:(0,I.zp)(a)-(0,I.Cr)(i)>0)}isDisposed(){var e;return null===(e=this.component)||void 0===e?void 0:e._disposed}dispose(){var e,i;if((0,Z.Ym)()){var a=(0,Z.Jj)();null===(e=this._templateTimeouts)||void 0===e||e.forEach(r=>a.clearTimeout(r)),null===(i=this._templateTimeouts)||void 0===i||i.clear()}}}var rs="text-content",$d="dx-header-row",ns="dx-visibility-hidden",zd="dx-text-content-alignment-",Wd={defaultOptions:()=>({showColumnHeaders:!0,cellHintEnabled:!0}),views:{columnHeadersView:da.inherit(function(){var t=function(a,r,n){var s=(0,p.Z)("<div>").addClass(a.addWidgetPrefix(rs));a.setAria("role","presentation",s),e(a,r,n.column,s);var o=a.option("showColumnLines"),l=a.getController("columns").getHeaderContentAlignment(n.column.alignment);return s[o||"right"===l?"appendTo":"prependTo"](r)};function e(a,r,n,s){var o=a._getIndicatorElements(r,!0),l=a._getIndicatorElements(r),d=o&&o.length,u=a._getColumnAlignment(n.alignment),h=".".concat(a._getIndicatorClassName("sort")),c=".".concat(a._getIndicatorClassName("sortIndex")),_=l.filter(h),g=l.children().filter(c);(s=s||r.children(".".concat(a.addWidgetPrefix(rs)))).toggleClass(zd+u,d>0).toggleClass(zd+("left"===u?"right":"left"),d>0&&"center"===n.alignment).toggleClass("dx-sort-indicator",!!_.length).toggleClass("dx-sort-index-indicator",!!g.length).toggleClass("dx-header-filter-indicator",!!l.filter(".".concat(a._getIndicatorClassName("headerFilter"))).length)}var i={_createTable(){var a=this.callBase.apply(this,arguments);return S.Z.on(a,"mousedown selectstart",this.createAction(r=>{var{event:n}=r;n.shiftKey&&n.preventDefault()})),a},_isLegacyKeyboardNavigation(){return this.option("useLegacyKeyboardNavigation")},_getDefaultTemplate(a){var r=this;return function(n,s){var{caption:o}=a,l=!a.command||o&&"expand"!==a.command;"empty"===a.command?r._renderEmptyMessage(n,s):l?t(r,n,s).text(o):a.command&&n.html("&nbsp;")}},_renderEmptyMessage(a,r){var n=this._getEmptyHeaderText();if(n){var s=t(this,a,r);if(n.includes("{0}")){var[l,d]=n.split("{0}"),u=A.Z.format("dxDataGrid-emptyHeaderColumnChooserText"),h=this.component.getView("columnChooserView"),c=(0,p.Z)("<a>").text(u).addClass("dx-link");S.Z.on(c,"click",this.createAction(()=>h.showColumnChooser())),s.append(Y.Z.createTextNode(l)).append(c).append(Y.Z.createTextNode(d))}else s.text(n)}else a.html("&nbsp;")},_getEmptyHeaderText(){var a=!!this.component.getView("columnChooserView").hasHiddenColumns(),r=!!this.component.getView("headerPanel").hasGroupedColumns();switch(!0){case a&&r:return A.Z.format("dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText");case r:return A.Z.format("dxDataGrid-emptyHeaderWithGroupPanelText");case a:return A.Z.format("dxDataGrid-emptyHeaderWithColumnChooserText");default:return""}},_getHeaderTemplate(a){return a.headerCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(a)}},_processTemplate(a,r){var n=this,{column:o}=r,l=n.callBase(a);return"header"===r.rowType&&l&&o.headerCellTemplate&&!o.command?{render(d){var u=t(n,d.container,d.model);l.render((0,C.l)({},d,{container:u}))}}:l},_handleDataChanged(a){"refresh"===a.changeType&&(this._isGroupingChanged||this._requireReady)&&(this._isGroupingChanged=!1,this.render())},_renderCell(a,r){var n=this.callBase(a,r);return"header"===r.row.rowType&&(n.addClass("dx-cell-focus-disabled"),this._isLegacyKeyboardNavigation()||r.column&&!r.column.type&&n.attr("tabindex",this.option("tabindex")||0)),n},_setCellAriaAttributes(a,r){this.callBase(a,r),"header"===r.rowType&&(r.column.type||this.setAria("role","columnheader",a),r.column&&!r.column.command&&!r.column.isBand&&(a.attr("id",r.column.headerId),this.setAria("label","".concat(A.Z.format("dxDataGrid-ariaColumn")," ").concat(r.column.caption),a)))},_createRow(a){var r=this.callBase.apply(this,arguments);return r.toggleClass("dx-column-lines",this.option("showColumnLines")),"header"===a.rowType&&(r.addClass($d),this._isLegacyKeyboardNavigation()||na("columnHeaders",this,r,"td",this._handleActionKeyDown.bind(this))),r},_handleActionKeyDown(a){var{event:r}=a,n=(0,p.Z)(r.target);if(this._lastActionElement=r.target,n.is(".dx-header-filter")){var s=this.getController("headerFilter"),o=n.closest("td"),l=this.getColumnIndexByElement(o);l>=0&&s.showHeaderFilterMenu(l,!1)}else{var d=n.closest(".dx-row");this._processHeaderAction(r,d)}r.preventDefault()},_renderCore(){var a=this.element(),r={};if(!this._tableElement||this._dataController.isLoaded()||this._hasRowElements){a.addClass(this.addWidgetPrefix("headers")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")).empty(),this.setAria("role","presentation",a);var n=this._updateContent(this._renderTable({change:r}),r);return this.getRowCount()>1&&a.addClass("dx-header-multi-row"),this.callBase.apply(this,arguments),n}},_renderRows(){(this._dataController.isLoaded()||this._hasRowElements)&&(this.callBase.apply(this,arguments),this._hasRowElements=!0)},_renderRow(a,r){var n=1===this.getRowCount()?null:r.row.rowIndex;r.columns=this.getColumns(n),this.callBase(a,r)},_createCell(a){var{column:r}=a,n=this.callBase.apply(this,arguments);return r.rowspan>1&&"header"===a.rowType&&n.attr("rowSpan",r.rowspan),n},_getRows(){var a=[],r=this.getRowCount();if(this.option("showColumnHeaders"))for(var n=0;n<r;n++)a.push({rowType:"header",rowIndex:n});return a},_getCellTemplate(a){if("header"===a.rowType)return this._getHeaderTemplate(a.column)},_columnOptionChanged(a){var{changeTypes:r}=a,{optionNames:n}=a;r.grouping||r.groupExpanding?r.grouping&&(this._isGroupingChanged=!0):(this.callBase(a),(n.width||n.visible)&&this.resizeCompleted.fire())},_isElementVisible:a=>a&&a.visible,_alignCaptionByCenter(a){var r=this._getIndicatorContainer(a,!0);r&&r.length&&(r.filter(".".concat(ns)).remove(),(r=this._getIndicatorContainer(a)).clone().addClass(ns).css("float","").insertBefore(a.children(".".concat(this.addWidgetPrefix(rs)))))},_updateCell(a,r){"header"===r.rowType&&"center"===r.column.alignment&&this._alignCaptionByCenter(a),this.callBase.apply(this,arguments)},_updateIndicator(a,r,n){var s=this.callBase.apply(this,arguments);return"center"===r.alignment&&this._alignCaptionByCenter(a),e(this,a,r),s},_getIndicatorContainer(a,r){var n=this.callBase(a);return r?n:n.filter(":not(.".concat(ns,")"))},_isSortableElement:()=>!0,getHeadersRowHeight(){var a=this.getTableElement(),r=a&&a.find(".".concat($d));return r&&r.toArray().reduce((n,s)=>n+(0,I.Cr)(s),0)||0},getHeaderElement(a){var r=this.getColumnElements();return r&&r.eq(a)},getColumnElements(a,r){var s,n=this,o=n._columnsController,l=n.getRowCount();if(n.option("showColumnHeaders")){if(l>1&&(!(0,v.$K)(a)||(0,v.$K)(r))){var d=[],u=(0,v.$K)(r)?o.getChildrenByBandColumn(r,!0):o.getVisibleColumns();return(0,y.S6)(u,(h,c)=>{var _=(0,v.$K)(a)?a:o.getRowIndex(c.index);(s=n._getCellElement(_,o.getVisibleIndex(c.index,_)))&&d.push(s.get(0))}),(0,p.Z)(d)}if(!a||a<l)return n.getCellElements(a||0)}},getColumnIndexByElement(a){var r=this.getCellIndex(a),n=a.closest(".dx-row"),{rowIndex:s}=n[0],o=this.getColumns(s)[r];return o?o.index:-1},getVisibleColumnIndex(a,r){var n=this.getColumns()[a];return n?this._columnsController.getVisibleIndex(n.index,r):-1},getColumnWidths(){var a=this.getColumnElements();return a&&a.length?this._getWidths(a):this.callBase.apply(this,arguments)},allowDragging(a){var r=a&&this._columnsController.getRowIndex(a.index),n=this.getColumns(r);return(this.option("allowColumnReordering")||this._columnsController.isColumnOptionUsed("allowReordering"))&&a.allowReordering&&n.length>1},getBoundingRect(){var a=this.getColumnElements();return a&&a.length?{top:this.getTableElement().offset().top}:null},getName:()=>"headers",getColumnCount(){var a=this.getColumnElements();return a?a.length:0},isVisible(){return this.option("showColumnHeaders")},optionChanged(a){switch(a.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":this._invalidate(!0,!0),a.handled=!0;break;default:this.callBase(a)}},getHeight(){return this.getElementHeight()},getContextMenuItems(a){var r=this,{column:n}=a;if(a.row&&("header"===a.row.rowType||"detailAdaptive"===a.row.rowType)){var s=r.option("sorting");if(s&&"none"!==s.mode&&n&&n.allowSorting){var o=function(l){setTimeout(()=>{r._columnsController.changeSortOrder(n.index,l.itemData.value)})};return[{text:s.ascendingText,value:"asc",disabled:"asc"===n.sortOrder,icon:"context-menu-sort-asc",onItemClick:o},{text:s.descendingText,value:"desc",disabled:"desc"===n.sortOrder,icon:"context-menu-sort-desc",onItemClick:o},{text:s.clearText,value:"none",disabled:!n.sortOrder,icon:"context-menu-sort-none",onItemClick:o}]}}},getRowCount(){return this._columnsController&&this._columnsController.getRowCount()},setRowsOpacity(a,r,n){var s,o,l=this.getRowCount(),d=this._columnsController.getColumns(),u=d&&d[a],h=u&&u.isBand&&u.index,c=(g,f)=>{g.ownerBand===h&&(o.eq(f).css({opacity:r}),g.isBand&&this.setRowsOpacity(g.index,r,s+1))};if((0,v.$K)(h))for(s=n=n||0;s<l;s++)(o=this.getCellElements(s))&&this.getColumns(s).forEach(c)}};return i}())}};const $=(0,M.Z)((0,M.Z)((0,M.Z)({},ne),V),{modules:[]});$.registerModule("columnHeaders",Wd);var hr=L(3422),Pe=L(9869),dt=L(6340),NC=L(3540),X=L(2064),Kd=["filterValues","filterType","fixed","fixedPosition"],cr=["visibleIndex","dataField","name","dataType","width","visible","sortOrder","lastSortOrder","sortIndex","groupIndex","filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","added"].concat(Kd),HC={visibleWidth:!0,bestFitWidth:!0,bufferedFilterValue:!0},Gd=Number.MAX_SAFE_INTEGER||9007199254740991,Ht="groupExpand",ss=/columns\[(\d+)\]\.?/gi,zC={visible:!0,showInColumnChooser:!0},WC={number:["=","<>","<",">","<=",">=","between"],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">=","between"],datetime:["=","<>","<",">","<=",">=","between"]},KC={visibleIndex:!0,groupIndex:!0,grouped:!0,sortIndex:!0,sortOrder:!0},Di="group",Oi="columnChooser",Zt=L(7921),Se=L(5789),me=L(1730),Ud=function(t){t.filterOperations=t.defaultFilterOperations},GC=1,pr=function(t,e,i,a){var r={};if(e){(0,v.HD)(e)&&(e={dataField:e}),t.setName(e);var n={};if(e.command)n=(0,dt.HR)(r,e);else{r=t.getCommonSettings(e),i&&i.name&&i.dataField&&(e=(0,C.l)({},e,{dataField:i.dataField}));var s=t._createCalculatedColumnOptions(e,a);e.type||(n={headerId:"dx-col-".concat(GC++)}),n=(0,dt.HR)(n,zC),(0,dt.HR)(n,r),(0,dt.HR)(n,s),(0,dt.HR)(n,e),(0,dt.HR)(n,{selector:null})}return e.filterOperations===e.defaultFilterOperations&&Ud(n),n}},Ri=function t(e,i,a){var r=[];return i&&(0,y.S6)(i,(n,s)=>{var o=e._columnsUserState&&ds(s,e._columnsUserState[n])&&e._columnsUserState[n],l=pr(e,s,o,a);l&&(a&&(l.ownerBand=a),r.push(l),l.columns&&(r=r.concat(t(e,l.columns,l)),delete l.columns,l.hasColumns=!0))}),r},ai=function(t,e){for(var i=[],a=e[t];a;)i.unshift(a),a=e[t=a.index];return i},UC=function t(e,i,a){var r=[],n=i[e];if(n)for(var s=0;s<n.length;s++){var o=n[s];(!(0,v.$K)(o.groupIndex)||o.showWhenGrouped)&&(r.push(o),a&&o.isBand&&(r=r.concat(t(o.index,i,a))))}return r},qC=function t(e,i){var a=0,r=e.getChildrenByBandColumn(i,!0);return(0,y.S6)(r,(n,s)=>{s.isBand?(s.colspan=s.colspan||t(e,s.index),a+=s.colspan||1):a+=1}),a},os=function(t){var e=(0,v.dt)(t);return"string"!==e&&"boolean"!==e&&"number"!==e&&"date"!==e&&"object"!==e&&(e=void 0),e},Yd=function(t,e){switch(t){case"date":case"datetime":return Se.Z.getDateSerializationFormat(e);case"number":if((0,v.HD)(e))return"string";if((0,v.kE)(e))return null}},jd=function(t,e){t.deserializeValue||(V.isDateType(e)&&(t.deserializeValue=function(i){return Se.Z.deserializeDate(i)},t.serializeValue=function(i){return(0,v.HD)(i)?i:Se.Z.serializeDate(i,this.serializationFormat)}),"number"===e&&(t.deserializeValue=function(i){var a=parseFloat(i);return isNaN(a)?i:a},t.serializeValue=function(i,a){return"filter"===a?i:(0,v.$K)(i)&&"string"===this.serializationFormat?i.toString():i}))},QC=function(t){return!0===t.value?this.trueText||"true":!1===t.value?this.falseText||"false":t.valueText||""},qd=function(t){if("boolean"===t)return QC},Xd=function(t){(0,y.S6)(t._columns,(e,i)=>{i.index=e}),(0,y.S6)(t._columns,(e,i)=>{(0,v.Kn)(i.ownerBand)&&(i.ownerBand=i.ownerBand.index)}),(0,y.S6)(t._commandColumns,(e,i)=>{i.index=-(e+1)})},Jd=function(t,e){(0,Zt.Sq)(t._columns,"groupIndex",e,i=>{var{grouped:a}=i;return delete i.grouped,a})},ls=function(t,e,i){var n,a=(0,v.Kn)(e)?e.rowIndex:null,r=i===Di?t.getGroupColumns():i===Oi?t.getChooserColumns():t.getVisibleColumns(a);return e=(0,v.Kn)(e)?e.columnIndex:e,(n=r[e])&&n.type===Ht&&(n=t._columns.filter(s=>n.type===s.type)[0]||n),n&&(0,v.$K)(n.index)?n.index:-1};function ds(t,e){return t&&e&&e.name===(t.name||t.dataField)&&(e.dataField===t.dataField||t.name)}var Qd=function(t){var l,d,u,e=t._columnsUserState,i=t._ignoreColumnOptionNames||[],a=t._columns,r={},n=[],s=!0,o=[];function h(f,m){if(m)for(var x=0;x<cr.length;x++){var w=cr[x];i.includes(w)||("dataType"===w?f[w]=f[w]||m[w]:Kd.includes(w)?w in m&&(f[w]=m[w]):("selectedFilterOperation"===w&&m[w]&&(f.defaultSelectedFilterOperation=f[w]||null),f[w]=m[w]))}}function c(f,m){for(var x=m.name||m.dataField,w=r[x]||0,T=0;T<f.length;T++)if(ds(m,f[T])){if(!w)return r[x]=r[x]||0,r[x]++,T;w--}return-1}if(e){for(u=0;u<a.length;u++)d=c(e,a[u]),s=s&&d>=0,o.push(d);for(u=0;u<a.length;u++)l=a[u],d=o[u],(t._hasUserState||s)&&h(l,e[d]),d>=0&&(0,v.$K)(e[d].initialIndex)?n[d]=l:n.push(l);var _=!1;for(u=0;u<e.length;u++){var g=e[u];g.added&&c(a,g)<0&&(h(l=pr(t,g.added),g),n.push(l),g.added.columns&&(_=!0))}_&&(Xd(t),n=Ri(t,n)),Bi(t,n)}},ri=function(t,e){Xd(t),Jd(t,e),function(t,e){(0,y.S6)(t._columns,(i,a)=>{(0,v.$K)(a.sortIndex)&&!vr(a.sortOrder)&&delete a.sortIndex}),(0,Zt.Sq)(t._columns,"sortIndex",e,i=>!(0,v.$K)(i.groupIndex)&&vr(i.sortOrder))}(t,e),nu(t),function(t,e){for(var i,a=[],r=t.getBandColumnsCache(),n=[],s=t._columns.filter(d=>!d.command),o=0;o<s.length;o++)i=s[o],ai(o,r.columnParentByIndex).length?n.push(i):a.push(i);(0,Zt.Sq)(n,"visibleIndex",e),(0,Zt.Sq)(a,"visibleIndex",e)}(t,e)},_r=function(t){t.resetColumnsCache()};function Bi(t,e){t._previousColumns=t._columns,t._columns=e,_r(t),t.updateColumnDataTypes()}var ut=function(t,e,i,a){var r,n=t._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:a};i=(i=i||"all").split(".")[0];var{changeTypes:s}=n;e&&!s[e]&&(s[e]=!0,s.length++);var{optionNames:o}=n;i&&!o[i]&&(o[i]=!0,o.length++),(void 0===a||a!==n.columnIndex)&&((0,v.$K)(a)&&(null!==(r=n.columnIndices)&&void 0!==r||(n.columnIndices=[]),(0,v.$K)(n.columnIndex)&&n.columnIndices.push(n.columnIndex),n.columnIndices.push(a)),delete n.columnIndex),t._columnChanges=n,_r(t)},ua=function(t){var r,e=t.option("onColumnsChanging"),i=t._columnChanges;t.isInitialized()&&!t._updateLockCount&&i&&(e&&(t._updateLockCount++,e((0,C.l)({component:t.component},i)),t._updateLockCount--),t._columnChanges=void 0,(r=i.optionNames)&&["dataField","lookup","dataType","columns"].some(n=>r[n])?(t._reinitAfterLookupChanges=i?.optionNames.lookup,t.reinit(),t._reinitAfterLookupChanges=void 0):t.columnsChanged.fire(i))},us=function(t,e,i,a,r){var o,l,d,n=(0,Q.vb)(i),s=e.index;if(3===arguments.length)return n(e,{functionsAsIs:!0});var u=n(e,{functionsAsIs:!0});if(!(0,E.bY)(u,a,{maxDepth:5})){"groupIndex"===i||"calculateGroupValue"===i?(l="grouping",function(t,e,i,a){if(i>=0)a>=0||(e.lastSortOrder=e.sortOrder);else{var n=t.option("sorting.mode"),s=e.lastSortOrder;"single"===n&&t._columns.some(l=>l!==e&&(0,v.$K)(l.sortIndex))&&(s=void 0),e.sortOrder=s}}(t,e,a,u)):l="sortIndex"===i||"sortOrder"===i||"calculateSortValue"===i?"sorting":"columns";var h=(0,Q.OM)(i);h(e,a,{functionsAsIs:!0});var c=function(t,e){var a,i=[],r=t.getBandColumnsCache(),n=function(o){return o.ownerBand===e.ownerBand};if(r.isPlain){var s=t._columns.indexOf(e);s>=0&&(i=["columns[".concat(s,"]")])}else for(a=t._columns.filter(n);a.length&&-1!==a.indexOf(e);)i.unshift("columns[".concat(a.indexOf(e),"]")),a=(e=r.columnParentByIndex[e.index])?t._columns.filter(n):[];return i.join(".")}(t,e);KC[i]&&(ri(t,e),a=n(e)),("name"===i||"allowEditing"===i)&&t._checkColumns(),!(0,v.$K)(u)&&!(0,v.$K)(a)&&0!==i.indexOf("buffer")&&(r=!0),r?_r(t):(!cr.includes(i)&&"visibleWidth"!==i&&(o=t.option("columns"),d=t.getColumnByPath(c,o),(0,v.HD)(d)&&(d=o[s]={dataField:d}),d&&ds(d,e)&&h(d,a,{functionsAsIs:!0})),ut(t,l,i,s)),c&&function(t,e){var{value:i}=e,{optionName:a}=e,{prevValue:r}=e,{fullOptionName:n}=e,s="".concat(n,".").concat(a);!HC[a]&&t._skipProcessingColumnsChange!==s&&(t._skipProcessingColumnsChange=s,t.component._notifyOptionChanged(s,i,r),t._skipProcessingColumnsChange=!1)}(t,{fullOptionName:c,optionName:i,value:a,prevValue:u})}};function vr(t){return"asc"===t||"desc"===t}var oS=function(t,e){if(this.dataField){var i=this.dataField.split("."),a=i.length-1;this.serializeValue&&(e=this.serializeValue(e));for(var r=0;r<a;r++){var n=i[r];t=t[n]=t[n]||{}}t[i[a]]=e}},lS=function t(e,i,a){var r=[];return e[i=i||0]&&(0,y.S6)(e[i],(n,s)=>{(s.ownerBand===a||s.type===Ht)&&(s.isBand&&s.colspan?r.push.apply(r,t(e,i+1,s.index)):(!s.command||i<1)&&r.push(s))}),r},hs=(t,e)=>{var i=t._columns.filter(a=>a.type===e.type);return!!i.length},eu=function(t,e){var i=t.option("rtlEnabled");return e.command&&!hs(t,e)||!e.fixedPosition?i?"right":"left":e.fixedPosition},tu=function(t,e,i,a){var r,n=this.getRowCount(),s=t[a]&&t[a].rowspan,o=e.filter(l=>l.type===i);return t.forEach((l,d)=>{l.type===i&&(r=d,s=t[d+1]?t[d+1].rowspan:n)}),s>1&&(o=(0,y.UI)(o,l=>(0,C.l)({},l,{rowspan:s}))),o.unshift.apply(o,(0,v.$K)(r)?[r,1]:[a,0]),t.splice.apply(t,o),s||1},iu=function(t,e){for(var i=t?t.toString():"0";i.length<e;)i="0".concat(i);return i},au=(t,e,i,a)=>{for(var r,n,s=e.slice().map(_=>(0,C.l)({},_)),o=t._isColumnFixing(),l=i.slice().map(_=>(0,C.l)({fixed:o},_)),d=_=>i.reduce((g,f,m)=>f.type===(a&&_.type===Ht?"expand":_.type)||f.command===_.command?m:g,-1),u=_=>_.command!==i[n].command,h=0;h<e.length;h++)(n=(r=e[h])&&(r.type||r.command)?d(r):-1)>=0&&(a?(s[h]=(0,C.l)({fixed:o},i[n],r),r.type!==Ht&&(l=l.filter(u))):s[h]=(0,C.l)({},r,i[n],r.type===Ht&&{visibleIndex:r.visibleIndex,index:r.index,headerId:r.headerId,allowFixing:0===r.groupIndex,allowReordering:0===r.groupIndex,groupIndex:r.groupIndex}));return e.length&&a&&l.length&&(s=s.concat(l)),s},ru=(t,e)=>(0,v.$K)(e.fixed)||!e.type?e.fixed:t._isColumnFixing(),nu=t=>{t._bandColumnsCache=void 0},su=(t,e)=>{var a,i=(0,v.HD)(e)&&e.substr(0,e.indexOf(":"));if(void 0!==e)return i&&(e=e.substr(i.length+1)),i?a=t.filter(r=>"".concat(r[i])===e)[0]:["index","name","dataField","caption"].some(r=>!!(a=t.filter(n=>n[r]===e)[0])),a},ou={defaultOptions:()=>({commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:A.Z.format("dxDataGrid-trueText"),falseText:A.Z.format("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columnResizingMode:"nextColumn",columnMinWidth:void 0,columnWidth:void 0,adaptColumnWidthByRatio:!0,columns:void 0,regenerateColumnsByVisibleItems:!1,customizeColumns:null,dateSerializationFormat:void 0}),controllers:{columns:class _S extends ne.Controller{_getExpandColumnOptions(){return{type:"expand",command:"expand",width:"auto",cssClass:"dx-command-expand",allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1}}_getFirstItems(e){var i,a=[];return e&&e.items().length>0&&(i=V.normalizeSortingInfo(e.group()).length,a=function r(n,s){if(!n||!s)return n;for(var o=0;o<n.length;o++){var l=r(n[o].items||n[o].collapsedItems,s-1);if(l&&l.length)return l}}(e.items(),i)||[]),a}_endUpdateCore(){!this._skipProcessingColumnsChange&&ua(this)}init(e){var i=this.option("columns");this._commandColumns=this._commandColumns||[],this._columns=this._columns||[],this._isColumnsFromOptions=!!i,this._isColumnsFromOptions?(Bi(this,i?Ri(this,i):[]),Qd(this)):Bi(this,this._columnsUserState?Ri(this,this._columnsUserState):this._columns),function(t){var e=t._getExpandColumnOptions();t.addCommandColumn(e)}(this),this._dataSourceApplied?this.applyDataSource(this._dataSource,!0,e):ri(this),this._checkColumns()}callbackNames(){return["columnsChanged"]}getColumnByPath(e,i){var a,r=[];return e.replace(ss,(n,s)=>(r.push(parseInt(s)),"")),r.length&&(a=i?r.reduce((n,s)=>n&&n.columns&&n.columns[s],{columns:i}):function(t,e){var i,a,n=function(o){return o.ownerBand===(i?i.index:void 0)};if(t.getBandColumnsCache().isPlain)i=t._columns[e[0]];else{a=t._columns.filter(n);for(var s=0;s<e.length;s++)(i=a[e[s]])&&(a=t._columns.filter(n))}return i}(this,r)),a}optionChanged(e){var i;switch(e.name){case"adaptColumnWidthByRatio":e.handled=!0;break;case"dataSource":e.value!==e.previousValue&&!this.option("columns")&&(!Array.isArray(e.value)||!Array.isArray(e.previousValue))&&(this._columns=[]);break;case"columns":i=this._skipProcessingColumnsChange,e.handled=!0,this._skipProcessingColumnsChange||(e.name===e.fullName?(this._columnsUserState=null,this._ignoreColumnOptionNames=null,this.init()):(this._columnOptionChanged(e),i=!0)),i&&this._updateRequireResize(e);break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"columnFixing":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"columnHidingEnabled":case"dateSerializationFormat":case"columnResizingMode":case"columnMinWidth":case"columnWidth":e.handled=!0,this.reinit("columnWidth"===e.fullName&&["width"]);break;case"rtlEnabled":this.reinit();break;default:super.optionChanged(e)}}_columnOptionChanged(e){var i={},a=this.getColumnByPath(e.fullName),r=e.fullName.replace(ss,"");a&&(r?i[r]=e.value:i=e.value,this._skipProcessingColumnsChange=e.fullName,this.columnOption(a.index,i),this._skipProcessingColumnsChange=!1)}_updateRequireResize(e){var{component:i}=this;"width"===e.fullName.replace(ss,"")&&i._updateLockCount&&(i._requireResize=!0)}publicMethods(){return["addColumn","deleteColumn","columnOption","columnCount","clearSorting","clearGrouping","getVisibleColumns","getVisibleColumnIndex"]}applyDataSource(e,i,a){var r=e&&e.isLoaded();if(this._dataSource=e,!this._dataSourceApplied||0===this._dataSourceColumnsCount||i||this.option("regenerateColumnsByVisibleItems")){if(r){if(!this._isColumnsFromOptions){var n=function(t,e){for(var a,i=t._getFirstItems(e),r={},n=[],s=0;s<i.length;s++)if(i[s])for(a in i[s])(!(0,v.mf)(i[s][a])||tt.default.isWrapped(i[s][a]))&&(r[a]=!0);for(a in r)if(0!==a.indexOf("__")){var o=pr(t,a);n.push(o)}return n}(this,e);n.length&&(Bi(this,n),this._dataSourceColumnsCount=this._columns.length,Qd(this))}return this.updateColumns(e,i,a)}this._dataSourceApplied=!1,ri(this)}else if(r&&!this.isAllDataTypesDefined(!0)&&this.updateColumnDataTypes(e))return ut(this,"columns"),ua(this),(new b.BH).reject().promise()}reset(){this._dataSource=null,this._dataSourceApplied=!1,this._dataSourceColumnsCount=void 0,this.reinit()}resetColumnsCache(){this._visibleColumns=void 0,this._fixedColumns=void 0,this._rowCount=void 0,nu(this)}reinit(e){this._columnsUserState=this.getUserState(),this._ignoreColumnOptionNames=e||null,this.init(),e&&(this._ignoreColumnOptionNames=null)}isInitialized(){return!!this._columns.length||!!this.option("columns")}isDataSourceApplied(){return this._dataSourceApplied}getCommonSettings(e){var i,a,r=(!e||!e.type)&&this.option("commonColumnSettings")||{},n=null!==(i=this.option("grouping"))&&void 0!==i?i:{},s=null!==(a=this.option("groupPanel"))&&void 0!==a?a:{};return(0,C.l)({allowFixing:this.option("columnFixing.enabled"),allowResizing:this.option("allowColumnResizing")||void 0,allowReordering:this.option("allowColumnReordering"),minWidth:this.option("columnMinWidth"),width:this.option("columnWidth"),autoExpandGroup:n.autoExpandAll,allowCollapsing:n.allowCollapsing,allowGrouping:s.allowColumnDragging&&s.visible||n.contextMenuEnabled},r)}isColumnOptionUsed(e){for(var i=0;i<this._columns.length;i++)if(this._columns[i][e])return!0}isAllDataTypesDefined(e){var i=this._columns;if(!i.length)return!1;for(var a=0;a<i.length;a++)if((i[a].dataField||i[a].calculateCellValue!==i[a].defaultCalculateCellValue)&&(!i[a].dataType||e&&i[a].deserializeValue&&void 0===i[a].serializationFormat))return!1;return!0}getColumns(){return this._columns}isBandColumnsUsed(){return this.getColumns().some(e=>e.isBand)}getGroupColumns(){var e=[];return(0,y.S6)(this._columns,function(){(0,v.$K)(this.groupIndex)&&(e[this.groupIndex]=this)}),e}_shouldReturnVisibleColumns(){return!0}_compileVisibleColumns(e){return this._visibleColumns=this._visibleColumns||this._compileVisibleColumnsCore(),e=(0,v.$K)(e)?e:this._visibleColumns.length-1,this._visibleColumns[e]||[]}getVisibleColumns(e,i){return this._shouldReturnVisibleColumns()?this._compileVisibleColumns.apply(this,arguments):[]}getFixedColumns(e){return this._fixedColumns=this._fixedColumns||this._getFixedColumnsCore(),e=(0,v.$K)(e)?e:this._fixedColumns.length-1,this._fixedColumns[e]||[]}getFilteringColumns(){return this.getColumns().filter(e=>(e.dataField||e.name)&&(e.allowFiltering||e.allowHeaderFiltering)).map(e=>{var i=(0,C.l)(!0,{},e);return(0,v.$K)(i.dataField)||(i.dataField=i.name),i.filterOperations=e.filterOperations!==e.defaultFilterOperations?i.filterOperations:null,i})}getColumnIndexOffset(){return 0}_getFixedColumnsCore(){var s,o,l,e=[],i=this.getRowCount(),r={command:"transparent"},n=0;if(this._isColumnFixing())for(var d=0;d<=i;d++){s=0,l=null,o=null;for(var u=this.getVisibleColumns(d,!0),h=0;h<u.length;h++){var c=u[h-1],_=u[h];_.fixed?c&&c.fixed&&eu(this,c)!==eu(this,_)?(0,v.$K)(o)||(o=h):l=_.fixedPosition:(0===d&&(_.isBand&&_.colspan?n+=_.colspan:n++),s++,(0,v.$K)(o)||(o=h))}if(0===d&&(0===s||s>=u.length))return[];(0,v.$K)(o)||(o="right"===l?0:u.length),e[d]=u.slice(0),r.colspan||(r.colspan=n),e[d].splice(o,s,r)}return e.map(g=>g.map(f=>{var m=(0,M.Z)({},f);return m.headerId&&(m.headerId+="-fixed"),m}))}_isColumnFixing(){var e=this.option("columnFixing.enabled");return!e&&(0,y.S6)(this._columns,(i,a)=>{if(a.fixed)return e=!0,!1}),e}_getExpandColumnsCore(){return this.getGroupColumns()}getExpandColumns(){var i,e=this._getExpandColumnsCore(),a=e.filter(o=>0===o.groupIndex)[0],r=a&&a.fixed,n=this._isColumnFixing(),s=this.option("rtlEnabled");return e.length&&(i=this.columnOption("command:expand")),(0,y.UI)(e,o=>(0,C.l)({},o,{visibleWidth:null,minWidth:null,cellTemplate:(0,v.$K)(o.groupIndex)?null:o.cellTemplate,headerCellTemplate:null,fixed:!(!(0,v.$K)(o.groupIndex)||!r)||n,fixedPosition:s?"right":"left"},i,{index:o.index,type:o.type||Ht}))}getBandColumnsCache(){if(!this._bandColumnsCache){var e=this._columns,i={},a={},r=!0;e.forEach(n=>{var{ownerBand:s}=n,o=(0,v.Kn)(s)?s.index:s,l=e[o];n.hasColumns&&(r=!1),n.colspan&&(n.colspan=void 0),n.rowspan&&(n.rowspan=void 0),l?a[n.index]=l:o=-1,i[o]=i[o]||[],i[o].push(n)}),this._bandColumnsCache={isPlain:r,columnChildrenByIndex:i,columnParentByIndex:a}}return this._bandColumnsCache}_isColumnVisible(e){return e.visible&&this.isParentColumnVisible(e.index)}_isColumnInGroupPanel(e){return(0,v.$K)(e.groupIndex)&&!e.showWhenGrouped}hasVisibleDataColumns(){return this._columns.some(i=>{var a=this._isColumnVisible(i),r=this._isColumnInGroupPanel(i);return a&&!r&&!i.command})}_compileVisibleColumnsCore(){var e=this.getBandColumnsCache(),i=au(this,this._columns,this._commandColumns,!0);!function(t,e,i){for(var a,r=0;r<e.length;r++){var n=e[r];(n.visible||n.command)&&(n.isBand&&(n.colspan=n.colspan||qC(t,n.index)),(!n.isBand||!n.colspan)&&(a=t.getRowCount(),!n.command&&(!(0,v.$K)(n.groupIndex)||n.showWhenGrouped)&&(a-=ai(n.index,i.columnParentByIndex).length),a>1&&(n.rowspan=a)))}}(this,i,e);var a=this._getIndexedColumns(i),r=this._getVisibleColumnsFromIndexed(a);return!this.hasVisibleDataColumns()&&this._columns.length&&r[r.length-1].push({command:"empty"}),r}_getIndexedColumns(e){for(var i=this.option("rtlEnabled"),a=this.getRowCount(),r=function(t){var e;for(e=0;t>1;e++)t/=10;return e}(e.length),n=this.getBandColumnsCache(),s=[],o=[],l=0;l<a;l+=1)o[l]=[{}],s[l]=[{},{},{}];return e.forEach(d=>{var u,h,c,_,f,{visibleIndex:g}=d,m=ai(d.index,n.columnParentByIndex),x=this._isColumnVisible(d),w=this._isColumnInGroupPanel(d);if(x&&!w){var T=m.length;if(g<0)g=-g,f=o[T];else if(d.fixed=null!==(h=null===(u=m[0])||void 0===u?void 0:u.fixed)&&void 0!==h?h:d.fixed,d.fixedPosition=null!==(_=null===(c=m[0])||void 0===c?void 0:c.fixedPosition)&&void 0!==_?_:d.fixedPosition,d.fixed){var O=!!d.command&&!hs(this,d),P="right"===d.fixedPosition;i&&!O&&(P=!P),f=P?s[T][2]:s[T][0]}else f=s[T][1];if(m.length){g=iu(g,r);for(var F=m.length-1;F>=0;F-=1)g=iu(m[F].visibleIndex,r)+g}f[g]=f[g]||[],f[g].push(d)}}),{positiveIndexedColumns:s,negativeIndexedColumns:o}}_getVisibleColumnsFromIndexed(e){for(var i=this,{positiveIndexedColumns:a,negativeIndexedColumns:r}=e,n=[],s=this.getRowCount(),o=au(this,this.getExpandColumns(),this._columns),l=0,d=0,u=function(c){n.push([]),(0,dt.jS)(r[c],(f,m)=>{n[c].unshift.apply(n[c],m)});var _=n[c].length;a[c].forEach(f=>{(0,dt.jS)(f,(m,x)=>{n[c].push.apply(n[c],x)})}),d<=c&&(d+=tu.call(i,n[c],o,"detailExpand",_)),l<=c&&(l+=tu.call(i,n[c],o,Ht,_))},h=0;h<s;h+=1)u(h);return n.push(lS(n)),n}getInvisibleColumns(e,i){var n,a=this,r=[];return(0,y.S6)(e=e||a._columns,(s,o)=>{if(o.ownerBand===i){if(o.isBand)return void((n=o.visible?a.getInvisibleColumns(a.getChildrenByBandColumn(o.index),o.index):a.getChildrenByBandColumn(o.index)).length&&(r.push(o),r=r.concat(n)));o.visible||r.push(o)}}),r}getChooserColumns(e){return((t,e)=>{if("asc"!==e&&"desc"!==e)return t;var i="asc"===e?1:-1;return t.sort((a,r)=>i*(a.caption||"").localeCompare(r.caption||"")),t})((e?this.getColumns():this.getInvisibleColumns()).filter(n=>n.showInColumnChooser),this.option("columnChooser.sortOrder"))}allowMoveColumn(e,i,a,r){var n=ls(this,e,a),s=this._columns[n];return!(!s||!(s.allowReordering||s.allowGrouping||s.allowHiding))&&(a===r?a!==Oi&&(e=(0,v.Kn)(e)?e.columnIndex:e)!==(i=(0,v.Kn)(i)?i.columnIndex:i)&&e+1!==i:a===Di&&r!==Oi||r===Di?s&&s.allowGrouping:a!==Oi&&r!==Oi||s&&s.allowHiding)}moveColumn(e,i,a,r){var s,d,n={},o=ls(this,e,a),l=ls(this,i,r);if(o>=0){var u=this._columns[o];if(i=(0,v.Kn)(i)?i.columnIndex:i,d=l>=0?this._columns[l].groupIndex:-1,(0,v.$K)(u.groupIndex)&&a===Di&&(d>u.groupIndex&&d--,r!==Di?n.groupIndex=void 0:(s=u.groupIndex,delete u.groupIndex,Jd(this))),r===Di)n.groupIndex=function(t,e,i){var r,a=t.getGroupColumns();if(i>=0)for(r=0;r<a.length;r++)a[r].groupIndex>=i&&a[r].groupIndex++;else for(i=0,r=0;r<a.length;r++)i=Math.max(i,a[r].groupIndex+1);return i}(this,0,d),u.groupIndex=s;else if(i>=0){var h=this._columns[l];n.visibleIndex=!h||u.ownerBand!==h.ownerBand||ru(this,u)^ru(this,h)?Gd:h.visibleIndex}var c=r!==Oi;u.visible!==c&&(n.visible=c),this.columnOption(u.index,n)}}changeSortOrder(e,i){var a={},r=this.option("sorting"),n=r&&r.mode,l=this._columns[e];("single"===n||"multiple"===n)&&l&&l.allowSorting&&(("single"===n||!i)&&!(0,v.$K)(l.groupIndex)&&(0,y.S6)(this._columns,function(d){d!==e&&this.sortOrder&&((0,v.$K)(this.groupIndex)||delete this.sortOrder,delete this.sortIndex)}),vr(i)?l.sortOrder!==i&&(a.sortOrder=i):"none"===i?l.sortOrder&&(a.sortIndex=void 0,a.sortOrder=void 0):function(d){if("ctrl"===i){if(!("sortOrder"in d)||!("sortIndex"in d))return!1;a.sortOrder=void 0,a.sortIndex=void 0}else a.sortOrder=(0,v.$K)(d.groupIndex)||(0,v.$K)(d.sortIndex)?"desc"===d.sortOrder?"asc":"desc":"asc"}(l)),this.columnOption(l.index,a)}getSortDataSourceParameters(e){var i=[],a=[];return(0,y.S6)(this._columns,function(){(this.dataField||this.selector||this.calculateCellValue)&&(0,v.$K)(this.sortIndex)&&!(0,v.$K)(this.groupIndex)&&(i[this.sortIndex]=this)}),(0,y.S6)(i,function(){if(vr(this&&this.sortOrder)){var n={selector:this.calculateSortValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue,desc:"desc"===this.sortOrder};this.sortingMethod&&(n.compare=this.sortingMethod.bind(this)),a.push(n)}}),a.length>0?a:null}getGroupDataSourceParameters(e){var i=[];return(0,y.S6)(this.getGroupColumns(),function(){var a=this.calculateGroupValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue;if(a){var r={selector:a,desc:"desc"===this.sortOrder,isExpanded:!!this.autoExpandGroup};this.sortingMethod&&(r.compare=this.sortingMethod.bind(this)),i.push(r)}}),i.length>0?i:null}refresh(e){var i=[];return(0,y.S6)(this._columns,function(){var{lookup:a}=this;if(a&&!this.calculateDisplayValue){if(e&&a.valueMap)return;a.update&&i.push(a.update())}}),b.gx.apply(p.Z,i).done(_r.bind(null,this))}_updateColumnOptions(e,i){e.selector=e.selector||function(n){return e.calculateCellValue(n)},this._reinitAfterLookupChanges&&this._previousColumns?(e.selector.columnIndex=i,e.selector.originalCallback=this._previousColumns[i].selector.originalCallback):(e.selector.columnIndex=i,e.selector.originalCallback=e.selector),(0,y.S6)(["calculateSortValue","calculateGroupValue","calculateDisplayValue"],(n,s)=>{var o=e[s];if((0,v.mf)(o))if(o.originalCallback)e[s].context.column=e;else{var l={column:e};e[s]=function(d){return o.call(l.column,d)},e[s].originalCallback=o,e[s].columnIndex=i,e[s].context=l}}),(0,v.HD)(e.calculateDisplayValue)&&(e.displayField=e.calculateDisplayValue,e.calculateDisplayValue=(0,Q.vb)(e.displayField)),e.calculateDisplayValue&&(e.displayValueMap=e.displayValueMap||{}),jd(e,e.dataType);var{lookup:a}=e;a&&jd(a,a.dataType);var r=a?a.dataType:e.dataType;r&&(e.alignment=e.alignment||function(t,e){switch(t){case"number":return"right";case"boolean":return"center";default:return(0,se.q)(e)}}(r,this.option("rtlEnabled")),e.format=e.format||V.getFormatByDataType(r),e.customizeText=e.customizeText||qd(r),e.defaultFilterOperations=e.defaultFilterOperations||!a&&WC[r]||[],(0,v.$K)(e.filterOperations)||Ud(e),e.defaultFilterOperation=e.filterOperations&&e.filterOperations[0]||"=",e.showEditorAlways=(0,v.$K)(e.showEditorAlways)?e.showEditorAlways:"boolean"===r&&!e.cellTemplate&&!e.lookup)}updateColumnDataTypes(e){var i=this,a=i.option("dateSerializationFormat"),r=i._getFirstItems(e),n=!1;return(0,y.S6)(i._columns,(s,o)=>{var l,d,u,h,c,{lookup:_}=o;if(V.isDateType(o.dataType)&&void 0===o.serializationFormat&&(o.serializationFormat=a),_&&V.isDateType(_.dataType)&&void 0===o.serializationFormat&&(_.serializationFormat=a),o.calculateCellValue&&r.length){if(!o.dataType||_&&!_.dataType){for(l=0;l<r.length;l++)d=o.calculateCellValue(r[l]),o.dataType||(c=os(d),(u=u||c)&&c&&u!==c&&(u="string")),_&&!_.dataType&&(c=os(V.getDisplayValue(o,d,r[l])),(h=h||c)&&c&&h!==c&&(h="string"));(u||h)&&(u&&(o.dataType=u),_&&h&&(_.dataType=h),n=!0)}if(void 0===o.serializationFormat||_&&void 0===_.serializationFormat)for(l=0;l<r.length;l++)d=o.calculateCellValue(r[l],!0),void 0===o.serializationFormat&&(o.serializationFormat=Yd(o.dataType,d)),_&&void 0===_.serializationFormat&&(_.serializationFormat=Yd(_.dataType,_.calculateCellValue(d,!0)))}i._updateColumnOptions(o,s)}),n}_customizeColumns(e){var i=this.option("customizeColumns");i&&(e.some(r=>(0,v.Kn)(r.ownerBand))&&ri(this),i(e),Bi(this,Ri(this,e)))}updateColumns(e,i,a){if(i||this.updateSortingGrouping(e),!e||e.isLoaded()){var r=e?e.sort()||[]:this.getSortDataSourceParameters(),n=e?e.group()||[]:this.getGroupDataSourceParameters(),s=e?.lastLoadOptions().filter;a||this._customizeColumns(this._columns),ri(this);var o=this._columns;return(0,b.gx)(this.refresh(!0)).always(()=>{this._columns===o&&(this._updateChanges(e,{sorting:r,grouping:n,filtering:s}),ua(this))})}}_updateChanges(e,i){e&&(this.updateColumnDataTypes(e),this._dataSourceApplied=!0),V.equalSortParameters(i.sorting,this.getSortDataSourceParameters())||ut(this,"sorting"),V.equalSortParameters(i.grouping,this.getGroupDataSourceParameters())||ut(this,"grouping");var a=this.getController("data");a&&!V.equalFilterParameters(i.filtering,a.getCombinedFilter())&&ut(this,"filtering"),ut(this,"columns")}updateSortingGrouping(e,i){var r,n,a=this,s=function(c,_,g){(0,y.S6)(c,(f,m)=>{if(delete m[g],_)for(var x=0;x<_.length;x++){var{selector:w}=_[x],{isExpanded:T}=_[x];if(w===m.dataField||w===m.name||w===m.selector||w===m.calculateCellValue||w===m.calculateGroupValue||w===m.calculateDisplayValue){m.sortOrder=i?"sortOrder"in m?m.sortOrder:_[x].desc?"desc":"asc":m.sortOrder||(_[x].desc?"desc":"asc"),void 0!==T&&(m.autoExpandGroup=T),m[g]=x;break}}})};if(e){r=V.normalizeSortingInfo(e.sort());var o=V.normalizeSortingInfo(e.group()),l=a.getGroupDataSourceParameters(),d=a.getSortDataSourceParameters(),u=!V.equalSortParameters(o,l,!0),h=!u&&!V.equalSortParameters(o,l);a._columns.length||((0,y.S6)(o,(c,_)=>{a._columns.push(_.selector)}),(0,y.S6)(r,(c,_)=>{(0,v.mf)(_.selector)||a._columns.push(_.selector)}),Bi(a,Ri(a,a._columns))),(i||!l&&!a._hasUserState)&&(u||h)&&(s(a._columns,o,"groupIndex"),i&&(u&&ut(a,"grouping"),h&&ut(a,"groupExpanding"),n=!0)),(i||!d&&!a._hasUserState)&&!V.equalSortParameters(r,d)&&(s(a._columns,r,"sortIndex"),i&&(ut(a,"sorting"),n=!0)),n&&ua(a)}}updateFilter(e,i,a,r){if(!Array.isArray(e))return e;if(a=void 0!==(e=(0,C.l)([],e)).columnIndex?e.columnIndex:a,r=void 0!==e.filterValue?e.filterValue:r,(0,v.HD)(e[0])&&"!"!==e[0]){var n=this.columnOption(e[0]);i?(0,hr.Z)().forceIsoDateParsing&&n&&n.serializeValue&&e.length>1&&(e[e.length-1]=n.serializeValue(e[e.length-1],"filter")):n&&n.selector&&(e[0]=n.selector,e[0].columnIndex=n.index)}else(0,v.mf)(e[0])&&(e[0].columnIndex=a,e[0].filterValue=r,e[0].selectedFilterOperation=e.selectedFilterOperation);for(var s=0;s<e.length;s++)e[s]=this.updateFilter(e[s],i,a,r);return e}columnCount(){return this._columns?this._columns.length:0}columnOption(e,i,a,r){var n=this,s=n._columns.concat(n._commandColumns),o=su(s,e);if(o){if(1===arguments.length)return(0,C.l)({},o);if((0,v.HD)(i)){if(2===arguments.length)return us(n,o,i);us(n,o,i,a,r)}else(0,v.Kn)(i)&&(0,y.S6)(i,(l,d)=>{us(n,o,l,d,r)});ua(n)}}clearSorting(){var e=this.columnCount();this.beginUpdate();for(var i=0;i<e;i++)this.columnOption(i,"sortOrder",void 0),delete su(this._columns,i).sortOrder;this.endUpdate()}clearGrouping(){var e=this.columnCount();this.beginUpdate();for(var i=0;i<e;i++)this.columnOption(i,"groupIndex",void 0);this.endUpdate()}getVisibleIndex(e,i){for(var a=this.getVisibleColumns(i),r=a.length-1;r>=0;r--)if(a[r].index===e)return r;return-1}getVisibleIndexByColumn(e,i){var a=this.getVisibleColumns(i),r=a.filter(n=>n.index===e.index&&n.command===e.command)[0];return a.indexOf(r)}getVisibleColumnIndex(e,i){var a=this.columnOption(e,"index");return this.getVisibleIndex(a,i)}addColumn(e){var i=pr(this,e),a=this._columns.length;this._columns.push(i),i.isBand&&(this._columns=Ri(this,this._columns),i=this._columns[a]),i.added=e,ri(this,i),this.updateColumns(this._dataSource),this._checkColumns()}deleteColumn(e){var i=this.columnOption(e);if(i&&i.index>=0){if((t=>{t.forEach(e=>{(0,v.$K)(e.ownerBand)&&(e.ownerBand=t[e.ownerBand])})})(this._columns),this._columns.splice(i.index,1),i.isBand){var a=this.getChildrenByBandColumn(i.index).map(r=>r.index);this._columns=this._columns.filter(r=>a.indexOf(r.index)<0)}ri(this),this.updateColumns(this._dataSource)}}addCommandColumn(e){var i=this._commandColumns.filter(a=>a.command===e.command)[0];i||this._commandColumns.push(i=e)}getUserState(){var a,e=this._columns,i=[];function r(n,s){void 0!==e[a][s]&&(i[a][s]=e[a][s])}for(a=0;a<e.length;a++)i[a]={},(0,y.S6)(cr,r);return i}setName(e){e.name=e.name||e.dataField||e.type}setUserState(e){var i=this._dataSource,a=this.option("stateStoring.ignoreColumnOptionNames");if(e?.forEach(this.setName),!a){a=[];var r=this.getCommonSettings();this.option("columnChooser.enabled")||a.push("visible"),"none"===this.option("sorting.mode")&&a.push("sortIndex","sortOrder"),r.allowGrouping||a.push("groupIndex"),r.allowFixing||a.push("fixed","fixedPosition"),r.allowResizing||a.push("width","visibleWidth");var n=!this.option("filterPanel.visible");!this.option("filterRow.visible")&&n&&a.push("filterValue","selectedFilterOperation"),!this.option("headerFilter.visible")&&n&&a.push("filterValues","filterType")}this._columnsUserState=e,this._ignoreColumnOptionNames=a,this._hasUserState=!!e,ut(this,"filtering"),this.init(!0),i&&(i.sort(this.getSortDataSourceParameters()),i.group(this.getGroupDataSourceParameters()))}_checkColumns(){var e={},i=!1,a=[];this._columns.forEach(r=>{var n,{name:s}=r,o=null===(n=r.columns)||void 0===n?void 0:n.length,l=r.allowEditing&&(r.dataField||r.setCellValue)&&!o;s?(e[s]&&a.push('"'.concat(s,'"')),e[s]=!0):l&&(i=!0)}),a.length&&ee.Z.log("E1059",a.join(", ")),i&&ee.Z.log("E1060")}_createCalculatedColumnOptions(e,i){var a={},{dataField:r}=e;if((Array.isArray(e.columns)&&e.columns.length||e.isBand)&&(a.isBand=!0,r=null),r){if((0,v.HD)(r)){var n=(0,Q.vb)(r);a={caption:(0,Pe.GK)(r),calculateCellValue(s,o){var l=n(s);return this.deserializeValue&&!o?this.deserializeValue(l):l},setCellValue:oS,parseValue(s){var o,l;return"number"===this.dataType?(0,v.HD)(s)&&this.format?o=function(t,e){var i=me.Z.parse(t);if((0,v.kE)(i)){var a=me.Z.format(i,e),r=me.Z.format(i,"decimal");if(a===t||r===t)return i}}(s.trim(),this.format):(0,v.$K)(s)&&(0,v.kE)(s)&&(o=Number(s)):"boolean"===this.dataType?s===this.trueText?o=!0:s===this.falseText&&(o=!1):V.isDateType(this.dataType)?(l=X.Z.parse(s,this.format))&&(o=l):o=s,o}}}a.allowFiltering=!0}else a.allowFiltering=!!e.calculateFilterExpression;return a.calculateFilterExpression=function(){return ii.defaultCalculateFilterExpression.apply(this,arguments)},a.defaultFilterOperation="=",a.createFilterExpression=function(s,o){var l;return this.calculateFilterExpression&&(l=this.calculateFilterExpression.apply(this,arguments)),(0,v.mf)(l)&&(l=[l,"=",!0]),l&&(l.columnIndex=this.index,l.filterValue=s,l.selectedFilterOperation=o),l},(!r||!(0,v.HD)(r))&&(0,C.l)(!0,a,{allowSorting:!1,allowGrouping:!1,calculateCellValue:()=>null}),i&&(a.allowFixing=!1),e.dataType&&(a.userDataType=e.dataType),e.selectedFilterOperation&&!("defaultSelectedFilterOperation"in a)&&(a.defaultSelectedFilterOperation=e.selectedFilterOperation),e.lookup&&(a.lookup={calculateCellValue(s,o){return this.valueExpr&&(s=this.valueMap&&this.valueMap[s]),this.deserializeValue&&!o?this.deserializeValue(s):s},updateValueMap(){if(this.valueMap={},this.items)for(var s=(0,Q.vb)(this.valueExpr),o=(0,Q.vb)(this.displayExpr),l=0;l<this.items.length;l++){var d=this.items[l],u=o(d);this.valueMap[s(d)]=u,this.dataType=this.dataType||os(u)}},update(){var s=this,{dataSource:o}=s;if(o)if((0,v.mf)(o)&&!tt.default.isWrapped(o)&&(o=o({})),(0,v.PO)(o)||o instanceof NC.Z||Array.isArray(o)){if(s.valueExpr){var l=(0,oa.aN)(o);return l.paginate=!1,(o=new ti.o(l)).load().done(d=>{s.items=d,s.updateValueMap&&s.updateValueMap()})}}else ee.Z.log("E1016");else s.updateValueMap&&s.updateValueMap()}}),a.resizedCallbacks=(0,ge.Z)(),e.resized&&a.resizedCallbacks.add(e.resized.bind(e)),(0,y.S6)(a,s=>{if((0,v.mf)(a[s])&&0!==s.indexOf("default")){var o="default".concat(s.charAt(0).toUpperCase()).concat(s.substr(1));a[o]=a[s]}}),a}getRowCount(){return this._rowCount=this._rowCount||function(t){var e=1,i=t.getBandColumnsCache(),{columnParentByIndex:a}=i;return t._columns.forEach(r=>{var n=ai(r.index,a),s=n.filter(o=>!o.visible);r.visible&&!s.length&&(e=Math.max(e,n.length+1))}),e}(this),this._rowCount}getRowIndex(e,i){var a=this._columns[e],r=this.getBandColumnsCache();return a&&(i||a.visible&&!a.command&&!(0,v.$K)(a.groupIndex))?ai(e,r.columnParentByIndex).length:0}getChildrenByBandColumn(e,i){var a=this.getBandColumnsCache(),r=UC(e,a.columnChildrenByIndex,!i);return i?r.filter(n=>n.visible&&!n.command).sort((n,s)=>n.visibleIndex-s.visibleIndex):r}isParentBandColumn(e,i){var a=!1,r=this._columns[e],n=this.getBandColumnsCache(),s=r&&ai(e,n.columnParentByIndex);return s&&(0,y.S6)(s,(o,l)=>{if(l.index===i)return a=!0,!1}),a}isParentColumnVisible(e){var i=!0,a=this.getBandColumnsCache(),r=e>=0&&ai(e,a.columnParentByIndex);return r&&(0,y.S6)(r,(n,s)=>i=i&&s.visible),i}getColumnId(e){return e.command&&e.type===Ht?hs(this,e)?"type:".concat(e.type):"command:".concat(e.command):e.index}getCustomizeTextByDataType(e){return qd(e)}getHeaderContentAlignment(e){return this.option("rtlEnabled")?"left"===e?"right":"left":e}}}};$.registerModule("columns",{defaultOptions:()=>(0,C.l)(!0,{},ou.defaultOptions(),{commonColumnSettings:{allowExporting:!0}}),controllers:ou.controllers});var gr=function(t,e){var i=e(t);if((0,v.Kn)(i))try{return JSON.stringify(i)}catch{return i}return i},vS=function(t,e,i,a){return e[i[gr(t,a)]]},lu=function(t,e,i,a){var r={},n={},s=0,o=0,l=[];t.forEach(function(w,T){var O=gr(w,i);r[O]=T}),e.forEach(function(w,T){var O=gr(w,i);n[O]=T});for(var d=Math.max(t.length,e.length),u=0;u<d+s;u++){var h=e[u],c=u-s+o,_=t[c];if(!h||_&&!vS(_,e,n,i))_&&(l.push({type:"remove",key:i(_),index:u,oldItem:_}),o++,u--);else{var f=gr(h,i),m=r[f],x=t[m];if(x){if(m!==c)return;a(x,h)||l.push({type:"update",data:h,key:i(h),index:u,oldItem:x})}else s++,l.push({type:"insert",data:h,index:u})}}return l},fr=L(3776),fS=L(6659),mr=L(5541),du=function(t,e,i){var a=t._dataSource;if(a){if(void 0!==i){if(t._getPagingOptionValue(e)!==i){"pageSize"===e&&a.pageIndex(0),a[e](i),t._skipProcessingPagingChange=!0,t.option("paging.".concat(e),i),t._skipProcessingPagingChange=!1;var n=a.pageIndex();return t._isPaging="pageIndex"===e,a["pageIndex"===e?"load":"reload"]().done(()=>{t._isPaging=!1,t.pageChanged.fire(n)})}return(0,b.BH)().resolve().promise()}return a[e]()}return 0},mS=ne.Controller.inherit(mr.Z),uu={defaultOptions:()=>({loadingTimeout:0,dataSource:null,cacheEnabled:!0,repaintChangesOnly:!1,highlightChanges:!1,onDataErrorOccurred:null,remoteOperations:"auto",paging:{enabled:!0,pageSize:void 0,pageIndex:void 0}}),controllers:{data:class CS extends mS{init(){var e=this;e._items=[],e._cachedProcessedItems=null,e._columnsController=this.getController("columns"),e._isPaging=!1,e._currentOperationTypes=null,e._dataChangedHandler=i=>{e._currentOperationTypes=this._dataSource.operationTypes(),e._handleDataChanged(i),e._currentOperationTypes=null},e._columnsChangedHandler=e._handleColumnsChanged.bind(e),e._loadingChangedHandler=e._handleLoadingChanged.bind(e),e._loadErrorHandler=e._handleLoadError.bind(e),e._customizeStoreLoadOptionsHandler=e._handleCustomizeStoreLoadOptions.bind(e),e._changingHandler=e._handleChanging.bind(e),e._dataPushedHandler=e._handleDataPushed.bind(e),e._columnsController.columnsChanged.add(e._columnsChangedHandler),e._isLoading=!1,e._isCustomLoading=!1,e._repaintChangesOnly=void 0,e._changes=[],e.createAction("onDataErrorOccurred"),e.dataErrorOccurred.add(i=>e.executeAction("onDataErrorOccurred",{error:i})),e._refreshDataSource()}_getPagingOptionValue(e){return this._dataSource[e]()}callbackNames(){return["changed","loadingChanged","dataErrorOccurred","pageChanged","dataSourceChanged","pushed"]}callbackFlags(e){if("dataErrorOccurred"===e)return{stopOnFalse:!0}}publicMethods(){return["beginCustomLoading","endCustomLoading","refresh","filter","clearFilter","getCombinedFilter","keyOf","byKey","getDataByKeys","pageIndex","pageSize","pageCount","totalCount","_disposeDataSource","getKeyByRowIndex","getRowIndexByKey","getDataSource","getVisibleRows","repaintRows"]}reset(){this._columnsController.reset(),this._items=[],this._refreshDataSource()}_handleDataSourceChange(e){if(e.value===e.previousValue||this.option("columns")&&Array.isArray(e.value)&&Array.isArray(e.previousValue)){if(e.value!==e.previousValue){var a=this.store();a&&(a._array=e.value)}return this.needToRefreshOnDataSourceChange(e)&&this.refresh(this.option("repaintChangesOnly")),!0}return!1}needToRefreshOnDataSourceChange(e){return!0}optionChanged(e){var a,r,i=this;function n(){e.handled=!0}if("dataSource"===e.name&&e.name===e.fullName&&this._handleDataSourceChange(e))n();else switch(e.name){case"cacheEnabled":case"repaintChangesOnly":case"highlightChanges":case"loadingTimeout":n();break;case"remoteOperations":case"keyExpr":case"dataSource":case"scrolling":n(),i.reset();break;case"paging":if((a=i.dataSource())&&(r=i._setPagingOptions(a))){var s=a.pageIndex();this._isPaging=r.isPageIndexChanged,a.load().done(()=>{this._isPaging=!1,i.pageChanged.fire(s)})}n();break;case"rtlEnabled":i.reset();break;case"columns":(a=i.dataSource())&&a.isLoading()&&e.name===e.fullName&&(this._useSortingGroupingFromColumns=!0,a.load());break;default:super.optionChanged(e)}}isReady(){return!this._isLoading}getDataSource(){return this._dataSource&&this._dataSource._dataSource}getCombinedFilter(e){return this.combinedFilter(void 0,e)}combinedFilter(e,i){if(!this._dataSource)return e;var a=e??this._dataSource.filter();if(this._columnsController.isDataSourceApplied()||this._columnsController.isAllDataTypesDefined()){var n=this._calculateAdditionalFilter();a=n?V.combineFilters([n,a]):a}var s=this._dataSource.remoteOperations().filtering||i;return this._columnsController.updateFilter(a,s)}waitReady(){return this._updateLockCount?(this._readyDeferred=new b.BH,this._readyDeferred):(0,b.gx)()}_endUpdateCore(){var e=this._changes;if(e.length){this._changes=[];var i=e.every(a=>a.repaintChangesOnly);this.updateItems(1===e.length?e[0]:{repaintChangesOnly:i})}this._readyDeferred&&(this._readyDeferred.resolve(),this._readyDeferred=null)}_handleCustomizeStoreLoadOptions(e){var i,a=this._columnsController,r=this._dataSource,{storeLoadOptions:n}=e;e.isCustomLoading&&!n.isLoadingAll||(n.filter=this.combinedFilter(n.filter),1===(null===(i=n.filter)||void 0===i?void 0:i.length)&&"!"===n.filter[0]&&(e.data=[],e.extra=e.extra||{},e.extra.totalCount=0),a.isDataSourceApplied()||a.updateColumnDataTypes(r),this._columnsUpdating=!0,a.updateSortingGrouping(r,!this._useSortingGroupingFromColumns),this._columnsUpdating=!1,n.sort=a.getSortDataSourceParameters(),n.group=a.getGroupDataSourceParameters(),r.sort(n.sort),r.group(n.group),n.sort=a.getSortDataSourceParameters(!r.remoteOperations().sorting),e.group=a.getGroupDataSourceParameters(!r.remoteOperations().grouping))}_handleColumnsChanged(e){var n,s,o,i=this,{changeTypes:a}=e,{optionNames:r}=e;if(a.sorting||a.grouping)i._dataSource&&!i._columnsUpdating&&(i._dataSource.group(i._columnsController.getGroupDataSourceParameters()),i._dataSource.sort(i._columnsController.getSortDataSourceParameters()),i.reload());else if(a.columns&&(s=i._columnsController.columnOption(e.columnIndex,"filterValues"),(r.filterValues||r.filterType&&Array.isArray(s)||r.filterValue||r.selectedFilterOperation||r.allowFiltering)&&(n=i._columnsController.columnOption(e.columnIndex,"filterValue"),(Array.isArray(s)||void 0===e.columnIndex||(0,v.$K)(n)||!r.selectedFilterOperation||r.filterValue)&&(i._applyFilter(),o=!0)),!i._needApplyFilter&&!V.checkChanges(r,["width","visibleWidth","filterValue","bufferedFilterValue","selectedFilterOperation","filterValues","filterType"])&&i._columnsController.columnsChanged.add(function d(u){var h;i._columnsController.columnsChanged.remove(d),i.updateItems({repaintChangesOnly:!1,virtualColumnsScrolling:null===(h=u?.changeTypes)||void 0===h?void 0:h.virtualColumnsScrolling})}),(0,v.$K)(r.visible))){var l=i._columnsController.columnOption(e.columnIndex);l&&((0,v.$K)(l.filterValue)||(0,v.$K)(l.filterValues))&&(i._applyFilter(),o=!0)}!o&&a.filtering&&i.reload()}_handleDataChanged(e){var i=this,a=i._dataSource,r=i._columnsController,n=!1;this._useSortingGroupingFromColumns=!1,a&&!i._isDataSourceApplying&&(i._isDataSourceApplying=!0,(0,b.gx)(i._columnsController.applyDataSource(a)).done(()=>{i._isLoading&&i._handleLoadingChanged(!1),n&&e&&e.isDelayed&&(e.isDelayed=!1),i._isDataSourceApplying=!1;var o,s=i._needApplyFilter;i._needApplyFilter=!1,s&&!i._isAllDataTypesDefined&&(o=i._calculateAdditionalFilter())&&o.length?(ee.Z.log("W1005",i.component.NAME),i._applyFilter()):i.updateItems(e,!0)}).fail(()=>{i._isDataSourceApplying=!1}),i._isDataSourceApplying&&(n=!0,i._handleLoadingChanged(!0)),i._needApplyFilter=!i._columnsController.isDataSourceApplied(),i._isAllDataTypesDefined=r.isAllDataTypesDefined())}_handleLoadingChanged(e){this._isLoading=e,this._fireLoadingChanged()}_handleLoadError(e){this.dataErrorOccurred.fire(e)}_handleDataPushed(e){this.pushed.fire(e)}fireError(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];this.dataErrorOccurred.fire(ee.Z.Error.apply(ee.Z,i))}_setPagingOptions(e){var i=this.option("paging.pageIndex"),a=this.option("paging.pageSize"),r=this.option("paging.enabled"),n=this.option("scrolling.mode"),s="infinite"===n,l=r||"virtual"===n||s,d=!1,u=!1,h=!1;return e.requireTotalCount(!s),void 0!==r&&e.paginate()!==l&&(e.paginate(l),d=!0),void 0!==a&&e.pageSize()!==a&&(e.pageSize(a),u=!0),void 0!==i&&e.pageIndex()!==i&&(e.pageIndex(i),h=!0),!!(d||u||h)&&{isPaginateChanged:d,isPageSizeChanged:u,isPageIndexChanged:h}}_getSpecificDataSourceOption(){var e=this.option("dataSource");return Array.isArray(e)?{store:{type:"array",data:e,key:this.option("keyExpr")}}:e}_initDataSource(){var e=this._dataSource;super._initDataSource();var i=this._dataSource;if(this._useSortingGroupingFromColumns=!0,this._cachedProcessedItems=null,i){var a=this._setPagingOptions(i);this._isPaging=a?.isPageIndexChanged,this.setDataSource(i)}else e&&this.updateItems()}_loadDataSource(){var e=this,i=e._dataSource,a=new b.BH;return(0,b.gx)(this._columnsController.refresh(!0)).always(()=>{i?i.load().done(function(){e._isPaging=!1,a.resolve.apply(a,arguments)}).fail(a.reject):a.resolve()}),a.promise()}_beforeProcessItems(e){return e.slice(0)}getRowIndexDelta(){return 0}getDataIndex(e){var i=this._items,a="append"===e.changeType&&i.length>0?i[i.length-1]:null;return(0,v.$K)(a?.dataIndex)?a.dataIndex+1:0}_processItems(e,i){var a=this,r=a.getRowIndexDelta(),{changeType:n}=i,l={visibleColumns:a._columnsController.getVisibleColumns(null,"loadingAll"===n),dataIndex:this.getDataIndex(i)},d=[];return(0,y.S6)(e,(u,h)=>{(0,v.$K)(h)&&(l.rowIndex=u-r,h=a._processItem(h,l),d.push(h))}),d}_processItem(e,i){return e=this._generateDataItem(e,i),(e=this._processDataItem(e,i)).dataIndex=i.dataIndex++,e}_generateDataItem(e,i){return{rowType:"data",data:e,key:this.keyOf(e)}}_processDataItem(e,i){return e.values=this.generateDataValues(e.data,i.visibleColumns),e}generateDataValues(e,i,a){for(var n,r=[],s=0;s<i.length;s++){var o=i[s];n=a?void 0:null,o.command||(o.calculateCellValue?n=o.calculateCellValue(e):o.dataField&&(n=e[o.dataField])),r.push(n)}return r}_applyChange(e){"update"===e.changeType?this._applyChangeUpdate(e):this.items().length&&e.repaintChangesOnly&&"refresh"===e.changeType?this._applyChangesOnly(e):"refresh"===e.changeType&&this._applyChangeFull(e)}_applyChangeFull(e){this._items=e.items.slice(0)}_getRowIndices(e){var i=e.rowIndices.slice(0),a=this.getRowIndexDelta();i.sort((s,o)=>s-o);for(var r=0;r<i.length;r++){var n=i[r];e.allowInvisibleRowIndices&&(n+=a),n<0&&(i.splice(r,1),r--)}return i}_applyChangeUpdate(e){var d,i=this,{items:a}=e,r=i._getRowIndices(e),n=i.getRowIndexDelta(),s=i.option("repaintChangesOnly"),o=-1,l=0;e.items=[],e.rowIndices=[],e.columnIndices=[],e.changeTypes=[];var u=function(h,c,_){var g=h&&c&&(0,E.bY)(h.key,c.key);return g&&_&&(g=h.rowType===c.rowType&&("detail"!==c.rowType||h.isEditing===c.isEditing)),g};(0,y.S6)(r,(h,c)=>{var _;if(o!==(c+=l+n)){o=c;var g=i._items[c],f=i._items[c+1],m=a[c],x=a[c+1],w=u(g,f)||u(m,x);if(m&&(m.rowIndex=c,e.items.push(m)),g&&m&&u(g,m,w))d="update",i._items[c]=m,g.visible!==m.visible?e.items.splice(-1,1,{visible:m.visible}):s&&!e.isFullUpdate&&(_=i._partialUpdateRow(g,m,c-n));else if(m&&!g||x&&u(g,x,w))d="insert",i._items.splice(c,0,m),l++;else if(g&&!m||f&&u(m,f,w))d="remove",i._items.splice(c,1),l--,o=-1;else{if(!m)return;d="update",i._items[c]=m}e.rowIndices.push(c-n),e.changeTypes.push(d),e.columnIndices.push(_)}})}_isCellChanged(e,i,a,r,n){if(JSON.stringify(e.values[r])!==JSON.stringify(i.values[r]))return!0;function s(o,l){return!!o.modifiedValues&&void 0!==o.modifiedValues[l]}return s(e,r)!==s(i,r)}_getChangedColumnIndices(e,i,a,r){var n;if(e.rowType===i.rowType){if("group"!==i.rowType&&"groupFooter"!==i.rowType&&(n=[],"detail"!==i.rowType))for(var s=0;s<e.values.length;s++)this._isCellChanged(e,i,a,s,r)&&n.push(s);"group"===i.rowType&&i.isExpanded===e.isExpanded&&e.cells&&(n=e.cells.map((o,l)=>{var d;return"groupExpand"!==(null===(d=o.column)||void 0===d?void 0:d.type)?l:-1}).filter(o=>o>=0))}return n}_partialUpdateRow(e,i,a,r){var n=this._getChangedColumnIndices(e,i,a,r);return n?.length&&this.option("dataRowTemplate")&&(n=void 0),n&&(e.cells&&e.cells.forEach((s,o)=>{!(n.indexOf(o)>=0)&&s&&s.update&&s.update(i)}),i.update=e.update,i.watch=e.watch,i.cells=e.cells,r&&(i.oldValues=e.values),e.update&&e.update(i)),n}_isItemEquals(e,i){var a,r,n,s;if(JSON.stringify(e.values)!==JSON.stringify(i.values)||["modified","isNewRow","removed","isEditing"].some(u=>e[u]!==i[u]))return!1;if("group"===e.rowType||"groupFooter"===e.rowType){var o=e.isExpanded===i.isExpanded,l=JSON.stringify(e.summaryCells)===JSON.stringify(i.summaryCells),d=(null===(a=e.data)||void 0===a?void 0:a.isContinuation)===(null===(r=i.data)||void 0===r?void 0:r.isContinuation)&&(null===(n=e.data)||void 0===n?void 0:n.isContinuationOnNextPage)===(null===(s=i.data)||void 0===s?void 0:s.isContinuationOnNextPage);if(!o||!l||!d)return!1}return!0}_applyChangesOnly(e){var i,a=[],r=[],n=[],s=[],o={},l=null===(i=e?.isLiveUpdate)||void 0===i||i;function d(_){if(_)return"".concat(_.rowType,",").concat(JSON.stringify(_.key))}var u=this._items,h=u.slice();e.items.forEach((_,g)=>{var f=d(_);o[f]=g,_.rowIndex=g});var c=lu(h,e.items,d,(_,g)=>!!this._isItemEquals(_,g)&&(_.cells&&(_.update&&_.update(g),_.cells.forEach(f=>{f&&f.update&&f.update(g,!0)})),!0));c?(c.forEach(_=>{switch(_.type){case"update":var{index:g}=_,f=_.data,{oldItem:m}=_,x=this._partialUpdateRow(m,f,g,l);a.push(g),n.push("update"),s.push(f),u[g]=f,r.push(x);break;case"insert":a.push(_.index),n.push("insert"),s.push(_.data),r.push(void 0),u.splice(_.index,0,_.data);break;case"remove":a.push(_.index),n.push("remove"),u.splice(_.index,1),s.push(_.oldItem),r.push(void 0)}}),e.repaintChangesOnly=!0,e.changeType="update",e.rowIndices=a,e.columnIndices=r,e.changeTypes=n,e.items=s,h.length&&(e.isLiveUpdate=!0),this._correctRowIndices(_=>{var g=this._rowIndexOffset||0,f=this.getRowIndexOffset(),x=d(h[_-g]),w=o[x];return w>=0?w+f-_:0})):this._applyChangeFull(e)}_correctRowIndices(e){}_afterProcessItems(e,i){return e}_updateItemsCore(e){var i,a=this._dataSource;if(e.changeType=e.changeType||"refresh",a){var n=this._cachedProcessedItems;e.useProcessedItemsCache&&n?i=n:(i=e.items||a.items(),i=this._beforeProcessItems(i),i=this._processItems(i,e),this._cachedProcessedItems=i),i=this._afterProcessItems(i,e),e.items=i;var s=this._items.length===i.length&&this._items;this._applyChange(e);var o=this.getRowIndexDelta();(0,y.S6)(this._items,(l,d)=>{var u;d.rowIndex=l-o,s&&(d.cells=null!==(u=s[l].cells)&&void 0!==u?u:[]);var h=i[l];h&&(d.loadIndex=h.loadIndex)}),this._rowIndexOffset=this.getRowIndexOffset()}else this._items=[]}_handleChanging(e){var i=this.getVisibleRows();this.dataSource()&&e.changes.forEach(r=>{if("insert"===r.type&&r.index>=0){for(var n=0,s=0;s<r.index;s++){var o=i[s];o&&("data"===o.rowType||"group"===o.rowType)&&n++}r.index=n}})}updateItems(e,i){var a;if(e=e||{},void 0!==this._repaintChangesOnly)e.repaintChangesOnly=null!==(a=e.repaintChangesOnly)&&void 0!==a?a:this._repaintChangesOnly,e.needUpdateDimensions=e.needUpdateDimensions||this._needUpdateDimensions;else if(e.changes)e.repaintChangesOnly=this.option("repaintChangesOnly");else if(i){var r=this.dataSource().operationTypes();e.repaintChangesOnly=r&&!r.grouping&&!r.filtering&&this.option("repaintChangesOnly"),e.isDataChanged=!0,r&&(r.reload||r.paging||r.groupExpanding)&&(e.needUpdateDimensions=!0)}!this._updateLockCount||e.cancel?(this._updateItemsCore(e),!e.cancel&&this._fireChanged(e)):this._changes.push(e)}loadingOperationTypes(){var e=this.dataSource();return e&&e.loadingOperationTypes()||{}}_fireChanged(e){this._currentOperationTypes&&(e.operationTypes=this._currentOperationTypes,this._currentOperationTypes=null),(0,E.g0)(()=>{this.changed.fire(e)})}isLoading(){return this._isLoading||this._isCustomLoading}_fireLoadingChanged(){this.loadingChanged.fire(this.isLoading(),this._loadingText)}_calculateAdditionalFilter(){return null}_applyFilter(){var e=this._dataSource;if(e)return e.pageIndex(0),this._isFilterApplying=!0,this.reload().done(()=>{this._isFilterApplying&&this.pageChanged.fire()})}resetFilterApplying(){this._isFilterApplying=!1}filter(e){var i=this._dataSource,a=i&&i.filter();if(0===arguments.length)return a;e=arguments.length>1?Array.prototype.slice.call(arguments,0):e,!V.equalFilterParameters(a,e)&&(i&&i.filter(e),this._applyFilter())}clearFilter(e){var i=this._columnsController,a=function(r){for(var n=i.columnCount(),s=0;s<n;s++)i.columnOption(s,r,void 0)};if(this.component.beginUpdate(),arguments.length>0)switch(e){case"dataSource":this.filter(null);break;case"search":this.searchByText("");break;case"header":a("filterValues");break;case"row":a("filterValue")}else this.filter(null),this.searchByText(""),a("filterValue"),a("bufferedFilterValue"),a("filterValues");this.component.endUpdate()}_fireDataSourceChanged(){var e=this;e.changed.add(function i(){e.changed.remove(i),e.dataSourceChanged.fire()})}_getDataSourceAdapter(){}_createDataSourceAdapterCore(e,i){var r=this._getDataSourceAdapter().create(this.component);return r.init(e,i),r}isLocalStore(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store())instanceof fr.Z}isCustomStore(e){return(e=e||this.store())instanceof fS.Z}_createDataSourceAdapter(e){var i=this.option("remoteOperations"),a=e.store(),r={filtering:!0,sorting:!0,paging:!0,grouping:!0,summary:!0};return(0,v.Kn)(i)&&i.groupPaging&&(i=(0,C.l)({},r,i)),"auto"===i&&(i=this.isLocalStore(a)||this.isCustomStore(a)?{}:{filtering:!0,sorting:!0,paging:!0}),!0===i&&(i=r),this._createDataSourceAdapterCore(e,i)}setDataSource(e){var i=this._dataSource;!e&&i&&(i.cancelAll(),i.changed.remove(this._dataChangedHandler),i.loadingChanged.remove(this._loadingChangedHandler),i.loadError.remove(this._loadErrorHandler),i.customizeStoreLoadOptions.remove(this._customizeStoreLoadOptionsHandler),i.changing.remove(this._changingHandler),i.pushed.remove(this._dataPushedHandler),i.dispose(this._isSharedDataSource)),e&&(e=this._createDataSourceAdapter(e)),this._dataSource=e,e&&(this._fireDataSourceChanged(),this._isLoading=!e.isLoaded(),this._needApplyFilter=!0,this._isAllDataTypesDefined=this._columnsController.isAllDataTypesDefined(),e.changed.add(this._dataChangedHandler),e.loadingChanged.add(this._loadingChangedHandler),e.loadError.add(this._loadErrorHandler),e.customizeStoreLoadOptions.add(this._customizeStoreLoadOptionsHandler),e.changing.add(this._changingHandler),e.pushed.add(this._dataPushedHandler))}items(e){return this._items}isEmpty(){return!this.items().length}pageCount(){return this._dataSource?this._dataSource.pageCount():1}dataSource(){return this._dataSource}store(){var e=this._dataSource;return e&&e.store()}loadAll(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,r=new b.BH,n=a._dataSource;if(n)if(e){var s={data:e,isCustomLoading:!0,storeLoadOptions:{isLoadingAll:!0},loadOptions:{filter:i?null:a.getCombinedFilter(),group:n.group(),sort:n.sort()}};n._handleDataLoaded(s),(0,b.gx)(s.data).done(l=>{var d;l=a._beforeProcessItems(l),r.resolve(a._processItems(l,{changeType:"loadingAll"}),null===(d=s.extra)||void 0===d?void 0:d.summary)}).fail(r.reject)}else if(n.isLoading())r.reject();else{var o=(0,C.l)({},n.loadOptions(),{isLoadingAll:!0,requireTotalCount:!1});n.load(o).done((l,d)=>{l=a._beforeProcessItems(l),l=a._processItems(l,{changeType:"loadingAll"}),r.resolve(l,d&&d.summary)}).fail(r.reject)}else r.resolve([]);return r}getKeyByRowIndex(e,i){var a=this.items(i)[e];if(a)return a.key}getRowIndexByKey(e,i){return V.getIndexByKey(e,this.items(i))}keyOf(e){var i=this.store();if(i)return i.keyOf(e)}byKey(e){var r,i=this.store(),a=this.getRowIndexByKey(e);if(i)return a>=0&&(r=(new b.BH).resolve(this.items()[a].data)),r||i.byKey(e)}key(){var e=this.store();if(e)return e.key()}getRowIndexOffset(e){return 0}getDataByKeys(e){var i=this,a=new b.BH,r=[],n=[];return(0,y.S6)(e,(s,o)=>{r.push(i.byKey(o).done(l=>{n[s]=l}))}),b.gx.apply(p.Z,r).always(()=>{a.resolve(n)}),a}pageIndex(e){return du(this,"pageIndex",e)}pageSize(e){return du(this,"pageSize",e)}beginCustomLoading(e){this._isCustomLoading=!0,this._loadingText=e||"",this._fireLoadingChanged()}endCustomLoading(){this._isCustomLoading=!1,this._loadingText=void 0,this._fireLoadingChanged()}refresh(e){!0===e?e={reload:!0,changesOnly:!0}:e||(e={lookup:!0,selection:!0,reload:!0});var i=this,a=i.getDataSource(),{changesOnly:r}=e,n=new b.BH,s=function(){i._repaintChangesOnly=!!r};return(0,b.gx)(!e.lookup||i._columnsController.refresh()).always(()=>{e.load||e.reload?(a&&a.on("customizeLoadResult",s),(0,b.gx)(i.reload(e.reload,r)).always(()=>{a&&a.off("customizeLoadResult",s),i._repaintChangesOnly=void 0}).done(n.resolve).fail(n.reject)):(i.updateItems({repaintChangesOnly:e.changesOnly}),n.resolve())}),n.promise()}getVisibleRows(){return this.items()}_disposeDataSource(){this.setDataSource(null)}dispose(){this._disposeDataSource(),super.dispose()}repaintRows(e,i){((e=Array.isArray(e)?e:[e]).length>1||(0,v.$K)(e[0]))&&this.updateItems({changeType:"update",rowIndices:e,isFullUpdate:!i})}skipProcessingPagingChange(e){return this._skipProcessingPagingChange&&("paging.pageIndex"===e||"paging.pageSize"===e)}getUserState(){return{searchText:this.option("searchPanel.text"),pageIndex:this.pageIndex(),pageSize:this.pageSize()}}getCachedStoreData(){return this._dataSource&&this._dataSource.getCachedStoreData()}isLastPageLoaded(){return this.pageIndex()===this.pageCount()-1}load(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.load()}reload(e,i){var a;return null===(a=this._dataSource)||void 0===a?void 0:a.reload(e,i)}push(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.push(...arguments)}itemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.itemsCount():0}totalItemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalItemsCount():0}hasKnownLastPage(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.hasKnownLastPage())}isLoaded(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.isLoaded())}totalCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalCount():0}}}},Fe=L(5076),cs=ne.Controller.inherit(function(){function t(o,l){if(o&&(o=o.slice(0),l))for(var d=0;d<o.length;d++)o[d]=(0,C.l)({key:o[d].key},o[d]),o[d].items=t(o[d].items,l-1);return o}function e(o,l,d){var u={reload:!0,fullReload:!0};return l&&((u={sorting:!V.equalSortParameters(o.sort,l.sort),grouping:!V.equalSortParameters(o.group,l.group,!0),groupExpanding:!V.equalSortParameters(o.group,l.group)||l.groupExpand,filtering:!V.equalFilterParameters(o.filter,l.filter),pageIndex:o.pageIndex!==l.pageIndex,skip:o.skip!==l.skip,take:o.take!==l.take,pageSize:o.pageSize!==l.pageSize,fullReload:d,reload:!1,paging:!1}).reload=d||u.sorting||u.grouping||u.filtering,u.paging=u.pageIndex||u.pageSize||u.take),u}function i(o,l){var d=V.normalizeSortingInfo(o.group||o.storeLoadOptions.group||o.loadOptions.group).length,u=[];if(a(u,o,d))return u;l&&function(h,c,_){var g,f,m=h.length,{storeLoadOptions:x}=c;if(void 0!==x.skip&&x.take&&!_){var w=[];a(w,c,_,!0);var T=w.length;(m||T)&&(c.skip=null!==(g=c.skip)&&void 0!==g?g:x.skip,c.take=null!==(f=c.take)&&void 0!==f?f:x.take),m&&(x.skip+=m,x.take-=m,c.cachedDataPartBegin=h),T&&(x.take-=T,c.cachedDataPartEnd=w.reverse())}}(u,o,d)}function a(o,l,d,u){var h,c,_,g,f,{storeLoadOptions:m}=l,x=null!==(c=null!==(h=l.take)&&void 0!==h?h:m.take)&&void 0!==c?c:0,w=null===(_=l.cachedData)||void 0===_?void 0:_.items;if(x&&w){for(var T=null!==(f=null!==(g=l.skip)&&void 0!==g?g:m.skip)&&void 0!==f?f:0,O=0;O<x;O++){var P=u?x-1-O:O,F=P+T,N=w[F];if(void 0===N&&F in w)return!0;var H=r(l,N,d,P,x);if(!H)return!1;o.push(H)}return!0}return!1}function r(o,l,d,u,h){return d&&l?function g(f,m,x,w){if(m&&f){var T=(0,M.Z)({},f),O=x[0]||0,P=w[0],{items:F}=f;if(F){if(void 0===P&&!F[O])return;T.items=[],x.length&&(T.isContinuation=!0),P&&(T.isContinuationOnNextPage=f.count>P);for(var N=0;void 0===P?F[N+O]:N<P;N++){var k=N+1===P,U=g(F[N+O],m-1,0===N?x.slice(1):[],k?w.slice(1):[]);if(void 0===U)return;T.items.push(U)}}return T}return f}(l,d,0===u&&o.skips||[],u===h-1&&o.takes||[]):l}function n(o,l,d,u){if(d&&l){var h=(0,M.Z)({},l);delete h.isContinuation,delete h.isContinuationOnNextPage;var c=u[0]||0;return l.items&&(h.items=o?.items||{},l.items.forEach((_,g)=>{var f=g+c,m=0===g?u.slice(1):[];h.items[f]=n(h.items[f],_,d-1,m)})),h}return l}var s={init(o,l){var d=this;d._dataSource=o,d._remoteOperations=l||{},d._isLastPage=!o.isLastPage(),d._hasLastPage=!1,d._currentTotalCount=0,d._cachedData={items:{}},d._lastOperationTypes={},d._eventsStrategy=o._eventsStrategy,d._totalCountCorrection=0,d._isLoadingAll=!1,d.changed=(0,ge.Z)(),d.loadingChanged=(0,ge.Z)(),d.loadError=(0,ge.Z)(),d.customizeStoreLoadOptions=(0,ge.Z)(),d.changing=(0,ge.Z)(),d.pushed=(0,ge.Z)(),d._dataChangedHandler=d._handleDataChanged.bind(d),d._customizeStoreLoadOptionsHandler=d._handleCustomizeStoreLoadOptions.bind(d),d._dataLoadedHandler=d._handleDataLoaded.bind(d),d._loadingChangedHandler=d._handleLoadingChanged.bind(d),d._loadErrorHandler=d._handleLoadError.bind(d),d._pushHandler=d._handlePush.bind(d),d._changingHandler=d._handleChanging.bind(d),o.on("changed",d._dataChangedHandler),o.on("customizeStoreLoadOptions",d._customizeStoreLoadOptionsHandler),o.on("customizeLoadResult",d._dataLoadedHandler),o.on("loadingChanged",d._loadingChangedHandler),o.on("loadError",d._loadErrorHandler),o.on("changing",d._changingHandler),o.store().on("beforePush",d._pushHandler),(0,y.S6)(o,(u,h)=>{!d[u]&&(0,v.mf)(h)&&(d[u]=function(){return this._dataSource[u].apply(this._dataSource,arguments)})})},remoteOperations(){return this._remoteOperations},dispose(o){var l=this._dataSource,d=l.store();l.off("changed",this._dataChangedHandler),l.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler),l.off("customizeLoadResult",this._dataLoadedHandler),l.off("loadingChanged",this._loadingChangedHandler),l.off("loadError",this._loadErrorHandler),l.off("changing",this._changingHandler),d&&d.off("beforePush",this._pushHandler),o||l.dispose()},refresh(o,l){var d=this._dataSource;l.reload&&(this.resetCurrentTotalCount(),this._isLastPage=!d.paginate(),this._hasLastPage=this._isLastPage)},resetCurrentTotalCount(){this._currentTotalCount=0,this._totalCountCorrection=0},resetCache(){this._cachedStoreData=void 0,this._cachedPagingData=void 0},resetPagesCache(){this._cachedData={items:{}}},_needClearStoreDataCache(){var o=this.remoteOperations(),l=e(this._lastLoadOptions||{},{});return!Object.keys(o).every(u=>!l[u]||!o[u])},push(o,l){var d=this.store();this._needClearStoreDataCache()&&(this._cachedStoreData=void 0),this._cachedPagingData=void 0,this.resetPagesCache(!0),this._cachedStoreData&&(0,Fe.ii)({keyInfo:d,data:this._cachedStoreData,changes:o}),l||this._applyBatch(o),this.pushed.fire(o)},getDataIndexGetter(){if(!this._dataIndexGetter){var o,l,d=this.store();this._dataIndexGetter=u=>{if(!o||l&&l!==this._cachedStoreData){l=this._cachedStoreData||[],o={};for(var c=0;c<l.length;c++)o[(0,E.k3)(d.keyOf(l[c]))]=c}return o[(0,E.k3)(d.keyOf(u))]}}return this._dataIndexGetter},_getKeyInfo(){return this.store()},_needToCopyDataObject:()=>!0,_applyBatch(o,l){var d=this._getKeyInfo(),u=this._dataSource,h=V.normalizeSortingInfo(this.group()).length,c="reshape"===this.option("editing.refreshMode"),_="virtual"===this.option("scrolling.mode");o=o.filter(x=>!u.paginate()||"insert"!==x.type||void 0!==x.index);var g=()=>h?this.itemsCount():this.items().length,f=g();(0,Fe.ii)({keyInfo:d,data:this._items,changes:o,groupCount:h,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(0,Fe.ii)({keyInfo:d,data:u.items(),changes:o,groupCount:h,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(this._currentTotalCount>0||(l||!c)&&_)&&(this._totalCountCorrection+=g()-f),o.splice(0,o.length)},_handlePush(o){var{changes:l}=o;this.push(l,!0)},_handleChanging(o){this.changing.fire(o),this._applyBatch(o.changes,!0)},_needCleanCacheByOperation(o,l){var d=["filtering","sorting","paging"],u=d.indexOf(o);return(u>=0?d.slice(u):[o]).some(c=>l[c])},_customizeRemoteOperations(o,l){var d=this._cachedStoreData,u=this._cachedPagingData,h=this._cachedData;(o.storeLoadOptions.filter&&!o.remoteOperations.filtering||o.storeLoadOptions.sort&&!o.remoteOperations.sorting)&&(o.remoteOperations={filtering:o.remoteOperations.filtering,summary:o.remoteOperations.summary}),l.fullReload?(d=void 0,u=void 0,h={items:{}}):(l.reload?(u=void 0,h={items:{}}):l.groupExpanding&&(h={items:{}}),(0,y.S6)(l,(c,_)=>{_&&this._needCleanCacheByOperation(c,o.remoteOperations)&&(d=void 0,u=void 0)})),u&&(o.remoteOperations.paging=!1),o.cachedStoreData=d,o.cachedPagingData=u,o.cachedData=h,o.isCustomLoading||(this._cachedStoreData=d,this._cachedPagingData=u,this._cachedData=h)},_handleCustomizeStoreLoadOptions(o){var l;this._handleDataLoading(o),0!==(null===(l=o.data)||void 0===l?void 0:l.length)&&(o.data=i(o,!0)||o.cachedStoreData)},_handleDataLoading(o){var l=this._dataSource,d=this._lastLoadOptions;this.customizeStoreLoadOptions.fire(o),o.delay=this.option("loadingTimeout"),o.originalStoreLoadOptions=o.storeLoadOptions,o.remoteOperations=(0,C.l)({},this.remoteOperations());var u=!this.isLoaded()&&!this._isRefreshing;this.option("integrationOptions.renderedOnServer")&&!this.isLoaded()&&(o.delay=void 0);var h=(0,C.l)({pageIndex:this.pageIndex(),pageSize:this.pageSize()},o.storeLoadOptions),c=e(h,d,u);if(this._customizeRemoteOperations(o,c),!o.isCustomLoading){var _=this._isRefreshing;o.pageIndex=l.pageIndex(),o.lastLoadOptions=h,o.operationTypes=c,this._loadingOperationTypes=c,this._isRefreshing=!0,(0,b.gx)(_||this._isRefreshed||this.refresh(o,c)).done(()=>{this._lastOperationId===o.operationId&&(this._isRefreshed=!0,this.load().always(()=>{this._isRefreshed=!1}))}).fail(()=>{l.cancel(o.operationId)}).always(()=>{this._isRefreshing=!1}),l.cancel(this._lastOperationId),this._lastOperationId=o.operationId,this._isRefreshing&&l.cancel(this._lastOperationId)}this._handleDataLoadingCore(o)},_handleDataLoadingCore(o){var{remoteOperations:l}=o;o.loadOptions={};var d=o.cachedData.extra,u={filter:!l.filtering,sort:!l.sorting,group:!l.grouping,summary:!l.summary,skip:!l.paging,take:!l.paging,requireTotalCount:d&&"totalCount"in d||!l.paging,langParams:!l.filtering||!l.sorting};(0,y.S6)(o.storeLoadOptions,(h,c)=>{u[h]&&(o.loadOptions[h]=c,delete o.storeLoadOptions[h])}),d&&(o.extra=d)},_handleDataLoaded(o){var l,d,{loadOptions:u}=o,h=o.remoteOperations&&!o.remoteOperations.paging,{cachedData:c}=o,{storeLoadOptions:_}=o,g=!1!==this.option("cacheEnabled")&&_,f=g&&!o.isCustomLoading&&c&&(!h||_.group),m=g&&h,x=m&&!o.isCustomLoading;if(u){h&&(o.skip=u.skip,o.take=u.take,delete u.skip,delete u.take),u.group&&(u.group=o.group||u.group);var w=V.normalizeSortingInfo(o.group||_.group||u.group).length;o.cachedDataPartBegin&&(o.data=o.cachedDataPartBegin.concat(o.data)),o.cachedDataPartEnd&&(o.data=o.data.concat(o.cachedDataPartEnd)),(!f||!i(o))&&(m&&o.cachedPagingData?o.data=t(o.cachedPagingData,w):(x&&(this._cachedStoreData?o.mergeStoreLoadData&&(o.data=this._cachedStoreData=this._cachedStoreData.concat(o.data)):this._cachedStoreData=t(o.data,V.normalizeSortingInfo(_.group).length)),new fr.Z(o.data).load(u).done(T=>{o.data=T,x&&(this._cachedPagingData=t(o.data,w))}).fail(T=>{o.data=(new b.BH).reject(T)})),u.requireTotalCount&&h&&(o.extra=(0,v.PO)(o.extra)?o.extra:{},o.extra.totalCount=o.data.length),o.extra&&o.extra.totalCount>=0&&(!1===_.requireTotalCount||!1===u.requireTotalCount)&&(o.extra.totalCount=-1),!u.data&&(_.requireTotalCount||(null!==(d=null===(l=o.extra)||void 0===l?void 0:l.totalCount)&&void 0!==d?d:-1)>=0)&&(this._totalCountCorrection=0),this._handleDataLoadedCore(o),f&&(c.extra=c.extra||(0,C.l)({},o.extra),(0,b.gx)(o.data).done(T=>{!function(O,P,F){for(var N,H,k,U,{storeLoadOptions:j}=O,de=null!==(H=null!==(N=O.skip)&&void 0!==N?N:j.skip)&&void 0!==H?H:0,ae=null!==(U=null!==(k=O.take)&&void 0!==k?k:j.take)&&void 0!==U?U:0,pe=0;pe<ae;pe++){var De=pe+de,Et=O.cachedData.items;Et[De]=n(Et[De],P[pe],F,0===pe&&O.skips||[])}}(o,T,w)}))),(0,b.gx)(o.data).done(()=>{o.lastLoadOptions&&(this._lastLoadOptions=o.lastLoadOptions,Object.keys(o.operationTypes).forEach(T=>{this._lastOperationTypes[T]=this._lastOperationTypes[T]||o.operationTypes[T]}))}),o.storeLoadOptions=o.originalStoreLoadOptions}else this._dataSource.cancel(o.operationId)},_handleDataLoadedCore(o){o.remoteOperations&&!o.remoteOperations.paging&&Array.isArray(o.data)&&(void 0!==o.skip&&(o.data=o.data.slice(o.skip)),void 0!==o.take&&(o.data=o.data.slice(0,o.take)))},_handleLoadingChanged(o){this.loadingChanged.fire(o)},_handleLoadError(o){this.loadError.fire(o),this.changed.fire({changeType:"loadError",error:o})},_loadPageSize(){return this.pageSize()},_handleDataChanged(o){var l,d=this._dataSource,u=!1,h=!o||(0,v.$K)(o.changeType),c=this.itemsCount();h&&(this._isLastPage=!c||!this._loadPageSize()||c<this._loadPageSize(),this._isLastPage&&(this._hasLastPage=!0)),d.totalCount()>=0?d.pageIndex()>=this.pageCount()&&(d.pageIndex(this.pageCount()-1),this.pageIndex(d.pageIndex()),this.resetPagesCache(),d.load(),u=!0):h&&((l=d.pageIndex()*this.pageSize()+c)>this._currentTotalCount&&(this._currentTotalCount=l,(0===d.pageIndex()||!this.option("scrolling.legacyMode"))&&(this._totalCountCorrection=0)),0===c&&d.pageIndex()>=this.pageCount()&&(d.pageIndex(this.pageCount()-1),"infinite"!==this.option("scrolling.mode")&&(d.load(),u=!0))),u||(this._operationTypes=this._lastOperationTypes,this._lastOperationTypes={},this.component._optionCache={},this.changed.fire(o),this.component._optionCache=void 0)},_scheduleCustomLoadCallbacks(o){var l=this;l._isCustomLoading=!0,o.always(()=>{l._isCustomLoading=!1})},loadingOperationTypes(){return this._loadingOperationTypes},operationTypes(){return this._operationTypes},lastLoadOptions(){return this._lastLoadOptions||{}},isLastPage(){return this._isLastPage},_dataSourceTotalCount(){return this._dataSource.totalCount()},totalCount(){return parseInt((this._currentTotalCount||this._dataSourceTotalCount())+this._totalCountCorrection)},totalCountCorrection(){return this._totalCountCorrection},itemsCount(){return this._dataSource.items().length},totalItemsCount(){return this.totalCount()},pageSize(){var o=this._dataSource;return arguments.length||o.paginate()?o.pageSize.apply(o,arguments):0},pageCount(){var o=this.totalItemsCount()-this._totalCountCorrection,l=this.pageSize();return l&&o>0?Math.max(1,Math.ceil(o/l)):1},hasKnownLastPage(){return this._hasLastPage||this._dataSource.totalCount()>=0},loadFromStore(o,l){var d=this._dataSource,u=new b.BH;if(d)return(l=l||d.store()).load(o).done((h,c)=>{h&&!Array.isArray(h)&&Array.isArray(h.data)&&(c=h,h=h.data),u.resolve(h,c)}).fail(u.reject),u},isCustomLoading(){return!!this._isCustomLoading},load(o){var g,f,l=this,d=l._dataSource,u=new b.BH;if(o){var h=d.store(),c=d.loadOptions(),_={storeLoadOptions:(0,C.l)({},o,{langParams:c?.langParams}),isCustomLoading:!0};return(0,y.S6)(h._customLoadOptions()||[],(g,f)=>{f in _.storeLoadOptions||(_.storeLoadOptions[f]=c[f])}),this._isLoadingAll=o.isLoadingAll,l._scheduleCustomLoadCallbacks(u),d._scheduleLoadCallbacks(u),l._handleCustomizeStoreLoadOptions(_),g=()=>{if(!d.store())return u.reject("canceled");(0,b.gx)(_.data||l.loadFromStore(_.storeLoadOptions)).done((g,f)=>{_.data=g,_.extra=f||{},l._handleDataLoaded(_),o.requireTotalCount&&void 0===_.extra.totalCount&&(_.extra.totalCount=h.totalCount(_.storeLoadOptions)),(0,b.gx)(_.data,_.extra.totalCount).done((m,x)=>{_.extra.totalCount=x,u.resolve(m,_.extra)}).fail(u.reject)}).fail(u.reject)},f=l.option("loadingTimeout"),(0,v.$K)(f)?(0,E.Wi)(g,f):g(),u.fail(function(){l._eventsStrategy.fireEvent("loadError",arguments)}).always(()=>{this._isLoadingAll=!1}).promise()}return d.load()},reload(o){return o?this._dataSource.reload():this._dataSource.load()},getCachedStoreData(){return this._cachedStoreData}};return s}());const ha={extend(t){cs=cs.inherit(t)},create:t=>new cs(t)};var ps,_s,SS=null===(_s=null===(ps=uu.controllers)||void 0===ps?void 0:ps.data)||void 0===_s?void 0:_s.inherit({_getDataSourceAdapter:()=>ha,_getSpecificDataSourceOption(){var t=this.option("dataSource");return t&&!Array.isArray(t)&&this.option("keyExpr")&&ee.Z.log("W1011"),this.callBase()}});$.registerModule("data",{defaultOptions:uu.defaultOptions,controllers:{data:SS}});var hu="dx-sort",cu="dx-sort-none",pu="dx-sort-index-icon";const _u={_applyColumnState(t){var e,i,a=this.option("sorting.mode"),{rootElement:r}=t,{column:n}=t,s=this._getIndicatorContainer(r);if("sort"===t.name){r.find(".".concat(hu)).remove(),!s.children().length&&s.remove();var o="none"!==a&&n.allowSorting;return(0,v.$K)(n.groupIndex)||!o&&!(0,v.$K)(n.sortOrder)||(e="asc"===n.sortOrder?"ascending":"descending",i=this.callBase(t).toggleClass("dx-sort-up","asc"===n.sortOrder).toggleClass("dx-sort-down","desc"===n.sortOrder),this.getController&&!!this.getController("columns").columnOption("sortIndex:1")&&this.option("sorting.showSortIndexes")&&n.sortIndex>=0&&((0,p.Z)("<span>").addClass(pu).text(n.sortIndex+1).appendTo(i),i.addClass("dx-sort-index")),o&&t.rootElement.addClass(this.addWidgetPrefix("action"))),(0,v.$K)(n.sortOrder)?this.setAria("sort",e,r):this.setAria("sort","none",r),i}return this.callBase(t)},_getIndicatorClassName(t){return"sort"===t?hu:"sortIndex"===t?pu:this.callBase(t)},_renderIndicator(t){var{column:e}=t,i=t.container,a=t.indicator;if("sort"===t.name){var r=this.option("rtlEnabled");if((0,v.$K)(e.sortOrder)||a&&a.addClass(cu),i.children().length&&(!r&&"left"===t.columnAlignment||r&&"right"===t.columnAlignment))return void i.prepend(a)}this.callBase(t)},_updateIndicator(t,e,i){if("sort"!==i||!(0,v.$K)(e.groupIndex))return this.callBase.apply(this,arguments)},_getIndicatorElements(t,e){var i=this.callBase(t);return e?i:i&&i.not(".".concat(cu))}};var IS=(0,C.l)({},_u,{_createRow(t){var e=this.callBase(t);return"header"===t.rowType&&S.Z.on(e,(0,D.V4)(ie.u,"dxDataGridColumnHeadersView"),"td",this.createAction(i=>{this._processHeaderAction(i.event,e)})),e},_processHeaderAction(t,e){if((0,p.Z)(t.currentTarget).parent().get(0)===e.get(0)){var i=this,a=null,r=(0,p.Z)(t.currentTarget),n=r.parent().index(),s=-1;[].slice.call(i.getCellElements(n)).some((c,_)=>{if(c===r.get(0))return s=_,!0});var l=i._columnsController.getVisibleColumns(n)[s],d=i.getController("editing"),u=i.option("editing.mode");d&&d.isEditing()&&("batch"===u||"cell"===u)||!i._isSortableElement((0,p.Z)(t.target))||l&&!(0,v.$K)(l.groupIndex)&&!l.command&&(t.shiftKey?a="shift":(0,D.j1)(t)&&(a="ctrl"),setTimeout(()=>{i._columnsController.changeSortOrder(l.index,a)}))}},_renderCellContent(t,e){var{column:i}=e;!i.command&&"header"===e.rowType&&this._applyColumnState({name:"sort",rootElement:t,column:i,showColumnLines:this.option("showColumnLines")}),this.callBase.apply(this,arguments)},_columnOptionChanged(t){var{changeTypes:e}=t;1===e.length&&e.sorting?this._updateIndicators("sort"):this.callBase(t)},optionChanged(t){"sorting"===t.name?(this._invalidate(),t.handled=!0):this.callBase(t)}}),TS=(0,C.l)({},_u,{_createGroupPanelItem(t,e){var i=this,a=i.callBase(...arguments);return S.Z.on(a,(0,D.V4)(ie.u,"dxDataGridHeaderPanel"),i.createAction(()=>{i._processGroupItemAction(e.index)})),i._applyColumnState({name:"sort",rootElement:a,column:{alignment:i.option("rtlEnabled")?"right":"left",allowSorting:e.allowSorting,sortOrder:"desc"===e.sortOrder?"desc":"asc"},showColumnLines:!0}),a},_processGroupItemAction(t){setTimeout(()=>this.getController("columns").changeSortOrder(t))},optionChanged(t){"sorting"===t.name?(this._invalidate(),t.handled=!0):this.callBase(t)}});$.registerModule("sorting",{defaultOptions:()=>({sorting:{mode:"single",ascendingText:A.Z.format("dxDataGrid-sortingAscendingText"),descendingText:A.Z.format("dxDataGrid-sortingDescendingText"),clearText:A.Z.format("dxDataGrid-sortingClearText"),showSortIndexes:!0}}),extenders:{views:{columnHeadersView:IS,headerPanel:TS}}});var K=L(8936),Li=L(7140),Vi=L(9464),le=L(6395),vu=L(6810);const gu=Ce.Z.inherit({ctor:function(){this._finished=!0,this._stopped=!1,this._proxiedStepCore=this._stepCore.bind(this)},start:function(){this._stopped=!1,this._finished=!1,this._stepCore()},stop:function(){this._stopped=!0,(0,vu.W)(this._stepAnimationFrame)},_stepCore:function(){if(!this._isStopped())return this._isFinished()?(this._finished=!0,void this._complete()):(this._step(),void(this._stepAnimationFrame=(0,vu.U)(this._proxiedStepCore)));this._stop()},_step:Ce.Z.abstract,_isFinished:E.ZT,_stop:E.ZT,_complete:E.ZT,_isStopped:function(){return this._stopped},inProgress:function(){return!(this._stopped||this._finished)}});var fu=L(1243),Me=L(9386),vs="dxScrollbar",mu="dx-scrollable-scrollbar",Cu="".concat(mu,"-active"),Su="horizontal",Pi=null,PS=Me.default.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{direction:null,visible:!1,activeStateEnabled:!1,visibilityMode:"onScroll",containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})},_init:function(){this.callBase(),this._isHovered=!1},_initMarkup:function(){this._renderThumb(),this.callBase()},_render:function(){this.callBase(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode()),this.$element().toggleClass("dx-scrollbar-hoverable",this.option("hoverStateEnabled"))},_renderThumb:function(){this._$thumb=(0,p.Z)("<div>").addClass("dx-scrollable-scroll"),(0,p.Z)("<div>").addClass("dx-scrollable-scroll-content").appendTo(this._$thumb),this.$element().addClass(mu).append(this._$thumb)},isThumb:function(t){return!!this.$element().find(t).length},_isHoverMode:function(){var t=this.option("visibilityMode");return("onHover"===t||"always"===t)&&this.option("expandable")},_renderDirection:function(){var t=this.option("direction");this.$element().addClass("dx-scrollbar-"+t),this._dimension=t===Su?"width":"height",this._prop=t===Su?"left":"top"},_attachPointerDownHandler:function(){S.Z.on(this._$thumb,(0,D.V4)(re.Z.down,vs),this.feedbackOn.bind(this))},feedbackOn:function(){this.$element().addClass(Cu),Pi=this},feedbackOff:function(){this.$element().removeClass(Cu),Pi=null},cursorEnter:function(){this._isHovered=!0,this._needScrollbar()&&this.option("visible",!0)},cursorLeave:function(){this._isHovered=!1,this.option("visible",!1)},_renderDimensions:function(){this._$thumb.css({width:this.option("width"),height:this.option("height")})},_toggleVisibility:function(t){"onScroll"===this.option("visibilityMode")&&this._$thumb.css("opacity"),t=this._adjustVisibility(t),this.option().visible=t,this._$thumb.toggleClass("dx-state-invisible",!t)},_adjustVisibility:function(t){if(this._baseContainerToContentRatio&&!this._needScrollbar())return!1;switch(this.option("visibilityMode")){case"onScroll":break;case"onHover":t=t||!!this._isHovered;break;case"never":t=!1;break;case"always":t=!0}return t},moveTo:function(t){if(!this._isHidden()){(0,v.PO)(t)&&(t=t[this._prop]||0);var e={};e[this._prop]=this._calculateScrollBarPosition(t),(0,le.pB)(this._$thumb,e)}},_calculateScrollBarPosition:function(t){return-t*this._thumbRatio},_update:function(){var t=Math.round(this.option("containerSize")),e=Math.round(this.option("contentSize")),i=Math.round(this.option("baseContainerSize")),a=Math.round(this.option("baseContentSize"));isNaN(i)&&(i=t,a=e),this._baseContainerToContentRatio=a?i/a:i,this._realContainerToContentRatio=e?t/e:t;var r=Math.round(Math.max(Math.round(t*this._realContainerToContentRatio),15));this._thumbRatio=(t-r)/(this.option("scaleRatio")*(e-t)),this.option(this._dimension,r/this.option("scaleRatio")),this.$element().css("display",this._needScrollbar()?"":"none")},_isHidden:function(){return"never"===this.option("visibilityMode")},_needScrollbar:function(){return!this._isHidden()&&this._baseContainerToContentRatio<1},containerToContentRatio:function(){return this._realContainerToContentRatio},_normalizeSize:function(t){return(0,v.PO)(t)?t[this._dimension]||0:t},_clean:function(){this.callBase(),this===Pi&&(Pi=null),S.Z.off(this._$thumb,"."+vs)},_optionChanged:function(t){if(!this._isHidden())switch(t.name){case"containerSize":case"contentSize":this.option()[t.name]=this._normalizeSize(t.value),this._update();break;case"baseContentSize":case"baseContainerSize":case"scaleRatio":this._update();break;case"visibilityMode":case"direction":this._invalidate();break;default:this.callBase.apply(this,arguments)}},update:(0,E.Rg)(function(){this._adjustVisibility()&&this.option("visible",!0)})});fu.Z.add(function(){S.Z.subscribeGlobal(Y.Z.getDocument(),(0,D.V4)(re.Z.up,vs),function(){Pi&&Pi.feedbackOff()})});const xu=PS;var at,Fi,bu="dxSimulatedScrollable",Cr=bu+"Cursor",gs=bu+"Keyboard",fs="dx-scrollable-simulated",ht="vertical",Oe="horizontal",NS=Math.round(1e3/60),KS=(1-Math.pow(.92,400/NS))/(1-.92),Eu=gu.inherit({ctor:function(t){this.callBase(),this.scroller=t},VELOCITY_LIMIT:1,_isFinished:function(){return Math.abs(this.scroller._velocity)<=this.VELOCITY_LIMIT},_step:function(){this.scroller._scrollStep(this.scroller._velocity),this.scroller._velocity*=this._acceleration()},_acceleration:function(){return this.scroller._inBounds()?.92:.5},_complete:function(){this.scroller._scrollComplete()}}),GS=Eu.inherit({VELOCITY_LIMIT:.2,_isFinished:function(){return this.scroller._crossBoundOnNextStep()||this.callBase()},_acceleration:function(){return.92},_complete:function(){this.scroller._move(this.scroller._bounceLocation),this.callBase()}}),Iu=Ce.Z.inherit({ctor:function(t){this._initOptions(t),this._initAnimators(),this._initScrollbar()},_initOptions:function(t){this._location=0,this._topReached=!1,this._bottomReached=!1,this._axis=t.direction===Oe?"x":"y",this._prop=t.direction===Oe?"left":"top",this._dimension=t.direction===Oe?"width":"height",this._scrollProp=t.direction===Oe?"scrollLeft":"scrollTop",(0,y.S6)(t,(e,i)=>{this["_"+e]=i})},_initAnimators:function(){this._inertiaAnimator=new Eu(this),this._bounceAnimator=new GS(this)},_initScrollbar:function(){this._scrollbar=new xu((0,p.Z)("<div>").appendTo(this._$container),{direction:this._direction,visible:this._scrollByThumb,visibilityMode:this._visibilityModeNormalize(this._scrollbarVisible),expandable:this._scrollByThumb}),this._$scrollbar=this._scrollbar.$element()},_visibilityModeNormalize:function(t){return!0===t?"onScroll":!1===t?"never":t},_scrollStep:function(t){var e=this._location;this._location+=t,this._suppressBounce(),this._move(),!(Math.abs(e-this._location)<1)&&S.Z.triggerHandler(this._$container,{type:"scroll"})},_suppressBounce:function(){this._bounceEnabled||this._inBounds(this._location)||(this._velocity=0,this._location=this._boundLocation())},_boundLocation:function(t){return t=void 0!==t?t:this._location,Math.max(Math.min(t,this._maxOffset),this._minOffset)},_move:function(t){this._location=void 0!==t?t*this._getScaleRatio():this._location,this._moveContent(),this._moveScrollbar()},_moveContent:function(){var t=this._location;this._$container[this._scrollProp](-t/this._getScaleRatio()),this._moveContentByTranslator(t)},_getScaleRatio:function(){if((0,Z.Ym)()&&!this._scaleRatio){var t=this._$element.get(0),e=this._getRealDimension(t,this._dimension),i=this._getBaseDimension(t,this._dimension);this._scaleRatio=Math.round(e/i*100)/100}return this._scaleRatio||1},_getRealDimension:function(t,e){return Math.round((0,se.l)(t)[e])},_getBaseDimension:function(t,e){return t["offset"+(0,Pe.MI)(e)]},_moveContentByTranslator:function(t){var e,i=-this._maxScrollPropValue;if(this._translateOffset!==(e=t>0?t:t<=i?t-i:t%1)){var a={};if(a[this._prop]=e,this._translateOffset=e,0===e)return void(0,le.Kx)(this._$content);(0,le.pB)(this._$content,a)}},_moveScrollbar:function(){this._scrollbar.moveTo(this._location)},_scrollComplete:function(){this._inBounds()&&(this._hideScrollbar(),this._completeDeferred&&this._completeDeferred.resolve()),this._scrollToBounds()},_scrollToBounds:function(){this._inBounds()||(this._bounceAction(),this._setupBounce(),this._bounceAnimator.start())},_setupBounce:function(){var t=this._bounceLocation=this._boundLocation();this._velocity=(t-this._location)/KS},_inBounds:function(t){return this._boundLocation(t=void 0!==t?t:this._location)===t},_crossBoundOnNextStep:function(){var t=this._location,e=t+this._velocity;return t<this._minOffset&&e>=this._minOffset||t>this._maxOffset&&e<=this._maxOffset},_initHandler:function(t){this._stopScrolling(),this._prepareThumbScrolling(t)},_stopScrolling:(0,E.Rg)(function(){this._hideScrollbar(),this._inertiaAnimator.stop(),this._bounceAnimator.stop()}),_prepareThumbScrolling:function(t){if(!(0,D.pR)(t.originalEvent)){var e=(0,p.Z)(t.originalEvent.target),i=this._isScrollbar(e);i&&this._moveToMouseLocation(t),this._thumbScrolling=i||this._isThumb(e),this._crossThumbScrolling=!this._thumbScrolling&&this._isAnyThumbScrolling(e),this._thumbScrolling&&this._scrollbar.feedbackOn()}},_isThumbScrollingHandler:function(t){return this._isThumb(t)},_moveToMouseLocation:function(t){var e=t["page"+this._axis.toUpperCase()]-this._$element.offset()[this._prop],i=this._location+e/this._containerToContentRatio()-(0,I.Cr)(this._$container)/2;this._scrollStep(-Math.round(i))},_startHandler:function(){this._showScrollbar()},_moveHandler:function(t){this._crossThumbScrolling||(this._thumbScrolling&&(t[this._axis]=-Math.round(t[this._axis]/this._containerToContentRatio())),this._scrollBy(t))},_scrollBy:function(t){t=t[this._axis],this._inBounds()||(t*=.5),this._scrollStep(t)},_scrollByHandler:function(t){this._scrollBy(t),this._scrollComplete()},_containerToContentRatio:function(){return this._scrollbar.containerToContentRatio()},_endHandler:function(t){return this._completeDeferred=new b.BH,this._velocity=t[this._axis],this._inertiaHandler(),this._resetThumbScrolling(),this._completeDeferred.promise()},_inertiaHandler:function(){this._suppressInertia(),this._inertiaAnimator.start()},_suppressInertia:function(){(!this._inertiaEnabled||this._thumbScrolling)&&(this._velocity=0)},_resetThumbScrolling:function(){this._thumbScrolling=!1,this._crossThumbScrolling=!1},_stopHandler:function(){this._thumbScrolling&&this._scrollComplete(),this._resetThumbScrolling(),this._scrollToBounds()},_disposeHandler:function(){this._stopScrolling(),this._$scrollbar.remove()},_updateHandler:function(){this._update(),this._moveToBounds()},_update:function(){return this._stopScrolling(),(0,E.Su)(()=>{this._resetScaleRatio(),this._updateLocation(),this._updateBounds(),this._updateScrollbar(),(0,E.g0)(()=>{this._moveScrollbar(),this._scrollbar.update()})})},_resetScaleRatio:function(){this._scaleRatio=null},_updateLocation:function(){this._location=((0,le.jt)(this._$content)[this._prop]-this._$container[this._scrollProp]())*this._getScaleRatio()},_updateBounds:function(){this._maxOffset=this._getMaxOffset(),this._minOffset=this._getMinOffset()},_getMaxOffset:function(){return 0},_getMinOffset:function(){return this._maxScrollPropValue=Math.max(this._contentSize()-this._containerSize(),0),-this._maxScrollPropValue},_updateScrollbar:(0,E.bN)(function(){var t=this._containerSize(),e=this._contentSize(),i=this._getBaseDimension(this._$container.get(0),this._dimension),a=this._getBaseDimension(this._$content.get(0),this._dimension);(0,E.g0)(()=>{this._scrollbar.option({containerSize:t,contentSize:e,baseContainerSize:i,baseContentSize:a,scaleRatio:this._getScaleRatio()})})}),_moveToBounds:(0,E.Rg)((0,E.bN)((0,E.Rg)(function(){var t=this._boundLocation(),e=t!==this._location;this._location=t,this._move(),e&&this._scrollAction()}))),_createActionsHandler:function(t){this._scrollAction=t.scroll,this._bounceAction=t.bounce},_showScrollbar:function(){this._scrollbar.option("visible",!0)},_hideScrollbar:function(){this._scrollbar.option("visible",!1)},_containerSize:function(){return this._getRealDimension(this._$container.get(0),this._dimension)},_contentSize:function(){var t="hidden"===this._$content.css("overflow"+this._axis.toUpperCase()),e=this._getRealDimension(this._$content.get(0),this._dimension);if(!t){var i=this._$content[0]["scroll"+(0,Pe.MI)(this._dimension)]*this._getScaleRatio();e=Math.max(i,e)}return e},_validateEvent:function(t){var e=(0,p.Z)(t.originalEvent.target);return this._isThumb(e)||this._isScrollbar(e)},_isThumb:function(t){return this._scrollByThumb&&this._scrollbar.isThumb(t)},_isScrollbar:function(t){return this._scrollByThumb&&t&&t.is(this._$scrollbar)},_reachedMin:function(){return Math.round(this._location-this._minOffset)<=0},_reachedMax:function(){return Math.round(this._location-this._maxOffset)>=0},_cursorEnterHandler:function(){this._resetScaleRatio(),this._updateScrollbar(),this._scrollbar.cursorEnter()},_cursorLeaveHandler:function(){this._scrollbar.cursorLeave()},dispose:E.ZT}),Tu=Ce.Z.inherit({ctor:function(t){this._init(t)},_init:function(t){this._component=t,this._$element=t.$element(),this._$container=(0,p.Z)(t.container()),this._$wrapper=t._$wrapper,this._$content=t.$content(),this.option=t.option.bind(t),this._createActionByOption=t._createActionByOption.bind(t),this._isLocked=t._isLocked.bind(t),this._isDirection=t._isDirection.bind(t),this._allowedDirection=t._allowedDirection.bind(t),this._getMaxOffset=t._getMaxOffset.bind(t)},render:function(){this._$element.addClass(fs),this._createScrollers(),this.option("useKeyboard")&&this._$container.prop("tabIndex",0),this._attachKeyboardHandler(),this._attachCursorHandlers()},_createScrollers:function(){this._scrollers={},this._isDirection(Oe)&&this._createScroller(Oe),this._isDirection(ht)&&this._createScroller(ht),this._$element.toggleClass("dx-scrollable-scrollbars-alwaysvisible","always"===this.option("showScrollbar"))},_createScroller:function(t){this._scrollers[t]=new Iu(this._scrollerOptions(t))},_scrollerOptions:function(t){return{direction:t,$content:this._$content,$container:this._$container,$wrapper:this._$wrapper,$element:this._$element,scrollByThumb:this.option("scrollByThumb"),scrollbarVisible:this.option("showScrollbar"),bounceEnabled:this.option("bounceEnabled"),inertiaEnabled:this.option("inertiaEnabled"),isAnyThumbScrolling:this._isAnyThumbScrolling.bind(this)}},_applyScaleRatio:function(t){for(var e in this._scrollers){var i=this._getPropByDirection(e);(0,v.$K)(t[i])&&(t[i]*=this._scrollers[e]._getScaleRatio())}return t},_isAnyThumbScrolling:function(t){var e=!1;return this._eventHandler("isThumbScrolling",t).done(function(i,a){e=i||a}),e},handleInit:function(t){this._suppressDirections(t),this._eventForUserAction=t,this._eventHandler("init",t)},_suppressDirections:function(t){(0,D.pR)(t.originalEvent)?this._prepareDirections(!0):(this._prepareDirections(),this._eachScroller(function(e,i){var a=(0,p.Z)(t.originalEvent.target),r=e._validateEvent(t)||this.option("scrollByContent")&&this._isContent(a);this._validDirections[i]=r}))},_isContent:function(t){return!!t.closest(this._$element).length},_prepareDirections:function(t){t=t||!1,this._validDirections={},this._validDirections[Oe]=t,this._validDirections[ht]=t},_eachScroller:function(t){t=t.bind(this),(0,y.S6)(this._scrollers,function(e,i){t(i,e)})},handleStart:function(t){this._eventForUserAction=t,this._eventHandler("start").done(this._startAction)},_saveActive:function(){Fi=this},_resetActive:function(){Fi===this&&(Fi=null)},handleMove:function(t){if(this._isLocked())return t.cancel=!0,void this._resetActive();this._saveActive(),t.preventDefault&&t.preventDefault(),this._adjustDistance(t,t.delta),this._eventForUserAction=t,this._eventHandler("move",t.delta)},_adjustDistance:function(t,e){e.x*=this._validDirections[Oe],e.y*=this._validDirections[ht];var i=this._tryGetDevicePixelRatio();i&&(0,D.pR)(t.originalEvent)&&(e.x=Math.round(e.x/i*100)/100,e.y=Math.round(e.y/i*100)/100)},_tryGetDevicePixelRatio:function(){if((0,Z.Ym)())return(0,Z.Jj)().devicePixelRatio},handleEnd:function(t){return this._resetActive(),this._refreshCursorState(t.originalEvent&&t.originalEvent.target),this._adjustDistance(t,t.velocity),this._eventForUserAction=t,this._eventHandler("end",t.velocity).done(this._endAction)},handleCancel:function(t){return this._resetActive(),this._eventForUserAction=t,this._eventHandler("end",{x:0,y:0})},handleStop:function(){this._resetActive(),this._eventHandler("stop")},handleScroll:function(){this._updateRtlConfig(),this._scrollAction()},_attachKeyboardHandler:function(){S.Z.off(this._$element,".".concat(gs)),!this.option("disabled")&&this.option("useKeyboard")&&S.Z.on(this._$element,(0,D.V4)("keydown",gs),this._keyDownHandler.bind(this))},_keyDownHandler:function(t){if(clearTimeout(this._updateHandlerTimeout),this._updateHandlerTimeout=setTimeout(()=>{"tab"===(0,D.EV)(t)&&this._eachScroller(i=>{i._updateHandler()})}),this._$container.is(Y.Z.getActiveElement(this._$container.get(0)))){var e=!0;switch((0,D.EV)(t)){case"downArrow":this._scrollByLine({y:1});break;case"upArrow":this._scrollByLine({y:-1});break;case"rightArrow":this._scrollByLine({x:1});break;case"leftArrow":this._scrollByLine({x:-1});break;case"pageDown":this._scrollByPage(1);break;case"pageUp":this._scrollByPage(-1);break;case"home":this._scrollToHome();break;case"end":this._scrollToEnd();break;default:e=!1}e&&(t.stopPropagation(),t.preventDefault())}},_scrollByLine:function(t){var e=this._tryGetDevicePixelRatio(),i=40;e&&(i=Math.abs(i/e*100)/100),this.scrollBy({top:(t.y||0)*-i,left:(t.x||0)*-i})},_scrollByPage:function(t){var e=this._wheelProp(),i=this._dimensionByProp(e),a={};a[e]=t*-("width"===i?I.dz:I.Cr)(this._$container),this.scrollBy(a)},_dimensionByProp:function(t){return"left"===t?"width":"height"},_getPropByDirection:function(t){return t===Oe?"left":"top"},_scrollToHome:function(){var e={};e[this._wheelProp()]=0,this._component.scrollTo(e)},_scrollToEnd:function(){var t=this._wheelProp(),i={},a="width"===this._dimensionByProp(t)?I.dz:I.Cr;i[t]=a(this._$content)-a(this._$container),this._component.scrollTo(i)},createActions:function(){this._startAction=this._createActionHandler("onStart"),this._endAction=this._createActionHandler("onEnd"),this._updateAction=this._createActionHandler("onUpdated"),this._createScrollerActions()},_createScrollerActions:function(){this._scrollAction=this._createActionHandler("onScroll"),this._bounceAction=this._createActionHandler("onBounce"),this._eventHandler("createActions",{scroll:this._scrollAction,bounce:this._bounceAction})},_createActionHandler:function(t){var e=this._createActionByOption(t);return()=>{e((0,C.l)(this._createActionArgs(),arguments))}},_createActionArgs:function(){var{horizontal:t,vertical:e}=this._scrollers,i=this._getScrollOffset();return this._scrollOffset={top:e&&i.top,left:t&&i.left},{event:this._eventForUserAction,scrollOffset:this._scrollOffset,reachedLeft:t&&t._reachedMax(),reachedRight:t&&t._reachedMin(),reachedTop:e&&e._reachedMax(),reachedBottom:e&&e._reachedMin()}},_getScrollOffset(){return{top:-this.location().top,left:-this.location().left}},_eventHandler:function(t){var e=[].slice.call(arguments).slice(1),i=(0,y.UI)(this._scrollers,a=>a["_"+t+"Handler"].apply(a,e));return b.gx.apply(p.Z,i).promise()},location:function(){var t=(0,le.jt)(this._$content);return t.top-=this._$container.scrollTop(),t.left-=this._$container.scrollLeft(),t},disabledChanged:function(){this._attachCursorHandlers()},_attachCursorHandlers:function(){S.Z.off(this._$element,".".concat(Cr)),!this.option("disabled")&&this._isHoverMode()&&(S.Z.on(this._$element,(0,D.V4)("mouseenter",Cr),this._cursorEnterHandler.bind(this)),S.Z.on(this._$element,(0,D.V4)("mouseleave",Cr),this._cursorLeaveHandler.bind(this)))},_isHoverMode:function(){return"onHover"===this.option("showScrollbar")},_cursorEnterHandler:function(t){(t=t||{}).originalEvent=t.originalEvent||{},!Fi&&!t.originalEvent._hoverHandled&&(at&&at._cursorLeaveHandler(),at=this,this._eventHandler("cursorEnter"),t.originalEvent._hoverHandled=!0)},_cursorLeaveHandler:function(t){at!==this||Fi===at||(this._eventHandler("cursorLeave"),at=null,this._refreshCursorState(t&&t.relatedTarget))},_refreshCursorState:function(t){if(this._isHoverMode()||t&&!Fi){var i=(0,p.Z)(t).closest(".".concat(fs,":not(.dx-state-disabled)")),a=i.length&&i.data("dxScrollableStrategy");at&&at!==a&&at._cursorLeaveHandler(),a&&a._cursorEnterHandler()}},update:function(){var t=this._eventHandler("update").done(this._updateAction);return(0,b.gx)(t,(0,E.Su)(()=>{var e=this._allowedDirections();return(0,E.g0)(()=>{var i=e.vertical?"pan-x":"";i=e.horizontal?"pan-y":i,this._$container.css("touchAction",i=e.vertical&&e.horizontal?"none":i)}),(0,b.gx)().promise()}))},_allowedDirections:function(){var t=this.option("bounceEnabled"),e=this._scrollers[ht],i=this._scrollers[Oe];return{vertical:e&&(e._minOffset<0||t),horizontal:i&&(i._minOffset<0||t)}},_updateBounds:function(){this._scrollers[Oe]&&this._scrollers[Oe]._updateBounds()},_isHorizontalAndRtlEnabled:function(){return this.option("rtlEnabled")&&this.option("direction")!==ht},updateRtlPosition:function(t){if(t&&(this._rtlConfig={scrollRight:0,clientWidth:this._$container.get(0).clientWidth,windowPixelRatio:this._getWindowDevicePixelRatio()}),this._updateBounds(),this._isHorizontalAndRtlEnabled()){var e=this._getMaxOffset().left-this._rtlConfig.scrollRight;e<=0&&(e=0,this._rtlConfig.scrollRight=this._getMaxOffset().left),this._getScrollOffset().left!==e&&(this._rtlConfig.skipUpdating=!0,this._component.scrollTo({left:e}),this._rtlConfig.skipUpdating=!1)}},_updateRtlConfig:function(){if(this._isHorizontalAndRtlEnabled()&&!this._rtlConfig.skipUpdating){var{clientWidth:t,scrollLeft:e}=this._$container.get(0),i=this._getWindowDevicePixelRatio();this._rtlConfig.windowPixelRatio===i&&this._rtlConfig.clientWidth===t&&(this._rtlConfig.scrollRight=this._getMaxOffset().left-e),this._rtlConfig.clientWidth=t,this._rtlConfig.windowPixelRatio=i}},_getWindowDevicePixelRatio:function(){return(0,Z.Ym)()?(0,Z.Jj)().devicePixelRatio:1},scrollBy:function(t){var e=this._scrollers[ht],i=this._scrollers[Oe];e&&(t.top=e._boundLocation(t.top+e._location)-e._location),i&&(t.left=i._boundLocation(t.left+i._location)-i._location),this._prepareDirections(!0),this._startAction(),this._eventHandler("scrollBy",{x:t.left,y:t.top}),this._endAction(),this._updateRtlConfig()},validate:function(t){return!((0,D.pR)(t)&&(0,D.j1)(t)||this.option("disabled"))&&(!!this.option("bounceEnabled")||((0,D.pR)(t)?this._validateWheel(t):this._validateMove(t)))},_validateWheel:function(t){var e=this._scrollers[this._wheelDirection(t)],i=e._reachedMin(),a=e._reachedMax(),l=(!i||!a)&&(!i&&!a||i&&t.delta>0||a&&t.delta<0);return(l=l||void 0!==this._validateWheelTimer)&&(clearTimeout(this._validateWheelTimer),this._validateWheelTimer=setTimeout(()=>{this._validateWheelTimer=void 0},500)),l},_validateMove:function(t){return!(!this.option("scrollByContent")&&!(0,p.Z)(t.target).closest(".".concat("dx-scrollable-scrollbar")).length)&&this._allowedDirection()},getDirection:function(t){return(0,D.pR)(t)?this._wheelDirection(t):this._allowedDirection()},_wheelProp:function(){return this._wheelDirection()===Oe?"left":"top"},_wheelDirection:function(t){switch(this.option("direction")){case Oe:return Oe;case ht:return ht;default:return t&&t.shiftKey?Oe:ht}},dispose:function(){this._resetActive(),at===this&&(at=null),this._eventHandler("dispose"),this._detachEventHandlers(),this._$element.removeClass(fs),this._eventForUserAction=null,clearTimeout(this._validateWheelTimer),clearTimeout(this._updateHandlerTimeout)},_detachEventHandlers:function(){S.Z.off(this._$element,".".concat(Cr)),S.Z.off(this._$container,".".concat(gs))}}),Au="dxNativeScrollable",ms="dx-scrollable-native",ca="vertical",xr="horizontal",qS=Ce.Z.inherit({ctor:function(t){this._init(t)},_init:function(t){this._component=t,this._$element=t.$element(),this._$container=(0,p.Z)(t.container()),this._$content=t.$content(),this._direction=t.option("direction"),this._useSimulatedScrollbar=t.option("useSimulatedScrollbar"),this.option=t.option.bind(t),this._createActionByOption=t._createActionByOption.bind(t),this._isLocked=t._isLocked.bind(t),this._isDirection=t._isDirection.bind(t),this._allowedDirection=t._allowedDirection.bind(t),this._getMaxOffset=t._getMaxOffset.bind(t),this._isRtlNativeStrategy=t._isRtlNativeStrategy.bind(t)},render:function(){var e=K.Z.real().platform;this._$element.addClass(ms).addClass(ms+"-"+e).toggleClass("dx-scrollable-scrollbars-hidden",!this._isScrollbarVisible()),this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._renderScrollbars()},updateRtlPosition:function(t){t&&this.option("rtlEnabled")&&this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._moveScrollbars()},_renderScrollbars:function(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass("dx-scrollable-scrollbar-simulated"),this._renderScrollbar(ca),this._renderScrollbar(xr)},_renderScrollbar:function(t){this._isDirection(t)&&(this._scrollbars[t]=new xu((0,p.Z)("<div>").appendTo(this._$element),{direction:t,expandable:this._component.option("scrollByThumb")}))},handleInit:E.ZT,handleStart:E.ZT,handleMove:function(t){this._isLocked()?t.cancel=!0:this._allowedDirection()&&(t.originalEvent.isScrollingEvent=!0)},handleEnd:E.ZT,handleCancel:E.ZT,handleStop:E.ZT,_eachScrollbar:function(t){t=t.bind(this),(0,y.S6)(this._scrollbars||{},function(e,i){t(i,e)})},createActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")},_createActionArgs:function(){var{left:t,top:e}=this.location();return{event:this._eventForUserAction,scrollOffset:this._getScrollOffset(),reachedLeft:this._isRtlNativeStrategy()?this._isReachedRight(-t):this._isReachedLeft(t),reachedRight:this._isRtlNativeStrategy()?this._isReachedLeft(-Math.abs(t)):this._isReachedRight(t),reachedTop:this._isDirection(ca)?Math.round(e)>=0:void 0,reachedBottom:this._isDirection(ca)?Math.round(Math.abs(e)-this._getMaxOffset().top)>=0:void 0}},_getScrollOffset:function(){var{top:t,left:e}=this.location();return{top:-t,left:this._normalizeOffsetLeft(-e)}},_normalizeOffsetLeft(t){return this._isRtlNativeStrategy()?this._getMaxOffset().left+t:t},_isReachedLeft:function(t){return this._isDirection(xr)?Math.round(t)>=0:void 0},_isReachedRight:function(t){return this._isDirection(xr)?Math.round(Math.abs(t)-this._getMaxOffset().left)>=0:void 0},_isScrollbarVisible:function(){var{showScrollbar:t}=this.option();return"never"!==t&&!1!==t},handleScroll:function(t){this._eventForUserAction=t,this._moveScrollbars(),this._scrollAction(this._createActionArgs())},_moveScrollbars:function(){var{top:t,left:e}=this._getScrollOffset();this._eachScrollbar(function(i){i.moveTo({top:-t,left:-e}),i.option("visible",!0)}),this._hideScrollbars()},_hideScrollbars:function(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout(function(){this._eachScrollbar(function(t){t.option("visible",!1)})}.bind(this),500)},location:function(){return{left:-this._$container.scrollLeft(),top:-this._$container.scrollTop()}},disabledChanged:E.ZT,update:function(){this._update(),this._updateAction(this._createActionArgs())},_update:function(){this._updateDimensions(),this._updateScrollbars()},_updateDimensions:function(){this._containerSize={height:(0,I.Cr)(this._$container),width:(0,I.dz)(this._$container)},this._componentContentSize={height:(0,I.Cr)(this._component.$content()),width:(0,I.dz)(this._component.$content())},this._contentSize={height:(0,I.Cr)(this._$content),width:(0,I.dz)(this._$content)}},_updateScrollbars:function(){this._eachScrollbar(function(t,e){var i=e===ca?"height":"width";t.option({containerSize:this._containerSize[i],contentSize:this._componentContentSize[i]}),t.update()})},_allowedDirections:function(){return{vertical:this._isDirection(ca)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(xr)&&this._contentSize.width>this._containerSize.width}},dispose:function(){var t=this._$element.get(0).className,e=new RegExp(ms+"\\S*","g");e.test(t)&&this._$element.removeClass(t.match(e).join(" ")),S.Z.off(this._$element,"."+Au),S.Z.off(this._$container,"."+Au),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)},_removeScrollbars:function(){this._eachScrollbar(function(t){t.$element().remove()})},scrollBy:function(t){var e=this.location();this._$container.scrollTop(Math.round(-e.top-t.top)),this._$container.scrollLeft(Math.round(-e.left-t.left))},validate:function(t){return!(this.option("disabled")||(0,D.pR)(t)&&this._isScrolledInMaxDirection(t)||!this._allowedDirection())},_isScrolledInMaxDirection(t){var e=this._$container.get(0);return t.delta>0?t.shiftKey?!e.scrollLeft:!e.scrollTop:t.shiftKey?e.scrollLeft>=this._getMaxOffset().left:e.scrollTop>=this._getMaxOffset().top},getDirection:function(){return this._allowedDirection()}});const Cs=qS;var Du=function(){return[{device:function(){return!Ue.nativeScrolling},options:{useNative:!1}},{device:function(t){return!K.Z.isSimulator()&&"desktop"===K.Z.real().deviceType&&"generic"===t.platform},options:{bounceEnabled:!1,scrollByThumb:!0,scrollByContent:Ue.touch,showScrollbar:"onHover"}}]};function Ou(t,e){for(var i={left:0,top:0},a=e;null!==(r=a)&&void 0!==r&&r.offsetParent&&!a.classList.contains(t);){var r,n=a.offsetParent,s=a.getBoundingClientRect(),o=n.getBoundingClientRect();i.left+=s.left-o.left,i.top+=s.top-o.top,a=a.offsetParent}return i}var br="vertical",Ru="horizontal",Ss="both",Bu="dx-scrollable-content",ct="dxScrollable",Lu="dx-scrollable",Vu="dx-scrollable-content",pt="vertical",At="horizontal",xs="both",bs=Li.Z.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{disabled:!1,onScroll:null,direction:pt,showScrollbar:"onScroll",useNative:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,onUpdated:null,onStart:null,onEnd:null,onBounce:null,useSimulatedScrollbar:!1,useKeyboard:!0,inertiaEnabled:!0,updateManually:!1})},_defaultOptionsRules:function(){return this.callBase().concat(Du(),[{device:function(){return Ue.nativeScrolling&&"android"===K.Z.real().platform&&!ve.Z.mozilla},options:{useSimulatedScrollbar:!0}}])},_initOptions:function(t){this.callBase(t),"useSimulatedScrollbar"in t||this._setUseSimulatedScrollbar()},_setUseSimulatedScrollbar:function(){this.initialOption("useSimulatedScrollbar")||this.option("useSimulatedScrollbar",!this.option("useNative"))},_init:function(){this.callBase(),this._initScrollableMarkup(),this._locked=!1},_visibilityChanged:function(t){t?(this.update(),this._updateRtlPosition(),this._savedScrollOffset&&this.scrollTo(this._savedScrollOffset),delete this._savedScrollOffset):this._savedScrollOffset=this.scrollOffset()},_initScrollableMarkup:function(){var t=this.$element().addClass(Lu),e=this._$container=(0,p.Z)("<div>").addClass("dx-scrollable-container"),i=this._$wrapper=(0,p.Z)("<div>").addClass("dx-scrollable-wrapper");(this._$content=(0,p.Z)("<div>").addClass(Vu)).append(t.contents()).appendTo(e),e.appendTo(i),i.appendTo(t)},_dimensionChanged:function(){this.update(),this._updateRtlPosition()},_initMarkup:function(){this.callBase(),this._renderDirection()},_render:function(){this._renderStrategy(),this._attachEventHandlers(),this._renderDisabledState(),this._createActions(),this.update(),this.callBase(),this._updateRtlPosition(!0)},_updateRtlPosition:function(t){this._strategy.updateRtlPosition(t)},_getMaxOffset:function(){var{scrollWidth:t,clientWidth:e,scrollHeight:i,clientHeight:a}=(0,p.Z)(this.container()).get(0);return{left:t-e,top:i-a}},_attachEventHandlers:function(){var t=this._strategy,e={getDirection:t.getDirection.bind(t),validate:this._validate.bind(this),isNative:this.option("useNative"),scrollTarget:this._$container};S.Z.off(this._$wrapper,"."+ct),S.Z.on(this._$wrapper,(0,D.V4)(Vi.Z.init,ct),e,this._initHandler.bind(this)),S.Z.on(this._$wrapper,(0,D.V4)(Vi.Z.start,ct),t.handleStart.bind(t)),S.Z.on(this._$wrapper,(0,D.V4)(Vi.Z.move,ct),t.handleMove.bind(t)),S.Z.on(this._$wrapper,(0,D.V4)(Vi.Z.end,ct),t.handleEnd.bind(t)),S.Z.on(this._$wrapper,(0,D.V4)(Vi.Z.cancel,ct),t.handleCancel.bind(t)),S.Z.on(this._$wrapper,(0,D.V4)(Vi.Z.stop,ct),t.handleStop.bind(t)),S.Z.off(this._$container,"."+ct),S.Z.on(this._$container,(0,D.V4)("scroll",ct),t.handleScroll.bind(t))},_validate:function(t){return!this._isLocked()&&(this._updateIfNeed(),this._moveIsAllowed(t))},_moveIsAllowed(t){return this._strategy.validate(t)},handleMove(t){this._strategy.handleMove(t)},_prepareDirections(t){this._strategy._prepareDirections(t)},_initHandler:function(){var t=this._strategy;t.handleInit.apply(t,arguments)},_renderDisabledState:function(){this.$element().toggleClass("dx-scrollable-disabled",this.option("disabled")),this.option("disabled")?this._lock():this._unlock()},_renderDirection:function(){this.$element().removeClass("dx-scrollable-"+At).removeClass("dx-scrollable-"+pt).removeClass("dx-scrollable-"+xs).addClass("dx-scrollable-"+this.option("direction"))},_renderStrategy:function(){this._createStrategy(),this._strategy.render(),this.$element().data("dxScrollableStrategy",this._strategy)},_createStrategy:function(){this._strategy=this.option("useNative")?new Cs(this):new Tu(this)},_createActions:function(){this._strategy&&this._strategy.createActions()},_clean:function(){this._strategy&&this._strategy.dispose()},_optionChanged:function(t){switch(t.name){case"onStart":case"onEnd":case"onUpdated":case"onScroll":case"onBounce":this._createActions();break;case"direction":this._resetInactiveDirection(),this._invalidate();break;case"useNative":this._setUseSimulatedScrollbar(),this._invalidate();break;case"inertiaEnabled":case"scrollByThumb":case"bounceEnabled":case"useKeyboard":case"showScrollbar":case"useSimulatedScrollbar":this._invalidate();break;case"disabled":this._renderDisabledState(),this._strategy&&this._strategy.disabledChanged();break;case"updateManually":case"scrollByContent":break;case"width":this.callBase(t),this._updateRtlPosition();break;default:this.callBase(t)}},_resetInactiveDirection:function(){var t=this._getInactiveProp();if(t&&(0,Z.Ym)()){var e=this.scrollOffset();e[t]=0,this.scrollTo(e)}},_getInactiveProp:function(){var t=this.option("direction");return t===pt?"left":t===At?"top":void 0},_location:function(){return this._strategy.location()},_normalizeLocation:function(t){if((0,v.PO)(t)){var e=(0,E.IS)(t.left,t.x),i=(0,E.IS)(t.top,t.y);return{left:(0,v.$K)(e)?-e:void 0,top:(0,v.$K)(i)?-i:void 0}}var a=this.option("direction");return{left:a!==pt?-t:void 0,top:a!==At?-t:void 0}},_isLocked:function(){return this._locked},_lock:function(){this._locked=!0},_unlock:function(){this.option("disabled")||(this._locked=!1)},_isDirection:function(t){var e=this.option("direction");return t===pt?e!==At:t===At?e!==pt:e===t},_updateAllowedDirection:function(){var t=this._strategy._allowedDirections();this._allowedDirectionValue=this._isDirection(xs)&&t.vertical&&t.horizontal?xs:this._isDirection(At)&&t.horizontal?At:this._isDirection(pt)&&t.vertical?pt:null},_allowedDirection:function(){return this._allowedDirectionValue},$content:function(){return this._$content},content:function(){return(0,W.u)(this._$content)},container:function(){return(0,W.u)(this._$container)},scrollOffset:function(){return this._strategy._getScrollOffset()},_isRtlNativeStrategy:function(){var{useNative:t,rtlEnabled:e}=this.option();return t&&e},scrollTop:function(){return this.scrollOffset().top},scrollLeft:function(){return this.scrollOffset().left},clientHeight:function(){return(0,I.Cr)(this._$container)},scrollHeight:function(){return(0,I.zp)(this.$content())},clientWidth:function(){return(0,I.dz)(this._$container)},scrollWidth:function(){return(0,I.Y_)(this.$content())},update:function(){if(this._strategy)return(0,b.gx)(this._strategy.update()).done(function(){this._updateAllowedDirection()}.bind(this))},scrollBy:function(t){((t=this._normalizeLocation(t)).top||t.left)&&(this._updateIfNeed(),this._strategy.scrollBy(t))},scrollTo:function(t){t=this._normalizeLocation(t),this._updateIfNeed();var e=this._location();this.option("useNative")||(t=this._strategy._applyScaleRatio(t),e=this._strategy._applyScaleRatio(e)),this._isRtlNativeStrategy()&&(e.left=e.left-this._getMaxOffset().left);var i=this._normalizeLocation({left:e.left-(0,E.IS)(t.left,e.left),top:e.top-(0,E.IS)(t.top,e.top)});!i.top&&!i.left||this._strategy.scrollBy(i)},scrollToElement:function(t,e){var i=(0,p.Z)(t),a=this.$content().find(t).length,r=i.parents("."+Lu).length-i.parents("."+Vu).length==0;if(a&&r){var n={top:0,left:0},s=this.option("direction");s!==pt&&(n.left=this.getScrollElementPosition(i,At,e)),s!==At&&(n.top=this.getScrollElementPosition(i,pt,e)),this.scrollTo(n)}},getScrollElementPosition:function(t,e,i){var a=this.scrollOffset();return function XS(t,e,i,a,r){var n=(0,M.Z)({top:0,left:0,right:0,bottom:0},r),s=e===br,o=s?"top":"left",l=s?"bottom":"right",d=s?"height":"width",u=i["offset".concat((0,Pe.MI)(d))],h=i["client".concat((0,Pe.MI)(d))],c=i.getBoundingClientRect()[d],_=t.getBoundingClientRect()[d],g=1;Math.abs(c-u)>1&&(g=c/u);var f=Ou(Bu,t)[o]/g,m=a[o],x=m-f+n[o],w=m-f-_/g+h-n[l];return x<=0&&w>=0?m:m-(Math.abs(x)>Math.abs(w)?w:x)}(t.get(0),e,(0,p.Z)(this.container()).get(0),a,i)},_updateIfNeed:function(){this.option("updateManually")||this.update()},_useTemplates:function(){return!1},isRenovated:function(){return!!bs.IS_RENOVATED_WIDGET}});(0,J.Z)(ct,bs);const Pu=bs,_t=Pu;var ws="dx-group-row",Fu="dx-group-cell",wr="dx-freespace-row",Mu="dx-column-lines",ku="dx-row-alt",Nu="dx-last-row-border";function Hu(t){return t?Math.round(t.scrollWidth()-t.clientWidth()):0}function Zu(t){var{rowType:e,column:i}=t;return"group"===e&&(0,v.$K)(i.groupIndex)&&!i.showWhenGrouped&&!i.command}var ux=function(t,e){var i=(0,ot.xb)(e.text)&&"data"===e.rowType,{text:a}=e,r=t.get(0);i?V.setEmptyText(t):e.column.encodeHtml?r.textContent=a:r.innerHTML=a},$u={defaultOptions:()=>({hoverStateEnabled:!1,scrolling:{useNative:"auto"},loadPanel:{enabled:"auto",text:A.Z.format("Loading"),width:200,height:90,showIndicator:!0,indicatorSrc:"",showPane:!0},dataRowTemplate:null,columnAutoWidth:!1,noDataText:A.Z.format("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1,twoWayBindingEnabled:!0}),views:{rowsView:class cx extends da{_getDefaultTemplate(e){return"empty"===e.command?function(i){i.html("&nbsp;")}:ux}_getDefaultGroupTemplate(e){var i=this.option("summary.texts");return function(a,r){var{data:n}=r,s="".concat(r.column.caption,": ").concat(r.text),o=a.get(0);r.summaryItems&&r.summaryItems.length&&(s+=" ".concat(V.getGroupRowSummaryText(r.summaryItems,i))),n&&(r.groupContinuedMessage&&r.groupContinuesMessage?s+=" (".concat(r.groupContinuedMessage,". ").concat(r.groupContinuesMessage,")"):r.groupContinuesMessage?s+=" (".concat(r.groupContinuesMessage,")"):r.groupContinuedMessage&&(s+=" (".concat(r.groupContinuedMessage,")"))),e.encodeHtml?o.textContent=s:o.innerHTML=s}}_update(e){}_updateCell(e,i){Zu(i)&&e.addClass(Fu),super._updateCell.apply(this,arguments)}_getCellTemplate(e){var{column:i}=e;return Zu(e)?i.groupCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultGroupTemplate(i)}:("data"===e.rowType||i.command)&&i.cellTemplate?i.cellTemplate:{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(i)}}_createRow(e,i){var a=super._createRow.apply(this,arguments);if(e){var r="group"===e.rowType,n="data"===e.rowType;if(n&&a.addClass("dx-data-row"),n&&this.option("showRowLines")&&a.addClass("dx-row-lines"),this.option("showColumnLines")&&a.addClass(Mu),!1===e.visible&&a.hide(),r){a.addClass(ws);var s=e.isExpanded;this.setAria("role","row",a),this.setAria("expanded",(0,v.$K)(s)&&s.toString(),a)}}return a}_rowPrepared(e,i,a){"data"===i.rowType&&(this.option("rowAlternationEnabled")&&(this._isAltRow(a)&&e.addClass(ku),i.watch&&i.watch(()=>this._isAltRow(a),r=>{e.toggleClass(ku,r)})),this._setAriaRowIndex(i,e),i.watch&&i.watch(()=>i.rowIndex,()=>this._setAriaRowIndex(i,e))),super._rowPrepared.apply(this,arguments)}_setAriaRowIndex(e,i){var{component:a}=this,r="standard"===a.option("scrolling.mode")&&!V.isVirtualRowRendering(a),n=e.rowIndex+1;r?n=a.pageIndex()*a.pageSize()+n:n+=this._dataController.getRowIndexOffset(),this.setAria("rowindex",n,i)}_afterRowPrepared(e){var i=e.args[0],a=this._dataController,r=a.getVisibleRows()[i.rowIndex],n=this.option("integrationOptions.watchMethod");if(i.data&&"data"===i.rowType&&!i.isNewRow&&this.option("twoWayBindingEnabled")&&n&&r){var s=n(()=>a.generateDataValues(i.data,i.columns),()=>{a.repaintRows([r.rowIndex],this.option("repaintChangesOnly"))},{deep:!0,skipImmediate:!0});S.Z.on(i.rowElement,dr.x,s)}}_renderScrollable(e){var i=this.element();if(i.children().length||i.append("<div>"),(e||!this._loadPanel)&&this._renderLoadPanel(i,i.parent(),this._dataController.isLocalStore()),(e||!this.getScrollable())&&this._dataController.isLoaded()){for(var a=this.getColumns(),r=!0,n=0;n<a.length;n++)if(!a[n].width&&!a[n].minWidth){r=!1;break}(this.option("columnAutoWidth")||this._hasHeight||r||this._columnsController._isColumnFixing())&&this._renderScrollableCore(i)}}_handleScroll(e){var i=this.option("rtlEnabled"),a=e.component.option("useNative");this._scrollTop=e.scrollOffset.top,this._scrollLeft=e.scrollOffset.left;var r=e.scrollOffset.left;i&&(this._scrollRight=Hu(e.component)-this._scrollLeft,a&&(r=-this._scrollRight),this.isScrollbarVisible(!0)||(this._scrollLeft=-1)),this.scrollChanged.fire((0,M.Z)((0,M.Z)({},e.scrollOffset),{left:r}),this.name)}_renderScrollableCore(e){var i=this._createScrollableOptions(),a=this._handleScroll.bind(this);i.onScroll=a,this._scrollable=this._createComponent(e,_t,i),this._scrollableContainer=this._scrollable&&(0,p.Z)(this._scrollable.container())}_renderLoadPanel(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return V.renderLoadPanel.apply(this,arguments)}_renderContent(e,i,a){return e.empty().append(i),this._findContentElement()}_updateContent(e,i,a){return this._contentChanges.push({newTableElement:e,change:i,isFixedTableRendering:a}),this.waitAsyncTemplates().done(()=>{var r=this._contentChanges;this._contentChanges=[],r.forEach(n=>{var{newTableElement:s,change:o,isFixedTableRendering:l}=n,d=this.getTableElement(l),u=this._findContentElement(l),h=o?.changeType,c=[],_=this.option("highlightChanges"),g=this.addWidgetPrefix("row-inserted-animation");"update"===h?((0,y.S6)(o.rowIndices,(f,m)=>{var x,w=this._getRowElements(s).eq(f),T=null===(x=o.changeTypes)||void 0===x?void 0:x[f],O=o.items&&o.items[f];c.push(()=>{var P,F=this._getRowElements(d),N=F.eq(m);switch(T){case"update":if(O){var H=null===(P=o.columnIndices)||void 0===P?void 0:P[f];(0,v.$K)(O.visible)&&O.visible!==N.is(":visible")?N.toggle(O.visible):H?this._updateCells(N,w,H):N.replaceWith(w)}break;case"insert":if(F.length)N.length?w.insertBefore(N):w.insertAfter(F.last());else if(d){var k=w.is("tbody")?d:d.children("tbody");w.prependTo(k)}_&&o.isLiveUpdate&&w.addClass(g);break;case"remove":N.remove()}})}),(0,y.S6)(c,function(){this()}),s.remove()):(this.setTableElement(s,l),u.addClass(this.addWidgetPrefix("content")),this._renderContent(u,s,l))})}).fail(()=>{this._contentChanges=[]})}_createEmptyRow(e,i,a){var r,n=this._createRow(),s=i?this.getFixedColumns():this.getColumns();n.addClass(e).toggleClass(Mu,this.option("showColumnLines"));for(var o=0;o<s.length;o++)r=this._createCell({column:s[o],rowType:"freeSpace",columnIndex:o,columns:s}),(0,v.kE)(a)&&r.css("height",a),n.append(r);return this.setAria("role","presentation",n),n}getFixedColumns(){throw new Error("Method not implemented.")}_appendEmptyRow(e,i,a){var r=this._getBodies(e),n=!r.length||i.is("tbody"),s=n?e:r;if("top"===a){if(s.first().prepend(i),n){var o=s.children("colgroup");s.prepend(o)}}else s.last().append(i)}_renderFreeSpaceRow(e,i){var a=this._createEmptyRow(wr);a=this._wrapRowIfNeed(e,a,"refresh"===i?.changeType),this._appendEmptyRow(e,a)}_checkRowKeys(e){var i=this,a=i._getRows(e),r=i._dataController.store()&&i._dataController.store().key();r&&a.some(n=>{if("data"===n.rowType&&void 0===n.key)return i._dataController.fireError("E1046",r),!0})}_needUpdateRowHeight(e){return e>0&&!this._rowHeight}_getRowsHeight(e){return(e=e||this._tableElement).children("tbody").children().not(".dx-virtual-row").not(".".concat(wr)).toArray().reduce((a,r)=>a+(0,se.l)(r).height,0)}_updateRowHeight(){var e=this.getTableElement(),i=this._dataController.items().length;if(e&&this._needUpdateRowHeight(i)){var a=this._getRowsHeight(e);this._rowHeight=a/i}}_findContentElement(e){var i=this.element(),a=this.getScrollable();if(i)return a&&(i=(0,p.Z)(a.content())),i.children().first()}_getRowElements(e){var i=super._getRowElements(e);return i&&i.not(".".concat(wr))}_getFreeSpaceRowElements(e){var i=e||this.getTableElements();return i&&i.children("tbody").children(".".concat(wr))}_getNoDataText(){return this.option("noDataText")}_rowClick(e){var i=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowClick",(0,C.l)({evaluate:a=>(0,Q.vb)(a)(i.data)},e,i))}_rowDblClick(e){var i=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowDblClick",(0,C.l)({},e,i))}_getColumnsCountBeforeGroups(e){for(var i=0;i<e.length;i++)if("groupExpand"===e[i].type)return i;return 0}_getGroupCellOptions(e){var i=this._getColumnsCountBeforeGroups(e.columns),a=(e.row.groupIndex||0)+i;return{columnIndex:a,colspan:e.columns.length-a-1}}_needWrapRow(){return super._needWrapRow.apply(this,arguments)||!!this.option("dataRowTemplate")}_renderCells(e,i){"group"===i.row.rowType?this._renderGroupedCells(e,i):i.row.values&&super._renderCells(e,i)}_renderGroupedCells(e,i){for(var r,o,{row:a}=i,{columns:n}=i,{rowIndex:s}=a,l=this._getGroupCellOptions(i),d=0;d<=l.columnIndex;d++)d===l.columnIndex&&n[d].allowCollapsing&&"infinite"!==i.scrollingMode?(o=!!a.isExpanded,r=n[d]):(o=null,r={command:"expand",cssClass:n[d].cssClass}),this._needRenderCell(d,i.columnIndices)&&this._renderCell(e,{value:o,row:a,rowIndex:s,column:r,columnIndex:d,columnIndices:i.columnIndices,change:i.change});var u=(0,se.q)(this.option("rtlEnabled")),h=(0,C.l)({},n[l.columnIndex],{command:null,type:null,cssClass:null,width:null,showWhenGrouped:!1,alignment:u});l.colspan>1&&(h.colspan=l.colspan),this._needRenderCell(l.columnIndex+1,i.columnIndices)&&this._renderCell(e,{value:a.values[a.groupIndex],row:a,rowIndex:s,column:h,columnIndex:l.columnIndex+1,columnIndices:i.columnIndices,change:i.change})}_renderRows(e,i){var a=this.option("scrolling.mode");super._renderRows(e,(0,C.l)({scrollingMode:a},i)),this._checkRowKeys(i.change),this._renderFreeSpaceRow(e,i.change),this._hasHeight||this.updateFreeSpaceRowHeight(e)}_renderDataRowByTemplate(e,i,a){var{row:r}=i,n=(0,C.l)({columns:i.columns},r),s=this._createRow(r,"tbody");s.appendTo(e),this.renderTemplate(s,a,n,!0,i.change),this._rowPrepared(s,n,i.row)}_renderRow(e,i){var{row:a}=i,{rowTemplate:r}=this.option(),n=this.option("dataRowTemplate");"data"===a.rowType&&n?this._renderDataRowByTemplate(e,i,n):"data"!==a.rowType&&"group"!==a.rowType||(0,v.$K)(a.groupIndex)||!r?super._renderRow(e,i):this.renderTemplate(e,r,(0,C.l)({columns:i.columns},a),!0)}_renderTable(e){var i=this,a=super._renderTable(e);return(0,v.$K)(i.getTableElement())?i._renderScrollable():(i.setTableElement(a),i._renderScrollable(!0),i.resizeCompleted.add(function r(){var n=i.getScrollable();n&&i.element().closest((0,Z.Jj)().document).length&&(i.resizeCompleted.remove(r),n._visibilityChanged(!0))})),a}_createTable(){var e=super._createTable.apply(this,arguments);return(this.option().rowTemplate||this.option().dataRowTemplate)&&e.appendTo(this.component.$element()),e}_renderCore(e){var i=this.element();i.addClass(this.addWidgetPrefix("rowsview")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")),i.toggleClass("dx-empty",this._dataController.isEmpty()),this.setAria("role","presentation",i);var a=this._renderTable({change:e}),r=this._updateContent(a,e);return super._renderCore(e),this._lastColumnWidths=null,r}_getRows(e){return e&&e.items||this._dataController.items()}_getCellOptions(e){var{column:i}=e,{row:a}=e,{data:r}=a,n=a&&a.summaryCells,{value:s}=e,o=V.getDisplayValue(i,s,r,a.rowType),l=super._getCellOptions(e);if(l.value=s,l.oldValue=e.oldValue,l.displayValue=o,l.row=a,l.key=a.key,l.data=r,l.rowType=a.rowType,l.values=a.values,l.text=i.command?"":V.formatValue(o,i),l.rowIndex=a.rowIndex,l.summaryItems=n&&n[e.columnIndex],l.resized=i.resizedCallbacks,(0,v.$K)(i.groupIndex)&&!i.command){var d=this.option("grouping.texts"),u=this.option("scrolling.mode");"virtual"!==u&&"infinite"!==u&&(l.groupContinuesMessage=r&&r.isContinuationOnNextPage&&d&&d.groupContinuesMessage,l.groupContinuedMessage=r&&r.isContinuation&&d&&d.groupContinuedMessage)}return l}_setRowsOpacityCore(e,i,a,r){var n=this._columnsController,s=n.getColumns(),o=s&&s[a],l=o&&o.isBand&&o.index;(0,y.S6)(e,(d,u)=>{if(!(0,p.Z)(u).hasClass(ws))for(var h=0;h<i.length&&(!((0,v.kE)(l)&&n.isParentBandColumn(i[h].index,l)||i[h].index===a)||(e.eq(d).children().eq(h).css({opacity:r}),(0,v.kE)(l)));h++);})}_getDevicePixelRatio(){return(0,Z.Jj)().devicePixelRatio}renderNoDataText(){return V.renderNoDataText.apply(this,arguments)}getCellOptions(e,i){var r,n,a=this._dataController.items()[e];return a&&(n=(0,v.HD)(i)?this._columnsController.columnOption(i):this._columnsController.getVisibleColumns()[i])&&(r=this._getCellOptions({value:n.calculateCellValue(a.data),rowIndex:a.rowIndex,row:a,column:n})),r}getRow(e){if(e>=0){var i=this._getRowElements();if(i.length>e)return(0,p.Z)(i[e])}}updateFreeSpaceRowHeight(e){var i=this._dataController,a=i.items(!0).length,r=this._findContentElement(),n=this._getFreeSpaceRowElements(e);if(n&&r&&i.totalCount()>=0){var s=!1;if(a>0)if(this._hasHeight)n.hide(),(0,E.Su)(()=>{var d=this.getScrollbarWidth(!0),u=(0,I.Cr)(this.element())-d,c=u-(0,I.zp)(r)>0,_=this._getRowsHeight(r.children().first()),g=e||this.getTableElements(),x=u-_-Math.ceil(parseFloat(g.css("borderTopWidth")))-this._getHeightCorrection();c&&(0,E.g0)(()=>{n.css("height",x),s=!0,n.show()}),(0,E.g0)(()=>this._updateLastRowBorder(s))});else{var o=i.pageSize()-a,l=this.option("scrolling.mode");o>0&&i.pageCount()>1&&"virtual"!==l&&"infinite"!==l&&((0,Ne.QQ)(n,o*this._rowHeight),s=!0),!s&&e?(0,Ne.QQ)(n,0):n.toggle(s),this._updateLastRowBorder(s)}else n.css("height",0),n.show(),this._updateLastRowBorder(!0)}}_getHeightCorrection(){var e=ve.Z.webkit&&this._getDevicePixelRatio()>=2,i=ve.Z.chrome&&ve.Z.version>=91,a=ve.Z.mozilla&&ve.Z.version>=70&&!this.option("showRowLines");return e||a||i?1:0}_columnOptionChanged(e){var{optionNames:i}=e;e.changeTypes.grouping||(i.width||i.visibleWidth)&&(super._columnOptionChanged(e),this._fireColumnResizedCallbacks())}getScrollable(){return this._scrollable}init(){var e=this,i=e.getController("data");super.init(),e._editorFactoryController=e.getController("editorFactory"),e._rowHeight=0,e._scrollTop=0,e._scrollLeft=-1,e._scrollRight=0,e._hasHeight=!1,e._contentChanges=[],i.loadingChanged.add((a,r)=>{e.setLoading(a,r)}),i.dataSourceChanged.add(()=>{this._scrollLeft>=0&&!this._dataController.isLoading()&&this._handleScroll({component:this.getScrollable(),forceUpdateScrollPosition:!0,scrollOffset:{top:this._scrollTop,left:this._scrollLeft}})})}_handleDataChanged(e){switch(e.changeType){case"refresh":case"prepend":case"append":case"update":this.render(null,e);break;default:this._update(e)}}publicMethods(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement","getRowElement","getScrollable"]}contentWidth(){return(0,I.dz)(this.element())-this.getScrollbarWidth()}getScrollbarWidth(e){var i=this._scrollableContainer&&this._scrollableContainer.get(0),a=0;return i&&(e?(a=i.clientHeight?i.offsetHeight-i.clientHeight:0,a+=function(t){var e=t.getScrollable();return e?Math.ceil(parseFloat((0,p.Z)(e.content()).css("paddingBottom"))):0}(this)):a=i.clientWidth?i.offsetWidth-i.clientWidth:0),a>0?a:0}_fireColumnResizedCallbacks(){for(var e=this._lastColumnWidths||[],i=[],a=this.getColumns(),r=0;r<a.length;r++)i[r]=a[r].visibleWidth,a[r].resizedCallbacks&&!(0,v.$K)(a[r].groupIndex)&&e[r]!==i[r]&&a[r].resizedCallbacks.fire(i[r]);this._lastColumnWidths=i}_updateLastRowBorder(e){this.option("showBorders")&&this.option("showRowLines")&&!e?this.element().addClass(Nu):this.element().removeClass(Nu)}_updateScrollable(){var e=_t.getInstance(this.element());e&&(e.update(),(e.option("useNative")||!e?.isRenovated())&&this._updateHorizontalScrollPosition())}_updateHorizontalScrollPosition(){var e=this.getScrollable(),i=e&&e.scrollOffset().left;if(this.option("rtlEnabled")){var r=Hu(e);r-i!==this._scrollRight&&(this._scrollLeft=r-this._scrollRight)}this._scrollLeft>=0&&i!==this._scrollLeft&&e.scrollTo({x:this._scrollLeft})}_resizeCore(){var e=this;e._fireColumnResizedCallbacks(),e._updateRowHeight(),(0,E.g0)(()=>{e._renderScrollable(),e.renderNoDataText(),e.updateFreeSpaceRowHeight(),(0,E.Su)(()=>{e._updateScrollable()})})}scrollTo(e){var i=this.element(),a=i&&_t.getInstance(i);a&&a.scrollTo(e)}height(e){var i=this.element();if(0===arguments.length)return i?(0,I.zp)(i,!0):0;(0,v.$K)(e)&&i&&(this.hasHeight("auto"!==e),(0,Ne.QQ)(i,e))}hasHeight(e){if(0===arguments.length)return!!this._hasHeight;this._hasHeight=e}setLoading(e,i){var a=this._loadPanel,r=this._dataController,n=this.option("loadPanel")||{},s=r.isLoaded()?n.animation:null,o=this.element();if((0,Z.Ym)()&&(!a&&void 0!==i&&r.isLocalStore()&&"auto"===n.enabled&&o&&(this._renderLoadPanel(o,o.parent()),a=this._loadPanel),a)){var l={message:i||n.text,animation:s,visible:e};e&&(l.position=V.calculateLoadPanelPosition(o)),clearTimeout(this._hideLoadingTimeoutID),a.option("visible")&&!e?this._hideLoadingTimeoutID=setTimeout(()=>{a.option(l)},200):a.option(l)}}setRowsOpacity(e,i){var a=this._getRowElements().not(".".concat(ws))||[];this._setRowsOpacityCore(a,this.getColumns(),e,i)}_getCellElementsCore(e){var i=super._getCellElementsCore.apply(this,arguments);if(i){var a=i.filter(".".concat(Fu)).index();if(a>=0&&i.length>a+1)return i.slice(0,a+1)}return i}_getBoundaryVisibleItemIndex(e,i){var a=0,r=0,n=0,s=this._scrollTop,o=this._findContentElement(),l=o&&o.offset().top,u=this.getController("data").items(),h=this.getTableElement();if(u.length&&h){var c=this._getRowElements(h).filter(":visible");for(e||(s+=(0,I.zp)(this._hasHeight?this.element():(0,Z.Jj)())),a=0;a<u.length;a++){r=n;var g=(0,p.Z)(c).eq(a);if(g.length&&(n=g.offset(),(n=(e?n.top:n.top+(0,I.zp)(g))-l)>s)){a&&(i||2*s<Math.round(n+r))&&a--;break}}a&&a===u.length&&a--}return a}getTopVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!0,e)}getBottomVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!1,e)}getTopVisibleRowData(){var e=this.getTopVisibleItemIndex(),i=this._dataController.items();if(i[e])return i[e].data}_scrollToElement(e,i){var a=this.getScrollable();a&&a.scrollToElement(e,i)}optionChanged(e){switch(super.optionChanged(e),e.name){case"wordWrapEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"dataRowTemplate":case"twoWayBindingEnabled":this._invalidate(!0,!0),e.handled=!0;break;case"scrolling":this._rowHeight=null,this._tableElement=null,e.handled=!0;break;case"rtlEnabled":this._rowHeight=null,this._tableElement=null;break;case"loadPanel":this._tableElement=null,this._invalidate(!0,"loadPanel.enabled"!==e.fullName),e.handled=!0;break;case"noDataText":this.renderNoDataText(),e.handled=!0}}dispose(){super.dispose(),clearTimeout(this._hideLoadingTimeoutID),this._scrollable&&this._scrollable.dispose()}setScrollerSpacing(){}_restoreErrorRow(){}}}};$.registerModule("rows",$u);var Ee=L(9846),ce=L(4383),$t=L(1923),ys=L(1120),vt=L(1554),zu=function px(t){return class{constructor(){throw new Error("Module '".concat(t,"' not found"))}static getInstance(){}}}("TextBox");const ni={_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){var t=this.$element(),e=this.option("searchEnabled"),i=this._addWidgetPrefix("search"),a=this._addWidgetPrefix("with-search");if(!e)return t.removeClass(a),void this._removeSearchBox();var r=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(r):(t.addClass(a),this._$searchEditorElement=(0,p.Z)("<div>").addClass(i).prependTo(t),this._searchEditor=this._createComponent(this._$searchEditorElement,zu,r))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){var t=this,e=t.option("searchEditorOptions"),i=A.Z.format("Search");return(0,C.l)({mode:"search",placeholder:i,tabIndex:t.option("tabIndex"),value:t.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":i},onValueChanged:function(a){var r=t.option("searchTimeout");t._valueChangeDeferred=new b.BH,clearTimeout(t._valueChangeTimeout),t._valueChangeDeferred.done(function(){this.option("searchValue",a.value)}.bind(t)),a.event&&"input"===a.event.type&&r?t._valueChangeTimeout=setTimeout(function(){t._valueChangeDeferred.resolve()},r):t._valueChangeDeferred.resolve()}},e)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(t,e){this.option("searchEnabled")&&this._toggleFocusClass(e,this.$element()),this.callBase(t,e)},getOperationBySearchMode:function(t){return"equals"===t?"=":t},_optionChanged:function(t){switch(t.name){case"searchEnabled":case"searchEditorOptions":this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource)return void ee.Z.log("W1009");"searchMode"===t.name?this._dataSource.searchOperation(this.getOperationBySearchMode(t.value)):this._dataSource[t.name](t.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(t)}},focus:function(){this.option("focusedElement")||!this.option("searchEnabled")?this.callBase():this._searchEditor&&this._searchEditor.focus()},_cleanAria:function(){var t=this.$element();this.setAria({role:null,activedescendant:null},t),t.attr("tabIndex",null)},_clean(){this.callBase(),this._cleanAria()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(t){zu=t}};var yr=L(5710),He=L(6056),Mi=L(8287),_x=Ce.Z.inherit({ctor:function(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes:function(t,e){var i=this;(0,y.S6)(t,function(a,r){var n=(0,v.$K)(e)?e:i._getParentId(r),s=i._convertItemToNode(r,n);i._dataStructure.push(s),i._checkForDuplicateId(s.internalFields.key),i._indexByKey[s.internalFields.key]=i._dataStructure.length-1,i._itemHasChildren(r)&&i._convertItemsToNodes(i._dataAccessors.getters.items(r),s.internalFields.key)})},_checkForDuplicateId:function(t){if((0,v.$K)(this._indexByKey[t]))throw ee.Z.Error("E1040",t)},_getParentId:function(t){return"plain"===this._dataType?this._dataAccessors.getters.parentKey(t):void 0},_itemHasChildren:function(t){if("plain"!==this._dataType){var e=this._dataAccessors.getters.items(t);return e&&e.length}},_getUniqueKey:function(t){var e=this._dataAccessors.getters.key,i=e(t);return e&&(i||0===i)&&(0,v.pt)(i)?i:this.getItemsCount()},_convertItemToNode:function(t,e){this._itemsCount++,!1!==t.visible&&this._visibleItemsCount++;var i={internalFields:{disabled:this._dataAccessors.getters.disabled(t,{defaultValue:!1}),expanded:this._dataAccessors.getters.expanded(t,{defaultValue:!1}),selected:this._dataAccessors.getters.selected(t,{defaultValue:!1}),key:this._getUniqueKey(t),parentKey:(0,v.$K)(e)?e:this._rootValue,item:this._makeObjectFromPrimitive(t),childrenKeys:[]}};return(0,C.l)(i,t),delete i.items,i},setChildrenKeys:function(){var t=this;(0,y.S6)(this._dataStructure,function(e,i){if(i.internalFields.parentKey!==t._rootValue){var a=t.getParentNode(i);a&&a.internalFields.childrenKeys.push(i.internalFields.key)}})},_makeObjectFromPrimitive:function(t){if((0,v.pt)(t)){var e=t;this._dataAccessors.setters.key(t={},e)}return t},_convertToPublicNode:function(t,e){if(!t)return null;var i={text:this._dataAccessors.getters.display(t),key:t.internalFields.key,selected:t.internalFields.selected,expanded:t.internalFields.expanded,disabled:t.internalFields.disabled,parent:e||null,itemData:t.internalFields.item,children:[],items:[]};return i.parent&&(i.parent.children.push(i),i.parent.items.push(i)),i},convertToPublicNodes:function(t,e){if(!t.length)return[];var i=this,a=[];return(0,y.S6)(t,function(r,n){n=(0,v.pt)(n)?i._getByKey(n):n;var s=i._convertToPublicNode(n,e);s.children=i.convertToPublicNodes(n.internalFields.childrenKeys,s),a.push(s),n.internalFields.publicNode=s}),a},setDataAccessors:function(t){this._dataAccessors=t},_getByKey:function(t){return this._dataStructure[this.getIndexByKey(t)]||null},getParentNode:function(t){return this._getByKey(t.internalFields.parentKey)},getByKey:function(t,e){if(null==e)return null;var s,i=null,a=this;return s=e,(0,y.S6)(t,function(o,l){if((l.internalFields&&l.internalFields.key||a._dataAccessors.getters.key(l)).toString()===s.toString())return i=l,!1}),i},getItemsCount:function(){return this._itemsCount},getVisibleItemsCount:function(){return this._visibleItemsCount},updateIndexByKey:function(){var t=this;this._indexByKey={},(0,y.S6)(this._dataStructure,function(e,i){t._checkForDuplicateId(i.internalFields.key),t._indexByKey[i.internalFields.key]=e})},updateChildrenKeys:function(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys:function(){this._indexByKey={},(0,y.S6)(this._dataStructure,function(t,e){e.internalFields.childrenKeys=[]})},getIndexByKey:function(t){return this._indexByKey[t]},createPlainStructure:function(t,e,i){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=e,this._dataType=i,this._indexByKey={},this._convertItemsToNodes(t),this.setChildrenKeys(),this._dataStructure}});const vx=_x;var ki="expanded",si="selected";ni.setEditorClass(yr.Z);var fx=Ce.Z.inherit({ctor:function(t){this.options={},(0,C.l)(this.options,this._defaultOptions(),t),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption:function(t,e){this.options[t]=e,"recursiveSelection"===t&&this._updateSelection()},_defaultOptions:function(){return{dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new vx,onNodeChanged:E.ZT,sort:null}},_createInternalDataStructure:function(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection:function(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(si)},_updateExpansion:function(t){this.options.recursiveExpansion&&(t?this._updateOneBranch(t):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray(ki)},_updateNodesKeysArray:function(t){var e=this,i=[];return(0,y.S6)(e._getDataBySelectionMode(),function(a,r){e._isNodeVisible(r)&&r.internalFields[t]&&(t===ki||e.options.multipleSelection?i.push(r.internalFields.key):(i.length&&e.toggleSelection(i[0],!1,!0),i=[r.internalFields.key]))}),i},_getDataBySelectionMode:function(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:function(t){return!1!==t.internalFields.item.visible},_getByKey:function(t,e){return t===this._dataStructure?this.options.dataConverter._getByKey(e):this.options.dataConverter.getByKey(t,e)},_setChildrenSelection:function(){var t=this;(0,y.S6)(this._dataStructure,function(e,i){if(i.internalFields.childrenKeys.length){var a=i.internalFields.selected;!0===a&&t._toggleChildrenSelection(i,a)}})},_setParentSelection:function(){var t=this;(0,y.S6)(this._dataStructure,function(e,i){t.options.dataConverter.getParentNode(i)&&i.internalFields.parentKey!==t.options.rootValue&&t._iterateParents(i,function(r){var n=t._calculateSelectedState(r);t._setFieldState(r,si,n)})})},_setParentExpansion:function(){var t=this;(0,y.S6)(this._dataStructure,function(e,i){i.internalFields.expanded&&t._updateOneBranch(i.internalFields.key)})},_updateOneBranch:function(t){var e=this,i=this.getNodeByKey(t);e._iterateParents(i,function(a){e._setFieldState(a,ki,!0)})},_iterateChildren:function(t,e,i,a){if((0,v.mf)(i)){var r=this,n=t.internalFields.key;-1===(a=a||[]).indexOf(n)&&(a.push(n),(0,y.S6)(t.internalFields.childrenKeys,function(s,o){var l=r.getNodeByKey(o);i(l),l.internalFields.childrenKeys.length&&e&&r._iterateChildren(l,e,i,a)}))}},_iterateParents:function(t,e,i){if(t.internalFields.parentKey!==this.options.rootValue&&(0,v.mf)(e)){var a=t.internalFields.key;if(-1===(i=i||[]).indexOf(a)){i.push(a);var r=this.options.dataConverter.getParentNode(t);r&&(e(r),r.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(r,e,i))}}},_calculateSelectedState:function(t){for(var e=t.internalFields.childrenKeys.length,i=0,a=0,r=!1,n=0;n<=e-1;n++){var s=this.getNodeByKey(t.internalFields.childrenKeys[n]),l=s.internalFields.selected;!1===s.internalFields.item.visible?a++:l?i++:void 0===l&&(i+=.5)}return i&&(r=i===e-a||void 0),r},_toggleChildrenSelection:function(t,e){var i=this;this._iterateChildren(t,!0,function(a){i._isNodeVisible(a)&&i._setFieldState(a,si,e)})},_setFieldState:function(t,e,i){t.internalFields[e]!==i&&(t.internalFields[e]=i,t.internalFields.publicNode&&(t.internalFields.publicNode[e]=i),this.options.dataAccessors.setters[e](t.internalFields.item,i),this.options.onNodeChanged(t))},_markChildren:function(t){var e=this;(0,y.S6)(t,function(i,a){var r=e.getIndexByKey(a),n=e.getNodeByKey(a);e._dataStructure[r]=0,n.internalFields.childrenKeys.length&&e._markChildren(n.internalFields.childrenKeys)})},_removeNode:function(t){var e=this.getNodeByKey(t);this._dataStructure[this.getIndexByKey(t)]=0,this._markChildren(e.internalFields.childrenKeys);var i=this,a=0,r=(0,C.l)([],this._dataStructure);(0,y.S6)(r,function(n,s){s||(i._dataStructure.splice(n-a,1),a++)})},_addNode:function(t){var e=this.options.dataConverter,i=e._convertItemToNode(t,this.options.dataAccessors.getters.parentKey(t));this._dataStructure=this._dataStructure.concat(i),this._initialDataStructure=this._initialDataStructure.concat(i),e._dataStructure=e._dataStructure.concat(i)},_updateFields:function(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys:function(){return this._selectedNodesKeys},getExpandedNodesKeys:function(){return this._expandedNodesKeys},getData:function(){return this._dataStructure},getFullData:function(){return this._initialDataStructure},getNodeByItem:function(t){var e=null;return(0,y.S6)(this._dataStructure,function(i,a){if(a.internalFields.item===t)return e=a,!1}),e},getNodesByItems:function(t){var e=this,i=[];return(0,y.S6)(t,function(a,r){var n=e.getNodeByItem(r);n&&i.push(n)}),i},getNodeByKey:function(t,e){return this._getByKey(e||this._getDataBySelectionMode(),t)},getTreeNodes:function(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount:function(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount:function(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:function(t){return t.internalFields.publicNode},getRootNodes:function(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes:function(t){return(0,He.Z)(this._dataStructure,{langParams:this.options.langParams}).filter(["internalFields.parentKey",t]).toArray()},getIndexByKey:function(t){return this.options.dataConverter.getIndexByKey(t)},addItem:function(t){this._addNode(t),this._updateFields()},removeItem:function(t){this._removeNode(t),this._updateFields()},toggleSelection:function(t,e,i){var a=this._isSingleModeUnselect(e),r=this._getByKey(i||a?this._initialDataStructure:this._dataStructure,t);this._setFieldState(r,si,e),this.options.recursiveSelection&&!i&&(e?this._setChildrenSelection():this._toggleChildrenSelection(r,e),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(si)},_isSingleModeUnselect:function(t){return!this.options.multipleSelection&&!t},toggleNodeDisabledState:function(t,e){var i=this.getNodeByKey(t);this._setFieldState(i,"disabled",e)},toggleSelectAll:function(t){if((0,v.$K)(t)){var e=this,i=e._selectedNodesKeys[e._selectedNodesKeys.length-1],a=e._isSingleModeUnselect(t)?this._initialDataStructure:this._dataStructure;(0,y.S6)(a,function(r,n){e._isNodeVisible(n)&&e._setFieldState(n,si,t)}),e._selectedNodesKeys=e._updateNodesKeysArray(si),!t&&e.options.selectionRequired&&e.toggleSelection(i,!0)}},isAllSelected:function(){return!!this.getSelectedNodesKeys().length&&(this.getSelectedNodesKeys().length===this.getVisibleItemsCount()||void 0)},toggleExpansion:function(t,e){var i=this.getNodeByKey(t);this._setFieldState(i,ki,e),e&&this._updateExpansion(t),this._expandedNodesKeys=this._updateNodesKeysArray(ki)},isFiltered:function(t){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[t]).length},_createCriteria:function(t,e,i){var a=[];return Array.isArray(t)?((0,y.S6)(t,function(r,n){a.push([n,i,e],"or")}),a.pop(),a):[t,i,e]},_filterDataStructure:function(t,e){var i=this.options.searchExpr||this.options.dataAccessors.getters.display,a=ni.getOperationBySearchMode(this.options.searchMode),r=this._createCriteria(i,t,a);return(0,He.Z)(e=e||this._initialDataStructure,{langParams:this.options.langParams}).filter(r).toArray()},search:function(t){var e=this,i=this._filterDataStructure(t),a=this.options.dataConverter;return function r(n,s){for(var o=n.length;s<o;){var l=n[s];if(l.internalFields.parentKey!==e.options.rootValue){var d=a.getParentNode(l);d?(d.internalFields.expanded||e._setFieldState(d,ki,!0),n.includes(d)?s++:(n.splice(s,0,d),r(n,s))):(ee.Z.log("W1007",l.internalFields.parentKey,l.internalFields.key),s++)}else s++}}(i,0),this.options.sort&&(i=Mi.Z.queryByOptions((0,He.Z)(i),{sort:this.options.sort,langParams:this.options.langParams}).toArray()),a._indexByKey={},(0,y.S6)(i,function(r,n){n.internalFields.childrenKeys=[],a._indexByKey[n.internalFields.key]=r}),a._dataStructure=i,a.setChildrenKeys(),a._dataStructure}});const mx=fx;var Cx=L(7087),Wu=L(4394),Es=L(9756),Ku=Ce.Z.inherit({ctor:function(t,e,i){this._$element=t,this._options=e,this._rawData=i,(0,Es.nf)(t,this,this._dispose),this._render()},_render:function(){var t=(0,p.Z)("<div>").addClass("dx-item-content-placeholder");this._$element.append(t),this._watchers=[],this._renderWatchers()},_renderWatchers:function(){this._startWatcher("disabled",this._renderDisabled.bind(this)),this._startWatcher("visible",this._renderVisible.bind(this))},_startWatcher:function(t,e){var i=this._rawData,a=this._options.fieldGetter(t),r=function(t,e,i){var r,a=function(n){r!==n&&(i(n,r),r=n)};return{dispose:t(e,a),force:function(){a(e())}}}(this._options.watchMethod(),function(){return a(i)},function(n,s){this._dirty=!0,e(n,s)}.bind(this));this._watchers.push(r)},setDataField:function(){if(this._dirty=!1,(0,y.S6)(this._watchers,function(t,e){e.force()}),this._dirty)return!0},_renderDisabled:function(t,e){this._$element.toggleClass("dx-state-disabled",!!t),this._$element.attr("aria-disabled",!!t),this._updateOwnerFocus(t)},_updateOwnerFocus:function(t){var e=this._options.owner;e&&t&&e._resetItemFocus(this._$element)},_renderVisible:function(t,e){this._$element.toggleClass("dx-state-invisible",void 0!==t&&!t)},_dispose:function(){(0,y.S6)(this._watchers,function(t,e){e.dispose()})}});Ku.getInstance=function(t){return(0,Es.Bt)(t,this)};const Ni=Ku;var Hi=L(7767),yx=L(2412),Gu=L(1767),Uu=Math.abs,Is="dxhold",Ix=yx.Z.inherit({start:function(t){this._startEventData=(0,D.a0)(t),this._startTimer(t)},_startTimer:function(t){var e="timeout"in this?this.timeout:750;this._holdTimer=setTimeout(function(){this._requestAccept(t),this._fireEvent(Is,t,{target:t.target}),this._forgetAccept()}.bind(this),e)},move:function(t){this._touchWasMoved(t)&&this._cancel(t)},_touchWasMoved:function(t){var e=(0,D.hM)(this._startEventData,(0,D.a0)(t));return Uu(e.x)>5||Uu(e.y)>5},end:function(){this._stopTimer()},_stopTimer:function(){clearTimeout(this._holdTimer)},cancel:function(){this._stopTimer()},dispose:function(){this._stopTimer()}});(0,Gu.Z)({emitter:Ix,bubble:!0,events:[Is]});const zt_name=Is;var Ts="dxContexMenu",Tx=(0,D.V4)("contextmenu",Ts),Ax=(0,D.V4)(zt_name,Ts),As="dxcontextmenu",Dx=Ce.Z.inherit({setup:function(t){var e=(0,p.Z)(t);S.Z.on(e,Tx,this._contextMenuHandler.bind(this)),(Ue.touch||K.Z.isSimulator())&&S.Z.on(e,Ax,this._holdHandler.bind(this))},_holdHandler:function(t){(0,D.N5)(t)&&!K.Z.isSimulator()||this._fireContextMenu(t)},_contextMenuHandler:function(t){this._fireContextMenu(t)},_fireContextMenu:function(t){return(0,D.BX)({type:As,originalEvent:t})},teardown:function(t){S.Z.off(t,"."+Ts)}});(0,md.Z)(As,new Dx);var ju=As,Ox=L(1130);class oi extends Ox.S{constructor(e,i,a,r){super(),this._render=e,this._fields=i,this._fieldsMap=r||{},this._watchMethod=a}_renderCore(e){var i=(0,p.Z)(e.container),a=function(t,e,i,a,r){var n,o,s=(o=t,e(()=>o,function(o){var l,d,u,h,c,_,g,f;n&&n(),(0,v.pt)(o)?r(o):(l=o,d=e,h=a,c=r,_={},g=(u=i).slice(),f=u.map(function(m){var x=h[m];return d(x?()=>x(l):()=>l[m],function(w){if(_[m]=w,g.length){var T=g.indexOf(m);T>=0&&g.splice(T,1)}g.length||c(_)})}),n=function(){f.forEach(m=>m())})}));return function(){n&&n(),s&&s()}}(e.model,this._watchMethod,this._fields,this._fieldsMap,r=>{i.empty(),this._render(i,r,e.model)});return S.Z.on(i,dr.x,a),i.contents()}}var Er="dx-item",qu="-content",Xu="dx-item-content-placeholder",Ju="dx-template-wrapper",Hx=/^([^.]+\[\d+\]\.)+([\w.]+)$/,Os="down",ah=Me.default.inherit({_activeStateUnit:"."+Er,_supportedKeys:function(){var t=function(e,i){(0,D.j1)(i)||(i.preventDefault(),i.stopPropagation(),this._moveFocus(e,i))};return(0,C.l)(this.callBase(),{space:function(e){e.preventDefault(),this._enterKeyHandler(e)},enter:this._enterKeyHandler,leftArrow:t.bind(this,"left"),rightArrow:t.bind(this,"right"),upArrow:t.bind(this,"up"),downArrow:t.bind(this,Os),pageUp:t.bind(this,"up"),pageDown:t.bind(this,Os),home:t.bind(this,"first"),end:t.bind(this,"last")})},_enterKeyHandler:function(t){var e=(0,p.Z)(this.option("focusedElement"));if(e.length){var i=this._getItemData(e);null!=i&&i.onClick&&this._itemEventHandlerByHandler(e,i.onClick,{event:t}),this._itemClickHandler((0,C.l)({},t,{target:e.get(0),currentTarget:e.get(0)}))}},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{selectOnFocus:!1,loopItemFocus:!0,items:[],itemTemplate:"item",onItemRendered:null,onItemClick:null,onItemHold:null,itemHoldTimeout:750,onItemContextMenu:null,onFocusedItemChanged:null,noDataText:A.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,dataSource:null,_dataController:null,_itemAttributes:{},itemTemplateProperty:"template",focusOnSelectedItem:!0,focusedElement:null,displayExpr:void 0,disabledExpr:function(t){return t?t.disabled:void 0},visibleExpr:function(t){return t?t.visible:void 0}})},_init:function(){this._compileDisplayGetter(),this._initDataController(),this.callBase(),this._cleanRenderedItems(),this._refreshDataSource()},_compileDisplayGetter:function(){var t=this.option("displayExpr");this._displayGetter=t?(0,Q.vb)(this.option("displayExpr")):void 0},_initTemplates:function(){this._initItemsFromMarkup(),this._initDefaultItemTemplate(),this.callBase()},_getAnonymousTemplateName:function(){return"item"},_initDefaultItemTemplate:function(){var t=this._getFieldsMap();this._templateManager.addDefaultTemplates({item:new oi(function(e,i){(0,v.PO)(i)?this._prepareDefaultItemTemplate(i,e):(t&&(0,v.mf)(t.text)&&(i=t.text(i)),e.text(String((0,E.IS)(i,""))))}.bind(this),this._getBindableFields(),this.option("integrationOptions.watchMethod"),t)})},_getBindableFields:function(){return["text","html"]},_getFieldsMap:function(){if(this._displayGetter)return{text:this._displayGetter}},_prepareDefaultItemTemplate:function(t,e){(0,v.$K)(t.text)&&e.text(t.text),(0,v.$K)(t.html)&&e.html(t.html)},_initItemsFromMarkup:function(){var t=(0,Cx.hK)(this.$element(),"dxItem");if(t.length&&!this.option("items").length){var e=t.map(i=>{var{element:a,options:r}=i;return/\S/.test(a.innerHTML)&&!r.template?r.template=this._prepareItemTemplate(a):(0,p.Z)(a).remove(),r});this.option("items",e)}},_prepareItemTemplate:function(t){var e="tmpl-"+new Ee.Z,i=(0,p.Z)(t).detach().clone().removeAttr("data-options").addClass(Ju);return this._saveTemplate(e,i),e},_dataSourceOptions:function(){return{paginate:!1}},_cleanRenderedItems:function(){this._renderedItemsCount=0},_focusTarget:function(){return this.$element()},_focusInHandler:function(t){if(this.callBase.apply(this,arguments),this._isFocusTarget(t.target)){var e=(0,p.Z)(this.option("focusedElement"));if(e.length)this._setFocusedItem(e);else{var i=this._getActiveItem();i.length&&this.option("focusedElement",(0,W.u)(i))}}},_focusOutHandler:function(){this.callBase.apply(this,arguments);var t=(0,p.Z)(this.option("focusedElement"));this._updateFocusedItemState(t,!1)},_findActiveTarget(t){return t.find(this._activeStateUnit)},_getActiveItem:function(t){var e=(0,p.Z)(this.option("focusedElement"));if(e.length)return e;var i=this.option("focusOnSelectedItem")?this.option("selectedIndex"):0,a=this._getActiveElement();return i<0&&(i=t?a.length-1:0),a.eq(i)},_moveFocus:function(t){var i,e=this._getAvailableItems();switch(t){case"pageup":case"up":i=this._prevItem(e);break;case"pagedown":case Os:i=this._nextItem(e);break;case"right":i=this.option("rtlEnabled")?this._prevItem(e):this._nextItem(e);break;case"left":i=this.option("rtlEnabled")?this._nextItem(e):this._prevItem(e);break;case"first":i=e.first();break;case"last":i=e.last();break;default:return!1}0!==i.length&&this.option("focusedElement",(0,W.u)(i))},_getVisibleItems:function(t){return(t=t||this._itemElements()).filter(":visible")},_getAvailableItems:function(t){return this._getVisibleItems(t)},_prevItem:function(t){var e=this._getActiveItem(),i=t.index(e),a=t.last(),r=(0,p.Z)(t[i-1]),n=this.option("loopItemFocus");return 0===r.length&&n&&(r=a),r},_nextItem:function(t){var e=this._getActiveItem(!0),i=t.index(e),a=t.first(),r=(0,p.Z)(t[i+1]),n=this.option("loopItemFocus");return 0===r.length&&n&&(r=a),r},_selectFocusedItem:function(t){this.selectItem(t)},_updateFocusedItemState:function(t,e,i){var a=(0,p.Z)(t);a.length&&(this._refreshActiveDescendant(),this._refreshItemId(a,i),this._toggleFocusClass(e,a)),this._updateParentActiveDescendant()},_refreshActiveDescendant:function(t){this.setAria("activedescendant",(0,v.$K)(this.option("focusedElement"))?this.getFocusedItemId():null,t)},_refreshItemId:function(t,e){!e&&this.option("focusedElement")?this.setAria("id",this.getFocusedItemId(),t):this.setAria("id",null,t)},_isDisabled:t=>t&&"true"===(0,p.Z)(t).attr("aria-disabled"),_setFocusedItem:function(t){if(t&&t.length){this._updateFocusedItemState(t,!0),this.onFocusedItemChanged(this.getFocusedItemId());var{selectOnFocus:e}=this.option(),i=this._isDisabled(t);e&&!i&&this._selectFocusedItem(t)}},_findItemElementByItem:function(t){var e=(0,p.Z)(),i=this;return this.itemElements().each(function(){var a=(0,p.Z)(this);if(a.data(i._itemDataKey())===t)return e=a,!1}),e},_getIndexByItem:function(t){return this.option("items").indexOf(t)},_itemOptionChanged:function(t,e,i,a){var r=this._findItemElementByItem(t);r.length&&(this.constructor.ItemClass.getInstance(r).setDataField(e,i)||this._refreshItem(r,t),"disabled"===e&&i&&this._resetItemFocus(r))},_resetItemFocus(t){t.is(this.option("focusedElement"))&&this.option("focusedElement",null)},_refreshItem:function(t){var e=this._getItemData(t),i=t.data(this._itemIndexKey());this._renderItem(this._renderedItemsCount+i,e,null,t)},_updateParentActiveDescendant:E.ZT,_optionChanged:function(t){if("items"===t.name){var e=t.fullName.match(Hx);if(e&&e.length){var i=e[e.length-1],a=t.fullName.replace("."+i,""),r=this.option(a);return void this._itemOptionChanged(r,i,t.value,t.previousValue)}}switch(t.name){case"items":case"_itemAttributes":case"itemTemplateProperty":case"useItemTextAsTitle":this._cleanRenderedItems(),this._invalidate();break;case"dataSource":this._refreshDataSource(),this._renderEmptyMessage();break;case"noDataText":case"encodeNoDataText":this._renderEmptyMessage();break;case"itemTemplate":case"visibleExpr":case"disabledExpr":this._invalidate();break;case"onItemRendered":this._createItemRenderAction();break;case"onItemClick":case"selectOnFocus":case"loopItemFocus":case"focusOnSelectedItem":break;case"onItemHold":case"itemHoldTimeout":this._attachHoldEvent();break;case"onItemContextMenu":this._attachContextMenuEvent();break;case"onFocusedItemChanged":this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged");break;case"focusedElement":this._updateFocusedItemState(t.previousValue,!1,!0),this._setFocusedItem((0,p.Z)(t.value));break;case"displayExpr":this._compileDisplayGetter(),this._initDefaultItemTemplate(),this._invalidate();break;default:this.callBase(t)}},_invalidate:function(){return this.option("focusedElement",null),this.callBase.apply(this,arguments)},_loadNextPage:function(){return this._expectNextPageLoading(),this._dataController.loadNextPage()},_expectNextPageLoading:function(){this._startIndexForAppendedItems=0},_expectLastItemLoading:function(){this._startIndexForAppendedItems=-1},_forgetNextPageLoading:function(){this._startIndexForAppendedItems=null},_dataSourceChangedHandler:function(t){var e=this.option("items");this._initialized&&e&&this._shouldAppendItems()?(this._renderedItemsCount=e.length,(!this._isLastPage()||-1!==this._startIndexForAppendedItems)&&(this.option().items=e.concat(t.slice(this._startIndexForAppendedItems))),this._forgetNextPageLoading(),this._refreshContent()):this.option("items",t.slice())},_refreshContent:function(){this._prepareContent(),this._renderContent()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this.option("items",this.option("items"))},_shouldAppendItems:function(){return null!=this._startIndexForAppendedItems&&this._allowDynamicItemsAppend()},_allowDynamicItemsAppend:function(){return!1},_clean:function(){this._cleanFocusState(),this._cleanItemContainer(),this._inkRipple&&delete this._inkRipple,this._resetActiveState()},_cleanItemContainer:function(){(0,p.Z)(this._itemContainer()).empty()},_dispose:function(){this.callBase(),clearTimeout(this._itemFocusTimeout)},_refresh:function(){this._cleanRenderedItems(),this.callBase.apply(this,arguments)},_itemContainer:function(){return this.$element()},_itemClass:function(){return Er},_itemContentClass:function(){return this._itemClass()+qu},_selectedItemClass:function(){return"dx-item-selected"},_itemResponseWaitClass:function(){return"dx-item-response-wait"},_itemSelector:function(){return"."+this._itemClass()},_itemDataKey:function(){return"dxItemData"},_itemIndexKey:function(){return"dxItemIndex"},_itemElements:function(){return this._itemContainer().find(this._itemSelector())},_initMarkup:function(){this.callBase(),this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged"),this.$element().addClass("dx-collection"),this._prepareContent()},_prepareContent:(0,E.Rg)(function(){this._renderContentImpl()}),_renderContent:function(){this._fireContentReadyAction()},_render:function(){this.callBase(),this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent()},_getPointerEvent:()=>re.Z.down,_attachClickEvent(){var t=this._itemSelector(),e=this._getPointerEvent(),i=(0,D.V4)(ie.u,this.NAME),a=(0,D.V4)(e,this.NAME),r=new Wu.Z(n=>{var{event:s}=n;this._itemPointerDownHandler(s)});S.Z.off(this._itemContainer(),i,t),S.Z.off(this._itemContainer(),a,t),S.Z.on(this._itemContainer(),i,t,n=>this._itemClickHandler(n)),S.Z.on(this._itemContainer(),a,t,n=>{r.execute({element:(0,p.Z)(n.target),event:n})})},_itemClickHandler:function(t,e,i){this._itemDXEventHandler(t,"onItemClick",e,i)},_itemPointerDownHandler:function(t){this.option("focusStateEnabled")&&(this._itemFocusHandler=function(){if(clearTimeout(this._itemFocusTimeout),this._itemFocusHandler=null,!t.isDefaultPrevented()){var e=(0,p.Z)(t.target),i=e.closest(this._itemElements()),a=this._closestFocusable(e);i.length&&this._isFocusTarget(a?.get(0))&&this.option("focusedElement",(0,W.u)(i))}}.bind(this),this._itemFocusTimeout=setTimeout(this._forcePointerDownFocus.bind(this)))},_closestFocusable:function(t){if(t.is(Hi.KW))return t;for(t=t.parent();t.length&&!Y.Z.isDocument(t.get(0))&&!Y.Z.isDocumentFragment(t.get(0));){if(t.is(Hi.KW))return t;t=t.parent()}},_forcePointerDownFocus:function(){this._itemFocusHandler&&this._itemFocusHandler()},_updateFocusState:function(){this.callBase.apply(this,arguments),this._forcePointerDownFocus()},_attachHoldEvent:function(){var t=this._itemContainer(),e=this._itemSelector(),i=(0,D.V4)(zt_name,this.NAME);S.Z.off(t,i,e),S.Z.on(t,i,e,{timeout:this._getHoldTimeout()},this._itemHoldHandler.bind(this))},_getHoldTimeout:function(){return this.option("itemHoldTimeout")},_shouldFireHoldEvent:function(){return this.hasActionSubscription("onItemHold")},_itemHoldHandler:function(t){this._shouldFireHoldEvent()?this._itemDXEventHandler(t,"onItemHold"):t.cancel=!0},_attachContextMenuEvent:function(){var t=this._itemContainer(),e=this._itemSelector(),i=(0,D.V4)(ju,this.NAME);S.Z.off(t,i,e),S.Z.on(t,i,e,this._itemContextMenuHandler.bind(this))},_shouldFireContextMenuEvent:function(){return this.hasActionSubscription("onItemContextMenu")},_itemContextMenuHandler:function(t){this._shouldFireContextMenuEvent()?this._itemDXEventHandler(t,"onItemContextMenu"):t.cancel=!0},_renderContentImpl:function(){var t=this.option("items")||[];this._renderItems(this._renderedItemsCount?t.slice(this._renderedItemsCount):t)},_renderItems:function(t){t.length&&(0,y.S6)(t,function(e,i){this._renderItem(this._renderedItemsCount+e,i)}.bind(this)),this._renderEmptyMessage()},_renderItem:function(t,e,i,a){var r,n=null!==(r=t?.item)&&void 0!==r?r:t;i=i||this._itemContainer();var s=this._renderItemFrame(n,e,i,a);this._setElementData(s,e,n),s.attr(this.option("_itemAttributes")),this._attachItemClickEvent(e,s);var o=this._getItemContent(s),l=this._renderItemContent({index:n,itemData:e,container:(0,W.u)(o),contentClass:this._itemContentClass(),defaultTemplateName:this.option("itemTemplate")}),d=this;return(0,b.gx)(l).done(function(u){d._postprocessRenderItem({itemElement:s,itemContent:u,itemData:e,itemIndex:n}),d._executeItemRenderAction(t,e,(0,W.u)(s))}),s},_getItemContent:function(t){var e=t.find("."+Xu);return e.removeClass(Xu),e},_attachItemClickEvent:function(t,e){!t||!t.onClick||S.Z.on(e,ie.u,function(i){this._itemEventHandlerByHandler(e,t.onClick,{event:i})}.bind(this))},_renderItemContent:function(t){var e=this._getItemTemplateName(t),i=this._getTemplate(e);this._addItemContentClasses(t);var a=(0,p.Z)(this._createItemByTemplate(i,t));return a.hasClass(Ju)?this._renderItemContentByNode(t,a):t.container},_renderItemContentByNode:function(t,e){return(0,p.Z)(t.container).replaceWith(e),t.container=(0,W.u)(e),this._addItemContentClasses(t),e},_addItemContentClasses:function(t){var e=[Er+qu,t.contentClass];(0,p.Z)(t.container).addClass(e.join(" "))},_appendItemToContainer:function(t,e,i){e.appendTo(t)},_renderItemFrame:function(t,e,i,a){var r=(0,p.Z)("<div>");if(new this.constructor.ItemClass(r,this._itemOptions(),e||{}),a&&a.length?a.replaceWith(r):this._appendItemToContainer.call(this,i,r,t),this.option("useItemTextAsTitle")){var n=this._displayGetter?this._displayGetter(e):e;r.attr("title",n)}return r},_itemOptions:function(){var t=this;return{watchMethod:function(){return t.option("integrationOptions.watchMethod")},owner:t,fieldGetter:function(e){var i=t.option(e+"Expr");return(0,Q.vb)(i)}}},_postprocessRenderItem:E.ZT,_executeItemRenderAction:function(t,e,i){this._getItemRenderAction()({itemElement:i,itemIndex:t,itemData:e})},_setElementData:function(t,e,i){t.addClass([Er,this._itemClass()].join(" ")).data(this._itemDataKey(),e).data(this._itemIndexKey(),i)},_createItemRenderAction:function(){return this._itemRenderAction=this._createActionByOption("onItemRendered",{element:this.element(),excludeValidators:["disabled","readOnly"],category:"rendering"})},_getItemRenderAction:function(){return this._itemRenderAction||this._createItemRenderAction()},_getItemTemplateName:function(t){var e=t.itemData,i=t.templateProperty||this.option("itemTemplateProperty");return e&&e[i]||t.defaultTemplateName},_createItemByTemplate:function(t,e){return t.render({model:e.itemData,container:e.container,index:e.index,onRendered:this._onItemTemplateRendered(t,e)})},_onItemTemplateRendered:function(){return E.ZT},_emptyMessageContainer:function(){return this._itemContainer()},_renderEmptyMessage:function(t){t=t||this.option("items");var e=this.option("noDataText"),i=!e||t&&t.length||this._dataController.isLoading();i&&this._$noData&&(this._$noData.remove(),this._$noData=null,this.setAria("label",void 0)),i||(this._$noData=this._$noData||(0,p.Z)("<div>").addClass("dx-empty-message"),this._$noData.appendTo(this._emptyMessageContainer()),this.option("encodeNoDataText")?this._$noData.text(e):this._$noData.html(e)),this.$element().toggleClass("dx-empty-collection",!i)},_itemDXEventHandler:function(t,e,i,a){this._itemEventHandler(t.target,e,(0,C.l)(i,{event:t}),a)},_itemEventHandler:function(t,e,i,a){var r=this._createActionByOption(e,(0,C.l)({validatingTargetName:"itemElement"},a));return this._itemEventHandlerImpl(t,r,i)},_itemEventHandlerByHandler:function(t,e,i,a){var r=this._createAction(e,(0,C.l)({validatingTargetName:"itemElement"},a));return this._itemEventHandlerImpl(t,r,i)},_itemEventHandlerImpl:function(t,e,i){var a=this._closestItemElement((0,p.Z)(t)),r=(0,C.l)({},i);return e((0,C.l)(i,this._extendActionArgs(a),r))},_extendActionArgs:function(t){return{itemElement:(0,W.u)(t),itemIndex:this._itemElements().index(t),itemData:this._getItemData(t)}},_closestItemElement:function(t){return(0,p.Z)(t).closest(this._itemSelector())},_getItemData:function(t){return(0,p.Z)(t).data(this._itemDataKey())},_getSummaryItemsWidth:function(t,e){var i=0;return t&&(0,y.S6)(t,function(a,r){i+=(0,I.Y_)(r,e||!1)}),i},getFocusedItemId:function(){return this._focusedItemId||(this._focusedItemId="dx-"+new Ee.Z),this._focusedItemId},itemElements:function(){return this._itemElements()},itemsContainer:function(){return this._itemContainer()}}).include(mr.Z);ah.ItemClass=Ni;const Wx=ah;var Ze=Ce.Z.abstract,Kx=Ce.Z.inherit({ctor:function(t){this._collectionWidget=t},getIndexByItemData:Ze,getItemDataByIndex:Ze,getKeysByItems:Ze,getItemsByKeys:Ze,itemsGetter:Ze,getKeyByIndex:function(t){var e=this._denormalizeItemIndex(t);return this.getKeysByItems([this.getItemDataByIndex(e)])[0]},_equalKeys:function(t,e){return this._collectionWidget._isKeySpecified()?(0,E.bY)(t,e):t===e},beginCache:function(){this._cache={}},endCache:function(){this._cache=null},getIndexByKey:Ze,getNormalizedIndex:function(t){return this._isNormalizedItemIndex(t)?t:this._isItemIndex(t)?this._normalizeItemIndex(t):this._isNode(t)?this._getNormalizedItemIndex(t):this._normalizeItemIndex(this.getIndexByItemData(t))},getIndex:function(t){return this._isNormalizedItemIndex(t)?this._denormalizeItemIndex(t):this._isItemIndex(t)?t:this._isNode(t)?this._denormalizeItemIndex(this._getNormalizedItemIndex(t)):this.getIndexByItemData(t)},getItemElement:function(t){if(this._isNormalizedItemIndex(t))return this._getItemByNormalizedIndex(t);if(this._isItemIndex(t))return this._getItemByNormalizedIndex(this._normalizeItemIndex(t));if(this._isNode(t))return(0,p.Z)(t);var e=this._normalizeItemIndex(this.getIndexByItemData(t));return this._getItemByNormalizedIndex(e)},_isNode:t=>Y.Z.isNode(t&&(0,v.ZU)(t)?t.get(0):t),deleteItemAtIndex:Ze,itemPlacementFunc:function(t,e){return this._itemsFromSameParent(t,e)&&t<e?"after":"before"},moveItemAtIndexToIndex:Ze,_isNormalizedItemIndex:function(t){return"number"==typeof t&&Math.round(t)===t},_isItemIndex:Ze,_getNormalizedItemIndex:Ze,_normalizeItemIndex:Ze,_denormalizeItemIndex:Ze,_getItemByNormalizedIndex:Ze,_itemsFromSameParent:Ze}),Gx=Kx.inherit({_getPlainItems:function(){return this._collectionWidget.option("items")||[]},getIndexByItemData:function(t){var e=this._collectionWidget.keyOf.bind(this._collectionWidget);return e?this.getIndexByKey(e(t)):this._getPlainItems().indexOf(t)},getItemDataByIndex:function(t){return this._getPlainItems()[t]},deleteItemAtIndex:function(t){this._getPlainItems().splice(t,1)},itemsGetter:function(){return this._getPlainItems()},getKeysByItems:function(t){var e=this._collectionWidget.keyOf.bind(this._collectionWidget),i=t;if(e){i=[];for(var a=0;a<t.length;a++)i.push(e(t[a]))}return i},getIndexByKey:function(t){var e=this._cache,i=e&&e.keys||this.getKeysByItems(this._getPlainItems());if(e&&!e.keys&&(e.keys=i),"object"!=typeof t)return i.indexOf(t);for(var a=0,r=i.length;a<r;a++)if(this._equalKeys(t,i[a]))return a;return-1},getItemsByKeys:function(t,e){return(e||t).slice()},moveItemAtIndexToIndex:function(t,e){var i=this._getPlainItems(),a=i[t];i.splice(t,1),i.splice(e,0,a)},_isItemIndex:function(t){return"number"==typeof t&&Math.round(t)===t},_getNormalizedItemIndex:function(t){return this._collectionWidget._itemElements().index(t)},_normalizeItemIndex:function(t){return t},_denormalizeItemIndex:function(t){return t},_getItemByNormalizedIndex:function(t){return t>-1?this._collectionWidget._itemElements().eq(t):null},_itemsFromSameParent:function(){return!0}});const Rs=Gx;class rh{constructor(e){this.options=e,this._setOption("disabledItemKeys",[]),this._clearItemKeys()}_clearItemKeys(){this._setOption("addedItemKeys",[]),this._setOption("removedItemKeys",[]),this._setOption("removedItems",[]),this._setOption("addedItems",[])}validate(){}_setOption(e,i){this.options[e]=i}onSelectionChanged(){var e=this.options.addedItemKeys,i=this.options.removedItemKeys,a=this.options.addedItems,r=this.options.removedItems,n=this.options.selectedItems,s=this.options.selectedItemKeys,o=this.options.onSelectionChanged||E.ZT;this._clearItemKeys(),o({selectedItems:n,selectedItemKeys:s,addedItemKeys:e,removedItemKeys:i,addedItems:a,removedItems:r})}equalKeys(e,i){return this.options.equalByReference&&(0,v.Kn)(e)&&(0,v.Kn)(i)?e===i:(0,E.bY)(e,i)}getSelectableItems(e){return e.filter(function(i){return!(null!=i&&i.disabled)})}_clearSelection(e,i,a,r){return e=e||[],e=Array.isArray(e)?e:[e],this.validate(),this.selectedItemKeys(e,i,a,r)}_removeTemplateProperty(e){return Array.isArray(e)?e.map(i=>this._removeTemplateProperty(i)):((0,v.Kn)(e)&&delete e.template,e)}_loadFilteredData(e,i,a,r){var n=encodeURI(JSON.stringify(this._removeTemplateProperty(e))).length,s=this.options.maxFilterLengthInRequest&&n>this.options.maxFilterLengthInRequest,o=new b.BH,l={filter:s?void 0:e,select:s?this.options.dataFields():a||this.options.dataFields()};return e&&0===e.length?o.resolve([]):this.options.load(l).done(function(d){var u=(0,v.PO)(d)?d.data:d;i&&!r?u=u.filter(i):s&&(u=(0,He.Z)(u).filter(e).toArray()),o.resolve(u)}).fail(o.reject.bind(o)),o}updateSelectedItemKeyHash(e){for(var i=0;i<e.length;i++){var a=(0,E.k3)(e[i]);(0,v.Kn)(a)||(this.options.keyHashIndices[a]=this.options.keyHashIndices[a]||[],this.options.keyHashIndices[a].push(i))}}_isAnyItemSelected(e){for(var i=0;i<e.length;i++)if(this.options.isItemSelected(e[i]))return;return!1}_getFullSelectAllState(){var e=this.options.plainItems(),i=this.options.filter(),a=this.options.ignoreDisabledItems?this.options.selectedItems:this.options.selectedItems.filter(s=>!(null!=s&&s.disabled));i&&(a=(0,He.Z)(a).filter(i).toArray());var r=a.length,n=e.length-this.getSelectableItems(e).length;return r?r>=this.options.totalCount()-n||void 0:this._isAnyItemSelected(e)}_getVisibleSelectAllState(){for(var e=this.getSelectableItems(this.options.plainItems()),i=!1,a=!1,r=0;r<e.length;r++){var n=e[r],s=this.options.getItemData(n),o=this.options.keyOf(s);this.options.isSelectableItem(n)&&(this.isItemKeySelected(o)?i=!0:a=!0)}return!!i&&(!a||void 0)}}class Ux extends rh{getSelectedItems(){return this._loadFilteredData(this.options.selectionFilter)}getSelectedItemKeys(){var e=new b.BH,i=this,a=this.options.key(),r=(0,v.HD)(a)?[a]:a;return this._loadFilteredData(this.options.selectionFilter,null,r).done(function(n){var s=n.map(function(o){return i.options.keyOf(o)});e.resolve(s)}).fail(e.reject),e.promise()}selectedItemKeys(e,i,a,r){if(r){var n=this.options.filter();!n||JSON.stringify(n)===JSON.stringify(this.options.selectionFilter)&&a?this._setOption("selectionFilter",a?[]:null):this._addSelectionFilter(a,n,r)}else{i||this._setOption("selectionFilter",[]);for(var o=0;o<e.length;o++)a?this.removeSelectedItem(e[o]):this.addSelectedItem(e[o],r,!i)}return this.onSelectionChanged(),(new b.BH).resolve()}setSelectedItems(e){this._setOption("selectionFilter",null);for(var i=0;i<e.length;i++)this.addSelectedItem(e[i])}isItemDataSelected(e){return this.isItemKeySelected(e)}isItemKeySelected(e){var i=this.options.selectionFilter;return!i||!!(0,He.Z)([e]).filter(i).toArray().length}_getKeyExpr(){var e=this.options.key();return Array.isArray(e)&&1===e.length?e[0]:e}_normalizeKey(e){var i=this.options.key();return Array.isArray(i)&&1===i.length?e[i[0]]:e}_getFilterByKey(e){var i=this._getKeyExpr(),a=[i,"=",this._normalizeKey(e)];if(Array.isArray(i)){a=[];for(var r=0;r<i.length;r++)a.push([i[r],"=",e[i[r]]]),r!==i.length-1&&a.push("and")}return a}addSelectedItem(e,i,a){var r=this._getFilterByKey(e);this._addSelectionFilter(!1,r,i,a)}removeSelectedItem(e){var i=this._getFilterByKey(e);this._addSelectionFilter(!0,i)}validate(){var e=this.options.key;if(e&&void 0===e())throw ee.Z.Error("E1042","Deferred selection")}_findSubFilter(e,i){if(!e)return-1;for(var a=JSON.stringify(i),r=0;r<e.length;r++){var n=e[r];if(n&&JSON.stringify(n)===a)return r}return-1}_isLastSubFilter(e,i){return!(!e||!i||this._findSubFilter(e,i)!==e.length-1&&0!==this._findSubFilter([e],i))}_addFilterOperator(e,i){return e.length>1&&(0,v.HD)(e[1])&&e[1]!==i&&(e=[e]),e.length&&e.push(i),e}_denormalizeFilter(e){return e&&(0,v.HD)(e[0])&&(e=[e]),e}_isOnlyNegativeFiltersLeft(e){return e.every((i,a)=>a%2==0?Array.isArray(i)&&"!"===i[0]:"and"===i)}_addSelectionFilter(e,i,a,r){var n,s=e?["!",i]:i,o=e?"and":"or",l=!0,d=this.options.selectionFilter||[];if(null!==(n=d=this._denormalizeFilter(d))&&void 0!==n&&n.length&&!r){var u=this._removeSameFilter(d,i,e,a),h=this._removeSameFilter(d,i,!e);e&&(-1!==u||-1!==h)&&this._isOnlyNegativeFiltersLeft(d)&&(d=[]);var _=this._isKeyFilter(i)&&this._hasKeyFiltersOnlyStartingFromIndex(d,h);l=i.length&&!_}l&&(d=this._addFilterOperator(d,o)).push(s),d=this._normalizeFilter(d),this._setOption("selectionFilter",e||d.length?d:null)}_normalizeFilter(e){return e&&1===e.length&&(e=e[0]),e}_removeFilterByIndex(e,i,a){var r=e[1];e.splice(i>0?i-1:i,2),a&&"and"===r&&e.splice(0,e.length)}_isSimpleKeyFilter(e,i){return 3===e.length&&e[0]===i&&"="===e[1]}_isKeyFilter(e){if(2===e.length&&"!"===e[0])return this._isKeyFilter(e[1]);var i=this._getKeyExpr();if(Array.isArray(i)){if(e.length!==2*i.length-1)return!1;for(var a=0;a<i.length;a++)if(a>0&&"and"!==e[2*a-1]||!this._isSimpleKeyFilter(e[2*a],i[a]))return!1;return!0}return this._isSimpleKeyFilter(e,i)}_hasKeyFiltersOnlyStartingFromIndex(e,i){if(i>=0){for(var a=i;a<e.length;a++)if("string"!=typeof e[a]&&!this._isKeyFilter(e[a]))return!1;return!0}return!1}_removeSameFilter(e,i,a,r){if(i=a?["!",i]:i,JSON.stringify(i)===JSON.stringify(e))return e.splice(0,e.length),0;var n=this._findSubFilter(e,i);if(n>=0)return this._removeFilterByIndex(e,n,r),n;for(var s=0;s<e.length;s++)if(Array.isArray(e[s])&&e[s].length>2){var o=this._removeSameFilter(e[s],i,!1,r);if(o>=0)return e[s].length?1===e[s].length&&(e[s]=e[s][0]):this._removeFilterByIndex(e,s,r),o}return-1}getSelectAllState(){var e=this.options.filter(),i=this.options.selectionFilter;if(!i)return!0;if(!i.length)return!1;if(e&&e.length){if(i=this._denormalizeFilter(i),this._isLastSubFilter(i,e))return!0;if(this._isLastSubFilter(i,["!",e]))return!1}}loadSelectedItemsWithFilter(){var e=this.options.filter(),i=this.options.selectionFilter;return this._loadFilteredData(e?[e,"and",i]:i)}}var nh=function(t,e){this.getLocalFilter=function(s,o,l,d){return r.bind(this,o=void 0===o?E.bY:o,s,l,d)},this.getExpr=function(s){var o;if(s)return t.forEach(function(l,d){var u;o=o||[],d>0&&o.push(e?"and":"or"),u=(0,v.HD)(s)?n(s,l):function(h,c){for(var _=[],g=0,f=h.length;g<f;g++){var m=h[g],w=n(m,c&&c[m]);if(!w)break;g>0&&_.push(e?"or":"and"),_.push(w)}return _}(s,l),o.push(u)}),o&&1===o.length&&(o=o[0]),o},this.getCombinedFilter=function(s,o){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=this.getExpr(s),u=d;return(l||e)&&o&&(d?((u=[]).push(d),u.push(o)):u=o),u};var i,a=function(s,o,l){return Array.isArray(l)?s.map(d=>o(d)):s};function r(s,o,l,d,u){var c,_,h=o(u);if(!l&&(c=(0,E.k3)(h),!(0,v.Kn)(c)))return function(f,m){if(!i){i={};for(var x=a(t,f,m),w=0;w<x.length;w++)i[(0,E.k3)(x[w])]=!0}return i}(o,d)[c]?!e:!!e;for(_=0;_<t.length;_++)if(s(t[_],h))return!e;return!!e}function n(s,o){if(void 0!==o)return[s,e?"<>":"=",o]}};class Yx extends rh{constructor(e){super(e),this._initSelectedItemKeyHash()}_initSelectedItemKeyHash(){this._setOption("keyHashIndices",this.options.equalByReference?null:{})}getSelectedItemKeys(){return this.options.selectedItemKeys.slice(0)}getSelectedItems(){return this.options.selectedItems.slice(0)}_preserveSelectionUpdate(e,i){var r,n,s,a=this.options.keyOf;if(a){var o=i&&e.length>1&&!this.options.equalByReference;for(o&&(r={}),s=0;s<e.length;s++){var l=e[s],d=a(l);i?(n=this.removeSelectedItem(d,r,l?.disabled),r&&n>=0&&(r[n]=!0)):this.addSelectedItem(d,l)}o&&this._batchRemoveSelectedItems(r)}}_batchRemoveSelectedItems(e){var i=this.options.selectedItemKeys.slice(0),a=this.options.selectedItems.slice(0);this.options.selectedItemKeys.length=0,this.options.selectedItems.length=0;for(var r=0;r<i.length;r++)e[r]||(this.options.selectedItemKeys.push(i[r]),this.options.selectedItems.push(a[r]));this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_loadSelectedItemsCore(e,i,a,r){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=new b.BH,o=this.options.key();if(!e.length&&!a)return s.resolve([]),s;if(a&&i&&!r)return s.resolve(this.getSelectedItems()),s;var l=new nh(e,a),d=l.getCombinedFilter(o,r,n),u=[];if(i){var h=this.options.selectedItems;u=d&&e.length!==h.length?(0,He.Z)(h).filter(d).toArray():h.slice(0)}var c=u.length?u:this.options.plainItems(!0).filter(this.options.isSelectableItem).map(this.options.getItemData),_=l.getLocalFilter(this.options.keyOf,this.equalKeys.bind(this),this.options.equalByReference,o);return c=c.filter(_),u.length||!a&&c.length===e.length?s.resolve(c):s=this._loadFilteredData(d,_,null,a),s}_replaceSelectionUpdate(e){var i=[],a=this.options.keyOf;if(a){for(var r=0;r<e.length;r++){var s=a(e[r]);i.push(s)}this.setSelectedItems(i,e)}}_warnOnIncorrectKeys(e){for(var i=this.options.allowNullValue,a=0;a<e.length;a++){var r=e[a];(!i||null!==r)&&!this.isItemKeySelected(r)&&ee.Z.log("W1002",r)}}_isMultiSelectEnabled(){var e=this.options.mode;return"all"===e||"multiple"===e}_requestInProgress(){var e;return"pending"===(null===(e=this._lastLoadDeferred)||void 0===e?void 0:e.state())}_concatRequestsItems(e,i,a,r){var n,s=i?e:[];return n=r||(0,Zt.R1)(e,this.options.selectedItemKeys),{addedItems:a.added.concat(n),removedItems:a.removed.concat(s),keys:e}}_collectLastRequestData(e,i,a,r){var n=i&&a,s={added:[],removed:[]},o=this._isMultiSelectEnabled(),l=o?this._lastRequestData:{};return o&&(this._shouldMergeWithLastRequest&&(n?(this._lastLoadDeferred.reject(),l={}):function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<e.length;i++)if(t[i]!==e[i])return!1;return!0}(e,this.options.selectedItemKeys)||(s.added=l.addedItems,s.removed=l.removedItems,i||this._lastLoadDeferred.reject())),l=this._concatRequestsItems(e,i,s,this._shouldMergeWithLastRequest?void 0:r)),l}_updateKeysByLastRequestData(e,i,a){var n,s,r=e;return this._isMultiSelectEnabled()&&this._shouldMergeWithLastRequest&&!i&&!a&&(r=(0,Zt.R1)(e.concat(null===(n=this._lastRequestData)||void 0===n?void 0:n.addedItems),null===(s=this._lastRequestData)||void 0===s?void 0:s.removedItems),r=(0,Zt.rZ)(r)),r}_loadSelectedItems(e,i,a,r){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=this,o=new b.BH,l=s.options.filter();return this._shouldMergeWithLastRequest=this._requestInProgress(),this._lastRequestData=this._collectLastRequestData(e,i,a,r),(0,b.gx)(s._lastLoadDeferred).always(function(){var d=s._updateKeysByLastRequestData(e,i,a);s._shouldMergeWithLastRequest=!1,s._loadSelectedItemsCore(d,i,a,l,n).done(o.resolve).fail(o.reject)}),s._lastLoadDeferred=o,o}selectedItemKeys(e,i,a,r,n){var o=this,l=o._loadSelectedItems(e,a,r,n,arguments.length>5&&void 0!==arguments[5]&&arguments[5]);return l.done(function(d){i?o._preserveSelectionUpdate(d,a):o._replaceSelectionUpdate(d),o.onSelectionChanged()}),l}addSelectedItem(e,i){if((0,v.$K)(i)&&!this.options.ignoreDisabledItems&&i.disabled)-1===this.options.disabledItemKeys.indexOf(e)&&this.options.disabledItemKeys.push(e);else{var a=this._getKeyHash(e);-1===this._indexOfSelectedItemKey(a)&&(!(0,v.Kn)(a)&&this.options.keyHashIndices&&(this.options.keyHashIndices[a]=[this.options.selectedItemKeys.length]),this.options.selectedItemKeys.push(e),this.options.addedItemKeys.push(e),this.options.addedItems.push(i),this.options.selectedItems.push(i))}}_getSelectedIndexByKey(e,i){for(var a=this.options.selectedItemKeys,r=0;r<a.length;r++)if((!i||!i[r])&&this.equalKeys(a[r],e))return r;return-1}_getSelectedIndexByHash(e,i){var a=this.options.keyHashIndices[e];return a&&a.length>1&&i&&(a=a.filter(function(r){return!i[r]})),a&&a[0]>=0?a[0]:-1}_indexOfSelectedItemKey(e,i){return this.options.equalByReference?this.options.selectedItemKeys.indexOf(e):(0,v.Kn)(e)?this._getSelectedIndexByKey(e,i):this._getSelectedIndexByHash(e,i)}_shiftSelectedKeyIndices(e){for(var i=e;i<this.options.selectedItemKeys.length;i++){var r=(0,E.k3)(this.options.selectedItemKeys[i]),n=this.options.keyHashIndices[r];if(n)for(var s=0;s<n.length;s++)n[s]>e&&n[s]--}}removeSelectedItem(e,i,a){if(this.options.ignoreDisabledItems||!a){var r=this._getKeyHash(e),n=!!i,s=this._indexOfSelectedItemKey(r,i);if(s<0||(this.options.removedItemKeys.push(e),this.options.removedItems.push(this.options.selectedItems[s]),n)||(this.options.selectedItemKeys.splice(s,1),this.options.selectedItems.splice(s,1),(0,v.Kn)(r)||!this.options.keyHashIndices))return s;var o=this.options.keyHashIndices[r];return o&&(o.shift(),o.length||delete this.options.keyHashIndices[r],this._shiftSelectedKeyIndices(s)),s}}_updateAddedItemKeys(e,i){for(var a=0;a<e.length;a++)this.isItemKeySelected(e[a])||(this.options.addedItemKeys.push(e[a]),this.options.addedItems.push(i[a]))}_updateRemovedItemKeys(e,i,a){for(var r=0;r<i.length;r++)this.isItemKeySelected(i[r])||(this.options.removedItemKeys.push(i[r]),this.options.removedItems.push(a[r]))}_isItemSelectionInProgress(e,i){var r;return!!(i&&this._lastRequestData&&this._requestInProgress())&&(null!==(r=this._lastRequestData.addedItems)&&void 0!==r?r:[]).includes(e)}_getKeyHash(e){return this.options.equalByReference?e:(0,E.k3)(e)}setSelectedItems(e,i){this._updateAddedItemKeys(e,i);var a=this.options.selectedItemKeys,r=this.options.selectedItems;this.options.equalByReference||(this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(e)),this._setOption("selectedItemKeys",e),this._setOption("selectedItems",i),this._updateRemovedItemKeys(e,a,r)}isItemDataSelected(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.options.keyOf(e);return this.isItemKeySelected(a,i)}isItemKeySelected(e){var a=this._isItemSelectionInProgress(e,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).checkPending);if(!a){var r=this._getKeyHash(e);a=-1!==this._indexOfSelectedItemKey(r)}return a}getSelectAllState(e){return e?this._getVisibleSelectAllState():this._getFullSelectAllState()}loadSelectedItemsWithFilter(){var e=this.options.key(),i=this.getSelectedItemKeys(),a=this.options.filter();if(!i.length)return(0,b.BH)().resolve([]);var n=new nh(i).getCombinedFilter(e,a,!0);return this._loadFilteredData(n)}}class sh{constructor(e){this.options=(0,C.l)(this._getDefaultOptions(),e,{selectedItemKeys:e.selectedKeys||[]}),this._selectionStrategy=this.options.deferred?new Ux(this.options):new Yx(this.options),this._focusedItemIndex=-1,this.options.equalByReference||this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_getDefaultOptions(){return{allowNullValue:!1,deferred:!1,equalByReference:!1,mode:"multiple",selectedItems:[],selectionFilter:[],maxFilterLengthInRequest:0,onSelectionChanged:E.ZT,key:E.ZT,keyOf:function(e){return e},load:function(){return(new b.BH).resolve([])},totalCount:function(){return-1},isSelectableItem:function(){return!0},isItemSelected:function(){return!1},getItemData:function(e){return e},dataFields:E.ZT,filter:E.ZT}}validate(){this._selectionStrategy.validate()}getSelectedItemKeys(){return this._selectionStrategy.getSelectedItemKeys()}getSelectedItems(){return this._selectionStrategy.getSelectedItems()}selectionFilter(e){if(void 0===e)return this.options.selectionFilter;var i=this.options.selectionFilter!==e&&JSON.stringify(this.options.selectionFilter)!==JSON.stringify(e);this.options.selectionFilter=e,i&&this.onSelectionChanged()}setSelection(e,i){return this.selectedItemKeys(e,!1,!1,!1,i)}select(e){return this.selectedItemKeys(e,!0)}deselect(e){return this.selectedItemKeys(e,!0,!0)}selectedItemKeys(e,i,a,r,n){var s;return e=null!==(s=e)&&void 0!==s?s:[],e=Array.isArray(e)?e:[e],this.validate(),this._selectionStrategy.selectedItemKeys(e,i,a,r,n)}clearSelection(){return this.selectedItemKeys([])}_addSelectedItem(e,i){this._selectionStrategy.addSelectedItem(i,e)}_removeSelectedItem(e){this._selectionStrategy.removeSelectedItem(e)}_setSelectedItems(e,i){this._selectionStrategy.setSelectedItems(e,i)}onSelectionChanged(){this._selectionStrategy.onSelectionChanged()}changeItemSelection(e,i,a){var r,n,s,d,h,o=this.options.plainItems(),l=o[e],c=!1,_=!1,g=T=>T>=0&&!o.filter(O=>O.loadIndex===T).length;if((null===(r=(n=this.options).allowLoadByRange)||void 0===r?void 0:r.call(n))&&(0,v.$K)(l)&&(h=l.loadIndex-e,e=l.loadIndex,c=g(this._focusedItemIndex),(0,v.$K)(this._shiftFocusedItemIndex)&&(_=g(this._shiftFocusedItemIndex))),!this.isSelectable()||!this.isDataItem(l))return!1;var f=this.options.getItemData(l),m=this.options.keyOf(f);if((i=i||{}).shift&&"multiple"===this.options.mode&&this._focusedItemIndex>=0)c||_?(s=e!==this._shiftFocusedItemIndex||this._focusedItemIndex!==this._shiftFocusedItemIndex)&&(d=this.changeItemSelectionWhenShiftKeyInVirtualPaging(e)):s=this.changeItemSelectionWhenShiftKeyPressed(e,o,h);else if(i.control){if(this._resetItemSelectionWhenShiftKeyPressed(),!a){var x=this._selectionStrategy.isItemDataSelected(f);"single"===this.options.mode&&this.clearSelectedItems(),x?this._removeSelectedItem(m):this._addSelectedItem(f,m)}s=!0}else{this._resetItemSelectionWhenShiftKeyPressed();var w=this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0],m);(1!==this.options.selectedItemKeys.length||!w)&&(this._setSelectedItems([m],[f]),s=!0)}return s?((0,b.gx)(d).done(()=>{this._focusedItemIndex=e,!a&&this.onSelectionChanged()}),!0):void 0}isDataItem(e){return this.options.isSelectableItem(e)}isSelectable(){return"single"===this.options.mode||"multiple"===this.options.mode}isItemDataSelected(e){return this._selectionStrategy.isItemDataSelected(e,{checkPending:!0})}isItemSelected(e,i){return this._selectionStrategy.isItemKeySelected(e,i)}_resetItemSelectionWhenShiftKeyPressed(){delete this._shiftFocusedItemIndex}_resetFocusedItemIndex(){this._focusedItemIndex=-1}changeItemSelectionWhenShiftKeyInVirtualPaging(e){var i=this.options.getLoadOptions(e,this._focusedItemIndex,this._shiftFocusedItemIndex),a=new b.BH,r=i.skip;return this.options.load(i).done(n=>{this.changeItemSelectionWhenShiftKeyPressed(e,n,r),a.resolve()}),a.promise()}changeItemSelectionWhenShiftKeyPressed(e,i,a){var n,_,g,m,r=!1,s=(0,v.$K)(a),o=s?this._focusedItemIndex-a:this._focusedItemIndex,l=this.options.keyOf,d=i[o],u=this.options.getItemData(d),h=l(u),c=d&&this.isItemDataSelected(u);if((0,v.$K)(this._shiftFocusedItemIndex)||(this._shiftFocusedItemIndex=this._focusedItemIndex),this._shiftFocusedItemIndex!==this._focusedItemIndex)for(n=this._focusedItemIndex<this._shiftFocusedItemIndex?1:-1,m=s?this._shiftFocusedItemIndex-a:this._shiftFocusedItemIndex,o=s?this._focusedItemIndex-a:this._focusedItemIndex;o!==m;o+=n)(s||this.isDataItem(i[o]))&&(g=l(this.options.getItemData(i[o])),this._removeSelectedItem(g),r=!0);if(e!==this._shiftFocusedItemIndex)for(n=e<this._shiftFocusedItemIndex?1:-1,m=s?this._shiftFocusedItemIndex-a:this._shiftFocusedItemIndex,o=s?e-a:e;o!==m;o+=n)(s||this.isDataItem(i[o]))&&(g=l(_=this.options.getItemData(i[o])),this._addSelectedItem(_,g),r=!0);return(s||this.isDataItem(d))&&!c&&(this._addSelectedItem(u,h),r=!0),r}clearSelectedItems(){this._setSelectedItems([],[])}selectAll(e){return this._resetFocusedItemIndex(),e?this._onePageSelectAll(!1):this.selectedItemKeys([],!0,!1,!0)}deselectAll(e){return this._resetFocusedItemIndex(),e?this._onePageSelectAll(!0):this.selectedItemKeys([],!0,!0,!0)}_onePageSelectAll(e){for(var i=this._selectionStrategy.getSelectableItems(this.options.plainItems()),a=0;a<i.length;a++){var r=i[a];if(this.isDataItem(r)){var n=this.options.getItemData(r),s=this.options.keyOf(n),o=this.isItemSelected(s);!o&&!e&&this._addSelectedItem(n,s),o&&e&&this._removeSelectedItem(s)}}return this.onSelectionChanged(),(new b.BH).resolve()}getSelectAllState(e){return this._selectionStrategy.getSelectAllState(e)}loadSelectedItemsWithFilter(){return this._selectionStrategy.loadSelectedItemsWithFilter()}}var Bs="dxItemDeleting",rt=function(t){return-1!==t},jx=Wx.inherit({_setOptionsByReference:function(){this.callBase(),(0,C.l)(this._optionsByReference,{selectedItem:!0})},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{selectionMode:"none",selectionRequired:!1,selectByClick:!0,selectedItems:[],selectedItemKeys:[],maxFilterLengthInRequest:1500,keyExpr:null,selectedIndex:-1,selectedItem:null,onSelectionChanged:null,onItemReordered:null,onItemDeleting:null,onItemDeleted:null})},ctor:function(t,e){this._userOptions=e||{},this.callBase(t,e)},_init:function(){this._initEditStrategy(),this.callBase(),this._initKeyGetter(),this._initSelectionModule()},_initKeyGetter:function(){this._keyGetter=(0,Q.vb)(this.option("keyExpr"))},_getKeysByItems:function(t){return this._editStrategy.getKeysByItems(t)},_getItemsByKeys:function(t,e){return this._editStrategy.getItemsByKeys(t,e)},_getKeyByIndex:function(t){return this._editStrategy.getKeyByIndex(t)},_getIndexByKey:function(t){return this._editStrategy.getIndexByKey(t)},_getIndexByItemData:function(t){return this._editStrategy.getIndexByItemData(t)},_isKeySpecified:function(){return!!this._dataController.key()},_getCombinedFilter:function(){return this._dataController.filter()},key:function(){return this.option("keyExpr")?this.option("keyExpr"):this._dataController.key()},keyOf:function(t){var e=t;return this.option("keyExpr")?e=this._keyGetter(t):this._dataController.store()&&(e=this._dataController.keyOf(t)),e},_nullValueSelectionSupported:function(){return!1},_initSelectionModule:function(){var t=this,e=t._editStrategy.itemsGetter;this._selection=new sh({allowNullValue:this._nullValueSelectionSupported(),mode:this.option("selectionMode"),maxFilterLengthInRequest:this.option("maxFilterLengthInRequest"),equalByReference:!this._isKeySpecified(),onSelectionChanged:function(i){(i.addedItemKeys.length||i.removedItemKeys.length)&&(t.option("selectedItems",t._getItemsByKeys(i.selectedItemKeys,i.selectedItems)),t._updateSelectedItems(i))},filter:t._getCombinedFilter.bind(t),totalCount:function(){var i=t.option("items"),a=t._dataController.totalCount();return a>=0?a:t._getItemsCount(i)},key:t.key.bind(t),keyOf:t.keyOf.bind(t),load:function(i){var a,r=t._dataController;return i.customQueryParams=null===(a=r.loadOptions())||void 0===a?void 0:a.customQueryParams,i.userData=r.userData(),r.store()?r.loadFromStore(i).done(function(n){if(!t._disposed){var s=(0,oa.r6)(n).data;r.applyMapFunction(s)}}):(new b.BH).resolve(this.plainItems())},dataFields:function(){return t._dataController.select()},plainItems:e.bind(t._editStrategy)})},_getItemsCount:function(t){return t.reduce((e,i)=>e+(i.items?this._getItemsCount(i.items):1),0)},_initEditStrategy:function(){this._editStrategy=new Rs(this)},_getSelectedItemIndices:function(t){var e=this,i=[];return t=t||this._selection.getSelectedItemKeys(),e._editStrategy.beginCache(),(0,y.S6)(t,function(a,r){var n=e._getIndexByKey(r);rt(n)&&i.push(n)}),e._editStrategy.endCache(),i},_initMarkup:function(){this._rendering=!0,this._dataController.isLoading()||this._syncSelectionOptions().done(()=>this._normalizeSelectedItems()),this.callBase()},_render:function(){this.callBase(),this._rendering=!1},_fireContentReadyAction:function(){this._rendering=!1,this._rendered=!0,this.callBase.apply(this,arguments)},_syncSelectionOptions:function(t){var e,i,a,r;switch(t=t||this._chooseSelectOption()){case"selectedIndex":e=this._editStrategy.getItemDataByIndex(this.option("selectedIndex")),(0,v.$K)(e)?(this._setOptionWithoutOptionChange("selectedItems",[e]),this._setOptionWithoutOptionChange("selectedItem",e),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([e]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedItem",null));break;case"selectedItems":if(i=(r=this.option("selectedItems")||[]).length?this._editStrategy.getIndexByItemData(r[0]):-1,this.option("selectionRequired")&&!rt(i))return this._syncSelectionOptions("selectedIndex");this._setOptionWithoutOptionChange("selectedItem",r[0]),this._setOptionWithoutOptionChange("selectedIndex",i),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems(r));break;case"selectedItem":if(e=this.option("selectedItem"),i=this._editStrategy.getIndexByItemData(e),this.option("selectionRequired")&&!rt(i))return this._syncSelectionOptions("selectedIndex");(0,v.$K)(e)?(this._setOptionWithoutOptionChange("selectedItems",[e]),this._setOptionWithoutOptionChange("selectedIndex",i),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([e]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedIndex",-1));break;case"selectedItemKeys":if(a=this.option("selectedItemKeys"),this.option("selectionRequired")){var n=this._getIndexByKey(a[0]);if(!rt(n))return this._syncSelectionOptions("selectedIndex")}return this._selection.setSelection(a)}return(new b.BH).resolve().promise()},_chooseSelectOption:function(){var t="selectedIndex",e=function(i){var a=this.option(i);return(0,v.$K)(a)&&a.length||i in this._userOptions}.bind(this);return e("selectedItems")?t="selectedItems":e("selectedItem")?t="selectedItem":e("selectedItemKeys")&&(t="selectedItemKeys"),t},_compareKeys:function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<e.length;i++)if(t[i]!==e[i])return!1;return!0},_normalizeSelectedItems:function(){if("none"===this.option("selectionMode"))this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems");else if("single"===this.option("selectionMode")){var t=this.option("selectedItems");if(t.length>1||!t.length&&this.option("selectionRequired")&&this.option("items")&&this.option("items").length){var e=this._selection.getSelectedItems(),i=void 0===t[0]?e[0]:t[0];return void 0===i&&(i=this._editStrategy.itemsGetter()[0]),this.option("grouped")&&i&&i.items&&(i.items=[i.items[0]]),this._selection.setSelection(this._getKeysByItems([i])),this._setOptionWithoutOptionChange("selectedItems",[i]),this._syncSelectionOptions("selectedItems")}this._selection.setSelection(this._getKeysByItems(t))}else{var a=this._getKeysByItems(this.option("selectedItems")),r=this._selection.getSelectedItemKeys();this._compareKeys(r,a)||this._selection.setSelection(a)}return(new b.BH).resolve().promise()},_itemClickHandler:function(t){var e=(new b.BH).resolve(),i=this.callBase;this._createAction(function(a){var r;e=null!==(r=this._itemSelectHandler(a.event))&&void 0!==r?r:e}.bind(this),{validatingTargetName:"itemElement"})({itemElement:(0,p.Z)(t.currentTarget),event:t}),e.always(()=>{i.apply(this,arguments)})},_itemSelectHandler:function(t){var e,i;if(this.option("selectByClick"))return this.isItemSelected(t.currentTarget)?this.unselectItem(t.currentTarget):i=this.selectItem(t.currentTarget),null===(e=i)||void 0===e?void 0:e.promise()},_selectedItemElement:function(t){return this._itemElements().eq(t)},_postprocessRenderItem:function(t){if("none"!==this.option("selectionMode")){var e=(0,p.Z)(t.itemElement),i=this._editStrategy.getNormalizedIndex(e),a=this._isItemSelected(i);this._processSelectableItem(e,a)}},_processSelectableItem:function(t,e){t.toggleClass(this._selectedItemClass(),e),this._setAriaSelectionAttribute(t,String(e))},_updateSelectedItems:function(t){var e=this,i=t.addedItemKeys,a=t.removedItemKeys;if(e._rendered&&(i.length||a.length)){var r=e._selectionChangePromise;if(!e._rendering){var s,n=[],o=[];e._editStrategy.beginCache();for(var l=0;l<i.length;l++)s=e._getIndexByKey(i[l]),n.push(s),e._addSelection(s);for(var d=0;d<a.length;d++)s=e._getIndexByKey(a[d]),o.push(s),e._removeSelection(s);e._editStrategy.endCache(),e._updateSelection(n,o)}(0,b.gx)(r).done(function(){e._fireSelectionChangeEvent(t.addedItems,t.removedItems)})}},_fireSelectionChangeEvent:function(t,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:t,removedItems:e})},_updateSelection:E.ZT,_setAriaSelectionAttribute:function(t,e){this.setAria("selected",e,t)},_removeSelection:function(t){var e=this._editStrategy.getItemElement(t);rt(t)&&(this._processSelectableItem(e,!1),S.Z.triggerHandler(e,"stateChanged",!1))},_addSelection:function(t){var e=this._editStrategy.getItemElement(t);rt(t)&&(this._processSelectableItem(e,!0),S.Z.triggerHandler(e,"stateChanged",!0))},_isItemSelected:function(t){var e=this._getKeyByIndex(t);return this._selection.isItemSelected(e,{checkPending:!0})},_optionChanged:function(t){switch(t.name){case"selectionMode":this._invalidate();break;case"dataSource":(!t.value||Array.isArray(t.value)&&!t.value.length)&&this.option("selectedItemKeys",[]),this.callBase(t);break;case"selectedIndex":case"selectedItem":case"selectedItems":case"selectedItemKeys":this._syncSelectionOptions(t.name).done(()=>this._normalizeSelectedItems());break;case"keyExpr":this._initKeyGetter();break;case"selectionRequired":this._normalizeSelectedItems();break;case"selectByClick":case"onSelectionChanged":case"onItemDeleting":case"onItemDeleted":case"onItemReordered":case"maxFilterLengthInRequest":break;default:this.callBase(t)}},_clearSelectedItems:function(){this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems")},_waitDeletingPrepare:function(t){if(t.data(Bs))return(new b.BH).resolve().promise();t.data(Bs,!0);var e=new b.BH,i={cancel:!1},a=this._itemEventHandler(t,"onItemDeleting",i,{excludeValidators:["disabled","readOnly"]});return(0,b.gx)(a).always(function(r){var n=!a,s=!n&&"resolved"===a.state(),l=n||s&&!arguments.length||s&&r;(0,b.gx)((0,b.p4)(i.cancel)).always(function(){t.data(Bs,!1)}).done(function(d){l&&!d?e.resolve():e.reject()}).fail(e.reject)}.bind(this)),e.promise()},_deleteItemFromDS:function(t){var e=this._dataController,i=new b.BH,a=this.option("disabled"),r=e.store();if(!r)return(new b.BH).resolve().promise();if(!r.remove)throw ee.Z.Error("E1011");return this.option("disabled",!0),r.remove(e.keyOf(this._getItemData(t))).done(function(n){void 0!==n?i.resolve():i.reject()}).fail(function(){i.reject()}),i.always(function(){this.option("disabled",a)}.bind(this)),i},_tryRefreshLastPage:function(){var t=new b.BH;return this._isLastPage()||this.option("grouped")?t.resolve():this._refreshLastPage().done(function(){t.resolve()}),t.promise()},_refreshLastPage:function(){return this._expectLastItemLoading(),this._dataController.load()},_updateSelectionAfterDelete:function(t){var e=this._getKeyByIndex(t);this._selection.deselect([e])},_updateIndicesAfterIndex:function(t){for(var e=this._itemElements(),i=t+1;i<e.length;i++)(0,p.Z)(e[i]).data(this._itemIndexKey(),i-1)},_simulateOptionChange:function(t){var e=this.option(t);e instanceof ti.o||this._optionChangedAction({name:t,fullName:t,value:e})},isItemSelected:function(t){return this._isItemSelected(this._editStrategy.getNormalizedIndex(t))},selectItem:function(t){if("none"!==this.option("selectionMode")){var e=this._editStrategy.getNormalizedIndex(t);if(rt(e)){var i=this._getKeyByIndex(e);if(!this._selection.isItemSelected(i)){if("single"===this.option("selectionMode"))return this._selection.setSelection([i]);var a=this.option("selectedItemKeys")||[];return this._selection.setSelection([...a,i],[i])}}}},unselectItem:function(t){var e=this._editStrategy.getNormalizedIndex(t);if(rt(e)){var i=this._selection.getSelectedItemKeys();if(!(this.option("selectionRequired")&&i.length<=1)){var a=this._getKeyByIndex(e);this._selection.isItemSelected(a,{checkPending:!0})&&this._selection.deselect([a])}}},_deleteItemElementByIndex:function(t){this._updateSelectionAfterDelete(t),this._updateIndicesAfterIndex(t),this._editStrategy.deleteItemAtIndex(t)},_afterItemElementDeleted:function(t,e){var i=this._dataController.getDataSource()?"dataSource":"items";this._simulateOptionChange(i),this._itemEventHandler(t,"onItemDeleted",e,{beforeExecute:function(){t.remove()},excludeValidators:["disabled","readOnly"]}),this._renderEmptyMessage()},deleteItem:function(t){var e=this,i=new b.BH,a=this._editStrategy.getItemElement(t),r=this._editStrategy.getNormalizedIndex(t),n=this._itemResponseWaitClass();return rt(r)?this._waitDeletingPrepare(a).done(function(){a.addClass(n);var s=e._extendActionArgs(a);e._deleteItemFromDS(a).done(function(){e._deleteItemElementByIndex(r),e._afterItemElementDeleted(a,s),e._tryRefreshLastPage().done(function(){i.resolveWith(e)})}).fail(function(){a.removeClass(n),i.rejectWith(e)})}).fail(function(){i.rejectWith(e)}):i.rejectWith(e),i.promise()},reorderItem:function(t,e){var i=new b.BH,a=this,r=this._editStrategy,n=r.getItemElement(t),s=r.getItemElement(e),o=r.getNormalizedIndex(t),l=r.getNormalizedIndex(e),d=this._dataController.getDataSource()?"dataSource":"items";return rt(o)&&rt(l)&&o!==l?i.resolveWith(this):i.rejectWith(this),i.promise().done(function(){s[r.itemPlacementFunc(o,l)](n),r.moveItemAtIndexToIndex(o,l),this._updateIndicesAfterIndex(o),a.option("selectedItems",a._getItemsByKeys(a._selection.getSelectedItemKeys(),a._selection.getSelectedItems())),"items"===d&&a._simulateOptionChange(d),a._itemEventHandler(n,"onItemReordered",{fromIndex:r.getIndex(o),toIndex:r.getIndex(l)},{excludeValidators:["disabled","readOnly"]})})}});const li=jx;var Xx=li.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource:function(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter:function(){var t=this._createDataAdapterAccessors();this._dataAdapter=new mx((0,C.l)({dataAccessors:{getters:t.getters,setters:t.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:E.ZT,_getItemExtraPropNames:E.ZT,_initDynamicTemplates:function(){var t=["text","html","items","icon"].concat(this._getItemExtraPropNames());this._templateManager.addDefaultTemplates({item:new oi(this._addContent.bind(this),t,this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_addContent:function(t,e){t.html(e.html).append(this._getIconContainer(e)).append(this._getTextContainer(e))},_getIconContainer:function(t){return t.icon?(0,vt.H)(t.icon):void 0},_getTextContainer:function(t){return(0,p.Z)("<span>").text(t.text)},_initAccessors:function(){var t=this;(0,y.S6)(this._getAccessors(),function(e,i){t._compileAccessor(i)}),this._compileDisplayGetter()},_getAccessors:function(){return["key","selected","items","disabled","parentId","expanded"]},_getChildNodes:function(t){var e=this,i=[];return(0,y.S6)(t.internalFields.childrenKeys,function(a,r){var n=e._dataAdapter.getNodeByKey(r);i.push(n)}),i},_hasChildren:function(t){return t&&t.internalFields.childrenKeys.length},_compileAccessor:function(t){var e="_"+t+"Getter",i="_"+t+"Setter",a=this.option(t+"Expr");return a?(0,v.mf)(a)?(this[i]=function(r,n){r[a()]=n},void(this[e]=function(r){return r[a()]})):(this[e]=(0,Q.vb)(a),void(this[i]=(0,Q.OM)(a))):(this[e]=E.ZT,void(this[i]=E.ZT))},_createDataAdapterAccessors:function(){var t=this,e={getters:{},setters:{}};return(0,y.S6)(this._getAccessors(),function(i,a){var n="_"+a+"Setter",s="parentId"===a?"parentKey":a;e.getters[s]=t["_"+a+"Getter"],e.setters[s]=t[n]}),e.getters.display=this._displayGetter?this._displayGetter:i=>i.text,e},_initMarkup:function(){this.callBase(),this._addWidgetClass()},_addWidgetClass:function(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:E.ZT,_renderItemFrame:function(t,e){var i=this.callBase.apply(this,arguments);return i.toggleClass("dx-state-disabled",!!this._disabledGetter(e)),i},_optionChanged:function(t){switch(t.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(t);break;default:this.callBase(t)}}});const oh=Xx,Qx=class Jx extends Rs{_getPlainItems(){return(0,y.UI)(this._collectionWidget.option("items"),function e(i){return i.items?[i].concat((0,y.UI)(i.items,e)):i})}_stringifyItem(e){return JSON.stringify(e,(i,a)=>"template"===i?this._getTemplateString(a):a)}_getTemplateString(e){return"object"==typeof e?(0,p.Z)(e).text():e.toString()}};var pa="dx-menu",eb=pa+"-no-icons",Je=pa+"-item",ib=Je+"-content",Ls=Je+"-selected",lh=Je+"-wrapper",ab=pa+"-items-container",rb=Je+"-expanded",nb=pa+"-separator",sb=pa+"-last-group-item",ob=Je+"-has-text",lb=Je+"-has-icon",db=Je+"-has-submenu",dh=Je+"-popout",ub=dh+"-container",uh=Je+"-text",cb={show:50,hide:300},pb="".concat(uh,"-with-url"),hh="dx-item-url";const ch=(()=>{class t extends oh{_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return Je}_setAriaSelectionAttribute(){}_selectedItemClass(){return Ls}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return(0,C.l)(super._supportedKeys(),{space:()=>{var i=(0,p.Z)(this.option("focusedElement"));!i.length||!this._isSelectionEnabled()||this.selectItem(i[0])},pageUp:E.ZT,pageDown:E.ZT})}_isSelectionEnabled(){return"single"===this.option("selectionMode")}_init(){this._activeStateUnit=".".concat(Je),super._init(),this._renderSelectedItem(),this._initActions()}_getLinkContainer(i,a,r){var{linkAttr:n,url:s}=r;i?.addClass("dx-icon-with-url"),a?.addClass(pb);var o=(0,v.Kn)(n)?n:{};return(0,p.Z)("<a>").addClass(hh).attr((0,M.Z)({},o,{href:s})).append(i).append(a)}_addContent(i,a){var{html:r,url:n}=a,s=this._getIconContainer(a),o=this._getTextContainer(a);if(i.html(r),n){var l=this._getLinkContainer(s,o,a);i.append(l)}else i.append(s).append(o);i.append(this._getPopoutContainer(a)),this._addContentClasses(a,i.parent())}_getTextContainer(i){var{text:a}=i;if(a){var r=(0,p.Z)("<span>").addClass(uh),n=(0,v.PO)(i)?a:String(i);return r.text(n)}}_getItemExtraPropNames(){return["url","linkAttr"]}_getPopoutContainer(i){var r,a=i.items;if(a&&a.length){var n=(0,p.Z)("<div>").addClass(dh);r=(0,p.Z)("<span>").addClass(ub).append(n)}return r}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(i){if(i){var a=this._dataAdapter.getNodeByItem(i);this._dataAdapter.toggleSelection(a.internalFields.key,!0)}}_renderSelectedItem(){var i=this._dataAdapter.getSelectedNodesKeys(),a=i.length&&i[0],r=this.option("selectedItem");if(a){var n=this._dataAdapter.getNodeByKey(a);if(!1!==n.selectable){if(!r)return void this.option("selectedItem",n.internalFields.item);r!==n.internalFields.item&&(this._dataAdapter.toggleSelection(a,!1),this._selectByItem(r))}}else this._selectByItem(r)}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=(0,ys.sY)()}_toggleActiveState(i,a,r){if(super._toggleActiveState.apply(this,arguments),this._inkRipple){var n={element:i,event:r};a?this._inkRipple.showWave(n):this._inkRipple.hideWave(n)}}_getShowSubmenuMode(){var i=this.option("showSubmenuMode");return i=(0,v.Kn)(i)?i.name:i,this._isDesktopDevice()?i:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return"desktop"===K.Z.real().deviceType}_initEditStrategy(){this._editStrategy=new Qx(this)}_addCustomCssClass(i){i.addClass(this.option("cssClass"))}_itemWrapperSelector(){return".".concat(lh)}_hoverStartHandler(i){var a=this._getItemElementByEventArgs(i);!a||this._isItemDisabled(a)||(i.stopPropagation(),"onHover"===this._getShowSubmenuMode()&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,a),this._getSubmenuDelay("show"))))}_getAvailableItems(i){return super._getAvailableItems(i).filter(function(){return"hidden"!==(0,p.Z)(this).css("visibility")})}_isItemDisabled(i){return this._disabledGetter(i.data(this._itemDataKey()))}_showSubmenu(i){this._addExpandedClass(i)}_addExpandedClass(i){(0,p.Z)(i).addClass(rb)}_getSubmenuDelay(i){var{delay:a}=this.option("showSubmenuMode");return(0,v.$K)(a)?(0,v.Kn)(a)?a[i]:a:cb[i]}_getItemElementByEventArgs(i){var a=(0,p.Z)(i.target);if(a.hasClass(this._itemClass())||a.get(0)===i.currentTarget)return a;for(;!a.hasClass(this._itemClass());)if((a=a.parent()).hasClass("dx-submenu"))return null;return a}_hoverEndHandler(){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(i){return i&&i.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(i,a){if(i.length){this.hasIcons=!1;var r=this._renderContainer(this.$element(),a),n=-1,s=-1;(0,y.S6)(i,(o,l)=>{var d=!1!==l.visible;d&&n<0&&(n=o),n<o&&(l.beginGroup||o===s)&&(s=d?o:o+1),o===s&&n<o&&this._renderSeparator(r),this._renderItem(o,l,r)}),this.hasIcons||r.addClass(eb)}}_renderContainer(i){var a=(0,p.Z)("<ul>");return this.setAria("role","none",a),a.appendTo(i).addClass(ab)}_createDOMElement(i){var a=(0,p.Z)("<li>");return this.setAria("role","none",a),a.appendTo(i).addClass(lh)}_renderItem(i,a,r,n){var s=this.option("items"),o=n||this._createDOMElement(r);s[i+1]&&s[i+1].beginGroup&&o.addClass(sb);var l=super._renderItem(i,a.internalFields.item,o);a.internalFields.item===this.option("selectedItem")&&l.addClass(Ls),l.attr("tabIndex",-1),this._hasSubmenu(a)&&this.setAria("haspopup","true",l)}_renderItemFrame(i,a,r){var n=r.children(".".concat(Je));return n.length?n:super._renderItemFrame.apply(this,arguments)}_refreshItem(i,a){var r=this._dataAdapter.getNodeByItem(a),n=i.data(this._itemIndexKey()),s=i.closest("ul"),o=i.closest("li");this._renderItem(n,r,s,o)}_addContentClasses(i,a){var n=!!i.icon,s=!!i.items&&!!i.items.length;a.toggleClass(ob,!!i.text&&!!i.text.length),a.toggleClass(lb,n),this.hasIcons||(this.hasIcons=n),a.toggleClass(db,s)}_getItemContent(i){var a=super._getItemContent(i);return a.length||(a=i.children(".".concat(ib))),a}_postprocessRenderItem(i){var a=(0,p.Z)(i.itemElement),r=this._dataAdapter.getSelectedNodesKeys();r.length&&this._selectedGetter(i.itemData)&&this._isItemSelectable(i.itemData)&&this._dataAdapter.getNodeByItem(i.itemData).internalFields.key===r[0]?(a.addClass(this._selectedItemClass()),this._setAriaSelectionAttribute(a,"true")):this._setAriaSelectionAttribute(a,"false")}_isItemSelectable(i){return!1!==i.selectable}_renderSeparator(i){(0,p.Z)("<li>").appendTo(i).addClass(nb)}_itemClickHandler(i){if(!i._skipHandling){var a=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(i,"onItemClick",{},{beforeExecute:this._itemClick,afterExecute:a.bind(this)}),i._skipHandling=!0}}_itemClick(i){var a=i.args[0],r=a.event.target.getElementsByClassName(hh)[0];a.itemData.url&&r&&r.click()}_updateSubmenuVisibilityOnClick(i){this._updateSelectedItemOnClick(i),"onClick"===this._getShowSubmenuMode()&&this._addExpandedClass(i.args[0].itemElement)}_updateSelectedItemOnClick(i){var a=i.args?i.args[0]:i;if(this._isItemSelectAllowed(a.itemData)){var r=this._dataAdapter.getSelectedNodesKeys(),n=r.length&&this._dataAdapter.getNodeByKey(r[0]);n&&this._toggleItemSelection(n,!1),n&&n.internalFields.item===a.itemData?(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null)):this.selectItem(a.itemData)}}_isItemSelectAllowed(i){var a=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&a&&this._isItemSelectable(i)&&!this._itemsGetter(i)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return(0,E.C$)()}_optionChanged(i){switch(i.name){case"showSubmenuMode":break;case"selectedItem":var a=this._dataAdapter.getNodeByItem(i.value),r=this._dataAdapter.getSelectedNodesKeys()[0];if(a&&a.internalFields.key!==r){if(!1===a.selectable)break;r&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(r),!1),this._toggleItemSelection(a,!0),this._updateSelectedItems()}break;case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(i)}}_toggleItemSelection(i,a){var r=this._getElementByItem(i.internalFields.item);r&&(0,p.Z)(r).toggleClass(Ls),this._dataAdapter.toggleSelection(i.internalFields.key,a)}_getElementByItem(i){var a;return(0,y.S6)(this._itemElements(),(r,n)=>(0,p.Z)(n).data(this._itemDataKey())!==i||(a=n,!1)),a}_updateSelectedItems(i,a){(i||a)&&this._fireSelectionChangeEvent(a,i)}_fireSelectionChangeEvent(i,a){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[i],removedItems:[a]})}selectItem(i){var a=i.nodeType?this._getItemData(i):i,r=this._dataAdapter.getSelectedNodesKeys()[0],n=this.option("selectedItem"),s=this._dataAdapter.getNodeByItem(a);s.internalFields.key!==r&&(r&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(r),!1),this._toggleItemSelection(s,!0),this._updateSelectedItems(n,a),this._setOptionWithoutOptionChange("selectedItem",a))}unselectItem(i){var a=i.nodeType?this._getItemData(i):i,r=this._dataAdapter.getNodeByItem(a),n=this.option("selectedItem");r.internalFields.selected&&(this._toggleItemSelection(r,!1),this._updateSelectedItems(n,null),this._setOptionWithoutOptionChange("selectedItem",null))}}return t.ItemClass=Ni,t})();var ph="dx-menu",_a=ph+"-item",Zi=_a+"-expanded",Tr=ph+"-items-container",_h=_a+"-wrapper",$e="dx-submenu",vh="dx-state-hover",Sh=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],wb=["up","down","first","last"],xh="dxcontextmenu",yb=(0,Z.Jj)();class bh extends ch{getShowEvent(e){var i=null;return(0,v.Kn)(e)?null!==e.name&&(i=e.name||xh):i=e,i}getShowDelay(e){return(0,v.Kn)(e)&&e.delay}_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{showEvent:xh,hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!(0,Z.Ym)(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),(0,C.l)(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},(0,y.S6)(Sh,(e,i)=>{this._actions[i]=this._createActionByOption(i)||E.ZT})}_setOptionsByReference(){super._setOptionsByReference(),(0,C.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():(0,p.Z)()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return(0,C.l)(super._supportedKeys(),{space:()=>{var e=(0,p.Z)(this.option("focusedElement"));this.hide(),e.length&&this._isSelectionEnabled()&&this.selectItem(e[0])},escape:this.hide})}_getActiveItem(){var e=this._getAvailableItems(),i=e.filter(".".concat("dx-state-focused")),a=e.filter(".".concat(vh));return a.closest(".".concat(Tr)).find(".".concat(_a)).index(i)>=0?i:a.length?a:super._getActiveItem()}_moveFocus(e){var o,i=this._getItemsByLocation(e),a=this._getActiveItem(!0),r=this.itemsContainer().find(".".concat(vh)),s=!(!(0,p.Z)(this.option("focusedElement")).length&&!r.length);switch(e){case"up":o=s?this._prevItem(i):a,this._setFocusedElement(o),a.is(i.first())&&this._actions.onLeftFirstItem(a);break;case"down":o=s?this._nextItem(i):a,this._setFocusedElement(o),a.is(i.last())&&this._actions.onLeftLastItem(a);break;case"right":o=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler(i,e),this._setFocusedElement(o);break;case"left":o=this.option("rtlEnabled")?this._expandSubmenuHandler(i,e):this._hideSubmenuHandler(),this._setFocusedElement(o);break;case"first":o=i.first(),this._setFocusedElement(o);break;case"last":o=i.last(),this._setFocusedElement(o);break;default:return super._moveFocus(e)}}_setFocusedElement(e){e&&0!==e.length&&this.option("focusedElement",(0,W.u)(e))}_getItemsByLocation(e){var a,i=this._getActiveItem(!0);return wb.includes(e)&&(a=i.closest(".".concat(Tr)).children().children()),this._getAvailableItems(a)}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if((0,v.$K)(this._overlay)){var e=this._overlay.$content();super._refreshActiveDescendant(e)}}_hideSubmenuHandler(){var e=this._getActiveItem(!0),i=e.parents(".".concat(Zi)).first();return i.length?(this._hideSubmenusOnSameLevel(i),this._hideSubmenu(e.closest(".".concat($e))),i):(this._actions.onCloseRootSubmenu(e),e)}_expandSubmenuHandler(e,i){var a=this._getActiveItem(!0),r=this._getItemData(a),n=this._dataAdapter.getNodeByItem(r),s=this._hasSubmenu(n),o=a.children(".".concat($e));if(s&&!a.hasClass("dx-state-disabled"))return(!o.length||"hidden"===o.css("visibility"))&&this._showSubmenu(a),this._nextItem(this._getItemsByLocation(i));this._actions.onExpandLastSubmenu(a)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(!this._overlay){var e=this._getOverlayOptions();this._overlay=this._createComponent((0,p.Z)("<div>").appendTo(this._$element),Nt.Z,e);var i=this._overlay.$content();i.addClass("dx-context-menu"),this._addCustomCssClass(i),this._addPlatformDependentClass(i),this._attachContextMenuEvent()}}preventShowingDefaultContextMenuAboveOverlay(){var e=this._itemContainer(),i=(0,D.V4)(ju,this.NAME);S.Z.off(e,i,".".concat($e)),S.Z.on(e,i,".".concat($e),(a=>{a.stopPropagation(),a.preventDefault(),S.Z.off(e,i,".".concat($e))}).bind(this))}_itemContextMenuHandler(e){super._itemContextMenuHandler(e),e.stopPropagation()}_addPlatformDependentClass(e){K.Z.current().phone&&e.addClass("dx-menu-phone-overlay")}_detachShowContextMenuEvents(e){var i=this.getShowEvent(this.option("showEvent"));if(i){var a=(0,D.V4)(i,this.NAME);this._showContextMenuEventHandler?S.Z.off(Y.Z.getDocument(),a,e,this._showContextMenuEventHandler):S.Z.off((0,p.Z)(e),a)}}_attachShowContextMenuEvents(){var e=this._getTarget(),i=this.getShowEvent(this.option("showEvent"));if(i){var a=(0,D.V4)(i,this.NAME),r=this._createAction(s=>{var o=this.getShowDelay(this.option("showEvent"));o?setTimeout(()=>this._show(s.event),o):this._show(s.event)},{validatingTargetName:"target"}),n=s=>r({event:s,target:(0,p.Z)(s.currentTarget)});r=this._createAction(r),(0,v.ZU)(e)||e.nodeType||(0,v.FJ)(e)?(this._showContextMenuEventHandler=void 0,S.Z.on(e,a,n)):(this._showContextMenuEventHandler=n,S.Z.on(Y.Z.getDocument(),a,e,this._showContextMenuEventHandler))}}_hoverEndHandler(e){super._hoverEndHandler(e),e.stopPropagation()}_renderDimensions(){}_renderContainer(e,i){var a=i||this._itemContainer();(e=(0,p.Z)("<div>")).appendTo(a).addClass($e).css("visibility",i?"hidden":"visible"),e.parent().hasClass("dx-overlay-content")||this._addCustomCssClass(e);var r=super._renderContainer(e);return i?r:this.option("width")?r.css("minWidth",this.option("width")):this.option("height")?r.css("minHeight",this.option("height")):r}_renderSubmenuItems(e,i){this._renderItems(this._getChildNodes(e),i),this._actions.onSubmenuCreated({itemElement:(0,W.u)(i),itemData:e.internalFields.item,submenuElement:(0,W.u)(i.children(".".concat($e)))})}_getOverlayOptions(){var e=this.option("position"),i={focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:a=>this._hideOnOutsideClickHandler(a),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:e.at,my:e.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:yb};return i}_overlayShownActionHandler(e){this._actions.onShown(e)}_overlayHidingActionHandler(e){this._actions.onHiding(e),e.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(e){this._actions.onHidden(e)}_shouldHideOnOutsideClick(e){var{closeOnOutsideClick:i,hideOnOutsideClick:a}=this.option();return(0,v.mf)(a)?a(e):(0,v.mf)(i)?i(e):a||i}_hideOnOutsideClickHandler(e){if(!this._shouldHideOnOutsideClick(e))return!1;if(Y.Z.isDocument(e.target))return!0;var i=this._getActiveItemsContainer(e.target),a=this._getItemsContainers(),r=this._searchActiveItem(e.target),n=this.$element().parents(".".concat(_a)),s=r[0]===n[0]&&r.length&&n.length;return!(this._isIncludeOverlay(i,a)&&r.length)&&!s||("onClick"===this._getShowSubmenuMode()&&this._hideAllShownChildSubmenus(r),!1)}_getActiveItemsContainer(e){return(0,p.Z)(e).closest(".".concat(Tr))}_getItemsContainers(){return this._overlay.$content().find(".".concat(Tr))}_searchActiveItem(e){return(0,p.Z)(e).closest(".".concat(_a)).eq(0)}_isIncludeOverlay(e,i){var a=!1;return(0,y.S6)(i,(r,n)=>{e.is(n)&&!a&&(a=!0)}),a}_hideAllShownChildSubmenus(e){var i=e.find(".".concat($e)),a=(0,C.l)([],this._shownSubmenus);i.length>0&&(0,y.S6)(a,(r,n)=>{var s=this._searchActiveItem(n.context).parent();s.parent().is(e.parent().parent())&&!s.is(e.parent())&&this._hideSubmenu(n)})}_showSubmenu(e){var i=this._dataAdapter.getNodeByItem(this._getItemData(e));if(this._hideSubmenusOnSameLevel(e),this._hasSubmenu(i)){var a=e.children(".".concat($e)),r=a.length;super._showSubmenu(e),r||this._renderSubmenuItems(i,e),this._isSubmenuVisible(a)||this._drawSubmenu(e)}}_hideSubmenusOnSameLevel(e){var i=e.parent(".".concat(_h)).siblings().find(".".concat(Zi));i.length&&(i.removeClass(Zi),this._hideSubmenu(i.find(".".concat($e))))}_hideSubmenuGroup(e){this._isSubmenuVisible(e)&&this._hideSubmenuCore(e)}_isSubmenuVisible(e){return"visible"===e.css("visibility")}_drawSubmenu(e){var i=this.option("animation")?this.option("animation").show:{},a=e.children(".".concat($e)),r=this._getSubmenuPosition(e);this._overlay&&this._overlay.option("visible")&&((0,v.$K)(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(a)||this._shownSubmenus.push(a),i&&ce.Z.stop(a),$t.Z.setup(a,r),i&&((0,v.PO)(i.to)&&(i.to.position=r),this._animate(a,i)),a.css("visibility","visible"))}_animate(e,i){ce.Z.animate(e,i)}_getSubmenuPosition(e){var i=this.option("submenuDirection").toLowerCase(),r={collision:"flip",of:e.parent(".".concat(_h)),offset:{h:0,v:-1}};switch(i){case"left":r.at="left top",r.my="right top";break;case"right":r.at="right top",r.my="left top";break;default:this.option("rtlEnabled")?(r.at="left top",r.my="right top"):(r.at="right top",r.my="left top")}return r}_updateSubmenuVisibilityOnClick(e){if(e.args.length){var i=e.args[0].itemData,a=this._dataAdapter.getNodeByItem(i);if(a){var r=(0,p.Z)(e.args[0].itemElement),n=r.find(".".concat($e));if(this._hasSubmenu(a)&&!n.length&&(this._renderSubmenuItems(a,r),n=r.find(".".concat($e))),(r.context!==n.context||"visible"!==n.css("visibility"))&&(this._updateSelectedItemOnClick(e),i&&!i.disabled&&(!i||!1!==i.closeMenuOnClick)))if(0===n.length){var l=(0,p.Z)(r.parents(".".concat($e))[0]);this._hideSubmenu(l),!e.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(n)&&this._hideSubmenu(n),this._showSubmenu(r)}}}_hideSubmenu(e){var i=(0,C.l)([],this._shownSubmenus);(0,y.S6)(i,(a,r)=>{(e.is(r)||(0,st.r3)(e[0],r[0]))&&(r.parent().removeClass(Zi),this._hideSubmenuCore(r))})}_hideSubmenuCore(e){var i=this._shownSubmenus.indexOf(e),a=this.option("animation")?this.option("animation").hide:null;i>=0&&this._shownSubmenus.splice(i,1),this._stopAnimate(e),a&&this._animate(e,a),e.css("visibility","hidden")}_stopAnimate(e){ce.Z.stop(e,!0)}_hideAllShownSubmenus(){var e=(0,C.l)([],this._shownSubmenus);this._overlay.$content().find(".".concat(Zi)).removeClass(Zi),(0,y.S6)(e,(a,r)=>{this._hideSubmenu(r)})}_visibilityChanged(e){e&&this._renderContentImpl()}_optionChanged(e){if(Sh.includes(e.name))this._initActions();else switch(e.name){case"visible":this._renderVisibility(e.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":e.previousValue&&this._detachShowContextMenuEvents(e.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(e)}}_renderVisibility(e){return e?this._show():this._hide()}_toggleVisibility(){}_show(e){var i={jQEvent:e},a=(new b.BH).reject().promise();if(this._actions.onShowing(i),i.cancel)return a;var n,r=this._positionContextMenu(e);return r&&(this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes())),this._setOptionWithoutOptionChange("visible",!0),this._overlay.option("position",r),a=this._overlay.show(),e&&e.stopPropagation(),this._setAriaAttributes(),(null==e||null===(n=e.originalEvent)||void 0===n?void 0:n.type)===zt_name&&this.preventShowingDefaultContextMenuAboveOverlay()),a}_setAriaAttributes(){this._overlayContentId="dx-".concat(new Ee.Z),this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||(0,p.Z)(Y.Z.getDocument())}_getContextMenuPosition(){return(0,C.l)({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(e){var i=this._getContextMenuPosition(),a=this._isInitialOptionValue("position"),r=this._createActionByOption("onPositioning");e&&e.preventDefault&&a&&(i.of=e);var n={position:i,event:e};return r(n),n.cancel?i=null:n.event&&(n.event.cancel=!0,e.preventDefault()),i}_refresh(){if((0,Z.Ym)())if(this._overlay){var e=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",e)}else super._refresh();else super._refresh()}_hide(){var e;return this._overlay&&(e=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),e||(new b.BH).reject().promise()}toggle(e){var i=this.option("visible");return this._renderVisibility(e=void 0===e?!i:e)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}(0,J.Z)("dxContextMenu",bh);const wh=bh;var Ib={columnHeadersView:"header",rowsView:"content",footerView:"footer",headerPanel:"headerPanel"},Tb=["columnHeadersView","rowsView","footerView","headerPanel"],Ab=ne.ViewController.inherit({init(){this.createAction("onContextMenuPreparing")},getContextMenuItems(t){if(!t)return!1;var a,r,n,s,e=this,i=(0,p.Z)(t.target);return(0,y.S6)(Tb,function(){var o,l,d=e.getView(this);if((a=d&&d.element())&&(a.is(i)||a.find(i).length)){n=i.closest(".dx-row > td, .dx-row > tr"),r=n.parent();var u=d.getRowIndex(r),h=n[0]&&n[0].cellIndex,c=r.data("options"),_={event:t,targetElement:(0,W.u)(i),target:Ib[this],rowIndex:u,row:d._getRows()[u],columnIndex:h,column:null===(l=null===(o=c?.cells)||void 0===o?void 0:o[h])||void 0===l?void 0:l.column};if(_.items=d.getContextMenuItems&&d.getContextMenuItems(_),e.executeAction("onContextMenuPreparing",_),e._contextMenuPrepared(_),s=_.items)return!1}}),s},_contextMenuPrepared:E.ZT}),Db=ne.View.inherit({_renderCore(){var t=this,e=t.element().addClass("dx-context-menu");this.setAria("role","presentation",e),this._createComponent(e,wh,{onPositioning(i){var{event:a}=i,r=i.component,n=t.getController("contextMenu").getContextMenuItems(a);n?(r.option("items",n),a.stopPropagation()):i.cancel=!0},onItemClick(i){i.itemData.onItemClick&&i.itemData.onItemClick(i)},cssClass:t.getWidgetContainerClass(),target:t.component.$element()})}});$.registerModule("contextMenu",{defaultOptions:()=>({onContextMenuPreparing:null}),controllers:{contextMenu:Ab},views:{contextMenuView:Db}});var va="dx-error-row",yh="dx-error-message",Lb=ne.ViewController.inherit({init(){this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView")},_createErrorRow(t,e){var a,r,i=this,n=this._renderErrorMessage(t);return e?(a=(0,p.Z)("<tr>").addClass(va),r=(0,p.Z)("<div>").addClass("dx-closebutton").addClass(i.addWidgetPrefix("action")),S.Z.on(r,ie.u,i.createAction(s=>{var l,o=s.event,d=(0,p.Z)(o.currentTarget).closest(".".concat(va)).index();o.stopPropagation(),(0,y.S6)(e,(u,h)=>{l=(0,p.Z)(h).children("tbody").children("tr").eq(d),i.removeErrorRow(l)}),i.getController("resizing")&&i.getController("resizing").fireContentReadyAction()})),(0,p.Z)("<td>").attr({colSpan:i.getController("columns").getVisibleColumns().length,role:"presentation"}).prepend(r).append(n).appendTo(a),a):n},_renderErrorMessage(t){var e=t.url?t.message.replace(t.url,""):t.message||t,i=(0,p.Z)("<div>").addClass(yh).text(e);return t.url&&(0,p.Z)("<a>").attr("href",t.url).text(t.url).appendTo(i),i},renderErrorRow(t,e,i){var r,n,a=this;if(i)return i.find(".".concat(yh)).remove(),r=a._createErrorRow(t),i.prepend(r),r;var s=e>=0||!a._columnHeadersView.isVisible()?a._rowsView:a._columnHeadersView,o=s.getTableElements();(0,y.S6)(o,(d,u)=>{if(r=a._createErrorRow(t,o),n=n||r,e>=0){var h=s._getRowElements((0,p.Z)(u)).eq(e);a.removeErrorRow(h.next()),r.insertAfter(h)}else{var c=(0,p.Z)(u).children("tbody"),_=c.children("tr");a._columnHeadersView.isVisible()?(a.removeErrorRow(_.last()),(0,p.Z)(u).append(r)):(a.removeErrorRow(_.first()),c.first().prepend(r))}});var l=a.getController("resizing");return l&&l.fireContentReadyAction(),n},removeErrorRow(t){if(!t){var e=this._columnHeadersView&&this._columnHeadersView.element();if(!(t=e&&e.find(".".concat(va)))||!t.length){var i=this._rowsView.element();t=i&&i.find(".".concat(va))}}t&&t.hasClass(va)&&t.remove()},optionChanged(t){"errorRowEnabled"===t.name?t.handled=!0:this.callBase(t)}}),Vb={defaultOptions:()=>({errorRowEnabled:!0}),controllers:{errorHandling:Lb},extenders:{controllers:{data:{init(){var t=this,e=t.getController("errorHandling");t.callBase(),t.dataErrorOccurred.add((i,a)=>{t.option("errorRowEnabled")&&e.renderErrorRow(i,void 0,a)}),t.changed.add(i=>{if(!i||"loadError"!==i.changeType){var a=t.getController("errorHandling"),r=t.getController("editing");r&&!r.hasChanges()&&a&&a.removeErrorRow()}})}}}}};$.registerModule("errorHandling",Vb);var Eh="borders",Ih="dx-gridbase-container",Ar="adaptiveHidden",Vs=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","filterPanelView","pagerView","draggingHeaderView","contextMenuView","errorView","headerFilterView","filterBuilderView"],ga=function(t){return(0,v.HD)(t)&&t.endsWith("%")},Th=function(t,e){var i=t._rowsView.contentWidth();return i-t._getTotalWidth(e,i)},Zb={_initPostRenderHandlers(){var t=this._dataController;this._refreshSizesHandler||(this._refreshSizesHandler=e=>{t.changed.remove(this._refreshSizesHandler),this._checkSize()&&this._refreshSizes(e)},t.changed.add(()=>{t.changed.add(this._refreshSizesHandler)}))},_refreshSizes(t){var e,i,a=this,r=t&&t.changeType,n=t&&t.isDelayed,s=a._dataController.items();if(t&&"refresh"!==r&&"prepend"!==r&&"append"!==r){if("update"===r){if(0===(null===(e=t.changeTypes)||void 0===e?void 0:e.length))return;!(s.length>1||"insert"!==t.changeTypes[0])||0===s.length&&"remove"===t.changeTypes[0]||t.needUpdateDimensions?i=a.resize():(i=new b.BH,this._waitAsyncTemplates().done(()=>{(0,E.Su)(()=>(0,E.g0)(()=>(0,E.Su)(()=>{a._setScrollerSpacing(),a._rowsView.resize(),i.resolve()})))}).fail(i.reject))}}else n||(i=a.resize());r&&"updateSelection"!==r&&"updateFocusedRow"!==r&&"pageIndex"!==r&&!n&&(0,b.gx)(i).done(()=>{a._setAriaLabel(),a.fireContentReadyAction()})},fireContentReadyAction(){this.component._fireContentReadyAction()},_getWidgetAriaLabel:()=>"dxDataGrid-ariaDataGrid",_setAriaLabel(){this.component.setAria("label",A.Z.format(this._getWidgetAriaLabel(),this._dataController.totalItemsCount(),this.component.columnCount()),this.component.$element().children(".".concat(Ih)))},_getBestFitWidths(){var t,e=this._rowsView,i=this._columnHeadersView,a=e.getColumnWidths();if(!a?.length){var r=i.getTableElement();i.setTableElement(null===(t=e.getTableElement())||void 0===t?void 0:t.children(".dx-header")),a=i.getColumnWidths(),i.setTableElement(r)}return a},_setVisibleWidths(t,e){var i=this._columnsController;i.beginUpdate(),(0,y.S6)(t,(a,r)=>{var n=i.getColumnId(r);i.columnOption(n,"visibleWidth",e[a])}),i.endUpdate()},_toggleBestFitModeForView(t,e,i){if(t&&t.isVisible()){var a=this._rowsView.getTableElements(),r=t.getTableElements();(0,y.S6)(a,(n,s)=>{var o,l=(0,p.Z)(s),d=r.eq(n);d&&d.length&&((o=i?d.children("tbody").appendTo(l):l.children(".".concat(e)).appendTo(d)).toggleClass(e,i),o.toggleClass(this.addWidgetPrefix("best-fit"),i))})}},_toggleBestFitMode(t){var e=this._rowsView.getTableElement(),i=this._rowsView.getTableElements().eq(1);e&&(e.css("tableLayout",t?"auto":"fixed"),e.children("colgroup").css("display",t?"none":""),(0,y.S6)(i.find("tr.dx-group-row"),(a,r)=>{(0,p.Z)(r).css("display",t?"none":"")}),i.toggleClass(this.addWidgetPrefix("table-fixed"),!t),this._toggleBestFitModeForView(this._columnHeadersView,"dx-header",t),this._toggleBestFitModeForView(this._footerView,"dx-footer",t),this._needStretch()&&(e.get(0).style.width=t?"auto":""))},_toggleContentMinHeight(t){var e=this._rowsView.getScrollable(),i=this._rowsView._findContentElement();!1===e?.option("useNative")&&i.css({minHeight:t?V.getContentHeightLimit(ve.Z):""})},_synchronizeColumns(){var o,u,h,t=this._columnsController,e=t.getVisibleColumns(),i=this.option("columnAutoWidth"),a=this.option("wordWrapEnabled"),r=e.some(_=>!(0,v.$K)(_.width)),n=this._needBestFit(),s=!1,l=!1,d=[];!n&&(0,y.S6)(e,(_,g)=>{if("auto"===g.width)return n=!0,!1}),(0,y.S6)(e,(_,g)=>{if(g.minWidth)return s=!0,!1}),this._setVisibleWidths(e,[]);var c=this.component.$element();n&&(u=Y.Z.getActiveElement(c.get(0)),h=V.getSelectionRange(u),this._toggleBestFitMode(!0),o=!0),this._toggleContentMinHeight(a),c&&c.get(0)&&this._maxWidth&&(delete this._maxWidth,c[0].style.maxWidth=""),(0,E.Su)(()=>{var g;n?(d=this._getBestFitWidths(),(0,y.S6)(e,(g,f)=>{var m=t.getColumnId(f);t.columnOption(m,"bestFitWidth",d[g],!0)})):s&&(d=this._getBestFitWidths()),(0,y.S6)(e,function(g){var{width:f}=this;"auto"!==f&&((0,v.$K)(f)?d[g]=(0,v.kE)(f)||function(t){return(0,v.HD)(t)&&t.endsWith("px")}(f)?parseFloat(f):f:i||(d[g]=void 0))}),o&&(this._toggleBestFitMode(!1),o=!1,u&&u!==Y.Z.getActiveElement())&&((0,se.l)(u).bottom<0||function(t,e){(function Bm(t,e){lr=!0,t.focus({preventScroll:e}),lr=!1})(t,!0),V.setSelectionRange(t,e)}(u,h)),l=this._correctColumnWidths(d,e),i&&((0,y.S6)(e,(f,m)=>{"groupExpand"===m.type&&(g=d[f])}),(0,y.S6)(e,(f,m)=>{"groupExpand"===m.type&&g&&(d[f]=g)}),this._needStretch()&&this._processStretch(d,e)),(0,E.g0)(()=>{(n||l||r)&&this._setVisibleWidths(e,d),a&&this._toggleContentMinHeight(!1)})})},_needBestFit(){return this.option("columnAutoWidth")},_needStretch(){return this._columnsController.getVisibleColumns().some(t=>"auto"===t.width&&!t.command)},_getAverageColumnsWidth(t){var e=Th(this,t),i=t.filter(a=>void 0===a).length;return e/i},_correctColumnWidths(t,e){var a,i=this,r=!1,n=!1,s=!1,o=i.component.$element(),l=i._hasWidth,d=function(){var m=a,x=e[m],w=t[m]===Ar,T=t[m],{minWidth:O}=x;if(O)if(void 0===T){var P=i._getAverageColumnsWidth(t);T=P}else if(ga(T)){var F=function(t,e,i,a){return Th(t,a.map((r,n)=>n===e?i:r))}(i,m,O,t);F<0&&(T=-1)}var N=i._getRealColumnWidth(m,t.map((H,k)=>m===k?T:H));O&&!w&&N<O&&(t[m]=O,s=!0,a=-1),(0,v.$K)(x.width)||(n=!0),ga(x.width)&&(r=!0)};for(a=0;a<e.length;a++)d();if(!n&&t.length){var u=i._rowsView.element(),h=i._rowsView.contentWidth(),c=i._rowsView.getScrollbarWidth(),_=i._getTotalWidth(t,h);if(_<h){var g=V.getLastResizableColumnIndex(e,t);if(g>=0&&(t[g]="auto",s=!0,!1===l&&!r)){var f=i.option("showBorders")?Math.ceil((0,I.Y_)(u)-(0,I.Xt)(u)):0;i._maxWidth=_+c+f,o.css("maxWidth",i._maxWidth)}}}return s},_processStretch(t,e){var i=this._rowsView.contentWidth(),a=this._getTotalWidth(t,i),r={length:0};if(t.length){(0,y.S6)(e,function(d){(this.width||t[d]===Ar)&&(r[d]=!0,r.length++)});var n=i-a,s=Math.floor(n/(t.length-r.length)),o=n-s*(t.length-r.length);if(n>=0)for(var l=0;l<t.length;l++)r[l]||(t[l]+=s,o>0&&(o<1?(t[l]+=o,o=0):(t[l]++,o--)))}},_getRealColumnWidth(t,e,i){var a=1,r=e[t];if(!ga(r))return parseFloat(r);var n=e.reduce((d,u,h)=>ga(u)?d+parseFloat(u):d,0),s=e.reduce((d,u)=>!u||u===Ar||ga(u)?d:d+parseFloat(u),0),o=(i=i||this._rowsView.contentWidth())-s,l=n*i/100;return s>0&&l+s>=i&&(a=l>o?o/l:1),parseFloat(r)*i*a/100},_getTotalWidth(t,e){for(var i=0,a=0;a<t.length;a++){var r=t[a];r&&r!==Ar&&(i+=this._getRealColumnWidth(a,t,e))}return Math.ceil(i)},_getGroupElement(){return this.component.$element().children().get(0)},updateSize(t){var e=(0,p.Z)(t),i=this.addWidgetPrefix("important-margin");if(void 0===this._hasHeight&&e&&e.is(":visible")&&(0,I.dz)(e)){var a=e.children(".".concat(this.getWidgetContainerClass()));a.length&&a.detach(),this._hasHeight=!!(0,I.Cr)(e);var r=(0,I.dz)(e);e.addClass(i),this._hasWidth=(0,I.dz)(e)===r,e.removeClass(i),a.length&&a.appendTo(e)}},publicMethods:()=>["resize","updateDimensions"],_waitAsyncTemplates(){var t,e,i;return(0,b.gx)(null===(t=this._columnHeadersView)||void 0===t?void 0:t.waitAsyncTemplates(!0),null===(e=this._rowsView)||void 0===e?void 0:e.waitAsyncTemplates(!0),null===(i=this._footerView)||void 0===i?void 0:i.waitAsyncTemplates(!0))},resize(){if(!this.component._requireResize){var t=new b.BH;return this._waitAsyncTemplates().done(()=>{(0,b.gx)(this.updateDimensions()).done(t.resolve).fail(t.reject)}).fail(t.reject),t.promise()}},updateDimensions(t){var e=this;if(e._initPostRenderHandlers(),e._checkSize(t)){var i=e._resizeDeferred,a=e._resizeDeferred=new b.BH;return(0,b.gx)(i).always(()=>{(0,E.g0)(()=>{e._dataController.isLoaded()&&e._synchronizeColumns(),e._resetGroupElementHeight(),(0,E.Su)(()=>{(0,E.g0)(()=>{(0,E.Su)(()=>{e._updateDimensionsCore()})})})}).done(a.resolve).fail(a.reject)}),a.promise()}},_resetGroupElementHeight(){var t=this._getGroupElement(),e=this._rowsView.getScrollable();t&&t.style.height&&(!e||!e.scrollTop())&&(t.style.height="")},_checkSize(t){var e=this.component.$element(),i=e.is(":visible"),a=this._lastWidth!==(0,I.dz)(e)||this._lastHeight!==(0,I.Cr)(e)||this._devicePixelRatio!==(0,Z.Jj)().devicePixelRatio;return i&&(!t||a)},_setScrollerSpacingCore(){var t=this,e=t._rowsView.getScrollbarWidth(),i=t._rowsView.getScrollbarWidth(!0);(0,E.g0)(()=>{t._columnHeadersView&&t._columnHeadersView.setScrollerSpacing(e),t._footerView&&t._footerView.setScrollerSpacing(e),t._rowsView.setScrollerSpacing(e,i)})},_setScrollerSpacing(){var t=this._rowsView.getScrollable(),e=!0===this.option("scrolling.useNative");!t||e?(0,E.g0)(()=>{(0,E.Su)(()=>{this._setScrollerSpacingCore()})}):this._setScrollerSpacingCore()},_updateDimensionsCore(){var t=this,e=t._dataController,i=t.getController("editorFactory"),a=t._rowsView,r=t.component.$element(),n=this._getGroupElement(),s=(0,I.Cr)(r),o=t.option("height")||r.get(0).style.height,l=!!o&&"auto"!==o,d=parseInt(r.css("maxHeight")),u=d&&s>=d,h=n&&n.scrollHeight===n.offsetHeight;t.updateSize(r),(0,E.g0)(()=>{a.hasHeight(t._hasHeight||!!d||l),u&&!h&&(0,p.Z)(n).css("height",d),e.isLoaded()?(0,E.Su)(()=>{t._updateLastSizes(r),t._setScrollerSpacing(),(0,y.S6)(Vs,(_,g)=>{var f=t.getView(g);f&&f.resize()}),i&&i.resize()}):a.setLoading(e.isLoading())})},_updateLastSizes(t){this._lastWidth=(0,I.dz)(t),this._lastHeight=(0,I.Cr)(t),this._devicePixelRatio=(0,Z.Jj)().devicePixelRatio},optionChanged(t){switch(t.name){case"width":case"height":this.component._renderDimensions(),this.resize();case"renderAsync":return void(t.handled=!0);default:this.callBase(t)}},init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._footerView=this.getView("footerView"),this._rowsView=this.getView("rowsView")}},$b=ne.ViewController.inherit(Zb),zb=ne.ViewController.inherit({_scrollChangedHandler(t,e,i){for(var a=0;a<t.length;a++)t[a]&&t[a].name!==i&&t[a].scrollTo({left:e.left,top:e.top})},init(){for(var t=[this.getView("columnHeadersView"),this.getView("footerView"),this.getView("rowsView")],e=0;e<t.length;e++){var i=t[e];i&&i.scrollChanged.add(this._scrollChangedHandler.bind(this,t))}}}),Wb=ne.View.inherit({_endUpdateCore(){this.component._requireResize&&(this.component._requireResize=!1,this._resizingController.resize())},init(){this._resizingController=this.getController("resizing"),this._dataController=this.getController("data")},getView(t){return this.component._views[t]},element(){return this._groupElement},optionChanged(t){(0,v.$K)(this._groupElement)&&"showBorders"===t.name?(this._groupElement.toggleClass(this.addWidgetPrefix(Eh),!!t.value),t.handled=!0):this.callBase(t)},_renderViews(t){var e=this;(0,y.S6)(Vs,(i,a)=>{var r=e.getView(a);r&&r.render(t)})},_getTableRoleName:()=>"group",render(t){var e=!this._groupElement,i=this._groupElement||(0,p.Z)("<div>").addClass(this.getWidgetContainerClass());i.addClass(Ih),i.toggleClass(this.addWidgetPrefix(Eh),!!this.option("showBorders")),this.setAria("role","presentation",t),this.component.setAria("role",this._getTableRoleName(),i),this._rootElement=t||this._rootElement,e&&(this._groupElement=i,(0,Z.Ym)()&&this.getController("resizing").updateSize(t),i.appendTo(t)),this._renderViews(i)},update(){var t=this._rootElement,e=this._groupElement,i=this.getController("resizing");t&&e&&(i.resize(),this._dataController.isLoaded()&&this._resizingController.fireContentReadyAction())}});$.registerModule("gridView",{defaultOptions:()=>({showBorders:!1,renderAsync:!1}),controllers:{resizing:$b,synchronizeScrolling:zb},views:{gridView:Wb},VIEW_NAMES:Vs});var Gb=li.inherit({_initMarkup(){this._deferredItems=[],this.callBase()},_renderItemContent(t){var e=new b.BH,i=new b.BH;this._deferredItems[t.index]=i;var a=this.callBase.call(this,t);return i.done(()=>{e.resolve(a)}),e.promise()},_onItemTemplateRendered:function(t,e){return()=>{this._deferredItems[e.index].resolve()}},_postProcessRenderItems:E.ZT,_renderItemsAsync(){var t=new b.BH;return b.gx.apply(this,this._deferredItems).done(()=>{this._postProcessRenderItems(),t.resolve()}),t.promise()},_clean(){this.callBase(),this._deferredItems=[]}});const Ub=Gb;var Ah="dx-toolbar",Ps="dx-toolbar-before",Dh="dx-toolbar-after",fa="dx-toolbar-label",Oh="dx-toolbar-compact";class Bh extends Ub{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter(e=>"disabled"!==e)}_initTemplates(){super._initTemplates();var e=new oi(function(i,a,r){if((0,v.PO)(a)){var l,d,u,h,c,{text:n,html:s,widget:o}=a;if(n&&i.text(n).wrapInner("<div>"),s&&i.html(s),"dxDropDownButton"===o&&(a.options=null!==(l=a.options)&&void 0!==l?l:{},(0,v.$K)(a.options.stylingMode)||(a.options.stylingMode=this.option("useFlatButtons")?"text":"contained")),"dxButton"===o)this.option("useFlatButtons")&&(a.options=null!==(d=a.options)&&void 0!==d?d:{},a.options.stylingMode=null!==(u=a.options.stylingMode)&&void 0!==u?u:"text"),this.option("useDefaultButtons")&&(a.options=null!==(h=a.options)&&void 0!==h?h:{},a.options.type=null!==(c=a.options.type)&&void 0!==c?c:"default")}else i.text(String(a));this._getTemplate("dx-polymorph-widget").render({container:i,model:r,parent:this})}.bind(this),["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:e,menuItem:e})}_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return(0,oe.x2)()},options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".".concat(Ps),".".concat("dx-toolbar-center"),".".concat(Dh)].join(","))}_itemClass(){return"dx-toolbar-item"}_itemDataKey(){return"dxToolbarItemDataKey"}_dimensionChanged(){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._renderItemsAsync(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(Ah),this._$toolbarItemsContainer=(0,p.Z)("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){var e=this._$toolbarItemsContainer;(0,y.S6)(["before","center","after"],(i,a)=>{var r="dx-toolbar-".concat(a);e.find(".".concat(r)).length||(this["_$".concat(a,"Section")]=(0,p.Z)("<div>").addClass(r).appendTo(e))})}_arrangeItems(e){var i;e=null!==(i=e)&&void 0!==i?i:(0,I.dz)(this.$element()),this._$centerSection.css({margin:"0 auto",float:"none"});var a=(0,se.l)(this._$beforeSection.get(0)),r=(0,se.l)(this._$afterSection.get(0));this._alignCenterSection(a,r,e);var n=this._$toolbarItemsContainer.find(".".concat(fa)).eq(0),s=n.parent();if(n.length){var o=a.width?a.width:n.position().left,l=s.hasClass(Ps)?0:o,d=s.hasClass(Dh)?0:r.width,u=0;s.children().not(".".concat(fa)).each(function(){u+=(0,I.Y_)(this)});var c=Math.max(e-u-l-d,0);if(s.hasClass(Ps))this._alignSection(this._$beforeSection,c);else{var _=(0,I.Y_)(n)-(0,I.dz)(n);n.css("maxWidth",c-_)}}}_alignCenterSection(e,i,a){this._alignSection(this._$centerSection,a-e.width-i.width);var r=this.option("rtlEnabled"),n=r?i:e,s=r?e:i,o=(0,se.l)(this._$centerSection.get(0));(n.right>o.left||o.right>s.left)&&this._$centerSection.css({marginLeft:n.width,marginRight:s.width,float:n.width>s.width?"none":"right"})}_alignSection(e,i){var r=e.find(".".concat(fa)).toArray();i-=this._getCurrentLabelsPaddings(r);var n=this._getCurrentLabelsWidth(r),s=Math.abs(n-i);i<n?(r=r.reverse(),this._alignSectionLabels(r,s,!1)):this._alignSectionLabels(r,s,!0)}_alignSectionLabels(e,i,a){for(var r=function(u){return(0,se.l)(u).width},n=0;n<e.length;n++){var s=(0,p.Z)(e[n]),o=Math.ceil(r(e[n]));a&&s.css("maxWidth","inherit");var d=Math.ceil(a?r(e[n]):o);if(!(d<i)){s.css("maxWidth",a?o+i:o-i);break}i-=d,s.css("maxWidth",a?d:0)}}_applyCompactMode(){var e=this.$element();e.removeClass(Oh),this.option("compactMode")&&this._getSummaryItemsWidth(this.itemElements(),!0)>(0,I.dz)(e)&&e.addClass(Oh)}_getCurrentLabelsWidth(e){var i=0;return e.forEach(function(a,r){i+=(0,I.Y_)(a)}),i}_getCurrentLabelsPaddings(e){var i=0;return e.forEach(function(a,r){i+=(0,I.Y_)(a)-(0,I.dz)(a)}),i}_renderItem(e,i,a,r){var n,s,o=null!==(n=i.location)&&void 0!==n?n:"center",l=a??this["_$".concat(o,"Section")],d=!!(null!==(s=i.text)&&void 0!==s?s:i.html),u=super._renderItem(e,i,l,r);return u.toggleClass("dx-toolbar-button",!d).toggleClass(fa,d).addClass(i.cssClass),u}_renderGroupedItems(){(0,y.S6)(this.option("items"),(e,i)=>{var a,r=i.items,n=(0,p.Z)("<div>").addClass("dx-toolbar-group"),s=null!==(a=i.location)&&void 0!==a?a:"center";!r||!r.length||((0,y.S6)(r,(o,l)=>{this._renderItem(o,l,n,null)}),this._$toolbarItemsContainer.find(".dx-toolbar-".concat(s)).append(n))})}_renderItems(e){this.option("grouped")&&e.length&&e[0].items?this._renderGroupedItems():super._renderItems(e)}_getToolbarItems(){var e;return null!==(e=this.option("items"))&&void 0!==e?e:[]}_renderContentImpl(){var e=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",0===e.length),this._renderItems(this._renderedItemsCount?e.slice(this._renderedItemsCount):e),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(e){e&&this._arrangeItems()}_isVisible(){return(0,I.dz)(this.$element())>0&&(0,I.Cr)(this.$element())>0}_getIndexByItem(e){return this._getToolbarItems().indexOf(e)}_itemOptionChanged(e,i,a){super._itemOptionChanged.apply(this,[e,i,a]),this._arrangeItems()}_optionChanged(e){var{name:i}=e;switch(i){case"width":super._optionChanged.apply(this,arguments),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged.apply(this,arguments)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){(0,oe.x2)()&&Promise.all([(()=>new Promise(e=>{var i=()=>{var r=!0;return this.$element().parents().each((n,s)=>{if(ce.Z.isAnimating((0,p.Z)(s)))return r=!1,!1}),r&&e(),r},a=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout(()=>i()||a(),15)};a()}))(),(()=>{var e=this.$element().find(".".concat(fa)),i=[];return e.each((a,r)=>{var n=(0,p.Z)(r).text(),s=(0,p.Z)(r).css("fontWeight");i.push((0,oe.Ih)(n,s))}),Promise.all(i)})()]).then(()=>{this._dimensionChanged()})}}(0,J.Z)("dxToolbarBase",Bh);const rw=Bh;var sw=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"];function Dr(t,e){var i;if(t){var a=t._findItemElementByItem(e);if(a.length){var r=t._getItemData(a),n=!!(null!==(i=r.options)&&void 0!==i&&i.disabled||r.disabled||t.option("disabled")),{widget:s}=r;if(s&&-1!==sw.indexOf(s)){var o=a.find(s.toLowerCase().replace("dx",".dx-"));if(o.length){var l,d,u=function(t){var e=t.data&&t.data(),i=e&&e.dxComponents,a=i&&i[0];return a&&e[a]}(o);if(!u)return;var c,h=null===(l=u._focusTarget)||void 0===l?void 0:l.call(u);h="dxDropDownButton"===s?h&&h.find(".".concat("dx-buttongroup")):null!==(c=h)&&void 0!==c?c:(0,p.Z)(u.element());var _=null===(d=r.options)||void 0===d?void 0:d.tabIndex;h.attr("tabIndex",n?-1:_??0)}}}}}class dw{constructor(e){this._toolbar=e}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){var e;return null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[]}_getItemsWidth(){return this._toolbar._getSummaryItemsWidth(this._toolbar.itemElements(),!0)}_arrangeItems(){var e=this._toolbar._$toolbarItemsContainer.find(".".concat("dx-toolbar-label")).eq(0);if(e.length){var i=(0,I.dz)(this._toolbar.$element()),a=(0,I.Y_)(e)-(0,I.dz)(e);e.css("maxWidth",i-a)}}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}var Be=L(4490),uw=L(1062),Or="dxswipestart",Rr="dxswipe",ma="dxswipeend",hw={defaultItemSizeFunc:function(){return(0,I.dz)(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(t){return((0,D.a0)(t).x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,t)},isFastSwipe:function(t){var e=(0,D.a0)(t);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.x-this._tickData.x)>=e.time-this._tickData.time}},cw={defaultItemSizeFunc:function(){return(0,I.Cr)(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(t){return((0,D.a0)(t).y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,t)},isFastSwipe:function(t){var e=(0,D.a0)(t);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.y-this._tickData.y)>=e.time-this._tickData.time}},pw={horizontal:hw,vertical:cw},_w=uw.Z.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(t){this.callBase(t),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return pw[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(t){this._tickData=(0,D.a0)(t)},_start:function(t){this._savedEventData=(0,D.a0)(t),(t=this._fireEvent(Or,t)).cancel||(this._maxLeftOffset=t.maxLeftOffset,this._maxRightOffset=t.maxRightOffset,this._maxTopOffset=t.maxTopOffset,this._maxBottomOffset=t.maxBottomOffset)},_move:function(t){var e=this._getStrategy(),i=(0,D.a0)(t),a=e.calcOffsetRatio.call(this,t);a=this._fitOffset(a,this.elastic),i.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=i),this._fireEvent(Rr,t,{offset:a}),!1!==t.cancelable&&t.preventDefault()},_end:function(t){var e=this._getStrategy(),i=e.calcOffsetRatio.call(this,t),a=e.isFastSwipe.call(this,t),r=i,n=this._calcTargetOffset(i,a);r=this._fitOffset(r,this.elastic),n=this._fitOffset(n,!1),this._fireEvent(ma,t,{offset:r,targetOffset:n})},_fitOffset:function(t,e){var a=this._getStrategy().getBounds.call(this);return t<-a[0]?e?(-2*a[0]+t)/3:-a[0]:t>a[1]?e?(2*a[1]+t)/3:a[1]:t},_calcTargetOffset:function(t,e){var i;return e?(i=Math.ceil(Math.abs(t)),t<0&&(i=-i)):i=Math.round(t),i}});(0,Gu.Z)({emitter:_w,events:[Or,Rr,ma]});var Lh="dx-list-item-badge-container",Fs="dx-list-item-chevron-container",mw=Ni.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge:function(t){if(this._$element.children("."+Lh).remove(),t){var e=(0,p.Z)("<div>").addClass(Lh).append((0,p.Z)("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(t)),i=this._$element.children("."+Fs).first();i.length>0?e.insertBefore(i):e.appendTo(this._$element)}},_renderShowChevron:function(t){if(this._$element.children("."+Fs).remove(),t){var e=(0,p.Z)("<div>").addClass(Fs),i=(0,p.Z)("<div>").addClass("dx-list-item-chevron");e.append(i).appendTo(this._$element)}}});const Cw=mw;var Vh="dx-scrollview-pull-down-loading",Ms="dx-scrollview-pull-down-ready",Ew=Cs.inherit({_init:function(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$refreshingText=t._$refreshingText,this._$scrollViewContent=(0,p.Z)(t.content()),this._$container=(0,p.Z)(t.container()),this._initCallbacks()},_initCallbacks:function(){this.pullDownCallbacks=(0,ge.Z)(),this.releaseCallbacks=(0,ge.Z)(),this.reachBottomCallbacks=(0,ge.Z)()},render:function(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown:function(){var t=(0,p.Z)("<div>").addClass("dx-scrollview-pull-down-image"),e=(0,p.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),i=new it.Z((0,p.Z)("<div>")).$element(),a=this._$pullDownText=(0,p.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,p.Z)("<div>").text(this.option("pullingDownText")).appendTo(a),this._$pulledDownText=(0,p.Z)("<div>").text(this.option("pulledDownText")).appendTo(a),this._$refreshingText=(0,p.Z)("<div>").text(this.option("refreshingText")).appendTo(a),this._$pullDown.empty().append(t).append(e.append(i)).append(a)},_releaseState:function(){this._state=0,this._refreshPullDownText()},_refreshPullDownText:function(){var t=this;(0,y.S6)([{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}],function(i,a){a.element[t._state===a.visibleState?"addClass":"removeClass"]("dx-scrollview-pull-down-text-visible")})},update:function(){this.callBase(),this._setTopPocketOffset()},_updateDimensions:function(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections:function(){var t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},_setTopPocketOffset:function(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd:function(){this.callBase(),this._complete()},handleStop:function(){this.callBase(),this._complete()},_complete:function(){1===this._state&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout(function(){this._pullDownRefreshing()}.bind(this),400))},_setPullDownOffset:function(t){(0,le.pB)(this._$topPocket,{top:t}),(0,le.pB)(this._$scrollViewContent,{top:t})},handleScroll:function(t){if(this.callBase(t),2!==this._state){var e=this.location().top,i=(this._location||0)-e;this._location=e,this._isPullDown()?this._pullDownReady():i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isPullDown:function(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom:function(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom:function(){3!==this._state&&(this._state=3,this.reachBottomCallbacks.fire())},_pullDownReady:function(){1!==this._state&&(this._state=1,this._$pullDown.addClass(Ms),this._refreshPullDownText())},_stateReleased:function(){0!==this._state&&(this._$pullDown.removeClass(Vh).removeClass(Ms),this._releaseState())},_pullDownRefreshing:function(){2!==this._state&&(this._state=2,this._$pullDown.addClass(Vh).removeClass(Ms),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable:function(t){t&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=t},reachBottomEnable:function(t){this._reachBottomEnabled=t},pendingRelease:function(){this._state=1},release:function(){var t=new b.BH;return this._updateDimensions(),clearTimeout(this._releaseTimeout),3===this._state&&(this._state=0),this._releaseTimeout=setTimeout(function(){this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()}.bind(this),400),t.promise()},dispose:function(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}});const Iw=Ew;var Ph="dx-scrollview-pull-down-loading",Rw=Cs.inherit({_init:function(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$scrollViewContent=(0,p.Z)(t.content()),this._$container=(0,p.Z)(t.container()),this._initCallbacks(),this._location=0},_initCallbacks:function(){this.pullDownCallbacks=(0,ge.Z)(),this.releaseCallbacks=(0,ge.Z)(),this.reachBottomCallbacks=(0,ge.Z)()},render:function(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown:function(){var t=(0,p.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),e=new it.Z((0,p.Z)("<div>")).$element();this._$icon=(0,p.Z)("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(t.append(e))},_releaseState:function(){this._state=0,this._releasePullDown(),this._updateDimensions()},_releasePullDown:function(){this._$pullDown.css({opacity:0})},_updateDimensions:function(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections:function(){var t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},handleInit:function(t){this.callBase(t),0===this._state&&0===this._location&&(this._startClientY=(0,D.a0)(t.originalEvent).y,this._state=4)},handleMove:function(t){this.callBase(t),this._deltaY=(0,D.a0)(t.originalEvent).y-this._startClientY,4===this._state&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),5===this._state&&(t.preventDefault(),this._movePullDown())},_movePullDown:function(){var t=this._getPullDownHeight(),e=Math.min(3*t,this._deltaY+this._getPullDownStartPosition()),i=180*e/t/3;this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",e<t),(0,le.pB)(this._$pullDown,{top:e}),this._$icon.css({transform:"rotate("+i+"deg)"})},_isPullDown:function(){return this._pullDownEnabled&&5===this._state&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight:function(){return Math.round(.05*(0,I.zp)(this._$element))},_getPullDownStartPosition:function(){return-Math.round(1.5*(0,I.zp)(this._$pullDown))},handleEnd:function(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop:function(){this._complete()},_complete:function(){(4===this._state||5===this._state)&&this._releaseState()},handleScroll:function(t){if(this.callBase(t),2!==this._state){var e=this.location().top,i=this._location-e;this._location=e,i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isReachBottom:function(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom:function(){this.reachBottomCallbacks.fire()},_stateReleased:function(){0!==this._state&&(this._$pullDown.removeClass(Ph),this._releaseState())},_pullDownRefreshing:function(){this._state=2,this._pullDownRefreshHandler()},_pullDownRefreshHandler:function(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown:function(){this._$pullDown.addClass(Ph),(0,le.pB)(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable:function(t){this._$topPocket.toggle(t),this._pullDownEnabled=t},reachBottomEnable:function(t){this._reachBottomEnabled=t},pendingRelease:function(){this._state=1},release:function(){var t=new b.BH;return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout(function(){this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()}.bind(this),800),t.promise()},dispose:function(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}});const Bw=Rw;var Lw=Math,Mh="dx-scrollview-pull-down-loading",Zs="dx-scrollview-pull-down-ready",kw=Iu.inherit({ctor:function(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState:function(){this._state=0,this._refreshPullDownText()},_refreshPullDownText:function(){var t=this;(0,y.S6)([{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}],function(i,a){a.element[t._state===a.visibleState?"addClass":"removeClass"]("dx-scrollview-pull-down-text-visible")})},_initCallbacks:function(){this.pullDownCallbacks=(0,ge.Z)(),this.releaseCallbacks=(0,ge.Z)(),this.reachBottomCallbacks=(0,ge.Z)()},_updateBounds:function(){if("horizontal"!==this._direction){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;var e=this._$container.get(0),i=this._$content.get(0);this._bottomBoundary=Math.max(i.clientHeight-this._bottomPocketSize-e.clientHeight,0)}this.callBase()},_updateScrollbar:function(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent:function(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():0!==this._state&&this._stateReleased()},_moveScrollbar:function(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown:function(){return this._pullDownEnabled&&this._location>=0},_isReachBottom:function(){var t=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(t.scrollTop))<=1},_scrollComplete:function(){this._inBounds()&&1===this._state?this._pullDownRefreshing():this._inBounds()&&3===this._state?this._reachBottomLoading():this.callBase()},_reachBottomReady:function(){3!==this._state&&(this._state=3,this._minOffset=this._getMinOffset())},_getMaxOffset:function(){return-this._topPocketSize},_getMinOffset:function(){return Lw.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading:function(){this.reachBottomCallbacks.fire()},_pullDownReady:function(){1!==this._state&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass(Zs),this._refreshPullDownText())},_stateReleased:function(){0!==this._state&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass(Mh).removeClass(Zs),this.releaseCallbacks.fire())},_pullDownRefreshing:function(){2!==this._state&&(this._state=2,this._$pullDown.addClass(Mh).removeClass(Zs),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler:function(){return 0===this._state&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=(0,E.Wi)(this._release.bind(this)),this._releaseTask.promise},_release:function(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler:function(t){this._reachBottomEnabled!==t&&(this._reachBottomEnabled=t,this._updateBounds())},_pullDownEnablingHandler:function(t){this._pullDownEnabled!==t&&(this._pullDownEnabled=t,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange:function(){this._location-=(0,I.Cr)(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler:function(){this._state=1},dispose:function(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),Nw=Tu.inherit({_init:function(t){this.callBase(t),this._$pullDown=t._$pullDown,this._$topPocket=t._$topPocket,this._$bottomPocket=t._$bottomPocket,this._initCallbacks()},_initCallbacks:function(){this.pullDownCallbacks=(0,ge.Z)(),this.releaseCallbacks=(0,ge.Z)(),this.reachBottomCallbacks=(0,ge.Z)()},render:function(){this._renderPullDown(),this.callBase()},_renderPullDown:function(){var t=(0,p.Z)("<div>").addClass("dx-scrollview-pull-down-image"),e=(0,p.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),i=new it.Z((0,p.Z)("<div>")).$element(),a=this._$pullDownText=(0,p.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,p.Z)("<div>").text(this.option("pullingDownText")).appendTo(a),this._$pulledDownText=(0,p.Z)("<div>").text(this.option("pulledDownText")).appendTo(a),this._$refreshingText=(0,p.Z)("<div>").text(this.option("refreshingText")).appendTo(a),this._$pullDown.empty().append(t).append(e.append(i)).append(a)},pullDownEnable:function(t){this._eventHandler("pullDownEnabling",t)},reachBottomEnable:function(t){this._eventHandler("reachBottomEnabling",t)},_createScroller:function(t){var e=this,i=e._scrollers[t]=new kw(e._scrollerOptions(t));i.pullDownCallbacks.add(function(){e.pullDownCallbacks.fire()}),i.releaseCallbacks.add(function(){e.releaseCallbacks.fire()}),i.reachBottomCallbacks.add(function(){e.reachBottomCallbacks.fire()})},_scrollerOptions:function(t){return(0,C.l)(this.callBase(t),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease:function(){this._eventHandler("pendingRelease")},release:function(){return this._eventHandler("release").done(this._updateAction)},location:function(){var t=this.callBase();return t.top+=(0,I.Cr)(this._$topPocket),t},dispose:function(){(0,y.S6)(this._scrollers,function(){this.dispose()}),this.callBase()}}),di="dx-scrollview",Zw=di+"-content",$w=di+"-top-pocket",zw=di+"-bottom-pocket",Ww=di+"-pull-down",Ws=di+"-scrollbottom",Kw=Ws+"-indicator",Gw=Ws+"-text",Uw=di+"-loadpanel",Yw={pullDown:Iw,swipeDown:Bw,simulated:Nw},jw=!(0,Z.Ym)(),qw={finishLoading:E.ZT,release:E.ZT,refresh:E.ZT,scrollOffset:()=>({top:0,left:0}),_optionChanged:function(t){if("onUpdated"!==t.name)return this.callBase.apply(this,arguments)}},kh=_t.inherit(jw?qw:{_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{pullingDownText:A.Z.format("dxScrollView-pullingDownText"),pulledDownText:A.Z.format("dxScrollView-pulledDownText"),refreshingText:A.Z.format("dxScrollView-refreshingText"),reachBottomText:A.Z.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"android"===K.Z.real().platform},options:{refreshStrategy:"swipeDown"}},{device:function(){return(0,oe.x2)()},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init:function(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup:function(){this.callBase(),this.$element().addClass(di),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent:function(){var t=(0,p.Z)("<div>").addClass(Zw);this._$content.wrapInner(t)},_initTopPocket:function(){var t=this._$topPocket=(0,p.Z)("<div>").addClass($w),e=this._$pullDown=(0,p.Z)("<div>").addClass(Ww);t.append(e),this._$content.prepend(t)},_initBottomPocket:function(){var t=this._$bottomPocket=(0,p.Z)("<div>").addClass(zw),e=this._$reachBottom=(0,p.Z)("<div>").addClass(Ws),i=(0,p.Z)("<div>").addClass(Kw),a=new it.Z((0,p.Z)("<div>")).$element(),r=this._$reachBottomText=(0,p.Z)("<div>").addClass(Gw);this._updateReachBottomText(),e.append(i.append(a)).append(r),t.append(e),this._$content.append(t)},_initLoadPanel:function(){var t=(0,p.Z)("<div>").addClass(Uw).appendTo(this.$element()),e={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(t,Od,e)},_updateReachBottomText:function(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy:function(){var t=this.option("useNative")?this.option("refreshStrategy"):"simulated";this._strategy=new(0,Yw[t])(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions:function(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState:function(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on:function(t){var e=this.callBase.apply(this,arguments);return("pullDown"===t||"reachBottom"===t)&&this._tryRefreshPocketState(),e},_pullDownEnable:function(t){if(0===arguments.length)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(t),this._strategy.pullDownEnable(t),this._pullDownEnabled=t)},_reachBottomEnable:function(t){if(0===arguments.length)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(t),this._strategy.reachBottomEnable(t),this._reachBottomEnabled=t)},_pullDownHandler:function(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator:function(t){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=t},_pullDownLoading:function(){this.startLoading(),this._pullDownAction()},_reachBottomHandler:function(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading:function(){this.startLoading(),this._reachBottomAction()},_releaseHandler:function(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged:function(t){switch(t.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(t)}},content:function(){return(0,W.u)(this._$content.children().eq(1))},release:function(t){return void 0!==t&&this.toggleLoading(!t),this._strategy.release()},toggleLoading:function(t){this._reachBottomEnable(t)},refresh:function(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading:function(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading:function(){this._loadPanel.hide(),this._unlock()},_dispose:function(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});(0,J.Z)("dxScrollView",kh);const Nh=kh;var Pr="__dx_key__";const Ks=li.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{repaintChangesOnly:!1})},ctor:function(){var t;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=e=>{this._dataController.getDataSource()&&!this._dataController.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&e.storeLoadOptions&&(e.storeLoadOptions.skip+=this._correctionIndex)},null===(t=this._dataController)||void 0===t||t.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload:function(){this._correctionIndex=0},_init:function(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey:function(t){var e=(0,p.Z)(),i=this.key();return this.itemElements().each((a,r)=>{var n=(0,p.Z)(r),s=this._getItemData(n);if(i?(0,lt.OI)(i,this.keyOf(s),t):this._isItemEquals(s,t))return e=n,!1}),e},_dataSourceChangedHandler:function(t,e){null!=e&&e.changes?this._modifyByChanges(e.changes):(this.callBase(t,e),this._refreshItemsCache())},_isItemEquals:function(t,e){t&&t[Pr]&&(t=t.data);try{return JSON.stringify(t)===JSON.stringify(e)}catch{return t===e}},_isItemStrictEquals:function(t,e){return this._isItemEquals(t,e)},_shouldAddNewGroup:function(t,e){var i=!1;return this.option("grouped")&&(t.length||(i=!0),(0,y.S6)(t,(a,r)=>{"insert"===r.type&&(i=!0,(0,y.S6)(e,(n,s)=>{if(void 0!==r.data.key&&r.data.key===s.key)return i=!1,!1}))})),i},_partialRefresh:function(){if(this.option("repaintChangesOnly")){var t=lu(this._itemsCache,this._editStrategy.itemsGetter(),e=>e&&void 0!==e[Pr]?e[Pr]:this.keyOf(e),this._isItemStrictEquals.bind(this));if(t&&this._itemsCache.length&&!this._shouldAddNewGroup(t,this._itemsCache))return this._modifyByChanges(t,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache:function(){if(this.option("repaintChangesOnly")){var t=this._editStrategy.itemsGetter();try{this._itemsCache=(0,C.l)(!0,[],t),this.key()||(this._itemsCache=this._itemsCache.map((e,i)=>({[Pr]:t[i],data:e})))}catch{this._itemsCache=(0,C.l)([],t)}}},_dispose:function(){this._dataController.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange:function(t,e,i,a){if(a)this._renderItem(i.index,i.data,null,this._findItemElementByKey(i.key));else{var r=e[(0,Fe.qk)(t,e,i.key)];r&&(0,Fe.Vx)(t,e,i.key,i.data).done(()=>{this._renderItem(e.indexOf(r),r,null,this._findItemElementByKey(i.key))})}},_insertByChange:function(t,e,i,a){(0,b.gx)(a||(0,Fe.$T)(t,e,i.data,i.index)).done(()=>{var r;this._beforeItemElementInserted(i);var n=this._getItemContainer(i.data);this._renderItem(null!==(r=i.index)&&void 0!==r?r:e.length,i.data,n),this._afterItemElementInserted(),this._correctionIndex++})},_getItemContainer:function(t){return this._itemContainer()},_updateSelectionAfterRemoveByChange:function(t){var e=this.option("selectedIndex");e>t?this.option("selectedIndex",e-1):e===t&&1===this.option("selectedItems").length?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted:function(t){var e=this.option("selectedIndex");t.index<=e&&this.option("selectedIndex",e+1)},_afterItemElementInserted:E.ZT,_removeByChange:function(t,e,i,a){var r=a?i.index:(0,Fe.qk)(t,e,i.key);if(a?i.oldItem:e[r]){var s=this._findItemElementByKey(i.key),o=this._extendActionArgs(s);this._waitDeletingPrepare(s).done(()=>{a?(this._updateIndicesAfterIndex(r-1),this._afterItemElementDeleted(s,o),this._updateSelectionAfterRemoveByChange(r)):(this._deleteItemElementByIndex(r),this._afterItemElementDeleted(s,o))}),this._correctionIndex--}},_modifyByChanges:function(t,e){var i=this._editStrategy.itemsGetter(),a={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},r=this._dataController,n=r.paginate(),s=r.group();(n||s)&&(t=t.filter(o=>"insert"!==o.type||void 0!==o.index)),t.forEach(o=>this["_".concat(o.type,"ByChange")](a,i,o,e)),this._renderedItemsCount=i.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer:function(t,e,i){var a=t.children(this._itemSelector()).get(i);Y.Z.insertElement(t.get(0),e.get(0),a)},_optionChanged:function(t){switch(t.name){case"items":this._partialRefresh(t.value)||this.callBase(t);break;case"dataSource":(!this.option("repaintChangesOnly")||!t.value)&&this.option("items",[]),this.callBase(t);break;case"repaintChangesOnly":break;default:this.callBase(t)}}}),Hh={_getSpecificDataSourceOption:function(){var t=this.option("dataSource"),e=!1,i={};return this._getGroupedOption()&&(t=>Array.isArray(t)&&t.every(e=>2===Object.keys(e).length&&"key"in e&&"items"in e&&Array.isArray(e.items)))(t)&&(i=t.reduce((a,r)=>{var n=r.items.map(s=>((0,v.Kn)(s)||(s={text:s},e=!0),"key"in s||(s.key=r.key),s));return a.concat(n)},[]),t={store:{type:"array",data:i},group:{selector:"key",keepInitialKeyOrder:!0}},e&&(t.searchExpr="text")),t}};function Zh(t){return t?Number(t.replace("px","")):0}function Jw(t,e){var i=function ba(t){var e,i;return t&&(0,Z.Ym)()?null===(e=(i=(0,Z.Jj)()).getComputedStyle)||void 0===e?void 0:e.call(i,t):null}(t);return i?Zh(i["margin".concat((0,Pe.MI)(e))]):0}var Fr="dx-list-item",ey="."+Fr,$i="dx-list-group",Gs="dx-list-group-header",Mr="dx-list-group-body",$h="dx-list-group-collapsed",zh="dx-wrap-item-text",dy=(0,Q.vb)("items"),Us=Ks.inherit({_activeStateUnit:[ey,".dx-list-select-all"].join(","),_supportedKeys:function(){var t=this,e=function(a){var s,o,l,r=i(a);r.is(t.option("focusedElement"))&&(o=a,l=(s=r).position().top,"prev"===o&&(l=s.position().top-(0,I.Cr)(t.$element())+(0,I.zp)(s)),t.scrollTo(l),r=i(a)),t.option("focusedElement",(0,W.u)(r)),t.scrollToItem(r)};function i(a){var r=t.scrollTop(),n=(0,I.Cr)(t.$element()),s=(0,p.Z)(t.option("focusedElement")),o=!0;if(!s.length)return(0,p.Z)();for(;o;){var l=s[a]();if(!l.length)break;var d=l.position().top+(0,I.zp)(l)/2;(o=d<n+r&&d>r)&&(s=l)}return s}return(0,C.l)(this.callBase(),{leftArrow:E.ZT,rightArrow:E.ZT,pageUp:function(){return e("prev"),!1},pageDown:function(){return e("next"),!1}})},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:A.Z.format("dxList-pullingDownText"),pulledDownText:A.Z.format("dxList-pulledDownText"),refreshingText:A.Z.format("dxList-refreshingText"),pageLoadingText:A.Z.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:A.Z.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:function(t){return t?t.showChevron:void 0},badgeExpr:function(t){return t?t.badge:void 0}})},_defaultOptionsRules:function(){var t=(0,oe.Vk)();return this.callBase().concat(Du(),[{device:function(){return!Ue.nativeScrolling},options:{useNativeScrolling:!1}},{device:function(e){return!Ue.nativeScrolling&&!K.Z.isSimulator()&&"desktop"===K.Z.real().deviceType&&"generic"===e.platform},options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:function(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,oe.x2)(t)},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:"",useInkRipple:!0}}])},_visibilityChanged:function(t){t&&this._updateLoadingState(!0)},_itemClass:function(){return Fr},_itemDataKey:function(){return"dxListItemData"},_itemContainer:function(){return this._$container},_saveSelectionChangeEvent:function(t){this._selectionChangeEventInstance=t},_getSelectionChangeEvent:function(){return this._selectionChangeEventInstance},_refreshItemElements:function(){this._itemElementsCache=this.option("grouped")?this._itemContainer().children("."+$i).children("."+Mr).children(this._itemSelector()):this._itemContainer().children(this._itemSelector())},_modifyByChanges:function(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem:function(t,e){return this.callBase(t,e).done(function(){this._refreshItemElements()})},deleteItem:function(t){return this.callBase(t).done(function(){this._refreshItemElements()})},_itemElements:function(){return this._itemElementsCache},_itemSelectHandler:function(t){if("single"!==this.option("selectionMode")||!this.isItemSelected(t.currentTarget))return this.callBase(t)},_allowDynamicItemsAppend:function(){return!0},_init:function(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._initScrollView(),this._feedbackShowTimeout=70,this._createGroupRenderAction()},_scrollBottomMode:function(){return"scrollBottom"===this.option("pageLoadMode")},_nextButtonMode:function(){return"nextButton"===this.option("pageLoadMode")},_dataSourceOptions:function(){var t=this._scrollBottomMode(),e=this._nextButtonMode();return(0,C.l)(this.callBase(),{paginate:(0,E.IS)(t||e,!0)})},_getGroupedOption:function(){return this.option("grouped")},_getGroupContainerByIndex:function(t){return this._itemContainer().find(".".concat($i)).eq(t).find(".".concat(Mr))},_dataSourceFromUrlLoadMode:function(){return"raw"},_initScrollView:function(){var t=this.option("scrollingEnabled"),e=t&&this.option("pullRefreshEnabled"),i=t&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),function uy(){return Nh}(),{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!t,onScroll:this._scrollHandler.bind(this),onPullDown:e?this._pullDownHandler.bind(this):null,onReachBottom:i?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=(0,p.Z)(this._scrollView.content()),this.option("wrapItemText")&&this._$container.addClass(zh),this._createScrollViewActions()},_createScrollViewActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler:function(t){this._scrollAction&&this._scrollAction(t)},_initTemplates:function(){this._templateManager.addDefaultTemplates({group:new oi(function(t,e){(0,v.PO)(e)?e.key&&t.text(e.key):t.text(String(e))},["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate:function(t,e){if(this.callBase(t,e),t.icon){var i=(0,vt.H)(t.icon).addClass("dx-list-item-icon"),a=(0,p.Z)("<div>").addClass("dx-list-item-icon-container");a.append(i),e.prepend(a)}},_getBindableFields:function(){return["text","html","icon"]},_updateLoadingState:function(t){var e=this._dataController,i=this._scrollBottomMode()&&t&&!e.isLoading()&&!this._isLastPage();this._shouldContinueLoading(i)?this._infiniteDataLoading():(this._scrollView.release(!i&&!e.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton:function(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted:function(t){return(0,v.$K)(t)&&(this._isFirstLoadCompleted=t),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler:function(t){this._loadIndicationSuppressed()||(t&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout(function(){var a;!this._itemElements().length&&!this._isDataSourceFirstLoadCompleted()||null===(a=this._scrollView)||void 0===a||a.startLoading()}.bind(this)):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),t||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler:function(){!this._shouldAppendItems()&&(0,Z.Ym)()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent:function(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff:function(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed:function(t){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=t},_scrollViewIsFull:function(){var t=this._scrollView;return!t||(0,I.Cr)(t.content())>(0,I.Cr)(t.container())},_pullDownHandler:function(t){this._pullRefreshAction(t);var e=this._dataController;e.getDataSource()&&!e.isLoading()?(this._clearSelectedItems(),e.pageIndex(0),e.reload()):this._updateLoadingState()},_shouldContinueLoading:function(t){var e,i,a=(0,I.Cr)(this._scrollView.content())-(0,I.Cr)(this._scrollView.container())<(null!==(e=null===(i=this._scrollView.scrollOffset())||void 0===i?void 0:i.top)&&void 0!==e?e:0);return t&&(!this._scrollViewIsFull()||a)},_infiniteDataLoading:function(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout(()=>{this._loadNextPage()}))},_scrollBottomHandler:function(t){this._pageLoadingAction(t),this._dataController.isLoading()||this._isLastPage()?this._updateLoadingState():this._loadNextPage()},_renderItems:function(t){this.option("grouped")?((0,y.S6)(t,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),(0,oe.x2)()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent:function(){var t=(0,D.V4)(ie.u,this.NAME),e="."+Gs,i=this.$element(),a=this.option("collapsibleGroups");i.toggleClass("dx-list-collapsible-groups",a),S.Z.off(i,t,e),a&&S.Z.on(i,t,e,function(r){this._createAction(function(n){var s=(0,p.Z)(n.event.currentTarget).parent();this._collapseGroupHandler(s),this.option("focusStateEnabled")&&this.option("focusedElement",(0,W.u)(s.find("."+Fr).eq(0)))}.bind(this),{validatingTargetName:"element"})({event:r})}.bind(this))},_collapseGroupHandler:function(t,e){var i=new b.BH;if(t.hasClass($h)===e)return i.resolve();var a=t.children("."+Mr),r=(0,I.zp)(a),n=0;return 0===r&&((0,I.QQ)(a,"auto"),n=(0,I.zp)(a)),t.toggleClass($h,e),ce.Z.animate(a,{type:"custom",from:{height:r},to:{height:n},duration:200,complete:function(){this.updateDimensions(),this._updateLoadingState(!0),i.resolve()}.bind(this)}),i.promise()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup:function(){this._itemElementsCache=(0,p.Z)(),this.$element().addClass("dx-list"),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria({role:"group",roledescription:"list"},this.$element()),this._setListAria()},_setListAria(){var{items:t}=this.option();this.setAria(null!=t&&t.length?{role:"listbox",label:"Items"}:{role:void 0,label:void 0})},_focusTarget:function(){return this._itemContainer()},_renderInkRipple:function(){this._inkRipple=(0,ys.sY)()},_toggleActiveState:function(t,e,i){this.callBase.apply(this,arguments);var a=this;if(this._inkRipple){var r={element:t,event:i};e?(0,oe.x2)()?this._inkRippleTimer=setTimeout(function(){a._inkRipple.showWave(r)},35):a._inkRipple.showWave(r):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(r))}},_postprocessRenderItem:function(t){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent((0,p.Z)(t.itemElement))},_attachSwipeEvent:function(t){var e=(0,D.V4)(ma,this.NAME);S.Z.on(t,e,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler:function(t){this._itemDXEventHandler(t,"onItemSwipe",{direction:t.offset<0?"left":"right"})},_nextButtonHandler:function(t){this._pageLoadingAction(t);var e=this._dataController;e.getDataSource()&&!e.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup:function(t,e){var i=(0,p.Z)("<div>").addClass($i).appendTo(this._itemContainer()),a="dx-".concat((new Ee.Z).toString());this.setAria({role:"group",labelledby:a},i);var n=(0,p.Z)("<div>").addClass(Gs).attr("id",a).appendTo(i),s=this.option("groupTemplate"),o=this._getTemplate(e.template||s,e,t,n),l={index:t,itemData:e,container:(0,W.u)(n)};this._createItemByTemplate(o,l),(0,oe.x2)()&&(0,p.Z)("<div>").addClass("dx-list-group-header-indicator").prependTo(n),this._renderingGroupIndex=t;var d=(0,p.Z)("<div>").addClass(Mr).appendTo(i);(0,y.S6)(dy(e)||[],function(u,h){this._renderItem({group:t,item:u},h,d)}.bind(this)),this._groupRenderAction({groupElement:(0,W.u)(i),groupIndex:t,groupData:e})},downInkRippleHandler:function(t){this._toggleActiveState((0,p.Z)(t.currentTarget),!0,t)},upInkRippleHandler:function(t){this._toggleActiveState((0,p.Z)(t.currentTarget),!1)},attachGroupHeaderInkRippleEvents:function(){var t="."+Gs,e=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);var i=[e,"dxpointerdown",t,this._downInkRippleHandler],a=[e,"dxpointerup dxpointerout",t,this._upInkRippleHandler];S.Z.off(...i),S.Z.on(...i),S.Z.off(...a),S.Z.on(...a)},_createGroupRenderAction:function(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean:function(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose:function(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState:function(t){this.callBase(t),this._scrollView.option("disabled",t||!this.option("scrollingEnabled"))},_toggleNextButton:function(t){var e=this._dataController,i=this._getNextButton();this.$element().toggleClass("dx-has-next",t),t&&e.isLoaded()&&i.appendTo(this._itemContainer()),t||i.detach()},_getNextButton:function(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton:function(){var t=(0,p.Z)("<div>").addClass("dx-list-next-button"),e=(0,p.Z)("<div>").appendTo(t);return this._createComponent(e,Be.Z,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:(0,oe.x2)()?"default":void 0,integrationOptions:{}}),t},_moveFocus:function(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh:function(){if((0,Z.Ym)()){var t=this._scrollView.scrollTop();this.callBase(),t&&this._scrollView.scrollTo(t)}else this.callBase()},_optionChanged:function(t){switch(t.name){case"pageLoadMode":this._toggleNextButton(t.value),this._initScrollView();break;case"dataSource":this.callBase(t),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(t),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"collapsibleGroups":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"wrapItemText":this._$container.toggleClass(zh,t.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(t),this._scrollView.option(t.name,t.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(t),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(t);break;case"_swipeEnabled":case"selectByClick":break;default:this.callBase(t)}},_extendActionArgs:function(t){if(!this.option("grouped"))return this.callBase(t);var e=t.closest("."+$i),i=e.find("."+Fr);return(0,C.l)(this.callBase(t),{itemIndex:{group:e.index(),item:i.index(t)}})},expandGroup:function(t){var e=new b.BH,i=this._itemContainer().find("."+$i).eq(t);return this._collapseGroupHandler(i,!1).done(function(){e.resolveWith(this)}.bind(this)),e.promise()},collapseGroup:function(t){var e=new b.BH,i=this._itemContainer().find("."+$i).eq(t);return this._collapseGroupHandler(i,!0).done(function(){e.resolveWith(this)}.bind(this)),e},updateDimensions:function(){var t=this,e=new b.BH;return t._scrollView?t._scrollView.update().done(function(){!t._scrollViewIsFull()&&t._updateLoadingState(!0),e.resolveWith(t)}):e.resolveWith(t),e.promise()},reload:function(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint:function(){this.scrollTo(0),this.callBase()},scrollTop:function(){return this._scrollView.scrollOffset().top},clientHeight:function(){return this._scrollView.clientHeight()},scrollHeight:function(){return this._scrollView.scrollHeight()},scrollBy:function(t){this._scrollView.scrollBy(t)},scrollTo:function(t){this._scrollView.scrollTo(t)},scrollToItem:function(t){var e=this._editStrategy.getItemElement(t),i=e?.get(0);this._scrollView.scrollToElement(i,{bottom:Jw(i,"bottom")})},_dimensionChanged:function(){this.updateDimensions()}}).include(Hh);Us.ItemClass=Cw;var Ys="dx-toolbar-menu-action",Gh="dx-toolbar-hidden-button-group",Uh="dx-toolbar-menu-section",Yh="dx-toolbar-menu-last-section";class _y extends Us{_init(){super._init(),this._activeStateUnit=".".concat(Ys,":not(.").concat(Gh,")")}_initMarkup(){this._renderSections(),super._initMarkup(),this._setMenuRole()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){var e=this._itemContainer();(0,y.S6)(["before","center","after","menu"],(i,a)=>{var r="_$".concat(a,"Section");this[r]||(this[r]=(0,p.Z)("<div>").addClass(Uh)),this[r].appendTo(e)})}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_setMenuRole(){this.$element().find(".".concat("dx-scrollview-content")).attr("role","menu")}_updateSections(){var e=this.$element().find(".".concat(Uh));e.removeClass(Yh),e.not(":empty").eq(-1).addClass(Yh)}_renderItem(e,i,a,r){var n,s=null!==(n=i.location)&&void 0!==n?n:"menu",o=this["_$".concat(s,"Section")],l=super._renderItem(e,i,o,r);return this._getItemTemplateName({itemData:i})&&l.addClass("dx-toolbar-menu-custom"),("menu"===s||"dxButton"===i.widget||"dxButtonGroup"===i.widget||i.isAction)&&l.addClass(Ys),"dxButton"===i.widget&&l.addClass("dx-toolbar-hidden-button"),"dxButtonGroup"===i.widget&&l.addClass(Gh),l.addClass(i.cssClass),l}_getItemTemplateName(e){var i=super._getItemTemplateName(e),a=e.itemData;return a&&a.menuItemTemplate||i}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(e,i,a){(0,p.Z)(e.target).closest(".".concat(Ys)).length&&super._itemClickHandler(e,i,a)}_clean(){this._getSections().empty(),super._clean()}}var jh=L(9431),kr=L(5582),vy=L(9704),Dt=L(340),ue=L(2063),Re=L(6050);var Hr="dxResizable",Zr="dx-resizable-handle",$r="dx-resizable-handle-corner",yy=(0,D.V4)(Re.BL,Hr),Ey=(0,D.V4)(Re.pB,Hr),Iy=(0,D.V4)(Re.ut,Hr),Ty={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},qh=Li.Z.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init:function(){this.callBase(),this.$element().addClass("dx-resizable")},_initMarkup:function(){this.callBase(),this._renderHandles()},_render:function(){this.callBase(),this._renderActions()},_renderActions:function(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles:function(){this._handles=[];var t=this.option("handles");if("none"!==t&&t){var e="all"===t?["top","bottom","left","right"]:t.split(" "),i={};(0,y.S6)(e,(a,r)=>{i[r]=!0,this._renderHandle(r)}),i.bottom&&i.right&&this._renderHandle("corner-bottom-right"),i.bottom&&i.left&&this._renderHandle("corner-bottom-left"),i.top&&i.right&&this._renderHandle("corner-top-right"),i.top&&i.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()}},_renderHandle:function(t){var e=(0,p.Z)("<div>").addClass(Zr).addClass(Zr+"-"+t).appendTo(this.$element());this._handles.push(e)},_attachEventHandlers:function(){if(!this.option("disabled")){var t={};t[yy]=this._dragStartHandler.bind(this),t[Ey]=this._dragHandler.bind(this),t[Iy]=this._dragEndHandler.bind(this),this._handles.forEach(e=>{S.Z.on(e,t,{direction:"both",immediate:!0})})}},_detachEventHandlers:function(){this._handles.forEach(t=>{S.Z.off(t)})},_toggleEventHandlers:function(t){t?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize:function(){var t=this.$element();return"border-box"===t.css("boxSizing")?{width:(0,I.Y_)(t),height:(0,I.zp)(t)}:{width:(0,I.dz)(t),height:(0,I.Cr)(t)}},_dragStartHandler:function(t){var e=this.$element();e.is(".dx-state-disabled, .dx-state-disabled *")?t.cancel=!0:(this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(t),this._elementLocation=(0,le.jt)(e),this._elementSize=this._getElementSize(),this._renderDragOffsets(t),this._resizeStartAction({event:t,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),t.targetElements=null)},_toggleResizingClass:function(t){this.$element().toggleClass("dx-resizable-resizing",t)},_renderDragOffsets:function(t){var e=this._getArea();if(e){var i=(0,p.Z)(t.target).closest("."+Zr),a=(0,I.Y_)(i),r=(0,I.zp)(i),n=i.offset(),s=e.offset,o=this._getAreaScrollOffset();t.maxLeftOffset=this._leftMaxOffset=n.left-s.left-o.scrollX,t.maxRightOffset=this._rightMaxOffset=s.left+e.width-n.left-a+o.scrollX,t.maxTopOffset=this._topMaxOffset=n.top-s.top-o.scrollY,t.maxBottomOffset=this._bottomMaxOffset=s.top+e.height-n.top-r+o.scrollY}},_getBorderWidth:function(t,e){if((0,v.FJ)(t.get(0)))return 0;var i=t.css(Ty[e]);return parseInt(i)||0},_proportionate:function(t,e){var i=this._elementSize;return e*("x"===t?i.width/i.height:i.height/i.width)},_getProportionalDelta:function(t){var{x:e,y:i}=t,a=this._proportionate("y",e);if(a>=i)return{x:e,y:a};var r=this._proportionate("x",i);return r>=e?{x:r,y:i}:{x:0,y:0}},_getDirectionName:function(t){var e=this._movingSides;return"x"===t?e.left?"left":"right":e.top?"top":"bottom"},_fitIntoArea:function(t,e){var i,a=this._getDirectionName(t);return Math.min(e,null!==(i=this["_".concat(a,"MaxOffset")])&&void 0!==i?i:1/0)},_fitDeltaProportionally:function(t){var e=(0,M.Z)({},t),i=this._elementSize,{minWidth:a,minHeight:r,maxWidth:n,maxHeight:s}=this.option(),o=()=>i.width+e.x,l=()=>i.height+e.y,d=g=>e[g]===this._fitIntoArea(g,e[g]),u=()=>(0,ue.Z2)(o(),a,n)&&d("x"),h=()=>(0,ue.Z2)(l(),r,s)&&d("y");if(!u()){var c=this._fitIntoArea("x",(0,ue.n$)(o(),a,n)-i.width);e={x:c,y:this._proportionate("y",c)}}if(!h()){var _=this._fitIntoArea("y",(0,ue.n$)(l(),r,s)-i.height);e={x:this._proportionate("x",_),y:_}}return u()&&h()?e:{x:0,y:0}},_fitDelta:function(t){var{x:e,y:i}=t,a=this._elementSize,{minWidth:r,minHeight:n,maxWidth:s,maxHeight:o}=this.option();return{x:(0,ue.n$)(a.width+e,r,s)-a.width,y:(0,ue.n$)(a.height+i,n,o)-a.height}},_getDeltaByOffset:function(t){var e=this._movingSides,i=this._isCornerHandler(e)&&this.option("keepAspectRatio"),a={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)};if(i){var r=this._getProportionalDelta(a);a=this._fitDeltaProportionally(r)}else{var s=this._fitDelta(a);a=this._roundByStep(s)}return a},_updatePosition:function(t,e){var{width:i,height:a}=e,r=this._elementLocation,n=this._movingSides,s=this.$element(),o=this._getElementSize();(0,le.pB)(s,{top:r.top+(n.top?t.y*(n.top?-1:1)-((o.height||a)-a):0),left:r.left+(n.left?t.x*(n.left?-1:1)-((o.width||i)-i):0)})},_dragHandler:function(t){var e=this._getOffset(t),i=this._getDeltaByOffset(e),a=this._updateDimensions(i);this._updatePosition(i,a),this._triggerResizeAction(t,a)},_updateDimensions:function(t){var e=d=>"px"===d.substring(d.length-2),i="strict"===this.option("stepPrecision"),a=this._elementSize,r=a.width+t.x,n=a.height+t.y,s=this.$element().get(0).style,o=t.x||i||e(s.width),l=t.y||i||e(s.height);return o&&this.option({width:r}),l&&this.option({height:n}),{width:o?r:a.width,height:l?n:a.height}},_triggerResizeAction:function(t,e){var{width:i,height:a}=e;this._resizeAction({event:t,width:this.option("width")||i,height:this.option("height")||a,handles:this._movingSides}),(0,Dt.U_)(this.$element())},_isCornerHandler:t=>0===Object.values(t).reduce((e,i)=>e^i,0),_getOffset:function(t){var e=t.offset,i=this._movingSides;return!i.left&&!i.right&&(e.x=0),!i.top&&!i.bottom&&(e.y=0),e},_roundByStep:function(t){return"strict"===this.option("stepPrecision")?this._roundStrict(t):this._roundNotStrict(t)},_getSteps:function(){return(0,E.TG)(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict:function(t){var e=this._getSteps();return{x:t.x-t.x%e.h,y:t.y-t.y%e.v}},_roundStrict:function(t){var e=this._movingSides,i={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)},a=this._getSteps(),r=this._elementLocation,n=this._elementSize,l=((e.left?r.left:r.left+n.width)+i.x)%a.h,d=((e.top?r.top:r.top+n.height)+i.y)%a.v,u=Math.sign||(x=>0==(x=+x)||isNaN(x)?x:x>0?1:-1),h=(x,w)=>(1+.2*u(w))%1*x,c=(x,w)=>Math.abs(x)<.2*w,_=i.x-l,g=i.y-d;l>h(a.h,i.x)&&(_+=a.h),d>h(a.v,i.y)&&(g+=a.v);var f=!e.left&&!e.right||c(i.x,a.h)?0:_,m=!e.top&&!e.bottom||c(i.y,a.v)?0:g;return{x:f*(e.left?-1:1),y:m*(e.top?-1:1)}},_getMovingSides:function(t){var e=(0,p.Z)(t.target),i=e.hasClass($r+"-top-left"),a=e.hasClass($r+"-top-right"),r=e.hasClass($r+"-bottom-left"),n=e.hasClass($r+"-bottom-right");return{top:e.hasClass("dx-resizable-handle-top")||i||a,left:e.hasClass("dx-resizable-handle-left")||i||r,bottom:e.hasClass("dx-resizable-handle-bottom")||r||n,right:e.hasClass("dx-resizable-handle-right")||a||n}},_getArea:function(){var t=this.option("area");return(0,v.mf)(t)&&(t=t.call(this)),(0,v.PO)(t)?this._getAreaFromObject(t):this._getAreaFromElement(t)},_getAreaScrollOffset:function(){var t=this.option("area"),i={scrollY:0,scrollX:0};if(!(0,v.mf)(t)&&!(0,v.PO)(t)){var a=(0,p.Z)(t)[0];(0,v.FJ)(a)&&(i.scrollX=a.pageXOffset,i.scrollY=a.pageYOffset)}return i},_getAreaFromObject:function(t){var e={width:t.right-t.left,height:t.bottom-t.top,offset:{left:t.left,top:t.top}};return this._correctAreaGeometry(e),e},_getAreaFromElement:function(t){var i,e=(0,p.Z)(t);return e.length&&(i={width:(0,I.Xt)(e),height:(0,I.fA)(e),offset:(0,C.l)({top:0,left:0},(0,v.FJ)(e[0])?{}:e.offset())},this._correctAreaGeometry(i,e)),i},_correctAreaGeometry:function(t,e){var i=e?this._getBorderWidth(e,"left"):0,a=e?this._getBorderWidth(e,"top"):0;t.offset.left+=i+this._getBorderWidth(this.$element(),"left"),t.offset.top+=a+this._getBorderWidth(this.$element(),"top"),t.width-=(0,I.Y_)(this.$element())-(0,I.Xt)(this.$element()),t.height-=(0,I.zp)(this.$element())-(0,I.fA)(this.$element())},_dragEndHandler:function(t){var e=this.$element();this._resizeEndAction({event:t,width:(0,I.Y_)(e),height:(0,I.zp)(e),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth:function(t){this.option("width",(0,ue.n$)(t,this.option("minWidth"),this.option("maxWidth")))},_renderHeight:function(t){this.option("height",(0,ue.n$)(t,this.option("minHeight"),this.option("maxHeight")))},_optionChanged:function(t){switch(t.name){case"disabled":this._toggleEventHandlers(!t.value),this.callBase(t);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":(0,Z.Ym)()&&this._renderWidth((0,I.Y_)(this.$element()));break;case"minHeight":case"maxHeight":(0,Z.Ym)()&&this._renderHeight((0,I.zp)(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(t)}},_clean:function(){this.$element().find("."+Zr).remove()},_useTemplates:function(){return!1}});(0,J.Z)(Hr,qh);const Ay=qh;var wa=L(4826),js=L(787),xe=L(3366),ya=L(1078),Dy=L(83),Oy=["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"],qs=(0,Z.Jj)();class Ry extends Dy.H{constructor(e){var{fullScreen:i,forceApplyBindings:a,dragOutsideBoundary:r,dragAndResizeArea:n,outsideDragFactor:s}=e;super((0,xe.Z)(e,Oy)),this._props=(0,M.Z)({},this._props,{fullScreen:i,forceApplyBindings:a,dragOutsideBoundary:r,dragAndResizeArea:n,outsideDragFactor:s}),this._$dragResizeContainer=void 0,this._updateDragResizeContainer()}set fullScreen(e){this._props.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}set dragAndResizeArea(e){this._props.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._props.dragOutsideBoundary=e,this._updateDragResizeContainer()}set outsideDragFactor(e){this._props.outsideDragFactor=e}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){var e,i;this._props.fullScreen?((0,le.pB)(this._$content,{top:0,left:0}),this.detectVisualPositionChange()):(null===(e=(i=this._props).forceApplyBindings)||void 0===e||e.call(i),super.positionContent())}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){return this._props.dragOutsideBoundary?(0,p.Z)(qs):this._props.dragAndResizeArea?(0,p.Z)(this._props.dragAndResizeArea):(0,ya.In)().get(0)||this._props.container?this._$markupContainer:(0,p.Z)(qs)}_getVisualContainer(){return this._props.fullScreen?(0,p.Z)(qs):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1)}_fullScreenDisabled(){this.restorePositionOnNextRender(!0)}}var By={setOverflow:E.ZT,restoreOverflow:E.ZT},Vy=(0,Z.Jj)(),Xs="dx-popup",Xh="dx-popup-wrapper",Jh="dx-popup-title",Qh="dx-popup-bottom",ec=["cancel","clear","done"],Xy=ve.Z.safari&&(0,vy.q)(ve.Z.version,[11])<0,Wt={static:"",inherit:"dx-popup-inherit-height",flex:"dx-popup-flex-height"},tc=Nt.Z.inherit({_supportedKeys:function(){return(0,C.l)(this.callBase(),{upArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveUp(t)},downArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveDown(t)},leftArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveLeft(t)},rightArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveRight(t)}})},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,enableBodyScroll:!0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules:function(){var t=(0,oe.Vk)();return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:function(e){return"desktop"===K.Z.real().deviceType&&"generic"===e.platform},options:{dragEnabled:!0}},{device:function(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,oe.x2)(t)},options:{useDefaultToolbarButtons:!0,useFlatToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation:function(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init:function(){var t=this.option("_wrapperClassExternal"),e=t?"".concat(Xh," ").concat(t):Xh;this.callBase(),this._createBodyOverflowManager(),this._updateResizeCallbackSkipCondition(),this.$element().addClass(Xs),this.$wrapper().addClass(e),this._$popupContent=this._$content.wrapInner((0,p.Z)("<div>").addClass("dx-popup-content")).children().eq(0),this._toggleContentScrollClass(),this.$overlayContent().attr("role","dialog")},_render:function(){var t=this.option("fullScreen");this._toggleFullScreenClass(t),this.callBase()},_createBodyOverflowManager:function(){this._bodyOverflowManager=(()=>{if(!(0,Z.Ym)())return By;var t=(0,Z.Jj)(),e=Y.Z.getDocument().documentElement,i=Y.Z.getBody(),a="ios"===K.Z.real().platform,r={overflow:null,overflowX:null,overflowY:null,paddingRight:null,position:null,top:null,left:null};return{setOverflow:a?()=>{if(!(0,v.$K)(r.position)&&"fixed"!==i.style.position){var{scrollY:o,scrollX:l}=t;r.position=i.style.position,r.top=i.style.top,r.left=i.style.left,i.style.setProperty("position","fixed"),i.style.setProperty("top","".concat(-o,"px")),i.style.setProperty("left","".concat(-l,"px"))}}:()=>{(()=>{var o=t.innerWidth-e.clientWidth;if(!(r.paddingRight||o<=0)){var l=t.getComputedStyle(i).getPropertyValue("padding-right"),d=parseInt(l,10);r.paddingRight=d,i.style.setProperty("padding-right","".concat(d+o,"px"))}})(),!r.overflow&&"hidden"!==i.style.overflow&&(r.overflow=i.style.overflow,r.overflowX=i.style.overflowX,r.overflowY=i.style.overflowY,i.style.setProperty("overflow","hidden"))},restoreOverflow:a?()=>{if((0,v.$K)(r.position)){var o=-parseInt(i.style.top,10),l=-parseInt(i.style.left,10);["position","top","left"].forEach(d=>{r[d]?i.style.setProperty(d,r[d]):i.style.removeProperty(d)}),t.scrollTo(l,o),r.position=null}}:()=>{(0,v.$K)(r.paddingRight)&&(r.paddingRight?i.style.setProperty("padding-right","".concat(r.paddingRight,"px")):i.style.removeProperty("padding-right"),r.paddingRight=null),["overflow","overflowX","overflowY"].forEach(o=>{if((0,v.$K)(r[o])){var l=o.replace(/(X)|(Y)/,d=>"-".concat(d.toLowerCase()));r[o]?i.style.setProperty(l,r[o]):i.style.removeProperty(l),r[o]=null}})}}})()},_toggleFullScreenClass:function(t){this.$overlayContent().toggleClass("dx-popup-fullscreen",t).toggleClass("dx-popup-normal",!t)},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new kr.s,bottom:new kr.s})},_getActionsList:function(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler:function(t){this._shouldSkipContentResize(t)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions:function(){var t=this.option("animation");return["to","from"].some(e=>{var i,a=null==t||null===(i=t.show)||void 0===i?void 0:i[e];return(0,v.Kn)(a)&&("width"in a||"height"in a)})},_updateResizeCallbackSkipCondition(){var t=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=e=>t&&this._showAnimationProcessing||this._areContentDimensionsRendered(e)},_observeContentResize:function(t){if(this.option("useResizeObserver")){var e=this._$content.get(0);t?wa.Z.observe(e,i=>{this._contentResizeHandler(i)}):wa.Z.unobserve(e)}},_areContentDimensionsRendered:function(t){var e,i,a,n,s,r=null===(e=t.contentBoxSize)||void 0===e?void 0:e[0];if(r)return parseInt(r.inlineSize,10)===(null===(n=this._renderedDimensions)||void 0===n?void 0:n.width)&&parseInt(r.blockSize,10)===(null===(s=this._renderedDimensions)||void 0===s?void 0:s.height);var o=t.contentRect;return parseInt(o.width,10)===(null===(i=this._renderedDimensions)||void 0===i?void 0:i.width)&&parseInt(o.height,10)===(null===(a=this._renderedDimensions)||void 0===a?void 0:a.height)},_renderContent(){this.callBase(),this._observeContentResize(!0)},_renderContentImpl:function(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle:function(){var t=this._getToolbarItems("top"),e=this.option("title"),i=this.option("showTitle");if(i&&e&&t.unshift({location:K.Z.current().ios?"center":"before",text:e}),i||t.length>0){this._$title&&this._$title.remove();var a=(0,p.Z)("<div>").addClass(Jh).insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",t,a).addClass(Jh),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass("dx-has-close-button",this._hasCloseButton())}else this._$title&&this._$title.detach()},_renderTemplateByType:function(t,e,i,a){var{rtlEnabled:r,useDefaultToolbarButtons:n,useFlatToolbarButtons:s,disabled:o}=this.option(),l=this._getTemplateByOption(t);if(l instanceof kr.s){var u=(0,C.l)({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),h=(0,C.l)(a,{items:e,rtlEnabled:r,useDefaultButtons:n,useFlatButtons:s,disabled:o,integrationOptions:u});this._getTemplate("dx-polymorph-widget").render({container:i,model:{widget:this._getToolbarName(),options:h}});var c=i.children("div");return i.replaceWith(c),c}var _=(0,p.Z)(l.render({container:(0,W.u)(i)}));return _.hasClass("dx-template-wrapper")&&(i.replaceWith(_),i=_),i},_getToolbarName:function(){return"dxToolbarBase"},_renderVisibilityAnimate:function(t){return this.callBase(t)},_hide(){return this._observeContentResize(!1),this.callBase()},_executeTitleRenderAction:function(t){this._getTitleRenderAction()({titleElement:(0,W.u)(t)})},_getTitleRenderAction:function(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction:function(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton:function(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer:function(){return(t,e,i)=>{var a=(0,p.Z)("<div>").addClass("dx-closebutton");this._createComponent(a,Be.Z,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),(0,p.Z)(i).append(a)}},_getToolbarItems:function(t){var e=this.option("toolbarItems"),i=[];this._toolbarItemClasses=[];var a=K.Z.current().platform,r=0;return(0,y.S6)(e,(n,s)=>{var o=(0,v.$K)(s.shortcut),l=o?(t=>{var i=K.Z.current().platform,a="bottom",r="before";if("ios"===i)switch(t){case"cancel":a="top";break;case"clear":a="top",r="after";break;case"done":r="after"}else if("android"===i)switch(t){case"cancel":case"done":r="after"}return{toolbar:a,location:r}})(s.shortcut):s;if(o&&"ios"===a&&r<2&&(l.toolbar="top",r++),l.toolbar=s.toolbar||l.toolbar||"top",l&&l.toolbar===t){o&&(0,C.l)(l,{location:s.location},this._getToolbarItemByAlias(s));var d="generic"===a;"done"===s.shortcut&&d||"cancel"===s.shortcut&&!d?i.unshift(l):i.push(l)}}),"top"===t&&this._hasCloseButton()&&i.push(this._getCloseButton()),i},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:t=>"done"===t.toLowerCase()?"OK":(0,Pe._A)(t,!0),_getToolbarItemByAlias:function(t){var e=this,i=t.shortcut;if(!ec.includes(i))return!1;var a=(0,C.l)({text:A.Z.format(this._getLocalizationKey(i)),onClick:this._createToolbarItemAction(t.onClick),integrationOptions:{},type:e.option("useDefaultToolbarButtons")?"default":"normal",stylingMode:e.option("useFlatToolbarButtons")?"text":"contained"},t.options||{}),r=Xs+"-"+i;return this._toolbarItemClasses.push(r),{template:function(n,s,o){var l=(0,p.Z)("<div>").addClass(r).appendTo(o);e._createComponent(l,Be.Z,a)}}},_createToolbarItemAction:function(t){return this._createAction(t,{afterExecute:function(e){e.component.hide()}})},_renderBottom:function(){var t=this._getToolbarItems("bottom");if(t.length){this._$bottom&&this._$bottom.remove();var e=(0,p.Z)("<div>").addClass(Qh).insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",t,e,{compactMode:!0}).addClass(Qh),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState:function(t){this.callBase(...arguments),this.$content().toggleClass("dx-state-disabled",!!t)},_toggleClasses:function(){(0,y.S6)(ec,(e,i)=>{var a=Xs+"-"+i;this._toolbarItemClasses.includes(a)?(this.$wrapper().addClass(a+"-visible"),this._$bottom.addClass(a)):(this.$wrapper().removeClass(a+"-visible"),this._$bottom.removeClass(a))})},_toggleFocusClass(t,e){if(this.callBase(t,e),t&&!js.Ao(this._zIndex)){var i=js.Ue(this._zIndexInitValue());js.Od(this._zIndex),this._zIndex=i,this._$wrapper.css("zIndex",i),this._$content.css("zIndex",i)}},_toggleContentScrollClass(){var t=!this.option("preventScrollEvents");this.$content().toggleClass("dx-popup-content-scrollable",t)},_getPositionControllerConfig(){var{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:a,outsideDragFactor:r}=this.option();return(0,C.l)({},this.callBase(),{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:a,outsideDragFactor:r})},_initPositionController(){this._positionController=new Ry(this._getPositionControllerConfig())},_getDragTarget:function(){return this.topToolbar()},_renderGeometry:function(t){var{visible:e,useResizeObserver:i}=this.option();if(e&&(0,Z.Ym)()){var r=this._showAnimationProcessing&&!(null!=t&&t.forceStopAnimation)&&i;this._isAnimationPaused=r||void 0,this._stopAnimation(),null!=t&&t.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(t?.isDimensionChange),r&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions:function(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt((0,I.dz)(this._$content),10),height:parseInt((0,I.Cr)(this._$content),10)})},_renderGeometryImpl:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight:function(){"auto"===this._getOptionValue("height")&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag:function(){var t=this._getDragTarget(),e=this.option("dragEnabled");if(t){var i={dragEnabled:e,handle:t.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(i):this._drag=new class gy{constructor(e){this.init(e)}init(e){var{dragEnabled:i,handle:a,draggableElement:r,positionController:n}=e;this._positionController=n,this._draggableElement=r,this._handle=a,this._dragEnabled=i,this.unsubscribe(),i&&this.subscribe()}moveDown(e){this._moveTo(5,0,e)}moveUp(e){this._moveTo(-5,0,e)}moveLeft(e){this._moveTo(0,-5,e)}moveRight(e){this._moveTo(0,5,e)}subscribe(){var e=this._getEventNames();S.Z.on(this._handle,e.startEventName,i=>{this._dragStartHandler(i)}),S.Z.on(this._handle,e.updateEventName,i=>{this._dragUpdateHandler(i)}),S.Z.on(this._handle,e.endEventName,i=>{this._dragEndHandler(i)})}unsubscribe(){var e=this._getEventNames();S.Z.off(this._handle,e.startEventName),S.Z.off(this._handle,e.updateEventName),S.Z.off(this._handle,e.endEventName)}_getEventNames(){return{startEventName:(0,D.V4)(Re.BL,"overlayDrag"),updateEventName:(0,D.V4)(Re.pB,"overlayDrag"),endEventName:(0,D.V4)(Re.ut,"overlayDrag")}}_dragStartHandler(e){var i=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=i.top,e.maxBottomOffset=i.bottom,e.maxLeftOffset=i.left,e.maxRightOffset=i.right}_dragUpdateHandler(e){this._moveByOffset({top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x}),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,i,a){if(this._dragEnabled){a.preventDefault(),a.stopPropagation();var r=this._fitOffsetIntoAllowedRange(e,i);this._moveByOffset(r),this._dragEndHandler(a)}}_fitOffsetIntoAllowedRange(e,i){var a=this._getAllowedOffsets();return{top:(0,ue.n$)(e,-a.top,a.bottom),left:(0,ue.n$)(i,-a.left,a.right)}}_getContainerDimensions(){var e=Y.Z.getDocument(),i=this._positionController.$dragResizeContainer.get(0),a=(0,I.Y_)(i),r=(0,I.zp)(i);return(0,v.FJ)(i)&&(r=Math.max(e.body.clientHeight,r),a=Math.max(e.body.clientWidth,a)),{width:a,height:r}}_getContainerPosition(){var e=this._positionController.$dragResizeContainer.get(0);return(0,v.FJ)(e)?{top:0,left:0}:(0,I.os)(e)}_getElementPosition(){return(0,I.os)(this._draggableElement)}_getInnerDelta(){var e=this._getContainerDimensions(),i=this._getElementDimensions();return{x:e.width-i.width,y:e.height-i.height}}_getOuterDelta(){var{width:e,height:i}=this._getElementDimensions(),a=this._positionController.outsideDragFactor;return{x:e*a,y:i*a}}_getFullDelta(){var e=this._getInnerDelta(),i=this._getOuterDelta();return{x:e.x+i.x,y:e.y+i.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){var e=this._getFullDelta();if(!(e.y>=0&&e.x>=0))return{top:0,bottom:0,left:0,right:0};var a=this._getElementPosition(),r=this._getContainerPosition(),n=this._getOuterDelta();return{top:a.top-r.top+n.y,bottom:-a.top+r.top+e.y,left:a.left-r.left+n.x,right:-a.left+r.left+e.x}}_moveByOffset(e){var i=(0,le.jt)(this._draggableElement);(0,le.pB)(this._draggableElement,{left:i.left+e.left,top:i.top+e.top})}}(i),this.$overlayContent().toggleClass("dx-popup-draggable",e)}},_renderResize:function(){this._resizable=this._createComponent(this._$content,Ay,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:t=>{this._resizeEndHandler(t),this._observeContentResize(!0)},onResize:t=>{this._setContentHeight(),this._actions.onResize(t)},onResizeStart:t=>{this._observeContentResize(!1),this._actions.onResizeStart(t)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler:function(t){var e=this._resizable.option("width"),i=this._resizable.option("height");e&&this._setOptionWithoutOptionChange("width",e),i&&this._setOptionWithoutOptionChange("height",i),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(t.event),this._actions.onResizeEnd(t)},_setContentHeight:function(){(this.option("forceApplyBindings")||E.ZT)();var t=this.$overlayContent().get(0),e=this._chooseHeightStrategy(t);this.$content().css(this._getHeightCssStyles(e,t)),this._setHeightClasses(this.$overlayContent(),e)},_heightStrategyChangeOffset:function(t,e){return t===Wt.flex?-e:0},_chooseHeightStrategy:function(t){var e="auto"===t.style.width||""===t.style.width,i=Wt.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(i=e||Xy?Wt.inherit:Wt.flex),i},_getHeightCssStyles:function(t,e){var i={},a=this._getOptionValue("maxHeight",e),r=this._getOptionValue("minHeight",e),n=this._splitPopupHeight(),s=n.header+n.footer+n.contentVerticalOffsets+n.popupVerticalOffsets+this._heightStrategyChangeOffset(t,n.popupVerticalPaddings);if(t===Wt.static){if(!this._isAutoHeight()||a||r){var o=this.option("fullScreen")?Math.min((0,se.l)(e).height,(0,Z.Jj)().innerHeight):(0,se.l)(e).height;i={height:Math.max(0,o-s),minHeight:"auto",maxHeight:"auto"}}}else{var d=(0,p.Z)(this._positionController.$visualContainer).get(0),u=(0,I.n2)(a,-s,d);i={height:"auto",minHeight:(0,I.eK)(r,-s,d),maxHeight:u}}return i},_setHeightClasses:function(t,e){var i="";for(var a in Wt)Wt[a]!==e&&(i+=" "+Wt[a]);t.removeClass(i).addClass(e)},_isAutoHeight:function(){return"auto"===this.$overlayContent().get(0).style.height},_splitPopupHeight:function(){var t=this.topToolbar(),e=this.bottomToolbar();return{header:(0,I.$D)(t&&t.get(0)),footer:(0,I.$D)(e&&e.get(0)),contentVerticalOffsets:(0,I.sQ)(this.$overlayContent().get(0),!0),popupVerticalOffsets:(0,I.sQ)(this.$content().get(0),!0),popupVerticalPaddings:(0,I.sQ)(this.$content().get(0),!1)}},_isAllWindowCovered:function(){return this.callBase()||this.option("fullScreen")},_renderDimensions:function(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),(0,Z.Ym)()&&this._renderFullscreenWidthClass()},_dimensionChanged:function(){this._renderGeometry({isDimensionChange:!0})},_clean:function(){this.callBase(),this._observeContentResize(!1)},_dispose:function(){this.callBase(),this._toggleBodyScroll(!0)},_renderFullscreenWidthClass:function(){this.$overlayContent().toggleClass("dx-popup-fullscreen-width",(0,I.Y_)(this.$overlayContent())===(0,I.dz)(Vy))},_toggleSafariScrolling(){this.option("enableBodyScroll")&&this.callBase()},_toggleBodyScroll:function(t){if(this._bodyOverflowManager){var{setOverflow:e,restoreOverflow:i}=this._bodyOverflowManager;t?i():e()}},refreshPosition:function(){this._renderPosition()},_optionChanged:function(t){var e,{value:i,name:a}=t;switch(a){case"disabled":this.callBase(t),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"enableBodyScroll":this._toggleBodyScroll(i);break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),(0,Dt.U_)(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),(0,Dt.U_)(this.$overlayContent());break;case"container":var r;this.callBase(t),this.option("resizeEnabled")&&(null===(r=this._resizable)||void 0===r||r.option("area",this._positionController.$dragResizeContainer));break;case"width":case"height":this.callBase(t),null===(e=this._resizable)||void 0===e||e.option(a,i);break;case"onTitleRendered":this._createTitleRenderAction(i);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":var n=!t.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),n&&(this._renderGeometry(),(0,Dt.U_)(this.$overlayContent()));break;case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=i;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),(0,Dt.U_)(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=i,this._toggleFullScreenClass(i),this._toggleSafariScrolling(),this._renderGeometry(),(0,Dt.U_)(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;case"preventScrollEvents":this.callBase(t),this._toggleContentScrollClass();break;default:this.callBase(t)}},bottomToolbar:function(){return this._$bottom},topToolbar:function(){return this._$title},$content:function(){return this._$popupContent},content:function(){return(0,W.u)(this.$content())},$overlayContent:function(){return this._$content}});(0,J.Z)("dxPopup",tc);const gt=tc;let Qy=(()=>{class t extends gt{_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{preventScrollEvents:!1})}_getToolbarName(){return"dxToolbar"}}return t.defaultOptions=function(e){gt.defaultOptions(e)},t})();(0,J.Z)("dxPopup",Qy);class s0 extends Me.default{_supportedKeys(){var e={};return(!this.option("opened")||!this._list.option("focusedElement"))&&(e=this._button._supportedKeys()),(0,C.l)(super._supportedKeys(),e,{tab:function(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,oe.x2)()},options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass("dx-dropdownmenu"),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new jh.s("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){var e=this.$element().addClass("dx-dropdownmenu-button");this._button=this._createComponent(e,Be.Z,{icon:"overflow",template:"content",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:i=>{this.option("opened",!this.option("opened")),this._buttonClickAction(i)}})}_toggleActiveState(e,i,a){this._button._toggleActiveState(e,i,a)}_toggleMenuVisibility(e){var i=e??!this._popup.option("visible");e&&this._renderPopup(),this._popup.toggle(i),this.setAria("expanded",i)}_renderPopup(){if(!this._$popup){this._$popup=(0,p.Z)("<div>").appendTo(this.$element());var{rtlEnabled:e,container:i,animation:a}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(r){var{component:n}=r;n.$wrapper().addClass("dx-dropdownmenu-popup-wrapper").addClass("dx-dropdownmenu-popup")},deferRendering:!1,contentTemplate:r=>this._renderList(r),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top ".concat(e?"left":"right"),at:"bottom ".concat(e?"left":"right"),collision:"fit flip",offset:{v:3},of:this.$element()},animation:a,onOptionChanged:r=>{var{name:n,value:s}=r;"visible"===n&&this.option("opened",s)},container:i,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:r=>this._closeOutsideDropDownHandler(r),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}}_getMaxHeight(){var e=this.$element(),i=e.offset().top,a=(0,I.zp)((0,Z.Jj)()),r=Math.max(i,a-i-(0,I.zp)(e));return Math.min(a,r-3-10)}_closeOutsideDropDownHandler(e){return!(0,p.Z)(e.target).closest(this.$element()).length}_renderList(e){var i=(0,p.Z)(e);i.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(i,_y,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:a=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(a)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_itemAttributes:{role:"menuitem"}})}_itemOptionChanged(e,i,a){var r;null===(r=this._list)||void 0===r||r._itemOptionChanged(e,i,a),Dr(this._list,e)}_getListDataSource(){var e;return null!==(e=this.option("dataSource"))&&void 0!==e?e:this.option("items")}_setListDataSource(){var e;null===(e=this._list)||void 0===e||e.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(e){super._toggleVisibility(e),this._button.option("visible",e)}_optionChanged(e){var i,a,r,{name:n,value:s}=e;switch(n){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":null===(i=this._list)||void 0===i||i.option(n,this._getTemplate(s));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":null===(a=this._list)||void 0===a||a.option(n,s),super._optionChanged(e);break;case"onItemRendered":null===(r=this._list)||void 0===r||r.option(n,s);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(s),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(n,s);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}_updateFocusableItemsTabIndex(){this.option("items").forEach(e=>Dr(this._list,e))}}var ac="dx-state-invisible",zr="dx-toolbar-item-auto-hide",Js="dx-toolbar-item-invisible";class d0{constructor(e){this._toolbar=e}_initMarkup(){(0,E.g0)(()=>{this._renderOverflowMenu(),this._renderMenuItems()})}_renderOverflowMenu(){if(this._hasVisibleMenuItems()){this._renderMenuButtonContainer();var e=(0,p.Z)("<div>").appendTo(this._overflowMenuContainer()),i=this._toolbar._createActionByOption("onItemClick"),a=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(e,s0,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>a,onItemClick:r=>{i(r)},container:this._toolbar.option("menuContainer"),onOptionChanged:r=>{var{name:n,value:s}=r;"opened"===n&&this._toolbar.option("overflowMenuVisible",s),"items"===n&&this._updateMenuVisibility(s)}})}}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=(0,p.Z)("<div>").appendTo(this._toolbar._$afterSection).addClass("dx-toolbar-button").addClass("dx-toolbar-menu-container")}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(e){var i=e??this._getMenuItems(),a=i.length&&this._hasVisibleMenuItems(i);this._toggleMenuVisibility(a)}_toggleMenuVisibility(e){this._overflowMenuContainer()&&this._overflowMenuContainer().toggleClass(ac,!e)}_renderMenuItems(){(0,E.g0)(()=>{this.renderMenuItems()})}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){var e;return(0,E.h3)(null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[],i=>!this._toolbar._isMenuItem(i))}_getHiddenItems(){return this._toolbar._itemContainer().children(".".concat(zr,".").concat(Js)).not(".".concat(ac))}_getMenuItems(){var e,i,a=(0,E.h3)(null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[],s=>this._toolbar._isMenuItem(s)),r=this._getHiddenItems();return this._restoreItems=null!==(i=this._restoreItems)&&void 0!==i?i:[],[...[].slice.call(r).map(s=>{var o=this._toolbar._getItemData(s),l=(0,p.Z)(s),d=l.children();return(0,C.l)({menuItemTemplate:()=>(this._restoreItems.push({container:l,item:d}),(0,p.Z)("<div>").addClass(zr).append(d))},o)}),...a]}_hasVisibleMenuItems(e){var i=e??this._toolbar.option("items"),a=!1,r=(0,Q.vb)("visible"),n=(0,Q.vb)("locateInMenu");return(0,y.S6)(i,function(s,o){var l=r(o,{functionsAsIs:!0}),d=n(o,{functionsAsIs:!0});(!1!==l&&("auto"===d||"always"===d)||"menu"===o.location)&&(a=!0)}),a}_arrangeItems(){var e;this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),(0,y.S6)(null!==(e=this._restoreItems)&&void 0!==e?e:[],function(a,r){(0,p.Z)(r.container).append(r.item)}),this._restoreItems=[];var i=(0,I.dz)(this._toolbar.$element());return this._hideOverflowItems(i),i}_hideOverflowItems(e){var i,a=this._toolbar.$element().find(".".concat(zr));if(a.length){e=null!==(i=e)&&void 0!==i?i:(0,I.dz)(this._toolbar.$element()),(0,p.Z)(a).removeClass(Js);for(var r=this._getItemsWidth();a.length&&e<r;){var n=a.eq(-1);r-=(0,I.Y_)(n),n.addClass(Js),a.splice(-1,1)}}}_getItemsWidth(){return this._toolbar._getSummaryItemsWidth([this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(e,i,a){var r;"disabled"!==i&&"options.disabled"!==i||!this._toolbar._isMenuItem(e)?this.renderMenuItems():null===(r=this._menu)||void 0===r||r._itemOptionChanged(e,i,a)}_renderItem(e,i){"auto"===e.locateInMenu&&i.addClass(zr)}_optionChanged(e,i){var a,r,n,s,o;switch(e){case"disabled":null===(a=this._menu)||void 0===a||a.option(e,i);break;case"overflowMenuVisible":null===(r=this._menu)||void 0===r||r.option("opened",i);break;case"onItemClick":null===(n=this._menu)||void 0===n||n.option(e,i);break;case"menuContainer":null===(s=this._menu)||void 0===s||s.option("container",i);break;case"menuItemTemplate":null===(o=this._menu)||void 0===o||o.option("itemTemplate",i)}}}class rc extends rw{_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(e){"height"!==e&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass("dx-toolbar-multiline",this._isMultiline()),this._layoutStrategy=this._isMultiline()?new dw(this):new d0(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(e,i,a,r){var n=super._renderItem(e,i,a,r);this._layoutStrategy._renderItem(i,n);var{widget:s,showText:o}=i;return"dxButton"===s&&"inMenu"===o&&n.toggleClass("dx-toolbar-text-auto-hide"),n}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(!this.$element().is(":hidden")){var e=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(e)}}_itemOptionChanged(e,i,a){this._isMenuItem(e)||super._itemOptionChanged(e,i,a),this._layoutStrategy._itemOptionChanged(e,i,a),("disabled"===i||"options.disabled"===i)&&Dr(this,e),"location"===i&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach(e=>Dr(this,e))}_isMenuItem(e){return"menu"===e.location||"always"===e.locateInMenu}_isToolbarItem(e){return void 0===e.location||"never"===e.locateInMenu}_optionChanged(e){var{name:i,value:a}=e;switch(this._layoutStrategy._optionChanged(i,a),i){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged.apply(this,arguments),this._updateFocusableItemsTabIndex();break;default:super._optionChanged.apply(this,arguments)}}updateDimensions(){this._dimensionChanged()}}(0,J.Z)("dxToolbar",rc);const c0=rc;var nc="toolbar-button",sc=["addRowButton","applyFilterButton","columnChooserButton","exportButton","groupPanel","revertButton","saveButton","searchPanel"],v0={_getToolbarItems:()=>[],_getButtonContainer(){return(0,p.Z)("<div>").addClass(this.addWidgetPrefix(nc))},_getToolbarButtonClass(t){var e=t?" ".concat(t):"";return this.addWidgetPrefix(nc)+e},_getToolbarOptions(){var t=this.option("toolbar"),e={toolbarOptions:{items:this._getToolbarItems(),visible:t?.visible,disabled:t?.disabled,onItemRendered(r){var n=r.itemData.onItemRendered;n&&n(r)}}},i=t?.items;if(e.toolbarOptions.items=this._normalizeToolbarItems(e.toolbarOptions.items,i),this.executeAction("onToolbarPreparing",e),e.toolbarOptions&&!(0,v.$K)(e.toolbarOptions.visible)){var a=e.toolbarOptions.items;e.toolbarOptions.visible=!!a?.length}return e.toolbarOptions},_normalizeToolbarItems(t,e){t.forEach(s=>{if(!sc.includes(s.name))throw new Error("Default toolbar item '".concat(s.name,"' is not added to DEFAULT_TOOLBAR_ITEM_NAMES"))});var i={location:"after"},a=Array.isArray(e);if(!(0,v.$K)(e))return t;a||(e=[e]);var r={};t.forEach(s=>{r[s.name]=s});var n=e.map(s=>((0,v.HD)(s)&&(s={name:s}),(0,v.$K)(s.name)&&((0,v.$K)(r[s.name])?s=(0,C.l)(!0,{},r[s.name],s):sc.includes(s.name)&&(s=(0,M.Z)((0,M.Z)({},s),{visible:!1}))),(0,C.l)(!0,{},i,s)));return a?n:n[0]},_renderCore(){if(this._toolbar)this._toolbar.option(this._toolbarOptions);else{var t=this.element();t.addClass(this.addWidgetPrefix("header-panel"));var e=A.Z.format(this.component.NAME+"-ariaToolbar"),i=(0,p.Z)("<div>").attr("aria-label",e).appendTo(t);this._toolbar=this._createComponent(i,c0,this._toolbarOptions)}},_columnOptionChanged:E.ZT,_handleDataChanged(){this._requireReady&&this.render()},init(){this.callBase(),this.createAction("onToolbarPreparing",{excludeValidators:["disabled","readOnly"]})},render(){this._toolbarOptions=this._getToolbarOptions(),this.callBase.apply(this,arguments)},setToolbarItemDisabled(t,e){var i=this._toolbar;if(i){var r=(i.option("items")||[]).findIndex(s=>s.name===t);if(!(r<0)){var n=i.option("items[".concat(r,"]"));i.option("items[".concat(r,"].disabled"),e),n.options&&i.option("items[".concat(r,"].options.disabled"),e)}}},updateToolbarDimensions(){var t;null===(t=this._toolbar)||void 0===t||t.updateDimensions()},getHeaderPanel(){return this.element()},getHeight(){return this.getElementHeight()},optionChanged(t){if("onToolbarPreparing"===t.name&&(this._invalidate(),t.handled=!0),"toolbar"===t.name&&(t.handled=!0,this._toolbar)){var e=(0,Q.Zw)(t.fullName),i=t.fullName.replace(/^toolbar\./,"");if(1===e.length){var a=this._getToolbarOptions();this._toolbar.option(a)}else if("items"===e[1])if(2===e.length){var r=this._getToolbarOptions();this._toolbar.option("items",r.items)}else if(3===e.length){var n=this._normalizeToolbarItems(this._getToolbarItems(),t.value);this._toolbar.option(i,n)}else e.length>=4&&this._toolbar.option(i,t.value);else this._toolbar.option(i,t.value)}this.callBase(t)},isVisible(){return!(!this._toolbarOptions||!this._toolbarOptions.visible)},allowDragging:E.ZT,hasGroupedColumns:E.ZT},oc={defaultOptions:()=>({}),views:{headerPanel:da.inherit(v0)},extenders:{controllers:{resizing:{_updateDimensionsCore(){this.callBase.apply(this,arguments),this.getView("headerPanel").updateToolbarDimensions()}}}}};$.registerModule("headerPanel",oc);var f0=L(3657);$.registerModulesOrder(["stateStoring","columns","selection","editorFactory","columnChooser","grouping","editing","editingRowBased","editingFormBased","editingCellBased","masterDetail","validating","adaptivity","data","virtualScrolling","columnHeaders","filterRow","headerPanel","headerFilter","sorting","search","rows","pager","columnsResizingReordering","contextMenu","keyboardNavigation","errorHandling","summary","columnFixing","export","gridView"]);var Qs=Me.default.inherit({_activeStateUnit:".dx-row",_getDefaultOptions(){var t=this.callBase();return(0,y.S6)($.modules,function(){(0,v.mf)(this.defaultOptions)&&(0,C.l)(!0,t,this.defaultOptions())}),t},_setDeprecatedOptions(){this.callBase(),(0,C.l)(this._deprecatedOptions,{useKeyboard:{since:"19.2",alias:"keyboardNavigation.enabled"},rowTemplate:{since:"21.2",message:'Use the "dataRowTemplate" option instead'},"columnChooser.allowSearch":{since:"23.1",message:'Use the "columnChooser.search.enabled" option instead'},"columnChooser.searchTimeout":{since:"23.1",message:'Use the "columnChooser.search.timeout" option instead'}})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{showRowLines:!0}},{device:()=>(0,oe.x2)(),options:{showRowLines:!0,showColumnLines:!1,headerFilter:{height:315},editing:{useIcons:!0},selection:{showCheckBoxesMode:"always"}}},{device:()=>ve.Z.webkit,options:{loadingTimeout:30,loadPanel:{animation:{show:{easing:"cubic-bezier(1, 0, 1, 0)",duration:500,from:{opacity:0},to:{opacity:1}}}}}},{device:t=>"desktop"!==t.deviceType,options:{grouping:{expandMode:"rowClick"}}}])},_init(){this.callBase(),V.logHeaderFilterDeprecatedWarningIfNeed(this),$.processModules(this,$),$.callModuleItemsMethod(this,"init")},_clean:E.ZT,_optionChanged(t){$.callModuleItemsMethod(this,"optionChanged",[t]),t.handled||this.callBase(t)},_dimensionChanged(){this.updateDimensions(!0)},_visibilityChanged(t){t&&this.updateDimensions()},_initMarkup(){this.callBase.apply(this,arguments),this.getView("gridView").render(this.$element())},_renderContentImpl(){this.getView("gridView").update()},_renderContent(){var t=this;(0,E.g0)(()=>{t._renderContentImpl()})},_getTemplate(t){var e=t;return(0,v.HD)(e)&&e.startsWith("#")&&(e=(0,p.Z)(t),f0.k.warn("Specifying grid templates with the jQuery selector name is now deprecated. Use the DOM Node or the jQuery object that references this selector instead.")),this.callBase(e)},_dispose(){this.callBase(),$.callModuleItemsMethod(this,"dispose")},isReady(){return this.getController("data").isReady()},beginUpdate(){this.callBase(),$.callModuleItemsMethod(this,"beginUpdate")},endUpdate(){$.callModuleItemsMethod(this,"endUpdate"),this.callBase()},getController(t){return this._controllers[t]},getView(t){return this._views[t]},focus(t){this.getController("keyboardNavigation").focus(t)}});Qs.registerModule=$.registerModule.bind($),(0,J.Z)("dxDataGrid",Qs);const S0=Qs;var x0=L(8589),b0=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,w0=function t(e){e&&(0,y.S6)(e,(i,a)=>{if((0,v.PO)(a)||Array.isArray(a))t(a);else if("string"==typeof a){var r=b0.exec(a);r&&(e[i]=new Date(Date.UTC(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6])))}})},y0=ne.ViewController.inherit(function(){var t=function(i){var a="sessionStorage"===i.type?(0,x0.y)():(0,Z.Jj)().localStorage;if(!a)throw new Error("E1007");return a},e=function(i){return(0,v.$K)(i.storageKey)?i.storageKey:"storage"};return{_loadState(){var i=this.option("stateStoring");if("custom"===i.type)return i.customLoad&&i.customLoad();try{return JSON.parse(t(i).getItem(e(i)))}catch(a){ee.Z.log("W1022","State storing",a.message)}},_saveState(i){var a=this.option("stateStoring");if("custom"!==a.type)try{t(a).setItem(e(a),JSON.stringify(i))}catch(r){ee.Z.log(r.message)}else a.customSave&&a.customSave(i)},publicMethods:()=>["state"],isEnabled(){return this.option("stateStoring.enabled")},init(){var i=this;return i._state={},i._isLoaded=!1,i._isLoading=!1,i._windowUnloadHandler=function(){void 0!==i._savingTimeoutID&&i._saveState(i.state())},S.Z.on((0,Z.Jj)(),"unload",i._windowUnloadHandler),i},isLoaded(){return this._isLoaded},isLoading(){return this._isLoading},load(){this._isLoading=!0;var i=(0,b.p4)(this._loadState());return i.always(()=>{this._isLoaded=!0,this._isLoading=!1}).done(a=>{null!==a&&!(0,v.Qr)(a)&&this.state(a)}),i},state(i){if(!arguments.length)return(0,C.l)(!0,{},this._state);this._state=(0,C.l)({},i),w0(this._state)},save(){var i=this;clearTimeout(i._savingTimeoutID),i._savingTimeoutID=setTimeout(()=>{i._saveState(i.state()),i._savingTimeoutID=void 0},i.option("stateStoring.savingTimeout"))},optionChanged(i){"stateStoring"===i.name?(this.isEnabled()&&!this.isLoading()&&this.load(),i.handled=!0):this.callBase(i)},dispose(){clearTimeout(this._savingTimeoutID),S.Z.off((0,Z.Jj)(),"unload",this._windowUnloadHandler)}}}()),O0={defaultOptions:()=>({stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}),controllers:{stateStoring:y0},extenders:{views:{rowsView:{init(){var t=this,e=t.getController("data");t.callBase(),e.stateLoaded.add(()=>{if(e.isLoaded()&&!e.getDataSource()){t.setLoading(!1),t.renderNoDataText();var i=t.component.getView("columnHeadersView");i&&i.render(),t.component._fireContentReadyAction()}})}}},controllers:{stateStoring:{init(){this.callBase.apply(this,arguments),(t=>{var e=t.getController("columns"),i=t.getController("selection"),a=t.getController("export"),r=t.getController("data");e&&e.columnsChanged.add(()=>{t.updateState({columns:e.getUserState()})}),i&&i.selectionChanged.add(n=>{t.updateState({selectedRowKeys:n.selectedRowKeys,selectionFilter:n.selectionFilter})}),r&&(t._initialPageSize=t.option("paging.pageSize"),t._initialFilterValue=t.option("filterValue"),r.changed.add(()=>{var n=(t=>{var e=t.getView("pagerView"),i=t.getController("data"),a={allowedPageSizes:e?e.getPageSizes():void 0,filterPanel:{filterEnabled:t.option("filterPanel.filterEnabled")},filterValue:t.option("filterValue"),focusedRowKey:t.option("focusedRowEnabled")?t.option("focusedRowKey"):void 0};return(0,C.l)(a,i.getUserState())})(t);t.updateState(n)})),a&&a.selectionOnlyChanged.add(()=>{t.updateState({exportSelectionOnly:a.selectionOnly()})})})(this)},isLoading(){return this.callBase()||this.getController("data").isStateLoading()},state(t){var e=this.callBase.apply(this,arguments);return void 0!==t&&this.applyState((0,C.l)(!0,{},t)),e},updateState(t){if(this.isEnabled()){var e=this.state(),i=(0,C.l)({},e,t),a=(0,E.k3)(e),r=(0,E.k3)(i);(0,E.bY)(a,r)||(t=(0,C.l)(!0,{},t),(0,C.l)(this._state,t),this.save())}else(0,C.l)(this._state,t)},applyState(t){var e,{allowedPageSizes:i}=t,{searchText:a}=t,{selectedRowKeys:r}=t,{selectionFilter:n}=t,s=this.getController("export"),o=this.getController("columns"),l=this.getController("data"),d=this.option("scrolling.mode"),u="virtual"===d||"infinite"===d,h=!0===this.option("pager.visible")&&this.option("pager.showPageSizeSelector"),c=null===(e=this.getView("rowsView"))||void 0===e?void 0:e.hasHeight();this.component.beginUpdate(),o&&o.setUserState(t.columns),s&&s.selectionOnly(t.exportSelectionOnly),this.option("selection.deferred")||this.option("selectedRowKeys",r||[]),this.option("selectionFilter",n),i&&"auto"===this.option("pager.allowedPageSizes")&&(this.option("pager").allowedPageSizes=i),this.option("focusedRowEnabled")&&(this.option("focusedRowIndex",-1),this.option("focusedRowKey",t.focusedRowKey||null)),this.component.endUpdate(),this.option("searchPanel.text",a||""),this.option("filterValue",((t,e)=>{var i=t.getController("filterSync"),a=t.getController("columns");return i?e.columns||void 0!==e.filterValue?e.filterValue||i.getFilterValueFromColumns(e.columns):t._initialFilterValue||i.getFilterValueFromColumns(a.getColumns()):null})(this,t)),this.option("filterPanel.filterEnabled",!t.filterPanel||t.filterPanel.filterEnabled),this.option("paging.pageIndex",(!u||c)&&t.pageIndex||0),this.option("paging.pageSize",u&&!h||!(0,v.$K)(t.pageSize)?this._initialPageSize:t.pageSize),l&&l.reset()}},columns:{_shouldReturnVisibleColumns(){var t=this.callBase.apply(this,arguments),e=this.getController("stateStoring");return t&&(!e.isEnabled()||e.isLoaded())}},data:{callbackNames(){return this.callBase().concat(["stateLoaded"])},_refreshDataSource(){var{callBase:t}=this,e=this.getController("stateStoring");if(e.isEnabled()&&!e.isLoaded()){clearTimeout(this._restoreStateTimeoutID);var i=new b.BH;return this._restoreStateTimeoutID=setTimeout(()=>{e.load().always(()=>{this._restoreStateTimeoutID=null}).done(()=>{t.call(this),this.stateLoaded.fire(),i.resolve()}).fail(a=>{this.stateLoaded.fire(),this._handleLoadError(a||"Unknown error"),i.reject()})}),i.promise()}this.isStateLoading()||t.call(this)},isLoading(){var t=this.getController("stateStoring");return this.callBase()||t.isLoading()},isStateLoading(){return(0,v.$K)(this._restoreStateTimeoutID)},isLoaded(){return this.callBase()&&!this.isStateLoading()},dispose(){clearTimeout(this._restoreStateTimeoutID),this.callBase()}},selection:{_fireSelectionChanged(t){var e=this.getController("stateStoring"),i=this.option("selection.deferred");e.isLoading()&&i||this.callBase.apply(this,arguments)}}}}};$.registerModule("stateStoring",O0);var lc="dx-editor-cell",dc="dx-selection",ui="dx-select-checkbox",uc="dx-command-select",hc="dx-data-row",ft="selection.showCheckBoxesMode",Ea="selection.mode",cc=function(t,e){var i=t.getController("selection"),a=t.getView("rowsView"),r=(0,p.Z)(e.target).closest(".".concat(hc)),n=a.getRowIndex(r);n<0||("onLongTap"===t.option(ft)?i.isSelectionWithCheckboxes()?i.stopSelectionWithCheckboxes():i.startSelectionWithCheckboxes():("onClick"===t.option(ft)&&i.startSelectionWithCheckboxes(),"always"!==t.option(ft)&&i.changeItemSelection(n,{control:!0})))},P0=(t,e)=>{var{component:i}=e,a=i.getView("rowsView");i.option("renderAsync")&&!i.option("selection.deferred")&&(e.value=i.isRowSelected(e.row.key)),a.renderSelectCheckBoxContainer((0,p.Z)(t),e)},F0=(t,e)=>{var{column:i}=e,a=(0,p.Z)(t),r=e.component.getView("columnHeadersView");a.addClass(lc),r._renderSelectAllCheckBox(a,i),r._attachSelectAllCheckBoxClickEvent(a)},k0={defaultOptions:()=>({selection:{mode:"none",showCheckBoxesMode:"onClick",allowSelectAll:!0,selectAllMode:"allPages",maxFilterLengthInRequest:1500,deferred:!1},selectionFilter:[],selectedRowKeys:[]}),controllers:{selection:class M0 extends ne.Controller{init(){var e,{deferred:i,selectAllMode:a,mode:r}=null!==(e=this.option("selection"))&&void 0!==e?e:{};"infinite"===this.option("scrolling.mode")&&!i&&"multiple"===r&&"allPages"===a&&ee.Z.log("W1018"),this._dataController=this.getController("data"),this._selectionMode=r,this._isSelectionWithCheckboxes=!1,this._selection=this._createSelection(),this._updateSelectColumn(),this.createAction("onSelectionChanged",{excludeValidators:["disabled","readOnly"]}),this._dataPushedHandler||(this._dataPushedHandler=this._handleDataPushed.bind(this),this._dataController.pushed.add(this._dataPushedHandler))}_handleDataPushed(e){this._deselectRemovedOnPush(e),this._updateSelectedOnPush(e)}_deselectRemovedOnPush(e){var i=this.option("selection.deferred"),a=e.filter(n=>"remove"===n.type).map(n=>n.key);if(i){var r=this._dataController.items().filter(n=>n.isSelected).map(n=>n.key);a=a.filter(n=>r.find(s=>(0,E.bY)(s,n)))}a.length&&this.deselectRows(a)}_updateSelectedOnPush(e){if(!this.option("selection.deferred")){var a=e.filter(n=>"update"===n.type),r=this.getSelectedRowsData();(0,Fe.ii)({keyInfo:this._selection.options,data:r,changes:a})}}_getSelectionConfig(){var e,i=this._dataController,a=this.getController("columns"),r=null!==(e=this.option("selection"))&&void 0!==e?e:{},{deferred:n}=r,s=this.option("scrolling.mode"),o="virtual"===s||"infinite"===s,l=this.option("selection.allowSelectAll"),d=this.option("scrolling.legacyMode");return{selectedKeys:this.option("selectedRowKeys"),mode:this._selectionMode,deferred:n,maxFilterLengthInRequest:r.maxFilterLengthInRequest,selectionFilter:this.option("selectionFilter"),ignoreDisabledItems:!0,allowLoadByRange(){var u=a.getGroupColumns().length>0;return o&&!d&&!u&&l&&!n},key:()=>i?.key(),keyOf:u=>i?.keyOf(u),dataFields(){var u;return null===(u=i.dataSource())||void 0===u?void 0:u.select()},load(u){var h;return(null===(h=i.dataSource())||void 0===h?void 0:h.load(u))||(new b.BH).resolve([])},plainItems:()=>i.items(!0),isItemSelected:u=>u.selected,isSelectableItem:u=>"data"===u?.rowType&&!u.isNewRow,getItemData:u=>(0,v.$K)(u?.rowType)?u?.oldData||u?.data:u,filter:()=>i.getCombinedFilter(n),totalCount:()=>i.totalCount(),getLoadOptions(u,h,c){var _,g,{sort:f,filter:m}=null!==(g=null===(_=i.dataSource())||void 0===_?void 0:_.lastLoadOptions())&&void 0!==g?g:{},x=Math.min(u,h),w=Math.max(u,h);return(0,v.$K)(c)&&(x=Math.min(c,x),w=Math.max(c,w)),{skip:x,take:w-x+1,filter:m,sort:f}},onSelectionChanged:this._updateSelectedItems.bind(this)}}_updateSelectColumn(){var e=this.getController("columns"),i=this.isSelectColumnVisible();e.addCommandColumn({type:"selection",command:"select",visible:i,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:uc,width:"auto",cellTemplate:P0,headerCellTemplate:F0}),e.columnOption("command:select","visible",i)}_createSelection(){var e=this._getSelectionConfig();return new sh(e)}_fireSelectionChanged(e){var i=this.option("selection.deferred")?{selectionFilter:this.option("selectionFilter")}:{selectedRowKeys:this.option("selectedRowKeys")};this.selectionChanged.fire(i),e&&this.executeAction("onSelectionChanged",e)}_updateCheckboxesState(e){var{isDeferredMode:i}=e,{selectionFilter:a}=e,{selectedItemKeys:r}=e,{removedItemKeys:n}=e;"onClick"===this.option(ft)&&((i?a&&function(t,e){var i=0,a=t._dataController.store(),r=a&&a.key(),n=Array.isArray(r);if(!e.length)return!1;if(n&&Array.isArray(e[0])&&"and"===e[1]){for(var s=0;s<e.length;s++)if(Array.isArray(e[s])){if(e[s][0]!==r[i]||"="!==e[s][1])return!0;i++}return!1}return r!==e[0]}(this,a):r.length>1)?this.startSelectionWithCheckboxes():(i?a&&!a.length:0===r.length&&n.length)&&this.stopSelectionWithCheckboxes())}_updateSelectedItems(e){var i,a=this.option("selection.deferred"),r=this._selection.selectionFilter(),n=this._dataController,s=n.items(!0),o=n.items();if(s){var l=this.isSelectionWithCheckboxes(),d=this.getChangedItemIndexes(s),u=this.getChangedItemIndexes(o);this._updateCheckboxesState({selectedItemKeys:e.selectedItemKeys,removedItemKeys:e.removedItemKeys,selectionFilter:r,isDeferredMode:a}),(d.length||l!==this.isSelectionWithCheckboxes())&&n.updateItems({changeType:"updateSelection",itemIndexes:u}),a?(this.option("selectionFilter",r),i={}):(e.addedItemKeys.length||e.removedItemKeys.length)&&(this._selectedItemsInternalChange=!0,this.option("selectedRowKeys",e.selectedItemKeys.slice(0)),this._selectedItemsInternalChange=!1,i={selectedRowsData:e.selectedItems.slice(0),selectedRowKeys:e.selectedItemKeys.slice(0),currentSelectedRowKeys:e.addedItemKeys.slice(0),currentDeselectedRowKeys:e.removedItemKeys.slice(0)}),this._fireSelectionChanged(i)}}getChangedItemIndexes(e){for(var i=[],a=this.option("selection.deferred"),r=0,{length:n}=e;r<n;r++){var s=e[r],o=this.isRowSelected(a?s.data:s.key);this._selection.isDataItem(s)&&s.isSelected!==o&&i.push(r)}return i}callbackNames(){return["selectionChanged"]}optionChanged(e){switch(super.optionChanged(e),e.name){case"selection":var i=this._selectionMode;if(this.init(),"selection.showCheckBoxesMode"!==e.fullName){var a=this._selectionMode,r=this.option("selectedRowKeys");i!==a&&("single"===a?r.length>1&&(r=[r[0]]):"multiple"!==a&&(r=[])),this.selectRows(r).always(()=>{this._fireSelectionChanged()})}this.getController("columns").updateColumns(),e.handled=!0;break;case"selectionFilter":this._selection.selectionFilter(e.value),e.handled=!0;break;case"selectedRowKeys":var n=e.value||[];Array.isArray(n)&&!this._selectedItemsInternalChange&&(this.component.getDataSource()||!n.length)&&this.selectRows(n),e.handled=!0}}publicMethods(){return["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","deselectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"]}isRowSelected(e){return this._selection.isItemSelected(e)}isSelectColumnVisible(){return"multiple"===this.option(Ea)&&("always"===this.option(ft)||"onClick"===this.option(ft)||this._isSelectionWithCheckboxes)}_isOnePageSelectAll(){return"page"===this.option("selection.selectAllMode")}isSelectAll(){return this._selection.getSelectAllState(this._isOnePageSelectAll())}selectAll(){return"onClick"===this.option(ft)&&this.startSelectionWithCheckboxes(),this._selection.selectAll(this._isOnePageSelectAll())}deselectAll(){return this._selection.deselectAll(this._isOnePageSelectAll())}clearSelection(){return this.selectedItemKeys([])}refresh(){var e,i=null!==(e=this.option("selectedRowKeys"))&&void 0!==e?e:[];return!this.option("selection.deferred")&&i.length?this.selectedItemKeys(i):(new b.BH).resolve().promise()}selectedItemKeys(e,i,a,r){return this._selection.selectedItemKeys(e,i,a,r)}getSelectedRowKeys(){return this._selection.getSelectedItemKeys()}selectRows(e,i){return this.selectedItemKeys(e,i)}deselectRows(e){return this.selectedItemKeys(e,!0,!0)}selectRowsByIndexes(e){var i=this._dataController.items(),a=[];return Array.isArray(e)||(e=Array.prototype.slice.call(arguments,0)),(0,y.S6)(e,function(){var r=i[this];r&&"data"===r.rowType&&a.push(r.key)}),this.selectRows(a)}getSelectedRowsData(){return this._selection.getSelectedItems()}loadSelectedItemsWithFilter(){return this._selection.loadSelectedItemsWithFilter()}changeItemSelection(e,i,a){i=i||{},this.isSelectionWithCheckboxes()&&(i.control=!0);var r=e+this._dataController.getRowIndexOffset()-this._dataController.getRowIndexOffset(!0);return this._selection.changeItemSelection(r,i,a)}focusedItemIndex(e){if(!(0,v.$K)(e))return this._selection._focusedItemIndex;this._selection._focusedItemIndex=e}isSelectionWithCheckboxes(){return"multiple"===this.option(Ea)&&("always"===this.option(ft)||this._isSelectionWithCheckboxes)}startSelectionWithCheckboxes(){return"multiple"===this.option(Ea)&&!this.isSelectionWithCheckboxes()&&(this._isSelectionWithCheckboxes=!0,this._updateSelectColumn(),!0)}stopSelectionWithCheckboxes(){return!!this._isSelectionWithCheckboxes&&(this._isSelectionWithCheckboxes=!1,this._updateSelectColumn(),!0)}}},extenders:{controllers:{data:{init(){var t=this.getController("selection"),e=this.option("selection.deferred");this.callBase.apply(this,arguments),e&&t._updateCheckboxesState({isDeferredMode:!0,selectionFilter:this.option("selectionFilter")})},_loadDataSource(){var t=this;return t.callBase().always(()=>{t.getController("selection").refresh()})},_processDataItem(t,e){var i=this.getController("selection"),a=i.isSelectColumnVisible(),r=e.isDeferredSelection=void 0===e.isDeferredSelection?this.option("selection.deferred"):e.isDeferredSelection,n=this.callBase.apply(this,arguments);if(n.isSelected=i.isRowSelected(r?n.data:n.key),a&&n.values)for(var s=0;s<e.visibleColumns.length;s++)if("select"===e.visibleColumns[s].command){n.values[s]=n.isSelected;break}return n},refresh(t){var e=this,i=new b.BH;return this.callBase.apply(this,arguments).done(()=>{!t||t.selection?e.getController("selection").refresh().done(i.resolve).fail(i.reject):i.resolve()}).fail(i.reject),i.promise()},_handleDataChanged(t){this.callBase.apply(this,arguments),(!t||"refresh"===t.changeType)&&!this._repaintChangesOnly&&this.getController("selection").focusedItemIndex(-1)},_applyChange(t){if(!t||"updateSelection"!==t.changeType)return this.callBase.apply(this,arguments);t.items.forEach((e,i)=>{var a=this._items[i];a&&(a.isSelected=e.isSelected,a.values=e.values)})},_endUpdateCore(){var t=this._changes,e=t.length>1&&t.every(a=>"updateSelection"===a.changeType);if(e){var i=t.map(a=>a.itemIndexes||[]).reduce((a,r)=>a.concat(r));this._changes=[{changeType:"updateSelection",itemIndexes:i}]}this.callBase.apply(this,arguments)}},contextMenu:{_contextMenuPrepared(t){var e=t.event;e.originalEvent&&"dxhold"!==e.originalEvent.type||t.items&&t.items.length>0||cc(this,e)}}},views:{columnHeadersView:{init(){this.callBase(),this.getController("selection").selectionChanged.add(this._updateSelectAllValue.bind(this))},_updateSelectAllValue(){var t=this.element(),e=t&&t.find(".".concat(ui));if(t&&e.length&&"multiple"===this.option("selection.mode")){var i=this.getController("selection").isSelectAll(),a=!1!==i,r=this.option("selection.allowSelectAll")?!this.getController("data").isEmpty():a;e.dxCheckBox("instance").option({visible:r,value:i})}},_handleDataChanged(t){this.callBase(t),(!t||"refresh"===t.changeType||t.repaintChangesOnly&&"update"===t.changeType)&&this.waitAsyncTemplates().done(()=>{this._updateSelectAllValue()})},_renderSelectAllCheckBox(t,e){var i=this,a=i.getController("selection"),r=i.getController("data").isEmpty(),n=(0,p.Z)("<div>").appendTo(t).addClass(ui);return i.setAria("label",A.Z.format("dxDataGrid-ariaSelectAll"),n),i.getController("editorFactory").createEditor(n,(0,C.l)({},e,{parentType:"headerRow",dataType:"boolean",value:a.isSelectAll(),editorOptions:{visible:!r&&(i.option("selection.allowSelectAll")||!1!==a.isSelectAll())},tabIndex:i.option("useLegacyKeyboardNavigation")?-1:i.option("tabIndex")||0,setValue(s,o){var l=i.option("selection.allowSelectAll");o.component.option("visible",l||!1!==o.component.option("value")),o.event&&a.isSelectAll()!==s&&(o.value&&!l?o.component.option("value",!1):o.value?a.selectAll():a.deselectAll(),o.event.preventDefault())}})),n},_attachSelectAllCheckBoxClickEvent(t){S.Z.on(t,ie.u,this.createAction(e=>{var{event:i}=e;(0,p.Z)(i.target).closest(".".concat(ui)).length||S.Z.trigger((0,p.Z)(i.currentTarget).children(".".concat(ui)),ie.u),i.preventDefault()}))}},rowsView:{renderSelectCheckBoxContainer(t,e){"data"!==e.rowType||e.row.isNewRow?V.setEmptyText(t):(t.addClass(lc),this._attachCheckBoxClickEvent(t),this._renderSelectCheckBox(t,e))},_renderSelectCheckBox(t,e){var i=(0,p.Z)("<div>").addClass(ui).appendTo(t);return this.setAria("label",A.Z.format("dxDataGrid-ariaSelectRow"),i),this.getController("editorFactory").createEditor(i,(0,C.l)({},e.column,{parentType:"dataRow",dataType:"boolean",lookup:null,value:e.value,setValue(a,r){var n;"keydown"===(null===(n=r?.event)||void 0===n?void 0:n.type)&&S.Z.trigger(r.element,ie.u,r)},row:e.row})),i},_attachCheckBoxClickEvent(t){S.Z.on(t,ie.u,this.createAction(function(e){var i=this.getController("selection"),{event:a}=e,r=this.getRowIndex((0,p.Z)(a.currentTarget).closest(".".concat("dx-row")));r>=0&&(i.startSelectionWithCheckboxes(),i.changeItemSelection(r,{shift:a.shiftKey}),(0,p.Z)(a.target).closest(".".concat(ui)).length&&this.getController("data").updateItems({changeType:"updateSelection",itemIndexes:[r]}))}))},_update(t){var e=this,i=e.getTableElements();"updateSelection"===t.changeType?i.length>0&&((0,y.S6)(i,(a,r)=>{(0,y.S6)(t.itemIndexes||[],(n,s)=>{var o;if(t.items[s]&&(o=e._getRowElements((0,p.Z)(r)).eq(s)).length){var{isSelected:l}=t.items[s];o.toggleClass(dc,void 0!==l&&l).find(".".concat(ui)).dxCheckBox("option","value",l),e.setAria("selected",l,o)}})}),e._updateCheckboxesClass()):e.callBase(t)},_createTable(){var t=this,e=t.option("selection.mode"),i=t.callBase.apply(t,arguments);return"none"!==e&&(("onLongTap"===t.option(ft)||!Ue.touch)&&S.Z.on(i,(0,D.V4)(zt_name,"dxDataGridRowsView"),".".concat(hc),t.createAction(a=>{cc(t.component,a.event),a.event.stopPropagation()})),S.Z.on(i,"mousedown selectstart",t.createAction(a=>{var{event:r}=a;r.shiftKey&&r.preventDefault()}))),i},_createRow(t){var e=this.callBase.apply(this,arguments);if(t){var{isSelected:i}=t;i&&e.addClass(dc),"none"!==this.option(Ea)&&this.setAria("selected",i,e)}return e},_rowClick(t){var e=t.event,i=(0,p.Z)(e.target).closest(".".concat("dx-selection-disabled")).length;this.isClickableElement((0,p.Z)(e.target))||(!i&&("multiple"!==this.option(Ea)||"always"!==this.option(ft))&&this.getController("selection").changeItemSelection(t.rowIndex,{control:(0,D.j1)(e),shift:e.shiftKey})&&(e.preventDefault(),t.handled=!0),this.callBase(t))},isClickableElement:t=>!!t.closest(".".concat(uc)).length,_renderCore(t){var e=this.callBase(t);return this._updateCheckboxesClass(),e},_updateCheckboxesClass(){var t=this.getTableElements(),e=this.getController("selection"),i=e.isSelectColumnVisible()&&!e.isSelectionWithCheckboxes();(0,y.S6)(t,(a,r)=>{(0,p.Z)(r).toggleClass("dx-select-checkboxes-hidden",i)})}}}}};$.registerModule("selection",k0);var pc=L(295),_e=L(2557),Ot=L(3720),_c="dx-invalid-message-auto",vc="dx-validation-target";class eo extends pc.Z{getProps(){var e=super.getProps();return e.onFocusIn=()=>{if("auto"===this.option("validationMessageMode")){var a=(0,p.Z)(function N0(t,e){var i,a;return(null!==(i=null===(a=t.getRootNode)||void 0===a?void 0:a.call(t))&&void 0!==i?i:document).querySelector(e)}(this.element(),".dx-invalid-message.dx-overlay-wrapper"));a?.removeClass(_c),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>{a?.addClass(_c)},150)}},e.saveValueChangeEvent=i=>{this._valueChangeEventInstance=i},e}_createElement(e){super._createElement(e),this.showValidationMessageTimeout=void 0,this.validationRequest=(0,ge.Z)(),(0,Ai.aT)(this.$element()[0],vc,this)}_render(){var e;null===(e=this.option("_onMarkupRendered"))||void 0===e||e()}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(e){super._initOptions(e),this.option(_e.Z.initValidationOptions(e))}_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(e,i){var a=(0,C.l)({},e.option()),r=()=>this._silent(i,a);r(),e.on("optionChanged",r)}_raiseValidation(e,i){var a=!(0,v.$K)(e)&&!(0,v.$K)(i);e!==i&&!a&&this.validationRequest.fire({value:e,editor:this})}_raiseValueChangeAction(e,i){var a;null===(a=this._valueChangeAction)||void 0===a||a.call(this,{element:this.$element(),previousValue:i,value:e,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(e){var{name:i,previousValue:a,value:r}=e;switch(i&&void 0!==this._getActionConfigs()[i]&&this._addAction(i),i){case"value":this._raiseValidation(r,a),this._raiseValueChangeAction(r,a);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(_e.Z.synchronizeValidationOptions(e,this.option()))}super._optionChanged(e)}reset(){var{value:e}=this._getDefaultOptions();this.option({value:e})}_dispose(){super._dispose(),(0,Ai.aT)(this.element(),vc,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}}var H0=Ot.Z.isEditor,gc=t=>H0(t)||t instanceof eo;eo.isEditor=gc,Ot.Z.isEditor=gc;class Z0 extends eo{_useTemplates(){return!1}_isFocused(){return this.$element()[0].classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){var e=super.getProps();return null!==e.value&&(e.value=!!e.value),e}}var G=L(2492),te=L(7379),Ia=L(8794),fc=L(8877),zi=L(25),$0=L(7392),Ye=L(7143),z0=["dataSource","selectedRowKeys"],W0={integrationOptions:!0};function Ta(t,e,i){return{path:t,value:e,previousValue:i}}function mc(t,e,i,a,r,n){if(!W0[a]){var s=(0,v.dt)(e),o=(0,v.dt)(i);if(e!==i)if(s!==o)t.push(Ta(a,i,e));else if("object"===s)if((0,v.PO)(i)){var l=Sc(e,i,r,n);t.push(...l.map(h=>(0,M.Z)({},h,{path:"".concat(a,".").concat(h.path)})))}else t.push(Ta(a,i,e));else if("array"===s)if(n.some(h=>r.includes(h))&&e!==i)t.push(Ta(a,i,e));else if(e.length!==i.length)t.push(Ta(a,i,e));else{var u=Sc(e,i,r,n);[].push.apply(t,u.map(h=>(0,M.Z)({},h,{path:"".concat(a).concat(h.path)})))}else t.push(Ta(a,i,e))}}var Cc=t=>(e,i,a,r)=>{var n=[],s=Array.isArray(e)?o=>{mc(n,e[o],i[o],"[".concat(o,"]"),"".concat(a,".").concat(o),r)}:o=>{mc(n,e[o],i[o],o,"".concat(a,".").concat(o),r)};return t(e).forEach(s),Object.keys(i).filter(o=>!Object.prototype.hasOwnProperty.call(e,o)&&e[o]!==i[o]).forEach(o=>{n.push({path:o,value:i[o],previousValue:e[o]})}),n},Sc=Cc(t=>Object.keys(t)),K0={key:!0,ref:!0,children:!0,style:!0},G0=Cc(t=>Object.keys(t).filter(e=>!K0[e])),Y0=["valueChange"],j0=["componentProps","componentType","templateNames"],xc=t=>Object.keys(t).reduce((e,i)=>(void 0!==t[i]&&(e[i]=t[i]),e),{}),X0={};let to=(()=>{class t extends te.OS{constructor(i){super(i),this.state={},this.widgetRef=(0,G.Vf)(),this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.updateWidget=this.updateWidget.bind(this)}get config(){return this.context[Ye.E.id]?this.context[Ye.E.id]:Ye.E.defaultValue}createEffects(){return[new te.b0(this.setupWidget,[]),new te.b0(this.updateWidget,[this.props.componentProps,this.config,this.props.templateNames])]}updateEffects(){var i;null===(i=this._effects[1])||void 0===i||i.update([this.props.componentProps,this.config,this.props.templateNames])}setupWidget(){var i=new this.props.componentType(this.widgetRef.current,this.properties);return this.instance=i,()=>{i.dispose(),this.instance=null}}updateWidget(){var i=this.getInstance();if(i){var a=function U0(t,e){return G0(t,e,"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:z0)}(this.prevProps||{},this.properties);a.length&&(i.beginUpdate(),a.forEach(r=>{var{path:n,value:s}=r;i.option(n,s)}),i.endUpdate()),this.prevProps=this.properties}}get properties(){var i,a=xc(this.props.componentProps),{valueChange:r}=a,n=(0,xe.Z)(a,Y0),s=(0,M.Z)({rtlEnabled:!(null===(i=this.config)||void 0===i||!i.rtlEnabled),isRenovated:!0},n);return r&&(s.onValueChanged=l=>{var{value:d}=l;return r(d)}),this.props.templateNames.forEach(l=>{(0,te._V)(l,s,this)&&(s[l]=(d,u,h)=>{(0,te.SM)(this.props.componentProps[l],{item:d,index:u,container:h},this)})}),s}get restAttributes(){return(0,xe.Z)(this.props,j0)}getInstance(){return this.instance}render(){return(t=>{var{props:{componentProps:{className:e}},restAttributes:i,widgetRef:a}=t;return xc((0,G.Wm)(1,"div",e,null,1,(0,M.Z)({},i),null,a))})({props:(0,M.Z)({},this.props),widgetRef:this.widgetRef,config:this.config,properties:this.properties,restAttributes:this.restAttributes})}}return t.defaultProps=X0,t})();var J0=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionSide","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],eE=Object.create(Object.prototype,(0,M.Z)(Object.getOwnPropertyDescriptors(fc.O),Object.getOwnPropertyDescriptors({mode:"auto",positionSide:"top",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0})));let tE=(()=>{class t extends te.Ul{constructor(i){super(i),this.state={}}get componentProps(){return this.props}get restAttributes(){return(0,xe.Z)(this.props,J0)}render(){return(t=>{var{componentProps:e,restAttributes:i}=t;return(0,G.vs)((0,G.Iz)(2,to,(0,M.Z)({componentType:$0.Z,componentProps:e,templateNames:[]},i)))})({props:(0,M.Z)({},this.props),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return t.defaultProps=eE,t})();var iE=L(3188),aE=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],be=Object.create(Object.prototype,(0,M.Z)(Object.getOwnPropertyDescriptors(fc.O),Object.getOwnPropertyDescriptors({readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,inputAttr:Object.freeze({}),defaultValue:null,valueChange:()=>{}}))),sE={get readOnly(){return be.readOnly},get name(){return be.name},get validationError(){return be.validationError},get validationErrors(){return be.validationErrors},get validationMessageMode(){return be.validationMessageMode},get validationMessagePosition(){return be.validationMessagePosition},get validationStatus(){return be.validationStatus},get isValid(){return be.isValid},get inputAttr(){return be.inputAttr},get defaultValue(){return be.defaultValue},get valueChange(){return be.valueChange},get className(){return be.className},get activeStateEnabled(){return be.activeStateEnabled},get disabled(){return be.disabled},get focusStateEnabled(){return be.focusStateEnabled},get hoverStateEnabled(){return be.hoverStateEnabled},get tabIndex(){return be.tabIndex},get visible(){return be.visible},get aria(){return Ia.W6.aria},get classes(){return Ia.W6.classes}};class Wr extends te.DZ{constructor(e){super(e),this.widgetRef=(0,G.Vf)(),this.rootElementRef=(0,G.Vf)(),this.__getterCache={},this.state={validationMessageGuid:"dx-".concat(new Ee.Z),isValidationMessageVisible:!1,value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new te.b0(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),(0,te.gt)()]}updateEffects(){var e;null===(e=this._effects[0])||void 0===e||e.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState(e=>({isValidationMessageVisible:this.shouldShowValidationMessage}))}onFocusIn(e){var{onFocusIn:i}=this.props;i?.(e)}get cssClasses(){return"".concat((t=>{var{classes:e,isValid:i,readOnly:a}=t,r={"dx-state-readonly":!!a,"dx-invalid":!i,["".concat(e)]:!!e};return(0,zi.G)(r)})((0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})))}get shouldShowValidationMessage(){var e,{isValid:i,validationStatus:a}=this.props,r=null!==(e=this.validationErrors)&&void 0!==e?e:[];return!(i&&"invalid"!==a)&&r.length>0}get aria(){var{isValid:e,readOnly:i}=this.props,a={readonly:i?"true":"false",invalid:e?"false":"true"};return this.shouldShowValidationMessage&&(a.describedBy=this.state.validationMessageGuid),(0,M.Z)({},a,this.props.aria)}get validationErrors(){return void 0!==this.__getterCache.validationErrors?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{var{validationError:e,validationErrors:i}=this.props,a=i&&[...i];return!a&&e&&(a=[(0,M.Z)({},e)]),a})()}get validationMessageTarget(){var e;return null===(e=this.rootElementRef)||void 0===e?void 0:e.current}get restAttributes(){var e=(0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,xe.Z)(e,aE)}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(e,i,a){super.componentWillUpdate(),(this.props.validationError!==e.validationError||this.props.validationErrors!==e.validationErrors)&&(this.__getterCache.validationErrors=void 0)}render(){return(t=>{var{aria:e,cssClasses:i,isValidationMessageVisible:a,onFocusIn:r,props:{accessKey:n,activeStateEnabled:s,children:o,className:l,disabled:d,focusStateEnabled:u,height:h,hint:c,hoverStateEnabled:_,onClick:g,onKeyDown:f,rtlEnabled:m,tabIndex:x,validationMessageMode:w,validationMessagePosition:T,visible:O,width:P},restAttributes:F,rootElementRef:N,validationErrors:H,validationMessageGuid:k,validationMessageTarget:U,widgetRef:j}=t;return(0,G.vs)((0,G.Iz)(2,Ia.$L,(0,M.Z)({rootElementRef:N,aria:e,classes:i,activeStateEnabled:s,focusStateEnabled:u,hoverStateEnabled:_,accessKey:n,className:l,rtlEnabled:m,hint:c,disabled:d,height:h,width:P,onFocusIn:r,onClick:g,onKeyDown:f,tabIndex:x,visible:O},F,{children:(0,G.xJ)([o,a&&(0,G.Iz)(2,tE,{validationErrors:H,mode:w,positionSide:T,rtlEnabled:m,target:U,boundary:U,visualContainer:U,contentId:k})],0)}),null,j))})({props:(0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),validationMessageGuid:this.state.validationMessageGuid,isValidationMessageVisible:this.state.isValidationMessageVisible,rootElementRef:this.rootElementRef,widgetRef:this.widgetRef,onFocusIn:this.onFocusIn,cssClasses:this.cssClasses,shouldShowValidationMessage:this.shouldShowValidationMessage,aria:this.aria,validationErrors:this.validationErrors,validationMessageTarget:this.validationMessageTarget,restAttributes:this.restAttributes})}}function wc(t){var e,i=(0,Z.Jj)();return t?null===(e=i.getComputedStyle)||void 0===e?void 0:e.call(i,t):null}Wr.defaultProps=sE;var lE=[[22,16],[18,16]],dE=[[[12,8],[20,18]],[[16,10],[16,14]]];function yc(){var t=(0,oe.Vk)();return{isMaterialTheme:(0,oe.x2)(t),isCompactTheme:(0,oe.f5)(t)}}var pE=["isChecked","size"],vE={isChecked:!1};let gE=(()=>{class t extends te.OS{constructor(i){super(i),this.state={},this.elementRef=(0,G.Vf)(),this.__getterCache={},this.updateFontSize=this.updateFontSize.bind(this),this.setIconFontSize=this.setIconFontSize.bind(this),this.getIconSize=this.getIconSize.bind(this),this.getComputedIconSize=this.getComputedIconSize.bind(this)}createEffects(){return[new te.b0(this.updateFontSize,[this.props.isChecked,this.props.size])]}updateEffects(){var i;null===(i=this._effects[0])||void 0===i||i.update([this.props.isChecked,this.props.size])}updateFontSize(){var{isChecked:i,size:a}=this.props;if((0,Z.Ym)()&&a){var n=function cE(t,e){var i=function hE(t){var{isCompactTheme:e,isMaterialTheme:i}=yc();return dE[+t][+i][+e]}(e),a=function uE(){var{isCompactTheme:t,isMaterialTheme:e}=yc();return lE[+e][+t]}();return Math.ceil(i/a*t)}(this.getIconSize(a),i);this.setIconFontSize(n)}}setIconFontSize(i){this.elementRef.current.style.fontSize="".concat(i,"px")}getIconSize(i){return(0,v.kE)(i)?i:i.endsWith("px")?parseInt(i,10):this.getComputedIconSize()}getComputedIconSize(){var a=wc(this.elementRef.current);return parseInt(a?.width,10)}get cssStyles(){return void 0!==this.__getterCache.cssStyles?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{var{size:i}=this.props,a=(0,Ne.bh)("width",i);return{height:(0,Ne.bh)("height",i),width:a}})()}get restAttributes(){return(0,xe.Z)(this.props,pE)}componentWillUpdate(i,a,r){super.componentWillUpdate(),this.props.size!==i.size&&(this.__getterCache.cssStyles=void 0)}render(){return(t=>{var{cssStyles:e,elementRef:i}=t;return(0,G.Wm)(1,"span","dx-checkbox-icon",null,1,{style:(0,te.jk)(e)},null,i)})({props:(0,M.Z)({},this.props),elementRef:this.elementRef,setIconFontSize:this.setIconFontSize,getIconSize:this.getIconSize,getComputedIconSize:this.getComputedIconSize,cssStyles:this.cssStyles,restAttributes:this.restAttributes})}}return t.defaultProps=vE,t})();var fE=["accessKey","activeStateEnabled","aria","className","defaultValue","disabled","enableThreeStateBehavior","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","inputAttr","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],ye=Object.create(Object.prototype,(0,M.Z)(Object.getOwnPropertyDescriptors(be),Object.getOwnPropertyDescriptors({text:"",enableThreeStateBehavior:!1,activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},defaultValue:!1,valueChange:()=>{}}))),SE={get text(){return ye.text},get enableThreeStateBehavior(){return ye.enableThreeStateBehavior},get activeStateEnabled(){return ye.activeStateEnabled},get hoverStateEnabled(){return ye.hoverStateEnabled},get focusStateEnabled(){return ye.focusStateEnabled},get defaultValue(){return ye.defaultValue},get valueChange(){return ye.valueChange},get readOnly(){return ye.readOnly},get name(){return ye.name},get validationError(){return ye.validationError},get validationErrors(){return ye.validationErrors},get validationMessageMode(){return ye.validationMessageMode},get validationMessagePosition(){return ye.validationMessagePosition},get validationStatus(){return ye.validationStatus},get isValid(){return ye.isValid},get inputAttr(){return ye.inputAttr},get className(){return ye.className},get disabled(){return ye.disabled},get tabIndex(){return ye.tabIndex},get visible(){return ye.visible},get aria(){return Ia.W6.aria}};class Kr extends te.DZ{constructor(e){super(e),this.editorRef=(0,G.Vf)(),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[(0,te.gt)()]}onWidgetClick(e){var{enableThreeStateBehavior:i,readOnly:a,saveValueChangeEvent:r}=this.props;if(!a)if(r?.(e),i){var n;this.setState(o=>({value:n=null===(void 0!==this.props.value?this.props.value:o.value)||!(void 0!==this.props.value?this.props.value:o.value)&&null})),this.props.valueChange(n)}else{var s;this.setState(o=>{var l;return{value:s=!(null!==(l=void 0!==this.props.value?this.props.value:o.value)&&void 0!==l&&l)}}),this.props.valueChange(s)}}keyDown(e){var{onKeyDown:i}=this.props,{keyName:a,originalEvent:r,which:n}=e,s=i?.(e);if(null!=s&&s.cancel)return s;("space"===a||"space"===n)&&(r.preventDefault(),this.onWidgetClick(r))}get cssClasses(){return(t=>{var{text:e,value:i}=t;return(0,zi.G)({"dx-checkbox":!0,"dx-checkbox-checked":!0===i,"dx-checkbox-has-text":!!e,"dx-checkbox-indeterminate":null===i})})((0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}))}get aria(){var a={role:"checkbox",checked:null===(void 0!==this.props.value?this.props.value:this.state.value)?"mixed":"".concat(!0===(void 0!==this.props.value?this.props.value:this.state.value))};return(0,M.Z)({},a,this.props.aria)}get restAttributes(){var e=(0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,xe.Z)(e,fE)}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){return(t=>{var{aria:e,cssClasses:i,editorRef:a,keyDown:r,onWidgetClick:n,props:{accessKey:s,activeStateEnabled:o,className:l,disabled:d,focusStateEnabled:u,height:h,hint:c,hoverStateEnabled:_,iconSize:g,isValid:f,name:m,onFocusIn:x,readOnly:w,rtlEnabled:T,tabIndex:O,text:P,validationError:F,validationErrors:N,validationMessageMode:H,validationMessagePosition:k,validationStatus:U,value:j,visible:de,width:ae},restAttributes:pe}=t;return(0,G.vs)((0,G.Iz)(2,Wr,(0,M.Z)({aria:e,classes:i,onClick:n,onKeyDown:r,accessKey:s,activeStateEnabled:o,focusStateEnabled:u,hoverStateEnabled:_,className:l,disabled:d,readOnly:w,hint:c,height:h,width:ae,rtlEnabled:T,tabIndex:O,visible:de,validationError:F,validationErrors:N,validationMessageMode:H,validationMessagePosition:k,validationStatus:U,isValid:f,onFocusIn:x},pe,{children:(0,G.xJ)([(0,G.vs)((0,G.Wm)(64,"input",null,null,1,(0,M.Z)({type:"hidden",value:"".concat(j)},m&&{name:m}))),(0,G.Wm)(1,"div","dx-checkbox-container",[(0,G.Iz)(2,gE,{size:g,isChecked:!0===j}),P&&(0,G.Wm)(1,"span","dx-checkbox-text",P,0)],0)],4)}),null,a))})({props:(0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),editorRef:this.editorRef,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,cssClasses:this.cssClasses,aria:this.aria,restAttributes:this.restAttributes})}}Kr.defaultProps=SE;var Ec=[];class io extends Z0{getProps(){var e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.focus(...arguments)}blur(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","enableThreeStateBehavior","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","isValid","inputAttr","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return Kr}}(0,J.Z)("dxCheckBox",io),io.defaultOptions=function bE(t){Ec.push(t),Kr.defaultProps=Object.create(Object.prototype,(0,M.Z)(Object.getOwnPropertyDescriptors(Kr.defaultProps),Object.getOwnPropertyDescriptors(function xE(t){var e=["value"];return Object.keys(t).reduce((i,a)=>{var r=t[a];return i[e.some(s=>s===a)?"default"+a.charAt(0).toUpperCase()+a.slice(1):a]=r,i},{})}((0,iE.wt)(Ec)))))};const Aa=io;var nt="dx-treeview",ke="".concat(nt,"-node"),Rt="".concat(ke,"-container"),ao="".concat(ke,"-loadindicator"),Kt="".concat(ke,"-container-opened"),Da="".concat(ke,"-is-leaf"),Ie="".concat(nt,"-item"),wE="".concat(Ie,"-with-checkbox"),yE="".concat(Ie,"-with-custom-expander-icon"),EE="".concat(nt,"-custom-expander-icon-item-container"),IE="".concat(Ie,"-without-checkbox"),TE="".concat(Ie,"-data"),Oa="".concat(nt,"-toggle-item-visibility"),ro="".concat(nt,"-custom-collapse-icon"),no="".concat(nt,"-custom-expand-icon"),AE="".concat(nt,"-loadindicator"),DE="".concat(nt,"-loadindicator-wrapper"),Ic="".concat(nt,"-toggle-item-visibility-opened"),Gr="".concat(nt,"-select-all-item"),Tc="dx-state-invisible",Ra="dx-state-disabled",so="dxTreeView_expand",Ur="data-item-id",RE=oh.inherit({_supportedKeys:function(t){var e=r=>{var n=(0,p.Z)(this.option("focusedElement"));n.length&&(r.target=n,r.currentTarget=n,this._itemClickHandler(r,n.children("."+Ie)),this._getEventNameByOption(this.option("expandEvent"))===(0,D.V4)(ie.u,so)&&this._expandEventHandler(r))},i=r=>{r.preventDefault();var n=(0,p.Z)(this.option("focusedElement")),s=this._getCheckBoxInstance(n);if(!s.option("disabled")){var o=s.option("value");this._updateItemSelection(!o,n.find("."+Ie).get(0),!0)}},a=function(r,n){if(this.option("expandAllEnabled")){n.preventDefault();var s=(0,p.Z)(this.option("focusedElement"));if(s.length){var o=this._getItemData(s.find(".".concat(Ie)));this._toggleExpandedNestedItems([o],r)}}};return(0,C.l)(this.callBase(),{enter:this._showCheckboxes()?i:e,space:this._showCheckboxes()?i:e,asterisk:a.bind(this,!0),minus:a.bind(this,!1)})},_toggleExpandedNestedItems:function(t,e){if(t)for(var i=0,a=t.length;i<a;i++){var r=t[i],n=this._dataAdapter.getNodeByItem(r);this._toggleExpandedState(n,e),this._toggleExpandedNestedItems(r.items,e)}},_getNodeElement:function(t,e){var i=this._encodeString(t.internalFields.key);if(e)return e.$nodeByKey||(e.$nodeByKey={},this.$element().find(".".concat(ke)).each(function(){var r=(0,p.Z)(this),n=r.attr(Ur);e.$nodeByKey[n]=r})),e.$nodeByKey[i]||(0,p.Z)();var a=this.$element().get(0).querySelector("[".concat(Ur,'="').concat(i,'"]'));return(0,p.Z)(a)},_activeStateUnit:"."+Ie,_widgetClass:function(){return nt},_getDefaultOptions:function(){var t=(0,C.l)(this.callBase(),{animationEnabled:!0,dataStructure:"tree",deferRendering:!0,expandAllEnabled:!1,hasItemsExpr:"hasItems",selectNodesRecursive:!0,expandNodesRecursive:!0,showCheckBoxesMode:"none",expandIcon:null,collapseIcon:null,selectAllText:A.Z.format("dxList-selectAll"),onItemSelectionChanged:null,onItemExpanded:null,onItemCollapsed:null,scrollDirection:"vertical",useNativeScrolling:!0,virtualModeEnabled:!1,rootValue:0,focusStateEnabled:!1,selectionMode:"multiple",expandEvent:"dblclick",selectByClick:!1,createChildren:null,onSelectAllValueChanged:null});return(0,C.l)(!0,t,{integrationOptions:{useDeferUpdateForTemplates:!1}})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return!Ue.nativeScrolling},options:{useNativeScrolling:!1}}])},_initSelectedItems:E.ZT,_syncSelectionOptions:E.C$,_fireSelectionChanged:function(){(0,b.gx)(this._selectionChangePromise).done(function(){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})()}.bind(this))},_createSelectAllValueChangedAction:function(){this._selectAllValueChangedAction=this._createActionByOption("onSelectAllValueChanged",{excludeValidators:["disabled","readOnly"]})},_fireSelectAllValueChanged:function(t){this._selectAllValueChangedAction({value:t})},_checkBoxModeChange:function(t,e){if("none"!==e&&"none"!==t){var i=this._$selectAllItem&&this._$selectAllItem.length;switch(t){case"selectAll":i||(this._createSelectAllValueChangedAction(),this._renderSelectAllItem());break;case"normal":i&&(this._$selectAllItem.remove(),delete this._$selectAllItem)}}},_removeSelection:function(){var t=this;(0,y.S6)(this._dataAdapter.getFullData(),function(e,i){t._hasChildren(i)&&t._dataAdapter.toggleSelection(i.internalFields.key,!1,!0)})},_optionChanged:function(t){var{name:e,value:i,previousValue:a}=t;switch(e){case"selectAllText":this._$selectAllItem&&this._$selectAllItem.dxCheckBox("instance").option("text",i);break;case"showCheckBoxesMode":this._checkBoxModeChange(i,a),this._invalidate();break;case"scrollDirection":this.getScrollable().option("direction",i);break;case"useNativeScrolling":this.getScrollable().option("useNative",i);break;case"items":delete this._$selectAllItem,this.callBase(t);break;case"dataSource":this.callBase(t),this._initDataAdapter(),this._filter={};break;case"hasItemsExpr":this._initAccessors(),this.repaint();break;case"expandEvent":this._initExpandEvent();break;case"deferRendering":case"dataStructure":case"rootValue":case"createChildren":case"expandNodesRecursive":case"onItemSelectionChanged":case"onItemExpanded":case"onItemCollapsed":case"expandAllEnabled":case"animationEnabled":case"virtualModeEnabled":case"selectByClick":break;case"selectionMode":this._initDataAdapter(),this.callBase(t);break;case"onSelectAllValueChanged":this._createSelectAllValueChangedAction();break;case"selectNodesRecursive":this._dataAdapter.setOption("recursiveSelection",t.value),this.repaint();break;case"expandIcon":case"collapseIcon":this.repaint();break;default:this.callBase(t)}},_initDataSource:function(){this._useCustomChildrenLoader()?this._loadChildrenByCustomLoader(null).done(function(t){t&&t.length&&this.option("items",t)}.bind(this)):(this.callBase(),this._isVirtualMode()&&this._initVirtualMode())},_initVirtualMode:function(){var t=this._filter;t.custom||(t.custom=this._dataSource.filter()),t.internal||(t.internal=[this.option("parentIdExpr"),this.option("rootValue")])},_useCustomChildrenLoader:function(){return(0,v.mf)(this.option("createChildren"))&&this._isDataStructurePlain()},_loadChildrenByCustomLoader:function(t){var e=this.option("createChildren").call(this,t);return Array.isArray(e)?(new b.BH).resolve(e).promise():e&&(0,v.mf)(e.then)?(0,b.p4)(e):(new b.BH).resolve([]).promise()},_combineFilter:function(){return this._filter.custom&&this._filter.custom.length?[this._filter.custom,this._filter.internal]:this._filter.internal},_dataSourceLoadErrorHandler:function(){this._renderEmptyMessage()},_init:function(){this._filter={},this.callBase(),this._initStoreChangeHandlers()},_dataSourceChangedHandler:function(t){var e=this.option("items");this._initialized&&this._isVirtualMode()&&e.length||this.option("items",t)},_removeTreeViewLoadIndicator:function(){this._treeViewLoadIndicator&&(this._treeViewLoadIndicator.remove(),this._treeViewLoadIndicator=null)},_createTreeViewLoadIndicator:function(){return this._treeViewLoadIndicator=(0,p.Z)("<div>").addClass(AE),this._createComponent(this._treeViewLoadIndicator,it.Z,{}),this._treeViewLoadIndicator},_dataSourceLoadingChangedHandler:function(t){var e;if(this._isVirtualMode()&&(e=this._combineFilter(),this._dataSource.filter(e)),t&&!this._dataSource.isLoaded()){this.option("items",[]);var i=(0,p.Z)("<div>").addClass(DE);this._createTreeViewLoadIndicator().appendTo(i),this.itemsContainer().append(i),this._isVirtualMode()&&this._dataSource.filter()!==e&&this._dataSource.filter([])}else this._removeTreeViewLoadIndicator()},_initStoreChangeHandlers:function(){"plain"===this.option("dataStructure")&&this._dataSource&&this._dataSource.store().on("inserted",t=>{this.option().items=this.option("items").concat(t),this._dataAdapter.addItem(t),this._dataAdapter.isFiltered(t)&&this._updateLevel(this._parentIdGetter(t))}).on("removed",t=>{var e=this._dataAdapter.getNodeByKey(t);(0,v.$K)(e)&&(this.option("items")[this._dataAdapter.getIndexByKey(e.internalFields.key)]=0,this._markChildrenItemsToRemove(e),this._removeItems(),this._dataAdapter.removeItem(t),this._updateLevel(this._parentIdGetter(e)))})},_markChildrenItemsToRemove:function(t){(0,y.S6)(t.internalFields.childrenKeys,(i,a)=>{this.option("items")[this._dataAdapter.getIndexByKey(a)]=0,this._markChildrenItemsToRemove(this._dataAdapter.getNodeByKey(a))})},_removeItems:function(){var t=(0,C.l)(!0,[],this.option("items")),e=0;(0,y.S6)(t,(i,a)=>{a||(this.option("items").splice(i-e,1),e++)})},_updateLevel:function(t){var e=this._getContainerByParentKey(t);this._renderItems(e,this._dataAdapter.getChildrenNodes(t))},_getOldContainer:function(t){if(t.length)return t.children(".".concat(Rt));var e=this.getScrollable();return e?(0,p.Z)(e.content()).children():(0,p.Z)()},_getContainerByParentKey:function(t){var e=this._dataAdapter.getNodeByKey(t),i=e?this._getNodeElement(e):[];this._getOldContainer(i).remove();var a=this._renderNodeContainer(i);if(this._isRootLevel(t)){var r=this.getScrollable();r||this._renderScrollableContainer(),(0,p.Z)(r.content()).append(a)}return a},_isRootLevel:function(t){return t===this.option("rootValue")},_getAccessors:function(){var t=this.callBase();return t.push("hasItems"),t},_getDataAdapterOptions:function(){var t,e,i;return{rootValue:this.option("rootValue"),multipleSelection:!this._isSingleSelection(),recursiveSelection:this._isRecursiveSelection(),recursiveExpansion:this.option("expandNodesRecursive"),selectionRequired:this.option("selectionRequired"),dataType:this.option("dataStructure"),sort:this._dataSource&&this._dataSource.sort(),langParams:null===(t=this._dataSource)||void 0===t||null===(e=t.loadOptions)||void 0===e||null===(i=e.call(t))||void 0===i?void 0:i.langParams}},_initMarkup:function(){this._renderScrollableContainer(),this._renderEmptyMessage(this._dataAdapter.getRootNodes()),this.callBase(),this.setAria("role","tree")},_renderContentImpl:function(){var t=this._renderNodeContainer();(0,p.Z)(this.getScrollable().content()).append(t),this.option("items")&&this.option("items").length&&(this._renderItems(t,this._dataAdapter.getRootNodes()),this._initExpandEvent(),this._selectAllEnabled()&&(this._createSelectAllValueChangedAction(),this._renderSelectAllItem(t)))},_isVirtualMode:function(){return this.option("virtualModeEnabled")&&this._isDataStructurePlain()&&!!this.option("dataSource")},_isDataStructurePlain:function(){return"plain"===this.option("dataStructure")},_fireContentReadyAction:function(){var t=this.getDataSource(),e=t&&!t.isLoaded()||this._skipContentReadyAndItemExpanded,i=this.getScrollable();i&&(0,Z.Ym)()&&i.update(),e||this.callBase(),i&&(0,Z.Ym)()&&i.update()},_renderScrollableContainer:function(){this._scrollable=this._createComponent((0,p.Z)("<div>").appendTo(this.$element()),_t,{useNative:this.option("useNativeScrolling"),direction:this.option("scrollDirection"),useKeyboard:!1})},_renderNodeContainer:function(t){var e=(0,p.Z)("<ul>").addClass(Rt);if(this.setAria("role","group",e),t&&t.length){var i=this._getItemData(t.children("."+Ie));this._expandedGetter(i)&&e.addClass(Kt),e.appendTo(t)}return e},_createDOMElement:function(t,e){var i,a,r=(0,p.Z)("<li>").addClass(ke).attr(Ur,this._encodeString(e.internalFields.key)).prependTo(t),n={role:"treeitem",label:this._displayGetter(e.internalFields.item)||"",level:this._getLevel(t)};return!(null==e||null===(i=e.internalFields)||void 0===i||null===(a=i.childrenKeys)||void 0===a||!a.length)&&(n.expanded=e.internalFields.expanded||!1),this.setAria(n,r),r},_getLevel:function(t){var e=t.parent();return e.hasClass("dx-scrollable-content")?1:parseInt(e.attr("aria-level"))+1},_showCheckboxes:function(){return"none"!==this.option("showCheckBoxesMode")},_hasCustomExpanderIcons:function(){return this.option("expandIcon")||this.option("collapseIcon")},_selectAllEnabled:function(){return"selectAll"===this.option("showCheckBoxesMode")&&!this._isSingleSelection()},_renderItems:function(t,e){for(var a=e.length-1;a>=0;a--)this._renderItem(a,e[a],t);this._renderedItemsCount+=e.length},_renderItem:function(t,e,i){var a=this._createDOMElement(i,e),r=e.internalFields,n=this._showCheckboxes();a.addClass(n?wE:IE),a.toggleClass(Tc,!1===r.item.visible),this._hasCustomExpanderIcons()&&(a.addClass(yE),i.addClass(EE)),n&&this._renderCheckBox(a,e),this.setAria("selected",r.selected,a),this._toggleSelectedClass(a,r.selected),r.disabled&&this.setAria("disabled",r.disabled,a),this.callBase(this._renderedItemsCount+t,r.item,a),!1!==r.item.visible&&this._renderChildren(a,e)},_setAriaSelectionAttribute:E.ZT,_renderChildren:function(t,e){this._hasChildren(e)?(this._hasCustomExpanderIcons()?this._renderCustomExpanderIcons(t,e):this._renderDefaultExpanderIcons(t,e),(!this.option("deferRendering")||e.internalFields.expanded)&&this._loadSublevel(e).done(i=>{this._renderSublevel(t,this._getActualNode(e),i)})):this._addLeafClass(t)},_getActualNode:function(t){return this._dataAdapter.getNodeByKey(t.internalFields.key)},_hasChildren:function(t){return this._isVirtualMode()||this._useCustomChildrenLoader()?!1!==this._hasItemsGetter(t.internalFields.item):this.callBase(t)},_loadSublevel:function(t){var e=new b.BH,i=this._getChildNodes(t);return i.length?e.resolve(i):this._loadNestedItems(t).done(a=>{e.resolve(this._dataAdapter.getNodesByItems(a))}),e.promise()},_renderSublevel:function(t,e,i){var a=this._renderNodeContainer(t,e),r=i.filter(s=>-1!==e.internalFields.childrenKeys.indexOf(s.internalFields.key));if(this._renderItems(a,r),r.length&&!e.internalFields.selected){var n=r[0];this._updateParentsState(n,this._getNodeElement(n))}this._normalizeIconState(t,r.length),e.internalFields.expanded&&a.addClass(Kt)},_executeItemRenderAction:function(t,e,i){var a=this._getNode(i);this._getItemRenderAction()({itemElement:i,itemIndex:t,itemData:e,node:this._dataAdapter.getPublicNode(a)})},_addLeafClass:function(t){t.addClass(Da)},_expandEventHandler:function(t){(0,p.Z)(t.currentTarget.parentNode).hasClass(Da)||this._toggleExpandedState(t.currentTarget,void 0,t)},_initExpandEvent:function(){var t=this._getEventNameByOption(this.option("expandEvent")),e=this._itemContainer(),i=this._itemSelector();S.Z.off(e,"."+so,i),S.Z.on(e,t,i,this._expandEventHandler.bind(this))},_getEventNameByOption:function(t){return(0,D.V4)("click"===t?ie.u:sa,so)},_getNode:function(t){if(!(0,v.$K)(t))return null;if(t.internalFields)return t;if((0,v.pt)(t))return this._dataAdapter.getNodeByKey(t);var e=(0,p.Z)(t).get(0);return e?Y.Z.isElementNode(e)?this._getNodeByElement(e):this._dataAdapter.getNodeByItem(e):null},_getNodeByElement:function(t){var e=(0,p.Z)(t).closest("."+ke),i=this._decodeString(e.attr(Ur));return this._dataAdapter.getNodeByKey(i)},_toggleExpandedState:function(t,e,i){var a=this._getNode(t);if(!a)return(new b.BH).reject().promise();if(a.internalFields.disabled)return(new b.BH).reject().promise();var r=a.internalFields.expanded;if(r===e)return(new b.BH).resolve().promise();if(this._hasChildren(a)){var n=this._getNodeElement(a);if(n.find(".".concat(ao,":not(.").concat(Tc,")")).length)return(new b.BH).reject().promise();!r&&!this._nodeHasRenderedChildren(n)&&this._createLoadIndicator(n)}return(0,v.$K)(e)||(e=!r),this._dataAdapter.toggleExpansion(a.internalFields.key,e),this._updateExpandedItemsUI(a,e,i)},_nodeHasRenderedChildren:t=>t.children(".".concat(Rt)).not(":empty").length,_createLoadIndicator:function(t){this._createComponent((0,p.Z)("<div>").addClass(ao),it.Z,{}).$element().appendTo(t),t.children(".".concat(Oa,",.").concat(no)).hide()},_renderExpanderIcon:function(t,e,i,a){i.appendTo(t),i.addClass(a),e.internalFields.disabled&&i.addClass(Ra),this._renderToggleItemVisibilityIconClick(i,e)},_renderDefaultExpanderIcons:function(t,e){var i=(0,p.Z)("<div>").addClass(Oa).appendTo(t);e.internalFields.expanded&&(i.addClass(Ic),t.parent().addClass(Kt)),e.internalFields.disabled&&i.addClass(Ra),this._renderToggleItemVisibilityIconClick(i,e)},_renderCustomExpanderIcons:function(t,e){var{expandIcon:i,collapseIcon:a}=this.option(),r=(0,vt.H)(i??a),n=(0,vt.H)(a??i);this._renderExpanderIcon(t,e,r,no),this._renderExpanderIcon(t,e,n,ro);var s=e.internalFields.expanded;s&&t.parent().addClass(Kt),this._toggleCustomExpanderIcons(r,n,s)},_renderToggleItemVisibilityIconClick:function(t,e){var i=(0,D.V4)(ie.u,this.NAME);S.Z.off(t,i),S.Z.on(t,i,a=>{this._toggleExpandedState(e.internalFields.key,void 0,a)})},_toggleCustomExpanderIcons:function(t,e,i){e.toggle(i),t.toggle(!i)},_updateExpandedItemsUI:function(t,e,i){var a=this._getNodeElement(t),r=!a.length||e&&a.is(":hidden");if(this.option("expandNodesRecursive")&&r){var n=this._getNode(t.internalFields.parentKey);n&&this._updateExpandedItemsUI(n,e,i)}if(this._hasCustomExpanderIcons()){if(this._nodeHasRenderedChildren(a)){var o=a.children(".".concat(no)),l=a.children(".".concat(ro));this._toggleCustomExpanderIcons(o,l,e)}}else a.children(".".concat(Oa)).toggleClass(Ic,e);var d=a.children(".".concat(Rt)),u=d.length>0,h=new b.BH;return!e||u&&!d.is(":empty")?(this._animateNodeContainer(t,e,i,h),h.promise()):0===t.internalFields.childrenKeys.length&&(this._isVirtualMode()||this._useCustomChildrenLoader())?(this._loadNestedItemsWithUpdate(t,e,i,h),h.promise()):(this._renderSublevel(a,t,this._getChildNodes(t)),this._fireContentReadyAction(),this._animateNodeContainer(t,e,i,h),h.promise())},_loadNestedItemsWithUpdate:function(t,e,i,a){var r=this._getNodeElement(t);this._loadNestedItems(t).done(n=>{var s=this._getActualNode(t);this._renderSublevel(r,s,this._dataAdapter.getNodesByItems(n)),n&&n.length?(this._fireContentReadyAction(),this._animateNodeContainer(s,e,i,a)):a.resolve()})},_loadNestedItems:function(t){if(this._useCustomChildrenLoader()){var e=this._dataAdapter.getPublicNode(t);return this._loadChildrenByCustomLoader(e).done(i=>{this._areNodesExists(i)||this._appendItems(i)})}return this._isVirtualMode()?(this._filter.internal=[this.option("parentIdExpr"),t.internalFields.key],this._dataSource.filter(this._combineFilter()),this._dataSource.load().done(i=>{this._areNodesExists(i)||this._appendItems(i)})):(new b.BH).resolve([]).promise()},_areNodesExists:function(t,e){var i=this.keyOf(t[0]),a=this._dataAdapter.getFullData();return!!this._dataAdapter.getNodeByKey(i,a)},_appendItems:function(t){this.option().items=this.option("items").concat(t),this._initDataAdapter()},_animateNodeContainer:function(t,e,i,a){var r=this._getNodeElement(t),n=r.children(".".concat(Rt));t&&a&&0===n.length&&a.resolve(),n.addClass(Kt);var s=(0,I.Cr)(n);ce.Z.stop(n,!0),ce.Z.animate(n,{type:"custom",duration:this.option("animationEnabled")?400:0,from:{maxHeight:e?0:s},to:{maxHeight:e?s:0},complete:function(){n.css("maxHeight","none"),n.toggleClass(Kt,e),this.setAria("expanded",e,r),this.getScrollable().update(),this._fireExpandedStateUpdatedEvent(e,t,i),a&&a.resolve()}.bind(this)})},_fireExpandedStateUpdatedEvent:function(t,e,i){if(this._hasChildren(e)&&!this._skipContentReadyAndItemExpanded){var a=t?"onItemExpanded":"onItemCollapsed";if((0,v.$K)(i))this._itemDXEventHandler(i,a,{node:this._dataAdapter.getPublicNode(e)});else{var r=this._getNodeElement(e);this._itemEventHandler(r,a,{event:i,node:this._dataAdapter.getPublicNode(e)})}}},_normalizeIconState:function(t,e){var a,i=t.find(".".concat(ao));i.length&&(null===(a=it.Z.getInstance(i))||void 0===a||a.option("visible",!1));var r=t.children(".".concat(ro,",.").concat(Oa));e?r.show():(r.removeClass(Oa),t.addClass(Da))},_emptyMessageContainer:function(){var t=this.getScrollable();return t?(0,p.Z)(t.content()):this.callBase()},_renderContent:function(){var t=this.option("items");t&&t.length&&(this._contentAlreadyRendered=!0),this.callBase()},_renderSelectAllItem:function(t){t=t||this.$element().find(".".concat(Rt)).first(),this._$selectAllItem=(0,p.Z)("<div>").addClass(Gr);var e=this._dataAdapter.isAllSelected();this._createComponent(this._$selectAllItem,Aa,{value:e,elementAttr:{"aria-label":"Select All"},text:this.option("selectAllText"),onValueChanged:this._onSelectAllCheckboxValueChanged.bind(this)}),this._toggleSelectedClass(this._$selectAllItem,e),t.before(this._$selectAllItem)},_onSelectAllCheckboxValueChanged:function(t){this._toggleSelectAll(t),this._fireSelectAllValueChanged(t.value)},_toggleSelectAll:function(t){this._dataAdapter.toggleSelectAll(t.value),this._updateItemsUI(),this._fireSelectionChanged()},_renderCheckBox:function(t,e){var i=(0,p.Z)("<div>").appendTo(t);this._createComponent(i,Aa,{value:e.internalFields.selected,onValueChanged:this._changeCheckboxValue.bind(this),focusStateEnabled:!1,elementAttr:{"aria-label":"Check State"},disabled:this._disabledGetter(e)})},_toggleSelectedClass:function(t,e){t.toggleClass("dx-state-selected",!!e)},_toggleNodeDisabledState:function(t,e){var i=this._getNodeElement(t),a=i.find("."+Ie).eq(0);this._dataAdapter.toggleNodeDisabledState(t.internalFields.key,e),a.toggleClass(Ra,!!e),this._showCheckboxes()&&this._getCheckBoxInstance(i).option("disabled",!!e)},_itemOptionChanged:function(t,e,i){var a=this._dataAdapter.getNodeByItem(t);e===this.option("disabledExpr")&&this._toggleNodeDisabledState(a,i)},_changeCheckboxValue:function(t){var i=(0,p.Z)(t.element).parent("."+ke).children("."+Ie),a=this._getItemData(i),r=this._getNodeByElement(i),n=t.value;r&&r.internalFields.selected===n||this._updateItemSelection(n,a,t.event)},_isSingleSelection:function(){return"single"===this.option("selectionMode")},_isRecursiveSelection:function(){return this.option("selectNodesRecursive")&&"single"!==this.option("selectionMode")},_isLastSelectedBranch:function(t,e,i){var a=e.indexOf(t.key);return a>=0&&e.splice(a,1),i&&(0,y.S6)(t.children,function(r,n){this._isLastSelectedBranch(n,e,!0)}.bind(this)),t.parent&&this._isLastSelectedBranch(t.parent,e),0===e.length},_isLastRequired:function(t){var e=this.option("selectionRequired"),i=this._isSingleSelection(),a=this.getSelectedNodeKeys();if(e)return i?1===a.length:this._isLastSelectedBranch(t.internalFields.publicNode,a.slice(),!0)},_updateItemSelection:function(t,e,i){var a=this._getNode(e);if(!a||!1===a.visible)return!1;if(a.internalFields.selected===t)return!0;if(!t&&this._isLastRequired(a)){if(this._showCheckboxes()){var r=this._getNodeElement(a);this._getCheckBoxInstance(r).option("value",!0)}return!1}if(t&&this._isSingleSelection()){var n=this.getSelectedNodeKeys();(0,y.S6)(n,(l,d)=>{this._dataAdapter.toggleSelection(d,!1),this._updateItemsUI(),this._fireItemSelectionChanged(this._getNode(d))})}this._dataAdapter.toggleSelection(a.internalFields.key,t);var s=this._dataAdapter.isAllSelected(),o=this._selectAllEnabled()&&this._$selectAllItem.dxCheckBox("instance").option("value")!==s;return this._updateItemsUI(),this._fireItemSelectionChanged(a,i),this._fireSelectionChanged(),o&&this._fireSelectAllValueChanged(s),!0},_fireItemSelectionChanged:function(t,e){var i=e||this._findItemElementByItem(t.internalFields.item);(e?this._itemDXEventHandler:this._itemEventHandler).call(this,i,"onItemSelectionChanged",{node:this._dataAdapter.getPublicNode(t),itemData:t.internalFields.item})},_getCheckBoxInstance:function(t){return t.children(".dx-checkbox").dxCheckBox("instance")},_updateItemsUI:function(){var t={};if((0,y.S6)(this._dataAdapter.getData(),(i,a)=>{var r=this._getNodeElement(a,t),n=a.internalFields.selected;r.length&&(this._toggleSelectedClass(r,n),this.setAria("selected",n,r),this._showCheckboxes()&&this._getCheckBoxInstance(r).option("value",n))}),this._selectAllEnabled()){var e=this._$selectAllItem.dxCheckBox("instance");e.option("onValueChanged",void 0),e.option("value",this._dataAdapter.isAllSelected()),e.option("onValueChanged",this._onSelectAllCheckboxValueChanged.bind(this))}},_updateParentsState:function(t,e){if(e){var i=this._dataAdapter.getNodeByKey(t.internalFields.parentKey),a=(0,p.Z)(e.parents("."+ke)[0]);if(this._showCheckboxes()){var r=i.internalFields.selected;this._getCheckBoxInstance(a).option("value",r),this._toggleSelectedClass(a,r)}i.internalFields.parentKey!==this.option("rootValue")&&this._updateParentsState(i,a)}},_itemEventHandlerImpl:function(t,e,i){var a=(0,p.Z)(t).closest("."+ke).children("."+Ie);return e((0,C.l)(this._extendActionArgs(a),i))},_itemContextMenuHandler:function(t){this._createEventHandler("onItemContextMenu",t)},_itemHoldHandler:function(t){this._createEventHandler("onItemHold",t)},_createEventHandler:function(t,e){var i=this._getNodeByElement(e.currentTarget);this._itemDXEventHandler(e,t,{node:this._dataAdapter.getPublicNode(i)})},_itemClass:function(){return Ie},_itemDataKey:function(){return TE},_attachClickEvent:function(){var t="."+this._itemClass(),e="."+ke+", ."+Gr,i=(0,D.V4)(ie.u,this.NAME),a=(0,D.V4)(re.Z.down,this.NAME),r=this._itemContainer(),n=this;S.Z.off(r,i,t),S.Z.off(r,a,e),S.Z.on(r,i,t,function(s){n._itemClickHandler(s,(0,p.Z)(this))}),S.Z.on(r,a,e,function(s){n._itemPointerDownHandler(s)})},_itemClickHandler:function(t,e){var i=this._getItemData(e),a=this._getNodeByElement(e);this._itemDXEventHandler(t,"onItemClick",{node:this._dataAdapter.getPublicNode(a)}),this.option("selectByClick")&&!t.isDefaultPrevented()&&this._updateItemSelection(!a.internalFields.selected,i,t)},_updateSelectionToFirstItem:function(t,e){for(var i=e;i>=0;){var a=(0,p.Z)(t[i]);this._updateItemSelection(!0,a.find("."+Ie).get(0)),i--}},_updateSelectionToLastItem:function(t,e){for(var i=t.length,a=e;a<i;){var r=(0,p.Z)(t[a]);this._updateItemSelection(!0,r.find("."+Ie).get(0)),a++}},focus:function(){this._selectAllEnabled()?S.Z.trigger(this._$selectAllItem,"focus"):this.callBase()},_focusInHandler:function(t){this._updateFocusState(t,!0);var e=(0,p.Z)(t.target).hasClass(Gr);if(e||this.option("focusedElement"))return clearTimeout(this._setFocusedItemTimeout),void(this._setFocusedItemTimeout=setTimeout(()=>{var a=e?(0,W.u)(this._$selectAllItem):(0,p.Z)(this.option("focusedElement"));this._setFocusedItem(a)}));var i=this._getActiveItem();this.option("focusedElement",(0,W.u)(i.closest("."+ke)))},_itemPointerDownHandler:function(t){if(this.option("focusStateEnabled")){var e=(0,p.Z)(t.target).closest("."+ke+", ."+Gr);if(e.length){var i=e.hasClass(Ra)?null:e;this.option("focusedElement",(0,W.u)(i))}}},_findNonDisabledNodes:function(t){return t.not(function(){return(0,p.Z)(this).children("."+Ie).hasClass(Ra)})},_moveFocus:function(t,e){var s=this.option("rtlEnabled")?"right":"left",o=this.option("rtlEnabled")?"left":"right";this.$element().find(".".concat(Rt)).each(function(){ce.Z.stop(this,!0)});var l=this._nodeElements();if(l&&l.length)switch(t){case"up":var d=this._prevItem(l);this.option("focusedElement",(0,W.u)(d));var u=this._getNodeItemElement(d);this.getScrollable().scrollToElement(u),e.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,u);break;case"down":var h=this._nextItem(l);this.option("focusedElement",(0,W.u)(h));var c=this._getNodeItemElement(h);this.getScrollable().scrollToElement(c),e.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,c);break;case"first":var _=l.first();e.shiftKey&&this._showCheckboxes()&&this._updateSelectionToFirstItem(l,l.index(this._prevItem(l))),this.option("focusedElement",(0,W.u)(_)),this.getScrollable().scrollToElement(this._getNodeItemElement(_));break;case"last":var g=l.last();e.shiftKey&&this._showCheckboxes()&&this._updateSelectionToLastItem(l,l.index(this._nextItem(l))),this.option("focusedElement",(0,W.u)(g)),this.getScrollable().scrollToElement(this._getNodeItemElement(g));break;case o:this._expandFocusedContainer();break;case s:this._collapseFocusedContainer();break;default:return void this.callBase.apply(this,arguments)}},_getNodeItemElement:function(t){return t.find("."+Ie).get(0)},_nodeElements:function(){return this.$element().find("."+ke).not(":hidden")},_expandFocusedContainer:function(){var t=(0,p.Z)(this.option("focusedElement"));if(t.length&&!t.hasClass(Da)){if(t.find(".".concat(Rt)).eq(0).hasClass(Kt)){var i=this._nextItem(this._findNonDisabledNodes(this._nodeElements()));return this.option("focusedElement",(0,W.u)(i)),void this.getScrollable().scrollToElement(this._getNodeItemElement(i))}var a=this._getNodeByElement(t.children("."+Ie));this._toggleExpandedState(a,!0)}},_getClosestNonDisabledNode:function(t){do{t=t.parent().closest("."+ke)}while(t.children(".dx-treeview-item.dx-state-disabled").length);return t},_collapseFocusedContainer:function(){var t=(0,p.Z)(this.option("focusedElement"));if(t.length){var e=t.find(".".concat(Rt)).eq(0);if(!t.hasClass(Da)&&e.hasClass(Kt)){var i=this._getNodeByElement(t.children("."+Ie));this._toggleExpandedState(i,!1)}else{var a=this._getClosestNonDisabledNode(t);a.length&&this.option("focusedElement",(0,W.u)(a)),this.getScrollable().scrollToElement(this._getNodeItemElement(a))}}},_encodeString:function(t){return(0,v.HD)(t)?encodeURI(t):t},_decodeString:function(t){return(0,v.HD)(t)?decodeURI(t):t},getScrollable:function(){return this._scrollable},updateDimensions:function(){var t=new b.BH,e=this.getScrollable();return e?e.update().done(()=>{t.resolveWith(this)}):t.resolveWith(this),t.promise()},selectItem:function(t){return this._updateItemSelection(!0,t)},unselectItem:function(t){return this._updateItemSelection(!1,t)},expandItem:function(t){return this._toggleExpandedState(t,!0)},collapseItem:function(t){return this._toggleExpandedState(t,!1)},getNodes:function(){return this._dataAdapter.getTreeNodes()},getSelectedNodes:function(){return this.getSelectedNodeKeys().map(t=>{var e=this._dataAdapter.getNodeByKey(t);return this._dataAdapter.getPublicNode(e)})},getSelectedNodeKeys:function(){return this._dataAdapter.getSelectedNodesKeys()},selectAll:function(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!0):this._toggleSelectAll({value:!0})},unselectAll:function(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!1):this._toggleSelectAll({value:!1})},_allItemsExpandedHandler:function(){this._skipContentReadyAndItemExpanded=!1,this._fireContentReadyAction()},expandAll:function(){var t=this._dataAdapter.getData(),e=[];this._skipContentReadyAndItemExpanded=!0,t.forEach(i=>e.push(this._toggleExpandedState(i.internalFields.key,!0))),Promise.allSettled(e).then(()=>{var i;return null===(i=this._allItemsExpanded)||void 0===i?void 0:i.call(this)})},collapseAll:function(){(0,y.S6)(this._dataAdapter.getExpandedNodesKeys(),function(t,e){this._toggleExpandedState(e,!1)}.bind(this))},scrollToItem:function(t){var e=this._getNode(t);if(!e)return(new b.BH).reject().promise();for(var i=[],a=e.internalFields.publicNode.parent;null!=a;)a.expanded||i.push(a.key),a=a.parent;var r=new b.BH;return this._expandNodes(i.reverse()).always(()=>{var n=this._getNodeElement(e);n&&n.length?(this.scrollToElementTopLeft(n.get(0)),r.resolve()):r.reject()}),r.promise()},scrollToElementTopLeft:function(t){var e=this.getScrollable(),{scrollDirection:i,rtlEnabled:a}=this.option(),r={top:0,left:0},n=Ou(Bu,t);if(i!==br){var s=(0,p.Z)(e.container()).get(0);r.left=a?n.left+t.offsetWidth-s.clientWidth:n.left}i!==Ru&&(r.top=n.top),e.scrollTo(r)},_expandNodes:function(t){if(!t||0===t.length)return(new b.BH).resolve().promise();var e=new b.BH,i=t.map(a=>this.expandItem(a));return b.gx.apply(p.Z,i).done(()=>e.resolve()).fail(()=>e.reject()),e.promise()},_dispose:function(){this.callBase(),clearTimeout(this._setFocusedItemTimeout),this._allItemsExpandedHandler=null}});const BE=RE;ni.setEditorClass(yr.Z);var Ac="dx-treeview",LE="".concat(Ac,"-node-container"),Dc=BE.inherit(ni).inherit({_addWidgetPrefix:function(t){return"".concat(Ac,"-").concat(t)},_optionChanged:function(t){switch(t.name){case"searchValue":this._showCheckboxes()&&this._isRecursiveSelection()&&this._removeSelection(),this._initDataAdapter(),this._updateSearch(),this._repaintContainer(),this.option("focusedElement",null);break;case"searchExpr":this._initDataAdapter(),this.repaint();break;case"searchMode":this.option("expandNodesRecursive")?this._updateDataAdapter():this._initDataAdapter(),this.repaint();break;default:this.callBase(t)}},_updateDataAdapter:function(){this._setOptionWithoutOptionChange("expandNodesRecursive",!1),this._initDataAdapter(),this._setOptionWithoutOptionChange("expandNodesRecursive",!0)},_getDataAdapterOptions:function(){return(0,C.l)(this.callBase(),{searchValue:this.option("searchValue"),searchMode:this.option("searchMode")||"contains",searchExpr:this.option("searchExpr")})},_getNodeContainer:function(){return this.$element().find(".".concat(LE)).first()},_updateSearch:function(){if(this._searchEditor){var t=this._getSearchEditorOptions();this._searchEditor.option(t)}},_repaintContainer:function(){var e,t=this._getNodeContainer();t.length&&(t.empty(),e=this._dataAdapter.getRootNodes(),this._renderEmptyMessage(e),this._renderItems(t,e),this._fireContentReadyAction())},_focusTarget:function(){return this._itemContainer(this.option("searchEnabled"))},_cleanItemContainer:function(){this.$element().empty()},_itemContainer:function(t){return this._selectAllEnabled()?this._getNodeContainer():this._scrollable&&t?(0,p.Z)(this._scrollable.content()):this.callBase()},_addWidgetClass:function(){this.$element().addClass(this._widgetClass())},_clean:function(){this.callBase(),this._removeSearchBox()}});(0,J.Z)("dxTreeView",Dc);const Yr=Dc;var Oc="column-chooser-button",Rc="notouch-action",Bc="column-chooser",Lc="dx-column-chooser-item",NE=["showInColumnChooser","caption","allowHiding","visible","cssClass","ownerBand"],ZE={renderShowColumnChooserButton(t){var n,e=this,i=e.addWidgetPrefix(Oc),a=e.option("columnChooser.enabled"),r=t.find(".".concat(i));a?r.length?r.show():(n=(0,p.Z)("<div>").addClass(i).appendTo(t),e._createComponent(n,Be.Z,{icon:Bc,onClick(){e.getView("columnChooserView").showColumnChooser()},hint:e.option("columnChooser.title"),integrationOptions:{}})):r.hide()},getPosition(){var t=this.getView("rowsView"),e=this.option("columnChooser.position");return(0,v.$K)(e)?e:{my:"right bottom",at:"right bottom",of:t&&t.element(),collision:"fit",offset:"-2 -2",boundaryOffset:"2 2"}}},$E=ne.ViewController.inherit(ZE),zE={_resizeCore:E.ZT,_isWinDevice:()=>!!K.Z.real().win,_initializePopupContainer(){var t=this,e=t.addWidgetPrefix("column-chooser"),i=t.element().addClass(e),a=t.option("columnChooser"),r=(0,oe.Vk)(),n=(0,oe.OD)(r),s=(0,oe.x2)(r),o={visible:!1,shading:!1,showCloseButton:!1,dragEnabled:!0,resizeEnabled:!0,wrapperAttr:{class:e},toolbarItems:[{text:a.title,toolbar:"top",location:n||s?"before":"center"}],position:t.getController("columnChooser").getPosition(),width:a.width,height:a.height,rtlEnabled:t.option("rtlEnabled"),onHidden(){t._isWinDevice()&&(0,p.Z)("body").removeClass(t.addWidgetPrefix(Rc))},container:a.container};n||s?(0,C.l)(o,{showCloseButton:!0}):o.toolbarItems[o.toolbarItems.length]={shortcut:"cancel"},(0,v.$K)(this._popupContainer)?this._popupContainer.option(o):(t._popupContainer=t._createComponent(i,gt,o),t._popupContainer.on("optionChanged",l=>{"visible"===l.name&&t.renderCompleted.fire()})),this.setPopupAttributes()},setPopupAttributes(){var t=this.isSelectMode(),e=this._columnsController.isBandColumnsUsed();this._popupContainer.setAria({role:"dialog",label:A.Z.format("dxDataGrid-columnChooserTitle")}),this._popupContainer.$wrapper().toggleClass(this.addWidgetPrefix("column-chooser-mode-drag"),!t).toggleClass(this.addWidgetPrefix("column-chooser-mode-select"),t),this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-list")),t&&!e&&this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-plain"))},_renderCore(t){if(this._popupContainer){var e=!this.isSelectMode();this._columnChooserList&&"full"!==t?e&&this._updateItems():this._renderTreeView()}},_renderTreeView(){var t,e,i,a=this,r=this._popupContainer.$content(),n=this.option("columnChooser"),s=this.isSelectMode(),d={dataStructure:"plain",activeStateEnabled:!0,focusStateEnabled:!0,hoverStateEnabled:!0,itemTemplate:"item",showCheckBoxesMode:"none",rootValue:null,searchEnabled:(0,v.$K)(n.allowSearch)?n.allowSearch:null===(t=n.search)||void 0===t?void 0:t.enabled,searchTimeout:(0,v.$K)(n.searchTimeout)?n.searchTimeout:null===(e=n.search)||void 0===e?void 0:e.timeout,searchEditorOptions:null===(i=n.search)||void 0===i?void 0:i.editorOptions};if(this._isWinDevice()&&(d.useNativeScrolling=!1),(0,C.l)(d,s?this._prepareSelectModeConfig():this._prepareDragModeConfig()),this._columnChooserList)d.searchEnabled||(d.searchValue=""),this._columnChooserList.option(d),this._updateItems();else{this._columnChooserList=this._createComponent(r,Yr,d),this._updateItems();var u=0;this._columnChooserList.on("optionChanged",h=>{var c=h.component.getScrollable();u=c.scrollTop()}),this._columnChooserList.on("contentReady",h=>{(0,E.Su)(()=>{h.component.getScrollable().scrollTo({y:u}),a.renderCompleted.fire()})})}},_prepareDragModeConfig(){return{noDataText:this.option("columnChooser").emptyPanelText,activeStateEnabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,itemTemplate(e,i,a){(0,p.Z)(a).text(e.text).parent().addClass(e.cssClass).addClass(Lc)}}},_prepareSelectModeConfig(){var t=this,e=this.option("columnChooser.selection")||{},i=!1;return{selectByClick:e.selectByClick,selectNodesRecursive:e.recursive,showCheckBoxesMode:e.allowSelectAll?"selectAll":"normal",onSelectionChanged:a=>{if(!i){var r=(n=a.component.getNodes(),(s=(o,l)=>o.reduce((d,u)=>(d.push(u),u.children.length&&s(u.children,d),d),l))(n,[]));a.component.beginUpdate(),i=!0,((n,s)=>{s.filter(o=>!1===o.itemData.allowHiding).forEach(o=>n.component.selectItem(o.key))})(a,r),a.component.endUpdate(),i=!1,t.component.beginUpdate(),this._isUpdatingColumnVisibility=!0,(n=>{n.forEach(s=>{t._columnsController.columnOption(s.itemData.id,"visible",!1!==s.selected)})})(r),t.component.endUpdate(),this._isUpdatingColumnVisibility=!1}var n,s}}},_updateItems(){var t=this.isSelectMode(),i=function(t,e){var i=[],a=t.isSelectMode(),r=t.option("columnChooser.selection.recursive");return e.length&&(0,y.S6)(e,(n,s)=>{var o={text:s.caption,cssClass:s.cssClass,allowHiding:s.allowHiding,expanded:!0,id:s.index,disabled:!1===s.allowHiding,parentId:(0,v.$K)(s.ownerBand)?s.ownerBand:null};a&&!(r&&s.hasColumns)&&(o.selected=s.visible),i.push(o)}),i}(this,this._columnsController.getChooserColumns(t));this._columnChooserList.option("items",i)},_updateItemsSelection(t){var e=t?.map(i=>this._columnsController.columnOption(i));this._columnChooserList.beginUpdate(),e?.forEach(i=>{var{visible:a,index:r}=i;a?this._columnChooserList.selectItem(r):this._columnChooserList.unselectItem(r)}),this._columnChooserList.endUpdate()},_columnOptionChanged(t){if(this.callBase(t),this.isSelectMode()&&this._columnChooserList&&!0!==this._isUpdatingColumnVisibility){var{optionNames:i}=t,a=i.visible&&1===i.length,r=(0,v.$K)(t.columnIndex)?[t.columnIndex]:t.columnIndices;(NE.some(s=>i[s])||t.changeTypes.columns&&i.all)&&(this._updateItemsSelection(r),a||this._updateItems())}},optionChanged(t){"columnChooser"===t.name?(this._initializePopupContainer(),this.render(null,"full")):this.callBase(t)},getColumnElements(){var t=[],e=this.isSelectMode(),i=this._columnsController.getChooserColumns(e),a=this._popupContainer&&this._popupContainer.$content(),r=a&&a.find(".dx-treeview-node");return r&&i.forEach(n=>{var s=r.filter("[data-item-id = '".concat(n.index,"']")),o=s.length?s.children(".".concat(Lc)).get(0):null;t.push(o)}),(0,p.Z)(t)},getName:()=>"columnChooser",getColumns(){return this._columnsController.getChooserColumns()},allowDragging(t){var e=this._columnsController.isParentColumnVisible(t.index),i=!t.visible&&t.allowHiding;return this.isColumnChooserVisible()&&e&&i},allowColumnHeaderDragging(t){return!this.isSelectMode()&&this.isColumnChooserVisible()&&t.allowHiding},getBoundingRect(){var t=this._popupContainer&&this._popupContainer.$overlayContent();if(t&&t.is(":visible")){var e=t.offset();return{left:e.left,top:e.top,right:e.left+(0,I.Y_)(t),bottom:e.top+(0,I.zp)(t)}}return null},showColumnChooser(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show(),this._isWinDevice()&&(0,p.Z)("body").addClass(this.addWidgetPrefix(Rc))},hideColumnChooser(){this._popupContainer&&this._popupContainer.hide()},isColumnChooserVisible(){var t=this._popupContainer;return t&&t.option("visible")},isSelectMode(){return"select"===this.option("columnChooser.mode")},hasHiddenColumns(){var t=this.option("columnChooser.enabled"),e=this.getColumns().filter(i=>!i.visible);return t&&e.length},publicMethods:()=>["showColumnChooser","hideColumnChooser"]},oo={defaultOptions:()=>({columnChooser:{enabled:!1,search:{enabled:!1,timeout:500,editorOptions:{}},selection:{allowSelectAll:!1,selectByClick:!1,recursive:!1},position:void 0,mode:"dragAndDrop",width:250,height:260,title:A.Z.format("dxDataGrid-columnChooserTitle"),emptyPanelText:A.Z.format("dxDataGrid-columnChooserEmptyText"),container:void 0}}),controllers:{columnChooser:$E},views:{columnChooserView:da.inherit(zE)},extenders:{views:{headerPanel:{_getToolbarItems(){var t=this.callBase();return this._appendColumnChooserItem(t)},_appendColumnChooserItem(t){var e=this;if(e.option("columnChooser.enabled")){var a=e.option("columnChooser.title");t.push({widget:"dxButton",options:{icon:Bc,onClick:function(){e.component.getView("columnChooserView").showColumnChooser()},hint:a,text:a,onInitialized:function(n){(0,p.Z)(n.element).addClass(e._getToolbarButtonClass(e.addWidgetPrefix(Oc)))},elementAttr:{"aria-haspopup":"dialog"}},showText:"inMenu",location:"after",name:"columnChooserButton",locateInMenu:"auto",sortIndex:40})}return t},optionChanged(t){"columnChooser"===t.name?(this._invalidate(),t.handled=!0):this.callBase(t)},isVisible(){var t=this.option("columnChooser.enabled");return this.callBase()||t}},columnHeadersView:{allowDragging(t){var e=this.component.getView("columnChooserView"),i=!e.isSelectMode(),a=e.isColumnChooserVisible();return i&&a&&t.allowHiding||this.callBase(t)}}},controllers:{columns:{allowMoveColumn(t,e,i,a){return!("select"===this.option("columnChooser.mode")&&"columnChooser"===a)&&this.callBase(t,e,i,a)}}}}};$.registerModule("columnChooser",oo);var jr=L(8772);function hi(t,e){for(var i=(0,lt.G5)(e.group),a=[],r=0;r<t.length;r++)a.push([i[r].selector,"=",t[r]]);return e.filter&&a.push(e.filter),V.combineFilters(a)}function Vc(t,e,i){for(var a=(0,lt.G5)(e.group),r=[],n=i?t.length-1:0;n<t.length;n++){for(var s=[],o=0;o<=n;o++){var{selector:l}=a[o];if(n!==o||null!==t[o]&&!1!==t[o]&&!0!==t[o]){var d=[l,n===o?a[o].desc?">":"<":"=",t[o]];s.push("<"===d[1]?[d,"or",[l,"=",null]]:d)}else!1===t[o]?s.push([l,"=",!!a[o].desc||null]):(t[o]?!a[o].desc:a[o].desc)?s.push([l,"<>",t[o]]):(s.push([l,"<>",null]),s.push([l,"=",null]))}r.push($.combineFilters(s))}return r=$.combineFilters(r,"or"),$.combineFilters([r,e.filter])}var Pc=Ce.Z.inherit(function(){var t=function(i,a){var{hash:r}=i;return r&&r[JSON.stringify(a)]},e=function(i,a){var o,r=0,n=i.length-1;if(!i.length)return 0;do{var s=n+r>>1;i[s].offset>a?n=s:r=s}while(n-r>1);for(o=r;o<=n&&!(i[o].offset>a);o++);return o};return{ctor(i){this._dataSource=i,this.reset()},reset(){this._groupsInfo=[],this._totalCountCorrection=0},totalCountCorrection(){return this._totalCountCorrection},updateTotalItemsCount(i){this._totalCountCorrection=i||0},isGroupItemCountable(i){return!this._isVirtualPaging()||!i.isContinuation},_isVirtualPaging(){var i=this._dataSource.option("scrolling.mode");return"virtual"===i||"infinite"===i},itemsCount(){var a=this._dataSource._dataSource,r=$.normalizeSortingInfo(a.group()||[]).length;return function s(o,l,d){var u=0;if(l)if(d)for(var h=0;h<l.length;h++)o.isGroupItemCountable(l[h])&&u++,u+=s(o,l[h].items,d-1);else u=l.length;return u}(this,a.items(),r)},foreachGroups(i,a,r,n,s){var o=this;return function l(d,u,h,c){var _=[];function g(T,O,P,F){var N=O&&T(O,P);return N&&F.push(N),N}for(var f=0;f<d.length;f++){if(c.push(d[f].data),!h&&!1===g(u,d[f].data,c,_))return!1;if(!d[f].data||d[f].data.isExpanded||r){var{children:m}=d[f],x=m.length&&l(m,u,h,c);if(x&&_.push(x),!1===x)return!1}if(h&&!1===g(u,d[f].data,c,_))return!1;(!d[f].data||d[f].data.offset!==d[f].offset)&&(n=!0),c.pop()}var w=s&&c.slice(0);return n&&b.gx.apply(p.Z,_).always(()=>{o._updateGroupInfoOffsets(d,w)})}(o._groupsInfo,i,a,[])},_updateGroupInfoOffsets(i,a){a=a||[];for(var r=0;r<i.length;r++){var n=i[r];if(n.data&&n.data.offset!==n.offset){n.offset=n.data.offset;for(var s=0;s<a.length;s++)a[s].offset=n.offset}}i.sort((o,l)=>o.offset-l.offset)},findGroupInfo(i){for(var a,r=this._groupsInfo,n=0;r&&n<i.length;n++)r=(a=t(r,i[n]))&&a.children;return a&&a.data},addGroupInfo(i){for(var a,{path:r}=i,n=this._groupsInfo,s=0;s<r.length;s++){if(!(a=t(n,r[s]))){a={key:r[s],offset:i.offset,data:{offset:i.offset,isExpanded:!0,path:r.slice(0,s+1)},children:[]};var o=e(n,i.offset);n.splice(o,0,a),n.hash=n.hash||{},n.hash[JSON.stringify(a.key)]=a}s===r.length-1&&(a.data=i,a.offset!==i.offset&&this._updateGroupInfoOffsets(n)),n=a.children}},allowCollapseAll:()=>!0,refresh(i){var{storeLoadOptions:a}=i,r=(0,lt.G5)(a.group||[]),n="_group"in this?(0,lt.G5)(this._group||[]):r,s=Math.min(n.length,r.length);this._group=a.group;for(var o=0;o<s;o++)if(n[o].selector!==r[o].selector){s=o;break}s?function l(d,u,h){for(var c=0;c<d.length;c++)u+1>=h?d[c].children=[]:l(d[c].children,u+1,h)}(this._groupsInfo,0,s):this.reset()},handleDataLoading(){},handleDataLoaded(i,a){a(i)},handleDataLoadedCore(i,a){a(i)}}}());function lo(t,e,i,a){if(a=a||0,e>1&&i>0){var r=t-Math.floor(t/e)*e||e;return(r+=i-a-2)<0&&(r+=e),Math.floor(r/(e-a-1))}return 0}var Fc=Pc.inherit(function(){var t=function(h,c,_){return h.foreachGroups((g,f)=>{if(g.isExpanded)return c(g,f)},!0,!1,_,_)},e=function h(c,_,g,f,m,x,w){var T;if(f.items=f.items||[],f.paths=f.paths||[],f.count=f.count||0,f.lastCount=f.lastCount||0,g)for(var O=0;O<_.length;O++){var P=_[O];if(void 0!==P.items){if(m.push(P.key),x)T=!0;else{var F=c.findGroupInfo(m);T=F&&F.isExpanded}T?P.items?h(c,P.items,g-1,f,m,x,w):1===g&&P.count&&(!x||w)&&(f.items.push(P),f.paths.push(m.slice(0)),f.count+=f.lastCount,f.lastCount=P.count):(P.collapsedItems=P.items,P.items=null),m.pop()}}},i=function(h,c,_,g,f){var x,m=h.findGroupInfo(g);m?(_?m.count=c.count>0?c.count:c.items&&c.items.length||0:c.count=m.count||c.count,m.offset=f):(_&&(x=c.count>0?c.count:c.items.length),h.addGroupInfo({isExpanded:h._isGroupExpanded(g.length-1),path:g.slice(0),offset:f,count:x||0}))},a=function h(c,_,g,f,m,x,w){var H,O=(_.group?_.group.length:0)===f,F=0,N=0;if(m=m||0,x=x||[],_.remoteOperations.paging&&!w&&(F=0===m?_.skip||0:_.skips[m-1]||0),m>=f)return g.length;for(var k=0;k<g.length;k++){var U=g[k];if(U){if(x.push(U.key),!U.count&&!U.items||void 0===U.items||(i(c,U,O,x,F+k),(H=U.items?h(c,_,U.items,f,m+1,x,k):U.count||-1)<0))return-1;N+=H,x.pop()}}return N},r=function(h,c){return h&&h.length&&h[c]&&!!h[c].isExpanded},n=function(h,c,_){for(var g,f=_,m=0;m<h.length;m++)g=h[m].offset+1,m>0&&(g+=h[m-1].childrenTotalCount,c&&(g+=lo(f,c,g,m-1)*m)),f+=g;return f};function s(h,c,_,g){var f=c.items[g],m=h.skips&&h.skips[_],x=h.takes&&h.takes[_],w=g===c.items.length-1,T=0===g,P=f.count>x+(T&&m||0);T&&void 0!==m&&(f.isContinuation=!0),w&&void 0!==x&&P&&(f.isContinuationOnNextPage=!0)}function o(h){return!Array.isArray(h)}function l(h){o(h.data)||(h.data=new b.BH)}function d(h,c,_,g,f,m){var w,T,O,P,F;c.isCustomLoading||(e(h,m,_,g={},[]),P=(O=_)-1,F=(w=c).group?w.group.length:0,(T=g).skip=w.skips&&w.skips[P],w.takes&&void 0!==w.takes[P]&&(T.take=F===O&&T.count?T.count-(T.skip||0):0,T.take+=w.takes[P])),g.paths.length&&(c.group?c.group.length:0)-_>0?(l(c),function(w,T,O,P,F,N){var H=T.group||[],k=H[F+1],U=[];(0,y.S6)(O.paths,j=>{var de,ae={requireTotalCount:!1,requireGroupCount:!0,group:[k],groupSummary:T.storeLoadOptions.groupSummary,filter:hi(O.paths[j],{filter:T.storeLoadOptions.filter,group:H}),select:T.storeLoadOptions.select,langParams:null===(de=T.storeLoadOptions)||void 0===de?void 0:de.langParams};0===j&&(ae.skip=O.skip||0),j===O.paths.length-1&&(ae.take=O.take);var pe=0===ae.take?[]:w._dataSource.loadFromStore(ae);(0,b.gx)(pe).done(De=>{var Et=O.items[j];s(T,O,F,j),Et.items=De}),U.push(pe)}),b.gx.apply(null,U).done(()=>{a(w,T,N,P+1),d(w,T,P+1,O,F+1,N)})}(h,c,g,_,f,m)):g.paths.length&&c.storeLoadOptions.group?(l(c),function(w,T,O,P){var F=[],N=T.group||[];(0,y.S6)(O.paths,(j,de)=>{F.push(hi(de,{group:T.isCustomLoading?T.storeLoadOptions.group:N}))});var{filter:H}=T.storeLoadOptions;T.storeLoadOptions.isLoadingAll||(H=$.combineFilters([H,$.combineFilters(F,"or")]));var k=(0,C.l)({},T.storeLoadOptions,{requireTotalCount:!1,requireGroupCount:!1,group:null,sort:N.concat($.normalizeSortingInfo(T.storeLoadOptions.sort||[])),filter:H}),U=w._dataSource.isLastLevelGroupItemsPagingLocal();U||(k.skip=O.skip,k.take=O.take),(0,b.gx)(0===O.take?[]:w._dataSource.loadFromStore(k)).done(j=>{U&&(j=w._dataSource.sortLastLevelGroupItems(j,N,O.paths),j=O.skip?j.slice(O.skip):j,j=O.take?j.slice(0,O.take):j),(0,y.S6)(O.items,(de,ae)=>{var De=j.splice(0,ae.count-(0===de&&O.skip||0));s(T,O,N.length-1,de),ae.items=De}),T.data.resolve(P)}).fail(T.data.reject)}(h,c,g,m)):o(c.data)&&c.data.resolve(m)}var u=function(h,c){var _=new b.BH,g=!(!c.group||!c.group.length),f=(0,C.l)({skip:0,take:1,requireGroupCount:g,requireTotalCount:!g},c,{group:g?c.group:null});return h.load(f).done((m,x)=>{var w=x&&(g?x.groupCount:x.totalCount);isFinite(w)?_.resolve(w):_.reject(jr.R0.Error(g?"E4022":"E4021"))}).fail(_.reject.bind(_)),_};return{updateTotalItemsCount(h){var c=0,_=h.extra&&h.extra.totalCount||0,g=h.extra&&h.extra.groupCount||0,f=this._dataSource.pageSize(),m=this._isVirtualPaging();t(this,x=>{x.childrenTotalCount=0}),t(this,(x,w)=>{var T=n(w,m?0:f,c),O=x.count+x.childrenTotalCount;m||(O+=lo(T,f,O,w.length-1)),w[w.length-2]?w[w.length-2].childrenTotalCount+=O:c+=O}),this.callBase(c-_+g)},_isGroupExpanded(h){var c=this._dataSource.group();return r(c,h)},_updatePagingOptions(h,c){var _=this._isVirtualPaging(),g=this._dataSource.pageSize(),f=[],m=[],x=0,w=0;h.take&&(t(this,T=>{T.childrenTotalCount=0,T.skipChildrenTotalCount=0}),t(this,(T,O)=>{var P,F=0,N=0,H=n(O,_?0:g,w),k=0,U=0,j=T.count+T.childrenTotalCount,de=j;c&&c(T,H);var ae=h.skip-H;H<=h.skip+h.take&&j&&(P=h.take,_||(j+=(k=lo(H,g,j,O.length-1))*O.length,de+=k,g&&ae>=0&&(F=O.length,N=O.length-1,U=Math.floor(ae/g))),ae>=0?(H+j>h.skip&&f.unshift(ae-U*F-T.skipChildrenTotalCount),H+j>=h.skip+P&&m.unshift(P-F-T.childrenTotalCount+T.skipChildrenTotalCount)):H+j>=h.skip+P&&m.unshift(P+ae-T.childrenTotalCount)),H<=h.skip&&(O[O.length-2]?O[O.length-2].skipChildrenTotalCount+=Math.min(de,ae+1-U*N):x+=Math.min(de,ae+1)),H<=h.skip+P&&(j=Math.min(de,ae+P-(U+1)*N),O[O.length-2]?O[O.length-2].childrenTotalCount+=j:w+=j)}),h.skip-=x,h.take-=w-x),h.skips=f,h.takes=m},changeRowExpand(h){var c=this.findGroupInfo(h),_=this._dataSource,g=_.remoteOperations().groupPaging,f=$.normalizeSortingInfo(_.group());return c?(c.isExpanded=!c.isExpanded,g&&c.isExpanded&&h.length<f.length?u(_,{filter:hi(h,{filter:_.lastLoadOptions().filter,group:_.group()}),group:[f[h.length]],select:_.select()}).done(m=>{c.count=m}):(new b.BH).resolve()):(new b.BH).reject()},handleDataLoading(h){var{storeLoadOptions:c}=h,_=$.normalizeSortingInfo(c.group||h.loadOptions.group);if(!h.isCustomLoading&&_.length){if(h.remoteOperations.grouping){var g=this._dataSource.remoteOperations().paging;c.group=$.normalizeSortingInfo(c.group),c.group.forEach((f,m)=>{f.isExpanded=!(g&&m===c.group.length-1)})}h.group=h.group||_,h.remoteOperations.paging?(h.skip=c.skip,h.take=c.take,c.requireGroupCount=!0,c.group=_.slice(0,1),this._updatePagingOptions(h),c.skip=h.skip,c.take=h.take):(h.skip=h.loadOptions.skip,h.take=h.loadOptions.take,this._updatePagingOptions(h))}},handleDataLoadedCore(h,c){var f,_=$.normalizeSortingInfo(h.storeLoadOptions.group||h.loadOptions.group).length,g=h.group?h.group.length:0,m={};if(h.isCustomLoading)c(h),e(this,h.data,_,m,[],h.isCustomLoading,h.storeLoadOptions.isLoadingAll);else{if(h.remoteOperations.paging||this.foreachGroups(x=>{x.count=0}),(f=a(this,h,h.data,_))<0)return void(h.data=(new b.BH).reject(ee.Z.Error("E1037")));if(h.remoteOperations.paging||_&&h.extra&&h.loadOptions.requireTotalCount&&(h.extra.totalCount=f,h.extra.groupCount=h.data.length),g&&h.storeLoadOptions.requireGroupCount&&!isFinite(h.extra.groupCount))return void(h.data=(new b.BH).reject(jr.R0.Error("E4022")));this.updateTotalItemsCount(h),h.remoteOperations.paging||this._updatePagingOptions(h),c(h),h.remoteOperations.paging||this._processPaging(h,_)}d(this,h,_,m,0,h.data)},_processSkips(h,c,_){if(_){var g=h[0],f=c[0],m=g&&g.items;void 0!==f&&(g.isContinuation=!0,m&&(g.items=m.slice(f),this._processSkips(g.items,c.slice(1),_-1)))}},_processTakes(h,c,_,g,f){if(g&&h){f=f||[];var m=h[h.length-1],x=m&&m.items,w=_[0];m&&(void 0!==w&&(m.count-(m.isContinuation&&c[0]||0)||x.length)>w&&(m.isContinuationOnNextPage=!0,f.forEach(P=>{P.isContinuationOnNextPage=!0}),x&&(x=x.slice(0,w),m.items=x)),f.push(m),this._processTakes(x,c.slice(1),_.slice(1),g-1,f))}},_processPaging(h,c){this._processSkips(h.data,h.skips,c),this._processTakes(h.data,h.skips,h.takes,c)},isLastLevelGroupItemsPagingLocal:()=>!1,sortLastLevelGroupItems:h=>h,refresh(h,c){var w,T,_=this,g=_._dataSource,{storeLoadOptions:f}=h,m=h.group||h.storeLoadOptions.group,x=$.normalizeSortingInfo(_._group);function O(P,F){F.length===T+1&&(P.isExpanded=w)}for(T=0;T<x.length;T++)w=r(m,T),r(_._group,T)!==w&&_.foreachGroups(O);if(_.callBase.apply(this,arguments),m&&h.remoteOperations.paging&&c.reload)return t(_,P=>{var F=u(g,{filter:hi(P.path,{filter:f.filter,group:m}),group:m.slice(P.path.length),select:f.select}),N=u(g,{filter:Vc(P.path,{filter:f.filter,group:m},!0),group:m.slice(P.path.length-1,P.path.length),select:f.select});return(0,b.gx)(N,F).done((H,k)=>{H=parseInt(H.length?H[0]:H),k=parseInt(k.length?k[0]:k),P.offset=H,P.count!==k&&(P.count=k,_.updateTotalItemsCount(h))})},!0)}}}()),uo=function(t,e){var i=new b.BH,a=(0,C.l)({skip:0,take:1,requireTotalCount:!0},e);return t.load(a).done((r,n)=>{i.resolve(n&&n.totalCount)}).fail(i.reject.bind(i)),i},Mc=Pc.inherit(function(){var t=function(n,s,o){return n.foreachGroups(l=>{if(!l.isExpanded)return s(l)},!1,!1,o,!0)},e=function(n,s){var o=0,l=s||0;return s&&(t(n,d=>{if(d.offset-o>=s)return!1;o+=d.count-1}),l+=o),l},i=function(n,s){if(n.length!==s.length)return!1;for(var o=0;o<n.length;o++)if(!(0,lt.OI)(null,n[o],s[o]))return!1;return!0},a=function n(s,o,l,d,u){if(o){for(var h=0;h<o.length;h++){var c=o[h];if("key"in c&&void 0!==c.items){l.push(c.key),u&&i(u.path,l)&&!c.isContinuation&&(u.offset=d);var _=s.findGroupInfo(l);_&&!c.isContinuation&&(_.offset=d),_&&!_.isExpanded?d+=_.count:d=n(s,c.items,l,d,u),l.pop()}else d++}return d}},r=function n(s,o){var l=s.count||s.items.length;if(!s.count&&o>1){l=0;for(var d=0;d<s.items.length;d++)l+=n(s.items[d],o-1)}return l};return{handleDataLoading(n){var u,{storeLoadOptions:s}=n,o=[],l=0,d=!1,{group:h}=n.loadOptions,c=0;if(function(g,f){if(f.group){var m=$.normalizeSortingInfo(f.group),x=$.normalizeSortingInfo(g.sort);g.sort=Mi.Z.arrangeSortingInfo(m,x),delete f.group}}(s,n.loadOptions),n.group=n.group||h,!n.isCustomLoading){var _=(0,C.l)({},s);_.skip=e(this,s.skip),_.skip&&_.take&&h&&(_.skip--,_.take++,d=!0),_.take&&h&&(u=_.take,_.take++),t(this,g=>{if(g.offset>=_.skip+_.take+c)return!1;g.offset>=_.skip+c&&g.count&&(c+=g.count-1,o.push(g),l+=g.count)}),(0,y.S6)(o,function(){_.filter=function(g,f,m){for(var x=$.normalizeSortingInfo(m||f.group),w=[],T=0;T<g.length;T++){for(var O=[],P=0;P<=T;P++)O.push([x[P].selector,T===P?"<>":"=",g[P]]);w.push($.combineFilters(O))}return w=$.combineFilters(w,"or"),$.combineFilters([w,f.filter])}(this.path,_,h)}),n.storeLoadOptions=_,n.collapsedGroups=o,n.collapsedItemsCount=l,n.skip=_.skip||0,n.skipFirstItem=d,n.take=u}},handleDataLoaded(n,s){var{collapsedGroups:o}=n,l=$.normalizeSortingInfo(n.group),d=l.length;function u(g,f,m,x,w){if(g&&f.length&&m.length){var T,O,P=(0,Q.Ex)(f[0],!0);for(O=0;O<g.length&&(T=(0,Q.Ex)(g[O].key,!0),!(w>=x.offset||P===T));O++)w+=r(g[O],m.length);(!g.length||P!==T)&&g.splice(O,0,{key:f[0],items:[],count:1===f.length?x.count:void 0}),u(g[O].items,f.slice(1),m.slice(1),x,w)}}if(n.collapsedItemsCount&&n.extra&&n.extra.totalCount>=0&&(n.extra._totalCountWasIncreasedByCollapsedItems||(n.extra.totalCount+=n.collapsedItemsCount,n.extra._totalCountWasIncreasedByCollapsedItems=!0)),s(n),d){var{data:h}=n,c=(0,He.Z)(h);if(Mi.Z.multiLevelGroup(c,l).enumerate().done(g=>{h=g}),o)for(var _=0;_<o.length;_++)u(h,o[_].path,l,o[_],n.skip);n.isCustomLoading||function g(f,m,x,w,T,O){for(var P=0,F=!1,N=0;N<m.length;N++){var H=m[N];if(void 0!==H.items){x.push(H.key);var k=f.findGroupInfo(x);if(k&&!k.isExpanded)H.collapsedItems=H.items,H.items=null,w+=k.count,--O<0&&P++,T&&(F=!0);else if(H.items){var U=g(f,H.items,x,w,T,O);T&&(U.offset-w>1?H.isContinuation=!0:F=!0),w=U.offset,(O=U.take)<0&&(H.items.length?H.isContinuationOnNextPage=!0:P++)}x.pop()}else T&&(F=!0),w++,--O<0&&P++;T=!1}return F&&m.splice(0,1),P&&m.splice(-P,P),{offset:w,take:O}}(this,h,[],n.skip,n.skipFirstItem,n.take),n.data=h}},isGroupItemCountable:n=>null===n.items,updateTotalItemsCount(){var n=0;t(this,s=>{s.count&&(n-=s.count-1)}),this.callBase(n)},changeRowExpand(n){var c,s=this,o=s._dataSource,l=o.beginPageIndex?o.beginPageIndex():o.pageIndex(),d=o.items(),u=e(s,l*o.pageSize()),h=s.findGroupInfo(n);return c=h&&!h.isExpanded?(new b.BH).resolve(h.count):uo(o,{filter:hi(n,{filter:o.filter(),group:o.group()})}),(0,b.gx)(c).done(_=>{_=parseInt(_.length?_[0]:_),h?(a(s,d,[],u),h.isExpanded=!h.isExpanded,h.count=_):(a(s,d,[],u,h={offset:-1,count:_,path:n,isExpanded:!1}),h.offset>=0&&s.addGroupInfo(h)),s.updateTotalItemsCount()}).fail(function(){o._eventsStrategy.fireEvent("loadError",arguments)})},allowCollapseAll:()=>!1,refresh(n,s){var o=this,{storeLoadOptions:l}=n,d=o._dataSource;if(this.callBase.apply(this,arguments),s.reload)return t(o,u=>{var h=uo(d,{filter:hi(u.path,l)}),c=uo(d,{filter:Vc(u.path,l)});return(0,b.gx)(c,h).done((_,g)=>{_=parseInt(_.length?_[0]:_),g=parseInt(g.length?g[0]:g),u.offset=_,u.count!==g&&(u.count=g,o.updateTotalItemsCount())})},!0)}}}()),ho="dx-datagrid-group-panel",qr="dx-group-panel-item",kc="dx-toolbar-label",qE={init(){this.callBase.apply(this,arguments),this._initGroupingHelper()},_initGroupingHelper(t){var e=this._grouping,i=this.option("grouping.autoExpandAll"),a=this.option("focusedRowEnabled"),r=t?t.remoteOperations:this.remoteOperations();!(r.filtering&&r.sorting&&r.paging)||r.grouping||!i&&a?(!e||e instanceof Mc)&&(this._grouping=new Fc(this)):(!e||e instanceof Fc)&&(this._grouping=new Mc(this))},totalItemsCount(){var t=this.callBase();return t>0&&this._dataSource.group()&&this._dataSource.requireTotalCount()?t+this._grouping.totalCountCorrection():t},itemsCount(){return this._dataSource.group()?this._grouping.itemsCount()||0:this.callBase.apply(this,arguments)},allowCollapseAll(){return this._grouping.allowCollapseAll()},isGroupItemCountable(t){return this._grouping.isGroupItemCountable(t)},isRowExpanded(t){var e=this._grouping.findGroupInfo(t);return e?e.isExpanded:!this._grouping.allowCollapseAll()},collapseAll(t){return this._collapseExpandAll(t,!1)},expandAll(t){return this._collapseExpandAll(t,!0)},_collapseExpandAll(t,e){var i=this._dataSource,a=i.group(),r=$.normalizeSortingInfo(a||[]);if(r.length){for(var n=0;n<r.length;n++)void 0===t||t===n?r[n].isExpanded=e:a&&a[n]&&(r[n].isExpanded=a[n].isExpanded);i.group(r),this._grouping.foreachGroups((s,o)=>{(void 0===t||t===o.length-1)&&(s.isExpanded=e)},!1,!0),this.resetPagesCache()}return!0},refresh(){return this.callBase.apply(this,arguments),this._grouping.refresh.apply(this._grouping,arguments)},changeRowExpand(t){var e=this._dataSource;if(e.group())return e.beginLoading(),this._lastLoadOptions&&(this._lastLoadOptions.groupExpand=!0),this._changeRowExpandCore(t).always(()=>{e.endLoading()})},_changeRowExpandCore(t){return this._grouping.changeRowExpand(t)},_hasGroupLevelsExpandState(t,e){if(t&&Array.isArray(t))for(var i=0;i<t.length;i++)if(t[i].isExpanded===e)return!0},_customizeRemoteOperations(t,e){var{remoteOperations:i}=t;t.storeLoadOptions.group?(i.grouping&&!t.isCustomLoading&&(!i.groupPaging||this._hasGroupLevelsExpandState(t.storeLoadOptions.group,!0))&&(i.paging=!1),!i.grouping&&(!i.sorting||!i.filtering||t.isCustomLoading||this._hasGroupLevelsExpandState(t.storeLoadOptions.group,!1))&&(i.paging=!1)):!t.isCustomLoading&&i.paging&&e.grouping&&this.resetCache(),this.callBase.apply(this,arguments)},_handleDataLoading(t){return this.callBase(t),this._initGroupingHelper(t),this._grouping.handleDataLoading(t)},_handleDataLoaded(t){return this._grouping.handleDataLoaded(t,this.callBase.bind(this))},_handleDataLoadedCore(t){return this._grouping.handleDataLoadedCore(t,this.callBase.bind(this))}};ha.extend(qE);var XE={init(){this.callBase(),this.createAction("onRowExpanding"),this.createAction("onRowExpanded"),this.createAction("onRowCollapsing"),this.createAction("onRowCollapsed")},_beforeProcessItems(t){var e=this._columnsController.getGroupColumns();return(t=this.callBase(t)).length&&e.length&&(t=this._processGroupItems(t,e.length)),t},_processItem(t,e){return(0,v.$K)(t.groupIndex)&&(0,v.HD)(t.rowType)&&0===t.rowType.indexOf("group")?(t=this._processGroupItem(t,e),e.dataIndex=0):t=this.callBase.apply(this,arguments),t},_processGroupItem:t=>t,_processGroupItems(t,e,i){var a=this._columnsController.getGroupColumns(),r=a[a.length-e];if(!i){var n=this.option("scrolling.mode");i={collectContinuationItems:"virtual"!==n&&"infinite"!==n,resultItems:[],path:[],values:[]}}var{resultItems:s}=i;if(i.data&&(i.collectContinuationItems||!i.data.isContinuation)&&s.push({rowType:"group",data:i.data,groupIndex:i.path.length-1,isExpanded:!!i.data.items,key:i.path.slice(0),values:i.values.slice(0)}),t)if(0===e)s.push.apply(s,t);else for(var o=0;o<t.length;o++){var l=t[o];l&&"items"in l?(i.data=l,i.path.push(l.key),i.values.push(r&&r.deserializeValue&&!r.calculateDisplayValue?r.deserializeValue(l.key):l.key),this._processGroupItems(l.items,e-1,i),i.data=void 0,i.path.pop(),i.values.pop()):s.push(l)}return s},publicMethods(){return this.callBase().concat(["collapseAll","expandAll","isRowExpanded","expandRow","collapseRow"])},collapseAll(t){var e=this._dataSource;e&&e.collapseAll(t)&&(e.pageIndex(0),e.reload())},expandAll(t){var e=this._dataSource;e&&e.expandAll(t)&&(e.pageIndex(0),e.reload())},changeRowExpand(t){var e=this,i=e.isRowExpanded(t),a={key:t,expanded:i};return e.executeAction(i?"onRowCollapsing":"onRowExpanding",a),a.cancel?(new b.BH).resolve():(0,b.gx)(e._changeRowExpandCore(t)).done(()=>{a.expanded=!i,e.executeAction(i?"onRowCollapsed":"onRowExpanded",a)})},_changeRowExpandCore(t){var e=this,i=this._dataSource,a=new b.BH;return i?(0,b.gx)(i.changeRowExpand(t)).done(()=>{e.load().done(a.resolve).fail(a.reject)}).fail(a.reject):a.resolve(),a},isRowExpanded(t){var e=this._dataSource;return e&&e.isRowExpanded(t)},expandRow(t){return this.isRowExpanded(t)?(new b.BH).resolve():this.changeRowExpand(t)},collapseRow(t){return this.isRowExpanded(t)?this.changeRowExpand(t):(new b.BH).resolve()},optionChanged(t){"grouping"===t.name&&(t.name="dataSource"),this.callBase(t)}},co=function(t,e){var i=this._columnsController;switch(e.itemData.value){case"group":var a=i._dataSource.group()||[];i.columnOption(t.dataField,"groupIndex",a.length);break;case"ungroup":i.columnOption(t.dataField,"groupIndex",-1);break;case"ungroupAll":this.component.clearGrouping()}},Nc=t=>{var e=t?.visible;return"auto"===e?"desktop"===K.Z.current().deviceType:!!e},Hc=(t,e)=>Nc(t)&&!(!t?.allowColumnDragging||!e.allowGrouping),JE={_getToolbarItems(){var t=this.callBase();return this._appendGroupingItem(t)},_appendGroupingItem(t){if(this._isGroupPanelVisible()){var e=!1,i={template:()=>{var a=(0,p.Z)("<div>").addClass(ho);return this._updateGroupPanelContent(a),na("groupPanel",this,a,void 0,this._handleActionKeyDown.bind(this)),a},name:"groupPanel",onItemRendered:()=>{e&&this.renderCompleted.fire(),e=!0},location:"before",locateInMenu:"never",sortIndex:1};t.push(i),this.updateToolbarDimensions()}return t},_handleActionKeyDown(t){var{event:e}=t,i=(0,p.Z)(e.target),a=i.closest(".".concat(qr)).index(),r=this._columnsController.getGroupColumns()[a],n=r&&r.index;i.is(".dx-header-filter")?this.getController("headerFilter").showHeaderFilterMenu(n,!0):this._processGroupItemAction(n),e.preventDefault()},_isGroupPanelVisible(){return Nc(this.option("groupPanel"))},_renderGroupPanelItems(t,e){var i=this;t.empty(),(0,y.S6)(e,(a,r)=>{i._createGroupPanelItem(t,r)}),jn(this)},_createGroupPanelItem(t,e){var i=(0,p.Z)("<div>").addClass(e.cssClass).addClass(qr).data("columnData",e).appendTo(t).text(e.caption);return function Lm(t,e){t.option("useLegacyKeyboardnavigation")||e.attr("tabindex",t.option("tabindex")||0)}(this,i),i},_columnOptionChanged(t){if(!this._requireReady&&!$.checkChanges(t.optionNames,["width","visibleWidth"])){var e=this.element(),i=e&&e.find(".".concat(ho));i&&i.length&&(this._updateGroupPanelContent(i),this.updateToolbarDimensions(),this.renderCompleted.fire())}this.callBase()},_updateGroupPanelContent(t){var e=this.getController("columns").getGroupColumns(),i=this.option("groupPanel");this._renderGroupPanelItems(t,e),i.allowColumnDragging&&!e.length&&((0,p.Z)("<div>").addClass("dx-group-panel-message").text(i.emptyPanelText).appendTo(t),t.closest(".".concat("dx-toolbar-item")).addClass(kc),t.closest(".".concat(kc)).css("maxWidth","none"))},allowDragging(t){var e=this.option("groupPanel");return Hc(e,t)},getColumnElements(){var t=this.element();return t&&t.find(".".concat(qr))},getColumns(){return this.getController("columns").getGroupColumns()},getBoundingRect(){var t=this.element();if(t&&t.find(".".concat(ho)).length){var e=t.offset();return{top:e.top,bottom:e.top+(0,I.Cr)(t)}}return null},getName:()=>"group",getContextMenuItems(t){var a,e=this.option("grouping.contextMenuEnabled"),i=(0,p.Z)(t.targetElement).closest(".".concat(qr));if(i.length&&(t.column=i.data("columnData")),e&&t.column){var{column:r}=t;if(!(0,v.$K)(r.allowGrouping)||r.allowGrouping){var s=(0,v.$K)(r.groupIndex)&&r.groupIndex>-1,o=this.option("grouping.texts"),l=co.bind(this,r);a=[{text:o.ungroup,value:"ungroup",disabled:!s,onItemClick:l},{text:o.ungroupAll,value:"ungroupAll",onItemClick:l}]}}return a},isVisible(){return this.callBase()||this._isGroupPanelVisible()},hasGroupedColumns(){return this._isGroupPanelVisible()&&!!this.getColumns().length},optionChanged(t){"groupPanel"===t.name?(this._invalidate(),t.handled=!0):this.callBase(t)}},QE={getContextMenuItems(t){var i;if(this.option("grouping.contextMenuEnabled")&&t.row&&"group"===t.row.rowType){var r=this._columnsController.columnOption("groupIndex:".concat(t.row.groupIndex));if(r&&r.allowGrouping){var n=this.option("grouping.texts"),s=co.bind(this,r);(i=[]).push({text:n.ungroup,value:"ungroup",onItemClick:s},{text:n.ungroupAll,value:"ungroupAll",onItemClick:s})}}return i},_rowClick(t){var e=this.option("grouping.expandMode"),a="infinite"!==this.option("scrolling.mode")&&"rowClick"===e&&(0,p.Z)(t.event.target).closest(".".concat("dx-group-row")).length,r=(0,p.Z)(t.event.target).closest(".".concat("dx-datagrid-expand")).length;(a||r)&&this._changeGroupRowState(t),this.callBase(t)},_changeGroupRowState(t){var e=this.getController("data"),i=e.items()[t.rowIndex],a=this._columnsController.columnOption("groupIndex:".concat(i.groupIndex),"allowCollapsing");("data"===i.rowType||"group"===i.rowType&&!1!==a)&&(e.changeRowExpand(i.key,!0),t.event.preventDefault(),t.handled=!0)}},eI={getContextMenuItems(t){var e=this.option("grouping.contextMenuEnabled"),i=this.callBase(t);if(e&&t.row&&("header"===t.row.rowType||"detailAdaptive"===t.row.rowType)){var{column:a}=t;if(!a.command&&(!(0,v.$K)(a.allowGrouping)||a.allowGrouping)){var r=this.option("grouping.texts"),n=(0,v.$K)(a.groupIndex)&&a.groupIndex>-1,s=co.bind(this,a);(i=i||[]).push({text:r.groupByThisColumn,value:"group",beginGroup:!0,disabled:n,onItemClick:s}),a.showWhenGrouped&&i.push({text:r.ungroup,value:"ungroup",disabled:!n,onItemClick:s}),i.push({text:r.ungroupAll,value:"ungroupAll",onItemClick:s})}}return i},allowDragging(t){var e=this.option("groupPanel");return Hc(e,t)||this.callBase(t)}};$.registerModule("grouping",{defaultOptions:()=>({grouping:{autoExpandAll:!0,allowCollapsing:!0,contextMenuEnabled:!1,expandMode:"buttonClick",texts:{groupContinuesMessage:A.Z.format("dxDataGrid-groupContinuesMessage"),groupContinuedMessage:A.Z.format("dxDataGrid-groupContinuedMessage"),groupByThisColumn:A.Z.format("dxDataGrid-groupHeaderText"),ungroup:A.Z.format("dxDataGrid-ungroupHeaderText"),ungroupAll:A.Z.format("dxDataGrid-ungroupAllText")}},groupPanel:{visible:!1,emptyPanelText:A.Z.format("dxDataGrid-groupPanelEmptyText"),allowColumnDragging:!0}}),extenders:{controllers:{data:XE,columns:{_getExpandColumnOptions(){var t=this.callBase.apply(this,arguments);return t.cellTemplate=$.getExpandCellTemplate(),t}},editing:{_isProcessedItem:t=>(0,v.$K)(t.groupIndex)&&(0,v.HD)(t.rowType)&&0===t.rowType.indexOf("group")}},views:{headerPanel:JE,rowsView:QE,columnHeadersView:eI}}});var Zc="dx-master-detail-row",rI={defaultOptions:()=>({masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}),extenders:{controllers:{columns:{_getExpandColumnsCore(){var t=this.callBase();return this.option("masterDetail.enabled")&&t.push({type:"detailExpand",cellTemplate:V.getExpandCellTemplate()}),t}},data:function(){var t=function(e){e._expandedItems=[],e._isExpandAll=e.option("masterDetail.autoExpandAll")};return{init(){t(this),this.callBase()},expandAll(e){e<0?(this._isExpandAll=!0,this._expandedItems=[],this.updateItems()):this.callBase.apply(this,arguments)},collapseAll(e){e<0?(this._isExpandAll=!1,this._expandedItems=[],this.updateItems()):this.callBase.apply(this,arguments)},isRowExpanded(e){var i=V.getIndexByKey(e,this._expandedItems);return Array.isArray(e)?this.callBase.apply(this,arguments):!!(this._isExpandAll^(i>=0&&this._expandedItems[i].visible))},_getRowIndicesForExpand(e){var i=this.getRowIndexByKey(e);return[i,i+1]},_changeRowExpandCore(e){var i;if(Array.isArray(e))i=this.callBase.apply(this,arguments);else{var a=V.getIndexByKey(e,this._expandedItems);if(a>=0){var{visible:r}=this._expandedItems[a];this._expandedItems[a].visible=!r}else this._expandedItems.push({key:e,visible:!0});this.updateItems({changeType:"update",rowIndices:this._getRowIndicesForExpand(e)}),i=(new b.BH).resolve()}return i},_processDataItem(e,i){var a=this.callBase.apply(this,arguments);return a.isExpanded=this.isRowExpanded(a.key),void 0===i.detailColumnIndex&&(i.detailColumnIndex=-1,(0,y.S6)(i.visibleColumns,(r,n)=>{if("expand"===n.command&&!(0,v.$K)(n.groupIndex))return i.detailColumnIndex=r,!1})),i.detailColumnIndex>=0&&(a.values[i.detailColumnIndex]=a.isExpanded),a},_processItems(e,i){var a=this,{changeType:r}=i,n=[];return e=a.callBase.apply(a,arguments),"loadingAll"===r?e:("refresh"===r&&(a._expandedItems=(0,E.h3)(a._expandedItems,s=>s.visible)),(0,y.S6)(e,(s,o)=>{n.push(o);var l=V.getIndexByKey(o.key,a._expandedItems);"data"===o.rowType&&(o.isExpanded||l>=0)&&!o.isNewRow&&n.push({visible:o.isExpanded,rowType:"detail",key:o.key,data:o.data,values:[]})}),n)},optionChanged(e){var i,a;if("masterDetail"===e.name){switch(e.name="dataSource",e.fullName){case"masterDetail":var r=e.value||{},n=e.previousValue||{};i=r.enabled!==n.enabled,a=r.autoExpandAll!==n.autoExpandAll;break;case"masterDetail.template":t(this);break;case"masterDetail.enabled":i=!0;break;case"masterDetail.autoExpandAll":a=!0}(i||a)&&t(this)}this.callBase(e)}}}(),resizing:{fireContentReadyAction(){this.callBase.apply(this,arguments),this._updateParentDataGrids(this.component.$element())},_updateParentDataGrids(t){var e=t.closest(".".concat(Zc));e.length&&(0,b.gx)(this._updateMasterDataGrid(e,t)).done(()=>{this._updateParentDataGrids(e.parent())})},_updateMasterDataGrid(t,e){var i=(0,p.Z)(t).data("options"),a=(0,p.Z)(t).closest(".".concat(this.getWidgetContainerClass())).parent().data("dxDataGrid");if(i&&a)return this._updateMasterDataGridCore(a,i)},_updateMasterDataGridCore(t,e){var i=(0,b.BH)();if(t.getView("rowsView").isFixedColumns())this._updateFixedMasterDetailGrids(t,e.rowIndex,(0,p.Z)(e.rowElement)).done(i.resolve);else{if(!0===t.option("scrolling.useNative"))return void t.updateDimensions().done(()=>i.resolve(!0));var a=t.getScrollable();a?a?.update().done(()=>i.resolve()):i.resolve()}return i.promise()},_updateFixedMasterDetailGrids(t,e,i){var a=(0,b.BH)(),r=(0,p.Z)(t.getRowElement(e)),n=(0,p.Z)(t.getView("rowsView").getTableElements()),s=2===r?.length&&(0,I.Cr)(r.eq(0))!==(0,I.Cr)(r.eq(1)),o=2===n?.length&&(0,I.Cr)(n.eq(0))!==(0,I.Cr)(n.eq(1));if(s||o){var l=(0,I.dz)(i);return t.updateDimensions().done(()=>{var d=this.option("columnAutoWidth")&&!0===t.option("scrolling.useNative"),u=d&&l!==(0,I.dz)(i);d&&u?this.updateDimensions().done(()=>a.resolve(!0)):a.resolve(!0)}),a.promise()}return(0,b.BH)().resolve()},_toggleBestFitMode(t){if(this.callBase.apply(this,arguments),this.option("masterDetail.template")){var e=this._rowsView.getTableElement();e&&e.find(".dx-master-detail-cell").css("maxWidth",t?0:"")}}}},views:{rowsView:{_getCellTemplate(t){var{column:e}=t,i=this.getController("editing"),a=i&&i.isEditRow(t.rowIndex);return"detail"!==e.command||a?this.callBase.apply(this,arguments):this.option("masterDetail.template")||{allowRenderToDetachedContainer:!1,render:this._getDefaultTemplate(e)}},_isDetailRow:t=>t&&t.rowType&&0===t.rowType.indexOf("detail"),_createRow(t){var e=this.callBase.apply(this,arguments);return t&&this._isDetailRow(t)&&(this.option("showRowLines")&&e.addClass("dx-row-lines"),e.addClass(Zc),(0,v.$K)(t.visible)&&e.toggle(t.visible)),e},_renderCells(t,e){var{row:i}=e,r=this._columnsController.getVisibleColumns();i.rowType&&this._isDetailRow(i)?this._needRenderCell(0,e.columnIndices)&&this._renderCell(t,{value:null,row:i,rowIndex:i.rowIndex,column:{command:"detail"},columnIndex:0,change:e.change}).addClass("dx-cell-focus-disabled").addClass("dx-master-detail-cell").attr("colSpan",r.length):this.callBase.apply(this,arguments)}}}}};$.registerModule("masterDetail",rI);var Xr=function(t){for(var e=0,i=0,a=0;a<t.length;++a)if("'"===t[a]&&e++,"."===t[a]&&(++i,e%2==0))return{occurrence:i,index:a};return{occurrence:1,index:-1}},po=function(t,e,i){for(var a=-1;i--&&a++<t.length;)a=t.indexOf(e,a);return a},_o=function(t,e){return-1===e?[t]:[t.slice(0,e),t.slice(e+1)]},Jr=function(t,e){if("string"==typeof e){var i=e.split(";"),a=me.Z.getSign(t,e);i[1]=i[1]||"-"+i[0],e=(e=i[a<0?1:0]).replace(/'([^']*)'/g,o=>o.split("").map(()=>" ").join("").substr(2));var r=/^[^#0.,]*/.exec(e)[0].length,n=/[^#0.,]*$/.exec(e)[0].length;return{start:r,end:t.length-n}}return{start:0,end:t.length}},$c=function(t,e){var i=me.Z.getDecimalSeparator(),a=new RegExp("[^0-9"+(0,E.hr)(i)+"]","g");return e.slice(0,t).replace(a,"").length},zc=function(t){return t.split("").reverse().join("")},Wc=function(t,e){if(!t)return-1;for(var i=/[0-9]/g,a=1,r=null,n=i.exec(e);n;){if(r=n.index,a>=t)return r;a++,n=i.exec(e)}return null===r?e.length:r},ci=function(t,e){return void 0===t.start&&(t={start:t,end:t}),{start:t.start+e,end:t.end+e}};function Gt(t,e,i){t=ci(t,0);var a=Jr(e,i);return{start:(0,ue.n$)(t.start,a.start,a.end),end:(0,ue.n$)(t.end,a.start,a.end)}}var hI=L(8541),cI=L(3599),Kc=L(216),Gc=L(8740),Uc="dxNumberBox",Yc=(0,D.V4)(re.Z.up,Uc),jc=(0,D.V4)(re.Z.cancel,Uc),gI=Me.default.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup:function(){this.callBase();var t="dx-numberbox-spin-"+this.option("direction");this.$element().addClass("dx-numberbox-spin-button").addClass(t),this._spinIcon=(0,p.Z)("<div>").addClass(t+"-icon").appendTo(this.$element())},_render:function(){this.callBase();var t=(0,D.V4)(re.Z.down,this.NAME),e=this.$element();S.Z.off(e,t),S.Z.on(e,t,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler:function(t){t.preventDefault(),this._clearTimer(),S.Z.on(this.$element(),zt_name,function(){this._feedBackDeferred=new b.BH,(0,Gc.dR)(this._feedBackDeferred),this._spinChangeHandler({event:t}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:t})}.bind(this));var e=Y.Z.getDocument();S.Z.on(e,Yc,this._clearTimer.bind(this)),S.Z.on(e,jc,this._clearTimer.bind(this)),this._spinChangeHandler({event:t})},_dispose:function(){this._clearTimer(),this.callBase()},_clearTimer:function(){S.Z.off(this.$element(),zt_name);var t=Y.Z.getDocument();S.Z.off(t,Yc),S.Z.off(t,jc),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged:function(t){switch(t.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(t)}}});const Wi=gI;class SI extends Kc.Z{_attachEvents(e,i){var{editor:a}=this,r=(0,D.V4)(re.Z.down,a.NAME),n=i.children(),s=a._createAction(o=>a._spinButtonsPointerDownHandler(o));S.Z.off(i,r),S.Z.on(i,r,o=>s({event:o})),Wi.getInstance(n.eq(0)).option("onChange",o=>a._spinUpChangeHandler(o)),Wi.getInstance(n.eq(1)).option("onChange",o=>a._spinDownChangeHandler(o))}_create(){var{editor:e}=this,i=(0,p.Z)("<div>").addClass("dx-numberbox-spin-container"),a=(0,p.Z)("<div>").appendTo(i),r=(0,p.Z)("<div>").appendTo(i),n=this._getOptions();return this._addToContainer(i),e._createComponent(a,Wi,(0,C.l)({direction:"up"},n)),e._createComponent(r,Wi,(0,C.l)({direction:"down"},n)),this._legacyRender(e.$element(),this._isTouchFriendly(),n.visible),{instance:i,$element:i}}_getOptions(){var{editor:e}=this;return{visible:this._isVisible(),disabled:e.option("disabled")}}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showSpinButtons")}_isTouchFriendly(){var{editor:e}=this;return e.option("showSpinButtons")&&e.option("useLargeSpinButtons")}_legacyRender(e,i,a){e.toggleClass("dx-numberbox-spin-touch-friendly",i),e.toggleClass("dx-numberbox-spin",a)}update(){if(super.update()){var{editor:i,instance:a}=this,r=i.$element(),n=this._isVisible(),s=this._isTouchFriendly(),o=a.children(),l=Wi.getInstance(o.eq(0)),d=Wi.getInstance(o.eq(1)),u=this._getOptions();l.option(u),d.option(u),this._legacyRender(r,s,n)}}}var xI=Math,wI=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],EI=cI.Z.inherit({_supportedKeys:function(){return(0,C.l)(this.callBase(),{upArrow:function(t){(0,D.j1)(t)||(t.preventDefault(),t.stopPropagation(),this._spinUpChangeHandler(t))},downArrow:function(t){(0,D.j1)(t)||(t.preventDefault(),t.stopPropagation(),this._spinDownChangeHandler(t))},enter:function(){}})},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:A.Z.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:function(){return!1},_getDefaultButtons:function(){return this.callBase().concat([{name:"spins",Ctor:SI}])},_isSupportInputMode:function(){var t=parseFloat(ve.Z.version);return ve.Z.chrome&&t>=66||ve.Z.safari&&t>=12},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return K.Z.real().generic&&!K.Z.isSimulator()},options:{useLargeSpinButtons:!1}},{device:function(){return"desktop"!==K.Z.real().deviceType&&!this._isSupportInputMode()}.bind(this),options:{mode:"number"}}])},_initMarkup:function(){this._renderSubmitElement(),this.$element().addClass("dx-numberbox"),this.callBase()},_getDefaultAttributes:function(){var t=this.callBase();return t.inputmode="decimal",t},_renderContentImpl:function(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement:function(){this._$submitElement=(0,p.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(t){this._getSubmitElement().val((0,E.FH)(t))},_getSubmitElement:function(){return this._$submitElement},_keyPressHandler:function(t){this.callBase(t);var e=(0,D.qK)(t);if(!/[\d.,eE\-+]/.test(e)){var a=(0,D.EV)(t);return(0,D.j1)(t)||a&&wI.includes(a)?void 0:(t.preventDefault(),!1)}this._keyPressed=!0},_onMouseWheel:function(t){this._spinValueChange(t.delta>0?1:-1,t)},_renderValue:function(){var t=this._input().val(),e=this.option("value");(!t.length||Number(t)!==e)&&(this._forceValueRender(),this._toggleEmptinessEventHandler());var i=(0,v.$K)(e)?null:A.Z.format("dxNumberBox-noDataText");return this.setAria({valuenow:(0,E.IS)(e,""),valuetext:i}),this.option("text",this._input().val()),this._updateButtons(),(new b.BH).resolve()},_forceValueRender:function(){var t=this.option("value"),e=Number(t),i=isNaN(e)?"":this._applyDisplayValueFormatter(t);this._renderDisplayText(i)},_applyDisplayValueFormatter:function(t){return this.option("displayValueFormatter")(t)},_renderProps:function(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:(0,E.IS)(this.option("min"),""),valuemax:(0,E.IS)(this.option("max"),"")})},_spinButtonsPointerDownHandler:function(){var t=this._input();!this.option("useLargeSpinButtons")&&Y.Z.getActiveElement()!==t[0]&&S.Z.trigger(t,"focus")},_spinUpChangeHandler:function(t){this.option("readOnly")||this._spinValueChange(1,t.event||t)},_spinDownChangeHandler:function(t){this.option("readOnly")||this._spinValueChange(-1,t.event||t)},_spinValueChange:function(t,e){var i=parseFloat(this.option("step"));if(0!==i){var a=parseFloat(this._normalizeInputValue())||0;a=this._correctRounding(a,i*t);var r=this.option("min"),n=this.option("max");(0,v.$K)(r)&&(a=Math.max(r,a)),(0,v.$K)(n)&&(a=Math.min(n,a)),this._saveValueChangeEvent(e),this.option("value",a)}},_correctRounding:function(t,e){var i=/[,.](.*)/,a=i.test(t),r=i.test(e);if(a||r){var n=a?i.exec(t)[0].length:0,s=r?i.exec(e)[0].length:0,o=xI.max(n,s);return this._round(t+e,o)}return t+e},_round:function(t,e){e=e||0;var i=Math.pow(10,e);return t*=i,Math.round(t)/i},_renderValueChangeEvent:function(){this.callBase();var t=(0,D.V4)("focusout","NumberBoxForceValueChange");S.Z.off(this.element(),t),S.Z.on(this.element(),t,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue:function(){if("number"!==this.option("mode")){var t=this._input(),e=this._applyDisplayValueFormatter(this.option("value"));t.val(null),t.val(e)}},_valueChangeEventHandler:function(t){var e=this._input(),i=this._normalizeText(),a=this._parseValue(i),r="."!==i&&"-"!==i;!this._isValueValid()||this._validateValue(a)?(r&&this.callBase(t,isNaN(a)?null:a),this._applyValueBoundaries(i,a),this.validationRequest.fire({value:a,editor:this})):e.val(this._applyDisplayValueFormatter(a))},_applyValueBoundaries:function(t,e){var i=this._isValueIncomplete(t),a=this._isValueInRange(t);!i&&!a&&null!==e&&Number(t)!==e&&this._input().val(this._applyDisplayValueFormatter(e))},_replaceCommaWithPoint:function(t){return t.replace(",",".")},_inputIsInvalid:function(){var t="number"===this.option("mode"),e=this._input().get(0).validity;return t&&e&&e.badInput},_renderDisplayText:function(t){this._inputIsInvalid()||this.callBase(t)},_isValueIncomplete:function(t){return/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(t)},_isValueInRange:function(t){return(0,ue.Z2)(t,this.option("min"),this.option("max"))},_isNumber:function(t){return null!==this._parseValue(t)},_validateValue:function(t){var e=this._normalizeText(),i=this._isValueValid(),a=!0,r=this._isNumber(e);return isNaN(Number(t))&&(a=!1),!t&&i?a=!0:!r&&!i&&(a=!1),this.option({isValid:a,validationError:a?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),a},_normalizeInputValue:function(){return this._parseValue(this._normalizeText())},_normalizeText:function(){var t=this._input().val().trim();return this._replaceCommaWithPoint(t)},_parseValue:function(t){var e=parseFloat(t);return isNaN(e)?null:(0,ue.n$)(e,this.option("min"),this.option("max"))},_clearValue:function(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},reset:function(){null===this.option("value")?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged:function(t){switch(t.name){case"value":this._validateValue(t.value),this._setSubmitValue(t.value),this.callBase(t),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(t)}}}),vo="dxNumberFormatter",Ba="minus",AI=EI.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:function(t){return"del"===t},_supportedKeys:function(){return this._useMaskBehavior()?(0,C.l)(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex:function(t){var e=me.Z.getDecimalSeparator(),i=Xr(this.option("format")).occurrence;return po(t,e,i)},_focusInHandler:function(t){this._preventNestedFocusEvent(t)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0;var e=this._caret();if(e.start===e.end&&this._useMaskBehavior()){var i=this._getInputVal(),a=this._getTextSeparatorIndex(i);a>=0?this._caret({start:a,end:a}):this._moveCaretToBoundaryEventHandler(-1,t)}}.bind(this),0)),this.callBase(t)},_focusOutHandler:function(t){var e=!this._preventNestedFocusEvent(t);e&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(t),e&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(t){var e=this._getFormatPattern(),i=this.option("value");return(this._format(i,e)||"")!==t},_updateFormattedValue:function(){var t=this._getInputVal();this._hasValueBeenChanged(t)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&S.Z.trigger(this._input(),"change"))},_arrowHandler:function(t,e){if(this._useMaskBehavior()){var i=this._getInputVal(),a=this._getFormatPattern(),r=ci(this._caret(),t);(function(t,e,i){var a=Gt(t=ci(t,0),e,i);return t.start>=a.start&&t.end<=a.end})(r,i,a)||(r=1===t?r.end:r.start,e.preventDefault(),this._caret(Gt(r,i,a)))}},_moveCaretToBoundary:function(t){var e=Jr(this._getInputVal(),this._getFormatPattern()),i=ci(1===t?e.start:e.end,0);this._caret(i)},_moveCaretToBoundaryEventHandler:function(t,e){!this._useMaskBehavior()||e&&e.shiftKey||(this._moveCaretToBoundary(t),e&&e.preventDefault())},_shouldMoveCaret:function(t,e){var i=me.Z.getDecimalSeparator(),a=t.charAt(e.end)===i;return(this._lastKey===i||"."===this._lastKey||","===this._lastKey)&&a},_getInputVal:function(){return me.Z.convertDigits(this._input().val(),!0)},_keyboardHandler:function(t){if(this.clearCaretTimeout(),this._lastKey=me.Z.convertDigits((0,D.qK)(t),!0),this._lastKeyName=(0,D.EV)(t),!this._shouldHandleKey(t.originalEvent))return this.callBase(t);var e=this._getInputVal(),i=this._caret(),r=this._tryParse(e,i,this._lastKeyName===Ba?"":this._lastKey);return this._shouldMoveCaret(e,i)&&(this._moveCaret(1),t.originalEvent.preventDefault()),void 0===r?this._lastKeyName!==Ba&&t.originalEvent.preventDefault():this._parsedValue=r,this.callBase(t)},_keyPressHandler:function(t){this._useMaskBehavior()||this.callBase(t)},_removeHandler:function(t){var e=this._caret(),i=this._getInputVal(),a=e.start,r=e.end;this._lastKey=(0,D.qK)(t),this._lastKeyName=(0,D.EV)(t);var n=this._isDeleteKey(this._lastKeyName),s=!n;if(a===r){if(!(s&&a>0||n&&a<i.length))return void t.preventDefault();n&&r++,s&&a--}var d=i.slice(a,r);if(this._isStub(d))this._moveCaret(n?1:-1),(this._parsedValue<0||1/this._parsedValue==-1/0)&&(this._revertSign(t),this._setTextByParsedValue(),this.option("valueChangeEvent").split(" ").includes("input")&&S.Z.trigger(this._input(),"input")),t.preventDefault();else{var h=me.Z.getDecimalSeparator();if(d!==h){if(r-a<i.length&&this._replaceSelectedText(i,{start:a,end:r},"").search(/[0-9]/)<0&&this._isValueInRange(0))return void(this._parsedValue=this._parsedValue<0||1/this._parsedValue==-1/0?-0:0);var f=this._tryParse(i,{start:a,end:r},"");void 0===f?t.preventDefault():this._parsedValue=f}else{var c=i.indexOf(h);this._isNonStubAfter(c+1)&&(this._moveCaret(n?1:-1),t.preventDefault())}}},_isPercentFormat:function(){return-1!==this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")},_parse:function(t,e){var i=this.option("format"),a=(0,v.mf)(i.parser),r=a?i.parser:me.Z.parse,n=0;if(!a){var s=Xr(e).index,o=this._getTextSeparatorIndex(t),l=-1!==s?s:e.length,d=-1!==o?o:t.length;d>l&&-1===e.indexOf("#")&&(n=d-l)}return r(t=t.substr(n),e)},_format:function(t,e){var i=this.option("format"),a=i?.formatter||i,r=(0,v.mf)(a)?a:me.Z.format;return null===t?"":r(t,e)},_getFormatPattern:function(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat:function(){var t=this.option("format"),e=(0,v.mf)(t?.parser),i=(0,v.HD)(t)&&(t.indexOf("0")>=0||t.indexOf("#")>=0);this._currentFormat=e||i||"exponential"===t||"exponential"===t?.type?t:(0,hI.y)(n=>{var s=this._format(n,t);return me.Z.convertDigits(s,!0)})},_getFormatForSign:function(t){var e=this._getFormatPattern();if((0,v.HD)(e)){var i=e.split(";"),a=me.Z.getSign(t,e);return i[1]=i[1]||"-"+i[0],a<0?i[1]:i[0]}return me.Z.getSign(t)<0?"-":""},_removeStubs:function(t,e){var i=this._getFormatForSign(t),a=me.Z.getThousandsSeparator(),r=this._getStubs(i),n=t;if(r.length){var s=r[0],o=new RegExp("("+(0,E.hr)(r[1]||"")+")$","g"),l=new RegExp("[-"+(0,E.hr)(e?"":a)+"]","g");n=n.replace(s,"").replace(o,"").replace(l,"")}return n},_getStubs:function(t){var e=/[^']([#0.,]+)/g.exec(t),i=e&&e[0].trim();return t.split(i).map(function(a){return a.replace(/'/g,"")})},_truncateToPrecision:function(t,e){if((0,v.$K)(t)){var i=t.toString(),a=i.indexOf(".");if(i&&a>-1){var r=parseFloat(i.substr(0,a+e+1));return isNaN(r)?t:r}}return t},_tryParse:function(t,e,i){var a=this._replaceSelectedText(t,e,i),r=this._getFormatPattern(),n=e.start!==e.end,s=this._getParsedValue(a,r),o=!r.parser&&this._getPrecisionLimits(a).max,l=s!==this._parsedValue,u=i===me.Z.getDecimalSeparator()&&0===o,h=!n&&!l&&"-"!==i&&!this._isValueIncomplete(a)&&this._isStub(i);if(!u&&!h&&(""===this._removeStubs(a)&&(s=Math.abs(0*this._parsedValue)),!isNaN(s)))return s=o?this._truncateToPrecision(null===s?this._parsedValue:s,o):s,!r.parser&&this._isPercentFormat()?function(t,e){return t&&(0,ue.zB)(t/100,e)}(s,o):s},_getParsedValue:function(t,e){var i=me.Z.getSign(t,e?.formatter||e),a=this._removeStubs(t,!0),r=this._parse(a,e),n=r<0?-1:1;return(0,v.kE)(r)&&i!==n?i*r:r},_isValueIncomplete:function(t){if(!this._useMaskBehavior())return this.callBase(t);var e=this._caret(),i=me.Z.getDecimalSeparator(),a=this._getTextSeparatorIndex(t),r=a>=0&&a<e.start,n=this._removeStubs(t,!0).split(i);if(!r||2!==n.length)return!1;var s=n[1].length,l=!!this._getFormatPattern().parser,d=!l&&this._getPrecisionLimits(this._getFormatPattern(),t),u=!!l||(0,ue.Z2)(s,d.min,d.max),h="0"===n[1].charAt(s-1);return u&&(h||!s)},_isValueInRange:function(t){var e=(0,E.IS)(this.option("min"),-1/0),i=(0,E.IS)(this.option("max"),1/0);return(0,ue.Z2)(t,e,i)},_setInputText:function(t){var e=me.Z.convertDigits(t,!0),i=function(t,e,i,a){i=ci(i,0);var r=me.Z.getDecimalSeparator(),n=function lI(t){return 1===t.length&&!!t.match(/^[,.][0-9]*$/g)}(t),s=Xr(a).occurrence,o=n?0:po(t,r,s),l=po(e,r,s),d=_o(t,o),u=_o(e,l);if(-1!==o&&i.start>o){var _=$c(i.start-o-1,d[1]);return Gt(u[1]?l+1+Wc(_,u[1])+1:e.length,e,a)}var f=function(t){return t.replace(/[^0-9e]+$/,"")}(u[0]),x=$c(d[0].length-i.start,zc(d[0])),w=Wc(x,zc(f));return Gt(f.length-(w+1),e,a)}(this._getInputVal(),e,this._caret(),this._getFormatPattern());this._input().val(t),this._toggleEmptinessEventHandler(),this._formattedValue=t,this._focusOutOccurs||this._caret(i)},_useMaskBehavior:function(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType:function(){var t="number"===this.option("mode"),e="desktop"===K.Z.real().deviceType;this._useMaskBehavior()&&t?this._setInputType(e||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:function(t){return(0,v.HD)(t)&&1===t.length},_moveCaret:function(t){if(t){var i=Gt(ci(this._caret(),t),this._getInputVal(),this._getFormatPattern());this._caret(i)}},_shouldHandleKey:function(t){var e=(0,D.EV)(t),i=(0,D.j1)(t)||t.altKey||t.shiftKey||!this._isChar(e),a=e===Ba;return this._useMaskBehavior()&&!i&&!a},_renderInput:function(){this.callBase(),this._renderFormatter()},_renderFormatter:function(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents:function(){S.Z.off(this._input(),"."+vo)},_isInputFromPaste:function(t){var e=t.originalEvent&&t.originalEvent.inputType;return(0,v.$K)(e)?"insertFromPaste"===e:this._isValuePasted},_attachFormatterEvents:function(){var t=this._input();S.Z.on(t,(0,D.V4)("input",vo),function(e){this._formatValue(e),this._isValuePasted=!1}.bind(this)),S.Z.on(t,(0,D.V4)("dxclick",vo),function(){this._caretTimeout||(this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0,this._caret(Gt(this._caret(),this._getInputVal(),this._getFormatPattern()))}.bind(this),0))}.bind(this)),S.Z.on(t,"dxdblclick",function(){this.clearCaretTimeout()}.bind(this))},clearCaretTimeout:function(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue:function(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter:function(t){var e=this._getInputVal().slice(t);return e&&!this._isStub(e,!0)},_isStub:function(t,e){var i=(0,E.hr)(me.Z.getDecimalSeparator());return new RegExp("^[^0-9"+i+"]+$","g").test(t)&&(e||this._isChar(t))},_parseValue:function(t){return this._useMaskBehavior()?this._parsedValue:this.callBase(t)},_getPrecisionLimits:function(t){var e=this._getFormatForSign(t),i=Xr(e).index,a=(_o(e,i)[1]||"").replace(/[^#0]/g,"");return{min:a.replace(/^(0*)#*/,"$1").length,max:a.length}},_revertSign:function(t){if(this._useMaskBehavior()){var e=this._caret();if(e.start!==e.end){if((0,D.EV)(t)===Ba)return void this._applyRevertedSign(t,e,!0);this._caret(Gt(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(t,e)}},_applyRevertedSign:function(t,e,i){var a=-1*(0,E.IS)(this._parsedValue,null);if((this._isValueInRange(a)||0===a)&&(this._parsedValue=a,i)){var r=this._getFormatPattern(),n=this._getInputVal();this._setTextByParsedValue(),t.preventDefault();var s=this._getInputVal(),o=function(t,e,i){var a=Jr(t,i);return Jr(e,i).start-a.start}(n,s,r),l=Gt(e=ci(e,o),s,r);this._caret(l)}},_removeMinusFromText:function(t,e){return this._lastKeyName===Ba&&"-"===t.charAt(e.start-1)?this._replaceSelectedText(t,{start:e.start-1,end:e.start},""):t},_setTextByParsedValue:function(){var t=this._getFormatPattern(),e=this._parseValue(),i=this._format(e,t)||"";this._setInputText(i)},_formatValue:function(t){var e=this._getInputVal(),i=this._caret(),a=this._removeMinusFromText(e,i),r=a!==e;if(e=a,!this._isInputFromPaste(t)&&this._isValueIncomplete(a))return this._formattedValue=e,void(r&&this._setTextByParsedValue());if(me.Z.convertDigits(this._formattedValue,!0)!==e){var s=this._tryParse(e,i,"");(0,v.$K)(s)&&(this._parsedValue=s)}this._setTextByParsedValue()},_renderDisplayText:function(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue:function(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue:function(){var t=this._getInputVal();this._parsedValue=this._tryParse(t,this._caret())},_adjustParsedValue:function(){if(this._useMaskBehavior()){var e=this._removeStubs(this._getInputVal())?this._parseValue():null;if(!(0,v.kE)(e))return void(this._parsedValue=e);this._parsedValue=(0,ue.n$)(e,this.option("min"),this.option("max"))}},_valueChangeEventHandler:function(t){if(!this._useMaskBehavior())return this.callBase(t);var e=this._caret();this._saveValueChangeEvent(t),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),e&&this._caret(e)},_optionChanged:function(t){switch(t.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(t);break;default:this.callBase(t)}},_clearCache:function(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean:function(){this._clearCache(),this.callBase()}});const Jc=AI;(0,J.Z)("dxNumberBox",Jc);const fo=Jc;var Qc=L(7694);class BI extends Kc.Z{constructor(e,i,a){super(e,i,a),this.currentTemplate=null}_attachEvents(e){var{editor:i}=this;e.option("onClick",a=>{var r;(null!==(r=i._shouldCallOpenHandler)&&void 0!==r&&r.call(i)||!i.option("openOnFieldClick"))&&i._openHandler(a)}),S.Z.on(e.$element(),"mousedown",a=>{i.$element().is(".dx-state-focused")&&a.preventDefault()})}_create(){var{editor:e}=this,i=(0,p.Z)("<div>"),a=this._getOptions();this._addToContainer(i);var r=e._createComponent(i,Be.Z,(0,C.l)({},a,{elementAttr:{"aria-label":A.Z.format("dxDropDownEditor-selectLabel")}}));return this._legacyRender(e.$element(),i,a.visible),{$element:i,instance:r}}_getOptions(){var{editor:e}=this,i=this._isVisible(),r={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:e.option("readOnly"),visible:i};return this._addTemplate(r),r}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,i,a){e.toggleClass("dx-dropdowneditor-button-visible",a),i&&i.removeClass("dx-button").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){var{editor:i,instance:a}=this,r=i.$element(),n=this._getOptions();a?.option(n),this._legacyRender(r,a?.$element(),n.visible)}}}var mo=L(5270),en=function(t){if((0,Z.Ym)())return(0,I.Y_)(t)},Co=function(t){return null===t&&(t=void 0),"function"==typeof t&&(t=t()),t},ep="dx-dropdowneditor-input-wrapper",tn="dx-dropdowneditor-overlay",tp="ios"===K.Z.current().platform,ip=yr.Z.inherit({_supportedKeys:function(){return(0,C.l)({},this.callBase(),{tab:function(t){if(this.option("opened")){if("instantly"===this.option("applyValueMode"))return void this.close();var e=t.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();e&&(S.Z.trigger(e,"focus"),e.select()),t.preventDefault()}},escape:function(t){return this.option("opened")&&t.preventDefault(),this.close(),!0},upArrow:function(t){return!(!(0,D.j1)(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)&&(this.close(),1))},downArrow:function(t){return!(!(0,D.j1)(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)&&(this._validatedOpening(),1))},enter:function(t){return this.option("opened")&&(t.preventDefault(),this._valueChangeEventHandler(t)),!0}})},_getDefaultButtons:function(){return this.callBase().concat([{name:"dropDown",Ctor:BI}])},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:A.Z.format("OK"),cancelButtonText:A.Z.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:function(){return!0},_getDefaultPopupPosition:function(t){var e=(0,se.q)(t);return{offset:{h:0,v:-1},my:e+" top",at:e+" bottom",collision:"flip flip"}},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(t){return"generic"===t.platform},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper:function(){return this.$element().find("."+ep).first()},_init:function(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition:function(t){var{my:e,at:i}=this._getDefaultPopupPosition(t),a=this.option("popupPosition");this.option("popupPosition",(0,C.l)({},a,{my:e,at:i}))},_initVisibilityActions:function(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction:function(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup:function(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role","combobox")},_render:function(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl:function(){this.option("deferRendering")||this._createPopup()},_renderInput:function(){this.callBase(),this._wrapInput(),this._setDefaultAria()},_wrapInput:function(){this._$container=this.$element().wrapInner((0,p.Z)("<div>").addClass(ep)).children().eq(0)},_setDefaultAria:function(){this.setAria({haspopup:"true",autocomplete:"list"})},_readOnlyPropValue:function(){return!this._isEditable()||this.callBase()},_cleanFocusState:function(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate:function(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask:function(){this.option("fieldTemplate")||this.callBase()},_renderField:function(){var t=this._getFieldTemplate();t&&this._renderTemplatedField(t,this._fieldRenderData())},_renderPlaceholder:function(){this._getFieldTemplate()||this.callBase()},_renderValue:function(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_renderTemplatedField:function(t,e){var i;this._fieldRenderQueueLength=(null!==(i=this._fieldRenderQueueLength)&&void 0!==i?i:0)+1;var a=(0,Hi.si)(this._input()),r=this._$container;this._detachKeyboardEvents(),this._refreshButtonsContainer(),this._detachWrapperContent(),this._detachFocusEvents(),r.empty();var n=(0,p.Z)("<div>").addClass("dx-dropdowneditor-field-template-wrapper").appendTo(r);t.render({model:e,container:(0,W.u)(n),onRendered:()=>{if(this._fieldRenderQueueLength--,0===this._fieldRenderQueueLength){var s=this._input();if(!s.length)throw ee.Z.Error("E1010");this._integrateInput(),a&&S.Z.trigger(s,"focus")}}}),this._attachWrapperContent(r)},_detachWrapperContent(){var t,e,i;this.option("useHiddenSubmitElement")&&(null===(t=this._$submitElement)||void 0===t||t.detach());var r=null===(e=this._$beforeButtonsContainer)||void 0===e?void 0:e[0].parentNode,n=null===(i=this._$afterButtonsContainer)||void 0===i?void 0:i[0].parentNode;r?.removeChild(this._$beforeButtonsContainer[0]),n?.removeChild(this._$afterButtonsContainer[0])},_attachWrapperContent(t){var e,i=this.option("useHiddenSubmitElement");t.prepend(this._$beforeButtonsContainer),i&&(null===(e=this._$submitElement)||void 0===e||e.appendTo(t)),t.append(this._$afterButtonsContainer)},_refreshButtonsContainer(){this._$buttonsContainer=this.$element().children().eq(0)},_integrateInput:function(){this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent()},_refreshEmptinessEvent:function(){S.Z.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData:function(){return this.option("value")},_initTemplates:function(){this._templateManager.addDefaultTemplates({dropDownButton:new mo.k(function(t){var e=(0,p.Z)("<div>").addClass("dx-dropdowneditor-icon");(0,p.Z)(t.container).append(e)})}),this.callBase()},_renderOpenHandler:function(){var t=this._inputWrapper(),e=(0,D.V4)(ie.u,this.NAME),i=this.option("openOnFieldClick");S.Z.off(t,e),S.Z.on(t,e,this._getInputClickHandler(i)),this.$element().toggleClass("dx-dropdowneditor-field-clickable",i),i&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler:function(){tp&&(this._detachFocusOutEvents(),S.Z.on(this._inputWrapper(),(0,D.V4)("focusout",this.NAME),t=>{var e=t.relatedTarget;e&&this.option("opened")&&this._isTargetOutOfComponent(e)&&this.close()}))},_isTargetOutOfComponent:function(t){var e=this.content?(0,p.Z)(this.content()).closest(".".concat(tn)):this._$popup;return 0===(0,p.Z)(t).closest(".".concat(tn),e).length},_detachFocusOutEvents:function(){tp&&S.Z.off(this._inputWrapper(),(0,D.V4)("focusout",this.NAME))},_getInputClickHandler:function(t){return t?e=>{this._executeOpenAction(e)}:e=>{this._focusInput()}},_openHandler:function(){this._toggleOpenState()},_executeOpenAction:function(t){this._openOnFieldClickAction({event:t})},_keyboardEventBindingTarget:function(){return this._input()},_focusInput:function(){return!this.option("disabled")&&(this.option("focusStateEnabled")&&!(0,Hi.si)(this._input())&&(this._resetCaretPosition(),S.Z.trigger(this._input(),"focus")),!0)},_resetCaretPosition:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._input().get(0);if(e){var{value:i}=e,a=(0,v.$K)(i)&&(t||this._isEditable())?i.length:0;this._caret({start:a,end:a},!0)}},_isEditable:function(){return this.option("acceptCustomValue")},_toggleOpenState:function(t){this._focusInput()&&(this.option("readOnly")||(t=arguments.length?t:!this.option("opened"),this.option("opened",t)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState:function(){var t=this.option("opened");t&&this._createPopup(),this.$element().toggleClass("dx-dropdowneditor-active",t),this._setPopupOption("visible",t);var e={expanded:t,controls:this._getControlsAria()};this.setAria(e),this.setAria("owns",t?this._popupContentId:void 0,this.$element())},_createPopup:function(){this._$popup||(this._$popup=(0,p.Z)("<div>").addClass(tn).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent())},_renderPopupContent:E.ZT,_renderPopup:function(){var t=(0,C.l)(this._popupConfig(),this._options.cache("dropDownOptions"));delete t.closeOnOutsideClick,t.elementAttr&&!Object.keys(t.elementAttr).length&&delete t.elementAttr,this._popup=this._createComponent(this._$popup,gt,t),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_setPopupContentId(t){this._popupContentId="dx-"+new Ee.Z,this.setAria("id",this._popupContentId,t)},_contentReadyHandler:E.ZT,_popupConfig:function(){return{onInitialized:this._popupInitializedHandler(),position:(0,C.l)(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>en(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:t=>this._closeOutsideDropDownHandler(t),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_wrapperClassExternal:tn,_ignorePreventScrollEventsDeprecation:!0}},_popupInitializedHandler:function(){return this.option("onPopupInitialized")?t=>{this._popupInitializedAction({popup:t.component})}:null},_dimensionChanged:function(){!(0,Z.Ym)()||this.$element().is(":visible")?this._updatePopupWidth():this.close()},_updatePopupWidth:function(){void 0===Co(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>en(this.$element()))},_popupPositionedHandler:function(t){var e,i,{labelMode:a,stylingMode:r}=this.option();if(this._popup){var n=this._popup.$overlayContent(),s=null===(e=t.position)||void 0===e||null===(i=e.v)||void 0===i?void 0:i.flip,o="hidden"!==a&&"outlined"===r;if(t.position&&n.toggleClass("dx-dropdowneditor-overlay-flipped",s),s&&o&&this._label.isVisible()){var l=this._label.$element();(0,le.pB)(n,{top:(0,le.jt)(n).top-parseInt(l.css("fontSize"))})}}},_popupShowingHandler:E.ZT,_popupHidingHandler:function(){this.option("opened",!1)},_popupShownHandler:function(){var t;this._openAction(),null===(t=this._validationMessage)||void 0===t||t.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler:function(){var t;this._closeAction(),null===(t=this._validationMessage)||void 0===t||t.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide:function(){var t=this.option("validationMessagePosition");if("auto"!==t)return t;var e="bottom";if(this._popup&&this._popup.option("visible")){var{top:i}=$t.Z.setup(this.$element()),{top:a}=$t.Z.setup(this._popup.$content());e=i+this.option("popupPosition").offset.v>a?"bottom":"top"}return e},_closeOutsideDropDownHandler:function(t){var{target:e}=t,i=(0,p.Z)(e),a=this.getButton("dropDown"),r=a&&a.$element(),n=!!i.closest(this.$element()).length,s=!!i.closest(r).length;return!n&&!s},_clean:function(){delete this._openOnFieldClickAction,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption:function(t,e){this._setWidgetOption("_popup",arguments)},_validatedOpening:function(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems:function(){return"useButtons"===this.option("applyValueMode")?this._popupToolbarItemsConfig():[]},_getFirstPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-done.dx-button")},_getLastPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-cancel.dx-button")},_popupElementTabHandler:function(t){var e=(0,p.Z)(t.currentTarget);(t.shiftKey&&e.is(this._getFirstPopupElement())||!t.shiftKey&&e.is(this._getLastPopupElement()))&&(S.Z.trigger(this._input(),"focus"),t.preventDefault())},_popupElementEscHandler:function(){S.Z.trigger(this._input(),"focus"),this.close()},_popupButtonInitializedHandler:function(t){t.component.registerKeyHandler("tab",this._popupElementTabHandler.bind(this)),t.component.registerKeyHandler("escape",this._popupElementEscHandler.bind(this))},_popupToolbarItemsConfig:function(){var t=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}}];return this._applyButtonsLocation(t)},_applyButtonsLocation:function(t){var e=this.option("buttonsLocation"),i=t;if("default"!==e){var a=(0,E.Um)(e);(0,y.S6)(i,function(r,n){(0,C.l)(n,{toolbar:a[0],location:a[1]})})}return i},_applyButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged:function(t){var e=Me.default.getOptionsFromContainer(t);this._setPopupOption(e);var i=Object.keys(e);(-1!==i.indexOf("width")||-1!==i.indexOf("height"))&&this._dimensionChanged()},_renderSubmitElement:function(){this.option("useHiddenSubmitElement")&&(this._$submitElement=(0,p.Z)("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue:function(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement:function(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose:function(){this._detachFocusOutEvents(),this.callBase()},_optionChanged:function(t){var e;switch(t.name){case"width":case"height":this.callBase(t),null===(e=this._popup)||void 0===e||e.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":(0,v.$K)(t.value)?this._renderField():this._invalidate();break;case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(t),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":(0,Z.Ym)()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(t.value),this.callBase(t);break;default:this.callBase(t)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)},field:function(){return(0,W.u)(this._input())},content:function(){return this._popup?this._popup.content():null}});(0,J.Z)("dxDropDownEditor",ip);const ap=ip;var rp="dx-list-group",np=function(t){return(t.group<<20)+t.item},pi=function(t){return{group:t>>20,item:1048575&t}},ZI=Rs.inherit({_groupElements:function(){return this._collectionWidget._itemContainer().find("."+rp)},_groupItemElements:function(t){return t.find(".dx-list-item")},getIndexByItemData:function(t){var e=this._collectionWidget.option("items"),i=!1;return!!t&&(t.items&&t.items.length&&(t=t.items[0]),(0,y.S6)(e,function(a,r){if(!r.items||((0,y.S6)(r.items,function(n,s){return s!==t||(i={group:a,item:n},!1)}),i))return!1}),i)},getItemDataByIndex:function(t){var e=this._collectionWidget.option("items");return(0,v.kE)(t)?this.itemsGetter()[t]:t&&e[t.group]&&e[t.group].items[t.item]||null},itemsGetter:function(){for(var t=[],e=this._collectionWidget.option("items"),i=0;i<e.length;i++)e[i]&&e[i].items?t=t.concat(e[i].items):t.push(e[i]);return t},deleteItemAtIndex:function(t){var e=pi(t);this._collectionWidget.option("items")[e.group].items.splice(e.item,1)},getKeysByItems:function(t){var i,e=[];for(i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);var a=[];for(i=0;i<e.length;i++)a.push(this._collectionWidget.keyOf(e[i]));return a},getIndexByKey:function(t,e){var i=e||this._collectionWidget.option("items"),a=-1,r=this;return(0,y.S6)(i,function(n,s){if(s.items&&((0,y.S6)(s.items,function(o,l){var d=r._collectionWidget.keyOf(l);if(r._equalKeys(d,t))return a={group:n,item:o},!1}),-1!==a))return!1}),a},_getGroups:function(t){var i=this._collectionWidget._dataController.group();return i?Mi.Z.queryByOptions((0,He.Z)(t),{group:i}).toArray():this._collectionWidget.option("items")},getItemsByKeys:function(t,e){var i=[],a=this._getGroups(e),r={},n=s=>{var o=this.getIndexByKey(s,a),l=o&&a[o.group];if(l)return{groupKey:l.key,item:l.items[o.item]}};return(0,y.S6)(t,function(s,o){var l=n(o);if(l){var d=l.groupKey,u=l.item,h=r[d];h||(r[d]=h={key:d,items:[]},i.push(h)),h.items.push(u)}}),i},moveItemAtIndexToIndex:function(t,e){var i=this._collectionWidget.option("items"),a=pi(t),r=pi(e),n=i[a.group].items,s=i[r.group].items,o=n[a.item];n.splice(a.item,1),s.splice(r.item,0,o)},_isItemIndex:function(t){return t&&(0,v.kE)(t.group)&&(0,v.kE)(t.item)},_getNormalizedItemIndex:function(t){var e=(0,p.Z)(t),i=e.closest("."+rp);return i.length?np({group:this._groupElements().index(i),item:this._groupItemElements(i).index(e)}):-1},_normalizeItemIndex:function(t){return np(t)},_denormalizeItemIndex:function(t){return pi(t)},_getItemByNormalizedIndex:function(t){var e=pi(t),i=this._groupElements().eq(e.group);return this._groupItemElements(i).eq(e.item)},_itemsFromSameParent:function(t,e){return pi(t).group===pi(e).group}});const $I=ZI;var sp={},op=[],an=function(t,e,i){op.push({enabled:t,decoratorType:e,decoratorSubType:i})};an(function(){return this.option("menuItems").length},function(){return"menu"},function(){return this.option("menuMode")}),an(function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")},function(){var t=this.option("itemDeleteMode");return"toggle"===t||"slideButton"===t||"swipe"===t||"static"===t?"delete":"menu"},function(){var t=this.option("itemDeleteMode");return"slideItem"===t&&(t="slide"),t}),an(function(){return"none"!==this.option("selectionMode")&&this.option("showSelectionControls")},function(){return"selection"},function(){return"default"}),an(function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")},function(){return"reorder"},function(){return"default"});var XI=Ce.Z.inherit({ctor:function(t){this._list=t,this._fetchRequiredDecorators()},dispose:function(){this._decorators&&this._decorators.length&&(0,y.S6)(this._decorators,function(t,e){e.dispose()})},_fetchRequiredDecorators:function(){this._decorators=[],(0,y.S6)(op,function(t,e){if(e.enabled.call(this._list)){var a=e.decoratorType.call(this._list),r=e.decoratorSubType.call(this._list),n=this._createDecorator(a,r);this._decorators.push(n)}}.bind(this))},_createDecorator:function(t,e){return new(this._findDecorator(t,e))(this._list)},_findDecorator:function(t,e){var i,a=null===(i=sp[t])||void 0===i?void 0:i[e];if(!a)throw ee.Z.Error("E1012",t,e);return a},modifyItemElement:function(t){var e=(0,p.Z)(t.itemElement),i={$itemElement:e};this._prependBeforeBags(e,i),this._appendAfterBags(e,i),this._applyDecorators("modifyElement",i)},afterItemsRendered:function(){this._applyDecorators("afterRender")},_prependBeforeBags:function(t,e){var i=this._collectDecoratorsMarkup("beforeBag",e,"dx-list-item-before-bag");t.prepend(i)},_appendAfterBags:function(t,e){var i=this._collectDecoratorsMarkup("afterBag",e,"dx-list-item-after-bag");t.append(i)},_collectDecoratorsMarkup:function(t,e,i){var a=(0,p.Z)("<div>");return(0,y.S6)(this._decorators,function(){var r=(0,p.Z)("<div>").addClass(i);this[t]((0,C.l)({$container:r},e)),r.children().length&&a.append(r)}),a.children()},_applyDecorators:function(t,e){(0,y.S6)(this._decorators,function(){this[t](e)})},_handlerExists:function(t){if(!this._decorators)return!1;for(var e=this._decorators,i=e.length,a=0;a<i;a++)if(e[a][t]!==E.ZT)return!0;return!1},_eventHandler:function(t,e,i){if(!this._decorators)return!1;for(var a=!1,r=this._decorators,n=r.length,s=0;s<n&&!(a=r[s][t](e,i));s++);return a},handleClick:function(t,e){return this._eventHandler("handleClick",t,e)},handleKeyboardEvents:function(t,e){return this._eventHandler("handleKeyboardEvents",t,e)},handleEnterPressing:function(t){return this._eventHandler("handleEnterPressing",t)},contextMenuHandlerExists:function(){return this._handlerExists("handleContextMenu")},handleContextMenu:function(t,e){return this._eventHandler("handleContextMenu",t,e)},getExcludedItemSelectors:function(){var t=[];return this._applyDecorators("getExcludedSelectors",t),t.join(",")}});const JI=XI;var tT=Us.inherit({_supportedKeys(){var t=this,e=this.callBase(),i=(a,r)=>{var n=this._editStrategy,s=this.option("focusedElement"),o=n.getNormalizedIndex(s);if(o!==this._getLastItemIndex()||!this._dataController.isLoading())if(a.shiftKey&&t.option("itemDragging.allowReordering")){var u=n.getItemElement(o+(r?-1:1));this.reorderItem(s,u),this.scrollToItem(s),a.preventDefault()}else this._editProvider.handleKeyboardEvents(o,r)||(r?e.upArrow(a):e.downArrow(a))};return(0,C.l)({},e,{del:a=>{t.option("allowItemDeleting")&&(a.preventDefault(),t.deleteItem(t.option("focusedElement")))},upArrow:a=>i(a,!0),downArrow:a=>i(a),enter:function(a){this._editProvider.handleEnterPressing(a)||e.enter.apply(this,arguments)},space:function(a){this._editProvider.handleEnterPressing(a)||e.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();var t=this._editProvider.getExcludedItemSelectors();t.length&&(this._itemElementsCache=this._itemElementsCache.not(t))},_isItemStrictEquals:function(t,e){var i=t&&t.__dx_key__;return!(i&&!this.key()&&this._selection.isItemSelected(i))&&this.callBase(t,e)},_getDefaultOptions(){return(0,C.l)(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:A.Z.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:t=>"ios"===t.platform,options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return"page"===this.option("selectAllMode")},_initEditProvider(){this._editProvider=new JI(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new $I(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>"dx-list-item-selected",_itemResponseWaitClass:()=>"dx-list-item-response-wait",_itemClickHandler(t){var e=(0,p.Z)(t.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(e,t)||(this._saveSelectionChangeEvent(t),this.callBase(...arguments))},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(t){var e=(0,p.Z)(t.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){if((0,D.z6)(t)&&this._editProvider.handleContextMenu(e,t))return void(t.handledByEditProvider=!0);this.callBase(...arguments)}},_getItemContainer:function(t){if(this.option("grouped")){var e,i=null===(e=this._editStrategy.getIndexByItemData(t))||void 0===e?void 0:e.group;return this._getGroupContainerByIndex(i)}return this.callBase(t)},_itemContextMenuHandler(t){var e=(0,p.Z)(t.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){if(!t.handledByEditProvider&&this._editProvider.handleContextMenu(e,t))return void t.preventDefault();this.callBase(...arguments)}},_postprocessRenderItem(t){this.callBase(...arguments),this._editProvider.modifyItemElement(t)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(t){var e=this._editStrategy.getItemElement(t);this.option("focusedElement",e),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(t){switch(t.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(t);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(t)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(t){return this._itemElements().index(t)},getItemElementByFlatIndex(t){var e=this._itemElements();return t<0||t>=e.length?(0,p.Z)():e.eq(t)},getItemByIndex(t){return this._editStrategy.getItemDataByIndex(t)}}),iT=tT.inherit(ni).inherit({_addWidgetPrefix:function(t){return"dx-list-"+t},_getCombinedFilter:function(){var t=this._dataController,e={filter:t.filter()};return t.addSearchFilter(e),e.filter},_initDataSource:function(){var t=this.option("searchValue"),e=this.option("searchExpr"),i=this.option("searchMode");this.callBase();var a=this._dataController;t&&t.length&&a.searchValue(t),i.length&&a.searchOperation(ni.getOperationBySearchMode(i)),e&&a.searchExpr(e)}});const lp=iT;(0,J.Z)("dxList",lp);const La=lp;var aT=(0,C.l)({},mr.Z,{_dataExpressionDefaultOptions:function(){return{items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}},_initDataExpressions:function(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource:function(){this.option("dataSource")||(this._dataSource=new ti.o({store:new fr.Z(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter:function(){this._displayGetter=(0,Q.vb)(this._displayGetterExpr())},_displayGetterExpr:function(){return this.option("displayExpr")},_compileValueGetter:function(){this._valueGetter=(0,Q.vb)(this._valueGetterExpr())},_valueGetterExpr:function(){return this.option("valueExpr")||"this"},_loadValue:function(t){var e=new b.BH;return t=this._unwrappedValue(t),(0,v.$K)(t)?(this._loadSingle(this._valueGetterExpr(),t).done(function(i){this._isValueEquals(this._valueGetter(i),t)?e.resolve(i):e.reject()}.bind(this)).fail(function(){e.reject()}),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading:function(){var t;null===(t=this._loadValueDeferred)||void 0===t||t.reject({shouldSkipCallback:!0})},_getCurrentValue:function(){return this.option("value")},_unwrappedValue:function(t){var e;return(t=null!==(e=t)&&void 0!==e?e:this._getCurrentValue())&&this._dataSource&&"this"===this._valueGetterExpr()&&(t=this._getItemKey(t)),tt.default.unwrap(t)},_getItemKey:function(t){var e=this._dataSource.key();if(Array.isArray(e)){for(var i={},a=0,r=e.length;a<r;a++)i[e[a]]=t[e[a]];return i}return e&&"object"==typeof t&&(t=t[e]),t},_isValueEquals:function(t,e){var i=this._dataSource&&this._dataSource.key(),a=this._compareValues(t,e);return!a&&i&&(0,v.$K)(t)&&(0,v.$K)(e)&&(a=Array.isArray(i)?this._compareByCompositeKey(t,e,i):this._compareByKey(t,e,i)),a},_compareByCompositeKey:function(t,e,i){var a=v.Kn;if(!a(t)||!a(e))return!1;for(var r=0,n=i.length;r<n;r++)if(t[i[r]]!==e[i[r]])return!1;return!0},_compareByKey:function(t,e,i){var a=tt.default.unwrap,r=(0,E.IS)(a(t[i]),t),n=(0,E.IS)(a(e[i]),e);return this._compareValues(r,n)},_compareValues:function(t,e){return(0,Q.Ex)(t,!0)===(0,Q.Ex)(e,!0)},_initDynamicTemplates:E.ZT,_setCollectionWidgetItemTemplate:function(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr:function(){var t=this.option("valueExpr");return(0,v.HD)(t)&&"this"!==t||(0,v.mf)(t)?t:null},_dataExpressionOptionChanged:function(t){switch(t.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}});const dp=aT;var up=(0,Z.Jj)(),lT=["startswith","contains","endwith","notcontains"],hp="android"!==K.Z.real().platform,cp=ap.inherit({_supportedKeys:function(){var t=this.callBase();return(0,C.l)({},t,{tab:function(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);var i=(0,p.Z)(this._list.option("focusedElement"));i.length&&this._setSelectedElement(i)}t.tab.apply(this,arguments)},space:E.ZT,home:E.ZT,end:E.ZT})},_allowSelectItemByTab:function(){return this.option("opened")&&"instantly"===this.option("applyValueMode")},_setSelectedElement:function(t){var e=this._valueGetter(this._list._getItemData(t));this._setValue(e)},_setValue:function(t){this.option("value",t)},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),(0,C.l)(dp._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:A.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:E.ZT,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference:function(){this.callBase(),(0,C.l)(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init:function(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange:function(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems:function(){var t=this.option().items;t&&!t.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions:function(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction:function(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction:function(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new jh.s("item")})},_isEditable:function(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget:function(t){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:function(t,e,i){return t>i?e:t<e?i:t},_items:function(){var t=this._getPlainItems(!this._list&&this._dataSource.items());return new He.Z(t).filter("disabled","<>",!0).toArray()},_calcNextItem:function(t){var e=this._items();return e[this._fitIntoRange(this._getSelectedIndex()+t,0,e.length-1)]},_getSelectedIndex:function(){var t=this._items(),e=this.option("selectedItem"),i=-1;return(0,y.S6)(t,function(a,r){if(this._isValueEquals(r,e))return i=a,!1}.bind(this)),i},_createPopup:function(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());var t=this._popup.$content();S.Z.off(t,"mouseup"),S.Z.on(t,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer:function(){var t=this.option("dropDownOptions.container"),e=t&&(0,p.Z)(t);if(e&&e.length&&!(0,v.FJ)(e.get(0))){var i=[].slice.call(e.parents());i.unshift(e.get(0)),(0,y.S6)(i,function(a,r){return r!==(0,p.Z)("body").get(0)&&("hidden"===up.getComputedStyle(r).overflowY?(this._$customBoundaryContainer=(0,p.Z)(r),!1):void 0)}.bind(this))}},_popupWrapperClass:function(){return"dx-dropdownlist-popup-wrapper"},_renderInputValue:function(){var t=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(t,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,t))},_loadInputValue:function(t,e){return this._loadItem(t).always(e)},_getItemFromPlain:function(t,e){var i,a;return e&&"object"!=typeof t&&(e.itemByValue||(e.itemByValue={},(i=this._getPlainItems()).forEach(function(r){e.itemByValue[this._valueGetter(r)]=r},this)),a=e.itemByValue[t]),a||(i=this._getPlainItems(),a=(0,E.h3)(i,function(r){return this._isValueEquals(this._valueGetter(r),t)}.bind(this))[0]),a},_loadItem:function(t,e){var i=this._getItemFromPlain(t,e);return void 0!==i?(new b.BH).resolve(i).promise():this._loadValue(t)},_getPlainItems:function(t){var e=[];t=t||this.option("items")||this._dataSource.items()||[];for(var i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);return e},_updateActiveDescendant(){var t,e=this.option("opened"),i=null===(t=this._list)||void 0===t?void 0:t.getFocusedItemId(),a=(0,p.Z)("#".concat(i)).length>0;this.setAria({activedescendant:e&&a&&i||null})},_setSelectedItem:function(t){var e=this._displayValue(t);this.option("selectedItem",(0,E.IS)(t,null)),this.option("displayValue",e)},_displayValue:function(t){return this._displayGetter(t)},_refreshSelected:function(){var t={};this._listItemElements().each(function(e,i){var a=(0,p.Z)(i),r=this._valueGetter(a.data("dxListItemData"));this._isSelectedValue(r,t)?this._list.selectItem(a):this._list.unselectItem(a)}.bind(this))},_popupShownHandler:function(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy:function(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue:function(t){return this._isValueEquals(t,this.option("value"))},_validateSearchMode:function(){var t=this.option("searchMode"),e=t.toLowerCase();if(!lT.includes(e))throw ee.Z.Error("E1019",t)},_clearSelectedItem:function(){this.option("selectedItem",null)},_processDataSourceChanging:function(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(function(){this._isCustomValueAllowed()||this._clearSelectedItem()}.bind(this))},_isCustomValueAllowed:function(){return this.option("displayCustomValue")},reset:function(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements:function(){return this._$list?this._$list.find(".dx-list-item"):(0,p.Z)()},_popupConfig:function(){return(0,C.l)(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent:function(){this.callBase(),this._renderList()},_getKeyboardListeners(){var t=this._canListHaveFocus();return this.callBase().concat([!t&&this._list])},_renderList:function(){this._listId="dx-"+(new Ee.Z)._value;var t=(0,p.Z)("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=t,this._list=this._createComponent(t,La,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick:function(){var t=(0,D.V4)("mousedown","dxDropDownList");S.Z.off(this._$list,t),S.Z.on(this._$list,t,e=>e.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState:function(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_setDefaultAria:function(){this.setAria({haspopup:"listbox",autocomplete:"list"})},_refreshList:function(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource:function(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:function(){return"desktop"===K.Z.real().deviceType},_listConfig:function(){var t={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:!!this._isDesktopDevice()&&this.option("hoverStateEnabled"),focusStateEnabled:!!this._isDesktopDevice()&&this.option("focusStateEnabled")};return this._canListHaveFocus()||(t.tabIndex=null),t},_canListHaveFocus:()=>!1,_getDataSource:function(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:function(){return{paginate:!1}},_getGroupedOption:function(){return this.option("grouped")},_dataSourceFromUrlLoadMode:function(){return"raw"},_listContentReadyHandler:function(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption:function(t,e){this._setWidgetOption("_list",arguments)},_listItemClickAction:function(t){this._listItemClickHandler(t),this._itemClickAction(t)},_listItemClickHandler:E.ZT,_setListDataSource:function(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList:function(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded:function(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter:function(){return!this._canKeepDataSource()&&this._needPassDataSourceToList()},_canKeepDataSource:function(){var t=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!t&&!this._isLastMinSearchLengthExceeded},_searchValue:function(){return this._input().val()||""},_getSearchEvent:function(){return(0,D.V4)("input",this.NAME+"Search")},_getCompositionStartEvent:function(){return(0,D.V4)("compositionstart",this.NAME+"CompositionStart")},_getCompositionEndEvent:function(){return(0,D.V4)("compositionend",this.NAME+"CompositionEnd")},_getSetFocusPolicyEvent:function(){return(0,D.V4)("input",this.NAME+"FocusPolicy")},_renderEvents:function(){this.callBase(),S.Z.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(S.Z.on(this._input(),this._getSearchEvent(),t=>{this._searchHandler(t)}),hp&&(S.Z.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),S.Z.on(this._input(),this._getCompositionEndEvent(),t=>{this._isTextCompositionInProgress(void 0),this._searchHandler(t,this._searchValue())})))},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")},_refreshEvents:function(){S.Z.off(this._input(),this._getSearchEvent()),S.Z.off(this._input(),this._getSetFocusPolicyEvent()),hp&&(S.Z.off(this._input(),this._getCompositionStartEvent()),S.Z.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress:function(t){if(!arguments.length)return this._isTextComposition;this._isTextComposition=t},_searchHandler:function(t,e){if(!this._isTextCompositionInProgress()){if(!this._isMinSearchLengthExceeded())return void this._searchCanceled();var i=this.option("searchTimeout");i?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(e)},i)):this._searchDataSource(e)}},_searchCanceled:function(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._searchValue();this._filterDataSource(t)},_filterDataSource:function(t){this._clearSearchTimer();var e=this._dataController;e.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),e.searchOperation(this.option("searchMode")),e.searchValue(t),e.load().done(this._dataSourceFiltered.bind(this,t))},_clearFilter:function(){var t=this._dataController;t.searchValue()&&t.searchValue(null)},_dataSourceFiltered:function(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup:function(){return this._hasItemsToShow()},_refreshPopupVisibility:function(){if(!this.option("readOnly")&&this._searchValue()){var t=this._shouldOpenPopup();t&&!this._isFocused()||(this.option("opened",t),t&&(this._updatePopupWidth(),this._updateListDimensions()))}},_dataSourceChangedHandler:function(t){0===this._dataController.pageIndex()?this.option().items=t:this.option().items=this.option().items.concat(t)},_hasItemsToShow:function(){var i=(this._dataController.items()||[]).length;return!(!this._needPassDataSourceToList()||!i)},_clearSearchTimer:function(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler:function(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged:function(){this.callBase(),this._updateListDimensions()},_needPopupRepaint:function(){var t=this._dataController,e=t.pageIndex(),i=(0,v.$K)(this._pageIndex)&&e<=this._pageIndex||t.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,i},_updateListDimensions:function(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight:function(){var t=this.$element(),e=this._$customBoundaryContainer,i=t.offset().top-(e?e.offset().top:0),a=(0,I.zp)(up),r=e?Math.min((0,I.zp)(e),a):a,n=Math.max(i,r-i-(0,I.zp)(t));return Math.min(.5*r,n)},_clean:function(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose:function(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption:function(){this._setListOption.apply(this,arguments)},_setSubmitValue:function(){var t=this.option("value"),e=this._shouldUseDisplayValue(t)?this._displayGetter(t):t;this._getSubmitElement().val(e)},_shouldUseDisplayValue:function(t){return"this"===this.option("valueExpr")&&(0,v.Kn)(t)},_optionChanged:function(t){switch(this._dataExpressionOptionChanged(t),t.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(t.name,t.value),this.callBase(t);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(t.name);break;case"displayValue":this.option("text",t.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":t.previousValue!==t.value&&this._selectionChangedAction({selectedItem:t.value});break;default:this.callBase(t)}}}).include(dp,Hh);(0,J.Z)("dxDropDownList",cp);const dT=cp;var pp="dx-radiobutton-icon",_p=Ot.Z.inherit({_supportedKeys:function(){return(0,C.l)(this.callBase(),{space:function(t){t.preventDefault(),this._clickAction({event:t})}})},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:function(){return!0},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this.$element().addClass("dx-radiobutton")},_initMarkup:function(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon:function(){this._$icon=(0,p.Z)("<div>").addClass(pp),(0,p.Z)("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState:function(t){this.$element().toggleClass("dx-radiobutton-checked",t).find("."+pp).toggleClass("dx-radiobutton-icon-checked",t),this.setAria("checked",t)},_renderClick:function(){var t=(0,D.V4)(ie.u,this.NAME);this._clickAction=this._createAction(function(e){this._clickHandler(e.event)}.bind(this)),S.Z.off(this.$element(),t),S.Z.on(this.$element(),t,function(e){this._clickAction({event:e})}.bind(this))},_clickHandler:function(t){this._saveValueChangeEvent(t),this.option("value",!0)},_optionChanged:function(t){"value"===t.name?(this._renderCheckedState(t.value),this.callBase(t)):this.callBase(t)}});(0,J.Z)("dxRadioButton",_p);const _T=_p;var xo="dxListEditDecorator",vT=(0,D.V4)(Or,xo),gT=(0,D.V4)(Rr,xo),fT=(0,D.V4)(ma,xo),mT=Ce.Z.inherit({ctor:function(t){this._list=t,this._init()},_init:E.ZT,_shouldHandleSwipe:!1,_attachSwipeEvent:function(t){var e={itemSizeFunc:function(){return this._clearSwipeCache&&(this._itemWidthCache=(0,I.dz)(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}.bind(this)};S.Z.on(t.$itemElement,vT,e,this._itemSwipeStartHandler.bind(this)),S.Z.on(t.$itemElement,gT,this._itemSwipeUpdateHandler.bind(this)),S.Z.on(t.$itemElement,fT,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler:function(t){var e=(0,p.Z)(t.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")?t.cancel=!0:(clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(e,t))},_itemSwipeUpdateHandler:function(t){var e=(0,p.Z)(t.currentTarget);this._swipeUpdateHandler(e,t)},_itemSwipeEndHandler:function(t){var e=(0,p.Z)(t.currentTarget);this._swipeEndHandler(e,t),this._clearSwipeCache=!0},beforeBag:E.ZT,afterBag:E.ZT,_commonOptions:function(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement:function(t){this._shouldHandleSwipe&&(this._attachSwipeEvent(t),this._clearSwipeCache=!0)},afterRender:E.ZT,handleClick:E.ZT,handleKeyboardEvents:E.ZT,handleEnterPressing:E.ZT,handleContextMenu:E.ZT,_swipeStartHandler:E.ZT,_swipeUpdateHandler:E.ZT,_swipeEndHandler:E.ZT,visibilityChange:E.ZT,getExcludedSelectors:E.ZT,dispose:E.ZT});const CT=mT;var vp="dx-list-select-decorator-enabled",gp=(0,D.V4)(ie.u,"dxListEditDecorator");!function zI(t,e,i){var a=sp,r={};r[t]=a[t]?a[t]:{},r[t][e]=i,(0,C.l)(a,r)}("selection","default",CT.inherit({_init:function(){this.callBase.apply(this,arguments);var t=this._list.option("selectionMode");this._singleStrategy="single"===t,this._containerClass=this._singleStrategy?"dx-list-select-radiobutton-container":"dx-list-select-checkbox-container",this._controlClass=this._singleStrategy?"dx-list-select-radiobutton":"dx-list-select-checkbox",this._controlWidget=this._singleStrategy?_T:Aa,this._list.$element().addClass(vp)},beforeBag:function(t){var e=t.$itemElement,i=t.$container.addClass(this._containerClass),a=(0,p.Z)("<div>").addClass(this._controlClass).appendTo(i);new this._controlWidget(a,(0,C.l)(this._commonOptions(),{value:this._isSelected(e),elementAttr:{"aria-label":"Check State"},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:function(r){r.event&&this._list._saveSelectionChangeEvent(r.event),this._processCheckedState(e,r.value),r.event&&r.event.stopPropagation()}.bind(this)}))},modifyElement:function(t){this.callBase.apply(this,arguments);var e=t.$itemElement,i=this._controlWidget.getInstance(e.find("."+this._controlClass));S.Z.on(e,"stateChanged",function(a,r){i.option("value",r)}.bind(this))},_updateSelectAllState:function(){this._$selectAll&&this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender:function(){"all"===this._list.option("selectionMode")&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents:function(t,e){var i=!e,a=this._list,r=this._$selectAll,n=a._getLastItemIndex();return!(!r||!(e&&0===t||i&&t===n)||(a.option("focusedElement",r),a.scrollToItem(a.option("focusedElement")),0))},handleEnterPressing:function(t){if(this._$selectAll&&this._$selectAll.hasClass("dx-state-focused"))return t.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(t),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll:function(){var t=this._$selectAll=(0,p.Z)("<div>").addClass("dx-list-select-all"),e=this._list,i=e._supportedKeys().downArrow.bind(e);this._selectAllCheckBox=e._createComponent((0,p.Z)("<div>").addClass("dx-list-select-all-checkbox").appendTo(t),Aa,{elementAttr:{"aria-label":"Select All"},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",i),(0,p.Z)("<div>").addClass("dx-list-select-all-label").text(this._list.option("selectAllText")).appendTo(t),this._list.itemsContainer().prepend(t),this._updateSelectAllState(),this._attachSelectAllHandler()},_attachSelectAllHandler:function(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),S.Z.off(this._$selectAll,gp),S.Z.on(this._$selectAll,gp,this._selectAllClickHandler.bind(this))},_selectAllHandler:function(t){t.event&&t.event.stopPropagation();var e=this._selectAllCheckBox.option("value");t.event&&this._list._saveSelectionChangeEvent(t.event),!0===e?this._selectAllItems():!1===e&&this._unselectAllItems(),this._list._createActionByOption("onSelectAllValueChanged")({value:e})},_checkSelectAllCapability:function(){var t=this._list,e=t._dataController;return!("allPages"===t.option("selectAllMode")&&t.option("grouped")&&!e.group()&&(ee.Z.log("W1010"),1))},_selectAllItems:function(){this._checkSelectAllCapability()&&this._list._selection.selectAll("page"===this._list.option("selectAllMode"))},_unselectAllItems:function(){this._checkSelectAllCapability()&&this._list._selection.deselectAll("page"===this._list.option("selectAllMode"))},_selectAllClickHandler:function(t){this._list._saveSelectionChangeEvent(t),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected:function(t){return this._list.isItemSelected(t)},_processCheckedState:function(t,e){e?this._list.selectItem(t):this._list.unselectItem(t)},dispose:function(){this._disposeSelectAll(),this._list.$element().removeClass(vp),this.callBase.apply(this,arguments)},_disposeSelectAll:function(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));var fp="dx-selectbox-popup-wrapper",mp=dT.inherit({_supportedKeys:function(){var t=this,e=this.callBase(),i=function(r){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(r.preventDefault(),this.reset()),this._savedTextRemoveEvent=r,this._preventSubstitution=!0},a=function(){t.option("searchEnabled")&&t._valueSubstituted()&&t._searchHandler()};return(0,C.l)({},e,{tab:function(){this.option("opened")&&"instantly"===this.option("applyValueMode")&&this._resetCaretPosition(!0),e.tab&&e.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow:function(r){if(e.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(r),!0},downArrow:function(r){if(e.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(r),!0},leftArrow:function(){a(),e.leftArrow&&e.leftArrow.apply(this,arguments)},rightArrow:function(){a(),e.rightArrow&&e.rightArrow.apply(this,arguments)},home:function(){a(),e.home&&e.home.apply(this,arguments)},end:function(){a(),e.end&&e.end.apply(this,arguments)},escape:function(){var r=e.escape&&e.escape.apply(this,arguments);return this._cancelEditing(),r??!0},enter:function(r){var n=this.option("opened"),s=this._input().val().trim(),o=s&&this._list&&!this._list.option("focusedElement");if(!s&&(0,v.$K)(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(r),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return r.preventDefault(),o&&(n&&this._toggleOpenState(),this._valueChangeEventHandler(r)),n;if(e.enter&&e.enter.apply(this,arguments))return n}},space:function(r){var n=this.option("opened"),s=this.option("searchEnabled"),o=this.option("acceptCustomValue");if(n&&!s&&!o)return r.preventDefault(),this._valueChangeEventHandler(r),!0},backspace:i,del:i})},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{placeholder:A.Z.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating:function(t){(0,v.$K)(t.customItem)||(t.customItem=t.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init:function(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup:function(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup:function(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass:function(){return this.callBase()+" "+fp},_setDeprecatedOptions(){this.callBase(),(0,C.l)(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing:function(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState:function(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement:function(){var t;if(this._searchValue()){var{items:i,selectedItem:a}=this.option(),r=this._list._itemElements(),n=null!==(t=i?.indexOf(a))&&void 0!==t?t:-1,s=-1===n||this._isCustomItemSelected()?null:r.eq(n);this._focusListElement(s)}else this._focusListElement(null)},_renderFocusedElement:function(){if(this._list){if(!this._searchValue()||this.option("acceptCustomValue"))return void this._focusListElement(null);var i=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(i)}},_focusListElement:function(t){this._preventInputValueRender=!0,this._list.option("focusedElement",(0,W.u)(t)),delete this._preventInputValueRender},_scrollToSelectedItem:function(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler:function(){this.callBase(),this._dataController.paginate()&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue:function(){return this._renderInputValue(),this._setSubmitValue(),(new b.BH).resolve()},_renderInputValue:function(){return this.callBase().always(function(){this._renderInputValueAsync()}.bind(this))},_renderInputValueAsync:function(){this._renderTooltip(),this._renderInputValueImpl().always(function(){this._refreshSelected()}.bind(this))},_renderInputValueImpl:function(){return this._renderField(),(new b.BH).resolve()},_setNextItem:function(t){var e=this._calcNextItem(t),i=this._valueGetter(e);this._setValue(i)},_setNextValue:function(t){(this._dataController.isLoaded()?(new b.BH).resolve():this._dataController.load()).done(function(){var i=this._getSelectedIndex(),a=this._dataController.pageSize(),r=this._dataController.isLastPage(),n=i===this._items().length-1;this._saveValueChangeEvent(t);var s="downArrow"===(0,D.EV)(t)?1:-1;a&&!r&&n&&s>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,s))):this._setNextItem(s)}.bind(this))},_setSelectedItem:function(t){var e=!this._isCustomValueAllowed()&&void 0===t;this.callBase(e?null:t),!e&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed:function(){return this.option("acceptCustomValue")||this.callBase()},_displayValue:function(t){return t=!(0,v.$K)(t)&&this._isCustomValueAllowed()?this.option("value"):t,this.callBase(t)},_listConfig:function(){var t=(0,C.l)(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&(0,C.l)(t,{showSelectionControls:!0,selectByClick:!0}),t},_listFocusedItemChangeHandler:function(t){if(!this._preventInputValueRender){var e=t.component,i=(0,p.Z)(e.option("focusedElement")),a=e._getItemData(i);this._updateField(a)}},_updateField:function(t){if(!this._getTemplateByOption("fieldTemplate")||!this.option("fieldTemplate")){var i=this._displayGetter(t);return this.option("text",i),void this._renderDisplayText(i)}this._renderField()},_getSelectionChangeHandler:function(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):E.ZT},_selectionChangeHandler:function(t){(0,y.S6)(t.addedItems||[],function(e,i){this._setValue(this._valueGetter(i))}.bind(this))},_getActualSearchValue:function(){return this._dataController.searchValue()},_toggleOpenState:function(t){if(!this.option("disabled")){if(!(t=arguments.length?t:!this.option("opened"))&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&t)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;var i=this._getActualSearchValue();i&&this._wasSearch(!0),this._filterDataSource(i||null)}else this._setListOption("items",[]);t&&this._scrollToSelectedItem(),this.callBase(t)}},_renderTooltip:function(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions:function(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText:function(){var t=this.option("selectedItem");if(null===t)return!1;var e=this._displayGetter(t);return(e?String(e):"")===this._searchValue()},_popupHidingHandler:function(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler:function(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText:function(t){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(function(){var{acceptCustomValue:e,text:i,selectedItem:a}=this.option();e?!t&&!this._isValueChanging&&(this._updateField(a??this._createCustomItem(i)),this._clearFilter()):this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")?this._clearTextValue():this._isValueEqualInputText()||this._renderInputValue().always(function(r){var n=(0,E.IS)(r,a);this._setSelectedItem(n),this._updateField(n),this._clearFilter()}.bind(this))}.bind(this))},_valueChangeEventIncludesBlur:function(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent:function(t){return this._preventNestedFocusEvent(t)||this._valueChangeEventIncludesBlur()},_focusOutHandler:function(t){this._isPreventedFocusOutEvent(t)||(this._isOverlayNestedTarget(t.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(t)),t.target=this._input().get(0),this.callBase(t)},_cancelSearchIfNeed:function(t){var{searchEnabled:e}=this.option(),i=this._isOverlayNestedTarget(t?.relatedTarget);if(this._wasSearch()&&e&&!i){var r,n=null===(r=this._popup)||void 0===r?void 0:r._hideAnimationProcessing;this._clearSearchTimer(),n?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch:function(t){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=t},_isOverlayNestedTarget:function(t){return!!(0,p.Z)(t).closest(".".concat(fp)).length},_clearTextValue:function(){var t=this.option("selectedItem"),e=this._displayGetter(t);t&&""!==e&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup:function(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused:function(){var t=Y.Z.getActiveElement(this.element());return this.callBase()&&(0,p.Z)(t).closest(this._input()).length>0},_getValueChangeEventOptionName:function(){return"customItemCreateEvent"},_renderValueChangeEvent:function(){this._isEditable()&&this.callBase()},_fieldRenderData:function(){var t=this._list&&this.option("opened")&&(0,p.Z)(this._list.option("focusedElement"));return t&&t.length?this._list._getItemData(t):this.option("selectedItem")},_isSelectedValue:function(t){return this._isValueEquals(t,this.option("value"))},_shouldCloseOnItemClick:function(){return!(this.option("showSelectionControls")&&"single"!==this.option("selectionMode"))},_listItemClickHandler:function(t){var e=this._getCurrentValue();this._focusListElement((0,p.Z)(t.itemElement)),this._saveValueChangeEvent(t.event),this._completeSelection(this._valueGetter(t.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&e===this._valueGetter(t.itemData)&&this._updateField(t.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter:function(){return this._wasSearch()},_completeSelection:function(t){this._setValue(t)},_loadItem:function(t,e){var i=this,a=new b.BH;return this.callBase(t,e).done(function(r){a.resolve(r)}.bind(this)).fail(function(r){if(null==r||!r.shouldSkipCallback){var n=i.option("selectedItem");i.option("acceptCustomValue")&&t===i._valueGetter(n)?a.resolve(n):a.reject()}}.bind(this)),a.promise()},_loadInputValue:function(t,e){return this._loadItemDeferred=this._loadItem(t).always(e),this._loadItemDeferred},_isCustomItemSelected:function(){var t=this.option("selectedItem"),e=this._searchValue(),i=this._displayGetter(t);return!i||e!==i.toString()},_valueChangeEventHandler:function(t){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(t))},_initCustomItemCreatingAction:function(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem:function(t){var e={text:t},i=this._customItemCreatingAction(e),a=(0,E.IS)(i,e.customItem);return(0,v.$K)(i)&&Qc.Z.log("W0015","onCustomItemCreating","customItem"),a},_customItemAddedHandler:function(t){var e=this._searchValue(),i=this._createCustomItem(e);if(this._saveValueChangeEvent(t),void 0===i)throw this._renderValue(),Qc.Z.Error("E0121");(0,v.tI)(i)?(0,b.p4)(i).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(i)},_setCustomItem:function(t){this._disposed||(this.option("selectedItem",t=t||null),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(t)),this._renderDisplayText(this._displayGetter(t)),this._isValueChanging=!1)},_clearValueHandler:function(t){return this._preventFiltering=!0,this.callBase(t),this._searchCanceled(),!1},_wasSearch:function(t){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=t},_searchHandler:function(){this._preventFiltering?delete this._preventFiltering:(this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments))},_dataSourceFiltered:function(t){this.callBase(),null!==t&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted:function(){var t=this._input().get(0),e=this._searchValue().length,i=0===t.selectionStart&&t.selectionEnd===e,a=t.selectionStart!==t.selectionEnd,r=e===t.selectionEnd;return this._wasSearch()&&a&&!i&&r&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered:function(){return!this._preventSubstitution&&this.option("searchEnabled")&&!this.option("acceptCustomValue")&&"startswith"===this.option("searchMode")},_renderInputSubstitution:function(){if(this._shouldSubstitutionBeRendered()){var t=this._list&&this._getPlainItems(this._list.option("items"))[0];if(t){var e=this._input(),i=e.val().length;if(0!==i){var a=e.get(0),r=this._displayGetter(t).toString();a.value=r,this._caret({start:i,end:r.length})}}}else delete this._preventSubstitution},_dispose:function(){this._renderInputValueAsync=E.ZT,delete this._loadItemDeferred,this.callBase()},_optionChanged:function(t){switch(t.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(t)}}});(0,J.Z)("dxSelectBox",mp);const Cp=mp;var Sp=L(8749),xp=t=>t.getMonth()+1,bp=(t,e)=>{var i=t.getDate(),a=Va("M",t),r=(0,ue.n$)(parseInt(e),a.min,a.max);t.setMonth(r-1,1);var{min:n,max:s}=Va("dM",t),o=(0,ue.n$)(i,n,s);t.setDate(o)},BT={a:t=>t.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:xp,L:xp,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds"},LT=(0,C.l)({},(0,Sp.xe)(),{a:(t,e)=>{var i=t.getHours();i>=12!=!!parseInt(e)&&t.setHours((i+12)%24)},d:(t,e)=>{e>Va("dM",t).max&&t.setMonth(t.getMonth()+1),t.setDate(e)},h:(t,e)=>{var i=t.getHours()>=12;t.setHours(+e%12+(i?12:0))},M:bp,L:bp,E:(t,e)=>{e<0||t.setDate(t.getDate()-t.getDay()+parseInt(e))},y:(t,e)=>{var i=t.getFullYear(),a=String(e).length,r=String(Va("y",t).max).length,n=parseInt(String(i).substr(0,r-a)+e);t.setFullYear(n)}}),Va=(t,e,i)=>{var a={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:0,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1}};return a[i||t]||a.getAmPm},MT=L(1933),z=L(22),bo=["year","day","month","day"],wp=["hours","minutes","seconds","milliseconds"],mt={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:864e5,ONE_YEAR:31536e6,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){var t=new Date;return new Date(t.getFullYear()+50,t.getMonth(),t.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:function(){return"yyyy-MM-dd"},components:bo},time:{getStandardPattern:function(){return"HH:mm"},components:wp},datetime:{getStandardPattern:function(){var t;return function(){var e=(0,p.Z)("<input>").attr("type","datetime");e.val("2000-01-01T01:01Z"),e.val()&&(t="yyyy-MM-ddTHH:mmZ")}(),t||(t="yyyy-MM-ddTHH:mm:ssZ"),mt.FORMATS_INFO.datetime.getStandardPattern=function(){return t},t},components:[...bo,...wp]},"datetime-local":{getStandardPattern:function(){return"yyyy-MM-ddTHH:mm:ss"},components:[...bo,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat:function(t,e){var i=mt.FORMATS_INFO[e].getStandardPattern();return Se.Z.serializeDate(t,i)},fromStandardDateFormat:function(t){var e=Se.Z.dateParser(t);return(0,v.J_)(e)?e:void 0},getMaxMonthDay:function(t,e){return new Date(t,e+1,0).getDate()},mergeDates:function(t,e,i){if(!e)return e||null;if(!t||isNaN(t.getTime())){var a=new Date(null);t=new Date(a.getFullYear(),a.getMonth(),a.getDate())}var r=new Date(t.valueOf());return(0,y.S6)(mt.FORMATS_INFO[i].components,function(){var s=mt.DATE_COMPONENTS_INFO[this];r[s.setter](e[s.getter]())}),r},getLongestCaptionIndex:function(t){var a,e=0,i=0;for(a=0;a<t.length;++a)t[a].length>i&&(e=a,i=t[a].length);return e},formatUsesMonthName:function(t){return X.Z.formatUsesMonthName(t)},formatUsesDayName:function(t){return X.Z.formatUsesDayName(t)},getLongestDate:function(t,e,i){var a=function(t){var e=typeof t;return"string"===e?"format":"object"===e&&void 0!==t.type?t.type:null}(t),r=9;(!a||mt.formatUsesMonthName(a))&&(r=mt.getLongestCaptionIndex(e));var n=new Date(1888,r,21,23,59,59,999);if(!a||mt.formatUsesDayName(a)){var s=n.getDate()-n.getDay()+mt.getLongestCaptionIndex(i);n.setDate(s)}return n},normalizeTime:function(t){t.setSeconds(0),t.setMilliseconds(0)}};mt.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter:function(t,e){var i=new Date(e.getTime());return i.setFullYear(t),X.Z.format(i,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter:function(t,e){var i=new Date(e.getTime());return i.setDate(t),X.Z.format(i,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:function(t){return X.Z.getMonthNames()[t]},startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:function(t){return X.Z.format(new Date(0,0,0,t),"hour")},startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:function(t){return X.Z.format(new Date(0,0,0,0,t),"minute")},startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:function(t){return X.Z.format(new Date(0,0,0,0,0,t),"second")},startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:function(t){return X.Z.format(new Date(0,0,0,0,0,0,t),"millisecond")},startValue:0,endValue:999}};const he=mt;var Ip="dxSwipeable",ZT={onStart:Or,onUpdated:Rr,onEnd:ma,onCancel:"dxswipecancel"},Tp=Li.Z.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{elastic:!0,immediate:!1,immediateTimeout:180,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass("dx-swipeable"),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),!this.option("disabled")){var t=this.NAME;this._createEventData(),(0,y.S6)(ZT,function(e,i){var a=this._createActionByOption(e,{context:this});i=(0,D.V4)(i,t),S.Z.on(this.$element(),i,this._eventData,function(r){return a({event:r})})}.bind(this))}},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}},_detachEventHandlers:function(){S.Z.off(this.$element(),"."+Ip)},_optionChanged:function(t){switch(t.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(t)}},_useTemplates:function(){return!1}});(0,Es.u2)(Tp,Ip);const rn=Tp,JT=class XT extends Me.default{_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{onClick:null,onCaptionClick:null,type:"normal",stylingMode:"outlined",text:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return(0,oe.x2)()},options:{type:"default",stylingMode:"text"}}])}_init(){super._init(),this._initActions()}_initActions(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")}_initMarkup(){super._initMarkup(),this.$element().addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()}_renderButtons(){var{rtlEnabled:e,type:i,stylingMode:a}=this.option();this._prevButton=this._createComponent((0,p.Z)("<div>"),Be.Z,{focusStateEnabled:!1,icon:e?"chevronright":"chevronleft",onClick:o=>{this._clickAction({direction:-1,event:o})},type:i,stylingMode:a,integrationOptions:{}});var r=this._prevButton.$element().addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent((0,p.Z)("<div>"),Be.Z,{focusStateEnabled:!1,icon:e?"chevronleft":"chevronright",onClick:o=>{this._clickAction({direction:1,event:o})},type:i,stylingMode:a,integrationOptions:{}});var n=this._nextButton.$element().addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent((0,p.Z)("<div>").addClass("dx-calendar-caption-button"),Be.Z,{focusStateEnabled:!1,onClick:o=>{this._captionClickAction({event:o})},type:i,stylingMode:a,template:(o,l)=>{var{text:d}=this.option();d.split(" - ").forEach(h=>{(0,p.Z)(l).append((0,p.Z)("<span>").addClass("dx-button-text").text(h))})},integrationOptions:{}});var s=this._caption.$element();this.$element().append(r,s,n)}_renderCaption(){this._caption.option("text",this.option("text"))}toggleButton(e,i){var r=this["_"+e+"Button"];r&&(r.option("disabled",i),r.$element().toggleClass("dx-calendar-disabled-navigator-link",i))}_optionChanged(e){"text"===e.name?this._renderCaption():super._optionChanged(e)}};var wo=L(6513),{abstract:Ct}=Me.default,yo="dx-calendar-empty-cell",Ap="dx-calendar-selected-date",Dp="dx-calendar-cell-in-range",Eo="dx-calendar-cell-range-hover",Io="dx-calendar-cell-range-hover-start",To="dx-calendar-cell-range-hover-end",Op="dx-calendar-range-start-date",Rp="dx-calendar-range-end-date",Ao="dx-calendar-contoured-date",Bp="td:not(.".concat("dx-calendar-week-number-cell",")"),Lp=(0,D.V4)(ie.u,"dxCalendar"),Vp=(0,D.V4)(wo.B,"dxCalendar"),Do="dxDateValueKey",oA=Me.default.inherit({_getViewName:function(){return"base"},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,onCellHover:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup:function(){this.callBase(),this._renderImpl()},_renderImpl:function(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderRange(),this._renderEvents()},_createTable:function(){this._$table=(0,p.Z)("<table>");var t=A.Z.format("dxCalendar-ariaWidgetName"),e=A.Z.format("dxCalendar-ariaHotKeysInfo");return this.setAria({label:"".concat(t,". ").concat(e),role:"grid"},this._$table),this._$table},_renderBody:function(){this.$body=(0,p.Z)("<tbody>").appendTo(this._$table);for(var t={cellDate:this._getFirstCellData(),prevCellDate:null},e=0,i=this.option("rowCount");e<i;e++){t.row=this._createRow();for(var a=0,r=this.option("colCount");a<r;a++)this._renderCell(t,a);this._renderWeekNumberCell(t)}},_createRow:function(){var t=Y.Z.createElement("tr");return this.setAria("role","row",(0,p.Z)(t)),this.$body.get(0).appendChild(t),t},_createCell:function(t,e){var i=Y.Z.createElement("td"),a=(0,p.Z)(i);return i.className=this._getClassNameByDate(t,e),i.setAttribute("data-value",Se.Z.serializeDate(t,z.Z.getShortDateFormat())),(0,Ai.aT)(i,Do,t),this.setAria({role:"gridcell",label:this.getCellAriaLabel(t)},a),{cell:i,$cell:a}},_renderCell:function(t,e){var{cellDate:i,prevCellDate:a,row:r}=t;a&&z.Z.fixTimezoneGap(a,i),t.prevCellDate=i;var{cell:n,$cell:s}=this._createCell(i,e),o=this.option("cellTemplate");(0,p.Z)(r).append(n),o?o.render(this._prepareCellTemplateData(i,e,s)):n.innerHTML=this._getCellText(i),t.cellDate=this._getNextCellData(i)},_getClassNameByDate:function(t,e){var i="dx-calendar-cell";return this._isTodayCell(t)&&(i+=" ".concat("dx-calendar-today")),(this._isDateOutOfRange(t)||this.isDateDisabled(t))&&(i+=" ".concat(yo)),this._isOtherView(t)&&(i+=" ".concat("dx-calendar-other-view")),"range"===this.option("selectionMode")&&(0===e&&(i+=" ".concat("dx-calendar-cell-start-in-row")),e===this.option("colCount")-1&&(i+=" ".concat("dx-calendar-cell-end-in-row")),this._isStartDayOfMonth(t)&&(i+=" ".concat("dx-calendar-cell-start")),this._isEndDayOfMonth(t)&&(i+=" ".concat("dx-calendar-cell-end"))),i},_prepareCellTemplateData:function(t,e,i){var a=t instanceof Date;return{model:{text:a?this._getCellText(t):t,date:a?t:void 0,view:this._getViewName()},container:(0,W.u)(i),index:e}},_renderEvents:function(){this._createCellClickAction(),S.Z.off(this._$table,Lp),S.Z.on(this._$table,Lp,Bp,t=>{(0,p.Z)(t.currentTarget).hasClass(yo)||this._cellClickAction({event:t,value:(0,p.Z)(t.currentTarget).data(Do)})}),S.Z.off(this._$table,Vp),"range"===this.option("selectionMode")&&(this._createCellHoverAction(),S.Z.on(this._$table,Vp,Bp,t=>{(0,p.Z)(t.currentTarget).hasClass(yo)||this._cellHoverAction({event:t,value:(0,p.Z)(t.currentTarget).data(Do)})}))},_createCellClickAction:function(){this._cellClickAction=this._createActionByOption("onCellClick")},_createCellHoverAction:function(){this._cellHoverAction=this._createActionByOption("onCellHover")},_createDisabledDatesHandler:function(){var t=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(t)?this._getDefaultDisabledDatesHandler(t):t||E.ZT},_getDefaultDisabledDatesHandler:function(t){return E.ZT},_isTodayCell:Ct,_isDateOutOfRange:Ct,isDateDisabled:function(t){var e={date:t,view:this._getViewName()};return this._disabledDatesHandler(e)},_isOtherView:Ct,_isStartDayOfMonth:Ct,_isEndDayOfMonth:Ct,_getCellText:Ct,_getFirstCellData:Ct,_getNextCellData:Ct,_renderContouredDate:function(t){if(this.option("focusStateEnabled")){t=t||this.option("contouredDate");var e=this._getContouredCell(),i=this._getCellByDate(t);e.removeClass(Ao),t&&i.addClass(Ao)}},_getContouredCell:function(){return this._$table.find(".".concat(Ao))},_renderValue:function(){if(this.option("allowValueSelection")){var t=this.option("value");Array.isArray(t)||(t=[t]),this._updateSelectedClass(t)}},_updateSelectedClass:function(t){var e;null===(e=this._$selectedCells)||void 0===e||e.forEach(i=>{i.removeClass(Ap)}),this._$selectedCells=t.map(i=>this._getCellByDate(i)),this._$selectedCells.forEach(i=>{i.addClass(Ap)})},_renderRange:function(){var t,e,i,a,r,n,s,o,{allowValueSelection:l,selectionMode:d,value:u,range:h}=this.option();!l||"range"!==d||(null===(t=this._$rangeCells)||void 0===t||t.forEach(c=>{c.removeClass(Dp)}),null===(e=this._$hoveredRangeCells)||void 0===e||e.forEach(c=>{c.removeClass(Eo)}),null===(i=this._$rangeStartHoverCell)||void 0===i||i.removeClass(Io),null===(a=this._$rangeEndHoverCell)||void 0===a||a.removeClass(To),null===(r=this._$rangeStartDateCell)||void 0===r||r.removeClass(Op),null===(n=this._$rangeEndDateCell)||void 0===n||n.removeClass(Rp),this._$rangeCells=h.map(c=>this._getCellByDate(c)),this._$rangeStartDateCell=this._getCellByDate(u[0]),this._$rangeEndDateCell=this._getCellByDate(u[1]),this._$rangeCells.forEach(c=>{c.addClass(Dp)}),null===(s=this._$rangeStartDateCell)||void 0===s||s.addClass(Op),null===(o=this._$rangeEndDateCell)||void 0===o||o.addClass(Rp))},_renderHoveredRange(){var t,e,i,a,r,{allowValueSelection:n,selectionMode:s,hoveredRange:o}=this.option();!n||"range"!==s||(null===(t=this._$hoveredRangeCells)||void 0===t||t.forEach(l=>{l.removeClass(Eo)}),null===(e=this._$rangeStartHoverCell)||void 0===e||e.removeClass(Io),null===(i=this._$rangeEndHoverCell)||void 0===i||i.removeClass(To),this._$hoveredRangeCells=o.map(l=>this._getCellByDate(l)),this._$rangeStartHoverCell=this._getCellByDate(o[0]),this._$rangeEndHoverCell=this._getCellByDate(o[o.length-1]),this._$hoveredRangeCells.forEach(l=>{l.addClass(Eo)}),null===(a=this._$rangeStartHoverCell)||void 0===a||a.addClass(Io),null===(r=this._$rangeEndHoverCell)||void 0===r||r.addClass(To))},getCellAriaLabel:function(t){return this._getCellText(t)},_getFirstAvailableDate:function(){var t=this.option("date"),e=this.option("min");return t=z.Z.getViewFirstCellDate(this._getViewName(),t),new Date(e&&t<e?e:t)},_getCellByDate:Ct,isBoundary:Ct,_optionChanged:function(t){var{name:e,value:i}=t;switch(e){case"value":this._renderValue();break;case"range":this._renderRange();break;case"hoveredRange":this._renderHoveredRange();break;case"contouredDate":this._renderContouredDate(i);break;case"onCellClick":this._createCellClickAction();break;case"onCellHover":this._createCellHoverAction();break;case"min":case"max":case"disabledDates":case"cellTemplate":case"selectionMode":this._invalidate();break;case"_todayDate":this._renderBody();break;default:this.callBase(t)}}});const nn=oA;var hA={month:nn.inherit({_getViewName:function(){return"month"},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl:function(){this.callBase(),this._renderHeader()},_renderBody:function(){this.callBase(),this._$table.find(".".concat("dx-calendar-other-view")).addClass("dx-calendar-other-month")},_renderFocusTarget:E.ZT,getCellAriaLabel:function(t){return X.Z.format(t,"longdate")},_renderHeader:function(){var t=(0,p.Z)("<tr>"),e=(0,p.Z)("<thead>").append(t);this._$table.prepend(e);for(var i=0,a=this.option("colCount");i<a;i++)this._renderHeaderCell(i,t);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(t)},_renderHeaderCell:function(t,e){var{firstDayOfWeek:i}=this.option(),{full:a,abbreviated:r}=this._getDayCaption(i+t),n=(0,p.Z)("<th>").attr({scope:"col",abbr:a}).text(r);e.append(n)},_renderWeekHeaderCell:function(t){var e=(0,p.Z)("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"});t.prepend(e)},_renderWeekNumberCell:function(t){var{showWeekNumbers:e,cellTemplate:i}=this.option();if(e){var a=this._getWeekNumber(t.prevCellDate),r=Y.Z.createElement("td"),n=(0,p.Z)(r);r.className="dx-calendar-week-number-cell",i?i.render(this._prepareCellTemplateData(a,-1,n)):r.innerHTML=a,t.row.prepend(r),this.setAria({role:"gridcell",label:"Week ".concat(a)},n)}},_getWeekNumber:function(t){var{weekNumberRule:e,firstDayOfWeek:i}=this.option();return z.Z.getWeekNumber(t,i,"auto"===e?1===i?"firstFourDays":"firstDay":e)},getNavigatorCaption:function(){return X.Z.format(this.option("date"),"monthandyear")},_isTodayCell:function(t){var e=this.option("_todayDate")();return z.Z.sameDate(t,e)},_isDateOutOfRange:function(t){var e=this.option("min"),i=this.option("max");return!z.Z.dateInRange(t,e,i,"date")},_isOtherView:function(t){return t.getMonth()!==this.option("date").getMonth()},_isStartDayOfMonth:function(t){return z.Z.sameDate(t,z.Z.getFirstMonthDate(this.option("date")))},_isEndDayOfMonth:function(t){return z.Z.sameDate(t,z.Z.getLastMonthDate(this.option("date")))},_getCellText:function(t){return X.Z.format(t,"d")},_getDayCaption:function(t){var i=t%this.option("colCount");return{full:X.Z.getDayNames()[i],abbreviated:X.Z.getDayNames("abbreviated")[i]}},_getFirstCellData:function(){var{firstDayOfWeek:t}=this.option(),e=z.Z.getFirstMonthDate(this.option("date")),i=t-e.getDay(),a=this.option("colCount");return i>=0&&(i-=a),e.setDate(e.getDate()+i),e},_getNextCellData:function(t){return(t=new Date(t)).setDate(t.getDate()+1),t},_getCellByDate:function(t){return this._$table.find("td[data-value='".concat(Se.Z.serializeDate(t,z.Z.getShortDateFormat()),"']"))},isBoundary:function(t){return z.Z.sameMonthAndYear(t,this.option("min"))||z.Z.sameMonthAndYear(t,this.option("max"))},_getDefaultDisabledDatesHandler:function(t){return function(e){var i=t.some(function(a){return z.Z.sameDate(a,e.date)});if(i)return!0}}}),year:nn.inherit({_getViewName:function(){return"year"},_isTodayCell:function(t){var e=this.option("_todayDate")();return z.Z.sameMonthAndYear(t,e)},_isDateOutOfRange:function(t){return!z.Z.dateInRange(t,z.Z.getFirstMonthDate(this.option("min")),z.Z.getLastMonthDate(this.option("max")))},_isOtherView:function(){return!1},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(t){return X.Z.getMonthNames("abbreviated")[t.getMonth()]},_getFirstCellData:function(){var t=this.option("date"),e=new Date(t);return e.setDate(1),e.setMonth(0),e},_getNextCellData:function(t){return(t=new Date(t)).setMonth(t.getMonth()+1),t},_getCellByDate:function(t){var e=new Date(t);return e.setDate(1),this._$table.find("td[data-value='".concat(Se.Z.serializeDate(e,z.Z.getShortDateFormat()),"']"))},getCellAriaLabel:function(t){return X.Z.format(t,"monthandyear")},getNavigatorCaption:function(){return X.Z.format(this.option("date"),"yyyy")},isBoundary:function(t){return z.Z.sameYear(t,this.option("min"))||z.Z.sameYear(t,this.option("max"))},_renderWeekNumberCell:E.ZT}),decade:nn.inherit({_getViewName:function(){return"decade"},_isTodayCell:function(t){var e=this.option("_todayDate")();return z.Z.sameYear(t,e)},_isDateOutOfRange:function(t){var e=this.option("min"),i=this.option("max");return!z.Z.dateInRange(t.getFullYear(),e&&e.getFullYear(),i&&i.getFullYear())},_isOtherView:function(t){var e=new Date(t);return e.setMonth(1),!z.Z.sameDecade(e,this.option("date"))},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(t){return X.Z.format(t,"yyyy")},_getFirstCellData:function(){var t=z.Z.getFirstYearInDecade(this.option("date"))-1;return z.Z.createDateWithFullYear(t,0,1)},_getNextCellData:function(t){return(t=new Date(t)).setFullYear(t.getFullYear()+1),t},getNavigatorCaption:function(){var t=this.option("date"),e=z.Z.getFirstYearInDecade(t),i=new Date(t),a=new Date(t);return i.setFullYear(e),a.setFullYear(e+9),X.Z.format(i,"yyyy")+"-"+X.Z.format(a,"yyyy")},_isValueOnCurrentView:function(t,e){return z.Z.sameDecade(t,e)},_getCellByDate:function(t){var e=new Date(t);return e.setDate(1),e.setMonth(0),this._$table.find("td[data-value='".concat(Se.Z.serializeDate(e,z.Z.getShortDateFormat()),"']"))},isBoundary:function(t){return z.Z.sameDecade(t,this.option("min"))||z.Z.sameDecade(t,this.option("max"))},_renderWeekNumberCell:E.ZT}),century:nn.inherit({_getViewName:function(){return"century"},_isTodayCell:function(t){var e=this.option("_todayDate")();return z.Z.sameDecade(t,e)},_isDateOutOfRange:function(t){var e=z.Z.getFirstYearInDecade(t),i=z.Z.getFirstYearInDecade(this.option("min")),a=z.Z.getFirstYearInDecade(this.option("max"));return!z.Z.dateInRange(e,i,a)},_isOtherView:function(t){var e=new Date(t);return e.setMonth(1),!z.Z.sameCentury(e,this.option("date"))},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(t){var e=X.Z.format(t,"yyyy"),i=new Date(t);return i.setFullYear(i.getFullYear()+9),e+" - "+X.Z.format(i,"yyyy")},_getFirstCellData:function(){var t=z.Z.getFirstDecadeInCentury(this.option("date"))-10;return z.Z.createDateWithFullYear(t,0,1)},_getNextCellData:function(t){return(t=new Date(t)).setFullYear(t.getFullYear()+10),t},_getCellByDate:function(t){var e=new Date(t);return e.setDate(1),e.setMonth(0),e.setFullYear(z.Z.getFirstYearInDecade(e)),this._$table.find("td[data-value='".concat(Se.Z.serializeDate(e,z.Z.getShortDateFormat()),"']"))},getNavigatorCaption:function(){var t=this.option("date"),e=z.Z.getFirstDecadeInCentury(t),i=new Date(t),a=new Date(t);return i.setFullYear(e),a.setFullYear(e+99),X.Z.format(i,"yyyy")+"-"+X.Z.format(a,"yyyy")},isBoundary:function(t){return z.Z.sameCentury(t,this.option("min"))||z.Z.sameCentury(t,this.option("max"))},_renderWeekNumberCell:E.ZT})};const cA=hA,Oo=class pA{constructor(e){this.calendar=e}dateOption(e){return this.calendar._dateOption(e)}dateValue(e,i){this.calendar._dateValue(e,i)}skipNavigate(){this.calendar._skipNavigate=!0}updateAriaSelected(e,i){this.calendar._updateAriaSelected(e,i),e[0]&&this.calendar.option("currentDate").getTime()===e[0].getTime()&&this.calendar._updateAriaId(e[0])}processValueChanged(e,i){var a,r;e=(null===(a=e)||void 0===a?void 0:a.map(n=>this._convertToDate(n)))||[],i=(null===(r=i)||void 0===r?void 0:r.map(n=>this._convertToDate(n)))||[],this._updateViewsValue(e),this.updateAriaSelected(e,i),this._currentDateChanged||this.calendar._initCurrentDate(),this._currentDateChanged=!1}_getLowestDateInArray(e){if(e.length)return new Date(Math.min(...e))}_convertToDate(e){return this.calendar._convertToDate(e)}_isMaxZoomLevel(){return this.calendar._isMaxZoomLevel()}_updateViewsOption(e,i){this.calendar._updateViewsOption(e,i)}_updateViewsValue(e){this._updateViewsOption("value",e)}_updateCurrentDate(e){this.calendar.option("currentDate",e??new Date)}};var Fp=10368e6;var Mp="dx-calendar-view",Hp=(0,D.V4)(wo.u,"dxCalendar"),Ki={month:3,year:2,decade:1,century:0},LA={SingleSelection:class _A extends Oo{constructor(e){super(e),this.NAME="SingleSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"single"}}selectValue(e,i){this.skipNavigate(),this.dateValue(e,i)}updateAriaSelected(e,i){var a,r;null!==(a=e)&&void 0!==a||(e=[this.dateOption("value")]),null!==(r=i)&&void 0!==r||(i=[]),super.updateAriaSelected(e,i)}getDefaultCurrentDate(){return this.dateOption("value")}_updateViewsValue(e){this._updateViewsOption("value",e[0])}},MultiSelection:class gA extends Oo{constructor(e){super(e),this.NAME="MultiSelection"}getViewOptions(){return{value:this.dateOption("values"),range:[],selectionMode:"multi"}}selectValue(e,i){var a=[...this.dateOption("values")],r=a.findIndex(n=>n?.toDateString()===e.toDateString());r>-1?a.splice(r,1):a.push(e),this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,this.dateValue(a,i)}updateAriaSelected(e,i){var a,r;null!==(a=e)&&void 0!==a||(e=this.dateOption("values")),null!==(r=i)&&void 0!==r||(i=[]),super.updateAriaSelected(e,i)}getDefaultCurrentDate(){var e=this.dateOption("values").filter(i=>i);return this._getLowestDateInArray(e)}},RangeSelection:class mA extends Oo{constructor(e){super(e),this.NAME="RangeSelection"}getViewOptions(){var e=this._getValues();return{value:e,range:this._getDaysInRange(e[0],e[1]),selectionMode:"range",onCellHover:this._cellHoverHandler.bind(this)}}selectValue(e,i){var[a,r]=this._getValues();this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,!0===this.calendar.option("_allowChangeSelectionOrder")?(this.calendar._valueSelected=!0,"startDate"===this.calendar.option("_currentSelection")?this.calendar._convertToDate(e)>this.calendar._convertToDate(r)?this.dateValue([e,null],i):this.dateValue([e,r],i):this.calendar._convertToDate(e)>=this.calendar._convertToDate(a)?this.dateValue([a,e],i):this.dateValue([e,null],i)):this.dateValue(!a||r?[e,null]:a<e?[a,e]:[e,a],i)}updateAriaSelected(e,i){var a,r;null!==(a=e)&&void 0!==a||(e=this._getValues()),null!==(r=i)&&void 0!==r||(i=[]),super.updateAriaSelected(e,i)}processValueChanged(e,i){super.processValueChanged(e,i);var a=this._getRange();this._updateViewsOption("range",a)}getDefaultCurrentDate(){var{_allowChangeSelectionOrder:e,_currentSelection:i}=this.calendar.option(),a=this.dateOption("values");if(e){if("startDate"===i&&a[0])return a[0];if("endDate"===i&&a[1])return a[1]}var r=a.filter(n=>n);return this._getLowestDateInArray(r)}_getValues(){var e=this.dateOption("values");if(!e.length)return e;var[i,a]=e;return i&&a&&i>a&&([i,a]=[a,i]),[i,a]}_getRange(){var[e,i]=this._getValues();return this._getDaysInRange(e,i)}_getDaysInRange(e,i){if(!e||!i)return[];var a=this.calendar.option("currentDate").getTime(),r=new Date(Math.max(a-Fp,e)),n=new Date(Math.min(a+Fp,i));return[...z.Z.getDatesOfInterval(r,n,864e5),n]}_cellHoverHandler(e){var i=this._isMaxZoomLevel(),[a,r]=this._getValues(),{_allowChangeSelectionOrder:n,_currentSelection:s}=this.calendar.option();if(i){if(!a||r||n&&"startDate"===s){if(a||!r||n&&"endDate"===s){if(a&&r){if("startDate"===s&&e.value<a)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,a));if("endDate"===s&&e.value>r)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(r,e.value))}}else if(e.value<r)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,r))}else if(e.value>a)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(a,e.value));this._updateViewsOption("hoveredRange",[])}}}},Zp=Ot.Z.inherit({_activeStateUnit:".dx-calendar-cell",_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,values:[],dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,viewsCount:1,zoomLevel:"month",maxZoomLevel:"month",minZoomLevel:"century",selectionMode:"single",showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_supportedKeys:function(){return(0,C.l)(this.callBase(),{rightArrow:function(t){t.preventDefault(),(0,D.j1)(t)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow:function(t){t.preventDefault(),(0,D.j1)(t)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow:function(t){if(t.preventDefault(),(0,D.j1)(t))this._navigateUp();else{if(ce.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow:function(t){if(t.preventDefault(),(0,D.j1)(t))this._navigateDown();else{if(ce.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home:function(t){t.preventDefault();var e=this.option("zoomLevel"),i=this.option("currentDate"),a=this._dateOption("min");if(!this._view.isDateDisabled(i)){var r=z.Z.sameView(e,i,a)?a:z.Z.getViewFirstCellDate(e,i);this._moveToClosestAvailableDate(r)}},end:function(t){t.preventDefault();var e=this.option("zoomLevel"),i=this.option("currentDate"),a=this._dateOption("max");if(!this._view.isDateDisabled(i)){var r=z.Z.sameView(e,i,a)?a:z.Z.getViewLastCellDate(e,i);this._moveToClosestAvailableDate(r)}},pageUp:function(t){t.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown:function(t){t.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:E.ZT,enter:this._enterKeyHandler})},_enterKeyHandler:function(t){if(this._isMaxZoomLevel()){if(!this._view.isDateDisabled(this.option("currentDate"))){var e=this._updateTimeComponent(this.option("currentDate"));this._selectionStrategy.selectValue(e,t)}}else this._navigateDown()},_getSerializationFormat:function(t){var e=this.option(t||"value");return this.option("dateSerializationFormat")?this.option("dateSerializationFormat"):(0,v.kE)(e)?"number":(0,v.HD)(e)?Se.Z.getDateSerializationFormat(e):void 0},_convertToDate:function(t){return Se.Z.deserializeDate(t)},_dateValue:function(t,e){var i=Array.isArray(t)?"values":"value";if(e){if("keydown"===e.type){var a=this._view._getContouredCell().get(0);e.target=a}this._saveValueChangeEvent(e)}this._dateOption(i,t)},_dateOption:function(t,e){if(1===arguments.length){var i,a=null!==(i=this.option("values"))&&void 0!==i?i:[];return"values"===t?a.map(s=>this._convertToDate(s)):this._convertToDate(this.option(t))}var r=this._getSerializationFormat(t),n="values"===t?e?.map(s=>Se.Z.serializeDate(s,r))||[]:Se.Z.serializeDate(e,r);this.option(t,n)},_shiftDate:function(t,e,i,a){switch(t){case"month":e.setDate(e.getDate()+i*a);break;case"year":e.setMonth(e.getMonth()+i*a);break;case"decade":e.setFullYear(e.getFullYear()+i*a);break;case"century":e.setFullYear(e.getFullYear()+10*i*a)}},_moveCurrentDateByOffset:function(t){var e=this.option("currentDate"),i=new Date(e),a=this.option("zoomLevel");this._shiftDate(a,i,t,1);for(var r=this._getMaxDate(),n=this._getMinDate(),s=this._areDatesInNeighborView(a,i,e),o=(0,ue.Z2)(i,n,r)&&s,l=new Date(i);o;){if(!this._view.isDateDisabled(l)){i=l;break}this._shiftDate(a,l,t,1),s=this._areDatesInNeighborView(a,l,e),o=(0,ue.Z2)(l,n,r)&&s}this._view.isDateDisabled(e)||this._view.isDateDisabled(i)?this._waitRenderView(t>0?1:-1):(this._skipNavigate=!0,this.option("currentDate",i))},_areDatesInSameView(t,e,i){switch(t){case"month":return e.getMonth()===i.getMonth();case"year":return e.getYear()===i.getYear();case"decade":return parseInt(e.getYear()/10)===parseInt(i.getYear()/10);case"century":return parseInt(e.getYear()/100)===parseInt(i.getYear()/100)}},_areDatesInNeighborView(t,e,i){switch(t){case"month":return a=e.getMonth(),r=i.getMonth(),n=Math.abs(a-r),Math.min(n,12-n)<=1;case"year":return Math.abs(e.getYear()-i.getYear())<=1;case"decade":return Math.abs(e.getYear()-i.getYear())<=10;case"century":return Math.abs(e.getYear()-i.getYear())<=100}var a,r,n},_moveToClosestAvailableDate:function(){var s,o,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("currentDate"),e=new Date(t),i=this.option("zoomLevel"),a=!this._isDateNotAvailable(e),r=a,n=a,l=new Date(e),d=new Date(e);do{if(r){e=l;break}if(n){e=d;break}this._shiftDate(i,l,1,1),this._shiftDate(i,d,1,-1),s=this._areDatesInSameView(i,l,t),o=this._areDatesInSameView(i,d,t),r=s&&!this._isDateNotAvailable(l),n=o&&!this._isDateNotAvailable(d)}while(s||o);this.option("currentDate",e)},_isDateNotAvailable:function(t){var e=this._getMaxDate(),i=this._getMinDate();return!(0,ue.Z2)(t,i,e)||this._view.isDateDisabled(t)},_init:function(){this.callBase(),this._initSelectionStrategy(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_initSelectionStrategy:function(){var t=this._getSelectionStrategyName();(!this._selectionStrategy||this._selectionStrategy.NAME!==t)&&(this._selectionStrategy=new(0,LA[t])(this))},_refreshSelectionStrategy:function(){this._initSelectionStrategy(),this._refresh()},_getSelectionStrategyName:function(){switch(this.option("selectionMode")){case"multi":return"MultiSelection";case"range":return"RangeSelection";default:return"SingleSelection"}},_correctZoomLevel:function(){var t=this.option("minZoomLevel"),e=this.option("maxZoomLevel"),i=this.option("zoomLevel");Ki[e]<Ki[t]||(Ki[i]>Ki[e]?this.option("zoomLevel",e):Ki[i]<Ki[t]&&this.option("zoomLevel",t))},_initCurrentDate:function(){var t,e=null!==(t=this._getNormalizedDate(this._selectionStrategy.getDefaultCurrentDate()))&&void 0!==t?t:this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",e)},_getNormalizedDate:function(t){return t=z.Z.normalizeDate(t,this._getMinDate(),this._getMaxDate()),(0,v.$K)(t)?this._getDate(t):t},_initActions:function(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates:function(){this._templateManager.addDefaultTemplates({cell:new mo.k(function(t){var e=t.model;(0,p.Z)(t.container).append((0,p.Z)("<span>").text(e&&e.text||String(e)))})}),this.callBase()},_updateCurrentDate:function(t){if(ce.Z.isAnimating(this._$viewsWrapper)&&ce.Z.stop(this._$viewsWrapper,!0),this._getMinDate()>this._getMaxDate())this.option("currentDate",new Date);else{var a=this._getNormalizedDate(t);if(t.getTime()===a.getTime()){var r=this._getViewsOffset(this._view.option("date"),a);0!==r&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(r=0),this._view&&0!==r&&!this._suppressNavigation?this._additionalView?r>2||r<-1?(this._refreshViews(),this._setViewContoured(a),this._updateAriaId(a),this._renderNavigator()):1===r&&this._skipNavigate?(this._setViewContoured(a),this._updateAriaId(a)):this._navigate(r,a):this._navigate(r,a):(this._renderNavigator(),this._setViewContoured(a),this._updateAriaId(a)),this._skipNavigate=!1}else this.option("currentDate",new Date(a))}},_isAdditionalViewDate(t){return!!this._additionalView&&t>=this._additionalView._getFirstAvailableDate()},_getActiveView:function(t){return this._isAdditionalViewDate(t)?this._additionalView:this._view},_setViewContoured:function(t){var e;(this.option("skipFocusCheck")||function VA(t){return t.hasClass("dx-state-focused")}(this._focusTarget()))&&(this._view.option("contouredDate",null),null===(e=this._additionalView)||void 0===e||e.option("contouredDate",null),(this._isAdditionalViewDate(t)?this._additionalView:this._view).option("contouredDate",t))},_getMinDate:function(){return this.option("_rangeMin")||(this.min||(this.min=this._dateOption("min")||new Date(1e3,0)),this.min)},_getMaxDate:function(){return this.option("_rangeMax")||(this.max||(this.max=this._dateOption("max")||new Date(3e3,0)),this.max)},_getViewsOffset:function(t,e){var a,i=this.option("zoomLevel");if("month"===i)return this._getMonthsOffset(t,e);switch(i){case"century":a=100;break;case"decade":a=10;break;default:a=1}return parseInt(e.getFullYear()/a)-parseInt(t.getFullYear()/a)},_getMonthsOffset:function(t,e){return 12*(e.getFullYear()-t.getFullYear())+(e.getMonth()-t.getMonth())},_waitRenderView:function(t){if(!this._alreadyViewRender){this._alreadyViewRender=!0;var e=this._getDateByOffset(t*this._getRtlCorrection());this._moveToClosestAvailableDate(e),this._waitRenderViewTimeout=setTimeout(()=>{this._alreadyViewRender=!1})}},_getRtlCorrection:function(){return this.option("rtlEnabled")?-1:1},_getDateByOffset:function(t,e){var i,a=(e=this._getDate(null!==(i=e)&&void 0!==i?i:this.option("currentDate"))).getDate(),r=z.Z.getDifferenceInMonth(this.option("zoomLevel"))*t;e.setDate(1),e.setMonth(e.getMonth()+r);var n=z.Z.getLastMonthDate(e).getDate();return e.setDate(a>n?n:a),e},_focusTarget:function(){return this.$element()},_initMarkup:function(){this._renderSubmitElement(),this.callBase();var t=this.$element();t.addClass("dx-calendar"),t.toggleClass("dx-calendar-range","range"===this.option("selectionMode")),this._renderBody(),t.append(this.$body),this._renderViews(),this._renderEvents(),this._renderNavigator(),t.prepend(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._selectionStrategy.updateAriaSelected(),this._updateAriaId(),this.setAria("role","application"),this._moveToClosestAvailableDate()},_render:function(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody:function(){this._$viewsWrapper||(this.$body=(0,p.Z)("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=(0,p.Z)("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))},_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews:function(){this.$element().addClass(Mp+"-"+this.option("zoomLevel"));var{currentDate:t,viewsCount:e}=this.option();if(this.$element().toggleClass("dx-calendar-multiview",e>1),this._view=this._renderSpecificView(t),(0,Z.Ym)()){var i=this._getDateByOffset(-1,t);this._beforeView=this._isViewAvailable(i)?this._renderSpecificView(i):null;var a=this._getDateByOffset(e,t);a.setDate(1),this._afterView=this._isViewAvailable(a)?this._renderSpecificView(a):null}e>1&&(this._additionalView=this._renderSpecificView(this._getDateByOffset(1,t))),this._translateViews()},_renderSpecificView:function(t){var{zoomLevel:e}=this.option(),i=cA[e],a=(0,p.Z)("<div>").appendTo(this._$viewsWrapper),r=this._viewConfig(t);return this._createComponent(a,i,r)},_viewConfig:function(t){var e,i=this.option("disabledDates");return i=(0,v.mf)(i)?this._injectComponent(i.bind(this)):i,(0,M.Z)({},this._selectionStrategy.getViewOptions(),{date:t,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:null!==(e=this.option("firstDayOfWeek"))&&void 0!==e?e:X.Z.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:i,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")})},_renderEvents(){S.Z.off(this._$viewsWrapper,Hp),"range"===this.option("selectionMode")&&S.Z.on(this._$viewsWrapper,Hp,null,t=>{this._updateViewsOption("hoveredRange",[])})},_injectComponent:function(t){var e=this;return function(i){return(0,C.l)(i,{component:e}),t(i)}},_isViewAvailable:function(t){var e=this.option("zoomLevel"),i=z.Z.getViewMinBoundaryDate(e,this._getMinDate()),a=z.Z.getViewMaxBoundaryDate(e,this._getMaxDate());return z.Z.dateInRange(t,i,a)},_translateViews:function(){var{viewsCount:t}=this.option();(0,le.pB)(this._view.$element(),{left:0,top:0}),this._moveViewElement(this._beforeView,-1),this._moveViewElement(this._afterView,t),this._moveViewElement(this._additionalView,1)},_moveViewElement(t,e){t&&(0,le.pB)(t.$element(),{left:this._getViewPosition(e),top:0})},_getViewPosition:function(t){return 100*t*(this.option("rtlEnabled")?-1:1)+"%"},_cellClickHandler:function(t){var e=this.option("zoomLevel"),i=z.Z.getViewDown(e),a=this._isMaxZoomLevel();if(i&&!a)this._navigateDown(t.event.currentTarget);else{var r=this._updateTimeComponent(t.value);this._selectionStrategy.selectValue(r,t.event),this._cellClickAction(t)}},_updateTimeComponent:function(t){var e=new Date(t),i=this._dateOption("value");return i&&(e.setHours(i.getHours()),e.setMinutes(i.getMinutes()),e.setSeconds(i.getSeconds()),e.setMilliseconds(i.getMilliseconds())),e},_isMaxZoomLevel:function(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown:function(t){var e=this.option("zoomLevel");if(!this._isMaxZoomLevel()){var i=z.Z.getViewDown(e);if(i){var a=this._view.option("contouredDate")||this._view.option("date");t&&(a=(0,p.Z)(t).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",a),this.option("zoomLevel",i),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))}}},_renderNavigator:function(){this._navigator||(this._navigator=new JT((0,p.Z)("<div>"),this._navigatorConfig())),this._navigator.option("text",this._getViewsCaption(this._view,this._additionalView)),this._updateButtonsVisibility()},_navigatorConfig:function(){var{rtlEnabled:t}=this.option();return{text:this._getViewsCaption(this._view,this._additionalView),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),rtlEnabled:t}},_navigatorClickHandler:function(t){var{currentDate:e,viewsCount:i}=this.option(),a=t.direction;if(i>1){var r=this._isAdditionalViewDate(e);(r&&a<0||!r&&a>0)&&(a*=2)}var s=this._getDateByOffset(a,e);this._moveToClosestAvailableDate(s)},_navigateUp:function(){var t=this.option("zoomLevel"),e=z.Z.getViewUp(t);!e||this._isMinZoomLevel(t)||(this.option("zoomLevel",e),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel:function(t){var e=this._getMinDate(),i=this._getMaxDate();return z.Z.sameView(t,e,i)||this.option("minZoomLevel")===t},_updateButtonsVisibility:function(){this._navigator.toggleButton("next",!(0,v.$K)(this._afterView)),this._navigator.toggleButton("prev",!(0,v.$K)(this._beforeView))},_renderSwipeable:function(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),rn,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler:function(t){ce.Z.stop(this._$viewsWrapper,!0);var{viewsCount:e}=this.option();this._toggleGestureCoverCursor("grabbing"),t.event.maxLeftOffset=this._getRequiredView("next")?1/e:0,t.event.maxRightOffset=this._getRequiredView("prev")?1/e:0},_toggleGestureCoverCursor:function(t){(0,p.Z)(".".concat("dx-gesture-cover")).css("cursor",t)},_getRequiredView:function(t){var e,i=this.option("rtlEnabled");return"next"===t?e=i?this._beforeView:this._afterView:"prev"===t&&(e=i?this._afterView:this._beforeView),e},_swipeUpdateHandler:function(t){var e=t.event.offset;(0,le.pB)(this._$viewsWrapper,{left:e*this._viewWidth(),top:0}),this._updateNavigatorCaption(e)},_swipeEndHandler:function(t){this._toggleGestureCoverCursor("auto");var{currentDate:e,rtlEnabled:i}=this.option(),a=t.event.targetOffset,r=a?a/Math.abs(a):0,s=this._isAdditionalViewDate(e)&&(i?-1===r:1===r);if(0!==r){var o=-r*this._getRtlCorrection()*(s?2:1),l=this._getDateByOffset(o);this._isDateInInvalidRange(l)&&(l=r>=0?new Date(this._getMinDate()):new Date(this._getMaxDate())),this.option("currentDate",l)}else this._animateWrapper(0,250)},_viewWidth:function(){return this._viewWidthValue||(this._viewWidthValue=(0,I.dz)(this.$element())/this.option("viewsCount")),this._viewWidthValue},_updateNavigatorCaption:function(t){t*=this._getRtlCorrection();var i,a,e=this.option("viewsCount")>1;t>.5&&this._beforeView?(i=this._beforeView,a=e&&this._view):t<-.5&&this._afterView?(i=e?this._additionalView:this._afterView,a=e?this._afterView:null):(i=this._view,a=e?this._additionalView:null),this._navigator.option("text",this._getViewsCaption(i,a))},_getViewsCaption:function(t,e){var i=t.getNavigatorCaption(),{viewsCount:a}=this.option();if(a>1&&e){var r=e.getNavigatorCaption();i="".concat(i," - ").concat(r)}return i},_isDateInInvalidRange:function(t){if(!this._view.isBoundary(t)){var e=this._getMinDate(),i=this._getMaxDate(),a=z.Z.normalizeDate(t,e,i);return a===e||a===i}},_renderFooter:function(){var t=this.option("showTodayButton");if(t){var e=this._createComponent((0,p.Z)("<div>"),Be.Z,{focusStateEnabled:this.option("focusStateEnabled"),text:A.Z.format("dxCalendar-todayButtonText"),onClick:i=>{this._toTodayView(i)},type:"default",stylingMode:"text",integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=(0,p.Z)("<div>").addClass("dx-calendar-footer").append(e),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",t)},_renderSubmitElement:function(){this._$submitElement=(0,p.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(t){var e=this._convertToDate(t);this._getSubmitElement().val(Se.Z.serializeDate(e,"yyyy-MM-dd"))},_getSubmitElement:function(){return this._$submitElement},_animateShowView:function(){ce.Z.stop(this._view.$element(),!0),this._popAnimationView(this._view,.6,1,250),this.option("viewsCount")>1&&(ce.Z.stop(this._additionalView.$element(),!0),this._popAnimationView(this._additionalView,.6,1,250))},_popAnimationView:function(t,e,i,a){return ce.Z.animate(t.$element(),{type:"pop",from:{scale:e,opacity:e},to:{scale:i,opacity:i},duration:a})},_navigate:function(t,e){if(0!==t&&1!==Math.abs(t)&&this._isViewAvailable(e)){var i=this._renderSpecificView(e);t>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=i):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=i),this._translateViews()}var n=-this._getRtlCorrection()*(t>0?1:t<0?-1:0)*this._viewWidth();this._$viewsWrapper.position().left!==n&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(t,e):this._animateWrapper(n,250).done(this._wrapperAnimationEndHandler.bind(this,t,e)))},_animateWrapper:function(t,e){return ce.Z.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:t},duration:e})},_getDate:t=>new Date(t),_toTodayView:function(t){var e=new Date;this._isMaxZoomLevel()?this._selectionStrategy.selectValue(e,t.event):(this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._selectionStrategy.selectValue(e,t.event),this._animateShowView(),this._preventViewChangeAnimation=!1)},_wrapperAnimationEndHandler:function(t,e){this._rearrangeViews(t),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(e),this._updateAriaId(e),this._selectionStrategy.updateAriaSelected()},_rearrangeViews:function(t){var e;if(0!==t){var a,r,n,s,o,{viewsCount:i}=this.option();if(t<0?(a=1,r="_beforeView",n="_afterView",s="_view",o=1===i?"_view":"_additionalView"):(a=-1,r="_afterView",n="_beforeView",s=1===i?"_view":"_additionalView",o="_view"),this[r]){var l=this[r].option("date");null===(e=this[n])||void 0===e||e.$element().remove(),this[n]=this._renderSpecificView(this._getDateByOffset(a*i,l)),this[o].$element().remove(),1===i?this[o]=this[r]:(this[o]=this[s],this[s]=this[r]);var d=this._getDateByOffset(-a,l);this[r]=this._isViewAvailable(d)?this._renderSpecificView(d):null}}},_resetLocation:function(){(0,le.pB)(this._$viewsWrapper,{left:0,top:0})},_clean:function(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache:function(){delete this._viewWidthValue},_disposeViews:function(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._additionalView&&this._additionalView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._additionalView,delete this._beforeView,delete this._afterView,delete this._skipNavigate},_dispose:function(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews:function(){this._resetActiveState(),this._disposeViews(),this._renderViews()},_visibilityChanged:function(){this._translateViews()},_focusInHandler:function(){this.callBase.apply(this,arguments),this._setViewContoured(this.option("currentDate"))},_focusOutHandler:function(){var t;this.callBase.apply(this,arguments),this._view.option("contouredDate",null),null===(t=this._additionalView)||void 0===t||t.option("contouredDate",null)},_updateViewsOption:function(t,e){var i,a,r;this._view.option(t,e),null===(i=this._additionalView)||void 0===i||i.option(t,e),null===(a=this._beforeView)||void 0===a||a.option(t,e),null===(r=this._afterView)||void 0===r||r.option(t,e)},_setViewsMinOption:function(t){this._restoreViewsMinMaxOptions(),this.option("_rangeMin",this._convertToDate(t)),this._updateViewsOption("min",this._getMinDate())},_setViewsMaxOption:function(t){this._restoreViewsMinMaxOptions(),this.option("_rangeMax",this._convertToDate(t)),this._updateViewsOption("max",this._getMaxDate())},_restoreViewsMinMaxOptions:function(){this.option({_rangeMin:null,_rangeMax:null}),this._updateViewsOption("min",this._getMinDate()),this._updateViewsOption("max",this._getMaxDate())},_updateAriaSelected:function(t,e){e.forEach(i=>{this.setAria("selected",void 0,this._view._getCellByDate(i))}),t.forEach(i=>{this.setAria("selected",!0,this._view._getCellByDate(i))}),this.option("viewsCount")>1&&(e.forEach(i=>{this.setAria("selected",void 0,this._additionalView._getCellByDate(i))}),t.forEach(i=>{this.setAria("selected",!0,this._additionalView._getCellByDate(i))}))},_updateAriaId:function(t){var e;t=null!==(e=t)&&void 0!==e?e:this.option("currentDate");var i="dx-"+new Ee.Z,r=this._getActiveView(t)._getCellByDate(t);this.setAria("id",i,r),this.setAria("activedescendant",i),this._onContouredChanged(i)},_suppressingNavigation:function(t,e){this._suppressNavigation=!0,t.apply(this,e),delete this._suppressNavigation},_optionChanged:function(t){var{value:e,previousValue:i}=t;switch(t.name){case"width":this.callBase(t),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"selectionMode":this._refreshSelectionStrategy(),this._initCurrentDate();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(i)),this._updateCurrentDate(e);break;case"zoomLevel":this.$element().removeClass(Mp+"-"+i),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":"single"===this.option("selectionMode")&&this._selectionStrategy.processValueChanged([e],[i]),this._setSubmitValue(e),this.callBase(t);break;case"values":"single"!==this.option("selectionMode")&&this._selectionStrategy.processValueChanged(e,i),this._raiseValueChangeAction(e,i),this._saveValueChangeEvent(void 0);break;case"viewsCount":this._refreshViews(),this._renderNavigator();break;case"onCellClick":this._view.option("onCellClick",e);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"skipFocusCheck":break;case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;default:this.callBase(t)}},getContouredDate:function(){return this._view.option("contouredDate")}});(0,J.Z)("dxCalendar",Zp);const PA=Zp;var on=Ce.Z.abstract,FA=Ce.Z.inherit({ctor:function(t){this.dateBox=t},widgetOption:function(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget:function(t){t=t||(0,p.Z)("<div>"),this._widget=this._createWidget(t),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget:function(t){var e=this._getWidgetName(),i=this._getWidgetOptions();return this.dateBox._createComponent(t,e,i)},_getWidgetOptions:on,_getWidgetName:on,getDefaultOptions:function(){return{mode:"text"}},getDisplayFormat:on,supportedKeys:E.ZT,getKeyboardListener:E.ZT,customizeButtons:E.ZT,getParsedText:function(t,e){return X.Z.parse(t,e)||X.Z.parse(t)},renderInputMinMax:E.ZT,renderOpenedState:function(){this._updateValue()},popupConfig:on,_dimensionChanged:function(){var t;null===(t=this._getPopup())||void 0===t||t.repaint()},renderPopupContent:function(){var t=this._getPopup();this._renderWidget();var e=t.$content().parent();S.Z.off(e,"mousedown"),S.Z.on(e,"mousedown",this._preventFocusOnPopup.bind(this))},getFirstPopupElement:E.ZT,getLastPopupElement:E.ZT,_preventFocusOnPopup:function(t){t.preventDefault()},_getWidgetContainer:function(){return this._getPopup().$content()},_getPopup:function(){return this.dateBox._popup},popupShowingHandler:E.ZT,popupHiddenHandler:E.ZT,_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:E.ZT,getDefaultDate:function(){return new Date},textChangedHandler:E.ZT,renderValue:function(){this.dateBox.option("opened")&&this._updateValue()},getValue:function(){return this._widget.option("value")},isAdaptivityChanged:function(){return!1},dispose:function(){var t=this._getPopup();t&&t.$content().empty()},dateBoxValue:function(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}});const ln=FA;var MA=ln.inherit({NAME:"Calendar",getDefaultOptions:function(){return(0,C.l)(this.callBase(),{todayButtonText:A.Z.format("dxCalendar-todayButtonText")})},supportedKeys:function(){var t=function(e){return!!this.option("opened")&&(e.preventDefault(),!0)};return{rightArrow:function(){if(this.option("opened"))return!0},leftArrow:function(){if(this.option("opened"))return!0},enter:function(e){if(this.dateBox.option("opened")){if(e.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){var i=this._getContouredValue(),a=this._lastActionElement,r=this._closeDropDownByEnter();return r&&i&&"calendar"===a&&this.dateBoxValue(i,e),r&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(e),!r}return!0}this.dateBox._valueChangeEventHandler(e)}.bind(this),home:t,end:t}},getDisplayFormat:function(t){return t||"shortdate"},_closeDropDownByEnter:()=>!0,_getWidgetName:function(){return PA},_getContouredValue:function(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions:function(){var t=this.dateBox.option("disabledDates");return(0,C.l)(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),tabIndex:null,disabledDates:(0,v.mf)(t)?this._injectComponent(t.bind(this.dateBox)):t,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent:function(t){var e=this;return function(i){return(0,C.l)(i,{component:e.dateBox}),t(i)}},_refreshActiveDescendant:function(t){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",t.actionValue)},_getTodayButtonConfig(){var t=this.dateBox.option("buttonsLocation"),i="default"===t?["bottom","center"]:(0,E.Um)(t);return{widget:"dxButton",toolbar:i[0],location:"after"===i[1]?"before":i[1],options:{onInitialized:function(a){a.component.registerKeyHandler("escape",this._escapeHandler.bind(this))}.bind(this),onClick:a=>{this._widget._toTodayView(a)},text:this.dateBox.option("todayButtonText"),type:"today"}}},_isCalendarVisible:function(){var{calendarOptions:t}=this.dateBox.option();return(0,v.Qr)(t)||!1!==t.visible},_getPopupToolbarItems(t){return"useButtons"===this.dateBox.option("applyValueMode")&&this._isCalendarVisible()?[this._getTodayButtonConfig(),...t]:t},popupConfig:function(t){return(0,C.l)(!0,t,{position:{collision:"flipfit flip"},width:"auto"})},_escapeHandler:function(){this.dateBox.close(),this.dateBox.focus()},_valueChangedHandler:function(t){var e=t.value,i=t.previousValue;z.Z.sameDate(e,i)&&z.Z.sameHoursAndMinutes(e,i)||"instantly"===this.dateBox.option("applyValueMode")&&this.dateBoxValue(this.getValue(),t.event)},_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler:function(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler:function(t){var e=this.dateBox;"instantly"===e.option("applyValueMode")&&(e.option("opened",!1),this.dateBoxValue(this.getValue(),t.event))}});const $p=MA;class kA{constructor(e){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=e??br}get isHorizontal(){return this.direction===Ru||this.direction===Ss}get isVertical(){return this.direction===br||this.direction===Ss}get isBoth(){return this.direction===Ss}}var zp="dx-dateview-item";class Wp extends Pu{_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){S.Z.on((0,p.Z)(this.container()),"dxmousewheel",e=>{this._isWheelScrolled=!0})}_renderContainerClick(){if(this.option("showOnClick")){var e=(0,D.V4)(ie.u,this.NAME),i=this._createActionByOption("onClick");S.Z.off((0,p.Z)(this.container()),e),S.Z.on((0,p.Z)(this.container()),e,function(a){i({event:a})})}}_renderItems(){var e=this.option("items")||[],i=(0,p.Z)();(0,p.Z)(this.content()).empty(),e.forEach(function(a){i=i.add((0,p.Z)("<div>").addClass(zp).append(a))}),(0,p.Z)(this.content()).append(i),this._$items=i,this.update()}_renderSelectedItemFrame(){(0,p.Z)("<div>").addClass("dx-dateview-item-selected-frame").append((0,p.Z)("<div>").addClass("dx-dateview-item-selected-border")).appendTo((0,p.Z)(this.container()))}_renderSelectedValue(e){var i=this._fitIndex(e??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(i)}),this._renderActiveStateItem()}_fitIndex(e){var a=(this.option("items")||[]).length;return e>=a?a-1:e<0?0:e}_getItemPosition(e){return Math.round(this._itemHeight()*e)}_renderItemsClick(){var e=this._getItemSelector(),i=(0,D.V4)(ie.u,this.NAME);S.Z.off(this.$element(),i,e),S.Z.on(this.$element(),i,e,this._itemClickHandler.bind(this))}_getItemSelector(){return"."+zp}_itemClickHandler(e){this.option("selectedIndex",this._itemElementIndex(e.currentTarget))}_itemElementIndex(e){return this._itemElements().index(e)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){var e=this.option("selectedIndex");(0,y.S6)(this._$items,function(i){(0,p.Z)(this).toggleClass("dx-dateview-item-selected",e===i)})}_shouldScrollToNeighborItem(){return"desktop"===K.Z.real().deviceType&&this._isWheelScrolled}_moveTo(e){var{top:i,left:a}=function NA(t,e){if((0,v.PO)(t)){var i=(0,E.IS)(t.left,t.x),a=(0,E.IS)(t.top,t.y);return{left:(0,v.$K)(i)?i:void 0,top:(0,v.$K)(a)?a:void 0}}var{isHorizontal:r,isVertical:n}=new kA(e);return{left:r&&(0,v.$K)(t)?t:void 0,top:n&&(0,v.$K)(t)?t:void 0}}(e),r=this.scrollOffset(),n={x:r.left-a,y:r.top-i};if(this._isVisible()&&(n.x||n.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){var s=this;ce.Z.stop((0,p.Z)(this.content())),ce.Z.animate((0,p.Z)(this.content()),{duration:200,type:"slide",to:{top:Math.floor(n.y)},complete(){(0,le.Kx)((0,p.Z)(s.content())),s.handleMove({delta:n})}}),delete this._animation}else this.handleMove({delta:n})}_validate(e){return this._moveIsAllowed(e)}_fitSelectedIndexInRange(e){var i=this.option("items").length;return Math.max(Math.min(e,i-1),0)}_isInNullNeighborhood(e){return-.1<=e&&e<=.1}_getSelectedIndexAfterScroll(e){var r=this.scrollOffset().top-e*this._itemHeight();return this._isInNullNeighborhood(r)?e:this._fitSelectedIndexInRange(e+(r>0?1:-1))}_getNewSelectedIndex(e){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(e);this._animation=!0;var i=this.scrollOffset().top/this._itemHeight();return Math.round(i)}_endActionHandler(){var e=this.option("selectedIndex"),i=this._getNewSelectedIndex(e);i===e?this._renderSelectedValue(i):this.option("selectedIndex",i),this._isWheelScrolled=!1}_itemHeight(){var e=this._$items.first();return(0,I.Cr)(e)}_toggleActive(e){this.$element().toggleClass("dx-state-active",e)}_isVisible(){return(0,p.Z)(this.container()).is(":visible")}_fireSelectedIndexChanged(e,i){this._selectedIndexChanged({value:e,previousValue:i,event:void 0})}_visibilityChanged(e){super._visibilityChanged(e),this._visibilityChangedHandler(e)}_visibilityChangedHandler(e){e&&(this._visibilityTimer=setTimeout(()=>{this._renderSelectedValue(this.option("selectedIndex"))})),this.toggleActiveState(!1)}toggleActiveState(e){this.$element().toggleClass("dx-dateviewroller-current",e)}_refreshSelectedIndex(){var e=this.option("selectedIndex"),i=this._fitIndex(e);i===e?this._renderActiveStateItem():this.option("selectedIndex",i)}_optionChanged(e){switch(e.name){case"selectedIndex":this._fireSelectedIndexChanged(e.value,e.previousValue),this._renderSelectedValue(e.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(e)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}(0,J.Z)("dxDateViewRoller",Wp);const GA=Wp;var Ro="dx-dateview",Gp=Ot.Z.inherit({_valueOption:function(){var t=this.option("value"),e=new Date(t);return!t||isNaN(e)?this._getDefaultDate():e},_getDefaultDate:function(){var t=new Date;return"date"===this.option("type")?new Date(t.getFullYear(),t.getMonth(),t.getDate()):t},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{minDate:he.MIN_DATEVIEW_DEFAULT_DATE,maxDate:he.MAX_DATEVIEW_DEFAULT_DATE,type:"date",value:new Date,applyCompactClass:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(t){return"desktop"!==t.deviceType},options:{applyCompactClass:!0}}])},_render:function(){this.callBase(),this.$element().addClass(Ro),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses:function(t,e){this.$element().addClass(Ro+"-"+t),e&&this.$element().removeClass(Ro+"-"+e)},_toggleCompactClass:function(){this.$element().toggleClass("dx-dateview-compact",this.option("applyCompactClass"))},_wrapper:function(){return this._$wrapper},_renderContentImpl:function(){this._$wrapper=(0,p.Z)("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers:function(){this._$rollersContainer||(this._$rollersContainer=(0,p.Z)("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};var t=this;(0,y.S6)(t._rollerConfigs,function(e){var i=(0,p.Z)("<div>").appendTo(t._$rollersContainer).addClass("dx-dateviewroller-"+t._rollerConfigs[e].type);t._rollers[t._rollerConfigs[e].type]=t._createComponent(i,GA,{items:t._rollerConfigs[e].displayItems,selectedIndex:t._rollerConfigs[e].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart:function(a){var r=a.component;r._toggleActive(!0),t._setActiveRoller(t._rollerConfigs[e],r.option("selectedIndex"))},onEnd:function(a){a.component._toggleActive(!1)},onClick:function(a){var r=a.component;r._toggleActive(!0),t._setActiveRoller(t._rollerConfigs[e],r.option("selectedIndex")),t._setRollerState(t._rollerConfigs[e],r.option("selectedIndex")),r._toggleActive(!1)},onSelectedIndexChanged:function(a){t._setRollerState(t._rollerConfigs[e],a.component.option("selectedIndex"))}})}),t._$rollersContainer.appendTo(t._wrapper())},_createRollerConfigs:function(t){var e=this;t=t||e.option("type"),e._rollerConfigs={},X.Z.getFormatParts(he.FORMATS_MAP[t]).forEach(function(i){e._createRollerConfig(i)})},_createRollerConfig:function(t){for(var e=he.DATE_COMPONENTS_INFO[t],i=this._calculateRollerConfigValueRange(t),a=i.startValue,r=i.endValue,n=e.formatter,s=this._getCurrentDate(),o={type:t,setValue:e.setter,valueItems:[],displayItems:[],getIndex:function(d){return d[e.getter]()-a}},l=a;l<=r;l++)o.valueItems.push(l),o.displayItems.push(n(l,s));o.selectedIndex=o.getIndex(s),this._rollerConfigs[t]=o},_setActiveRoller:function(t){var e=t&&this._rollers[t.type];(0,y.S6)(this._rollers,function(){this.toggleActiveState(this===e)})},_updateRollersPosition:function(){var t=this;(0,y.S6)(this._rollers,function(e){var i=t._rollerConfigs[e].getIndex(t._getCurrentDate());this.option("selectedIndex",i)})},_setRollerState:function(t,e){if(e!==t.selectedIndex){var i=t.valueItems[e],a=t.setValue,r=new Date(this._getCurrentDate()),n=r.getDate(),s=this.option("minDate"),o=this.option("maxDate");"month"===t.type?n=Math.min(n,he.getMaxMonthDay(r.getFullYear(),i)):"year"===t.type&&(n=Math.min(n,he.getMaxMonthDay(i,r.getMonth()))),r.setDate(n),r[a](i);var l=z.Z.normalizeDate(r,s,o);r=he.mergeDates(l,r,"time"),r=z.Z.normalizeDate(r,s,o),this.option("value",r),t.selectedIndex=e}"year"===t.type&&this._refreshRollers(),"month"===t.type&&(this._refreshRoller("day"),this._refreshRoller("hours"))},_refreshRoller:function(t){var e=this._rollers[t];if(e){this._createRollerConfig(t);var i=this._rollerConfigs[t];("day"===t||i.displayItems.toString()!==e.option("items").toString())&&e.option({items:i.displayItems,selectedIndex:i.selectedIndex})}},_getCurrentDate:function(){var t=this._valueOption(),e=this.option("minDate"),i=this.option("maxDate");return z.Z.normalizeDate(t,e,i)},_calculateRollerConfigValueRange:function(t){var e=this._getCurrentDate(),i=this.option("minDate"),a=this.option("maxDate"),r=z.Z.sameYear(e,i),n=r&&e.getMonth()===i.getMonth(),s=z.Z.sameYear(e,a),o=s&&e.getMonth()===a.getMonth(),l=n&&e.getDate()===i.getDate(),d=o&&e.getDate()===a.getDate(),u=he.DATE_COMPONENTS_INFO[t],h=u.startValue,c=u.endValue;return"year"===t&&(h=i.getFullYear(),c=a.getFullYear()),"month"===t&&(r&&(h=i.getMonth()),s&&(c=a.getMonth())),"day"===t&&(c=he.getMaxMonthDay(e.getFullYear(),e.getMonth()),r&&n&&(h=i.getDate()),s&&o&&(c=a.getDate())),"hours"===t&&(h=l?i.getHours():h,c=d?a.getHours():c),{startValue:h,endValue:c}},_refreshRollers:function(){this._refreshRoller("month"),this._refreshRoller("day"),this._refreshRoller("hours")},_optionChanged:function(t){switch(t.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(t.value,t.previousValue);break;case"visible":this.callBase(t),t.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(t)}},_clean:function(){this.callBase(),delete this._$rollersContainer}});(0,J.Z)("dxDateView",Gp);const XA=Gp;var JA=(0,Z.Jj)(),QA=ln.inherit({NAME:"DateView",getDefaultOptions:function(){return(0,C.l)(this.callBase(),{openOnFieldClick:!0,applyButtonText:A.Z.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat:function(t){return t||he.FORMATS_MAP[this.dateBox.option("type")]},popupConfig:function(t){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:t.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device:function(e){var i=e.platform;return"generic"===i||"ios"===i},options:{width:"auto",height:"auto"}},{device:function(e){return"generic"===e.platform&&e.phone},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:JA}}}]}},_renderWidget:function(){if((0,Ue.inputType)(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly"))this._widget&&(this._widget.$element().remove(),this._widget=null);else{var t=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{var e=(0,p.Z)("<div>").appendTo(t.$content());this._widget=this._createWidget(e)}this._widget.$element().appendTo(this._getWidgetContainer())}},_getWidgetName:function(){return XA},renderOpenedState:function(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions:function(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*he.ONE_YEAR),onDisposing:function(){this._widget=null}.bind(this)}}});const eD=QA;var tD=ln.inherit({NAME:"Native",popupConfig:function(t){return(0,C.l)({},t,{width:"auto"})},getParsedText:function(t){return t?"datetime"===this.dateBox.option("type")?new Date(t.replace(/-/g,"/").replace("T"," ").split(".")[0]):he.fromStandardDateFormat(t):null},renderPopupContent:E.ZT,_getWidgetName:E.ZT,_getWidgetOptions:E.ZT,_getDateBoxType:function(){var t=this.dateBox.option("type");return he.SUPPORTED_FORMATS.includes(t)?"datetime"===t&&!(0,Ue.inputType)(t)&&(t="datetime-local"):t="date",t},customizeButtons:function(){var t=this.dateBox.getButton("dropDown");K.Z.real().android&&t&&t.on("click",function(){this.dateBox._input().get(0).click()}.bind(this))},getDefaultOptions:function(){return{mode:this._getDateBoxType()}},getDisplayFormat:function(t){var e=this._getDateBoxType();return t||he.FORMATS_MAP[e]},renderInputMinMax:function(t){t.attr({min:Se.Z.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:Se.Z.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}});const iD=tD;var Up="dxBoxItemData",oD={row:"minWidth",col:"minHeight"},lD={row:"maxWidth",col:"maxHeight"},Yp={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},jp={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},dD={row:"row",col:"column"},Gi=(t,e,i)=>{if(i=(0,Ne.bh)(e,i),t.style[(0,Ne.Hj)(e)]=i,!(0,Z.Ym)()){if(""===i||!(0,v.$K)(i))return;var a=(0,Pe.H0)(e);(0,Ne.A_)(t,a+": "+i+";",!1)}};class uD extends Ni{_renderVisible(e,i){super._renderVisible(e),(0,v.$K)(i)&&this._options.fireItemStateChangedAction({name:"visible",state:e,oldState:i})}}class hD{constructor(e,i){this._$element=e,this._option=i}renderBox(){this._$element.css({display:(0,Ne.gC)("flexDirection")+"flex"}),Gi(this._$element.get(0),"flexDirection",dD[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){var e=this._option("align");return e in Yp?Yp[e]:e}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){var e=this._option("crossAlign");return e in jp?jp[e]:e}renderItems(e){var i=(0,Ne.gC)("flexDirection"),a=this._option("direction");(0,y.S6)(e,function(){var r=(0,p.Z)(this),n=r.data(Up);r.css({display:i+"flex"}).css(lD[a],n.maxSize||"none").css(oD[a],n.minSize||"0"),Gi(r.get(0),"flexBasis",n.baseSize||0),Gi(r.get(0),"flexGrow",n.ratio),Gi(r.get(0),"flexShrink",(0,v.$K)(n.shrink)?n.shrink:1),r.children().each((s,o)=>{(0,p.Z)(o).css({width:"auto",height:"auto",display:(0,Ne.gC)("flexDirection")+"flex",flexBasis:0}),Gi(o,"flexGrow",1),Gi(o,"flexDirection",(0,p.Z)(o)[0].style.flexDirection||"column")})})}}let qp=(()=>{class t extends li{_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return"dx-box-item"}_itemDataKey(){return Up}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new hD(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return!this.option("_queue")&&!!this._queue.length}_pushItemToQueue(i,a){this._queue.push({$item:i,config:a})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(i){for(super._renderItems(i);this._queueIsNotEmpty();){var a=this._shiftItemFromQueue();this._createComponent(a.$item,t,(0,C.l)({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},a.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(i){var a=i.itemData&&i.itemData.node;return a?this._renderItemContentByNode(i,a):super._renderItemContent(i)}_postprocessRenderItem(i){var a=i.itemData.box;a&&this._pushItemToQueue(i.itemContent,a)}_createItemByTemplate(i,a){return a.itemData.box?i.source?i.source():(0,p.Z)():super._createItemByTemplate(i,a)}_itemOptionChanged(i,a,r,n){"visible"===a&&this._onItemStateChanged({name:a,state:r,oldState:!1!==n}),super._itemOptionChanged(i,a,r)}_optionChanged(i){switch(i.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(i)}}_itemOptions(){var i=super._itemOptions();return i.fireItemStateChangedAction=a=>{this._onItemStateChanged(a)},i}}return t.ItemClass=uD,t})();(0,J.Z)("dxBox",qp);const dn=qp;var Xp=function(t,e,i){CD(t,e,i)},CD=function(t,e,i){t.css("transform","rotate("+e+"deg) translate(0,"+i+"px)")},Jp=Ot.Z.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue:function(){return this.option("value")||new Date},_init:function(){this.callBase(),this.$element().addClass("dx-timeview")},_render:function(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox:function(){var t=(0,p.Z)("<div>").appendTo(this.$element()),e=[];this.option("_showClock")&&e.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),e.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(t,dn,{height:"100%",width:"100%",direction:"col",items:e})},_renderClock:function(t,e,i){this._$hourArrow=(0,p.Z)("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=(0,p.Z)("<div>").addClass("dx-timeview-minutearrow");var a=(0,p.Z)(i);a.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",a)},_updateClock:function(){var t=this._getValue(),e=t.getHours()/12*360+t.getMinutes()/60*30,i=t.getMinutes()/60*360;Xp(this._$hourArrow,e,this.option("_arrowOffset")),Xp(this._$minuteArrow,i,this.option("_arrowOffset"))},_getBoxItems:function(t){var e=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:(0,p.Z)("<div>").addClass("dx-timeview-time-separator").text(X.Z.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return t&&e.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),e},_renderField:function(){var t=!this.option("use24HourFormat");return this._createHourBox(t),this._createMinuteBox(),t&&this._createFormat12Box(),this._createComponent((0,p.Z)("<div>").addClass("dx-timeview-field"),dn,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(t)}).$element()},_createHourBox:function(t){var e=this._hourBox=this._createComponent((0,p.Z)("<div>"),fo,(0,C.l)({min:-1,max:t?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:i=>this._keyboardHandler(i)},this._getNumberBoxConfig()));e.setAria("label","hours")},_isPM:function(){return!this.option("use24HourFormat")&&1===this._format12.option("value")},_onHourBoxValueChanged:function(t){var{value:e,component:i}=t,a=this._getValue(),r=new Date(a),n=this._convertMaxHourToMin(e);i.option("value",n),this._isPM()&&(n+=12),r.setHours(n),he.normalizeTime(r),this.option("value",r)},_convertMaxHourToMin:function(t){var e=this.option("use24HourFormat")?24:12;return(e+t)%e},_createMinuteBox:function(){var t=this._minuteBox=this._createComponent((0,p.Z)("<div>"),fo,(0,C.l)({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{var{value:i,component:a}=e,r=(60+i)%60;a.option("value",r);var n=new Date(this._getValue());n.setMinutes(r),he.normalizeTime(n),this.option("value",n)}},this._getNumberBoxConfig()));t.setAria("label","minutes")},_createFormat12Box:function(){var t=X.Z.getPeriodNames(),e=this._format12=this._createComponent((0,p.Z)("<div>").addClass("dx-timeview-format12"),Cp,{items:[{value:-1,text:t[0]},{value:1,text:t[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:i=>this._keyboardHandler(i),onValueChanged:i=>{var{value:a}=i,r=this._getValue().getHours(),n=new Date(this._getValue());n.setHours((r+12*a)%24),this.option("value",n)},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")});e.setAria("label","type")},_refreshFormat12:function(){if(!this.option("use24HourFormat")){var e=this._getValue().getHours();this._silentEditorValueUpdate(this._format12,e>=12?1:-1)}},_silentEditorValueUpdate:function(t,e){t&&(t._suppressValueChangeAction(),t.option("value",e),t._resumeValueChangeAction())},_getNumberBoxConfig:function(){return{showSpinButtons:!0,displayValueFormatter:function(t){return(t<10?"0":"")+t},stylingMode:this.option("stylingMode")}},_normalizeHours:function(t){return this.option("use24HourFormat")?t:t%12||12},_updateField:function(){var t=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,t),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime:function(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged:function(t){t&&this._updateTime()},_optionChanged:function(t){switch(t.name){case"value":this._updateTime(),this.callBase(t);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(t)}}});(0,J.Z)("dxTimeView",Jp);const SD=Jp;var xD=(0,Z.Jj)(),Qp="dx-datebox-datetime-time-side",yD=$p.inherit({NAME:"CalendarWithTime",getDefaultOptions:function(){return(0,C.l)(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter:function(){return z.Z.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:function(t){return t||"shortdateshorttime"},_is24HourFormat:function(){return X.Z.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue:function(){var t=this.callBase();return this._updateDateTime(t)},_renderWidget:function(){this.callBase(),this._timeView=this.dateBox._createComponent((0,p.Z)("<div>"),SD,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")}),this._timeView.registerKeyHandler("escape",this._escapeHandler.bind(this))},renderOpenedState:function(){this.callBase();var t=this._getPopup();t&&t.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(function(){this._getPopup()&&this._getPopup().repaint()}.bind(this),0)},isAdaptivityChanged:function(){var t=this._isShrinkView(),e=this._currentAdaptiveMode;return t!==e?(this._currentAdaptiveMode=t,void 0!==e):this.callBase()},_updateValue:function(t){var e=this.dateBoxValue();!e&&!t&&he.normalizeTime(e=new Date),this.callBase(),this._timeView&&(e&&this._timeView.option("value",e),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:function(){return(0,I.dz)(xD)<=573},_isShrinkView:function(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems:function(){var t=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||t.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),t},renderPopupContent:function(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();var t=this._getPopup().$content();this._box=this.dateBox._createComponent((0,p.Z)("<div>").appendTo(t),dn,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:function(e,i,a){var r=(0,p.Z)("<div>");switch(e.name){case"calendar":r.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(Qp),r.append(this._timeView.$element()));break;case"time":r.append(this._timeView.$element()),(0,p.Z)(a).addClass(Qp)}return r}.bind(this)}),this._attachTabHandler()},popupConfig:function(t){var e=this.callBase(t);return(0,C.l)(e,{width:"auto"})},getFirstPopupElement:function(){return this._timeView._hourBox.$element().find("input")},_attachTabHandler:function(){var t=this.dateBox;this._timeView._hourBox.registerKeyHandler("tab",function(e){e.shiftKey&&(e.preventDefault(),t.focus())})},_preventFocusOnPopup:function(t){(0,p.Z)(t.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime:function(t){var e=this._timeView.option("value");return t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t},getValue:function(){var t,e=null!==(t=this._widget.option("value"))&&void 0!==t?t:this._widget.getContouredDate();return e=e?new Date(e):new Date,this._updateDateTime(e)},dispose:function(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}});const ED=yD;var ID=(0,Z.Jj)(),AD={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},DD=ln.inherit({NAME:"List",supportedKeys:function(){return{tab:function(){var{opened:t,applyValueMode:e}=this.option();t&&"instantly"===e&&this.close()},space:E.ZT,home:E.ZT,end:E.ZT}},getDefaultOptions:function(){return(0,C.l)(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:function(t){return t||"shorttime"},popupConfig:function(t){return t},getValue:function(){var t=this._widget.option("selectedIndex");return-1===t?this.dateBox.option("value"):this._getDateByItemData(this._widgetItems[t])},useCurrentDateByDefault:function(){return!0},getDefaultDate:function(){return new Date(null)},popupShowingHandler:function(){this.dateBox._dimensionChanged()},_renderWidget:function(){this.callBase(),this._refreshItems()},_getWidgetName:function(){return La},_getWidgetOptions:function(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant:function(t){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",t.actionValue)},_refreshItems:function(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState:function(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose:function(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue:function(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue:function(){var t=this.dateBoxValue(),e=this._getDateIndex(t);-1===e?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",e)},_scrollToSelectedItem:function(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex:function(t){for(var e=-1,i=0,a=this._widgetItems.length;i<a;i++)if(this._areDatesEqual(t,this._widgetItems[i])){e=i;break}return e},_areDatesEqual:function(t,e){return(0,v.J_)(t)&&(0,v.J_)(e)&&t.getHours()===e.getHours()&&t.getMinutes()===e.getMinutes()},_getTimeListItems:function(){var t=this.dateBox.dateOption("min")||this._getBoundaryDate("min"),e=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),i=this.dateBox.dateOption("value")||null,a=e-t,r=t.getMinutes()%this.dateBox.option("interval");return a<0?[]:(a>he.ONE_DAY&&(a=he.ONE_DAY),i-t<he.ONE_DAY||((t=this._getBoundaryDate("min")).setMinutes(r),i&&Math.abs(i-e)<he.ONE_DAY&&(a=(60*e.getHours()+Math.abs(e.getMinutes()-r))*he.ONE_MINUTE)),this._getRangeItems(t,new Date(t),a))},_getRangeItems:function(t,e,i){for(var a=[],r=this.dateBox.option("interval");e-t<=i;)a.push(new Date(e)),e.setMinutes(e.getMinutes()+r);return a},_getBoundaryDate:function(t){var e=AD[t],i=new Date((0,E.IS)(this.dateBox.dateOption("value"),0));return new Date(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes())},_timeListItemTemplate:function(t){var e=this.dateBox.option("displayFormat");return X.Z.format(t,this.getDisplayFormat(e))},_listItemClickHandler:function(t){if("useButtons"!==this.dateBox.option("applyValueMode")){var e=this._getDateByItemData(t.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(e,t.event)}},_getDateByItemData:function(t){var e=this.dateBox.option("value"),i=t.getHours(),a=t.getMinutes(),r=t.getSeconds(),n=t.getFullYear(),s=t.getMonth(),o=t.getDate();return e?((e=this.dateBox.option("dateSerializationFormat")?Se.Z.deserializeDate(e):new Date(e)).setHours(i),e.setMinutes(a),e.setSeconds(r),e.setFullYear(n),e.setMonth(s),e.setDate(o)):e=new Date(n,s,o,i,a,0,0),e},getKeyboardListener:function(){return this._widget},_updatePopupHeight:function(){var t=Co(this.dateBox.option("dropDownOptions.height"));if(void 0===t||"auto"===t){this.dateBox._setPopupOption("height","auto");var e=(0,I.zp)(this._widget.$element()),i=.45*(0,I.Cr)(ID);this.dateBox._setPopupOption("height",Math.min(e,i))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText:function(t,e){var i=this.callBase(t,e);return i&&(i=he.mergeDates(i,new Date(null),"date")),i}});const OD=DD;var Pa=(0,Z.Jj)(),Fa="dx-datebox",un="dx-datebox-wrapper",je={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},Qe={date:"date",datetime:"datetime",time:"time"},PD={Calendar:$p,DateView:eD,Native:iD,CalendarWithTime:ED,List:OD},FD=ap.inherit({_supportedKeys:function(){return(0,C.l)(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers:function(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:je.calendar,invalidDateMessage:A.Z.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:A.Z.format("validation-range"),applyButtonText:A.Z.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0,_showValidationIcon:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device:function(){var e=K.Z.real().platform;return"ios"===e||"android"===e},options:{pickerType:je.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions:function(t){this._userOptions=(0,C.l)({},t),this.callBase(t),this._updatePickerOptions()},_updatePickerOptions:function(){var t=this.option("pickerType"),e=this.option("type");t===je.list&&(e===Qe.datetime||e===Qe.date)&&(t=je.calendar),e===Qe.time&&t===je.calendar&&(t=je.list),this.option("showDropDownButton","generic"!==K.Z.real().platform||t!==je.native),this._pickerType=t},_init:function(){this._initStrategy(),this.option((0,C.l)({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:function(t){return t.charAt(0).toLowerCase()+t.substr(1)},_initStrategy:function(){var t=this._getStrategyName(this._getFormatType());this._strategy&&this._strategy.NAME===t||(this._strategy=new(0,PD[t])(this))},_getFormatType:function(){var t=this.option("type"),e=/h|m|s/g.test(t),a="";return/d|M|Y/g.test(t)&&(a+=Qe.date),e&&(a+=Qe.time),a},_getStrategyName:function(t){var e=this._pickerType;return e===je.rollers?"DateView":e===je.native?"Native":t===Qe.date?"Calendar":t===Qe.datetime?"CalendarWithTime":"List"},_initMarkup:function(){this.$element().addClass(Fa),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render:function(){this.callBase(),this._formatValidationIcon()},_renderDimensions:function(){this.callBase(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged:function(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight:function(){var t,e;this._popup&&(null===(t=(e=this._strategy)._updatePopupHeight)||void 0===t||t.call(e))},_refreshFormatClass:function(){var t=this.$element();(0,y.S6)(Qe,function(e,i){t.removeClass(Fa+"-"+i)}),t.addClass(Fa+"-"+this.option("type"))},_refreshPickerTypeClass:function(){var t=this.$element();(0,y.S6)(je,function(e,i){t.removeClass(Fa+"-"+i)}),t.addClass(Fa+"-"+this._pickerType)},_formatValidationIcon:function(){if((0,Z.Ym)()){var t=this._input().get(0),e=this.option("rtlEnabled"),i=this._getClearButtonWidth(),a=this._getLongestElementDimensions(),r=parseFloat(Pa.getComputedStyle(t).width)-i,n=a.width>r,s=t.style;this.$element().toggleClass("dx-show-invalid-badge",!n&&this.option("_showValidationIcon")),n?(void 0===this._storedPadding&&(this._storedPadding=e?a.leftPadding:a.rightPadding),e?s.paddingLeft=0:s.paddingRight=0):e?s.paddingLeft=this._storedPadding+"px":s.paddingRight=this._storedPadding+"px"}},_getClearButtonWidth:function(){var t=0;if(this._isClearButtonVisible()&&""===this._input().val()){var e=this.$element().find(".dx-clear-button-area").get(0);t=parseFloat(Pa.getComputedStyle(e).width)}return t},_getLongestElementDimensions:function(){var t=this._strategy.getDisplayFormat(this.option("displayFormat")),e=X.Z.format(he.getLongestDate(t,X.Z.getMonthNames(),X.Z.getDayNames()),t),i=this._input(),a=i.get(0),r=(0,st.l5)(i,e),s=void 0!==this._storedPadding?this._storedPadding:0;r.appendTo(this.$element());var o=parseFloat(Pa.getComputedStyle(r.get(0)).width),l=parseFloat(Pa.getComputedStyle(a).paddingRight),d=parseFloat(Pa.getComputedStyle(a).paddingLeft),u=o+d+l+s;return r.remove(),{width:u,leftPadding:d,rightPadding:l}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup:function(){this.callBase(),this._popup.$wrapper().addClass(un),this._renderPopupWrapper()},_getPopupToolbarItems(){var t,e,i,a=this.callBase();return null!==(t=null===(e=(i=this._strategy)._getPopupToolbarItems)||void 0===e?void 0:e.call(i,a))&&void 0!==t?t:a},_popupConfig:function(){var t=this.callBase();return(0,C.l)(this._strategy.popupConfig(t),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper:function(){if(this._popup){var t=this.$element(),e=(0,C.l)({},Qe,je);(0,y.S6)(e,function(i,a){t.removeClass(un+"-"+a)}.bind(this)),this._popup.$wrapper().addClass(un+"-"+this.option("type")).addClass(un+"-"+this._pickerType).addClass("dx-dropdowneditor-overlay")}},_renderPopupContent:function(){this.callBase(),this._strategy.renderPopupContent()},_getFirstPopupElement:function(){return this._strategy.getFirstPopupElement()||this.callBase()},_getLastPopupElement:function(){return this._strategy.getLastPopupElement()||this.callBase()},_popupShowingHandler:function(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler:function(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler:function(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged:function(t){t&&this._formatValidationIcon()},_clearValueHandler:function(t){this.option("text",""),this.callBase(t)},_readOnlyPropValue:function(){if(this._pickerType===je.rollers)return!0;var t=K.Z.real().platform;return!this._isNativeType()||"ios"!==t&&"android"!==t?this.callBase():this.option("readOnly")},_isClearButtonVisible:function(){return this.callBase()&&!this._isNativeType()},_renderValue:function(){var t=this.dateOption("value");return this.option("text",this._getDisplayedText(t)),this._strategy.renderValue(),this.callBase()},_setSubmitValue:function(){var t=this.dateOption("value"),e=this.option("dateSerializationFormat"),i=he.SUBMIT_FORMATS_MAP[this.option("type")],a=e?Se.Z.serializeDate(t,e):he.toStandardDateFormat(t,i);this._getSubmitElement().val(a)},_getDisplayedText:function(t){var i,e=this.option("mode");if("text"===e){var a=this._strategy.getDisplayFormat(this.option("displayFormat"));i=X.Z.format(t,a)}else{var r=this._getFormatByMode(e);i=r?X.Z.format(t,r):he.toStandardDateFormat(t,e)}return i},_getFormatByMode:function(t){return(0,Ue.inputType)(t)?null:he.FORMATS_MAP[t]},_valueChangeEventHandler:function(t){var{text:e,type:i,validationError:a}=this.option(),r=this.dateOption("value");if(e!==this._getDisplayedText(r)){var n=this._getParsedDate(e),s=r??this._getDateByDefault(),o=he.mergeDates(s,n,i);if(this._applyInternalValidation(n&&"time"===i?o:n).isValid){var d=this._getDisplayedText(o);s&&o&&s.getTime()===o.getTime()&&d!==e?this._renderValue():this.dateValue(o,t)}}else this._recallInternalValidation(r,a)},_recallInternalValidation(t,e){(!e||e.editorSpecific)&&(this._applyInternalValidation(t),this._applyCustomValidation(t))},_getDateByDefault:function(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate:function(t){var e=this._strategy.getDisplayFormat(this.option("displayFormat"));return this._strategy.getParsedText(t,e)??void 0},_applyInternalValidation(t){var i=!!this.option("text")&&null!==t,a=!!t&&(0,v.J_)(t)&&!isNaN(t.getTime()),r=a&&z.Z.dateInRange(t,this.dateOption("min"),this.dateOption("max"),this.option("type")),n=!i&&!t||r,s="";return a?r||(s=this.option("dateOutOfRangeMessage")):s=this.option("invalidDateMessage"),this._updateInternalValidationState(n,s),{isValid:n,isDate:a}},_updateInternalValidationState(t,e){this.option({isValid:t,validationError:t?null:{editorSpecific:!0,message:e}})},_applyCustomValidation:function(t){this.validationRequest.fire({editor:this,value:this._serializeDate(t)})},_isValueChanged:function(t){var e=this.dateOption("value");return(e&&e.getTime())!==(t&&t.getTime())},_isTextChanged:function(t){return this.option("text")!==(t&&this._getDisplayedText(t)||"")},_renderProps:function(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState:function(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle:function(){var t=this.option("placeholder");if(t)return t;var e=this.option("type");return e===Qe.time?A.Z.format("dxDateBox-simulatedDataPickerTitleTime"):e===Qe.date||e===Qe.datetime?A.Z.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy:function(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler:function(t){var e=this._strategy.getValue();this.dateValue(e,t.event),this.callBase()},_dispose:function(){var t;this.callBase(),null===(t=this._strategy)||void 0===t||t.dispose()},_isNativeType:function(){return this._pickerType===je.native},_updatePopupTitle:function(){var t;null===(t=this._popup)||void 0===t||t.option("title",this._getPopupTitle())},_optionChanged:function(t){switch(t.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:t.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:t.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":var e=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),e||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break;case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(t.value),this.callBase.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":case"_showValidationIcon":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat:function(){var t=this.option("value");return this.option("dateSerializationFormat")&&(0,hr.Z)().forceIsoDateParsing?this.option("dateSerializationFormat"):(0,v.kE)(t)?"number":(0,v.HD)(t)?Se.Z.getDateSerializationFormat(t):void 0},_updateValue:function(t){this.callBase(),this._applyInternalValidation(t??this.dateOption("value"))},dateValue:function(t,e){var i=this._isValueChanged(t);return i&&e&&this._saveValueChangeEvent(e),i||(this._isTextChanged(t)?this._updateValue(t):""===this.option("text")&&this._applyCustomValidation(t)),this.dateOption("value",t)},dateOption:function(t,e){if(1===arguments.length)return Se.Z.deserializeDate(this.option(t));this.option(t,this._serializeDate(e))},_serializeDate:function(t){var e=this._getSerializationFormat();return Se.Z.serializeDate(t,e)},_clearValue:function(){var t=this.option("value");this.callBase(),null===t&&this._applyCustomValidation(null)},reset:function(){var t=this.option("value");this.callBase(),null===t&&this._applyInternalValidation(null)}}),Ui="dateBoxMask",kD=FD.inherit({_supportedKeys(t){var e=this.callBase(t),i=r=>{var n=e[(0,D.EV)(r)];return n&&n.apply(this,[r])},a=(r,n)=>this._shouldUseOriginalHandler(r)?i.apply(this,[r]):n.apply(this,[r]);return(0,C.l)({},e,{del:r=>a(r,n=>{this._revertPart(1),this._isAllSelected()||n.preventDefault()}),backspace:r=>a(r,n=>{this._revertPart(-1),this._isAllSelected()||n.preventDefault()}),home:r=>a(r,n=>{this._selectFirstPart(),n.preventDefault()}),end:r=>a(r,n=>{this._selectLastPart(),n.preventDefault()}),escape:r=>a(r,n=>{this._revertChanges(n)}),enter:r=>a(r,()=>{this._enterHandler()}),leftArrow:r=>a(r,n=>{this._selectNextPart(-1),n.preventDefault()}),rightArrow:r=>a(r,n=>{this._selectNextPart(1),n.preventDefault()}),upArrow:r=>a(r,n=>{this._upDownArrowHandler(1),n.preventDefault()}),downArrow:r=>a(r,n=>{this._upDownArrowHandler(-1),n.preventDefault()})})},_shouldUseOriginalHandler(t){var e=this.option("opened")&&t&&-1===["backspace","del"].indexOf((0,D.EV)(t));return!this._useMaskBehavior()||e||t&&t.altKey},_upDownArrowHandler(t){this._setNewDateIfEmpty();var e=this._getActivePartValue(this._initialMaskValue),a=this._getActivePartValue()-e;this._loadMaskValue(this._initialMaskValue),this._partIncrease(a+t,!0)},_getDefaultOptions(){return(0,C.l)(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(t){var{originalEvent:e,alt:i}=t,a=e.data||e.key;return"string"==typeof a&&1===a.length&&!i&&!(0,D.j1)(e)},_isSingleDigitKey(t){var e,i=null===(e=t.originalEvent)||void 0===e?void 0:e.data;return 1===i?.length&&parseInt(i,10)},_useBeforeInputEvent:function(){return K.Z.real().android},_keyInputHandler(t,e){var i=this._input().val();this._processInputKey(e),t.preventDefault(),i!==this._input().val()&&S.Z.trigger(this._input(),"input")},_keyboardHandler(t){var e=t.originalEvent.key,i=this.callBase(t);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(ve.Z.chrome&&"Process"===t.key&&0===t.code.indexOf("Digit")?(e=t.code.replace("Digit",""),this._processInputKey(e),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(t)&&this._keyInputHandler(t.originalEvent,e)),i},_maskBeforeInputHandler(t){this._maskInputHandler=null;var{inputType:e}=t.originalEvent;"insertCompositionText"===e&&(this._maskInputHandler=()=>{this._renderSelectedPart()});var i="deleteContentBackward"===e;if(i||"deleteContentForward"===e){var r=i?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(r)}}if(this._useMaskBehavior()&&this._isSingleCharKey(t))return this._keyInputHandler(t,t.originalEvent.data),!0},_keyPressHandler(t){var{originalEvent:e}=t;"insertCompositionText"===e?.inputType&&this._isSingleDigitKey(t)&&(this._processInputKey(e.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(t),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(t){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(t))?this._searchString(t):this._searchNumber(t)},_isAllSelected(){var t=this._caret();return t.end-t.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;var t=this._strategy.getDisplayFormat(this.option("displayFormat")),e=(0,v.HD)(t)&&!X.Z._getPatternByFormat(t);return this._formatPattern=e?t:(0,MT.y)(function(i){return X.Z.format(i,t)}),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){var t="time"===this.option("type")?new Date(null):new Date;this._maskValue=t,this._initialMaskValue=t,this._renderDateParts()}},_partLimitsReached(t){var e=String(t).length,i=this._getActivePartProp("pattern").length,r=1===i?e:Math.min(i,e),n=this._searchValue.length===r,s=parseInt(this._searchValue+"0")>t;return n||s},_searchNumber(t){var{max:e}=this._getActivePartLimits(),i=String(e).length;this._searchValue=(this._searchValue+t).substr(-i),isNaN(this._searchValue)&&(this._searchValue=t),this._setActivePartValue(this._searchValue),this._partLimitsReached(e)&&this._selectNextPart(1)},_searchString(t){if(isNaN(parseInt(this._getActivePartProp("text")))){for(var e=this._getActivePartProp("limits")(this._maskValue),i=this._searchValue+t.toLowerCase(),a=e.max-e.min,r=0;r<=a;r++)if(this._loadMaskValue(this._initialMaskValue),this._partIncrease(r+1),0===this._getActivePartProp("text").toLowerCase().indexOf(i))return void(this._searchValue=i);this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(t))}},_clearSearchValue(){this._searchValue=""},_revertPart:function(t){if(!this._isAllSelected()){var e=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(e),this._selectNextPart(t)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&"text"===this.option("mode")},_prepareRegExpInfo(){this._regExpInfo=(0,Sp.oo)(this._getFormatPattern(),X.Z);var t=this._regExpInfo.regexp,e=t.source,i=t.flags,a=new RegExp(/(\{[0-9]+,?[0-9]*\})/),r=e.split(a).map(n=>a.test(n)?n:me.Z.convertDigits(n,!1)).join("");this._regExpInfo.regexp=new RegExp(r,i)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(this._useMaskBehavior()){var t=this.option("text")||this._getDisplayedText(this._maskValue);t&&(this._dateParts=((t,e)=>{for(var i=e.regexp.exec(t),a=0,r=0,n=[],s=function(){r=(a=r)+i[o].length;var l=e.patterns[o-1].replace(/^'|'$/g,""),d=(t=>BT[t]||(()=>t))(l[0]);n.push({index:o-1,isStub:l===i[o],caret:{start:a,end:r},pattern:l,text:i[o],limits:function(){for(var u=arguments.length,h=new Array(u),c=0;c<u;c++)h[c]=arguments[c];return Va(l[0],...h)},setter:LT[l[0]]||E.ZT,getter:d})},o=1;o<i.length;o++)s();return n})(t,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())}},_detachMaskEvents(){S.Z.off(this._input(),"."+Ui)},_attachMaskEvents(){S.Z.on(this._input(),(0,D.V4)("dxclick",Ui),this._maskClickHandler.bind(this)),S.Z.on(this._input(),(0,D.V4)("paste",Ui),this._maskPasteHandler.bind(this)),S.Z.on(this._input(),(0,D.V4)("drop",Ui),()=>{this._renderSelectedPart()}),S.Z.on(this._input(),(0,D.V4)("compositionend",Ui),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&S.Z.on(this._input(),(0,D.V4)("beforeinput",Ui),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(1))},_onMouseWheel(t){this._useMaskBehavior()&&this._partIncrease(t.delta>0?1:-1,t)},_selectNextPart(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.option("text")&&!this._disposed){t&&(this._initialMaskValue=new Date(this._maskValue));var e=(0,ue.n$)(this._activePartIndex+t,0,this._dateParts.length-1);if(this._dateParts[e].isStub){if(!(0===e&&t<0||e===this._dateParts.length-1&&t>0))return void this._selectNextPart(t>=0?t+1:t-1);e=this._activePartIndex}this._activePartIndex!==e&&this._clearSearchValue(),this._activePartIndex=e,this._caret(this._getActivePartProp("caret"))}},_getRealLimitsPattern(){if("d"===this._getActivePartProp("pattern")[0])return"dM"},_getActivePartLimits(t){return this._getActivePartProp("limits")(this._maskValue,t&&this._getRealLimitsPattern())},_getActivePartValue(t){t=t||this._maskValue;var e=this._getActivePartProp("getter");return(0,v.mf)(e)?e(t):t[e]()},_addLeadingZeroes(t){var e=this._searchValue.match(/^0+/),i=this._getActivePartLimits(),a=String(i.max).length;return((e&&e[0]||"")+String(t)).substr(-a)},_setActivePartValue(t,e){e=e||this._maskValue;var i=this._getActivePartProp("setter"),a=this._getActivePartLimits();t=(0,ue.Z2)(t,a.min,a.max)?t:t%10,t=this._addLeadingZeroes((0,ue.n$)(t,a.min,a.max)),(0,v.mf)(i)?i(e,t):e[i](t),this._renderDisplayText(this._getDisplayedText(e)),this._renderDateParts()},_getActivePartProp(t){if(this._dateParts&&this._dateParts[this._activePartIndex])return this._dateParts[this._activePartIndex][t]},_loadMaskValue(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dateOption("value");this._maskValue=t&&new Date(t),this._initialMaskValue=t&&new Date(t)},_saveMaskValue(){var t=this._maskValue&&new Date(this._maskValue);t&&"date"===this.option("type")&&t.setHours(0,0,0,0),this._initialMaskValue=new Date(t),this.dateOption("value",t)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(t){this.callBase(t),this._useMaskBehavior()&&this.option("text",t)},_partIncrease(t,e){this._setNewDateIfEmpty();var{max:i,min:a}=this._getActivePartLimits(e),r=i-a;1===r&&r++;var n=t+this._getActivePartValue();n>i?n=this._applyLimits(n,{limitBase:a,limitClosest:i,limitDelta:r}):n<a&&(n=this._applyLimits(n,{limitBase:i,limitClosest:a,limitDelta:r})),this._setActivePartValue(n)},_applyLimits(t,e){var{limitBase:i,limitClosest:a,limitDelta:r}=e,n=(t-a)%r;return n?i+n-1*(0,ue.Xx)(n):a},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=((t,e)=>{for(var i=0;i<t.length;i++)if(!t[i].isStub&&t[i].caret.end>=e)return i;return null})(this._dateParts,this._caret().start),this._isAllSelected()||((0,v.$K)(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(t){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(t){var e=this._replaceSelectedText(this.option("text"),this._caret(),(0,st.Zx)(t)),i=X.Z.parse(e,this._getFormatPattern());i&&this._isDateValid(i)&&(this._maskValue=i,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),t.preventDefault()},_isDateValid:t=>(0,v.J_)(t)&&!isNaN(t),_isValueDirty(){var t=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(t&&t.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&S.Z.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)},_focusOutHandler(t){this._useMaskBehavior()&&!t.isDefaultPrevented()?(this._fireChangeEvent(),this.callBase(t),this._selectFirstPart(t)):this.callBase(t)},_valueChangeEventHandler(t){var e=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(t),e?null===this._maskValue&&this._loadMaskValue(e):this._maskValue=null,this._saveMaskValue()):this.callBase(t)},_optionChanged(t){switch(t.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(t),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(t),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(t)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},reset(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}});(0,J.Z)("dxDateBox",kD);var{isWrapped:HD}=tt.default,zD=function(){var t=function(u,h){return(0,C.l)(u,{readOnly:h.readOnly,placeholder:h.placeholder,inputAttr:{id:h.id,"aria-labelledby":h["aria-labelledby"]},tabIndex:h.tabIndex},h.editorOptions)},e=function(){return ve.Z.mozilla||K.Z.real().ios},i=function(u){var h={},c=e(),_=u.sharedData||h;return t({placeholder:u.placeholder,width:u.width,value:u.value,onValueChanged:function(g){var f="filterRow"===u.parentType||"searchPanel"===u.parentType,m=g.event&&("input"===g.event.type||"keyup"===g.event.type),x=function(w,T){u&&u.setValue(w.value,T)};clearTimeout(h.valueChangeTimeout),m&&f?_.valueChangeTimeout=h.valueChangeTimeout=setTimeout(function(){x(g,h.valueChangeTimeout!==_.valueChangeTimeout)},(0,v.$K)(u.updateValueTimeout)?u.updateValueTimeout:0):x(g)},onKeyDown:function(g){c&&"enter"===(0,D.EV)(g.event)&&S.Z.trigger((0,p.Z)(g.component._input()),"change")},valueChangeEvent:"change"+("filterRow"===u.parentType?" keyup input":"")},u)},a=function(u){u.editorName="dxDateBox",u.editorOptions=t({value:u.value,onValueChanged:function(h){u.setValue(h.value)},onKeyDown:function(h){var{component:c,event:_}=h,g=c.option("useMaskBehavior");(e()||g)&&"enter"===(0,D.EV)(_)&&(c.blur(),c.focus())},displayFormat:u.format,type:u.dataType,dateSerializationFormat:null,width:"filterBuilder"===u.parentType?void 0:"auto"},u)},r=function(u){var _,h=i(u),c="searchPanel"===u.parentType;h.value=u.editorType&&"dxTextBox"!==u.editorType?u.value:(0,v.$K)(_=u.value)?_.toString():"",h.valueChangeEvent+=c?" keyup input search":"",h.mode=h.mode||(c?"search":"text"),u.editorName="dxTextBox",u.editorOptions=h},n=function(u){var h=i(u);h.value=(0,v.$K)(u.value)?u.value:null,u.editorName="dxNumberBox",u.editorOptions=h};function s(u){var c,_,g,h=u.lookup,f="filterRow"===u.parentType;if(h){var m;c=(0,Q.vb)(h.displayExpr),(0,v.mf)(_=h.dataSource)&&!HD(_)&&(_=_(u.row||{}),function(w){if(w.row&&w.row.watch&&"dataRow"===w.parentType){var T=w.editorOptions||{};w.editorOptions=T;var O,P=T.onInitialized;T.onInitialized=function(H){P&&P.apply(this,arguments),(O=H.component).on("disposing",N)};var F,N=w.row.watch(()=>(F=w.lookup.dataSource(w.row))&&F.filter,()=>{O.option("dataSource",F)},H=>{w.row=H})}}(u)),((0,v.Kn)(_)||Array.isArray(_))&&(_=(0,oa.aN)(_),f&&(g=_.postProcess,_.postProcess=function(w){return 0===this.pageIndex()&&(w=w.slice(0)).unshift(null),g?g.call(this,w):w}));var x=!(!h.allowClearing||f);u.editorName=null!==(m=u.editorType)&&void 0!==m?m:"dxSelectBox",u.editorOptions=t({searchEnabled:!0,value:u.value,valueExpr:u.lookup.valueExpr,searchExpr:u.lookup.searchExpr||u.lookup.displayExpr,allowClearing:x,showClearButton:x,displayExpr:function(w){return null===w?u.showAllText:c(w)},dataSource:_,onValueChanged:function(w){var T=[w.value];!f&&T.push(w.component.option("text")),u.setValue.apply(this,T)}},u)}}function o(u){u.editorName="dxCheckBox",u.editorOptions=t({elementAttr:{id:u.id},value:(0,v.$K)(u.value)?u.value:void 0,hoverStateEnabled:!u.readOnly,focusStateEnabled:!u.readOnly,activeStateEnabled:!1,onValueChanged:function(h){u.setValue&&u.setValue(h.value,h)}},u)}var l=u=>{u.editorName=u.editorType,u.editorOptions=t({value:u.value,onValueChanged:function(h){u.setValue(h.value)}},u)},d=u=>{var _,h={dxDateBox:a,dxCheckBox:o,dxNumberBox:n,dxTextBox:r};if(u.lookup)s(u);else if(u.editorType){var c;(null!==(c=h[u.editorType])&&void 0!==c?c:l)(u)}else switch(u.dataType){case"date":case"datetime":a(u);break;case"boolean":"filterRow"===(_=u).parentType||"filterBuilder"===_.parentType?s((0,C.l)(_,{lookup:{displayExpr:function(g){return!0===g?_.trueText||"true":!1===g?_.falseText||"false":void 0},dataSource:[!0,!1]}})):o(_);break;case"number":n(u);break;default:r(u)}};return{createEditor:function(u,h){h.cancel=!1,h.editorElement=(0,W.u)(u),(0,v.$K)(h.tabIndex)||(h.tabIndex=this.option("tabIndex")),d(h),this.executeAction("onEditorPreparing",h),!h.cancel&&("dataRow"===h.parentType&&!h.isOnForm&&!(0,v.$K)(h.editorOptions.showValidationMark)&&(h.editorOptions.showValidationMark=!1),function(c,_){var g=(0,p.Z)(_.editorElement);if(_.editorName&&_.editorOptions&&g[_.editorName]){if(("dxCheckBox"===_.editorName||"dxSwitch"===_.editorName)&&(_.isOnForm||(g.addClass(c.addWidgetPrefix("checkbox-size")),g.parent().addClass("dx-editor-inline-block"))),c._createComponent(g,_.editorName,_.editorOptions),"dxDateBox"===_.editorName){var f=g.dxDateBox("instance"),m=f._supportedKeys().enter;f.registerKeyHandler("enter",x=>(f.option("opened")&&m(x),!0))}"dxTextArea"===_.editorName&&g.dxTextArea("instance").registerKeyHandler("enter",function(x){"enter"===(0,D.EV)(x)&&!x.ctrlKey&&!x.shiftKey&&x.stopPropagation()})}}(this,h),this.executeAction("onEditorPrepared",h))}}}();const e_=zD;var Vo="dx-cell-focus-disabled",t_="focus-overlay",Po="dx-focused",i_="dxDataGridEditorFactory",a_=(0,D.V4)([re.Z.down,"focusin",ie.u].join(" "),i_),Fo="dx-hidden",UD=ne.ViewController.inherit(e_),jD={defaultOptions:()=>({}),controllers:{editorFactory:class YD extends UD{_getFocusedElement(e){var i=this.option("focusedRowEnabled")?"tr[tabindex]:focus":"tr[tabindex]:not(.dx-data-row):focus",a="td[tabindex]:focus, ".concat(i,", input:focus, textarea:focus, .dx-lookup-field:focus, .dx-checkbox:focus, .dx-switch:focus, .dx-dropdownbutton .dx-buttongroup:focus, .dx-adaptive-item-text:focus"),r=e.find(a);return this.elementIsInsideGrid(r)&&r}_getFocusCellSelector(){return".dx-row > td"}_updateFocusCore(){var e=this.component&&this.component.$element();if(e){var i=this._getFocusedElement(e);if(i&&i.length){var a;if(!i.hasClass(Vo)&&!i.hasClass("dx-row")){var r=i.closest("".concat(this._getFocusCellSelector(),", .").concat(Vo));r.get(0)!==i.get(0)&&(a=this._needHideBorder(r),i=r)}if(i.length&&!i.hasClass(Vo))return void this.focus(i,a)}}this.loseFocus()}_needHideBorder(e){return e.hasClass("dx-editor-inline-block")}_updateFocus(e){var i=this,a=e&&e.event&&(0,p.Z)(e.event.target).hasClass(i.addWidgetPrefix(t_));i._isFocusOverlay=i._isFocusOverlay||a,clearTimeout(i._updateFocusTimeoutID),i._updateFocusTimeoutID=setTimeout(()=>{delete i._updateFocusTimeoutID,i._isFocusOverlay||i._updateFocusCore(),i._isFocusOverlay=!1})}_updateFocusOverlaySize(e,i){e.hide();var a=$t.Z.calculate(e,(0,C.l)({collision:"fit"},i));a.h.oversize>0&&(0,I.Ns)(e,(0,I.Y_)(e)-a.h.oversize),a.v.oversize>0&&(0,I.qt)(e,(0,I.zp)(e)-a.v.oversize),e.show()}callbackNames(){return["focused"]}focus(e,i){var a=this;if(void 0===e)return a._$focusedElement;e&&(e.is(a._$focusedElement)||a._$focusedElement&&a._$focusedElement.removeClass(Po),a._$focusedElement=e,clearTimeout(a._focusTimeoutID),a._focusTimeoutID=setTimeout(()=>{delete a._focusTimeoutID,a.renderFocusOverlay(e,i),e.addClass(Po),a.focused.fire(e)}))}refocus(){var e=this.focus();this.focus(e)}renderFocusOverlay(e,i){if(V.isElementInCurrentGrid(this,e))if(this._$focusOverlay||(this._$focusOverlay=(0,p.Z)("<div>").addClass(this.addWidgetPrefix(t_))),i)this._$focusOverlay.addClass(Fo);else if(e.length){var a=ve.Z.mozilla?"right bottom":"left top",r=e.closest(".".concat(this.addWidgetPrefix("content"))),n=(0,se.l)(e.get(0));this._$focusOverlay.removeClass(Fo).appendTo(r),(0,I.qt)(this._$focusOverlay,n.bottom-n.top+1),(0,I.Ns)(this._$focusOverlay,n.right-n.left+1);var s={precise:!0,my:a,at:a,of:e,boundary:r.length&&r};this._updateFocusOverlaySize(this._$focusOverlay,s),$t.Z.setup(this._$focusOverlay,s),this._$focusOverlay.css("visibility","visible")}}resize(){var e=this._$focusedElement;e&&this.focus(e)}loseFocus(){this._$focusedElement&&this._$focusedElement.removeClass(Po),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.addClass(Fo)}init(){this.createAction("onEditorPreparing",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onEditorPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this._updateFocusHandler=this._updateFocusHandler||this.createAction(this._updateFocus.bind(this)),this._subscribedContainerRoot=this._getContainerRoot(),S.Z.on(this._subscribedContainerRoot,a_,this._updateFocusHandler),this._attachContainerEventHandlers()}_getContainerRoot(){var e,i=null===(e=this.component)||void 0===e?void 0:e.$element(),a=Y.Z.getRootNode(i?.get(0));return a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||a.host?a:Y.Z.getDocument()}_attachContainerEventHandlers(){var e=this,i=e.component&&e.component.$element();i&&S.Z.on(i,(0,D.V4)("keydown",i_),a=>{"tab"===(0,D.EV)(a)&&e._updateFocusHandler(a)})}dispose(){clearTimeout(this._focusTimeoutID),clearTimeout(this._updateFocusTimeoutID),S.Z.off(this._subscribedContainerRoot,a_,this._updateFocusHandler)}}}};$.registerModule("editorFactory",jD);var hn=(0,Z.Jj)(),qD={text:"OK",onClick:function(){return!0}},_i="dx-dialog",XD="".concat(_i,"-wrapper"),JD="".concat(_i,"-root"),QD="".concat(_i,"-content"),eO="".concat(_i,"-message"),tO="".concat(_i,"-buttons"),iO="".concat(_i,"-button"),r_="dx-button",Mo=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0;return function(t){var e,i=new b.BH;t=t||{};var a=(0,p.Z)("<div>").addClass(_i).appendTo((0,ya.S3)()),n="messageHtml"in t;"message"in t&&ee.Z.log("W1013");var s=String(n?t.messageHtml:t.message),o=(0,p.Z)("<div>").addClass(eO).html(s),l=[];(0,y.S6)(t.buttons||[qD],function(){var h=new Wu.Z(this.onClick,{context:d});l.push({toolbar:"bottom",location:K.Z.current().android?"after":"center",widget:"dxButton",options:(0,C.l)({},this,{onClick:function(){u(h.execute(...arguments))}})})});var d=new gt(a,(0,C.l)({title:null!==(e=t.title)&&void 0!==e?e:"",showTitle:(0,E.IS)(t.showTitle,!0),dragEnabled:(0,E.IS)(t.dragEnabled,!0),height:"auto",width:t.width,showCloseButton:t.showCloseButton||!1,ignoreChildEvents:!1,container:a,visualContainer:hn,dragAndResizeArea:hn,onContentReady:function(h){h.component.$content().addClass(QD).append(o)},onShowing:function(h){h.component.bottomToolbar().addClass(tO).find(".".concat(r_)).addClass(iO),(0,st.M3)()},onShown:function(h){var c=h.component.bottomToolbar().find(".".concat(r_)).first();S.Z.trigger(c,"focus")},onHiding:function(){i.reject()},onHidden:function(h){var{element:c}=h;(0,p.Z)(c).remove()},toolbarItems:l,animation:{show:{type:"pop",duration:400},hide:{type:"pop",duration:400,to:{opacity:0,scale:0},from:{opacity:1,scale:1}}},rtlEnabled:(0,hr.Z)().rtlEnabled,position:{boundaryOffset:{h:10,v:0}}},t.popupOptions));function u(h){i.resolve(h),d.hide()}return d.$wrapper().addClass(XD),t.position&&d.option("position",t.position),d.$wrapper().addClass(JD),{show:function(){if("phone"===K.Z.real().deviceType){var h=(0,I.Cr)(hn)>(0,I.dz)(hn);d.option({width:h?"90%":"60%"})}return d.show(),i.promise()},hide:u}}((0,v.PO)(t)?t:{title:e,messageHtml:t,showTitle:i,buttons:[{text:A.Z.format("Yes"),onClick:function(){return!0}},{text:A.Z.format("No"),onClick:function(){return!1}}],dragEnabled:i}).show()},cn="dx-editor-cell",Yt="dx-row",s_="dx-selection",pn="edit-form",St="insert",Bt="remove",_n="editing.popup",ko="editing.form",qe="editing.editRowKey",vi="editing.editColumnName",o_="targetComponent",l_="input:not([type='hidden'])",No="[tabindex]:not([disabled]), ".concat(l_,":not([disabled])"),ji="batch",jt="row",ka="cell",qi="form",Ho="popup",vn="last",u_="pageBottom",Zo="pageTop",h_="viewportBottom",c_="viewportTop",rO=[ji,jt,ka,qi,Ho],nO=[jt,qi,Ho],sO=[ji,jt,ka],oO=[jt,qi],p_="dx-command-edit",__="".concat(p_,"-with-icons"),qt="__DX_INSERT_INDEX__",v_="dx-cell-modified",Na="update",mO={save:"dx-link-save",cancel:"dx-link-cancel",edit:"dx-link-edit",undelete:"dx-link-undelete",delete:"dx-link-delete",add:"dx-link-add"},CO={save:"save",cancel:"revert",edit:"edit",undelete:"revert",delete:"trash",add:"add"},SO={edit:"editRow",delete:"deleteRow",undelete:"undeleteRow",save:"saveEditData",cancel:"cancelEditData",add:"addRowByRowIndex"},xO={add:"allowAdding",edit:"allowUpdating",delete:"allowDeleting"},bO=["edit","save","cancel","delete","undelete"],Lt="editing.changes",g_="edit-form-item",RO=_t.IS_RENOVATED_WIDGET?"dx-scrollable":"dx-scrollable-container",f_="dx-edit-row",$o="_DX_KEY_",Ha=function(t){return function(e){var i=e instanceof Error?e:new Error(e&&String(e)||"Unknown error");t.reject(i)}},m_=function(t,e){return e.isEditing||t&&e.column.allowEditing},C_=function(t,e){var i=!!e.column.command,a=m_(t,e);return"data"===e.rowType&&!i&&(a||e.column.showEditorAlways)},Xi=(t,e)=>{var i=-1;return t.some((a,r)=>{if(S_(a)===e)return i=r,!0}),i};function S_(t){return(0,v.Kn)(t)?t.name:t}var x_=(t,e)=>{t.forEach(i=>{i.items||i.tabs?x_(i.items||i.tabs,e):e(i)})},ZO={defaultOptions:()=>({editing:{mode:"row",refreshMode:"full",newRowPosition:c_,allowAdding:!1,allowUpdating:!1,allowDeleting:!1,useIcons:!1,selectTextOnEditStart:!1,confirmDelete:!0,texts:{editRow:A.Z.format("dxDataGrid-editingEditRow"),saveAllChanges:A.Z.format("dxDataGrid-editingSaveAllChanges"),saveRowChanges:A.Z.format("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:A.Z.format("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:A.Z.format("dxDataGrid-editingCancelRowChanges"),addRow:A.Z.format("dxDataGrid-editingAddRow"),deleteRow:A.Z.format("dxDataGrid-editingDeleteRow"),undeleteRow:A.Z.format("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:A.Z.format("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:""},form:{colCount:2},popup:{},startEditAction:"click",editRowKey:null,editColumnName:null,changes:[]},useLegacyColumnButtonTemplate:!1}),controllers:{editing:class HO extends ne.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._rowsView=this.getView("rowsView"),this._lastOperation=null,this._changes=[],this._deferreds&&this._deferreds.forEach(e=>e.reject("cancel")),this._deferreds=[],this._dataChangedHandler||(this._dataChangedHandler=this._handleDataChanged.bind(this),this._dataController.changed.add(this._dataChangedHandler)),this._saveEditorHandler||(this.createAction("onInitNewRow",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserting",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserted",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditingStart",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdating",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdated",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceling",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceled",{excludeValidators:["disabled","readOnly"]})),this._updateEditColumn(),this._updateEditButtons(),this._internalState||(this._internalState=[]),this.component._optionsByReference[qe]=!0,this.component._optionsByReference[Lt]=!0}getEditMode(){var e=this.option("editing.mode");return rO.includes(e)?e:jt}_getDefaultEditorTemplate(){return(e,i)=>{var a=(0,p.Z)("<div>").appendTo(e),r=(0,C.l)({},i.column,{value:i.value,setValue:i.setValue,row:i.row,parentType:"dataRow",width:null,readOnly:!i.setValue,isOnForm:i.isOnForm,id:i.id});sO.includes(this.getEditMode())&&(r["aria-labelledby"]=i.column.headerId),this.getController("editorFactory").createEditor(a,r)}}_getNewRowPosition(){var e=this.option("editing.newRowPosition");if("virtual"===this.option("scrolling.mode"))switch(e){case Zo:return c_;case u_:return h_;default:return e}return e}getChanges(){return this.option(Lt)}getInsertRowCount(){return this.option(Lt).filter(i=>"insert"===i.type).length}resetChanges(){var e=this.getChanges(),i=e?.length;i&&this._silentOption(Lt,[])}_getInternalData(e){return this._internalState.filter(i=>(0,E.bY)(i.key,e))[0]}_addInternalData(e){var i=this._getInternalData(e.key);return i?(0,C.l)(i,e):(this._internalState.push(e),e)}_getOldData(e){var i;return null===(i=this._getInternalData(e))||void 0===i?void 0:i.oldData}getUpdatedData(e){var i=this._dataController.keyOf(e),a=this.getChanges(),r=V.getIndexByKey(i,a);return a[r]?(0,Fe.FL)(e,a[r].data):e}getInsertedData(){return this.getChanges().filter(e=>e.data&&e.type===St).map(e=>e.data)}getRemovedData(){return this.getChanges().filter(e=>this._getOldData(e.key)&&e.type===Bt).map(e=>this._getOldData(e.key))}_fireDataErrorOccurred(e){if("cancel"!==e){var i=this.getPopupContent();this._dataController.dataErrorOccurred.fire(e,i)}}_needToCloseEditableCell(e){}_closeEditItem(e){}_handleDataChanged(e){}_isDefaultButtonVisible(e,i){var a=!0;switch(e.name){case"delete":a=this.allowDeleting(i);break;case"undelete":a=!1}return a}_isButtonVisible(e,i){var{visible:a}=e;return(0,v.$K)(a)?(0,v.mf)(a)?a.call(e,{component:i.component,row:i.row,column:i.column}):a:this._isDefaultButtonVisible(e,i)}_isButtonDisabled(e,i){var{disabled:a}=e;return(0,v.mf)(a)?a.call(e,{component:i.component,row:i.row,column:i.column}):!!a}_getButtonConfig(e,i){var a=(0,v.Kn)(e)?e:{},r=S_(e),n=(t=>{var e=t.component.option("editing.texts")||{};return{save:e.saveRowChanges,cancel:e.cancelRowChanges,edit:e.editRow,undelete:e.undeleteRow,delete:e.deleteRow,add:e.addRowToNode}})(i),s=SO[r],o=this.option("editing"),l=xO[r],d=!l||o[l];return(0,C.l)({name:r,text:n[r],cssClass:mO[r]},{onClick:s&&(u=>{var{event:h}=u;h.stopPropagation(),h.preventDefault(),setTimeout(()=>{i.row&&d&&this[s]&&this[s](i.row.rowIndex)})})},a)}_getEditingButtons(e){var i,a=!!e.column.buttons,r=(e.column.buttons||[]).slice();return a?((i=Xi(r,"edit"))>=0&&(Xi(r,"save")<0&&r.splice(i+1,0,"save"),Xi(r,"cancel")<0&&r.splice(Xi(r,"save")+1,0,"cancel")),(i=Xi(r,"delete"))>=0&&Xi(r,"undelete")<0&&r.splice(i+1,0,"undelete")):r=bO.slice(),r.map(n=>this._getButtonConfig(n,e))}_renderEditingButtons(e,i,a,r){i.forEach(n=>{this._isButtonVisible(n,a)&&this._createButton(e,n,a,r)})}_getEditCommandCellTemplate(){return(e,i,a)=>{var r=(0,p.Z)(e);if("data"===i.rowType){var n=this._getEditingButtons(i);this._renderEditingButtons(r,n,i,a),i.watch&&i.watch(()=>n.map(s=>({visible:this._isButtonVisible(s,i),disabled:this._isButtonDisabled(s,i)})),()=>{r.empty(),this._renderEditingButtons(r,n,i)})}else V.setEmptyText(r)}}isRowBasedEditMode(){var e=this.getEditMode();return nO.includes(e)}getFirstEditableColumnIndex(){var i,a=this.getController("columns").getVisibleColumns();return(0,y.S6)(a,(r,n)=>{if(n.allowEditing)return i=r,!1}),i}getFirstEditableCellInRow(e){var i=this.getView("rowsView"),a=this.getFirstEditableColumnIndex();return i?._getCellElement(e||0,a)}getFocusedCellInRow(e){return this.getFirstEditableCellInRow(e)}getIndexByKey(e,i){return V.getIndexByKey(e,i)}hasChanges(e){for(var i=this.getChanges(),a=!1,r=0;r<i?.length;r++)if(i[r].type&&(!(0,v.$K)(e)||this._dataController.getRowIndexByKey(i[r].key)===e)){a=!0;break}return a}dispose(){super.dispose(),clearTimeout(this._inputFocusTimeoutID),S.Z.off(Y.Z.getDocument(),re.Z.up,this._pointerUpEditorHandler),S.Z.off(Y.Z.getDocument(),re.Z.down,this._pointerDownEditorHandler),S.Z.off(Y.Z.getDocument(),ie.u,this._saveEditorHandler)}_silentOption(e,i){"editing.changes"===e&&(this._changes=(0,dt.HR)([],i)),super._silentOption(e,i)}optionChanged(e){if("editing"===e.name){var{fullName:i}=e;i===qe?this._handleEditRowKeyChange(e):i===Lt?(0,E.bY)(e.value,this._changes,{maxDepth:4})||(this._changes=(0,dt.HR)([],e.value),this._handleChangesChange(e)):e.handled||(this._columnsController.reinit(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey()),e.handled=!0}else super.optionChanged(e)}_handleEditRowKeyChange(e){var i=this._dataController.getRowIndexByKey(e.value),a=this._getEditRowIndexCorrection(),r=this._dataController.getRowIndexByKey(e.previousValue)+a;(0,v.$K)(e.value)?e.value!==e.previousValue&&this._editRowFromOptionChanged(i,r):this.cancelEditData()}_handleChangesChange(e){var i=this._dataController;!e.value.length&&!e.previousValue.length||(e.value.forEach(r=>{var n;if("insert"===r.type)this._addInsertInfo(r);else{var s=i.getCachedStoreData()||(null===(n=i.items())||void 0===n?void 0:n.map(l=>l.data)),o=V.getIndexByKey(r.key,s,i.key());this._addInternalData({key:r.key,oldData:s[o]})}}),i.updateItems({repaintChangesOnly:!0,isLiveUpdate:!1,isOptionChanged:!0}))}publicMethods(){return["addRow","deleteRow","undeleteRow","editRow","saveEditData","cancelEditData","hasEditData"]}refresh(){(0,v.$K)(this._pageIndex)&&this._refreshCore.apply(this,arguments)}_refreshCore(e){}isEditing(){return(0,v.$K)(this.option(qe))}isEditRow(e){return!1}_setEditRowKey(e,i){i?this._silentOption(qe,e):this.option(qe,e),this._refocusEditCell&&(this._refocusEditCell=!1,this._focusEditingCell())}_setEditRowKeyByIndex(e,i){var a=this._dataController.getKeyByRowIndex(e);void 0!==a?this._setEditRowKey(a,i):this._dataController.fireError("E1043")}getEditRowIndex(){return this._getVisibleEditRowIndex()}getEditFormRowIndex(){return-1}isEditRowByIndex(e){var i=this._dataController.getKeyByRowIndex(e);return(0,v.$K)(i)&&(0,E.bY)(this.option(qe),i)&&this._getVisibleEditRowIndex()===e}isEditCell(e,i){return this.isEditRowByIndex(e)&&this._getVisibleEditColumnIndex()===i}getPopupContent(){}_isProcessedItem(e){return!1}_getInsertRowIndex(e,i,a){var r=-1,n=this._dataController,s=this._getInsertAfterOrBeforeKey(i);return(0,v.$K)(s)||0!==e.length?(0,v.$K)(s)&&e.some((o,l)=>{var d=a||this._isProcessedItem(o);if((0,v.Kn)(o)&&(d||(0,v.$K)(o[qt])?(0,E.bY)(o.key,s)&&(r=l):(0,E.bY)(n.keyOf(o),s)&&(r=l)),r>=0){var u=e[r+1];return u&&("detail"===u.rowType||"detailAdaptive"===u.rowType)&&(0,v.$K)(i.insertAfterKey)?void 0:((0,v.$K)(i.insertAfterKey)&&(r+=1),!0)}}):r=0,r}_generateNewItem(e){var i,a={key:e},r=null===(i=this._getInternalData(e))||void 0===i?void 0:i.insertInfo;return r?.[qt]&&(a[qt]=r[qt]),a}_getLoadedRowIndex(e,i,a){var r=this._getInsertRowIndex(e,i,a),n=this._dataController;if(r<0){var s=this._getNewRowPosition(),o=n.pageIndex(),l=this._getInsertAfterOrBeforeKey(i);s===vn||0!==o||(0,v.$K)(l)?s===vn&&n.isLastPageLoaded()&&(r=e.length):r=0}return r}processItems(e,i){var{changeType:a}=i;return this.update(a),this.getChanges().forEach(n=>{var s;if(n.type===St){var{key:l}=n,d=null===(s=this._getInternalData(l))||void 0===s?void 0:s.insertInfo;(!(0,v.$K)(l)||!(0,v.$K)(d))&&(l=(d=this._addInsertInfo(n)).key);var u=this._getLoadedRowIndex(e,n),h=this._generateNewItem(l);u>=0&&e.splice(u,0,h)}}),e}processDataItem(e,i,a){var r=i.visibleColumns,n=e.data[qt]?e.data.key:e.key,s=this.getChanges(),o=V.getIndexByKey(n,s);e.isEditing=!1,o>=0&&this._processDataItemCore(e,s[o],n,r,a)}_processDataItemCore(e,i,a,r,n){var{data:s,type:o}=i;switch(o){case St:e.isNewRow=!0,e.key=a,e.data=s;break;case Na:e.modified=!0,e.oldData=e.data,e.data=(0,Fe.FL)(e.data,s),e.modifiedValues=n(s,r,!0);break;case Bt:e.removed=!0}}_initNewRow(e){if(this.executeAction("onInitNewRow",e),e.promise){var i=new b.BH;return(0,b.gx)((0,b.p4)(e.promise)).done(i.resolve).fail(Ha(i)).fail(a=>this._fireDataErrorOccurred(a)),i}}_createInsertInfo(){var e={};return e[qt]=this._getInsertIndex(),e}_addInsertInfo(e,i){var a,r;e.key=this.getChangeKeyValue(e);var{key:n}=e;if(r=null===(a=this._getInternalData(n))||void 0===a?void 0:a.insertInfo,!(0,v.$K)(r)){var s=this._getInsertAfterOrBeforeKey(e);r=this._createInsertInfo(),(0,v.$K)(s)||this._setInsertAfterOrBeforeKey(e,i)}return this._addInternalData({insertInfo:r,key:n}),{insertInfo:r,key:n}}getChangeKeyValue(e){if((0,v.$K)(e.key))return e.key;var a,i=this._dataController.key();return e.data&&i&&!Array.isArray(i)&&(a=e.data[i]),(0,v.$K)(a)||(a="".concat($o).concat(new Ee.Z)),a}_setInsertAfterOrBeforeKey(e,i){var a=this._dataController,r=a.items(!0),n=this.getView("rowsView"),s=this._getNewRowPosition();switch(s){case"first":case vn:break;case Zo:case u_:if(r.length){var o=s===Zo?0:r.length-1;e[0===o?"insertBeforeKey":"insertAfterKey"]=r[o].key}break;default:var d=s===h_?n?.getBottomVisibleItemIndex():n?.getTopVisibleItemIndex(),u=a.getVisibleRows()[d];u&&(!u.isEditing&&"detail"===u.rowType||"detailAdaptive"===u.rowType)&&d++;var h=a.getKeyByRowIndex(d);(0,v.$K)(h)&&(e.insertBeforeKey=h)}}_getInsertIndex(){var e=0;return this.getChanges().forEach(i=>{var a,r=null===(a=this._getInternalData(i.key))||void 0===a?void 0:a.insertInfo;(0,v.$K)(r)&&i.type===St&&r[qt]>e&&(e=r[qt])}),e+1}_getInsertAfterOrBeforeKey(e){var i;return null!==(i=e.insertAfterKey)&&void 0!==i?i:e.insertBeforeKey}_getPageIndexToInsertRow(){var e=this._getNewRowPosition(),i=this._dataController,a=i.pageIndex(),r=i.pageCount()-1;return"first"===e&&0!==a?0:e===vn&&a!==r?r:-1}addRow(e){var i=this._dataController;return i.store()?this._addRow(e):(i.fireError("E1052",this.component.NAME),(new b.BH).reject())}_addRow(e){var a=this._dataController.store(),r=a&&a.key(),n={data:{}},s=this._getVisibleEditRowIndex(),o=new b.BH;return this.refresh({allowCancelEditing:!0}),this._allowRowAdding()?(r||(n.data.__KEY__=String(new Ee.Z)),(0,b.gx)(this._initNewRow(n,e)).done(()=>{this._allowRowAdding()?(0,b.gx)(this._addRowCore(n.data,e,s)).done(o.resolve).fail(o.reject):o.reject("cancel")}).fail(o.reject),o.promise()):((0,b.gx)(this._navigateToNewRow(s)).done(o.resolve).fail(o.reject),o.promise())}_allowRowAdding(e){return!(this._getInsertIndex()>1)}_addRowCore(e,i,a){var r={data:e,type:St},n=this._getVisibleEditRowIndex(),s=this._addInsertInfo(r,i),{key:o}=s;return this._setEditRowKey(o,!0),this._addChange(r),this._navigateToNewRow(a,r,n)}_navigateToNewRow(e,i,a){var r=new b.BH,n=this._dataController,s=this.getController("focus");if(a=a??-1,!(i=i??this.getChanges().filter(h=>h.type===St)[0]))return r.reject("cancel").promise();var o=this._getPageIndexToInsertRow(),l=this._getLoadedRowIndex(n.items(),i,!0),d=h=>{(0,b.gx)(s?.navigateToRow(h)).done(()=>{l=n.getRowIndexByKey(i.key),r.resolve()})},u=this._getInsertAfterOrBeforeKey(i);return o>=0?n.pageIndex(o).done(()=>{d(i.key)}).fail(r.reject):l<0&&(0,v.$K)(u)?d(u):(n.updateItems({changeType:"update",rowIndices:[e,a,l]}),(l=n.getRowIndexByKey(i.key))<0?d(i.key):r.resolve()),r.done(()=>{var h;null===(h=this._rowsView)||void 0===h||h.waitAsyncTemplates(!0).done(()=>{this._showAddedRow(l),this._afterInsertRow(i.key)})}),r.promise()}_showAddedRow(e){this._focusFirstEditableCellInRow(e)}_beforeFocusElementInRow(e){}_focusFirstEditableCellInRow(e){var i=this._dataController,a=this.getController("keyboardNavigation"),r=i.getKeyByRowIndex(e),n=this.getFirstEditableCellInRow(e);a?.focus(n),this.option("focusedRowKey",r),this._editCellInProgress=!0,this._delayedInputFocus(n,()=>{e=i.getRowIndexByKey(r),this._editCellInProgress=!1,this._beforeFocusElementInRow(e)})}_isEditingStart(e){return this.executeAction("onEditingStart",e),e.cancel}_beforeUpdateItems(){}_getVisibleEditColumnIndex(){var e=this.option(vi);return(0,v.$K)(e)?this._columnsController.getVisibleColumnIndex(e):-1}_setEditColumnNameByIndex(e,i){var a,r=this._columnsController.getVisibleColumns();this._setEditColumnName(null===(a=r[e])||void 0===a?void 0:a.name,i)}_setEditColumnName(e,i){i?this._silentOption(vi,e):this.option(vi,e)}_resetEditColumnName(){this._setEditColumnName(null,!0)}_getEditColumn(){var e=this.option(vi);return this._getColumnByName(e)}_getColumnByName(e){var a,i=this._columnsController.getVisibleColumns();return(0,v.$K)(e)&&i.some(r=>{if(r.name===e)return a=r,!0}),a}_getVisibleEditRowIndex(e){var i=this._dataController,a=this.option(qe),r=i.getRowIndexByKey(a);return-1===r?r:r+this._getEditRowIndexCorrection(e)}_getEditRowIndexCorrection(e){var i=e?this._getColumnByName(e):this._getEditColumn();return"adaptiveHidden"===i?.visibleWidth?1:0}_resetEditRowKey(){this._refocusEditCell=!1,this._setEditRowKey(null,!0)}_resetEditIndices(){this._resetEditColumnName(),this._resetEditRowKey()}editRow(e){var i,a=this._dataController,n=a.items()[e],s={data:n&&n.data,cancel:!1},o=this._getVisibleEditRowIndex();if(n){if(e===o)return!0;if(void 0===n.key)return void this._dataController.fireError("E1043");n.isNewRow||(s.key=n.key),!this._isEditingStart(s)&&(this.resetChanges(),this.init(),this._resetEditColumnName(),this._pageIndex=a.pageIndex(),this._addInternalData({key:n.key,oldData:null!==(i=n.oldData)&&void 0!==i?i:n.data}),this._setEditRowKey(n.key))}}_editRowFromOptionChanged(e,i){var a=[i,e];this._beforeUpdateItems(a,e,i),this._editRowFromOptionChangedCore(a,e)}_editRowFromOptionChangedCore(e,i,a){this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:e,cancel:a})}_focusEditorIfNeed(){}_showEditPopup(e,i){}_repaintEditPopup(){}_getEditPopupHiddenHandler(){return e=>{this.isEditing()&&this.cancelEditData()}}_getPopupEditFormTemplate(e){}_getSaveButtonConfig(){return{text:this.option("editing.texts.saveRowChanges"),onClick:this.saveEditData.bind(this)}}_getCancelButtonConfig(){return{text:this.option("editing.texts.cancelRowChanges"),onClick:this.cancelEditData.bind(this)}}_removeInternalData(e){var i=this._getInternalData(e),a=this._internalState.indexOf(i);a>-1&&this._internalState.splice(a,1)}_updateInsertAfterOrBeforeKeys(e,i){var a=e[i];e.forEach(r=>{var n=this._getInsertAfterOrBeforeKey(r);(0,E.bY)(n,a.key)&&(r[(0,v.$K)(r.insertAfterKey)?"insertAfterKey":"insertBeforeKey"]=this._getInsertAfterOrBeforeKey(a))})}_removeChange(e){if(e>=0){var i=[...this.getChanges()],{key:a}=i[e];this._removeInternalData(a),this._updateInsertAfterOrBeforeKeys(i,e),i.splice(e,1),this._silentOption(Lt,i),(0,E.bY)(this.option(qe),a)&&this._resetEditIndices()}}executeOperation(e,i){this._lastOperation&&this._lastOperation.reject(),this._lastOperation=e,this.waitForDeferredOperations().done(()=>{"rejected"!==e.state()&&(i(),this._lastOperation=null)}).fail(()=>{e.reject(),this._lastOperation=null})}waitForDeferredOperations(){return(0,b.gx)(...this._deferreds)}_processCanceledEditingCell(){}_repaintEditCell(e,i,a){this._needFocusEditor=!0,!e||!e.showEditorAlways||i&&!i.showEditorAlways?(this._editCellInProgress=!0,this.getController("editorFactory").loseFocus(),this._dataController.updateItems({changeType:"update",rowIndices:[a,this._getVisibleEditRowIndex()]})):e!==i&&this._dataController.updateItems({changeType:"update",rowIndices:[]})}_delayedInputFocus(e,i,a){var r=()=>{if(i&&i(),e){var n=e.find(No).first();V.focusAndSelectElement(this,n)}this._beforeFocusCallback=null};K.Z.real().ios||K.Z.real().android?r():(this._beforeFocusCallback&&this._beforeFocusCallback(),clearTimeout(this._inputFocusTimeoutID),a&&(this._beforeFocusCallback=i),this._inputFocusTimeoutID=setTimeout(r))}_focusEditingCell(e,i,a){var r=this.getView("rowsView"),n=this._getVisibleEditColumnIndex();(i=i||r&&r._getCellElement(this._getVisibleEditRowIndex(),n))&&this._delayedInputFocus(i,e,a)}deleteRow(e){this._checkAndDeleteRow(e)}_checkAndDeleteRow(e){var i=this.option("editing"),a=i?.texts,r=i?.confirmDelete,n=a?.confirmDeleteMessage,s=this._dataController.items()[e],o=!this.isEditing()||s.isNewRow;if(s&&o)if(r&&n){var l=a&&a.confirmDeleteTitle,d=(0,v.$K)(l)&&l.length>0;Mo(n,l,d).done(u=>{u&&this._deleteRowCore(e)})}else this._deleteRowCore(e)}_deleteRowCore(e){var a=this._dataController.items()[e],r=a&&a.key,n=this._getVisibleEditRowIndex();this.refresh();var s=this.getChanges(),o=V.getIndexByKey(r,s);return o>=0?s[o].type===St?this._removeChange(o):this._addChange({key:r,type:Bt}):this._addChange({key:r,oldData:a.data,type:Bt}),this._afterDeleteRow(e,n)}_afterDeleteRow(e,i){return this.saveEditData()}undeleteRow(e){var i=this._dataController,a=i.items()[e],r=this._getVisibleEditRowIndex(),n=a&&a.key,s=this.getChanges();if(a){var o=V.getIndexByKey(n,s);if(o>=0){var{data:l}=s[o];(0,v.Qr)(l)?this._removeChange(o):this._addChange({key:n,type:Na}),i.updateItems({changeType:"update",rowIndices:[r,e]})}}}_fireOnSaving(){var e={cancel:!1,promise:null,changes:[...this.getChanges()]};this.executeAction("onSaving",e);var i=new b.BH;return(0,b.gx)((0,b.p4)(e.promise)).done(()=>{i.resolve(e)}).fail(a=>{Ha(i),this._fireDataErrorOccurred(a),i.resolve({cancel:!0})}),i}_executeEditingAction(e,i,a){if(this.component._disposed)return null;var r=new b.BH;return this.executeAction(e,i),(0,b.gx)((0,b.p4)(i.cancel)).done(n=>{n?setTimeout(()=>{r.resolve("cancel")}):a(i).done(r.resolve).fail(Ha(r))}).fail(Ha(r)),r}_processChanges(e,i,a,r){var n=this._dataController.store();(0,y.S6)(r,(s,o)=>{var c,_,l=this._getOldData(o.key),{data:d,type:u}=o,h=(0,M.Z)({},o);if(!this._beforeSaveEditData(o,s)){switch(u){case Bt:c=this._executeEditingAction("onRowRemoving",_={data:l,key:o.key,cancel:!1},()=>n.remove(o.key).done(f=>{a.push({type:"remove",key:f})}));break;case St:c=this._executeEditingAction("onRowInserting",_={data:d,cancel:!1},()=>n.insert(_.data).done((f,m)=>{(0,v.$K)(m)&&(h.key=m),f&&(0,v.Kn)(f)&&f!==_.data&&(h.data=f),a.push({type:"insert",data:f,index:0})}));break;case Na:c=this._executeEditingAction("onRowUpdating",_={newData:d,oldData:l,key:o.key,cancel:!1},()=>n.update(o.key,_.newData).done((f,m)=>{f&&(0,v.Kn)(f)&&f!==_.newData&&(h.data=f),a.push({type:"update",key:m,data:f})}))}if(r[s]=h,c){var g=new b.BH;c.always(f=>{i.push({key:o.key,result:f})}).always(g.resolve),e.push(g.promise())}}})}_processRemoveIfError(e,i){var a=e[i];return a?.type===Bt&&i>=0&&e.splice(i,1),!0}_processRemove(e,i,a){var r=e[i];if(!a||!r||r.type===Bt)return this._processRemoveCore(e,i,!a||!r)}_processRemoveCore(e,i,a){return i>=0&&e.splice(i,1),!0}_processSaveEditDataResult(e){for(var i=!1,a=[...this.getChanges()],r=a.length,n=0;n<e.length;n++){var s=e[n].result,o="cancel"===s,l=V.getIndexByKey(e[n].key,a),d=a[l];if(s&&s instanceof Error){if(d&&this._addInternalData({key:d.key,error:s}),this._fireDataErrorOccurred(s),this._processRemoveIfError(a,l))break}else this._processRemove(a,l,o)&&(i=!o)}return a.length<r&&this._silentOption(Lt,a),i}_fireSaveEditDataEvents(e){(0,y.S6)(e,(i,a)=>{var{data:r,key:n,type:s}=a,o=this._addInternalData({key:n}),l={key:n,data:r};switch(o.error&&(l.error=o.error),s){case Bt:this.executeAction("onRowRemoved",(0,C.l)({},l,{data:o.oldData}));break;case St:this.executeAction("onRowInserted",l);break;case Na:this.executeAction("onRowUpdated",l)}}),this.executeAction("onSaved",{changes:e})}saveEditData(){var e=new b.BH;return this.waitForDeferredOperations().done(()=>{this.isSaving()?this._resolveAfterSave(e):(0,b.gx)(this._beforeSaveEditData()).done(i=>{i?this._resolveAfterSave(e,{cancel:i}):(this._saving=!0,this._saveEditDataInner().always(()=>{this._saving=!1,this._refocusEditCell&&this._focusEditingCell()}).done(e.resolve).fail(e.reject))}).fail(e.reject)}).fail(e.reject),e.promise()}_resolveAfterSave(e){var{cancel:i,error:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,b.gx)(this._afterSaveEditData(i)).done(()=>{e.resolve(a)}).fail(e.reject)}_saveEditDataInner(){var e=new b.BH,i=[],a=[],r=[],n=this._dataController.dataSource();return(0,b.gx)(this._fireOnSaving()).done(s=>{var{cancel:o,changes:l}=s;return o?e.resolve().promise():(this._processChanges(a,i,r,l),a.length?(this._refocusEditCell=!0,n?.beginLoading(),(0,b.gx)(...a).done(()=>{this._processSaveEditDataResult(i)?this._endSaving(r,l,e):(n?.endLoading(),e.resolve())}).fail(d=>{n?.endLoading(),e.resolve(d)}),e.always(()=>{this._refocusEditCell=!0}).promise()):void this._cancelSaving(e))}).fail(e.reject),e.promise()}_beforeEndSaving(e){this._resetEditIndices()}_endSaving(e,i,a){var r=this._dataController.dataSource();this._beforeEndSaving(i),r?.endLoading(),this._refreshDataAfterSave(e,i,a)}_cancelSaving(e){this.executeAction("onSaved",{changes:[]}),this._resolveAfterSave(e)}_refreshDataAfterSave(e,i,a){var r=this._dataController,n=this.option("editing.refreshMode"),s="reshape"!==n&&"repaint"!==n;s||r.push(e),(0,b.gx)(r.refresh({selection:s,reload:s,load:"reshape"===n,changesOnly:this.option("repaintChangesOnly")})).always(()=>{this._fireSaveEditDataEvents(i)}).done(()=>{this._resolveAfterSave(a)}).fail(o=>{this._resolveAfterSave(a,{error:o})})}isSaving(){return this._saving}_updateEditColumn(){var e=this._isEditColumnVisible(),i=this.option("editing.useIcons"),a=p_+(i?" ".concat(__):"");this._columnsController.addCommandColumn({type:"buttons",command:"edit",visible:e,cssClass:a,width:"auto",alignment:"center",cellTemplate:this._getEditCommandCellTemplate(),fixedPosition:"right"}),this._columnsController.columnOption("command:edit",{visible:e,cssClass:a})}_isEditColumnVisible(){return this.option("editing").allowDeleting}_isEditButtonDisabled(){var e=this.hasChanges();return!((0,v.$K)(this.option("editing.editRowKey"))||e)}_updateEditButtons(){var e=this.getView("headerPanel"),i=this._isEditButtonDisabled();e&&(e.setToolbarItemDisabled("saveButton",i),e.setToolbarItemDisabled("revertButton",i))}_applyModified(e,i){e&&e.addClass(v_)}_beforeCloseEditCellInBatchMode(e){}cancelEditData(){var e=this.getChanges(),i={cancel:!1,changes:e};this.executeAction("onEditCanceling",i),i.cancel||(this._cancelEditDataCore(),this.executeAction("onEditCanceled",{changes:e}))}_cancelEditDataCore(){var e=this._getVisibleEditRowIndex();this._beforeCancelEditData(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey(),this._afterCancelEditData(e)}_afterCancelEditData(e){this._dataController.updateItems({repaintChangesOnly:this.option("repaintChangesOnly")})}_hideEditPopup(){}hasEditData(){return this.hasChanges()}update(e){var i=this._dataController;i&&this._pageIndex!==i.pageIndex()&&("refresh"===e&&this.refresh({isPageChanged:!0}),this._pageIndex=i.pageIndex()),this._updateEditButtons()}_getRowIndicesForCascadeUpdating(e,i){return i?[]:[e.rowIndex]}addDeferred(e){this._deferreds.indexOf(e)<0&&(this._deferreds.push(e),e.always(()=>{var i=this._deferreds.indexOf(e);i>=0&&this._deferreds.splice(i,1)}))}_prepareChange(e,i,a){var r,n={},s=null===(r=e.row)||void 0===r?void 0:r.data,o=e.key,l=new b.BH;return void 0!==o&&(e.value=i,(0,b.p4)(e.column.setCellValue(n,i,(0,C.l)(!0,{},s),a)).done(()=>{l.resolve({data:n,key:o,oldData:s,type:Na})}).fail(Ha(l)).fail(u=>this._fireDataErrorOccurred(u)),(0,v.$K)(a)&&e.column.displayValueMap&&(e.column.displayValueMap[i]=a),this._updateRowValues(e),this.addDeferred(l)),l}_updateRowValues(e){if(e.values){var i=this._dataController,a=i.getRowIndexByKey(e.key),r=i.getVisibleRows()[a];r&&(e.row.values=r.values,e.values=r.values),e.values[e.columnIndex]=e.value}}updateFieldValue(e,i,a,r){var n=e.key,s=new b.BH;return void 0===n&&this._dataController.fireError("E1043"),e.column.setCellValue?this._prepareChange(e,i,a).done(o=>{(0,b.gx)(this._applyChange(e,o,r)).always(()=>{s.resolve()})}):s.resolve(),s.promise()}_focusPreviousEditingCellIfNeed(e){if(this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex))return this._focusEditingCell(),this._updateEditRow(e.row,!0),!0}_needUpdateRow(e){var i=this._columnsController.getVisibleColumns();e||(e=this._getEditColumn());var a=e&&e.setCellValue!==e.defaultSetCellValue,r=i.some(n=>n.calculateCellValue!==n.defaultCalculateCellValue);return a||r}_applyChange(e,i,a){var r=(0,M.Z)((0,M.Z)({},e),{forceUpdateRow:a});return this._addChange(i,r),this._updateEditButtons(),this._applyChangeCore(e,r.forceUpdateRow)}_applyChangeCore(e,i){var a=e.column.setCellValue!==e.column.defaultSetCellValue,{row:r}=e;r&&(i||a?this._updateEditRow(r,i,a):r.update&&r.update())}_updateEditRowCore(e,i,a){this._dataController.updateItems({changeType:"update",rowIndices:this._getRowIndicesForCascadeUpdating(e,i)})}_updateEditRow(e,i,a){i?this._updateRowImmediately(e,i,a):this._updateRowWithDelay(e,a)}_updateRowImmediately(e,i,a){this._updateEditRowCore(e,!i,a),this._validateEditFormAfterUpdate(e,a),i||this._focusEditingCell()}_updateRowWithDelay(e,i){var a=new b.BH;this.addDeferred(a),setTimeout(()=>{var r,n=(null===(r=this._editForm)||void 0===r?void 0:r.element())||this.component.$element().get(0),s=(0,p.Z)(Y.Z.getActiveElement(n)),o=this._rowsView.getCellIndex(s,e.rowIndex),l=s.get(0),d=V.getSelectionRange(l);if(this._updateEditRowCore(e,!1,i),this._validateEditFormAfterUpdate(e,i),o>=0){var u=this._rowsView._getCellElement(e.rowIndex,o);this._delayedInputFocus(u,()=>{setTimeout(()=>{var h;l=Y.Z.getActiveElement(null===(h=this.component.$element())||void 0===h?void 0:h.get(0)),d.selectionStart>=0&&V.setSelectionRange(l,d)})})}a.resolve()})}_validateEditFormAfterUpdate(){}_addChange(e,i){var a,r=i?.row,n=[...this.getChanges()],s=V.getIndexByKey(e.key,n);s<0&&(s=n.length,this._addInternalData({key:e.key,oldData:e.oldData}),delete e.oldData,n.push(e));var o=(0,M.Z)({},n[s]);return o&&(e.data&&(o.data=(0,Fe.FL)(o.data,e.data)),(!o.type||!e.data)&&e.type&&(o.type=e.type),r&&(r.oldData=this._getOldData(r.key),r.data=(0,Fe.FL)(r.data,e.data))),n[s]=o,this._silentOption(Lt,n),i&&o!==(null===(a=this.getChanges())||void 0===a?void 0:a[s])&&(i.forceUpdateRow=!0),o}_getFormEditItemTemplate(e,i){return i.editCellTemplate||this._getDefaultEditorTemplate()}getColumnTemplate(e){var r,l,{column:i}=e,a=e.row&&e.row.rowIndex,n=this.isRowBasedEditMode(),s=this.isEditRow(a),o=this.isEditCell(a,e.columnIndex);return!(i.showEditorAlways||i.setCellValue&&(s&&i.allowEditing||o))||"data"!==e.rowType&&"detailAdaptive"!==e.rowType||i.command?"detail"===i.command&&"detail"===e.rowType&&s&&(r=null==this?void 0:this.getEditFormTemplate(e)):(((this.allowUpdating(e)||s)&&i.allowEditing||o)&&(s||!n)&&(i.showEditorAlways&&!n&&this._isEditingStart(l={cancel:!1,key:e.row.isNewRow?void 0:e.row.key,data:e.row.data,column:i}),(!l||!l.cancel)&&(e.setValue=(u,h)=>{this.updateFieldValue(e,u,h)})),r=i.editCellTemplate||this._getDefaultEditorTemplate()),r}_createButton(e,i,a,r){var n=CO[i.name],s=this.option("editing.useIcons"),o=this.option("useLegacyColumnButtonTemplate"),l=(0,p.Z)("<a>").attr("href","#").addClass("dx-link").addClass(i.cssClass);if(i.template&&o)this._rowsView.renderTemplate(e,i.template,a,!0);else{if(i.template)l=(0,p.Z)("<span>").addClass(i.cssClass);else if(s&&n||i.icon){var d=vt.P(n=i.icon||n);"image"===d||"svg"===d?l=vt.H(n).addClass(i.cssClass):l.addClass("dx-icon".concat("dxIcon"===d?"-":" ").concat(n)).attr("title",i.text),l.addClass("dx-link-icon"),e.addClass(__);var u=this.getButtonLocalizationNames()[i.name];u&&l.attr("aria-label",A.Z.format(u))}else l.text(i.text);(0,v.$K)(i.hint)&&l.attr("title",i.hint),this._isButtonDisabled(i,a)?l.addClass("dx-state-disabled"):(!i.template||i.onClick)&&S.Z.on(l,(0,D.V4)("click","dxDataGridEditing"),this.createAction(h=>{var c;null===(c=i.onClick)||void 0===c||c.call(i,(0,C.l)({},h,{row:a.row,column:a.column})),h.event.preventDefault(),h.event.stopPropagation()})),e.append(l,"&nbsp;"),i.template&&(a.renderAsync=!1,this._rowsView.renderTemplate(l,i.template,a,!0,r))}}getButtonLocalizationNames(){return{edit:"dxDataGrid-editingEditRow",save:"dxDataGrid-editingSaveRowChanges",delete:"dxDataGrid-editingDeleteRow",undelete:"dxDataGrid-editingUndeleteRow",cancel:"dxDataGrid-editingCancelRowChanges"}}prepareButtonItem(e,i,a,r){var n,s=null!==(n=this.option("editing.texts"))&&void 0!==n?n:{},l={revert:"cancel",save:"save",addRow:"addrow"}[i],d={revert:s.cancelAllChanges,save:s.saveAllChanges,addRow:s.addRow}[i],u=("save"===l||"cancel"===l)&&this._isEditButtonDisabled();return{widget:"dxButton",options:{onInitialized:h=>{(0,p.Z)(h.element).addClass(e._getToolbarButtonClass("".concat("dx-edit-button"," ").concat(this.addWidgetPrefix(l),"-button")))},icon:"edit-button-".concat(l),disabled:u,onClick:()=>{setTimeout(()=>{this[a]()})},text:d,hint:d},showText:"inMenu",name:"".concat(i,"Button"),location:"after",locateInMenu:"auto",sortIndex:r}}prepareEditButtons(e){var i,r=[];return(null!==(i=this.option("editing"))&&void 0!==i?i:{}).allowAdding&&r.push(this.prepareButtonItem(e,"addRow","addRow",20)),r}highlightDataCell(e,i){this.shouldHighlightCell(i)&&e.addClass(v_)}_afterInsertRow(){}_beforeSaveEditData(e){if(e&&!(0,v.$K)(e.key)&&(0,v.$K)(e.type))return!0}_afterSaveEditData(){}_beforeCancelEditData(){}_allowEditAction(e,i){var a=this.option("editing.".concat(e));return(0,v.mf)(a)&&(a=a({component:this.component,row:i.row})),a}allowUpdating(e,i){var a,r=null!==(a=this.option("editing.startEditAction"))&&void 0!==a?a:"click";return(!(arguments.length>1)||r===i||"down"===i)&&this._allowEditAction("allowUpdating",e)}allowDeleting(e){return this._allowEditAction("allowDeleting",e)}isCellModified(e){var{columnIndex:i}=e,a=e.row&&(e.row.isNewRow?e.row.values:e.row.modifiedValues);return!!a&&void 0!==a[i]}isNewRowInEditMode(){var e=this._getVisibleEditRowIndex(),i=this._dataController.items();return e>=0&&i[e].isNewRow}_isRowDeleteAllowed(){}shouldHighlightCell(e){return this.isCellModified(e)&&e.column.setCellValue&&(this.getEditMode()!==jt||!e.row.isEditing)}}},extenders:{controllers:{data:{init(){this._editingController=this.getController("editing"),this.callBase()},reload(t,e){return!e&&this._editingController.refresh(),this.callBase.apply(this,arguments)},repaintRows(){if(!this.getController("editing").isSaving())return this.callBase.apply(this,arguments)},_updateEditRow(t){var e,i=this.option(qe),r=t[V.getIndexByKey(i,t)];r&&(r.isEditing=!0,null===(e=this._updateEditItem)||void 0===e||e.call(this,r))},_updateItemsCore(t){this.callBase(t),this._updateEditRow(this.items(!0))},_applyChangeUpdate(t){this._updateEditRow(t.items),this.callBase(t)},_applyChangesOnly(t){this._updateEditRow(t.items),this.callBase(t)},_processItems(t,e){return t=this._editingController.processItems(t,e),this.callBase(t,e)},_processDataItem(t,e){return this._editingController.processDataItem(t,e,this.generateDataValues),this.callBase(t,e)},_processItem(t,e){return(t=this.callBase(t,e)).isNewRow&&(e.dataIndex--,delete t.dataIndex),t},_getChangedColumnIndices(t,e,i,a){if(t.isNewRow===e.isNewRow&&t.removed===e.removed)return this.callBase.apply(this,arguments)},_isCellChanged(t,e,i,a,r){var n=this.getController("editing"),s=t.cells&&t.cells[a],o=n&&n.isEditCell(i,a);return(!r||!o)&&(!(!s||!s.column||s.column.showEditorAlways||s.isEditing===o)||this.callBase.apply(this,arguments))},needToRefreshOnDataSourceChange(t){var e=this.getController("editing");return!(Array.isArray(t.value)&&t.value===t.previousValue&&e.isSaving())},_handleDataSourceChange(t){var e=this.callBase(t),i=this.option("editing.changes"),a=t.value;if(Array.isArray(a)&&i.length){var r=a.map(l=>this.keyOf(l)),n=i.filter(l=>"insert"===l.type||r.some(d=>(0,E.bY)(l.key,d)));n.length!==i.length&&this.option("editing.changes",n);var s=this.option("editing.editRowKey");!n.some(l=>"insert"===l.type&&(0,E.bY)(s,l.key))&&r.every(l=>!(0,E.bY)(s,l))&&this.option("editing.editRowKey",null)}return e}}},views:{rowsView:{init(){this.callBase(),this._editingController=this.getController("editing")},getCellIndex(t,e){if(!t.is("td")&&e>=0){var i=this.getCellElements(e),a=-1;return(0,y.S6)(i,(r,n)=>{(0,p.Z)(n).find(t).length&&(a=r)}),a}return this.callBase.apply(this,arguments)},publicMethods(){return this.callBase().concat(["cellValue"])},_getCellTemplate(t){return this._editingController.getColumnTemplate(t)||this.callBase(t)},_createRow(t){var e=this.callBase.apply(this,arguments);if(t){var i=!!t.removed,a=!!t.isNewRow,r=!!t.modified;a&&e.addClass("dx-row-inserted"),r&&e.addClass("dx-row-modified"),(a||i)&&e.removeClass("dx-selection")}return e},_getColumnIndexByElement(t){for(var e=t.closest("table"),i=this.getTableElements();e.length&&!i.filter(e).length;)t=e.closest("td"),e=t.closest("table");return this._getColumnIndexByElementCore(t)},_getColumnIndexByElementCore(t){var e=t.closest(".".concat(Yt,"> td:not(.dx-master-detail-cell)"));return this.getCellIndex(e)},_editCellByClick(t,e){var i=this._editingController,a=(0,p.Z)(t.event.target),r=this._getColumnIndexByElement(a),n=this._dataController.items()[t.rowIndex],s=i.allowUpdating({row:n},e)||n&&n.isNewRow,o=this._columnsController.getVisibleColumns()[r],l=i.isEditCell(t.rowIndex,r),d=s&&o&&(o.allowEditing||l),u=this.option("editing.startEditAction")||"click",h=o&&o.showEditorAlways;if(l)return!0;if("down"===e)return(K.Z.real().ios||K.Z.real().android)&&(0,st.M3)(),h&&d&&i.editCell(t.rowIndex,r);if("click"===e&&"dblClick"===u){var c=n?.isNewRow;i.closeEditCell(!1,c)}return d&&e===u?i.editCell(t.rowIndex,r)||i.isEditRow(t.rowIndex):void 0},_rowPointerDown(t){this._pointerDownTimeout=setTimeout(()=>{this._editCellByClick(t,"down")})},_rowClick(t){var e=(0,p.Z)(t.rowElement).hasClass(this.addWidgetPrefix(pn));t.event[o_]=this.component,!this._editCellByClick(t,"click")&&!e&&this.callBase.apply(this,arguments)},_rowDblClick(t){this._editCellByClick(t,"dblClick")||this.callBase.apply(this,arguments)},_cellPrepared(t,e){var i,a=this._editingController,r=!!e.column.command,n=e.setValue,s=a.isEditRow(e.rowIndex),o=m_(s,e);if(C_(s,e)){var{alignment:l}=e.column;t.toggleClass(this.addWidgetPrefix("readonly"),!n).toggleClass("dx-cell-focus-disabled",!n),l&&t.find(l_).first().css("textAlign",l)}o&&this._editCellPrepared(t);var d=!(null===(i=e.column)||void 0===i||!i.cellTemplate);e.column&&!r&&(!d||a.shouldHighlightCell(e))&&a.highlightDataCell(t,e),this.callBase.apply(this,arguments)},_editCellPrepared:E.ZT,_formItemPrepared:E.ZT,_getCellOptions(t){var e=this.callBase(t);return e.isEditing=this._editingController.isEditCell(e.rowIndex,e.columnIndex),e},_createCell(t){var e=this.callBase(t),i=this._editingController.isEditRow(t.rowIndex);return C_(i,t)&&e.addClass(cn),e},cellValue(t,e,i,a){var r=this.getCellOptions(t,e);if(r){if(void 0===i)return r.value;this._editingController.updateFieldValue(r,i,a,!0)}},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._pointerDownTimeout)},_renderCore(){return this.callBase.apply(this,arguments),this.waitAsyncTemplates(!0).done(()=>{this._editingController._focusEditorIfNeed()})}},headerPanel:{_getToolbarItems(){var t=this.callBase();return this.getController("editing").prepareEditButtons(this).concat(t)},optionChanged(t){var{fullName:e}=t;switch(t.name){case"editing":e&&![_n,Lt,vi,qe].some(r=>r===e)&&this._invalidate(),this.callBase(t);break;case"useLegacyColumnButtonTemplate":t.handled=!0;break;default:this.callBase(t)}},isVisible(){var t=this.getController("editing").option("editing");return this.callBase()||t?.allowAdding}}}}};$.registerModule("editing",(0,C.l)(!0,{},ZO,{extenders:{controllers:{data:{_changeRowExpandCore(t){var e=this._editingController;return Array.isArray(t)&&e&&e.refresh(),this.callBase.apply(this,arguments)}}}}}));var zO={extenders:{controllers:{editing:t=>class extends t{isRowEditMode(){return this.getEditMode()===jt}_afterCancelEditData(e){var i=this._dataController;this.isRowBasedEditMode()&&e>=0?i.updateItems({changeType:"update",rowIndices:[e,e+1]}):super._afterCancelEditData(e)}_isDefaultButtonVisible(e,i){var a=this.isRowBasedEditMode(),r=i.row&&(0,E.bY)(i.row.key,this.option(qe));if(a)switch(e.name){case"edit":return!r&&this.allowUpdating(i);case"delete":return super._isDefaultButtonVisible(e,i)&&!r;case"save":case"cancel":return r;default:return super._isDefaultButtonVisible(e,i)}return super._isDefaultButtonVisible(e,i)}isEditRow(e){return this.isRowBasedEditMode()&&this.isEditRowByIndex(e)}_cancelSaving(e){this.isRowBasedEditMode()&&(this.hasChanges()||this._cancelEditDataCore()),super._cancelSaving(e)}_refreshCore(e){var{allowCancelEditing:i}=e??{};if(this.isRowBasedEditMode()){var a=this.getChanges().filter(r=>"update"===r.type).length>0;this.init(),i&&a&&this._cancelEditDataCore()}super._refreshCore(e)}_isEditColumnVisible(){var e=super._isEditColumnVisible(),i=this.option("editing"),a=this.isRowEditMode();return e||a&&(i.allowUpdating||i.allowAdding)}_focusEditorIfNeed(){var e=this.getEditMode();if(this._needFocusEditor){if(oO.includes(e)){var i=this.getFocusedCellInRow(this._getVisibleEditRowIndex());this._delayedInputFocus(i,()=>{i&&this.component.focus(i)})}this._needFocusEditor=!1}}},data:{_getChangedColumnIndices(t,e,i,a){if(!this.getController("editing").isRowBasedEditMode()||t.isEditing===e.isEditing)return this.callBase.apply(this,arguments)}}},views:{rowsView:{_createRow(t){var e=this.callBase.apply(this,arguments);return t&&this._editingController.isEditRow(t.rowIndex)&&(e.addClass(f_),e.removeClass(s_),"detail"===t.rowType&&e.addClass(this.addWidgetPrefix(pn))),e},_update(t){this.callBase(t),"updateSelection"===t.changeType&&this.getTableElements().children("tbody").children(".".concat(f_)).removeClass(s_)}}}}};$.registerModule("editingRowBased",zO);class b_{constructor(){this._map={}}_findWidgetInstance(e){var i;return(0,y.S6)(this._map,function(a,r){var{widgetInstance:n,item:s}=r;if(e(s))return i=n,!1}),i}_findFieldByCondition(e,i){var a;return(0,y.S6)(this._map,function(r,n){if(e(n))return a="guid"===i?r:n[i],!1}),a}clear(){this._map={}}removeItemsByItems(e){(0,y.S6)(e.getItems(),i=>this.removeItemByKey(i))}removeItemByKey(e){delete this._map[e]}add(e){var i=e.guid||new Ee.Z;return this._map[i]=e,i}addItemsOrExtendFrom(e){e.each((i,a)=>{this._map[i]?(a.widgetInstance&&(this._map[i].widgetInstance=a.widgetInstance),this._map[i].$itemContainer=a.$itemContainer):this.add({item:a.item,widgetInstance:a.widgetInstance,guid:i,$itemContainer:a.$itemContainer})})}extendRunTimeItemInfoByKey(e,i){this._map[e]&&(this._map[e]=(0,C.l)(this._map[e],i))}findWidgetInstanceByItem(e){return this._findWidgetInstance(i=>i===e)}findGroupOrTabLayoutManagerByPath(e){return this._findFieldByCondition(i=>{var{path:a}=i;return a===e},"layoutManager")}findKeyByPath(e){return this._findFieldByCondition(i=>{var{path:a}=i;return a===e},"guid")}findWidgetInstanceByName(e){return this._findWidgetInstance(i=>e===i.name)}findWidgetInstanceByDataField(e){return this._findWidgetInstance(i=>e===((0,v.HD)(i)?i:i.dataField))}findItemContainerByItem(e){for(var i in this._map)if(this._map[i].item===e)return this._map[i].$itemContainer;return null}findItemIndexByItem(e){return this._findFieldByCondition(i=>{var{item:a}=i;return a===e},"itemIndex")}findPreparedItemByItem(e){return this._findFieldByCondition(i=>{var{item:a}=i;return a===e},"preparedItem")}getItems(){return this._map}each(e){(0,y.S6)(this._map,function(i,a){e(i,a)})}removeItemsByPathStartWith(e){Object.keys(this._map).filter(r=>!!this._map[r].path&&this._map[r].path.indexOf(e,0)>-1).forEach(r=>this.removeItemByKey(r))}}var gn={move(t,e){(0,le.pB)(t,{left:e})}},zo={moveTo(t,e,i,a){ce.Z.animate(t,{type:"slide",to:{left:e},duration:i,complete:a})},complete(t){ce.Z.stop(t,!0)}},w_="dx-multiview-item",y_=t=>+t,E_=Ks.inherit({_activeStateUnit:"."+w_,_supportedKeys:function(){return(0,C.l)(this.callBase(),{pageUp:E.ZT,pageDown:E.ZT})},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,_itemAttributes:{role:"tabpanel"},loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_itemClass:function(){return w_},_itemDataKey:function(){return"dxMultiViewItemData"},_itemContainer:function(){return this._$itemContainer},_itemElements:function(){return this._itemContainer().children(this._itemSelector())},_itemWidth:function(){return this._itemWidthValue||(this._itemWidthValue=(0,I.dz)(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache:function(){delete this._itemWidthValue},_itemsCount:function(){return this.option("items").length},_normalizeIndex:function(t){var e=this._itemsCount();return t<0&&(t+=e),t>=e&&(t-=e),t},_getRTLSignCorrection:function(){return this.option("rtlEnabled")?-1:1},_init:function(){this.callBase.apply(this,arguments);var t=this.$element();t.addClass("dx-multiview"),this._$wrapper=(0,p.Z)("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo(t),this._$itemContainer=(0,p.Z)("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._findBoundaryIndices(),this._initSwipeable()},_initMarkup:function(){this._deferredItems=[],this.callBase();var t=this._getSelectedItemIndices();this._updateItemsVisibility(t[0])},_afterItemElementDeleted:function(t,e){this.callBase(t,e),this._deferredItems&&this._deferredItems.splice(e.itemIndex,1)},_beforeItemElementInserted:function(t){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(t.index,0,null)},_executeItemRenderAction:function(t,e,i){t=(this.option("items")||[]).indexOf(e),this.callBase(t,e,i)},_renderItemContent:function(t){var e=new b.BH,i=this,a=this.callBase,r=new b.BH;return r.done(function(){var n=a.call(i,t);e.resolve(n)}),this._deferredItems[t.index]=r,this.option("deferRendering")||r.resolve(),e.promise()},_render:function(){this.callBase(),(0,E.g0)(()=>{var t=this._getSelectedItemIndices();this._updateItems(t[0])})},_updateItems:function(t,e){this._updateItemsPosition(t,e),this._updateItemsVisibility(t,e)},_modifyByChanges:function(){this.callBase.apply(this,arguments);var t=this._getSelectedItemIndices();this._updateItemsVisibility(t[0])},_updateItemsPosition:function(t,e){var i=this._itemElements(),a=(0,v.$K)(e)?-this._animationDirection(e,t):void 0,r=i.eq(t);gn.move(r,0),(0,v.$K)(e)&&gn.move(i.eq(e),100*a+"%")},_updateItemsVisibility:function(t,e){this._itemElements().each(function(a,r){var n=(0,p.Z)(r),s=a!==t&&a!==e;s||this._renderSpecificItem(a),n.toggleClass("dx-multiview-item-hidden",s),this.setAria("hidden",s||void 0,n)}.bind(this))},_renderSpecificItem:function(t){var e=this._itemElements().eq(t),i=e.find(this._itemContentClass()).length>0;(0,v.$K)(t)&&!i&&(this._deferredItems[t].resolve(),(0,Dt.U_)(e))},_refreshItem:function(t,e){this.callBase(t,e),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelectionAttribute:E.ZT,_updateSelection:function(t,e){var i=t[0],a=e[0];zo.complete(this._$itemContainer),this._updateItems(a,i);var r=this._animationDirection(i,a);this._animateItemContainer(r*this._itemWidth(),function(){gn.move(this._$itemContainer,0),this._updateItems(i),(0,I.dz)(this._$itemContainer)}.bind(this))},_animateItemContainer:function(t,e){var i=this.option("animationEnabled")?200:0;zo.moveTo(this._$itemContainer,t,i,e)},_animationDirection:function(t,e){var i=(t=>(0,le.jt)(this._$itemContainer).left)(),a=(e-t)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection();return(0,ue.Xx)(0!==i?i:a)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),rn,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:t=>this._swipeStartHandler(t.event),onUpdated:t=>this._swipeUpdateHandler(t.event),onEnd:t=>this._swipeEndHandler(t.event)})},_findBoundaryIndices(){var t,e,a,r,i=this.option("items");i.forEach((n,s)=>{var l;n?.disabled||(null!==(l=a)&&void 0!==l||(a=s),r=s)}),this._boundaryIndices={firstAvailableIndex:null!==(t=a)&&void 0!==t?t:0,lastAvailableIndex:null!==(e=r)&&void 0!==e?e:i.length-1,firstTrueIndex:0,lastTrueIndex:i.length-1}},_swipeStartHandler:function(t){zo.complete(this._$itemContainer);var e=this.option("selectedIndex"),i=this.option("loop"),{firstAvailableIndex:a,lastAvailableIndex:r}=this._boundaryIndices,n=this.option("rtlEnabled");t.maxLeftOffset=y_(i||(n?e>a:e<r)),t.maxRightOffset=y_(i||(n?e<r:e>a)),this._swipeDirection=null},_swipeUpdateHandler:function(t){var e=t.offset,i=(0,ue.Xx)(e)*this._getRTLSignCorrection();if(gn.move(this._$itemContainer,e*this._itemWidth()),i!==this._swipeDirection){this._swipeDirection=i;var a=this.option("selectedIndex"),r=this._normalizeIndex(a-i);this._updateItems(a,r)}},_findNextAvailableIndex(t,e){var{items:i,loop:a}=this.option(),{firstAvailableIndex:r,lastAvailableIndex:n,firstTrueIndex:s,lastTrueIndex:o}=this._boundaryIndices,l=[s,r].includes(t),d=[o,n].includes(t);if(a){if(l&&e<0)return n;if(d&&e>0)return r}for(var u=t+e;u>=r&&u<=n;u+=e)if(!i[u].disabled)return u;return t},_swipeEndHandler:function(t){var e=t.targetOffset*this._getRTLSignCorrection();if(e){var i=this._findNextAvailableIndex(this.option("selectedIndex"),-e);this.option("selectedIndex",i);var a=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",(0,W.u)(a))}else this._animateItemContainer(0,E.ZT)},_getItemFocusLoopSignCorrection:function(){return this._itemFocusLooped?-1:1},_moveFocus:function(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem:function(t){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(t.last()),e},_nextItem:function(t){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(t.first()),e},_dimensionChanged:function(){this._clearItemWidthCache()},_visibilityChanged:function(t){t&&this._dimensionChanged()},_updateSwipeDisabledState(){var t=this._getSwipeDisabledState();rn.getInstance(this.$element()).option("disabled",t)},_dispose:function(){delete this._boundaryIndices,this.callBase()},_optionChanged:function(t){var e=t.value;switch(t.name){case"loop":this.option("loopItemFocus",e);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),this.callBase(t);break;default:this.callBase(t)}}});(0,J.Z)("dxMultiView",E_);const XO=E_;var I_="dx-badge",QO=Ni.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge:function(t){if(this._$element.children("."+I_).remove(),t){var e=(0,p.Z)("<div>").addClass("dx-tabs-item-badge").addClass(I_).text(t);this._$element.append(e)}}});const eR=QO;var T_="dx-tabs-expanded";function A_(t){return t.scrollWidth-t.clientWidth}var R_="dx-tabs-stretched",B_="dx-tabs-nav-buttons",L_="dx-overflow-hidden",P_="chevronnext",F_="chevronprev",Wo=Ks.inherit({_activeStateUnit:".dx-tab",_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:function(t){return t?t.badge:void 0},_itemAttributes:{role:"tab"}})},_defaultOptionsRules:function(){var t=(0,oe.Vk)();return this.callBase().concat([{device:function(){return"desktop"!==K.Z.real().deviceType},options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:function(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,oe.x2)(t)},options:{useInkRipple:!0,selectOnFocus:!1}}])},_init:function(){this.callBase(),this.setAria("role","tablist"),this.$element().addClass("dx-tabs"),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new oi(function(t,e){(0,v.PO)(e)?this._prepareDefaultItemTemplate(e,t):t.text(String(e));var i=(0,vt.H)(e.icon);i&&i.prependTo(t),t.wrapInner((0,p.Z)("<span>").addClass("dx-tab-text"))}.bind(this),["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(t,e){var{itemData:i,container:a,index:r}=e;return this._deferredTemplates[r]=new b.BH,t.render({model:i,container:a,index:r,onRendered:()=>this._deferredTemplates[r].resolve()})},_itemClass:function(){return"dx-tab"},_selectedItemClass:function(){return"dx-tab-selected"},_itemDataKey:function(){return"dxTabData"},_initMarkup:function(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass(L_)},_render:function(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){b.gx.apply(this,this._deferredTemplates).done(()=>this._renderScrolling())},_renderScrolling:function(){var t=[R_,T_,L_];if(this.$element().removeClass(t.join(" ")),this.option("scrollingEnabled")&&this._isItemsWidthExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());var e=this.getScrollable();if(e.update(),this.option("rtlEnabled")){var i=A_((0,p.Z)(this.getScrollable().container()).get(0));e.scrollTo({left:i})}this._updateNavButtonsVisibility(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsWidthExceeded()||(this._cleanScrolling(),this._needStretchItems()&&!this._isItemsWidthExceeded()&&this.$element().addClass(R_),this.$element().removeClass(B_).addClass(T_))},_isItemsWidthExceeded:function(){return this._getSummaryItemsWidth(this._getVisibleItems(),!0)-1>(0,I.dz)(this.$element())},_needStretchItems:function(){var t=this._getVisibleItems(),e=(0,I.dz)(this.$element()),i=[];return(0,y.S6)(t,(r,n)=>{i.push((0,I.Y_)(n,!0))}),Math.max.apply(null,i)>=e/t.length},_cleanNavButtons:function(){!this._leftButton||!this._rightButton||(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling:function(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple:function(){this._inkRipple=(0,ys.sY)()},_getPointerEvent:()=>re.Z.up,_toggleActiveState:function(t,e,i){if(this.callBase.apply(this,arguments),this._inkRipple){var a={element:t,event:i};e?this._inkRipple.showWave(a):this._inkRipple.hideWave(a)}},_renderMultiple:function(){"multiple"===this.option("selectionMode")&&this.option("selectOnFocus",!1)},_renderWrapper:function(){this._$wrapper=(0,p.Z)("<div>").addClass("dx-tabs-wrapper"),this.$element().append(this._$wrapper)},_itemContainer:function(){return this._$wrapper},_renderScrollable:function(){var t=this.$element().wrapInner((0,p.Z)("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent(t,_t,{direction:"horizontal",showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsVisibility()}}),this.$element().append(this._scrollable.$element())},_scrollToItem:function(t){if(this._scrollable){var e=this._editStrategy.getItemElement(t);this._scrollable.scrollToElement(e)}},_renderNavButtons:function(){if(this.$element().toggleClass(B_,this.option("showNavButtons")),this.option("showNavButtons")){var t=this.option("rtlEnabled");this._leftButton=this._createNavButton(-30,t?P_:F_);var e=this._leftButton.$element();e.addClass("dx-tabs-nav-button-left"),this.$element().prepend(e),this._rightButton=this._createNavButton(30,t?F_:P_);var i=this._rightButton.$element();i.addClass("dx-tabs-nav-button-right"),this.$element().append(i)}},_updateNavButtonsVisibility:function(){var t=this.getScrollable();this._leftButton&&this._leftButton.option("disabled",function D_(t,e){return Math.round(t)<=e}(t.scrollLeft(),1)),this._rightButton&&this._rightButton.option("disabled",function O_(t,e,i){return Math.round(A_(t)-e)<=i}((0,p.Z)(t.container()).get(0),t.scrollLeft(),1))},_updateScrollPosition:function(t,e){this._scrollable.update(),this._scrollable.scrollBy(t/e)},_createNavButton:function(t,e){var i=this,a=i._createAction(function(){i._holdInterval=setInterval(function(){i._updateScrollPosition(t,5)},5)}),r=(0,D.V4)(zt_name,"dxNavButton"),n=(0,D.V4)(re.Z.up,"dxNavButton"),s=(0,D.V4)(re.Z.out,"dxNavButton"),o=this._createComponent((0,p.Z)("<div>").addClass("dx-tabs-nav-button"),Be.Z,{focusStateEnabled:!1,icon:e,onClick:function(){i._updateScrollPosition(t,1)},integrationOptions:{}}),l=o.$element();return S.Z.on(l,r,{timeout:300},function(d){a({event:d})}.bind(this)),S.Z.on(l,n,function(){i._clearInterval()}),S.Z.on(l,s,function(){i._clearInterval()}),o},_clearInterval:function(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection:function(t){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(t[0]),{left:1,right:1})},_visibilityChanged:function(t){t&&this._dimensionChanged()},_dimensionChanged:function(){this._renderScrolling()},_itemSelectHandler:function(t){"single"===this.option("selectionMode")&&this.isItemSelected(t.currentTarget)||this.callBase(t)},_clean:function(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_toggleFocusedNextClass(t,e){this._itemElements().eq(t).toggleClass("dx-focused-next-tab",e)},_optionChanged:function(t){switch(t.name){case"useInkRipple":case"scrollingEnabled":case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(t.name,t.value);break;case"width":this.callBase(t),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(t);break;case"focusedElement":var{selectedIndex:e}=this.option(),i=(0,p.Z)(t.value).index();i!==e&&this._toggleFocusedNextClass(e,i===e+1),this.callBase(t),this._scrollToItem(t.value);break;default:this.callBase(t)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(t,e){this.callBase(t,e),this._renderScrolling()},getScrollable(){return this._scrollable}});Wo.ItemClass=eR,(0,J.Z)("dxTabs",Wo);const vR=Wo;var Ko=XO.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:function(t){return t?t.badge:void 0}})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return!Ue.touch},options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}}])},_init:function(){this.callBase(),this.$element().addClass("dx-tabpanel"),this.setAria("role","tabpanel")},_initMarkup:function(){this.callBase(),this._createTitleActions(),this._renderLayout()},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new oi(function(t,e){if((0,v.PO)(e)){var i=(0,vt.H)(e.icon);i&&t.append(i),(0,v.$K)(e.title)&&!(0,v.PO)(e.title)&&t.append(Y.Z.createTextNode(e.title))}else(0,v.$K)(e)&&t.text(String(e));t.wrapInner((0,p.Z)("<span>").addClass("dx-tab-text"))},["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions:function(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction:function(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction:function(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction:function(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderContent:function(){var t=this;this.callBase(),this.option("templatesRenderAsynchronously")&&(this._resizeEventTimer=setTimeout(function(){t._updateLayout()},0))},_renderLayout:function(){if(this._tabs)this._updateLayout();else{var t=this.$element();this._$tabContainer=(0,p.Z)("<div>").addClass("dx-tabpanel-tabs").appendTo(t);var e=(0,p.Z)("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(e,vR,this._tabConfig()),this._$container=(0,p.Z)("<div>").addClass("dx-tabpanel-container").appendTo(t),this._$container.append(this._$wrapper),this._updateLayout()}},_updateLayout:function(){if((0,Z.Ym)()){var t=(0,I.zp)(this._$tabContainer);this._$container.css({marginTop:-t,paddingTop:t})}},_refreshActiveDescendant:function(){if(this._tabs){var t=this._tabs,e=t.itemElements(),i=(0,p.Z)(e[t.option("selectedIndex")]),a=this.getFocusedItemId();this.setAria("controls",void 0,(0,p.Z)(e)),this.setAria("controls",a,i)}},_tabConfig:function(){return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:function(t){this.option("selectedIndex",t.component.option("selectedIndex")),this._refreshActiveDescendant()}.bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:function(t){if("focusedElement"===t.name)if(t.value){var e=(0,p.Z)(t.value),i=this._itemElements().eq(e.index());this.option("focusedElement",(0,W.u)(i))}else this.option("focusedElement",t.value)}.bind(this),onFocusIn:function(t){this._focusInHandler(t.event)}.bind(this),onFocusOut:function(t){this._isFocusOutHandlerExecuting||this._focusOutHandler(t.event)}.bind(this)}},_renderFocusTarget:function(){this._focusTarget().attr("tabIndex",-1)},_toggleWrapperFocusedClass(t){this._toggleFocusClass(t,this._$wrapper)},_toggleDisabledFocusedClass(t){this._focusTarget().toggleClass("dx-disabled-focused-tab",t)},_updateFocusState:function(t,e){this.callBase(t,e);var i=t.target===this._tabs._focusTarget().get(0),a=t.target===this._focusTarget().get(0);if(i&&this._toggleFocusClass(e,this._focusTarget()),i||a){var r=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(e&&!r),this._toggleDisabledFocusedClass(e&&r)}a&&this._toggleFocusClass(e,this._tabs.option("focusedElement"))},_focusOutHandler:function(t){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(t),this._isFocusOutHandlerExecuting=!1},_setTabsOption:function(t,e){this._tabs&&this._tabs.option(t,e)},_visibilityChanged:function(t){t&&(this._tabs._dimensionChanged(),this._updateLayout())},registerKeyHandler:function(t,e){this.callBase(t,e),this._tabs&&this._tabs.registerKeyHandler(t,e)},repaint:function(){this.callBase(),this._tabs.repaint()},_optionChanged:function(t){var e=t.name,i=t.value,a=t.fullName;switch(e){case"dataSource":default:this.callBase(t);break;case"items":this._setTabsOption(e,this.option(e)),this._updateLayout(),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(t);break;case"width":this.callBase(t),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(a,i),this.callBase(t),!0===this.option("focusStateEnabled")){var r=this.option("selectedIndex"),n=this._itemElements().eq(r);this.option("focusedElement",(0,W.u)(n))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(a,i),this.callBase(t);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(a,i);break;case"focusedElement":var s=i&&(0,p.Z)(i).index(),o=i&&this._tabs._itemElements().eq(s);this._setTabsOption("focusedElement",(0,W.u)(o));var l=this._isDisabled(i);this._toggleWrapperFocusedClass(!l),this._toggleDisabledFocusedClass(l),this.callBase(t);break;case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",i);break;case"badgeExpr":this._invalidate()}},_clean:function(){clearTimeout(this._resizeEventTimer),this.callBase()}});Ko.ItemClass=class gR extends Ni{_renderWatchers(){return this._startWatcher("badge",E.ZT),super._renderWatchers()}},(0,J.Z)("dxTabPanel",Ko);const bR=Ko;class gi{constructor(e){this._options=e,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){Ce.Z.abstract()}}var Go=(t,e)=>"".concat(e?"tabs":"items","[").concat(t,"]"),N_=(t,e)=>(0,v.$K)(t)&&(0,v.$K)(e)?"".concat(t,".").concat(e):t||e,Uo=t=>t?t.replace(/\s/g,""):void 0,Za=(t,e)=>"".concat(t,".").concat(e),H_=t=>{var e=t.split(".");return e[e.length-1].replace(/\[\d+]/,"")},Z_=t=>t.indexOf("tabs")>-1,$_=(t,e,i)=>{var a=t.indexOf(e);if(a>-1)return Go(a,i);for(var r=0;r<t.length;r++){var n=t[r],s=n.tabs||n.items;if(s){var o=$_(s,e,n.tabs);if(o)return N_(Go(r,i),o)}}};class IR extends gi{tryExecute(){var{value:e}=this._options,i=this.findInstance();return!!i&&(i.option(e),!0)}}class z_ extends gi{tryExecute(){var e=this.findInstance();if(e){var{optionName:i,item:a,value:r}=this._options,n=this._itemsRunTimeInfo.findItemIndexByItem(a);if(n>=0)return e.option(Za("items[".concat(n,"]"),i),r),!0}return!1}}class TR extends gi{tryExecute(){return!1}}class AR extends gi{tryExecute(){var e=this.findPreparedItem();return!(null==e||!e._prepareGroupItemTemplate||!e._renderGroupContentTemplate||(e._prepareGroupItemTemplate(this._options.item.template),e._renderGroupContentTemplate(),0))}}class DR extends gi{tryExecute(){var e=this.findInstance();if(e){var{value:i}=this._options;return e.option("dataSource",i),!0}return!1}}class OR extends gi{tryExecute(){var{item:e}=this._options,i=this.findInstance(),a=i&&(0,Ai.aT)(i.$element()[0],"dxValidator");if(a&&e){var r=o=>"required"===o.type,n=(a.option("validationRules")||[]).some(r),s=(e.validationRules||[]).some(r);if(!n&&!s||n&&s)return a.option("validationRules",e.validationRules),!0}return!1}}class RR extends gi{tryExecute(){var e=this.findItemContainer(),{previousValue:i,value:a}=this._options;return!!e&&(e.removeClass(i).addClass(a),!0)}}var W_="dx-responsivebox",K_=W_+"-screen-",G_="dxBoxItemData",U_=li.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init:function(){this.option("screenByWidth")||this._options.silent("screenByWidth",Z.$n),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction:function(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:function(){return"dx-box-item"},_itemDataKey:function(){return G_},_initMarkup:function(){this.callBase(),this.$element().addClass(W_)},_renderItems:function(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged:function(t){var e=this._findItemElementByItem(t);e.length&&(this._refreshItem(e,t),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize:function(){var t=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(K_+t),this.option("currentScreenFactor",t)},_removeScreenSizeClass:function(){var t=this.option("currentScreenFactor");t&&this.$element().removeClass(K_+t)},_prepareGrid:function(){var t=this._grid=[];this._prepareRowsAndCols(),(0,y.S6)(this._rows,function(){var e=[];t.push(e),(0,y.S6)(this._cols,function(){e.push(this._createEmptyCell())}.bind(this))}.bind(this))},getSingleColumnRows:function(){var t=this.option("rows"),e=this._screenItems.length;if(t.length){for(var i=this._filterByScreen(t),a=[],r=0;r<e;r++){var n=this._defaultSizeConfig();r<i.length&&(0,v.$K)(i[r].shrink)&&(n.shrink=i[r].shrink),a.push(n)}return a}return this._defaultSizeConfig(e)},_prepareRowsAndCols:function(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen:function(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems:function(){this._screenItems.sort(function(t,e){return t.location.row-e.location.row||t.location.col-e.location.col}),(0,y.S6)(this._screenItems,function(t,e){(0,C.l)(e.location,{row:t,col:0,rowspan:1,colspan:1})})},_sizesByScreen:function(t){return(0,y.UI)(this._filterByScreen(t),function(e){return(0,C.l)(this._defaultSizeConfig(),e)}.bind(this))},_createDefaultSizeConfig:function(){return{ratio:1,baseSize:0,minSize:0,maxSize:0}},_defaultSizeConfig:function(t){var e=this._createDefaultSizeConfig();if(!arguments.length)return e;for(var i=[],a=0;a<t;a++)i.push(e);return i},_filterByScreen:function(t){var e=this._screenRegExp();return(0,E.h3)(t,function(i){return!i.screen||e.test(i.screen)})},_screenRegExp:function(){var t=this._getCurrentScreen();return new RegExp("(^|\\s)"+t+"($|\\s)","i")},_getCurrentScreen:function(){var t=this._screenWidth();return this.option("screenByWidth")(t)},_screenWidth:function(){return(0,Z.Ym)()?(0,I.dz)((0,Z.Jj)()):1920},_createEmptyCell:function(){return{item:{},location:{colspan:1,rowspan:1}}},_spreadItems:function(){(0,y.S6)(this._screenItems,function(t,e){var i=e.location||{},n=this._grid[i.row];this._occupyCells(n&&n[i.col],e)}.bind(this))},_itemsByScreen:function(){return this.option("items").reduce((t,e)=>{var i=e.location||{};return i=(0,v.PO)(i)?[i]:i,this._filterByScreen(i).forEach(a=>{t.push({item:e,location:(0,C.l)({rowspan:1,colspan:1},a)})}),t},[])},_occupyCells:function(t,e){!t||this._isItemCellOccupied(t,e)||((0,C.l)(t,e),this._markSpanningCell(t))},_isItemCellOccupied:function(t,e){if(!(0,v.Qr)(t.item))return!0;var i=!1;return this._loopOverSpanning(e.location,function(a){i=i||!(0,v.Qr)(a.item)}),i},_loopOverSpanning:function(t,e){var i=t.row+t.rowspan-1,a=t.col+t.colspan-1,r=Math.min(i,this._rows.length-1),n=Math.min(a,this._cols.length-1);t.rowspan-=i-r,t.colspan-=a-n;for(var s=t.row;s<=r;s++)for(var o=t.col;o<=n;o++)(s!==t.row||o!==t.col)&&e(this._grid[s][o])},_markSpanningCell:function(t){this._loopOverSpanning(t.location,function(e){(0,C.l)(e,{item:t.item,spanningCell:t})})},_linkNodeToItem:function(){(0,y.S6)(this._itemElements(),function(t,e){var i=(0,p.Z)(e),a=i.data(G_);a.box||(a.node=i.children())})},_layoutItems:function(){var t=this._grid.length,e=t&&this._grid[0].length;if(t||e){var i=this._layoutBlock({direction:"col",row:{start:0,end:t-1},col:{start:0,end:e-1}}),a=this._prepareBoxConfig(i.box||{direction:"row",items:[(0,C.l)(i,{ratio:1})]});(0,C.l)(a,this._rootBoxConfig(a.items)),this._$root=(0,p.Z)("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,dn,a)}},_rootBoxConfig:function(t){var e=(0,y.S6)(t,function(i,a){this._needApplyAutoBaseSize(a)&&(0,C.l)(a,{baseSize:"auto"})}.bind(this));return{width:"100%",height:"100%",items:e,itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:function(t){return!(t.baseSize||t.minSize&&"auto"!==t.minSize||t.maxSize&&"auto"!==t.maxSize)},_prepareBoxConfig:function(t){return(0,C.l)(t||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock:function(t){return this._isSingleItem(t)?this._itemByCell(t.row.start,t.col.start):this._layoutDirection(t)},_isSingleItem:function(t){var e=this._grid[t.row.start][t.col.start].location;return t.row.end-t.row.start==e.rowspan-1&&t.col.end-t.col.start==e.colspan-1},_itemByCell:function(t,e){var i=this._grid[t][e];return i.spanningCell?null:i.item},_layoutDirection:function(t){for(var r,e=[],i=t.direction,a=this._crossDirection(i);r=this._nextBlock(t);){if(this._isBlockIndivisible(t.prevBlockOptions,r))throw ee.Z.Error("E1025");var n=this._layoutBlock({direction:a,row:r.row,col:r.col,prevBlockOptions:t});n&&((0,C.l)(n,this._blockSize(r,a)),e.push(n)),t[a].start=r[a].end+1}return{box:this._prepareBoxConfig({direction:i,items:e})}},_isBlockIndivisible:function(t,e){return t&&t.col.start===e.col.start&&t.col.end===e.col.end&&t.row.start===e.row.start&&t.row.end===e.row.end},_crossDirection:function(t){return"col"===t?"row":"col"},_nextBlock:function(t){var e=t.direction,i=this._crossDirection(e),a=t[e].start,r=t[e].end,n=t[i].start;if(n>t[i].end)return null;for(var s=1,o=n;o<n+s;o++){for(var l=1,d=a;d<=r;d++){var u=this._cellByDirection(e,d,o);l=Math.max(l,u.location[i+"span"])}var h=o+l,c=n+s;h>c&&(s+=h-c)}var _={};return _[e]={start:a,end:r},_[i]={start:n,end:n+s-1},_},_cellByDirection:function(t,e,i){return"col"===t?this._grid[i][e]:this._grid[e][i]},_blockSize:function(t,e){for(var i="row"===e?"auto":0,a="row"===e?this._rows:this._cols,r=(0,C.l)(this._createDefaultSizeConfig(),{ratio:0}),n=t[e].start;n<=t[e].end;n++){var s=a[n];r.ratio+=s.ratio,r.baseSize+=s.baseSize,r.minSize+=s.minSize,r.maxSize+=s.maxSize,(0,v.$K)(s.shrink)&&(r.shrink=s.shrink)}return r.minSize=r.minSize?r.minSize:i,r.maxSize=r.maxSize?r.maxSize:"auto",this._isSingleColumnScreen()&&(r.baseSize="auto"),r},_update:function(t){var e=this._$root;this._renderItems(),e&&(t?e.remove():(e.detach(),this._saveAssistantRoot(e))),this._layoutChangedAction()},_saveAssistantRoot:function(t){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(t)},_dispose:function(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots:function(){this._assistantRoots&&(0,y.S6)(this._assistantRoots,function(t,e){(0,p.Z)(e).remove()})},_clearItemNodeTemplates:function(){(0,y.S6)(this.option("items"),function(){delete this.node})},_attachClickEvent:E.ZT,_optionChanged:function(t){switch(t.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(t),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(t);break;case"currentScreenFactor":break;default:this.callBase(t)}},_dimensionChanged:function(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint:function(){this._update()}});(0,J.Z)("dxResponsiveBox",U_);const FR=U_;var Yo="dx-form-group",Y_="dx-col-",j_="dx-field-item",q_="dx-layout-manager-one-col",X_="dx-field-item-label-content",J_="dx-field-item-label",jo="dx-field-item-content",Q_="dx-root-simple-item",ev="dx-field-item-tab",tv="dx-group-colcount-",iv="group-col-count",qo="simple",UR=Ce.Z.inherit({ctor(t,e){this.editor=t,this.validator=e,this.validationRequestsCallbacks=[];var i=a=>{this.validationRequestsCallbacks.forEach(r=>r(a))};t.validationRequest.add(i),t.on("disposing",function(){t.validationRequest.remove(i)})},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(t){this.editor.option({validationErrors:t.brokenRules,validationStatus:t.status})},reset(){this.editor.reset()},focus(){this.editor.focus()}});const YR=UR;var Xo="pending",rv=Li.Z.inherit({_initOptions:function(t){this.callBase.apply(this,arguments),this.option(_e.Z.initValidationOptions(t))},_getDefaultOptions(){return(0,C.l)(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=(0,ge.Z)(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){var t=this._findGroup();this._groupWasInit||this.on("disposing",function(e){_e.Z.removeRegisteredValidator(e.component._validationGroup,e.component)}),(!this._groupWasInit||this._validationGroup!==t)&&(_e.Z.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=t,_e.Z.registerValidatorInGroup(t,this))},_setOptionsByReference(){this.callBase(),(0,C.l)(this._optionsByReference,{validationGroup:!0})},_getEditor(){var t=this.$element()[0];return(0,Ai.aT)(t,"dx-validation-target")},_initAdapter(){var t=this._getEditor(),e=this.option("adapter");if(!e){if(t)return(e=new YR(t,this)).validationRequestsCallbacks.push(a=>{this._validationInfo.skipValidation||this.validate(a)}),void this.option("adapter",e);throw ee.Z.Error("E0120")}var i=e.validationRequestsCallbacks;i&&i.push(a=>{this.validate(a)})},_toggleRTLDirection(t){var e,i,a,r=null!==(e=null===(i=this.option("adapter"))||void 0===i||null===(a=i.editor)||void 0===a?void 0:a.option("rtlEnabled"))&&void 0!==e?e:t;this.callBase(r)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){var t=this._getEditor();if(t){var i=(this.option("validationRules")||[]).some(a=>{var{type:r}=a;return"required"===r})||null;t.isInitialized()&&t.setAria("required",i),t.option("_onMarkupRendered",()=>{t.setAria("required",i)})}},_visibilityChanged(t){t&&this._initGroupRegistration()},_optionChanged(t){switch(t.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),this._toggleAccessibilityAttributes(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(_e.Z.synchronizeValidationOptions(t,this.option()));break;default:this.callBase(t)}},_getValidationRules(){return this._validationRules||(this._validationRules=(0,y.UI)(this.option("validationRules"),(t,e)=>(0,C.l)({},t,{validator:this,index:e}))),this._validationRules},_findGroup(){var t=this.$element();return this.option("validationGroup")||_e.Z.findGroup(t,this._modelByElement(t))},_resetValidationRules(){delete this._validationRules},validate(t){var l,e=this.option("adapter"),i=this.option("name"),a=e.bypass&&e.bypass(),r=t&&void 0!==t.value?t.value:e.getValue(),n=e.getCurrentValidationError&&e.getCurrentValidationError(),s=this._getValidationRules(),o=this._validationInfo&&this._validationInfo.result;return o&&o.status===Xo&&o.value===r?(0,C.l)({},o):(a?l={isValid:!0,status:"valid"}:n&&n.editorSpecific?(n.validator=this,l={isValid:!1,status:"invalid",brokenRule:n,brokenRules:[n]}):l=_e.Z.validate(r,s,i),l.id=(new Ee.Z).toString(),this._applyValidationResult(l,e),l.complete&&l.complete.then(d=>{d.id===this._validationInfo.result.id&&this._applyValidationResult(d,e)}),(0,C.l)({},this._validationInfo.result))},reset(){var t=this.option("adapter");this._validationInfo.skipValidation=!0,t.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult({id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null},t)},_updateValidationResult(t){if(this._validationInfo.result&&this._validationInfo.result.id===t.id)for(var i in t)"id"!==i&&"complete"!==i&&(this._validationInfo.result[i]=t[i]);else this._validationInfo.result=(0,C.l)({},t,{complete:this._validationInfo.deferred&&this._validationInfo.result.complete})},_applyValidationResult(t,e){var i=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(t.validator=this,this._updateValidationResult(t),e.applyValidationResults&&e.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),this._validationInfo.result.status===Xo)return this._validationInfo.deferred||(this._validationInfo.deferred=new b.BH,this._validationInfo.result.complete=this._validationInfo.deferred.promise()),void this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);this._validationInfo.result.status!==Xo&&(i(t),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(t),this._validationInfo.deferred=null))},focus(){var t=this.option("adapter");t&&t.focus&&t.focus()},_useTemplates:function(){return!1}});(0,J.Z)("dxValidator",rv);const Jo=rv;var XR=["dxTagBox","dxRangeSlider","dxDateRangeBox"],JR=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function nv(t,e){var{showRequiredMark:i,requiredMark:a,showOptionalMark:r,optionalMark:n}=t;return{showRequiredMark:i&&e,requiredMark:a,showOptionalMark:r&&!e,optionalMark:n}}var rB="dx-field-item-required-mark",sv="dx-field-item-label-location-",nB="dx-field-item-optional-mark",sB="dx-field-item-label-text";function uB(t){for(var e=0,i=t.children.length,a=0;a<i;a++)e+=t.children[a].offsetWidth;return e}var ov="dx-field-item-content-wrapper",SB="dx-template-wrapper",Qo="dx-validation-target",xB="dx-invalid";function bB(t){var{$parent:e,rootElementCssClassList:i,formOrLayoutManager:a,createComponentCallback:r,labelOptions:n,labelNeedBaselineAlign:s,labelLocation:o,needRenderLabel:l,formLabelLocation:d,item:u,editorOptions:h,isSimpleItem:c,isRequired:_,template:g,helpID:f,labelID:m,name:x,helpText:w,requiredMessageTemplate:T,validationGroup:O}=t,P=(0,p.Z)("<div>").addClass(i.join(" ")).appendTo(e);P.addClass(_?"dx-field-item-required":"dx-field-item-optional"),c&&P.addClass("dx-flex-layout"),c&&s&&P.addClass("dx-field-item-label-align");var F=(0,p.Z)("<div>");F.data("dx-form-item",u),F.addClass(jo).addClass("dx-field-item-content-location-"+{right:"left",left:"right",top:"bottom"}[d]);var pe,N=null;if(l&&(n.labelTemplate&&(n.labelTemplateData=uv(u,h,a)),N=function oB(t){var{text:e,id:i,location:a,alignment:r,labelID:n=null,markOptions:s={},labelTemplate:o,labelTemplateData:l,onLabelTemplateRendered:d}=t;if((!(0,v.$K)(e)||e.length<=0)&&!(0,v.$K)(o))return null;var u=(0,p.Z)("<label>").addClass(J_+" "+sv+a).attr("for",i).attr("id",n).css("textAlign",r),h=(0,p.Z)("<span>").addClass(X_),c=(0,p.Z)("<span>").addClass(sB).text(e);return o&&(c=(0,p.Z)("<div>").addClass("dx-field-item-custom-label-content"),l.text=e,o.render({container:(0,W.u)(c),model:l,onRendered(){d?.()}})),u.append(h.append(c,function lB(t){var e=function eB(t){var{showRequiredMark:e,requiredMark:i,showOptionalMark:a,optionalMark:r}=t;return e||a?String.fromCharCode(160)+(e?i:r):""}(t);return""===e?null:(0,p.Z)("<span>").addClass(t.showRequiredMark?rB:nB).text(e)}(s)))}(n)),N){var{editorType:H}=u;P.append(N),("top"===o||"left"===o)&&P.append(F),"right"===o&&P.prepend(F),P.addClass("top"===o?"dx-label-v-align":"dx-label-h-align"),("dxCheckBox"===H||"dxSwitch"===H)&&S.Z.on(N,ie.u,function(){S.Z.trigger(F.children(),ie.u)});var k=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(H),U=n.alignment;!g&&k&&"top"===o&&("left"===U||!U)&&F.addClass("dx-toggle-controls-paddings")}else P.append(F);if(g)g.render({container:(0,W.u)(F),model:uv(u,h,a),onRendered(){var xH=function wB(t){var e,i;return t?.data(Qo)||(null==t||null===(e=t.parent)||void 0===e||null===(i=e.call(t))||void 0===i?void 0:i.data(Qo))}(lv(F));dv(xH)}});else{var De=(0,p.Z)("<div>").appendTo(F);try{(pe=r(De,u.editorType,h)).setAria("describedby",f),m&&pe.setAria("labelledby",m),pe.setAria("required",_)}catch(sd){ee.Z.log("E1035",sd.message)}}var Et=lv(F),Gn=Et&&Et.data(Qo);if(Gn){var or,wm=u.label&&u.label.text,ym=wm?null:x,mH=wm?u.label.text:ym&&(0,Pe.GK)(ym);if(c)if(u.validationRules)or=u.validationRules;else{var CH=(0,ot.WU)(T,mH||"");or=u.isRequired?[{type:"required",message:CH}]:null}Array.isArray(or)&&or.length&&r(Et,Jo,{validationRules:or,validationGroup:O,dataGetter:function(){return{formItem:u}}}),dv(Gn)}return w&&c&&F.parent().append((0,p.Z)("<div>").addClass(ov).append(F).append((0,p.Z)("<div>").addClass("dx-field-item-help-text").attr("id",f).text(w))),{$fieldEditorContainer:F,$rootElement:P,widgetInstance:pe}}function lv(t){var e=t.children().first();return e.hasClass(SB)?e.children().first():e}function dv(t){if(t&&(0,oe.x2)()){var e=".".concat(ov),i=a=>{var{element:r,component:n}=a,{isValid:s,validationMessageMode:o}=n.option();(0,p.Z)(r).parents(e).toggleClass(xB,!1===s&&(n._isFocused()||"always"===o))};t.on("optionChanged",a=>{"isValid"===a.name&&i(a)}),t.on("focusIn",i).on("focusOut",i).on("enterKey",i)}}function uv(t,e,i){return{dataField:t.dataField,editorType:t.editorType,editorOptions:e,component:i,name:t.name}}function hv(t){var{$parent:e,rootElementCssClassList:i}=t;return(0,p.Z)("<div>").addClass("dx-field-empty-item").html("&nbsp;").addClass(i.join(" ")).appendTo(e)}var VB=Me.default.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:A.Z.format("dxForm-optionalMark"),requiredMessage:A.Z.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference:function(){this.callBase(),(0,C.l)(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init:function(){var t=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new b_,this._updateReferencedOptions(t),this._initDataAndItems(t)},_dispose:function(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems:function(t){this._syncDataWithItems(),this._updateItems(t)},_syncDataWithItems:function(){var t=this.option("layoutData"),e=this.option("items");(0,v.$K)(e)&&e.forEach(i=>{var a;i.dataField&&void 0===this._getDataByField(i.dataField)&&(i.editorOptions&&(a=i.editorOptions.value),((0,v.$K)(a)||i.dataField in t)&&this._updateFieldValue(i.dataField,a))})},_getDataByField:function(t){return t?this.option("layoutData."+t):null},_isCheckboxUndefinedStateEnabled:function(t){var{allowIndeterminateState:e,editorType:i,dataField:a}=t;if(!0===e&&"dxCheckBox"===i){var r=["layoutData",...a.split(".")],n=r.pop(),s=this.option(r.join("."));return s&&n in s}return!1},_updateFieldValue:function(t,e){var i=this.option("layoutData"),a=e;!tt.default.isWrapped(i[t])&&(0,v.$K)(t)?this.option("layoutData."+t,a):tt.default.isWritableWrapped(i[t])&&(a=(0,v.mf)(a)?a():a,i[t](a)),this._triggerOnFieldDataChanged({dataField:t,value:a})},_triggerOnFieldDataChanged:function(t){this._createActionByOption("onFieldDataChanged")(t)},_updateItems:function(t){var e=this,i=this.option("items"),a=(0,v.$K)(i),r=e.option("customizeItem"),n=a?i:this._generateItemsByData(t);if((0,v.$K)(n)){var s=[];(0,y.S6)(n,function(o,l){e._isAcceptableItem(l)&&(l=e._processItem(l),r&&r(l),(0,v.Kn)(l)&&!1!==tt.default.unwrap(l.visible)&&s.push(l))}),(!e._itemWatchers.length||!a)&&e._updateItemWatchers(n),this._setItems(s),this._sortItems()}},_cleanItemWatchers:function(){this._itemWatchers.forEach(function(t){t()}),this._itemWatchers=[]},_updateItemWatchers:function(t){var e=this,i=e._getWatch();t.forEach(function(a){(0,v.Kn)(a)&&(0,v.$K)(a.visible)&&(0,v.mf)(i)&&e._itemWatchers.push(i(function(){return tt.default.unwrap(a.visible)},function(){e._updateItems(e.option("layoutData")),e.repaint()},{skipImmediate:!0}))})},_generateItemsByData:function(t){var e=[];return(0,v.$K)(t)&&(0,y.S6)(t,function(i){e.push({dataField:i})}),e},_isAcceptableItem:function(t){var i=this._getDataByField(t.dataField||t);return!((0,v.mf)(i)&&!tt.default.isWrapped(i))},_processItem:function(t){if("string"==typeof t&&(t={dataField:t}),"object"==typeof t&&!t.itemType&&(t.itemType=qo),!(0,v.$K)(t.editorType)&&(0,v.$K)(t.dataField)){var e=this._getDataByField(t.dataField);t.editorType=(0,v.$K)(e)?this._getEditorTypeByDataType((0,v.dt)(e)):"dxTextBox"}var i;return"dxCheckBox"===t.editorType&&(t.allowIndeterminateState=null===(i=t.allowIndeterminateState)||void 0===i||i),t},_getEditorTypeByDataType:function(t){switch(t){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems:function(){(0,Zt.Sq)(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes:function(){this._items.sort(function(t,e){var i=t.visibleIndex,a=e.visibleIndex;return i>a?1:i<a?-1:0})},_initMarkup:function(){this._itemsRunTimeInfo.clear(),this.$element().addClass("dx-layout-manager"),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox:function(){var t=[];if(this._items&&this._items.length){var e=this._getColCount(),i=(0,p.Z)("<div>").appendTo(this.$element());this._prepareItemsWithMerging(e);var a=this._generateLayoutItems();this._responsiveBox=this._createComponent(i,FR,this._getResponsiveBoxConfig(a,e,t)),(0,Z.Ym)()||this._renderTemplates(t)}},_itemStateChangedHandler:function(t){this._refresh()},_renderTemplates:function(t){var e=this,i=0;t.forEach(a=>{var r,{item:n}=a;null!=n&&null!==(r=n.label)&&void 0!==r&&r.template&&i++}),(0,y.S6)(t,function(a,r){switch(r.itemType){case"empty":hv(r);break;case"button":e._renderButtonItem(r);break;default:e._renderFieldItem(r,i)}})},_getResponsiveBoxConfig:function(t,e,i){var a=this,r=a.option("colCountByScreen"),n=r&&r.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged:function(){var s=a.option("onLayoutChanged"),o=a.isSingleColumnMode();s&&(a.$element().toggleClass(q_,o),s(o))},onContentReady:function(s){(0,Z.Ym)()&&a._renderTemplates(i),a.option("onLayoutChanged")&&a.$element().toggleClass(q_,a.isSingleColumnMode(s.component))},itemTemplate:function(s,o,l){if(s.location){var d=(0,p.Z)(l),h=a._items[s.location.col+s.location.row*e];if(h){var c=[h.cssClass];d.toggleClass("dx-single-column-item-content",a.isSingleColumnMode(this)),0===s.location.row&&c.push("dx-first-row"),0===s.location.col&&c.push("dx-first-col"),h.itemType===qo&&a.option("isRoot")&&d.addClass(Q_);var _=s.location.col===e-1||s.location.col+s.location.colspan===e,g=a._getRowsCount(),f=s.location.row===g-1;_&&c.push("dx-last-col"),f&&c.push("dx-last-row"),"empty"!==h.itemType&&(c.push(j_),c.push(a.option("cssItemClass")),(0,v.$K)(h.col)&&c.push("dx-col-"+h.col)),i.push({itemType:h.itemType,item:h,$parent:d,rootElementCssClassList:c})}}},cols:a._generateRatio(e),rows:a._generateRatio(a._getRowsCount(),!0),dataSource:t,screenByWidth:a.option("screenByWidth"),singleColumnScreen:!n&&"xs"}},_getColCount:function(){var t=this.option("colCount"),e=this.option("colCountByScreen");if(e){var i=this.option("form").getTargetScreenFactor();i||(i=(0,Z.Ym)()?(0,Z.Wf)(this.option("screenByWidth")):"lg"),t=e[i]||t}if("auto"===t){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=t=this._getMaxColCount()}return t<1?1:t},_getMaxColCount:function(){if(!(0,Z.Ym)())return 1;var t=this.option("minColWidth"),e=(0,I.dz)(this.$element()),i=this._items.length,a=Math.floor(e/t)||1;return i<a?i:a},isCachedColCountObsolete:function(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging:function(t){var i,a,n,s,e=this._items.slice(0),r=[];for(s=0;s<e.length;s++)if(r.push(i=e[s]),(this.option("alignItemLabels")||i.alignItemLabels||i.colSpan)&&(i.col=this._getColByIndex(r.length-1,t)),i.colSpan>1&&i.col+i.colSpan<=t){for(a=[],n=0;n<i.colSpan-1;n++)a.push({merged:!0});r=r.concat(a)}else delete i.colSpan;this._setItems(r)},_getColByIndex:function(t,e){return t%e},_setItems:function(t){this._items=t,this._cashedColCount=null},_generateLayoutItems:function(){var a,r,t=this._items,e=this._getColCount(),i=[];for(r=0;r<t.length;r++)if(!(a=t[r]).merged){var n={location:{row:parseInt(r/e),col:this._getColByIndex(r,e)}};(0,v.$K)(a.disabled)&&(n.disabled=a.disabled),(0,v.$K)(a.visible)&&(n.visible=a.visible),(0,v.$K)(a.colSpan)&&(n.location.colspan=a.colSpan),(0,v.$K)(a.rowSpan)&&(n.location.rowspan=a.rowSpan),i.push(n)}return i},_renderEmptyItem:function(t){hv({$container:t})},_renderButtonItem:function(t){var{item:e,$parent:i,rootElementCssClassList:a}=t,{$rootElement:r,buttonInstance:n}=function EB(t){var{item:e,$parent:i,rootElementCssClassList:a,validationGroup:r,createComponentCallback:n}=t,s=(0,p.Z)("<div>").appendTo(i).addClass(a.join(" ")).addClass("dx-field-button-item").css("textAlign",function IB(t){return(0,v.$K)(t)?t:"right"}(e.horizontalAlignment));return i.css("justifyContent",function TB(t){switch(t){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}(e.verticalAlignment)),{$rootElement:s,buttonInstance:n((0,p.Z)("<div>").appendTo(s),"dxButton",(0,C.l)({validationGroup:r},e.buttonOptions))}}({item:e,$parent:i,rootElementCssClassList:a,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:e,widgetInstance:n,guid:e.guid,$itemContainer:r})},_renderFieldItem:function(t,e){var i,a,{item:r,$parent:n,rootElementCssClassList:s}=t,o=this._getDataByField(r.dataField),l=!1;if(void 0===o){var{allowIndeterminateState:d,editorType:u,dataField:h}=r;l=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:d,editorType:u,dataField:h})}var c=r.dataField||r.name,_=this._getFormOrThis(),{$fieldEditorContainer:g,widgetInstance:f,$rootElement:m}=bB(function QR(t){var{$parent:e,rootElementCssClassList:i,formOrLayoutManager:a,createComponentCallback:r,item:n,template:s,labelTemplate:o,name:l,formLabelLocation:d,requiredMessageTemplate:u,validationGroup:h,editorValue:c,canAssignUndefinedValueToEditor:_,editorValidationBoundary:g,editorStylingMode:f,showColonAfterLabel:m,managerLabelLocation:x,itemId:w,managerMarkOptions:T,labelMode:O,onLabelTemplateRendered:P}=t,F=(0,v.$K)(n.isRequired)?n.isRequired:!!function iB(t){var e;return t&&t.length&&(0,y.S6)(t,function(i,a){if("required"===a.type)return e=!0,!1}),e}(n.validationRules),N=n.itemType===qo,H=n.helpText?"dx-"+new Ee.Z:null,k=function aB(t){var{item:e,id:i,isRequired:a,managerMarkOptions:r,showColonAfterLabel:n,labelLocation:s,labelTemplate:o,formLabelMode:l,onLabelTemplateRendered:d}=t,u=JR.includes(e.editorType),h=(0,C.l)({showColon:n,location:s,id:i,visible:"outside"===l||u&&"hidden"!==l,isRequired:a},e?e.label:{},{markOptions:nv(r,a),labelTemplate:o,onLabelTemplateRendered:d});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor","dxDateRangeBox"].includes(e.editorType)&&(h.labelID="dx-label-".concat(new Ee.Z)),!h.text&&e.dataField&&(h.text=(0,Pe.GK)(e.dataField)),h.text&&(h.textWithoutColon=h.text,h.text+=h.showColon?":":""),h}({item:n,id:w,isRequired:F,managerMarkOptions:T,showColonAfterLabel:m,labelLocation:x,formLabelMode:O,labelTemplate:o,onLabelTemplateRendered:P}),U=k.visible&&(k.text||k.labelTemplate&&N),{location:j,labelID:de}=k,ae="top"!==j&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(n.editorType),pe=function tB(t){var{editorType:e,defaultEditorName:i,editorValue:a,canAssignUndefinedValueToEditor:r,externalEditorOptions:n,editorInputId:s,editorValidationBoundary:o,editorStylingMode:l,formLabelMode:d,labelText:u,labelMark:h}=t,c={};(void 0!==a||r)&&(c.value=a),-1!==XR.indexOf(e)&&(c.value=c.value||[]);var _=n?.labelMode;(0,v.$K)(_)||(_="outside"===d?"hidden":d);var f=(0,C.l)(!0,c,n,{inputAttr:{id:s},validationBoundary:o,stylingMode:n?.stylingMode||l,label:u,labelMode:_,labelMark:h});return n&&(f.dataSource&&(f.dataSource=n.dataSource),f.items&&(f.items=n.items)),i&&!f.name&&(f.name=i),f}({editorType:n.editorType,editorValue:c,defaultEditorName:n.dataField,canAssignUndefinedValueToEditor:_,externalEditorOptions:n.editorOptions,editorInputId:w,editorValidationBoundary:g,editorStylingMode:f,formLabelMode:O,labelText:k.textWithoutColon,labelMark:k.markOptions.showRequiredMark?String.fromCharCode(160)+k.markOptions.requiredMark:""});return{$parent:e,rootElementCssClassList:i,formOrLayoutManager:a,createComponentCallback:r,labelOptions:k,labelNeedBaselineAlign:ae,labelLocation:j,needRenderLabel:U,item:n,isSimpleItem:N,isRequired:F,template:s,helpID:H,labelID:de,name:l,helpText:!k.markOptions.showOptionalMark||k.visible||"hidden"===pe.labelMode||(0,v.$K)(n.helpText)?n.helpText:k.markOptions.optionalMark,formLabelLocation:d,requiredMessageTemplate:u,validationGroup:h,editorOptions:pe}}({$parent:n,rootElementCssClassList:s,item:r,name:c,editorValue:o,canAssignUndefinedValueToEditor:l,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:r.template?this._getTemplate(r.template):null,labelTemplate:null!==(i=r.label)&&void 0!==i&&i.template?this._getTemplate(r.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(c),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(_,e)&&_._alignLabels(this,this.isSingleColumnMode(_))}}));null===(a=this.option("onFieldItemRendered"))||void 0===a||a(),f&&r.dataField&&this._bindDataField(f,r.dataField,r.editorType,g),this._itemsRunTimeInfo.add({item:r,widgetInstance:f,guid:r.guid,$itemContainer:m})},_incTemplateRenderedCallCount(){var t;this._labelTemplateRenderedCallCount=(null!==(t=this._labelTemplateRenderedCallCount)&&void 0!==t?t:0)+1},_shouldAlignLabelsOnTemplateRendered(t,e){return t.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===e},_getMarkOptions:function(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis:function(){return this.option("form")||this},_bindDataField:function(t,e,i,a){var r=this._getFormOrThis();t.on("enterKey",function(n){r._createActionByOption("onEditorEnterKey")((0,C.l)(n,{dataField:e}))}),this._createWatcher(t,a,e),this.linkEditorToDataField(t,e,i)},_createWatcher:function(t,e,i){var a=this,r=a._getWatch();if((0,v.mf)(r)){var n=r(function(){return a._getDataByField(i)},function(){var s=a._getDataByField(i);if("dxTagBox"===t.NAME){var o=t.option("value");if(s!==o&&function(l,d){if(!Array.isArray(l)||!Array.isArray(d)||l.length!==d.length)return!1;for(var u=0;u<l.length;u++)if(l[u]!==d[u])return!1;return!0}(s,o))return}t.option("value",s)},{deep:!0,skipImmediate:!0});S.Z.on(e,dr.x,n)}},_getWatch:function(){if(!(0,v.$K)(this._watch)){var t=this.option("form");this._watch=t&&t.option("integrationOptions.watchMethod")}return this._watch},_createComponent:function(t,e,i){var a=this.option("readOnly"),r=Object.hasOwn(i,"readOnly"),n=this.callBase(t,e,(0,M.Z)({},i,{readOnly:r?i.readOnly:a})),s=!1;return n.on("optionChanged",o=>{"readOnly"===o.name&&!s&&(r=!0)}),this.on("optionChanged",function(o){"readOnly"===o.name&&!r&&(s=!0,n.option(o.name,o.value),s=!1)}),n},_generateRatio:function(t,e){var a,r,i=[];for(r=0;r<t;r++)a={ratio:1},e&&(a.baseSize="auto"),i.push(a);return i},_getRowsCount:function(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions:function(t){var e=this.option("layoutData");(0,v.Kn)(e)&&Object.getOwnPropertyNames(e).forEach(i=>delete this._optionsByReference["layoutData."+i]),(0,v.Kn)(t)&&Object.getOwnPropertyNames(t).forEach(i=>this._optionsByReference["layoutData."+i]=!0)},_resetWidget(t){this._disableEditorValueChangedHandler=!0,t.reset(),this._disableEditorValueChangedHandler=!1,t.option("isValid",!0)},_optionChanged(t){if(0!==t.fullName.search("layoutData."))switch(t.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(t.value),this.option("items")?(0,v.Qr)(t.value)||this._itemsRunTimeInfo.each((e,i)=>{if((0,v.$K)(i.item)){var a=i.item.dataField;if(a&&(0,v.$K)(i.widgetInstance)){var n=(0,Q.vb)(a)(t.value),{allowIndeterminateState:s,editorType:o}=i.item;void 0!==n||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:s,editorType:o,dataField:a})?i.widgetInstance.option("value",n):this._resetWidget(i.widgetInstance)}}}):(this._initDataAndItems(t.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(t.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":"auto"===this.option("colCount")&&this._resetColCount();break;case"readOnly":case"onFieldDataChanged":break;case"width":this.callBase(t),"auto"===this.option("colCount")&&this._resetColCount();break;default:this.callBase(t)}},_resetColCount:function(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(t,e){this.on("optionChanged",i=>{i.fullName==="layoutData.".concat(e)&&t._setOptionWithoutOptionChange("value",i.value)}),t.on("valueChanged",i=>{var a=(0,v.Kn)(i.value)||Array.isArray(i.value);!this._disableEditorValueChangedHandler&&(!a||i.value!==i.previousValue)&&this._updateFieldValue(e,i.value)})},_dimensionChanged:function(){"auto"===this.option("colCount")&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData:function(t,e){var i=this;(0,v.Kn)(t)?(0,y.S6)(t,function(a,r){i._updateFieldValue(a,r)}):"string"==typeof t&&i._updateFieldValue(t,e)},getEditor:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(t)||this._itemsRunTimeInfo.findWidgetInstanceByName(t)},isSingleColumnMode:function(t){var e=this._responsiveBox||t;if(e)return e.option("currentScreenFactor")===e.option("singleColumnScreen")},getItemsRunTimeInfo:function(){return this._itemsRunTimeInfo}});(0,J.Z)("dxLayoutManager",VB);var el="dx-validationsummary",PB=el+"-item",FB=el+"-item-data",cv=li.inherit({_getDefaultOptions(){return(0,C.l)(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),(0,C.l)(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){var t=this.$element(),e=this.option("validationGroup")||_e.Z.findGroup(t,this._modelByElement(t)),i=_e.Z.addGroup(e);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=e,this.groupSubscription=this._groupValidationHandler.bind(this),i.on("validated",this.groupSubscription)},_unsubscribeGroup(){var t=_e.Z.getGroupConfig(this._validationGroup);t&&t.off("validated",this.groupSubscription)},_getOrderedItems(t,e){var i=[];return(0,y.S6)(t,function(a,r){var n=(0,E.h3)(e,function(s){if(s.validator===r)return!0});n.length&&(i=i.concat(n))}),i},_groupValidationHandler(t){var e=this._getOrderedItems(t.validators,(0,y.UI)(t.brokenRules,function(i){return{text:i.message,validator:i.validator,index:i.index}}));this.validators=t.validators,(0,y.S6)(this.validators,(i,a)=>{if(a._validationSummary!==this){var r=this._itemValidationHandler.bind(this);a.on("validated",r),a.on("disposing",function(){a.off("validated",r),a._validationSummary=null,r=null}),a._validationSummary=this}}),this.option("items",e)},_itemValidationHandler(t){for(var{isValid:e,validator:i,brokenRules:a}=t,r=this.option("items"),n=!1,s=0,o=function(){var d=r[s];if(d.validator===i){var u=(0,E.h3)(a||[],function(h){return h.index===d.index})[0];if(e||!u)return r.splice(s,1),n=!0,"continue";u.message!==d.text&&(d.text=u.message,n=!0)}s++};s<r.length;)o();(0,y.S6)(a,function(d,u){(0,E.h3)(r,function(c){return c.validator===i&&c.index===u.index})[0]||(r.push({text:u.message,validator:i,index:u.index}),n=!0)}),n&&(r=this._getOrderedItems(this.validators,r),this.option("items",r))},_initMarkup(){this.$element().addClass(el),this.callBase()},_optionChanged(t){"validationGroup"===t.name?this._initGroupRegistration():this.callBase(t)},_itemClass:()=>PB,_itemDataKey:()=>FB,_postprocessRenderItem(t){S.Z.on(t.itemElement,"click",function(){t.itemData.validator&&t.itemData.validator.focus&&t.itemData.validator.focus()})},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});(0,J.Z)("dxValidationSummary",cv);const MB=cv;var pv="dx-validationgroup";(0,J.Z)("dxValidationGroup",class HB extends Li.Z{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),_e.Z.addGroup(this)}_initMarkup(){var e=this.$element();e.addClass(pv),e.find(".".concat("dx-validator")).each(function(i,a){Jo.getInstance((0,p.Z)(a))._initGroupRegistration()}),e.find(".".concat("dx-validationsummary")).each(function(i,a){MB.getInstance((0,p.Z)(a)).refreshValidationGroup()}),super._initMarkup()}validate(){return _e.Z.validateGroup(this)}reset(){return _e.Z.resetGroup(this)}_dispose(){_e.Z.removeGroup(this),this.$element().removeClass(pv),super._dispose()}_useTemplates(){return!1}});var _v="dx-state-focused",ZB=["items","isRequired","validationRules","visible"],vv=Me.default.inherit({_init:function(){this.callBase(),this._cachedColCountOptions=[],this._itemsRunTimeInfo=new b_,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{formID:"dx-"+new Ee.Z,formData:{},colCount:1,screenByWidth:Z.$n,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:A.Z.format("dxForm-optionalMark"),requiredMessage:A.Z.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:(0,hr.Z)().editorStylingMode,labelMode:"outside"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return(0,oe.x2)()},options:{showColonAfterLabel:!1,labelLocation:"top"}}])},_setOptionsByReference:function(){this.callBase(),(0,C.l)(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:function(t){return parseInt(t.attr(iv))},_applyLabelsWidthByCol:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.inOneColumn?j_:Y_+e,n=i.excludeTabbed?":not(.".concat(ev,")"):"";!function dB(t,e,i){var s,o,a="".concat(e," > .").concat(J_,":not(.").concat(sv,"top) > .").concat(X_),r=t.find(a),n=r.length,l=0;for(o=0;o<n;o++)(s=uB(r[o]))>l&&(l=s);for(o=0;o<n;o++)r[o].style.width=l+"px"}(t,".".concat(r).concat(n))},_applyLabelsWidth:function(t,e,i,a,r){a=i?1:a||this._getGroupColCount(t);var s,n={excludeTabbed:e,inOneColumn:i};for(s=0;s<a;s++)this._applyLabelsWidthByCol(t,s,n,r)},_getGroupElementsInColumn:function(t,e,i){var a=(0,v.$K)(i)?"."+tv+i:"";return t.find("."+Y_+e+" > ."+jo+" > ."+Yo+a)},_applyLabelsWidthWithGroups:function(t,e,i,a){if(!0===this.option("alignRootItemLabels"))for(var r=t.find(".".concat(Q_)),n=0;n<e;n++)this._applyLabelsWidthByCol(r,n,i,a);if(this.option("alignItemLabelsInAllGroups"))this._applyLabelsWidthWithNestedGroups(t,e,i,a);else{var l,o=this.$element().find("."+Yo);for(l=0;l<o.length;l++)this._applyLabelsWidth(o.eq(l),i,void 0,void 0,a)}},_applyLabelsWidthWithNestedGroups:function(t,e,i,a){var n,s,o,l,r={excludeTabbed:i};for(n=0;n<e;n++)for(l=this._getGroupElementsInColumn(t,n),this._applyLabelsWidthByCol(l,0,r,a),s=0;s<this._groupsColCount.length;s++){l=this._getGroupElementsInColumn(t,n,this._groupsColCount[s]);var d=this._getGroupColCount(l);for(o=1;o<d;o++)this._applyLabelsWidthByCol(l,o,r,a)}},_labelLocation:function(){return this.option("labelLocation")},_alignLabelsInColumn:function(t){var{layoutManager:e,inOneColumn:i,$container:a,excludeTabbed:r,items:n}=t;if((0,Z.Ym)()&&"top"!==this._labelLocation()){var s=nv(e._getMarkOptions());i?this._applyLabelsWidth(a,r,!0,void 0,s):this._checkGrouping(n)?this._applyLabelsWidthWithGroups(a,e._getColCount(),r,s):this._applyLabelsWidth(a,r,!1,e._getColCount(),s)}},_prepareFormData:function(){(0,v.$K)(this.option("formData"))||this.option("formData",{})},_setStylingModeClass:function(){"underlined"===this.option("stylingMode")&&this.$element().addClass("dx-form-styling-mode-underlined")},_initMarkup:function(){_e.Z.addGroup(this._getValidationGroup()),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass("dx-form"),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription:function(){if((0,Z.Ym)()){var t=this.$element().get(0);wa.Z.unobserve(t),wa.Z.observe(t,()=>{this._resizeHandler()})}},_resizeHandler:function(){this._cachedLayoutManagers.length&&(0,y.S6)(this._cachedLayoutManagers,(t,e)=>{var i;null===(i=e.option("onLayoutChanged"))||void 0===i||i(e.isSingleColumnMode())})},_getCurrentScreenFactor:function(){return(0,Z.Ym)()?(0,Z.Wf)(this.option("screenByWidth")):"lg"},_clearCachedInstances:function(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels:function(t,e){this._alignLabelsInColumn({$container:this.$element(),layoutManager:t,excludeTabbed:!0,items:this.option("items"),inOneColumn:e}),(0,Dt.U_)(this.$element().find(".".concat(Ah)))},_clean:function(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,wa.Z.unobserve(this.$element().get(0))},_renderScrollable:function(){var t=this.option("useNativeScrolling");this._scrollable=new _t(this.$element(),{useNative:!!t,useSimulatedScrollbar:!t,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent:function(){return this.option("scrollingEnabled")?(0,p.Z)(this._scrollable.content()):this.$element()},_clearValidationSummary:function(){var t;null===(t=this._$validationSummary)||void 0===t||t.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary:function(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=(0,p.Z)("<div>").addClass("dx-form-validation-summary").appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(t,e,i,a){if(t){for(var r=[],n=0;n<t.length;n++){var s=t[n],o=N_(i,Go(n,a)),l={item:s,itemIndex:n,path:o},d=this._itemsRunTimeInfo.add(l);if((0,v.HD)(s)&&(s={dataField:s}),(0,v.Kn)(s)){var u=(0,M.Z)({},s);l.preparedItem=u,u.guid=d,this._tryPrepareGroupItem(u),this._tryPrepareTabbedItem(u,o),this._tryPrepareItemTemplate(u),e&&(u.cssItemClass=ev),u.items&&(u.items=this._prepareItems(u.items,e,o)),r.push(u)}else r.push(s)}return r}},_tryPrepareGroupItem:function(t){"group"===t.itemType&&(t.alignItemLabels=(0,E.IS)(t.alignItemLabels,!0),t._prepareGroupItemTemplate=e=>{t.template&&(t.groupContentTemplate=this._getTemplate(e)),t.template=this._itemGroupTemplate.bind(this,t)},t._prepareGroupItemTemplate(t.template))},_tryPrepareTabbedItem:function(t,e){"tabbed"===t.itemType&&(t.template=this._itemTabbedTemplate.bind(this,t),t.tabs=this._prepareItems(t.tabs,!0,e,!0))},_tryPrepareItemTemplate:function(t){t.template&&(t.template=this._getTemplate(t.template))},_checkGrouping:function(t){if(t)for(var e=0;e<t.length;e++)if("group"===t[e].itemType)return!0},_renderLayout:function(){var t=this,e=t.option("items"),i=t._getContent();e=t._prepareItems(e),t._rootLayoutManager=t._renderLayoutManager(i,this._createLayoutManagerOptions(e,{isRoot:!0,colCount:t.option("colCount"),alignItemLabels:t.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged:function(a){t._alignLabels.bind(t)(t._rootLayoutManager,a)},onContentReady:function(a){t._alignLabels(a.component,a.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:function(t){return t.items||[]},_itemTabbedTemplate:function(t,e,i){var a,r=(0,p.Z)("<div>").appendTo(i),n=(0,C.l)({},t.tabPanelOptions,{dataSource:t.tabs,onItemRendered:l=>{var d,u;null===(d=t.tabPanelOptions)||void 0===d||null===(u=d.onItemRendered)||void 0===u||u.call(d,l),(0,Dt.Uo)(l.itemElement)},itemTemplate:(l,d,u)=>{var h=(0,p.Z)(u),c=(0,E.IS)(l.alignItemLabels,!0),_=this._renderLayoutManager(h,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(l),{colCount:l.colCount,alignItemLabels:c,screenByWidth:this.option("screenByWidth"),colCountByScreen:l.colCountByScreen,cssItemClass:l.cssItemClass,onLayoutChanged:g=>{this._alignLabelsInColumn({$container:h,layoutManager:_,items:l.items,inOneColumn:g})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(l.guid,{layoutManager:_}),c&&this._alignLabelsInColumn({$container:h,layoutManager:_,items:l.items,inOneColumn:_.isSingleColumnMode()})}}),s=(l,d)=>{Array.isArray(l)&&l.forEach(u=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(u.guid,{widgetInstance:d}))},o=this._createComponent(r,bR,n);(0,p.Z)(i).parent().addClass("dx-field-item-has-tabs"),o.on("optionChanged",l=>{"dataSource"===l.fullName&&s(l.value,l.component)}),s([{guid:t.guid},...null!==(a=t.tabs)&&void 0!==a?a:[]],o)},_itemGroupTemplate:function(t,e,i){var a=e.editorOptions.inputAttr.id,r=(0,p.Z)("<div>").toggleClass("dx-form-group-with-caption",(0,v.$K)(t.caption)&&t.caption.length).addClass(Yo).appendTo(i);this.setAria({role:"group",labelledby:a},r),(0,p.Z)(i).parent().addClass("dx-field-item-has-group"),t.caption&&(0,p.Z)("<span>").addClass("dx-form-group-caption").text(t.caption).attr("id",a).appendTo(r);var s=(0,p.Z)("<div>").addClass("dx-form-group-content").appendTo(r);if(t.groupContentTemplate)t._renderGroupContentTemplate=()=>{s.empty();var d={formData:this.option("formData"),component:this};t.groupContentTemplate.render({model:d,container:(0,W.u)(s)})},t._renderGroupContentTemplate();else{var o=this._renderLayoutManager(s,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(t),{colCount:t.colCount,colCountByScreen:t.colCountByScreen,alignItemLabels:t.alignItemLabels,cssItemClass:t.cssItemClass}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(t.guid,{layoutManager:o});var l=o._getColCount();this._groupsColCount.includes(l)||this._groupsColCount.push(l),r.addClass(tv+l),r.attr(iv,l)}},_createLayoutManagerOptions:function(t,e){return function ER(t){var{form:e,$formElement:i,formOptions:a,items:r,validationGroup:n,extendedLayoutManagerOptions:s,onFieldDataChanged:o,onContentReady:l,onDisposing:d,onFieldItemRendered:u}=t;return(0,C.l)({form:e,items:r,$formElement:i,validationGroup:n,onFieldDataChanged:o,onContentReady:l,onDisposing:d,onFieldItemRendered:u,validationBoundary:a.scrollingEnabled?i:void 0,scrollingEnabled:a.scrollingEnabled,showRequiredMark:a.showRequiredMark,showOptionalMark:a.showOptionalMark,requiredMark:a.requiredMark,optionalMark:a.optionalMark,requiredMessage:a.requiredMessage,screenByWidth:a.screenByWidth,layoutData:a.formData,labelLocation:a.labelLocation,customizeItem:a.customizeItem,minColWidth:a.minColWidth,showColonAfterLabel:a.showColonAfterLabel,onEditorEnterKey:a.onEditorEnterKey,labelMode:a.labelMode},{isRoot:s.isRoot,colCount:s.colCount,alignItemLabels:s.alignItemLabels,cssItemClass:s.cssItemClass,colCountByScreen:s.colCountByScreen,onLayoutChanged:s.onLayoutChanged,width:s.width})}({form:this,formOptions:this.option(),$formElement:this.$element(),items:t,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:e,onFieldDataChanged:i=>{this._isDataUpdating||this._triggerOnFieldDataChanged(i)},onContentReady:i=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(i.component._itemsRunTimeInfo),e.onContentReady&&e.onContentReady(i)},onDisposing:i=>{var{component:a}=i,r=a.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(r)},onFieldItemRendered:()=>{var i;null===(i=this._validationSummary)||void 0===i||i.refreshValidationGroup()}})},_renderLayoutManager:function(t,e){this._cachedColCountOptions.push({colCountByScreen:(0,C.l)({lg:e.colCount,md:e.colCount,sm:e.colCount,xs:1},e.colCountByScreen)});var a=(0,p.Z)("<div>");a.appendTo(t);var r=this._createComponent(a,"dxLayoutManager",e);return r.on("autoColCountChanged",()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout(()=>!this._disposed&&this._refresh(),0)}),this._cachedLayoutManagers.push(r),r},_getValidationGroup:function(){return this.option("validationGroup")||this},_createComponent:function(t,e,i){return this._extendConfig(i=i||{},{readOnly:this.option("readOnly")}),this.callBase(t,e,i)},_attachSyncSubscriptions:function(){var t=this;t.on("optionChanged",function(e){var i=e.fullName;"formData"===i&&((0,v.$K)(e.value)||t._options.silent("formData",e.value={}),t._triggerOnFieldDataChangedByDataSet(e.value)),t._cachedLayoutManagers.length&&(0,y.S6)(t._cachedLayoutManagers,function(a,r){"formData"===i&&(t._isDataUpdating=!0,r.option("layoutData",e.value),t._isDataUpdating=!1),("readOnly"===e.name||"disabled"===e.name)&&r.option(i,e.value)})})},_optionChanged:function(t){var e=t.fullName.split(".");e.length>1&&-1!==e[0].search("items")&&this._itemsOptionChangedHandler(t)||e.length>1&&-1!==e[0].search("formData")&&this._formDataOptionChangedHandler(t)||this._defaultOptionChangedHandler(t)},_defaultOptionChangedHandler:function(t){switch(t.name){case"formData":this.option("items")?(0,v.Qr)(t.value)&&this._resetValues():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":"auto"===this.option("colCount")&&this._invalidate();break;case"width":this.callBase(t),this._rootLayoutManager.option(t.name,t.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":_e.Z.removeGroup(t.previousValue||this),this._invalidate();break;default:this.callBase(t)}},_itemsOptionChangedHandler:function(t){var e=t.fullName.split("."),i=t.value,a=this._getItemPath(e),r=this.option(a),n=t.fullName.replace(a+".",""),s=n.split(".")[0].replace(/\[\d+]/,""),o=this._tryCreateItemOptionAction(s,r,r[s],t.previousValue,a),l=this._tryExecuteItemOptionAction(o)||this._tryChangeLayoutManagerItemOption(t.fullName,i);if(!l&&r){this._changeItemOption(r,n,i);var d=this._generateItemsFromData(this.option("items"));this.option("items",d),l=!0}return l},_formDataOptionChangedHandler:function(t){var e=t.fullName.split("."),i=t.value,a=e.slice(1).join("."),r=this.getEditor(a);return r?r.option("value",i):this._triggerOnFieldDataChanged({dataField:a,value:i}),!0},_tryCreateItemOptionAction:function(t,e,i,a,r){return"tabs"===t&&(this._itemsRunTimeInfo.removeItemsByPathStartWith("".concat(r,".tabs")),i=this._prepareItems(i,!0,r,!0)),((t,e)=>{switch(t){case"editorOptions":case"buttonOptions":return new IR(e);case"validationRules":return new OR(e);case"cssClass":return new RR(e);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new z_((0,C.l)(e,{optionName:t}));case"tabs":return new DR(e);case"template":var i,a,r,n=null!==(i=null==e||null===(a=e.item)||void 0===a?void 0:a.itemType)&&void 0!==i?i:null===(r=e.itemsRunTimeInfo.findPreparedItemByItem(e?.item))||void 0===r?void 0:r.itemType;return"simple"===n?new TR(e):"group"===n?new AR(e):new z_((0,C.l)(e,{optionName:t}));default:return null}})(t,{item:e,value:i,previousValue:a,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:function(t){return t&&t.tryExecute()},_updateValidationGroupAndSummaryIfNeeded:function(t){var i,e=H_(t);ZB.indexOf(e)>-1&&(_e.Z.addGroup(this._getValidationGroup()),this.option("showValidationSummary"))&&(null===(i=this._validationSummary)||void 0===i||i.refreshValidationGroup())},_setLayoutManagerItemOption(t,e,i,a){if(this._updateLockCount>0){!t._updateLockCount&&t.beginUpdate();var r=this._itemsRunTimeInfo.findKeyByPath(a);this.postponedOperations.add(r,()=>(!t._disposed&&t.endUpdate(),(new b.BH).resolve()))}var n=s=>{if(s.component.off("contentReady",n),Z_(a)){var o=(t=>{for(var e=t.split("."),i=[...e],a=e.length-1;a>=0;a--){if(Z_(e[a]))return i.join(".");i.splice(a,1)}return""})(a),l=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(o);l&&this._alignLabelsInColumn({items:l.option("items"),layoutManager:l,$container:l.$element(),inOneColumn:l.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};t.on("contentReady",n),t.option(e,i),this._updateValidationGroupAndSummaryIfNeeded(e)},_tryChangeLayoutManagerItemOption(t,e){var i=t.split("."),a=H_(t);if("items"===a&&i.length>1){var r=this._getItemPath(i),n=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(r);if(n){this._itemsRunTimeInfo.removeItemsByItems(n.getItemsRunTimeInfo());var s=this._prepareItems(e,!1,r);return this._setLayoutManagerItemOption(n,a,s,r),!0}}else if(i.length>2){var o=i.length-2,l=this._getItemPath(i.slice(0,o)),d=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(l);if(d){var u=Za(i[o],a);if("editorType"===a&&d.option(u)!==e)return!1;if("visible"===a){var h=this.option(Za(l,"items"));if(h&&h.length){var c=d.option("items");h.forEach((_,g)=>{c[g].visibleIndex=_.visibleIndex})}}return this._setLayoutManagerItemOption(d,u,e,l),!0}}return!1},_tryChangeLayoutManagerItemOptions(t,e){var i;return this.beginUpdate(),(0,y.S6)(e,(a,r)=>{if(!(i=this._tryChangeLayoutManagerItemOption(Za(t,a),r)))return!1}),this.endUpdate(),i},_getItemPath:function(t){var i,e=t[0];for(i=1;i<t.length&&-1!==t[i].search(/items\[\d+]|tabs\[\d+]/);i++)e+="."+t[i];return e},_triggerOnFieldDataChanged:function(t){this._createActionByOption("onFieldDataChanged")(t)},_triggerOnFieldDataChangedByDataSet:function(t){var e=this;t&&(0,v.Kn)(t)&&(0,y.S6)(t,function(i,a){e._triggerOnFieldDataChanged({dataField:i,value:a})})},_updateFieldValue:function(t,e){if((0,v.$K)(this.option("formData"))){var i=this.getEditor(t);this.option("formData."+t,e),i&&i.option("value")!==e&&i.option("value",e)}},_generateItemsFromData:function(t){var e=this.option("formData"),i=[];return!t&&(0,v.$K)(e)&&(0,y.S6)(e,function(a){i.push({dataField:a})}),t&&(0,y.S6)(t,function(a,r){(0,v.Kn)(r)?i.push(r):i.push({dataField:r})}),i},_getItemByField:function(t,e){var s,i=this,a=(0,v.Kn)(t)?t:i._getFieldParts(t),r=a.fieldName,n=a.fieldPath;return e.length&&(0,y.S6)(e,function(o,l){var d=l.itemType;if(n.length){var u=n.slice();l=i._getItemByFieldPath(u,r,l)}else if("group"===d&&!l.caption&&!l.name||"tabbed"===d&&!l.name){var h=i._getSubItemField(d);l.items=i._generateItemsFromData(l.items),l=i._getItemByField({fieldName:r,fieldPath:n},l[h])}if(((t,e)=>!!t&&(t.dataField===e||t.name===e||Uo(t.title)===e||"group"===t.itemType&&Uo(t.caption)===e))(l,r))return s=l,!1}),s},_getFieldParts:function(t){for(var e=t,i=e.indexOf("."),a=[];-1!==i;)a.push(e.substr(0,i)),i=(e=e.substr(i+1)).indexOf(".");return{fieldName:e,fieldPath:a.reverse()}},_getItemByFieldPath:function(t,e,i){var s,a=i.itemType,r=this._getSubItemField(a),n="group"===a||"tabbed"===a||i.title;do{if(!n)break;var o=i.name||i.caption||i.title,l=(0,v.$K)(o),d=Uo(o),u=void 0;if(i[r]=this._generateItemsFromData(i[r]),l&&(u=t.pop()),!t.length&&(s=this._getItemByField(e,i[r])))break;(!l||l&&d===u)&&t.length&&(s=this._searchItemInEverySubItem(t,e,i[r]))}while(t.length&&!(0,v.$K)(s));return s},_getSubItemField:function(t){return"tabbed"===t?"tabs":"items"},_searchItemInEverySubItem:function(t,e,i){var r,a=this;return(0,y.S6)(i,function(n,s){if(r=a._getItemByFieldPath(t.slice(),e,s))return!1}),r||(r=!1),r},_changeItemOption:function(t,e,i){(0,v.Kn)(t)&&(t[e]=i)},_dimensionChanged:function(){var t=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==t&&(this._isColCountChanged(this._lastMarkupScreenFactor,t)&&(this._targetScreenFactor=t,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=t)},_isColCountChanged:function(t,e){var i=!1;return(0,y.S6)(this._cachedColCountOptions,function(a,r){if(r.colCountByScreen[t]!==r.colCountByScreen[e])return i=!0,!1}),i},_refresh:function(){var t="."+_v+" input, ."+_v+" textarea";S.Z.trigger(this.$element().find(t),"change"),this.callBase()},_resetValues:function(){this._itemsRunTimeInfo.each(function(t,e){(0,v.$K)(e.widgetInstance)&&Ot.Z.isEditor(e.widgetInstance)&&(e.widgetInstance.reset(),e.widgetInstance.option("isValid",!0))}),_e.Z.resetGroup(this._getValidationGroup())},_updateData:function(t,e,i){var a=this,r=i?e:t;(0,v.Kn)(r)?(0,y.S6)(r,function(n,s){a._updateData(i?t+"."+n:n,s,(0,v.Kn)(s))}):(0,v.HD)(t)&&a._updateFieldValue(t,e)},registerKeyHandler:function(t,e){this.callBase(t,e),this._itemsRunTimeInfo.each(function(i,a){(0,v.$K)(a.widgetInstance)&&a.widgetInstance.registerKeyHandler(t,e)})},_focusTarget:function(){return this.$element().find("."+jo+" [tabindex]").first()},_visibilityChanged:function(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout:function(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose:function(){this._clearAutoColCountChangedTimeout(),_e.Z.removeGroup(this._getValidationGroup()),this.callBase()},resetValues:function(){this._resetValues()},updateData:function(t,e){this._updateData(t,e)},getEditor:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(t)||this._itemsRunTimeInfo.findWidgetInstanceByName(t)},getButton:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByName(t)},updateDimensions:function(){var t=this,e=new b.BH;return t._scrollable?t._scrollable.update().done(function(){e.resolveWith(t)}):e.resolveWith(t),e.promise()},itemOption:function(t,e,i){var a=this._generateItemsFromData(this.option("items")),r=this._getItemByField(t,a),n=$_(a,r);if(r)switch(arguments.length){case 1:return r;case 3:var s=this._tryCreateItemOptionAction(e,r,i,r[e],n);this._changeItemOption(r,e,i);var o=Za(n,e);!this._tryExecuteItemOptionAction(s)&&!this._tryChangeLayoutManagerItemOption(o,i)&&this.option("items",a);break;default:var l;(0,v.Kn)(e)&&!this._tryChangeLayoutManagerItemOptions(n,e)&&((0,y.S6)(e,(d,u)=>{var h=this._tryCreateItemOptionAction(d,r,u,r[d],n);this._changeItemOption(r,d,u),!l&&!this._tryExecuteItemOptionAction(h)&&(l=!0)}),l&&this.option("items",a))}},validate:function(){return _e.Z.validateGroup(this._getValidationGroup())},getItemID:function(t){return"dx_"+this.option("formID")+"_"+(t||new Ee.Z)},getTargetScreenFactor:function(){return this._targetScreenFactor}});(0,J.Z)("dxForm",vv);const gv=vv;var zB={extenders:{controllers:{editing:t=>class extends t{init(){this._editForm=null,this._updateEditFormDeferred=null,super.init()}isFormOrPopupEditMode(){return this.isPopupEditMode()||this.isFormEditMode()}isPopupEditMode(){return this.option("editing.mode")===Ho}isFormEditMode(){return this.option("editing.mode")===qi}getFirstEditableColumnIndex(){var e=this._firstFormItem;if(this.isFormEditMode()&&e){var i=this.option(qe),a=this._dataController.getRowIndexByKey(i),r=this._rowsView.getCellElements(a);return this._rowsView._getEditFormEditorVisibleIndex(r,e.column)}return super.getFirstEditableColumnIndex()}getEditFormRowIndex(){return this.isFormOrPopupEditMode()?this._getVisibleEditRowIndex():super.getEditFormRowIndex()}_isEditColumnVisible(){var e=super._isEditColumnVisible(),i=this.option("editing");return this.isFormOrPopupEditMode()&&i.allowUpdating||e}_handleDataChanged(e){var i,a;if(this.isPopupEditMode()){var r=this.option("editing.editRowKey"),n=null===(i=e?.items)||void 0===i?void 0:i.some(o=>(0,E.bY)(o.key,r)),s=(null===(a=e.changeTypes)||void 0===a?void 0:a.length)&&e.changeTypes.every(o=>"insert"===o);("refresh"===e.changeType||n&&e.isOptionChanged)&&!s&&this._repaintEditPopup()}super._handleDataChanged(e)}getPopupContent(){var e,i=null===(e=this._editPopup)||void 0===e?void 0:e.option("visible");if(this.isPopupEditMode()&&i)return this._$popupContent}_showAddedRow(e){this.isPopupEditMode()?this._showEditPopup(e):super._showAddedRow(e)}_cancelEditDataCore(){super._cancelEditDataCore(),this.isPopupEditMode()&&this._hideEditPopup()}_updateEditRowCore(e,i,a){var r,n=this._editForm;this.isPopupEditMode()?this.option("repaintChangesOnly")?(null===(r=e.update)||void 0===r||r.call(e,e),this._rowsView.renderDelayedTemplates()):n&&(this._updateEditFormDeferred=(new b.BH).done(()=>n.repaint()),this._updateLockCount||this._updateEditFormDeferred.resolve()):super._updateEditRowCore(e,i,a)}_showEditPopup(e,i){var a="desktop"!==K.Z.current().deviceType,r=this.addWidgetPrefix("edit-popup"),n=(0,C.l)({showTitle:!1,fullScreen:a,wrapperAttr:{class:r},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getSaveButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getCancelButtonConfig()}],contentTemplate:this._getPopupEditFormTemplate(e)},this.option(_n));if(!this._editPopup){var s=(0,p.Z)("<div>").appendTo(this.component.$element()).addClass(r);this._editPopup=this._createComponent(s,gt),this._editPopup.on("hiding",this._getEditPopupHiddenHandler()),this._editPopup.on("shown",o=>{var l;S.Z.trigger(o.component.$content().find(No).not(".".concat(RO)).first(),"focus"),i&&(null===(l=this._editForm)||void 0===l||l.repaint())})}this._editPopup.option(n),this._editPopup.show(),super._showEditPopup(e,i)}_getPopupEditFormTemplate(e){var i=this.component.getVisibleRows()[e],a={row:i,values:i.values,rowType:i.rowType,key:i.key,rowIndex:e};return this._rowsView._addWatchMethod(a,i),r=>{var n=this.getEditFormTemplate(),s=this._createComponent((0,p.Z)("<div>").appendTo(r),_t);this._$popupContent=(0,p.Z)(s.content()),n(this._$popupContent,a,{isPopupForm:!0}),this._rowsView.renderDelayedTemplates(),(0,p.Z)(r).parent().attr("aria-label",this.localize("dxDataGrid-ariaEditForm"))}}_repaintEditPopup(){var e,i,a=this._getVisibleEditRowIndex();if(a>=0){var r=null===(e=this._editPopup)||void 0===e?void 0:e.option("animation");null===(i=this._editPopup)||void 0===i||i.option("animation",null),this._showEditPopup(a,!0),void 0!==r&&this._editPopup.option("animation",r)}}_hideEditPopup(){var e;null===(e=this._editPopup)||void 0===e||e.option("visible",!1)}optionChanged(e){if("editing"===e.name&&this.isFormOrPopupEditMode()){var{fullName:i}=e;0===i.indexOf(ko)?(this._handleFormOptionChange(e),e.handled=!0):0===i.indexOf(_n)&&(this._handlePopupOptionChange(e),e.handled=!0)}super.optionChanged(e)}_handleFormOptionChange(e){var i;if(this.isFormEditMode()){var a=this._getVisibleEditRowIndex();a>=0&&this._dataController.updateItems({changeType:"update",rowIndices:[a]})}else null!==(i=this._editPopup)&&void 0!==i&&i.option("visible")&&0===e.fullName.indexOf(ko)&&this._repaintEditPopup()}_handlePopupOptionChange(e){var i=this._editPopup;if(i){var a=e.fullName.slice(14);a?i.option(a,e.value):i.option(e.value)}}renderFormEditorTemplate(e,i,a,r,n){var s=this,o=(0,p.Z)(r),{column:l}=i,d=(t=>{var e,{column:i}=t;return t.isCustomEditorType?t.editorType:null===(e=i.formItem)||void 0===e?void 0:e.editorType})(i),u=e?.row.data,h=a.component,{label:c,labelMark:_,labelMode:g}=a.editorOptions||{},f=(0,C.l)({},e,{data:u,cellElement:null,isOnForm:!0,item:i,id:h.getItemID(i.name||i.dataField),column:(0,C.l)({},l,{editorType:d,editorOptions:(0,C.l)({label:c,labelMark:_,labelMode:g},l.editorOptions,i.editorOptions)}),columnIndex:l.index,setValue:!n&&l.allowEditing&&function(x,w){s.updateFieldValue(f,x,w)}});f.value=l.calculateCellValue(u);var m=this._getFormEditItemTemplate.bind(this)(f,l);return this._rowsView.renderTemplate(o,m,f,!!(0,st.al)(o)).done(()=>{this._rowsView._updateCell(o,f)}),f}getFormEditorTemplate(e,i){var a=this.component.columnOption(i.dataField);return(r,n)=>{var s,o,l=(0,p.Z)(n);null===(o=(s=e.row).watch)||void 0===o||o.call(s,()=>a.selector(e.row.data),()=>{var d=l.find(".dx-widget").first(),u=d.data("dxValidator"),h=u?.option();l.contents().remove(),e=this.renderFormEditorTemplate.bind(this)(e,i,r,l),u=(d=l.find(".dx-widget").first()).data("dxValidator"),h&&!u&&d.dxValidator({validationRules:h.validationRules,validationGroup:h.validationGroup,dataGetter:h.dataGetter})}),e=this.renderFormEditorTemplate.bind(this)(e,i,r,l)}}getEditFormOptions(e){var i,a=null===(i=this._getValidationGroupsInForm)||void 0===i?void 0:i.call(this,e),r=this.option("editing.form.customizeItem"),n=this.addWidgetPrefix(g_),s=this.option("editing.form.items"),o={};if(s)x_(s,d=>{var u=d?.name||d?.dataField;u&&(o[u]=!!d.editorType)});else{var l=this.getController("columns").getColumns();s=[],(0,y.S6)(l,(d,u)=>{!u.isBand&&!u.type&&s.push({column:u,name:u.name,dataField:u.dataField})})}return(0,C.l)({},a,{items:s,formID:"dx-".concat(new Ee.Z),customizeItem:d=>{var u,h=d.name||d.dataField;if((d.column||h)&&(u=d.column||this._columnsController.columnOption(d.name?"name:".concat(d.name):"dataField:".concat(d.dataField))),u){if(d.label=d.label||{},d.label.text=d.label.text||u.caption,"boolean"===u.dataType&&void 0===d.label.visible){var c=this.option("editing.form.labelMode");("floating"===c||"static"===c)&&(d.label.visible=!0)}d.template=d.template||this.getFormEditorTemplate(e,d),d.column=u,d.isCustomEditorType=o[h],u.formItem&&(0,C.l)(d,u.formItem),void 0===d.isRequired&&u.validationRules&&(d.isRequired=u.validationRules.some(g=>"required"===g.type),d.validationRules=[]);var _=!(0,v.$K)(d.visible)||d.visible;!this._firstFormItem&&_&&(this._firstFormItem=d)}r?.call(this,d),d.cssClass=(0,v.HD)(d.cssClass)?"".concat(d.cssClass," ").concat(n):n}})}getEditFormTemplate(){return(e,i,a)=>{var r=this.option(ko),n=this.getEditFormOptions(i),s=(0,p.Z)("<div>").appendTo(e),o=a?.isPopupForm;if(this._firstFormItem=void 0,o&&s.addClass(this.addWidgetPrefix("edit-popup-form")),this._editForm=this._createComponent(s,gv,(0,C.l)({},r,n)),!o){var l=(0,p.Z)("<div>").addClass(this.addWidgetPrefix("form-buttons-container")).appendTo(e);this._createComponent((0,p.Z)("<div>").appendTo(l),Be.Z,this._getSaveButtonConfig()),this._createComponent((0,p.Z)("<div>").appendTo(l),Be.Z,this._getCancelButtonConfig())}this._editForm.on("contentReady",()=>{var d;this._rowsView.renderDelayedTemplates(),null===(d=this._editPopup)||void 0===d||d.repaint()})}}getEditForm(){return this._editForm}_endUpdateCore(){var e;null===(e=this._updateEditFormDeferred)||void 0===e||e.resolve()}_beforeEndSaving(e){var i;super._beforeEndSaving(e),this.isPopupEditMode()&&(null===(i=this._editPopup)||void 0===i||i.hide())}_processDataItemCore(e,i,a,r,n){var{type:s}=i;this.isPopupEditMode()&&s===St&&(e.visible=!1),super._processDataItemCore(e,i,a,r,n)}_editRowFromOptionChangedCore(e,i){var a=this.isPopupEditMode();super._editRowFromOptionChangedCore(e,i,a),a&&this._showEditPopup(i)}},data:{_updateEditItem(t){this._editingController.isFormEditMode()&&(t.rowType="detail")},_getChangedColumnIndices(t,e,i,a){if(!1!==a||!e.isEditing||!this._editingController.isFormEditMode())return this.callBase.apply(this,arguments)}}},views:{rowsView:{_renderCellContent(t,e){"data"===e.rowType&&this._editingController.isPopupEditMode()&&!1===e.row.visible||this.callBase.apply(this,arguments)},getCellElements(t){var e=this.callBase(t),i=this._editingController,a=i.getEditForm();return i.getEditFormRowIndex()===t&&e&&a?a.$element().find(".".concat(this.addWidgetPrefix(g_),", .").concat("dx-button")):e},_getVisibleColumnIndex(t,e,i){if(this._editingController.getEditFormRowIndex()===e&&(0,v.HD)(i)){var r=this._columnsController.columnOption(i);return this._getEditFormEditorVisibleIndex(t,r)}return this.callBase.apply(this,arguments)},_getEditFormEditorVisibleIndex(t,e){var i=-1;return(0,y.S6)(t,(a,r)=>{var n=(0,p.Z)(r).find(".dx-field-item-content").data("dx-form-item");if(n?.column&&e&&n.column.index===e.index)return i=a,!1}),i},_isFormItem(t){var e="detail"===t.rowType||"detailAdaptive"===t.rowType,i="data"===t.rowType&&this._editingController.isPopupEditMode();return(e||i)&&t.item},_updateCell(t,e){this._isFormItem(e)?this._formItemPrepared(e,t):this.callBase(t,e)}}}}};$.registerModule("editingFormBased",zB);var KB={extenders:{controllers:{editing:t=>class extends t{init(){var i,a,e=!this._saveEditorHandler;super.init(),e&&(this._pointerUpEditorHandler=()=>{var r;a=null===(r=this.getController("columnsResizer"))||void 0===r?void 0:r.isResizing()},this._pointerDownEditorHandler=r=>i=(0,p.Z)(r.target),this._saveEditorHandler=this.createAction(function(r){var{event:n}=r,s=(0,p.Z)(n.target),o=n[o_],{component:l}=this;if((!function kO(t){return t&&(t.is("input")||t.is("textarea"))}(i)||i.is(s))&&this.isCellOrBatchEditMode()&&!this._editCellInProgress){var u=d(s)||d(o?.$element()),h=o&&!o._disposed&&o!==this.component,c=!!s.closest(".".concat(this.addWidgetPrefix("addrow-button"))).length,_=s.hasClass(this.addWidgetPrefix("focus-overlay")),g=this.isCellEditMode();!a&&!u&&!_&&!(c&&g&&this.isEditing())&&((0,st.al)(s)||h)&&this._closeEditItem.bind(this)(s)}function d(f){if(!f)return!1;var m=f.closest(".".concat("dx-dropdowneditor-overlay")),x=l.$element();return m.length>0&&0===x.closest(m).length}}),S.Z.on(Y.Z.getDocument(),re.Z.up,this._pointerUpEditorHandler),S.Z.on(Y.Z.getDocument(),re.Z.down,this._pointerDownEditorHandler),S.Z.on(Y.Z.getDocument(),ie.u,this._saveEditorHandler))}isCellEditMode(){return this.option("editing.mode")===ka}isBatchEditMode(){return this.option("editing.mode")===ji}isCellOrBatchEditMode(){return this.isCellEditMode()||this.isBatchEditMode()}_needToCloseEditableCell(e){var i,a=this.component.$element(),r=this.isEditing();if((!a||e.closest(a).length)&&e.closest(".".concat("dx-data-row")).length){var o=this.getView("rowsView"),l=e.closest(".".concat(Yt,"> td")),d=o.getRowIndex(l.parent()),u=o.getCellElements(d);if(u?.length){var h=u.index(l),_=null===(i=this._columnsController.getVisibleColumns()[h])||void 0===i?void 0:i.allowEditing,g=this.isEditCell(d,h);r=r&&!_&&!g}}return r||super._needToCloseEditableCell(e)}_closeEditItem(e){this._needToCloseEditableCell(e)&&this.closeEditCell()}_focusEditorIfNeed(){var e;if(this._needFocusEditor&&this.isCellOrBatchEditMode()){var i=this._getVisibleEditColumnIndex(),a=null===(e=this._rowsView)||void 0===e?void 0:e._getCellElement(this._getVisibleEditRowIndex(),i);a&&!a.find(":focus").length?this._focusEditingCell(()=>{this._editCellInProgress=!1},a,!0):this._editCellInProgress=!1,this._needFocusEditor=!1}else super._focusEditorIfNeed()}isEditing(){if(this.isCellOrBatchEditMode()){var e=(0,v.$K)(this.option(qe)),i=(0,v.$K)(this.option(vi));return e&&i}return super.isEditing()}_handleEditColumnNameChange(e){var i=this._getVisibleEditRowIndex(e.previousValue);if(this.isCellOrBatchEditMode()&&-1!==i&&(0,v.$K)(e.value)&&e.value!==e.previousValue){var a=this._columnsController.getVisibleColumnIndex(e.value),r=this._columnsController.getVisibleColumnIndex(e.previousValue);this._editCellFromOptionChanged(a,r,i)}}_addRow(e){if(this.isCellEditMode()&&this.hasChanges()){var i=new b.BH;return this.saveEditData().done(()=>{this.hasChanges()?i.reject("cancel"):this.addRow(e).done(i.resolve).fail(i.reject)}),i.promise()}return super._addRow(e)}editCell(e,i){return this._editCell({rowIndex:e,columnIndex:i})}_editCell(e){var a,i=new b.BH;return this.executeOperation(i,()=>{a=this._editCellCore(e),(0,b.gx)(a).done(i.resolve).fail(i.reject)}),void 0!==a?a:i.promise()}_editCellCore(e){var i=this._dataController,a=(0,v.$K)(e.oldColumnIndex)||(0,v.$K)(e.oldRowIndex),{columnIndex:r,rowIndex:n,column:s,item:o}=this._getNormalizedEditCellOptions(e),l={data:o?.data,cancel:!1,column:s};if(void 0!==o.key){if(s&&("data"===o.rowType||"detailAdaptive"===o.rowType)&&!o.removed&&this.isCellOrBatchEditMode()){if(!a&&this.isEditCell(n,r))return!0;var d=n+i.getRowIndexOffset();return(0,b.gx)(this._beforeEditCell(n,r,o)).done(u=>{u||this._prepareEditCell(l,o,r,d)||this._processCanceledEditingCell()})}return!1}this._dataController.fireError("E1043")}_beforeEditCell(e,i,a){if(this.isCellEditMode()&&!a.isNewRow&&this.hasChanges()){var r=new b.BH;return this.saveEditData().always(()=>{r.resolve(this.hasChanges())}),r}}publicMethods(){return super.publicMethods().concat(["editCell","closeEditCell"])}_getNormalizedEditCellOptions(e){var u,{oldColumnIndex:i,oldRowIndex:a,columnIndex:r,rowIndex:n}=e,s=this._columnsController,o=s.getVisibleColumns(),d=this._dataController.items()[n];return u=(0,v.$K)(i)?o[i]:this._getEditColumn(),(0,v.$K)(a)||(a=this._getVisibleEditRowIndex()),(0,v.HD)(r)&&(r=s.columnOption(r,"index"),r=s.getVisibleIndex(r)),{oldColumn:u,columnIndex:r,oldRowIndex:a,rowIndex:n,column:o[r],item:d}}_prepareEditCell(e,i,a,r){var n;return i.isNewRow||(e.key=i.key),!this._isEditingStart(e)&&(this._pageIndex=this._dataController.pageIndex(),this._setEditRowKey(i.key),this._setEditColumnNameByIndex(a),e.column.showEditorAlways||this._addInternalData({key:i.key,oldData:null!==(n=i.oldData)&&void 0!==n?n:i.data}),!0)}closeEditCell(e,i){var a=(0,b.gx)(),r=this._getVisibleEditRowIndex();if(this.isCellOrBatchEditMode()){var n=new b.BH;a=new b.BH,this.executeOperation(n,()=>{this._closeEditCellCore(e,r,i).always(a.resolve)})}return a.promise()}_closeEditCellCore(e,i,a){var r=this._dataController,n=new b.BH,s=n.promise();if(this.isCellEditMode()&&this.hasChanges()){if(!a)return this.saveEditData().done(l=>{this.hasChanges()?n.resolve():this.closeEditCell(!!l).always(n.resolve)}),s}else if(this._resetEditRowKey(),this._resetEditColumnName(),i>=0){var o=[i];this._beforeCloseEditCellInBatchMode(o),e||r.updateItems({changeType:"update",rowIndices:o})}return n.resolve(),s}_resetModifiedClassCells(e){if(this.isBatchEditMode()){var i=this._columnsController.getVisibleColumns().length;e.forEach(a=>{for(var{key:r}=a,n=this._dataController.getRowIndexByKey(r),s=0;s<i;s++){var o=this._rowsView._getCellElement(n,s);o?.removeClass("dx-cell-modified")}})}}_prepareChange(e,i,a){var r=(0,p.Z)(e.cellElement);return this.isBatchEditMode()&&void 0!==e.key&&this._applyModified(r,e),super._prepareChange(e,i,a)}_cancelSaving(e){var i=this._dataController;this.isCellOrBatchEditMode()&&(this.isBatchEditMode()&&this._resetEditIndices(),i.updateItems()),super._cancelSaving(e)}optionChanged(e){var{fullName:i}=e;"editing"===e.name&&i===vi?(this._handleEditColumnNameChange(e),e.handled=!0):super.optionChanged(e)}_editCellFromOptionChanged(e,i,a){var r=this._columnsController.getVisibleColumns();e>-1&&(0,E.g0)(()=>{this._repaintEditCell(r[e],r[i],a)})}_handleEditRowKeyChange(e){var i;if(this.isCellOrBatchEditMode()){var a=this._getVisibleEditColumnIndex(),r=this._getEditRowIndexCorrection(),n=this._dataController.getRowIndexByKey(e.previousValue)+r;(0,v.$K)(e.value)&&e.value!==e.previousValue&&(null===(i=this._editCellFromOptionChanged)||void 0===i||i.call(this,a,a,n))}else super._handleEditRowKeyChange(e)}deleteRow(e){if(this.isCellEditMode()&&this.isEditing()){var{isNewRow:i}=this._dataController.items()[e],a=this._dataController.getKeyByRowIndex(e);this.closeEditCell(null,i).always(()=>{e=this._dataController.getRowIndexByKey(a),this._checkAndDeleteRow(e)})}else super.deleteRow(e)}_checkAndDeleteRow(e){this.isBatchEditMode()?this._deleteRowCore(e):super._checkAndDeleteRow(e)}_refreshCore(e){var{isPageChanged:i}=e??{},a=this.isBatchEditMode()||i&&"virtual"!==this.option("scrolling.mode");this.isCellOrBatchEditMode()?a&&(this._resetEditColumnName(),this._resetEditRowKey()):super._refreshCore(e)}_allowRowAdding(e){return!!this.isBatchEditMode()||super._allowRowAdding(e)}_afterDeleteRow(e,i){var a=this._dataController;return this.isBatchEditMode()?(a.updateItems({changeType:"update",rowIndices:[i,e]}),(new b.BH).resolve()):super._afterDeleteRow(e,i)}_updateEditRow(e,i,a){this.isCellOrBatchEditMode()?this._updateRowImmediately(e,i,a):super._updateEditRow(e,i,a)}_isDefaultButtonVisible(e,i){if(this.isCellOrBatchEditMode()){var a=this.isBatchEditMode();switch(e.name){case"save":case"cancel":case"edit":return!1;case"delete":return super._isDefaultButtonVisible(e,i)&&(!a||!i.row.removed);case"undelete":return a&&this.allowDeleting(i)&&i.row.removed;default:return super._isDefaultButtonVisible(e,i)}}return super._isDefaultButtonVisible(e,i)}_isRowDeleteAllowed(){return super._isRowDeleteAllowed()||this.isBatchEditMode()}_beforeEndSaving(e){var i;this.isCellEditMode()?"update"!==(null===(i=e[0])||void 0===i?void 0:i.type)&&super._beforeEndSaving(e):(this.isBatchEditMode()&&this._resetModifiedClassCells(e),super._beforeEndSaving(e))}prepareEditButtons(e){var i,a=null!==(i=this.option("editing"))&&void 0!==i?i:{},r=super.prepareEditButtons(e);return(a.allowUpdating||a.allowAdding||a.allowDeleting)&&this.isBatchEditMode()&&(r.push(this.prepareButtonItem(e,"save","saveEditData",21)),r.push(this.prepareButtonItem(e,"revert","cancelEditData",22))),r}_saveEditDataInner(){var n,e=this._dataController.getVisibleRows()[this.getEditRowIndex()],i=this._getEditColumn(),a=i?.showEditorAlways;return this.isCellEditMode()&&!e?.isNewRow&&a&&(n=new b.BH,this.addDeferred(n)),super._saveEditDataInner().always(n?.resolve)}_applyChange(e,i,a){var r=this.isCellEditMode()&&e.row&&!e.row.isNewRow,{showEditorAlways:n}=e.column,s=e.column.setCellValue!==e.column.defaultSetCellValue;return n&&!a&&r&&this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex)?(this._focusEditingCell(),void this._updateEditRow(e.row,!0,s)):super._applyChange(e,i,a)}_applyChangeCore(e,i){var{showEditorAlways:a}=e.column,r=this.isCellEditMode()&&e.row&&!e.row.isNewRow;if(a&&!i){if(r)return this._setEditRowKey(e.row.key,!0),this._setEditColumnNameByIndex(e.columnIndex,!0),this.saveEditData();if(this.isBatchEditMode())return i=this._needUpdateRow(e.column),super._applyChangeCore(e,i)}return super._applyChangeCore(e,i)}_processDataItemCore(e,i,a,r,n){var{data:s,type:o}=i;this.isBatchEditMode()&&o===Bt&&(e.data=(0,Fe.FL)(e.data,s)),super._processDataItemCore(e,i,a,r,n)}_processRemoveCore(e,i,a){if(!this.isBatchEditMode()||a)return super._processRemoveCore(e,i,a)}_processRemoveIfError(e,i){if(!this.isBatchEditMode())return super._processRemoveIfError(e,i)}_beforeFocusElementInRow(e){super._beforeFocusElementInRow(e);var i=e>=0?e:0,a=this.getFirstEditableColumnIndex();a>=0&&this.editCell(i,a)}}},views:{rowsView:{_createTable(){var t=this.callBase.apply(this,arguments),e=this._editingController;return e.isCellOrBatchEditMode()&&this.option("editing.allowUpdating")&&S.Z.on(t,(0,D.V4)(zt_name,"dxDataGridRowsView"),"td:not(.".concat(cn,")"),this.createAction(()=>{e.isEditing()&&e.closeEditCell()})),t},_createRow(t){var e=this.callBase.apply(this,arguments);if(t){var a=!!t.removed;this._editingController.isBatchEditMode()&&a&&e.addClass("dx-row-removed")}return e}},headerPanel:{isVisible(){var t=this.getController("editing").option("editing");return this.callBase()||t&&(t.allowUpdating||t.allowDeleting)&&t.mode===ji}}}}};$.registerModule("editingCellBased",KB);var fv="invalid",tl="revert-tooltip",mv="dx-invalid-message",il="invalid-message",Cv="dx-invalid-message-always",Sv="validator",al="dx-pending-indicator",xv="dx-validation-pending",bv="content",wv="__DX_INSERT_INDEX__",rl="batch",$a="cell",yv=["popup","form"],za="insert",Wa="cancel",Ka=function(t){return(0,v.$K)(t)&&t!==Wa},Ev=function(t,e){return void 0!==t||void 0===t&&e&&!e.isNewRow},eL=ne.Controller.inherit({init(){this._editingController=this.getController("editing"),this.createAction("onRowValidating"),this._validationState||this.initValidationState()},initValidationState(){this._validationState=[],this._validationStateCache={}},_rowIsValidated(t){var e=this._getValidationData(t?.key);return!!e&&!!e.validated},_getValidationData(t,e){var r,i=(0,E.k3)(t),a=(0,v.Kn)(i);return!(r=a?this._validationState.filter(n=>(0,E.bY)(n.key,t))[0]:this._validationStateCache[i])&&e&&(this._validationState.push(r={key:t,isValid:!0}),a||(this._validationStateCache[i]=r)),r},_getBrokenRules:(t,e)=>e?e.brokenRules||e.brokenRule&&[e.brokenRule]:t.brokenRules||[],_rowValidating(t,e){var i=new b.BH,a=this._editingController.getChangeByKey(t?.key),r=this._getBrokenRules(t,e),s={brokenRules:r,isValid:e?e.isValid:t.isValid,key:a.key,newData:a.data,oldData:this._editingController._getOldData(a.key),promise:null,errorText:this.getHiddenValidatorsErrorText(r)};return this.executeAction("onRowValidating",s),(0,b.gx)((0,b.p4)(s.promise)).always(()=>{t.isValid=s.isValid,t.errorText=s.errorText,i.resolve(s)}),i.promise()},getHiddenValidatorsErrorText(t){var e=[];return(0,y.S6)(t,(i,a)=>{var{column:r}=a,n=r&&void 0!==r.groupIndex&&!r.showWhenGrouped,s=r&&r.visible;!a.validator.$element().parent().length&&(!s||n)&&e.push(a.message)}),e.join(", ")},validate(t){var e=!0,i=this._editingController,a=new b.BH,r=[],n=i.getEditMode();if(t=t||"row"===n,this._isValidationInProgress)return a.resolve(!1).promise();if(this._isValidationInProgress=!0,t){i.addDeferred(a);var s=i.getChanges();(0,y.S6)(s,(l,d)=>{var{type:u,key:h}=d;if("remove"!==u){var c=this._getValidationData(h,!0),_=this.validateGroup(c);r.push(_),_.done(g=>{c.validated=!0,e=e&&g.isValid})}})}else if(this._currentCellValidator){var o=this.validateGroup(this._currentCellValidator._findGroup());r.push(o),o.done(l=>{e=l.isValid})}return(0,b.gx)(...r).done(()=>{this._isValidationInProgress=!1,a.resolve(e)}),a.promise()},validateGroup(t){var a,e=new b.BH,i=t&&_e.Z.getGroupConfig(t);return i?.validators.length&&(this.resetRowValidationResults(t),a=_e.Z.validateGroup(t)),(0,b.gx)(a?.complete||a).done(r=>{(0,b.gx)(this._rowValidating(t,r)).done(e.resolve)}),e.promise()},isRowDataModified:t=>!(0,v.Qr)(t.data),updateValidationState(t){var e=this._editingController.getEditMode(),{key:i}=t,a=this._getValidationData(i,!0);if(yv.includes(e))a.isValid=!0;else{if(t.type===za&&!this.isRowDataModified(t))return void(a.isValid=!0);if(this.setDisableApplyValidationResults(!0),_e.Z.getGroupConfig(a)){var n=_e.Z.validateGroup(a);(0,b.gx)(n.complete||n).done(s=>{a.isValid=s.isValid,a.brokenRules=s.brokenRules})}else(!a.brokenRules||!a.brokenRules.length)&&(a.isValid=!0);this.setDisableApplyValidationResults(!1)}},setValidator(t){this._currentCellValidator=t},renderCellPendingIndicator(t){var e=t.find(".".concat(al));if(!e.length){var i=t;e=(0,p.Z)("<div>").appendTo(i).addClass(al),this._createComponent(e,it.Z),t.addClass(xv)}},disposeCellPendingIndicator(t){var e=t.find(".".concat(al));if(e.length){var i=it.Z.getInstance(e);i&&(i.dispose(),i.$element().remove()),t.removeClass(xv)}},validationStatusChanged(t){var{validator:e}=t,i=e.option("validationGroup"),{column:a}=e.option("dataGetter")();this.updateCellValidationResult({rowKey:i.key,columnIndex:a.index,validationResult:t})},validatorInitialized(t){t.component.on("validating",this.validationStatusChanged.bind(this)),t.component.on("validated",this.validationStatusChanged.bind(this))},validatorDisposing(t){var e=t.component,i=e.option("validationGroup"),{column:a}=e.option("dataGetter")(),r=this.getCellValidationResult({rowKey:i?.key,columnIndex:a.index});Ka(r)&&"pending"===r.status&&this.cancelCellValidationResult({change:i,columnIndex:a.index})},applyValidationResult(t,e){var{validator:i}=e,a=i.option("validationGroup"),{column:r}=i.option("dataGetter")();if(e.brokenRules&&e.brokenRules.forEach(d=>{d.columnIndex=r.index,d.column=r}),t){var n=this.getCellValidationResult({rowKey:a.key,columnIndex:r.index}),s=Ka(n)&&n.disabledPendingId===e.id;if(this._disableApplyValidationResults||s)return;if("invalid"===e.status){var o=t.find(":focus");(0,Hi.si)(o)||(S.Z.trigger(o,"focus"),S.Z.trigger(o,re.Z.down))}var l=!r.editCellTemplate&&this.getController("editorFactory").getEditorInstance(t);"pending"===e.status?l?l.option("validationStatus","pending"):this.renderCellPendingIndicator(t):l?l.option("validationStatus","valid"):this.disposeCellPendingIndicator(t),t.toggleClass(this.addWidgetPrefix(fv),"invalid"===e.status)}},_syncInternalEditingData(t){var e,i=this._editingController,a=i.getChangeByKey(t.key),r=i._getOldData(t.key),n=null===(e=t.row)||void 0===e?void 0:e.oldData;a&&n&&!r&&i._addInternalData({key:t.key,oldData:n})},createValidator(t,e){var i,a,r=this._editingController,{column:n}=t,{showEditorAlways:s}=n;if(!(0,v.$K)(n.command)&&n.validationRules&&Array.isArray(n.validationRules)&&n.validationRules.length){var l=r.getIndexByKey(t.key,r.getChanges())>-1;if(!l){if(!s){var d=this.getController("columns");s=(d?.getVisibleColumns()||[]).some(O=>O.showEditorAlways)}var h=(0,E.bY)(this.option("editing.editRowKey"),t.key),c=r.isCellOrBatchEditMode()&&r.allowUpdating({row:t.row});l=h||c&&s,c&&s&&r._addInternalData({key:t.key,oldData:null!==(a=null===(i=t.row)||void 0===i?void 0:i.oldData)&&void 0!==a?a:t.data})}if(l){if(e&&!e.length)return void ee.Z.log("E1050");this._syncInternalEditingData(t);var _=this._getValidationData(t.key,!0),g=()=>{var O=r.getChangeByKey(_?.key),P=n.calculateCellValue(O?.data||{});return void 0!==P?P:t.value},f=e&&e.hasClass("dx-widget");e&&e.addClass(this.addWidgetPrefix(Sv));var m=new Jo(e||(0,p.Z)("<div>"),{name:n.caption,validationRules:(0,C.l)(!0,[],n.validationRules),validationGroup:_,adapter:f?null:{getValue:g,applyValidationResults:O=>{this.applyValidationResult(e,O)}},dataGetter(){var O=_?.key,P=r.getChangeByKey(O),F=r._getOldData(O);return{data:(0,Fe.FL)(F,P?.data),column:n}},onInitialized:this.validatorInitialized.bind(this),onDisposing:this.validatorDisposing.bind(this)});if(f){var x=m.option("adapter");if(x){var w=x.bypass,T=()=>t.row.isNewRow&&!this._isValidationInProgress&&!r.isCellModified(t);x.getValue=g,x.validationRequestsCallbacks=[],x.bypass=()=>w.call(x)||T()}}return m}}},setDisableApplyValidationResults(t){this._disableApplyValidationResults=t},getDisableApplyValidationResults(){return this._disableApplyValidationResults},isCurrentValidatorProcessing(t){var{rowKey:e,columnIndex:i}=t;return this._currentCellValidator&&(0,E.bY)(this._currentCellValidator.option("validationGroup").key,e)&&this._currentCellValidator.option("dataGetter")().column.index===i},validateCell(t){var e={rowKey:t.option("validationGroup").key,columnIndex:t.option("dataGetter")().column.index},i=this.getCellValidationResult(e),a=Ka(i),r=t.option("adapter");if(a){var n=r.getValue();(0,E.bY)(n,i.value)||(i=t.validate())}else i=t.validate();var s=new b.BH;return a&&"pending"===i.status&&(this.updateCellValidationResult(e),r.applyValidationResults(i)),(0,b.gx)(i.complete||i).done(o=>{a&&r.applyValidationResults(o),s.resolve(o)}),s.promise()},updateCellValidationResult(t){var{rowKey:e,columnIndex:i,validationResult:a}=t,r=this._getValidationData(e);if(r){var n;if(r.validationResults||(r.validationResults={}),a){if(n=(0,C.l)({},a),r.validationResults[i]=n,"pending"===a.status&&(this._editingController.getEditMode()===$a&&(n.deferred=new b.BH,n.complete.always(()=>{n.deferred.resolve()}),this._editingController.addDeferred(n.deferred)),this._disableApplyValidationResults))return void(n.disabledPendingId=a.id)}else n=r.validationResults[i];n&&n.disabledPendingId&&delete n.disabledPendingId}},getCellValidationResult(t){var a,{rowKey:e,columnIndex:i}=t,r=this._getValidationData(e,!0);return null===(a=r?.validationResults)||void 0===a?void 0:a[i]},removeCellValidationResult(t){var{change:e,columnIndex:i}=t,a=this._getValidationData(e?.key);a&&a.validationResults&&(this.cancelCellValidationResult({change:e,columnIndex:i}),delete a.validationResults[i])},cancelCellValidationResult(t){var{change:e,columnIndex:i}=t,a=this._getValidationData(e.key);if(e&&a.validationResults){var r=a.validationResults[i];r&&(r.deferred&&r.deferred.reject(Wa),a.validationResults[i]=Wa)}},resetRowValidationResults(t){t&&(t.validationResults&&delete t.validationResults,delete t.validated)},isInvalidCell(t){var{rowKey:e,columnIndex:i}=t,a=this.getCellValidationResult({rowKey:e,columnIndex:i});return Ka(a)&&"invalid"===a.status},getCellValidator(t){var{rowKey:e,columnIndex:i}=t,a=this._getValidationData(e),r=a&&_e.Z.getGroupConfig(a),n=r&&r.validators;return n&&n.filter(s=>{var{column:o}=s.option("dataGetter")();return!!o&&o.index===i})[0]},setCellValidationStatus(t){var e=this.getCellValidationResult({rowKey:t.key,columnIndex:t.column.index});(0,v.$K)(e)?t.validationStatus=e!==Wa?e.status:Wa:delete t.validationStatus}}),tL={defaultOptions:()=>({editing:{texts:{validationCancelChanges:A.Z.format("dxDataGrid-validationCancelChanges")}}}),controllers:{validating:eL},extenders:{controllers:{editing:{_addChange(t){var e=this.callBase.apply(this,arguments),i=this.getController("validating");return e&&"remove"!==t.type&&i.updateValidationState(e),e},_handleChangesChange(t){this.callBase.apply(this,arguments);var e=this.getController("validating");t.value.forEach(i=>{void 0===e._getValidationData(i.key)&&e.updateValidationState(i)})},_updateRowAndPageIndices(){var t=this,e=t.getView("rowsView").getTopVisibleItemIndex(),i=e;(0,y.S6)(t.getChanges(),(a,r)=>{var{key:n,type:s}=r,o=this.getController("validating")._getValidationData(n);o&&!o.isValid&&o.pageIndex!==t._pageIndex&&(o.pageIndex=t._pageIndex,o.rowIndex=s===za?e:i,i++)})},_getValidationGroupsInForm(t){return{validationGroup:this.getController("validating")._getValidationData(t.key,!0)}},_validateEditFormAfterUpdate(t,e){e&&this._editForm&&this._editForm.validate(),this.callBase.apply(this,arguments)},_prepareEditCell(t){var e=this.callBase.apply(this,arguments),i=this.getController("validating");return e&&t.column.showEditorAlways&&i.updateValidationState({key:t.key}),e},processItems(t,e){var i=this.getChanges(),a=this.getController("data"),r=this.getController("validating"),n=(t=this.callBase(t,e)).length;return this.getEditMode()===rl&&"prepend"!==e&&"append"!==e&&i.forEach(o=>{var{key:l}=o,d=r._getValidationData(l);d&&o.type&&d.pageIndex===this._pageIndex&&o?.pageIndex!==this._pageIndex&&function(o,l){var d={key:o.key};if(!(function(c,_){var g=-1,f=c.type===za,{key:m}=c;return(0,y.S6)(_,(x,w)=>{if((0,E.bY)(m,f?w.key:a.keyOf(w)))return g=x,!1}),g}(o,t)>=0)){l.rowIndex=l.rowIndex>n?l.rowIndex%n:l.rowIndex;var{rowIndex:h}=l;d[wv]=1,t.splice(h,0,d)}}(o,d)}),t},processDataItem(t){var e=t.data[wv],i=e?t.data.key:t.key;if(this.getEditMode()===rl&&e&&i){var r=this.getChanges(),n=V.getIndexByKey(i,r);if(n>=0){var s=r[n];if(s.type!==za){var o=this._getOldData(s.key);t.data=(0,C.l)(!0,{},o,s.data),t.key=i}}}this.callBase.apply(this,arguments)},_createInvisibleColumnValidators(t){var e=this,i=this.getController("validating"),a=this.getController("columns"),r=a.getColumns(),n=a.getInvisibleColumns().filter(d=>!d.isBand),s=a.getGroupColumns().filter(d=>!d.showWhenGrouped&&-1===n.indexOf(d)),o=[],l=(d,u)=>this._dataController.getRowIndexByKey(u)>=0&&n.indexOf(d)<0;return n.push(...s),yv.includes(this.getEditMode())||(0,y.S6)(r,(d,u)=>{t.forEach(h=>{var c;if(!l(u,h.key)){if(h.type===za)c=h.data;else if("update"===h.type){var _=e._getOldData(h.key);if(!(0,v.$K)(_))return;c=(0,Fe.FL)(_,h.data)}if(c){var g=i.createValidator({column:u,key:h.key,value:u.calculateCellValue(c)});g&&o.push(g)}}})}),function(){o.forEach(d=>{d.dispose()})}},_beforeSaveEditData(t,e){var i=this.callBase.apply(this,arguments),a=this.getController("validating"),r=a._getValidationData(t?.key);if(t)i=i||!("remove"===t.type||r.isValid);else{var s=this._createInvisibleColumnValidators(this.getChanges());i=new b.BH,this.executeOperation(i,()=>{a.validate(!0).done(o=>{switch(s(),this._updateRowAndPageIndices(),this.getEditMode()){case $a:o||this._focusEditingCell();break;case rl:o||(this._resetEditRowKey(),this._resetEditColumnName(),this.getController("data").updateItems())}i.resolve(!o)})})}return i.promise?i.promise():i},_beforeEditCell(t,e,i){var a=this.callBase(t,e,i);if(this.getEditMode()===$a){var r=this._rowsView._getCellElement(t,e),n=r&&r.data("dxValidator"),s=r&&r.closest(".dx-row").data("options"),o=n&&n.option("adapter").getValue();if(n&&Ev(o,s)){var l=this.getController("validating"),d=new b.BH;return(0,b.gx)(l.validateCell(n),a).done((u,h)=>{d.resolve("valid"===u.status&&h)}),d.promise()}if(!n)return a}},_afterSaveEditData(t){var e,i=this.getEditMode()===$a;if((0,y.S6)(this.getChanges(),(l,d)=>{var u=this._showErrorRow(d);e=e||u}),e){var a=this._rowsView.getScrollable();a&&(a.update(),a.scrollToElement(e))}if(t&&i&&this._needUpdateRow()){var r=this.getEditRowIndex();this._dataController.updateItems({changeType:"update",rowIndices:[r]}),this._focusEditingCell()}else if(!t){var n=!0;i&&(n=!(this.getController("columns").getColumns().filter(l=>{var d;return l.showEditorAlways&&(null===(d=l.validationRules)||void 0===d?void 0:d.length)>0}).length>0)),n&&this.getController("validating").initValidationState()}},_handleDataChanged(t){var e=this.getController("validating")._validationState;"standard"===this.option("scrolling.mode")&&this.resetRowAndPageIndices(),"prepend"===t.changeType&&(0,y.S6)(e,(i,a)=>{a.rowIndex+=t.items.length}),this.callBase(t)},resetRowAndPageIndices(){var t=this.getController("validating")._validationState;(0,y.S6)(t,(e,i)=>{i.pageIndex!==this._pageIndex&&(delete i.pageIndex,delete i.rowIndex)})},_beforeCancelEditData(){this.getController("validating").initValidationState(),this.callBase()},_showErrorRow(t){var e,i=this.getController("errorHandling"),a=this.getController("data").items(),r=this.getIndexByKey(t.key,a),n=this.getController("validating")._getValidationData(t.key);if(!n?.isValid&&n?.errorText&&r>=0)return e=this.getPopupContent(),i&&i.renderErrorRow(n?.errorText,r,e)},updateFieldValue(t){var e=this.getController("validating"),i=new b.BH;return e.removeCellValidationResult({change:this.getChangeByKey(t.key),columnIndex:t.column.index}),this.callBase.apply(this,arguments).done(()=>{var a=e.getCellValidator({rowKey:t.key,columnIndex:t.column.index});(0,b.gx)(a&&e.validateCell(a)).done(r=>{this.getController("editorFactory").refocus(),i.resolve(r)})}),i.promise()},highlightDataCell(t,e){this.callBase.apply(this,arguments);var i=this.getController("validating");i.setCellValidationStatus(e);var a=!!e.setValue,r=this.isCellModified(e),n=(0,v.$K)(e.validationStatus);if(r&&e.column.setCellValue||a&&!r&&!e.row.isNewRow&&n){var o=t.data("dxValidator");o&&(0,b.gx)(this.getController("validating").validateCell(o)).done(()=>{i.setCellValidationStatus(e)})}},getChangeByKey(t){var e=this.getChanges();return e[V.getIndexByKey(t,e)]},isCellModified(t){var e=this.callBase(t),i=this.getChangeByKey(t.key),a=!!t.row&&this.getController("validating").isInvalidCell({rowKey:t.key,columnIndex:t.column.index});return e||this.getController("validating")._rowIsValidated(i)&&a}},editorFactory:{_showRevertButton(t){var e,i=null===(e=this._revertTooltip)||void 0===e?void 0:e.$element();if(!t||!t.length)return i?.remove(),void(this._revertTooltip=void 0);if(!t.find(i).length){var a=t.closest(".".concat(this.addWidgetPrefix(bv))),r=this.addWidgetPrefix(tl);i?.remove(),i=(0,p.Z)("<div>").addClass(r).appendTo(t);var n={animation:null,visible:!0,width:"auto",height:"auto",shading:!1,container:a,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:r},contentTemplate:()=>{var s=(0,p.Z)("<div>").addClass("dx-revert-button"),o={icon:"revert",hint:this.option("editing.texts.validationCancelChanges"),onClick:()=>{this._editingController.cancelEditData()}};return new Be.Z(s,o).$element()},position:{my:"left top",at:"right top",offset:"1 0",collision:"flip",boundaryOffset:"0 0",boundary:this._rowsView.element(),of:t},onPositioned:this._positionedHandler.bind(this)};this._revertTooltip=new Nt.Z(i,n)}},_hideFixedGroupCell(t,e){var i,a,r=this._rowsView.isFixedColumns(),n=this._editingController.isFormOrPopupEditMode();if(r&&!n){var s=t.closest(".dx-row").next().data("options");s&&"group"===s.rowType&&(i=(0,p.Z)(this._rowsView.getRowElement(s.rowIndex)).last(),(a=i.find(".".concat("dx-group-cell"))).length&&"hidden"!==a.get(0).style.visibility&&(a.css("visibility","hidden"),e.onDisposing=function(){a.css("visibility","")}))}},_positionedHandler(t,e){if(!t.component.__skipPositionProcessing){var i=(0,p.Z)(t.element).hasClass(this.addWidgetPrefix(tl)),a=!i&&this._rowsView.updateFreeSpaceRowHeight(),r=this._normalizeValidationMessagePositionAndMaxWidth(t,i,e);t.component.__skipPositionProcessing=!(!a&&!r),r?t.component.option(r):a&&t.component.repaint()}},_showValidationMessage(t,e,i){var a,r=t.find(".dx-dropdowneditor-overlay").data("dxPopup"),n=r&&r.option("visible"),s=n?"top right":"top ".concat(i),o=n?"top left":"bottom ".concat(i),d=(null===(a=this._columnsController.getFixedColumns())||void 0===a?void 0:a.length)>0?this.getView("rowsView").element():t.closest(".".concat(this.addWidgetPrefix(bv))),u="";e&&e.forEach(g=>{u+=(u.length?"<br/>":"")+(0,ot.HZ)(g)});var h=this.addWidgetPrefix(il);this._rowsView.element().find(".".concat(h)).remove();var c=(0,p.Z)("<div>").addClass(mv).addClass(Cv).addClass(h).html(u).appendTo(t),_={container:d,shading:!1,width:"auto",height:"auto",visible:!0,animation:!1,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:"".concat(mv," ").concat(Cv," ").concat(h)},position:{collision:"flip",boundary:this._rowsView.element(),boundaryOffset:"0 0",offset:{x:0,y:!n&&ve.Z.mozilla?-1:0},my:s,at:o,of:t},onPositioned:g=>{this._positionedHandler(g,n),this._shiftValidationMessageIfNeed(g.component.$content(),t)}};this._hideFixedGroupCell(t,_),new Nt.Z(c,_)},_hideValidationMessage(){var t,e=null===(t=this._rowsView.element())||void 0===t?void 0:t.find(this._getValidationMessagesSelector());e?.remove()},_normalizeValidationMessagePositionAndMaxWidth(t,e,i){var f,m,x,a=this._columnsController.getFixedColumns();if(a&&a.length){var r,l,d,n=!e&&(l=(0,p.Z)(t.element).closest("tr").index(),d=(0,p.Z)(this._rowsView.getRowElement(l)).first().children().filter(":not(.dx-hidden-cell)"),this._rowsView._getWidths(d).reduce((f,m)=>f+m,0)),u=t.component.$content(),h=(0,I.Y_)(u,!0),c=!e&&h>n,_=this._rowsView.getCellIndex((0,p.Z)(t.element).closest("td")),g=((f=a).some((w,T)=>{if("transparent"===w.command)return m=0===T?-1:T,x=T===f.length-1?-1:T+w.colspan-1,!0}),{startColumnIndex:m,endColumnIndex:x});return e||_!==g.startColumnIndex&&!c?_===g.endColumnIndex&&(r={collision:"none flip",my:"top right",at:e||i?"top left":"bottom right"},e&&(r.offset="-1 0")):r={collision:"none flip",my:"top left",at:i?"top right":"bottom left"},r&&{position:r,maxWidth:c?n-2:void 0}}},_shiftValidationMessageIfNeed(t,e){var i=this._revertTooltip&&this._revertTooltip.$content();if(i){var a=t.offset(),r=i.offset();if(a.top===r.top&&a.left+(0,I.dz)(t)>r.left){var n=(0,I.dz)(i)+2;t.css("left",r.left<e.offset().left?-n:n)}}},_getRevertTooltipsSelector(){var t=this.addWidgetPrefix(tl);return".dx-editor-cell .".concat(t)},_getValidationMessagesSelector(){var t=this.addWidgetPrefix(il);return".dx-editor-cell .".concat(t,", .dx-cell-modified .").concat(t)},init(){this.callBase(),this._editingController=this.getController("editing"),this._columnsController=this.getController("columns"),this._rowsView=this.getView("rowsView")},loseFocus(t){t||this.getController("validating").setValidator(null),this.callBase()},updateCellState(t,e,i){var a,r=t?.closest(this._getFocusCellSelector()),n=r?.is("td")?r:null,s=r?.closest(".dx-row").data("options"),o=s?this.getController("editing").getChangeByKey(s.key):null,l=n&&this.getController("columns").getVisibleColumns()[n.index()],d=void 0!==(null===(a=o?.data)||void 0===a?void 0:a[l?.name])&&!this._editingController.isSaving();if(this._editingController.getEditMode()===$a&&("invalid"===e?.status||d?this._showRevertButton(r):this._revertTooltip&&this._revertTooltip.$element().remove()),e&&"invalid"===e.status&&n&&l&&e&&e.brokenRules){var h=[];e.brokenRules.forEach(c=>{c.message&&h.push(c.message)}),h.length&&this._showValidationMessage(r,h,l.alignment||"left")}!i&&this._rowsView.element()&&this._rowsView.updateFreeSpaceRowHeight()},focus(t,e){if(!arguments.length)return this.callBase();if(this._hideValidationMessage(),t?.hasClass("dx-row")||t?.hasClass("dx-master-detail-cell"))return this.callBase(t,e);var d,i=t?.closest(this._getFocusCellSelector()),{callBase:a}=this,r=i&&(i.data("dxValidator")||t.find(".".concat(this.addWidgetPrefix(Sv))).eq(0).data("dxValidator")),n=i&&i.closest(".dx-row").data("options"),s=this.getController("editing"),o=n?s.getChangeByKey(n.key):null,l=this.getController("validating");if(r){l.setValidator(r);var u=r.option("adapter").getValue();if(Ev(u,n)||l._rowIsValidated(o))return s.waitForDeferredOperations().done(()=>{(0,b.gx)(l.validateCell(r)).done(h=>{d=h;var{column:c}=d.validator.option("dataGetter")();o&&c&&!l.isCurrentValidatorProcessing({rowKey:o.key,columnIndex:c.index})||("invalid"===d.status&&(e=!0),this.updateCellState(t,d,e),a.call(this,t,e))})}),this.callBase(t,e)}return this.updateCellState(t,d,e),this.callBase(t,e)},getEditorInstance(t){var e=t.find(".dx-texteditor").eq(0);return V.getWidgetInstance(e)}},data:{_getValidationStatus:t=>(Ka(t)?t.status:t)||"valid",_isCellChanged(t,e,i,a,r){var n,s,o=null===(n=t.cells)||void 0===n?void 0:n[a],l=this._getValidationStatus({status:o?.validationStatus}),d=this.getController("validating"),u=d.getCellValidationResult({rowKey:t.key,columnIndex:a}),h=d._getValidationData(t.key),c=this._getValidationStatus(u),_=JSON.stringify(e.modifiedValues)!==JSON.stringify(t.modifiedValues),g=l!==c&&_,f=(0,p.Z)(o?.cellElement).hasClass(this.addWidgetPrefix(fv)),m=null===(s=o?.column.validationRules)||void 0===s?void 0:s.length;return!!(t.isEditing!==e.isEditing&&m||g||h.isValid&&f)||this.callBase.apply(this,arguments)}}},views:{rowsView:{updateFreeSpaceRowHeight(t){var e,i,a,r=this.element(),n=r&&r.find(".".concat(this.addWidgetPrefix(il)," .dx-overlay-content"));if(this.callBase(t),n&&n.length&&(e=this._getRowElements(),(i=(a=this._getFreeSpaceRowElements(t)).first())&&1===e.length&&(!i.is(":visible")||(0,I.zp)(n)>(0,I.zp)(i))))return a.show(),(0,I.QQ)(a,(0,I.zp)(n)),!0},_formItemPrepared(t,e){this.callBase.apply(this,arguments),(0,E.Su)(()=>{var i=e.find(".dx-widget").first();i.length&&!i.children().length||this.getController("validating").createValidator(t,i)})},_cellPrepared(t,e){this.getController("editing").isFormOrPopupEditMode()||this.getController("validating").createValidator(e,t),this.callBase.apply(this,arguments)},_restoreErrorRow(t){var e=this.getController("editing");e&&e.hasChanges()&&this._getRowElements(t).each((i,a)=>{var r=(0,p.Z)(a).data("options");if(r){var n=e.getChangeByKey(r.key);n&&e._showErrorRow(n)}})}}}}};$.registerModule("validating",tL);var nl="scrolling.legacyMode",Iv=t=>t.option("scrolling.loadTwoPagesOnStart")||t._controller.isVirtual()||t._controller.getViewportItemIndex()>0,fn=t=>t._cache.length?t._cache[0].pageIndex:-1,sl=t=>t._cache.length?t._cache[t._cache.length-1].pageIndex:-1,mn=(t,e,i)=>{t._isChangedFiring=!0,e(i),t._isChangedFiring=!1},Tv=(t,e,i)=>{if(t._isDelayChanged)return t._isDelayChanged=!1,mn(t,e,i),!0},Cn=(t,e)=>{var i=t.option("scrolling.preloadEnabled"),a=(t=>{var e=t._dataOptions.pageSize();if(t.option("scrolling.preventPreload"))return 0;var a=t._controller.viewportSize();if(t._controller.isVirtualMode()&&t.option("scrolling.removeInvisiblePages")){a=0;for(var r=t._controller.viewportSize()*t._controller.viewportItemSize(),n=t._controller.getContentOffset(),s=t._controller.getViewportPosition(),o=t._controller.virtualItemsCount(),l=t._dataOptions.totalItemsCount(),d=o.begin;d<l&&!(n>=s+r);d++)(n+=t._controller.getItemSizes()[d]||t._controller.viewportItemSize())>=s&&a++}return e&&a>0?Math.ceil(a/e):1})(t),r=t._controller.isAppendMode();return a&&(e?a=i?1:0:(i&&a++,(r||!Iv(t))&&a--)),a},Av=(t,e,i,a,r)=>{var n=t._dataOptions,s=n.items().slice(),o=(0,v.Kn)(i)?i:void 0,l="prepend"===i,d=n.viewportItems();i&&(0,v.HD)(i)&&!t._isDelayChanged&&(o={changeType:i,items:s},r&&(o.removeCount=r.itemsCount,o.removeCount&&n.correctCount&&(o.removeCount=n.correctCount(d,o.removeCount,l))));var u=r?r.itemsLength:0;u&&n.correctCount&&(u=n.correctCount(d,u,l)),"append"===i?(d.push.apply(d,s),r&&d.splice(0,u)):l?(d.unshift.apply(d,s),r&&d.splice(-u)):t._dataOptions.viewportItems(s),n.updateLoading(),t._lastPageIndex=t.pageIndex(),t._isDelayChanged=a,a||mn(t,e,o)};class nL{constructor(e,i){this._dataOptions=i,this._controller=e,this._pageIndex=this._lastPageIndex=i.pageIndex(),this._cache=[],this._loadingPageIndexes={}}option(){return this._controller.option.apply(this._controller,arguments)}viewportItemIndexChanged(e){var o,i=this._dataOptions.pageSize(),a=this._dataOptions.pageCount(),r=this._controller.isVirtualMode(),n=this._controller.isAppendMode(),s=this._dataOptions.totalItemsCount();if(i&&(r||n)&&s>=0){var l=this._controller.viewportSize();if(l&&e+l>=s&&!this._controller.isVirtual())if(this._dataOptions.hasKnownLastPage()){var d=s%i;(o=a-1)>0&&d>0&&d<l&&o--}else o=a;else{o=Math.floor(e/i);var u=a-1;o=Math.max(o,0),o=Math.min(o,u)}return this.pageIndex(o),this.load()}}pageIndex(e){var i=this._controller.isVirtualMode(),a=this._controller.isAppendMode();return!1!==this.option(nl)&&(i||a)?(void 0!==e&&(this._pageIndex=e),this._pageIndex):this._dataOptions.pageIndex(e)}beginPageIndex(e){var i=fn(this);return i<0&&(i=void 0!==e?e:this.pageIndex()),i}endPageIndex(){var e=sl(this);return e>0?e:this._lastPageIndex}pageSize(){return this._dataOptions.pageSize()}load(){var i,e=this._dataOptions,a=this._controller.isVirtualMode(),r=this._controller.isAppendMode();if(!1!==this.option(nl)&&(a||r)){var n=(t=>{var e=-1,i=fn(t),a=t._dataOptions;return i<0?e=t._pageIndex:t._cache[t._pageIndex-i]?i>=0&&t._controller.viewportSize()>=0&&(i>0&&(sl(t)+1===a.pageCount()&&t._cache.length<Cn(t)+1||t._pageIndex===i&&Cn(t,!0))&&(e=i-1),e<0&&i+t._cache.length<=t._pageIndex+Cn(t)&&(e=i+t._cache.length)):e=t._pageIndex,t._loadingPageIndexes[e]&&(e=-1),e})(this);if(n>=0){var s=((t,e)=>{var i=t._dataOptions;if(e===t.pageIndex()||!i.isLoading()&&e<i.pageCount()||!i.hasKnownLastPage()&&e===i.pageCount())return i.pageIndex(e),t._loadingPageIndexes[e]=!0,(0,b.gx)(i.load()).always(()=>{t._loadingPageIndexes[e]=!1})})(this,n);s&&(i=new b.BH,s.done(()=>{var o=this._delayDeferred;o?o.done(i.resolve).fail(i.reject):i.resolve()}).fail(i.reject),e.updateLoading())}}else i=e.load();return!i&&this._lastPageIndex!==this.pageIndex()&&this._dataOptions.onChanged({changeType:"pageIndex"}),i||(new b.BH).resolve()}loadIfNeed(){var e=this._controller.isVirtualMode(),i=this._controller.isAppendMode();if((e||i)&&!this._dataOptions.isLoading()&&(!this._isChangedFiring||this._controller.isVirtual())){var a=this._controller.getViewportPosition();a>0?this._controller._setViewportPositionCore(a):this.load()}}handleDataChanged(e,i){var n,s,a=this._dataOptions,r=this._cache.length,o=this._controller.isVirtualMode(),l=this._controller.isAppendMode();if(i&&i.changes)mn(this,e,i);else if(!1!==this.option(nl)&&(o||l)){var d=fn(this);if(d>=0&&(o&&d+this._cache.length!==a.pageIndex()&&d-1!==a.pageIndex()&&(r=0,this._cache=[]),l))if(0===a.pageIndex())this._cache=[];else if(a.pageIndex()<sl(this))return void mn(this,e,{changeType:"append",items:[]});var h,u={pageIndex:a.pageIndex(),itemsLength:a.items(!0).length,itemsCount:this.itemsCount(!0)};this.option("scrolling.removeInvisiblePages")&&o?s=this._cache.length>Math.max(Cn(this)+(this.option("scrolling.preloadEnabled")?1:0),2):Tv(this,e,{isDelayed:!0}),d===a.pageIndex()+1?(s&&(h=this._cache.pop()),n="prepend",this._cache.unshift(u)):(s&&(h=this._cache.shift()),n="append",this._cache.push(u));var c=o&&0===r&&Iv(this);Av(this,e,this._cache.length>1?n:void 0,c,h),this._delayDeferred=this.load().done(()=>{Tv(this,e)&&this.load()})}else Av(this,e,i)}getDelayDeferred(){return this._delayDeferred}itemsCount(e){var i=0,a=this._controller.isVirtualMode();return!e&&a?this._cache.forEach(r=>{i+=r.itemsCount}):i=this._dataOptions.itemsCount(),i}virtualItemsCount(){var e=fn(this);e<0&&(e=this._dataOptions.pageIndex());var i=e*this._dataOptions.pageSize(),a=this._cache.length*this._dataOptions.pageSize();return{begin:i,end:Math.max(0,this._dataOptions.totalItemsCount()-a-i)}}reset(){this._loadingPageIndexes={},this._cache=[]}}var Dv="virtual",Sn="scrolling.legacyMode",Ov=t=>t.option("scrolling.mode")===Dv||t._isVirtual;function Rv(t,e,i){var a,r=[],n=[],s=[];function o(h){var c=h.element?h.$element():h,_=$t.Z.offset(c);return _?h.scrollTop()-(_.top-t.offset().top):t.offset().top}var h,c,l={on(h,c,_){h.on("scroll",_)},off(h,c,_){h.off("scroll",_)}};function d(h){var x,c="#document"===h.get(0).nodeName,_=h.get(0).nodeType===(0,Z.Jj)().Node.ELEMENT_NODE,g=h.data("dxScrollable"),f=l;if(g||(g=c&&(0,p.Z)((0,Z.Jj)())||_&&"auto"===h.css("overflowY")&&h,f=S.Z,g)){var m=(x=g,function(){var w=x.scrollTop()-o(x);e(w=w>0?w:0)});f.on(g,"scroll",m),n.push(x=>{var w=o(g);x-w>=0&&g[g.scrollTo?"scrollTo":"scrollTop"](x+w)}),r.push(g),s.push(()=>{f.off(g,"scroll",m)})}}for(a=(i=i||t).parent();a.length;void 0,a=(0,p.Z)(null!==(c=(h=a).get(0).parentNode)&&void 0!==c?c:h.get(0).host))d(a);return{scrollTo(h){(0,y.S6)(n,(c,_)=>{_(h)})},dispose(){(0,y.S6)(s,(h,c)=>{c()})}}}var ol=Ce.Z.inherit(function(){var t={ctor(e,i,a){this._dataOptions=i,this.component=e,this._viewportSize=!1===e.option(Sn)?15:0,this._viewportItemSize=20,this._viewportItemIndex=0,this._position=0,this._isScrollingBack=!1,this._contentSize=0,this._itemSizes={},this._sizeRatio=1,this._isVirtual=a,this.positionChanged=(0,ge.Z)(),this._dataLoader=new nL(this,this._dataOptions)},getItemSizes(){return this._itemSizes},option(){return this.component.option.apply(this.component,arguments)},isVirtual(){return this._isVirtual},virtualItemsCount(){if(Ov(this)){var e=this._dataOptions,i=e.totalItemsCount();if(!1===this.option(Sn)&&-1!==i){var a=this.getViewportParams(),r=e.loadedOffset(),n=e.loadedItemCount(),s=Math.max(a.skip,r),o=Math.min(a.take,n);return{begin:s,end:Math.max(i-(s+o),0)}}return this._dataLoader.virtualItemsCount.apply(this._dataLoader,arguments)}},getScrollingTimeout(){var e,i=this.option("scrolling.renderAsync"),a=0;return(0,v.$K)(i)?i&&(a=null!==(e=this.option("scrolling.timeout"))&&void 0!==e?e:0):(a=Math.min(this.option("scrolling.timeout")||0,this._dataOptions.changingDuration()))<this.option("scrolling.renderingThreshold")&&(a=this.option("scrolling.minTimeout")||0),a},setViewportPosition(e){var i=new b.BH,a=this.getScrollingTimeout();return clearTimeout(this._scrollTimeoutID),a>0?this._scrollTimeoutID=setTimeout(()=>{this._setViewportPositionCore(e),i.resolve()},a):(this._setViewportPositionCore(e),i.resolve()),i.promise()},getViewportPosition(){return this._position},getItemIndexByPosition(e,i,a){e=e??this._position;for(var r=this.getItemSize(),n=0,s=0,o=Object.keys(this._itemSizes).concat(-1),l=0;l<o.length&&n<e;l++){var d=parseInt(o[l]),u=(e-n)/r;if(d<0||s+u<d){s+=u,this._sizeRatio<1&&(0,v.$K)(i)&&(s=i+a/this._viewportItemSize);break}n+=(u=d-s)*r,s+=u;var h=this._itemSizes[d];s+=(n+=h)<e?1:(e-n+h)/h}return Math.round(50*s)/50},isScrollingBack(){return this._isScrollingBack},_setViewportPositionCore(e){var i=this._position||0;this._position=e,i!==this._position&&(this._isScrollingBack=this._position<i);var a=this.getItemIndexByPosition(),r=this.setViewportItemIndex(a);return this.positionChanged.fire(),r},setContentItemSizes(e){var i=this.virtualItemsCount();if(this._contentSize=e.reduce((n,s)=>n+s,0),i){e.forEach((n,s)=>{this._itemSizes[i.begin+s]=n});var a=(i.begin+i.end+this.itemsCount())*this._viewportItemSize,r=V.getContentHeightLimit(ve.Z);this._sizeRatio=a>r?r/a:1}},getItemSize(){return this._viewportItemSize*this._sizeRatio},getItemOffset(e,i){var a=this.virtualItemsCount(),r=e;if(!a)return 0;var n=0,s=this._dataOptions.totalItemsCount();return Object.keys(this._itemSizes).forEach(o=>{r&&(i?o>=s-e:o<e)&&(n+=this._itemSizes[o],r--)}),Math.floor(n+r*this._viewportItemSize*this._sizeRatio)},getContentOffset(e){var i="end"===e,a=this.virtualItemsCount();return a?this.getItemOffset(i?a.end:a.begin,i):0},getVirtualContentSize(){return this.virtualItemsCount()?this.getContentOffset("begin")+this.getContentOffset("end")+this._contentSize:0},getViewportItemIndex(){return this._viewportItemIndex},setViewportItemIndex(e){if(this._viewportItemIndex=e,!1!==this.option(Sn))return this._dataLoader.viewportItemIndexChanged.apply(this._dataLoader,arguments)},viewportItemSize(e){return void 0!==e&&(this._viewportItemSize=e),this._viewportItemSize},viewportSize(e){return void 0!==e&&(this._viewportSize=e),this._viewportSize},viewportHeight(e,i){var a=i??this._position,r=this.getItemIndexByPosition(a),n=this.getItemIndexByPosition(a+e,r,e);this.viewportSize(Math.ceil(n-r)),!(0,v.$K)(i)&&this._viewportItemIndex!==r&&this._setViewportPositionCore(a)},reset(e){this._dataLoader.reset(),e||(this._itemSizes={})},subscribeToWindowScrollEvents(e){this._windowScroll=this._windowScroll||Rv(e,i=>{this.viewportItemSize()&&this.setViewportPosition(i)})},dispose(){clearTimeout(this._scrollTimeoutID),this._windowScroll&&this._windowScroll.dispose(),this._windowScroll=null},scrollTo(e){this._windowScroll&&this._windowScroll.scrollTo(e)},isVirtualMode(){return Ov(this)},isAppendMode(){return(t=>"infinite"===t.option("scrolling.mode")&&!t._isVirtual)(this)},getViewportParams(){var e,i=this.option("scrolling.mode")===Dv,a=this._dataOptions.totalItemsCount(),n=this._dataOptions.hasKnownLastPage()&&this._viewportItemIndex>a?a:this._viewportItemIndex,s=this._viewportSize+n,o=this.option("scrolling.prerenderedRowChunkSize")||1,l=this.isScrollingBack(),d=null!==(e=this.option("scrolling.prerenderedRowCount"))&&void 0!==e?e:1,h=l?0:d,c=Math.floor(Math.max(0,n-(l?d:0))/o)*o,_=Math.ceil((s+h-c)/o)*o;if(i){var g=Math.max(0,a-c);_=Math.min(_,g)}return{skip:c,take:_}},itemsCount(){return this.option(Sn)?this._dataLoader.itemsCount.apply(this._dataLoader,arguments):this._dataOptions.itemsCount()}};return["pageIndex","beginPageIndex","endPageIndex","pageSize","load","loadIfNeed","handleDataChanged","getDelayDeferred"].forEach(e=>{t[e]=function(){return this._dataLoader[e].apply(this._dataLoader,arguments)}}),t}()),Bv="bottom-load-panel",Lv="dx-freespace-row",xn="dx-virtual-row",q="scrolling.legacyMode",ll="paging.pageIndex",Le=function(t){return"virtual"===t.option("scrolling.mode")},xt=function(t){return"infinite"===t.option("scrolling.mode")},bt=function(t){return Le(t)||xt(t)},Pv=function(t,e,i,a){for(var r=0;r<e+1;r++){var n=t[i?t.length-1-r:r];n&&!a(n,r===e,i)&&e++}return e},bn=function(t,e){return"data"===t.rowType&&!t.isNewRow||"group"===t.rowType&&e.isGroupItemCountable(t.data)},_L=function(){var t=function(i){var a=i._virtualScrollController.beginPageIndex(-1);Le(i)&&(a<0||i.viewportSize()>=0&&i.getViewportItemIndex()>=0&&(a*i.pageSize()>i.getViewportItemIndex()||a*i.pageSize()+i.itemsCount()<i.getViewportItemIndex()+i.viewportSize())&&i._dataSource.isLoading()?i._isLoading||(i._isLoading=!0,i.loadingChanged.fire(!0)):i._isLoading&&(i._isLoading=!1,i.loadingChanged.fire(!1)))},e={init(){this.callBase.apply(this,arguments),this._items=[],this._totalCount=-1,this._isLoaded=!0,this._loadPageCount=1,this._virtualScrollController=new ol(this.component,this._getVirtualScrollDataOptions())},_getVirtualScrollDataOptions(){var i=this;return{pageSize:()=>i.pageSize(),totalItemsCount:()=>i.totalItemsCount(),hasKnownLastPage:()=>i.hasKnownLastPage(),pageIndex:a=>i._dataSource.pageIndex(a),isLoading:()=>i._dataSource.isLoading()&&!i.isCustomLoading(),pageCount:()=>i.pageCount(),load:()=>i._dataSource.load(),updateLoading(){t(i)},itemsCount:()=>i.itemsCount(!0),items:()=>i._dataSource.items(),viewportItems:a=>(a&&(i._items=a),i._items),onChanged(a){i.changed.fire(a)},changingDuration:()=>i.isLoading()?300:i._renderTime||0}},_handleLoadingChanged(i){!1!==this.option(q)?((!Le(this)||this._isLoadingAll)&&(this._isLoading=i,this.callBase.apply(this,arguments)),this._startLoadTime=i?new Date:void 0):this.callBase.apply(this,arguments)},_handleLoadError(){!1!==this.option(q)&&(this._isLoading=!1,this.loadingChanged.fire(!1)),this.callBase.apply(this,arguments)},_handleDataChanged(i){if(!1===this.option(q))return this._items=this._dataSource.items().slice(),this._totalCount=this._dataSourceTotalCount(!0),void this.callBase.apply(this,arguments);var a=this.callBase.bind(this);this._virtualScrollController.handleDataChanged(a,i)},_customizeRemoteOperations(i,a){var r=!1===this.option(q),n=this.option("scrolling.renderAsync");(0,v.$K)(n)||(n=this._renderTime>=this.option("scrolling.renderingThreshold")),(Le(this)||xt(this)&&r)&&!a.reload&&(a.skip||r)&&!n&&(i.delay=void 0),this.callBase.apply(this,arguments)},items(){return this._items},_dataSourceTotalCount(i){return!1===this.option(q)&&Le(this)&&!i?this._totalCount:this.callBase()},itemsCount(i){return i||!1===this.option(q)?this.callBase():this._virtualScrollController.itemsCount()},load(i){return!1===this.option(q)||i?this.callBase(i):this._virtualScrollController.load()},isLoading(){return!1===this.option(q)?this._dataSource.isLoading():this._isLoading},isLoaded(){return this._dataSource.isLoaded()&&this._isLoaded},resetPagesCache(i){i||this._virtualScrollController.reset(!0),this.callBase.apply(this,arguments)},_changeRowExpandCore(){var i=this.callBase.apply(this,arguments);return!1===this.option(q)||(this.resetPagesCache(),t(this)),i},reload(){this._dataSource.pageIndex(this.pageIndex());var i=this._virtualScrollController;if(!1!==this.option(q)&&i){var a=new b.BH;return this.callBase.apply(this,arguments).done(r=>{var n=i.getDelayDeferred();n?n.done(a.resolve).fail(a.reject):a.resolve(r)}).fail(a.reject),a}return this.callBase.apply(this,arguments)},refresh(i,a){if(!1!==this.option(q)){var{storeLoadOptions:r}=i,n=this._dataSource;a.reload?(this._virtualScrollController.reset(),n.items().length=0,this._isLoaded=!1,t(this),this._isLoaded=!0,xt(this)?(this.pageIndex(0),n.pageIndex(0),r.pageIndex=0,i.pageIndex=0,r.skip=0):(n.pageIndex(this.pageIndex()),n.paginate()&&(i.pageIndex=this.pageIndex(),r.skip=this.pageIndex()*this.pageSize()))):xt(this)&&r.skip&&this._totalCountCorrection<0&&(r.skip+=this._totalCountCorrection)}return this.callBase.apply(this,arguments)},dispose(){this._virtualScrollController.dispose(),this.callBase.apply(this,arguments)},loadPageCount(i){if(!(0,v.$K)(i))return this._loadPageCount;this._loadPageCount=i},_handleDataLoading(i){var a=this.loadPageCount(),r=this.pageSize(),n=!1===this.option(q),{storeLoadOptions:s}=i,o=(0,v.$K)(s.take);i.loadPageCount=a,!i.isCustomLoading&&n&&o&&a>1&&r>0&&(s.take=a*r),this.callBase.apply(this,arguments)},_loadPageSize(){return this.callBase.apply(this,arguments)*this.loadPageCount()}};return["beginPageIndex","endPageIndex","pageIndex"].forEach(i=>{e[i]=function(){if(!1===this.option(q)){var a=this._dataSource;return a.pageIndex.apply(a,arguments)}var r=this._virtualScrollController;return r[i].apply(r,arguments)}}),["virtualItemsCount","getContentOffset","getVirtualContentSize","setContentItemSizes","setViewportPosition","getViewportItemIndex","setViewportItemIndex","getItemIndexByPosition","viewportSize","viewportItemSize","getItemSize","getItemSizes","loadIfNeed"].forEach(i=>{e[i]=function(){var a=this._virtualScrollController;return a[i].apply(a,arguments)}}),e}(),vL=function(){var t=function(e,i){var a=e.toArray().map(s=>(0,p.Z)(s).parent(".".concat(i)).get(0)).filter(s=>s);a.length&&(e=(0,p.Z)(a));for(var r=i===Lv?e.length-1:e.length,n=0;n<r;n++)e.eq(n).remove()};return{init(){var e,i=this.getController("data");this.callBase(),i.pageChanged.add(a=>{var r=this._scrollTop;this.scrollToPage(a??i.pageIndex()),!1===this.option(q)&&this._scrollTop===r&&i.updateViewport()}),i.dataSourceChanged.add(()=>{!this._scrollTop&&this._scrollToCurrentPageOnResize()}),null===(e=i.stateLoaded)||void 0===e||e.add(()=>{this._scrollToCurrentPageOnResize()}),this._scrollToCurrentPageOnResize()},_scrollToCurrentPageOnResize(){var e=this.getController("data");if(e.pageIndex()>0){var i=()=>{this.resizeCompleted.remove(i),this.scrollToPage(e.pageIndex())};this.resizeCompleted.add(i)}},scrollToPage(e){var r,i=this._dataController,a=i?i.pageSize():0;if(Le(this)||xt(this)){var n=i.getItemSize(),s=i.getItemSizes(),o=e*a;for(var l in r=o*n,s)parseInt(l)<o&&(r+=s[l]-n)}else r=0;this.scrollTo({y:r,x:this._scrollLeft})},renderDelayedTemplates(){this.waitAsyncTemplates().done(()=>{this._updateContentPosition(!0)}),this.callBase.apply(this,arguments)},_renderCore(e){var i=new Date,a=this.callBase.apply(this,arguments),r=this._dataController._dataSource;if(r&&e){var n=e.items?e.items.length:20,s=this._dataController.viewportSize()||20;r._renderTime=V.isVirtualRowRendering(this)&&n>0&&!1!==this.option(q)?(new Date-i)*s/n:new Date-i}return a},_getRowElements(e){var i=this.callBase(e);return i&&i.not(".".concat(xn))},_removeRowsElements(e,i,a){var r=this._getRowElements(e).toArray();r="append"===a?r.slice(0,i):r.slice(-i);var n=this.getController("errorHandling");r.map(s=>{var o=(0,p.Z)(s);n&&n.removeErrorRow(o.next()),o.remove()})},_updateContent(e,i){var a,r=this._findContentElement(),n=i&&i.changeType,s=(0,b.BH)(),o=r.children().first();return"append"===n||"prepend"===n?this.waitAsyncTemplates().done(()=>{var l=this._getBodies(e);1===l.length?this._getBodies(o)["append"===n?"append":"prepend"](l.children()):l["append"===n?"appendTo":"prependTo"](o),e.remove(),a=this._getFreeSpaceRowElements(o),t(a,Lv),i.removeCount&&this._removeRowsElements(o,i.removeCount,n),this._restoreErrorRow(o),s.resolve()}).fail(s.reject):this.callBase.apply(this,arguments).done(()=>{"update"===n&&this._restoreErrorRow(o),s.resolve()}).fail(s.reject),s.promise().done(()=>{this._updateBottomLoading()})},_addVirtualRow(e,i,a,r){if(r){var n=this._createEmptyRow(xn,i,r);n=this._wrapRowIfNeed(e,n),this._appendEmptyRow(e,n,a)}},_updateContentItemSizes(){var e=this._getRowHeights(),i=this._correctRowHeights(e);this._dataController.setContentItemSizes(i)},_updateViewportSize(e,i){(0,v.$K)(e)||(e=(0,I.zp)(this._hasHeight?this.element():(0,Z.Jj)())),this._dataController.viewportHeight(e,i)},_getRowHeights(){var e,i,a=null===(i=null===(e=this.getController("editing"))||void 0===e?void 0:e.isPopupEditMode)||void 0===i?void 0:i.call(e),r=this._getRowElements(this._tableElement).toArray();return a&&(r=r.filter(n=>!(0,p.Z)(n).hasClass("dx-row-inserted"))),r.map(n=>(0,se.l)(n).height)},_correctRowHeights(e){for(var i=this._dataController,a=i._dataSource,r=[],n=i.getVisibleRows(),s=0,o=!0,l=-1,d=0;d<e.length;d++){var u=n[d];(0,v.$K)(u)&&(!1===this.option(q)?(l>=0&&l!==u.loadIndex&&(r.push(s),s=0),l=u.loadIndex):bn(u,a)&&(o?o=!1:(r.push(s),s=0)),s+=e[d])}return s>0&&r.push(s),r},_updateContentPosition(e){var i=this._dataController;if(i.viewportItemSize(this._rowHeight||20),Le(this)||V.isVirtualRowRendering(this)){e||this._updateContentItemSizes();var r=i.getContentOffset("begin"),n=i.getContentOffset("end"),s=this.getTableElements(),o=s.children("tbody").children(".".concat(xn));t(o,xn),s.each((l,d)=>{var u=l>0,h=this._isFixedTableRendering;this._isFixedTableRendering=u,this._addVirtualRow((0,p.Z)(d),u,"top",r),this._addVirtualRow((0,p.Z)(d),u,"bottom",n),this._isFixedTableRendering=h})}},_isTableLinesDisplaysCorrect(e){return e.find(".".concat("dx-column-lines")).length>0===this.option("showColumnLines")},_isColumnElementsEqual(e,i){var a=e.length===i.length;return a&&(0,y.S6)(e,(r,n)=>{if(n.style.width!==i[r].style.width)return a=!1}),a},_getCellClasses(e){var i=[],{cssClass:a}=e,r="expand"===e.command;return a&&i.push(a),r&&i.push(this.addWidgetPrefix("group-space")),i},_findBottomLoadPanel(e){var i=e||this.element(),a=i&&i.find(".".concat(this.addWidgetPrefix(Bv)));if(a&&a.length)return a},_updateBottomLoading(){var e=Le(this),i=xt(this),a=!this._dataController.hasKnownLastPage()&&this._dataController.isLoaded()&&(e||i),r=this._findContentElement(),n=this._findBottomLoadPanel(r);a?n||(0,p.Z)("<div>").addClass(this.addWidgetPrefix(Bv)).append(this._createComponent((0,p.Z)("<div>"),it.Z).$element()).appendTo(r):n&&n.remove()},_handleScroll(e){var i=!0===this.option(q);(this._scrollTop!==e.scrollOffset.top||e.forceUpdateScrollPosition)&&(this._hasHeight||!i&&0===e.scrollOffset.top)&&this._rowHeight&&(this._scrollTop=e.scrollOffset.top,(Le(this)||"standard"!==this.option("scrolling.rowRenderingMode"))&&!1===this.option(q)&&(this._updateContentItemSizes(),this._updateViewportSize(null,this._scrollTop)),this._dataController.setViewportPosition(e.scrollOffset.top)),this.callBase.apply(this,arguments)},_needUpdateRowHeight(e){return this.callBase.apply(this,arguments)||e>0&&xt(this)&&!V.isVirtualRowRendering(this)},_updateRowHeight(){if(this.callBase.apply(this,arguments),this._rowHeight){this._updateContentPosition();var e=(0,I.zp)(this._hasHeight?this.element():(0,Z.Jj)()),i=this._dataController;!1===this.option(q)?(this._updateViewportSize(e),i.updateViewport()):i.viewportSize(Math.ceil(e/this._rowHeight))}},updateFreeSpaceRowHeight(){var e=this.callBase.apply(this,arguments);return e&&this._updateContentPosition(),e},setLoading(e,i){var a=this._dataController,r=a.pageIndex()>0&&a.isLoaded()&&!!this._findBottomLoadPanel();!1===this.option(q)&&e&&a.isViewportChanging()||(r&&(e=!1),this.callBase.call(this,e,i))},_resizeCore(){var e=this,i=e.element();e.callBase(),e.component.$element()&&!e._windowScroll&&(0,st.al)(i)&&(e._windowScroll=Rv(i,a=>{!e._hasHeight&&e._rowHeight&&e._dataController.setViewportPosition(a)},e.component.$element()),e.on("disposing",()=>{e._windowScroll.dispose()})),!1!==this.option(q)&&e.loadIfNeed()},loadIfNeed(){var e,i=this._dataController;null===(e=i?.loadIfNeed)||void 0===e||e.call(i)},_restoreErrorRow(){if(!1===this.option(q)){var e=this.getController("errorHandling");e?.removeErrorRow()}this.callBase.apply(this,arguments)},dispose(){clearTimeout(this._scrollTimeoutID),this.callBase()}}}(),Fv={defaultOptions:()=>({scrolling:{timeout:300,updateTimeout:300,minTimeout:0,renderingThreshold:100,removeInvisiblePages:!0,rowPageSize:5,prerenderedRowChunkSize:1,mode:"standard",preloadEnabled:!1,rowRenderingMode:"standard",loadTwoPagesOnStart:!1,legacyMode:!1,prerenderedRowCount:1}}),extenders:{dataSourceAdapter:_L,controllers:{data:function(){var t={_refreshDataSource(){var e=this.callBase.apply(this,arguments)||(new b.BH).resolve().promise();return e.done(this.initVirtualRows.bind(this)),e},_loadDataSource(){var e;if(this._rowsScrollController&&bt(this)){var{loadPageCount:i}=(0,v.$K)(this._loadViewportParams)?this.getLoadPageParams():{loadPageCount:void 0};i>=1&&(null===(e=this._dataSource)||void 0===e||e.loadPageCount(i))}return this.callBase.apply(this,arguments)},getRowPageSize(){var e=this.option("scrolling.rowPageSize"),i=this.pageSize();return i&&i<e?i:e},reload(){var e=this._rowsScrollController||this._dataSource,i=e&&e.getItemIndexByPosition(),a=this.callBase.apply(this,arguments);return a&&a.done(()=>{var r;if(Le(this)||V.isVirtualRowRendering(this)){var n=this.getRowIndexOffset(),s=Math.floor(i)-n,{component:o}=this,l=o.getScrollable&&o.getScrollable(),d=this.dataSource().operationTypes().sorting;if(l&&!d&&s>=0){var u=o.getRowElement(s),h=u&&u[0]&&(0,p.Z)(u[0]),c=h&&h.position().top,_=ve.Z.chrome&&Number(null!==(r=ve.Z.version)&&void 0!==r?r:0)>=91;c>(ve.Z.mozilla||_?1:0)&&(c=Math.round(c+(0,I.zp)(h)*(i%1)),l.scrollTo({y:c}))}}})},initVirtualRows(){var e=V.isVirtualRowRendering(this);if(this._allItems=null,this._loadViewportParams=null,"virtual"!==this.option("scrolling.mode")&&!e||!e||!1!==this.option(q)&&!this.option("scrolling.rowPageSize"))return this._visibleItems=null,void(this._rowsScrollController=null);var i=!Le(this)&&this.pageIndex()>=this.pageCount()?this.pageCount()-1:this.pageIndex();this._rowPageIndex=Math.ceil(i*this.pageSize()/this.getRowPageSize()),this._visibleItems=!1===this.option(q)?null:[],this._viewportChanging=!1,this._needUpdateViewportAfterLoading=!1,this._rowsScrollController||(this._rowsScrollController=new ol(this.component,this._getRowsScrollDataOptions(),!0),this._rowsScrollController.positionChanged.add(()=>{var a;if(!1===this.option(q))return this._viewportChanging=!0,this.loadViewport(),void(this._viewportChanging=!1);null===(a=this._dataSource)||void 0===a||a.setViewportItemIndex(this._rowsScrollController.getViewportItemIndex())})),!1===this.option(q)&&this._updateLoadViewportParams(),this.isLoaded()&&!1!==this.option(q)&&this._rowsScrollController.load()},isViewportChanging(){return this._viewportChanging},_getRowsScrollDataOptions(){var e=this,i=function(a){return bn(a,e._dataSource)};return{pageSize:()=>e.getRowPageSize(),loadedOffset(){var a;return Le(e)&&(null===(a=e._dataSource)||void 0===a?void 0:a.lastLoadOptions().skip)||0},loadedItemCount:()=>e._itemCount,totalItemsCount:()=>bt(e)?e.totalItemsCount():!1===e.option(q)?e._itemCount:e._items.filter(i).length,hasKnownLastPage:()=>!1!==e.option(q)||e.hasKnownLastPage(),pageIndex:a=>(void 0!==a&&(e._rowPageIndex=a),e._rowPageIndex),isLoading:()=>e.isLoading(),pageCount(){return Math.ceil(this.totalItemsCount()/this.pageSize())||1},load(){e._rowsScrollController.pageIndex()>=this.pageCount()&&(e._rowPageIndex=this.pageCount()-1,e._rowsScrollController.pageIndex(e._rowPageIndex)),(this.items().length||!this.totalItemsCount())&&e._rowsScrollController.handleDataChanged(a=>{(a=a||{}).changeType=a.changeType||"refresh",a.items=a.items||e._visibleItems,e._visibleItems.forEach((r,n)=>{r.rowIndex=n}),e._fireChanged(a)})},updateLoading(){},itemsCount(){return this.items(!0).length},correctCount:(a,r,n)=>Pv(a,r,n,(s,o,l)=>s.isNewRow?o&&!l:o&&l?!s.isNewRow:i(s)),items(a){var r=e._items;if(e.option(q)){var n=e.dataSource(),s=n?.virtualItemsCount(),o=s?s.begin:0,l=e.getRowPageSize(),d=e._rowPageIndex*l-o,u=l;if(d<0)return[];d&&(d=this.correctCount(r,d),r=r.slice(d)),u&&(u=this.correctCount(r,u),r=r.slice(0,u))}return a?r.filter(i):r},viewportItems:a=>(a&&!1!==e.option(q)&&(e._visibleItems=a),e._visibleItems),onChanged(){},changingDuration(){var a=e.dataSource();return a?.isLoading()&&!1!==e.option(q)?300:a?._renderTime||0}}},_updateItemsCore(e){var i=this.getRowIndexDelta();if(this.callBase.apply(this,arguments),!1===this.option(q)&&V.isVirtualRowRendering(this))"update"===e.changeType&&0===e.rowIndices.length&&e.cancelEmptyChanges&&(e.cancel=!0);else{var a=this._rowsScrollController;if(a){var r=this._visibleItems,n="refresh"===e.changeType||e.isLiveUpdate;if("append"===e.changeType&&e.items&&!e.items.length)return;n||"append"===e.changeType||"prepend"===e.changeType?(e.cancel=!0,n&&a.reset(!0),a.load()):("update"===e.changeType?e.rowIndices.forEach((s,o)=>{var l=e.changeTypes[o],d=e.items[o];"update"===l?r[s]=d:"insert"===l?r.splice(s,0,d):"remove"===l&&r.splice(s,1)}):(r.forEach((s,o)=>{r[o]=this._items[o+i]||r[o]}),e.items=r),function(t){t.forEach((e,i)=>{e.rowIndex=i})}(r))}}},_updateLoadViewportParams(){var e=this._rowsScrollController.getViewportParams(),i=this.pageSize();if(e&&!bt(this)&&i>0){var a=this.pageIndex()*i;e.skip+=a}this._loadViewportParams=e},_processItems(){var e,i=this.callBase.apply(this,arguments);if(!1===this.option(q)){var n,s,o,a=this._dataSource,r=null!==(e=a?.lastLoadOptions().skip)&&void 0!==e?e:0,l=!1,d=[];i.forEach(u=>{var{rowType:h}=u,c=bn(u,a),_="group"===h&&(n||c||"group"!==s&&r>0),g="data"===h&&c&&(n||"group"!==s);!u.isNewRow&&(0,v.$K)(n)&&(_||g)&&(!o||l)&&r++,(_||g)&&(l=!0),u.isNewRow?d.push(u):(d.forEach(m=>{m.loadIndex=r}),d=[]),u.loadIndex=r,n=c,s=h,o=u.isNewRow}),d.forEach(u=>{u.loadIndex=r})}return i},_afterProcessItems(e){if(this._itemCount=e.filter(s=>bn(s,this._dataSource)).length,(0,v.$K)(this._loadViewportParams)){this._updateLoadViewportParams();var i=e;if(this._allItems=e,e.length){var{skipForCurrentPage:a}=this.getLoadPageParams(!0),r=e[0].loadIndex+a,{take:n}=this._loadViewportParams;i=e.filter(s=>s.loadIndex>=r&&(s.loadIndex<r+n||s.isNewRow&&s.loadIndex===r&&0===n))}return i}return this.callBase.apply(this,arguments)},_applyChange(e){var i=this,{items:a}=e,{changeType:r}=e,{removeCount:n}=e;switch(n&&(n=Pv(i._items,n,"prepend"===r,(o,l)=>"data"===o.rowType&&!o.isNewRow||"group"===o.rowType&&(i._dataSource.isGroupItemCountable(o.data)||l)),e.removeCount=n),r){case"prepend":i._items.unshift.apply(i._items,a),n&&i._items.splice(-n);break;case"append":i._items.push.apply(i._items,a),n&&i._items.splice(0,n);break;default:i.callBase(e)}},items(e){return e?this._allItems||this._items:this._visibleItems||this._items},getRowIndexDelta(){var e=0;if(this.option(q)){var i=this._visibleItems;i&&i[0]&&(e=this._items.indexOf(i[0]))}return e<0?0:e},getRowIndexOffset(e){var i,a=0,r=this.dataSource(),n=this._rowsScrollController,s=!1===this.option(q),o=bt(this);if(n&&!e)if(s&&(0,v.$K)(this._loadViewportParams)){var{skipForCurrentPage:l,pageIndex:d}=this.getLoadPageParams(!0),u=this.items(!0);if(a=o?d*this.pageSize():0,u.length){var h=u[0].loadIndex;a+=u.filter(c=>c.loadIndex<h+l).length}}else a=n.beginPageIndex()*n.pageSize();else o&&s&&r?a=null!==(i=r.lastLoadOptions().skip)&&void 0!==i?i:0:Le(this)&&r&&(a=r.beginPageIndex()*r.pageSize());return a},getDataIndex(){return!1===this.option(q)?this.getRowIndexOffset(!0):this.callBase.apply(this,arguments)},viewportSize(){var e=this._rowsScrollController,i=this._dataSource,a=e?.viewportSize.apply(e,arguments);return!1===this.option(q)?a:i?.viewportSize.apply(i,arguments)},viewportHeight(e,i){var a;null===(a=this._rowsScrollController)||void 0===a||a.viewportHeight(e,i)},viewportItemSize(){var e=this._rowsScrollController,i=this._dataSource,a=e?.viewportItemSize.apply(e,arguments);return!1===this.option(q)?a:i?.viewportItemSize.apply(i,arguments)},setViewportPosition(){var e=this._rowsScrollController,i=this._dataSource;this._isPaging=!1,e?e.setViewportPosition.apply(e,arguments):i?.setViewportPosition.apply(i,arguments)},setContentItemSizes(e){var i=this._rowsScrollController,a=this._dataSource,r=i?.setContentItemSizes(e);return!1===this.option(q)?r:a?.setContentItemSizes(e)},getPreloadedRowCount(){var e=this.option("scrolling.preloadedRowCount"),i=this.option("scrolling.preloadEnabled");if((0,v.$K)(e))return e;var a=this.viewportSize();return i?2*a:a},getLoadPageParams(e){var i,a,r=this.pageSize(),n=this._loadViewportParams,s=null===(i=this._dataSource)||void 0===i?void 0:i.lastLoadOptions(),o=s?.pageIndex||0,l=s?.take||0,d=this._rowsScrollController.isScrollingBack(),u=d?this.getPreloadedRowCount():0,h=d?0:this.getPreloadedRowCount(),c=(null===(a=this._dataSource)||void 0===a?void 0:a.totalCountCorrection())||0,_=Math.max(0,n.skip-u),g=e?o:Math.floor(r?_/r:0),m=n.skip-g*r,T=Math.ceil(r?(e?l:n.take+m+h-c)/r:0);return{pageIndex:g,loadPageCount:Math.max(1,T),skipForCurrentPage:Math.max(0,m)}},_updateVisiblePageIndex(e){if(this._rowsScrollController){if((0,v.$K)(e))return this._silentOption(ll,e),void this.pageChanged.fire();var i=this._rowsScrollController.getViewportItemIndex(),a=Math.floor(i/this.pageSize());this.pageIndex()!==a&&(this._silentOption(ll,a),this.updateItems({changeType:"pageIndex"}))}},_getChangedLoadParams(){var e=this.getLoadPageParams(!0),{pageIndex:i,loadPageCount:a}=this.getLoadPageParams(),r=this._pageIndexIsValid(i),n=null;return!this._isLoading&&r&&(i!==e.pageIndex||a!==e.loadPageCount)&&(n={pageIndex:i,loadPageCount:a}),n},_pageIndexIsValid(e){var i=!0;return(xt(this)&&this.hasKnownLastPage()||Le(this))&&(i=e*this.pageSize()<this.totalItemsCount()),i},_loadItems(e,i){var a,r,n=bt(this),s=this._dataSource,o=this._getChangedLoadParams(),l=null!==(a=s?.loadPageCount())&&void 0!==a?a:0,d=this.pageSize()*l,u=null!==(r=s?.pageIndex())&&void 0!==r?r:0,h=o?.pageIndex===u,c=xt(this)&&this.totalItemsCount()<d,_="repaint"===this.option("editing.refreshMode"),f=!1;if(!s||n&&e&&(_&&i||o?.pageIndex>u||h&&c))return f;if(n&&this._isLoading&&(this._needUpdateViewportAfterLoading=!0),n&&o){f=!0,s.pageIndex(o.pageIndex),s.loadPageCount(o.loadPageCount),this._repaintChangesOnly=!0,this._needUpdateDimensions=!0;var m=this._viewportChanging;this.load().always(()=>{this._repaintChangesOnly=void 0,this._needUpdateDimensions=void 0}).done(()=>{var x=this.pageCount()>0&&this.pageIndex()===this.pageCount()-1;(m||x)&&this._updateVisiblePageIndex(),this._needUpdateViewportAfterLoading&&(this._needUpdateViewportAfterLoading=!1,this.loadViewport({checkLoadedParamsOnly:!0}))})}return f},loadViewport(e){var i,a,{checkLoadedParamsOnly:r,checkLoading:n,viewportIsNotFilled:s}=e??{};if((bt(this)||V.isVirtualRowRendering(this))&&(this._updateLoadViewportParams(),!(this._loadItems(n,!s)||this._isLoading&&n||r))){var u=!(null!==(a=null===(i=this.getController("editing"))||void 0===i?void 0:i.getChanges())&&void 0!==a&&a.length);this.updateItems({repaintChangesOnly:!0,needUpdateDimensions:!0,useProcessedItemsCache:u,cancelEmptyChanges:!0})}},updateViewport(){var e,i,a=this.viewportSize(),r=this.items().length,n=a>r,s=null!==(i=null===(e=this._loadViewportParams)||void 0===e?void 0:e.take)&&void 0!==i?i:0,o=this._rowsScrollController,l=o?.getViewportParams().take;(n||s<l)&&!this._isPaging&&r&&this.loadViewport({checkLoading:!0,viewportIsNotFilled:n})},loadIfNeed(){if(!1!==this.option(q)){var e=this._rowsScrollController;e&&e.loadIfNeed();var i=this._dataSource;return i&&i.loadIfNeed()}},getItemSize(){var e=this._rowsScrollController;if(e)return e.getItemSize.apply(e,arguments);var i=this._dataSource;return i&&i.getItemSize.apply(i,arguments)},getItemSizes(){var e=this._rowsScrollController;if(e)return e.getItemSizes.apply(e,arguments);var i=this._dataSource;return i&&i.getItemSizes.apply(i,arguments)},getContentOffset(){var e=this._rowsScrollController;if(e)return e.getContentOffset.apply(e,arguments);var i=this._dataSource;return i&&i.getContentOffset.apply(i,arguments)},refresh(e){var i=this._dataSource;return i&&e&&e.load&&xt(this)&&i.resetCurrentTotalCount(),this.callBase.apply(this,arguments)},dispose(){var e=this._rowsScrollController;e&&e.dispose(),this.callBase.apply(this,arguments)},topItemIndex(){var e;return null===(e=this._loadViewportParams)||void 0===e?void 0:e.skip},bottomItemIndex(){var e=this._loadViewportParams;return e&&e.skip+e.take},virtualItemsCount(){var e=this._rowsScrollController;if(e)return e.virtualItemsCount.apply(e,arguments);var i=this._dataSource;return i?.virtualItemsCount.apply(i,arguments)},pageIndex(e){var i,a=bt(this),r=this._rowsScrollController;return!1===this.option(q)&&a&&r&&void 0===e?null!==(i=this.option(ll))&&void 0!==i?i:0:this.callBase.apply(this,arguments)},_fireChanged(e){this.callBase.apply(this,arguments);var{operationTypes:i}=e;if(!1===this.option(q)&&bt(this)&&i){var{fullReload:a,pageIndex:r}=i;e.isDataChanged&&!a&&r&&this._updateVisiblePageIndex(this._dataSource.pageIndex())}},_getPagingOptionValue(e){var i=this.callBase.apply(this,arguments);return!1===this.option(q)&&bt(this)&&(i=this[e]()),i},isEmpty(){return!1===this.option(q)?!this.items(!0).length:this.callBase(this,arguments)},isLastPageLoaded(){var e=!1;if(!1===this.option(q)&&bt(this)){var{pageIndex:i,loadPageCount:a}=this.getLoadPageParams(!0);e=i+a>=this.pageCount()}else e=this.callBase.apply(this,arguments);return e},reset(){this._itemCount=0,this._allItems=null,this.callBase.apply(this,arguments)},_applyFilter(){var e;null===(e=this._dataSource)||void 0===e||e.loadPageCount(1),this.callBase.apply(this,arguments)}};return V.proxyMethod(t,"getVirtualContentSize"),V.proxyMethod(t,"setViewportItemIndex"),t}(),resizing:{_updateMasterDataGridCore(t){return(0,b.gx)(this.callBase.apply(this,arguments)).done(e=>{var i=Le(t)&&!1===t.option(q);!e&&i&&t.getScrollable()&&t.updateDimensions()})},hasResizeTimeout(){return!!this._resizeTimeout},resize(){var e,{callBase:t}=this;if(Le(this)||V.isVirtualRowRendering(this)){clearTimeout(this._resizeTimeout),this._resizeTimeout=null;var i=new Date-this._lastTime,a=this.option("scrolling.updateTimeout");this._lastTime&&i<a?(e=new b.BH,this._resizeTimeout=setTimeout(()=>{this._resizeTimeout=null,t.apply(this).done(e.resolve).fail(e.reject),this._lastTime=new Date},a),this._lastTime=new Date):(e=t.apply(this),this._dataController.isLoaded()&&(this._lastTime=new Date))}else e=t.apply(this);return e},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._resizeTimeout)}}},views:{rowsView:vL}}};$.registerModule("virtualScrolling",Fv),ha.extend(Fv.extenders.dataSourceAdapter);var Mv=(t,e)=>{var r,i=(0,p.Z)((0,Z.Jj)()),{top:a}=t.offset();if((0,v.kE)(e)){if(e<a)return a-e;r=(0,I.fA)(i)-e+i.scrollTop()}else{var n=a-i.scrollTop(),s=(0,I.fA)(i)-n-(0,I.zp)(t);r=Math.max(n,s)}return.9*r};const dl=class CL extends wh{_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{orientation:"horizontal",tabIndex:null,onHoverStart:E.ZT})}_initDataAdapter(){this._dataAdapter=this.option("_dataAdapter"),this._dataAdapter||super._initDataAdapter()}_renderContentImpl(){this._renderContextMenuOverlay(),super._renderContentImpl();var e=this._dataAdapter.getNodeByKey(this.option("_parentKey"));e&&this._renderItems(this._getChildNodes(e)),this._renderDelimiter()}_renderDelimiter(){this.$contentDelimiter=(0,p.Z)("<div>").appendTo(this._itemContainer()).addClass("dx-context-menu-content-delimiter")}_getOverlayOptions(){return(0,C.l)(!0,super._getOverlayOptions(),{onPositioned:this._overlayPositionedActionHandler.bind(this),position:{precise:!0}})}_overlayPositionedActionHandler(e){this._showDelimiter(e)}_hoverEndHandler(e){super._hoverEndHandler(e),this._toggleFocusClass(!1,e.currentTarget)}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_hoverStartHandler(e){this.option("onHoverStart")(e),super._hoverStartHandler(e),this._toggleFocusClass(!0,e.currentTarget)}_drawSubmenu(e){this._actions.onShowing({rootItem:(0,W.u)(e),submenu:this}),super._drawSubmenu(e),this._actions.onShown({rootItem:(0,W.u)(e),submenu:this})}_hideSubmenu(e){this._actions.onHiding({cancel:!0,rootItem:(0,W.u)(e),submenu:this}),super._hideSubmenu(e),this._actions.onHidden({rootItem:(0,W.u)(e),submenu:this})}_showDelimiter(e){if(this.$contentDelimiter){var i=this._itemContainer().children(".".concat("dx-submenu")).eq(0),a=this.option("position").of.find(".dx-context-menu-container-border"),r={of:i,precise:!0},n=e.position,s=n.v.location,o=n.h.location,l=a.offset(),d=Math.round(l.left),u=Math.round(l.top),h=(0,I.dz)(a),c=(0,I.Cr)(a),_=(0,I.dz)(i),g=(0,I.Cr)(i);this.$contentDelimiter.css("display","block"),(0,I.cl)(this.$contentDelimiter,this._isMenuHorizontal()?h<_?h:_:3),(0,I.QQ)(this.$contentDelimiter,this._isMenuHorizontal()?3:c<g?c:g),this._isMenuHorizontal()?s>u?Math.round(o)===d?(r.offset="0 -2.5",r.at=r.my="left top"):(r.offset="0 -2.5",r.at=r.my="right top"):((0,I.QQ)(this.$contentDelimiter,5),Math.round(o)===d?(r.offset="0 5",r.at=r.my="left bottom"):(r.offset="0 5",r.at=r.my="right bottom")):o>d?Math.round(s)===u?(r.offset="-2.5 0",r.at=r.my="left top"):(r.offset="-2.5 0",r.at=r.my="left bottom"):Math.round(s)===u?(r.offset="2.5 0",r.at=r.my="right top"):(r.offset="2.5 0",r.at=r.my="right bottom"),$t.Z.setup(this.$contentDelimiter,r)}}_getContextMenuPosition(){return this.option("position")}isOverlayVisible(){return this._overlay.option("visible")}getOverlayContent(){return this._overlay.$content()}};var fi="dx-menu",SL=fi+"-vertical",kv=fi+"-horizontal",ul=fi+"-item",Nv=fi+"-items-container",hl=ul+"-expanded",wn="dx-context-menu",cl=wn+"-container-border",Hv="dx-state-hover",yn=fi+"-adaptive-mode",Zv=fi+"-hamburger-button",EL=yn+"-overlay-wrapper",Ga="showSubmenu",Ji="nextItem",Xt="prevItem",OL={show:50,hide:300},$v=["onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","onItemContextMenu","onItemClick","onSelectionChanged","onItemRendered"];class zv extends ch{_getDefaultOptions(){return(0,C.l)(super._getDefaultOptions(),{orientation:"horizontal",submenuDirection:"auto",showFirstSubmenuMode:{name:"onClick",delay:{show:50,hide:300}},hideSubmenuOnMouseLeave:!1,onSubmenuShowing:null,onSubmenuShown:null,onSubmenuHiding:null,onSubmenuHidden:null,adaptivityEnabled:!1})}_setOptionsByReference(){super._setOptionsByReference(),(0,C.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_itemElements(){var e=super._itemElements(),i=this._submenuItemElements();return e.add(i)}_submenuItemElements(){var e=[],i=".".concat(ul),a=this._submenus.length&&this._submenus[0];return a&&a.itemsContainer()&&(e=a.itemsContainer().find(i)),e}_focusTarget(){return this.$element()}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_moveFocus(e){var s,l,i=this._getAvailableItems(),a=this._isMenuHorizontal(),r=this._getActiveItem(!0);switch(e){case"up":s=a?Ga:this._getItemsNavigationOperation(Xt),l=this._getKeyboardNavigationAction(s,a?r:i)();break;case"down":s=a?Ga:this._getItemsNavigationOperation(Ji),l=this._getKeyboardNavigationAction(s,a?r:i)();break;case"right":s=a?this._getItemsNavigationOperation(Ji):Ga,l=this._getKeyboardNavigationAction(s,a?i:r)();break;case"left":s=a?this._getItemsNavigationOperation(Xt):Ga,l=this._getKeyboardNavigationAction(s,a?i:r)();break;default:return super._moveFocus(e)}l&&0!==l.length&&this.option("focusedElement",(0,W.u)(l))}_getItemsNavigationOperation(e){var i=e;return this.option("rtlEnabled")&&(i=e===Xt?Ji:Xt),i}_getKeyboardNavigationAction(e,i){var a=E.ZT;switch(e){case Ga:i.hasClass("dx-state-disabled")||(a=this._showSubmenu.bind(this,i));break;case Ji:a=this._nextItem.bind(this,i);break;case Xt:a=this._prevItem.bind(this,i)}return a}_clean(){super._clean(),this.option("templatesRenderAsynchronously")&&clearTimeout(this._resizeEventTimer)}_visibilityChanged(e){e&&(this._menuItemsWidth||this._updateItemsWidthCache(),this._dimensionChanged())}_isAdaptivityEnabled(){return this.option("adaptivityEnabled")&&"horizontal"===this.option("orientation")}_updateItemsWidthCache(){var e=this.$element().find("ul").first().children("li").children(".".concat(ul));this._menuItemsWidth=this._getSummaryItemsWidth(e,!0)}_dimensionChanged(){if(this._isAdaptivityEnabled()){var e=(0,I.Y_)(this.$element());this._toggleAdaptiveMode(this._menuItemsWidth>e)}}_init(){super._init(),this._submenus=[]}_initActions(){this._actions={},(0,y.S6)($v,(e,i)=>{this._actions[i]=this._createActionByOption(i)})}_initMarkup(){this._visibleSubmenu=null,this.$element().addClass(fi),super._initMarkup(),this._addCustomCssClass(this.$element()),this.setAria("role","menubar")}_render(){super._render(),this._initAdaptivity()}_renderHamburgerButton(){return this._hamburger=new Be.Z((0,p.Z)("<div>").addClass(Zv),{icon:"menu",activeStateEnabled:!1,onClick:this._toggleTreeView.bind(this)}),this._hamburger.$element()}_toggleTreeView(e){(0,v.PO)(e)&&(e=!this._overlay.option("visible")),this._overlay.option("visible",e),this._toggleHamburgerActiveState(e)}_toggleHamburgerActiveState(e){this._hamburger&&this._hamburger.$element().toggleClass("dx-state-active",e)}_toggleAdaptiveMode(e){var i=this.$element().find(".".concat(kv)),a=this.$element().find(".".concat(yn));e?this._hideVisibleSubmenu():(this._treeView&&this._treeView.collapseAll(),this._overlay&&this._toggleTreeView(e)),i.toggle(!e),a.toggle(e)}_removeAdaptivity(){this._$adaptiveContainer&&(this._toggleAdaptiveMode(!1),this._$adaptiveContainer.remove(),this._$adaptiveContainer=null,this._treeView=null,this._hamburger=null,this._overlay=null)}_treeviewItemClickHandler(e){this._actions.onItemClick(e),e.node.children.length||this._toggleTreeView(!1)}_getAdaptiveOverlayOptions(){var i=this.option("rtlEnabled")?"right":"left";return{_ignoreFunctionValueDeprecation:!0,maxHeight:()=>Mv(this.$element()),deferRendering:!1,shading:!1,animation:!1,hideOnParentScroll:!0,onHidden:()=>{this._toggleHamburgerActiveState(!1)},height:"auto",hideOnOutsideClick:a=>!(0,p.Z)(a.target).closest(".".concat(Zv)).length,position:{collision:"flipfit",at:"bottom "+i,my:"top "+i,of:this._hamburger.$element()}}}_getTreeViewOptions(){var e={};return(0,y.S6)(["rtlEnabled","width","accessKey","activeStateEnabled","animation","dataSource","disabled","displayExpr","displayExpr","focusStateEnabled","hint","hoverStateEnabled","itemsExpr","items","itemTemplate","selectedExpr","selectionMode","tabIndex","visible"],(i,a)=>{e[a]=this.option(a)}),(0,y.S6)(["onItemContextMenu","onSelectionChanged","onItemRendered"],(i,a)=>{e[a]=r=>{this._actions[a](r)}}),(0,C.l)(e,{dataSource:this.getDataSource(),animationEnabled:!!this.option("animation"),onItemClick:this._treeviewItemClickHandler.bind(this),onItemExpanded:i=>{this._overlay.repaint(),this._actions.onSubmenuShown(i)},onItemCollapsed:i=>{this._overlay.repaint(),this._actions.onSubmenuHidden(i)},selectNodesRecursive:!1,selectByClick:this.option("selectByClick"),expandEvent:"click"})}_initAdaptivity(){if(this._isAdaptivityEnabled()){this._$adaptiveContainer=(0,p.Z)("<div>").addClass(yn);var e=this._renderHamburgerButton();this._treeView=this._createComponent((0,p.Z)("<div>"),Yr,this._getTreeViewOptions()),this._overlay=this._createComponent((0,p.Z)("<div>"),Nt.Z,this._getAdaptiveOverlayOptions()),this._overlay.$content().append(this._treeView.$element()).addClass(yn).addClass(this.option("cssClass")),this._overlay.$wrapper().addClass(EL),this._$adaptiveContainer.append(e),this._$adaptiveContainer.append(this._overlay.$element()),this.$element().append(this._$adaptiveContainer),this._updateItemsWidthCache(),this._dimensionChanged()}}_getDelay(e){var i=this.option("showFirstSubmenuMode").delay;return(0,v.$K)(i)?(0,v.Kn)(i)?i[e]:i:OL[e]}_keyboardHandler(e){return super._keyboardHandler(e,!!this._visibleSubmenu)}_renderContainer(){var e=(0,p.Z)("<div>");return e.appendTo(this.$element()).addClass(this._isMenuHorizontal()?kv:SL),super._renderContainer(e)}_renderSubmenuItems(e,i){var a=this._createSubmenu(e,i);return this._submenus.push(a),this._renderBorderElement(i),a}_getKeyboardListeners(){return super._getKeyboardListeners().concat(this._visibleSubmenu)}_createSubmenu(e,i){var a=(0,p.Z)("<div>").addClass(wn).appendTo(i),r=this._getChildNodes(e),n=this._createComponent(a,dl,(0,C.l)(this._getSubmenuOptions(),{_dataAdapter:this._dataAdapter,_parentKey:e.internalFields.key,items:r,onHoverStart:this._clearTimeouts.bind(this),position:this.getSubmenuPosition(i)}));return this._attachSubmenuHandlers(i,n),n}_getSubmenuOptions(){var e=(0,p.Z)("<div>"),i=this._isMenuHorizontal();return{itemTemplate:this.option("itemTemplate"),target:e,orientation:this.option("orientation"),selectionMode:this.option("selectionMode"),cssClass:this.option("cssClass"),selectByClick:this.option("selectByClick"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),showSubmenuMode:this.option("showSubmenuMode"),displayExpr:this.option("displayExpr"),disabledExpr:this.option("disabledExpr"),selectedExpr:this.option("selectedExpr"),itemsExpr:this.option("itemsExpr"),onFocusedItemChanged:a=>{a.component.option("visible")&&this.option("focusedElement",a.component.option("focusedElement"))},onSelectionChanged:this._nestedItemOnSelectionChangedHandler.bind(this),onItemClick:this._nestedItemOnItemClickHandler.bind(this),onItemRendered:this._nestedItemOnItemRenderedHandler.bind(this),onLeftFirstItem:i?null:this._moveMainMenuFocus.bind(this,Xt),onLeftLastItem:i?null:this._moveMainMenuFocus.bind(this,Ji),onCloseRootSubmenu:this._moveMainMenuFocus.bind(this,i?Xt:null),onExpandLastSubmenu:i?this._moveMainMenuFocus.bind(this,Ji):null}}_getShowFirstSubmenuMode(){if(!this._isDesktopDevice())return"onClick";var e=this.option("showFirstSubmenuMode");return(0,v.Kn)(e)?e.name:e}_moveMainMenuFocus(e){var i=this._getAvailableItems(),a=i.length,r=i.filter(".".concat(hl)).eq(0),n=i.index(r);this._hideSubmenu(this._visibleSubmenu),(n+=e===Xt?-1:1)>=a?n=0:n<0&&(n=a-1);var s=i.eq(n);this.option("focusedElement",(0,W.u)(s))}_nestedItemOnSelectionChangedHandler(e){var i=e.addedItems.length&&e.addedItems[0],a=dl.getInstance(e.element);(0,this._actions.onSelectionChanged)(e),i&&this._clearSelectionInSubmenus(i[0],a),this._clearRootSelection(),this._setOptionWithoutOptionChange("selectedItem",i)}_clearSelectionInSubmenus(e,i){var a=!arguments.length;(0,y.S6)(this._submenus,(r,n)=>{var s=n._itemContainer(),o=!s.is(i&&i._itemContainer()),l=s.find(".".concat(this._selectedItemClass()));if(o&&l.length||a){l.removeClass(this._selectedItemClass());var d=this._getItemData(l);d&&(d.selected=!1),n._clearSelectedItems()}})}_clearRootSelection(){var e=this.$element().find(".".concat(Nv)).first().children().children().filter(".".concat(this._selectedItemClass()));e.length&&(this._getItemData(e).selected=!1,e.removeClass(this._selectedItemClass()))}_nestedItemOnItemClickHandler(e){this._actions.onItemClick(e)}_nestedItemOnItemRenderedHandler(e){this._actions.onItemRendered(e)}_attachSubmenuHandlers(e,i){var r=i.getOverlayContent().find(".".concat("dx-submenu")),n=(0,D.V4)(wo.u,this.NAME+"_submenu");i.option({onShowing:this._submenuOnShowingHandler.bind(this,e,i),onShown:this._submenuOnShownHandler.bind(this,e,i),onHiding:this._submenuOnHidingHandler.bind(this,e,i),onHidden:this._submenuOnHiddenHandler.bind(this,e,i)}),(0,y.S6)(r,(s,o)=>{S.Z.off(o,n),S.Z.on(o,n,null,this._submenuMouseLeaveHandler.bind(this,e))})}_submenuOnShowingHandler(e,i){var a=e.children(".".concat(cl));this._actions.onSubmenuShowing({rootItem:(0,W.u)(e),submenu:i}),a.show(),e.addClass(hl)}_submenuOnShownHandler(e,i){this._actions.onSubmenuShown({rootItem:(0,W.u)(e),submenu:i})}_submenuOnHidingHandler(e,i,a){var r=e.children(".".concat(cl)),n=a;n.rootItem=(0,W.u)(e),n.submenu=i,this._actions.onSubmenuHiding(n),(a=n).cancel||(this._visibleSubmenu===i&&(this._visibleSubmenu=null),r.hide(),e.removeClass(hl))}_submenuOnHiddenHandler(e,i){this._actions.onSubmenuHidden({rootItem:(0,W.u)(e),submenu:i})}_submenuMouseLeaveHandler(e,i){var a=(0,p.Z)(i.relatedTarget).parents(".".concat(wn))[0],r=this._getSubmenuByRootElement(e).getOverlayContent()[0];this.option("hideSubmenuOnMouseLeave")&&a!==r&&(this._clearTimeouts(),setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")))}_hideSubmenuAfterTimeout(){if(this._visibleSubmenu){var e=(0,p.Z)(this._visibleSubmenu.$element().context).hasClass(Hv),i=this._visibleSubmenu.getOverlayContent().find(".".concat(Hv)).length;!this._visibleSubmenu.getOverlayContent().get(0).querySelector(":hover")&&!i&&!e&&this._visibleSubmenu.hide()}}_getSubmenuByRootElement(e){if(!e)return!1;var i=e.children(".".concat(wn));return i.length&&dl.getInstance(i)}getSubmenuPosition(e){var i=this._isMenuHorizontal(),a=this.option("submenuDirection").toLowerCase(),r=this.option("rtlEnabled"),n={collision:"flip",of:e,precise:!0};switch(a){case"leftortop":n.at="left top",n.my=i?"left bottom":"right top";break;case"rightorbottom":n.at=i?"left bottom":"right top",n.my="left top";break;default:i?(n.at=r?"right bottom":"left bottom",n.my=r?"right top":"left top"):(n.at=r?"left top":"right top",n.my=r?"right top":"left top")}return n}_renderBorderElement(e){(0,p.Z)("<div>").appendTo(e).addClass(cl).hide()}_itemPointerDownHandler(e){(0,p.Z)(e.target).closest(this._itemElements()).hasClass("dx-menu-item-has-submenu")?this.option("focusedElement",null):super._itemPointerDownHandler(e)}_hoverStartHandler(e){var i=(0,D.V4)(re.Z.move,this.NAME),a=this._getItemElementByEventArgs(e),r=this._dataAdapter.getNodeByItem(this._getItemData(a)),n=(0,v.$K)(e.buttons)&&1===e.buttons||!(0,v.$K)(e.buttons)&&1===e.which;if(!this._isItemDisabled(a)){if(S.Z.off(a,i),!this._hasChildren(r))return void(this._showSubmenuTimer=setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")));if("onHover"===this._getShowFirstSubmenuMode()&&!n){var s=this._getSubmenuByElement(a);this._clearTimeouts(),s.isOverlayVisible()||(S.Z.on(a,i,this._itemMouseMoveHandler.bind(this)),this._showSubmenuTimer=this._getDelay("hide"))}}}_hoverEndHandler(e){var i=this._getItemElementByEventArgs(e),a=(0,p.Z)(e.relatedTarget);super._hoverEndHandler(e),this._clearTimeouts(),!this._isItemDisabled(i)&&(a.hasClass("dx-context-menu-content-delimiter")||this.option("hideSubmenuOnMouseLeave")&&!a.hasClass(Nv)&&(this._hideSubmenuTimer=setTimeout(()=>{this._hideSubmenuAfterTimeout()},this._getDelay("hide"))))}_hideVisibleSubmenu(){return!!this._visibleSubmenu&&(this._hideSubmenu(this._visibleSubmenu),!0)}_showSubmenu(e){var i=this._getSubmenuByElement(e);this._visibleSubmenu!==i&&this._hideVisibleSubmenu(),i&&(this._clearTimeouts(),this.focus(),i.show(),this.option("focusedElement",i.option("focusedElement"))),this._visibleSubmenu=i,this._hoveredRootItem=e}_hideSubmenu(e){e&&e.hide(),this._visibleSubmenu===e&&(this._visibleSubmenu=null),this._hoveredRootItem=null}_itemMouseMoveHandler(e){if(!e.pointers||!e.pointers.length){var i=(0,p.Z)(e.currentTarget);(0,v.$K)(this._showSubmenuTimer)&&(this._clearTimeouts(),this._showSubmenuTimer=setTimeout(()=>{var a=this._getSubmenuByElement(i);a&&!a.isOverlayVisible()&&this._showSubmenu(i)},this._getDelay("show")))}}_clearTimeouts(){clearTimeout(this._hideSubmenuTimer),clearTimeout(this._showSubmenuTimer)}_getSubmenuByElement(e,i){var a=this._getSubmenuByRootElement(e);if(a)return a;i=i||this._getItemData(e);var r=this._dataAdapter.getNodeByItem(i);return this._hasChildren(r)&&this._renderSubmenuItems(r,e)}_updateSubmenuVisibilityOnClick(e){var i=e.args.length&&e.args[0];if(i&&!this._disabledGetter(i.itemData)){var a=(0,p.Z)(i.itemElement),r=this._getSubmenuByElement(a,i.itemData);if(this._updateSelectedItemOnClick(e),this._visibleSubmenu){if(this._visibleSubmenu===r)return void("onClick"===this.option("showFirstSubmenuMode")&&this._hideSubmenu(this._visibleSubmenu));this._hideSubmenu(this._visibleSubmenu)}if(r&&!r.isOverlayVisible())return void this._showSubmenu(a)}}_optionChanged(e){if($v.indexOf(e.name)>=0)this._initActions();else switch(e.name){case"orientation":case"submenuDirection":this._invalidate();break;case"showFirstSubmenuMode":case"hideSubmenuOnMouseLeave":break;case"showSubmenuMode":this._changeSubmenusOption(e.name,e.value);break;case"adaptivityEnabled":e.value?this._initAdaptivity():this._removeAdaptivity();break;case"width":this._isAdaptivityEnabled()&&(this._treeView.option(e.name,e.value),this._overlay.option(e.name,e.value)),super._optionChanged(e),this._dimensionChanged();break;case"animation":this._isAdaptivityEnabled()&&this._treeView.option("animationEnabled",!!e.value),super._optionChanged(e);break;default:this._isAdaptivityEnabled()&&(e.name===e.fullName||"items"===e.name)&&this._treeView.option(e.fullName,e.value),super._optionChanged(e)}}_changeSubmenusOption(e,i){(0,y.S6)(this._submenus,(a,r)=>{r.option(e,i)})}selectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}unselectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}}(0,J.Z)("dxMenu",zv);const Wv=zv;var pl={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal",default:"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with",between:"filter-operation-between"},Kv={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",between:"between"},Ua="filter-row",En="filter-range-overlay",In="filter-range-start",Uv="dx-menu",Yv="dx-editor-with-menu",mi="dx-editor-container",_l="dx-editor-cell",vl="dx-highlight-outline",jv="dx-focused",gl="dx-filter-range-content",fl="dx-filter-modified",Ya="input:not([type='hidden'])",FL=["date","datetime","number"],ML=A.Z.format("dxDataGrid-ariaSearchBox");function Qi(t){return"onClick"===t.option("filterRow.applyFilter")}var ml=function(t){var e=t&&t.children(),i=e&&e.data("dxComponents"),a=i&&i.length&&e.data(i[0]);return a instanceof Ot.Z?a:null},kL=function(){var t=function(n,s){var o="",l="",d=e(n,s),u=V.getFormatOptionsByColumn(s,"filterRow");return Array.isArray(d)?(o=V.formatValue(d[0],u),""!==(l=V.formatValue(d[1],u))&&(o+=" - ".concat(l))):(0,v.$K)(d)&&(o=V.formatValue(d,u)),o};function e(n,s){if(s)return Qi(n)&&void 0!==s.bufferedFilterValue?s.bufferedFilterValue:s.filterValue}var i=function(n,s){if(s)return Qi(n)&&void 0!==s.bufferedSelectedFilterOperation?s.bufferedSelectedFilterOperation:s.selectedFilterOperation},a=function(n,s,o){var c,_,l=n._columnsController.columnOption(s),d=e(n,l),u=o.closest(".".concat(n.addWidgetPrefix(En))).length,h=o.hasClass(n.addWidgetPrefix(In));return d&&Array.isArray(d)&&"between"===i(n,l)?h?d[0]:d[1]:u||(c=d,(_=l)&&FL.includes(_.dataType)&&Array.isArray(c)||void 0===c)?null:d};return{_updateEditorValue(n,s){var o=ml(s);o&&o.option("value",a(this,n.index,s))},_columnOptionChanged(n){var o,l,d,u,{optionNames:s}=n;if(V.checkChanges(s,["filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","filterValues","filterType"])&&void 0!==n.columnIndex){var h=this._columnsController.getVisibleIndex(n.columnIndex),c=this._columnsController.columnOption(n.columnIndex);if(l=(o=this._getCellElement(this.element().find(".".concat(this.addWidgetPrefix(Ua))).index(),h)||(0,p.Z)()).find(".".concat(mi)).first(),s.filterValue||s.bufferedFilterValue){this._updateEditorValue(c,l);var _=o.find(".".concat(this.addWidgetPrefix(En))).data("dxOverlay");_&&(d=_.$content().find(".".concat(mi)),this._updateEditorValue(c,d.first()),this._updateEditorValue(c,d.last())),(!_||!_.option("visible"))&&this._updateFilterRangeContent(o,t(this,c))}(s.selectedFilterOperation||s.bufferedSelectedFilterOperation)&&h>=0&&c&&(u=o.find(".".concat(Uv))).length&&(this._updateFilterOperationChooser(u,c,l),"between"===i(this,c)?this._renderFilterRangeContent(o,c):l.find(".".concat(gl)).length&&(this._renderEditor(l,this._getEditorOptions(l,c)),this._hideFilterRange()))}else this.callBase(n)},_renderCore(){return this._filterRangeOverlayInstance=null,this.callBase.apply(this,arguments)},_resizeCore(){this.callBase.apply(this,arguments),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.repaint()},isFilterRowVisible(){return this._isElementVisible(this.option("filterRow"))},isVisible(){return this.callBase()||this.isFilterRowVisible()},init(){this.callBase(),this._applyFilterViewController=this.getController("applyFilter")},_initFilterRangeOverlay(n,s){var o=this,l={},d=n.find(".dx-editor-container"),u=o.addWidgetPrefix(En),h=(0,p.Z)("<div>").addClass(u).appendTo(n);return o._createComponent(h,Nt.Z,{height:"auto",shading:!1,showTitle:!1,focusStateEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:u},animation:!1,position:{my:"top",at:"top",of:d.length&&d||n,offset:"0 -1"},contentTemplate(c){var _,g=(0,p.Z)("<div>").addClass("".concat(mi," ").concat(o.addWidgetPrefix(In))).appendTo(c);return s=o._columnsController.columnOption(s.index),(_=o._getEditorOptions(g,s)).sharedData=l,o._renderEditor(g,_),S.Z.on(g.find(Ya),"keydown",f=>{var m=n.find("[tabindex]").not(f.target).first();"tab"===(0,D.EV)(f)&&f.shiftKey&&(f.preventDefault(),o._hideFilterRange(),m.length||(m=n.prev().find("[tabindex]").last()),S.Z.trigger(m,"focus"))}),g=(0,p.Z)("<div>").addClass("".concat(mi," ").concat(o.addWidgetPrefix("filter-range-end"))).appendTo(c),(_=o._getEditorOptions(g,s)).sharedData=l,o._renderEditor(g,_),S.Z.on(g.find(Ya),"keydown",f=>{"tab"===(0,D.EV)(f)&&!f.shiftKey&&(f.preventDefault(),o._hideFilterRange(),S.Z.trigger(n.next().find("[tabindex]").first(),"focus"))}),(0,p.Z)(c).addClass(o.getWidgetContainerClass())},onShown(c){var _=c.component.$content().find(".".concat(mi)).first();S.Z.trigger(_.find(Ya),"focus")},onHidden(){s=o._columnsController.columnOption(s.index),n.find(".".concat(Uv)).parent().addClass(Yv),"between"===i(o,s)&&(o._updateFilterRangeContent(n,t(o,s)),o.component.updateDimensions())}})},_updateFilterRangeOverlay(n){var s=this._filterRangeOverlayInstance;s&&s.option(n)},_showFilterRange(n,s){var o=n.children(".".concat(this.addWidgetPrefix(En))),l=o.length&&o.data("dxOverlay");!l&&s&&(l=this._initFilterRangeOverlay(n,s)),l.option("visible")||(this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.hide(),this._filterRangeOverlayInstance=l,this._updateFilterRangeOverlay({width:(0,I.Y_)(n,!0)+1}),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.show())},_hideFilterRange(){var n=this._filterRangeOverlayInstance;n&&n.hide()},getFilterRangeOverlayInstance(){return this._filterRangeOverlayInstance},_createRow(n){var s=this.callBase(n);return"filter"===n.rowType&&(s.addClass(this.addWidgetPrefix(Ua)),this.option("useLegacyKeyboardNavigation")||S.Z.on(s,"keydown",o=>qn("filterRow",this,o))),s},_getRows(){var n=this.callBase();return this.isFilterRowVisible()&&n.push({rowType:"filter"}),n},_renderFilterCell(n,s){var{column:o}=s,l=(0,p.Z)(n);this.component.option("showColumnHeaders")&&this.setAria("describedby",o.headerId,l),this.setAria("label",A.Z.format("dxDataGrid-ariaFilterCell"),l),l.addClass(_l);var d=(0,p.Z)("<div>").appendTo(l),u=(0,p.Z)("<div>").addClass(mi).appendTo(d);if("between"===i(this,o))this._renderFilterRangeContent(l,o);else{var h=this._getEditorOptions(u,o);this._renderEditor(u,h)}var{alignment:c}=o;c&&"center"!==c&&l.find(Ya).first().css("textAlign",o.alignment),o.filterOperations&&o.filterOperations.length&&this._renderFilterOperationChooser(d,o,u)},_renderCellContent(n,s){var o=this,{column:l}=s;if("filter"===s.rowType)if(l.command)n.html("&nbsp;");else if(l.allowFiltering)return void o.renderTemplate(n,o._renderFilterCell.bind(o),s).done(()=>{o._updateCell(n,s)});this.callBase.apply(this,arguments)},_getEditorOptions(n,s){var o=this,l={editorOptions:{inputAttr:o._getFilterInputAccessibilityAttributes(s)}},d=(0,C.l)(l,s,{value:a(o,s.index,n),parentType:"filterRow",showAllText:o.option("filterRow.showAllText"),updateValueTimeout:"onClick"===o.option("filterRow.applyFilter")?0:700,width:null,setValue(u,h){!function(n,s){var o=""===s.value?null:s.value,l=s.container,d=n._columnsController.columnOption(s.column.index),u=a(n,d.index,l);if((0,v.$K)(u)||(0,v.$K)(o)){n._applyFilterViewController.setHighLight(l,u!==o);var h=Qi(n)?"bufferedFilterValue":"filterValue",c=function(f,m,x,w){if("between"===i(f,x)){var T=e(f,x);return w.hasClass(f.addWidgetPrefix(In))?[m,Array.isArray(T)?T[1]:void 0]:[Array.isArray(T)?T[0]:T,m]}return m}(n,o,d,l),_="between"===i(n,d),g=s.notFireEvent||_&&Array.isArray(c)&&c.includes(void 0);n._columnsController.columnOption(d.index,h,c,g)}}(o,{column:s,value:u,container:n,notFireEvent:h})}});return"between"===i(o,s)&&(d.placeholder=n.hasClass(o.addWidgetPrefix(In))?o.option("filterRow.betweenStartText"):o.option("filterRow.betweenEndText")),d},_getFilterInputAccessibilityAttributes(n){var s=A.Z.format("dxDataGrid-ariaFilterCell");return this.component.option("showColumnHeaders")?{"aria-label":s,"aria-describedby":n.headerId}:{"aria-label":s}},_renderEditor(n,s){n.empty();var o=(0,p.Z)("<div>").appendTo(n),l=this.getController("editorFactory"),d=this.getController("data").dataSource(),u=this.getController("applyFilter");if(s.lookup&&this.option("syncLookupFilterValues")){u.setCurrentColumnForFiltering(s);var h=this.getController("data").getCombinedFilter();u.setCurrentColumnForFiltering(null);var c=V.getWrappedLookupDataSource(s,d,h),_=(0,M.Z)((0,M.Z)({},s),{lookup:(0,M.Z)((0,M.Z)({},s.lookup),{dataSource:c})});return l.createEditor(o,_)}return l.createEditor(o,s)},_renderFilterRangeContent(n,s){var o=this,l=n.find(".".concat(mi)).first();l.empty();var d=(0,p.Z)("<div>").addClass(gl).attr("tabindex",this.option("tabIndex"));S.Z.on(d,"focusin",()=>{o._showFilterRange(n,s)}),d.appendTo(l),o._updateFilterRangeContent(n,t(o,s))},_updateFilterRangeContent(n,s){var o=n.find(".".concat(gl));o.length&&(""===s?o.html("&nbsp;"):o.text(s))},_updateFilterOperationChooser(n,s,o){var d,l=this,u=function(){var h=Wv.getInstance(n);h&&h.option("focusedElement",null),d&&l._focusEditor(o)};l._createComponent(n,Wv,{integrationOptions:{},activeStateEnabled:!1,selectionMode:"single",cssClass:"".concat(l.getWidgetContainerClass()," ").concat("dx-cell-focus-disabled"," ").concat("dx-filter-menu"),showFirstSubmenuMode:"onHover",hideSubmenuOnMouseLeave:!0,items:[{disabled:!(s.filterOperations&&s.filterOperations.length),icon:pl[i(l,s)||"default"],selectable:!1,items:l._getFilterOperationMenuItems(s)}],onItemRendered:h=>{var{itemElement:c}=h;this.setAria("label",ML,(0,p.Z)(c))},onItemClick(h){var c=h.itemData.name,_=i(l,s),g=!1,f=Qi(l),m={};if(!(h.itemData.items||c&&c===_)){if(c?(m[f?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=c,("between"===c||"between"===_)&&(g="between"===c,m[f?"bufferedFilterValue":"filterValue"]=null)):(m[f?"bufferedFilterValue":"filterValue"]=null,m[f?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=s.defaultSelectedFilterOperation||null),l._columnsController.columnOption(s.index,m),l._applyFilterViewController.setHighLight(o,!0),!c){var x=ml(o);x&&"dxDateBox"===x.NAME&&!x.option("isValid")&&(x.reset(),x.option("isValid",!0))}g?l._showFilterRange(o.closest(".".concat(_l)),s):l._focusEditor(o)}},onSubmenuShowing(){d=l._isEditorFocused(o),l.getController("editorFactory").loseFocus()},onSubmenuHiding(){S.Z.trigger(n,"blur"),u()},onContentReady(h){S.Z.on(n,"blur",()=>{h.component._hideSubmenuAfterTimeout(),u()})},rtlEnabled:l.option("rtlEnabled")})},_isEditorFocused:n=>n.hasClass(jv)||n.parents(".".concat(jv)).length,_focusEditor(n){this.getController("editorFactory").focus(n),S.Z.trigger(n.find(Ya),"focus")},_renderFilterOperationChooser(n,s,o){var l;this.option("filterRow.showOperationChooser")&&(n.addClass(Yv),l=(0,p.Z)("<div>").prependTo(n),this._updateFilterOperationChooser(l,s,o))},_getFilterOperationMenuItems(n){var s=this,o=[{}],l=s.option("filterRow"),d=l&&l.operationDescriptions||{};if(n.filterOperations&&n.filterOperations.length){var u=n.filterOperations.filter(h=>(0,v.$K)(Kv[h]));(o=(0,y.UI)(u,h=>{var c=Kv[h];return{name:h,selected:(i(s,n)||n.defaultFilterOperation)===h,text:d[c],icon:pl[h]}})).push({name:null,text:l&&l.resetOperationText,icon:pl.default})}return o},_handleDataChanged(n){var s,o,l;this.callBase.apply(this,arguments),(null!==(s=n.operationTypes)&&void 0!==s&&s.filtering||null!==(o=n.operationTypes)&&void 0!==o&&o.fullReload)&&this.updateLookupDataSource(null===(l=n.operationTypes)||void 0===l?void 0:l.filtering)},updateLookupDataSource(n){if(this.option("syncLookupFilterValues")&&this.element()){var s=this._columnsController.getVisibleColumns(),o=this._dataController.dataSource(),l=this._applyFilterViewController,d=this.element().find(".".concat(this.addWidgetPrefix(Ua))).index();-1!==d&&s.forEach((u,h)=>{if(u.lookup&&u.calculateCellValue===u.defaultCalculateCellValue){var c=this._getCellElement(d,h),_=ml(c?.find(".dx-editor-container"));if(_){l.setCurrentColumnForFiltering(u);var g=this._dataController.getCombinedFilter()||null;l.setCurrentColumnForFiltering(null);var f=_.option("dataSource");if(!n||!(0,E.bY)(f.__dataGridSourceFilter,g)){var x=V.getWrappedLookupDataSource(u,o,g);_.option("dataSource",x)}}}})}},optionChanged(n){switch(n.name){case"filterRow":case"showColumnLines":this._invalidate(!0,!0),n.handled=!0;break;case"syncLookupFilterValues":n.value?this.updateLookupDataSource():this.render(),n.handled=!0;break;default:this.callBase(n)}}}}(),NL={skipCalculateColumnFilters:()=>!1,_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return this.callBase();var t=[this.callBase()],e=this._columnsController.getVisibleColumns(null,!0),i=this.getController("applyFilter");return(0,y.S6)(e,function(){var a,r=(null===(a=i.getCurrentColumnForFiltering())||void 0===a?void 0:a.index)===this.index;if(this.allowFiltering&&this.calculateFilterExpression&&(0,v.$K)(this.filterValue)&&!r){var n=this.createFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation,"filterRow");t.push(n)}}),V.combineFilters(t)}},HL=ne.ViewController.inherit({_getHeaderPanel(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel},setHighLight(t,e){Qi(this)&&(t&&t.toggleClass(vl,e)&&t.closest(".".concat(_l)).toggleClass(fl,e),this._getHeaderPanel().enableApplyButton(e))},applyFilter(){var t=this.getController("columns"),e=t.getColumns();t.beginUpdate();for(var i=0;i<e.length;i++){var a=e[i];void 0!==a.bufferedFilterValue&&(t.columnOption(i,"filterValue",a.bufferedFilterValue),a.bufferedFilterValue=void 0),void 0!==a.bufferedSelectedFilterOperation&&(t.columnOption(i,"selectedFilterOperation",a.bufferedSelectedFilterOperation),a.bufferedSelectedFilterOperation=void 0)}t.endUpdate(),this.removeHighLights()},removeHighLights(){if(Qi(this)){var t=this.getView("columnHeadersView").element();t.find(".".concat(this.addWidgetPrefix(Ua)," .").concat(vl)).removeClass(vl),t.find(".".concat(this.addWidgetPrefix(Ua)," .").concat(fl)).removeClass(fl),this._getHeaderPanel().enableApplyButton(!1)}},setCurrentColumnForFiltering(t){this._currentColumn=t},getCurrentColumnForFiltering(){return this._currentColumn}}),ZL={defaultOptions:()=>({syncLookupFilterValues:!0,filterRow:{visible:!1,showOperationChooser:!0,showAllText:A.Z.format("dxDataGrid-filterRowShowAllText"),resetOperationText:A.Z.format("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:A.Z.format("dxDataGrid-applyFilterText"),operationDescriptions:{equal:A.Z.format("dxDataGrid-filterRowOperationEquals"),notEqual:A.Z.format("dxDataGrid-filterRowOperationNotEquals"),lessThan:A.Z.format("dxDataGrid-filterRowOperationLess"),lessThanOrEqual:A.Z.format("dxDataGrid-filterRowOperationLessOrEquals"),greaterThan:A.Z.format("dxDataGrid-filterRowOperationGreater"),greaterThanOrEqual:A.Z.format("dxDataGrid-filterRowOperationGreaterOrEquals"),startsWith:A.Z.format("dxDataGrid-filterRowOperationStartsWith"),contains:A.Z.format("dxDataGrid-filterRowOperationContains"),notContains:A.Z.format("dxDataGrid-filterRowOperationNotContains"),endsWith:A.Z.format("dxDataGrid-filterRowOperationEndsWith"),between:A.Z.format("dxDataGrid-filterRowOperationBetween"),isBlank:A.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:A.Z.format("dxFilterBuilder-filterOperationIsNotBlank")},betweenStartText:A.Z.format("dxDataGrid-filterRowOperationBetweenStartText"),betweenEndText:A.Z.format("dxDataGrid-filterRowOperationBetweenEndText")}}),controllers:{applyFilter:HL},extenders:{controllers:{data:NL,columnsResizer:{_startResizing(){if(this.callBase.apply(this,arguments),this.isResizing()){var t=this._columnHeadersView.getFilterRangeOverlayInstance();if(t){var e=t.$element().closest("td").index();(e===this._targetPoint.columnIndex||e===this._targetPoint.columnIndex+1)&&t.$content().hide()}}},_endResizing(){var t;if(this.isResizing()){var e=this._columnHeadersView.getFilterRangeOverlayInstance();e&&(t=e.$element().closest("td"),this._columnHeadersView._updateFilterRangeOverlay({width:(0,I.Y_)(t,!0)+1}),e.$content().show())}this.callBase.apply(this,arguments)}},editing:{updateFieldValue(t){return t.column.lookup&&(this._needUpdateLookupDataSource=!0),this.callBase.apply(this,arguments)},_afterSaveEditData(t){var e;return this._needUpdateLookupDataSource&&!t&&(null===(e=this.getView("columnHeadersView"))||void 0===e||e.updateLookupDataSource()),this._needUpdateLookupDataSource=!1,this.callBase.apply(this,arguments)},_afterCancelEditData(){return this._needUpdateLookupDataSource=!1,this.callBase.apply(this,arguments)}}},views:{columnHeadersView:kL,headerPanel:{_getToolbarItems(){var t=this.callBase();return this._prepareFilterItem(t).concat(t)},_prepareFilterItem(){var t=this,e=[];if(t._isShowApplyFilterButton()){var i=t.option("filterRow.applyFilterText"),r=!t._columnsController.getColumns().filter(s=>void 0!==s.bufferedFilterValue).length;e.push({widget:"dxButton",options:{icon:"apply-filter",disabled:r,onClick:function(){t._applyFilterViewController.applyFilter()},hint:i,text:i,onInitialized:function(s){(0,p.Z)(s.element).addClass(t._getToolbarButtonClass("dx-apply-button"))}},showText:"inMenu",name:"applyFilterButton",location:"after",locateInMenu:"auto",sortIndex:10})}return e},_isShowApplyFilterButton(){var t=this.option("filterRow");return t&&t.visible&&"onClick"===t.applyFilter},init(){this.callBase(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")},enableApplyButton(t){this.setToolbarItemDisabled("applyFilterButton",!t)},isVisible(){return this.callBase()||this._isShowApplyFilterButton()},optionChanged(t){"filterRow"===t.name?(this._invalidate(),t.handled=!0):this.callBase(t)}}}}};$.registerModule("filterRow",ZL),ni.setEditorClass(yr.Z);var qv="dx-header-filter",Xv="dx-header-filter-menu";function Jv(t){t=t||[];for(var e=0;e<t.length;e++)t[e].selected=!1,Jv(t[e].items)}function Qv(t){var e="dxTreeView"===t.NAME?".dx-treeview-select-all-item":".dx-list-select-all-checkbox";return t.$element().find(e).dxCheckBox("instance")}function eg(t,e){if(!t.component.option("searchValue")){var i=Qv(t.component);i&&e&&e.length&&i.option("value",void 0)}}function zL(t,e,i){if(e^i){if(t.selected=!0,i&&t.items)for(var a=0;a<t.items.length;a++)if(!t.items[a].selected){t.selected=void 0;break}}else(i||t.selected)&&(t.selected=!1,Jv(t.items))}var WL=ne.View.inherit({getPopupContainer(){return this._popupContainer},getListComponent(){return this._listComponent},applyHeaderFilter(t){var e=this.getListComponent(),i=e.option("searchValue"),a=Qv(e),n=[];i||t.isFilterBuilder||!a?.option("value")?"tree"===t.type&&(t.filterType&&(t.filterType="include"),function s(o,l,d){(0,y.S6)(l,(u,h)=>{if(void 0!==h.selected&&!!h.selected^d){var c=e._getNode(h),g=e._hasChildren(c)&&h.items&&h.items.some(f=>f.selected);if(!i||!g)return void o.push(h.value)}h.items&&h.items.length&&s(o,h.items,d)})}(n,e.option("items"),!1),t.filterValues=n):("tree"===t.type&&(t.filterType="exclude"),Array.isArray(t.filterValues)&&(t.filterValues=[])),t.filterValues&&!t.filterValues.length&&(t.filterValues=null),t.apply(),this.hideHeaderFilterMenu()},showHeaderFilterMenu(t,e){if(e){this._initializePopupContainer(e);var i=this.getPopupContainer();this.hideHeaderFilterMenu(),this.updatePopup(t,e),i.show()}},hideHeaderFilterMenu(){var t=this.getPopupContainer();t&&t.hide()},updatePopup(t,e){var i=this.option("showColumnLines"),a="right"===e.alignment^!i?"left":"right";this._popupContainer.setAria({role:"dialog",label:A.Z.format("dxDataGrid-headerFilterLabel")}),this._popupContainer&&(this._cleanPopupContent(),this._popupContainer.option("position",{my:"".concat(a," top"),at:"".concat(a," bottom"),of:t,collision:"fit fit"}))},_getSearchExpr(t,e){var{lookup:i}=t,{useDefaultSearchExpr:a}=t,r=e.dataSource,n=e.search.searchExpr;if(n)return n;if(a||(0,v.$K)(r)&&!(0,v.mf)(r))return"text";if(i)return i.displayExpr||"this";if(t.dataSource){var{group:s}=t.dataSource;if(Array.isArray(s)&&s.length>0)return s[0].selector;if((0,v.mf)(s)&&!t.remoteFiltering)return s}return t.dataField||t.selector},_cleanPopupContent(){this._popupContainer&&this._popupContainer.$content().empty()},_initializePopupContainer(t){var e=this,i=e.element(),a=this._normalizeHeaderFilterOptions(t),{height:r,width:n}=a,s={width:n,height:r,visible:!1,shading:!1,showTitle:!1,showCloseButton:!1,hideOnParentScroll:!1,dragEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:Xv},focusStateEnabled:!1,toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:a.texts.ok,onClick(){e.applyHeaderFilter(t)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:a.texts.cancel,onClick(){e.hideHeaderFilterMenu()}}}],resizeEnabled:!0,onShowing(o){o.component.$content().parent().addClass("dx-dropdowneditor-overlay"),e._initializeListContainer(t,a),t.onShowing&&t.onShowing(o)},onShown(){e.getListComponent().focus()},onHidden:t.onHidden,onInitialized(o){var{component:l}=o;l.option("animation",l._getDefaultOptions().animation)}};(0,v.$K)(e._popupContainer)?e._popupContainer.option(s):e._popupContainer=e._createComponent(i,gt,s)},_initializeListContainer(t,e){var i=this,a=i._popupContainer.$content(),r=!t.isFilterBuilder&&e.allowSelectAll,n={searchEnabled:e.search.enabled,searchTimeout:e.search.timeout,searchEditorOptions:e.search.editorOptions,searchMode:e.search.mode||"",dataSource:t.dataSource,onContentReady(){i.renderCompleted.fire()},itemTemplate(o,l,d){var u=(0,p.Z)(d);return t.encodeHtml?u.text(o.text):u.html(o.text)}};function s(o){"searchValue"===o.fullName&&r&&!1!==i.option("headerFilter.hideSelectAllOnSearch")&&("tree"===t.type?o.component.option("showCheckBoxesMode",o.value?"normal":"selectAll"):o.component.option("selectionMode",o.value?"multiple":"all"))}i._listComponent="tree"===t.type?i._createComponent((0,p.Z)("<div>").appendTo(a),Yr,(0,C.l)(n,{showCheckBoxesMode:r?"selectAll":"normal",onOptionChanged:s,keyExpr:"id"})):i._createComponent((0,p.Z)("<div>").appendTo(a),La,(0,C.l)(n,{searchExpr:i._getSearchExpr(t,e),pageLoadMode:"scrollBottom",showSelectionControls:!0,selectionMode:r?"all":"multiple",onOptionChanged:s,onSelectionChanged(o){var l=o.component.option("items"),d=o.component.option("selectedItems");if(!o.component._selectedItemsUpdating&&!o.component.option("searchValue")&&!t.isFilterBuilder){var u=t.filterValues||[];0===d.length&&l.length&&(u.length<=1||"exclude"===t.filterType&&u.length===l.length-1)?(t.filterType="include",t.filterValues=[]):d.length===l.length&&(t.filterType="exclude",t.filterValues=[])}(0,y.S6)(l,(c,_)=>{var g=V.getIndexByKey(_,d,null)>=0;if(!!_.selected!==g){_.selected=g,t.filterValues=t.filterValues||[];var m=V.getIndexByKey(_.value,t.filterValues,null);m>=0&&t.filterValues.splice(m,1),g^"exclude"===t.filterType&&t.filterValues.push(_.value)}}),eg(o,t.filterValues)},onContentReady(o){var{component:l}=o,d=l.option("items"),u=[];(0,y.S6)(d,function(){this.selected&&u.push(this)}),l._selectedItemsUpdating=!0,l.option("selectedItems",u),l._selectedItemsUpdating=!1,eg(o,t.filterValues)}}))},_normalizeHeaderFilterOptions(t){var e=this.option("headerFilter")||{},i=t.headerFilter||{};return(0,C.l)(!0,{},e,{search:{enabled:e.allowSearch,timeout:e.searchTimeout}},i,{search:{enabled:i.allowSearch,mode:i.searchMode,timeout:i.searchTimeout}})},_renderCore(){this.element().addClass(Xv)}}),Tn=function(t){return(0,v.$K)(t.allowHeaderFiltering)?t.allowHeaderFiltering:t.allowFiltering},tg={_applyColumnState(t){var e,{rootElement:i}=t,{column:a}=t;if("headerFilter"===t.name){if(i.find(".".concat(qv)).remove(),Tn(a)){e=this.callBase(t).toggleClass("dx-header-filter-empty",this._isHeaderFilterEmpty(a)),this.option("useLegacyKeyboardNavigation")||e.attr("tabindex",this.option("tabindex")||0);var r=A.Z.format("dxDataGrid-headerFilterIndicatorLabel",a.caption);e.attr("aria-label",r),e.attr("aria-haspopup","dialog"),e.attr("role","button")}return e}return this.callBase(t)},_isHeaderFilterEmpty:t=>!t.filterValues||!t.filterValues.length,_getIndicatorClassName(t){return"headerFilter"===t?qv:this.callBase(t)},_renderIndicator(t){var e=t.container,i=t.indicator;if("headerFilter"===t.name){var a=this.option("rtlEnabled");if(e.children().length&&(!a&&"right"===t.columnAlignment||a&&"left"===t.columnAlignment))return void e.prepend(i)}this.callBase(t)},optionChanged(t){if("headerFilter"===t.name){var e="columnHeadersView"===this.name;this._invalidate(e,e),t.handled=!0}else this.callBase(t)}},KL={month:t=>X.Z.getMonthNames()[t-1],quarter:t=>X.Z.format(new Date(2e3,3*t-1),"quarter")};function ig(t,e,i){return e=e||[],i=i||[],t.forEach(a=>{if((0,v.$K)(a.key)){if(e.push(1===e.length?a.key-1:a.key),a.items)ig(a.items,e,i);else{var n=new Date(Date.UTC.apply(Date,e));i.push(n)}e.pop()}else i.push(null)}),i}function GL(t,e){var i=ig(t),a=(0,He.Z)(i),r=V.getHeaderFilterGroupParameters((0,M.Z)((0,M.Z)({},e),{calculateCellValue:n=>n}));return Mi.Z.queryByOptions(a,{group:r}).toArray()}var YL=ne.ViewController.inherit({init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._headerFilterView=this.getView("headerFilterView")},_updateSelectedState(t,e){for(var i=t.length,a="exclude"===e.filterType;i--;){var r=t[i];"items"in t[i]&&this._updateSelectedState(t[i].items,e),zL(r,V.getIndexByKey(t[i].value,e.filterValues,null)>-1,a)}},_normalizeGroupItem(t,e,i){var a,r,{path:n}=i,{valueSelector:s}=i,{displaySelector:o}=i,{column:l}=i;return s&&o?(a=s(t),r=o(t)):r=a=t.key,t=(0,v.Kn)(t)?(0,C.l)({},t):{},n.push(a),t.value=1===n.length?n[0]:n.join("/"),t.text=this.getHeaderItemText(r,l,e,i.headerFilterOptions),t},getHeaderItemText(t,e,i,a){var n,s,o,l,d,r=V.formatValue(t,(n=t,o=i,l=ii.getGroupInterval(s=e),d=V.getFormatOptionsByColumn(s,"headerFilter"),l&&(d.groupInterval=l[o],V.isDateType(s.dataType)?d.format=KL[l[o]]:"number"===s.dataType&&(d.getDisplayFormat=function(){var u={format:s.format,target:"headerFilter"},h=V.formatValue(n,u),_=V.formatValue(n+l[o],u);return h&&_?"".concat(h," - ").concat(_):""})),d));return r||(r=a.texts.emptyValue),r},_processGroupItems(t,e,i,a){var r,n,{column:s}=a,{lookup:o}=s,{level:l}=a;i=i||[],e=e||0,o&&(r=(0,Q.vb)(o.displayExpr),n=(0,Q.vb)(o.valueExpr));for(var d=0;d<t.length;d++)t[d]=this._normalizeGroupItem(t[d],e,{column:a.column,headerFilterOptions:a.headerFilterOptions,displaySelector:r,valueSelector:n,path:i}),"items"in t[d]&&(e!==l&&(0,v.$K)(t[d].value)?this._processGroupItems(t[d].items,e+1,i,a):delete t[d].items),i.pop()},getDataSource(t){var e,i=this._dataController.dataSource(),a=i?.remoteOperations().grouping,r=V.getHeaderFilterGroupParameters(t,a),n=null===(e=t.headerFilter)||void 0===e?void 0:e.dataSource,s=this.option("headerFilter"),o=!1,l={component:this.component};if(i){if((0,v.$K)(n)&&!(0,v.mf)(n))l.dataSource=(0,oa.aN)(n);else if(t.lookup)if(o=!0,this.option("syncLookupFilterValues")){this._currentColumn=t;var d=this._dataController.getCombinedFilter();this._currentColumn=null,l.dataSource=V.getWrappedLookupDataSource(t,i,d)}else l.dataSource=V.normalizeLookupDataSource(t.lookup);else{var u=Array.isArray(r)?r.length-1:0;this._currentColumn=t;var h=this._dataController.getCombinedFilter();this._currentColumn=null,l.dataSource={filter:h,group:r,useDefaultSearch:!0,load:g=>{var f=new b.BH;return g.dataField=t.dataField||t.name,i.load(g).done(m=>{var x=a&&function UL(t){return"Z"===t?.slice(-1)||"'Z'"===t?.slice(-3)}(t.serializationFormat)&&u>3;x&&(m=GL(m,t)),_._processGroupItems(m,null,null,{level:u,column:t,headerFilterOptions:s}),f.resolve(m)}).fail(f.reject),f}}}(0,v.mf)(n)&&n.call(t,l);var c=l.dataSource.postProcess,_=this;return l.dataSource.postProcess=function(g){var f=g;return o&&(f=f.filter(m=>null!==m[t.lookup.valueExpr]),0===this.pageIndex()&&!this.searchValue()&&(f=f.slice(0)).unshift(null),_._processGroupItems(f,null,null,{level:0,column:t,headerFilterOptions:s})),f=c&&c.call(this,f)||f,_._updateSelectedState(f,t),f},l.dataSource}},getCurrentColumn(){return this._currentColumn},showHeaderFilterMenu(t,e){var i=this._columnsController,a=(0,C.l)(!0,{},this._columnsController.getColumns()[t]);if(a){var r=i.getVisibleIndex(t),n=this.getView(e?"headerPanel":"columnHeadersView"),s=s||n.getColumnElements().eq(e?a.groupIndex:r);this.showHeaderFilterMenuBase({columnElement:s,column:a,applyFilter:!0,apply(){i.columnOption(t,{filterValues:this.filterValues,filterType:this.filterType})}})}},showHeaderFilterMenuBase(t){var e=this,{column:i}=t;if(i){var a=ii.getGroupInterval(i),r=e._dataController.dataSource(),n=r&&r.remoteOperations().filtering;(0,C.l)(t,i,{type:a&&a.length>1?"tree":"list",remoteFiltering:n,onShowing(s){var o=s.component.$overlayContent().dxResizable("instance");o&&o.option("onResizeEnd",l=>{var d=e.getController("columns"),u=d.columnOption(t.dataField,"headerFilter");(u=u||{}).width=l.width,u.height=l.height,d.columnOption(t.dataField,"headerFilter",u,!0)})},onHidden:()=>jn(this)}),t.dataSource=e.getDataSource(t),t.isFilterBuilder&&(t.dataSource.filter=null,t.alignment="right"),e._headerFilterView.showHeaderFilterMenu(t.columnElement,t)}},hideHeaderFilterMenu(){this._headerFilterView.hideHeaderFilterMenu()}}),jL=(0,C.l)({},tg,{_renderCellContent(t,e){var i,{column:a}=e;!a.command&&Tn(a)&&this.option("headerFilter.visible")&&"header"===e.rowType&&(i=this._applyColumnState({name:"headerFilter",rootElement:t,column:a,showColumnLines:this.option("showColumnLines")}))&&this._subscribeToIndicatorEvent(i,a,"headerFilter"),this.callBase.apply(this,arguments)},_subscribeToIndicatorEvent(t,e,i){"headerFilter"===i&&S.Z.on(t,ie.u,this.createAction(a=>{a.event.stopPropagation(),pd(t,this),this.getController("headerFilter").showHeaderFilterMenu(e.index,!1)}))},_updateIndicator(t,e,i){var a=this.callBase(t,e,i);a&&this._subscribeToIndicatorEvent(a,e,i)},_updateHeaderFilterIndicators(){this.option("headerFilter.visible")&&this._updateIndicators("headerFilter")},_needUpdateFilterIndicators:()=>!0,_columnOptionChanged(t){var{optionNames:e}=t;V.checkChanges(e,["filterValues","filterType"])?this._needUpdateFilterIndicators()&&this._updateHeaderFilterIndicators():this.callBase(t)}}),qL=(0,C.l)({},tg,{_createGroupPanelItem(t,e){var r,i=this,a=i.callBase.apply(i,arguments);return!e.command&&Tn(e)&&i.option("headerFilter.visible")&&(r=i._applyColumnState({name:"headerFilter",rootElement:a,column:{alignment:(0,se.q)(i.option("rtlEnabled")),filterValues:e.filterValues,allowHeaderFiltering:!0},showColumnLines:!0}))&&S.Z.on(r,ie.u,i.createAction(n=>{var{event:s}=n;s.stopPropagation(),i.getController("headerFilter").showHeaderFilterMenu(e.index,!0)})),a}}),XL={skipCalculateColumnFilters:()=>!1,_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return this.callBase();var t=[this.callBase()],e=this._columnsController.getVisibleColumns(null,!0),a=this.getController("headerFilter").getCurrentColumn();return(0,y.S6)(e,(r,n)=>{var s;if((!a||a.index!==n.index)&&Tn(n)&&n.calculateFilterExpression&&Array.isArray(n.filterValues)&&n.filterValues.length){var o=[];(0,y.S6)(n.filterValues,(l,d)=>{Array.isArray(d)?s=d:(n.deserializeValue&&!V.isDateType(n.dataType)&&"number"!==n.dataType&&(d=n.deserializeValue(d)),s=n.createFilterExpression(d,"=","headerFilter")),s&&(s.columnIndex=n.index),o.push(s)}),o=V.combineFilters(o,"or"),t.push("exclude"===n.filterType?["!",o]:o)}}),V.combineFilters(t)}};$.registerModule("headerFilter",{defaultOptions:()=>({syncLookupFilterValues:!0,headerFilter:{visible:!1,width:252,height:325,allowSelectAll:!0,search:{enabled:!1,timeout:500,mode:"contains",editorOptions:{}},texts:{emptyValue:A.Z.format("dxDataGrid-headerFilterEmptyValue"),ok:A.Z.format("dxDataGrid-headerFilterOK"),cancel:A.Z.format("dxDataGrid-headerFilterCancel")}}}),controllers:{headerFilter:YL},views:{headerFilterView:WL},extenders:{controllers:{data:XL},views:{columnHeadersView:jL,headerPanel:qL}}});var An="dx-filterbuilder-range",QL=An+"-start",eV=An+"-end",tV=An+"-separator",ag="\u2013";function iV(t,e){var i=(0,p.Z)("<div>").addClass(QL),a=(0,p.Z)("<div>").addClass(eV),r=t.value||[],n=function(o){return o&&o.length>0?o[0]:null},s=function(o){return o&&2===o.length?o[1]:null};e.append(i),e.append((0,p.Z)("<span>").addClass(tV).text(ag)),e.append(a),e.addClass(An),this._editorFactory.createEditor.call(this,i,(0,C.l)({},t.field,t,{value:n(r),parentType:"filterBuilder",setValue:function(o){r=[o,s(r)],t.setValue(r)}})),this._editorFactory.createEditor.call(this,a,(0,C.l)({},t.field,t,{value:s(r),parentType:"filterBuilder",setValue:function(o){r=[n(r),o],t.setValue(r)}}))}function rg(t,e){return{name:"between",caption:t,icon:"range",valueSeparator:ag,dataTypes:["number","date","datetime"],editorTemplate:iV.bind(e),notForLookup:!0}}var aV={"=":"equal","<>":"notequal","<":"less","<=":"lessorequal",">":"greater",">=":"greaterorequal",notcontains:"doesnotcontain",contains:"contains",startswith:"startswith",endswith:"endswith",isblank:"isblank",isnotblank:"isnotblank"},rV={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",isblank:"isBlank",isnotblank:"isNotBlank",between:"between"};const ng_getIconByFilterOperation=function(t){return aV[t]},ng_getNameByFilterOperation=function(t){return rV[t]};var Cl="string",sg="icon-none",Jt="and",Sl="=",sV={number:["=","<>","<",">","<=",">=","isblank","isnotblank"],string:["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"],date:["=","<>","<",">","<=",">=","isblank","isnotblank"],datetime:["=","<>","<",">","<=",">=","isblank","isnotblank"],boolean:["=","<>","isblank","isnotblank"],object:["isblank","isnotblank"]},oV={date:"shortDate",datetime:"shortDateShortTime"},lV=["=","<>","isblank","isnotblank"],dV=["caption","customizeText","dataField","dataType","editorTemplate","falseText","editorOptions","filterOperations","format","lookup","trueText","calculateFilterExpression","name"],og="dx-filterbuilder-text",hV=og+"-part",lg=og+"-separator",cV=lg+"-empty";function Ci(t){return t&&t.length>1&&"!"===t[0]&&!we(t)}function Vt(t){return Ci(t)?t[1]:t}function dg(t){if(we(t))return Jt;for(var e="",i=0;i<t.length;i++){var a=t[i];if(!Array.isArray(a)){if(e&&e!==a)throw new jr.R0.Error("E4019");"!"!==a&&(e=a)}}return e}function Si(t){var e=Vt(t),i=dg(e);return i||(i=Jt),e!==t&&(i="!"+i),i}function ug(t){var e=function CV(t){return Array.isArray(t)&&t.length}(t.filterOperations)?t.filterOperations:function mV(t){return t.lookup&&lV||sV[t.dataType||Cl]}(t);return(0,C.l)([],e)}function xl(t,e){var i=ng_getNameByFilterOperation(t);return e&&e[i]?e[i]:i}function Pt(t,e){var i=t.filter(function(a){return a.name===e});return i.length?i[0]:null}function bl(t){return t.defaultFilterOperation||ug(t)[0]}function wl(t,e){var i=Vt(t),a=i.indexOf(e);return i.splice(a,1),1!==i.length&&i.splice(a,1),t}function hg(t){var e=yl(t),i=e?El(t):t;return e?["!",[i]]:[i]}function Dn(t,e){var i=Vt(e),a=Si(i);return 1===i.length?i.unshift(t):i.push(t,a),e}function On(t,e){for(var i=0;i<e.length;i++)if(e[i].name===t||e[i].dataField.toLowerCase()===t.toLowerCase())return e[i];var a=Sg(e,!0).filter(function(r){return r.dataField.toLowerCase()===t.toLowerCase()});if(a.length>0)return a[0];throw new ee.Z.Error("E1047",t)}function Qt(t){return!!Array.isArray(t)&&(t.length<2||Array.isArray(t[0])||Array.isArray(t[1]))}function we(t){return!!Array.isArray(t)&&t.length>1&&!Array.isArray(t[0])&&!Array.isArray(t[1])}function cg(t,e,i){i=i||Jt;for(var a=dg(t).toLowerCase()||i,r=[],n=0;n<t.length;n++)Qt(t[n])?(r.push(Al(t[n],e,i)),r=Tl(r,a)):we(t[n])&&(r.push(Rn(t[n],e)),r=Tl(r,a));return 0===r.length&&(r=Tl(r,a)),r}function Rn(t,e){return function wV(t,e){var i=Pt(e,t[1]);return i&&i.name===t[1]}(t,e)||t.length<3&&(t[2]=t[1],t[1]=Sl),t}function yl(t){return-1!==t.indexOf("not")}function El(t){return t.substring(3).toLowerCase()}function Il(t,e){var i=yl(e);return e=i?El(e):e,i?["!",t,e]:[t,e]}function Tl(t,e){var i=yl(e);e=i?El(e):e,t.push(e);var a=t;return i&&(a=["!",a]),a}function Al(t,e,i){return i=i||Jt,t?we(t=(0,C.l)(!0,[],t))?Il(Rn(t,e),i):Ci(t)?["!",we(t[1])?Il(Rn(t[1],e),i):Ci(t[1])?Il(Al(t[1],e),i):cg(t[1],e,i)]:cg(t,e,i):hg(i)}function pg(t,e,i,a){var r=On(t[0],e),n=Rn(t,i),s=i.length&&Pt(i,n[1]);return s&&s.calculateFilterExpression?s.calculateFilterExpression.apply(s,[n[2],r,e]):r.createFilterExpression?r.createFilterExpression.apply(r,[n[2],n[1],a]):r.calculateFilterExpression?r.calculateFilterExpression.apply(r,[n[2],n[1],a]):r.defaultCalculateFilterExpression.apply(r,[n[2],n[1],a])}function ea(t,e,i,a){if(!(0,v.$K)(t))return null;if(Ci(t))return["!",ea(t[1],e,i,a)];var n=Vt(t);if(we(n))return pg(n,e,i,a)||null;for(var o,s=[],l=Si(n),d=0;d<n.length;d++)Qt(n[d])?(o=ea(n[d],e,i,a))&&(d&&s.push(l),s.push(o)):we(n[d])&&(o=pg(n[d],e,i,a))&&(s.length&&s.push(l),s.push(o));return 1===s.length&&(s=s[0]),s.length?s:null}function ja(t){var i,e=Vt(t);if(0===e.length)return null;var a=[];for(i=0;i<e.length;i++)if(Qt(e[i])){var r=ja(e[i]);r?e[i]=r:a.push(e[i])}else we(e[i])&&(IV(e[i])||a.push(e[i]));for(i=0;i<a.length;i++)wl(e,a[i]);return 1===e.length||(e.splice(e.length-1,1),1===e.length&&(t=function _V(t,e){return Ci(t)?t[1]=e:t=e,t}(t,e[0])),0===t.length)?null:t}function _g(t,e,i){if(""!==e){var a=t.lookup;if(a.items)i(a.calculateCellValue(e)||"");else{var r=(0,v.mf)(a.dataSource)?a.dataSource({}):a.dataSource;new ti.o(r).loadSingle(a.valueExpr,e).done(function(s){var o="";s&&(o=a.displayExpr?(0,Q.vb)(a.displayExpr)(s):s),t.customizeText&&(o=t.customizeText({value:e,valueText:o})),i(o)}).fail(function(){i("")})}}else i("")}function vg(t,e,i,a,r){var n;return n=!0===e?t.trueText||A.Z.format("dxDataGrid-trueText"):!1===e?t.falseText||A.Z.format("dxDataGrid-falseText"):function pV(t,e){return Id.Z.format(e,t.format||oV[t.dataType])}(t,e),t.customizeText&&(n=t.customizeText.call(t,{value:e,valueText:n,target:a})),i&&i.customizeText&&(n=i.customizeText.call(i,{value:e,valueText:n,field:t,target:a},r)),n}function Dl(t){return""===t||null===t}function gg(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"filterBuilder";if(Dl(e))return"";if(Array.isArray(e)){var r=new b.BH;return b.gx.apply(this,function EV(t,e,i,a){var r={values:e};return e.map(n=>vg(t,n,i,a,r))}(t,e,i,a)).done(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var l=s.some(d=>!Dl(d))?s.map(d=>Dl(d)?"?":d):"";r.resolve(l)}),r}return vg(t,e,i,a)}function fg(t,e){return t.some(function(i){return i.dataField===e})}function mg(t,e,i){var a=i.dataField;Ol(a)&&(i.parentId=xg(a),!fg(e,i.parentId)&&!fg(t,i.parentId)&&mg(t,e,{id:i.parentId,dataType:"object",dataField:i.parentId,caption:Cg(i.parentId,!0),filterOperations:["isblank","isnotblank"],defaultCalculateFilterExpression:ii.defaultCalculateFilterExpression})),e.push(i)}function Cg(t,e){var i="";if(e)t=t.substring(t.lastIndexOf(".")+1);else if(Ol(t))return t.split(".").forEach(function(a,r,n){i+=(0,Pe.GK)(a),r!==n.length-1&&(i+=".")}),i;return(0,Pe.GK)(t)}function Sg(t,e){for(var i=[],a=0;a<t.length;a++){var r=(0,C.l)(!0,{caption:Cg(t[a].dataField,e)},t[a]);r.id=r.name||r.dataField,e?mg(t,i,r):i.push(r)}return i}function Ol(t){return-1!==t.lastIndexOf(".")}function xg(t){return t.substring(0,t.lastIndexOf("."))}function bg(t,e){if(Ol(t.dataField))for(var i=xg(t.dataField),a=0;a<e.length;a++)if(e[a].dataField===i)return bg(e[a],e)+"."+t.caption;return t.caption}function Rl(t,e,i){var a=Pt(i,e);return a?(!1===a.hasValue?(t[1]=e,t.length=2):(t[1]=e,t[2]=""),t):("isblank"===e?(t[1]=Sl,t[2]=null):"isnotblank"===e?(t[1]="<>",t[2]=null):(((a=Pt(i,t[1]))||2===t.length||null===t[2])&&(t[2]=""),t[1]=e),t)}function wg(t){return null===t[2]?t[1]===Sl?"isblank":"isnotblank":t[1]}function IV(t){return""!==t[2]}function qa(t,e){return t[0]===e}function Bl(t,e){return t&&0!==t.length?we(t)?qa(t,e)?null:t:yg(t,[e],!1):null}function yg(t,e,i){var a=[];return t.forEach(function(r){we(r)?qa(r,e[0])?i?(a.push(e),i=!1):a.splice(a.length-1,1):a.push(r):(a.length||Qt(r))&&a.push(r)}),0===a.length?null:(i&&(a.push(Jt),a.push(e)),1===a.length?a[0]:a)}function Eg(t,e){return null===t||0===t.length?e:we(t)?qa(t,e[0])?e:[t,Jt,e]:Si(t)!==Jt?[e,"and",t]:yg(t,e,!0)}function Ig(t,e){return null!==t&&0!==t.length&&(we(t)?t[0]===e:t.some(function(i){return(we(i)||Qt(i))&&Ig(i,e)}))}var Ll=function(t,e,i){if(Array.isArray(e)){var a=e.length-1;t.empty(),e.forEach((r,n)=>{(0,p.Z)("<span>").addClass(hV).text(r).appendTo(t),n!==a&&(0,p.Z)("<span>").addClass(lg).text(i&&i.valueSeparator?i.valueSeparator:"|").addClass(cV).appendTo(t)})}else t.text(e||A.Z.format("dxFilterBuilder-enterValueText"))};function Tg(t){var e=function(a,r){return r?"".concat(r,"/").concat(a):a},i=t&&t.getController("headerFilter");return{dataTypes:["string","date","datetime","number","boolean","object"],calculateFilterExpression:function(a,r,n){var s=[],o=a.length-1;return a&&a.forEach((l,d)=>{if(we(l)||Qt(l)){var u=ea(l,n,[],"headerFilter");s.push(u)}else{var h=ea([r.dataField,"=",l],n,[],"headerFilter");s.push(h)}d!==o&&s.push("or")}),1===s.length?s[0]:s},editorTemplate(a,r){var n=(0,p.Z)("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(r),s=(0,C.l)(!0,{},t.columnOption(a.field.dataField));return Ll(n,a.text&&a.text.split("|")),s.filterType="include",s.filterValues=a.value?a.value.slice():[],i.showHeaderFilterMenuBase({columnElement:n,column:s,apply(){a.setValue(this.filterValues),i.hideHeaderFilterMenu(),a.closeEditor()},onHidden(){a.closeEditor()},isFilterBuilder:!0}),r},customizeText:function(a,r){r=r||{};var{value:n}=a,s=t.columnOption(a.field.dataField),o=s&&s.headerFilter,l=s&&s.lookup,d=r.values||[n];if(o&&o.dataSource||l&&l.dataSource){var u=new b.BH,h=r.items||new b.BH;if(!r.items){s=(0,C.l)({},s,{filterType:"include",filterValues:d});var c=i.getDataSource(s);c.paginate=!1;var _=new ti.o(c),g=_.store().key();if(g){var{values:f}=r;if(f&&f.length>1){var m=f.reduce((w,T)=>(w.length&&w.push("or"),w.push([g,"=",T]),w),[]);_.filter(m)}else _.filter([g,"=",a.value])}else a.field.calculateDisplayValue&&ee.Z.log("W1017");r.items=h,_.load().done(h.resolve)}return h.done(w=>{var T=d.indexOf(a.value);u.resolve(function O(P,F){var N=[];return P.forEach(H=>{if(H.items){var k=O(H.items,e(H.text,F));N=N.concat(k)}H.selected&&N.push(e(H.text,F))}),N}(w,null)[T])}),u}return i.getHeaderItemText(n,s,0,t.option("headerFilter"))}}}function DV(t){return(0,C.l)(Tg(t),{name:"anyof",icon:"selectall",caption:A.Z.format("dxFilterBuilder-filterOperationAnyOf")})}function OV(t){var e=Tg(t);return(0,C.l)({},e,{calculateFilterExpression(i,a,r){var n=e.calculateFilterExpression(i,a,r);return n&&0!==n.length?"!"===n[0]?n:["!",n]:null},name:"noneof",icon:"unselectall",caption:A.Z.format("dxFilterBuilder-filterOperationNoneOf")})}var RV=["=","<>","<","<=",">",">=","notcontains","contains","startswith","endswith","between"],Ag="include",Xa="exclude";function wt(t){return t.name||t.dataField}var LV=ne.Controller.inherit(function(){var t=function(){return{filterType:Ag,filterValues:void 0}},e=function(s){var o=s.filterValues||[];return!ii.getGroupInterval(s)&&!(s.headerFilter&&s.headerFilter.dataSource)||1===o.length&&null===o[0]},i=function(s){if((0,v.$K)(s.filterValue)){var l=s.selectedFilterOperation||s.defaultFilterOperation||bl(s);return[wt(s),l,s.filterValue]}return null},a=function(s){var o,l,{filterValues:d}=s;return d?(1===d.length&&e(s)&&!Array.isArray(d[0])?(o=s.filterType===Xa?"<>":"=",l=d[0]):(o=s.filterType===Xa?"noneof":"anyof",l=d),[wt(s),o,l]):null},r=function(s,o,l){var d=function(u,h){if(!u)return t();var c,_=u[1],g=u[2],f=Array.isArray(g);if(!f&&!e(h))return t();switch(_){case"anyof":case"=":c=Ag;break;case"noneof":case"<>":c=Xa;break;default:return t()}return{filterType:c,filterValues:f?g:[g]}}(l,o);s.columnOption(wt(o),d)},n=function(s,o,l){var d,u=l?.[1],h=l?.[2],c=o.filterOperations||o.defaultFilterOperations;(!c||c.indexOf(u)>=0||u===o.defaultFilterOperation)&&RV.includes(u)&&null!==h?(u===o.defaultFilterOperation&&!(0,v.$K)(o.selectedFilterOperation)&&(u=o.selectedFilterOperation),d={filterValue:h,selectedFilterOperation:u}):d={filterValue:void 0,selectedFilterOperation:void 0},s.columnOption(wt(o),d)};return{syncFilterValue(){var s=this,o=s.getController("columns"),l=o.getFilteringColumns();this._skipSyncColumnOptions=!0,l.forEach(d=>{var u=function AV(t,e){return null===t||0===t.length?[]:we(t)?qa(t,e)?[t]:[]:Si(t)!==Jt?[]:t.filter(function(r){return we(r)&&qa(r,e)})}(s.option("filterValue"),wt(d));if(1===u.length){var h=u[0];r(o,d,h),n(o,d,h)}else(0,v.$K)(d.filterValues)&&r(o,d,null),(0,v.$K)(d.filterValue)&&n(o,d,null)}),this._skipSyncColumnOptions=!1},_initSync(){var s=this.getController("columns").getColumns(),o=this.getController("data"),l=o.pageIndex();if(function BV(t){t.forEach(e=>{var i=wt(e);if(!(0,v.$K)(i)&&e.allowFiltering)throw new ee.Z.Error("E1049",e.caption)})}(s),!this.option("filterValue")){var d=this.getController("columns").getFilteringColumns(),u=this.getFilterValueFromColumns(d);this.option("filterValue",u)}this.syncFilterValue(),o.pageIndex(l)},init(){var s=this.getController("data");s.isFilterSyncActive()&&(this.getController("columns").isAllDataTypesDefined()?this._initSync():s.dataSourceChanged.add(()=>this._initSync()))},_getSyncFilterRow(s,o){var l=i(o);return(0,v.$K)(l)?Eg(s,l):Bl(s,wt(o))},_getSyncHeaderFilter(s,o){var l=a(o);return l?Eg(s,l):Bl(s,wt(o))},getFilterValueFromColumns(s){if(!this.getController("data").isFilterSyncActive())return null;var o=["and"];return s&&s.forEach(l=>{var d=a(l),u=i(l);d&&Dn(d,o),u&&Dn(u,o)}),ja(o)},syncFilterRow(s){this.option("filterValue",this._getSyncFilterRow(this.option("filterValue"),s))},syncHeaderFilter(s){this.option("filterValue",this._getSyncHeaderFilter(this.option("filterValue"),s))},getCustomFilterOperations(){var s=this.option("filterBuilder.customOperations")||[];return[DV(this.component),OV(this.component)].concat(s)},publicMethods:()=>["getCustomFilterOperations"]}}()),VV={isFilterSyncActive(){var t=this.option("filterSyncEnabled");return"auto"===t?this.option("filterPanel.visible"):t},skipCalculateColumnFilters(){var t=this.getController("filterSync");return((0,v.$K)(this.option("filterValue"))||t._skipSyncColumnOptions)&&this.isFilterSyncActive()},_calculateAdditionalFilter(){if(!1===this.option("filterPanel.filterEnabled"))return this.callBase();var t=[this.callBase()],e=this.getController("columns").getFilteringColumns(),i=this.option("filterValue");if(this.isFilterSyncActive()){var a=this.getController("headerFilter").getCurrentColumn();a&&i&&(i=Bl(i,wt(a)))}var n=ea(i,e,this.getController("filterSync").getCustomFilterOperations(),"filterBuilder");return n&&t.push(n),V.combineFilters(t)},_parseColumnPropertyName(t){var e=t.match(/.*\.(.*)/);return e?e[1]:null},clearFilter(t){this.component.beginUpdate(),arguments.length>0?("filterValue"===t&&this.option("filterValue",null),this.callBase(t)):(this.option("filterValue",null),this.callBase()),this.component.endUpdate()},optionChanged(t){switch(t.name){case"filterValue":this._applyFilter(),this.isFilterSyncActive()&&this.getController("filterSync").syncFilterValue(),t.handled=!0;break;case"filterSyncEnabled":t.handled=!0;break;case"columns":if(this.isFilterSyncActive()){var e=this.getController("columns").getColumnByPath(t.fullName),i=this.getController("filterSync");if(e&&!i._skipSyncColumnOptions){var a=this._parseColumnPropertyName(t.fullName);i._skipSyncColumnOptions=!0,"filterType"===a?(Xa===t.value||Xa===t.previousValue)&&i.syncHeaderFilter(e):"filterValues"===a?i.syncHeaderFilter(e):["filterValue","selectedFilterOperation"].includes(a)&&i.syncFilterRow(e,e.filterValue),i._skipSyncColumnOptions=!1}}this.callBase(t);break;default:this.callBase(t)}}},PV={_isHeaderFilterEmpty(t){return this.getController("data").isFilterSyncActive()?!Ig(this.option("filterValue"),wt(t)):this.callBase(t)},_needUpdateFilterIndicators(){return!this.getController("data").isFilterSyncActive()},optionChanged(t){"filterValue"===t.name?this._updateHeaderFilterIndicators():this.callBase(t)}};$.registerModule("filterSync",{defaultOptions:()=>({filterValue:null,filterSyncEnabled:"auto"}),controllers:{filterSync:LV},extenders:{controllers:{data:VV},views:{columnHeadersView:PV}}});var Xe="dx-filterbuilder",ta=Xe+"-group",Dg=ta+"-item",Og=ta+"-content",MV=ta+"-operations",kV=ta+"-operation",Vl=Xe+"-action",Rg=Vl+"-icon",Ja=Xe+"-text",ZV=Xe+"-item-field",$V=Xe+"-item-operation",Bg=Xe+"-item-value",zV=Xe+"-item-value-text",WV=Xe+"-overlay",KV=Xe+"-operations",GV=Xe+"-fields",UV=Xe+"-add-condition",Bn="dx-state-active",YV=Xe+"-menu-custom-operation",Lg="filterBuilder",Pl="enter",qV=[{name:"onEditorPreparing",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onEditorPrepared",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onValueChanged",config:{excludeValidators:["disabled","readOnly"]}}],Fg={and:"and",or:"or",notAnd:"!and",notOr:"!or"},XV=Ce.Z.inherit(e_),Mg=Me.default.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{onEditorPreparing:null,onEditorPrepared:null,onValueChanged:null,fields:[],groupOperations:["and","or","notAnd","notOr"],maxGroupLevel:void 0,value:null,allowHierarchicalFields:!1,groupOperationDescriptions:{and:A.Z.format("dxFilterBuilder-and"),or:A.Z.format("dxFilterBuilder-or"),notAnd:A.Z.format("dxFilterBuilder-notAnd"),notOr:A.Z.format("dxFilterBuilder-notOr")},customOperations:[],closePopupOnTargetScroll:!0,filterOperationDescriptions:{between:A.Z.format("dxFilterBuilder-filterOperationBetween"),equal:A.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:A.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:A.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:A.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:A.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:A.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:A.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:A.Z.format("dxFilterBuilder-filterOperationContains"),notContains:A.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:A.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:A.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:A.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}})},_optionChanged:function(t){switch(t.name){case"closePopupOnTargetScroll":break;case"onEditorPreparing":case"onEditorPrepared":case"onValueChanged":this._initActions();break;case"customOperations":this._initCustomOperations(),this._invalidate();break;case"fields":case"maxGroupLevel":case"groupOperations":case"allowHierarchicalFields":case"groupOperationDescriptions":case"filterOperationDescriptions":this._invalidate();break;case"value":if(t.value!==t.previousValue){var e=this._disableInvalidateForValue;e||(this._initModel(),this._invalidate()),this._disableInvalidateForValue=!1,this.executeAction("onValueChanged",{value:t.value,previousValue:t.previousValue}),this._disableInvalidateForValue=e}break;default:this.callBase(t)}},getFilterExpression:function(){var t=this._getNormalizedFields();return ea(ja((0,C.l)(!0,[],this._model)),t,this._customOperations,Lg)},_getNormalizedFields:function(){return function yV(t){return t.reduce(function(e,i){if((0,v.$K)(i.dataField)){var a={};for(var r in i)i[r]&&dV.indexOf(r)>-1&&(a[r]=i[r]);a.defaultCalculateFilterExpression=ii.defaultCalculateFilterExpression,(0,v.$K)(a.dataType)||(a.dataType=Cl),(0,v.$K)(a.trueText)||(a.trueText=A.Z.format("dxDataGrid-trueText")),(0,v.$K)(a.falseText)||(a.falseText=A.Z.format("dxDataGrid-falseText")),e.push(a)}return e},[])}(this.option("fields"))},_updateFilter:function(){this._disableInvalidateForValue=!0;var e=ja((0,C.l)(!0,[],this._model)),i=ja(this._getModel(this.option("value")));JSON.stringify(i)!==JSON.stringify(e)&&this.option("value",e),this._disableInvalidateForValue=!1,this._fireContentReadyAction()},_init:function(){this._initCustomOperations(),this._initModel(),this._initEditorFactory(),this._initActions(),this.callBase()},_initEditorFactory:function(){this._editorFactory=new XV},_initCustomOperations:function(){this._customOperations=function TV(t,e,i){var a=(0,C.l)(!0,[],t),r=-1;return a.some(function(n,s){if("between"===n.name)return r=s,!0}),-1!==r?a[r]=(0,C.l)(rg(e,i),a[r]):a.unshift(rg(e,i)),a}(this.option("customOperations"),this.option("filterOperationDescriptions.between"),this)},_getDefaultGroupOperation:function(){var t,e;return null!==(t=null===(e=this.option("groupOperations"))||void 0===e?void 0:e[0])&&void 0!==t?t:Fg.and},_getModel:function(t){return Al(t,this._customOperations,this._getDefaultGroupOperation())},_initModel:function(){this._model=this._getModel(this.option("value"))},_initActions:function(){var t=this;t._actions={},qV.forEach(function(e){var i=(0,C.l)({},e.config);t._actions[e.name]=t._createActionByOption(e.name,i)})},executeAction:function(t,e){var i=this._actions[t];return i&&i(e)},_initMarkup:function(){this.$element().addClass(Xe),this.callBase(),this._createGroupElementByCriteria(this._model).appendTo(this.$element())},_createConditionElement:function(t,e){return(0,p.Z)("<div>").addClass(ta).append(this._createConditionItem(t,e))},_createGroupElementByCriteria:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this._createGroupElement(t,e,i),r=a.find("."+Og),n=Vt(t),s=0;s<n.length;s++){var o=n[s];Qt(o)?this._createGroupElementByCriteria(o,t,i+1).appendTo(r):we(o)&&this._createConditionElement(o,t).appendTo(r)}return a},_createGroupElement:function(t,e,i){var a=(0,p.Z)("<div>").addClass(Dg),r=(0,p.Z)("<div>").addClass(Og),n=(0,p.Z)("<div>").addClass(ta).append(a).append(r);return null!=e&&this._createRemoveButton(()=>{wl(e,t),n.remove(),this._updateFilter()}).appendTo(a),this._createGroupOperationButton(t).appendTo(a),this._createAddButton(()=>{var s=hg(this._getDefaultGroupOperation());Dn(s,t),this._createGroupElement(s,t,i+1).appendTo(r),this._updateFilter()},()=>{var o=function bV(t,e){var i=[t.dataField,"",""];return Rl(i,bl(t),e),i}(this.option("fields")[0],this._customOperations);Dn(o,t),this._createConditionElement(o,t).appendTo(r),this._updateFilter()},i).appendTo(a),n},_createButton:function(t){return(0,p.Z)("<div>").text(t)},_createGroupOperationButton:function(t){var e=this._getGroupOperations(t),i=function fV(t,e){var i=Si(t);return e.filter(function(a){return a.value===i})[0]}(t,e),a=i.text,r=e&&e.length<2?this._createButton(a).addClass("dx-state-disabled"):this._createButtonWithMenu({caption:a,menu:{items:e,displayExpr:"text",keyExpr:"value",onItemClick:n=>{i!==n.itemData&&(function gV(t,e){var a,r;return function vV(t,e){!function(i){return-1!==i.indexOf("!")}(e)?Ci(t)&&function(i){var a=Vt(i);i.length=0,[].push.apply(i,a)}(t):Ci(t)||function(i){var a=i.slice(0);i.length=0,i.push("!",a)}(t)}(t,e),function(r,n){for(a=0;a<r.length;a++)Array.isArray(r[a])||(r[a]=n)}(Vt(t),e=-1===(r=e).indexOf("!")?r:r.substring(1)),t}(t,n.itemData.value),r.text(n.itemData.text),i=n.itemData,this._updateFilter())},onContentReady:function(n){n.component.selectItem(i)},cssClass:MV}});return r.addClass(Ja).addClass(kV).attr("tabindex",0)},_createButtonWithMenu:function(t){var s,e=this,i=function(){e.$element().find("."+Bn).removeClass(Bn),e.$element().find(".dx-overlay .dx-treeview").remove(),e.$element().find(".dx-overlay").remove()},a=this.option("rtlEnabled"),r=a?"right":"left",n=this._createButton(t.caption);return(0,C.l)(t.menu,{focusStateEnabled:!0,selectionMode:"single",onItemClick:(s=t.menu.onItemClick,function(o){s(o),"dxclick"===o.event.type&&i()}),onHiding:function(o){n.removeClass(Bn)},position:{my:r+" top",at:r+" bottom",offset:"0 1",of:n,collision:"flip"},animation:null,onHidden:function(){i()},cssClass:WV+" "+t.menu.cssClass,rtlEnabled:a}),t.popup={onShown:function(o){var l=(0,p.Z)(o.component.content()).find(".dx-treeview"),d=l.dxTreeView("instance");S.Z.on(l,"keyup keydown",function(u){var h=(0,D.EV)(u);("keydown"===u.type&&"tab"===h||"keyup"===u.type&&("escape"===h||h===Pl))&&(o.component.hide(),S.Z.trigger(t.menu.position.of,"focus"))}),d.focus(),d.option("focusedElement",null)}},this._subscribeOnClickAndEnterKey(n,function(){i(),e._createPopupWithTreeView(t,e.$element()),n.addClass(Bn)}),n},_hasValueButton:function(t){var e=Pt(this._customOperations,t[1]);return e?!1!==e.hasValue:null!==t[2]},_createOperationButtonWithMenu:function(t,e){var i=this,a=function xV(t,e,i){var a=ug(t),r=!!t.lookup;return i.forEach(function(n){if(!t.filterOperations&&-1===a.indexOf(n.name)){var s=n&&n.dataTypes;(!r||!n.notForLookup)&&s&&s.indexOf(t.dataType||Cl)>=0&&a.push(n.name)}}),a.map(function(n){var s=Pt(i,n);return s?{icon:s.icon||sg,text:s.caption||(0,Pe.GK)(s.name),value:s.name,isCustom:!0}:{icon:ng_getIconByFilterOperation(n)||sg,text:xl(n,e),value:n}})}(e,this.option("filterOperationDescriptions"),this._customOperations),r=function SV(t,e){for(var i=0;i<e.length;i++)if(e[i].value===t)return e[i];throw new ee.Z.Error("E1048",t)}(wg(t),a),n=this._createButtonWithMenu({caption:r.text,menu:{items:a,displayExpr:"text",onItemRendered:function(s){s.itemData.isCustom&&(0,p.Z)(s.itemElement).addClass(YV)},onContentReady:function(s){s.component.selectItem(r)},onItemClick:s=>{if(r!==s.itemData){Rl(t,(r=s.itemData).value,i._customOperations);var o=n.siblings().filter("."+Bg);i._hasValueButton(t)?(0!==o.length&&o.remove(),i._createValueButton(t,e).appendTo(n.parent())):o.remove(),n.html(r.text),this._updateFilter()}},cssClass:KV}}).addClass(Ja).addClass($V).attr("tabindex",0);return n},_createOperationAndValueButtons:function(t,e,i){this._createOperationButtonWithMenu(t,e).appendTo(i),this._hasValueButton(t)&&this._createValueButton(t,e).appendTo(i)},_createFieldButtonWithMenu:function(t,e,i){var a=this,r=this.option("allowHierarchicalFields"),n=Sg(t,r),s=On(i.name||i.dataField,n),o=function(d,u){return r?bg(d,u):d.caption},l=this._createButtonWithMenu({caption:o(s,n),menu:{items:n,dataStructure:"plain",keyExpr:"id",parentId:"parentId",displayExpr:"caption",onItemClick:d=>{if(s!==d.itemData){e[0]=(s=d.itemData).name||s.dataField,e[2]="object"===s.dataType?null:"",Rl(e,bl(s),a._customOperations),l.siblings().filter("."+Ja).remove(),a._createOperationAndValueButtons(e,s,l.parent());var u=o(s,d.component.option("items"));l.html(u),this._updateFilter()}},onContentReady:function(d){d.component.selectItem(s)},cssClass:GV}}).addClass(Ja).addClass(ZV).attr("tabindex",0);return l},_createConditionItem:function(t,e){var i=(0,p.Z)("<div>").addClass(Dg),a=this._getNormalizedFields(),r=On(t[0],a);return this._createRemoveButton(()=>{wl(e,t),1===i.parent().children().length?i.parent().remove():i.remove(),this._updateFilter()}).appendTo(i),this._createFieldButtonWithMenu(a,t,r).appendTo(i),this._createOperationAndValueButtons(t,r,i),i},_getGroupOperations:function(t){var e=this.option("groupOperations"),i=this.option("groupOperationDescriptions");return(!e||!e.length)&&(e=[Si(t).replace("!","not")]),e.map(a=>({text:i[a],value:Fg[a]}))},_createRemoveButton:function(t){var e=(0,p.Z)("<div>").addClass(Rg).addClass("dx-icon-remove").addClass(Vl).attr("tabindex",0);return this._subscribeOnClickAndEnterKey(e,t),e},_createAddButton:function(t,e,i){var a,r=this.option("maxGroupLevel");return(0,v.$K)(r)&&i>=r?(a=this._createButton(),this._subscribeOnClickAndEnterKey(a,e)):a=this._createButtonWithMenu({menu:{items:[{caption:A.Z.format("dxFilterBuilder-addCondition"),click:e},{caption:A.Z.format("dxFilterBuilder-addGroup"),click:t}],displayExpr:"caption",onItemClick:function(n){n.itemData.click()},cssClass:UV}}),a.addClass(Rg).addClass("dx-icon-plus").addClass(Vl).attr("tabindex",0)},_createValueText:function(t,e,i){var a=this,r=(0,p.Z)("<div>").html("&nbsp;").addClass(zV).attr("tabindex",0).appendTo(i),n=t[2],s=Pt(a._customOperations,t[1]);return!s&&e.lookup?_g(e,n,function(o){Ll(r,o)}):(0,b.gx)(gg(e,n,s)).done(o=>{Ll(r,o,s)}),a._subscribeOnClickAndEnterKey(r,function(o){"keyup"===o.type&&o.stopPropagation(),a._createValueEditorWithEvents(t,e,i)}),r},_updateConditionValue:function(t,e,i){t[2]!==e&&(t[2]=e),i(),this._updateFilter()},_addDocumentKeyUp:function(t,e){var i=!1,a=!1,r=Y.Z.getDocument(),n=o=>{i||a?a=!1:e(o)};S.Z.on(r,"keyup",n);var s=t.find("input");S.Z.on(s,"compositionstart",()=>{i=!0}),S.Z.on(s,"compositionend",()=>{i=!1,a=!0}),S.Z.on(s,"keydown",o=>{229!==o.which&&(a=!1)}),this._documentKeyUpHandler=n},_addDocumentClick:function(t,e){var i=Y.Z.getDocument(),a=r=>{this._isFocusOnEditorParts(t,r.target)||(S.Z.trigger(t.find("input"),"change"),e())};S.Z.on(i,"dxpointerdown",a),this._documentClickHandler=a},_isFocusOnEditorParts:function(t,e){var i=e||Y.Z.getActiveElement();return(0,p.Z)(i).closest(t.children()).length||(0,p.Z)(i).closest(".dx-dropdowneditor-overlay").length},_removeEvents:function(){var t=Y.Z.getDocument();(0,v.$K)(this._documentKeyUpHandler)&&S.Z.off(t,"keyup",this._documentKeyUpHandler),(0,v.$K)(this._documentClickHandler)&&S.Z.off(t,"dxpointerdown",this._documentClickHandler)},_dispose:function(){this._removeEvents(),this.callBase()},_createValueEditorWithEvents:function(t,e,i){var a=t[2],r=()=>(i.empty(),this._removeEvents(),this._createValueText(t,e,i)),n=()=>{this._updateConditionValue(t,a,function(){r()})},s={value:""===a?null:a,filterOperation:wg(t),setValue:function(l){a=null===l?"":l},closeEditor:n,text:i.text()};i.empty();var o=this._createValueEditor(i,e,s);S.Z.trigger(o.find("input").not(":hidden").eq(0),"focus"),this._removeEvents(),this._addDocumentClick(o,n),this._addDocumentKeyUp(o,l=>{var d=(0,D.EV)(l);if("tab"===d){if(this._isFocusOnEditorParts(o))return;this._updateConditionValue(t,a,function(){r(),l.shiftKey&&S.Z.trigger(i.prev(),"focus")})}"escape"===d&&S.Z.trigger(r(),"focus"),d===Pl&&this._updateConditionValue(t,a,function(){S.Z.trigger(r(),"focus")})}),this._fireContentReadyAction()},_createValueButton:function(t,e){var i=(0,p.Z)("<div>").addClass(Ja).addClass(Bg);return this._createValueText(t,e,i),i},_createValueEditor:function(t,e,i){var a=(0,p.Z)("<div>").attr("tabindex",0).appendTo(t),r=Pt(this._customOperations,i.filterOperation),n=r&&r.editorTemplate?r.editorTemplate:e.editorTemplate;return n?this._getTemplate(n).render({model:(0,C.l)({field:e},i),container:a}):this._editorFactory.createEditor.call(this,a,(0,C.l)({},e,i,{parentType:Lg})),a},_createPopupWithTreeView:function(t,e){var i=this,a=(0,p.Z)("<div>").addClass(t.menu.cssClass).appendTo(e);this._createComponent(a,gt,{onHiding:t.menu.onHiding,onHidden:t.menu.onHidden,rtlEnabled:t.menu.rtlEnabled,position:t.menu.position,animation:t.menu.animation,contentTemplate:function(r){var n=(0,p.Z)("<div>").appendTo(r);i._createComponent(n,Yr,t.menu),this.repaint()},_ignoreFunctionValueDeprecation:!0,maxHeight:function(){return Mv(t.menu.position.of)},visible:!0,focusStateEnabled:!1,hideOnParentScroll:this.option("closePopupOnTargetScroll"),hideOnOutsideClick:!0,onShown:t.popup.onShown,shading:!1,width:"auto",height:"auto",showTitle:!1,_wrapperClassExternal:t.menu.cssClass})},_subscribeOnClickAndEnterKey:function(t,e){S.Z.on(t,"dxclick",e),S.Z.on(t,"keyup",function(i){(0,D.EV)(i)===Pl&&e(i)})}});(0,J.Z)("dxFilterBuilder",Mg);const JV=Mg;var QV=ne.View.inherit({_renderCore(){this._updatePopupOptions()},_updatePopupOptions(){this.option("filterBuilderPopup.visible")?this._initPopup():this._filterBuilderPopup&&this._filterBuilderPopup.hide()},_disposePopup(){this._filterBuilderPopup&&(this._filterBuilderPopup.dispose(),this._filterBuilderPopup=void 0),this._filterBuilder&&(this._filterBuilder.dispose(),this._filterBuilder=void 0)},_initPopup(){var t=this;t._disposePopup(),t._filterBuilderPopup=t._createComponent(t.element(),gt,(0,C.l)({title:A.Z.format("dxDataGrid-filterBuilderPopupTitle"),contentTemplate:e=>t._getPopupContentTemplate(e),onOptionChanged(e){"visible"===e.name&&t.option("filterBuilderPopup.visible",e.value)},toolbarItems:t._getPopupToolbarItems()},t.option("filterBuilderPopup"),{onHidden(){jn(t),t._disposePopup()}}))},_getPopupContentTemplate(t){var e=(0,p.Z)(t),i=(0,p.Z)("<div>").appendTo((0,p.Z)(t));this._filterBuilder=this._createComponent(i,JV,(0,C.l)({value:this.option("filterValue"),fields:this.getController("columns").getFilteringColumns()},this.option("filterBuilder"),{customOperations:this.getController("filterSync").getCustomFilterOperations()})),this._createComponent(e,Nh,{direction:"both"})},_getPopupToolbarItems(){var t=this;return[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:A.Z.format("OK"),onClick(){var e=t._filterBuilder.option("value");t.option("filterValue",e),t._filterBuilderPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:A.Z.format("Cancel"),onClick(){t._filterBuilderPopup.hide()}}}]},optionChanged(t){switch(t.name){case"filterBuilder":case"filterBuilderPopup":this._invalidate(),t.handled=!0;break;default:this.callBase(t)}}});$.registerModule("filterBuilder",{defaultOptions:()=>({filterBuilder:{groupOperationDescriptions:{and:A.Z.format("dxFilterBuilder-and"),or:A.Z.format("dxFilterBuilder-or"),notAnd:A.Z.format("dxFilterBuilder-notAnd"),notOr:A.Z.format("dxFilterBuilder-notOr")},filterOperationDescriptions:{between:A.Z.format("dxFilterBuilder-filterOperationBetween"),equal:A.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:A.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:A.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:A.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:A.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:A.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:A.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:A.Z.format("dxFilterBuilder-filterOperationContains"),notContains:A.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:A.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:A.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:A.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}},filterBuilderPopup:{}}),views:{filterBuilderView:QV}});var Qa="filter-panel",tP="".concat(Qa,"-text"),iP="".concat(Qa,"-checkbox"),aP="".concat(Qa,"-clear-filter"),rP="".concat(Qa,"-left"),sP=ne.View.inherit({isVisible(){return this.option("filterPanel.visible")&&this.getController("data").dataSource()},init(){this.getController("data").dataSourceChanged.add(()=>this.render()),this._columnsController=this.getController("columns")},_renderCore(){var t=this.element();if(t.empty(),this._columnsController.getColumns().length){t.addClass(this.addWidgetPrefix(Qa));var i=(0,p.Z)("<div>").addClass(this.addWidgetPrefix(rP)).appendTo(t);this._renderFilterBuilderText(t,i)}},_renderFilterBuilderText(t,e){var i=this._getFilterElement(),a=this._getTextElement();if(this.option("filterValue")||this._filterValueBuffer){var r=this._getCheckElement(),n=this._getRemoveButtonElement();return e.append(r).append(i).append(a),void t.append(n)}e.append(i).append(a)},_getCheckElement(){var t=this,e=(0,p.Z)("<div>").addClass(this.addWidgetPrefix(iP));return t._createComponent(e,Aa,{value:t.option("filterPanel.filterEnabled"),onValueChanged(i){t.option("filterPanel.filterEnabled",i.value)}}),e.attr("title",this.option("filterPanel.texts.filterEnabledHint")),e},_getFilterElement(){var t=this,e=(0,p.Z)("<div>").addClass("dx-icon-filter");return S.Z.on(e,"click",()=>t._showFilterBuilder()),na("filterPanel",t,e,void 0,()=>t._showFilterBuilder()),t._addTabIndexToElement(e),e},_getTextElement(){var i,t=this,e=(0,p.Z)("<div>").addClass(t.addWidgetPrefix(tP)),a=t.option("filterValue");return a?(0,b.gx)(t.getFilterText(a,t.getController("filterSync").getCustomFilterOperations())).done(r=>{var n=t.option("filterPanel.customizeText");if(n){var s=n({component:t.component,filterValue:a,text:r});"string"==typeof s&&(r=s)}e.text(r)}):(i=t.option("filterPanel.texts.createFilter"),e.text(i)),S.Z.on(e,"click",()=>t._showFilterBuilder()),na("filterPanel",t,e,void 0,()=>t._showFilterBuilder()),t._addTabIndexToElement(e),e},_showFilterBuilder(){this.option("filterBuilderPopup.visible",!0)},_getRemoveButtonElement(){var t=this,e=()=>t.option("filterValue",null),i=(0,p.Z)("<div>").addClass(t.addWidgetPrefix(aP)).text(t.option("filterPanel.texts.clearFilter"));return S.Z.on(i,"click",e),na("filterPanel",this,i,void 0,e),t._addTabIndexToElement(i),i},_addTabIndexToElement(t){if(!this.option("useLegacyKeyboardNavigation")){var e=this.option("tabindex")||0;t.attr("tabindex",e)}},optionChanged(t){switch(t.name){case"filterValue":this._invalidate(),this.option("filterPanel.filterEnabled",!0),t.handled=!0;break;case"filterPanel":this._invalidate(),t.handled=!0;break;default:this.callBase(t)}},_getConditionText(t,e,i){var a="[".concat(t,"] ").concat(e);return(0,v.$K)(i)&&(a+=i),a},_getValueMaskedText:t=>Array.isArray(t)?"('".concat(t.join("', '"),"')"):" '".concat(t,"'"),_getValueText(t,e,i){var a=new b.BH,r=e&&e.customizeText;if((0,v.$K)(i)||r)if(!r&&t.lookup)_g(t,i,s=>{a.resolve(this._getValueMaskedText(s))});else{var n=Array.isArray(i)?i:V.getDisplayValue(t,i,null);(0,b.gx)(gg(t,n,e,"filterPanel")).done(s=>{a.resolve(this._getValueMaskedText(s))})}else a.resolve("");return a.promise()},getConditionText(t,e){var s,i=this,a=t[1],r=new b.BH,n=Pt(e.customOperations,a),o=On(t[0],e.columns),l=o.caption||"",d=t[2];return s=n?n.caption||(0,Pe.GK)(n.name):xl(null===d?"="===a?"isblank":"isnotblank":a,e.filterOperationDescriptions),this._getValueText(o,n,d).done(u=>{r.resolve(i._getConditionText(l,s,u))}),r},getGroupText(t,e,i){var a=this,r=new b.BH,n=[],s=Si(t);return t.forEach(o=>{we(o)?n.push(a.getConditionText(o,e)):Qt(o)&&n.push(a.getGroupText(o,e,!0))}),b.gx.apply(this,n).done(function(){for(var o,l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];if(s.startsWith("!")){var h=e.groupOperationDescriptions["not".concat(s.substring(1,2).toUpperCase()).concat(s.substring(2))].split(" ");o="".concat(h[0]," ").concat(d[0])}else o=d.join(" ".concat(e.groupOperationDescriptions[s]," "));i&&(o="(".concat(o,")")),r.resolve(o)}),r},getFilterText(t,e){var i={customOperations:e,columns:this.getController("columns").getFilteringColumns(),filterOperationDescriptions:this.option("filterBuilder.filterOperationDescriptions"),groupOperationDescriptions:this.option("filterBuilder.groupOperationDescriptions")};return we(t)?this.getConditionText(t,i):this.getGroupText(t,i)}}),oP={defaultOptions:()=>({filterPanel:{visible:!1,filterEnabled:!0,texts:{createFilter:A.Z.format("dxDataGrid-filterPanelCreateFilter"),clearFilter:A.Z.format("dxDataGrid-filterPanelClearFilter"),filterEnabledHint:A.Z.format("dxDataGrid-filterPanelFilterEnabledHint")}}}),views:{filterPanelView:sP},extenders:{controllers:{data:{optionChanged(t){"filterPanel"===t.name?(this._applyFilter(),t.handled=!0):this.callBase(t)}}}}};$.registerModule("filterPanel",oP);var kg="search-panel",Ng="search-text";function Hg(t){return(0,v.$K)(t.allowSearch)?t.allowSearch:t.allowFiltering}function Zg(t,e){var{lookup:i}=t;return t.parseValue?i?t.parseValue.call(i,e):t.parseValue(e):e}var uP={defaultOptions:()=>({searchPanel:{visible:!1,width:160,placeholder:A.Z.format("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,highlightCaseSensitive:!1,text:"",searchVisibleColumnsOnly:!1}}),extenders:{controllers:{data:{publicMethods(){return this.callBase().concat(["searchByText"])},_calculateAdditionalFilter(){var t=this.callBase(),e=function(i,a){var r,n,l,s=i._columnsController.getColumns(),o=i.option("searchPanel.searchVisibleColumnsOnly"),d=[];if(!a)return null;function u(c){for(var _=(0,Q.vb)(l.valueExpr),g=0;g<c.length;g++){var f=_(c[g]);d.push(n.createFilterExpression(f,null,"search"))}}for(r=0;r<s.length;r++)if(n=s[r],(!o||n.visible)&&Hg(n)&&n.calculateFilterExpression){l=n.lookup;var h=Zg(n,a);l&&l.items?(0,He.Z)(l.items).filter(n.createFilterExpression.call({dataField:l.displayExpr,dataType:l.dataType,calculateFilterExpression:n.calculateFilterExpression},h,null,"search")).enumerate().done(u):void 0!==h&&d.push(n.createFilterExpression(h,null,"search"))}return 0===d.length?["!"]:V.combineFilters(d,"or")}(this,this.option("searchPanel.text"));return V.combineFilters([t,e])},searchByText(t){this.option("searchPanel.text",t)},optionChanged(t){switch(t.fullName){case"searchPanel.text":case"searchPanel":this._applyFilter(),t.handled=!0;break;default:this.callBase(t)}}}},views:{headerPanel:function(){var t=function(e){return e.option("searchPanel")};return{_getToolbarItems(){var e=this.callBase();return this._prepareSearchItem(e)},_prepareSearchItem(e){var i=this,a=i.getController("data"),r=t(i);return r&&r.visible&&e.push({template(s,o,l){var d=(0,p.Z)("<div>").addClass(i.addWidgetPrefix(kg)).appendTo(l);i.getController("editorFactory").createEditor(d,{width:r.width,placeholder:r.placeholder,parentType:"searchPanel",value:i.option("searchPanel.text"),updateValueTimeout:700,setValue(u){a.searchByText(u)},editorOptions:{inputAttr:{"aria-label":A.Z.format("".concat(i.component.NAME,"-ariaSearchInGrid"))}}}),i.resize()},name:"searchPanel",location:"after",locateInMenu:"never",sortIndex:40}),e},getSearchTextEditor(){var e=this,i=e.element(),a=i.find(".".concat(e.addWidgetPrefix(kg))).filter(function(){return(0,p.Z)(this).closest(".".concat(e.addWidgetPrefix("header-panel"))).is(i)});return a.length?a.dxTextBox("instance"):null},isVisible(){var e=t(this);return this.callBase()||e&&e.visible},optionChanged(e){if("searchPanel"===e.name){if("searchPanel.text"===e.fullName){var i=this.getSearchTextEditor();i&&i.option("value",e.value)}else this._invalidate();e.handled=!0}else this.callBase(e)}}}(),rowsView:{init(){this.callBase.apply(this,arguments),this._searchParams=[],this._dataController=this.getController("data")},_getFormattedSearchText(t,e){var i=Zg(t,e),a=V.getFormatOptionsByColumn(t,"search");return V.formatValue(i,a)},_getStringNormalizer(){var t,e,i,a,r=this.option("searchPanel.highlightCaseSensitive"),n=null===(e=null===(t=this._dataController)||void 0===t?void 0:t.getDataSource)||void 0===e?void 0:e.call(t),s=null===(a=null===(i=n?.loadOptions)||void 0===i?void 0:i.call(n))||void 0===a?void 0:a.langParams;return o=>(0,Q.Ex)(o,r,s)},_findHighlightingTextNodes(t,e,i){var r,a=e.parent(),n=this._getStringNormalizer(),s=n(i),o=[];if(a.length){if(t)if(t.groupIndex>=0&&!t.showWhenGrouped)r=e;else{var l=this._columnsController.getVisibleIndex(t.index);r=a.children("td").eq(l).find("*")}}else a=(0,p.Z)("<div>").append(e);return(r=r?.length?r:a.find("*")).each((d,u)=>{for(var h=(0,p.Z)(u).contents(),c=0;c<h.length;c++){var _=h.get(c);3===_.nodeType&&n(_.textContent||_.nodeValue).indexOf(s)>-1&&o.push(_)}}),o},_highlightSearchTextCore(t,e){var i=(0,p.Z)("<span>").addClass(this.addWidgetPrefix(Ng)),a=t.text(),r=t[0],n=this._getStringNormalizer(),s=n(a).indexOf(n(e));if(s>=0)return r.textContent?r.textContent=a.substr(0,s):r.nodeValue=a.substr(0,s),t.after(i.text(a.substr(s,e.length))),t=(0,p.Z)(Y.Z.createTextNode(a.substr(s+e.length))).insertAfter(i),this._highlightSearchTextCore(t,e)},_highlightSearchText(t,e,i){var a=this,r=this._getStringNormalizer(),n=a.option("searchPanel.text");e&&i&&(n=n&&a._getFormattedSearchText(i,n)),n&&a.option("searchPanel.highlightSearchText")&&a._findHighlightingTextNodes(i,t,n).forEach(o=>{e?r((0,p.Z)(o).text())===r(n)&&(0,p.Z)(o).replaceWith((0,p.Z)("<span>").addClass(a.addWidgetPrefix(Ng)).text((0,p.Z)(o).text())):a._highlightSearchTextCore((0,p.Z)(o),n)})},_renderCore(){var t=this.callBase.apply(this,arguments);return(this.option().rowTemplate||this.option("dataRowTemplate"))&&(this.option("templatesRenderAsynchronously")?(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._highlightSearchText(this.getTableElement())})):this._highlightSearchText(this.getTableElement())),t},_updateCell(t,e){var{column:i}=e,r="string"!==(i.lookup&&i.lookup.dataType||i.dataType);Hg(i)&&!e.isOnForm&&(this.option("templatesRenderAsynchronously")?(this._searchParams.length||(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._searchParams.forEach(n=>{this._highlightSearchText.apply(this,n)}),this._searchParams=[]})),this._searchParams.push([t,r,i])):this._highlightSearchText(t,r,i)),this.callBase(t,e)},dispose(){clearTimeout(this._highlightTimer),this.callBase()}}}}};$.registerModule("search",uP);class hP extends pc.Z{_optionChanged(e){switch(e.name){case"pageIndex":var i=this.option("pageIndexChanged");i&&i(e.value);break;case"pageSize":var a=this.option("pageSizeChanged");a&&a(e.value)}super._optionChanged(e)}}var $g=L(5871);function Ft(t,e){var i;return Zh((null!==(i=wc(e))&&void 0!==i?i:{})[t])}function Ln(t){return Ft("marginLeft",t)+Ft("marginRight",t)+Ft("width",t)}function zg(t){return Ft("minWidth",t)}var pP=["contentTemplate","pagerProps"];var mP={},CP=t=>t&&(t.defaultProps?e=>(0,G.vs)((0,G.Iz)(2,t,(0,M.Z)({},e))):t);let SP=(()=>{class t extends te.OS{constructor(i){super(i),this.parentRef=(0,G.Vf)(),this.pageSizesRef=(0,G.Vf)(),this.infoTextRef=(0,G.Vf)(),this.pagesRef=(0,G.Vf)(),this.actualIsLargeDisplayMode=!0,this.actualInfoTextVisible=!0,this.state={infoTextVisible:!0,isLargeDisplayMode:!0},this.subscribeToResize=this.subscribeToResize.bind(this),this.effectUpdateChildProps=this.effectUpdateChildProps.bind(this),this.updateAdaptivityProps=this.updateAdaptivityProps.bind(this)}createEffects(){return[new te.b0(this.subscribeToResize,[this.state.infoTextVisible,this.state.isLargeDisplayMode]),new te.b0(this.effectUpdateChildProps,[this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])]}updateEffects(){var i,a;null===(i=this._effects[0])||void 0===i||i.update([this.state.infoTextVisible,this.state.isLargeDisplayMode]),null===(a=this._effects[1])||void 0===a||a.update([this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])}subscribeToResize(){var i=()=>{this.parentWidth>0&&this.updateAdaptivityProps()};return $g.Z.add(i),()=>{$g.Z.remove(i)}}effectUpdateChildProps(){this.parentWidth>0&&this.updateAdaptivityProps()}get contentAttributes(){var{className:i,displayMode:a,gridCompatibility:r,hasKnownLastPage:n,infoText:s,label:o,lightModeEnabled:l,maxPagesCount:d,onKeyDown:u,pageCount:h,pageIndex:c,pageIndexChange:_,pageSize:g,pageSizeChange:f,pageSizes:m,pagesCountText:x,pagesNavigatorVisible:w,rtlEnabled:T,showInfo:O,showNavigationButtons:P,showPageSizes:F,totalCount:N,visible:H}=this.props.pagerProps;return(0,M.Z)({},this.restAttributes,{pageSize:g,pageIndex:c,pageIndexChange:_,pageSizeChange:f,gridCompatibility:r,className:i,showInfo:O,infoText:s,lightModeEnabled:l,displayMode:a,maxPagesCount:d,pageCount:h,pagesCountText:x,visible:H,hasKnownLastPage:n,pagesNavigatorVisible:w,showPageSizes:F,pageSizes:m,rtlEnabled:T,showNavigationButtons:P,totalCount:N,onKeyDown:u,label:o})}get parentWidth(){return this.parentRef.current?Ln(this.parentRef.current):0}updateAdaptivityProps(){var i=function fP(t){var{info:e,pageSizes:i,pages:a,parent:r}=t,n=function cP(t){var e=Ft("paddingLeft",t)+Ft("paddingRight",t);return Ft("width",t)-e}(r),s=Ln(i),o=Ln(e),l=Ln(a);return{parent:n,pageSizes:s,info:o+Ft("marginLeft",e)+Ft("marginRight",e),pages:l}}({parent:this.parentRef.current,pageSizes:this.pageSizesRef.current,info:this.infoTextRef.current,pages:this.pagesRef.current});if(this.actualInfoTextVisible===this.state.infoTextVisible&&this.actualIsLargeDisplayMode===this.state.isLargeDisplayMode){var a=!(0,v.$K)(this.elementsWidth);a&&(this.elementsWidth={}),(a||this.state.isLargeDisplayMode)&&(this.elementsWidth.pageSizes=i.pageSizes,this.elementsWidth.pages=i.pages),(a||this.state.infoTextVisible)&&(this.elementsWidth.info=i.info),this.actualIsLargeDisplayMode=function vP(t){var{pageSizes:e,pages:i,parent:a}=t;return a-(e+i)>0}((0,M.Z)({parent:i.parent},{pageSizes:this.elementsWidth.pageSizes,pages:this.elementsWidth.pages})),this.actualInfoTextVisible=function gP(t){var{info:e,pageSizes:i,pages:a,parent:r}=t;return r-(i+a+e)>0}((0,M.Z)({},i,{info:this.elementsWidth.info})),this.setState(r=>({infoTextVisible:this.actualInfoTextVisible})),this.setState(r=>({isLargeDisplayMode:this.actualIsLargeDisplayMode}))}}get restAttributes(){return(0,xe.Z)(this.props,pP)}render(){var i=this.props;return(t=>{var{contentAttributes:e,infoTextRef:i,infoTextVisible:a,isLargeDisplayMode:r,pageSizesRef:n,pagesRef:s,parentRef:o,props:{contentTemplate:l}}=t;return l((0,M.Z)({rootElementRef:o,pageSizesRef:n,infoTextRef:i,pagesRef:s,infoTextVisible:a,isLargeDisplayMode:r},e))})({props:(0,M.Z)({},i,{contentTemplate:CP(i.contentTemplate)}),infoTextVisible:this.state.infoTextVisible,isLargeDisplayMode:this.state.isLargeDisplayMode,parentRef:this.parentRef,pageSizesRef:this.pageSizesRef,infoTextRef:this.infoTextRef,pagesRef:this.pagesRef,contentAttributes:this.contentAttributes,parentWidth:this.parentWidth,updateAdaptivityProps:this.updateAdaptivityProps,restAttributes:this.restAttributes})}}return t.defaultProps=mP,t})();var Wg={gridCompatibility:!0,showInfo:!1,displayMode:"adaptive",maxPagesCount:10,pageCount:10,visible:!0,hasKnownLastPage:!0,pagesNavigatorVisible:"auto",showPageSizes:!0,pageSizes:Object.freeze([5,10]),showNavigationButtons:!1,totalCount:0,get label(){return A.Z.format("dxPager-ariaLabel")}},xP=Object.create(Object.prototype,(0,M.Z)(Object.getOwnPropertyDescriptors(Wg),Object.getOwnPropertyDescriptors({defaultPageSize:5,pageSizeChange:()=>{},defaultPageIndex:1,pageIndexChange:()=>{}}))),Te=Object.create(Object.prototype,(0,M.Z)(Object.getOwnPropertyDescriptors(Wg),Object.getOwnPropertyDescriptors({pageSize:5,pageIndex:1}))),bP=["infoText","pageCount","pageIndex","rootElementRef","totalCount"],Kg="dx-info",yP={get pageIndex(){return Te.pageIndex},get pageCount(){return Te.pageCount},get totalCount(){return Te.totalCount}};let EP=(()=>{class t extends te.Ul{constructor(i){super(i),this.state={}}get infoText(){var i;return(null!==(i=this.props.infoText)&&void 0!==i?i:"")||A.Z.getFormatter("dxPager-infoText")()}get text(){var{pageCount:i,pageIndex:a,totalCount:r}=this.props;return(0,ot.WU)(this.infoText,(a+1).toString(),i.toString(),r.toString())}get restAttributes(){return(0,xe.Z)(this.props,bP)}render(){return(t=>{var{props:{rootElementRef:e},text:i}=t;return(0,G.Wm)(1,"div",Kg,i,0,null,null,e)})({props:(0,M.Z)({},this.props),infoText:this.infoText,text:this.text,restAttributes:this.restAttributes})}}return t.defaultProps=yP,t})();var IP=L(28),er=(0,te.kr)(void 0),TP=["children","className","label","onClick","selected","tabIndex"],DP={className:"",label:"",tabIndex:0,selected:!1};let Vn=(()=>{class t extends te.OS{constructor(i){super(i),this.state={},this.widgetRef=(0,G.Vf)(),this.keyboardEffect=this.keyboardEffect.bind(this),this.subscribeToClick=this.subscribeToClick.bind(this)}get keyboardContext(){return this.context[er.id]?this.context[er.id]:er.defaultValue}createEffects(){return[new te.b0(this.keyboardEffect,[this.keyboardContext,this.props.onClick]),new te.b0(this.subscribeToClick,[this.props.onClick])]}updateEffects(){var i,a;null===(i=this._effects[0])||void 0===i||i.update([this.keyboardContext,this.props.onClick]),null===(a=this._effects[1])||void 0===a||a.update([this.props.onClick])}keyboardEffect(){return this.keyboardContext.registerKeyboardAction(this.widgetRef.current,this.props.onClick)}subscribeToClick(){return(0,IP.OZ)(this.widgetRef.current,this.props.onClick)}get restAttributes(){return(0,xe.Z)(this.props,TP)}render(){return(t=>{var{props:{children:e,className:i,label:a,selected:r,tabIndex:n},widgetRef:s}=t;return(0,G.Wm)(1,"div",i,e,0,{tabIndex:n,role:"button","aria-label":a,"aria-current":r?"page":void 0},null,s)})({props:(0,M.Z)({},this.props),widgetRef:this.widgetRef,keyboardContext:this.keyboardContext,restAttributes:this.restAttributes})}}return t.defaultProps=DP,t})();var Gg="dx-selection",Ug="dx-page-size",FP="".concat(Ug," ").concat(Gg),kP=["className","index","onClick","selected"],HP={index:0,selected:!1,className:"dx-page"};let Yg=(()=>{class t extends te.Ul{constructor(i){super(i),this.state={}}get label(){return(0,ot.WU)(A.Z.getFormatter("dxPager-page"),this.value)}get value(){return this.props.index+1}get className(){var{selected:i}=this.props;return(0,zi.G)({["".concat(this.props.className)]:!!this.props.className,[Gg]:!!i})}get restAttributes(){return(0,xe.Z)(this.props,kP)}render(){return(t=>{var{className:e,label:i,props:{onClick:a,selected:r},value:n}=t;return(0,G.Iz)(2,Vn,{className:e,label:i,onClick:a,selected:r,children:n})})({props:(0,M.Z)({},this.props),label:this.label,value:this.value,className:this.className,restAttributes:this.restAttributes})}}return t.defaultProps=HP,t})();var ZP=["pageIndexes"],$P=["maxPagesCount","pageCount","pageIndex","pageIndexChange"];function jg(t,e,i){return 1===t?"high":t+e===i-1?"low":"both"}function qg(t,e,i){var a=[],r=[];switch(i){case"none":a=[...t];break;case"both":a=[0,"low",...t,"high",e-1],r=t.slice(1,-1);break;case"high":a=[0,...t,"high",e-1],r=t.slice(0,-1);break;case"low":a=[0,"low",...t,e-1],r=t.slice(1)}return{slidingWindowIndexes:t,indexesForReuse:r,pageIndexes:a}}function Xg(t,e,i,a){for(var r=[],n=0;n<e;n+=1)r.push(n+t);return qg(r,i,a)}var KP={get pageIndex(){return Te.pageIndex},get maxPagesCount(){return Te.maxPagesCount},get pageCount(){return Te.pageCount}};let GP=(()=>{class t extends te.Ul{constructor(i){super(i),this.state={},this.canReuseSlidingWindow=this.canReuseSlidingWindow.bind(this),this.generatePageIndexes=this.generatePageIndexes.bind(this),this.isSlidingWindowMode=this.isSlidingWindowMode.bind(this),this.onPageClick=this.onPageClick.bind(this)}get config(){return this.context[Ye.E.id]?this.context[Ye.E.id]:Ye.E.defaultValue}get slidingWindowState(){return this.slidingWindowStateHolder||{indexesForReuse:[],slidingWindowIndexes:[]}}canReuseSlidingWindow(i,a){var{indexesForReuse:r}=this.slidingWindowState,n=r.slice(-1)[0]<i-1,s=r.includes(a);return n&&s}generatePageIndexes(){var r,{pageCount:i,pageIndex:a}=this.props,{slidingWindowIndexes:n}=this.slidingWindowState,l=Xg(r=a===n[0]?a-1:a===n[n.length-1]?a+2-4:a<4?1:a>=i-4?i-4-1:a-1,4,i,jg(r,4,i)),{pageIndexes:d}=l,u=(0,xe.Z)(l,ZP);return this.slidingWindowStateHolder=u,d}isSlidingWindowMode(){var{maxPagesCount:i,pageCount:a}=this.props;return a<=4||a<=i}onPageClick(i){this.props.pageIndexChange(i)}get pageIndexes(){var{pageCount:i}=this.props;if(this.isSlidingWindowMode())return Xg(0,i,i,"none").pageIndexes;if(this.canReuseSlidingWindow(i,this.props.pageIndex)){var{slidingWindowIndexes:a}=this.slidingWindowState;return qg(a,i,jg(a[0],4,i)).pageIndexes}return this.generatePageIndexes()}get pages(){var i,{pageIndex:a}=this.props,r=s=>{var o="low"===s||"high"===s?null:{index:s,onClick:()=>this.onPageClick(s),selected:a===s};return{key:s.toString(),pageProps:o}};return(null!==(i=this.config)&&void 0!==i&&i.rtlEnabled?[...this.pageIndexes].reverse():this.pageIndexes).map(s=>r(s))}get restAttributes(){return(0,xe.Z)(this.props,$P)}render(){return(t=>{var{pages:e}=t,i=e.map(a=>{var{key:r,pageProps:n}=a;return n?(0,G.Iz)(2,Yg,{index:n.index,selected:n.selected,onClick:n.onClick},r):(0,G.Wm)(1,"div","dx-separator",". . .",16,null,r)});return(0,G.xJ)(i,0)})({props:(0,M.Z)({},this.props),config:this.config,pageIndexes:this.pageIndexes,pages:this.pages,restAttributes:this.restAttributes})}}return t.defaultProps=KP,t})();var ia={hoverStateEnabled:!0,activeStateEnabled:!0,get focusStateEnabled(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()}},Pn={label:"",get labelMode(){return(0,oe.x2)((0,oe.Vk)())?"floating":"static"}},UP=["accessKey","activeStateEnabled","className","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","invalidValueMessage","isValid","label","labelMode","max","min","mode","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","showSpinButtons","step","tabIndex","useLargeSpinButtons","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],Ke=Object.create(Object.prototype,(0,M.Z)(Object.getOwnPropertyDescriptors(be),Object.getOwnPropertyDescriptors({defaultValue:0,isReactComponentWrapper:!0}))),qP={get defaultValue(){return Ke.defaultValue},get readOnly(){return Ke.readOnly},get name(){return Ke.name},get validationError(){return Ke.validationError},get validationErrors(){return Ke.validationErrors},get validationMessageMode(){return Ke.validationMessageMode},get validationMessagePosition(){return Ke.validationMessagePosition},get validationStatus(){return Ke.validationStatus},get isValid(){return Ke.isValid},get inputAttr(){return Ke.inputAttr},get className(){return Ke.className},get activeStateEnabled(){return ia.activeStateEnabled},get disabled(){return Ke.disabled},get focusStateEnabled(){return ia.focusStateEnabled},get hoverStateEnabled(){return ia.hoverStateEnabled},get tabIndex(){return Ke.tabIndex},get visible(){return Ke.visible},get label(){return Pn.label},get labelMode(){return Pn.labelMode},isReactComponentWrapper:!0};let XP=(()=>{class t extends te.Ul{constructor(i){super(i),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var i=(0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,xe.Z)(i,UP)}render(){return(t=>{var{componentProps:e,restAttributes:i}=t;return(0,G.vs)((0,G.Iz)(2,to,(0,M.Z)({componentType:fo,componentProps:e,templateNames:[]},i)))})({props:(0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return t.defaultProps=qP,t})();function Jg(t,e){return t+10*Math.max(...e).toString().length}var QP=["inputAttr","pageCount","pageIndex","pageIndexChange","pagesCountText"],eF="".concat(Kg,"  dx-info-text"),Qg="dx-page-index",rF={inputAttr:Object.freeze({"aria-label":A.Z.format("dxPager-ariaPageNumber")})},nF={get pageIndex(){return Te.pageIndex},get pageCount(){return Te.pageCount},get inputAttr(){return rF.inputAttr}};let sF=(()=>{class t extends te.OS{constructor(i){super(i),this.pageIndexRef=(0,G.Vf)(),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this),this.selectLastPageIndex=this.selectLastPageIndex.bind(this),this.valueChange=this.valueChange.bind(this)}createEffects(){return[new te.b0(this.updateWidth,[this.state.minWidth])]}updateEffects(){var i;null===(i=this._effects[0])||void 0===i||i.update([this.state.minWidth])}updateWidth(){var i,a=null===(i=this.pageIndexRef.current)||void 0===i?void 0:i.querySelector(".".concat(Qg));this.setState(r=>({minWidth:a&&zg(a)||r.minWidth}))}get value(){return this.props.pageIndex+1}get width(){var{pageCount:i}=this.props;return Jg(this.state.minWidth,[i])}get pagesCountText(){var i;return(null!==(i=this.props.pagesCountText)&&void 0!==i?i:"")||A.Z.getFormatter("dxPager-pagesCountText")()}selectLastPageIndex(){this.props.pageIndexChange(this.props.pageCount-1)}valueChange(i){this.props.pageIndexChange(i-1)}get restAttributes(){return(0,xe.Z)(this.props,QP)}render(){return(t=>{var{pageIndexRef:e,pagesCountText:i,props:{inputAttr:a,pageCount:r},selectLastPageIndex:n,value:s,valueChange:o,width:l}=t;return(0,G.Wm)(1,"div","dx-light-pages",[(0,G.Iz)(2,XP,{className:Qg,min:1,max:r,width:l,value:s,valueChange:o,inputAttr:a}),(0,G.Wm)(1,"span",eF,i,0),(0,G.Iz)(2,Yg,{className:"dx-pages-count",selected:!1,index:r-1,onClick:n})],4,null,null,e)})({props:(0,M.Z)({},this.props),pageIndexRef:this.pageIndexRef,value:this.value,width:this.width,pagesCountText:this.pagesCountText,selectLastPageIndex:this.selectLastPageIndex,valueChange:this.valueChange,restAttributes:this.restAttributes})}}return t.defaultProps=nF,t})();var oF=["hasKnownLastPage","isLargeDisplayMode","maxPagesCount","pageCount","pageIndex","pageIndexChange","pagesCountText","showNavigationButtons","totalCount"],Fn="dx-navigate-button",ef="dx-prev-button",tf="dx-next-button",af="dx-button-disable",uF={nextEnabledClass:"".concat(Fn," ").concat(tf),prevEnabledClass:"".concat(Fn," ").concat(ef),nextDisabledClass:"".concat(af," ").concat(Fn," ").concat(tf),prevDisabledClass:"".concat(af," ").concat(Fn," ").concat(ef)},hF={next:"prev",prev:"next"},vF={get pageIndex(){return Te.pageIndex},get maxPagesCount(){return Te.maxPagesCount},get pageCount(){return Te.pageCount},get hasKnownLastPage(){return Te.hasKnownLastPage},get showNavigationButtons(){return Te.showNavigationButtons},get totalCount(){return Te.totalCount},get isLargeDisplayMode(){return true}};let gF=(()=>{class t extends te.Ul{constructor(i){super(i),this.state={},this.__getterCache={},this.pageIndexChange=this.pageIndexChange.bind(this),this.getButtonProps=this.getButtonProps.bind(this),this.canNavigateToPage=this.canNavigateToPage.bind(this),this.getNextPageIndex=this.getNextPageIndex.bind(this),this.canNavigateTo=this.canNavigateTo.bind(this),this.navigateToPage=this.navigateToPage.bind(this)}get config(){return this.context[Ye.E.id]?this.context[Ye.E.id]:Ye.E.defaultValue}pageIndexChange(i){this.canNavigateToPage(i)&&this.props.pageIndexChange(i)}getButtonProps(i){var a,r=null!==(a=this.config)&&void 0!==a&&a.rtlEnabled?hF[i]:i,n=this.canNavigateTo(r);return{className:uF["".concat(i).concat(n?"Enabled":"Disabled","Class")],tabIndex:n?0:-1,navigate:()=>this.navigateToPage(r)}}canNavigateToPage(i){return this.props.hasKnownLastPage?i>=0&&i<=this.props.pageCount-1:i>=0}getNextPageIndex(i){return this.props.pageIndex+function pF(t){return"next"===t?1:-1}(i)}canNavigateTo(i){return this.canNavigateToPage(this.getNextPageIndex(i))}navigateToPage(i){this.pageIndexChange(this.getNextPageIndex(i))}get renderPrevButton(){var{isLargeDisplayMode:i,showNavigationButtons:a}=this.props;return!i||a}get renderNextButton(){return this.renderPrevButton||!this.props.hasKnownLastPage}get prevButtonProps(){return void 0!==this.__getterCache.prevButtonProps?this.__getterCache.prevButtonProps:this.__getterCache.prevButtonProps=(()=>this.getButtonProps("prev"))()}get nextButtonProps(){return void 0!==this.__getterCache.nextButtonProps?this.__getterCache.nextButtonProps:this.__getterCache.nextButtonProps=(()=>this.getButtonProps("next"))()}get restAttributes(){return(0,xe.Z)(this.props,oF)}componentWillUpdate(i,a,r){(this.context[Ye.E.id]!==r[Ye.E.id]||this.props.hasKnownLastPage!==i.hasKnownLastPage||this.props.pageCount!==i.pageCount||this.props.pageIndex!==i.pageIndex||this.props.pageIndexChange!==i.pageIndexChange)&&(this.__getterCache.prevButtonProps=void 0),(this.context[Ye.E.id]!==r[Ye.E.id]||this.props.hasKnownLastPage!==i.hasKnownLastPage||this.props.pageCount!==i.pageCount||this.props.pageIndex!==i.pageIndex||this.props.pageIndexChange!==i.pageIndexChange)&&(this.__getterCache.nextButtonProps=void 0)}render(){return(t=>{var{nextButtonProps:e,pageIndexChange:i,prevButtonProps:a,props:{isLargeDisplayMode:r,maxPagesCount:n,pageCount:s,pageIndex:o,pagesCountText:l},renderNextButton:d,renderPrevButton:u}=t;return(0,G.xJ)([u&&(0,G.Iz)(2,Vn,{label:A.Z.getFormatter("dxPager-prevPage")(),className:a.className,tabIndex:a.tabIndex,onClick:a.navigate}),r&&(0,G.Iz)(2,GP,{maxPagesCount:n,pageCount:s,pageIndex:o,pageIndexChange:i}),!r&&(0,G.Iz)(2,sF,{pageCount:s,pageIndex:o,pageIndexChange:i,pagesCountText:l}),d&&(0,G.Iz)(2,Vn,{label:A.Z.getFormatter("dxPager-nextPage")(),className:e.className,tabIndex:e.tabIndex,onClick:e.navigate})],0)})({props:(0,M.Z)({},this.props),config:this.config,pageIndexChange:this.pageIndexChange,renderPrevButton:this.renderPrevButton,renderNextButton:this.renderNextButton,prevButtonProps:this.prevButtonProps,nextButtonProps:this.nextButtonProps,restAttributes:this.restAttributes})}}return t.defaultProps=vF,t})();var fF=["accessKey","activeStateEnabled","className","dataSource","defaultValue","disabled","displayExpr","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isValid","label","labelMode","name","onClick","onFocusIn","onKeyDown","placeholder","readOnly","rtlEnabled","searchEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","valueExpr","visible","width"],Ve=Object.create(Object.prototype,(0,M.Z)(Object.getOwnPropertyDescriptors(be),Object.getOwnPropertyDescriptors({placeholder:"",hoverStateEnabled:!0,searchEnabled:!1,defaultValue:null,isReactComponentWrapper:!0}))),CF={get placeholder(){return Ve.placeholder},get hoverStateEnabled(){return ia.hoverStateEnabled},get searchEnabled(){return Ve.searchEnabled},get defaultValue(){return Ve.defaultValue},get readOnly(){return Ve.readOnly},get name(){return Ve.name},get validationError(){return Ve.validationError},get validationErrors(){return Ve.validationErrors},get validationMessageMode(){return Ve.validationMessageMode},get validationMessagePosition(){return Ve.validationMessagePosition},get validationStatus(){return Ve.validationStatus},get isValid(){return Ve.isValid},get inputAttr(){return Ve.inputAttr},get className(){return Ve.className},get activeStateEnabled(){return ia.activeStateEnabled},get disabled(){return Ve.disabled},get focusStateEnabled(){return ia.focusStateEnabled},get tabIndex(){return Ve.tabIndex},get visible(){return Ve.visible},get label(){return Pn.label},get labelMode(){return Pn.labelMode},isReactComponentWrapper:!0};let SF=(()=>{class t extends te.Ul{constructor(i){super(i),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var i=(0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,xe.Z)(i,fF)}render(){return(t=>{var{componentProps:e,restAttributes:i}=t;return(0,G.vs)((0,G.Iz)(2,to,(0,M.Z)({componentType:Cp,componentProps:e,templateNames:["dropDownButtonTemplate","groupTemplate","itemTemplate"]},i)))})({props:(0,M.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return t.defaultProps=CF,t})();var xF=["inputAttr","pageSize","pageSizeChange","pageSizes","parentRef"],wF={inputAttr:Object.freeze({"aria-label":A.Z.format("dxPager-ariaPageSize")})},yF={get pageSize(){return Te.pageSize},get inputAttr(){return wF.inputAttr}};let EF=(()=>{class t extends te.OS{constructor(i){super(i),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this)}createEffects(){return[new te.b0(this.updateWidth,[this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])]}updateEffects(){var i;null===(i=this._effects[0])||void 0===i||i.update([this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])}updateWidth(){this.setState(i=>({minWidth:zg(this.props.parentRef.current)||i.minWidth}))}get width(){return Jg(this.state.minWidth,this.props.pageSizes.map(i=>i.value))}get restAttributes(){return(0,xe.Z)(this.props,xF)}render(){return(t=>{var{props:{inputAttr:e,pageSize:i,pageSizeChange:a,pageSizes:r},width:n}=t;return(0,G.Iz)(2,SF,{displayExpr:"text",valueExpr:"value",dataSource:r,value:i,valueChange:a,width:n,inputAttr:e})})({props:(0,M.Z)({},this.props),width:this.width,restAttributes:this.restAttributes})}}return t.defaultProps=yF,t})();var IF=["pageSize","pageSizeChange","pageSizes"],AF={get pageSize(){return Te.pageSize}};let DF=(()=>{class t extends te.Ul{constructor(i){super(i),this.state={},this.__getterCache={},this.onPageSizeChange=this.onPageSizeChange.bind(this)}get pageSizesText(){return void 0!==this.__getterCache.pageSizesText?this.__getterCache.pageSizesText:this.__getterCache.pageSizesText=(()=>{var{pageSize:i,pageSizes:a}=this.props;return a.map((r,n)=>{var{text:s,value:o}=r;return{className:(0,zi.G)({[o===i?FP:Ug]:!0,"dx-first-child":0===n}),click:this.onPageSizeChange(o),label:(0,ot.WU)(A.Z.getFormatter("dxPager-pageSize"),o||A.Z.getFormatter("dxPager-pageSizesAllText")),text:s}})})()}onPageSizeChange(i){return()=>(this.props.pageSizeChange(i),this.props.pageSize)}get restAttributes(){return(0,xe.Z)(this.props,IF)}componentWillUpdate(i,a,r){(this.props.pageSize!==i.pageSize||this.props.pageSizes!==i.pageSizes||this.props.pageSizeChange!==i.pageSizeChange)&&(this.__getterCache.pageSizesText=void 0)}render(){return(t=>{var{pageSizesText:e}=t;return(0,G.xJ)(e.map(i=>{var{className:a,click:r,label:n,text:s}=i;return(0,G.Iz)(2,Vn,{className:a,label:n,onClick:r,children:s},s)}),0)})({props:(0,M.Z)({},this.props),pageSizesText:this.pageSizesText,restAttributes:this.restAttributes})}}return t.defaultProps=AF,t})();var OF=["isLargeDisplayMode","pageSize","pageSizeChange","pageSizes","rootElementRef"],VF={get pageSize(){return Te.pageSize},get pageSizes(){return Te.pageSizes},get isLargeDisplayMode(){return true}};let PF=(()=>{class t extends te.OS{constructor(i){super(i),this.state={},this.htmlRef=(0,G.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this)}createEffects(){return[new te.b0(this.setRootElementRef,[])]}setRootElementRef(){var{rootElementRef:i}=this.props;i&&(i.current=this.htmlRef.current)}get normalizedPageSizes(){return void 0!==this.__getterCache.normalizedPageSizes?this.__getterCache.normalizedPageSizes:this.__getterCache.normalizedPageSizes=(()=>{var{pageSizes:i}=this.props;return i.map(a=>"all"===a||0===a?{text:A.Z.getFormatter("dxPager-pageSizesAllText")(),value:0}:{text:String(a),value:a})})()}get restAttributes(){return(0,xe.Z)(this.props,OF)}componentWillUpdate(i,a,r){super.componentWillUpdate(),this.props.pageSizes!==i.pageSizes&&(this.__getterCache.normalizedPageSizes=void 0)}render(){return(t=>{var{htmlRef:e,normalizedPageSizes:i,props:{isLargeDisplayMode:a,pageSize:r,pageSizeChange:n}}=t;return(0,G.Wm)(1,"div","dx-page-sizes",[a&&(0,G.Iz)(2,DF,{pageSizes:i,pageSize:r,pageSizeChange:n}),!a&&(0,G.Iz)(2,EF,{parentRef:e,pageSizes:i,pageSize:r,pageSizeChange:n})],0,null,null,e)})({props:(0,M.Z)({},this.props),htmlRef:this.htmlRef,normalizedPageSizes:this.normalizedPageSizes,restAttributes:this.restAttributes})}}return t.defaultProps=VF,t})();var FF=["className","displayMode","gridCompatibility","hasKnownLastPage","infoText","infoTextRef","infoTextVisible","isLargeDisplayMode","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pageSizesRef","pagesCountText","pagesNavigatorVisible","pagesRef","rootElementRef","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"],kF=Object.create(Object.prototype,(0,M.Z)(Object.getOwnPropertyDescriptors(Te),Object.getOwnPropertyDescriptors({infoTextVisible:!0,isLargeDisplayMode:!0})));let NF=(()=>{class t extends te.OS{constructor(i){super(i),this.state={},this.widgetRootElementRef=(0,G.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this),this.createFakeInstance=this.createFakeInstance.bind(this)}createEffects(){return[new te.b0(this.setRootElementRef,[])]}getChildContext(){return(0,M.Z)({},this.context,{[er.id]:this.keyboardAction||er.defaultValue})}setRootElementRef(){var{rootElementRef:i}=this.props;i&&(i.current=this.widgetRootElementRef.current)}createFakeInstance(){return{option:()=>!1,element:()=>this.widgetRootElementRef.current,_createActionByOption:()=>i=>{var a,r;null===(a=(r=this.props).onKeyDown)||void 0===a||a.call(r,i)}}}get keyboardAction(){return void 0!==this.__getterCache.keyboardAction?this.__getterCache.keyboardAction:this.__getterCache.keyboardAction=(()=>({registerKeyboardAction:(i,a)=>fd("pager",this.createFakeInstance(),i,void 0,a)}))()}get infoVisible(){var{infoTextVisible:i,showInfo:a}=this.props;return a&&i}get pageIndexSelectorVisible(){return 0!==this.props.pageSize}get normalizedDisplayMode(){var{displayMode:i,lightModeEnabled:a}=this.props;return"adaptive"===i&&void 0!==a?a?"compact":"full":i}get pagesContainerVisible(){return!!this.props.pagesNavigatorVisible&&this.props.pageCount>0}get pagesContainerVisibility(){if("auto"===this.props.pagesNavigatorVisible&&1===this.props.pageCount&&this.props.hasKnownLastPage)return"hidden"}get isLargeDisplayMode(){var i=this.normalizedDisplayMode;return"adaptive"===i?this.props.isLargeDisplayMode:"full"===i}get classes(){var i={["".concat(this.props.className)]:!!this.props.className,"dx-pager":!0,"dx-light-mode":!this.isLargeDisplayMode};return(0,zi.G)(i)}get aria(){return{role:"navigation",label:this.props.label}}get restAttributes(){return(0,xe.Z)(this.props,FF)}componentWillUpdate(i,a,r){super.componentWillUpdate(),this.props.onKeyDown!==i.onKeyDown&&(this.__getterCache.keyboardAction=void 0)}render(){return(t=>{var{aria:e,classes:i,infoVisible:a,isLargeDisplayMode:r,pageIndexSelectorVisible:n,pagesContainerVisibility:s,pagesContainerVisible:o,props:{hasKnownLastPage:l,infoText:d,infoTextRef:u,maxPagesCount:h,pageCount:c,pageIndex:_,pageIndexChange:g,pageSize:f,pageSizeChange:m,pageSizes:x,pageSizesRef:w,pagesCountText:T,pagesRef:O,rtlEnabled:P,showNavigationButtons:F,showPageSizes:N,totalCount:H,visible:k},restAttributes:U,widgetRootElementRef:j}=t;return(0,G.vs)((0,G.Iz)(2,Ia.$L,(0,M.Z)({rootElementRef:j,rtlEnabled:P,classes:i,visible:k,aria:e},U,{children:[N&&(0,G.Iz)(2,PF,{rootElementRef:w,isLargeDisplayMode:r,pageSize:f,pageSizeChange:m,pageSizes:x}),o&&(0,G.Wm)(1,"div","dx-pages",[a&&(0,G.Iz)(2,EP,{rootElementRef:u,infoText:d,pageCount:c,pageIndex:_,totalCount:H}),n&&(0,G.Wm)(1,"div","dx-page-indexes",(0,G.Iz)(2,gF,{hasKnownLastPage:l,isLargeDisplayMode:r,maxPagesCount:h,pageCount:c,pageIndex:_,pageIndexChange:g,pagesCountText:T,showNavigationButtons:F,totalCount:H}),2,null,null,O)],0,{style:(0,te.jk)({visibility:s})})]})))})({props:(0,M.Z)({},this.props),widgetRootElementRef:this.widgetRootElementRef,keyboardAction:this.keyboardAction,infoVisible:this.infoVisible,pageIndexSelectorVisible:this.pageIndexSelectorVisible,pagesContainerVisible:this.pagesContainerVisible,pagesContainerVisibility:this.pagesContainerVisibility,isLargeDisplayMode:this.isLargeDisplayMode,classes:this.classes,aria:this.aria,restAttributes:this.restAttributes})}}return t.defaultProps=kF,t})();var HF=["className","defaultPageIndex","defaultPageSize","displayMode","gridCompatibility","hasKnownLastPage","infoText","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pagesCountText","pagesNavigatorVisible","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"];let $F=(()=>{class t extends te.DZ{constructor(i){super(i),this.__getterCache={},this.state={pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.props.defaultPageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.props.defaultPageIndex},this.pageIndexChange=this.pageIndexChange.bind(this),this.pageSizeChange=this.pageSizeChange.bind(this)}createEffects(){return[(0,te.gt)()]}pageIndexChange(i){var a,r;this.props.gridCompatibility?(this.setState(n=>({pageIndex:a=i+1})),this.props.pageIndexChange(a)):(this.setState(n=>({pageIndex:r=i})),this.props.pageIndexChange(r))}get pageIndex(){return this.props.gridCompatibility?(void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex)-1:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}pageSizeChange(i){var a;this.setState(r=>({pageSize:a=i})),this.props.pageSizeChange(a)}get className(){return this.props.gridCompatibility?(0,zi.G)({"dx-datagrid-pager":!0,["".concat(this.props.className)]:!!this.props.className}):this.props.className}get pagerProps(){return void 0!==this.__getterCache.pagerProps?this.__getterCache.pagerProps:this.__getterCache.pagerProps=(()=>(0,M.Z)({},(0,M.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),{className:this.className,pageIndex:this.pageIndex,pageIndexChange:i=>this.pageIndexChange(i),pageSizeChange:i=>this.pageSizeChange(i)}))()}get restAttributes(){var i=(0,M.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex});return(0,xe.Z)(i,HF)}componentWillUpdate(i,a,r){super.componentWillUpdate(),(this.props!==i||this.props.gridCompatibility!==i.gridCompatibility||this.props.className!==i.className||this.state.pageIndex!==a.pageIndex||this.props.pageIndex!==i.pageIndex||this.props.pageIndexChange!==i.pageIndexChange||this.props.pageSizeChange!==i.pageSizeChange)&&(this.__getterCache.pagerProps=void 0)}render(){return(t=>{var{pagerProps:e,restAttributes:i}=t;return(0,G.vs)((0,G.Iz)(2,SP,(0,M.Z)({contentTemplate:NF,pagerProps:e},i)))})({props:(0,M.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),pageIndexChange:this.pageIndexChange,pageIndex:this.pageIndex,pageSizeChange:this.pageSizeChange,className:this.className,pagerProps:this.pagerProps,restAttributes:this.restAttributes})}}return t.defaultProps=xP,t})();class rf extends hP{getProps(){var e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}get _propsInfo(){return{twoWay:[["pageSize","defaultPageSize","pageSizeChange"],["pageIndex","defaultPageIndex","pageIndexChange"]],allowNull:[],elements:[],templates:[],props:["defaultPageSize","pageSizeChange","defaultPageIndex","pageIndexChange","gridCompatibility","className","showInfo","infoText","lightModeEnabled","displayMode","maxPagesCount","pageCount","pagesCountText","visible","hasKnownLastPage","pagesNavigatorVisible","showPageSizes","pageSizes","rtlEnabled","showNavigationButtons","totalCount","label","onKeyDown","pageSize","pageIndex"]}}get _viewComponent(){return $F}}(0,J.Z)("dxPager",rf);const zF=rf;var nf=function(t){return 1+(parseInt(t.pageIndex())||0)},GF=ne.View.inherit({init(){var t=this.getController("data");t.changed.add(e=>{if(e&&e.repaintChangesOnly){var i=this._pager;i?i.option({pageIndex:nf(t),pageSize:t.pageSize(),pageCount:t.pageCount(),totalCount:t.totalCount(),hasKnownLastPage:t.hasKnownLastPage()}):this.render()}else(!e||"update"!==e.changeType&&"updateSelection"!==e.changeType&&"updateFocusedRow"!==e.changeType)&&(this._pager=null,this.render())})},_renderCore(){var t=this.element().addClass(this.addWidgetPrefix("pager")),e=this.option("pager")||{},i=this.getController("data"),a=this.getController("keyboardNavigation"),r={maxPagesCount:10,pageIndex:nf(i),pageCount:i.pageCount(),pageSize:i.pageSize(),showPageSizes:e.showPageSizeSelector,showInfo:e.showInfo,displayMode:e.displayMode,pagesNavigatorVisible:e.visible,showNavigationButtons:e.showNavigationButtons,label:e.label,pageSizes:this.getPageSizes(),totalCount:i.totalCount(),hasKnownLastPage:i.hasKnownLastPage(),pageIndexChanged(n){i.pageIndex()!==n-1&&i.pageIndex(n-1)},pageSizeChanged(n){i.pageSize(n)},onKeyDown:n=>a&&a.executeAction("onKeyDown",n),useLegacyKeyboardNavigation:this.option("useLegacyKeyboardNavigation"),useKeyboard:this.option("keyboardNavigation.enabled")};(0,v.$K)(e.infoText)&&(r.infoText=e.infoText),this._pager?this._pager.repaint():(0,Z.Ym)()?this._pager=this._createComponent(t,zF,r):t.addClass("dx-pager").html('<div class="dx-pages"><div class="dx-page"></div></div>')},getPager(){return this._pager},getPageSizes(){var t=this.getController("data"),e=this.option("pager"),i=e&&e.allowedPageSizes,a=t.pageSize();return(!(0,v.$K)(this._pageSizes)||!this._pageSizes.includes(a))&&(this._pageSizes=[],e&&(Array.isArray(i)?this._pageSizes=i:i&&a>1&&(this._pageSizes=[Math.floor(a/2),a,2*a]))),this._pageSizes},isVisible(){var t=this.getController("data"),e=this.option("pager"),i=e&&e.visible,a=this.option("scrolling");return"auto"===i&&(i=(!a||"virtual"!==a.mode&&"infinite"!==a.mode)&&(t.pageCount()>1||t.isLoaded()&&!t.hasKnownLastPage())),i},getHeight(){return this.getElementHeight()},optionChanged(t){var{name:e}=t,i="pager"===e,a="paging"===e,r="dataSource"===e,n="scrolling"===e,s=this.getController("data");if(i||a||n||r){if(t.handled=!0,s.skipProcessingPagingChange(t.fullName))return;(i||a)&&(this._pageSizes=null),r||(this._pager=null,this._invalidate(),(0,Z.Ym)()&&i&&this.component&&this.component.resize())}},dispose(){this._pager=null}});$.registerModule("pager",{defaultOptions:()=>({pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto",label:A.Z.format("dxPager-ariaLabel")}}),views:{pagerView:GF}});var YF=L(5328),sf="columns-separator-transparent",of="drag-header",Fl="drag-action",lf="tracker",df="drop-highlight",uf="dx-block-separator",hf="dx-header-row",Ge="dxDataGridResizingReordering",tr=function(t){return t.option("allowColumnResizing")||t.getController("columns").isColumnOptionUsed("allowResizing")},pf=function(t){return t.option("allowColumnReordering")||t.getController("columns").isColumnOptionUsed("allowReordering")};class _f extends ne.View{_renderSeparator(){}_renderCore(e){var i=super._renderCore(e);return this._isShown=!0,this._renderSeparator(),this.hide(),i}show(){this._isShown=!0}hide(){this._isShown=!1}height(e){var i=this.element();if(i){if(!(0,v.$K)(e))return(0,I.Cr)(i);(0,I.QQ)(i,e)}}width(e){var i=this.element();if(i){if(!(0,v.$K)(e))return(0,I.dz)(i);(0,I.cl)(i,e)}}}var kl=function(t){return"widget"!==t.option("columnResizingMode")},bi={views:{columnsSeparatorView:class tM extends _f{_renderSeparator(){super._renderSeparator(),this.element().addClass(this.addWidgetPrefix("columns-separator"))}_subscribeToCallback(){var i,e=this;e._positionChanged=function(a){(i=e.element())&&(i.css({top:a.top}),(0,I.QQ)(i,a.height))},e._tablePositionController.positionChanged.add(e._positionChanged)}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_init(){this._isTransparent=tr(this),this.isVisible()&&this._subscribeToCallback()}isVisible(){return this.option("showColumnHeaders")&&(pf(this)||tr(this))}optionChanged(e){"allowColumnResizing"===e.name&&(e.value?(this._init(),this._invalidate(),this.hide(!0)):(this._unsubscribeFromCallback(),this._isTransparent=tr(this),this.hide(!0))),super.optionChanged(e)}init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._init()}show(){var e=this.element();e&&!this._isShown&&(this._isTransparent?e.removeClass(this.addWidgetPrefix(sf)):e.show()),super.show()}hide(e){var i=this.element(),a=this.addWidgetPrefix(sf);i&&(this._isShown||e)&&(this._isTransparent?(i.addClass(a),i.css("left",""),i.show()):(i.hasClass(a)&&i.removeClass(a),i.hide())),super.hide()}moveByX(e){var i=this.element();i&&i.css("left",null===e?0:e-this._parentElement().offset().left)}changeCursor(e){e=(0,v.$K)(e)?e:"";var i=this.element();i&&i.css("cursor",e)}dispose(){this._unsubscribeFromCallback(),super.dispose()}},blockSeparatorView:class iM extends _f{init(){var e=this;super.init(),this.getController("data").loadingChanged.add(i=>{i||e.hide()})}_renderSeparator(){super._renderSeparator(),this.element().addClass(uf).html("&nbsp;")}hide(){var e=this._parentElement(),i=this.element();i&&this._isShown&&i.css("display","none"),e&&!e.children(".".concat(uf)).length&&e.prepend(this.element()),super.hide()}isVisible(){var e=this.option("groupPanel"),i=this.option("columnChooser");return e&&e.visible||i&&i.enabled}show(e){var i=this.element(),a=function(r){ce.Z.stop(i,!0),ce.Z.animate(i,{type:"slide",from:{width:0,display:r.display},to:r,duration:300,easing:"swing"})};if(i&&!this._isShown)switch(e){case"group":a({width:"50px",display:"inline-block"});break;case"columnChooser":a({width:"100%",display:"block"});break;default:i.css("display","")}super.show()}},draggingHeaderView:class aM extends ne.View{isDragging(){return this._isDragging}_getDraggingPanelByPos(e){var i;return(0,y.S6)(this._dragOptions.draggingPanels,(a,r)=>{if(r){var n=r.getBoundingRect();if(n&&(void 0===n.bottom||e.y<n.bottom)&&(void 0===n.top||e.y>n.top)&&(void 0===n.left||e.x>n.left)&&(void 0===n.right||e.x<n.right))return i=r,!1}}),i}_renderCore(){this.element().addClass("".concat(this.addWidgetPrefix(of)," ").concat(this.addWidgetPrefix("text-content")," ").concat("dx-widget")).hide()}_resetTargetColumnOptions(){var e=this._dropOptions;e.targetColumnIndex=-1,delete e.targetColumnElement,delete e.isLast,delete e.posX,delete e.posY}_getVisibleIndexObject(e,i){return(0,v.$K)(e)?{columnIndex:i,rowIndex:e}:i}dispose(){var e=this.element();this._dragOptions=null,e&&e.parent().find(".".concat(this.addWidgetPrefix(of))).remove()}isVisible(){var i=this.getController("columns").getCommonSettings();return this.option("showColumnHeaders")&&(pf(this)||i.allowGrouping||i.allowHiding)}init(){var e=this;super.init(),this._controller=this.getController("draggingHeader"),this._columnsResizerViewController=this.getController("columnsResizer"),this._isDragging=!1,this.getController("data").loadingChanged.add(i=>{var a=e.element();!i&&a&&a.hide()})}dragHeader(e){var{columnElement:i}=e,a=!!e.sourceColumn.type;this._isDragging=!0,this._dragOptions=e,this._dropOptions={sourceIndex:e.index,sourceColumnIndex:this._getVisibleIndexObject(e.rowIndex,e.columnIndex),sourceColumnElement:e.columnElement,sourceLocation:e.sourceLocation};var r=Y.Z.getDocument();this._onSelectStart=r.onselectstart,r.onselectstart=function(){return!1},this._controller.drag(this._dropOptions),this.element().css({textAlign:i&&i.css("textAlign"),height:i&&(a&&i.get(0).clientHeight||(0,I.Cr)(i)),width:i&&(a&&i.get(0).clientWidth||(0,I.dz)(i)),whiteSpace:i&&i.css("whiteSpace")}).addClass(this.addWidgetPrefix(Fl)).toggleClass("dx-drag-command-cell",a).text(a?"":e.sourceColumn.caption),this.element().appendTo(YF.Z.getSwatchContainer(i))}moveHeader(e){var i=e.event,{that:a}=i.data,r=(0,D.a0)(i),n=!!a._columnsResizerViewController&&a._columnsResizerViewController.isResizing(),s=a._dragOptions;if(a._isDragging&&!n){var o=a.element(),l=Math.abs(r.x-s.columnElement.offset().left-s.deltaX),d=Math.abs(r.y-s.columnElement.offset().top-s.deltaY);(o.is(":visible")||l>5||d>5)&&(o.show(),o.css({left:r.x-s.deltaX,top:r.y-s.deltaY}),a.dockHeader(r)),i.preventDefault()}}dockHeader(e){var i=this._getDraggingPanelByPos(e),a=this._controller,r=this._dropOptions,n=this._dragOptions;if(i){var s=this.option("rtlEnabled"),o="columnChooser"===i.getName(),l=o?"y":"x",d=i.getName(),u="headers"===d?n.rowIndex:void 0,{sourceColumn:h}=n,c=i.getColumnElements(u,h?.ownerBand)||[],_=n.pointsByTarget=n.pointsByTarget||{},g="columnChooser"===d?[]:_[d]||a._generatePointsByColumns((0,C.l)({},n,{targetDraggingPanel:i,columns:i.getColumns(u),columnElements:c,isVerticalOrientation:o,startColumnIndex:"headers"===d&&(0,p.Z)(c[0]).index()}));if(_[d]=g,r.targetLocation=d,g.length>0)for(var f=0;f<g.length;f++){var m=g[f+1]&&(g[f][l]+g[f+1][l])/2;if(void 0===m||(s&&"x"===l?e[l]>m:e[l]<m)){r.targetColumnIndex=this._getVisibleIndexObject(u,g[f].columnIndex),c[f]?(r.targetColumnElement=c.eq(f),r.isLast=!1):(r.targetColumnElement=c.last(),r.isLast=!0),r.posX=g[f].x,r.posY=g[f].y,a.dock(r);break}}else this._resetTargetColumnOptions(),a.dock(r)}}dropHeader(e){var i=e.event,{that:a}=i.data,r=a._controller;a.element().hide(),r&&a._isDragging&&r.drop(a._dropOptions),a.element().appendTo(a._parentElement()),a._dragOptions=null,a._dropOptions=null,a._isDragging=!1,Y.Z.getDocument().onselectstart=a._onSelectStart||null}},trackerView:class eM extends ne.View{_renderCore(){var e=super._renderCore();return this.element().addClass(this.addWidgetPrefix(lf)),this.hide(),e}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_subscribeToCallback(){var e=this;e._positionChanged=function(i){var a=e.element();a&&a.hasClass(e.addWidgetPrefix(lf))&&(a.css({top:i.top}),(0,I.QQ)(a,i.height))},this._tablePositionController.positionChanged.add(e._positionChanged)}optionChanged(e){"allowColumnResizing"===e.name&&(this._unsubscribeFromCallback(),e.value&&(this._subscribeToCallback(),this._invalidate())),super.optionChanged(e)}init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._subscribeToCallback()}isVisible(){return tr(this)}show(){this.element().show()}hide(){this.element()&&this.element().hide()}setHeight(e){(0,I.QQ)(this.element(),e)}dispose(){this._unsubscribeFromCallback(),super.dispose()}}},controllers:{draggingHeader:class sM extends ne.ViewController{_generatePointsByColumns(e){var i=this;return this.isCustomGroupColumnPosition=this.checkIsCustomGroupColumnPosition(e),V.getPointsByColumns(e.columnElements,a=>i._pointCreated(a,e.columns,e.targetDraggingPanel.getName(),e.sourceColumn),e.isVerticalOrientation,e.startColumnIndex)}checkIsCustomGroupColumnPosition(e){for(var i=!0,a=0;a<e.columns.length;a+=1){var r=e.columns[a];if("expand"===r.command&&!i)return!0;r.command||(i=!1)}return!1}_pointCreated(e,i,a,r){var n,s=i[e.columnIndex],o=i[e.columnIndex-1],l="expand"===o?.command,d="expand"===s?.command&&"expand"!==o?.command,u=r&&!r.allowReordering,h=!s?.allowReordering&&!o?.allowReordering;switch(a){case"columnChooser":return!0;case"headers":if(!d)return l||u||h;if(this.isCustomGroupColumnPosition)return!1;for(;"expand"===(null===(n=i[e.columnIndex])||void 0===n?void 0:n.command);)e.columnIndex+=1;return!1;default:return 0===i.length}}_subscribeToEvents(e,i){var a=this;(0,y.S6)(i,(r,n)=>{if(n)for(var s,o=n.getRowCount?n.getRowCount():1,l=n.getName(),d=function(c,_){if(_){var g=(0,p.Z)(_),f=s[c];f&&n.allowDragging(f)&&(g.addClass(a.addWidgetPrefix(Fl)),S.Z.on(g,(0,D.V4)(Re.BL,Ge),a.createAction(m=>{var x=m.event,w=(0,D.a0)(x);e.dragHeader({deltaX:w.x-(0,p.Z)(x.currentTarget).offset().left,deltaY:w.y-(0,p.Z)(x.currentTarget).offset().top,sourceColumn:f,index:f.index,columnIndex:c,columnElement:g,sourceLocation:l,draggingPanels:i,rowIndex:a._columnsController.getRowIndex(f.index,!0)})})),S.Z.on(g,(0,D.V4)(Re.pB,Ge),{that:e},a.createAction(e.moveHeader)),S.Z.on(g,(0,D.V4)(Re.ut,Ge),{that:e},a.createAction(e.dropHeader)))}},u=0;u<o;u++){var h=n.getColumnElements(u)||[];h.length&&(s=n.getColumns(u)||[],(0,y.S6)(h,d))}})}_unsubscribeFromEvents(e,i){var a=this;(0,y.S6)(i,(r,n)=>{if(n){var s=n.getColumnElements()||[];(0,y.S6)(s,(o,l)=>{var d=(0,p.Z)(l);S.Z.off(d,(0,D.V4)(Re.BL,Ge)),S.Z.off(d,(0,D.V4)(Re.pB,Ge)),S.Z.off(d,(0,D.V4)(Re.ut,Ge)),d.removeClass(a.addWidgetPrefix(Fl))})}})}_getSeparator(e){return"headers"===e?this._columnsSeparatorView:this._blockSeparatorView}hideSeparators(e){var i=this._blockSeparatorView,a=this._columnsSeparatorView;this._animationColumnIndex=void 0,i&&i.hide(),"block"!==e&&a&&a.hide()}init(){var e=this;super.init(),e._columnsController=e.getController("columns"),e._columnHeadersView=e.getView("columnHeadersView"),e._columnsSeparatorView=e.getView("columnsSeparatorView"),e._draggingHeaderView=e.getView("draggingHeaderView"),e._rowsView=e.getView("rowsView"),e._blockSeparatorView=e.getView("blockSeparatorView"),e._headerPanelView=e.getView("headerPanel"),e._columnChooserView=e.getView("columnChooserView");var i=function(){if(e._draggingHeaderView){var a=[e._columnChooserView,e._columnHeadersView,e._headerPanelView];e._unsubscribeFromEvents(e._draggingHeaderView,a),e._subscribeToEvents(e._draggingHeaderView,a)}};e._columnHeadersView.renderCompleted.add(i),e._headerPanelView&&e._headerPanelView.renderCompleted.add(i),e._columnChooserView&&e._columnChooserView.renderCompleted.add(i)}allowDrop(e){return this._columnsController.allowMoveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}drag(e){var{sourceIndex:i}=e,{sourceLocation:a}=e,{sourceColumnElement:r}=e,n=this._columnHeadersView,s=this._rowsView;r&&(r.css({opacity:.5}),"headers"===a&&(n&&n.setRowsOpacity(i,.5),s&&s.setRowsOpacity(i,.5)))}dock(e){var i=this,a=(0,v.Kn)(e.targetColumnIndex)?e.targetColumnIndex.columnIndex:e.targetColumnIndex,{sourceLocation:r}=e,{targetLocation:n}=e,s=i._getSeparator(n),o=a>=0;i._columnHeadersView.element().find(".".concat(hf)).toggleClass(i.addWidgetPrefix(df),"headers"!==r&&"headers"===n&&!o),s&&(i.allowDrop(e)&&o?"group"===n||"columnChooser"===n?i._animationColumnIndex!==a&&(i.hideSeparators(),s.element()[e.isLast?"insertAfter":"insertBefore"](e.targetColumnElement),i._animationColumnIndex=a,s.show(n)):(i.hideSeparators("block"),i.getController("tablePosition").update(e.posY),s.moveByX(e.posX-s.width()),s.show()):i.hideSeparators())}drop(e){var{sourceColumnElement:i}=e;if(i&&(i.css({opacity:""}),this._columnHeadersView.setRowsOpacity(e.sourceIndex,""),this._rowsView.setRowsOpacity(e.sourceIndex,""),this._columnHeadersView.element().find(".".concat(hf)).removeClass(this.addWidgetPrefix(df))),this.allowDrop(e)){var a=this._getSeparator(e.targetLocation);a&&a.hide(),this._columnsController.moveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}}dispose(){this._draggingHeaderView&&this._unsubscribeFromEvents(this._draggingHeaderView,[this._columnChooserView,this._columnHeadersView,this._headerPanelView])}},tablePosition:class nM extends ne.ViewController{constructor(e){super(e),this.positionChanged=(0,ge.Z)()}update(e){var i={},a=this._columnHeadersView.element(),r=a&&a.offset(),n=r&&r.top||0,s=(0,v.$K)(e)?Math.abs(e-n):0,o=this._columnHeadersView?this._columnHeadersView.getHeight():0,l=this._rowsView.getScrollbarWidth(!0),d=this._rowsView?this._rowsView.height()-l:0,u=this.component.getController("columnsResizer"),h=this.component.getView("draggingHeaderView");i.height=o,(u.isResizing()||h.isDragging())&&(i.height+=d-s),null!==e&&a&&a.length&&(i.top=a[0].offsetTop+s),this.positionChanged.fire(i)}init(){var e=this;super.init(),e._columnHeadersView=this.getView("columnHeadersView"),e._rowsView=this.getView("rowsView"),e._pagerView=this.getView("pagerView"),e._rowsView.resizeCompleted.add(()=>{if(e.option("allowColumnResizing")){var i=e.getController("columnsResizer")._targetPoint;e.update(i?i.y:null)}})}},columnsResizer:class rM extends ne.ViewController{_isHeadersRowArea(e){if(this._columnHeadersView){var i=this._columnHeadersView.element();if(i){var a=i.offset().top,r=this._columnHeadersView.getHeadersRowHeight();return e>=a&&e<=a+r}}return!1}_isRtlParentStyle(){var e;return this.option("rtlEnabled")&&"rtl"===(null===(e=this._$parentContainer)||void 0===e?void 0:e.parent().css("direction"))}_pointCreated(e,i,a){var r=kl(this),n=this.option("rtlEnabled"),s=this._isRtlParentStyle(),o=r||!n||s?1:0;if(e.index>=o&&e.index<i+(r||n&&!s?0:1)){e.columnIndex-=o;var l=a[e.columnIndex]||{};return!(r?l.allowResizing&&(a[e.columnIndex+1]||{}).allowResizing:l.allowResizing)}return!0}_getTargetPoint(e,i,a){if(e)for(var r=0;r<e.length;r++)if((e[r].x!==e[0].x||!e[r+1]||e[r].x!==e[r+1].x)&&e[r].x-a<=i&&i<=e[r].x+a)return e[r];return null}_moveSeparator(e){var i,a=e.event,r=a.data,n=r._columnsSeparatorView.width(),s=kl(r),o=n/2,l=r._$parentContainer.offset(),d=l.left,u=(0,D.a0)(a),h=r.option("rtlEnabled"),c=this._isRtlParentStyle(),_=null===(i=r._draggingHeaderView)||void 0===i?void 0:i.isDragging();if(r._isResizing&&r._resizingInfo){if((d<=u.x||!s&&c)&&(!s||u.x<=d+(0,I.dz)(r._$parentContainer))&&r._updateColumnsWidthIfNeeded(u.x)){var g=r._columnHeadersView.getColumnElements().eq(r._resizingInfo.currentColumnIndex),f=g[0];if(f){var m=f.getBoundingClientRect().width;r._columnsSeparatorView.moveByX(g.offset().left+((s||c)&&h?0:m)),r._tablePositionController.update(r._targetPoint.y),a.preventDefault()}}}else _||(r._isHeadersRowArea(u.y)?(r._previousParentOffset&&(r._previousParentOffset.left!==l.left||r._previousParentOffset.top!==l.top)&&r.pointsByColumns(null),r._targetPoint=r._getTargetPoint(r.pointsByColumns(),u.x,n),r._previousParentOffset=l,r._isReadyResizing=!1,r._targetPoint?(r._columnsSeparatorView.changeCursor("col-resize"),r._columnsSeparatorView.moveByX(r._targetPoint.x-o),r._tablePositionController.update(r._targetPoint.y),r._isReadyResizing=!0,a.preventDefault()):(r._columnsSeparatorView.changeCursor(),r._columnsSeparatorView.moveByX(null))):(r.pointsByColumns(null),r._isReadyResizing=!1,r._columnsSeparatorView.changeCursor(),r._columnsSeparatorView.moveByX(null)))}_endResizing(e){var a=e.event.data;a._isResizing&&(a.pointsByColumns(null),a._resizingInfo=null,a._columnsSeparatorView.hide(),a._columnsSeparatorView.changeCursor(),a._trackerView.hide(),a._isReadyResizing=!1,a._isResizing=!1)}_getNextColumnIndex(e){return e+1}_setupResizingInfo(e){var i=this._targetPoint.columnIndex,a=this._getNextColumnIndex(i),r=this._columnHeadersView.getHeaderElement(i),n=this._columnHeadersView.getHeaderElement(a);this._resizingInfo={startPosX:e,currentColumnIndex:i,currentColumnWidth:r&&r.length>0?(0,se.l)(r[0]).width:0,nextColumnIndex:a,nextColumnWidth:n&&n.length>0?(0,se.l)(n[0]).width:0}}_startResizing(e){var i=e.event,a=i.data,r=(0,D.a0)(i);if((0,D.z6)(i)&&(a._isHeadersRowArea(r.y)?(a._targetPoint=a._getTargetPoint(a.pointsByColumns(),r.x,10),a._targetPoint&&(a._columnsSeparatorView.moveByX(a._targetPoint.x-a._columnsSeparatorView.width()/2),a._isReadyResizing=!0)):a._isReadyResizing=!1),a._isReadyResizing){a._setupResizingInfo(r.x),a._isResizing=!0,a._tablePositionController.update(a._targetPoint.y),a._columnsSeparatorView.show(),a._trackerView.show();var n=a.component.getScrollable();n&&a._isRtlParentStyle()&&(a._scrollRight=(0,I.dz)(n.$content())-(0,I.dz)(n.container())-n.scrollLeft()),i.preventDefault(),i.stopPropagation()}this.isResizing()&&this.getController("editorFactory").loseFocus()}_generatePointsByColumns(){var e=this,i=e._columnsController?e._columnsController.getVisibleColumns():[],a=e._columnHeadersView.getColumnElements(),r=[];a&&a.length>0&&(r=V.getPointsByColumns(a,n=>e._pointCreated(n,a.length,i))),e._pointsByColumns=r}_unsubscribeFromEvents(){this._moveSeparatorHandler&&S.Z.off(Y.Z.getDocument(),(0,D.V4)(re.Z.move,Ge),this._moveSeparatorHandler),this._startResizingHandler&&S.Z.off(this._$parentContainer,(0,D.V4)(re.Z.down,Ge),this._startResizingHandler),this._endResizingHandler&&(S.Z.off(this._columnsSeparatorView.element(),(0,D.V4)(re.Z.up,Ge),this._endResizingHandler),S.Z.off(Y.Z.getDocument(),(0,D.V4)(re.Z.up,Ge),this._endResizingHandler))}_subscribeToEvents(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing),S.Z.on(Y.Z.getDocument(),(0,D.V4)(re.Z.move,Ge),this,this._moveSeparatorHandler),S.Z.on(this._$parentContainer,(0,D.V4)(re.Z.down,Ge),this,this._startResizingHandler),S.Z.on(this._columnsSeparatorView.element(),(0,D.V4)(re.Z.up,Ge),this,this._endResizingHandler),S.Z.on(Y.Z.getDocument(),(0,D.V4)(re.Z.up,Ge),this,this._endResizingHandler)}_updateColumnsWidthIfNeeded(e){var i,a,r=this._rowsView.contentWidth(),n=this._resizingInfo,s=this._columnsController,o=s.getVisibleColumns(),l=this._columnsSeparatorView.width(),d=kl(this),u=d&&this.option("adaptColumnWidthByRatio")&&!this.option("columnAutoWidth"),h=this.option("rtlEnabled"),c=this._isRtlParentStyle(),_=o[n.currentColumnIndex],g=o[n.nextColumnIndex];function f(k){return(0,v.HD)(k)&&k.endsWith("%")}function m(k,U,j,de){if(k){var ae=k.width;ae&&(de=f(ae)),de?(s.columnOption(k.index,"visibleWidth",U),s.columnOption(k.index,"width","".concat((U/j*100).toFixed(3),"%"))):(s.columnOption(k.index,"visibleWidth",null),s.columnOption(k.index,"width",U))}}i=e-n.startPosX,(d||c)&&h&&(i=-i);var k,U,j,de,ae,pe,De,{cellWidth:x,nextCellWidth:w}=(De={},(ae=n.currentColumnWidth+(k=i))>=(pe=_&&_.minWidth||l)?De.cellWidth=ae:(De.cellWidth=pe,de=!0),d&&((j=n.nextColumnWidth-k)>=(U=g&&g.minWidth||l)?De.nextCellWidth=de?n.nextColumnWidth-(k+pe-ae):j:(De.nextCellWidth=U,De.cellWidth=n.currentColumnWidth+(k-U+j))),De);if(a=_.width!==x){if(s.beginUpdate(),x=Math.floor(x),r=function(k,U){var j=U.every(ae=>ae.width);if(j){var de=U.reduce((ae,pe)=>(f(pe.width)&&(ae+=parseFloat(pe.width)),ae),0);de>100&&(k=k/de*100)}return k}(r,o),m(_,x,r,u),d)m(g,w=Math.floor(w),r,u);else{var T=this._columnHeadersView.getColumnWidths();T[n.currentColumnIndex]=x;var O=T.reduce((k,U)=>k+U,0)>this._rowsView.contentWidth();if(!O){var P=V.getLastResizableColumnIndex(o);P>=0&&s.columnOption(o[P].index,"visibleWidth","auto")}for(var F=0;F<T.length;F++)o[F]&&o[F]!==_&&void 0===o[F].width&&s.columnOption(o[F].index,"width",T[F])}if(s.endUpdate(),!d){this.component.updateDimensions();var N=this.component.getScrollable();if(N&&c){var H=(0,I.dz)(N.$content())-(0,I.dz)(N.container())-this._scrollRight;N.scrollTo({left:H})}}}return a}_subscribeToCallback(e,i){e.add(i),this._subscribesToCallbacks.push({callback:e,handler:i})}_unsubscribeFromCallbacks(){for(var e=0;e<this._subscribesToCallbacks.length;e++){var i=this._subscribesToCallbacks[e];i.callback.remove(i.handler)}this._subscribesToCallbacks=[]}_unsubscribes(){this._unsubscribeFromEvents(),this._unsubscribeFromCallbacks()}_init(){var e=this,i=function(){e._isResizing||e.pointsByColumns(null)},a=function(s){e._scrollLeft!==s.left&&(e._scrollLeft=s.left,e.pointsByColumns(null))};e._columnsSeparatorView=e.getView("columnsSeparatorView"),e._columnHeadersView=e.getView("columnHeadersView"),e._trackerView=e.getView("trackerView"),e._rowsView=e.getView("rowsView"),e._columnsController=e.getController("columns"),e._tablePositionController=e.getController("tablePosition"),e._$parentContainer=e.component.$element(),e._draggingHeaderView=e.component.getView("draggingHeaderView"),e._subscribeToCallback(e._columnHeadersView.renderCompleted,i),e._subscribeToCallback(e._columnHeadersView.resizeCompleted,i),e._subscribeToCallback(e._columnsSeparatorView.renderCompleted,()=>{e._unsubscribeFromEvents(),e._subscribeToEvents()}),e._subscribeToCallback(e._rowsView.renderCompleted,()=>{e._rowsView.scrollChanged.remove(a),e._rowsView.scrollChanged.add(a)});var r=0!==e._rowsView.getScrollbarWidth(),n=0;e._subscribeToCallback(e.getController("tablePosition").positionChanged,s=>{if(e._isResizing&&!e._rowsView.isResizing){var o=0!==e._rowsView.getScrollbarWidth();r!==o||n&&n!==s.height?(r=o,n=s.height,e.component.updateDimensions()):e._rowsView.updateFreeSpaceRowHeight()}n=s.height})}optionChanged(e){super.optionChanged(e),"allowColumnResizing"===e.name&&(e.value?(this._init(),this._subscribeToEvents()):this._unsubscribes())}isResizing(){return this._isResizing}init(){this._subscribesToCallbacks=[],tr(this)&&this._init()}pointsByColumns(e){if(void 0===e)return this._pointsByColumns||this._generatePointsByColumns(),this._pointsByColumns;this._pointsByColumns=e}dispose(){this._unsubscribes(),super.dispose()}}},extenders:{views:{rowsView:{_needUpdateRowHeight(t){var e=this.option("wordWrapEnabled"),a=this.getController("columnsResizer").isResizing();return this.callBase.apply(this,arguments)||t>0&&e&&a}}},controllers:{editorFactory:{renderFocusOverlay(){if(!this.getController("columnsResizer").isResizing())return this.callBase.apply(this,arguments)}}}}};$.registerModule("columnsResizingReordering",bi);var Nl=L(2346),oM=(t,e)=>t.length===e.length&&!Object.keys(t).some(i=>t[i]!==e[i]),lM=(t,e)=>(0,E.bY)(t,e,{maxDepth:4}),uM={compareType:"reference"},vf=function(t){var{compareType:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uM,i=null;return function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];if(!i){var s=t(...r);return i=((t,e,i,a)=>{var r=t,n=e;return function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return a(o,r)||(r=o,n=i(...r)),n}})(r,s,t,"reference"===e?oM:lM),s}return i(...r)}},Zl="rowsview",gf="dx-data-row",ff="dx-freespace-row",mf="dx-master-detail-cell",Mn="dx-command-expand",Cf="dx-command-select",Sf="[class^=dx-command]",kn="dx-cell-focus-disabled",xf="dx-state-focused",bf="dx-focused",$l="delete",Nn='\n  input:not([type="hidden"]):not([disabled]),\n  textarea:not([disabled]),\n  a:not([disabled]),\n  select:not([disabled]),\n  button:not([disabled]),\n  [tabindex]:not([disabled]),\n  .dx-checkbox:not([disabled])\n',wf="".concat(Nn,", .dx-dropdowneditor-icon"),If="columnHeadersView",xM=["shift","control","alt"];function ir(t){return t&&t.hasClass("dx-group-row")}function zl(t){return t&&t.hasClass("dx-master-detail-row")}function ar(t){return t&&t.hasClass(gf)}function Af(t,e){return!t._isRowEditMode()&&e&&!e.hasClass(Cf)&&e.hasClass(cn)}function et(t){return(0,v.$K)(t)&&t.length>0}function Wl(){return"desktop"!==K.Z.current().deviceType}function Df(t){return!!t.parent(".".concat("dx-header-row")).length}var OM={defaultOptions:()=>({useLegacyKeyboardNavigation:!1,keyboardNavigation:{enabled:!0,enterKeyAction:"startEdit",enterKeyDirection:"none",editOnKeyPress:!1}}),controllers:{keyboardNavigation:class DM extends ne.ViewController{init(){var e,i;this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._editingController=this.getController("editing"),this._headerPanel=this.getView("headerPanel"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._editorFactory=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._memoFireFocusedCellChanged=vf(this._memoFireFocusedCellChanged.bind(this),{compareType:"value"}),this._memoFireFocusedRowChanged=vf(this._memoFireFocusedRowChanged.bind(this),{compareType:"value"}),this.focusedHandlerWithContext=this.focusedHandlerWithContext||this.focusedHandler.bind(this),this.renderCompletedWithContext=this.renderCompletedWithContext||this.renderCompleted.bind(this),this.rowsViewFocusHandlerContext=this.rowsViewFocusHandlerContext||this.rowsViewFocusHandler.bind(this),this._updateFocusTimeout=null,this._fastEditingStarted=!1,this._focusedCellPosition={},this._canceledCellPosition=null,this.isKeyboardEnabled()?(function Rm(){S.Z.on(Y.Z.getDocument(),"visibilitychange",vd)}(),null===(e=this._editorFactory)||void 0===e||e.focused.add(this.focusedHandlerWithContext),this.createAction("onKeyDown")):(gd(),null===(i=this._editorFactory)||void 0===i||i.focused.remove(this.focusedHandlerWithContext)),this.initViewHandlers(),this.initDocumentHandlers()}focusedHandler(e){this.setupFocusedView(),this._isNeedScroll&&e.is(":visible")&&this._focusedView&&this._focusedView.getScrollable&&(this._focusedView._scrollToElement(e),this._isNeedScroll=!1)}rowsViewFocusHandler(e){var i,a=(0,p.Z)(e.target),r=(0,p.Z)(e.relatedTarget).closest(this._rowsView.element()).length,n=a.is("a");if(e.relatedTarget&&n&&!r&&this._isEventInCurrentGrid(e)){var s=this._getFocusedCell();s=et(s)?s:this._rowsView.getCellElements(0).filter("[tabindex]").eq(0),a.closest(s).length||(e.preventDefault(),S.Z.trigger(s,"focus"))}var o=a.is("td"),l=(null!==(i=this.option("focusedRowIndex"))&&void 0!==i?i:-1)<0;o&&l&&this._updateFocusedCellPosition(a)}subscribeToRowsViewFocusEvent(){var e,i=null===(e=this._rowsView)||void 0===e?void 0:e.element();S.Z.on(i,"focusin",this.rowsViewFocusHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var e,i=null===(e=this._rowsView)||void 0===e?void 0:e.element();S.Z.off(i,"focusin",this.rowsViewFocusHandlerContext)}renderCompleted(e){var i=this._rowsView.element(),a=!e||"refresh"===e.changeType,r=this._focusedView&&this._focusedView.name===this._rowsView.name,s=e&&("append"===e.changeType||"prepend"===e.changeType),l=(0,p.Z)(Y.Z.getRootNode(i.get&&i.get(0))).find(":focus"),d=!l.length||l.closest(i).length;this.unsubscribeFromRowsViewFocusEvent(),this.subscribeToRowsViewFocusEvent(),this.initPointerEventHandler(),this.initKeyDownHandler(),this._setRowsViewAttributes(),r&&d&&(this._isNeedFocus?!s:this._isHiddenFocus&&a&&!e?.virtualColumnsScrolling)&&this._updateFocus(!0)}initViewHandlers(){var e,i;this.unsubscribeFromRowsViewFocusEvent(),this.unsubscribeFromPointerEvent(),this.unsubscribeFromKeyDownEvent(),null===(i=null===(e=this._rowsView)||void 0===e?void 0:e.renderCompleted)||void 0===i||i.remove(this.renderCompletedWithContext),this.isKeyboardEnabled()&&this._rowsView.renderCompleted.add(this.renderCompletedWithContext)}initDocumentHandlers(){var e=Y.Z.getDocument();this._documentClickHandler=this._documentClickHandler||this.createAction(i=>{var a=(0,p.Z)(i.event.target),r=this._isEventInCurrentGrid(i.event)&&a.closest(".".concat(this.addWidgetPrefix(Zl))).length,n=a.closest(".".concat("dx-dropdowneditor-overlay")).length,s=this.getController("columnsResizer"),o=!!s&&s.isResizing();r||n||o||(!(this._focusedView&&a.parents().filter(this._focusedView.element()).length>0)&&this._resetFocusedCell(!0),this._resetFocusedView())}),S.Z.off(e,(0,D.V4)(re.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),this.isKeyboardEnabled()&&S.Z.on(e,(0,D.V4)(re.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler)}_setRowsViewAttributes(){var e=this._getRowsViewElement();!this._dataController.getVisibleRows().length&&this._applyTabIndexToElement(e)}unsubscribeFromPointerEvent(){var e=Wl()?ie.u:re.Z.down,i=this._getRowsViewElement();this._pointerEventAction&&S.Z.off(i,(0,D.V4)(e,"dxDataGridKeyboardNavigation"),this._pointerEventAction)}subscribeToPointerEvent(){var e=Wl()?ie.u:re.Z.down,i=this._getRowsViewElement(),a=".".concat(Yt," > td, .").concat(Yt);S.Z.on(i,(0,D.V4)(e,"dxDataGridKeyboardNavigation"),a,this._pointerEventAction)}initPointerEventHandler(){this._pointerEventAction=this._pointerEventAction||this.createAction(this._pointerEventHandler),this.unsubscribeFromPointerEvent(),this.subscribeToPointerEvent()}unsubscribeFromKeyDownEvent(){Nl.dG.off(this._keyDownListener)}subscribeToKeyDownEvent(){var e=this._getRowsViewElement();this._keyDownListener=Nl.dG.on(e,null,i=>this._keyDownHandler(i))}initKeyDownHandler(){this._keyDownListener&&this.unsubscribeFromKeyDownEvent(),this.subscribeToKeyDownEvent()}dispose(){super.dispose(),this._resetFocusedView(),Nl.dG.off(this._keyDownListener),S.Z.off(Y.Z.getDocument(),(0,D.V4)(re.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),clearTimeout(this._updateFocusTimeout),gd()}optionChanged(e){switch(e.name){case"keyboardNavigation":case"useLegacyKeyboardNavigation":this.init(),e.handled=!0;break;default:super.optionChanged(e)}}isRowFocusType(){return"row"===this.focusType}isCellFocusType(){return"cell"===this.focusType}setRowFocusType(){this.option("focusedRowEnabled")&&(this.focusType="row")}setCellFocusType(){this.focusType="cell"}_keyDownHandler(e){var i,a=!0;this._isNeedFocus=!0,this._isNeedScroll=!0;var r=this._processOnKeyDown(e),n=null===(i=this._editingController)||void 0===i?void 0:i.isEditing(),{originalEvent:s}=e;if(s.isDefaultPrevented())return this._isNeedFocus=!1,void(this._isNeedScroll=!1);if(!xM.includes(e.keyName)&&this._updateFocusedCellPositionByTarget(s.target),!r){switch(e.keyName){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(e,n),r=!0;break;case"upArrow":case"downArrow":e.ctrl?qn("rowsView",this,s):this._upDownKeysHandler(e,n),r=!0;break;case"pageUp":case"pageDown":this._pageUpDownKeyHandler(e),r=!0;break;case"space":r=this._spaceKeyHandler(e,n);break;case"A":(0,D.j1)(e.originalEvent)?(this._ctrlAKeyHandler(e,n),r=!0):r=this._beginFastEditing(e.originalEvent);break;case"tab":this._tabKeyHandler(e,n),r=!0;break;case"enter":this._enterKeyHandler(e,n),r=!0;break;case"escape":this._escapeKeyHandler(e,n),r=!0;break;case"F":(0,D.j1)(e.originalEvent)?(this._ctrlFKeyHandler(e),r=!0):r=this._beginFastEditing(e.originalEvent);break;case"F2":this._f2KeyHandler(),r=!0;break;case"del":case"backspace":this._isFastEditingAllowed()&&!this._isFastEditingStarted()&&(r=this._beginFastEditing(s,!0))}!r&&!this._beginFastEditing(s)&&(this._isNeedFocus=!1,this._isNeedScroll=!1,a=!1),a&&s.stopPropagation()}}_processOnKeyDown(e){var{originalEvent:i}=e,a={handled:!1,event:i};return this.executeAction("onKeyDown",a),e.ctrl=i.ctrlKey,e.alt=i.altKey,e.shift=i.shiftKey,!!a.handled}_closeEditCell(){setTimeout(()=>{this._editingController.closeEditCell()})}_leftRightKeysHandler(e,i){var a=this.getVisibleRowIndex(),r=e.originalEvent,n=this._focusedView&&this._focusedView.getRow(a),s=this._getDirectionCodeByKey(e.keyName),o=this._isFastEditingStarted();if((!i||o)&&ar(n)){this.setCellFocusType(),o&&this._closeEditCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(s);var d=this._getNextCell(s);et(d)&&this._arrowKeysHandlerFocusCell(r,d,s),r&&r.preventDefault()}}_upDownKeysHandler(e,i){var a,r,n=this.getVisibleRowIndex(),s=this._focusedView&&this._focusedView.getRow(n),o=e.originalEvent,l="upArrow"===e.keyName,d=this._dataController.dataSource(),u=null===(r=null===(a=this._editingController)||void 0===a?void 0:a.isEditRowByIndex)||void 0===r?void 0:r.call(a,n),h=this._isFastEditingStarted();if((!u||!i||h)&&s&&!zl(s)){if(h&&this._closeEditCell(),!this._navigateNextCell(o,e.keyName)&&this._isVirtualRowRender()&&l&&d&&!d.isLoading()){var _=(0,I.zp)(s);this._scrollBy(0,-_,this._focusedCellPosition.rowIndex-1,o)}o&&o.preventDefault()}}_pageUpDownKeyHandler(e){var i=this._dataController.pageIndex(),a=this._dataController.pageCount(),r=this.option("paging.enabled"),n="pageUp"===e.keyName,s=n?-1:1,o=this._rowsView.getScrollable();r&&!this._isVirtualScrolling()?(n?i>0:i<a-1)&&!this._isVirtualScrolling()&&(this._dataController.pageIndex(i+s),e.originalEvent.preventDefault()):o&&(0,I.Cr)(o.container())<(0,I.Cr)(o.$content())&&(this._scrollBy(0,(0,I.Cr)(o.container())*s),e.originalEvent.preventDefault())}_spaceKeyHandler(e,i){var a=this.getVisibleRowIndex(),r=(0,p.Z)(e.originalEvent&&e.originalEvent.target);if(this.option("selection")&&"none"!==this.option("selection").mode&&!i){var n="row"===this._getElementType(r)&&this.isRowFocusType()&&ar(r);return r.hasClass(Cf)&&"onClick"===this.option("selection.showCheckBoxesMode")&&this._selectionController.startSelectionWithCheckboxes(),!!(n||r.parent().hasClass(gf)||r.hasClass(this.addWidgetPrefix(Zl)))&&(this._selectionController.changeItemSelection(a,{shift:e.shift,control:e.ctrl}),e.originalEvent.preventDefault(),!0)}return this._beginFastEditing(e.originalEvent)}_ctrlAKeyHandler(e,i){!i&&!e.alt&&"multiple"===this.option("selection.mode")&&this.option("selection.allowSelectAll")&&(this._selectionController.selectAll(),e.originalEvent.preventDefault())}_tabKeyHandler(e,i){var a=this.option("editing"),r=e.shift?"previous":"next",s=!((0,v.$K)(this._focusedCellPosition)&&!(0,v.Qr)(this._focusedCellPosition))||!e.shift&&this._isLastValidCell(this._focusedCellPosition)||e.shift&&this._isFirstValidCell(this._focusedCellPosition),o=e.originalEvent.target,l=this._focusedView&&this._focusedView.element();if(!this._handleTabKeyOnMasterDetailCell(o,r)){if((0,p.Z)(l).addClass(xf),a&&o&&!s)if((0,p.Z)(o).hasClass(this.addWidgetPrefix(Zl))&&this._resetFocusedCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(r),i){if(!this._editingCellTabHandler(e,r))return}else this._targetCellTabHandler(e,r)&&(s=!0);s?(this._editorFactory.loseFocus(),this._editingController.isEditing()&&!this._isRowEditMode()&&(this._resetFocusedCell(!0),this._resetFocusedView(),this._closeEditCell())):e.originalEvent.preventDefault()}}_getMaxHorizontalOffset(){var e=this.component.getScrollable();return e?e.scrollWidth()-(0,I.dz)(this._rowsView.element()):0}_isColumnRendered(e){var i=this._columnsController.getVisibleColumns(null,!0),a=this._columnsController.getVisibleColumns(),r=i[e],n=!1;return r&&(n=a.indexOf(r)>=0),n}_isFixedColumn(e){var a=this._columnsController.getVisibleColumns(null,!0)[e];return!!a&&!!a.fixed}_isColumnVirtual(e){var i=e-this._columnsController.getColumnIndexOffset(),r=this._columnsController.getVisibleColumns()[i];return!!r&&"virtual"===r.command}_processVirtualHorizontalPosition(e){var r,i=this.component.getScrollable(),a=this.getColumnIndex(),n=0,s=!1;switch(e){case"next":case"nextInRow":var o=this._getVisibleColumnCount();r=a+1,n=this.option("rtlEnabled")?this._getMaxHorizontalOffset():0,s="next"===e?o===r||this._isFixedColumn(a)&&!this._isColumnRendered(r):o>r&&this._isFixedColumn(a)&&!this._isColumnRendered(r);break;case"previous":case"previousInRow":if(r=a-1,n=this.option("rtlEnabled")?0:this._getMaxHorizontalOffset(),"previous"===e){var l=this._columnsController.getColumnIndexOffset();s=r<0&&0===l||this._isFixedColumn(a)&&!this._isColumnRendered(r)}else s=r>=0&&this._isFixedColumn(a)&&!this._isColumnRendered(r)}s?i.scrollTo({left:n}):(0,v.$K)(r)&&(0,v.$K)(e)&&this._isColumnVirtual(r)&&0!==(n=this._getHorizontalScrollPositionOffset(e))&&i.scrollBy({left:n,top:0})}_getHorizontalScrollPositionOffset(e){var i=0,a=this._getCell(this._focusedCellPosition),r=a&&(0,I.Y_)(a);if(r>0){var n=this.option("rtlEnabled")?-1:1;i="nextInRow"===e||"next"===e?r*n:r*n*-1}return i}_editingCellTabHandler(e,i){var n,a=e.originalEvent.target,r=this._getCellElementFromTarget(a),s=e.originalEvent,o=this._getElementType(a);if(r.is(Sf))return!this._targetCellTabHandler(e,i);this._updateFocusedCellPosition(r);var l=this._getNextCellByTabKey(s,i,o);if(!(r=l.$cell)||this._handleTabKeyOnMasterDetailCell(r,i))return!1;var d=this._columnsController,h=this._rowsView.getCellIndex(r)+d.getColumnIndexOffset(),c=d.getVisibleColumns(null,!0)[h],_=r.parent(),g=this._getRowIndex(_),f=this._dataController.items()[g];if(c&&c.allowEditing){var x=!f||"data"===f.rowType;n=this._editingController.allowUpdating({row:f})?x:f&&f.isNewRow}return n||this._closeEditCell(),this._focusCell(r,!l.isHighlighted)&&(!this._isRowEditMode()&&n?this._editFocusedCell():this._focusInteractiveElement(r,e.shift)),!0}_targetCellTabHandler(e,i){var l,a=e.originalEvent,r=a.target,n=this._getCellElementFromTarget(r),s=this._getInteractiveElement(n,!e.shift),o=!1;if(!Af(this,n)&&s.length&&r!==s.get(0))o=!0;else{void 0===this._focusedCellPosition.rowIndex&&(0,p.Z)(r).hasClass(Yt)&&this._updateFocusedCellPosition(n),l=this._getElementType(r),this.isRowFocusType()&&(this.setCellFocusType(),"row"===l&&ar((0,p.Z)(r))&&(r=this.getFirstValidCellInRow((0,p.Z)(r)),l=this._getElementType(r)));var d=this._getNextCellByTabKey(a,i,l);if(!(n=d.$cell)||!(n=this._checkNewLineTransition(a,n)))return!1;this._focusCell(n,!d.isHighlighted),Af(this,n)||this._focusInteractiveElement(n,e.shift)}return o}_getNextCellByTabKey(e,i,a){var r=this._getNextCell(i,a),n=r&&this._fireFocusedCellChanging(e,r,!0);return!n||n.cancel?{}:(n.$newCellElement&&(r=n.$newCellElement),{$cell:r,isHighlighted:n.isHighlighted})}_checkNewLineTransition(e,i){var a=this.getVisibleRowIndex(),r=i.parent();if(a!==this._getRowIndex(r)){var n=this._getCellPosition(i),s=this._fireFocusedRowChanging(e,r);if(s.cancel)return;s.rowIndexChanged&&n&&(this.setFocusedColumnIndex(n.columnIndex),i=this._getFocusedCell())}return i}_enterKeyHandler(e,i){var a=this._getFocusedCell(),r=this.getVisibleRowIndex(),n=this._focusedView&&this._focusedView.getRow(r);if(this.option("grouping.allowCollapsing")&&ir(n)||this.option("masterDetail.enabled")&&a&&a.hasClass(Mn)){var s=this._dataController.getKeyByRowIndex(r),o=this._dataController.items()[r];void 0!==s&&o&&o.data&&!o.data.isContinuation&&this._dataController.changeRowExpand(s)}else this._processEnterKeyForDataCell(e,i)}_processEnterKeyForDataCell(e,i){var a=this._getEnterKeyDirection(e),r=this._allowEditingOnEnterKey();i||!r&&a?(this._handleEnterKeyEditingCell(e.originalEvent),"next"===a||"previous"===a?this._targetCellTabHandler(e,a):("upArrow"===a||"downArrow"===a)&&this._navigateNextCell(e.originalEvent,a)):r&&this._startEditing(e)}_getEnterKeyDirection(e){var i=this.option("keyboardNavigation.enterKeyDirection"),a=e.shift;return"column"===i?a?"upArrow":"downArrow":"row"===i?a?"previous":"next":void 0}_handleEnterKeyEditingCell(e){var{target:i}=e,a=this._getCellElementFromTarget(i),r=this._isRowEditMode();this._updateFocusedCellPosition(a),r?(this._focusEditFormCell(a),setTimeout(this._editingController.saveEditData.bind(this._editingController))):(S.Z.trigger((0,p.Z)(i),"change"),this._closeEditCell(),e.preventDefault())}_escapeKeyHandler(e,i){var a=this._getCellElementFromTarget(e.originalEvent.target);i&&(this._updateFocusedCellPosition(a),this._isRowEditMode()?(this._focusEditFormCell(a),this._editingController.cancelEditData(),0===this._dataController.items().length&&(this._resetFocusedCell(),this._editorFactory.loseFocus())):"cell"===this._editingController.getEditMode()?this._editingController.cancelEditData():this._closeEditCell(),e.originalEvent.preventDefault())}_ctrlFKeyHandler(e){if(this.option("searchPanel.visible")){var i=this._headerPanel.getSearchTextEditor();i&&(i.focus(),e.originalEvent.preventDefault())}}_f2KeyHandler(){var e=this._editingController.isEditing(),i=this.getVisibleRowIndex(),a=this._focusedView&&this._focusedView.getRow(i);!e&&ar(a)&&this._startEditing()}_navigateNextCell(e,i){var a=this._getNextCell(i),r=this._getDirectionCodeByKey(i);return!(!a||!this._isCellValid(a))&&this._arrowKeysHandlerFocusCell(e,a,r)}_arrowKeysHandlerFocusCell(e,i,a){var n=this._fireFocusChangingEvents(e,i,"prevRow"===a||"nextRow"===a,!0);return i=n.$newCellElement,!(n.cancel||!this._isCellValid(i)||(this._focus(i,!n.isHighlighted),0))}_beginFastEditing(e,i){if(!this._isFastEditingAllowed()||e.altKey||e.ctrlKey||this._editingController.isEditing())return!1;if(i)this._startEditing(e,$l);else{var{key:a}=e,r=e.keyCode||e.which,n=a||r&&String.fromCharCode(r);n&&(1===n.length||n===$l)&&this._startEditing(e,n)}return!0}_pointerEventHandler(e){var i,a=e.event||e,r=(0,p.Z)(a.currentTarget),n=null===(i=this._rowsView)||void 0===i?void 0:i.element(),s=r.parent(),o=(0,p.Z)(a.target).is(Nn),l=!!(0,p.Z)(a.target).closest(".".concat("dx-revert-button")).length,d=r.hasClass(Mn);this._isEventInCurrentGrid(a)&&(l||!this._isCellValid(r,!o)&&!d?r.is("td")&&this._resetFocusedCell():(r=this._isInsideEditForm(r)?(0,p.Z)(a.target):r,this._focusView(),(0,p.Z)(n).removeClass(xf),s.hasClass(ff)?(this._updateFocusedCellPosition(r),this._applyTabIndexToElement(this._focusedView.element()),this._focusedView.focus(!0)):this._isMasterDetailCell(r)?this._updateFocusedCellPosition(r):this._clickTargetCellHandler(a,r)))}_clickTargetCellHandler(e,i){var a=this._rowsView.getCellIndex(i),r=this._columnsController.getVisibleColumns()[a],n=this._isCellEditMode();this.setCellFocusType();var s=this._fireFocusChangingEvents(e,i,!0);if(i=s.$newCellElement,s.cancel)this.setRowFocusType(),this.setFocusedRowIndex(s.prevRowIndex),this._editingController.isEditing()&&n&&this._closeEditCell();else{if(s.resetFocusedRow)return void this.getController("focus")._resetFocusedRow();if(s.rowIndexChanged&&(i=this._getFocusedCell()),!s.isHighlighted&&!n&&this.setRowFocusType(),this._updateFocusedCellPosition(i),this._allowRowUpdating()&&n&&r&&r.allowEditing)this._isNeedFocus=!1,this._isHiddenFocus=!1;else{i=this._getFocusedCell();var o=e&&(0,p.Z)(e.target).closest("".concat(wf,", td")),l=o&&o.not(i).is(wf),d=!!r&&!r.command&&i.hasClass(cn);this._focus(i,!d&&(!s.isHighlighted||l),l)}}}_allowRowUpdating(){var e=this.getVisibleRowIndex(),i=this._dataController.items()[e];return this._editingController.allowUpdating({row:i},"click")}focus(e){var i,a=this.option("focusedRowEnabled"),r=this._isCellElement((0,p.Z)(e));e||(i=".dx-datagrid-rowsview .dx-row[tabindex]",a||(i+=", .dx-datagrid-rowsview .dx-row > td[tabindex]"),e=this.component.$element().find(i).first()),e&&this._focusElement((0,p.Z)(e),r)}getFocusedView(){return this._focusedView}setupFocusedView(){this.isKeyboardEnabled()&&!(0,v.$K)(this._focusedView)&&this._focusView()}_focusElement(e,i){var a=(0,p.Z)(this._getRowsViewElement()),r=e.closest(a),n=this.isRowFocusType(),s={};!r.length||this._isCellElement(e)&&!this._isCellValid(e)||(this._focusView(),this._isNeedFocus=!0,this._isNeedScroll=!0,(this._isCellElement(e)||ir(e))&&(this.setCellFocusType(),e=(s=this._fireFocusChangingEvents(null,e,!0,i)).$newCellElement,n&&!s.isHighlighted&&this.setRowFocusType()),s.cancel||(this._focus(e,!s.isHighlighted),this._focusInteractiveElement(e)))}_getFocusedViewByElement(e){var i=this.getFocusedView(),a=i&&(0,p.Z)(i.element());return e&&0!==e.closest(a).length}_focusView(){this._focusedView=this._rowsView}_resetFocusedView(){this.setRowFocusType(),this._focusedView=null}_focusInteractiveElement(e,i){if(e){var a=this._getInteractiveElement(e,i);V.focusAndSelectElement(this,a)}}_focus(e,i,a){var r=e&&!e.hasClass(Yt)?e.closest(".".concat(Yt)):e;if(!r||!function IM(t){return!t||t.hasClass(ff)||t.hasClass("dx-virtual-row")}(r)){var o,n=this._focusedView,s=n&&n.element();this._isHiddenFocus=i;var l=ir(r)||function EM(t){return t&&t.hasClass("dx-datagrid-group-footer")}(r)||this.isRowFocusType();l?(o=r,n&&this.setFocusedRowIndex(this._getRowIndex(r))):this._isCellElement(e)&&(o=e,this._updateFocusedCellPosition(e)),o&&(s&&s.find(".dx-row[tabindex], .dx-row > td[tabindex]").not(o).removeClass(kn).removeClass(bf).removeAttr("tabindex"),S.Z.one(o,"blur",d=>{d.relatedTarget&&o.removeClass(kn).removeClass(bf)}),a||(this._applyTabIndexToElement(o),S.Z.trigger(o,"focus")),i?(o.addClass(kn),l&&e.addClass(kn)):this._editorFactory.focus(o))}}_updateFocus(e){this._updateFocusTimeout=setTimeout(()=>{if(this._needFocusEditingCell())this._editingController._focusEditingCell();else{var i=this._getFocusedCell(),a=this._editingController.isEditing();if((!this._isMasterDetailCell(i)||this._isRowEditMode())&&(this._hasSkipRow(i.parent())&&(i=this._getNextCell(this._focusedCellPosition&&this._focusedCellPosition.rowIndex>0?"upArrow":"downArrow")),et(i)))if(i.is("td")||i.hasClass(this.addWidgetPrefix("edit-form-item"))){var n=i.is(Sf),s=i.find(":focus"),o=et(s);if(!e&&n||!this._editorFactory.focus())!o&&(this._isNeedFocus||this._isHiddenFocus)&&this._focus(i,this._isHiddenFocus);else{if(n&&o)return void V.focusAndSelectElement(this,s);!o&&this._focus(i)}a&&this._focusInteractiveElement.bind(this)(i)}else S.Z.trigger(i,"focus")}})}_needFocusEditingCell(){var e=this._editingController.getEditMode()===ka,i=this._editingController.getEditMode()===ji,a=e&&this._editingController.hasChanges(),r=i&&this._editingController.isNewRowInEditMode(),n=this._getFocusedCell();return(0===n.children().length||n.find(No).length>0)&&(a||r)}_getFocusedCell(){return(0,p.Z)(this._getCell(this._focusedCellPosition))}_updateFocusedCellPositionByTarget(e){var i;if("row"===this._getElementType(e)&&(0,v.$K)(null===(i=this._focusedCellPosition)||void 0===i?void 0:i.columnIndex)){var r=(0,p.Z)(e);this._focusedView&&ir(r)&&this.setFocusedRowIndex(this._getRowIndex(r))}else this._updateFocusedCellPosition(this._getCellElementFromTarget(e))}_updateFocusedCellPosition(e,i){var a=this._getCellPosition(e,i);return a&&(!e.length||a.rowIndex>=0&&a.columnIndex>=0)&&this.setFocusedCellPosition(a.rowIndex,a.columnIndex),a}_getFocusedColumnIndexOffset(e){var i=0,a=this._columnsController.getVisibleColumns()[e];return a&&a.fixed?i=this._getFixedColumnIndexOffset(a):e>=0&&(i=this._columnsController.getColumnIndexOffset()),i}_getFixedColumnIndexOffset(e){var i=function TM(t,e){return t.option("rtlEnabled")?!("right"===e.fixedPosition||(0,v.$K)(e.command)&&!(0,v.$K)(e.fixedPosition)):!(!(0,v.$K)(e.fixedPosition)||"left"===e.fixedPosition)}(this,e)?this._getVisibleColumnCount()-this._columnsController.getVisibleColumns().length:0;return i}_getCellPosition(e,i){var a,r=et(e)&&e.closest("tr");if(et(r)){var n=this._getRowIndex(r);return a=this._rowsView.getCellIndex(e,n),a+=this._getFocusedColumnIndexOffset(a),i&&(a=this._applyColumnIndexBoundaries(a="previous"===i?a-1:a+1)),{rowIndex:n,columnIndex:a}}}_focusCell(e,i){if(this._isCellValid(e))return this._focus(e,i),!0}_focusEditFormCell(e){e.hasClass(mf)&&this._editorFactory.focus(e,!0)}_resetFocusedCell(e){var i,a=this._getFocusedCell();et(a)&&a.removeAttr("tabindex"),this._isNeedFocus=!1,this._isNeedScroll=!1,this._focusedCellPosition={},clearTimeout(this._updateFocusTimeout),null===(i=this._focusedView)||void 0===i||i.renderFocusState({preventScroll:e})}restoreFocusableElement(e,i){var a,r,n=(0,v.$K)(e),s=this._rowsView.element(),{columnIndex:o}=this._focusedCellPosition,l=this._dataController.getRowIndexOffset();e=n?e:this._rowsView.getTopVisibleItemIndex()+l,n?(r=this._rowsView.getRow(e-l),!(a=this._fireFocusedRowChanging(i,r)).cancel&&a.rowIndexChanged&&(e=a.newRowIndex)):(this._editorFactory.loseFocus(),this._applyTabIndexToElement(s),S.Z.trigger(s,"focus")),(!n||!a.cancel)&&this.setFocusedCellPosition(e,o),n&&this._updateFocus()}_getNewPositionByCode(e,i,a){var{columnIndex:r}=e,{rowIndex:n}=e;if(void 0===e.rowIndex&&"next"===a)return{columnIndex:0,rowIndex:0};switch(a){case"nextInRow":case"next":r<this._getVisibleColumnCount()-1&&"row"!==i&&this._hasValidCellAfterPosition({columnIndex:r,rowIndex:n})?r++:!this._isLastRow(n)&&"next"===a&&(r=0,n++);break;case"previousInRow":case"previous":r>0&&"row"!==i&&this._hasValidCellBeforePosition({columnIndex:r,rowIndex:n})?r--:n>0&&"previous"===a&&(n--,r=this._getVisibleColumnCount()-1);break;case"upArrow":n=n>0?n-1:n;break;case"downArrow":n=this._isLastRow(n)?n:n+1}return{columnIndex:r,rowIndex:n}}setFocusedCellPosition(e,i){this.setFocusedRowIndex(e),this.setFocusedColumnIndex(i)}setFocusedRowIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.rowIndex=e}setFocusedColumnIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.columnIndex=e}getRowIndex(){return this._focusedCellPosition?this._focusedCellPosition.rowIndex:-1}getColumnIndex(){return this._focusedCellPosition?this._focusedCellPosition.columnIndex:-1}getVisibleRowIndex(){var e,i=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.rowIndex;return!(0,v.$K)(i)||i<0?-1:i-this._dataController.getRowIndexOffset()}getVisibleColumnIndex(){var e,i=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.columnIndex;return(0,v.$K)(i)?i-this._columnsController.getColumnIndexOffset():-1}_applyColumnIndexBoundaries(e){var i=this._getVisibleColumnCount();return e<0?e=0:e>=i&&(e=i-1),e}_isCellByPositionValid(e){var i=(0,p.Z)(this._getCell(e));return this._isCellValid(i)}_isLastRow(e){var i=this._dataController,a=i.items().filter(r=>!1!==r.visible);return this._isVirtualRowRender()?e>=i.getMaxRowIndex():e===a.length-1}_isFirstValidCell(e){var i=!1;return 0===e.rowIndex&&e.columnIndex>=0&&(i=i||!this._hasValidCellBeforePosition(e)),i}_hasValidCellBeforePosition(e){for(var{columnIndex:i}=e,a=!1;i>0&&!a;){var r={columnIndex:--i,rowIndex:e.rowIndex};a=this._isCellByPositionValid(r)}return a}_hasValidCellAfterPosition(e){for(var{columnIndex:i}=e,a=!1,r=this._getVisibleColumnCount();i<r-1&&!a;){var n={columnIndex:++i,rowIndex:e.rowIndex};a=this._isCellByPositionValid(n)}return a}_isLastValidCell(e){var i=e.columnIndex>=0?e.columnIndex+1:0,{rowIndex:a}=e,r={columnIndex:i,rowIndex:a},n=this._dataController.getVisibleRows(),s=n&&n[a];return!!this._isLastRow(a)&&(!!(s&&"group"===s.rowType&&e.columnIndex>0||e.columnIndex===this._getVisibleColumnCount()-1)||!this._isCellByPositionValid(r)&&this._isLastValidCell(r))}_isCellValid(e,i){if(et(e)){var a=e.parent(),r=this._columnsController,n=this._rowsView.getCellIndex(e)+r.getColumnIndexOffset(),s=r.getVisibleColumns(null,!0)[n],o=this._getVisibleColumnCount(),l=this._editingController,d=zl(a),u=s&&s.showWhenGrouped,h=s&&!e.hasClass(Mn)&&ar(a);if((t=>void 0!==t.attr("dx-drag-cell"))(e))return!1;if(this._isMasterDetailCell(e))return!0;if(o>n&&(!d&&s&&(!(0,v.$K)(s.groupIndex)||u&&h)||parseInt(e.attr("colspan"),10)>1)){var _=this._dataController.items(),g=this._rowsView.getRowIndex(a),f=_[g],m=l&&this._isCellEditMode()&&l.isEditing(),x=l&&l.isEditRow(g),w=x||m;return s.command?this._isLegacyNavigation()?!w&&"expand"===s.command:!m&&(x?"select"!==s.command:!w):(!m||!f||"data"===f.rowType)&&(!w||s.allowEditing||i)}}}getFirstValidCellInRow(e,i){for(var r,n,a=e.find("> td"),s=i=i||0;s<a.length;++s)if(r=a.eq(s),this._isCellValid(r)){n=r;break}return n}_getNextCell(e,i,a){var o,l,r=a||this._focusedCellPosition,n=this.isRowFocusType(),s=n||["next","previous"].includes(e);if(this._focusedView&&r){var d=this._getNewPositionByCode(r,i,e);o=(0,p.Z)(this._getCell(d));var u="previous"===e?this._isFirstValidCell(d):this._isLastValidCell(d);if(et(o)&&!this._isCellValid(o)&&this._isCellInRow(d,s)&&!u&&(o=n?this.getFirstValidCellInRow(o.parent(),d.columnIndex):this._getNextCell(e,"cell",d)),l=et(o)&&o.parent(),this._hasSkipRow(l)){var h=this._getRowIndex(l);if(this._isLastRow(h))return null;o=this._getNextCell(e,"row",{columnIndex:r.columnIndex,rowIndex:h})}return et(o)?o:null}return null}_startEditing(e,i){var a=this._focusedCellPosition,r=this.getVisibleRowIndex(),n=this.getVisibleColumnIndex(),s=this._dataController.items()[r],o=this._columnsController.getVisibleColumns()[n];this._isAllowEditing(s,o)&&(this._isRowEditMode()?this._editingController.editRow(r):a&&this._startEditCell(e,i))}_isAllowEditing(e,i){return this._editingController.allowUpdating({row:e})&&i&&i.allowEditing}_editFocusedCell(){var e=this.getVisibleRowIndex(),i=this.getVisibleColumnIndex();return this._editingController.editCell(e,i)}_startEditCell(e,i){this._fastEditingStarted=(0,v.$K)(i);var a=this._editFocusedCell(),r=(0,v.EY)(a);if(this._isFastEditingStarted()&&(r||a)){var s=r&&i===$l?"":i,o=r?a:(0,b.BH)().resolve(),l=this._rowsView.waitAsyncTemplates(!0);(0,b.gx)(o,l).done(()=>{this._editingCellHandler(e,s)})}}_editingCellHandler(e,i){var a,r,n=this._getFocusedCell().find(Nn).eq(0),s=n.get(0);if(s){var o=(0,D.yM)(e,{type:"keydown",target:s}),l=(0,D.yM)(e,{type:"keypress",target:s}),d=(0,D.yM)(e,{type:"input",target:s});d.originalEvent&&(d.originalEvent=(0,D.yM)(d.originalEvent,{data:i})),null===(r=(a=s).select)||void 0===r||r.call(a),S.Z.trigger(n,o),o.isDefaultPrevented()||(S.Z.trigger(n,l),l.isDefaultPrevented())||setTimeout(()=>{n.val(i);var h=n.closest(".".concat("dx-widget"));S.Z.off(h,"focusout"),S.Z.one(h,"focusout",()=>{S.Z.trigger(n,"change")}),S.Z.trigger(n,d)},ve.Z.mozilla?25:0)}}_fireFocusChangingEvents(e,i,a,r){var n,s={},o=null!==(n=this._getCellPosition(i))&&void 0!==n?n:{};return this.isCellFocusType()&&((s=this._fireFocusedCellChanging(e,i,r)).cancel||(o.columnIndex=s.newColumnIndex,o.rowIndex=s.newRowIndex,r=s.isHighlighted,i=(0,p.Z)(this._getCell(o)))),!s.cancel&&a&&i&&((s=this._fireFocusedRowChanging(e,i.parent())).cancel||(o.rowIndex=s.newRowIndex,s.isHighlighted=r)),s.$newCellElement=(0,p.Z)(this._getCell(o)),s.$newCellElement.length||(s.$newCellElement=i),s}_fireFocusedCellChanging(e,i,a){var r=this.option("focusedColumnIndex"),n=this.option("focusedRowIndex"),s=this._getCellPosition(i),o=s?s.columnIndex:-1,l=s?s.rowIndex:-1,h={cellElement:i,prevColumnIndex:r,prevRowIndex:n,newColumnIndex:o,newRowIndex:l,rows:this._dataController.getVisibleRows(),columns:this._columnsController.getVisibleColumns(),event:e,isHighlighted:a||!1,cancel:!1};return this._canceledCellPosition=null,this.executeAction("onFocusedCellChanging",h),(h.newColumnIndex!==o||h.newRowIndex!==l)&&(h.$newCellElement=(0,p.Z)(this._getCell({columnIndex:h.newColumnIndex,rowIndex:h.newRowIndex}))),h.cancel&&(this._canceledCellPosition={rowIndex:l,columnIndex:o}),h}_fireFocusedCellChanged(e){var i=this._rowsView.getCellIndex(e),a=e?.parent().data("options"),r=a?.key;this._memoFireFocusedCellChanged(r,i)}_memoFireFocusedCellChanged(e,i){var a=this._getFocusedCell(),r=this._getRowIndex(a?.parent()),n=Math.min(r-this._dataController.getRowIndexOffset(),this._dataController.items().length-1);if(!this._editingController.isEditCell(n,i)){var o=this._dataController.items()[n],l=this._columnsController.getVisibleColumns()[i];this.executeAction("onFocusedCellChanged",{cellElement:a?(0,W.u)(a):void 0,columnIndex:i,rowIndex:r,row:o,column:l})}}_fireFocusedRowChanging(e,i){var a=this._getRowIndex(i),r=this.option("focusedRowIndex"),n=this._dataController.loadingOperationTypes(),s={rowElement:i,prevRowIndex:r,newRowIndex:a,event:e,rows:this._dataController.getVisibleRows(),cancel:!1};return!this._dataController||this._dataController.isLoading()&&(n.reload||n.paging)?(s.cancel=!0,s):(this.option("focusedRowEnabled")&&(this.executeAction("onFocusedRowChanging",s),!s.cancel&&s.newRowIndex!==a&&(s.resetFocusedRow=s.newRowIndex<0,s.resetFocusedRow||this.setFocusedRowIndex(s.newRowIndex),s.rowIndexChanged=!0)),s)}_fireFocusedRowChanged(){var e,i=this.option("focusedRowEnabled"),a=this.option("focusedRowKey"),r=null===(e=this._focusController)||void 0===e?void 0:e.getFocusedRowIndexByKey(a);!i||(0,v.$K)(a)&&r<0||this._memoFireFocusedRowChanged(a,r)}_memoFireFocusedRowChanged(e,i){var a=i-this._dataController.getRowIndexOffset();this.executeAction("onFocusedRowChanged",{rowElement:i<0?void 0:this._rowsView.getRowElement(a),rowIndex:i,row:i<0?void 0:this._dataController.getVisibleRows()[a]})}_isEventInCurrentGrid(e){return V.isElementInCurrentGrid(this,(0,p.Z)(e.target))}_isRowEditMode(){var e=this._editingController.getEditMode();return e===jt||e===qi}_isCellEditMode(){var e=this._editingController.getEditMode();return e===ka||e===ji}_isFastEditingAllowed(){return this._isCellEditMode()&&this.option("keyboardNavigation.editOnKeyPress")}_getInteractiveElement(e,i){var a=e.find(Nn).filter(":visible");return i?a.last():a.first()}_applyTabIndexToElement(e){var i=this.option("tabIndex")||0;e.attr("tabindex",(0,v.$K)(i)?i:0)}_getCell(e){if(this._focusedView&&e){var i=this._dataController.getRowIndexOffset(),a=this._columnsController.getVisibleColumns(null,!0)[e.columnIndex],r=a&&a.fixed?this._getFixedColumnIndexOffset(a):this._columnsController.getColumnIndexOffset();return this._focusedView.getCell({rowIndex:e.rowIndex>=0?e.rowIndex-i:-1,columnIndex:e.columnIndex>=0?e.columnIndex-r:-1})}}_getRowIndex(e){var i=this._rowsView.getRowIndex(e);return i>=0&&(i+=this._dataController.getRowIndexOffset()),i}_hasSkipRow(e){var i=e&&e.get(0);return i&&("none"===i.style.display||zl(e)&&!e.hasClass(this.addWidgetPrefix(pn)))}_allowEditingOnEnterKey(){return"startEdit"===this.option("keyboardNavigation.enterKeyAction")}_isLegacyNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDirectionCodeByKey(e){var i;switch(e){case"upArrow":i="prevRow";break;case"downArrow":i="nextRow";break;case"leftArrow":i=this.option("rtlEnabled")?"nextInRow":"previousInRow";break;case"rightArrow":i=this.option("rtlEnabled")?"previousInRow":"nextInRow"}return i}_isVirtualScrolling(){var e=this.option("scrolling.mode");return"virtual"===e||"infinite"===e}_isVirtualRowRender(){return this._isVirtualScrolling()||V.isVirtualRowRendering(this)}_isVirtualColumnRender(){return"virtual"===this.option("scrolling.columnRenderingMode")}_scrollBy(e,i,a,r){var n=this,s=this._rowsView.getScrollable();return n._focusedCellPosition&&s.on("scroll",function o(){s.off("scroll",o),setTimeout(n.restoreFocusableElement.bind(n,a,r))}),s.scrollBy({left:e,top:i})}_isInsideEditForm(e){var i=(0,p.Z)(e).closest(".".concat(this.addWidgetPrefix(pn)));return i.length&&this.elementIsInsideGrid(i)}_isMasterDetailCell(e){var i=(0,p.Z)(e).closest(".".concat(mf));return i.length&&this.elementIsInsideGrid(i)}_processNextCellInMasterDetail(e,i){!this._isInsideEditForm(e)&&e&&this._applyTabIndexToElement(e)}_handleTabKeyOnMasterDetailCell(e,i){if(this._isMasterDetailCell(e)){this._updateFocusedCellPosition((0,p.Z)(e),i);var a=this._getNextCell(i,"row");return this._processNextCellInMasterDetail(a,(0,p.Z)(e)),!0}return!1}_getElementType(e){return(0,p.Z)(e).is("tr")?"row":"cell"}_isFastEditingStarted(){return this._isFastEditingAllowed()&&this._fastEditingStarted}_getVisibleColumnCount(){return this._columnsController.getVisibleColumns(null,!0).length}_isCellInRow(e,i){var{columnIndex:a}=e,r=this._getVisibleColumnCount();return i?a>=0&&a<=r-1:a>0&&a<r-1}_isCellElement(e){return e.length&&"TD"===e[0].tagName}_getCellElementFromTarget(e){var i=this._getElementType(e),a=(0,p.Z)(e);return"cell"===i?a.closest(".".concat(Yt," > td")):a.children().not(".".concat(Mn)).first()}_getRowsViewElement(){var e;return null===(e=this._rowsView)||void 0===e?void 0:e.element()}isKeyboardEnabled(){return this.option("keyboardNavigation.enabled")}_processCanceledEditCellPosition(e,i){if(this._canceledCellPosition){var a=this._canceledCellPosition.rowIndex===e&&this._canceledCellPosition.columnIndex===i;return this._canceledCellPosition=null,a}}updateFocusedRowIndex(){var e=this._dataController,i=this.getVisibleRowIndex(),a=e.items(),r=a.length?a.length-1:-1,n=e.getRowIndexOffset();r>=0&&i>r&&this.setFocusedRowIndex(r+n)}}},extenders:{views:{rowsView:{_rowClick(t){var e=this.getController("editing").getEditRowIndex(),i=this.getController("keyboardNavigation"),a=i.isKeyboardEnabled();e===t.rowIndex&&i.setCellFocusType(),(Wl()||!a)&&this.option("focusedRowEnabled")&&this._triggerPointerDownEventHandler(t,!a),this.callBase.apply(this,arguments)},_triggerPointerDownEventHandler(t,e){var{originalEvent:i}=t.event;if(i){var a=this.getController("keyboardNavigation"),r=(0,p.Z)(i.target),n=this.getCellIndex(r),s=this.getController("columns").getVisibleColumns()[n],o=this.getController("data").items()[t.rowIndex];if(a._isAllowEditing(o,s)||e){var l=(0,D.yM)(i,{currentTarget:i.target});a._pointerEventHandler(l)}}},renderFocusState(t){var{preventScroll:e,pageSizeChanged:i}=t??{},a=this.getController("keyboardNavigation"),r=this.element();r&&!(0,Hi.si)(r)&&r.attr("tabindex",null),i&&a.updateFocusedRowIndex();var n=a.getVisibleRowIndex();(!(0,v.$K)(n)||n<0)&&(n=0);var s=this.getCellElements(n);a.isKeyboardEnabled()&&s?.length&&this.updateFocusElementTabIndex(s,e)},updateFocusElementTabIndex(t){var e=this.getController("keyboardNavigation"),i=t.eq(0).parent();if(ir(i))e._applyTabIndexToElement(i);else{var a=e.getColumnIndex();(!(0,v.$K)(a)||a<0)&&(a=0),this._updateFocusedCellTabIndex(t,a)}},_updateFocusedCellTabIndex(t,e){var i=this.getController("keyboardNavigation"),a=t?t.length:-1,r=function(o){var l=i._isMasterDetailCell(o),d=i._isCellValid(o);if(!l&&d&&i._isCellElement(o))return i._applyTabIndexToElement(o),i.setCellFocusType(),!0},n=((t,e)=>t.filter("[".concat("aria-colindex",'="').concat(e+1,'"]:not([').concat("dx-drag-cell","])")).first())(t,e);if(n.length)r(n);else{a<=e&&(e=a-1);for(var s=e;s<a&&!r((0,p.Z)(t[s]));++s);}},renderDelayedTemplates(t){this.callBase.apply(this,arguments),this._renderFocusByChange(t)},_renderFocusByChange(t){var{operationTypes:e,repaintChangesOnly:i}=t??{},{fullReload:a,pageSize:r}=e??{};if(!t||!i||a||r){var n=function AM(t){var e=t.getController("keyboardNavigation");return!!e._isVirtualScrolling()&&t.option("focusedRowIndex")===e.getRowIndex()}(this);this.renderFocusState({preventScroll:n,pageSizeChanged:r})}},_renderCore(t){var e=this.callBase.apply(this,arguments);return this._renderFocusByChange(t),e},_editCellPrepared(t){var e=this._getEditorInstance(t),i=this.getController("keyboardNavigation"),a=i&&i._isFastEditingStarted();e&&a&&this._handleEditingNavigationMode(e),this.callBase.apply(this,arguments)},_handleEditingNavigationMode(t){["downArrow","upArrow"].forEach(i=>{var a=t._supportedKeys()[i];t.registerKeyHandler(i,r=>{if("true"===t._input().attr("aria-expanded"))return a&&a.call(t,r)})}),t.registerKeyHandler("leftArrow",E.ZT),t.registerKeyHandler("rightArrow",E.ZT),"dxDateBox"===t.NAME&&t.option("useMaskBehavior")&&t.registerKeyHandler("enter",E.ZT)},_getEditorInstance(t){var e=t.find(".dx-texteditor").eq(0);return V.getWidgetInstance(e)}}},controllers:{editing:{editCell(t,e){var i=this.getController("keyboardNavigation");if(i._processCanceledEditCellPosition(t,e))return!1;var a=this.callBase(t,e);return a&&i.setupFocusedView(),a},editRow(t){var e=this.getController("keyboardNavigation"),i=e.getVisibleColumnIndex(),a=this._columnsController.getVisibleColumns()[i];(a&&a.type||this.option("editing.mode")===qi)&&e._resetFocusedCell(),this.callBase(t)},addRow(t){var e=this.getController("keyboardNavigation");return e.setupFocusedView(),e.setCellFocusType(),this.callBase.apply(this,arguments)},getFocusedCellInRow(t){var e=this.getController("keyboardNavigation"),i=this.callBase(t);if(e.isKeyboardEnabled()&&e._focusedCellPosition.rowIndex===t){var a=e._getFocusedCell();et(a)&&!a.hasClass("dx-command-edit")&&(i=a)}return i},_processCanceledEditingCell(){this.closeEditCell().done(()=>{this.getController("keyboardNavigation")._updateFocus()})},init(){this.callBase(),this._keyboardNavigationController=this.getController("keyboardNavigation")},closeEditCell(){var t=this._keyboardNavigationController;t._fastEditingStarted=!1;var e=this.callBase.apply(this,arguments);return t._updateFocus(),e},_delayedInputFocus(){this._keyboardNavigationController._isNeedScroll=!0,this.callBase.apply(this,arguments)},_isEditingStart(){var t=this.getController("keyboardNavigation"),e=this.callBase.apply(this,arguments);if(e&&!t._isNeedFocus){var i=t._getFocusedCell();t._focus(i,!0)}return e}},data:{_correctRowIndices(t){var e=this.getController("keyboardNavigation"),i=this.getController("editorFactory"),a=e._focusedCellPosition;if(this.callBase.apply(this,arguments),a&&a.rowIndex>=0){var r=t(a.rowIndex);r&&(a.rowIndex+=r,i.refocus())}},getMaxRowIndex(){var t=this.items().length-1,e=this.virtualItemsCount();return e&&(t+=this.getRowIndexOffset()+e.end),t}},adaptiveColumns:{_showHiddenCellsInView(t){var{viewName:e,$cells:i,isCommandColumn:a}=t;this.callBase.apply(this,arguments),e===If&&!a&&i.each((r,n)=>{var s=(0,p.Z)(n);Df(s)&&s.attr("tabindex",0)})},_hideVisibleCellInView(t){var{viewName:e,$cell:i,isCommandColumn:a}=t;this.callBase.apply(this,arguments),e===If&&!a&&Df(i)&&i.removeAttr("tabindex")}}}}};function Kl(t,e,i,a){var r=0;if(t<e)for(;r<i.items.length;r++)Kl(t+1,e,i.items[r],a);t===e&&a(i)}function Hn(t,e){var i;if("map"in t)return t.map(e);var a=new Array(t.length);for(i in t)a[i]=e(t[i],i);return a}function BM(t){return t===lt.bG.count}function Of(t){var e=(0,Q.vb)(t.selector),i=!("skipEmptyValues"in t)||t.skipEmptyValues,{aggregator:a}=t;if("string"==typeof a&&!(a=lt.bG[a]))throw jr.R0.Error("E4001",t.aggregator);return{selector:e,aggregator:a,skipEmptyValues:i}}$.registerModule("keyboardNavigation",OM);const LM=Ce.Z.inherit({ctor(t){this._data=t.data,this._groupLevel=t.groupLevel||0,this._totalAggregates=Hn(t.totalAggregates||[],Of),this._groupAggregates=Hn(t.groupAggregates||[],Of),this._totals=[]},calculate(){this._totalAggregates.length&&this._calculateTotals(0,{items:this._data}),this._groupAggregates.length&&this._groupLevel>0&&this._calculateGroups({items:this._data})},totalAggregates(){return this._totals},_aggregate(t,e,i){for(var a=e.items?e.items.length:0,r=0;r<t.length;r++)if(BM(t[r].aggregator))i[r]=(i[r]||0)+a;else for(var n=0;n<a;n++)this._accumulate(r,t[r],i,e.items[n])},_calculateTotals(t,e){if(0===t&&(this._totals=this._seed(this._totalAggregates)),t===this._groupLevel)this._aggregate(this._totalAggregates,e,this._totals);else for(var i=0;i<e.items.length;i++)this._calculateTotals(t+1,e.items[i]);0===t&&(this._totals=this._finalize(this._totalAggregates,this._totals))},_calculateGroups(t){var e=this._groupLevel,i=e+1,a=this._seed.bind(this,this._groupAggregates),r=this._aggregate.bind(this,this._groupAggregates),n=this._finalize.bind(this,this._groupAggregates);function s(o){o.aggregates=a(i-1),i===e?r(o,o.aggregates):Kl(i,e,o,l=>{r(l,o.aggregates)}),o.aggregates=n(o.aggregates)}for(;--i>0;)Kl(0,i,t,s)},_seed:(t,e)=>Hn(t,i=>{var{aggregator:a}=i;return"seed"in a?(0,v.mf)(a.seed)?a.seed(e):a.seed:NaN}),_accumulate(t,e,i,a){var r=e.selector(a),{aggregator:n}=e,{skipEmptyValues:s}=e;s&&function RM(t){return t!=t||""===t||null==t}(r)||(i[t]=i[t]!=i[t]?r:n.step(i[t],r))},_finalize:(t,e)=>Hn(t,(i,a)=>{var r=i.aggregator.finalize;return r?r(e[a]):e[a]})});var Gl="groupFooter",Rf="totalFooter",Bf=function(t,e){var i=(0,p.Z)(t),{column:a}=e,{summaryItems:r}=e,n=[];if(!a.command&&r){for(var s=0;s<r.length;s++){var o=r[s];n.push((0,p.Z)("<div>").css("textAlign",o.alignment||a.alignment).addClass("dx-datagrid-summary-item").addClass("dx-datagrid-text-content").addClass(o.cssClass).toggleClass("dx-datagrid-group-text-content","group"===e.rowType).text($.getSummaryText(o,e.summaryTexts)))}i.append(n)}},Lf=function(t,e){var i=t.option("summary.texts")||{};return{totalItem:e.row,summaryItems:e.row.summaryCells[e.columnIndex],summaryTexts:i}},Ul=function(t){return t.summary||t.aggregates||[]},Yl=function(t){return t.option("summary.recalculateWhileEditing")},ZM=da.inherit({_getRows(){return this._dataController.footerItems()},_getCellOptions(t){return(0,C.l)(this.callBase(t),Lf(this,t))},_renderCellContent(t,e){Bf(t,e),this.callBase.apply(this,arguments)},_renderCore(t){var e=!1,i=this._dataController.footerItems()[0];(!t||!t.columnIndices)&&(this.element().empty().addClass("dx-datagrid-total-footer").toggleClass("dx-datagrid-nowrap",!this.option("wordWrapEnabled")),e=!0),i&&i.summaryCells&&i.summaryCells.length&&(this._updateContent(this._renderTable({change:t}),t),e&&this._updateScrollLeftPosition())},_updateContent(t,e){return e&&"update"===e.changeType&&e.columnIndices?this.waitAsyncTemplates().done(()=>{var i=this.getTableElement().find(".dx-row"),a=t.find(".dx-row");this._updateCells(i,a,e.columnIndices[0])}):this.callBase.apply(this,arguments)},_rowClick(t){var e=this._dataController.footerItems()[t.rowIndex]||{};this.executeAction("onRowClick",(0,C.l)({},t,e))},_columnOptionChanged(t){var{optionNames:e}=t;t.changeTypes.grouping||(e.width||e.visibleWidth)&&this.callBase(t)},_handleDataChanged(t){var{changeType:e}=t;"update"===t.changeType&&t.repaintChangesOnly?t.totalColumnIndices?t.totalColumnIndices.length&&this.render(null,{changeType:"update",columnIndices:[t.totalColumnIndices]}):this.render():("refresh"===e||"append"===e||"prepend"===e)&&this.render()},_createRow(t){var e=this.callBase.apply(this,arguments);return t.rowType===Rf&&e.addClass("dx-footer-row"),e},getHeight(){return this.getElementHeight()},isVisible(){return!!this._dataController.footerItems().length}}),$M={init(){this.callBase.apply(this,arguments),this._totalAggregates=[],this._summaryGetter=E.ZT},summaryGetter(t){if(!arguments.length)return this._summaryGetter;(0,v.mf)(t)&&(this._summaryGetter=t)},summary(t){if(!arguments.length)return this._summaryGetter();this._summaryGetter=function(){return t}},totalAggregates(){return this._totalAggregates},isLastLevelGroupItemsPagingLocal(){var t=this.summary(),e=t&&t.sortByGroups();return e&&e.length},sortLastLevelGroupItems(t,e,i){var a=Mi.Z.multiLevelGroup((0,He.Z)(t),e).toArray(),r=[];return i.forEach(n=>{!function s(o,l,d,u){u=u||[];for(var h=0;h<o.length;h++)u.push(o[h].key),1===l?d(u,o[h].items):s(o[h].items,l-1,d,u),u.pop()}(a,e.length,(s,o)=>{n.toString()===s.toString()&&(r=r.concat(o))})}),r}},zM=function(){var t=function(i,a,r,n){var s;if(Yl(i)){var o=i.getController("editing");if(o){var l=o.getInsertedData();l.length&&(r=function u(h,c,_){return _?u(h,c.map(g=>({items:[g]}),_-1)):h.concat(c)}(r,l,n));var d=o.getRemovedData();d.length&&(r=function u(h,c,_){return _?h.map(g=>{var f={},m=u(g.items||[],c,_-1);return Object.defineProperty(f,"aggregates",{get:()=>g.aggregates,set:x=>{g.aggregates=x}}),(0,C.l)(f,g,{items:m})}):h.filter(g=>c.indexOf(g)<0)}(r,d,n))}}return a&&(s=new LM({totalAggregates:a.totalAggregates,groupAggregates:a.groupAggregates,data:r,groupLevel:n})).calculate(),s?s.totalAggregates():[]},e=function(i,a,r){var n=r&&r.sortByGroups&&r.sortByGroups();return n&&n.length?function s(o,l,d){if(!o||!l.length)return o;var c,h=d[0];return l[0]&&h&&h.length&&(c=(0,He.Z)(o),(0,y.S6)(h,function(_){c=0===_?c.sortBy(this.selector,this.desc):c.thenBy(this.selector,this.desc)}),c.enumerate().done(_=>{o=_})),l=l.slice(1),d=d.slice(1),l.length&&d.length&&(0,y.S6)(o,function(){this.items=s(this.items,l,d)}),o}(i,a,n):i};return{_customizeRemoteOperations(i){var a=this.summary();a&&(i.remoteOperations.summary?(!i.isCustomLoading||i.storeLoadOptions.isLoadingAll)&&(i.storeLoadOptions.group&&(i.remoteOperations.grouping?i.storeLoadOptions.groupSummary=a.groupAggregates:a.groupAggregates.length&&(i.remoteOperations.paging=!1)),i.storeLoadOptions.totalSummary=a.totalAggregates):(a.totalAggregates.length||a.groupAggregates.length&&i.storeLoadOptions.group)&&(i.remoteOperations.paging=!1)),this.callBase.apply(this,arguments);var r=i.cachedData.extra;r&&r.summary&&!i.isCustomLoading&&(i.storeLoadOptions.totalSummary=void 0)},_handleDataLoadedCore(i){var a,r,n=(0,lt.G5)(i.storeLoadOptions.group||i.loadOptions.group||[]),s=i.remoteOperations||{},o=this.summaryGetter()(s);if(!i.isCustomLoading||i.storeLoadOptions.isLoadingAll)if(s.summary)!s.paging&&n.length&&o&&(s.grouping||t(this,{groupAggregates:o.groupAggregates},i.data,n.length),i.data=e(i.data,n,o));else if(!s.paging&&o){var l=i.operationTypes||{};if(!Object.keys(l).some(h=>l[h])||null===(r=null===(a=i.cachedData)||void 0===a?void 0:a.extra)||void 0===r||!r.summary||n.length&&o.groupAggregates.length){var u=t(this,o,i.data,n.length);i.extra=(0,v.PO)(i.extra)?i.extra:{},i.extra.summary=u,i.cachedData&&(i.cachedData.extra=i.extra)}i.data=e(i.data,n,o)}i.isCustomLoading||(this._totalAggregates=i.extra&&i.extra.summary||this._totalAggregates),this.callBase(i)}}}();ha.extend($M),ha.extend(zM),$.registerModule("summary",{defaultOptions:()=>({summary:{groupItems:void 0,totalItems:void 0,calculateCustomSummary:void 0,skipEmptyValues:!0,recalculateWhileEditing:!1,texts:{sum:A.Z.format("dxDataGrid-summarySum"),sumOtherColumn:A.Z.format("dxDataGrid-summarySumOtherColumn"),min:A.Z.format("dxDataGrid-summaryMin"),minOtherColumn:A.Z.format("dxDataGrid-summaryMinOtherColumn"),max:A.Z.format("dxDataGrid-summaryMax"),maxOtherColumn:A.Z.format("dxDataGrid-summaryMaxOtherColumn"),avg:A.Z.format("dxDataGrid-summaryAvg"),avgOtherColumn:A.Z.format("dxDataGrid-summaryAvgOtherColumn"),count:A.Z.format("dxDataGrid-summaryCount")}},sortByGroupSummaryInfo:void 0}),views:{footerView:ZM},extenders:{controllers:{data:{_isDataColumn:t=>t&&(!(0,v.$K)(t.groupIndex)||t.showWhenGrouped),_isGroupFooterVisible(){for(var t=this.option("summary.groupItems")||[],e=0;e<t.length;e++){var i=t[e],a=this._columnsController.columnOption(i.showInColumn||i.column);if(i.showInGroupFooter&&this._isDataColumn(a))return!0}return!1},_processGroupItems(t,e,i){var a=i&&i.data,r=this.callBase.apply(this,arguments);return i&&(void 0===i.isGroupFooterVisible&&(i.isGroupFooterVisible=this._isGroupFooterVisible()),a&&a.items&&i.isGroupFooterVisible&&(i.collectContinuationItems||!a.isContinuationOnNextPage)&&r.push({rowType:Gl,key:i.path.slice(),data:a,groupIndex:i.path.length-1,values:[]})),r},_processGroupItem(t,e){var i=this;if(e.summaryGroupItems||(e.summaryGroupItems=i.option("summary.groupItems")||[]),"group"===t.rowType){var a=-1,r=-1;(0,y.S6)(e.visibleColumns,function(n){t.groupIndex===this.groupIndex&&(a=this.index),n>0&&"expand"===e.visibleColumns[n-1].command&&"expand"!==this.command&&(r=this.index)}),t.summaryCells=this._calculateSummaryCells(e.summaryGroupItems,Ul(t.data),e.visibleColumns,(n,s)=>n.showInGroupFooter?-1:n.alignByColumn&&s&&!(0,v.$K)(s.groupIndex)&&s.index!==r?s.index:a,!0)}return t.rowType===Gl&&(t.summaryCells=this._calculateSummaryCells(e.summaryGroupItems,Ul(t.data),e.visibleColumns,(n,s)=>n.showInGroupFooter&&i._isDataColumn(s)?s.index:-1)),t},_calculateSummaryCells(t,e,i,a,r){var n=this,s=[],o={};return(0,y.S6)(t,(l,d)=>{var u=n._columnsController.columnOption(d.column),h=d.showInColumn&&n._columnsController.columnOption(d.showInColumn)||u,c=a(d,h);if(c>=0){o[c]||(o[c]=[]);var g,_=e[l];_==_&&((0,v.$K)(d.valueFormat)?g=d.valueFormat:"count"!==d.summaryType&&(g=$.getFormatByDataType(u&&u.dataType)),o[c].push((0,C.l)({},d,{value:(0,v.HD)(_)&&u&&u.deserializeValue?u.deserializeValue(_):_,valueFormat:g,columnCaption:u&&u.index!==c?u.caption:void 0})))}}),(0,v.Qr)(o)||i.forEach((l,d)=>{var u=i[d-1];s.push(o[!r||"expand"!==u?.command&&"expand"!==l.command?l.index:u?.index]||[])}),s},_getSummaryCells(t,e){var i=this;return i._calculateSummaryCells(t,e,i._columnsController.getVisibleColumns(),(r,n)=>i._isDataColumn(n)?n.index:-1)},_updateItemsCore(t){var e,i=this._dataSource,a=this._footerItems,r=a&&a[0]&&a[0].summaryCells,n=this.option("summary.totalItems");if(this._footerItems=[],i&&n&&n.length){var s=i.totalAggregates();e=this._getSummaryCells(n,s),t&&t.repaintChangesOnly&&r&&(t.totalColumnIndices=e.map((o,l)=>JSON.stringify(o)!==JSON.stringify(r[l])?l:-1).filter(o=>o>=0)),e.length&&this._footerItems.push({rowType:Rf,summaryCells:e})}this.callBase(t)},_prepareUnsavedDataSelector(t){if(Yl(this)){var e=this.getController("editing");if(e)return function(i){return i=e.getUpdatedData(i),t(i)}}return t},_prepareAggregateSelector(t,e){return t=this._prepareUnsavedDataSelector(t),"avg"===e||"sum"===e?function(i){var a=t(i);return(0,v.$K)(a)?Number(a):a}:t},_getAggregates(t,e){var i=this,a=i.getController("columns"),r=i.option("summary.calculateCustomSummary"),n=i.option("summary.skipEmptyValues");return(0,y.UI)(t||[],s=>{var o=a.columnOption(s.column),l=o&&o.calculateCellValue?o.calculateCellValue.bind(o):(0,Q.vb)(o?o.dataField:s.column),d=s.summaryType||"count",u=(0,v.$K)(s.skipEmptyValues)?s.skipEmptyValues:n;if(e)return{selector:s.column,summaryType:d};var h=i._prepareAggregateSelector(l,d);if("custom"===d){r||(ee.Z.log("E1026"),r=function(){});var c={component:i.component,name:s.name};r(c),c.summaryProcess="calculate",d={seed:_=>(c.summaryProcess="start",c.totalValue=void 0,c.groupIndex=_,delete c.value,r(c),c.totalValue),step:(_,g)=>(c.summaryProcess="calculate",c.totalValue=_,c.value=g,r(c),c.totalValue),finalize:_=>(c.summaryProcess="finalize",c.totalValue=_,delete c.value,r(c),c.totalValue)}}return{selector:h,aggregator:d,skipEmptyValues:u}})},_addSortInfo(t,e,i,a){if(e){var{groupIndex:r}=e;a=a||e.sortOrder,(0,v.$K)(r)&&(t[r]=t[r]||[],t[r].push({selector:i,desc:"desc"===a}))}},_findSummaryItem(t,e){var i=-1;return(0,v.$K)(e)&&(0,y.S6)(t||[],function(a){if(this.name===e||a===e||this.summaryType===e||this.column===e||function(r){var{summaryType:n}=r,{column:s}=r;return n&&s&&"".concat(n,"_").concat(s)}(this)===e)return i=a,!1}),i},_getSummarySortByGroups(t,e){var i=this,a=i._columnsController,r=a.getGroupColumns(),n=[];if(e&&e.length)return(0,y.S6)(t||[],function(){var{sortOrder:s}=this,{groupColumn:o}=this,l=i._findSummaryItem(e,this.summaryItem);if(!(l<0)){var d=function(u){return Ul(u)[l]};(0,v.$K)(o)?(o=a.columnOption(o),i._addSortInfo(n,o,d,s)):(0,y.S6)(r,(u,h)=>{i._addSortInfo(n,h,d,s)})}}),n},_createDataSourceAdapterCore(t,e){var i=this,a=this.callBase(t,e);return a.summaryGetter(r=>i._getSummaryOptions(r||e)),a},_getSummaryOptions(t){var e=this,i=e.option("summary.groupItems"),a=e.option("summary.totalItems"),r=e.option("sortByGroupSummaryInfo"),n=e._getAggregates(i,t&&t.grouping&&t.summary),s=e._getAggregates(a,t&&t.summary);if(n.length||s.length)return{groupAggregates:n,totalAggregates:s,sortByGroups:function(){return e._getSummarySortByGroups(r,i)}}},publicMethods(){var t=this.callBase();return t.push("getTotalSummaryValue"),t},getTotalSummaryValue(t){var e=this._findSummaryItem(this.option("summary.totalItems"),t),i=this._dataSource.totalAggregates();if(i.length&&e>-1)return i[e]},optionChanged(t){("summary"===t.name||"sortByGroupSummaryInfo"===t.name)&&(t.name="dataSource"),this.callBase(t)},init(){this._footerItems=[],this.callBase()},footerItems(){return this._footerItems}},editing:{_refreshSummary(){Yl(this)&&!this.isSaving()&&this._dataController.refresh({load:!0,changesOnly:!0})},_addChange(t){var e=this.callBase.apply(this,arguments);return t.type&&this._refreshSummary(),e},_removeChange(){var t=this.callBase.apply(this,arguments);return this._refreshSummary(),t},cancelEditData(){var t=this.callBase.apply(this,arguments);return this._refreshSummary(),t}}},views:{rowsView:{_createRow(t){var e=this.callBase.apply(this,arguments);return t&&e.addClass(t.rowType===Gl?"dx-datagrid-group-footer":""),e},_renderCells(t,e){this.callBase.apply(this,arguments),"group"===e.row.rowType&&e.row.summaryCells&&e.row.summaryCells.length&&this._renderGroupSummaryCells(t,e)},_hasAlignByColumnSummaryItems:(t,e)=>!(0,v.$K)(e.columns[t].groupIndex)&&e.row.summaryCells[t].length,_getAlignByColumnCellCount(t,e){for(var i=0,a=1;a<t;a++)i=this._hasAlignByColumnSummaryItems(e.row.summaryCells.length-a,e)?a:i;return i},_renderGroupSummaryCells(t,e){var i=t.children().last(),a=Number(i.attr("colSpan"))||1,r=this._getAlignByColumnCellCount(a,e);this._renderGroupSummaryCellsCore(i,e,a,r)},_renderGroupSummaryCellsCore(t,e,i,a){if(a>0){t.attr("colSpan",i-a);for(var r=0;r<a;r++){var n=e.columns.length-a+r;this._renderCell(t.parent(),(0,C.l)({column:e.columns[n],columnIndex:this._getSummaryCellIndex(n,e.columns)},e))}}},_getSummaryCellIndex:t=>t,_getCellTemplate(t){return!t.column.command&&!(0,v.$K)(t.column.groupIndex)&&t.summaryItems&&t.summaryItems.length?Bf:this.callBase(t)},_getCellOptions(t){var e=this.callBase(t);return t.row.summaryCells?(0,C.l)(e,Lf(this,t)):e}}}}});var WM=L(8047),Vf="content",Zn="content-fixed",Pf="dx-first-cell",Ff="dx-state-hover",Mf="dx-col-fixed",jl="dx-pointer-events-none",wi="transparent",kf="dx-group-row",Mt=function(t){var e=-1;return(0,y.S6)(t,(i,a)=>{if(a.command===wi)return e=i,!1}),e},Nf=function(t,e,i){var a=0;if(t&&e&&i)for(var r=0;r<t.length;r++)t[r].command===wi?a+=t[r].colspan:(e[a]<i[r]&&(e[a]=i[r]),a++);return e},ql={init(){this.callBase(),this._isFixedTableRendering=!1,this._isFixedColumns=!1},_createCol(t){return this.callBase(t).toggleClass(Mf,!(!this._isFixedTableRendering||!(t.fixed||t.command&&t.command!==wi)))},_correctColumnIndicesForFixedColumns(t,e){var i=Mt(t),a=t[i].colspan,r=e&&e.columnIndices;r&&(e.columnIndices=r.map(n=>{if(n)return n.map(s=>s<i?s:s>=i+a?s-a+1:-1).filter(s=>s>=0)}))},_partialUpdateFixedTable(t){var e=this._fixedTableElement,i=this._getRowElementsCore(e);e.children("colgroup").replaceWith(this._createColGroup(t));for(var r=0;r<i.length;r++)this._partialUpdateFixedRow((0,p.Z)(i[r]),t)},_partialUpdateFixedRow(t,e){var i,o,a=t.get(0).childNodes,r=Mt(e),n=e[r],l=this._columnsController.getColumnIndexOffset()+1,{colspan:d}=n;if(t.hasClass("dx-master-detail-row"))a[0].setAttribute("colspan",null===(i=this._columnsController.getVisibleColumns())||void 0===i?void 0:i.length);else{t.hasClass(kf)&&(d=(o=this._getGroupCellOptions({row:t.data("options"),columns:this._columnsController.getVisibleColumns()})).colspan-Math.max(0,a.length-(o.columnIndex+2)));for(var u=0;u<a.length;u++){var h=o?u===o.columnIndex+1:u===r;a[u].setAttribute("aria-colindex",l),h?(a[u].setAttribute("colspan",d),l+=d):l++}}},_renderTable(t){var e,i,a=this.getFixedColumns();this._isFixedColumns=!!a.length;var r=this.callBase(t);if(this._isFixedColumns){var n=t?.change,s=this._getRowElements(this._fixedTableElement),o=n?.virtualColumnsScrolling&&s.length===(null===(e=n?.items)||void 0===e?void 0:e.length);if(this._isFixedTableRendering=!0,o&&!0!==this.option("scrolling.legacyMode"))this._partialUpdateFixedTable(a),this._isFixedTableRendering=!1;else{var l=n?.columnIndices;this._correctColumnIndicesForFixedColumns(a,n),i=this._createTable(a),this._renderRows(i,(0,C.l)({},t,{columns:a})),this._updateContent(i,n,!0),l&&(n.columnIndices=l),this._isFixedTableRendering=!1}}else this._fixedTableElement&&this._fixedTableElement.parent().remove(),this._fixedTableElement=null;return r},_renderRow(t,e){var i,{cells:a}=e.row;if(this.callBase.apply(this,arguments),this._isFixedTableRendering&&a&&a.length){i=0;var r=e.row.cells||[];a=a.slice(),e.row.cells=a;for(var n=0;n<r.length;n++)r[n].column&&r[n].column.command===wi?i=(r[n].column.colspan||1)-1:a[n+i]=r[n]}},_createCell(t){var n,s,o,{column:e}=t,i=e&&e.command,{rowType:a}=t,r=this.callBase.apply(this,arguments);(this._isFixedTableRendering||"filter"===a)&&(s=(n=this.getFixedColumns())[(o=Mt(n))-1]),this._isFixedTableRendering?i===wi&&(r.addClass(jl).toggleClass(Pf,0===o||s&&"expand"===s.command).toggleClass("dx-last-cell",n.length&&o===n.length-1),"freeSpace"!==a&&V.setEmptyText(r)):"filter"===a&&r.toggleClass(Pf,t.columnIndex===o);var l=this.option("rowAlternationEnabled")&&t.isAltRow,d="multiple"===this.option("selection.mode")&&0===t.columnIndex&&"header"===t.rowType;return ve.Z.mozilla&&t.column.fixed&&"group"!==t.rowType&&!l&&!d&&r.addClass(Mf),r},_getContent(t){var e;return t?null===(e=this._fixedTableElement)||void 0===e?void 0:e.parent():this.callBase.apply(this,arguments)},_wrapTableInScrollContainer(t,e){var i=this.callBase.apply(this,arguments);return(this._isFixedTableRendering||e)&&i.addClass(this.addWidgetPrefix(Zn)),i},_renderCellContent(t,e){var i,{column:a}=e,r=this._isFixedTableRendering,n="group"===e.rowType&&(0,v.$K)(a.groupIndex);if(r&&n&&!a.command&&!a.groupCellTemplate&&t.css("pointerEvents","none"),!r&&this._isFixedColumns){if(i=a.fixed||a.command&&!1!==a.fixed,n&&(i=!1,e.row.summaryCells&&e.row.summaryCells.length)){var s=this._columnsController.getVisibleColumns(),o=this._getAlignByColumnCellCount?this._getAlignByColumnCellCount(a.colspan,{columns:s,row:e.row,isFixed:!0}):0;if(o>0){var l=Mt(this._columnsController.getFixedColumns());i=s.length-o<l}}if(i){if(a.command&&"buttons"!==a.type||"group"===e.rowType)return void t.html("&nbsp;").addClass(a.cssClass);t.addClass("dx-hidden-cell")}}a.command!==wi&&this.callBase.apply(this,arguments)},_getCellElementsCore(t){var e=this.callBase.apply(this,arguments),i=e?.parent().hasClass(kf),a="columnHeadersView"===this.name?t:void 0;if(this._fixedTableElement&&e){var r=this.getFixedColumns(a),n=this._getRowElements(this._fixedTableElement).eq(t).children("td");(0,y.S6)(n,(s,o)=>{if(i)e[s]&&"hidden"!==o.style.visibility&&(e[s]=o);else{var l=r[s];if(l)if(l.command===wi)n.eq(s).hasClass("dx-master-detail-cell")&&(e[s]=o||e[s]);else{var d=this._columnsController.getVisibleIndexByColumn(l,a);e[d]=o||e[d]}}})}return e},getColumnWidths(){var t=this.callBase(),e=this.getFixedColumns(),i=this._fixedTableElement&&t.length?this.callBase(this._fixedTableElement):void 0;return Nf(e,t,i)},getTableElement(t){return(t=this._isFixedTableRendering||t)?this._fixedTableElement:this.callBase()},setTableElement(t,e){this._isFixedTableRendering||e?this._fixedTableElement=t.addClass(jl):this.callBase(t)},getColumns(t){var e=this.getTableElement();return this._isFixedTableRendering?this.getFixedColumns(t):this.callBase(t,e)},getRowIndex(t){var e=this._fixedTableElement;return e&&e.find(t).length?this._getRowElements(e).index(t):this.callBase(t)},getTableElements(){var t=this.callBase.apply(this,arguments);return this._fixedTableElement&&(t=(0,p.Z)([t.get(0),this._fixedTableElement.get(0)])),t},getFixedColumns(t){return this._columnsController.getFixedColumns(t)},getFixedColumnsOffset(){var e,t={left:0,right:0};if(this._fixedTableElement){var i=(e=this.getTransparentColumnElement()).position();t={left:i.left,right:(0,I.Y_)(this.element(),!0)-((0,I.Y_)(e,!0)+i.left)}}return t},getTransparentColumnElement(){return this._fixedTableElement&&this._fixedTableElement.find(".".concat(jl)).first()},getFixedTableElement(){return this._fixedTableElement},isFixedColumns(){return this._isFixedColumns},_resizeCore(){this.callBase(),this.synchronizeRows()},setColumnWidths(t){var e,{widths:i}=t,a=this._columnsController.getVisibleColumns(),r=i?.length&&a.some(h=>(0,v.$K)(h.visibleWidth)),n=null===(e=t.optionNames)||void 0===e?void 0:e.width;if(this.callBase(t),this._fixedTableElement){var s=i?.some(h=>"auto"===h||!(0,v.$K)(h)),l=!s||r&&this.isScrollbarVisible(!0)?this.getFixedColumns():a;this.setFixedTableColumnWidths(l,i)}var d=this.option("wordWrapEnabled");(r||n&&d)&&this.synchronizeRows()},setFixedTableColumnWidths(t,e){if(this._fixedTableElement&&e){var i=this._fixedTableElement.children("colgroup").children("col");i.toArray().forEach(r=>r.removeAttribute("style"));var a=0;t.forEach(r=>{if(r.colspan)a+=r.colspan;else{var n=Zd(e[a]);(0,v.$K)(n)&&(0,Ne.cl)(i.eq(a),n),a+=1}})}},_getClientHeight(t){var e=t.getBoundingClientRect&&(0,se.l)(t);return e&&e.height?e.height:t.clientHeight},synchronizeRows(){var i,a,r,n,t=[],e=[];this.waitAsyncTemplates(!0).done(()=>{if(this._isFixedColumns&&this._tableElement&&this._fixedTableElement){var s=this._getClientHeight(this._tableElement.get(0)),o=this._getClientHeight(this._fixedTableElement.get(0));if(a=this._getRowElements(this._tableElement),r=this._getRowElements(this._fixedTableElement),n=this._findContentElement(),s!==o){for(n&&n.css("height",s),a.css("height",""),r.css("height",""),i=0;i<a.length;i++)t.push(this._getClientHeight(a.get(i))),e.push(this._getClientHeight(r.get(i)));for(i=0;i<a.length;i++){var l=t[i],d=e[i];l>d?r.eq(i).css("height",l):l<d&&a.eq(i).css("height",d)}n&&n.css("height","")}}})},setScrollerSpacing(t){var e=this.option("rtlEnabled");this.callBase(t),this.element().children(".".concat(this.addWidgetPrefix(Zn))).css({paddingLeft:e?t:"",paddingRight:e?"":t})}},jM=(0,C.l)({},ql,{_getRowVisibleColumns(t){return this._isFixedTableRendering?this.getFixedColumns(t):this.callBase(t)},getContextMenuItems(t){var{column:e}=t,i=this.option("columnFixing"),a=this.callBase(t);if(t.row&&"header"===t.row.rowType&&!0===i.enabled&&e&&e.allowFixing){var r=n=>{switch(n.itemData.value){case"none":this._columnsController.columnOption(e.index,"fixed",!1);break;case"left":this._columnsController.columnOption(e.index,{fixed:!0,fixedPosition:"left"});break;case"right":this._columnsController.columnOption(e.index,{fixed:!0,fixedPosition:"right"})}};(a=a||[]).push({text:i.texts.fix,beginGroup:!0,items:[{text:i.texts.leftPosition,value:"left",disabled:e.fixed&&(!e.fixedPosition||"left"===e.fixedPosition),onItemClick:r},{text:i.texts.rightPosition,value:"right",disabled:e.fixed&&"right"===e.fixedPosition,onItemClick:r}]},{text:i.texts.unfix,value:"none",disabled:!e.fixed,onItemClick:r})}return a},getFixedColumnElements(t){if((0,v.$K)(t))return this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(t).children();var e=this.getColumnElements(),i=this.getTransparentColumnElement();if(e&&i&&i.length){var a=Mt(this.getFixedColumns());e.splice(a,i.get(0).colSpan,i.get(0))}return e},getColumnWidths(){var t,e=this.callBase(),i=this.getFixedColumnElements(),a=this.getFixedColumns();return this._fixedTableElement&&(t=i&&i.length?this._getWidths(i):this.callBase(this._fixedTableElement)),Nf(a,e,t)}}),qM=(0,C.l)({},ql,{_detachHoverEvents(){var t=this.element();this._fixedTableElement&&this._tableElement&&S.Z.off(t,"mouseover mouseout",".dx-data-row")},_attachHoverEvents(){this._fixedTableElement&&this._tableElement&&S.Z.on(this.element(),"mouseover mouseout",".dx-data-row",this.createAction(t=>{var{event:e}=t,i=this.getRowIndex((0,p.Z)(e.target).closest(".dx-row")),a="mouseover"===e.type;i>=0&&(this._tableElement&&this._getRowElements(this._tableElement).eq(i).toggleClass(Ff,a),this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(i).toggleClass(Ff,a))}))},_getScrollDelay(){var t;return(null===(t=this.getController("resizing"))||void 0===t?void 0:t.hasResizeTimeout())?this.option("scrolling.updateTimeout"):ve.Z.mozilla?60:0},_findContentElement(t){var e,i,a=this.addWidgetPrefix(Vf),r=this.element();if(t=this._isFixedTableRendering||t,r&&t){e=r.children(".".concat(a));var n=this.getScrollable();return!e.length&&n&&(e=(0,p.Z)("<div>").addClass(a),S.Z.on(e,"scroll",s=>{var{target:o}=s,l=this._getScrollDelay();clearTimeout(this._fixedScrollTimeout),this._fixedScrollTimeout=setTimeout(()=>{i=(0,p.Z)(o).scrollTop(),n.scrollTo({y:i})},l)}),S.Z.on(e,WM.u,s=>{var o=(0,p.Z)(s.target).closest(".dx-scrollable"),l=!1;if(n&&n.$element().is(o))l=!0;else{var d=o.length&&_t.getInstance(o.get(0)),u=d&&d.scrollHeight()-d.clientHeight()>0;l=d&&!u}if(l){i=n.scrollTop(),n.scrollTo({y:i-s.delta});var h=n.scrollTop()+n.clientHeight(),c=n.scrollHeight()+this.getScrollbarWidth();if(n.scrollTop()>0&&h<c)return!1}}),e.appendTo(r)),e}return this.callBase()},_updateScrollable(){this.callBase();var t=this.getScrollable();if(!t?._disposed){var e=t&&t.scrollOffset().top;this._updateFixedTablePosition(e)}},_renderContent(t,e,i){return this._isFixedTableRendering||i?t.empty().addClass("".concat(this.addWidgetPrefix(Vf)," ").concat(this.addWidgetPrefix(Zn))).append(e):this.callBase(t,e)},_getGroupCellOptions(t){return this.callBase(this._isFixedTableRendering?(0,C.l)({},t,{columns:this._columnsController.getVisibleColumns()}):t)},_renderGroupedCells(t,e){return this.callBase(t,(0,C.l)({},e,{columns:this._columnsController.getVisibleColumns()}))},_renderGroupSummaryCells(t,e){this.callBase(t,this._isFixedTableRendering?(0,C.l)({},e,{columns:this._columnsController.getVisibleColumns()}):e)},_hasAlignByColumnSummaryItems(t,e){var i=this.callBase.apply(this,arguments),a=e.columns[t];return e.isFixed?a.fixed&&(i||"right"===a.fixedPosition):i&&(!this._isFixedColumns||!a.fixed)},_renderGroupSummaryCellsCore(t,e,i,a){var r;if(this._isFixedTableRendering){e.isFixed=!0,r=this._getAlignByColumnCellCount(i,e),e.isFixed=!1;var n=e.columns.length-r;e=(0,C.l)({},e,{columns:this.getFixedColumns()});var s=Mt(e.columns);n<s?(r-=e.columns[s].colspan-1||0,i-=e.columns[s].colspan-1||0):a>0&&t.css("visibility","hidden"),a=r}this.callBase(t,e,i,a)},_getSummaryCellIndex(t,e){if(this._isFixedTableRendering){var i=Mt(e);return t>i&&(t+=e[i].colspan-1),t}return this.callBase.apply(this,arguments)},_renderCore(t){this._detachHoverEvents();var e=this.callBase(t),i=this._isFixedColumns;return this.element().toggleClass("dx-fixed-columns",i),this.option("hoverStateEnabled")&&i&&this._attachHoverEvents(),e},setRowsOpacity(t,e){this.callBase(t,e);var i=this._getRowElements(this._fixedTableElement);this._setRowsOpacityCore(i,this.getFixedColumns(),t,e)},optionChanged(t){this.callBase(t),"hoverStateEnabled"===t.name&&this._isFixedColumns&&(t.value?this._attachHoverEvents():this._detachHoverEvents())},getCellIndex(t){var e=this._fixedTableElement,i=0;if(e&&t.is("td")&&t.closest(e).length){var a=this.getFixedColumns();return(0,y.S6)(a,(r,n)=>{if(r===t[0].cellIndex)return!1;n.colspan?i+=n.colspan:i++}),i}return this.callBase.apply(this,arguments)},_updateFixedTablePosition(t,e){if(this._fixedTableElement&&this._tableElement){var i,a=this.getController("editorFactory");this._fixedTableElement.parent().scrollTop(t),e&&a&&(i=a.focus())&&a.focus(i)}},setScrollerSpacing(t,e){var i={marginBottom:0},a=this.element().children(".".concat(this.addWidgetPrefix(Zn)));a.length&&this._fixedTableElement&&(a.css(i),this._fixedTableElement.css(i),i[this.option("rtlEnabled")?"marginLeft":"marginRight"]=t,i.marginBottom=e,(this._scrollable&&this._scrollable.option("useNative")?a:this._fixedTableElement).css(i))},_getElasticScrollTop(t){var e=0;if(t.scrollOffset.top<0)e=-t.scrollOffset.top;else if(t.reachedBottom){var i=(0,p.Z)(t.component.content()),a=(0,p.Z)(t.component.container()),r=Math.max(i.get(0).clientHeight-a.get(0).clientHeight,0);e=Math.min(r-t.scrollOffset.top,0)}return Math.floor(e)},_applyElasticScrolling(t){if(this._fixedTableElement){var e=this._getElasticScrollTop(t);0!==Math.ceil(e)?(0,le.pB)(this._fixedTableElement,{top:e}):this._fixedTableElement.css("transform","")}},_handleScroll(t){this._updateFixedTablePosition(t.scrollOffset.top,!0),this._applyElasticScrolling(t),this.callBase(t)},_updateContentPosition(t){this.callBase.apply(this,arguments),t||this._updateFixedTablePosition(this._scrollTop)},_afterRowPrepared(t){this._isFixedTableRendering||this.callBase(t)},_scrollToElement(t){this.callBase(t,this.getFixedColumnsOffset())},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._fixedScrollTimeout)}}),JM={defaultOptions:()=>({columnFixing:{enabled:!1,texts:{fix:A.Z.format("dxDataGrid-columnFixingFix"),unfix:A.Z.format("dxDataGrid-columnFixingUnfix"),leftPosition:A.Z.format("dxDataGrid-columnFixingLeftPosition"),rightPosition:A.Z.format("dxDataGrid-columnFixingRightPosition")}}}),extenders:{views:{columnHeadersView:jM,rowsView:qM,footerView:ql},controllers:{draggingHeader:{_generatePointsByColumns(t){var r,n,s,o,l,e=t.columns,{targetDraggingPanel:i}=t;if(i&&"headers"===i.getName()&&i.isFixedColumns()&&t.sourceColumn.fixed){t.rowIndex||(t.columnElements=i.getFixedColumnElements(0)),t.columns=i.getFixedColumns(t.rowIndex);var a=this.callBase(t);return r=e,s=a,o=Mt(n=t.columns),l=r.length-n.length,(0,y.S6)(s,(d,u)=>{u.index>o&&(u.columnIndex+=l,u.index+=l)}),a}return this.callBase(t)},_pointCreated(t,e,i,a){var r=this.callBase.apply(this,arguments),n=e[t.columnIndex],s=this._columnHeadersView.getTransparentColumnElement();if(!r&&"headers"===i&&s&&s.length){var o=(0,se.l)(s.get(0));return a&&a.fixed?"right"===a.fixedPosition?t.x<o.right:t.x>o.left:!(!n||!n.fixed||"right"===n.fixedPosition)||t.x<o.left||t.x>o.right}return r}},columnsResizer:{_generatePointsByColumns(){var t=this,e=t._columnsController,i=e&&t._columnsController.getVisibleColumns(),a=e&&t._columnsController.getFixedColumns(),r=Mt(a),n=i.length-a.length,s=t._columnHeadersView.getFixedColumnElements();t.callBase(),s&&s.length>0&&(t._pointsByFixedColumns=V.getPointsByColumns(s,o=>(o.index>r&&(o.columnIndex+=n,o.index+=n),t._pointCreated(o,i.length,i))))},_getTargetPoint(t,e,i){var a=this._columnHeadersView.getTransparentColumnElement();if(a&&a.length){var r=(0,se.l)(a.get(0));if(e<=r.left||e>=r.right)return this.callBase(this._pointsByFixedColumns,e,i)}return this.callBase(t,e,i)}}}}};$.registerModule("columnFixing",JM);var Hf="columnHeadersView",Zf="rowsView",Xl=[Hf,Zf,"footerView"],kt="adaptiveHidden",yi="detailAdaptive",Jl="dx-field-item-content",rr="hidden-column",$f="dx-command-adaptive",$n="dx-command-adaptive-hidden",Ql="dx-adaptive-item-text",zn="adaptive",zf="dx-group-cell",Wf="dxDataGrid-ariaAdaptiveExpand";function Wn(t,e){return t._columnsController.getColumnId(e)}function _k(t,e){var i,a=(0,p.Z)(t),r=e.component.getController("adaptiveColumns");"data"===e.rowType?(i=(0,p.Z)("<span>").addClass(r.addWidgetPrefix("adaptive-more")),S.Z.on(i,(0,D.V4)(ie.u,"dxDataGridAdaptivity"),r.createAction(()=>{r.toggleExpandAdaptiveDetailRow(e.key)})),i.appendTo(a)):V.setEmptyText(a)}function td(t){var e,i=null===(e=t.data)||void 0===e?void 0:e.$nextCell;S.Z.off(i,"focus",td),S.Z.trigger(i,"dxclick")}var vk={_isRowEditMode(){return"row"===this._getEditMode()},_isItemModified(t,e){var i=this._columnsController.getVisibleIndex(t.column.index),a=this._dataController.getRowIndexByKey(e.key),r=this._dataController.items()[a+1];return r&&r.modifiedValues&&(0,v.$K)(r.modifiedValues[i])},_renderFormViewTemplate(t,e,i){var a=this,{column:r}=t,n=a.createAction(()=>{a._editingController.isEditing()&&S.Z.trigger(i,ie.u)}),s=e.row.data,o=r.calculateCellValue(s),l=V.getDisplayValue(r,o,s,e.rowType),d=V.formatValue(l,r),u=this._editingController.isCellOrBatchEditMode(),h=a._rowsView;if(r.allowEditing&&a.getController("keyboardNavigation").isKeyboardEnabled()&&(i.attr("tabIndex",a.option("tabIndex")),u&&(S.Z.off(i,"focus",n),S.Z.on(i,"focus",n))),r.cellTemplate){var c=(0,C.l)({},e,{value:o,displayValue:l,text:d,column:r});h.renderTemplate(i,r.cellTemplate,c,(0,st.al)(i)).done(()=>{h._cellPrepared(i,e)})}else{var _=i.get(0);r.encodeHtml?_.textContent=d:_.innerHTML=d,i.addClass(Ql),(!(0,v.$K)(d)||""===d)&&i.html("&nbsp;"),a._isRowEditMode()||a._isItemModified(t,e)&&i.addClass("dx-item-modified"),h._cellPrepared(i,e)}},_getTemplate(t,e){var i=this,{column:a}=t,r=this.getController("editing");return function(n,s){var o=(0,p.Z)(s),l=i._columnsController.getVisibleIndex(a.index),d=(0,C.l)({},e),u=function(){var h=i._isItemEdited(t);d.value=e.row.values[l],h||a.showEditorAlways?r.renderFormEditorTemplate(d,t,n,o,!h):(d.column=a,d.columnIndex=l,i._renderFormViewTemplate(t,d,o))};u(),d.watch&&d.watch(()=>({isItemEdited:i._isItemEdited(t),value:e.row.values[l]}),()=>{o.contents().remove(),o.removeClass(Ql),u()})}},_isVisibleColumnsValid:t=>!(t<2||t.length-function(){for(var e=0,i=0;i<t.length;i++)t[i].command&&e++;return e}()<=1),_calculatePercentWidths(t,e){var i=this,a=0;return e.forEach((r,n)=>{t[n]!==kt&&(a+=i._getItemPercentWidth(r))}),a},_isPercentWidth:t=>(0,v.HD)(t)&&t.endsWith("%"),_isColumnHidden(t){return this._hiddenColumns.filter(e=>e.index===t.index).length>0},_getAverageColumnsWidth(t,e,i){var a=this,r=0,n=0;return e.forEach(s=>{if(!a._isColumnHidden(s)){var{width:o}=s;(0,v.$K)(o)&&!isNaN(parseFloat(o))?r+=a._isPercentWidth(o)?a._calculatePercentWidth({visibleIndex:s.visibleIndex,columnsCount:e.length,columnsCanFit:i,bestFitWidth:s.bestFitWidth,columnWidth:o,containerWidth:t}):parseFloat(o):n++}}),(t-r)/n},_calculateColumnWidth(t,e,i,a){var l,r=Wn(this,t),n=this._columnsController.columnOption(r,"width"),s=this._columnsController.columnOption(r,"bestFitWidth"),o=i.length;if(n&&"auto"!==n){if(!this._isPercentWidth(n))return parseFloat(n);l=this._calculatePercentWidth({visibleIndex:t.visibleIndex,columnsCount:o,columnsCanFit:a,bestFitWidth:s,columnWidth:n,containerWidth:e})}else l=this.option("columnAutoWidth")||t.command?s:this._getAverageColumnsWidth(e,i,a);return l},_calculatePercentWidth(t){var e=t.visibleIndex<t.columnsCount-1&&t.columnsCanFit,i=t.containerWidth*parseFloat(t.columnWidth)/100,a=t.columnsCanFit&&i<t.bestFitWidth?t.bestFitWidth:i;return e?t.containerWidth*parseFloat(t.columnWidth)/100:a},_getNotTruncatedColumnWidth(t,e,i,a){var r=Wn(this,t),n=this._columnsController.columnOption(r,"width"),s=this._columnsController.columnOption(r,"bestFitWidth");if(n&&"auto"!==n&&!this._isPercentWidth(n))return parseFloat(n);var o=this._calculateColumnWidth(t,e,i,a);return o<s?null:o},_getItemPercentWidth(t){var e=0;return t.width&&this._isPercentWidth(t.width)&&(e=parseFloat(t.width)),e},_getCommandColumnsWidth(){var t=this,e=t._columnsController.getVisibleColumns(),i=0;return(0,y.S6)(e,(a,r)=>{(r.index<0||r.command)&&(i+=t._columnsController.columnOption(Wn(t,r),"bestFitWidth")||0)}),i},_isItemEdited(t){if(this.isFormOrPopupEditMode())return!1;if(!this._isRowEditMode()){var i=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,a=this._columnsController.getVisibleIndex(t.column.index);return this._editingController.isEditCell(i,a)}var e=this.option("editing.editRowKey");return!!(0,E.bY)(e,this._dataController.adaptiveExpandedKey())||void 0},_getFormItemsByHiddenColumns(t){var e=[];return(0,y.S6)(t,(i,a)=>{e.push({column:a,name:a.name,dataField:a.dataField,visibleIndex:a.visibleIndex})}),e},_getAdaptiveColumnVisibleIndex(t){for(var e=0;e<t.length;e++)if(t[e].command===zn)return e},_hideAdaptiveColumn(t,e){var i=this._getAdaptiveColumnVisibleIndex(e);(0,v.$K)(i)&&(t[i]=kt,this._hideVisibleColumn({isCommandColumn:!0,visibleIndex:i}))},_showHiddenCellsInView(t){var{$cells:e,isCommandColumn:i}=t,a=this.addWidgetPrefix(rr);i?(a=$n,e.attr({tabIndex:0,"aria-hidden":null}).removeClass(a)):e.removeClass(a)},_showHiddenColumns(){for(var t=0;t<Xl.length;t++){var e=this.getView(Xl[t]);if(e&&e.isVisible()&&e.element()){var i=e.name,a=e.element().find(".".concat($n));this._showHiddenCellsInView({viewName:i,$cells:a,isCommandColumn:!0});var r=e.element().find(".".concat(this.addWidgetPrefix(rr)));this._showHiddenCellsInView({viewName:i,$cells:r})}}},_isCellValid:t=>t&&t.length&&!t.hasClass("dx-master-detail-cell")&&!t.hasClass(zf),_hideVisibleColumn(t){var{isCommandColumn:e,visibleIndex:i}=t,a=this;Xl.forEach(r=>{var n=a.getView(r);n&&a._hideVisibleColumnInView({view:n,isCommandColumn:e,visibleIndex:i})})},_hideVisibleColumnInView(t){var n,{view:e,isCommandColumn:i,visibleIndex:a}=t,r=e.name,s=this._columnsController.getVisibleColumns()[a],o=this._editingController&&this._editingController.getEditFormRowIndex();if(e&&e.isVisible()&&s)for(var l=e.getRowsCount(),d=e._getRowElements(),u=0;u<l;u++)if(u!==o||r!==Zf||"popup"===this.option("editing.mode")){var c=r===Hf?this._columnsController.getVisibleIndex(s.index,u):a;if(c>=0){var _=d.eq(u);n=this._findCellElementInRow(_,c),this._isCellValid(n)&&this._hideVisibleCellInView({viewName:r,isCommandColumn:i,$cell:n})}}},_findCellElementInRow(t,e){var i=t.children(),a=e,r=!1;if(t.hasClass("dx-group-row")){var n=t.find(".".concat(zf)),s=n.attr("colspan");if(n.length&&(0,v.$K)(s)){var o=parseInt(s);e>n.index()+o-1?a=e-o+1:r=!0}}return r?void 0:i.eq(a)},_hideVisibleCellInView(t){var{$cell:e,isCommandColumn:i}=t,a=i?$n:this.addWidgetPrefix(rr);e.attr({tabIndex:-1,"aria-hidden":!0}).addClass(a)},_getEditMode(){return this._editingController.getEditMode()},isFormOrPopupEditMode(){var t=this._getEditMode();return"form"===t||"popup"===t},hideRedundantColumns(t,e,i){if(this._hiddenColumns=[],this._isVisibleColumnsValid(e)&&i.length){var d,u,h,a=0,r=this.component.$element(),n=(0,I.dz)(r)-this._getCommandColumnsWidth(),s=function(){return e.filter(F=>!F.command&&0===this._hiddenColumns.filter(N=>N.index===F.index).length)}.bind(this),o=s(),l=o.length;do{h=!1,a=0;var c=this._calculatePercentWidths(t,e),_=c<100&&0!==c;for(d=0;d<e.length;d++){var g=e[d],f=this._getNotTruncatedColumnWidth(g,n,o,_),m=Wn(this,g),x=this._columnsController.columnOption(m,"width"),w=this._columnsController.columnOption(m,"minWidth"),T=this._columnsController.columnOption(m,"bestFitWidth");if(t[d]!==kt){if(!f&&!g.command&&!g.fixed){h=!0;break}(!x||"auto"===x)&&(f=Math.max(T||0,w||0)),(g.command!==zn||u)&&(a+=f)}else u=!0}if(h=h||a>(0,I.dz)(r)){var O=i.pop(),P=this._columnsController.getVisibleIndex(O.index);n+=this._calculateColumnWidth(O,n,o,_),this._hideVisibleColumn({visibleIndex:P}),t[P]=kt,this._hiddenColumns.push(O),o=s()}}while(h&&o.length>1&&i.length);l===o.length&&this._hideAdaptiveColumn(t,e)}else this._hideAdaptiveColumn(t,e)},getAdaptiveDetailItems(){return this._$itemContents},getItemContentByColumnIndex(t){for(var e,i=0;i<this._$itemContents.length;i++){var a=(e=this._$itemContents.eq(i)).data("dx-form-item");if(a&&a.column&&this._columnsController.getVisibleIndex(a.column.index)===t)return e}},toggleExpandAdaptiveDetailRow(t,e){this.isFormOrPopupEditMode()&&this._editingController.isEditing()||this.getController("data").toggleExpandAdaptiveDetailRow(t,e)},createFormByHiddenColumns(t,e){var i=this,a=(0,p.Z)(t),r={items:i._getFormItemsByHiddenColumns(i._hiddenColumns),formID:"dx-".concat(new Ee.Z)},n=(0,oe.x2)()?{colCount:2}:{};this.executeAction("onAdaptiveDetailRowPreparing",{formOptions:r}),i._$itemContents=null,i._form=i._createComponent((0,p.Z)("<div>").appendTo(a),gv,(0,C.l)(n,r,{customizeItem(s){var o=s.column||i._columnsController.columnOption(s.name||s.dataField);o&&(s.label=s.label||{},s.label.text=s.label.text||o.caption,s.column=o,s.template=i._getTemplate(s,e,i.updateForm.bind(i))),r.customizeItem&&r.customizeItem.call(this,s)},onContentReady(s){r.onContentReady&&r.onContentReady.call(this,s),i._$itemContents=a.find(".".concat(Jl))}}))},hasAdaptiveDetailRowExpanded(){return(0,v.$K)(this._dataController.adaptiveExpandedKey())},updateForm(t){this.hasAdaptiveDetailRowExpanded()&&this._form&&(0,v.$K)(this._form._contentReadyAction)&&(t&&t.length?this._form.option("items",this._getFormItemsByHiddenColumns(t)):this._form.repaint())},updateHidingQueue(t){var i,a,e=t.filter(n=>n.visible&&!n.type&&!n.fixed&&!((0,v.$K)(n.groupIndex)&&n.groupIndex>=0));if(this._hidingColumnsQueue=[],this.option("allowColumnResizing")&&"widget"===this.option("columnResizingMode"))return this._hidingColumnsQueue;for(a=0;a<e.length;a++)(0,v.$K)(e[a].hidingPriority)&&e[a].hidingPriority>=0&&(i=!0,this._hidingColumnsQueue[e[a].hidingPriority]=e[a]);if(i)this._hidingColumnsQueue.reverse();else if(this.option("columnHidingEnabled"))for(a=0;a<e.length;a++){var r=this._columnsController.getVisibleIndex(e[a].index);this._hidingColumnsQueue[r]=e[a]}return this._hidingColumnsQueue=this._hidingColumnsQueue.filter(Object),this._hidingColumnsQueue},getHiddenColumns(){return this._hiddenColumns},hasHiddenColumns(){return this._hiddenColumns.length>0},getHidingColumnsQueue(){return this._hidingColumnsQueue},init(){var t=this;t._columnsController=t.getController("columns"),t._dataController=t.getController("data"),t._rowsView=t.getView("rowsView"),t._columnsController.addCommandColumn({type:zn,command:zn,visible:!0,adaptiveHidden:!0,cssClass:$f,alignment:"center",width:"auto",cellTemplate:_k,fixedPosition:"right"}),t._columnsController.columnsChanged.add(()=>{var e=!!t.updateHidingQueue(t._columnsController.getColumns()).length;t._columnsController.columnOption("command:adaptive","adaptiveHidden",!e,!0)}),t._editingController=t.getController("editing"),t._hidingColumnsQueue=[],t._hiddenColumns=[],t.createAction("onAdaptiveDetailRowPreparing"),t.callBase()},optionChanged(t){"columnHidingEnabled"===t.name&&this._columnsController.columnOption("command:adaptive","adaptiveHidden",!t.value),this.callBase(t)},publicMethods:()=>["isAdaptiveDetailRowExpanded","expandAdaptiveDetailRow","collapseAdaptiveDetailRow"],isAdaptiveDetailRowExpanded(t){var e=this._dataController;return e.adaptiveExpandedKey()&&(0,E.bY)(e.adaptiveExpandedKey(),t)},expandAdaptiveDetailRow(t){this.hasAdaptiveDetailRowExpanded()||this.toggleExpandAdaptiveDetailRow(t)},collapseAdaptiveDetailRow(){this.hasAdaptiveDetailRowExpanded()&&this.toggleExpandAdaptiveDetailRow()},updateCommandAdaptiveAriaLabel(t,e){var i=this._dataController.getRowIndexByKey(t);if(-1!==i){var a=(0,p.Z)(this.component.getRowElement(i));this.setCommandAdaptiveAriaLabel(a,e)}},setCommandAdaptiveAriaLabel(t,e){t.find(".dx-command-adaptive").attr("aria-label",A.Z.format(e))}},mk={defaultOptions:()=>({columnHidingEnabled:!1,onAdaptiveDetailRowPreparing:null}),controllers:{adaptiveColumns:ne.ViewController.inherit(vk)},extenders:{views:{rowsView:{_getCellTemplate(t){var e=this,{column:i}=t;return t.rowType===yi&&"detail"===i.command?function(a,r){e._adaptiveColumnsController.createFormByHiddenColumns((0,p.Z)(a),r)}:e.callBase(t)},_createRow(t){var e=this.callBase.apply(this,arguments);return t&&t.rowType===yi&&t.key===this._dataController.adaptiveExpandedKey()&&e.addClass("dx-adaptive-detail-row"),e},_renderCells(t,e){this.callBase(t,e);var i=this._adaptiveColumnsController,a=i.getHidingColumnsQueue().length,r=i.getHiddenColumns().length;a&&!r&&function pk(t){return t.find("td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])")}(t).last().addClass("dx-last-data-cell"),"data"===e.row.rowType&&i.setCommandAdaptiveAriaLabel(t,Wf)},_getColumnIndexByElementCore(t){var e=t.closest(".".concat(Jl));if(e.length&&e.closest(this.component.$element()).length){var i=e.length?e.first().data("dx-form-item"):null;return i&&i.column&&this._columnsController.getVisibleIndex(i.column.index)}return this.callBase(t)},_cellPrepared(t,e){this.callBase.apply(this,arguments),e.row.rowType!==yi&&e.column.visibleWidth===kt&&t.addClass(this.addWidgetPrefix(rr))},getCell(t,e){var i=this._dataController.items()[t?.rowIndex];if(i?.rowType===yi){var a=this._adaptiveColumnsController.getAdaptiveDetailItems();return this.callBase(t,e,a)}return this.callBase.apply(this,arguments)},_getCellElement(t,e){var i=this._dataController.items()[t];return i&&i.rowType===yi?this._adaptiveColumnsController.getItemContentByColumnIndex(e):this.callBase.apply(this,arguments)},getContextMenuItems(t){if(t.row&&"detailAdaptive"===t.row.rowType){var e=this.component.getView("columnHeadersView"),i=(0,p.Z)(t.targetElement).closest(".dx-field-item-label").next().data("dx-form-item");return t.column=i?i.column:t.column,e.getContextMenuItems&&e.getContextMenuItems(t)}return this.callBase&&this.callBase(t)},isClickableElement(t){return!!this.callBase&&this.callBase(t)||!!t.closest(".".concat($f)).length},init(){this.callBase(),this._adaptiveColumnsController=this.getController("adaptiveColumns")}}},controllers:{export:{_updateColumnWidth(t,e){this.callBase(t,t.visibleWidth===kt?t.bestFitWidth:e)}},columnsResizer:{_pointCreated(t,e,i){var a=this.callBase(t,e,i),r=i[t.columnIndex]||{},n=this._getNextColumnIndex(t.columnIndex);return a||r.visibleWidth===kt||n!==t.columnIndex+1&&(i[n]||{}).command},_getNextColumnIndex(t){for(var e=this._columnsController.getVisibleColumns(),i=this.callBase(t);e[i]&&e[i].visibleWidth===kt;)i++;return i}},draggingHeader:{_pointCreated(t,e,i,a){return this.callBase(t,e,i,a)||(e[t.columnIndex-1]||{}).visibleWidth===kt}},editing:{_isRowEditMode(){return"row"===this.getEditMode()},_getFormEditItemTemplate(t,e){return"row"!==this.getEditMode()&&"detailAdaptive"===t.rowType?(t.columnIndex=this._columnsController.getVisibleIndex(e.index),this.getColumnTemplate(t)):this.callBase(t,e)},_closeEditItem(t){var e=t.closest(".".concat(Jl)),i=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,a=e.length?e.first().data("dx-form-item"):null,r=a&&a.column&&this._columnsController.getVisibleIndex(a.column.index);this.isEditCell(i,r)||this.callBase(t)},_beforeUpdateItems(t,e){if(!this._adaptiveController.isFormOrPopupEditMode()&&this._adaptiveController.hasHiddenColumns()){var i=this._dataController.items(),a=i[e],r=V.getIndexByKey(this._dataController.adaptiveExpandedKey(),i);this._isForceRowAdaptiveExpand=!this._adaptiveController.hasAdaptiveDetailRowExpanded(),r>=0&&t.push(r+1),t.push(e+1),this._dataController.adaptiveExpandedKey(a.key)}},_afterInsertRow(t){this.callBase.apply(this,arguments),this._adaptiveController.hasHiddenColumns()&&(this._adaptiveController.toggleExpandAdaptiveDetailRow(t,this.isRowEditMode()),this._isForceRowAdaptiveExpand=!0)},_collapseAdaptiveDetailRow(){this._isRowEditMode()&&this._isForceRowAdaptiveExpand&&(this._adaptiveController.collapseAdaptiveDetailRow(),this._isForceRowAdaptiveExpand=!1)},_cancelEditAdaptiveDetailRow(){this._adaptiveController.hasHiddenColumns()&&this._collapseAdaptiveDetailRow()},_afterSaveEditData(){this.callBase.apply(this,arguments);var t=new b.BH;return this._isRowEditMode()&&this._adaptiveController.hasHiddenColumns()?(0,b.gx)(this.getController("validating").validate(!0)).done(e=>{e&&this._cancelEditAdaptiveDetailRow(),t.resolve()}):t.resolve(),t.promise()},_beforeCancelEditData(){this.callBase(),this._cancelEditAdaptiveDetailRow()},_getRowIndicesForCascadeUpdating(t){var e=this.callBase.apply(this,arguments);return this._adaptiveController.isAdaptiveDetailRowExpanded(t.key)&&e.push(t.rowType===yi?t.rowIndex-1:t.rowIndex+1),e},_beforeCloseEditCellInBatchMode(t){var e=this._dataController._adaptiveExpandedKey;if(e){var i=V.getIndexByKey(e,this._dataController.items());i>-1&&t.unshift(i)}},editRow(t){this._adaptiveController.isFormOrPopupEditMode()&&this._adaptiveController.collapseAdaptiveDetailRow(),this.callBase(t)},deleteRow(t){var e=this._dataController.getKeyByRowIndex(t);"batch"===this.getEditMode()&&this._adaptiveController.isAdaptiveDetailRowExpanded(e)&&this._adaptiveController.collapseAdaptiveDetailRow(),this.callBase(t)},init(){this.callBase(),this._adaptiveController=this.getController("adaptiveColumns")}},resizing:{_needBestFit(){return this.callBase()||!!this._adaptiveColumnsController.getHidingColumnsQueue().length},_correctColumnWidths(t,e){var i=this._adaptiveColumnsController,a=i.getHiddenColumns(),r=i.updateHidingQueue(this._columnsController.getColumns());i.hideRedundantColumns(t,e,r);var n=i.getHiddenColumns();return i.hasAdaptiveDetailRowExpanded()&&a.length!==n.length&&i.updateForm(n),!n.length&&i.collapseAdaptiveDetailRow(),this.callBase.apply(this,arguments)},_toggleBestFitMode(t){t&&this._adaptiveColumnsController._showHiddenColumns(),this.callBase(t)},_needStretch(){var t=this._adaptiveColumnsController;return this.callBase.apply(this,arguments)||t.getHidingColumnsQueue().length||t.hasHiddenColumns()},init(){this._adaptiveColumnsController=this.getController("adaptiveColumns"),this.callBase()},dispose(){this.callBase.apply(this,arguments),clearTimeout(this._updateScrollableTimeoutID)}},data:{_processItems(t,e){var{changeType:i}=e;if(t=this.callBase.apply(this,arguments),"loadingAll"===i||!(0,v.$K)(this._adaptiveExpandedKey))return t;var a=V.getIndexByKey(this._adaptiveExpandedKey,t),r=!1===this.option("scrolling.legacyMode");if(a>=0){var n=t[a];t.splice(a+1,0,{visible:!0,rowType:yi,key:n.key,data:n.data,node:n.node,modifiedValues:n.modifiedValues,isNewRow:n.isNewRow,values:n.values})}else"refresh"===i&&(!r||!e.repaintChangesOnly)&&(this._adaptiveExpandedKey=void 0);return t},_getRowIndicesForExpand(t){var e=this.callBase.apply(this,arguments);return this.getController("adaptiveColumns").isAdaptiveDetailRowExpanded(t)&&e.push(e[e.length-1]+1),e},adaptiveExpandedKey(t){if(!(0,v.$K)(t))return this._adaptiveExpandedKey;this._adaptiveExpandedKey=t},toggleExpandAdaptiveDetailRow(t,e){var i=V.getIndexByKey(this._adaptiveExpandedKey,this._items),a=V.getIndexByKey(t,this._items);i>=0&&i===a&&!e&&(t=void 0,a=-1);var r=this._adaptiveExpandedKey;this._adaptiveExpandedKey=t,i>=0&&i++,a>=0&&a++;var n=this.getRowIndexDelta();this.updateItems({allowInvisibleRowIndices:!0,changeType:"update",rowIndices:[i-n,a-n]});var s=this.getController("adaptiveColumns");s.updateCommandAdaptiveAriaLabel(t,"dxDataGrid-ariaAdaptiveCollapse"),s.updateCommandAdaptiveAriaLabel(r,Wf)},init(){this.callBase(),this._adaptiveExpandedKey=void 0}},editorFactory:{_needHideBorder(t){return this.callBase(t)||t?.hasClass("dx-field-item-content")&&t?.find(".dx-checkbox").length},_getFocusCellSelector(){return"".concat(this.callBase(),", .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content")},_getRevertTooltipsSelector(){return"".concat(this.callBase(),", .dx-field-item-content .").concat(this.addWidgetPrefix("revert-tooltip"))}},columns:{_isColumnVisible(t){return this.callBase(t)&&!t.adaptiveHidden}},keyboardNavigation:t=>class extends t{_isCellValid(e,i){return super._isCellValid(e,i)&&!e.hasClass(this.addWidgetPrefix(rr))&&!e.hasClass($n)}_processNextCellInMasterDetail(e,i){super._processNextCellInMasterDetail(e,i);var a=this._editingController.isCellOrBatchEditMode();this._editingController.isEditing()&&e&&a&&!this._isInsideEditForm(e)&&(S.Z.off(e,"focus",td),S.Z.on(e,"focus",{$nextCell:e},td),S.Z.trigger(i,"focus"))}_isCellElement(e){return super._isCellElement(e)||e.hasClass(Ql)}init(){super.init(),this._adaptiveController=this.getController("adaptiveColumns")}}}}};function Kf(t,e,i,a,r,n){n=n||[],(a=a||[])[i=i||0]=a[i]||0;var d,s=t[i],l=0;if(s){for(d=n[i]+1||0;d<s.length;d++){var u=s[d],h=d+a[i],c=u.colspan||1;if(Kf(t,e,i+(u.rowspan||1),a,c,n),a[i]+=c-1,l+=c,u.rowspan)for(var _=i+1;_<i+u.rowspan;_++)a[_]=a[_]||0,a[_]+=u.colspan||1;if(!1===e(u,h,i,d)||void 0!==r&&l>=r)break}n[i]=d}}function id(t,e,i){var a=[];Kf(t,(n,s,o)=>{var d,l=n,u=l.colspan||1,h=s+u-1>=e&&s<i;if(a[o]=a[o]||[],h)s<e?(d=u-(e-s),s=e):d=u,s+d>i&&(d=i-s),d!==u&&(l=(0,C.l)({},l,{colspan:d})),a[o].push(l);else if(s>i)return!1});for(var r=0;r<a.length;r++)a[r]=a[r]||[];return a}$.registerModule("adaptivity",mk);var Sk={_resizeCore(){this.callBase.apply(this,arguments),this._columnsController.resize()},_handleScroll(t){var e=this.getScrollable(),{left:i}=t.scrollOffset;this.callBase.apply(this,arguments),this.option("rtlEnabled")&&e&&(i=(0,I.dz)(e.$content())-(0,I.dz)(e.$element())-i),this._columnsController.setScrollPosition(i)},_restoreScrollTop(){var t=this.getScrollable(),e=t?.scrollTop();this._scrollTop>0&&e!==this._scrollTop&&t.scrollTo({y:this._scrollTop})},_renderCore(t){if(t?.virtualColumnsScrolling){var e=()=>{this.resizeCompleted.remove(e),this._restoreScrollTop()};this.resizeCompleted.add(e)}return this.callBase.apply(this,arguments)}},xk={_renderCore(){var t=this.callBase.apply(this,arguments);return this._columnsController.isVirtualMode()&&this._updateScrollLeftPosition(),t}},bk=function(){var t=function(i){return i.map(a=>a.visibleWidth||parseFloat(a.width)||50)},e={init(){this.callBase.apply(this,arguments),this._beginPageIndex=null,this._endPageIndex=null,this._position=0,this._virtualVisibleColumns={}},resetColumnsCache(){this.callBase(),this._virtualVisibleColumns={}},getBeginPageIndex(i){for(var a=this.getVisibleColumns(void 0,!0),r=t(a),n=0,s=0;s<r.length;s++){if(n>=i)return Math.floor(s/this.getColumnPageSize());n+=r[s]}return 0},getTotalWidth(){var i=this.option("width");return"number"==typeof i?i:this.getController("resizing")._lastWidth||(0,I.Y_)(this.component.$element())},getEndPageIndex(i){var a=this.getVisibleColumns(void 0,!0),r=t(a),n=0;i+=this.getTotalWidth();for(var s=0;s<r.length;s++){if(n>=i)return Math.ceil(s/this.getColumnPageSize());n+=r[s]}return Math.ceil(r.length/this.getColumnPageSize())},getColumnPageSize(){return this.option("scrolling.columnPageSize")},_fireColumnsChanged(){var i=new Date;this.columnsChanged.fire({optionNames:{all:!0,length:1},changeTypes:{columns:!0,virtualColumnsScrolling:!0,length:2}}),this._renderTime=new Date-i},getScrollingTimeout(){var i=this.option("scrolling.columnRenderingThreshold"),a=this.option("scrolling.renderAsync"),r=0;return(!(0,v.$K)(a)&&this._renderTime>i||a)&&(r=this.option("scrolling.timeout")),r},setScrollPosition(i){var a=this.getScrollingTimeout();a>0?(clearTimeout(this._changedTimeout),this._changedTimeout=setTimeout(()=>{this._setScrollPositionCore(i)},a)):this._setScrollPositionCore(i)},isVirtualMode(){return(0,Z.Ym)()&&"virtual"===this.option("scrolling.columnRenderingMode")},resize(){this._setScrollPositionCore(this._position)},_setScrollPositionCore(i){if(this.isVirtualMode()){var a=this.getBeginPageIndex(i),r=this.getEndPageIndex(i),n=i<this._position?this._beginPageIndex>a:this._endPageIndex<r;this._position=i,n&&(this._beginPageIndex=a,this._endPageIndex=r,this._fireColumnsChanged())}},getFixedColumns(i,a){var r=this.callBase(i);if(this.isVirtualMode()&&!a&&r.length){var n=r.map(s=>s.command).indexOf("transparent");return r[n].colspan=this.getVisibleColumns().length-this.callBase().length+1,r}return r},_compileVisibleColumns(i,a){var r;if(a||!this.isVirtualMode()||!this._shouldReturnVisibleColumns())return this.callBase(i);null!==(r=this._columns)&&void 0!==r&&r.length&&!(0,v.$K)(this._beginPageIndex)&&!(0,v.$K)(this._endPageIndex)&&(this._beginPageIndex=this.getBeginPageIndex(this._position),this._endPageIndex=this.getEndPageIndex(this._position));var n=this._beginPageIndex,s=this._endPageIndex,o="".concat(i,"-").concat(n,"-").concat(s);if(this._virtualVisibleColumns[o])return this._virtualVisibleColumns[o];var l=this.callBase(),d=this.getRowCount(),u=this.getColumnPageSize(),h=n*u,c=s*u,_=this.getFixedColumns(void 0,!0),g=_.map(k=>k.command).indexOf("transparent"),f=_.length?g:0,m=l.slice(0,f),x=l.slice(f,h),w=t(x).reduce((k,U)=>k+U,0);w||(h=0);var T=_.length?_.length-g-1:0,O=l.slice(l.length-T),P=l.slice(c,l.length-T),F=t(P).reduce((k,U)=>k+U,0);if(F||(c=l.length),d>1&&"number"==typeof i){for(var N=[],H=0;H<=d;H++)N.push(this.callBase(H));m=id(N,0,m.length)[i]||[],O=id(N,l.length-O.length,l.length)[i]||[],l=id(N,h,c)[i]||[]}else l=l.slice(h,c);return w&&(l.unshift({command:"virtual",width:w}),l=m.concat(l)),F&&(l.push({command:"virtual",width:F}),l=l.concat(O)),this._virtualVisibleColumns[o]=l,l},getColumnIndexOffset(){var i=0;if(this._beginPageIndex>0){var r=this.getFixedColumns().map(s=>s.command).indexOf("transparent"),n=r>=0?r:0;i=this._beginPageIndex*this.getColumnPageSize()-n-1}return i>0?i:0},dispose(){clearTimeout(this._changedTimeout),this.callBase.apply(this,arguments)}};return e}();$.registerModule("virtualColumns",{defaultOptions:()=>({scrolling:{columnRenderingMode:"standard",columnPageSize:5,columnRenderingThreshold:300}}),extenders:{controllers:{columns:bk},views:{columnHeadersView:xk,rowsView:Sk}}});var nr="dx-buttongroup",yk=nr+"-wrapper",Gf=nr+"-item",Ek=nr+"-first-item",Ik=nr+"-last-item",Uf=Gf+"-has-width",Ak=li.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new oi((t,e,i)=>{this._prepareItemStyles(t);var a=this.option("buttonTemplate");this._createComponent(t,Be.Z,(0,C.l)({},i,e,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(a)?i:{},template:i.template||a}))},["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(t){return(0,v.mf)(t)||this.option("integrationOptions.templates")[t]},_prepareItemStyles(t){var e=t.data("dxItemIndex");0===e&&t.addClass(Ek);var i=this.option("items");i&&e===i.length-1&&t.addClass(Ik),t.addClass("dx-shape-standard")},_renderItemContent(t){return t.container=(0,p.Z)(t.container).parent(),this.callBase(t)},_setAriaSelectionAttribute:function(t,e){this.setAria("pressed",e,t)},_renderItemContentByNode:function(t,e){return t.container=(0,p.Z)(t.container.children().first()),this.callBase(t,e)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>Gf,_itemSelectHandler:function(t){"single"===this.option("selectionMode")&&this.isItemSelected(t.currentTarget)||this.callBase(t)}}),Yf=Me.default.inherit({_getDefaultOptions(){return(0,C.l)(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass(nr),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_fireSelectionChangeEvent:function(t,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:t,removedItems:e})},_renderButtons(){var t=(0,p.Z)("<div>").addClass(yk).appendTo(this.$element()),e=this.option("selectedItems"),i={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:a=>{var r=this.option("width");(0,v.$K)(r)&&(0,p.Z)(a.itemElement).addClass(Uf)},onSelectionChanged:a=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(a.addedItems,a.removedItems)},onItemClick:a=>{this._itemClickAction(a)}};(0,v.$K)(e)&&e.length&&(i.selectedItems=e),this._buttonsCollection=this._createComponent(t,Ak,i)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(t){switch(t.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(t.name,t.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(t),this._buttonsCollection.itemElements().toggleClass(Uf,!!t.value);break;default:this.callBase(t)}}});(0,J.Z)("dxButtonGroup",Yf);const Dk=Yf;var jf="dx-dropdownbutton",qf="dx-dropdownbutton-action",Xf="dx-dropdownbutton-toggle",Mk=Me.default.inherit({_getDefaultOptions(){return(0,C.l)(this.callBase(),{itemTemplate:"item",keyExpr:"this",displayExpr:void 0,selectedItem:null,selectedItemKey:null,stylingMode:"outlined",deferRendering:!0,noDataText:A.Z.format("dxCollectionWidget-noDataText"),useSelectMode:!1,splitButton:!1,showArrowIcon:!0,text:"",icon:void 0,onButtonClick:null,onSelectionChanged:null,onItemClick:null,opened:!1,items:null,dataSource:null,focusStateEnabled:!0,hoverStateEnabled:!0,dropDownOptions:{},dropDownContentTemplate:"content",wrapItemText:!1,useItemTextAsTitle:!0,grouped:!1,groupTemplate:"group",buttonGroupOptions:{}})},_setOptionsByReference(){this.callBase(),(0,C.l)(this._optionsByReference,{selectedItem:!0})},_init(){this.callBase(),this._createItemClickAction(),this._createActionClickAction(),this._createSelectionChangedAction(),this._initDataSource(),this._compileKeyGetter(),this._compileDisplayGetter(),this._itemsToDataSource(this.option("items")),this._options.cache("buttonGroupOptions",this.option("buttonGroupOptions")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_initTemplates(){this._templateManager.addDefaultTemplates({content:new mo.k(t=>{var e=(0,p.Z)(t.container),i=(0,p.Z)("<div>").appendTo(e);this._list=this._createComponent(i,La,this._listOptions()),this._list.registerKeyHandler("escape",this._escHandler.bind(this)),this._list.registerKeyHandler("tab",this._escHandler.bind(this)),this._list.registerKeyHandler("leftArrow",this._escHandler.bind(this)),this._list.registerKeyHandler("rightArrow",this._escHandler.bind(this))})}),this.callBase()},_itemsToDataSource:function(t){this._dataSource||(this._dataSource=new ti.o({store:new fr.Z({key:this._getKey(),data:t}),pageSize:0}))},_getKey:function(){var t,e=this.option("keyExpr"),i=null===(t=this._dataSource)||void 0===t?void 0:t.key();return!(0,v.$K)(i)||(0,v.$K)(e)&&"this"!==e?e:i},_compileKeyGetter(){this._keyGetter=(0,Q.vb)(this._getKey())},_compileDisplayGetter(){this._displayGetter=(0,Q.vb)(this.option("displayExpr"))},_initMarkup(){this.callBase(),this.$element().addClass(jf),this._renderButtonGroup(),this._updateArrowClass(),(0,v.$K)(this.option("selectedItemKey"))&&this._loadSelectedItem().done(this._updateActionButton.bind(this))},_renderFocusTarget:E.ZT,_render(){(!this.option("deferRendering")||this.option("opened"))&&this._renderPopup(),this.callBase()},_renderContentImpl(){return this._popup&&this._renderPopupContent(),this.callBase()},_loadSelectedItem(){var t;null===(t=this._loadSingleDeferred)||void 0===t||t.reject();var e=new b.BH;if(this._list&&void 0!==this._lastSelectedItemData){var i=this.option("useSelectMode")?this._list.option("selectedItem"):this._lastSelectedItemData;return e.resolve(i)}this._lastSelectedItemData=void 0;var a=this.option("selectedItemKey");return this._loadSingle(this._getKey(),a).done(e.resolve).fail(()=>{e.resolve(null)}),this._loadSingleDeferred=e,e.promise()},_createActionClickAction(){this._actionClickAction=this._createActionByOption("onButtonClick")},_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_fireSelectionChangedAction(t){var{previousValue:e,value:i}=t;this._selectionChangedAction({item:i,previousItem:e})},_fireItemClickAction(t){var{event:e,itemElement:i,itemData:a}=t;return this._itemClickAction({event:e,itemElement:i,itemData:this._actionItem||a})},_actionButtonConfig(){return{text:this.option("text"),icon:this.option("icon"),elementAttr:{class:qf}}},_getButtonGroupItems(){var t=[];return t.push(this._actionButtonConfig()),this.option("splitButton")&&t.push({icon:"spindown",elementAttr:{class:Xf}}),t},_buttonGroupItemClick(t){var{event:e,itemData:i}=t,a=i.elementAttr.class===qf;i.elementAttr.class===Xf?this.toggle():a&&(this._actionClickAction({event:e,selectedItem:this.option("selectedItem")}),this.option("splitButton")||this.toggle())},_buttonGroupOptions(){var{splitButton:t,showArrowIcon:e,focusStateEnabled:i,hoverStateEnabled:a,stylingMode:r,accessKey:n,tabIndex:s}=this.option(),o=t||!e?"content":(l,d)=>{var{text:u,icon:h}=l,c=(0,vt.H)(h),_=u?(0,p.Z)("<span>").text(u).addClass("dx-button-text"):void 0,g=(0,vt.H)("spindown").addClass("dx-icon-right");(0,p.Z)(d).append(c,_,g)};return(0,C.l)({items:this._getButtonGroupItems(),onItemClick:this._buttonGroupItemClick.bind(this),width:"100%",height:"100%",selectionMode:"none",onKeyboardHandled:l=>this._keyboardHandler(l),buttonTemplate:o,focusStateEnabled:i,hoverStateEnabled:a,stylingMode:r,accessKey:n,tabIndex:s},this._options.cache("buttonGroupOptions"))},_renderPopupContent(){var t=this._popup.$content(),e=this._getTemplateByOption("dropDownContentTemplate");return t.empty(),this._popupContentId="dx-"+new Ee.Z,this.setAria("id",this._popupContentId,t),e.render({container:(0,W.u)(t),model:this.option("items")||this._dataSource})},_popupOptions(){var t=this.option("rtlEnabled")?"right":"left";return(0,C.l)({dragEnabled:!1,focusStateEnabled:!1,deferRendering:this.option("deferRendering"),hideOnOutsideClick:e=>{var i=this.$element();return!(0,p.Z)(e.target).closest(".".concat(jf)).is(i)},showTitle:!1,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},_ignoreFunctionValueDeprecation:!0,width:()=>en(this.$element()),height:"auto",shading:!1,position:{of:this.$element(),collision:"flipfit",my:t+" top",at:t+" bottom"},_wrapperClassExternal:"dx-dropdowneditor-overlay"},this._options.cache("dropDownOptions"),{visible:this.option("opened")})},_listOptions(){var t=this.option("selectedItemKey"),e=this.option("useSelectMode");return{selectionMode:e?"single":"none",wrapItemText:this.option("wrapItemText"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:()=>this._fireContentReadyAction(),selectedItemKeys:(0,v.$K)(t)&&e?[t]:[],grouped:this.option("grouped"),groupTemplate:this.option("groupTemplate"),keyExpr:this._getKey(),noDataText:this.option("noDataText"),displayExpr:this.option("displayExpr"),itemTemplate:this.option("itemTemplate"),items:this.option("items"),dataSource:this._dataSource,onItemClick:i=>{this.option("useSelectMode")||(this._lastSelectedItemData=i.itemData),this.option("selectedItemKey",this._keyGetter(i.itemData)),!1!==this._fireItemClickAction(i)&&(this.toggle(!1),this._buttonGroup.focus())}}},_upDownKeyHandler(){return this._popup&&this._popup.option("visible")&&this._list?this._list.focus():this.open(),!0},_escHandler(){return this.close(),this._buttonGroup.focus(),!0},_tabHandler(){return this.close(),!0},_renderPopup(){var t=(0,p.Z)("<div>");this.$element().append(t),this._popup=this._createComponent(t,gt,this._popupOptions()),this._popup.$content().addClass("dx-dropdownbutton-content"),this._popup.$wrapper().addClass("dx-dropdownbutton-popup-wrapper"),this._popup.on("hiding",this._popupHidingHandler.bind(this)),this._popup.on("showing",this._popupShowingHandler.bind(this)),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_popupHidingHandler(){this.option("opened",!1),this._updateAriaAttributes(!1)},_popupOptionChanged:function(t){var e=Me.default.getOptionsFromContainer(t);this._setPopupOption(e);var i=Object.keys(e);(-1!==i.indexOf("width")||-1!==i.indexOf("height"))&&this._dimensionChanged()},_dimensionChanged:function(){void 0===Co(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>en(this.$element()))},_setPopupOption:function(t,e){this._setWidgetOption("_popup",arguments)},_popupShowingHandler(){this.option("opened",!0),this._updateAriaAttributes(!0)},_setElementAria(t){this.setAria({owns:t?this._popupContentId:void 0},this.$element())},_setButtonsAria(t){var e={expanded:t,haspopup:"listbox"},i={};this.option("text")||(i.label="dropdownbutton"),this._getButtons().each((a,r)=>{this.setAria(0===a?(0,M.Z)({},i,e):e,(0,p.Z)(r))})},_updateAriaAttributes(t){this._setElementAria(t),this._setButtonsAria(t)},_getButtons(){return this._buttonGroup.$element().find(".".concat("dx-button"))},_renderButtonGroup(){var t=this._buttonGroup&&this._buttonGroup.$element()||(0,p.Z)("<div>");this._buttonGroup||this.$element().append(t),this._buttonGroup=this._createComponent(t,Dk,this._buttonGroupOptions()),this._buttonGroup.registerKeyHandler("downArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("tab",this._tabHandler.bind(this)),this._buttonGroup.registerKeyHandler("upArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("escape",this._escHandler.bind(this)),this._bindInnerWidgetOptions(this._buttonGroup,"buttonGroupOptions"),this._updateAriaAttributes(this.option("opened"))},_updateArrowClass(){var t=this.option("splitButton")||this.option("showArrowIcon");this.$element().toggleClass("dx-dropdownbutton-has-arrow",t)},toggle(t){return this._popup||(this._renderPopup(),this._renderContent()),this._popup.toggle(t)},open(){return this.toggle(!0)},close(){return this.toggle(!1)},_setListOption(t,e){this._list&&this._list.option(t,e)},_getDisplayValue(t){var i=(0,v.PO)(t)?this._displayGetter(t):t;return(0,v.PO)(i)?"":String((0,E.IS)(i,""))},_updateActionButton(t){this.option("useSelectMode")&&this.option({text:this._getDisplayValue(t),icon:(0,v.PO)(t)?t.icon:void 0}),this._setOptionWithoutOptionChange("selectedItem",t),this._setOptionWithoutOptionChange("selectedItemKey",this._keyGetter(t))},_clean(){this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove()},_selectedItemKeyChanged(t){this._setListOption("selectedItemKeys",this.option("useSelectMode")&&(0,v.$K)(t)?[t]:[]);var e=this.option("selectedItem");this._loadSelectedItem().done(i=>{this._updateActionButton(i),this._displayGetter(e)!==this._displayGetter(i)&&this._fireSelectionChangedAction({previousValue:e,value:i})})},_updateButtonGroup(t,e){this._buttonGroup.option(t,e),this._updateAriaAttributes(this.option("opened"))},_actionButtonOptionChanged(t){var{name:e,value:i}=t,a={};a[e]=i,this._updateButtonGroup("items[0]",(0,C.l)({},this._actionButtonConfig(),a)),this._popup&&this._popup.repaint()},_selectModeChanged(t){if(t){this._setListOption("selectionMode","single");var e=this.option("selectedItemKey");this._setListOption("selectedItemKeys",(0,v.$K)(e)?[e]:[]),this._selectedItemKeyChanged(this.option("selectedItemKey"))}else this._setListOption("selectionMode","none"),this.option({selectedItemKey:void 0,selectedItem:void 0}),this._actionButtonOptionChanged({text:this.option("text")})},_updateItemCollection(t){var e=this.option("selectedItemKey");this._setListOption("selectedItem",null),this._setWidgetOption("_list",[t]),(0,v.$K)(e)&&this._loadSelectedItem().done(i=>{this._setListOption("selectedItemKeys",[e]),this._setListOption("selectedItem",i)}).fail(i=>{this._setListOption("selectedItemKeys",[])}).always(this._updateActionButton.bind(this))},_updateDataSource:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._dataSource.items();this._dataSource=void 0,this._itemsToDataSource(t),this._updateKeyExpr()},_updateKeyExpr:function(){this._compileKeyGetter(),this._setListOption("keyExpr",this._getKey())},focus:function(){this._buttonGroup.focus()},_optionChanged(t){var e,{name:i,value:a}=t;switch(i){case"useSelectMode":this._selectModeChanged(a);break;case"splitButton":this._updateArrowClass(),this._renderButtonGroup();break;case"displayExpr":this._compileDisplayGetter(),this._setListOption(i,a),this._updateActionButton(this.option("selectedItem"));break;case"keyExpr":this._updateDataSource();break;case"buttonGroupOptions":this._innerWidgetOptionChanged(this._buttonGroup,t);break;case"dropDownOptions":if("dropDownOptions.visible"===t.fullName)break;void 0!==t.value.visible&&delete t.value.visible,this._popupOptionChanged(t),this._innerWidgetOptionChanged(this._popup,t);break;case"opened":this.toggle(a);break;case"focusStateEnabled":case"hoverStateEnabled":this._setListOption(i,a),this._updateButtonGroup(i,a),this.callBase(t);break;case"items":this._updateDataSource(this.option("items")),this._updateItemCollection(i);break;case"dataSource":Array.isArray(a)?this._updateDataSource(this.option("dataSource")):(this._initDataSource(),this._updateKeyExpr()),this._updateItemCollection(i);break;case"icon":case"text":this._actionButtonOptionChanged(t);break;case"showArrowIcon":this._updateArrowClass(),this._renderButtonGroup(),this._popup&&this._popup.repaint();break;case"width":case"height":this.callBase(t),null===(e=this._popup)||void 0===e||e.repaint();break;case"stylingMode":case"tabIndex":this._updateButtonGroup(i,a);break;case"itemTemplate":case"grouped":case"noDataText":case"groupTemplate":case"wrapItemText":case"useItemTextAsTitle":this._setListOption(i,a);break;case"dropDownContentTemplate":this._renderContent();break;case"selectedItemKey":this._selectedItemKeyChanged(a);break;case"selectedItem":break;case"onItemClick":this._createItemClickAction();break;case"onButtonClick":this._createActionClickAction();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"deferRendering":this.toggle(this.option("opened"));break;default:this.callBase(t)}}}).include(mr.Z);(0,J.Z)("dxDropDownButton",Mk);var Jf="dx-datagrid-export-button";class Wk{constructor(e,i,a){this._exportController=e,this._initialColumnWidthsByColumnIndex=i,this._selectedRowsOnly=a}_getGroupValue(e){var{key:i,data:a,rowType:r,groupIndex:n,summaryCells:s}=e,o=this._options.groupColumns[n],l=$.getDisplayValue(o,o.deserializeValue?o.deserializeValue(i[n]):i[n],a,r),d="".concat(o.caption,": ").concat($.formatValue(l,o));return s&&s[0]&&s[0].length&&(d+=" ".concat($.getGroupRowSummaryText(s[0],this._options.summaryTexts))),d}_correctCellIndex(e){return e}_initOptions(){var e=this._exportController,i=e._columnsController.getGroupColumns();this._options={columns:e._getColumns(this._initialColumnWidthsByColumnIndex),groupColumns:i,items:this._selectedRowsOnly||e._selectionOnly?e._getSelectedItems():e._getAllItems(),isHeadersVisible:e.option("showColumnHeaders"),summaryTexts:e.option("summary.texts"),rtlEnabled:e.option("rtlEnabled")}}getHeaderStyles(){return[{bold:!0,alignment:"center"},{bold:!0,alignment:"left"},{bold:!0,alignment:"right"}]}getGroupRowStyle(){return{bold:!0,alignment:(0,se.q)(this._options.rtlEnabled)}}getColumnStyles(){var e=[];return this.getColumns().forEach(i=>{e.push({alignment:i.alignment||"left",format:i.format,dataType:i.dataType})}),e}getStyles(){return[...this.getHeaderStyles(),...this.getColumnStyles(),this.getGroupRowStyle()]}_getTotalCellStyleId(e){var i,a=(null===(i=this.getColumns()[e])||void 0===i?void 0:i.alignment)||"right";return this.getHeaderStyles().map(r=>r.alignment).indexOf(a)}getStyleId(e,i){return e<this.getHeaderRowCount()?0:this.isTotalCell(e-this.getHeaderRowCount(),i)?this._getTotalCellStyleId(i):this.isGroupRow(e-this.getHeaderRowCount())?this.getHeaderStyles().length+this.getColumns().length:i+this.getHeaderStyles().length}getColumns(e){var{columns:i}=this._options;return e?i:i[i.length-1]}getColumnsWidths(){var e=this.getColumns();return(0,v.$K)(e)?e.map(i=>i.width):void 0}getRowsCount(){return this._options.items.length+this.getHeaderRowCount()}getHeaderRowCount(){return this.isHeadersVisible()?this._options.columns.length-1:0}isGroupRow(e){return e<this._options.items.length&&"group"===this._options.items[e].rowType}getGroupLevel(e){var i=this._options.items[e-this.getHeaderRowCount()],a=i&&i.groupIndex;return i&&"totalFooter"===i.rowType?0:(0,v.$K)(a)?a:this._options.groupColumns.length}getCellType(e,i){var a=this.getColumns();if(e<this.getHeaderRowCount())return"string";if(e-=this.getHeaderRowCount(),i<a.length){var r=this._options.items.length&&this._options.items[e],n=a[i];return r&&"data"===r.rowType&&isFinite(r.values[this._correctCellIndex(i)])&&!(0,v.$K)(n.customizeText)?(0,v.$K)(n.lookup)?n.lookup.dataType:n.dataType:"string"}}ready(){this._initOptions();var e=this._options;return(0,b.gx)(e.items).done(i=>{e.items=i}).fail(()=>{e.items=[]})}_convertFromGridGroupSummaryItems(e){if((0,v.$K)(e)&&e.length>0)return e.map(i=>({value:i.value,name:i.name}))}getCellData(e,i,a){var r,n,s={cellSourceData:{},value:r},o=this.getColumns(),l=this._correctCellIndex(i);if(e<this.getHeaderRowCount())n=this.getColumns(!0)[e][i],s.cellSourceData.rowType="header",s.cellSourceData.column=n&&n.gridColumn,s.value=n&&n.caption;else{e-=this.getHeaderRowCount();var u=this._options.items.length&&this._options.items[e];if(u){var h=u.values;switch(s.cellSourceData.rowType=u.rowType,s.cellSourceData.column=o[i]&&o[i].gridColumn,u.rowType){case"groupFooter":case"totalFooter":l<h.length&&((0,v.$K)(r=h[l])?(s.cellSourceData.value=r.value,s.cellSourceData.totalSummaryItemName=r.name,s.value=$.getSummaryText(r,this._options.summaryTexts)):s.cellSourceData.value=void 0);break;case"group":if(s.cellSourceData.groupIndex=u.groupIndex,i<1)s.cellSourceData.column=this._options.groupColumns[u.groupIndex],s.cellSourceData.value=u.key[u.groupIndex],s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(u.summaryCells[0]),s.value=this._getGroupValue(u);else{var c=u.values[l];if(Array.isArray(c)){s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(c),r="";for(var _=0;_<c.length;_++)r+=(_>0?a?"\n":" \n ":"")+$.getSummaryText(c[_],this._options.summaryTexts);s.value=r}else s.cellSourceData.value=void 0}break;default:if(n=o[i]){var g=h[l],f=$.getDisplayValue(n,g,u.data,u.rowType);s.value=!isFinite(f)||(0,v.$K)(n.customizeText)?a&&(0,v.$K)(n.customizeText)&&n.customizeText===this._exportController._columnsController.getCustomizeTextByDataType("boolean")?f:$.formatValue(f,n):f,s.cellSourceData.value=g}s.cellSourceData.data=u.data}}}return s}isHeadersVisible(){return this._options.isHeadersVisible}isTotalCell(e,i){var{items:a}=this._options,r=a[e],n=this._correctCellIndex(i);return r&&"groupFooter"===r.rowType||"totalFooter"===r.rowType||r.summaryCells&&r.summaryCells[n]&&r.summaryCells[n].length>0&&r.summaryCells[n][0].alignByColumn}getCellMerging(e,i){var{columns:a}=this._options,r=a[e]&&a[e][i];return r?{colspan:(r.exportColspan||1)-1,rowspan:(r.rowspan||1)-1}:{colspan:0,rowspan:0}}getFrozenArea(){return{x:0,y:this.getHeaderRowCount()}}}$.registerModule("export",{defaultOptions:()=>({export:{enabled:!1,fileName:"DataGrid",formats:["xlsx"],allowExportSelectedData:!1,texts:{exportTo:A.Z.format("dxDataGrid-exportTo"),exportAll:A.Z.format("dxDataGrid-exportAll"),exportSelectedRows:A.Z.format("dxDataGrid-exportSelectedRows")}}}),controllers:{export:class Kk extends $.ViewController{_getEmptyCell(){return{caption:"",colspan:1,rowspan:1}}_updateColumnWidth(e,i){e.width=i}_getColumns(e){var a,r,i=[],n=this._columnsController,s=n.getRowCount();for(a=0;a<=s;a++){var o=[];r=n.getVisibleColumns(a,!0);var l=void 0;if(a===s)if(this._updateLockCount)l=e;else{var d=this._getColumnWidths(this._headersView,this._rowsView);if(d&&d.length){l={};for(var u=0;u<r.length;u++)l[r[u].index]=d[u]}}for(var h=0;h<r.length;h++){var c=(0,C.l)({},r[h],{dataType:"datetime"===r[h].dataType?"date":r[h].dataType,gridColumn:r[h]});if(this._needColumnExporting(c)){var _=this._calculateExportColspan(c);(0,v.$K)(_)&&(c.exportColspan=_),l&&this._updateColumnWidth(c,l[c.index]),o.push(c)}}i.push(o)}return r=i[s],i=function kk(t,e){for(var i=u=>u||1,a=[],r=(t[0]||[]).reduce((u,h)=>u+i(h.colspan),0),n=(u=>{var h=0,c=0;return()=>{var _=u[h]||[],g=_[c++];return c>=_.length&&(h++,c=0),g&&(g.colspan=i(g.colspan),g.rowspan=i(g.rowspan)),g}})(t),s=(u,h,c)=>{if((a[u]=a[u]||[])[h]=c,c.colspan>1||c.rowspan>1){for(var g=(0,C.l)({},c,e),f=1;f<c.colspan;f++)s(u,h+f,g);for(var m=1;m<c.rowspan;m++)for(var x=0;x<c.colspan;x++)s(u+m,h+x,g)}},o=n(),l=0;o;){for(var d=0;d<r&&o;d++)a[l]&&a[l][d]||(s(l,d,o),d+=o.colspan-1,o=n());l++}return a}(i.slice(0,-1),this._getEmptyCell()),i.push(r),i}_calculateExportColspan(e){if(e.isBand){var i=this._columnsController.getChildrenByBandColumn(e.index,!0);if((0,v.$K)(i))return i.reduce((a,r)=>this._needColumnExporting(r)?a+(this._calculateExportColspan(r)||1):a,0)}}_needColumnExporting(e){return!e.command&&(e.allowExporting||void 0===e.allowExporting)}_getFooterSummaryItems(e,i){var a=[],r=1,n=0;do{for(var s=[],o=0;o<e.length;o++){var l=e[o],d=l.length;r<d&&(r=d),s.push(l[n])}a.push({values:s,rowType:i?"totalFooter":"groupFooter"})}while(n++<r-1);return a}_hasSummaryGroupFooters(){var e=this.option("summary.groupItems");if((0,v.$K)(e))for(var i=0;i<e.length;i++)if(e[i].showInGroupFooter)return!0;return!1}_getItemsWithSummaryGroupFooters(e){for(var i=[],a=[],r=[],n=0;n<e.length;n++){var s=e[n];"groupFooter"===s.rowType?(r=this._getFooterSummaryItems(s.summaryCells),i=i.concat(a,r),a=[]):a.push(s)}return i.length?i:a}_updateGroupValuesWithSummaryByColumn(e){for(var i=[],a=0;a<e.length;a++){var r=e[a],{summaryCells:n}=r;if("group"===r.rowType&&n&&n.length>1){for(var s=r.values.length,o=1;o<n.length;o++)for(var l=0;l<n[o].length;l++){var d=n[o][l];d&&d.alignByColumn&&(Array.isArray(i[o-s])||(i[o-s]=[]),i[o-s].push(d))}i.length>0&&(r.values.push(...i),i=[])}}}_processUnExportedItems(e){for(var r,n,i=this._columnsController.getVisibleColumns(null,!0),a=this._columnsController.getGroupColumns(),s=0;s<e.length;s++){var o=e[s],l=!1;r=[],n=[];for(var d=0;d<i.length;d++){var u=i[d];if(l||(l=["detailExpand","buttons"].includes(u.type)),this._needColumnExporting(u)&&(o.values&&r.push("group"!==o.rowType||r.length?o.values[d]:o.key[o.groupIndex]),o.summaryCells))if("group"!==o.rowType||n.length)n.push(o.summaryCells[d]);else{var h=d-a.length+o.groupIndex;n.push(o.summaryCells[l?h:h+1])}}r.length&&(o.values=r),n.length&&(o.summaryCells=n)}}_getAllItems(e){var d,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,r=new b.BH,n=this.getController("data"),s=n.footerItems(),o=s.length&&s[0],l=a.option("summary.totalItems");return(0,b.gx)(e).done(u=>{n.loadAll(u,i).done((h,c)=>{a._updateGroupValuesWithSummaryByColumn(h),a._hasSummaryGroupFooters()&&(h=a._getItemsWithSummaryGroupFooters(h)),d=o&&o.summaryCells,(0,v.$K)(c)&&l&&(d=a._getSummaryCells(l,c));var _=o&&a._getFooterSummaryItems(d,!0);_&&(h=h.concat(_)),a._processUnExportedItems(h),r.resolve(h)}).fail(r.reject)}).fail(r.reject),r}_getSummaryCells(e,i){var a=this.getController("data");return a._calculateSummaryCells(e,i,a._columnsController.getVisibleColumns(null,!0),(n,s)=>a._isDataColumn(s)?s.index:-1)}_getSelectedItems(){var e=this.getController("selection");return this.needLoadItemsOnExportingSelectedItems()?this._getAllItems(e.loadSelectedItemsWithFilter(),!0):this._getAllItems(e.getSelectedRowsData())}_getColumnWidths(e,i){return e&&e.isVisible()?e.getColumnWidths():i.getColumnWidths()}init(){this.option("export.enabled")&&!(0,v.$K)(this.option("onExporting"))&&ee.Z.log("W1024"),this._columnsController=this.getController("columns"),this._rowsView=this.getView("rowsView"),this._headersView=this.getView("columnHeadersView"),this.createAction("onExporting",{excludeValidators:["disabled","readOnly"]})}callbackNames(){return["selectionOnlyChanged"]}getDataProvider(e){var a,i=this._getColumnWidths(this._headersView,this._rowsView);if(i&&i.length){a={};for(var r=this._columnsController.getVisibleColumns(this._columnsController.getRowCount(),!0),n=0;n<r.length;n++)a[r[n].index]=i[n]}return new Wk(this,a,e)}exportTo(e,i){this._selectionOnly=e;var a=this.getAction("onExporting"),r={rtlEnabled:this.option("rtlEnabled"),selectedRowsOnly:!!e,format:i,fileName:"DataGrid",cancel:!1};(0,v.mf)(a)&&a(r)}publicMethods(){return["getDataProvider"]}selectionOnly(e){if(!(0,v.$K)(e))return this._isSelectedRows;this._isSelectedRows=e,this.selectionOnlyChanged.fire()}needLoadItemsOnExportingSelectedItems(){var e;return null!==(e=this.option("loadItemsOnExportingSelectedItems"))&&void 0!==e?e:this.getController("data")._dataSource.remoteOperations().filtering}}},extenders:{controllers:{editing:{callbackNames(){var t=this.callBase();return(0,v.$K)(t)?t.push("editingButtonsUpdated"):["editingButtonsUpdated"]},_updateEditButtons(){this.callBase(),this.editingButtonsUpdated.fire()}}},views:{headerPanel:{_getToolbarItems(){var t=this.callBase(),e=this._getExportToolbarButton();return e&&(t.push(e),this._correctItemsPosition(t)),t},_getExportToolbarButton(){var t=this._getExportToolbarItems();if(0===t.length)return null;var e=this._needDisableExportButton(),i={name:"exportButton",location:"after",locateInMenu:"auto",sortIndex:30,options:{items:t},disabled:e};if(1===t.length){var a=(0,M.Z)((0,M.Z)({},t[0]),{hint:t[0].text,elementAttr:{class:Jf}});i.widget="dxButton",i.showText="inMenu",i.options=a}else{var r={icon:"export",displayExpr:"text",items:t,hint:this.option("export.texts.exportTo"),elementAttr:{class:Jf},dropDownOptions:{width:"auto",_wrapperClassExternal:"dx-datagrid-export-menu"}};i.options=r,i.widget="dxDropDownButton",i.menuItemTemplate=(n,s,o)=>{this._createComponent((0,p.Z)(o),La,{items:t})}}return i},_getExportToolbarItems(){var t,e=this.option("export"),i=this.option("export.texts"),a=null!==(t=this.option("export.formats"))&&void 0!==t?t:[];if(!e.enabled)return[];var r=[];return a.forEach(n=>{var s=n.toUpperCase(),o="export";"xlsx"===n&&(s="Excel",o="xlsxfile"),"pdf"===n&&(o="pdffile"),r.push({text:(0,ot.WU)(i.exportAll,s),icon:o,onClick:()=>{this._exportController.exportTo(!1,n)}}),e.allowExportSelectedData&&r.push({text:(0,ot.WU)(i.exportSelectedRows,s),icon:"exportselected",onClick:()=>{this._exportController.exportTo(!0,n)}})}),r},_correctItemsPosition(t){t.sort((e,i)=>e.sortIndex-i.sortIndex)},_isExportButtonVisible(){return this.option("export.enabled")},optionChanged(t){this.callBase(t),"export"===t.name&&(t.handled=!0,this._invalidate(),"export.enabled"===t.fullName&&t.value&&!(0,v.$K)(this.option("onExporting"))&&ee.Z.log("W1024"))},_needDisableExportButton(){var t=!this._columnsController.hasVisibleDataColumns(),e=this._editingController.hasChanges();return t||e},_columnOptionChanged(t){if(this.callBase(t),$.checkChanges(t.optionNames,["groupIndex","visible","all"])){var i=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",i)}},init(){this.callBase(),this._exportController=this.getController("export"),this._editingController=this.getController("editing"),this._editingController.editingButtonsUpdated.add(()=>{var t=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",t)})},isVisible(){return this.callBase()||this._isExportButtonVisible()}}}}});var sr="dx-row-focused",Yk=".dx-row.".concat(sr),em="dx-cell-focus-disabled",qk=ne.ViewController.inherit(function(){var t={init(){this._dataController=this.getController("data"),this._keyboardController=this.getController("keyboardNavigation"),this.component._optionsByReference.focusedRowKey=!0},optionChanged(e){var{name:i,value:a,previousValue:r}=e;switch(i){case"focusedRowIndex":this._focusRowByIndex(a),this._keyboardController._fireFocusedRowChanged(),e.handled=!0;break;case"focusedRowKey":if(Array.isArray(a)&&JSON.stringify(a)===JSON.stringify(r))return;this._focusRowByKey(a),this._keyboardController._fireFocusedRowChanged(),e.handled=!0;break;case"focusedColumnIndex":case"focusedRowEnabled":case"autoNavigateToFocusedRow":e.handled=!0;break;default:this.callBase(e)}},isAutoNavigateToFocusedRow(){return"infinite"!==this.option("scrolling.mode")&&this.option("autoNavigateToFocusedRow")},_focusRowByIndex(e,i){this.option("focusedRowEnabled")&&((e=void 0!==e?e:this.option("focusedRowIndex"))<0?this.isAutoNavigateToFocusedRow()&&this._resetFocusedRow():this._focusRowByIndexCore(e,i))},_focusRowByIndexCore(e,i){var a=this.getController("data"),r=a.pageSize(),n=()=>{if(this._isValidFocusedRowIndex(e)){var o=e-a.getRowIndexOffset(!0);if(!i||i.paging&&!i.filtering){var l=a._getLastItemIndex();o=Math.min(o,l)}var d=a.getKeyByRowIndex(o,!0);(0,v.$K)(d)&&!this.isRowFocused(d)&&this.option("focusedRowKey",d)}};if(r>=0)if(this._isLocalRowIndex(e))n();else{var s=Math.floor(e/a.pageSize());(0,b.gx)(a.pageIndex(s),a.waitReady()).done(()=>{n()})}},_isLocalRowIndex(e){var i=this.getController("data");if(this.getController("keyboardNavigation")._isVirtualScrolling()){var r=Math.floor(e/i.pageSize()),n=i.virtualItemsCount(),s=n?n.begin:-1,o=i.getVisibleRows().length+i.getRowIndexOffset(),l=Math.ceil(o/i.pageSize());return s<=e&&l>r}return!0},_setFocusedRowKeyByIndex(e){var i=this.getController("data");if(this._isValidFocusedRowIndex(e)){var a=Math.min(e-i.getRowIndexOffset(),i.items().length-1),r=i.getKeyByRowIndex(a);(0,v.$K)(r)&&!this.isRowFocused(r)&&this.option("focusedRowKey",r)}},_focusRowByKey(e){(0,v.$K)(e)?this._navigateToRow(e,!0):this._resetFocusedRow()},_resetFocusedRow(){var e=this.option("focusedRowKey"),i=(0,v.$K)(e);if(i||!(this.option("focusedRowIndex")<0)){var a=this.getController("keyboardNavigation");i&&this.option("focusedRowKey",null),a.setFocusedRowIndex(-1),this.option("focusedRowIndex",-1),this.getController("data").updateItems({changeType:"updateFocusedRow",focusedRowKey:null}),a._fireFocusedRowChanged(void 0,-1)}},_isValidFocusedRowIndex(e){var a=this.getController("data").getVisibleRows()[e];return!a||"data"===a.rowType||"group"===a.rowType},publicMethods:()=>["navigateToRow","isRowFocused"],navigateToRow(e){return this.isAutoNavigateToFocusedRow()||this.option("focusedRowIndex",-1),this._navigateToRow(e)},_navigateToRow(e,i){var a=this,r=a.getController("data"),n=a.isAutoNavigateToFocusedRow(),s=new b.BH;if(void 0===e||!r.dataSource())return s.reject().promise();var o=a.getFocusedRowIndexByKey(e);return!n&&i||o>=0?a._navigateTo(e,s,i):r.getPageIndexByKey(e).done(l=>{l<0?s.resolve(-1):l===r.pageIndex()?r.reload().done(()=>{a.isRowFocused(e)&&r.getRowIndexByKey(e)>=0?s.resolve(a.getFocusedRowIndexByKey(e)):a._navigateTo(e,s,i)}).fail(s.reject):r.pageIndex(l).done(()=>{a._navigateTo(e,s,i)}).fail(s.reject)}).fail(s.reject),s.promise()},_navigateTo(e,i,a){var r=this.getController("data").getRowIndexByKey(e),n=V.isVirtualRowRendering(this);this.isAutoNavigateToFocusedRow()&&n&&r<0?this._navigateToVirtualRow(e,i,a):this._navigateToVisibleRow(e,i,a)},_navigateToVisibleRow(e,i,a){if(a)this._triggerUpdateFocusedRow(e,i);else{var r=this.getFocusedRowIndexByKey(e);this.getView("rowsView").scrollToRowElement(e,i).done(()=>{i.resolve(r)})}},_navigateToVirtualRow(e,i,a){var r=this.getController("data"),n=r._rowsScrollController,s=V.getIndexByKey(e,r.items(!0)),o=this.getView("rowsView").getScrollable();if(n&&o&&s>=0){var l=s+r.getRowIndexOffset(!0),d=n.getItemOffset(l),u=()=>{r.totalCount()&&!r.items().length||(this.component.off("contentReady",u),a?this._triggerUpdateFocusedRow(e,i):i.resolve(l))};this.component.on("contentReady",u),this.getView("rowsView").scrollTopPosition(d)}else i.resolve(-1)},_triggerUpdateFocusedRow(e,i){var n,a=this.getController("data"),r=this.getFocusedRowIndexByKey(e);this._isValidFocusedRowIndex(r)?(this.option("focusedRowEnabled")?a.updateItems({changeType:"updateFocusedRow",focusedRowKey:e}):n=this.getView("rowsView").scrollToRowElement(e),(0,b.gx)(n).done(()=>{this.getController("keyboardNavigation").setFocusedRowIndex(r),i&&i.resolve(r)})):i&&i.resolve(-1)},getFocusedRowIndexByKey(e){var i=this.getController("data"),a=i.getRowIndexByKey(e,!0);return a>=0?a+i.getRowIndexOffset(!0):-1},_focusRowByKeyOrIndex(){var e=this.option("focusedRowKey"),i=this.option("focusedRowIndex"),a=this.getController("keyboardNavigation"),r=this.getController("data");if((0,v.$K)(e)){var n=r.getRowIndexByKey(e);n>=0?(a._isVirtualScrolling()&&(i=n+r.getRowIndexOffset()),a.setFocusedRowIndex(i),this._triggerUpdateFocusedRow(e)):this._navigateToRow(e,!0).done(s=>{i>=0&&s<0?this._focusRowByIndex():i<0&&s>=0&&a.setFocusedRowIndex(s)})}else i>=0&&this.getController("focus")._focusRowByIndex(i)},isRowFocused(e){var i=this.option("focusedRowKey");if((0,v.$K)(i))return(0,E.bY)(e,this.option("focusedRowKey"))},updateFocusedRow(e){var s,o,{focusedRowKey:i}=e,a=this,r=a._dataController.getRowIndexByKey(i),n=a.getView("rowsView");(0,y.S6)(n.getTableElements(),(l,d)=>{var u=0===l;s=(0,p.Z)(d),a._clearPreviousFocusedRow(s,r);var h=a._prepareFocusedRow({changedItem:a._dataController.getVisibleRows()[r],$tableElement:s,focusedRowIndex:r});u&&(o=h)}),o&&n.scrollToElementVertically(o)},_clearPreviousFocusedRow(e,i){var a=e.find(Yk).filter((n,s)=>{var o=(0,p.Z)(s).closest(".".concat(this.addWidgetPrefix("table")));return e.is(o)});a.removeClass(sr).removeClass(em).removeAttr("tabindex"),a.children("td").removeAttr("tabindex"),0!==i&&(0,p.Z)(this.getView("rowsView").getRowElement(0)).removeClass(em).removeAttr("tabIndex")},_prepareFocusedRow(e){var i,{changedItem:a}=e;if(a&&("data"===a.rowType||"group"===a.rowType)){var{focusedRowIndex:r}=e,{$tableElement:n}=e,s=this.option("tabindex")||0,o=this.getView("rowsView");(i=(0,p.Z)(o._getRowElements(n).eq(r))).addClass(sr).attr("tabindex",s)}return i}};return t}()),tm={defaultOptions:()=>({focusedRowEnabled:!1,autoNavigateToFocusedRow:!0,focusedRowKey:null,focusedRowIndex:-1,focusedColumnIndex:-1}),controllers:{focus:qk},extenders:{controllers:{keyboardNavigation:{init(){var t=this.option("focusedRowIndex"),e=this.option("focusedColumnIndex");this.createAction("onFocusedRowChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedRowChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanged",{excludeValidators:["disabled","readOnly"]}),this.callBase(),this.setRowFocusType(),this._focusedCellPosition={},(0,v.$K)(t)&&t>=0&&(this._focusedCellPosition.rowIndex=t),(0,v.$K)(e)&&e>=0&&(this._focusedCellPosition.columnIndex=e)},setFocusedRowIndex(t){this.callBase(t),this.option("focusedRowIndex",t)},setFocusedColumnIndex(t){this.callBase(t),this.option("focusedColumnIndex",t)},_escapeKeyHandler(t,e){!e&&this.option("focusedRowEnabled")?this.isCellFocusType()&&(this.setRowFocusType(),this._focus(this._getCellElementFromTarget(t.originalEvent.target),!0)):this.callBase(t,e)},_updateFocusedCellPosition(t,e){var i=this.callBase(t,e);i&&i.columnIndex>=0&&this._fireFocusedCellChanged(t)}},editorFactory:{renderFocusOverlay(t,e){var n,i=this.getController("keyboardNavigation"),a=this.option("focusedRowEnabled"),r=this.getController("editing");a&&i?.isRowFocusType()&&!r.isEditing()?a&&"row"===i._getElementType(t)&&!t.hasClass(sr)&&(n=i.getFirstValidCellInRow(t),i.focus(n)):this.callBase(t,e)}},columns:{getSortDataSourceParameters(t,e){var i=this.callBase.apply(this,arguments),a=this.getController("data"),r=a._dataSource,n=a.store(),s=n&&n.key(),o=r&&r.remoteOperations()||{},l=Object.keys(o).every(u=>!o[u]);if(s&&(this.option("focusedRowEnabled")&&!1!==this.getController("focus").isAutoNavigateToFocusedRow()||e)){var d=(s=Array.isArray(s)?s:[s]).filter(u=>!this.columnOption(u,"sortOrder"));d.length&&(i=i||[],l?i.push({selector:r.getDataIndexGetter(),desc:!1}):d.forEach(u=>i.push({selector:u,desc:!1})))}return i}},data:{_applyChange(t){if(!t||"updateFocusedRow"!==t.changeType)return this.callBase.apply(this,arguments)},_fireChanged(t){if(this.callBase(t),this.option("focusedRowEnabled")&&this._dataSource){var i="update"===t.changeType&&t.repaintChangesOnly&&t.changeTypes&&t.changeTypes.indexOf("remove")>=0;"refresh"===t.changeType&&t.items.length||i?(this._updatePageIndexes(),this._updateFocusedRow(t)):"append"===t.changeType||"prepend"===t.changeType?this._updatePageIndexes():"update"===t.changeType&&t.repaintChangesOnly&&this._updateFocusedRow(t)}},_updatePageIndexes(){var t=this._lastRenderingPageIndex||0,e=this._rowsScrollController?this._rowsScrollController.pageIndex():0;this._lastRenderingPageIndex=e,this._isPagingByRendering=e!==t},isPagingByRendering(){return this._isPagingByRendering},_updateFocusedRow(t){var e=t.operationTypes||{},i=this.getController("focus"),{reload:a,fullReload:r,pageIndex:n,paging:s}=e,l=this.getController("keyboardNavigation")._isVirtualScrolling(),d=s&&!l,u=this.option("focusedRowKey"),h=i.isAutoNavigateToFocusedRow();if(a&&!1===n&&!r&&(0,v.$K)(u))i._navigateToRow(u,!0).done(w=>{w<0&&i._focusRowByIndex(void 0,e)});else if(d&&h){var _=this.getRowIndexByKey(u),g=this.option("focusedRowIndex");g>=0&&(g===_||!(_>=0))&&i._focusRowByIndex(g,e)}else d&&!h&&this.getRowIndexByKey(u)<0?this.option("focusedRowIndex",-1):e.fullReload&&i._focusRowByKeyOrIndex()},getPageIndexByKey(t){var e=this,i=new b.BH;return e.getGlobalRowIndexByKey(t).done(a=>{i.resolve(a>=0?Math.floor(a/e.pageSize()):-1)}).fail(i.reject),i.promise()},getGlobalRowIndexByKey(t){return this._dataSource.group()?this._calculateGlobalRowIndexByGroupedData(t):this._calculateGlobalRowIndexByFlatData(t)},_calculateGlobalRowIndexByFlatData(t,e,i){var a=this,r=new b.BH,n=a._dataSource;if(Array.isArray(t)||(t=>"string"==typeof t&&t.startsWith($o)&&44===t.length)(t))return r.resolve(-1).promise();var s=a._generateFilterByKey(t);return n.load({filter:a._concatWithCombinedFilter(s),skip:0,take:1}).done(o=>{o.length>0?(s=a._generateOperationFilterByKey(t,o[0],i),n.load({filter:a._concatWithCombinedFilter(s,e),skip:0,take:1,requireTotalCount:!0}).done((l,d)=>{r.resolve(d.totalCount)})):r.resolve(-1)}),r.promise()},_concatWithCombinedFilter(t,e){var i=this.getCombinedFilter();return V.combineFilters([t,i,e])},_generateBooleanFilter(t,e,i){var{desc:a}=i;switch(!0){case!1===e&&a:return[t,"=",!0];case!1===e&&!a:return[t,"=",null];case!0===e&&!a:case!(0,v.jn)(e)&&a:return[t,"<>",e];default:return}},_generateOperationFilterByKey(t,e,i){var a=this,r=a.option("dateSerializationFormat"),n=a._dataSource.remoteOperations().filtering,s=a._generateFilterByKey(t,"<"),o=a._columnsController.getSortDataSourceParameters(!n,!0);if(i){var l=a._columnsController.getGroupDataSourceParameters(!n);l&&(o=o?l.concat(o):l)}return o&&o.slice().reverse().forEach(d=>{var{selector:u,desc:h,compare:c}=d,{getter:_,rawValue:g,safeValue:f}=((t,e,i)=>{var{isRemoteFiltering:a,dateSerializationFormat:r,getSelector:n}=i,{selector:s}=t,o=(0,v.mf)(s)?s:n(s),l=o?o(e):e[s];return{getter:o,rawValue:l,safeValue:a&&(0,v.J_)(l)?Se.Z.serializeDate(l,r):l}})(d,e,{isRemoteFiltering:n,dateSerializationFormat:r,getSelector:T=>a._columnsController.columnOption(T,"selector")});if(s=[[u,"=",f],"and",s],null===g||(0,v.jn)(g)){var m=a._generateBooleanFilter(u,f,h);m&&(s=[m,"or",s])}else{var w,x=h?">":"<";c?w=T=>"<"===x?c(g,_(T))>=1:c(g,_(T))<=-1:(w=[u,x,f],h||(w=[w,"or",[u,"=",null]])),s=[w,"or",s]}}),s},_generateFilterByKey(t,e){var i=this._dataSource.key(),a=[];if(e||(e="="),Array.isArray(i))for(var r=0;r<i.length;++r){var n=t[i[r]];n&&(a.length>0&&a.push("and"),a.push([i[r],e,n]))}else a=[i,e,t];return a},_getLastItemIndex(){return this.items(!0).length-1}},editing:{_deleteRowCore(t){var e=this.callBase.apply(this,arguments),i=this.getController("data"),a=i.getKeyByRowIndex(t);e.done(()=>{var r=i.getRowIndexByKey(a),n=i.getVisibleRows();-1===r&&!n.length&&this.getController("focus")._resetFocusedRow()})}}},views:{rowsView:{_createRow(t){var e=this.callBase.apply(this,arguments);return this.option("focusedRowEnabled")&&t&&this.getController("focus").isRowFocused(t.key)&&e.addClass(sr),e},_checkRowKeys(t){if(this.callBase.apply(this,arguments),this.option("focusedRowEnabled")&&this.option("dataSource")){var e=this._dataController.store();e&&!e.key()&&this._dataController.fireError("E1042","Row focusing")}},_update(t){"updateFocusedRow"===t.changeType?this.option("focusedRowEnabled")&&this.getController("focus").updateFocusedRow(t):this.callBase(t)},updateFocusElementTabIndex(t,e){this.option("focusedRowEnabled")?this._setFocusedRowElementTabIndex(e):this.callBase(t)},_setFocusedRowElementTabIndex(t){var e=this.option("focusedRowKey"),i=this.option("tabIndex")||0,a=this._dataController,r=this._columnsController,n=a.getRowIndexByKey(e),s=this.option("focusedColumnIndex"),o=this._findRowElementForTabIndex();if((0,v.$K)(this._scrollToFocusOnResize)||(this._scrollToFocusOnResize=()=>{this.scrollToElementVertically(this._findRowElementForTabIndex()),this.resizeCompleted.remove(this._scrollToFocusOnResize)}),o.attr("tabIndex",i),n>=0&&!t&&(s<0&&(s=0),n+=a.getRowIndexOffset(),s+=r.getColumnIndexOffset(),this.getController("keyboardNavigation").setFocusedCellPosition(n,s),this.getController("focus").isAutoNavigateToFocusedRow())){var l=a.dataSource(),d=l&&l.operationTypes();d&&!d.paging&&!a.isPagingByRendering()&&(this.resizeCompleted.remove(this._scrollToFocusOnResize),this.resizeCompleted.add(this._scrollToFocusOnResize))}},_findRowElementForTabIndex(){var t=this.option("focusedRowKey"),e=this._dataController.getRowIndexByKey(t);return(0,p.Z)(this.getRowElement(e>=0?e:0))},scrollToRowElement(t){var e=this.getController("data").getRowIndexByKey(t),i=(0,p.Z)(this.getRow(e));return this.scrollToElementVertically(i)},scrollToElementVertically(t){var e=this.getScrollable();if(e&&t.length){var i=e.getScrollElementPosition(t,"vertical");return this.scrollTopPosition(i)}return(new b.BH).resolve()},scrollTopPosition(t){var e=new b.BH,i=this.getScrollable();if(i){var a=i.scrollTop(),r=()=>{i.off("scroll",r),e.resolve()};if(t!==a)return i.on("scroll",r),this._dataController.resetFilterApplying(),i.scrollTo({top:t}),e.promise()}return e.resolve()}}}}},Xk=Number.MAX_SAFE_INTEGER||9007199254740991;$.registerModule("focus",(0,C.l)(!0,{},tm,{extenders:{controllers:{data:t=>class extends(t.inherit(tm.extenders.controllers.data)){changeRowExpand(e,i){if(this.option("focusedRowEnabled")&&Array.isArray(e)&&this.isRowExpanded(e)){var a=this.getController("keyboardNavigation");(!i||!a.isKeyboardEnabled())&&this._isFocusedRowInsideGroup(e)&&this.option("focusedRowKey",e)}return super.changeRowExpand(e,i)}_isFocusedRowInsideGroup(e){var i=this.getController("columns"),a=this.option("focusedRowKey"),r=this.getRowIndexByKey(a),n=r>=0&&this.getVisibleRows()[r],s=i.getGroupDataSourceParameters(!0);if(n)for(var o=0;o<e.length;++o)if((0,Q.vb)(s[o]&&s[o].selector)(n.data)!==e[o])return!1;return!0}_getGroupPath(e,i){for(var a=[],r=[e];r&&r[0]&&i;){var n=r[0];void 0!==n.key&&a.push(n.key),r=n.items,i--}return a}_expandGroupByPath(e,i,a){var r=new b.BH;return a++,e.expandRow(i.slice(0,a)).done(()=>{a===i.length?r.resolve():e._expandGroupByPath(e,i,a).done(r.resolve).fail(r.reject)}).fail(r.reject),r.promise()}_calculateGlobalRowIndexByGroupedData(e){var i=this,a=i._dataSource,r=i._generateFilterByKey(e),n=new b.BH,s=Array.isArray(e),o=a.group();return s?n.resolve(-1).promise():a._grouping._updatePagingOptions?(a.load({filter:i._concatWithCombinedFilter(r),group:o}).done(l=>{if(!l||0===l.length||!(0,v.$K)(l[0].key)||-1===l[0].key)return n.resolve(-1).promise();var d=i._getGroupPath(l[0],o.length);i._expandGroupByPath(i,d,0).done(()=>{i._calculateExpandedRowGlobalIndex(n,e,d,o)}).fail(n.reject)}).fail(n.reject),n.promise()):(i._calculateGlobalRowIndexByFlatData(e,null,!0).done(n.resolve).fail(n.reject),n)}_calculateExpandedRowGlobalIndex(e,i,a,r){var u,n=hi(a,{group:r}),s=this._dataSource,o=this.option("scrolling.mode"),l="virtual"===o||"infinite"===o,d=s.pageSize();s._grouping._updatePagingOptions({skip:0,take:Xk},(h,c)=>{(0,E.bY)(h.path,a)&&(u=c)}),this._calculateGlobalRowIndexByFlatData(i,n).done(h=>{var c,_;h<0?e.resolve(-1):(c=(u%d||d)+h-a.length,_=l?0:Math.floor(c/(d-a.length))*a.length,e.resolve(c=u+h+_))}).fail(e.reject)}}}}}));var ad,aa,im=(0,Z.Jj)(),yt="dxDraggable",Qk=(0,D.V4)(Re.BL,yt),eN=(0,D.V4)(Re.pB,yt),tN=(0,D.V4)(Re.ut,yt),iN=(0,D.V4)(Re.IO,yt),aN=(0,D.V4)(Re.Zu,yt),rN=(0,D.V4)(re.Z.down,yt),nN=(0,D.V4)("keydown",yt),rd=t=>({x:t.pageX-(0,p.Z)(im).scrollLeft(),y:t.pageY-(0,p.Z)(im).scrollTop()});class rm{constructor(e,i){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=i,"vertical"===e?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(e,i){var a=!1;e.some(r=>{var n=(0,p.Z)(r),s=n.hasClass("dx-overlay-wrapper"),o=n.hasClass("dx-overlay-content");return!(!s&&!o)||(a=this._trySetScrollable(r,i))}),a||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(e){return("auto"===e.css(this._overFlowAttr)||e.hasClass("dx-scrollable-container"))&&e.prop(this._scrollSizeProp)>Math.ceil("width"===this._sizeAttr?(0,I.dz)(e):(0,I.Cr)(e))}_trySetScrollable(e,i){var r,a=(0,p.Z)(e),n=this._component.option("scrollSensitivity"),s=this.isScrollable(a);return s&&(n>(r=this._calculateDistanceToBorders(a,i))[this._limitProps.start]?this._preventScroll||(this._scrollSpeed=-this._calculateScrollSpeed(r[this._limitProps.start]),this._$scrollableAtPointer=a):n>r[this._limitProps.end]?this._preventScroll||(this._scrollSpeed=this._calculateScrollSpeed(r[this._limitProps.end]),this._$scrollableAtPointer=a):(s=!1,this._preventScroll=!1)),s}_calculateDistanceToBorders(e,i){var r,a=e.get(0);return a?(r=(0,se.l)(a),{left:i.x-r.left,top:i.y-r.top,right:r.right-i.x,bottom:r.bottom-i.y}):{}}_calculateScrollSpeed(e){var i=this._component,a=i.option("scrollSensitivity"),r=i.option("scrollSpeed");return Math.ceil(Math.pow((a-e)/a,2)*r)}scrollByStep(){if(this._$scrollableAtPointer&&this._scrollSpeed){if(this._$scrollableAtPointer.hasClass("dx-scrollable-container")){var e=this._$scrollableAtPointer.closest(".dx-scrollable"),i=e.data("dxScrollable")||e.data("dxScrollView");if(i){var a=i.scrollOffset()[this._limitProps.start]+this._scrollSpeed;i.scrollTo({[this._limitProps.start]:a})}}else{var r=this._$scrollableAtPointer[this._scrollValue]()+this._scrollSpeed;this._$scrollableAtPointer[this._scrollValue](r)}var n=this._component._dragMoveArgs;n&&this._component._dragMoveHandler(n)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(e,i){if(!e)return!1;var a=(0,se.l)(e.get(0)),r=a[this._limitProps.start],n=a[this._sizeAttr],s=rd(i),o="width"===this._sizeAttr?s.x:s.y;return o<r||o>r+n}}var uN=gu.inherit({ctor(t){this.callBase(),this._strategy=t},_step(){var t=this._strategy._horizontalScrollHelper,e=this._strategy._verticalScrollHelper;t&&t.scrollByStep(),e&&e.scrollByStep()}}),nm=Li.Z.inherit({reset:E.ZT,dragMove:E.ZT,dragEnter:E.ZT,dragLeave:E.ZT,dragEnd(t){return this._getSourceDraggable()._fireRemoveEvent(t),(0,b.BH)().resolve()},_fireRemoveEvent:E.ZT,_getDefaultOptions(){return(0,C.l)(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),(0,C.l)(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new uN(this),this._horizontalScrollHelper=new rm("horizontal",this),this._verticalScrollHelper=new rm("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset:t=>((0,v.Kn)(t)&&(t={h:t.x,v:t.y}),t=(0,E.Um)(t).map(e=>parseFloat(e)),{left:t[0],top:1===t.length?t[0]:t[1]}),_getNormalizedCursorOffset(t,e){return(0,v.mf)(t)&&(t=t.call(this,e)),this._normalizeCursorOffset(t)},_calculateElementOffset(t){var e,i,{event:a}=t,r=(0,p.Z)(t.itemElement),n=(0,p.Z)(t.dragElement),s=this._dragElementIsCloned(),o=this.option("cursorOffset"),l={left:0,top:0},d=this._initialLocate=(0,le.jt)(n);return(s||t.initialOffset||o)&&(e=t.initialOffset||r.offset(),o&&(l=this._getNormalizedCursorOffset(o,t),isFinite(l.left)&&(e.left=a.pageX),isFinite(l.top)&&(e.top=a.pageY)),i=n.offset(),e.top-=i.top+(l.top||0)-d.top,e.left-=i.left+(l.left||0)-d.left),e},_initPosition(t){var e=(0,p.Z)(t.dragElement),i=this._calculateElementOffset(t);i&&this._move(i,e),this._startPosition=(0,le.jt)(e)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(t){return(0,Pe.H0)(this.NAME)+(t?"-".concat(t):"")},_getItemsSelector(){return this.option("filter")||""},_$content(){var t=this.$element(),e=t.children(".dx-template-wrapper");return e.length?e:t},_attachEventHandlers(){if(!this.option("disabled")){var t=this._$content(),e=this._getItemsSelector(),i=this.option("allowMoveByClick"),a={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(r,n)=>{var s=this.option("group"),o=this._getSourceDraggable().option("group"),l=this._getScrollable(r);return!this._verticalScrollHelper.isOutsideScrollable(l,n)&&!this._horizontalScrollHelper.isOutsideScrollable(l,n)&&o&&o===s}};i&&(t=this._getArea(),S.Z.on(t,rN,a,this._pointerDownHandler.bind(this))),">"===e[0]&&(e=e.slice(1)),S.Z.on(t,Qk,e,a,this._dragStartHandler.bind(this)),S.Z.on(t,eN,a,this._dragMoveHandler.bind(this)),S.Z.on(t,tN,a,this._dragEndHandler.bind(this)),S.Z.on(t,iN,a,this._dragEnterHandler.bind(this)),S.Z.on(t,aN,a,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&S.Z.on(t,nN,this._keydownHandler.bind(this))}},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(t,e){return{container:(0,W.u)(e),model:{itemData:this.option("itemData"),itemElement:(0,W.u)(t)}}},_createDragElement(t){var e=t,i=this.option("clone"),a=this._getContainer(),r=this.option("dragTemplate");return r?(r=this._getTemplate(r),e=(0,p.Z)("<div>").appendTo(a),r.render(this._getDragTemplateArgs(t,e))):i&&(e=(0,p.Z)("<div>").appendTo(a),t.clone().css({width:t.css("width"),height:t.css("height")}).appendTo(e)),e.toggleClass(this._addWidgetPrefix("clone"),e.get(0)!==t.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){S.Z.off(this._$content(),".".concat(yt)),S.Z.off(this._getArea(),".".concat(yt))},_move(t,e){(0,le.pB)(e||this._$dragElement,t)},_getDraggableElement(t){var e=this._getSourceElement();if(e)return e;if(this.option("allowMoveByClick"))return this.$element();var a=(0,p.Z)(t&&t.target),r=this._getItemsSelector();if(">"===r[0]){var n=this._$content().find(r);n.is(a)||(a=a.closest(n))}return a},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(t){if(!(0,D.r1)(t)){var e={},i=this.$element(),a=this.option("dragDirection");("horizontal"===a||"both"===a)&&(e.left=t.pageX-i.offset().left+(0,le.jt)(i).left-(0,I.dz)(i)/2),("vertical"===a||"both"===a)&&(e.top=t.pageY-i.offset().top+(0,le.jt)(i).top-(0,I.Cr)(i)/2),this._move(e,i),this._getAction("onDragMove")(this._getEventArgs(t))}},_isValidElement(t,e){var i=this.option("handle"),a=(0,p.Z)(t.originalEvent&&t.originalEvent.target);return!(i&&!a.closest(i).length||!e.length||e.is(".dx-state-disabled, .dx-state-disabled *"))},_dragStartHandler(t){var e=this._getDraggableElement(t);if(this.dragInProgress=!0,this._isValidElement(t,e)){if(!this._$sourceElement){var i=this._getDragStartArgs(t,e);if(this._getAction("onDragStart")(i),i.cancel)return void(t.cancel=!0);this.option("itemData",i.itemData),this._setSourceDraggable(),this._$sourceElement=e;var a=e.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),a=this._getDraggableElementOffset(a.left,a.top));var r=this._$dragElement=this._createDragElement(e);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(r.children());var n="fixed"===r.css("position");this._initPosition((0,C.l)({},i,{dragElement:r.get(0),initialOffset:n&&a})),this._getAction("onDraggableElementShown")((0,M.Z)((0,M.Z)({},i),{dragElement:r}));var s=this._getArea(),o=this._getAreaOffset(s),l=this._getBoundOffset(),d=(0,I.Y_)(s),u=(0,I.zp)(s),h=(0,I.dz)(r),c=(0,I.Cr)(r),_=r.offset().left-o.left,g=r.offset().top-o.top;s.length&&(t.maxLeftOffset=_-l.left,t.maxRightOffset=d-_-h-l.right,t.maxTopOffset=g-l.top,t.maxBottomOffset=u-g-c-l.bottom),this.option("autoScroll")&&this._startAnimator()}}else t.cancel=!0},_getAreaOffset:t=>t&&$t.Z.offset(t)||{left:0,top:0},_toggleDraggingClass(t){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),t)},_toggleDragSourceClass(t,e){var i=e||this._$sourceElement;i&&i.toggleClass(this._addWidgetPrefix("source"),t)},_setGestureCoverCursor(t){(0,p.Z)(".".concat("dx-gesture-cover")).css("cursor",t.css("cursor"))},_getBoundOffset(){var t=this.option("boundOffset");return(0,v.mf)(t)&&(t=t.call(this)),(0,ot.$b)(t)},_getArea(){var t=this.option("boundary");return(0,v.mf)(t)&&(t=t.call(this)),(0,p.Z)(t)},_getContainer(){var t=this.option("container");return void 0===t&&(t=(0,ya.S3)()),(0,p.Z)(t)},_getDraggableElementOffset(t,e){var i,a,r,n,s=this._initScrollTop,o=this._initScrollLeft,l=this._getScrollableScrollTop(),d=this._getScrollableScrollLeft(),u=(0,p.Z)(this.element()).css("position"),c={left:(null!==(a=null===(i=this._startPosition)||void 0===i?void 0:i.left)&&void 0!==a?a:0)+t,top:(null!==(n=null===(r=this._startPosition)||void 0===r?void 0:r.top)&&void 0!==n?n:0)+e};return"fixed"===u||this._hasClonedDraggable()?c:{left:(0,v.kE)(d)?c.left+d-o:c.left,top:(0,v.kE)(l)?c.top+l-s:c.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(t){if(this._dragMoveArgs=t,this._$dragElement){var e=this._getDraggableElementOffset(t.offset.x,t.offset.y);this._move(e),this._updateScrollable(t);var i=this._getEventArgs(t);this._getAction("onDragMove")(i),!0!==i.cancel&&this._getTargetDraggable().dragMove(t,scrollBy)}else t.cancel=!0},_updateScrollable(t){if(this.option("autoScroll")){var e=rd(t),i=Y.Z.elementsFromPoint(e.x,e.y,this.$element().get(0));this._verticalScrollHelper.updateScrollable(i,e),this._horizontalScrollHelper.updateScrollable(i,e)}},_getScrollable(t){var e;return t.parents().toArray().some(i=>{var a=(0,p.Z)(i);return!(!this._horizontalScrollHelper.isScrollable(a)&&!this._verticalScrollHelper.isScrollable(a)||(e=a,0))}),e},_getScrollableScrollTop(){var t,e;return null!==(e=null===(t=this._getScrollable((0,p.Z)(this.element())))||void 0===t?void 0:t.scrollTop())&&void 0!==e?e:0},_getScrollableScrollLeft(){var t,e;return null!==(e=null===(t=this._getScrollable((0,p.Z)(this.element())))||void 0===t?void 0:t.scrollLeft())&&void 0!==e?e:0},_defaultActionArgs(){var t=this.callBase.apply(this,arguments),e=this.option("component");return e&&(t.component=e,t.element=e.element()),t},_getEventArgs(t){var e=this._getSourceDraggable(),i=this._getTargetDraggable();return{event:t,itemData:e.option("itemData"),itemElement:(0,W.u)(e._$sourceElement),fromComponent:e.option("component")||e,toComponent:i.option("component")||i,fromData:e.option("data"),toData:i.option("data")}},_getDragStartArgs(t,e){var i=this._getEventArgs(t);return{event:i.event,itemData:i.itemData,itemElement:e,fromData:i.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(t){var e=(0,b.BH)(),i=this._getEventArgs(t),a=this._getEventArgs(t),r=this._getTargetDraggable(),n=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(i)}finally{(0,b.gx)((0,b.p4)(i.cancel)).done(s=>{if(!s&&(r!==this&&r._getAction("onDrop")(a),!a.cancel))return n=!1,void(0,b.gx)((0,b.p4)(r.dragEnd(i))).always(e.resolve);e.resolve()}).fail(e.resolve),e.done(()=>{n&&this._revertItemToInitialPosition(),this._resetDragOptions(r)})}},_isTargetOverAnotherDraggable(t){var e=this._getSourceDraggable();if(this===e)return!1;var i=e._$dragElement,a=e.$element(),r=this.$element(),n=rd(t),o=Y.Z.elementsFromPoint(n.x,n.y,this.element()).filter(h=>{var c=(0,p.Z)(h);return!!c.hasClass(this._addWidgetPrefix())&&!c.closest(i).length})[0],l=this._getSourceElement(),d=o===a.get(0),u=(0,p.Z)(o).closest(l).length;return!o||o===r.get(0)&&!d&&!u},_dragEnterHandler(t){this._fireDragEnterEvent(t),this._isTargetOverAnotherDraggable(t)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(t)},_dragLeaveHandler(t){this._fireDragLeaveEvent(t),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(t)},_keydownHandler(t){this.dragInProgress&&"Escape"===t.key&&this._keydownEscapeHandler(t)},_keydownEscapeHandler(t){if(this._getSourceElement()){var i=this._getEventArgs(t);if(this._getAction("onDragCancel")(i),!i.cancel){this.dragInProgress=!1,aa?._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();var a=this._getTargetDraggable();this._resetDragOptions(a),this._attachEventHandlers()}}},_getAction(t){return this["_".concat(t,"Action")]||this._createActionByOption(t)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new kr.s}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());var t=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),e=this._getTemplateByOption("contentTemplate");e&&(0,p.Z)(e.render({container:this.element(),transclude:t}))},_optionChanged(t){var{name:e}=t;switch(e){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this["_".concat(e,"Action")]=this._createActionByOption(e);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(t)}},_getTargetDraggable(){return ad||this},_getSourceDraggable(){return aa||this},_setTargetDraggable(){var t=this.option("group"),e=this._getSourceDraggable();t&&t===e.option("group")&&(ad=this)},_setSourceDraggable(){aa=this},_resetSourceDraggable(){aa=null},_resetTargetDraggable(){ad=null},_resetDragOptions(t){this.reset(),t.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(t){var e=this._getEventArgs(t);this._getAction("onDragEnter")(e)},_fireDragLeaveEvent(t){var e=this._getEventArgs(t);this._getAction("onDragLeave")(e)}});(0,J.Z)(yt,nm);const hN=nm;var sm=(0,Z.Jj)(),om="placeholder",lm=t=>(0,p.Z)(t).is(":visible"),_N=(t,e)=>{var i,a;if(t){var r=(null===(i=e.to)||void 0===i?void 0:i.left)||0,n=(null===(a=e.to)||void 0===a?void 0:a.top)||0;t.style.transform="translate(".concat(r,"px,").concat(n,"px)"),t.style.transition=ce.Z.off?"":"transform ".concat(e.duration,"ms ").concat(e.easing)}},vN=t=>{t&&(t.style.transform="",t.style.transition="")},dm=hN.inherit({_init(){this.callBase(),this._sourceScrollHandler=this._handleSourceScroll.bind(this),this._sourceScrollableInfo=null},_getDefaultOptions(){return(0,C.l)(this.callBase(),{clone:!0,filter:"> *",itemOrientation:"vertical",dropFeedbackMode:"push",allowDropInsideItem:!1,allowReordering:!0,moveItemOnDrop:!1,onDragChange:null,onAdd:null,onRemove:null,onReorder:null,onPlaceholderPrepared:null,animation:{type:"slide",duration:300,easing:"ease"},fromIndex:null,toIndex:null,dropInsideItem:!1,itemPoints:null,fromIndexOffset:0,offset:0,autoUpdate:!1,draggableElementSize:0})},reset(){this.option({dropInsideItem:!1,toIndex:null,fromIndex:null,itemPoints:null,fromIndexOffset:0,draggableElementSize:0}),this._$placeholderElement&&this._$placeholderElement.remove(),this._$placeholderElement=null,!this._isIndicateMode()&&this._$modifiedItem&&(this._$modifiedItem.css("marginBottom",this._modifiedItemMargin),this._$modifiedItem=null)},_getPrevVisibleItem:(t,e)=>t.slice(0,e).reverse().filter(lm)[0],_dragStartHandler(t){if(this.callBase.apply(this,arguments),!0!==t.cancel){var e=this._getSourceElement();this._updateItemPoints(),this._subscribeToSourceScroll(t),this.option("fromIndex",this._getElementIndex(e)),this.option("fromIndexOffset",this.option("offset"))}},_subscribeToSourceScroll(t){var e=this._getScrollable((0,p.Z)(t.target));e&&(this._sourceScrollableInfo={element:e,scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop()},S.Z.off(e,"scroll",this._sourceScrollHandler),S.Z.on(e,"scroll",this._sourceScrollHandler))},_unsubscribeFromSourceScroll(){this._sourceScrollableInfo&&(S.Z.off(this._sourceScrollableInfo.element,"scroll",this._sourceScrollHandler),this._sourceScrollableInfo=null)},_handleSourceScroll(t){var e=this._sourceScrollableInfo;e&&["scrollLeft","scrollTop"].forEach(i=>{t.target[i]!==e[i]&&(this._correctItemPoints(t.target[i]-e[i]),this._movePlaceholder(),e[i]=t.target[i])})},_dragEnterHandler(t){if(this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&(this._subscribeToSourceScroll(t),this._updateItemPoints(),this.option("fromIndex",-1),!this._isIndicateMode())){var e=this.option("itemPoints"),i=e[e.length-1];if(i){var a=this.$element(),r=this._getSourceElement(),n=this._isVerticalOrientation(),s=n?(0,I.zp)(r,!0):(0,I.Y_)(r,!0),o=a.get(0)[n?"scrollHeight":"scrollWidth"],l=a.get(0)[n?"scrollTop":"scrollLeft"],d=n?"top":"left",u=i[d],c=a.offset()[d]+o-l-u;if(c<s&&n){var _=this._getItems(),g=(0,p.Z)(this._getPrevVisibleItem(_));this._$modifiedItem=g,this._modifiedItemMargin=g.get(0).style.marginBottom,g.css("marginBottom",s-c);var f=g.closest(".dx-sortable"),m=f.data("dxScrollable")||f.data("dxScrollView");m&&m.update()}}}},_dragLeaveHandler(){this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&this._unsubscribeFromSourceScroll()},dragEnter(){this!==this._getTargetDraggable()&&this.option("toIndex",-1)},dragLeave(){this!==this._getTargetDraggable()&&this.option("toIndex",this.option("fromIndex"))},_allowDrop(t){var i=this._getTargetDraggable().$element(),a=this._getScrollable(i);if(a){var{left:r,right:n,top:s,bottom:o}=function gN(t){var e=t.offset(),{style:i}=t[0],a=parseFloat(i.paddingLeft)||0,r=parseFloat(i.paddingRight)||0,n=parseFloat(i.paddingTop)||0,s=t[0].clientWidth-(a+r),o=(0,I.Cr)(t),l=e.left+a,d=e.top+n;return{left:l,right:l+s,top:d,bottom:d+o}}(a),l=this.option("toIndex"),d=this.option("itemPoints"),u=d?.filter(c=>c.index===l)[0];if(u&&void 0!==u.top)return this._isVerticalOrientation()?s<=Math.ceil(u.top)&&Math.floor(u.top)<=o:r<=Math.ceil(u.left)&&Math.floor(u.left)<=n}return!0},dragEnd(t){this._unsubscribeFromSourceScroll();var o,l,e=this._getSourceElement(),i=this._getSourceDraggable(),a=i.NAME!==this.NAME,r=this.option("toIndex"),{event:n}=t,s=this._allowDrop(n);return null!==r&&r>=0&&s&&(i!==this&&((o=this._fireAddEvent(n))||(l=this._fireRemoveEvent(n))),a&&(0,le.Kx)(e),this.option("moveItemOnDrop")&&!o&&this._moveItem(e,r,l),i===this)?this._fireReorderEvent(n):(0,b.BH)().resolve()},dragMove(t){var e=this.option("itemPoints");if(e){for(var s,i=this._isVerticalOrientation(),a=i?"top":"left",r=i?t.pageY:t.pageX,n=this.option("rtlEnabled"),o=e.length-1;o>=0;o--){var l=e[o+1]&&(e[o][a]+e[o+1][a])/2;if(!(!i&&n?r>l:l>r)&&void 0!==l)break;s=e[o]}s&&(this._updatePlaceholderPosition(t,s),this._verticalScrollHelper.isScrolling()&&this._isIndicateMode()&&this._movePlaceholder())}},_isIndicateMode(){return"indicate"===this.option("dropFeedbackMode")||this.option("allowDropInsideItem")},_createPlaceholder(){var t;return this._isIndicateMode()&&(t=(0,p.Z)("<div>").addClass(this._addWidgetPrefix(om)).insertBefore(this._getSourceDraggable()._$dragElement)),this._$placeholderElement=t,t},_getItems(){var t=this._getItemsSelector();return this._$content().find(t).not(".".concat(this._addWidgetPrefix(om))).not(".".concat(this._addWidgetPrefix("clone"))).toArray()},_allowReordering(){return this._getSourceDraggable()!==this._getTargetDraggable()||this.option("allowReordering")},_isValidPoint(t,e,i){var a=this.option("allowDropInsideItem");return!!(i||this._allowReordering()||0===t&&a)&&(!this._isIndicateMode()||-1===e||t!==e&&(i||t!==e+1))},_getItemPoints(){var e,i,a,t=[],r=this.option("rtlEnabled"),n=this._isVerticalOrientation(),s=this._getItems(),o=s.filter(lm),l=o.length,d=this._getDraggableElement(),u=o.indexOf(d.get(0));if(l){for(var h=0;h<=l;h++){var c=!n&&r^h===l,_=n&&h===l;h<l&&(i=(e=(0,p.Z)(o[h])).offset(),a=(0,I.Y_)(e)),t.push({dropInsideItem:!1,left:i.left+(c?a:0),top:i.top+(_?t[h-1].height:0),index:h===l?s.length:s.indexOf(e.get(0)),$item:e,width:(0,I.Y_)(e),height:(0,I.zp)(e),isValid:this._isValidPoint(h,u)})}if(this.option("allowDropInsideItem")){var g=t;t=[];for(var f=0;f<g.length;f++)t.push(g[f]),g[f+1]&&t.push((0,C.l)({},g[f],{dropInsideItem:!0,top:Math.floor((g[f].top+g[f+1].top)/2),left:Math.floor((g[f].left+g[f+1].left)/2),isValid:this._isValidPoint(f,u,!0)}))}}else t.push({dropInsideItem:!1,index:0,isValid:!0});return t},_updateItemPoints(t){(t||this.option("autoUpdate")||!this.option("itemPoints"))&&this.option("itemPoints",this._getItemPoints())},_correctItemPoints(t){var e=this.option("itemPoints");if(t&&e&&!this.option("autoUpdate")){var a=this._isVerticalOrientation()?"top":"left";e.forEach(r=>{r[a]-=t})}},_getElementIndex(t){return this._getItems().indexOf(t.get(0))},_getDragTemplateArgs(t){var e=this.callBase.apply(this,arguments);return e.model.fromIndex=this._getElementIndex(t),e},_togglePlaceholder(t){this._$placeholderElement&&this._$placeholderElement.toggle(t)},_isVerticalOrientation(){return"vertical"===this.option("itemOrientation")},_normalizeToIndex(t,e){var i=this._getSourceDraggable()!==this._getTargetDraggable(),a=this._getActualFromIndex();return null===t?a:Math.max(i||a>=t||e?t:t-1,0)},_updatePlaceholderPosition(t,e){var i=this._getSourceDraggable(),a=this._normalizeToIndex(e.index,e.dropInsideItem),r=(0,C.l)(this._getEventArgs(t),{toIndex:a,dropInsideItem:e.dropInsideItem});e.isValid&&this._getAction("onDragChange")(r),!r.cancel&&e.isValid?(this.option({dropInsideItem:e.dropInsideItem,toIndex:e.index}),this._getAction("onPlaceholderPrepared")((0,C.l)(this._getEventArgs(t),{placeholderElement:(0,W.u)(this._$placeholderElement),dragElement:(0,W.u)(i._$dragElement)})),this._updateItemPoints()):e.isValid||this.option({dropInsideItem:!1,toIndex:null})},_makeWidthCorrection(t,e){if(this._$scrollable=this._getScrollable(t),this._$scrollable){var i=(0,I.dz)(this._$scrollable),a=this._$scrollable.offset().left-t.offset().left,r=(0,I.Y_)(t)-a-i;a>0&&(e-=a),r>0&&(e-=r)}return e},_updatePlaceholderSizes(t,e){var i=this.option("dropInsideItem"),a=(0,p.Z)(e),r=this._isVerticalOrientation(),n="",s="";t.toggleClass(this._addWidgetPrefix("placeholder-inside"),i),(r||i)&&(n=(0,I.Y_)(a)),(!r||i)&&(s=(0,I.zp)(a)),n=this._makeWidthCorrection(a,n),t.css({width:n,height:s})},_moveItem(t,e,i){var a,r=this._getItems(),n=r[e],s=this._getSourceDraggable();i&&(t=t.clone(),s._toggleDragSourceClass(!1,t)),n||(a=r[e-1]),this._moveItemCore(t,n,a)},_moveItemCore(t,e,i){e||i?i?t.insertAfter((0,p.Z)(i)):t.insertBefore((0,p.Z)(e)):t.appendTo(this.$element())},_getDragStartArgs(t,e){return(0,C.l)(this.callBase.apply(this,arguments),{fromIndex:this._getElementIndex(e)})},_getEventArgs(t){var e=this._getSourceDraggable(),i=this._getTargetDraggable(),a=i.option("dropInsideItem");return(0,C.l)(this.callBase.apply(this,arguments),{fromIndex:e.option("fromIndex"),toIndex:this._normalizeToIndex(i.option("toIndex"),a),dropInsideItem:a})},_optionChanged(t){var{name:e}=t;switch(e){case"onDragChange":case"onPlaceholderPrepared":case"onAdd":case"onRemove":case"onReorder":this["_".concat(e,"Action")]=this._createActionByOption(e);break;case"itemOrientation":case"allowDropInsideItem":case"moveItemOnDrop":case"dropFeedbackMode":case"itemPoints":case"animation":case"allowReordering":case"fromIndexOffset":case"offset":case"draggableElementSize":case"autoUpdate":break;case"fromIndex":[!1,!0].forEach(i=>{var a=i?t.value:t.previousValue;if(null!==a){var r=(0,p.Z)(this._getItems()[a]);this._toggleDragSourceClass(i,r)}});break;case"dropInsideItem":this._optionChangedDropInsideItem(t);break;case"toIndex":this._optionChangedToIndex(t);break;default:this.callBase(t)}},_optionChangedDropInsideItem(){this._isIndicateMode()&&this._$placeholderElement&&this._movePlaceholder()},_isPositionVisible(t){var i,e=this.$element();if("hidden"!==e.css("overflow")?i=e.get(0):e.parents().each(function(){if("visible"!==(0,p.Z)(this).css("overflow"))return i=this,!1}),i){var a=(0,se.l)(i),r=this._isVerticalOrientation(),n=r?"top":"left",o=r?sm.pageYOffset:sm.pageXOffset;if(t[n]<a[n]+o||t[n]>a[r?"bottom":"right"]+o)return!1}return!0},_optionChangedToIndex(t){var e=t.value;if(this._isIndicateMode()){var i=null!==e&&e>=0;this._togglePlaceholder(i),i&&this._movePlaceholder()}else this._moveItems(t.previousValue,t.value,t.fullUpdate)},update(){if(null!==this.option("fromIndex")||null!==this.option("toIndex")){this._updateItemPoints(!0),this._updateDragSourceClass();var t=this.option("toIndex");this._optionChangedToIndex({value:t,fullUpdate:!0})}},_updateDragSourceClass(){var t=this._getActualFromIndex(),e=(0,p.Z)(this._getItems()[t]);e.length&&(this._$sourceElement=e,this._toggleDragSourceClass(!0,e))},_makeLeftCorrection(t){var e=this._$scrollable;if(e&&this._isVerticalOrientation()){var i=e.offset().left-t;i>0&&(t+=i)}return t},_movePlaceholder(){var t=this._$placeholderElement||this._createPlaceholder();if(t){var e=this._getItems(),i=this.option("toIndex"),a=this._isVerticalOrientation(),r=this.option("rtlEnabled"),n=this.option("dropInsideItem"),s=null,o=e[i];if(o){var l=(0,p.Z)(o);s=l.offset(),!a&&r&&!n&&(s.left+=(0,I.Y_)(l,!0))}else{var d=o=this._getPrevVisibleItem(e,i);d&&(s=(0,p.Z)(d).offset(),a?s.top+=(0,I.zp)(d,!0):r||(s.left+=(0,I.Y_)(d,!0)))}if(this._updatePlaceholderSizes(t,o),s&&!this._isPositionVisible(s)&&(s=null),s){var u=a&&i===e.length,h=(0,I.zp)(t);s.left=this._makeLeftCorrection(s.left),s.top=u&&s.top>=h?s.top-h:s.top,this._move(s,t)}t.toggle(!!s)}},_getPositions(t,e,i,a){for(var r=[],n=0;n<t.length;n++){var s=0;null!==a&&null!==i?(-1===i?n>=a&&(s=e):-1===a?n>i&&(s=-e):i<a?n>i&&n<a&&(s=-e):i>a&&n>=a&&n<i&&(s=e),r.push(s)):r.push(s)}return r},_getDraggableElementSize(t){var e=this._getDraggableElement(),i=this.option("draggableElementSize");return i||(i=t?((0,I.zp)(e)+(0,I.zp)(e,!0))/2:((0,I.Y_)(e)+(0,I.Y_)(e,!0))/2,this.option("autoUpdate")||this.option("draggableElementSize",i)),i},_getActualFromIndex(){var{fromIndex:t,fromIndexOffset:e,offset:i}=this.option();return null==t?null:t+e-i},_moveItems(t,e,i){for(var a=this._getActualFromIndex(),r=this._isVerticalOrientation(),n=r?"top":"left",s=this._getDraggableElementSize(r),o=this._getItems(),l=this._getPositions(o,s,a,t),d=this._getPositions(o,s,a,e),u=this.option("animation"),h=this.option("rtlEnabled"),c=0;c<o.length;c++){var _=o[c],g=l[c],f=d[c];null===e||null===a?vN(_):(g!==f||i&&f)&&_N(_,(0,C.l)({},u,{to:{[n]:!r&&h?-f:f}}))}},_toggleDragSourceClass(t,e){var i=e||this._$sourceElement;this.callBase.apply(this,arguments),this._isIndicateMode()||i&&i.toggleClass(this._addWidgetPrefix("source-hidden"),t)},_dispose(){this.reset(),this.callBase()},_fireAddEvent(t){var e=this._getEventArgs(t);return this._getAction("onAdd")(e),e.cancel},_fireRemoveEvent(t){var e=this._getSourceDraggable(),i=this._getEventArgs(t);return e._getAction("onRemove")(i),i.cancel},_fireReorderEvent(t){var e=this._getEventArgs(t);return this._getAction("onReorder")(e),e.promise||(0,b.BH)().resolve()}});(0,J.Z)("dxSortable",dm);const fN=dm;var xN={init(){this.callBase.apply(this,arguments),this._updateHandleColumn()},_allowReordering(){var t=this.option("rowDragging");return!(!t||!(t.allowReordering||t.allowDropInsideItem||t.group))},_updateHandleColumn(){var t=this.option("rowDragging"),e=this._allowReordering(),i=this._columnsController,a=e&&t.showDragIcons;i?.addCommandColumn({type:"drag",command:"drag",visibleIndex:-2,alignment:"center",elementAttr:[{name:"dx-drag-cell",value:""}],cssClass:"dx-command-drag",width:"auto",cellTemplate:this._getHandleTemplate(),visible:a}),i?.columnOption("type:drag","visible",a)},_renderContent(){var t=this.option("rowDragging"),e=this._allowReordering(),i=this.callBase.apply(this,arguments),a=this._isFixedTableRendering,r=a?"_sortableFixed":"_sortable",n=a?"_sortable":"_sortableFixed",s=d=>{var u;null===(u=this._sortableFixed)||void 0===u||u.$element().css("pointerEvents",d?"auto":"")},o=".dx-row:not(.dx-freespace-row):not(.dx-virtual-row):not(.dx-header-row):not(.dx-footer-row)",l=this.option("dataRowTemplate")?"> table > tbody".concat(o):"> table > tbody > ".concat(o);return(e||this[r])&&i.length&&(this[r]=this._createComponent(i,fN,(0,C.l)({component:this.component,contentTemplate:null,filter:l,cursorOffset:d=>{var{event:u}=d,h=(0,p.Z)(this.element()).offset();return{x:u.pageX-h.left}},onDraggableElementShown:d=>{if(!t.dragTemplate){var h=(0,p.Z)(d.dragElement).children(".dx-widget").data(this.component.NAME);this._synchronizeScrollLeftPosition(h)}},dragTemplate:this._getDraggableRowTemplate(),handle:t.showDragIcons&&".".concat("dx-command-drag"),dropFeedbackMode:"indicate"},t,{onDragStart:d=>{var u,h;null===(u=this.getController("keyboardNavigation"))||void 0===u||u._resetFocusedCell();var c=d.component.getVisibleRows()[d.fromIndex];d.itemData=c&&c.data,d.cancel=!e||!(c&&"data"===c.rowType),null===(h=t.onDragStart)||void 0===h||h.call(t,d)},onDragEnter:()=>{s(!0)},onDragLeave:()=>{s(!1)},onDragEnd:d=>{var u;s(!1),null===(u=t.onDragEnd)||void 0===u||u.call(t,d)},onAdd:d=>{var u;s(!1),null===(u=t.onAdd)||void 0===u||u.call(t,d)},dropFeedbackMode:t.dropFeedbackMode,onOptionChanged:d=>{this._sortableFixed&&("fromIndex"===d.name||"toIndex"===d.name)&&this[n].option(d.name,d.value)}})),i.toggleClass("dx-scrollable-container",a),i.toggleClass("dx-sortable-without-handle",e&&!t.showDragIcons)),i},_renderCore(t){this.callBase.apply(this,arguments),t&&"update"===t.changeType&&t.repaintChangesOnly&&V.isVirtualRowRendering(this)&&(0,E.Su)(()=>{this._updateSortable()})},_updateSortable(){var t=this._dataController.getRowIndexOffset();[this._sortable,this._sortableFixed].forEach(e=>{e?.option("offset",t),e?.update()})},_resizeCore(){this.callBase.apply(this,arguments),this._updateSortable()},_getDraggableGridOptions(t){var e=this.option(),i=this.getColumns(),a=(0,p.Z)(this.getRowElement(t.rowIndex));return{dataSource:[{id:1,parentId:0}],showBorders:!0,showColumnHeaders:!1,scrolling:{useNative:!1,showScrollbar:"never"},pager:{visible:!1},loadingTimeout:null,columnFixing:e.columnFixing,columnAutoWidth:e.columnAutoWidth,showColumnLines:e.showColumnLines,columns:i.map(r=>({width:r.width||r.visibleWidth,fixed:r.fixed,fixedPosition:r.fixedPosition})),onRowPrepared:r=>{var n=r.component.getView("rowsView");(0,p.Z)(r.rowElement).replaceWith(a.eq(n._isFixedTableRendering?1:0).clone())}}},_synchronizeScrollLeftPosition(t){var e=t?.getScrollable();e?.scrollTo({x:this._scrollLeft})},_getDraggableRowTemplate(){return t=>{var e=this.component.$element(),i=(0,p.Z)("<div>");(0,I.cl)(i,(0,I.dz)(e));var a=this._dataController.items(),n=this._getDraggableGridOptions(a&&a[t.fromIndex]);return this._createComponent(i,this.component.NAME,n),i.find(".dx-gridbase-container").children(":not(.".concat(this.addWidgetPrefix("rowsview"),")")).hide(),i}},_getHandleTemplate(){return(t=>(e,i)=>{var a=(0,p.Z)(e);if("data"===i.rowType)return a.addClass("dx-cell-focus-disabled"),(0,p.Z)("<span>").addClass(t("drag-icon"));V.setEmptyText(a)})(t=>this.addWidgetPrefix(t))},optionChanged(t){"rowDragging"===t.name&&(this._updateHandleColumn(),this._invalidate(!0,!0),t.handled=!0),this.callBase.apply(this,arguments)}};$.registerModule("rowDragging",{defaultOptions:()=>({rowDragging:{showDragIcons:!0,dropFeedbackMode:"indicate",allowReordering:!1,allowDropInsideItem:!1}}),extenders:{views:{rowsView:xN}}});const wN=S0;var fe=L(9784),B=L(2173),um=L(6593);let yN=(()=>{class t extends fe.Ay{constructor(i,a,r,n,s,o,l,d){super(i,a,r,n,l,d),this._watcherHelper=n,this._idh=s,this._createEventEmitters([{subscribe:"adaptiveDetailRowPreparing",emit:"onAdaptiveDetailRowPreparing"},{subscribe:"cellClick",emit:"onCellClick"},{subscribe:"cellDblClick",emit:"onCellDblClick"},{subscribe:"cellHoverChanged",emit:"onCellHoverChanged"},{subscribe:"cellPrepared",emit:"onCellPrepared"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"contextMenuPreparing",emit:"onContextMenuPreparing"},{subscribe:"dataErrorOccurred",emit:"onDataErrorOccurred"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"editCanceled",emit:"onEditCanceled"},{subscribe:"editCanceling",emit:"onEditCanceling"},{subscribe:"editingStart",emit:"onEditingStart"},{subscribe:"editorPrepared",emit:"onEditorPrepared"},{subscribe:"editorPreparing",emit:"onEditorPreparing"},{subscribe:"exporting",emit:"onExporting"},{subscribe:"focusedCellChanged",emit:"onFocusedCellChanged"},{subscribe:"focusedCellChanging",emit:"onFocusedCellChanging"},{subscribe:"focusedRowChanged",emit:"onFocusedRowChanged"},{subscribe:"focusedRowChanging",emit:"onFocusedRowChanging"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"initNewRow",emit:"onInitNewRow"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"rowClick",emit:"onRowClick"},{subscribe:"rowCollapsed",emit:"onRowCollapsed"},{subscribe:"rowCollapsing",emit:"onRowCollapsing"},{subscribe:"rowDblClick",emit:"onRowDblClick"},{subscribe:"rowExpanded",emit:"onRowExpanded"},{subscribe:"rowExpanding",emit:"onRowExpanding"},{subscribe:"rowInserted",emit:"onRowInserted"},{subscribe:"rowInserting",emit:"onRowInserting"},{subscribe:"rowPrepared",emit:"onRowPrepared"},{subscribe:"rowRemoved",emit:"onRowRemoved"},{subscribe:"rowRemoving",emit:"onRowRemoving"},{subscribe:"rowUpdated",emit:"onRowUpdated"},{subscribe:"rowUpdating",emit:"onRowUpdating"},{subscribe:"rowValidating",emit:"onRowValidating"},{subscribe:"saved",emit:"onSaved"},{subscribe:"saving",emit:"onSaving"},{subscribe:"selectionChanged",emit:"onSelectionChanged"},{subscribe:"toolbarPreparing",emit:"onToolbarPreparing"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"allowColumnReorderingChange"},{emit:"allowColumnResizingChange"},{emit:"autoNavigateToFocusedRowChange"},{emit:"cacheEnabledChange"},{emit:"cellHintEnabledChange"},{emit:"columnAutoWidthChange"},{emit:"columnChooserChange"},{emit:"columnFixingChange"},{emit:"columnHidingEnabledChange"},{emit:"columnMinWidthChange"},{emit:"columnResizingModeChange"},{emit:"columnsChange"},{emit:"columnWidthChange"},{emit:"customizeColumnsChange"},{emit:"dataRowTemplateChange"},{emit:"dataSourceChange"},{emit:"dateSerializationFormatChange"},{emit:"disabledChange"},{emit:"editingChange"},{emit:"elementAttrChange"},{emit:"errorRowEnabledChange"},{emit:"exportChange"},{emit:"filterBuilderChange"},{emit:"filterBuilderPopupChange"},{emit:"filterPanelChange"},{emit:"filterRowChange"},{emit:"filterSyncEnabledChange"},{emit:"filterValueChange"},{emit:"focusedColumnIndexChange"},{emit:"focusedRowEnabledChange"},{emit:"focusedRowIndexChange"},{emit:"focusedRowKeyChange"},{emit:"groupingChange"},{emit:"groupPanelChange"},{emit:"headerFilterChange"},{emit:"heightChange"},{emit:"highlightChangesChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"keyboardNavigationChange"},{emit:"keyExprChange"},{emit:"loadPanelChange"},{emit:"masterDetailChange"},{emit:"noDataTextChange"},{emit:"pagerChange"},{emit:"pagingChange"},{emit:"remoteOperationsChange"},{emit:"renderAsyncChange"},{emit:"repaintChangesOnlyChange"},{emit:"rowAlternationEnabledChange"},{emit:"rowDraggingChange"},{emit:"rowTemplateChange"},{emit:"rtlEnabledChange"},{emit:"scrollingChange"},{emit:"searchPanelChange"},{emit:"selectedRowKeysChange"},{emit:"selectionChange"},{emit:"selectionFilterChange"},{emit:"showBordersChange"},{emit:"showColumnHeadersChange"},{emit:"showColumnLinesChange"},{emit:"showRowLinesChange"},{emit:"sortByGroupSummaryInfoChange"},{emit:"sortingChange"},{emit:"stateStoringChange"},{emit:"summaryChange"},{emit:"syncLookupFilterValuesChange"},{emit:"tabIndexChange"},{emit:"toolbarChange"},{emit:"twoWayBindingEnabledChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"wordWrapEnabledChange"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(i){this._setOption("accessKey",i)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(i){this._setOption("activeStateEnabled",i)}get allowColumnReordering(){return this._getOption("allowColumnReordering")}set allowColumnReordering(i){this._setOption("allowColumnReordering",i)}get allowColumnResizing(){return this._getOption("allowColumnResizing")}set allowColumnResizing(i){this._setOption("allowColumnResizing",i)}get autoNavigateToFocusedRow(){return this._getOption("autoNavigateToFocusedRow")}set autoNavigateToFocusedRow(i){this._setOption("autoNavigateToFocusedRow",i)}get cacheEnabled(){return this._getOption("cacheEnabled")}set cacheEnabled(i){this._setOption("cacheEnabled",i)}get cellHintEnabled(){return this._getOption("cellHintEnabled")}set cellHintEnabled(i){this._setOption("cellHintEnabled",i)}get columnAutoWidth(){return this._getOption("columnAutoWidth")}set columnAutoWidth(i){this._setOption("columnAutoWidth",i)}get columnChooser(){return this._getOption("columnChooser")}set columnChooser(i){this._setOption("columnChooser",i)}get columnFixing(){return this._getOption("columnFixing")}set columnFixing(i){this._setOption("columnFixing",i)}get columnHidingEnabled(){return this._getOption("columnHidingEnabled")}set columnHidingEnabled(i){this._setOption("columnHidingEnabled",i)}get columnMinWidth(){return this._getOption("columnMinWidth")}set columnMinWidth(i){this._setOption("columnMinWidth",i)}get columnResizingMode(){return this._getOption("columnResizingMode")}set columnResizingMode(i){this._setOption("columnResizingMode",i)}get columns(){return this._getOption("columns")}set columns(i){this._setOption("columns",i)}get columnWidth(){return this._getOption("columnWidth")}set columnWidth(i){this._setOption("columnWidth",i)}get customizeColumns(){return this._getOption("customizeColumns")}set customizeColumns(i){this._setOption("customizeColumns",i)}get dataRowTemplate(){return this._getOption("dataRowTemplate")}set dataRowTemplate(i){this._setOption("dataRowTemplate",i)}get dataSource(){return this._getOption("dataSource")}set dataSource(i){this._setOption("dataSource",i)}get dateSerializationFormat(){return this._getOption("dateSerializationFormat")}set dateSerializationFormat(i){this._setOption("dateSerializationFormat",i)}get disabled(){return this._getOption("disabled")}set disabled(i){this._setOption("disabled",i)}get editing(){return this._getOption("editing")}set editing(i){this._setOption("editing",i)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(i){this._setOption("elementAttr",i)}get errorRowEnabled(){return this._getOption("errorRowEnabled")}set errorRowEnabled(i){this._setOption("errorRowEnabled",i)}get export(){return this._getOption("export")}set export(i){this._setOption("export",i)}get filterBuilder(){return this._getOption("filterBuilder")}set filterBuilder(i){this._setOption("filterBuilder",i)}get filterBuilderPopup(){return this._getOption("filterBuilderPopup")}set filterBuilderPopup(i){this._setOption("filterBuilderPopup",i)}get filterPanel(){return this._getOption("filterPanel")}set filterPanel(i){this._setOption("filterPanel",i)}get filterRow(){return this._getOption("filterRow")}set filterRow(i){this._setOption("filterRow",i)}get filterSyncEnabled(){return this._getOption("filterSyncEnabled")}set filterSyncEnabled(i){this._setOption("filterSyncEnabled",i)}get filterValue(){return this._getOption("filterValue")}set filterValue(i){this._setOption("filterValue",i)}get focusedColumnIndex(){return this._getOption("focusedColumnIndex")}set focusedColumnIndex(i){this._setOption("focusedColumnIndex",i)}get focusedRowEnabled(){return this._getOption("focusedRowEnabled")}set focusedRowEnabled(i){this._setOption("focusedRowEnabled",i)}get focusedRowIndex(){return this._getOption("focusedRowIndex")}set focusedRowIndex(i){this._setOption("focusedRowIndex",i)}get focusedRowKey(){return this._getOption("focusedRowKey")}set focusedRowKey(i){this._setOption("focusedRowKey",i)}get grouping(){return this._getOption("grouping")}set grouping(i){this._setOption("grouping",i)}get groupPanel(){return this._getOption("groupPanel")}set groupPanel(i){this._setOption("groupPanel",i)}get headerFilter(){return this._getOption("headerFilter")}set headerFilter(i){this._setOption("headerFilter",i)}get height(){return this._getOption("height")}set height(i){this._setOption("height",i)}get highlightChanges(){return this._getOption("highlightChanges")}set highlightChanges(i){this._setOption("highlightChanges",i)}get hint(){return this._getOption("hint")}set hint(i){this._setOption("hint",i)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(i){this._setOption("hoverStateEnabled",i)}get keyboardNavigation(){return this._getOption("keyboardNavigation")}set keyboardNavigation(i){this._setOption("keyboardNavigation",i)}get keyExpr(){return this._getOption("keyExpr")}set keyExpr(i){this._setOption("keyExpr",i)}get loadPanel(){return this._getOption("loadPanel")}set loadPanel(i){this._setOption("loadPanel",i)}get masterDetail(){return this._getOption("masterDetail")}set masterDetail(i){this._setOption("masterDetail",i)}get noDataText(){return this._getOption("noDataText")}set noDataText(i){this._setOption("noDataText",i)}get pager(){return this._getOption("pager")}set pager(i){this._setOption("pager",i)}get paging(){return this._getOption("paging")}set paging(i){this._setOption("paging",i)}get remoteOperations(){return this._getOption("remoteOperations")}set remoteOperations(i){this._setOption("remoteOperations",i)}get renderAsync(){return this._getOption("renderAsync")}set renderAsync(i){this._setOption("renderAsync",i)}get repaintChangesOnly(){return this._getOption("repaintChangesOnly")}set repaintChangesOnly(i){this._setOption("repaintChangesOnly",i)}get rowAlternationEnabled(){return this._getOption("rowAlternationEnabled")}set rowAlternationEnabled(i){this._setOption("rowAlternationEnabled",i)}get rowDragging(){return this._getOption("rowDragging")}set rowDragging(i){this._setOption("rowDragging",i)}get rowTemplate(){return this._getOption("rowTemplate")}set rowTemplate(i){this._setOption("rowTemplate",i)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(i){this._setOption("rtlEnabled",i)}get scrolling(){return this._getOption("scrolling")}set scrolling(i){this._setOption("scrolling",i)}get searchPanel(){return this._getOption("searchPanel")}set searchPanel(i){this._setOption("searchPanel",i)}get selectedRowKeys(){return this._getOption("selectedRowKeys")}set selectedRowKeys(i){this._setOption("selectedRowKeys",i)}get selection(){return this._getOption("selection")}set selection(i){this._setOption("selection",i)}get selectionFilter(){return this._getOption("selectionFilter")}set selectionFilter(i){this._setOption("selectionFilter",i)}get showBorders(){return this._getOption("showBorders")}set showBorders(i){this._setOption("showBorders",i)}get showColumnHeaders(){return this._getOption("showColumnHeaders")}set showColumnHeaders(i){this._setOption("showColumnHeaders",i)}get showColumnLines(){return this._getOption("showColumnLines")}set showColumnLines(i){this._setOption("showColumnLines",i)}get showRowLines(){return this._getOption("showRowLines")}set showRowLines(i){this._setOption("showRowLines",i)}get sortByGroupSummaryInfo(){return this._getOption("sortByGroupSummaryInfo")}set sortByGroupSummaryInfo(i){this._setOption("sortByGroupSummaryInfo",i)}get sorting(){return this._getOption("sorting")}set sorting(i){this._setOption("sorting",i)}get stateStoring(){return this._getOption("stateStoring")}set stateStoring(i){this._setOption("stateStoring",i)}get summary(){return this._getOption("summary")}set summary(i){this._setOption("summary",i)}get syncLookupFilterValues(){return this._getOption("syncLookupFilterValues")}set syncLookupFilterValues(i){this._setOption("syncLookupFilterValues",i)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(i){this._setOption("tabIndex",i)}get toolbar(){return this._getOption("toolbar")}set toolbar(i){this._setOption("toolbar",i)}get twoWayBindingEnabled(){return this._getOption("twoWayBindingEnabled")}set twoWayBindingEnabled(i){this._setOption("twoWayBindingEnabled",i)}get visible(){return this._getOption("visible")}set visible(i){this._setOption("visible",i)}get width(){return this._getOption("width")}set width(i){this._setOption("width",i)}get wordWrapEnabled(){return this._getOption("wordWrapEnabled")}set wordWrapEnabled(i){this._setOption("wordWrapEnabled",i)}get columnsChildren(){return this._getOption("columns")}set columnsChildren(i){this.setChildren("columns",i)}get sortByGroupSummaryInfoChildren(){return this._getOption("sortByGroupSummaryInfo")}set sortByGroupSummaryInfoChildren(i){this.setChildren("sortByGroupSummaryInfo",i)}_createInstance(i,a){return new wN(i,a)}ngOnDestroy(){this._destroyWidget()}ngOnChanges(i){super.ngOnChanges(i),this.setupChanges("columns",i),this.setupChanges("dataSource",i),this.setupChanges("keyExpr",i),this.setupChanges("selectedRowKeys",i),this.setupChanges("sortByGroupSummaryInfo",i)}setupChanges(i,a){i in this._optionsToUpdate||this._idh.setup(i,a)}ngDoCheck(){this._idh.doCheck("columns"),this._idh.doCheck("dataSource"),this._idh.doCheck("keyExpr"),this._idh.doCheck("selectedRowKeys"),this._idh.doCheck("sortByGroupSummaryInfo"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(i,a){let r=this._idh.setupSingle(i,a),n=null!==this._idh.getChanges(i,a);(r||n)&&super._setOption(i,a)}}return t.\u0275fac=function(i){return new(i||t)(R.Y36(R.SBq),R.Y36(R.R0b),R.Y36(fe._5),R.Y36(fe._h),R.Y36(fe.i9),R.Y36(fe.al),R.Y36(um.ki),R.Y36(R.Lbi))},t.\u0275cmp=R.Xpm({type:t,selectors:[["dx-data-grid"]],contentQueries:function(i,a,r){if(1&i&&(R.Suo(r,B.qvW,4),R.Suo(r,B.KkC,4)),2&i){let n;R.iGM(n=R.CRH())&&(a.columnsChildren=n),R.iGM(n=R.CRH())&&(a.sortByGroupSummaryInfoChildren=n)}},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",allowColumnReordering:"allowColumnReordering",allowColumnResizing:"allowColumnResizing",autoNavigateToFocusedRow:"autoNavigateToFocusedRow",cacheEnabled:"cacheEnabled",cellHintEnabled:"cellHintEnabled",columnAutoWidth:"columnAutoWidth",columnChooser:"columnChooser",columnFixing:"columnFixing",columnHidingEnabled:"columnHidingEnabled",columnMinWidth:"columnMinWidth",columnResizingMode:"columnResizingMode",columns:"columns",columnWidth:"columnWidth",customizeColumns:"customizeColumns",dataRowTemplate:"dataRowTemplate",dataSource:"dataSource",dateSerializationFormat:"dateSerializationFormat",disabled:"disabled",editing:"editing",elementAttr:"elementAttr",errorRowEnabled:"errorRowEnabled",export:"export",filterBuilder:"filterBuilder",filterBuilderPopup:"filterBuilderPopup",filterPanel:"filterPanel",filterRow:"filterRow",filterSyncEnabled:"filterSyncEnabled",filterValue:"filterValue",focusedColumnIndex:"focusedColumnIndex",focusedRowEnabled:"focusedRowEnabled",focusedRowIndex:"focusedRowIndex",focusedRowKey:"focusedRowKey",grouping:"grouping",groupPanel:"groupPanel",headerFilter:"headerFilter",height:"height",highlightChanges:"highlightChanges",hint:"hint",hoverStateEnabled:"hoverStateEnabled",keyboardNavigation:"keyboardNavigation",keyExpr:"keyExpr",loadPanel:"loadPanel",masterDetail:"masterDetail",noDataText:"noDataText",pager:"pager",paging:"paging",remoteOperations:"remoteOperations",renderAsync:"renderAsync",repaintChangesOnly:"repaintChangesOnly",rowAlternationEnabled:"rowAlternationEnabled",rowDragging:"rowDragging",rowTemplate:"rowTemplate",rtlEnabled:"rtlEnabled",scrolling:"scrolling",searchPanel:"searchPanel",selectedRowKeys:"selectedRowKeys",selection:"selection",selectionFilter:"selectionFilter",showBorders:"showBorders",showColumnHeaders:"showColumnHeaders",showColumnLines:"showColumnLines",showRowLines:"showRowLines",sortByGroupSummaryInfo:"sortByGroupSummaryInfo",sorting:"sorting",stateStoring:"stateStoring",summary:"summary",syncLookupFilterValues:"syncLookupFilterValues",tabIndex:"tabIndex",toolbar:"toolbar",twoWayBindingEnabled:"twoWayBindingEnabled",visible:"visible",width:"width",wordWrapEnabled:"wordWrapEnabled"},outputs:{onAdaptiveDetailRowPreparing:"onAdaptiveDetailRowPreparing",onCellClick:"onCellClick",onCellDblClick:"onCellDblClick",onCellHoverChanged:"onCellHoverChanged",onCellPrepared:"onCellPrepared",onContentReady:"onContentReady",onContextMenuPreparing:"onContextMenuPreparing",onDataErrorOccurred:"onDataErrorOccurred",onDisposing:"onDisposing",onEditCanceled:"onEditCanceled",onEditCanceling:"onEditCanceling",onEditingStart:"onEditingStart",onEditorPrepared:"onEditorPrepared",onEditorPreparing:"onEditorPreparing",onExporting:"onExporting",onFocusedCellChanged:"onFocusedCellChanged",onFocusedCellChanging:"onFocusedCellChanging",onFocusedRowChanged:"onFocusedRowChanged",onFocusedRowChanging:"onFocusedRowChanging",onInitialized:"onInitialized",onInitNewRow:"onInitNewRow",onKeyDown:"onKeyDown",onOptionChanged:"onOptionChanged",onRowClick:"onRowClick",onRowCollapsed:"onRowCollapsed",onRowCollapsing:"onRowCollapsing",onRowDblClick:"onRowDblClick",onRowExpanded:"onRowExpanded",onRowExpanding:"onRowExpanding",onRowInserted:"onRowInserted",onRowInserting:"onRowInserting",onRowPrepared:"onRowPrepared",onRowRemoved:"onRowRemoved",onRowRemoving:"onRowRemoving",onRowUpdated:"onRowUpdated",onRowUpdating:"onRowUpdating",onRowValidating:"onRowValidating",onSaved:"onSaved",onSaving:"onSaving",onSelectionChanged:"onSelectionChanged",onToolbarPreparing:"onToolbarPreparing",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",allowColumnReorderingChange:"allowColumnReorderingChange",allowColumnResizingChange:"allowColumnResizingChange",autoNavigateToFocusedRowChange:"autoNavigateToFocusedRowChange",cacheEnabledChange:"cacheEnabledChange",cellHintEnabledChange:"cellHintEnabledChange",columnAutoWidthChange:"columnAutoWidthChange",columnChooserChange:"columnChooserChange",columnFixingChange:"columnFixingChange",columnHidingEnabledChange:"columnHidingEnabledChange",columnMinWidthChange:"columnMinWidthChange",columnResizingModeChange:"columnResizingModeChange",columnsChange:"columnsChange",columnWidthChange:"columnWidthChange",customizeColumnsChange:"customizeColumnsChange",dataRowTemplateChange:"dataRowTemplateChange",dataSourceChange:"dataSourceChange",dateSerializationFormatChange:"dateSerializationFormatChange",disabledChange:"disabledChange",editingChange:"editingChange",elementAttrChange:"elementAttrChange",errorRowEnabledChange:"errorRowEnabledChange",exportChange:"exportChange",filterBuilderChange:"filterBuilderChange",filterBuilderPopupChange:"filterBuilderPopupChange",filterPanelChange:"filterPanelChange",filterRowChange:"filterRowChange",filterSyncEnabledChange:"filterSyncEnabledChange",filterValueChange:"filterValueChange",focusedColumnIndexChange:"focusedColumnIndexChange",focusedRowEnabledChange:"focusedRowEnabledChange",focusedRowIndexChange:"focusedRowIndexChange",focusedRowKeyChange:"focusedRowKeyChange",groupingChange:"groupingChange",groupPanelChange:"groupPanelChange",headerFilterChange:"headerFilterChange",heightChange:"heightChange",highlightChangesChange:"highlightChangesChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",keyboardNavigationChange:"keyboardNavigationChange",keyExprChange:"keyExprChange",loadPanelChange:"loadPanelChange",masterDetailChange:"masterDetailChange",noDataTextChange:"noDataTextChange",pagerChange:"pagerChange",pagingChange:"pagingChange",remoteOperationsChange:"remoteOperationsChange",renderAsyncChange:"renderAsyncChange",repaintChangesOnlyChange:"repaintChangesOnlyChange",rowAlternationEnabledChange:"rowAlternationEnabledChange",rowDraggingChange:"rowDraggingChange",rowTemplateChange:"rowTemplateChange",rtlEnabledChange:"rtlEnabledChange",scrollingChange:"scrollingChange",searchPanelChange:"searchPanelChange",selectedRowKeysChange:"selectedRowKeysChange",selectionChange:"selectionChange",selectionFilterChange:"selectionFilterChange",showBordersChange:"showBordersChange",showColumnHeadersChange:"showColumnHeadersChange",showColumnLinesChange:"showColumnLinesChange",showRowLinesChange:"showRowLinesChange",sortByGroupSummaryInfoChange:"sortByGroupSummaryInfoChange",sortingChange:"sortingChange",stateStoringChange:"stateStoringChange",summaryChange:"summaryChange",syncLookupFilterValuesChange:"syncLookupFilterValuesChange",tabIndexChange:"tabIndexChange",toolbarChange:"toolbarChange",twoWayBindingEnabledChange:"twoWayBindingEnabledChange",visibleChange:"visibleChange",widthChange:"widthChange",wordWrapEnabledChange:"wordWrapEnabledChange"},features:[R._Bn([fe._5,fe._h,fe.al,fe.i9]),R.qOj,R.TTD],decls:0,vars:0,template:function(i,a){},encapsulation:2}),t})(),EN=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=R.oAB({type:t}),t.\u0275inj=R.cJS({imports:[[B.Uz5,B.D_l,B.JxK,B.zZW,B.ynY,B.lgR,B.sni,B.FcQ,B.kEo,B.LNK,B.mtS,B.tRk,B.idP,B.HaS,B.CxW,B.FZZ,B.Inm,B.e1H,B.$D5,B.SCM,B.DTR,B.ZCX,B.Oll,B.Q8p,B.Jiy,B._9O,B.kSd,B.fOF,B.IOm,B.kOw,B.weU,B.waX,B.pxS,B.pGy,B.lj9,B.SH1,B.FJZ,B.RbS,B.$wd,B.xHg,B.p6x,B.vLN,B.rH1,B.lUW,B.kIp,B.yFA,B.$9q,B.nD3,B.Pj6,B.Upd,B.WSE,B.LHj,B._PP,B.ywL,B.WyY,B.$YR,B.aLr,B.uKt,B.YOZ,B.Axk,B.Zjs,B.GaT,B.zLN,B.azD,fe.Lz,fe.ie],B.Uz5,B.D_l,B.JxK,B.zZW,B.ynY,B.lgR,B.sni,B.FcQ,B.kEo,B.LNK,B.mtS,B.tRk,B.idP,B.HaS,B.CxW,B.FZZ,B.Inm,B.e1H,B.$D5,B.SCM,B.DTR,B.ZCX,B.Oll,B.Q8p,B.Jiy,B._9O,B.kSd,B.fOF,B.IOm,B.kOw,B.weU,B.waX,B.pxS,B.pGy,B.lj9,B.SH1,B.FJZ,B.RbS,B.$wd,B.xHg,B.p6x,B.vLN,B.rH1,B.lUW,B.kIp,B.yFA,B.$9q,B.nD3,B.Pj6,B.Upd,B.WSE,B.LHj,B._PP,B.ywL,B.WyY,B.$YR,B.aLr,B.uKt,B.YOZ,B.Axk,B.Zjs,B.GaT,B.zLN,B.azD,fe.ie]}),t})();var hm=L(6358),ei="dx-switch",IN=ei+"-wrapper",TN=ei+"-container",AN=ei+"-inner",DN=ei+"-handle",cm=ei+"-on-value",ON=ei+"-on",RN=ei+"-off",pm=Ot.Z.inherit({_supportedKeys:function(){var t=this.option("rtlEnabled"),e=function(a){a.preventDefault(),this._clickAction({event:a})},i=function(a,r){r.preventDefault(),r.stopPropagation(),this._saveValueChangeEvent(r),this._animateValue(a)};return(0,C.l)(this.callBase(),{space:e,enter:e,leftArrow:i.bind(this,!!t),rightArrow:i.bind(this,!t)})},_useTemplates:function(){return!1},_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,switchedOnText:A.Z.format("dxSwitch-switchedOnText"),switchedOffText:A.Z.format("dxSwitch-switchedOffText"),value:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===K.Z.real().deviceType&&!K.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_feedbackHideTimeout:0,_animating:!1,_initMarkup:function(){this._renderContainers(),this.$element().addClass(ei).append(this._$switchWrapper),this._renderSubmitElement(),this._renderClick(),this.setAria("role","button"),this._renderSwipeable(),this.callBase(),this._renderSwitchInner(),this._renderLabels(),this._renderValue()},_getInnerOffset:function(t,e){return(e-this._offsetDirection()*+!t)/2*100+"%"},_getHandleOffset:function(t,e){return this.option("rtlEnabled")&&(t=!t),t?100*-e-100+"%":100*-e+"%"},_renderSwitchInner:function(){this._$switchInner=(0,p.Z)("<div>").addClass(AN).appendTo(this._$switchContainer),this._$handle=(0,p.Z)("<div>").addClass(DN).appendTo(this._$switchInner)},_renderLabels:function(){this._$labelOn=(0,p.Z)("<div>").addClass(ON).prependTo(this._$switchInner),this._$labelOff=(0,p.Z)("<div>").addClass(RN).appendTo(this._$switchInner),this._setLabelsText()},_renderContainers:function(){this._$switchContainer=(0,p.Z)("<div>").addClass(TN),this._$switchWrapper=(0,p.Z)("<div>").addClass(IN).append(this._$switchContainer)},_renderSwipeable:function(){this._createComponent(this.$element(),rn,{elastic:!1,immediate:!0,onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._getItemSizeFunc.bind(this)})},_getItemSizeFunc:function(){return(0,I.Y_)(this._$switchContainer,!0)-(0,se.l)(this._$handle.get(0)).width},_renderSubmitElement:function(){this._$submitElement=(0,p.Z)("<input>").attr("type","hidden").appendTo(this.$element())},_getSubmitElement:function(){return this._$submitElement},_offsetDirection:function(){return this.option("rtlEnabled")?-1:1},_renderPosition:function(t,e){var i=this._getInnerOffset(t,e),a=this._getHandleOffset(t,e);this._$switchInner.css("transform"," translateX("+i+")"),this._$handle.css("transform"," translateX("+a+")")},_validateValue:function(){var t=this.option("value");"boolean"!=typeof t&&this._options.silent("value",!!t)},_renderClick:function(){var t=(0,D.V4)(ie.u,this.NAME),e=this.$element();this._clickAction=this._createAction(this._clickHandler.bind(this)),S.Z.off(e,t),S.Z.on(e,t,function(i){this._clickAction({event:i})}.bind(this))},_clickHandler:function(t){this._saveValueChangeEvent(t.event),!this._animating&&!this._swiping&&this._animateValue(!this.option("value"))},_animateValue:function(t){var e=this.option("value"),i=t;if(e!==i){this._animating=!0;var a=this._getInnerOffset(e,0),r=this._getInnerOffset(i,0),n=this._getHandleOffset(e,0),s=this._getHandleOffset(i,0),o=this,l={},d={},u={},h={};l.transform=" translateX("+a+")",d.transform=" translateX("+r+")",u.transform=" translateX("+n+")",h.transform=" translateX("+s+")",this.$element().toggleClass(cm,i),ce.Z.animate(this._$handle,{from:u,to:h,duration:100}),ce.Z.animate(this._$switchInner,{from:l,to:d,duration:100,complete:function(){o._animating=!1,o.option("value",i)}})}},_swipeStartHandler:function(t){var e=this.option("value"),i=this.option("rtlEnabled"),a=i?0:1,r=i?1:0;t.event.maxLeftOffset=e?a:r,t.event.maxRightOffset=e?r:a,this._swiping=!0,this._feedbackDeferred=new b.BH,(0,Gc.dR)(this._feedbackDeferred),this._toggleActiveState(this.$element(),this.option("activeStateEnabled"))},_swipeUpdateHandler:function(t){this._renderPosition(this.option("value"),t.event.offset)},_swipeEndHandler:function(t){var e=this,i=this._offsetDirection(),a={},r={},n=this._getInnerOffset(e.option("value"),t.event.targetOffset),s=this._getHandleOffset(e.option("value"),t.event.targetOffset);a.transform=" translateX("+n+")",r.transform=" translateX("+s+")",ce.Z.animate(this._$handle,{to:r,duration:100}),ce.Z.animate(this._$switchInner,{to:a,duration:100,complete:function(){e._swiping=!1;var o=e.option("value")+i*t.event.targetOffset;e._saveValueChangeEvent(t.event),e.option("value",!!o),e._feedbackDeferred.resolve(),e._toggleActiveState(e.$element(),!1)}})},_renderValue:function(){this._validateValue();var t=this.option("value");this._renderPosition(t,0),this.$element().toggleClass(cm,t),this._getSubmitElement().val(t),this.setAria({pressed:t,label:this.option(t?"switchedOnText":"switchedOffText")})},_setLabelsText:function(){this._$labelOn&&this._$labelOn.text(this.option("switchedOnText")),this._$labelOff&&this._$labelOff.text(this.option("switchedOffText"))},_visibilityChanged:function(t){t&&this.repaint()},_optionChanged:function(t){switch(t.name){case"width":delete this._marginBound,this._refresh();break;case"switchedOnText":case"switchedOffText":this._setLabelsText();break;case"value":this._renderValue(),this.callBase(t);break;default:this.callBase(t)}}});(0,J.Z)("dxSwitch",pm);const BN=pm,VN={provide:L(95).JU,useExisting:(0,R.Gpc)(()=>_m),multi:!0};let _m=(()=>{class t extends fe.Ay{constructor(i,a,r,n,s,o,l,d){super(i,a,r,n,l,d),this._watcherHelper=n,this._idh=s,this.touched=u=>{},this._createEventEmitters([{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"isValidChange"},{emit:"nameChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"switchedOffTextChange"},{emit:"switchedOnTextChange"},{emit:"tabIndexChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(i){this._setOption("accessKey",i)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(i){this._setOption("activeStateEnabled",i)}get disabled(){return this._getOption("disabled")}set disabled(i){this._setOption("disabled",i)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(i){this._setOption("elementAttr",i)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(i){this._setOption("focusStateEnabled",i)}get height(){return this._getOption("height")}set height(i){this._setOption("height",i)}get hint(){return this._getOption("hint")}set hint(i){this._setOption("hint",i)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(i){this._setOption("hoverStateEnabled",i)}get isValid(){return this._getOption("isValid")}set isValid(i){this._setOption("isValid",i)}get name(){return this._getOption("name")}set name(i){this._setOption("name",i)}get readOnly(){return this._getOption("readOnly")}set readOnly(i){this._setOption("readOnly",i)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(i){this._setOption("rtlEnabled",i)}get switchedOffText(){return this._getOption("switchedOffText")}set switchedOffText(i){this._setOption("switchedOffText",i)}get switchedOnText(){return this._getOption("switchedOnText")}set switchedOnText(i){this._setOption("switchedOnText",i)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(i){this._setOption("tabIndex",i)}get validationError(){return this._getOption("validationError")}set validationError(i){this._setOption("validationError",i)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(i){this._setOption("validationErrors",i)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(i){this._setOption("validationMessageMode",i)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(i){this._setOption("validationMessagePosition",i)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(i){this._setOption("validationStatus",i)}get value(){return this._getOption("value")}set value(i){this._setOption("value",i)}get visible(){return this._getOption("visible")}set visible(i){this._setOption("visible",i)}get width(){return this._getOption("width")}set width(i){this._setOption("width",i)}change(i){}_createInstance(i,a){return new BN(i,a)}writeValue(i){this.eventHelper.lockedValueChangeEvent=!0,this.value=i,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(i){this.disabled=i}registerOnChange(i){this.change=i}registerOnTouched(i){this.touched=i}_createWidget(i){super._createWidget(i),this.instance.on("focusOut",a=>{this.eventHelper.fireNgEvent("onBlur",[a])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(i){super.ngOnChanges(i),this.setupChanges("validationErrors",i)}setupChanges(i,a){i in this._optionsToUpdate||this._idh.setup(i,a)}ngDoCheck(){this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(i,a){let r=this._idh.setupSingle(i,a),n=null!==this._idh.getChanges(i,a);(r||n)&&super._setOption(i,a)}}return t.\u0275fac=function(i){return new(i||t)(R.Y36(R.SBq),R.Y36(R.R0b),R.Y36(fe._5),R.Y36(fe._h),R.Y36(fe.i9),R.Y36(fe.al),R.Y36(um.ki),R.Y36(R.Lbi))},t.\u0275cmp=R.Xpm({type:t,selectors:[["dx-switch"]],hostBindings:function(i,a){1&i&&R.NdJ("valueChange",function(n){return a.change(n)})("onBlur",function(n){return a.touched(n)})},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",disabled:"disabled",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",isValid:"isValid",name:"name",readOnly:"readOnly",rtlEnabled:"rtlEnabled",switchedOffText:"switchedOffText",switchedOnText:"switchedOnText",tabIndex:"tabIndex",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",visible:"visible",width:"width"},outputs:{onContentReady:"onContentReady",onDisposing:"onDisposing",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",onValueChanged:"onValueChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",isValidChange:"isValidChange",nameChange:"nameChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",switchedOffTextChange:"switchedOffTextChange",switchedOnTextChange:"switchedOnTextChange",tabIndexChange:"tabIndexChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[R._Bn([fe._5,fe._h,VN,fe.al,fe.i9]),R.qOj,R.TTD],decls:0,vars:0,template:function(i,a){},encapsulation:2}),t})(),PN=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=R.oAB({type:t}),t.\u0275inj=R.cJS({imports:[[fe.Lz,fe.ie],fe.ie]}),t})();var vm=L(6627),FN=L(5861),Ei=L(6443),gm=(0,Z.Jj)(),fm="dx-toast",Ii=fm+"-",kN=Ii+"wrapper",NN=Ii+"content",HN=Ii+"message",ZN=Ii+"icon",zN=["info","warning","error","success"],nd=[],KN={top:{my:"top",at:"top",of:null,offset:"0 0"},bottom:{my:"bottom",at:"bottom",of:null,offset:"0 -20"},center:{my:"center",at:"center",of:null,offset:"0 0"},right:{my:"center right",at:"center right",of:null,offset:"0 0"},left:{my:"center left",at:"center left",of:null,offset:"0 0"}},GN={h:0,v:0};(0,fu.Z.add)(function(){S.Z.subscribeGlobal(Y.Z.getDocument(),re.Z.down,function(t){for(var e=nd.length-1;e>=0;e--)if(!nd[e]._proxiedDocumentDownHandler(t))return})});var mm=Nt.Z.inherit({_getDefaultOptions:function(){return(0,C.l)(this.callBase(),{message:"",type:"info",displayTime:2e3,position:"bottom center",animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},shading:!1,height:"auto",hideTopOverlayHandler:null,preventScrollEvents:!1,closeOnSwipe:!0,closeOnClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"android"},options:{hideOnOutsideClick:!0,width:"auto",animation:{show:{type:"slide",duration:200,from:{position:{my:"top",at:"bottom",of:gm}}},hide:{type:"slide",duration:200,to:{position:{my:"top",at:"bottom",of:gm}}}}}},{device:function(t){return"phone"===t.deviceType&&"android"===t.platform},options:{width:"100vw",position:{at:"bottom center",my:"bottom center",offset:"0 0"}}},{device:function(t){return"phone"===t.deviceType},options:{width:"100vw"}},{device:function(){return(0,oe.x2)()},options:{minWidth:344,maxWidth:568,displayTime:4e3}}])},_init:function(){this.callBase(),this._posStringToObject()},_renderContentImpl:function(){this._message=(0,p.Z)("<div>").addClass(HN).text(this.option("message")).appendTo(this.$content()),this.setAria("role","alert",this._message),zN.includes(this.option("type").toLowerCase())&&this.$content().prepend((0,p.Z)("<div>").addClass(ZN)),this.callBase()},_render:function(){this.callBase(),this.$element().addClass(fm),this.$wrapper().addClass(kN),this.$content().addClass(Ii+String(this.option("type")).toLowerCase()),this.$content().addClass(NN),this._toggleCloseEvents("Swipe"),this._toggleCloseEvents("Click")},_toggleCloseEvents:function(t){var e="dx"+t.toLowerCase();S.Z.off(this.$content(),e),this.option("closeOn"+t)&&S.Z.on(this.$content(),e,this.hide.bind(this))},_posStringToObject:function(){if((0,v.HD)(this.option("position"))){var t=this.option("position").split(" ")[0],e=this.option("position").split(" ")[1];switch(this.option("position",(0,C.l)({boundaryOffset:GN},KN[t])),e){case"center":case"left":case"right":this.option("position").at+=" "+e,this.option("position").my+=" "+e}}},_show:function(){return this.callBase.apply(this,arguments).always(function(){clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(this.hide.bind(this),this.option("displayTime"))}.bind(this))},_overlayStack:function(){return nd},_zIndexInitValue:function(){return this.callBase()+8e3},_dispose:function(){clearTimeout(this._hideTimeout),this.callBase()},_optionChanged:function(t){switch(t.name){case"type":this.$content().removeClass(Ii+t.previousValue),this.$content().addClass(Ii+String(t.value).toLowerCase());break;case"message":this._message&&this._message.text(t.value);break;case"closeOnSwipe":this._toggleCloseEvents("Swipe");break;case"closeOnClick":this._toggleCloseEvents("Click");break;case"displayTime":break;default:this.callBase(t)}}});(0,J.Z)("dxToast",mm);const UN=mm;var Cm=(0,Z.Jj)(),Sm=null,xm={},eH=(t,e)=>{var{toastWidth:i,toastHeight:a,windowHeight:r,windowWidth:n}=e;switch(t){case"top left":return{top:10,left:10};case"top right":return{top:10,right:10};case"bottom left":return{bottom:10,left:10};case"bottom right":return{bottom:10,right:10};case"top center":return{top:10,left:Math.round(n/2-i/2)};case"left center":return{top:Math.round(r/2-a/2),left:10};case"right center":return{top:Math.round(r/2-a/2),right:10};case"center":return{top:Math.round(r/2-a/2),left:Math.round(n/2-i/2)};default:return{bottom:10,left:Math.round(n/2-i/2)}}},tH=(t,e,i)=>{var a,r,n,s,o,l,d,u,h,c,_,g,{toastWidth:f,toastHeight:m,windowHeight:x,windowWidth:w}=i;switch(t.replace(/-push|-stack/g,"")){case"up":return{bottom:null!==(a=e.bottom)&&void 0!==a?a:x-m-e.top,top:"",left:null!==(r=e.left)&&void 0!==r?r:"",right:null!==(n=e.right)&&void 0!==n?n:""};case"down":return{top:null!==(s=e.top)&&void 0!==s?s:x-m-e.bottom,bottom:"",left:null!==(o=e.left)&&void 0!==o?o:"",right:null!==(l=e.right)&&void 0!==l?l:""};case"left":return{right:null!==(d=e.right)&&void 0!==d?d:w-f-e.left,left:"",top:null!==(u=e.top)&&void 0!==u?u:"",bottom:null!==(h=e.bottom)&&void 0!==h?h:""};case"right":return{left:null!==(c=e.left)&&void 0!==c?c:w-f-e.right,right:"",top:null!==(_=e.top)&&void 0!==_?_:"",bottom:null!==(g=e.bottom)&&void 0!==g?g:""}}};const bm=function YN(t,e,i){var a=(0,v.PO)(t)?t:{message:t},r=(0,v.PO)(e)?e:void 0,n=(0,v.PO)(e)?void 0:e,{onHidden:s}=a;if(null!=r&&r.position){var{position:o}=r,l=r.direction||(t=>(0,v.HD)(t)&&t.includes("top")?"down-push":"up-push")(o),d=(0,v.HD)(o)?o:"".concat(o.top,"-").concat(o.left,"-").concat(o.bottom,"-").concat(o.right),{onShowing:u}=a,h=(t=>xm[t]||(t=>{var e=(0,p.Z)("<div>").appendTo((0,ya.S3)());return xm[t]=e,e})(t))(d);((t,e)=>{var i="dx-toast-stack dx-toast-stack-".concat(e,"-direction");t.removeAttr("class").addClass(i)})(h,l),(0,C.l)(a,{container:h,onShowing:function(c){((t,e,i)=>{var{offsetWidth:a,offsetHeight:r}=t.children().first().get(0),n={toastWidth:a,toastHeight:r,windowHeight:Cm.innerHeight,windowWidth:Cm.innerWidth},s=(0,v.HD)(i)?eH(i,n):i,o=tH(e,s,n);t.css(o)})(h,l,o),u?.(c)}})}(0,C.l)(a,{type:n,displayTime:i,onHidden:function(c){(0,p.Z)(c.element).remove(),s?.(c)}}),Sm=(0,p.Z)("<div>").appendTo((0,ya.S3)()),new UN(Sm,a).show()};var aH=L(8607),rH=L(1880),nH=L(74);let sH=(()=>{class t{constructor(){this.grabber=!1}onMouseDown(){this.grabber=!0}onMouseUp(){this.grabber=!1}calcPercentages(i,a){const r=i/a*100;return{left:r,right:100-r}}onMouseMove(i){if(this.grabber){i.preventDefault();const{left:a,right:r}=this.calcPercentages(i.clientX,window.innerWidth);this.leftElement.style.flex=`${a}%`,this.rightElement.style.flex=`${r}%`}}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275dir=R.lG2({type:t,selectors:[["","appResize",""]],hostBindings:function(a,r){1&a&&R.NdJ("mousedown",function(){return r.onMouseDown()})("mouseup",function(){return r.onMouseUp()},!1,R.Jf7)("mousemove",function(s){return r.onMouseMove(s)},!1,R.Jf7)},inputs:{leftElement:["leftResize","leftElement"],rightElement:["rightResize","rightElement"]}})}return t})();const oH=["projectsGrid"],lH=["usersGrid"];function dH(t,e){if(1&t&&(R.TgZ(0,"div"),R._uU(1),R.qZA()),2&t){const i=e.$implicit,a=R.oxw().$implicit,r=R.oxw();R.xp6(1),R.hij(" ",r.intersectedSkills(i.value,a.data.technologies)," ")}}function uH(t,e){if(1&t&&(R.TgZ(0,"div")(1,"div",26),R._uU(2),R.qZA(),R.TgZ(3,"dx-data-grid",27,28),R._UZ(5,"dxo-row-dragging",29)(6,"dxo-editing",30)(7,"dxo-lookup",31)(8,"dxi-column",32),R.TgZ(9,"dxi-column",33),R._UZ(10,"dxo-lookup",31),R.qZA(),R._UZ(11,"dxi-column",34),R.YNc(12,dH,2,1,"div",25),R.qZA()()),2&t){const i=e.$implicit,a=R.oxw();R.xp6(2),R.AsE(" Aplicari pt. ",i.data.company," - ",i.data.project," "),R.xp6(1),R.Q6J("dataSource",i.data.applications)("showBorders",!0)("columnAutoWidth",!0),R.xp6(2),R.MGl("data","applications-",i.data.id,""),R.Q6J("showDragIcons",!1)("onDragStart",a.onProjectDragStart),R.xp6(1),R.Q6J("allowUpdating",!0)("allowDeleting",!0),R.xp6(1),R.Q6J("dataSource",a.statuses),R.xp6(1),R.Q6J("allowEditing",!1),R.xp6(1),R.Q6J("selectedFilterOperation",a.dynamicSelectedFilterOperation)("filterValue",a.dynamicFilterValue)("calculateCellValue",a.calculateStatus)("allowEditing",!0),R.xp6(1),R.Q6J("dataSource",a.statuses),R.xp6(1),R.Q6J("allowEditing",!1),R.xp6(1),R.Q6J("dxTemplateOf","skillsTemplate")}}const hH=function(){return{enabled:!0}},cH=function(t){return{dataSource:t}},pH=function(){return{mode:"virtual"}},_H=[{path:"",component:(()=>{class t{constructor(i,a){this.projectService=i,this.userService=a,this.style={},this.statuses=Object.values(Ei.YG),this.users=this.userService.users(),this.projects=this.projectService.projects(),this.skillsSet=new Set(this.users.flatMap(r=>r.skills)),this.skills=[...this.skillsSet],this.dynamicSelectedFilterOperation="contains",this.dynamicFilterValue="",this.isToggled=!1,this.onUserDragEnd=this.onUserDragEnd.bind(this)}toggleFilterAttributes(){this.isToggled?(this.dynamicSelectedFilterOperation="contains",this.dynamicFilterValue=""):(this.dynamicSelectedFilterOperation="notcontains",this.dynamicFilterValue="respinsa"),this.isToggled=!this.isToggled}isStatusActive(i){return[Ei.YG.new,Ei.YG.proposedByBl,Ei.YG.proposedByClient,Ei.YG.possibleAlocation].includes(i)}intersectedSkills(i,a){return i.filter(r=>a.includes(r))}calculateSkillsFilterExpression(i,a){return[this.calculateCellValue,"contains",i]}calculateCellValue(i){return function iH(t){return"id"in t&&"name"in t&&"cc"in t&&"skills"in t&&"type"in t}(i)?i.skills.join(", "):i}calculateDisplayValue(i){return(0,Ei.zQ)(i)?i.user.skills.join(", "):i}calculateStatus(i){return i.statuses&&i.statuses.length>0?i.statuses[i.statuses.length-1].status:Ei.YG.new}onProjectDragStart(i){i.cancel=!0}onUserDragEnd(i){var a=this;return(0,FN.Z)(function*(){if("users"!==i.fromData)return void(i.cancel=!0);if("projects"===i.toData&&!1===i.dropInsideItem)return void(i.cancel=!0);let r;i.toData.startsWith("aplicari")&&(r=+i.toData.split("aplicari-")[1]),"projects"===i.toData&&(r=a.projectsGrid.instance.getKeyByRowIndex(+i.toIndex),a.projectsGrid.instance.expandRow(r));const n=i.itemData,s=a.projects.find(o=>o.id===r);if(s){if(s.applications.find(u=>u.user.id===n.id))return void bm(`User ${n.name} is already allocated in project ${s.company} - ${s.project}`,"warning");(a.intersectedSkills(n.skills,s.technologies).length>0?yield Mo(`Are you sure you want to add ${n.name} to project ${s.company} - ${s.project}`,"Confirm"):yield Mo(`User ${n.name} does not have any relevant skills for project ${s.company} - ${s.project}. Are you sure you want to add him?`,"Skills mismatch"))&&(a.projectService.addUserToProject(n,s),bm(`User ${n.name} added to project ${s.company} - ${s.project}`,"success"))}})()}onEditorPreparing(i){"data"===i.parentType&&"status"===i.dataField&&i.row.data.statuses&&(i.editorOptions.onValueChanged=a=>{a.value&&(i.row.data.statuses.push({status:a.value,timestamp:new Date}),this.projectsGrid.instance.refresh())})}static#e=this.\u0275fac=function(a){return new(a||t)(R.Y36(aH.Y),R.Y36(rH.K))};static#t=this.\u0275cmp=R.Xpm({type:t,selectors:[["app-staffing-up"]],viewQuery:function(a,r){if(1&a&&(R.Gf(oH,5),R.Gf(lH,5)),2&a){let n;R.iGM(n=R.CRH())&&(r.projectsGrid=n.first),R.iGM(n=R.CRH())&&(r.usersGrid=n.first)}},decls:32,vars:32,consts:[[1,"overflow-hidden"],[1,"flex","items-center","gap-2","p-3"],[2,"width","100px",3,"switchedOnText","switchedOffText","onValueChanged"],["id","wrapper",1,"flex","gap-1","p-3","h-[calc(100vh-60px)]","overflow-hidden"],["leftElement",""],["height","100%","keyExpr","id",3,"showBorders","dataSource"],["usersGrid",""],["data","users","group","sameGroup",3,"allowReordering","allowDropInsideItem","onDragEnd"],[3,"visible","search"],["dataField","name","caption","Name"],["dataField","cc","caption","CC"],["dataField","skills","caption","Skills",3,"lookup","calculateCellValue","calculateFilterExpression"],["dataField","type","caption","Type"],["icon","dragvertical","appResize","",1,"flex","items-center","justify-center","cursor-col-resize","w-4","h-8","my-auto","focus:outline-none",3,"leftResize","rightResize"],["rightElement",""],["height","100%","keyExpr","id",3,"dataSource","showBorders","scrolling","onEditorPreparing"],["projectsGrid",""],["data","projects","group","sameGroup",3,"allowDropInsideItem","allowReordering","showDragIcons","onDragStart"],[3,"visible"],["expandMode","rowClick",3,"autoExpandAll"],["dataField","company","sortOrder","asc",3,"groupIndex"],["dataField","project"],["dataField","technologies"],["dataField","availablePositions"],["template","detail",3,"enabled"],[4,"dxTemplate","dxTemplateOf"],[1,"master-detail-caption","mb-1","font-semibold"],["keyExpr","id",3,"dataSource","showBorders","columnAutoWidth"],["targetGrid",""],["group","sameGroup",3,"data","showDragIcons","onDragStart"],["mode","cell",3,"allowUpdating","allowDeleting"],[3,"dataSource"],["dataField","user.name","caption","Name",3,"allowEditing"],["dataField","status","caption","Status",3,"selectedFilterOperation","filterValue","calculateCellValue","allowEditing"],["dataField","user.skills","caption","Relevant skills","cellTemplate","skillsTemplate",3,"allowEditing"]],template:function(a,r){if(1&a&&(R.TgZ(0,"div",0),R._UZ(1,"app-header"),R.TgZ(2,"div",1)(3,"dx-switch",2),R.NdJ("onValueChanged",function(){return r.toggleFilterAttributes()}),R.qZA()(),R.TgZ(4,"div",3)(5,"div",null,4)(7,"dx-data-grid",5,6),R._UZ(9,"dxo-row-dragging",7)(10,"dxo-header-filter",8)(11,"dxi-column",9)(12,"dxi-column",10),R.TgZ(13,"dxi-column",11),R._uU(14," > "),R.qZA(),R._UZ(15,"dxi-column",12),R.qZA()(),R._UZ(16,"dx-button",13),R.TgZ(17,"div",null,14)(19,"dx-data-grid",15,16),R.NdJ("onEditorPreparing",function(s){return r.onEditorPreparing(s)}),R._UZ(21,"dxo-row-dragging",17)(22,"dxo-filter-row",18)(23,"dxo-header-filter",18)(24,"dxo-group-panel",18)(25,"dxo-grouping",19)(26,"dxi-column",20)(27,"dxi-column",21)(28,"dxi-column",22)(29,"dxi-column",23)(30,"dxo-master-detail",24),R.YNc(31,uH,13,19,"div",25),R.qZA()()()()),2&a){const n=R.MAs(6),s=R.MAs(18);R.xp6(3),R.Q6J("switchedOnText","Toate aplicarile")("switchedOffText","Aplicari active"),R.xp6(4),R.Q6J("showBorders",!0)("dataSource",r.users),R.xp6(2),R.Q6J("allowReordering",!1)("allowDropInsideItem",!1)("onDragEnd",r.onUserDragEnd),R.xp6(1),R.Q6J("visible",!0)("search",R.DdM(28,hH)),R.xp6(3),R.Q6J("lookup",R.VKq(29,cH,r.skills))("calculateCellValue",r.calculateCellValue)("calculateFilterExpression",r.calculateSkillsFilterExpression),R.xp6(3),R.Q6J("leftResize",n)("rightResize",s),R.xp6(3),R.Q6J("dataSource",r.projects)("showBorders",!0)("scrolling",R.DdM(31,pH)),R.xp6(2),R.Q6J("allowDropInsideItem",!0)("allowReordering",!1)("showDragIcons",!1)("onDragStart",r.onProjectDragStart),R.xp6(1),R.Q6J("visible",!0),R.xp6(1),R.Q6J("visible",!0),R.xp6(1),R.Q6J("visible",!0),R.xp6(1),R.Q6J("autoExpandAll",!1),R.xp6(1),R.Q6J("groupIndex",0),R.xp6(4),R.Q6J("enabled",!0),R.xp6(1),R.Q6J("dxTemplateOf","detail")}},dependencies:[yN,B.qvW,B.tZE,B.w3U,B.Uo8,B.I62,B.uCj,B.Een,B.N_X,B.CRh,fe.p6,hm.K,_m,nH.G,sH],encapsulation:2})}return t})()}];let vH=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=R.oAB({type:t});static#i=this.\u0275inj=R.cJS({imports:[vm.Bz.forChild(_H),vm.Bz]})}return t})();var gH=L(4954);let fH=(()=>{class t{static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275mod=R.oAB({type:t});static#i=this.\u0275inj=R.cJS({imports:[Em.ez,vH,EN,hm.e,PN,gH.m]})}return t})()}}]);