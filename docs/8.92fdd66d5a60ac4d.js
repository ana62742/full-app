"use strict";(self.webpackChunkfull_app=self.webpackChunkfull_app||[]).push([[8],{3008:(ST,ou,be)=>{be.r(ou),be.d(ou,{StaffingUpModule:()=>_G});var as=be(6814),js=be(6593),Z=be(4946),it=be(3306),b=be(498),N=be(646),j=be(6673),oe=be(7825),m=be(557),k=be(9556),ae=be(4459),ce=be(4823),J=be(3391),ip="dx-state-focused",yT="dx-cell-focus-disabled",Zg=".dx-datagrid-rowsview .dx-row",zg="".concat(Zg," > td"),Wg=".dx-treelist-rowsview .dx-row",$g="".concat(Wg," > td"),Kg={groupPanel:[".dx-datagrid-group-panel .dx-group-panel-item[tabindex]"],columnHeaders:[".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action",".dx-treelist-headers .dx-header-row > td.dx-treelist-action"],filterRow:[".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input",".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input"],rowsView:["".concat(".dx-row-focused"),"".concat(Zg,"[tabindex]"),"".concat(zg,"[tabindex]"),"".concat(zg),"".concat(Wg,"[tabindex]"),"".concat($g,"[tabindex]"),"".concat($g)],footer:[".dx-datagrid-total-footer .dx-datagrid-summary-item",".dx-treelist-total-footer .dx-treelist-summary-item"],filterPanel:[".dx-datagrid-filter-panel .dx-icon-filter",".dx-treelist-filter-panel .dx-icon-filter"],pager:[".dx-datagrid-pager [tabindex]",".dx-treelist-pager [tabindex]"]},rp=!1,lu=!1,qs=null;function Gg(i,e){var t=(0,b.Z)(i),r=t.attr("aria-label"),n=Ug(r,e.element()).index(t);qs=(0,N.l)({},{ariaLabel:r,index:n},{viewInstance:e})}function Ug(i,e){return(0,b.Z)(e).find(i?'[aria-label="'.concat(i,'"][tabindex]'):"[tabindex]")}function IT(i,e){var t=e?.getRootNode()||it.Z.getDocument();for(var r in i){var a=i[r],n=(0,b.Z)(t).find(a).first();if(n.length)return n}}function jg(){lu="visible"===it.Z.getDocument().visibilityState}function qg(){k.Z.off(it.Z.getDocument(),"visibilitychange",jg)}function Yg(i,e,t,r,a,n){if(e.option("useLegacyKeyboardNavigation"))return J.ZT;var s=()=>(0,b.Z)(e.element()),o=u=>function ET(i,e,t,r,a,n){var s=function TT(i,e,t){var r={event:e,handled:!1};return t?t(r):i._createActionByOption("onKeyDown")(r),r.handled}(e,t.originalEvent,n);if(!s){var o=(0,ce.EV)(t);"enter"===o||"space"===o?(Gg(t.target,e),r&&r({event:t})):"tab"===o?a.addClass(ip):np(i,e,t)}}(i,e,u,a,s(),n),l=()=>{rp=!0,s().removeClass(ip)},d=()=>{!rp&&!lu&&s().addClass(ip),rp=!1};return k.Z.on(t,"keydown",r,o),k.Z.on(t,"mousedown",r,l),k.Z.on(t,"focusin",r,d),()=>{k.Z.off(t,"keydown",r,o),k.Z.off(t,"mousedown",r,l),k.Z.off(t,"focusin",r,d)}}function ap(i){if(!i.option("useLegacyKeyboardNavigation")&&qs){var e=qs.viewInstance;if(e){var r=Ug(qs.ariaLabel,e.element()).eq(qs.index);qs=null,k.Z.trigger(r,"focus")}}}function np(i,e,t){var r=(0,ce.EV)(t);if(t.ctrlKey&&("upArrow"===r||"downArrow"===r))for(var a=Object.keys(Kg),n=a.indexOf(i);n>=0&&n<a.length;){n="upArrow"===r?--n:++n;var l=IT(Kg[a[n]],t.target);if(l&&l.length){l.attr("tabindex",e.option("tabindex")||0),k.Z.trigger(l,"focus"),l.removeClass(yT);break}}}var ml=function(i,e,t,r,a){var n=e.getController("keyboardNavigation");e.option("useLegacyKeyboardNavigation")||n&&!n.isKeyboardEnabled()||(e.createAction("onKeyDown"),Yg(i,e,t,r,a,s=>{e.executeAction("onKeyDown",s)}))},rt=be(7285),Ys=be(692),Ri=be(9846),ii=be(120),Y=be(3687),di=be(4813),lr=be(8182),Br=be(5386),We=be(6831),Pt=be(344),dr=be(5874),ga=be(1664),Xs="dxdblclick",Xg=(0,ce.V4)(Pt.u,"dxDblClick"),LT=dr.Z.inherit({ctor(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick(){this._firstClickTarget=null,this._lastClickTimeStamp=-300},add(){this._handlerCount<=0&&k.Z.on(it.Z.getDocument(),Xg,this._clickHandler.bind(this)),this._handlerCount+=1},_clickHandler(i){var e=i.timeStamp||Date.now(),t=e-this._lastClickTimeStamp;!(t<0)&&t<300?((0,ce.BX)({type:Xs,target:(0,ga.Ls)(this._firstClickTarget,i.target),originalEvent:i}),this._forgetLastClick()):(this._firstClickTarget=i.target,this._lastClickTimeStamp=e)},remove(){this._handlerCount-=1,this._handlerCount<=0&&(this._forgetLastClick(),k.Z.off(it.Z.getDocument(),Xg,void 0),this._handlerCount=0)}}),PT=new LT;(0,be(6078).Z)(Xs,PT);var Bt=be(9627),ns=be(8126),Qg="dx-column-indicators",NT=i=>class extends i{_applyColumnState(e){var t,r=this.option("rtlEnabled"),a=this._getColumnAlignment(e.column.alignment,r),n=(0,N.l)(!0,{columnAlignment:a},e),s=n.rootElement.hasClass("dx-group-panel-item"),o=this._createIndicatorContainer(n,s),l=(0,b.Z)("<span>").addClass(this._getIndicatorClassName(e.name)),d=null===(t=this.component)||void 0===t?void 0:t.getController("columns"),u=d?.getHeaderContentAlignment(a)||a;return n.container=o,n.indicator=l,this._renderIndicator(n),o[!s&&e.showColumnLines||"left"!==u?"prependTo":"appendTo"](e.rootElement),l}_getIndicatorClassName(e){}_getColumnAlignment(e,t){return t=t||this.option("rtlEnabled"),e&&"center"!==e?e:(0,di.q)(t)}_createIndicatorContainer(e,t){var r=this._getIndicatorContainer(e.rootElement),a="left"===e.columnAlignment?"right":"left";return r.length||(r=(0,b.Z)("<div>").addClass(Qg)),this.setAria("role","presentation",r),r.css("float",e.showColumnLines&&!t?a:null)}_getIndicatorContainer(e){return e&&e.find(".".concat(Qg))}_getIndicatorElements(e){var t=this._getIndicatorContainer(e);return t&&t.children()}_renderIndicator(e){var t=e.container,r=e.indicator;t&&r&&t.append(r)}_updateIndicators(e){var a,t=this.getColumns(),r=this.getColumnElements();if(r&&t.length===r.length)for(var n=0;n<t.length;n++){a=r.eq(n),this._updateIndicator(a,t[n],e);var s=a.parent().data("options");s&&s.cells&&(s.cells[a.index()].column=t[n])}}_updateIndicator(e,t,r){if(!t.command)return this._applyColumnState({name:r,rootElement:e,column:t,showColumnLines:this.option("showColumnLines")})}},ye=be(7462),ri=be(9343),Rt=be(977),em=(i,e)=>{var t,r=Object.values(i).find(a=>{var n;return null===(n=a?.element())||void 0===n?void 0:n.hasClass(e)});return null!==(t=r?.element())&&void 0!==t?t:null};class tm{constructor(e){var t=this;t._updateLockCount=0,t.component=e,t._actions={},t._actionConfigs={},(0,j.S6)(this.callbackNames()||[],function(r,a){var n=t.callbackFlags(a)||{};n.unique=!0,n.syncStrategy=!0,t[this]=(0,ri.Z)(n)})}_endUpdateCore(){}init(){}callbackNames(){}callbackFlags(e){}publicMethods(){return[]}beginUpdate(){this._updateLockCount++}endUpdate(){this._updateLockCount>0&&(this._updateLockCount--,this._updateLockCount||this._endUpdateCore())}option(e){var{component:t}=this,r=t._optionCache;return 1===arguments.length&&r?(e in r||(r[e]=t.option(e)),r[e]):t.option.apply(t,arguments)}_silentOption(e,t){var{component:r}=this,a=r._optionCache;return a&&(a[e]=t),r._setOptionWithoutOptionChange(e,t)}localize(e){var t=this.component._optionCache;return t?(e in t||(t[e]=ae.Z.format(e)),t[e]):ae.Z.format(e)}on(e,t){return this.component.on.apply(this.component,arguments)}off(){return this.component.off.apply(this.component,arguments)}optionChanged(e){e.name in this._actions&&(this.createAction(e.name,this._actionConfigs[e.name]),e.handled=!0)}getAction(e){return this._actions[e]}setAria(e,t,r){var a=r.get(0),n="role"!==e&&"id"!==e?"aria-":"";a.setAttribute?a.setAttribute(n+e,t):r.attr(n+e,t)}_createComponent(e,t,r){return this.component._createComponent(e,t,r)}getController(e){return this.component._controllers[e]}createAction(e,t){if((0,m.mf)(e)){var r=this.component._createAction(e.bind(this),t);return function(a){r({event:a})}}this._actions[e]=this.component._createActionByOption(e,t),this._actionConfigs[e]=t}executeAction(e,t){var r=this._actions[e];return r&&r(t)}dispose(){var e=this;(0,j.S6)(e.callbackNames()||[],function(){e[this].empty()})}addWidgetPrefix(e){return"dx-".concat(this.component.NAME.slice(2).toLowerCase()).concat(e?"-".concat(e):"")}getWidgetContainerClass(){return this.addWidgetPrefix("dxDataGrid"===this.component.NAME?null:"container")}elementIsInsideGrid(e){return e.closest(".".concat(this.getWidgetContainerClass())).parent().is(this.component.$element())}}class sp extends tm{}class im extends tm{constructor(e){super(e),this.renderCompleted=(0,ri.Z)(),this.resizeCompleted=(0,ri.Z)()}_isReady(){return this.component.isReady()}_endUpdateCore(){super._endUpdateCore(),!this._isReady()&&this._requireReady&&(this._requireRender=!1,this.component._requireResize=!1),this._requireRender&&(this._requireRender=!1,this.render(this._$parent))}_invalidate(e,t){this._requireRender=!0,this.component._requireResize=(0,We.Ym)()&&(this.component._requireResize||e),this._requireReady=this._requireReady||t}_renderCore(e){}_resizeCore(){}_parentElement(){return this._$parent}element(){return this._$element}getElementHeight(){var e=this.element();if(!e)return 0;var t=parseFloat(e.css("marginTop"))||0,r=parseFloat(e.css("marginBottom"))||0,{offsetHeight:a}=e.get(0);return a+t+r}isVisible(){return!0}getTemplate(e){return this.component._getTemplate(e)}getView(e){return this.component._views[e]}_getBorderedViews(){return{columnHeadersView:this.component._views.columnHeadersView,rowsView:this.component._views.rowsView,filterPanelView:this.component._views.filterPanelView,footerView:this.component._views.footerView}}render(e,t){var r=this._$element,a=this.isVisible();if((r||e)&&(this._requireReady=!1,r||(r=this._$element=(0,b.Z)("<div>").appendTo(e),this._$parent=e),r.toggleClass("dx-hidden",!a),this.component._views&&((i,e)=>{if(((i,e)=>{var t;if(!Object.keys(e).includes(i))return!1;var{rowsView:r}=e,a=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(null!=i&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(t[r[a]]=i[r[a]])}return t}(e,["rowsView"]);return!!(0,m.$K)(null===(t=r?.element)||void 0===t?void 0:t.call(r))&&Object.values(a).filter(n=>{var s;return null===(s=n?.isVisible)||void 0===s?void 0:s.call(n)}).every(n=>(0,m.$K)(n?.element()))})(i,e)){var t=em(e,"dx-bordered-top-view"),r=em(e,"dx-bordered-bottom-view"),a=(i=>{var{columnHeadersView:e,rowsView:t}=i;return e?.isVisible()?e.element():t.element()})(e),n=(i=>{var{filterPanelView:e,footerView:t,rowsView:r}=i;return e?.isVisible()?e.element():t?.isVisible()?t.element():r.element()})(e);t&&!t.is(a)&&t.removeClass("dx-bordered-top-view"),r&&!r.is(n)&&r.removeClass("dx-bordered-bottom-view"),a.hasClass("dx-bordered-top-view")||a.addClass("dx-bordered-top-view"),n.hasClass("dx-bordered-bottom-view")||n.addClass("dx-bordered-bottom-view")}})(this.name,this._getBorderedViews()),a)){this.component._optionCache={};var n=this._renderCore(t);this.component._optionCache=void 0,n?n.done(()=>{this.renderCompleted.fire(t)}):this.renderCompleted.fire(t)}}resize(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1}focus(e){this.element().get(0).focus({preventScroll:e})}}function am(i){var t={};return Object.entries(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).forEach(r=>{var[a,n]=r,s=i[a];s&&(t[a]=(0,m.mf)(n)?n(s):s.inherit(n))}),t}const Nt={modules:[],View:im,ViewController:class WT extends sp{getView(e){return this.component._views[e]}getViews(){return this.component._views}},Controller:sp,registerModule(i,e){for(var{modules:t}=this,r=0;r<t.length;r++)if(t[r].name===i)return;e.name=i,t.push(e)},registerModulesOrder(i){this.modulesOrder=i},unregisterModule(i){this.modules=(0,J.h3)(this.modules,e=>e.name!==i)},processModules:function KT(i,e){var{modules:t}=e,{modulesOrder:r}=e;function a(u){var c={};return(0,j.S6)(u,(f,p)=>{var g=new p(i);g.name=f,function $T(i,e,t){var r=t.publicMethods();r&&(0,j.S6)(r,(a,n)=>{if(!t[n])throw Rt.Z.Error("E1006",e,n);if(i[n])throw Rt.Z.Error("E1005",n);i[n]=function(){return t[n](...arguments)}})}(i,f,g),c[f]=g}),c}r&&t.sort((u,c)=>{var f=r.indexOf(u.name),p=r.indexOf(c.name);return f<0&&(f=1e6),p<0&&(p=1e6),f-p});var n={},s={};t.forEach(u=>{var{name:c,controllers:f={},views:p={}}=u;Object.entries(f).forEach(g=>{var[w,x]=g;if(n[w])throw Rt.Z.Error("E1001",c,w);if(!(x?.prototype instanceof sp))throw Rt.Z.Error("E1002",c,w);n[w]=x}),Object.entries(p).forEach(g=>{var[w,x]=g;if(s[w])throw Rt.Z.Error("E1003",c,w);if(!(x?.prototype instanceof im))throw Rt.Z.Error("E1004",c,w);s[w]=x})});var o=t.filter(u=>{var{extenders:c}=u;return!!c}),l=o.reduce((u,c)=>{var{extenders:f}=c;return(0,ye.Z)((0,ye.Z)({},u),am(u,f?.controllers))},n),d=o.reduce((u,c)=>{var{extenders:f}=c;return(0,ye.Z)((0,ye.Z)({},u),am(u,f?.views))},s);i._controllers=a(l),i._views=a(d)},callModuleItemsMethod:function(i,e,t){t=t||[],i._controllers&&(0,j.S6)(i._controllers,function(){this[e]&&this[e].apply(this,t)}),i._views&&(0,j.S6)(i._views,function(){this[e]&&this[e].apply(this,t)})}};var Dt=be(9754),ma=be(265),Ur=be(8021),xn=be(9024),Cl=be(9840),Ca=be(2649),nm=be(1225),It=be(5587),jr=be(5203),ss=be(9970),_t=be(7484),sm="dx-loadpanel-indicator",om="dx-loadpanel-message",lm=ss.Z.inherit({_supportedKeys:function(){return(0,N.l)(this.callBase(),{escape:J.ZT})},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{message:ae.Z.format("Loading"),width:222,height:90,animation:null,showIndicator:!0,indicatorSrc:"",showPane:!0,delay:0,templatesRenderAsynchronously:!1,hideTopOverlayHandler:null,focusStateEnabled:!1,propagateOutsideClick:!0,preventScrollEvents:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"generic"},options:{shadingColor:"transparent"}},{device:function(){return(0,_t.x2)()},options:{message:"",width:60,height:60,maxHeight:60,maxWidth:60}},{device:function(){return(0,_t.dC)()},options:{width:"auto",height:"auto"}}])},_init:function(){this.callBase.apply(this,arguments)},_render:function(){this.callBase(),this.$element().addClass("dx-loadpanel"),this.$wrapper().addClass("dx-loadpanel-wrapper"),this._setWrapperAria()},_setWrapperAria(){var{message:i}=this.option(),e=(0,_t.yj)()?i:null,t=i?e:ae.Z.format("Loading");this.setAria({role:"alert",label:t},this.$wrapper())},_renderContentImpl:function(){this.callBase(),this.$content().addClass("dx-loadpanel-content"),this._$loadPanelContentWrapper=(0,b.Z)("<div>").addClass("dx-loadpanel-content-wrapper"),this._$loadPanelContentWrapper.appendTo(this.$content()),this._togglePaneVisible(),this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage()},_show:function(){var i=this.option("delay");if(!i)return this.callBase();var e=new Y.BH,t=this.callBase.bind(this);return this._clearShowTimeout(),this._showTimeout=setTimeout(function(){t().done(function(){e.resolve()})},i),e.promise()},_hide:function(){return this._clearShowTimeout(),this.callBase()},_clearShowTimeout:function(){clearTimeout(this._showTimeout)},_renderMessage:function(){if(this._$loadPanelContentWrapper){var i=this.option("message");if(i){var e=(0,b.Z)("<div>").addClass(om).text(i);this._$loadPanelContentWrapper.append(e)}}},_renderLoadIndicator:function(){!this._$loadPanelContentWrapper||!this.option("showIndicator")||(this._$indicator||(this._$indicator=(0,b.Z)("<div>").addClass(sm).appendTo(this._$loadPanelContentWrapper)),this._createComponent(this._$indicator,jr.Z,{indicatorSrc:this.option("indicatorSrc")}))},_cleanPreviousContent:function(){this.$content().find("."+om).remove(),this.$content().find("."+sm).remove(),delete this._$indicator},_togglePaneVisible:function(){this.$content().toggleClass("dx-loadpanel-pane-hidden",!this.option("showPane"))},_optionChanged:function(i){switch(i.name){case"delay":break;case"message":case"showIndicator":this._cleanPreviousContent(),this._renderLoadIndicator(),this._renderMessage(),this._setWrapperAria();break;case"showPane":this._togglePaneVisible();break;case"indicatorSrc":this._renderLoadIndicator();break;default:this.callBase(i)}},_dispose:function(){this._clearShowTimeout(),this.callBase()}});(0,It.Z)("dxLoadPanel",lm);const op=lm;var JT=["year","month","day"],QT=["year","month","day","hour","minute"],lp=function(i){return"date"===i||"datetime"===i},dp=function(i){var e,t=[],r=["year","month","day","hour","minute","second"],a=i.headerFilter&&i.headerFilter.groupInterval,n="quarter"===a?"month":a;return lp(i.dataType)&&null!==a?(t="datetime"===i.dataType?QT:JT,(e=r.indexOf(n))>=0&&(t=r.slice(0,e)).push(a),t):(0,m.$K)(a)?Array.isArray(a)?a:[a]:void 0};const os=(i=function(a,n){var s=a.dataField||a.selector;return"search"===n&&(s=a.displayField||a.calculateDisplayValue||s),s},e=function(a,n){var s,o,l,u,d=i(this,n);if(Array.isArray(a)&&(0,m.$K)(a[0])&&(0,m.$K)(a[1]))return o=[d,">=",a[0]],l=[d,"<=",a[1]],lp(this.dataType)&&(u=a[1]).getHours()+u.getMinutes()+u.getSeconds()+u.getMilliseconds()<1&&(s=new Date(a[1].getTime()),"date"===this.dataType&&s.setDate(a[1].getDate()+1),l=[d,"<",s]),[o,"and",l]},t=function(a,n,s){var o,l,d,f,u=(0,m.J_)(f=a)?[f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()]:(0,j.UI)((""+f).split("/"),function(p,g){return 1===g?Number(p)-1:Number(p)}),c=i(this,s);switch("headerFilter"===s?d=dp(this)[u.length-1]:"datetime"===this.dataType&&(d="minute"),d){case"year":o=new Date(u[0],0,1),l=new Date(u[0]+1,0,1);break;case"month":o=new Date(u[0],u[1],1),l=new Date(u[0],u[1]+1,1);break;case"quarter":o=new Date(u[0],3*u[1],1),l=new Date(u[0],3*u[1]+3,1);break;case"hour":o=new Date(u[0],u[1],u[2],u[3]),l=new Date(u[0],u[1],u[2],u[3]+1);break;case"minute":o=new Date(u[0],u[1],u[2],u[3],u[4]),l=new Date(u[0],u[1],u[2],u[3],u[4]+1);break;case"second":o=new Date(u[0],u[1],u[2],u[3],u[4],u[5]),l=new Date(u[0],u[1],u[2],u[3],u[4],u[5]+1);break;default:o=new Date(u[0],u[1],u[2]),l=new Date(u[0],u[1],u[2]+1)}switch(n){case"<":return[c,"<",o];case"<=":return[c,"<",l];case">":return[c,">=",l];case">=":return[c,">=",o];case"<>":return[[c,"<",o],"or",[c,">=",l]];default:return[[c,">=",o],"and",[c,"<",l]]}},r=function(a,n,s){var o=i(this,s),l=dp(this);if("headerFilter"===s&&l&&(0,m.$K)(a)){var d=(""+a).split("/"),u=Number(d[d.length-1]);return[[o,">=",u],"and",[o,"<",u+l[d.length-1]]]}return[o,n||"=",a]},{defaultCalculateFilterExpression:function(a,n,s){var o=this,l=i(o,s),d=o.calculateDisplayValue&&"search"===s,u=d&&o.lookup&&o.lookup.dataType||o.dataType,c=null;if("headerFilter"!==s&&"filterBuilder"!==s||null!==a)if("string"!==u||o.lookup&&!d){if("between"===n)return e.apply(o,[a,s]);if(lp(u)&&(0,m.$K)(a))return t.apply(o,arguments);if("number"===u)return r.apply(o,arguments);c=[l,n||"=",a]}else c=[l,n||"contains",a];else c=[l,n||"=",null],"string"===u&&(c=[c,"="===n?"or":"and",[l,n||"=",""]]);return c},getGroupInterval:dp});var i,e,t,r,dm="virtual",um="scrolling.mode",lA={year:i=>i&&i.getFullYear(),month:i=>i&&i.getMonth()+1,day:i=>i&&i.getDate(),quarter:i=>i&&Math.floor(i.getMonth()/3)+1,hour:i=>i&&i.getHours(),minute:i=>i&&i.getMinutes(),second:i=>i&&i.getSeconds()},dA=function(){var e=this.calculateCellValue(arguments[1]);if(!(0,m.$K)(e))return null;if(hm(this.dataType))return lA[arguments[0]](e);if("number"===this.dataType){var r=arguments[0];return Math.floor(Number(e)/r)*r}},uA=function(i,e){return(0,m.mf)(i)&&(0,m.mf)(e)&&i.originalCallback&&e.originalCallback?i.originalCallback===e.originalCallback&&i.columnIndex===e.columnIndex:i===e};function hm(i){return"date"===i||"datetime"===i}var cm=function(i){i.get(0).textContent="\xa0"},up=function(i){for(var e=(0,Ca.G5)(i=i||[]),t=0;t<i.length;t++)i&&i[t]&&void 0!==i[t].isExpanded&&(e[t].isExpanded=i[t].isExpanded),i&&i[t]&&void 0!==i[t].groupInterval&&(e[t].groupInterval=i[t].groupInterval);return e},pm=function(i,e){var t=nm.Z.format(i,e.format)||i&&i.toString()||"",r={value:i,valueText:e.getDisplayFormat?e.getDisplayFormat(t):t,target:e.target||"row",groupInterval:e.groupInterval};return e.customizeText?e.customizeText.call(e,r):r.valueText},fm=function(i,e){var t=i.displayFormat||i.columnCaption&&e["".concat(i.summaryType,"OtherColumn")]||e[i.summaryType];return pm(i.value,{format:i.valueFormat,getDisplayFormat:r=>t?(0,ma.WU)(t,r,i.columnCaption):r,customizeText:i.customizeText})},_m=function(i){var e=i.data&&i.data(),t=e&&e.dxComponents,r=t&&t[0];return r&&e[r]};const Te={renderNoDataText(i){if(i=i||this.element()){var e=this.addWidgetPrefix("nodata"),t=i.find(".".concat(e)).last(),r=this._dataController.isEmpty(),a=this._dataController.isLoading();t.length||(t=(0,b.Z)("<span>").addClass(e)),t.parent().is(i)||t.appendTo(i),r&&!a?t.removeClass("dx-hidden").text(this._getNoDataText()):t.addClass("dx-hidden")}},renderLoadPanel(i,e,t){var r;this._loadPanel&&this._loadPanel.$element().remove(),(r=this.option("loadPanel"))&&("auto"===r.enabled?!t:r.enabled)?(r=(0,N.l)({shading:!1,message:r.text,container:e},r),this._loadPanel=this._createComponent((0,b.Z)("<div>").appendTo(e),op,r)):this._loadPanel=null},calculateLoadPanelPosition(i){var e=(0,b.Z)((0,We.Jj)());return(0,oe.Cr)(i)>(0,oe.Cr)(e)?{of:e,boundary:i,collision:"fit"}:{of:i}},getIndexByKey(i,e,t){var r=-1;if(void 0!==i&&Array.isArray(e)){t=arguments.length<=2?"key":t;for(var a=0;a<e.length;a++){var n=(0,m.$K)(t)?e[a][t]:e[a];if((0,J.bY)(i,n)){r=a;break}}}return r},combineFilters(i,e){var t,r=[];e=e||"and";for(var a=0;a<i.length;a++)if(i[a]){if(1===(null===(t=i[a])||void 0===t?void 0:t.length)&&"!"===i[a][0]){if("and"===e)return["!"];if("or"===e)continue}r.length&&r.push(e),r.push(i[a])}if(1===r.length&&(r=r[0]),r.length)return r},checkChanges(i,e){for(var t=0,r=0;r<e.length;r++)i[e[r]]&&t++;return i.length&&i.length===t},equalFilterParameters:function i(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1;return!0}return(0,m.mf)(e)&&e.columnIndex>=0&&(0,m.mf)(t)&&t.columnIndex>=0?e.columnIndex===t.columnIndex&&(0,Dt.Ex)(e.filterValue)===(0,Dt.Ex)(t.filterValue)&&(0,Dt.Ex)(e.selectedFilterOperation)===(0,Dt.Ex)(t.selectedFilterOperation):(0,Dt.Ex)(e)==(0,Dt.Ex)(t)},proxyMethod(i,e,t){i[e]||(i[e]=function(){var r=this._dataSource;return r?r[e].apply(r,arguments):t})},formatValue:pm,getFormatOptionsByColumn:(i,e)=>({format:i.format,getDisplayFormat:i.getDisplayFormat,customizeText:i.customizeText,target:e,trueText:i.trueText,falseText:i.falseText}),getDisplayValue:(i,e,t,r)=>i.displayValueMap&&void 0!==i.displayValueMap[e]?i.displayValueMap[e]:i.calculateDisplayValue&&t&&"group"!==r?i.calculateDisplayValue(t):!i.lookup||"group"===r&&(i.calculateGroupValue||i.calculateDisplayValue)?e:i.lookup.calculateCellValue(e),getGroupRowSummaryText(i,e){for(var t="(",r=0;r<i.length;r++)t+=(r>0?", ":"")+fm(i[r],e);return t+")"},getSummaryText:fm,normalizeSortingInfo:up,getFormatByDataType(i){switch(i){case"date":return"shortDate";case"datetime":return"shortDateShortTime";default:return}},getHeaderFilterGroupParameters(i,e){var t=[],r=i.dataField||i.name,a=os.getGroupInterval(i);return a?((0,j.S6)(a,(n,s)=>{t.push(e?{selector:r,groupInterval:s,isExpanded:n<a.length-1}:dA.bind(i,s))}),t):(e?t=[{selector:r,isExpanded:!1}]:(t=function(n){var s=i.calculateCellValue(n);return(void 0===s||""===s)&&(s=null),s},i.sortingMethod&&(t=[{selector:t,compare:i.sortingMethod.bind(i)}])),t)},equalSortParameters(i,e,t){if(i=up(i),e=up(e),Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;for(var r=0;r<i.length;r++)if(!uA(i[r].selector,e[r].selector)||i[r].desc!==e[r].desc||i[r].groupInterval!==e[r].groupInterval||!t&&!!i[r].isExpanded!=!!e[r].isExpanded)return!1;return!0}return(!i||!i.length)==(!e||!e.length)},getPointsByColumns(i,e,t,r){for(var s,o,u,a=i.length,n=!1,l=r||0,d=[],c=0;c<=a;c++){c<a&&(o=(s=i.eq(c)).offset(),u="rtl"===s.css("direction"));var f={index:l,x:o?o.left+(!t&&u^c===a?(0,di.l)(s[0]).width:0):0,y:o?o.top+(t&&c===a?(0,di.l)(s[0]).height:0):0,columnIndex:l};if(!t&&c>0){var p=i.eq(c-1).offset();p.top<f.y&&(f.y=p.top)}e&&(n=e(f)),n||d.push(f),l++}return d},getExpandCellTemplate:()=>({allowRenderToDetachedContainer:!0,render(i,e){var t=(0,b.Z)(i);if(!(0,m.$K)(e.value)||e.data&&e.data.isContinuation||e.row.isNewRow)cm(t);else{var r=e.component.getView("rowsView");t.addClass("dx-datagrid-expand").addClass("dx-selection-disabled"),(0,b.Z)("<div>").addClass(e.value?"dx-datagrid-group-opened":"dx-datagrid-group-closed").appendTo(t),r.setAria("label",r.localize(e.value?"dxDataGrid-ariaCollapse":"dxDataGrid-ariaExpand"),t)}}}),setEmptyText:cm,isDateType:hm,getSelectionRange(i){try{if(i)return{selectionStart:i.selectionStart,selectionEnd:i.selectionEnd}}catch{}return{}},setSelectionRange(i,e){try{i&&i.setSelectionRange&&i.setSelectionRange(e.selectionStart,e.selectionEnd)}catch{}},focusAndSelectElement(i,e){var t=e.is(":focus");k.Z.trigger(e,"focus");var r=i.option("editing.selectTextOnEditStart"),a=e.get(0);if(!t&&r&&e.is(".dx-texteditor-input")&&!e.is("[readonly]")){var n=_m(e.closest(".dx-texteditor"));(0,Y.gx)(n&&n._loadItemDeferred).done(()=>{a.select()})}},getWidgetInstance:_m,getLastResizableColumnIndex(i,e){var r,t=i.some(o=>o&&!o.command&&!o.fixed&&!1!==o.allowResizing);for(r=i.length-1;i[r];r--){var a=i[r];if(!(a.command||a.fixed||"adaptiveHidden"===(e&&e[r])||t&&!1===a.allowResizing))break}return r},isElementInCurrentGrid:(i,e)=>!(!e||!e.length)&&e.closest(".".concat(i.getWidgetContainerClass())).parent().is(i.component.$element()),isVirtualRowRendering(i){var e=i.option("scrolling.rowRenderingMode"),t=i.option(um)===dm,r="infinite"===i.option(um);return!(!1!==i.option("scrolling.legacyMode")||!t&&!r)||e===dm},getPixelRatio:i=>i.devicePixelRatio||1,getContentHeightLimit(i){return i.mozilla?8e6:15e6/this.getPixelRatio((0,We.Jj)())},normalizeLookupDataSource(i){var e;return i.items?e=i.items:(0,m.mf)(e=i.dataSource)&&!Ur.default.isWrapped(e)&&(e=e({})),(0,Cl.aN)(e)},getWrappedLookupDataSource(i,e,t){if(!e)return[];var r=this.normalizeLookupDataSource(i.lookup);if(i.calculateCellValue!==i.defaultCalculateCellValue)return r;var s,o,l,a=e.remoteOperations().groupPaging,n=i.displayField&&(0,m.HD)(i.displayField),d=(c,f)=>{var p,g=null!==(p=f.skip)&&void 0!==p?p:0;return c.slice(g,f.take?g+f.take:c.length)},u=(0,ye.Z)((0,ye.Z)({},r),{__dataGridSourceFilter:t,load:c=>{var p,g,w,f=new Y.BH;return(p=c,g=function cA(i){return Array.isArray(i)||(i=[i]),i.map((e,t)=>(0,m.HD)(e)?{selector:e,isExpanded:t<i.length-1}:e)}(n?[i.dataField,i.displayField]:i.dataField),w=new Y.BH,s&&(!a||p.skip===l&&p.take===o)?w.resolve(d(s,p)):(l=p.skip,o=p.take,e.load({filter:t,group:g,take:a?p.take:void 0,skip:a?p.skip:void 0}).done(y=>{s=y,w.resolve(a?y:d(y,p))}).fail(w.fail)),w).done(p=>{if(0!==p.length){var g=this.combineFilters(p.flatMap(x=>x.key).map(x=>[i.lookup.valueExpr,x]),"or");new xn.o((0,ye.Z)((0,ye.Z)((0,ye.Z)({},r),c),{filter:this.combineFilters([g,c.filter],"and"),paginate:!1})).load().done(f.resolve).fail(f.fail)}else f.resolve([])}).fail(f.fail),f},key:i.lookup.valueExpr,byKey(c){var f=(0,Y.BH)();return this.load({filter:[i.lookup.valueExpr,"=",c]}).done(p=>{f.resolve(p[0])}),f.promise()}});return u},logHeaderFilterDeprecatedWarningIfNeed(i){var e=i._logDeprecatedOptionWarning.bind(i);(0,m.$K)(i.option("headerFilter.allowSearch"))&&e("headerFilter.allowSearch",{since:"23.1",alias:"headerFilter.search.enabled"}),(0,m.$K)(i.option("headerFilter.searchTimeout"))&&e("headerFilter.searchTimeout",{since:"23.1",alias:"headerFilter.search.timeout"});var t="dxPivotGrid"===i.NAME?"dataSource.fields":"columns",r=i.option(t);if(Array.isArray(r)){var a=n=>{n.forEach(s=>{var o,l=s.headerFilter||{};(0,m.$K)(l.allowSearch)&&e("".concat(t,"[].headerFilter.allowSearch"),{since:"23.1",alias:"".concat(t,"[].headerFilter.search.enabled")}),(0,m.$K)(l.searchMode)&&e("".concat(t,"[].headerFilter.searchMode"),{since:"23.1",alias:"".concat(t,"[].headerFilter.search.mode")}),null!==(o=s.columns)&&void 0!==o&&o.length&&a(s.columns)})};a(r)}}};var vm="scroll-container",bl="dx-row",hp="dx-group-row",cp="dx-master-detail-row",gm="0.0001px",pp="dxCellHintVisible",xA={render(i){i.container.append(i.content)}},du=function(i){return"auto"===i?"":(0,m.kE)(i)?"".concat(i,"px"):i},mm=function(i,e,t){i.style.width=i.style.maxWidth="auto"===e.width?"":t},TA=function(i){i.resolve()},Cm=i=>"number"==typeof i?"".concat(i.toFixed(3),"px"):"adaptiveHidden"===i?gm:i;class wl extends(NT(Nt.View)){init(){this._scrollLeft=-1,this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._columnChooserController=this.getController("columnChooser"),this._editorFactoryController=this.getController("editorFactory"),this._selectionController=this.getController("selection"),this._columnChooserView=this.getView("columnChooserView"),this._delayedTemplates=[],this._templateDeferreds=new Set,this._templatesCache={},this._templateTimeouts=new Set,this.createAction("onCellClick"),this.createAction("onRowClick"),this.createAction("onCellDblClick"),this.createAction("onRowDblClick"),this.createAction("onCellHoverChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onCellPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onRowPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering",afterExecute:e=>{this._afterRowPrepared(e)}}),this._columnsController.columnsChanged.add(this._columnOptionChanged.bind(this)),this._dataController&&this._dataController.changed.add(this._handleDataChanged.bind(this))}dispose(){var e,t;if((0,We.Ym)()){var r=(0,We.Jj)();null===(e=this._templateTimeouts)||void 0===e||e.forEach(a=>r.clearTimeout(a)),null===(t=this._templateTimeouts)||void 0===t||t.clear()}}optionChanged(e){switch(super.optionChanged(e),e.name){case"cellHintEnabled":case"onCellPrepared":case"onRowPrepared":case"onCellHoverChanged":this._invalidate(!0,!0),e.handled=!0;break;case"keyboardNavigation":"keyboardNavigation.enabled"===e.fullName&&this._invalidate(!0,!0),e.handled=!0}}_createScrollableOptions(){var e=this.option("scrolling"),t=this.option("scrolling.useNative"),r=(0,N.l)({},e,{direction:"both",bounceEnabled:!1,useKeyboard:!1});return void 0===t&&(t=!0),"auto"===t?(delete r.useNative,delete r.useSimulatedScrollbar):(r.useNative=!!t,r.useSimulatedScrollbar=!t),r}_updateCell(e,t){t.rowType&&this._cellPrepared(e,t)}_createCell(e){var{column:t}=e,r=t.alignment||(0,di.q)(this.option("rtlEnabled")),a=it.Z.createElement("td");a.style.textAlign=r;var n=(0,b.Z)(a);return"data"===e.rowType&&t.headerId&&!t.type&&this.component.option("showColumnHeaders")&&this.setAria("describedby",t.headerId,n),t.cssClass&&n.addClass(t.cssClass),Array.isArray(t.elementAttr)&&t.elementAttr.forEach(s=>{var{name:o,value:l}=s;n.attr(o,l)}),"expand"===t.command&&(n.addClass(t.cssClass),n.addClass(this.addWidgetPrefix("group-space"))),t.colspan>1?n.attr("colSpan",t.colspan):!t.isBand&&"auto"!==t.visibleWidth&&this.option("columnAutoWidth")&&((t.width||t.minWidth)&&(a.style.minWidth=du(t.minWidth||t.width)),t.width&&mm(a,t,du(t.width))),n}_createRow(e,t){var r=(0,b.Z)("<".concat(t=t||"tr",">")).addClass(bl);return"tr"===t&&this.setAria("role","row",r),r}_isAltRow(e){return e&&e.dataIndex%2==1}_createTable(e,t){var r=(0,b.Z)("<table>").addClass(this.addWidgetPrefix("table")).addClass(this.addWidgetPrefix("table-fixed"));if(e&&!t?(r.attr("id","dx-".concat(new Ri.Z)).append(this._createColGroup(e)),ii.Z.safari&&r.append((0,b.Z)("<thead>").append("<tr>")),this.setAria("role","presentation",r)):this.setAria("hidden",!0,r),this.setAria("role","presentation",(0,b.Z)("<tbody>").appendTo(r)),t)return r;ii.Z.mozilla&&k.Z.on(r,"mousedown","td",n=>{n.ctrlKey&&n.preventDefault()}),this.option("cellHintEnabled")&&k.Z.on(r,"mousemove",".dx-row > td",this.createAction(n=>{var s=n.event,o=(0,b.Z)(s.target),l=(0,b.Z)(s.currentTarget),d=l.parent(),u=this._columnsController.getVisibleColumns(),c=d.data("options"),f=l.index(),p=c&&c.cells&&c.cells[f],g=p?p.column:u[f],w=d.hasClass("dx-header-row"),x=d.hasClass("dx-data-row"),y=d.hasClass(cp),E=d.hasClass(hp),V=d.hasClass(this.addWidgetPrefix("filter-row")),F=x&&(!g||g.cellTemplate);y||V||x&&p&&(c.isEditing||p.isEditing||g?.showEditorAlways)||F||w&&(!g||g.headerCellTemplate)||E&&(!g||g.groupIndex&&g.groupCellTemplate)||(o.data(pp)&&(o.removeAttr("title"),o.data(pp,!1)),o[0].scrollWidth-o[0].clientWidth>0&&!(0,m.$K)(o.attr("title"))&&(o.attr("title",o.text()),o.data(pp,!0)))}));var a=n=>{var s=(0,b.Z)(n.currentTarget),o=(0,b.Z)(n.target).closest(".".concat("dx-field-item-content")),l=s.parent(),d=l.data("options"),u=d&&d.cells&&d.cells[s.index()];if(s.closest("table").is(n.delegateTarget)){var c=(0,N.l)({},u,{cellElement:(0,rt.u)(s),event:n,eventType:n.type});if(c.rowIndex=this.getRowIndex(l),o.length){var f=o.data("dx-form-item");f.column&&(c.column=f.column,c.columnIndex=this._columnsController.getVisibleIndex(c.column.index))}return c}};return k.Z.on(r,"mouseover",".dx-row > td",n=>{var s=a(n);s&&this.executeAction("onCellHoverChanged",s)}),k.Z.on(r,"mouseout",".dx-row > td",n=>{var s=a(n);s&&this.executeAction("onCellHoverChanged",s)}),k.Z.on(r,Pt.u,".dx-row > td",n=>{var s=a(n);s&&this.executeAction("onCellClick",s)}),k.Z.on(r,Xs,".dx-row > td",n=>{var s=a(n);s&&this.executeAction("onCellDblClick",s)}),function(i,e){var t,r,a;function n(s){return setTimeout(()=>{t=r=null},s)}k.Z.on(e,"touchstart touchend",".dx-row",s=>{clearTimeout(a),"touchstart"===s.type?(t=s.target,r=s.currentTarget,a=n(1e3)):a=n()}),k.Z.on(e,[Pt.u,Xs,Bt.Z.down].join(" "),".dx-row",i.createAction(s=>{var{event:o}=s;t&&(o.target=t,o.currentTarget=r),(0,b.Z)(o.target).closest("a").length||(s.rowIndex=i.getRowIndex(o.currentTarget),s.rowIndex>=0&&(s.rowElement=(0,rt.u)((0,b.Z)(o.currentTarget)),s.columns=i.getColumns(),o.type===Bt.Z.down?i._rowPointerDown(s):o.type===Pt.u?i._rowClick(s):i._rowDblClick(s)))}))}(this,r),r}_rowPointerDown(e){}_rowClick(){}_rowDblClick(){}_createColGroup(e){for(var t=(0,b.Z)("<colgroup>"),r=0;r<e.length;r++)for(var a=e[r].colspan||1,n=0;n<a;n++)t.append(this._createCol(e[r]));return t}_createCol(e){var t=e.visibleWidth||e.width;"adaptiveHidden"===t&&(t=gm);var r=(0,b.Z)("<col>");return(0,lr.cl)(r,t),r}renderDelayedTemplates(e){var t=this._delayedTemplates,r=t.filter(n=>!n.async),a=t.filter(n=>n.async);this._delayedTemplates=[],this._renderDelayedTemplatesCore(r,!1,e),this._renderDelayedTemplatesCoreAsync(a)}_renderDelayedTemplatesCoreAsync(e){if(e.length){var t=(0,We.Jj)().setTimeout(()=>{this._templateTimeouts.delete(t),this._renderDelayedTemplatesCore(e,!0)});this._templateTimeouts.add(t)}}_renderDelayedTemplatesCore(e,t,r){for(var a=new Date;e.length;){var n=e.shift(),{options:s}=n,o=it.Z.getRootNode((0,b.Z)(s.container).get(0)),l=this.needWaitAsyncTemplates();if((!t||(0,b.Z)(s.container).closest(o).length||l)&&(r&&(s.change=r),n.template.render(s)),t&&new Date-a>30){this._renderDelayedTemplatesCoreAsync(e);break}}!e.length&&this._delayedTemplates.length&&this.renderDelayedTemplates()}_processTemplate(e,t){var r;if(e&&e.render&&!(0,m.ZU)(e))r={allowRenderToDetachedContainer:e.allowRenderToDetachedContainer,render(n){e.render(n.container,n.model,n.change),n.deferred&&n.deferred.resolve()}};else if((0,m.mf)(e))r={render(n){var s=e((0,rt.u)(n.container),n.model,n.change);s&&(s.nodeType||(0,m.ZU)(s))&&n.container.append(s),n.deferred&&n.deferred.resolve()}};else{var a=(0,m.HD)(e)?e:(0,b.Z)(e).attr("id");a?(this._templatesCache[a]||(this._templatesCache[a]=this.getTemplate(e)),r=this._templatesCache[a]):r=this.getTemplate(e)}return r}renderTemplate(e,t,r,a,n){var s,o=this._processTemplate(t,r),{column:l}=r,d="data"===r.rowType,u=new Y.BH,c={container:e,model:r,deferred:u,onRendered:()=>{this.isDisposed()?u.reject():u.resolve()}};if(o){r.component=this.component;var f=l&&(l.renderAsync&&d||this.option("renderAsync")&&(!1!==l.renderAsync&&(l.command||l.showEditorAlways)&&d||"filter"===r.rowType)),p=null!==(s=r.renderAsync)&&void 0!==s?s:f;!o.allowRenderToDetachedContainer&&!a||p?this._delayedTemplates.push({template:o,options:c,async:p}):o.render(c),this._templateDeferreds.add(u),k.Z.on(e,ns.x,TA.bind(null,u))}else u.reject();return u.promise().always(()=>{this._templateDeferreds.delete(u)})}_getBodies(e){return(0,b.Z)(e).children("tbody").not(".dx-header").not(".dx-footer")}_needWrapRow(e){var t;return!!this.option().rowTemplate&&!(null===(t=this._getBodies(e))||void 0===t||!t.filter(".".concat(bl)).length)}_wrapRowIfNeed(e,t,r){if(this._needWrapRow(r?e||this._tableElement:this._tableElement||e)){var s=(0,b.Z)("<tbody>").addClass(t.attr("class"));return this.setAria("role","presentation",s),s.append(t)}return t}_appendRow(e,t,r){(r=r||xA).render({content:t,container:e})}_resizeCore(){var e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}_renderCore(e){var t=this.element().parent();(!t||t.parent().length)&&this.renderDelayedTemplates(e)}_renderTable(e){(e=e||{}).columns=this._columnsController.getVisibleColumns();var t=e.change&&e.change.changeType,r=this._createTable(e.columns,"append"===t||"prepend"===t||"update"===t);return this._renderRows(r,e),r}_renderRows(e,t){for(var r=this._getRows(t.change),a=t.change&&t.change.columnIndices||[],n=t.change&&t.change.changeTypes||[],s=0;s<r.length;s++)this._renderRow(e,(0,N.l)({row:r[s],columnIndices:a[s],changeType:n[s]},t))}_renderRow(e,t){t.columnIndices||(t.row.cells=[]);var r=this._createRow(t.row),a=this._wrapRowIfNeed(e,r);"remove"!==t.changeType&&this._renderCells(r,t),this._appendRow(e,a);var n=(0,N.l)({columns:t.columns},t.row);this._addWatchMethod(n,t.row),this._rowPrepared(a,n,t.row)}_needRenderCell(e,t){return!t||t.indexOf(e)>=0}_renderCells(e,t){for(var r=0,{row:a}=t,{columns:n}=t,s=0;s<n.length;s++)this._needRenderCell(s,t.columnIndices)&&this._renderCell(e,(0,N.l)({column:n[s],columnIndex:r,value:a.values&&a.values[r],oldValue:a.oldValues&&a.oldValues[r]},t)),n[s].colspan>1?r+=n[s].colspan:r++}_updateCells(e,t,r){var a=e.children(),n=t.children(),s=this.option("highlightChanges"),o=this.addWidgetPrefix("cell-updated-animation");r.forEach((l,d)=>{var u=a.eq(l),c=n.eq(d);u.replaceWith(c),s&&!c.hasClass("dx-command-expand")&&c.addClass(o)}),function(i,e){if(i&&e){var a,t=i.attributes,r=e.attributes;for(a=0;a<t.length;a++){var n=t[a].nodeName;e.hasAttribute(n)||i.removeAttribute(n)}for(a=0;a<r.length;a++)i.setAttribute(r[a].nodeName,r[a].nodeValue)}}(e.get(0),t.get(0))}_setCellAriaAttributes(e,t){if("freeSpace"!==t.rowType){this.setAria("role","gridcell",e);var r=this._columnsController.getColumnIndexOffset();this.setAria("colindex",t.columnIndex+r+1,e)}}_renderCell(e,t){var r=this._getCellOptions(t);if(t.columnIndices){if(t.row.cells){var a=t.row.cells.findIndex(s=>s.columnIndex===r.columnIndex);t.row.cells[a]=r}}else t.row.cells.push(r);var n=this._createCell(r);return this._setCellAriaAttributes(n,r),this._renderCellContent(n,r,t),e.get(0).appendChild(n.get(0)),n}_renderCellContent(e,t,r){var a=this._getCellTemplate(t);(0,Y.gx)(!a||this.renderTemplate(e,a,t,void 0,r.change)).done(()=>{this._updateCell(e,t)})}_getCellTemplate(e){}_getRows(e){return[]}_getCellOptions(e){var t={column:e.column,columnIndex:e.columnIndex,rowType:e.row.rowType,isAltRow:this._isAltRow(e.row)};return this._addWatchMethod(t),t}_addWatchMethod(e,t){if(this.option("repaintChangesOnly")){var r=[];return(t=t||e).watch=t.watch||function(a,n,s){var o=a(t.data),l=function(d){d&&s&&s(d);var u=a(t.data);JSON.stringify(o)!==JSON.stringify(u)&&(d&&n(u),o=u)};return r.push(l),function(){var d=r.indexOf(l);d>=0&&r.splice(d,1)}},t.update=t.update||function(a,n){a&&(this.data=e.data=a.data,this.rowIndex=e.rowIndex=a.rowIndex,this.dataIndex=e.dataIndex=a.dataIndex,this.isExpanded=e.isExpanded=a.isExpanded,e.row&&!n&&(e.row=a)),r.forEach(s=>{s(a)})},t!==e&&(e.watch=t.watch.bind(t)),e}}_cellPrepared(e,t){t.cellElement=(0,rt.u)((0,b.Z)(e)),this.executeAction("onCellPrepared",t)}_rowPrepared(e,t,r){(0,Ys.aT)(e.get(0),"options",t),t.rowElement=(0,rt.u)(e),this.executeAction("onRowPrepared",t)}_columnOptionChanged(e){var{optionNames:t}=e;if(Te.checkChanges(t,["width","visibleWidth"])){var a=this._columnsController.getVisibleColumns().map(n=>n.visibleWidth||n.width);this.setColumnWidths({widths:a,optionNames:t})}else this._requireReady||this.render()}getCellIndex(e,t){return e.length?e[0].cellIndex:-1}getTableElements(){return this._tableElement||(0,b.Z)()}getTableElement(e){return this._tableElement}setTableElement(e,t){this._tableElement=e}_afterRowPrepared(e){}_handleDataChanged(e){}callbackNames(){return["scrollChanged"]}_updateScrollLeftPosition(){var e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}scrollTo(e){var t=this.element(),r=t&&t.children(".".concat(this.addWidgetPrefix(vm))).not(".".concat(this.addWidgetPrefix("content-fixed")));(0,m.$K)(e)&&(0,m.$K)(e.left)&&this._scrollLeft!==e.left&&(this._scrollLeft=e.left,r&&r.scrollLeft(e.left))}_getContent(e){var t;return null===(t=this._tableElement)||void 0===t?void 0:t.parent()}_removeContent(e){var t=this._getContent(e);t?.length&&t.remove()}_wrapTableInScrollContainer(e,t){var r=(0,b.Z)("<div>"),a=this.option("scrolling.useNative");return(!1===a||"auto"===a&&!Br.nativeScrolling)&&r.addClass(this.addWidgetPrefix("scrollable-simulated")),k.Z.on(r,"scroll",()=>{var n=r.scrollLeft();n!==this._scrollLeft&&this.scrollChanged.fire({left:n},this.name)}),r.addClass(this.addWidgetPrefix("content")).addClass(this.addWidgetPrefix(vm)).append(e).appendTo(this.element()),this.setAria("role","presentation",r),r}needWaitAsyncTemplates(){return this.option("templatesRenderAsynchronously")&&!1===this.option("renderAsync")}waitAsyncTemplates(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Y.BH;if(!e&&!this.needWaitAsyncTemplates())return t.resolve();var a=()=>Y.gx.apply(this,Array.from(this._templateDeferreds)).done(()=>{this.isDisposed()?t.reject():this._templateDeferreds.size>0?a():t.resolve()}).fail(t.reject);return a(),t.promise()}_updateContent(e,t,r){return this.waitAsyncTemplates().done(()=>{this._removeContent(r),this.setTableElement(e,r),this._wrapTableInScrollContainer(e,r)})}_findContentElement(e){}_getWidths(e){if(!e)return[];var t=[];return e.toArray().forEach(a=>{var n=a.offsetWidth;if(a.getBoundingClientRect){var s=(0,di.l)(a);s.width>a.offsetWidth-1&&(n=s.width)}t.push(n)}),t}getColumnWidths(e){if((this.option("forceApplyBindings")||J.ZT)(),e=e??this.getTableElement())for(var t=e.children("tbody:not(.dx-header)").children(),r=0;r<t.length;r++){var a=t.eq(r),n=a.hasClass(hp),s=a.hasClass(cp),o=a.hasClass("dx-error-row");if(!("none"===a.get(0).style.display||a.hasClass("dx-state-invisible")||n||s||o)){var u=a.children("td");return this._getWidths(u)}}return[]}getVisibleColumnIndex(e,t){return e}setColumnWidths(e){var{widths:t}=e,a=this.getTableElement();if(a?.length&&t){var n=this.getColumns(),s=this.option("columnAutoWidth"),o=a.children("colgroup").children("col");o.toArray().forEach(l=>l.removeAttribute("style")),n.forEach((l,d)=>{if(s&&l.width&&!l.command)for(var u=du(l.visibleWidth||l.width),c=du(l.minWidth||u),f=a.children().children(".dx-row").not(".".concat(cp)),p=0;p<f.length;p++){var g=this.getVisibleColumnIndex(d,p);if(g>=0){var w=f.eq(p),x=w.hasClass(hp)?w.find("td[aria-colindex='".concat(g+1,"']:not(.").concat("dx-group-cell",")")):w.find("td").eq(g);if(x.length){var y=x.get(0);mm(y,l,u),y.style.minWidth=c}}}var E=Cm(t[d]);(0,m.$K)(E)&&(0,lr.cl)(o.eq(d),E)})}}getCellElements(e){return this._getCellElementsCore(e)}_getCellElementsCore(e){if(!(e<0))return this._getRowElements().eq(e).children()}_getCellElement(e,t){var r=this.getCellElements(e),a=this._getVisibleColumnIndex(r,e,t);if(r?.length&&!(a<0)){var n=r.eq(a);return n.length>0?n:void 0}}_getRowElement(e){var t=this,r=(0,b.Z)(),a=t.getTableElements();if(j.S6(a,(n,s)=>{r=r.add(t._getRowElements((0,b.Z)(s)).eq(e))}),r.length)return r}getCellElement(e,t){var r=this._getCellElement(e,t);if(r)return(0,rt.u)(r)}getRowElement(e){var t=this._getRowElement(e),r=[];if(t&&!(0,rt.u)(t).get)for(var a=0;a<t.length;a++)r.push(t[a]);else r=t;return r}_getVisibleColumnIndex(e,t,r){if((0,m.HD)(r)){var a=this._columnsController.columnOption(r,"index");return this._columnsController.getVisibleIndex(a)}return r}getColumnElements(){}getColumns(e,t){return this._columnsController.getVisibleColumns(e)}getCell(e,t,r){var n,a=t||this._getRowElements();if(a.length>0&&e.rowIndex>=0&&("virtual"!==this.option("scrolling.mode")&&"virtual"!==this.option("scrolling.rowRenderingMode")&&(e.rowIndex=e.rowIndex<a.length?e.rowIndex:a.length-1),n=r||this.getCellElements(e.rowIndex),n?.length>0))return n.eq(n.length>e.columnIndex?e.columnIndex:n.length-1)}getRowsCount(){var e=this.getTableElement();return e&&1===e.length?e[0].rows.length:0}_getRowElementsCore(e){if(e=e||this.getTableElement()){var r=(this.option().rowTemplate||this.option("dataRowTemplate"))&&e.find("> tbody.".concat(bl));return r&&r.length?r:e.find("> tbody > "+".".concat(bl,", > .").concat(bl))}return(0,b.Z)()}_getRowElements(e){return this._getRowElementsCore(e)}getRowIndex(e){return this._getRowElements().index(e)}getBoundingRect(){}getName(){}setScrollerSpacing(e){var t=this.element(),r=this.option("rtlEnabled");t&&t.css({paddingLeft:r?e:"",paddingRight:r?"":e})}isScrollbarVisible(e){var t=this.element(),r=this._tableElement;return!(!t||!r)&&(e?(0,oe.Y_)(r)-(0,oe.dz)(t)>0:(0,oe.zp)(r)-(0,oe.Cr)(t)>0)}isDisposed(){var e;return null===(e=this.component)||void 0===e?void 0:e._disposed}}var fp="text-content",bm="dx-header-row",_p="dx-visibility-hidden",wm="dx-text-content-alignment-",vp=function(i,e,t){var r=(0,b.Z)("<div>").addClass(i.addWidgetPrefix(fp));i.setAria("role","presentation",r),Sm(i,e,t.column,r);var a=i.option("showColumnLines"),n=i.getController("columns").getHeaderContentAlignment(t.column.alignment);return r[a||"right"===n?"appendTo":"prependTo"](e)};function Sm(i,e,t,r){var a=i._getIndicatorElements(e,!0),n=i._getIndicatorElements(e),s=a&&a.length,o=i._getColumnAlignment(t.alignment),l=".".concat(i._getIndicatorClassName("sort")),d=".".concat(i._getIndicatorClassName("sortIndex")),u=n.filter(l),c=n.children().filter(d);(r=r||e.children(".".concat(i.addWidgetPrefix(fp)))).toggleClass(wm+o,s>0).toggleClass(wm+("left"===o?"right":"left"),s>0&&"center"===t.alignment).toggleClass("dx-sort-indicator",!!u.length).toggleClass("dx-sort-index-indicator",!!c.length).toggleClass("dx-header-filter-indicator",!!n.filter(".".concat(i._getIndicatorClassName("headerFilter"))).length)}var ym={defaultOptions:()=>({showColumnHeaders:!0,cellHintEnabled:!0}),views:{columnHeadersView:class zA extends wl{init(){super.init(),this._headerPanelView=this.getView("headerPanel"),this._headerFilterController=this.getController("headerFilter"),this._dataController=this.getController("data")}_createTable(){var e=super._createTable.apply(this,arguments);return k.Z.on(e,"mousedown selectstart",this.createAction(t=>{var{event:r}=t;r.shiftKey&&r.preventDefault()})),e}_isLegacyKeyboardNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDefaultTemplate(e){var t=this;return function(r,a){var{caption:n}=e,s=!e.command||n&&"expand"!==e.command;"empty"===e.command?t._renderEmptyMessage(r,a):s?vp(t,r,a).text(n):e.command&&r.html("&nbsp;")}}_renderEmptyMessage(e,t){var r=this._getEmptyHeaderText();if(r){var a=vp(this,e,t);if(r.includes("{0}")){var[s,o]=r.split("{0}"),l=ae.Z.format("dxDataGrid-emptyHeaderColumnChooserText"),d=this._columnChooserView,u=(0,b.Z)("<a>").text(l).addClass("dx-link");k.Z.on(u,"click",this.createAction(()=>d.showColumnChooser())),a.append(it.Z.createTextNode(s)).append(u).append(it.Z.createTextNode(o))}else a.text(r)}else e.html("&nbsp;")}_getEmptyHeaderText(){var e=!!this._columnChooserView.hasHiddenColumns(),t=!!this._headerPanelView.hasGroupedColumns();switch(!0){case e&&t:return ae.Z.format("dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText");case t:return ae.Z.format("dxDataGrid-emptyHeaderWithGroupPanelText");case e:return ae.Z.format("dxDataGrid-emptyHeaderWithColumnChooserText");default:return""}}_getHeaderTemplate(e){return e.headerCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(e)}}_processTemplate(e,t){var r=this,{column:n}=t,s=super._processTemplate(e);return"header"===t.rowType&&s&&n.headerCellTemplate&&!n.command?{render(o){var l=vp(r,o.container,o.model);s.render((0,N.l)({},o,{container:l}))}}:s}_handleDataChanged(e){"refresh"===e.changeType&&(this._isGroupingChanged||this._requireReady)&&(this._isGroupingChanged=!1,this.render())}_renderCell(e,t){var r=super._renderCell(e,t);return"header"===t.row.rowType&&(r.addClass("dx-cell-focus-disabled"),this._isLegacyKeyboardNavigation()||t.column&&!t.column.type&&r.attr("tabindex",this.option("tabindex")||0)),r}_setCellAriaAttributes(e,t){super._setCellAriaAttributes(e,t),"header"===t.rowType&&(t.column.type||this.setAria("role","columnheader",e),t.column&&!t.column.command&&!t.column.isBand&&(e.attr("id",t.column.headerId),this.setAria("label","".concat(ae.Z.format("dxDataGrid-ariaColumn")," ").concat(t.column.caption),e)))}_createRow(e){var t=super._createRow.apply(this,arguments);return t.toggleClass("dx-column-lines",this.option("showColumnLines")),"header"===e.rowType&&(t.addClass(bm),this._isLegacyKeyboardNavigation()||ml("columnHeaders",this,t,"td",this._handleActionKeyDown.bind(this))),t}_processHeaderAction(e,t){}_handleActionKeyDown(e){var{event:t}=e,r=(0,b.Z)(t.target);if(this._lastActionElement=t.target,r.is(".dx-header-filter")){var a=this._headerFilterController,n=r.closest("td"),s=this.getColumnIndexByElement(n);s>=0&&a.showHeaderFilterMenu(s,!1)}else{var o=r.closest(".dx-row");this._processHeaderAction(t,o)}t.preventDefault()}_renderCore(){var e=this.element(),t={};if(!this._tableElement||this._dataController.isLoaded()||this._hasRowElements){e.addClass(this.addWidgetPrefix("headers")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")).empty(),this.setAria("role","presentation",e);var r=this._updateContent(this._renderTable({change:t}),t);return this.getRowCount()>1&&e.addClass("dx-header-multi-row"),super._renderCore.apply(this,arguments),r}}_renderRows(){(this._dataController.isLoaded()||this._hasRowElements)&&(super._renderRows.apply(this,arguments),this._hasRowElements=!0)}_renderRow(e,t){var r=1===this.getRowCount()?null:t.row.rowIndex;t.columns=this.getColumns(r),super._renderRow(e,t)}_createCell(e){var{column:t}=e,r=super._createCell.apply(this,arguments);return t.rowspan>1&&"header"===e.rowType&&r.attr("rowSpan",t.rowspan),r}_getRows(){var e=[],t=this.getRowCount();if(this.option("showColumnHeaders"))for(var r=0;r<t;r++)e.push({rowType:"header",rowIndex:r});return e}_getCellTemplate(e){if("header"===e.rowType)return this._getHeaderTemplate(e.column)}_columnOptionChanged(e){var{changeTypes:t}=e,{optionNames:r}=e;t.grouping||t.groupExpanding?t.grouping&&(this._isGroupingChanged=!0):(super._columnOptionChanged(e),(r.width||r.visible)&&this.resizeCompleted.fire())}_isElementVisible(e){return e&&e.visible}_alignCaptionByCenter(e){var t=this._getIndicatorContainer(e,!0);t&&t.length&&(t.filter(".".concat(_p)).remove(),(t=this._getIndicatorContainer(e)).clone().addClass(_p).css("float","").insertBefore(e.children(".".concat(this.addWidgetPrefix(fp)))))}_updateCell(e,t){"header"===t.rowType&&"center"===t.column.alignment&&this._alignCaptionByCenter(e),super._updateCell.apply(this,arguments)}_updateIndicator(e,t,r){var a=super._updateIndicator.apply(this,arguments);return"center"===t.alignment&&this._alignCaptionByCenter(e),Sm(this,e,t),a}_getIndicatorContainer(e,t){var r=super._getIndicatorContainer(e);return t?r:r.filter(":not(.".concat(_p,")"))}_isSortableElement(e){return!0}getHeadersRowHeight(){var e=this.getTableElement(),t=e&&e.find(".".concat(bm));return t&&t.toArray().reduce((r,a)=>r+(0,oe.Cr)(a),0)||0}getHeaderElement(e){var t=this.getColumnElements();return t&&t.eq(e)}getColumnElements(e,t){var a,r=this,n=r._columnsController,s=r.getRowCount();if(r.option("showColumnHeaders")){if(s>1&&(!(0,m.$K)(e)||(0,m.$K)(t))){var o=[],l=(0,m.$K)(t)?n.getChildrenByBandColumn(t,!0):n.getVisibleColumns();return(0,j.S6)(l,(d,u)=>{var c=(0,m.$K)(e)?e:n.getRowIndex(u.index);(a=r._getCellElement(c,n.getVisibleIndex(u.index,c)))&&o.push(a.get(0))}),(0,b.Z)(o)}if(!e||e<s)return r.getCellElements(e||0)}}getColumnIndexByElement(e){var t=this.getCellIndex(e),r=e.closest(".dx-row"),{rowIndex:a}=r[0],n=this.getColumns(a)[t];return n?n.index:-1}getVisibleColumnIndex(e,t){var r=this.getColumns()[e];return r?this._columnsController.getVisibleIndex(r.index,t):-1}getColumnWidths(){var e=this.getColumnElements();return e&&e.length?this._getWidths(e):super.getColumnWidths.apply(this,arguments)}allowDragging(e){var t,r=e&&this._columnsController.getRowIndex(e.index),a=this.getColumns(r);return(null!==(t=this.option("allowColumnReordering"))&&void 0!==t?t:this._columnsController.isColumnOptionUsed("allowReordering"))&&e.allowReordering&&a.length>1}getBoundingRect(){var e=this.getColumnElements();return e&&e.length?{top:this.getTableElement().offset().top}:null}getName(){return"headers"}getColumnCount(){var e=this.getColumnElements();return e?e.length:0}isVisible(){return this.option("showColumnHeaders")}optionChanged(e){switch(e.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":this._invalidate(!0,!0),e.handled=!0;break;default:super.optionChanged(e)}}getHeight(){return this.getElementHeight()}getContextMenuItems(e){var t=this,{column:r}=e;if(e.row&&("header"===e.row.rowType||"detailAdaptive"===e.row.rowType)){var a=t.option("sorting");if(a&&"none"!==a.mode&&r&&r.allowSorting){var n=function(s){setTimeout(()=>{t._columnsController.changeSortOrder(r.index,s.itemData.value)})};return[{text:a.ascendingText,value:"asc",disabled:"asc"===r.sortOrder,icon:"context-menu-sort-asc",onItemClick:n},{text:a.descendingText,value:"desc",disabled:"desc"===r.sortOrder,icon:"context-menu-sort-desc",onItemClick:n},{text:a.clearText,value:"none",disabled:!r.sortOrder,icon:"context-menu-sort-none",onItemClick:n}]}}}getRowCount(){return this._columnsController&&this._columnsController.getRowCount()}setRowsOpacity(e,t,r){var a,n,s=this.getRowCount(),o=this._columnsController.getColumns(),l=o&&o[e],d=l&&l.isBand&&l.index,u=(f,p)=>{f.ownerBand===d&&(n.eq(p).css({opacity:t}),f.isBand&&this.setRowsOpacity(f.index,t,a+1))};if((0,m.$K)(d))for(a=r=r||0;a<s;a++)(n=this.getCellElements(a))&&this.getColumns(a).forEach(u)}}}};const He=(0,ye.Z)((0,ye.Z)((0,ye.Z)({},Nt),Te),{modules:[]});He.registerModule("columnHeaders",ym);var uu=be(3422),ur=be(9869),ba=be(6340),WA=be(3540),vt=be(2064),xm=["filterValues","filterType","fixed","fixedPosition"],hu=["visibleIndex","dataField","name","dataType","width","visible","sortOrder","lastSortOrder","sortIndex","groupIndex","filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","added"].concat(xm),$A={visibleWidth:!0,bestFitWidth:!0,bufferedFilterValue:!0},Em=Number.MAX_SAFE_INTEGER||9007199254740991,En="groupExpand",gp=/columns\[(\d+)\]\.?/gi,UA={visible:!0,showInColumnChooser:!0},jA={number:["=","<>","<",">","<=",">=","between"],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">=","between"],datetime:["=","<>","<",">","<=",">=","between"]},qA={visibleIndex:!0,groupIndex:!0,grouped:!0,sortIndex:!0,sortOrder:!0},Js="group",Qs="columnChooser",Sl=be(7921),hi=be(5789),qt=be(1730),Im=function(i){i.filterOperations=i.defaultFilterOperations},YA=1,cu=function(i,e,t,r){var a={};if(e){(0,m.HD)(e)&&(e={dataField:e}),i.setName(e);var n={};if(e.command)n=(0,ba.HR)(a,e);else{a=i.getCommonSettings(e),t&&t.name&&t.dataField&&(e=(0,N.l)({},e,{dataField:t.dataField}));var s=i._createCalculatedColumnOptions(e,r);e.type||(n={headerId:"dx-col-".concat(YA++)}),n=(0,ba.HR)(n,UA),(0,ba.HR)(n,a),(0,ba.HR)(n,s),(0,ba.HR)(n,e),(0,ba.HR)(n,{selector:null})}return e.filterOperations===e.defaultFilterOperations&&Im(n),n}},eo=function i(e,t,r,a){var n=[];return t&&(0,j.S6)(t,(s,o)=>{var l=(a??0)+n.length,d=e._columnsUserState&&bp(o,e._columnsUserState[l])&&e._columnsUserState[l],u=cu(e,o,d,r);u&&(r&&(u.ownerBand=r),n.push(u),u.columns&&(n=n.concat(i(e,u.columns,u,n.length)),delete u.columns,u.hasColumns=!0))}),n},ls=function(i,e){for(var t=[],r=e[i];r;)t.unshift(r),r=e[i=r.index];return t},XA=function i(e,t,r){var a=[],n=t[e];if(n)for(var s=0;s<n.length;s++){var o=n[s];(!(0,m.$K)(o.groupIndex)||o.showWhenGrouped)&&(a.push(o),r&&o.isBand&&(a=a.concat(i(o.index,t,r))))}return a},e2=function i(e,t){var r=0,a=e.getChildrenByBandColumn(t,!0);return(0,j.S6)(a,(n,s)=>{s.isBand?(s.colspan=s.colspan||i(e,s.index),r+=s.colspan||1):r+=1}),r},mp=function(i){var e=(0,m.dt)(i);return"string"!==e&&"boolean"!==e&&"number"!==e&&"date"!==e&&"object"!==e&&(e=void 0),e},Tm=function(i,e){switch(i){case"date":case"datetime":return hi.Z.getDateSerializationFormat(e);case"number":if((0,m.HD)(e))return"string";if((0,m.kE)(e))return null}},Am=function(i,e){i.deserializeValue||(Te.isDateType(e)&&(i.deserializeValue=function(t){return hi.Z.deserializeDate(t)},i.serializeValue=function(t){return(0,m.HD)(t)?t:hi.Z.serializeDate(t,this.serializationFormat)}),"number"===e&&(i.deserializeValue=function(t){var r=parseFloat(t);return isNaN(r)?t:r},i.serializeValue=function(t,r){return"filter"===r?t:(0,m.$K)(t)&&"string"===this.serializationFormat?t.toString():t}))},r2=function(i){return!0===i.value?this.trueText||"true":!1===i.value?this.falseText||"false":i.valueText||""},Dm=function(i){if("boolean"===i)return r2},Om=function(i){(0,j.S6)(i._columns,(e,t)=>{t.index=e}),(0,j.S6)(i._columns,(e,t)=>{(0,m.Kn)(t.ownerBand)&&(t.ownerBand=t.ownerBand.index)}),(0,j.S6)(i._commandColumns,(e,t)=>{t.index=-(e+1)})},Rm=function(i,e){(0,Sl.Sq)(i._columns,"groupIndex",e,t=>{var{grouped:r}=t;return delete t.grouped,r})},Cp=function(i,e,t){var n,r=(0,m.Kn)(e)?e.rowIndex:null,a=t===Js?i.getGroupColumns():t===Qs?i.getChooserColumns():i.getVisibleColumns(r);return e=(0,m.Kn)(e)?e.columnIndex:e,(n=a[e])&&n.type===En&&(n=i._columns.filter(s=>n.type===s.type)[0]||n),n&&(0,m.$K)(n.index)?n.index:-1};function bp(i,e){return i&&e&&e.name===(i.name||i.dataField)&&(e.dataField===i.dataField||i.name)}var Lm=function(i){var l,d,u,e=i._columnsUserState,t=i._ignoreColumnOptionNames||[],r=i._columns,a={},n=[],s=!0,o=[];function c(w,x){if(x)for(var y=0;y<hu.length;y++){var E=hu[y];t.includes(E)||("dataType"===E?w[E]=w[E]||x[E]:xm.includes(E)?E in x&&(w[E]=x[E]):("selectedFilterOperation"===E&&x[E]&&(w.defaultSelectedFilterOperation=w[E]||null),w[E]=x[E]))}}function f(w,x){for(var y=x.name||x.dataField,E=a[y]||0,V=0;V<w.length;V++)if(bp(x,w[V])){if(!E)return a[y]=a[y]||0,a[y]++,V;E--}return-1}if(e){for(u=0;u<r.length;u++)d=f(e,r[u]),s=s&&d>=0,o.push(d);for(u=0;u<r.length;u++)l=r[u],d=o[u],(i._hasUserState||s)&&c(l,e[d]),d>=0&&(0,m.$K)(e[d].initialIndex)?n[d]=l:n.push(l);var p=!1;for(u=0;u<e.length;u++){var g=e[u];g.added&&f(r,g)<0&&(c(l=cu(i,g.added),g),n.push(l),g.added.columns&&(p=!0))}p&&(Om(i),n=eo(i,n)),to(i,n)}},ds=function(i,e){Om(i),Rm(i,e),function(i,e){(0,j.S6)(i._columns,(t,r)=>{(0,m.$K)(r.sortIndex)&&!fu(r.sortOrder)&&delete r.sortIndex}),(0,Sl.Sq)(i._columns,"sortIndex",e,t=>!(0,m.$K)(t.groupIndex)&&fu(t.sortOrder))}(i,e),km(i),function(i,e){for(var t,r=[],a=i.getBandColumnsCache(),n=[],s=i._columns.filter(d=>!d.command),o=0;o<s.length;o++)t=s[o],ls(o,a.columnParentByIndex).length?n.push(t):r.push(t);(0,Sl.Sq)(n,"visibleIndex",e),(0,Sl.Sq)(r,"visibleIndex",e)}(i,e)},pu=function(i){i.resetColumnsCache()};function to(i,e){i._previousColumns=i._columns,i._columns=e,pu(i),i.updateColumnDataTypes()}var wa=function(i,e,t,r){var a,n=i._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:r};t=(t=t||"all").split(".")[0];var{changeTypes:s}=n;e&&!s[e]&&(s[e]=!0,s.length++);var{optionNames:o}=n;t&&!o[t]&&(o[t]=!0,o.length++),(void 0===r||r!==n.columnIndex)&&((0,m.$K)(r)&&(null!==(a=n.columnIndices)&&void 0!==a||(n.columnIndices=[]),(0,m.$K)(n.columnIndex)&&n.columnIndices.push(n.columnIndex),n.columnIndices.push(r)),delete n.columnIndex),i._columnChanges=n,pu(i)},yl=function(i){var a,e=i.option("onColumnsChanging"),t=i._columnChanges;i.isInitialized()&&!i._updateLockCount&&t&&(e&&(i._updateLockCount++,e((0,N.l)({component:i.component},t)),i._updateLockCount--),i._columnChanges=void 0,(a=t.optionNames)&&["dataField","lookup","dataType","columns"].some(n=>a[n])?(i._reinitAfterLookupChanges=t?.optionNames.lookup,i.reinit(),i._reinitAfterLookupChanges=void 0):i.columnsChanged.fire(t))},wp=function(i,e,t,r,a){var o,l,d,n=(0,Dt.vb)(t),s=e.index;if(3===arguments.length)return n(e,{functionsAsIs:!0});var u=n(e,{functionsAsIs:!0});if(!(0,J.bY)(u,r,{maxDepth:5})){"groupIndex"===t||"calculateGroupValue"===t?(l="grouping",function(i,e,t,r){if(t>=0)r>=0||(e.lastSortOrder=e.sortOrder);else{var n=i.option("sorting.mode"),s=e.lastSortOrder;"single"===n&&i._columns.some(l=>l!==e&&(0,m.$K)(l.sortIndex))&&(s=void 0),e.sortOrder=s}}(i,e,r,u)):l="sortIndex"===t||"sortOrder"===t||"calculateSortValue"===t?"sorting":"columns";var c=(0,Dt.OM)(t);c(e,r,{functionsAsIs:!0});var f=function(i,e){var r,t=[],a=i.getBandColumnsCache(),n=function(o){return o.ownerBand===e.ownerBand};if(a.isPlain){var s=i._columns.indexOf(e);s>=0&&(t=["columns[".concat(s,"]")])}else for(r=i._columns.filter(n);r.length&&-1!==r.indexOf(e);)t.unshift("columns[".concat(r.indexOf(e),"]")),r=(e=a.columnParentByIndex[e.index])?i._columns.filter(n):[];return t.join(".")}(i,e);qA[t]&&(ds(i,e),r=n(e)),("name"===t||"allowEditing"===t)&&i._checkColumns(),!(0,m.$K)(u)&&!(0,m.$K)(r)&&0!==t.indexOf("buffer")&&(a=!0),a?pu(i):(!hu.includes(t)&&"visibleWidth"!==t&&(o=i.option("columns"),d=i.getColumnByPath(f,o),(0,m.HD)(d)&&(d=o[s]={dataField:d}),d&&bp(d,e)&&c(d,r,{functionsAsIs:!0})),wa(i,l,t,s)),f&&function(i,e){var{value:t}=e,{optionName:r}=e,{prevValue:a}=e,{fullOptionName:n}=e,s="".concat(n,".").concat(r);!$A[r]&&i._skipProcessingColumnsChange!==s&&(i._skipProcessingColumnsChange=s,i.component._notifyOptionChanged(s,t,a),i._skipProcessingColumnsChange=!1)}(i,{fullOptionName:f,optionName:t,value:r,prevValue:u})}};function fu(i){return"asc"===i||"desc"===i}var h2=function(i,e){if(this.dataField){var t=this.dataField.split("."),r=t.length-1;this.serializeValue&&(e=this.serializeValue(e));for(var a=0;a<r;a++){var n=t[a];i=i[n]=i[n]||{}}i[t[r]]=e}},c2=function i(e,t,r){var a=[];return e[t=t||0]&&(0,j.S6)(e[t],(n,s)=>{(s.ownerBand===r||s.type===En)&&(s.isBand&&s.colspan?a.push.apply(a,i(e,t+1,s.index)):(!s.command||t<1)&&a.push(s))}),a},Sp=(i,e)=>{var t=i._columns.filter(r=>r.type===e.type);return!!t.length},Pm=function(i,e){var t=i.option("rtlEnabled");return e.command&&!Sp(i,e)||!e.fixedPosition?t?"right":"left":e.fixedPosition},Bm=function(i,e,t,r){var a,n=this.getRowCount(),s=i[r]&&i[r].rowspan,o=e.filter(l=>l.type===t);return i.forEach((l,d)=>{l.type===t&&(a=d,s=i[d+1]?i[d+1].rowspan:n)}),s>1&&(o=(0,j.UI)(o,l=>(0,N.l)({},l,{rowspan:s}))),o.unshift.apply(o,(0,m.$K)(a)?[a,1]:[r,0]),i.splice.apply(i,o),s||1},Vm=function(i,e){for(var t=i?i.toString():"0";t.length<e;)t="0".concat(t);return t},Nm=(i,e,t,r)=>{for(var a,n,s=e.slice().map(p=>(0,N.l)({},p)),o=i._isColumnFixing(),l=t.slice().map(p=>(0,N.l)({fixed:o},p)),d=p=>t.reduce((g,w,x)=>w.type===(r&&p.type===En?"expand":p.type)||w.command===p.command?x:g,-1),u=p=>p.command!==t[n].command,c=0;c<e.length;c++)(n=(a=e[c])&&(a.type||a.command)?d(a):-1)>=0&&(r?(s[c]=(0,N.l)({fixed:o},t[n],a),a.type!==En&&(l=l.filter(u))):s[c]=(0,N.l)({},a,t[n],a.type===En&&{visibleIndex:a.visibleIndex,index:a.index,headerId:a.headerId,allowFixing:0===a.groupIndex,allowReordering:0===a.groupIndex,groupIndex:a.groupIndex}));return e.length&&r&&l.length&&(s=s.concat(l)),s},Fm=(i,e)=>(0,m.$K)(e.fixed)||!e.type?e.fixed:i._isColumnFixing(),km=i=>{i._bandColumnsCache=void 0},Mm=(i,e)=>{var r,t=(0,m.HD)(e)&&e.substr(0,e.indexOf(":"));if(void 0!==e)return t&&(e=e.substr(t.length+1)),t?r=i.filter(a=>"".concat(a[t])===e)[0]:["index","name","dataField","caption"].some(a=>!!(r=i.filter(n=>n[a]===e)[0])),r},Hm={defaultOptions:()=>({commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:ae.Z.format("dxDataGrid-trueText"),falseText:ae.Z.format("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columnResizingMode:"nextColumn",columnMinWidth:void 0,columnWidth:void 0,adaptColumnWidthByRatio:!0,columns:void 0,regenerateColumnsByVisibleItems:!1,customizeColumns:null,dateSerializationFormat:void 0}),controllers:{columns:class m2 extends Nt.Controller{init(e){this._dataController=this.getController("data"),this._focusController=this.getController("focus"),this._stateStoringController=this.getController("stateStoring");var t=this.option("columns");this._commandColumns=this._commandColumns||[],this._columns=this._columns||[],this._isColumnsFromOptions=!!t,this._isColumnsFromOptions?(to(this,t?eo(this,t):[]),Lm(this)):to(this,this._columnsUserState?eo(this,this._columnsUserState):this._columns),function(i){var e=i._getExpandColumnOptions();i.addCommandColumn(e)}(this),this._dataSourceApplied?this.applyDataSource(this._dataSource,!0,e):ds(this),this._checkColumns()}_getExpandColumnOptions(){return{type:"expand",command:"expand",width:"auto",cssClass:"dx-command-expand",allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1}}_getFirstItems(e){var t,r=[];return e&&e.items().length>0&&(t=Te.normalizeSortingInfo(e.group()).length,r=function a(n,s){if(!n||!s)return n;for(var o=0;o<n.length;o++){var l=a(n[o].items||n[o].collapsedItems,s-1);if(l&&l.length)return l}}(e.items(),t)||[]),r}_endUpdateCore(){!this._skipProcessingColumnsChange&&yl(this)}callbackNames(){return["columnsChanged"]}getColumnByPath(e,t){var r,a=[];return e.replace(gp,(n,s)=>(a.push(parseInt(s)),"")),a.length&&(r=t?a.reduce((n,s)=>n&&n.columns&&n.columns[s],{columns:t}):function(i,e){var t,r,n=function(o){return o.ownerBand===(t?t.index:void 0)};if(i.getBandColumnsCache().isPlain)t=i._columns[e[0]];else{r=i._columns.filter(n);for(var s=0;s<e.length;s++)(t=r[e[s]])&&(r=i._columns.filter(n))}return t}(this,a)),r}optionChanged(e){var t;switch(e.name){case"adaptColumnWidthByRatio":e.handled=!0;break;case"dataSource":e.value!==e.previousValue&&!this.option("columns")&&(!Array.isArray(e.value)||!Array.isArray(e.previousValue))&&(this._columns=[]);break;case"columns":t=this._skipProcessingColumnsChange,e.handled=!0,this._skipProcessingColumnsChange||(e.name===e.fullName?(this._columnsUserState=null,this._ignoreColumnOptionNames=null,this.init()):(this._columnOptionChanged(e),t=!0)),t&&this._updateRequireResize(e);break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"columnFixing":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"columnHidingEnabled":case"dateSerializationFormat":case"columnResizingMode":case"columnMinWidth":case"columnWidth":e.handled=!0,this.reinit("columnWidth"===e.fullName&&["width"]);break;case"rtlEnabled":this.reinit();break;default:super.optionChanged(e)}}_columnOptionChanged(e){var t={},r=this.getColumnByPath(e.fullName),a=e.fullName.replace(gp,"");r&&(a?t[a]=e.value:t=e.value,this._skipProcessingColumnsChange=e.fullName,this.columnOption(r.index,t),this._skipProcessingColumnsChange=!1)}_updateRequireResize(e){var{component:t}=this;"width"===e.fullName.replace(gp,"")&&t._updateLockCount&&(t._requireResize=!0)}publicMethods(){return["addColumn","deleteColumn","columnOption","columnCount","clearSorting","clearGrouping","getVisibleColumns","getVisibleColumnIndex"]}applyDataSource(e,t,r){var a=e&&e.isLoaded();if(this._dataSource=e,!this._dataSourceApplied||0===this._dataSourceColumnsCount||t||this.option("regenerateColumnsByVisibleItems")){if(a){if(!this._isColumnsFromOptions){var n=function(i,e){for(var r,t=i._getFirstItems(e),a={},n=[],s=0;s<t.length;s++)if(t[s])for(r in t[s])(!(0,m.mf)(t[s][r])||Ur.default.isWrapped(t[s][r]))&&(a[r]=!0);for(r in a)if(0!==r.indexOf("__")){var o=cu(i,r);n.push(o)}return n}(this,e);n.length&&(to(this,n),this._dataSourceColumnsCount=this._columns.length,Lm(this))}return this.updateColumns(e,t,r)}this._dataSourceApplied=!1,ds(this)}else if(a&&!this.isAllDataTypesDefined(!0)&&this.updateColumnDataTypes(e))return wa(this,"columns"),yl(this),(new Y.BH).reject().promise()}reset(){this._dataSource=null,this._dataSourceApplied=!1,this._dataSourceColumnsCount=void 0,this.reinit()}resetColumnsCache(){this._visibleColumns=void 0,this._fixedColumns=void 0,this._rowCount=void 0,km(this)}reinit(e){this._columnsUserState=this.getUserState(),this._ignoreColumnOptionNames=e||null,this.init(),e&&(this._ignoreColumnOptionNames=null)}isInitialized(){return!!this._columns.length||!!this.option("columns")}isDataSourceApplied(){return this._dataSourceApplied}getCommonSettings(e){var t,r,a=(!e||!e.type)&&this.option("commonColumnSettings")||{},n=null!==(t=this.option("grouping"))&&void 0!==t?t:{},s=null!==(r=this.option("groupPanel"))&&void 0!==r?r:{};return(0,N.l)({allowFixing:this.option("columnFixing.enabled"),allowResizing:this.option("allowColumnResizing")||void 0,allowReordering:this.option("allowColumnReordering"),minWidth:this.option("columnMinWidth"),width:this.option("columnWidth"),autoExpandGroup:n.autoExpandAll,allowCollapsing:n.allowCollapsing,allowGrouping:s.allowColumnDragging&&s.visible||n.contextMenuEnabled},a)}isColumnOptionUsed(e){for(var t=0;t<this._columns.length;t++)if(this._columns[t][e])return!0}isAllDataTypesDefined(e){var t=this._columns;if(!t.length)return!1;for(var r=0;r<t.length;r++)if((t[r].dataField||t[r].calculateCellValue!==t[r].defaultCalculateCellValue)&&(!t[r].dataType||e&&t[r].deserializeValue&&void 0===t[r].serializationFormat))return!1;return!0}getColumns(){return this._columns}isBandColumnsUsed(){return this.getColumns().some(e=>e.isBand)}getGroupColumns(){var e=[];return(0,j.S6)(this._columns,function(){(0,m.$K)(this.groupIndex)&&(e[this.groupIndex]=this)}),e}_shouldReturnVisibleColumns(){return!0}_compileVisibleColumns(e){return this._visibleColumns=this._visibleColumns||this._compileVisibleColumnsCore(),e=(0,m.$K)(e)?e:this._visibleColumns.length-1,this._visibleColumns[e]||[]}getVisibleColumns(e,t){return this._shouldReturnVisibleColumns()?this._compileVisibleColumns.apply(this,arguments):[]}getFixedColumns(e){return this._fixedColumns=this._fixedColumns||this._getFixedColumnsCore(),e=(0,m.$K)(e)?e:this._fixedColumns.length-1,this._fixedColumns[e]||[]}getFilteringColumns(){return this.getColumns().filter(e=>(e.dataField||e.name)&&(e.allowFiltering||e.allowHeaderFiltering)).map(e=>{var t=(0,N.l)(!0,{},e);return(0,m.$K)(t.dataField)||(t.dataField=t.name),t.filterOperations=e.filterOperations!==e.defaultFilterOperations?t.filterOperations:null,t})}getColumnIndexOffset(){return 0}_getFixedColumnsCore(){var s,o,l,e=[],t=this.getRowCount(),a={command:"transparent"},n=0;if(this._isColumnFixing())for(var d=0;d<=t;d++){s=0,l=null,o=null;for(var u=this.getVisibleColumns(d,!0),c=0;c<u.length;c++){var f=u[c-1],p=u[c];p.fixed?f&&f.fixed&&Pm(this,f)!==Pm(this,p)?(0,m.$K)(o)||(o=c):l=p.fixedPosition:(0===d&&(p.isBand&&p.colspan?n+=p.colspan:n++),s++,(0,m.$K)(o)||(o=c))}if(0===d&&(0===s||s>=u.length))return[];(0,m.$K)(o)||(o="right"===l?0:u.length),e[d]=u.slice(0),a.colspan||(a.colspan=n),e[d].splice(o,s,a)}return e.map(g=>g.map(w=>{var x=(0,ye.Z)({},w);return x.headerId&&(x.headerId+="-fixed"),x}))}_isColumnFixing(){var e=this.option("columnFixing.enabled");return!e&&(0,j.S6)(this._columns,(t,r)=>{if(r.fixed)return e=!0,!1}),e}_getExpandColumnsCore(){return this.getGroupColumns()}getExpandColumns(){var t,e=this._getExpandColumnsCore(),r=e.filter(o=>0===o.groupIndex)[0],a=r&&r.fixed,n=this._isColumnFixing(),s=this.option("rtlEnabled");return e.length&&(t=this.columnOption("command:expand")),(0,j.UI)(e,o=>(0,N.l)({},o,{visibleWidth:null,minWidth:null,cellTemplate:(0,m.$K)(o.groupIndex)?null:o.cellTemplate,headerCellTemplate:null,fixed:!(!(0,m.$K)(o.groupIndex)||!a)||n,fixedPosition:s?"right":"left"},t,{index:o.index,type:o.type||En}))}getBandColumnsCache(){if(!this._bandColumnsCache){var e=this._columns,t={},r={},a=!0;e.forEach(n=>{var{ownerBand:s}=n,o=(0,m.Kn)(s)?s.index:s,l=e[o];n.hasColumns&&(a=!1),n.colspan&&(n.colspan=void 0),n.rowspan&&(n.rowspan=void 0),l?r[n.index]=l:o=-1,t[o]=t[o]||[],t[o].push(n)}),this._bandColumnsCache={isPlain:a,columnChildrenByIndex:t,columnParentByIndex:r}}return this._bandColumnsCache}_isColumnVisible(e){return e.visible&&this.isParentColumnVisible(e.index)}_isColumnInGroupPanel(e){return(0,m.$K)(e.groupIndex)&&!e.showWhenGrouped}hasVisibleDataColumns(){return this._columns.some(t=>{var r=this._isColumnVisible(t),a=this._isColumnInGroupPanel(t);return r&&!a&&!t.command})}_compileVisibleColumnsCore(){var e=this.getBandColumnsCache(),t=Nm(this,this._columns,this._commandColumns,!0);!function(i,e,t){for(var r,a=0;a<e.length;a++){var n=e[a];(n.visible||n.command)&&(n.isBand&&(n.colspan=n.colspan||e2(i,n.index)),(!n.isBand||!n.colspan)&&(r=i.getRowCount(),!n.command&&(!(0,m.$K)(n.groupIndex)||n.showWhenGrouped)&&(r-=ls(n.index,t.columnParentByIndex).length),r>1&&(n.rowspan=r)))}}(this,t,e);var r=this._getIndexedColumns(t),a=this._getVisibleColumnsFromIndexed(r);return!this.hasVisibleDataColumns()&&this._columns.length&&a[a.length-1].push({command:"empty"}),a}_getIndexedColumns(e){for(var t=this.option("rtlEnabled"),r=this.getRowCount(),a=function(i){var e;for(e=0;i>1;e++)i/=10;return e}(e.length),n=this.getBandColumnsCache(),s=[],o=[],l=0;l<r;l+=1)o[l]=[{}],s[l]=[{},{},{}];return e.forEach(d=>{var u,c,f,p,w,{visibleIndex:g}=d,x=ls(d.index,n.columnParentByIndex),y=this._isColumnVisible(d),E=this._isColumnInGroupPanel(d);if(y&&!E){var V=x.length;if(g<0)g=-g,w=o[V];else if(d.fixed=null!==(c=null===(u=x[0])||void 0===u?void 0:u.fixed)&&void 0!==c?c:d.fixed,d.fixedPosition=null!==(p=null===(f=x[0])||void 0===f?void 0:f.fixedPosition)&&void 0!==p?p:d.fixedPosition,d.fixed){var F=!!d.command&&!Sp(this,d),q="right"===d.fixedPosition;t&&!F&&(q=!q),w=q?s[V][2]:s[V][0]}else w=s[V][1];if(x.length){g=Vm(g,a);for(var ee=x.length-1;ee>=0;ee-=1)g=Vm(x[ee].visibleIndex,a)+g}w[g]=w[g]||[],w[g].push(d)}}),{positiveIndexedColumns:s,negativeIndexedColumns:o}}_getVisibleColumnsFromIndexed(e){for(var t=this,{positiveIndexedColumns:r,negativeIndexedColumns:a}=e,n=[],s=this.getRowCount(),o=Nm(this,this.getExpandColumns(),this._columns),l=0,d=0,u=function(f){n.push([]),(0,ba.jS)(a[f],(w,x)=>{n[f].unshift.apply(n[f],x)});var p=n[f].length;r[f].forEach(w=>{(0,ba.jS)(w,(x,y)=>{n[f].push.apply(n[f],y)})}),d<=f&&(d+=Bm.call(t,n[f],o,"detailExpand",p)),l<=f&&(l+=Bm.call(t,n[f],o,En,p))},c=0;c<s;c+=1)u(c);return n.push(c2(n)),n}getInvisibleColumns(e,t){var n,r=this,a=[];return(0,j.S6)(e=e||r._columns,(s,o)=>{if(o.ownerBand===t){if(o.isBand)return void((n=o.visible?r.getInvisibleColumns(r.getChildrenByBandColumn(o.index),o.index):r.getChildrenByBandColumn(o.index)).length&&(a.push(o),a=a.concat(n)));o.visible||a.push(o)}}),a}getChooserColumns(e){return((i,e)=>{if("asc"!==e&&"desc"!==e)return i;var t="asc"===e?1:-1;return i.sort((r,a)=>t*(r.caption||"").localeCompare(a.caption||"")),i})((e?this.getColumns():this.getInvisibleColumns()).filter(n=>n.showInColumnChooser),this.option("columnChooser.sortOrder"))}allowMoveColumn(e,t,r,a){var n=Cp(this,e,r),s=this._columns[n];return!(!s||!(s.allowReordering||s.allowGrouping||s.allowHiding))&&(r===a?r!==Qs&&(e=(0,m.Kn)(e)?e.columnIndex:e)!==(t=(0,m.Kn)(t)?t.columnIndex:t)&&e+1!==t:r===Js&&a!==Qs||a===Js?s&&s.allowGrouping:r!==Qs&&a!==Qs||s&&s.allowHiding)}moveColumn(e,t,r,a){var s,d,n={},o=Cp(this,e,r),l=Cp(this,t,a);if(o>=0){var u=this._columns[o];if(t=(0,m.Kn)(t)?t.columnIndex:t,d=l>=0?this._columns[l].groupIndex:-1,(0,m.$K)(u.groupIndex)&&r===Js&&(d>u.groupIndex&&d--,a!==Js?n.groupIndex=void 0:(s=u.groupIndex,delete u.groupIndex,Rm(this))),a===Js)n.groupIndex=function(i,e,t){var a,r=i.getGroupColumns();if(t>=0)for(a=0;a<r.length;a++)r[a].groupIndex>=t&&r[a].groupIndex++;else for(t=0,a=0;a<r.length;a++)t=Math.max(t,r[a].groupIndex+1);return t}(this,0,d),u.groupIndex=s;else if(t>=0){var c=this._columns[l];n.visibleIndex=!c||u.ownerBand!==c.ownerBand||Fm(this,u)^Fm(this,c)?Em:c.visibleIndex}var f=a!==Qs;u.visible!==f&&(n.visible=f),this.columnOption(u.index,n)}}changeSortOrder(e,t){var r={},a=this.option("sorting"),n=a&&a.mode,l=this._columns[e];("single"===n||"multiple"===n)&&l&&l.allowSorting&&(("single"===n||!t)&&!(0,m.$K)(l.groupIndex)&&(0,j.S6)(this._columns,function(d){d!==e&&this.sortOrder&&((0,m.$K)(this.groupIndex)||delete this.sortOrder,delete this.sortIndex)}),fu(t)?l.sortOrder!==t&&(r.sortOrder=t):"none"===t?l.sortOrder&&(r.sortIndex=void 0,r.sortOrder=void 0):function(d){if("ctrl"===t){if(!("sortOrder"in d)||!("sortIndex"in d))return!1;r.sortOrder=void 0,r.sortIndex=void 0}else r.sortOrder=(0,m.$K)(d.groupIndex)||(0,m.$K)(d.sortIndex)?"desc"===d.sortOrder?"asc":"desc":"asc"}(l)),this.columnOption(l.index,r)}getSortDataSourceParameters(e){var t=[],r=[];return(0,j.S6)(this._columns,function(){(this.dataField||this.selector||this.calculateCellValue)&&(0,m.$K)(this.sortIndex)&&!(0,m.$K)(this.groupIndex)&&(t[this.sortIndex]=this)}),(0,j.S6)(t,function(){if(fu(this&&this.sortOrder)){var n={selector:this.calculateSortValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue,desc:"desc"===this.sortOrder};this.sortingMethod&&(n.compare=this.sortingMethod.bind(this)),r.push(n)}}),r.length>0?r:null}getGroupDataSourceParameters(e){var t=[];return(0,j.S6)(this.getGroupColumns(),function(){var r=this.calculateGroupValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue;if(r){var a={selector:r,desc:"desc"===this.sortOrder,isExpanded:!!this.autoExpandGroup};this.sortingMethod&&(a.compare=this.sortingMethod.bind(this)),t.push(a)}}),t.length>0?t:null}refresh(e){var t=[];return(0,j.S6)(this._columns,function(){var{lookup:r}=this;if(r&&!this.calculateDisplayValue){if(e&&r.valueMap)return;r.update&&t.push(r.update())}}),Y.gx.apply(b.Z,t).done(pu.bind(null,this))}_updateColumnOptions(e,t){var r,a,n,s,o=this._reinitAfterLookupChanges&&(null===(r=this._previousColumns)||void 0===r?void 0:r[t]);e.selector=null!==(a=e.selector)&&void 0!==a?a:u=>e.calculateCellValue(u),e.selector.columnIndex=t,e.selector.originalCallback=o&&null!==(s=null===(n=this._previousColumns[t].selector)||void 0===n?void 0:n.originalCallback)&&void 0!==s?s:e.selector,(0,j.S6)(["calculateSortValue","calculateGroupValue","calculateDisplayValue"],(u,c)=>{var f=e[c];if((0,m.mf)(f))if(f.originalCallback)e[c].context.column=e;else{var p={column:e};e[c]=function(g){return f.call(p.column,g)},e[c].originalCallback=f,e[c].columnIndex=t,e[c].context=p}}),(0,m.HD)(e.calculateDisplayValue)&&(e.displayField=e.calculateDisplayValue,e.calculateDisplayValue=(0,Dt.vb)(e.displayField)),e.calculateDisplayValue&&(e.displayValueMap=e.displayValueMap||{}),Am(e,e.dataType);var{lookup:l}=e;l&&Am(l,l.dataType);var d=l?l.dataType:e.dataType;d&&(e.alignment=e.alignment||function(i,e){switch(i){case"number":return"right";case"boolean":return"center";default:return(0,di.q)(e)}}(d,this.option("rtlEnabled")),e.format=e.format||Te.getFormatByDataType(d),e.customizeText=e.customizeText||Dm(d),e.defaultFilterOperations=e.defaultFilterOperations||!l&&jA[d]||[],(0,m.$K)(e.filterOperations)||Im(e),e.defaultFilterOperation=e.filterOperations&&e.filterOperations[0]||"=",e.showEditorAlways=(0,m.$K)(e.showEditorAlways)?e.showEditorAlways:"boolean"===d&&!e.cellTemplate&&!e.lookup)}updateColumnDataTypes(e){var t=this,r=t.option("dateSerializationFormat"),a=t._getFirstItems(e),n=!1;return(0,j.S6)(t._columns,(s,o)=>{var l,d,u,c,f,{lookup:p}=o;if(Te.isDateType(o.dataType)&&void 0===o.serializationFormat&&(o.serializationFormat=r),p&&Te.isDateType(p.dataType)&&void 0===o.serializationFormat&&(p.serializationFormat=r),o.calculateCellValue&&a.length){if(!o.dataType||p&&!p.dataType){for(l=0;l<a.length;l++)d=o.calculateCellValue(a[l]),o.dataType||(f=mp(d),(u=u||f)&&f&&u!==f&&(u="string")),p&&!p.dataType&&(f=mp(Te.getDisplayValue(o,d,a[l])),(c=c||f)&&f&&c!==f&&(c="string"));(u||c)&&(u&&(o.dataType=u),p&&c&&(p.dataType=c),n=!0)}if(void 0===o.serializationFormat||p&&void 0===p.serializationFormat)for(l=0;l<a.length;l++)d=o.calculateCellValue(a[l],!0),void 0===o.serializationFormat&&(o.serializationFormat=Tm(o.dataType,d)),p&&void 0===p.serializationFormat&&(p.serializationFormat=Tm(p.dataType,p.calculateCellValue(d,!0)))}t._updateColumnOptions(o,s)}),n}_customizeColumns(e){var t=this.option("customizeColumns");t&&(e.some(a=>(0,m.Kn)(a.ownerBand))&&ds(this),t(e),to(this,eo(this,e)))}updateColumns(e,t,r){if(t||this.updateSortingGrouping(e),!e||e.isLoaded()){var a=e?e.sort()||[]:this.getSortDataSourceParameters(),n=e?e.group()||[]:this.getGroupDataSourceParameters(),s=e?.lastLoadOptions().filter;r||this._customizeColumns(this._columns),ds(this);var o=this._columns;return(0,Y.gx)(this.refresh(!0)).always(()=>{this._columns===o&&(this._updateChanges(e,{sorting:a,grouping:n,filtering:s}),yl(this))})}}_updateChanges(e,t){e&&(this.updateColumnDataTypes(e),this._dataSourceApplied=!0),Te.equalSortParameters(t.sorting,this.getSortDataSourceParameters())||wa(this,"sorting"),Te.equalSortParameters(t.grouping,this.getGroupDataSourceParameters())||wa(this,"grouping"),this._dataController&&!Te.equalFilterParameters(t.filtering,this._dataController.getCombinedFilter())&&wa(this,"filtering"),wa(this,"columns")}updateSortingGrouping(e,t){var a,n,r=this,s=function(f,p,g){(0,j.S6)(f,(w,x)=>{if(delete x[g],p)for(var y=0;y<p.length;y++){var{selector:E}=p[y],{isExpanded:V}=p[y];if(E===x.dataField||E===x.name||E===x.selector||E===x.calculateCellValue||E===x.calculateGroupValue||E===x.calculateDisplayValue){x.sortOrder=t?"sortOrder"in x?x.sortOrder:p[y].desc?"desc":"asc":x.sortOrder||(p[y].desc?"desc":"asc"),void 0!==V&&(x.autoExpandGroup=V),x[g]=y;break}}})};if(e){a=Te.normalizeSortingInfo(e.sort());var o=Te.normalizeSortingInfo(e.group()),l=r.getGroupDataSourceParameters(),d=r.getSortDataSourceParameters(),u=!Te.equalSortParameters(o,l,!0),c=!u&&!Te.equalSortParameters(o,l);r._columns.length||((0,j.S6)(o,(f,p)=>{r._columns.push(p.selector)}),(0,j.S6)(a,(f,p)=>{(0,m.mf)(p.selector)||r._columns.push(p.selector)}),to(r,eo(r,r._columns))),(t||!l&&!r._hasUserState)&&(u||c)&&(s(r._columns,o,"groupIndex"),t&&(u&&wa(r,"grouping"),c&&wa(r,"groupExpanding"),n=!0)),(t||!d&&!r._hasUserState)&&!Te.equalSortParameters(a,d)&&(s(r._columns,a,"sortIndex"),t&&(wa(r,"sorting"),n=!0)),n&&yl(r)}}updateFilter(e,t,r,a){if(!Array.isArray(e))return e;if(r=void 0!==(e=(0,N.l)([],e)).columnIndex?e.columnIndex:r,a=void 0!==e.filterValue?e.filterValue:a,(0,m.HD)(e[0])&&"!"!==e[0]){var n=this.columnOption(e[0]);t?(0,uu.Z)().forceIsoDateParsing&&n&&n.serializeValue&&e.length>1&&(e[e.length-1]=n.serializeValue(e[e.length-1],"filter")):n&&n.selector&&(e[0]=n.selector,e[0].columnIndex=n.index)}else(0,m.mf)(e[0])&&(e[0].columnIndex=r,e[0].filterValue=a,e[0].selectedFilterOperation=e.selectedFilterOperation);for(var s=0;s<e.length;s++)e[s]=this.updateFilter(e[s],t,r,a);return e}columnCount(){return this._columns?this._columns.length:0}columnOption(e,t,r,a){var n=this,s=n._columns.concat(n._commandColumns),o=Mm(s,e);if(o){if(1===arguments.length)return(0,N.l)({},o);if((0,m.HD)(t)){if(2===arguments.length)return wp(n,o,t);wp(n,o,t,r,a)}else(0,m.Kn)(t)&&(0,j.S6)(t,(l,d)=>{wp(n,o,l,d,a)});yl(n)}}clearSorting(){var e=this.columnCount();this.beginUpdate();for(var t=0;t<e;t++)this.columnOption(t,"sortOrder",void 0),delete Mm(this._columns,t).sortOrder;this.endUpdate()}clearGrouping(){var e=this.columnCount();this.beginUpdate();for(var t=0;t<e;t++)this.columnOption(t,"groupIndex",void 0);this.endUpdate()}getVisibleIndex(e,t){for(var r=this.getVisibleColumns(t),a=r.length-1;a>=0;a--)if(r[a].index===e)return a;return-1}getVisibleIndexByColumn(e,t){var r=this.getVisibleColumns(t),a=r.filter(n=>n.index===e.index&&n.command===e.command)[0];return r.indexOf(a)}getVisibleColumnIndex(e,t){var r=this.columnOption(e,"index");return this.getVisibleIndex(r,t)}addColumn(e){var t=cu(this,e),r=this._columns.length;this._columns.push(t),t.isBand&&(this._columns=eo(this,this._columns),t=this._columns[r]),t.added=e,ds(this,t),this.updateColumns(this._dataSource),this._checkColumns()}deleteColumn(e){var t=this.columnOption(e);if(t&&t.index>=0){if((i=>{i.forEach(e=>{(0,m.$K)(e.ownerBand)&&(e.ownerBand=i[e.ownerBand])})})(this._columns),this._columns.splice(t.index,1),t.isBand){var r=this.getChildrenByBandColumn(t.index).map(a=>a.index);this._columns=this._columns.filter(a=>r.indexOf(a.index)<0)}ds(this),this.updateColumns(this._dataSource)}}addCommandColumn(e){var t=this._commandColumns.filter(r=>r.command===e.command)[0];t||this._commandColumns.push(t=e)}getUserState(){var r,e=this._columns,t=[];function a(n,s){void 0!==e[r][s]&&(t[r][s]=e[r][s])}for(r=0;r<e.length;r++)t[r]={},(0,j.S6)(hu,a);return t}setName(e){e.name=e.name||e.dataField||e.type}setUserState(e){var t=this._dataSource,r=this.option("stateStoring.ignoreColumnOptionNames");if(e?.forEach(this.setName),!r){r=[];var a=this.getCommonSettings();this.option("columnChooser.enabled")||r.push("visible"),"none"===this.option("sorting.mode")&&r.push("sortIndex","sortOrder"),a.allowGrouping||r.push("groupIndex"),a.allowFixing||r.push("fixed","fixedPosition"),a.allowResizing||r.push("width","visibleWidth");var n=!this.option("filterPanel.visible");!this.option("filterRow.visible")&&n&&r.push("filterValue","selectedFilterOperation"),!this.option("headerFilter.visible")&&n&&r.push("filterValues","filterType")}this._columnsUserState=e,this._ignoreColumnOptionNames=r,this._hasUserState=!!e,wa(this,"filtering"),this.init(!0),t&&(t.sort(this.getSortDataSourceParameters()),t.group(this.getGroupDataSourceParameters()))}_checkColumns(){var e={},t=!1,r=[];this._columns.forEach(a=>{var n,{name:s}=a,o=null===(n=a.columns)||void 0===n?void 0:n.length,l=a.allowEditing&&(a.dataField||a.setCellValue)&&!o;s?(e[s]&&r.push('"'.concat(s,'"')),e[s]=!0):l&&(t=!0)}),r.length&&Rt.Z.log("E1059",r.join(", ")),t&&Rt.Z.log("E1060")}_createCalculatedColumnOptions(e,t){var r={},{dataField:a}=e;if((Array.isArray(e.columns)&&e.columns.length||e.isBand)&&(r.isBand=!0,a=null),a){if((0,m.HD)(a)){var n=(0,Dt.vb)(a);r={caption:(0,ur.GK)(a),calculateCellValue(s,o){var l=n(s);return this.deserializeValue&&!o?this.deserializeValue(l):l},setCellValue:h2,parseValue(s){var o,l;return"number"===this.dataType?(0,m.HD)(s)&&this.format?o=function(i,e){var t=qt.Z.parse(i);if((0,m.kE)(t)){var r=qt.Z.format(t,e),a=qt.Z.format(t,"decimal");if(r===i||a===i)return t}}(s.trim(),this.format):(0,m.$K)(s)&&(0,m.kE)(s)&&(o=Number(s)):"boolean"===this.dataType?s===this.trueText?o=!0:s===this.falseText&&(o=!1):Te.isDateType(this.dataType)?(l=vt.Z.parse(s,this.format))&&(o=l):o=s,o}}}r.allowFiltering=!0}else r.allowFiltering=!!e.calculateFilterExpression;return r.calculateFilterExpression=function(){return os.defaultCalculateFilterExpression.apply(this,arguments)},r.defaultFilterOperation="=",r.createFilterExpression=function(s,o){var l;return this.calculateFilterExpression&&(l=this.calculateFilterExpression.apply(this,arguments)),(0,m.mf)(l)&&(l=[l,"=",!0]),l&&(l.columnIndex=this.index,l.filterValue=s,l.selectedFilterOperation=o),l},(!a||!(0,m.HD)(a))&&(0,N.l)(!0,r,{allowSorting:!1,allowGrouping:!1,calculateCellValue:()=>null}),t&&(r.allowFixing=!1),e.dataType&&(r.userDataType=e.dataType),e.selectedFilterOperation&&!("defaultSelectedFilterOperation"in r)&&(r.defaultSelectedFilterOperation=e.selectedFilterOperation),e.lookup&&(r.lookup={calculateCellValue(s,o){return this.valueExpr&&(s=this.valueMap&&this.valueMap[s]),this.deserializeValue&&!o?this.deserializeValue(s):s},updateValueMap(){if(this.valueMap={},this.items)for(var s=(0,Dt.vb)(this.valueExpr),o=(0,Dt.vb)(this.displayExpr),l=0;l<this.items.length;l++){var d=this.items[l],u=o(d);this.valueMap[s(d)]=u,this.dataType=this.dataType||mp(u)}},update(){var s=this,{dataSource:o}=s;if(o)if((0,m.mf)(o)&&!Ur.default.isWrapped(o)&&(o=o({})),(0,m.PO)(o)||o instanceof WA.Z||Array.isArray(o)){if(s.valueExpr){var l=(0,Cl.aN)(o);return l.paginate=!1,(o=new xn.o(l)).load().done(d=>{s.items=d,s.updateValueMap&&s.updateValueMap()})}}else Rt.Z.log("E1016");else s.updateValueMap&&s.updateValueMap()}}),r.resizedCallbacks=(0,ri.Z)(),e.resized&&r.resizedCallbacks.add(e.resized.bind(e)),(0,j.S6)(r,s=>{if((0,m.mf)(r[s])&&0!==s.indexOf("default")){var o="default".concat(s.charAt(0).toUpperCase()).concat(s.substr(1));r[o]=r[s]}}),r}getRowCount(){return this._rowCount=this._rowCount||function(i){var e=1,t=i.getBandColumnsCache(),{columnParentByIndex:r}=t;return i._columns.forEach(a=>{var n=ls(a.index,r),s=n.filter(o=>!o.visible);a.visible&&!s.length&&(e=Math.max(e,n.length+1))}),e}(this),this._rowCount}getRowIndex(e,t){var r=this._columns[e],a=this.getBandColumnsCache();return r&&(t||r.visible&&!r.command&&!(0,m.$K)(r.groupIndex))?ls(e,a.columnParentByIndex).length:0}getChildrenByBandColumn(e,t){var r=this.getBandColumnsCache(),a=XA(e,r.columnChildrenByIndex,!t);return t?a.filter(n=>n.visible&&!n.command).sort((n,s)=>n.visibleIndex-s.visibleIndex):a}isParentBandColumn(e,t){var r=!1,a=this._columns[e],n=this.getBandColumnsCache(),s=a&&ls(e,n.columnParentByIndex);return s&&(0,j.S6)(s,(o,l)=>{if(l.index===t)return r=!0,!1}),r}isParentColumnVisible(e){var t=!0,r=this.getBandColumnsCache(),a=e>=0&&ls(e,r.columnParentByIndex);return a&&(0,j.S6)(a,(n,s)=>t=t&&s.visible),t}getColumnId(e){return e.command&&e.type===En?Sp(this,e)?"type:".concat(e.type):"command:".concat(e.command):e.index}getCustomizeTextByDataType(e){return Dm(e)}getHeaderContentAlignment(e){return this.option("rtlEnabled")?"left"===e?"right":"left":e}}}};He.registerModule("columns",{defaultOptions:()=>(0,N.l)(!0,{},Hm.defaultOptions(),{commonColumnSettings:{allowExporting:!0}}),controllers:Hm.controllers});var Zm=be(5578),_u=be(3776),C2=be(6659),b2=be(3741),zm="_dataSourceOptions",Wm="_dataSourceChangedHandler",$m="_dataSourceLoadErrorHandler",Km="_dataSourceLoadingChangedHandler",Gm="_dataSourceFromUrlLoadMode",Um="_getSpecificDataSourceOption",jm="_normalizeDataSource",w2=i=>class extends i{postCtor(){this.on("disposing",()=>{this._disposeDataSource()})}_refreshDataSource(){this._initDataSource(),this._loadDataSource()}_initDataSource(){var t,r,e=Um in this?this[Um]():this.option("dataSource");this._disposeDataSource(),e&&(e instanceof xn.o?(this._isSharedDataSource=!0,this._dataSource=e):(t=zm in this?this[zm]():{},r=this._dataSourceType?this._dataSourceType():xn.o,e=(0,Cl.aN)(e,{fromUrlLoadMode:Gm in this&&this[Gm]()}),this._dataSource=new r((0,N.l)(!0,{},t,e))),jm in this&&(this._dataSource=this[jm](this._dataSource)),this._addDataSourceHandlers(),this._initDataController())}_initDataController(){var e,t=null===(e=this.option)||void 0===e?void 0:e.call(this,"_dataController");this._dataController=t||new b2.Z(this._dataSource)}_addDataSourceHandlers(){Wm in this&&this._addDataSourceChangeHandler(),$m in this&&this._addDataSourceLoadErrorHandler(),Km in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()}_addReadyWatcher(){this.readyWatcher=function(e){this._ready&&this._ready(!e)}.bind(this),this._dataSource.on("loadingChanged",this.readyWatcher)}_addDataSourceChangeHandler(){var e=this._dataSource;this._proxiedDataSourceChangedHandler=function(t){this[Wm](e.items(),t)}.bind(this),e.on("changed",this._proxiedDataSourceChangedHandler)}_addDataSourceLoadErrorHandler(){this._proxiedDataSourceLoadErrorHandler=this[$m].bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)}_addDataSourceLoadingChangedHandler(){this._proxiedDataSourceLoadingChangedHandler=this[Km].bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)}_loadDataSource(){var e=this._dataSource;e&&(e.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():e.load())}_loadSingle(e,t){return e="this"===e?this._dataSource.key()||"this":e,this._dataSource.loadSingle(e,t)}_isLastPage(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize}_isDataSourceLoading(){return this._dataSource&&this._dataSource.isLoading()}_disposeDataSource(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler),this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)}getDataSource(){return this._dataSource||null}},qm=function(i,e,t){var r=i._dataSource;if(r){if(void 0!==t){if(i._getPagingOptionValue(e)!==t){"pageSize"===e&&r.pageIndex(0),r[e](t),i._skipProcessingPagingChange=!0,i.option("paging.".concat(e),t),i._skipProcessingPagingChange=!1;var n=r.pageIndex();return i._isPaging="pageIndex"===e,r["pageIndex"===e?"load":"reload"]().done(()=>{i._isPaging=!1,i.pageChanged.fire(n)})}return(0,Y.BH)().resolve().promise()}return r[e]()}return 0};class Ym extends(w2(Nt.Controller)){init(){this._items=[],this._cachedProcessedItems=null,this._columnsController=this.getController("columns"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._editingController=this.getController("editing"),this._editorFactoryController=this.getController("editorFactory"),this._errorHandlingController=this.getController("errorHandling"),this._filterSyncController=this.getController("filterSync"),this._applyFilterController=this.getController("applyFilter"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._focusController=this.getController("focus"),this._headerFilterController=this.getController("headerFilter"),this._selectionController=this.getController("selection"),this._stateStoringController=this.getController("stateStoring"),this._validatingController=this.getController("validating"),this._adaptiveExpandedKey=void 0,this._isPaging=!1,this._currentOperationTypes=null,this._dataChangedHandler=e=>{this._currentOperationTypes=this._dataSource.operationTypes(),this._handleDataChanged(e),this._currentOperationTypes=null},this._columnsChangedHandler=this._handleColumnsChanged.bind(this),this._loadingChangedHandler=this._handleLoadingChanged.bind(this),this._loadErrorHandler=this._handleLoadError.bind(this),this._customizeStoreLoadOptionsHandler=this._handleCustomizeStoreLoadOptions.bind(this),this._changingHandler=this._handleChanging.bind(this),this._dataPushedHandler=this._handleDataPushed.bind(this),this._columnsController.columnsChanged.add(this._columnsChangedHandler),this._isLoading=!1,this._isCustomLoading=!1,this._repaintChangesOnly=void 0,this._changes=[],this.createAction("onDataErrorOccurred"),this.dataErrorOccurred.add(e=>this.executeAction("onDataErrorOccurred",{error:e})),this._refreshDataSource(),this.postCtor()}_getPagingOptionValue(e){return this._dataSource[e]()}callbackNames(){return["changed","loadingChanged","dataErrorOccurred","pageChanged","dataSourceChanged","pushed"]}callbackFlags(e){if("dataErrorOccurred"===e)return{stopOnFalse:!0}}publicMethods(){return["_disposeDataSource","beginCustomLoading","byKey","clearFilter","endCustomLoading","filter","getCombinedFilter","getDataByKeys","getDataSource","getKeyByRowIndex","getRowIndexByKey","getVisibleRows","keyOf","pageCount","pageIndex","pageSize","refresh","repaintRows","totalCount"]}reset(){this._columnsController.reset(),this._items=[],this._refreshDataSource()}_handleDataSourceChange(e){if(e.value===e.previousValue||this.option("columns")&&Array.isArray(e.value)&&Array.isArray(e.previousValue)){if(e.value!==e.previousValue){var r=this.store();r&&(r._array=e.value)}return this.needToRefreshOnDataSourceChange(e)&&this.refresh(this.option("repaintChangesOnly")),!0}return!1}needToRefreshOnDataSourceChange(e){return!0}optionChanged(e){var r,a,t=this;function n(){e.handled=!0}if("dataSource"===e.name&&e.name===e.fullName&&this._handleDataSourceChange(e))n();else switch(e.name){case"cacheEnabled":case"repaintChangesOnly":case"highlightChanges":case"loadingTimeout":n();break;case"remoteOperations":case"keyExpr":case"dataSource":case"scrolling":n(),t.reset();break;case"paging":if((r=t.dataSource())&&(a=t._setPagingOptions(r))){var s=r.pageIndex();this._isPaging=a.isPageIndexChanged,r.load().done(()=>{this._isPaging=!1,t.pageChanged.fire(s)})}n();break;case"rtlEnabled":t.reset();break;case"columns":(r=t.dataSource())&&r.isLoading()&&e.name===e.fullName&&(this._useSortingGroupingFromColumns=!0,r.load());break;default:super.optionChanged(e)}}isReady(){return!this._isLoading}getDataSource(){return this._dataSource&&this._dataSource._dataSource}getCombinedFilter(e){return this.combinedFilter(void 0,e)}combinedFilter(e,t){if(!this._dataSource)return e;var r=e??this._dataSource.filter();if(this._columnsController.isDataSourceApplied()||this._columnsController.isAllDataTypesDefined()){var n=this._calculateAdditionalFilter();r=n?Te.combineFilters([n,r]):r}var s=this._dataSource.remoteOperations().filtering||t;return this._columnsController.updateFilter(r,s)}waitReady(){return this._updateLockCount?(this._readyDeferred=new Y.BH,this._readyDeferred):(0,Y.gx)()}_endUpdateCore(){var e=this._changes;if(e.length){this._changes=[];var t=e.every(r=>r.repaintChangesOnly);this.updateItems(1===e.length?e[0]:{repaintChangesOnly:t})}this._readyDeferred&&(this._readyDeferred.resolve(),this._readyDeferred=null)}_handleCustomizeStoreLoadOptions(e){var t,r=this._columnsController,a=this._dataSource,{storeLoadOptions:n}=e;e.isCustomLoading&&!n.isLoadingAll||(n.filter=this.combinedFilter(n.filter),1===(null===(t=n.filter)||void 0===t?void 0:t.length)&&"!"===n.filter[0]&&(e.data=[],e.extra=e.extra||{},e.extra.totalCount=0),r.isDataSourceApplied()||r.updateColumnDataTypes(a),this._columnsUpdating=!0,r.updateSortingGrouping(a,!this._useSortingGroupingFromColumns),this._columnsUpdating=!1,n.sort=r.getSortDataSourceParameters(),n.group=r.getGroupDataSourceParameters(),a.sort(n.sort),a.group(n.group),n.sort=r.getSortDataSourceParameters(!a.remoteOperations().sorting),e.group=r.getGroupDataSourceParameters(!a.remoteOperations().grouping))}_handleColumnsChanged(e){var n,s,o,t=this,{changeTypes:r}=e,{optionNames:a}=e;if(r.sorting||r.grouping)t._dataSource&&!t._columnsUpdating&&(t._dataSource.group(t._columnsController.getGroupDataSourceParameters()),t._dataSource.sort(t._columnsController.getSortDataSourceParameters()),t.reload());else if(r.columns&&(s=t._columnsController.columnOption(e.columnIndex,"filterValues"),(a.filterValues||a.filterType&&Array.isArray(s)||a.filterValue||a.selectedFilterOperation||a.allowFiltering)&&(n=t._columnsController.columnOption(e.columnIndex,"filterValue"),(Array.isArray(s)||void 0===e.columnIndex||(0,m.$K)(n)||!a.selectedFilterOperation||a.filterValue)&&(t._applyFilter(),o=!0)),!t._needApplyFilter&&!Te.checkChanges(a,["width","visibleWidth","filterValue","bufferedFilterValue","selectedFilterOperation","filterValues","filterType"])&&t._columnsController.columnsChanged.add(function d(u){var c;t._columnsController.columnsChanged.remove(d),t.updateItems({repaintChangesOnly:!1,virtualColumnsScrolling:null===(c=u?.changeTypes)||void 0===c?void 0:c.virtualColumnsScrolling})}),(0,m.$K)(a.visible))){var l=t._columnsController.columnOption(e.columnIndex);l&&((0,m.$K)(l.filterValue)||(0,m.$K)(l.filterValues))&&(t._applyFilter(),o=!0)}!o&&r.filtering&&!this._needApplyFilter&&t.reload()}_handleDataChanged(e){var t=this,r=t._dataSource,a=t._columnsController,n=!1;this._useSortingGroupingFromColumns=!1,r&&!t._isDataSourceApplying&&(t._isDataSourceApplying=!0,(0,Y.gx)(t._columnsController.applyDataSource(r)).done(()=>{t._isLoading&&t._handleLoadingChanged(!1),n&&e&&e.isDelayed&&(e.isDelayed=!1),t._isDataSourceApplying=!1;var o,s=t._needApplyFilter;t._needApplyFilter=!1,s&&!t._isAllDataTypesDefined&&(o=t._calculateAdditionalFilter())&&o.length?(Rt.Z.log("W1005",t.component.NAME),t._applyFilter()):t.updateItems(e,!0)}).fail(()=>{t._isDataSourceApplying=!1}),t._isDataSourceApplying&&(n=!0,t._handleLoadingChanged(!0)),t._needApplyFilter=!t._columnsController.isDataSourceApplied(),t._isAllDataTypesDefined=a.isAllDataTypesDefined())}_handleLoadingChanged(e){this._isLoading=e,this._fireLoadingChanged()}_handleLoadError(e){this.dataErrorOccurred.fire(e)}_handleDataPushed(e){this.pushed.fire(e)}fireError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.dataErrorOccurred.fire(Rt.Z.Error.apply(Rt.Z,t))}_setPagingOptions(e){var t=this.option("paging.pageIndex"),r=this.option("paging.pageSize"),a=this.option("paging.enabled"),n=this.option("scrolling.mode"),s="infinite"===n,l=a||"virtual"===n||s,d=!1,u=!1,c=!1;return e.requireTotalCount(!s),void 0!==a&&e.paginate()!==l&&(e.paginate(l),d=!0),void 0!==r&&e.pageSize()!==r&&(e.pageSize(r),u=!0),void 0!==t&&e.pageIndex()!==t&&(e.pageIndex(t),c=!0),!!(d||u||c)&&{isPaginateChanged:d,isPageSizeChanged:u,isPageIndexChanged:c}}_getSpecificDataSourceOption(){var e=this.option("dataSource");return Array.isArray(e)?{store:{type:"array",data:e,key:this.option("keyExpr")}}:e}_initDataSource(){var e=this._dataSource;super._initDataSource();var t=this._dataSource;if(this._useSortingGroupingFromColumns=!0,this._cachedProcessedItems=null,t){var r=this._setPagingOptions(t);this._isPaging=r?.isPageIndexChanged,this.setDataSource(t)}else e&&this.updateItems()}_loadDataSource(){var e=this,t=e._dataSource,r=new Y.BH;return(0,Y.gx)(this._columnsController.refresh(!0)).always(()=>{t?t.load().done(function(){e._isPaging=!1,r.resolve.apply(r,arguments)}).fail(r.reject):r.resolve()}),r.promise()}_beforeProcessItems(e){return e.slice(0)}getRowIndexDelta(){return 0}getDataIndex(e){var t=this._items,r="append"===e.changeType&&t.length>0?t[t.length-1]:null;return(0,m.$K)(r?.dataIndex)?r.dataIndex+1:0}_processItems(e,t){var r=this,a=r.getRowIndexDelta(),{changeType:n}=t,l={visibleColumns:r._columnsController.getVisibleColumns(null,"loadingAll"===n),dataIndex:this.getDataIndex(t)},d=[];return(0,j.S6)(e,(u,c)=>{(0,m.$K)(c)&&(l.rowIndex=u-a,c=r._processItem(c,l),d.push(c))}),d}_processItem(e,t){return e=this._generateDataItem(e,t),(e=this._processDataItem(e,t)).dataIndex=t.dataIndex++,e}_generateDataItem(e,t){return{rowType:"data",data:e,key:this.keyOf(e)}}_processDataItem(e,t){return e.values=this.generateDataValues(e.data,t.visibleColumns),e}generateDataValues(e,t,r){for(var n,a=[],s=0;s<t.length;s++){var o=t[s];n=r?void 0:null,o.command||(o.calculateCellValue?n=o.calculateCellValue(e):o.dataField&&(n=e[o.dataField])),a.push(n)}return a}_applyChange(e){"update"===e.changeType?this._applyChangeUpdate(e):this.items().length&&e.repaintChangesOnly&&"refresh"===e.changeType?this._applyChangesOnly(e):"refresh"===e.changeType&&this._applyChangeFull(e)}_applyChangeFull(e){this._items=e.items.slice(0)}_getRowIndices(e){var t=e.rowIndices.slice(0),r=this.getRowIndexDelta();t.sort((s,o)=>s-o);for(var a=0;a<t.length;a++){var n=t[a];e.allowInvisibleRowIndices&&(n+=r),n<0&&(t.splice(a,1),a--)}return t}_applyChangeUpdate(e){var d,t=this,{items:r}=e,a=t._getRowIndices(e),n=t.getRowIndexDelta(),s=t.option("repaintChangesOnly"),o=-1,l=0;e.items=[],e.rowIndices=[],e.columnIndices=[],e.changeTypes=[];var u=function(c,f,p){var g=c&&f&&(0,J.bY)(c.key,f.key);return g&&p&&(g=c.rowType===f.rowType&&("detail"!==f.rowType||c.isEditing===f.isEditing)),g};(0,j.S6)(a,(c,f)=>{var p;if(o!==(f+=l+n)){o=f;var g=t._items[f],w=t._items[f+1],x=r[f],y=r[f+1],E=u(g,w)||u(x,y);if(x&&(x.rowIndex=f,e.items.push(x)),g&&x&&u(g,x,E))d="update",t._items[f]=x,g.visible!==x.visible?e.items.splice(-1,1,{visible:x.visible}):s&&!e.isFullUpdate&&(p=t._partialUpdateRow(g,x,f-n));else if(x&&!g||y&&u(g,y,E))d="insert",t._items.splice(f,0,x),l++;else if(g&&!x||w&&u(x,w,E))d="remove",t._items.splice(f,1),l--,o=-1;else{if(!x)return;d="update",t._items[f]=x}e.rowIndices.push(f-n),e.changeTypes.push(d),e.columnIndices.push(p)}})}_isCellChanged(e,t,r,a,n){if(JSON.stringify(e.values[a])!==JSON.stringify(t.values[a]))return!0;function s(o,l){return!!o.modifiedValues&&void 0!==o.modifiedValues[l]}return s(e,a)!==s(t,a)}_getChangedColumnIndices(e,t,r,a){var n;if(e.rowType===t.rowType){if("group"!==t.rowType&&"groupFooter"!==t.rowType&&(n=[],"detail"!==t.rowType))for(var s=0;s<e.values.length;s++)this._isCellChanged(e,t,r,s,a)&&n.push(s);"group"===t.rowType&&e.cells&&t.isExpanded===e.isExpanded&&t.data.isContinuation===e.data.isContinuation&&t.data.isContinuationOnNextPage===e.data.isContinuationOnNextPage&&(n=e.cells.map((l,d)=>{var u;return"groupExpand"!==(null===(u=l.column)||void 0===u?void 0:u.type)?d:-1}).filter(l=>l>=0))}return n}_partialUpdateRow(e,t,r,a){var n=this._getChangedColumnIndices(e,t,r,a);return n?.length&&this.option("dataRowTemplate")&&(n=void 0),n&&(e.cells&&e.cells.forEach((s,o)=>{!(n.indexOf(o)>=0)&&s&&s.update&&s.update(t)}),t.update=e.update,t.watch=e.watch,t.cells=e.cells,a&&(t.oldValues=e.values),e.update&&e.update(t)),n}_isItemEquals(e,t){var r,a,n,s;if(JSON.stringify(e.values)!==JSON.stringify(t.values)||["modified","isNewRow","removed","isEditing"].some(u=>e[u]!==t[u]))return!1;if("group"===e.rowType||"groupFooter"===e.rowType){var o=e.isExpanded===t.isExpanded,l=JSON.stringify(e.summaryCells)===JSON.stringify(t.summaryCells),d=(null===(r=e.data)||void 0===r?void 0:r.isContinuation)===(null===(a=t.data)||void 0===a?void 0:a.isContinuation)&&(null===(n=e.data)||void 0===n?void 0:n.isContinuationOnNextPage)===(null===(s=t.data)||void 0===s?void 0:s.isContinuationOnNextPage);if(!o||!l||!d)return!1}return!0}_applyChangesOnly(e){var t,r=[],a=[],n=[],s=[],o={},l=null===(t=e?.isLiveUpdate)||void 0===t||t;function d(p){if(p)return"".concat(p.rowType,",").concat(JSON.stringify(p.key))}var u=this._items,c=u.slice();e.items.forEach((p,g)=>{var w=d(p);o[w]=g,p.rowIndex=g});var f=(0,Zm.h)(c,e.items,d,(p,g)=>!!this._isItemEquals(p,g)&&(p.cells&&(p.update&&p.update(g),p.cells.forEach(w=>{w&&w.update&&w.update(g,!0)})),!0));f?(f.forEach(p=>{switch(p.type){case"update":var{index:g}=p,w=p.data,{oldItem:x}=p,y=this._partialUpdateRow(x,w,g,l);r.push(g),n.push("update"),s.push(w),u[g]=w,a.push(y);break;case"insert":r.push(p.index),n.push("insert"),s.push(p.data),a.push(void 0),u.splice(p.index,0,p.data);break;case"remove":r.push(p.index),n.push("remove"),u.splice(p.index,1),s.push(p.oldItem),a.push(void 0)}}),e.repaintChangesOnly=!0,e.changeType="update",e.rowIndices=r,e.columnIndices=a,e.changeTypes=n,e.items=s,c.length&&(e.isLiveUpdate=!0),this._correctRowIndices(p=>{var g=this._rowIndexOffset||0,w=this.getRowIndexOffset(),y=d(c[p-g]),E=o[y];return E>=0?E+w-p:0})):this._applyChangeFull(e)}_correctRowIndices(e){}_afterProcessItems(e,t){return e}_updateItemsCore(e){var t,r=this._dataSource;if(e.changeType=e.changeType||"refresh",r){var n=this._cachedProcessedItems;e.useProcessedItemsCache&&n?t=n:(t=e.items||r.items(),t=this._beforeProcessItems(t),t=this._processItems(t,e),this._cachedProcessedItems=t),t=this._afterProcessItems(t,e),e.items=t;var s=this._items.length===t.length&&this._items;this._applyChange(e);var o=this.getRowIndexDelta();(0,j.S6)(this._items,(l,d)=>{var u;d.rowIndex=l-o,s&&(d.cells=null!==(u=s[l].cells)&&void 0!==u?u:[]);var c=t[l];c&&(d.loadIndex=c.loadIndex)}),this._rowIndexOffset=this.getRowIndexOffset()}else this._items=[]}_handleChanging(e){var t=this.getVisibleRows();this.dataSource()&&e.changes.forEach(a=>{if("insert"===a.type&&a.index>=0){for(var n=0,s=0;s<a.index;s++){var o=t[s];o&&("data"===o.rowType||"group"===o.rowType)&&n++}a.index=n}})}updateItems(e,t){var r;if(e=e||{},void 0!==this._repaintChangesOnly)e.repaintChangesOnly=null!==(r=e.repaintChangesOnly)&&void 0!==r?r:this._repaintChangesOnly,e.needUpdateDimensions=e.needUpdateDimensions||this._needUpdateDimensions;else if(e.changes)e.repaintChangesOnly=this.option("repaintChangesOnly");else if(t){var a=this.dataSource().operationTypes();e.repaintChangesOnly=a&&!a.grouping&&!a.filtering&&this.option("repaintChangesOnly"),e.isDataChanged=!0,a&&(a.reload||a.paging||a.groupExpanding)&&(e.needUpdateDimensions=!0)}!this._updateLockCount||e.cancel?(this._updateItemsCore(e),!e.cancel&&this._fireChanged(e)):this._changes.push(e)}loadingOperationTypes(){var e=this.dataSource();return e&&e.loadingOperationTypes()||{}}_fireChanged(e){this._currentOperationTypes&&(e.operationTypes=this._currentOperationTypes,this._currentOperationTypes=null),(0,J.g0)(()=>{this.changed.fire(e)})}isLoading(){return this._isLoading||this._isCustomLoading}_fireLoadingChanged(){this.loadingChanged.fire(this.isLoading(),this._loadingText)}_calculateAdditionalFilter(){return null}_applyFilter(){var e=this._dataSource;return e?(e.pageIndex(0),this._isFilterApplying=!0,this.reload().done(()=>{this._isFilterApplying&&this.pageChanged.fire()})):(new Y.BH).resolve()}resetFilterApplying(){this._isFilterApplying=!1}filter(e){var t=this._dataSource,r=t&&t.filter();if(0===arguments.length)return r;e=arguments.length>1?Array.prototype.slice.call(arguments,0):e,!Te.equalFilterParameters(r,e)&&(t&&t.filter(e),this._applyFilter())}clearFilter(e){var t=this._columnsController,r=function(a){for(var n=t.columnCount(),s=0;s<n;s++)t.columnOption(s,a,void 0)};if(this.component.beginUpdate(),arguments.length>0)switch(e){case"dataSource":this.filter(null);break;case"search":this.searchByText("");break;case"header":r("filterValues");break;case"row":r("filterValue")}else this.filter(null),this.searchByText(""),r("filterValue"),r("bufferedFilterValue"),r("filterValues");this.component.endUpdate()}_fireDataSourceChanged(){var e=this;e.changed.add(function t(){e.changed.remove(t),e.dataSourceChanged.fire()})}_getDataSourceAdapter(){}_createDataSourceAdapterCore(e,t){var a=this._getDataSourceAdapter().create(this.component);return a.init(e,t),a}isLocalStore(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store())instanceof _u.Z}isCustomStore(e){return(e=e||this.store())instanceof C2.Z}_createDataSourceAdapter(e){var t=this.option("remoteOperations"),r=e.store(),a={filtering:!0,sorting:!0,paging:!0,grouping:!0,summary:!0};return(0,m.Kn)(t)&&t.groupPaging&&(t=(0,N.l)({},a,t)),"auto"===t&&(t=this.isLocalStore(r)||this.isCustomStore(r)?{}:{filtering:!0,sorting:!0,paging:!0}),!0===t&&(t=a),this._createDataSourceAdapterCore(e,t)}setDataSource(e){var t=this._dataSource;!e&&t&&(t.cancelAll(),t.changed.remove(this._dataChangedHandler),t.loadingChanged.remove(this._loadingChangedHandler),t.loadError.remove(this._loadErrorHandler),t.customizeStoreLoadOptions.remove(this._customizeStoreLoadOptionsHandler),t.changing.remove(this._changingHandler),t.pushed.remove(this._dataPushedHandler),t.dispose(this._isSharedDataSource)),e&&(e=this._createDataSourceAdapter(e)),this._dataSource=e,e&&(this._fireDataSourceChanged(),this._isLoading=!e.isLoaded(),this._needApplyFilter=!0,this._isAllDataTypesDefined=this._columnsController.isAllDataTypesDefined(),e.changed.add(this._dataChangedHandler),e.loadingChanged.add(this._loadingChangedHandler),e.loadError.add(this._loadErrorHandler),e.customizeStoreLoadOptions.add(this._customizeStoreLoadOptionsHandler),e.changing.add(this._changingHandler),e.pushed.add(this._dataPushedHandler))}items(e){return this._items}isEmpty(){return!this.items().length}pageCount(){return this._dataSource?this._dataSource.pageCount():1}dataSource(){return this._dataSource}store(){var e=this._dataSource;return e&&e.store()}loadAll(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this,a=new Y.BH,n=r._dataSource;if(n)if(e){var s={data:e,isCustomLoading:!0,storeLoadOptions:{isLoadingAll:!0},loadOptions:{filter:t?null:r.getCombinedFilter(),group:n.group(),sort:n.sort()}};n._handleDataLoaded(s),(0,Y.gx)(s.data).done(l=>{var d;l=r._beforeProcessItems(l),a.resolve(r._processItems(l,{changeType:"loadingAll"}),null===(d=s.extra)||void 0===d?void 0:d.summary)}).fail(a.reject)}else if(n.isLoading())a.reject();else{var o=(0,N.l)({},n.loadOptions(),{isLoadingAll:!0,requireTotalCount:!1});n.load(o).done((l,d)=>{l=r._beforeProcessItems(l),l=r._processItems(l,{changeType:"loadingAll"}),a.resolve(l,d&&d.summary)}).fail(a.reject)}else a.resolve([]);return a}getKeyByRowIndex(e,t){var r=this.items(t)[e];if(r)return r.key}getRowIndexByKey(e,t){return Te.getIndexByKey(e,this.items(t))}keyOf(e){var t=this.store();if(t)return t.keyOf(e)}byKey(e){var a,t=this.store(),r=this.getRowIndexByKey(e);if(t)return r>=0&&(a=(new Y.BH).resolve(this.items()[r].data)),a||t.byKey(e)}key(){var e=this.store();if(e)return e.key()}getRowIndexOffset(e){return 0}getDataByKeys(e){var t=this,r=new Y.BH,a=[],n=[];return(0,j.S6)(e,(s,o)=>{a.push(t.byKey(o).done(l=>{n[s]=l}))}),Y.gx.apply(b.Z,a).always(()=>{r.resolve(n)}),r}pageIndex(e){return qm(this,"pageIndex",e)}pageSize(e){return qm(this,"pageSize",e)}beginCustomLoading(e){this._isCustomLoading=!0,this._loadingText=e||"",this._fireLoadingChanged()}endCustomLoading(){this._isCustomLoading=!1,this._loadingText=void 0,this._fireLoadingChanged()}refresh(e){!0===e?e={reload:!0,changesOnly:!0}:e||(e={lookup:!0,selection:!0,reload:!0});var t=this,r=t.getDataSource(),{changesOnly:a}=e,n=new Y.BH,s=function(){t._repaintChangesOnly=!!a};return(0,Y.gx)(!e.lookup||t._columnsController.refresh()).always(()=>{e.load||e.reload?(r&&r.on("customizeLoadResult",s),(0,Y.gx)(t.reload(e.reload,a)).always(()=>{r&&r.off("customizeLoadResult",s),t._repaintChangesOnly=void 0}).done(n.resolve).fail(n.reject)):(t.updateItems({repaintChangesOnly:e.changesOnly}),n.resolve())}),n.promise()}getVisibleRows(){return this.items()}_disposeDataSource(){this._dataSource&&this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher),this.setDataSource(null)}dispose(){this._disposeDataSource(),super.dispose()}repaintRows(e,t){((e=Array.isArray(e)?e:[e]).length>1||(0,m.$K)(e[0]))&&this.updateItems({changeType:"update",rowIndices:e,isFullUpdate:!t})}skipProcessingPagingChange(e){return this._skipProcessingPagingChange&&("paging.pageIndex"===e||"paging.pageSize"===e)}getUserState(){return{searchText:this.option("searchPanel.text"),pageIndex:this.pageIndex(),pageSize:this.pageSize()}}getCachedStoreData(){return this._dataSource&&this._dataSource.getCachedStoreData()}isLastPageLoaded(){return this.pageIndex()===this.pageCount()-1}load(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.load()}reload(e,t){var r;return null===(r=this._dataSource)||void 0===r?void 0:r.reload(e,t)}push(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.push(...arguments)}itemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.itemsCount():0}totalItemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalItemsCount():0}hasKnownLastPage(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.hasKnownLastPage())}isLoaded(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.isLoaded())}totalCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalCount():0}hasLoadOperation(){var e,t,r=null!==(t=null===(e=this._dataSource)||void 0===e?void 0:e.operationTypes())&&void 0!==t?t:{};return Object.keys(r).some(a=>r[a])}}var S2={defaultOptions:()=>({loadingTimeout:0,dataSource:null,cacheEnabled:!0,repaintChangesOnly:!1,highlightChanges:!1,onDataErrorOccurred:null,remoteOperations:"auto",paging:{enabled:!0,pageSize:void 0,pageIndex:void 0}}),controllers:{data:Ym}},ar=be(5076),yp=function i(e,t){if(e&&(e=e.slice(0),t))for(var r=0;r<e.length;r++)e[r]=(0,N.l)({key:e[r].key},e[r]),e[r].items=i(e[r].items,t-1);return e},Xm=function(i,e,t){var r={reload:!0,fullReload:!0};return e&&((r={sorting:!Te.equalSortParameters(i.sort,e.sort),grouping:!Te.equalSortParameters(i.group,e.group,!0),groupExpanding:!Te.equalSortParameters(i.group,e.group)||e.groupExpand,filtering:!Te.equalFilterParameters(i.filter,e.filter),pageIndex:i.pageIndex!==e.pageIndex,skip:i.skip!==e.skip,take:i.take!==e.take,pageSize:i.pageSize!==e.pageSize,fullReload:t,reload:!1,paging:!1}).reload=t||r.sorting||r.grouping||r.filtering,r.paging=r.pageIndex||r.pageSize||r.take),r},Jm=function(i,e){var t=Te.normalizeSortingInfo(i.group||i.storeLoadOptions.group||i.loadOptions.group).length,r=[];if(Qm(r,i,t))return r;e&&I2(r,i,t)},Qm=function(i,e,t,r){var a,n,s,o,l,{storeLoadOptions:d}=e,u=null!==(n=null!==(a=e.take)&&void 0!==a?a:d.take)&&void 0!==n?n:0,c=null===(s=e.cachedData)||void 0===s?void 0:s.items;if(u&&c){for(var f=null!==(l=null!==(o=e.skip)&&void 0!==o?o:d.skip)&&void 0!==l?l:0,p=0;p<u;p+=1){var g=r?u-1-p:p,w=g+f,x=c[w];if(void 0===x&&w in c)return!0;var y=x2(e,x,t,g,u);if(!y)return!1;i.push(y)}return!0}return!1},x2=function(i,e,t,r,a){return t&&e?E2(e,t,0===r&&i.skips||[],r===a-1&&i.takes||[]):e},E2=function i(e,t,r,a){if(t&&e){var n=(0,ye.Z)({},e),s=r[0]||0,o=a[0],{items:l}=e;if(l){if(void 0===o&&!l[s])return;n.items=[],r.length&&(n.isContinuation=!0),o&&(n.isContinuationOnNextPage=e.count>o);for(var d=0;void 0===o?l[d+s]:d<o;d+=1){var c=d+1===o,f=i(l[d+s],t-1,0===d?r.slice(1):[],c?a.slice(1):[]);if(void 0===f)return;n.items.push(f)}}return n}return e},I2=function(i,e,t){var r,a,n=i.length,{storeLoadOptions:s}=e;if(void 0!==s.skip&&s.take&&!t){var o=[];Qm(o,e,t,!0);var l=o.length;(n||l)&&(e.skip=null!==(r=e.skip)&&void 0!==r?r:s.skip,e.take=null!==(a=e.take)&&void 0!==a?a:s.take),n&&(s.skip+=n,s.take-=n,e.cachedDataPartBegin=i),l&&(s.take-=l,e.cachedDataPartEnd=o.reverse())}},A2=function i(e,t,r,a){if(r&&t){var n=(0,ye.Z)({},t);delete n.isContinuation,delete n.isContinuationOnNextPage;var s=a[0]||0;return t.items&&(n.items=e?.items||{},t.items.forEach((o,l)=>{var d=l+s,u=0===l?a.slice(1):[];n.items[d]=i(n.items[d],o,r-1,u)})),n}return t},xp=class D2 extends Nt.Controller{init(e,t){var r=this;r._dataSource=e,r._remoteOperations=t||{},r._isLastPage=!e.isLastPage(),r._hasLastPage=!1,r._currentTotalCount=0,r._cachedData={items:{}},r._lastOperationTypes={},r._eventsStrategy=e._eventsStrategy,r._totalCountCorrection=0,r._isLoadingAll=!1,r.changed=(0,ri.Z)(),r.loadingChanged=(0,ri.Z)(),r.loadError=(0,ri.Z)(),r.customizeStoreLoadOptions=(0,ri.Z)(),r.changing=(0,ri.Z)(),r.pushed=(0,ri.Z)(),r._dataChangedHandler=r._handleDataChanged.bind(r),r._customizeStoreLoadOptionsHandler=r._handleCustomizeStoreLoadOptions.bind(r),r._dataLoadedHandler=r._handleDataLoaded.bind(r),r._loadingChangedHandler=r._handleLoadingChanged.bind(r),r._loadErrorHandler=r._handleLoadError.bind(r),r._pushHandler=r._handlePush.bind(r),r._changingHandler=r._handleChanging.bind(r),e.on("changed",r._dataChangedHandler),e.on("customizeStoreLoadOptions",r._customizeStoreLoadOptionsHandler),e.on("customizeLoadResult",r._dataLoadedHandler),e.on("loadingChanged",r._loadingChangedHandler),e.on("loadError",r._loadErrorHandler),e.on("changing",r._changingHandler),e.store().on("beforePush",r._pushHandler),(0,j.S6)(e,(a,n)=>{!r[a]&&(0,m.mf)(n)&&(r[a]=function(){return this._dataSource[a].apply(this._dataSource,arguments)})})}dispose(e){var t=this._dataSource,r=t.store();t.off("changed",this._dataChangedHandler),t.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler),t.off("customizeLoadResult",this._dataLoadedHandler),t.off("loadingChanged",this._loadingChangedHandler),t.off("loadError",this._loadErrorHandler),t.off("changing",this._changingHandler),r&&r.off("beforePush",this._pushHandler),e||t.dispose()}remoteOperations(){return this._remoteOperations}refresh(e,t){var r=this._dataSource;t.reload&&(this.resetCurrentTotalCount(),this._isLastPage=!r.paginate(),this._hasLastPage=this._isLastPage)}resetCurrentTotalCount(){this._currentTotalCount=0,this._totalCountCorrection=0}resetCache(){this._cachedStoreData=void 0,this._cachedPagingData=void 0}resetPagesCache(e){this._cachedData={items:{}}}_needClearStoreDataCache(){var e=this.remoteOperations(),t=Xm(this._lastLoadOptions||{},{});return!Object.keys(e).every(a=>!t[a]||!e[a])}push(e,t){var r=this.store();this._needClearStoreDataCache()&&(this._cachedStoreData=void 0),this._cachedPagingData=void 0,this.resetPagesCache(!0),this._cachedStoreData&&(0,ar.ii)({keyInfo:r,data:this._cachedStoreData,changes:e}),t||this._applyBatch(e),this.pushed.fire(e)}getDataIndexGetter(){if(!this._dataIndexGetter){var e,t,r=this.store();this._dataIndexGetter=a=>{if(!e||t&&t!==this._cachedStoreData){t=this._cachedStoreData||[],e={};for(var s=0;s<t.length;s++)e[(0,J.k3)(r.keyOf(t[s]))]=s}return e[(0,J.k3)(r.keyOf(a))]}}return this._dataIndexGetter}_getKeyInfo(){return this.store()}_needToCopyDataObject(){return!0}_applyBatch(e,t){var r=this._getKeyInfo(),a=this._dataSource,n=Te.normalizeSortingInfo(this.group()).length,s="reshape"===this.option("editing.refreshMode"),o="virtual"===this.option("scrolling.mode");e=e.filter(c=>!a.paginate()||"insert"!==c.type||void 0!==c.index);var l=()=>n?this.itemsCount():this.items().length,d=l();(0,ar.ii)({keyInfo:r,data:this._items,changes:e,groupCount:n,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(0,ar.ii)({keyInfo:r,data:a.items(),changes:e,groupCount:n,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(this._currentTotalCount>0||(t||!s)&&o)&&(this._totalCountCorrection+=l()-d),e.splice(0,e.length)}_handlePush(e){var{changes:t}=e;this.push(t,!0)}_handleChanging(e){this.changing.fire(e),this._applyBatch(e.changes,!0)}_needCleanCacheByOperation(e,t){var r=["filtering","sorting","paging"],a=r.indexOf(e);return(a>=0?r.slice(a):[e]).some(s=>t[s])}_customizeRemoteOperations(e,t){var r=this._cachedStoreData,a=this._cachedPagingData,n=this._cachedData;(e.storeLoadOptions.filter&&!e.remoteOperations.filtering||e.storeLoadOptions.sort&&!e.remoteOperations.sorting)&&(e.remoteOperations={filtering:e.remoteOperations.filtering,summary:e.remoteOperations.summary}),t.fullReload?(r=void 0,a=void 0,n={items:{}}):(t.reload?(a=void 0,n={items:{}}):t.groupExpanding&&(n={items:{}}),(0,j.S6)(t,(s,o)=>{o&&this._needCleanCacheByOperation(s,e.remoteOperations)&&(r=void 0,a=void 0)})),a&&(e.remoteOperations.paging=!1),e.cachedStoreData=r,e.cachedPagingData=a,e.cachedData=n,e.isCustomLoading||(this._cachedStoreData=r,this._cachedPagingData=a,this._cachedData=n)}_handleCustomizeStoreLoadOptions(e){var t;this._handleDataLoading(e),0!==(null===(t=e.data)||void 0===t?void 0:t.length)&&(e.data=Jm(e,!0)||e.cachedStoreData)}_handleDataLoading(e){var t=this._dataSource,r=this._lastLoadOptions;this.customizeStoreLoadOptions.fire(e),e.delay=this.option("loadingTimeout"),e.originalStoreLoadOptions=e.storeLoadOptions,e.remoteOperations=(0,N.l)({},this.remoteOperations());var a=!this.isLoaded()&&!this._isRefreshing;this.option("integrationOptions.renderedOnServer")&&!this.isLoaded()&&(e.delay=void 0);var n=(0,N.l)({pageIndex:this.pageIndex(),pageSize:this.pageSize()},e.storeLoadOptions),s=Xm(n,r,a);if(this._customizeRemoteOperations(e,s),!e.isCustomLoading){var o=this._isRefreshing;e.pageIndex=t.pageIndex(),e.lastLoadOptions=n,e.operationTypes=s,this._loadingOperationTypes=s,this._isRefreshing=!0,(0,Y.gx)(o||this._isRefreshed||this.refresh(e,s)).done(()=>{this._lastOperationId===e.operationId&&(this._isRefreshed=!0,this.load().always(()=>{this._isRefreshed=!1}))}).fail(()=>{t.cancel(e.operationId)}).always(()=>{this._isRefreshing=!1}),t.cancel(this._lastOperationId),this._lastOperationId=e.operationId,this._isRefreshing&&t.cancel(this._lastOperationId)}this._handleDataLoadingCore(e)}_handleDataLoadingCore(e){var{remoteOperations:t}=e;e.loadOptions={};var r=e.cachedData.extra,a={filter:!t.filtering,sort:!t.sorting,group:!t.grouping,summary:!t.summary,skip:!t.paging,take:!t.paging,requireTotalCount:r&&"totalCount"in r||!t.paging,langParams:!t.filtering||!t.sorting};(0,j.S6)(e.storeLoadOptions,(n,s)=>{a[n]&&(e.loadOptions[n]=s,delete e.storeLoadOptions[n])}),r&&(e.extra=r)}_handleDataLoaded(e){var t,r,{loadOptions:a}=e,n=e.remoteOperations&&!e.remoteOperations.paging,{cachedData:s}=e,{storeLoadOptions:o}=e,l=!1!==this.option("cacheEnabled")&&o,d=l&&!e.isCustomLoading&&s&&(!n||o.group),u=l&&n,c=u&&!e.isCustomLoading;if(a){n&&(e.skip=a.skip,e.take=a.take,delete a.skip,delete a.take),a.group&&(a.group=e.group||a.group);var f=Te.normalizeSortingInfo(e.group||o.group||a.group).length;e.cachedDataPartBegin&&(e.data=e.cachedDataPartBegin.concat(e.data)),e.cachedDataPartEnd&&(e.data=e.data.concat(e.cachedDataPartEnd)),(!d||!Jm(e))&&(u&&e.cachedPagingData?e.data=yp(e.cachedPagingData,f):(c&&(this._cachedStoreData?e.mergeStoreLoadData&&(e.data=this._cachedStoreData=this._cachedStoreData.concat(e.data)):this._cachedStoreData=yp(e.data,Te.normalizeSortingInfo(o.group).length)),new _u.Z(e.data).load(a).done(p=>{e.data=p,c&&(this._cachedPagingData=yp(e.data,f))}).fail(p=>{e.data=(new Y.BH).reject(p)})),a.requireTotalCount&&n&&(e.extra=(0,m.PO)(e.extra)?e.extra:{},e.extra.totalCount=e.data.length),e.extra&&e.extra.totalCount>=0&&(!1===o.requireTotalCount||!1===a.requireTotalCount)&&(e.extra.totalCount=-1),!a.data&&(o.requireTotalCount||(null!==(r=null===(t=e.extra)||void 0===t?void 0:t.totalCount)&&void 0!==r?r:-1)>=0)&&(this._totalCountCorrection=0),this._handleDataLoadedCore(e),d&&(s.extra=s.extra||(0,N.l)({},e.extra),(0,Y.gx)(e.data).done(p=>{!function(i,e,t){for(var r,a,n,s,{storeLoadOptions:o}=i,l=null!==(a=null!==(r=i.skip)&&void 0!==r?r:o.skip)&&void 0!==a?a:0,d=null!==(s=null!==(n=i.take)&&void 0!==n?n:o.take)&&void 0!==s?s:0,u=0;u<d;u+=1){var c=u+l,f=i.cachedData.items;f[c]=A2(f[c],e[u],t,0===u&&i.skips||[])}}(e,p,f)}))),(0,Y.gx)(e.data).done(()=>{e.lastLoadOptions&&(this._lastLoadOptions=e.lastLoadOptions,Object.keys(e.operationTypes).forEach(p=>{this._lastOperationTypes[p]=this._lastOperationTypes[p]||e.operationTypes[p]}))}),e.storeLoadOptions=e.originalStoreLoadOptions}else this._dataSource.cancel(e.operationId)}_handleDataLoadedCore(e){e.remoteOperations&&!e.remoteOperations.paging&&Array.isArray(e.data)&&(void 0!==e.skip&&(e.data=e.data.slice(e.skip)),void 0!==e.take&&(e.data=e.data.slice(0,e.take)))}_handleLoadingChanged(e){this.loadingChanged.fire(e)}_handleLoadError(e){this.loadError.fire(e),this.changed.fire({changeType:"loadError",error:e})}_loadPageSize(){return this.pageSize()}_handleDataChanged(e){var t,r=this._dataSource,a=!1,n=!e||(0,m.$K)(e.changeType),s=this.itemsCount();n&&(this._isLastPage=!s||!this._loadPageSize()||s<this._loadPageSize(),this._isLastPage&&(this._hasLastPage=!0)),r.totalCount()>=0?r.pageIndex()>=this.pageCount()&&(r.pageIndex(this.pageCount()-1),this.pageIndex(r.pageIndex()),this.resetPagesCache(),r.load(),a=!0):n&&((t=r.pageIndex()*this.pageSize()+s)>this._currentTotalCount&&(this._currentTotalCount=t,(0===r.pageIndex()||!this.option("scrolling.legacyMode"))&&(this._totalCountCorrection=0)),0===s&&r.pageIndex()>=this.pageCount()&&(r.pageIndex(this.pageCount()-1),"infinite"!==this.option("scrolling.mode")&&(r.load(),a=!0))),a||(this._operationTypes=this._lastOperationTypes,this._lastOperationTypes={},this.component._optionCache={},this.changed.fire(e),this.component._optionCache=void 0)}_scheduleCustomLoadCallbacks(e){var t=this;t._isCustomLoading=!0,e.always(()=>{t._isCustomLoading=!1})}loadingOperationTypes(){return this._loadingOperationTypes}operationTypes(){return this._operationTypes}lastLoadOptions(){return this._lastLoadOptions||{}}isLastPage(){return this._isLastPage}_dataSourceTotalCount(){return this._dataSource.totalCount()}_changeRowExpandCore(e){}changeRowExpand(e){}totalCount(){return parseInt((this._currentTotalCount||this._dataSourceTotalCount())+this._totalCountCorrection)}totalCountCorrection(){return this._totalCountCorrection}items(){}itemsCount(){return this._dataSource.items().length}totalItemsCount(){return this.totalCount()}pageSize(){var e=this._dataSource;return arguments.length||e.paginate()?e.pageSize.apply(e,arguments):0}pageCount(){var e=this.totalItemsCount()-this._totalCountCorrection,t=this.pageSize();return t&&e>0?Math.max(1,Math.ceil(e/t)):1}hasKnownLastPage(){return this._hasLastPage||this._dataSource.totalCount()>=0}loadFromStore(e,t){var r=this._dataSource,a=new Y.BH;if(r)return(t=t||r.store()).load(e).done((n,s)=>{n&&!Array.isArray(n)&&Array.isArray(n.data)&&(s=n,n=n.data),a.resolve(n,s)}).fail(a.reject),a}isCustomLoading(){return!!this._isCustomLoading}load(e){var t=this,r=t._dataSource,a=new Y.BH;if(e){var n=r.store(),s=r.loadOptions(),o={storeLoadOptions:(0,N.l)({},e,{langParams:s?.langParams}),isCustomLoading:!0};return(0,j.S6)(n._customLoadOptions()||[],(l,d)=>{d in o.storeLoadOptions||(o.storeLoadOptions[d]=s[d])}),this._isLoadingAll=e.isLoadingAll,t._scheduleCustomLoadCallbacks(a),r._scheduleLoadCallbacks(a),t._handleCustomizeStoreLoadOptions(o),function(i,e){(0,m.$K)(e)?(0,J.Wi)(i,e):i()}(()=>{if(!r.store())return a.reject("canceled");(0,Y.gx)(o.data||t.loadFromStore(o.storeLoadOptions)).done((l,d)=>{o.data=l,o.extra=d||{},t._handleDataLoaded(o),e.requireTotalCount&&void 0===o.extra.totalCount&&(o.extra.totalCount=n.totalCount(o.storeLoadOptions)),(0,Y.gx)(o.data,o.extra.totalCount).done((u,c)=>{o.extra.totalCount=c,a.resolve(u,o.extra)}).fail(a.reject)}).fail(a.reject)},t.option("loadingTimeout")),a.fail(function(){t._eventsStrategy.fireEvent("loadError",arguments)}).always(()=>{this._isLoadingAll=!1}).promise()}return r.load()}reload(e){return e?this._dataSource.reload():this._dataSource.load()}getCachedStoreData(){return this._cachedStoreData}isLoaded(){}pageIndex(e){}};const vu={extend(i){xp=i(xp)},create:i=>new xp(i)};He.registerModule("data",{defaultOptions:S2.defaultOptions,controllers:{data:class O2 extends Ym{_getDataSourceAdapter(){return vu}_getSpecificDataSourceOption(){var e=this.option("dataSource");return e&&!Array.isArray(e)&&this.option("keyExpr")&&Rt.Z.log("W1011"),super._getSpecificDataSourceOption()}}}});var eC="dx-sort",tC="dx-sort-none",iC="dx-sort-index-icon";const rC=i=>class extends i{_applyColumnState(e){var t,r,a=this.option("sorting.mode"),{rootElement:n}=e,{column:s}=e,o=this._getIndicatorContainer(n);if("sort"===e.name){n.find(".".concat(eC)).remove(),!o.children().length&&o.remove();var l="none"!==a&&s.allowSorting,d=this.getController&&!!this.getController("columns").columnOption("sortIndex:1");return!(0,m.$K)(s.groupIndex)&&(l||(0,m.$K)(s.sortOrder))&&(t="asc"===s.sortOrder?"ascending":"descending",r=super._applyColumnState(e).toggleClass("dx-sort-up","asc"===s.sortOrder).toggleClass("dx-sort-down","desc"===s.sortOrder),d&&this.option("sorting.showSortIndexes")&&s.sortIndex>=0&&((0,b.Z)("<span>").addClass(iC).text(s.sortIndex+1).appendTo(r),r.addClass("dx-sort-index")),l&&e.rootElement.addClass(this.addWidgetPrefix("action"))),this._setAriaSortAttribute(s,t,n,d),r}return super._applyColumnState(e)}_setAriaSortAttribute(e,t,r,a){if(r.removeAttr("aria-roledescription"),e.isGrouped){var n=this.localize("dxDataGrid-ariaNotSortedColumn");(0,m.$K)(e.sortOrder)&&(n=this.localize("asc"===e.sortOrder?"dxDataGrid-ariaSortedAscendingColumn":"dxDataGrid-ariaSortedDescendingColumn")),this.setAria("roledescription",n,r)}else if((0,m.$K)(e.sortOrder)){if(this.setAria("sort",t,r),a&&e.sortIndex>=0){var s=ae.Z.format("dxDataGrid-ariaColumnHeader"),o=ae.Z.format("dxDataGrid-ariaSortIndex",e.sortIndex+1),l="".concat(s,", ").concat(o);this.setAria("roledescription",l,r)}}else this.setAria("sort","none",r)}_getIndicatorClassName(e){return"sort"===e?eC:"sortIndex"===e?iC:super._getIndicatorClassName(e)}_renderIndicator(e){var{column:t}=e,r=e.container,a=e.indicator;if("sort"===e.name){var n=this.option("rtlEnabled");if((0,m.$K)(t.sortOrder)||a&&a.addClass(tC),r.children().length&&(!n&&"left"===e.columnAlignment||n&&"right"===e.columnAlignment))return void r.prepend(a)}super._renderIndicator(e)}_updateIndicator(e,t,r){if("sort"!==r||!(0,m.$K)(t.groupIndex))return super._updateIndicator.apply(this,arguments)}_getIndicatorElements(e,t){var r=super._getIndicatorElements(e);return t?r:r&&r.not(".".concat(tC))}};var M2={defaultOptions:()=>({sorting:{mode:"single",ascendingText:ae.Z.format("dxDataGrid-sortingAscendingText"),descendingText:ae.Z.format("dxDataGrid-sortingDescendingText"),clearText:ae.Z.format("dxDataGrid-sortingClearText"),showSortIndexes:!0}}),extenders:{views:{columnHeadersView:i=>class extends(rC(i)){optionChanged(e){"sorting"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_createRow(e){var t=super._createRow(e);return"header"===e.rowType&&k.Z.on(t,(0,ce.V4)(Pt.u,"dxDataGridColumnHeadersView"),"td",this.createAction(r=>{this._processHeaderAction(r.event,t)})),t}_processHeaderAction(e,t){if((0,b.Z)(e.currentTarget).parent().get(0)===t.get(0)){var r=this,a=null,n=(0,b.Z)(e.currentTarget),s=n.parent().index(),o=-1;[].slice.call(r.getCellElements(s)).some((p,g)=>{if(p===n.get(0))return o=g,!0});var d=r._columnsController.getVisibleColumns(s)[o],u=r.getController("editing"),c=r.option("editing.mode");u&&u.isEditing()&&("batch"===c||"cell"===c)||!r._isSortableElement((0,b.Z)(e.target))||d&&!(0,m.$K)(d.groupIndex)&&!d.command&&(e.shiftKey?a="shift":(0,ce.j1)(e)&&(a="ctrl"),setTimeout(()=>{r._columnsController.changeSortOrder(d.index,a)}))}}_renderCellContent(e,t){var{column:r}=t;!r.command&&"header"===t.rowType&&this._applyColumnState({name:"sort",rootElement:e,column:r,showColumnLines:this.option("showColumnLines")}),super._renderCellContent.apply(this,arguments)}_columnOptionChanged(e){var{changeTypes:t}=e;1===t.length&&t.sorting?this._updateIndicators("sort"):super._columnOptionChanged(e)}},headerPanel:i=>class extends(rC(i)){optionChanged(e){"sorting"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_createGroupPanelItem(e,t){var r=this,a=super._createGroupPanelItem(...arguments);return k.Z.on(a,(0,ce.V4)(Pt.u,"dxDataGridHeaderPanel"),r.createAction(()=>{r._processGroupItemAction(t.index)})),r._applyColumnState({name:"sort",rootElement:a,column:{alignment:r.option("rtlEnabled")?"right":"left",allowSorting:t.allowSorting,sortOrder:"desc"===t.sortOrder?"desc":"asc",isGrouped:!0},showColumnLines:!0}),a}_processGroupItemAction(e){setTimeout(()=>this.getController("columns").changeSortOrder(e))}}}}};He.registerModule("sorting",M2);var at=be(8936),El=be(3151),io=be(9464),oi=be(6395),aC=be(6810);const nC=dr.Z.inherit({ctor:function(){this._finished=!0,this._stopped=!1,this._proxiedStepCore=this._stepCore.bind(this)},start:function(){this._stopped=!1,this._finished=!1,this._stepCore()},stop:function(){this._stopped=!0,(0,aC.W)(this._stepAnimationFrame)},_stepCore:function(){if(!this._isStopped())return this._isFinished()?(this._finished=!0,void this._complete()):(this._step(),void(this._stepAnimationFrame=(0,aC.U)(this._proxiedStepCore)));this._stop()},_step:dr.Z.abstract,_isFinished:J.ZT,_stop:J.ZT,_complete:J.ZT,_isStopped:function(){return this._stopped},inProgress:function(){return!(this._stopped||this._finished)}});var sC=be(1243),hr=be(9386),Ep="dxScrollbar",oC="dx-scrollable-scrollbar",lC="".concat(oC,"-active"),dC="horizontal",ro=null,G2=hr.default.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{direction:null,visible:!1,activeStateEnabled:!1,visibilityMode:"onScroll",containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})},_init:function(){this.callBase(),this._isHovered=!1},_initMarkup:function(){this._renderThumb(),this.callBase()},_render:function(){this.callBase(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode()),this.$element().toggleClass("dx-scrollbar-hoverable",this.option("hoverStateEnabled"))},_renderThumb:function(){this._$thumb=(0,b.Z)("<div>").addClass("dx-scrollable-scroll"),(0,b.Z)("<div>").addClass("dx-scrollable-scroll-content").appendTo(this._$thumb),this.$element().addClass(oC).append(this._$thumb)},isThumb:function(i){return!!this.$element().find(i).length},_isHoverMode:function(){var i=this.option("visibilityMode");return("onHover"===i||"always"===i)&&this.option("expandable")},_renderDirection:function(){var i=this.option("direction");this.$element().addClass("dx-scrollbar-"+i),this._dimension=i===dC?"width":"height",this._prop=i===dC?"left":"top"},_attachPointerDownHandler:function(){k.Z.on(this._$thumb,(0,ce.V4)(Bt.Z.down,Ep),this.feedbackOn.bind(this))},feedbackOn:function(){this.$element().addClass(lC),ro=this},feedbackOff:function(){this.$element().removeClass(lC),ro=null},cursorEnter:function(){this._isHovered=!0,this._needScrollbar()&&this.option("visible",!0)},cursorLeave:function(){this._isHovered=!1,this.option("visible",!1)},_renderDimensions:function(){this._$thumb.css({width:this.option("width"),height:this.option("height")})},_toggleVisibility:function(i){"onScroll"===this.option("visibilityMode")&&this._$thumb.css("opacity"),i=this._adjustVisibility(i),this.option().visible=i,this._$thumb.toggleClass("dx-state-invisible",!i)},_adjustVisibility:function(i){if(this._baseContainerToContentRatio&&!this._needScrollbar())return!1;switch(this.option("visibilityMode")){case"onScroll":break;case"onHover":i=i||!!this._isHovered;break;case"never":i=!1;break;case"always":i=!0}return i},moveTo:function(i){if(!this._isHidden()){(0,m.PO)(i)&&(i=i[this._prop]||0);var e={};e[this._prop]=this._calculateScrollBarPosition(i),(0,oi.pB)(this._$thumb,e)}},_calculateScrollBarPosition:function(i){return-i*this._thumbRatio},_update:function(){var i=Math.round(this.option("containerSize")),e=Math.round(this.option("contentSize")),t=Math.round(this.option("baseContainerSize")),r=Math.round(this.option("baseContentSize"));isNaN(t)&&(t=i,r=e),this._baseContainerToContentRatio=r?t/r:t,this._realContainerToContentRatio=e?i/e:i;var a=Math.round(Math.max(Math.round(i*this._realContainerToContentRatio),15));this._thumbRatio=(i-a)/(this.option("scaleRatio")*(e-i)),this.option(this._dimension,a/this.option("scaleRatio")),this.$element().css("display",this._needScrollbar()?"":"none")},_isHidden:function(){return"never"===this.option("visibilityMode")},_needScrollbar:function(){return!this._isHidden()&&this._baseContainerToContentRatio<1},containerToContentRatio:function(){return this._realContainerToContentRatio},_normalizeSize:function(i){return(0,m.PO)(i)?i[this._dimension]||0:i},_clean:function(){this.callBase(),this===ro&&(ro=null),k.Z.off(this._$thumb,"."+Ep)},_optionChanged:function(i){if(!this._isHidden())switch(i.name){case"containerSize":case"contentSize":this.option()[i.name]=this._normalizeSize(i.value),this._update();break;case"baseContentSize":case"baseContainerSize":case"scaleRatio":this._update();break;case"visibilityMode":case"direction":this._invalidate();break;default:this.callBase.apply(this,arguments)}},update:(0,J.Rg)(function(){this._adjustVisibility()&&this.option("visible",!0)})});sC.Z.add(function(){k.Z.subscribeGlobal(it.Z.getDocument(),(0,ce.V4)(Bt.Z.up,Ep),function(){ro&&ro.feedbackOff()})});const uC=G2;var qr,ao,hC="dxSimulatedScrollable",gu=hC+"Cursor",Ip=hC+"Keyboard",Tp="dx-scrollable-simulated",Sa="vertical",$i="horizontal",Y2=Math.round(1e3/60),iD=(1-Math.pow(.92,400/Y2))/(1-.92),fC=nC.inherit({ctor:function(i){this.callBase(),this.scroller=i},VELOCITY_LIMIT:1,_isFinished:function(){return Math.abs(this.scroller._velocity)<=this.VELOCITY_LIMIT},_step:function(){this.scroller._scrollStep(this.scroller._velocity),this.scroller._velocity*=this._acceleration()},_acceleration:function(){return this.scroller._inBounds()?.92:.5},_complete:function(){this.scroller._scrollComplete()}}),rD=fC.inherit({VELOCITY_LIMIT:.2,_isFinished:function(){return this.scroller._crossBoundOnNextStep()||this.callBase()},_acceleration:function(){return.92},_complete:function(){this.scroller._move(this.scroller._bounceLocation),this.callBase()}}),_C=dr.Z.inherit({ctor:function(i){this._initOptions(i),this._initAnimators(),this._initScrollbar()},_initOptions:function(i){this._location=0,this._topReached=!1,this._bottomReached=!1,this._axis=i.direction===$i?"x":"y",this._prop=i.direction===$i?"left":"top",this._dimension=i.direction===$i?"width":"height",this._scrollProp=i.direction===$i?"scrollLeft":"scrollTop",(0,j.S6)(i,(e,t)=>{this["_"+e]=t})},_initAnimators:function(){this._inertiaAnimator=new fC(this),this._bounceAnimator=new rD(this)},_initScrollbar:function(){this._scrollbar=new uC((0,b.Z)("<div>").appendTo(this._$container),{direction:this._direction,visible:this._scrollByThumb,visibilityMode:this._visibilityModeNormalize(this._scrollbarVisible),expandable:this._scrollByThumb}),this._$scrollbar=this._scrollbar.$element()},_visibilityModeNormalize:function(i){return!0===i?"onScroll":!1===i?"never":i},_scrollStep:function(i){var e=this._location;this._location+=i,this._suppressBounce(),this._move(),!(Math.abs(e-this._location)<1)&&k.Z.triggerHandler(this._$container,{type:"scroll"})},_suppressBounce:function(){this._bounceEnabled||this._inBounds(this._location)||(this._velocity=0,this._location=this._boundLocation())},_boundLocation:function(i){return i=void 0!==i?i:this._location,Math.max(Math.min(i,this._maxOffset),this._minOffset)},_move:function(i){this._location=void 0!==i?i*this._getScaleRatio():this._location,this._moveContent(),this._moveScrollbar()},_moveContent:function(){var i=this._location;this._$container[this._scrollProp](-i/this._getScaleRatio()),this._moveContentByTranslator(i)},_getScaleRatio:function(){if((0,We.Ym)()&&!this._scaleRatio){var i=this._$element.get(0),e=this._getRealDimension(i,this._dimension),t=this._getBaseDimension(i,this._dimension);this._scaleRatio=Math.round(e/t*100)/100}return this._scaleRatio||1},_getRealDimension:function(i,e){return Math.round((0,di.l)(i)[e])},_getBaseDimension:function(i,e){return i["offset"+(0,ur.MI)(e)]},_moveContentByTranslator:function(i){var e,t=-this._maxScrollPropValue;if(this._translateOffset!==(e=i>0?i:i<=t?i-t:i%1)){var r={};if(r[this._prop]=e,this._translateOffset=e,0===e)return void(0,oi.Kx)(this._$content);(0,oi.pB)(this._$content,r)}},_moveScrollbar:function(){this._scrollbar.moveTo(this._location)},_scrollComplete:function(){this._inBounds()&&(this._hideScrollbar(),this._completeDeferred&&this._completeDeferred.resolve()),this._scrollToBounds()},_scrollToBounds:function(){this._inBounds()||(this._bounceAction(),this._setupBounce(),this._bounceAnimator.start())},_setupBounce:function(){var i=this._bounceLocation=this._boundLocation();this._velocity=(i-this._location)/iD},_inBounds:function(i){return this._boundLocation(i=void 0!==i?i:this._location)===i},_crossBoundOnNextStep:function(){var i=this._location,e=i+this._velocity;return i<this._minOffset&&e>=this._minOffset||i>this._maxOffset&&e<=this._maxOffset},_initHandler:function(i){this._stopScrolling(),this._prepareThumbScrolling(i)},_stopScrolling:(0,J.Rg)(function(){this._hideScrollbar(),this._inertiaAnimator.stop(),this._bounceAnimator.stop()}),_prepareThumbScrolling:function(i){if(!(0,ce.pR)(i.originalEvent)){var e=(0,b.Z)(i.originalEvent.target),t=this._isScrollbar(e);t&&this._moveToMouseLocation(i),this._thumbScrolling=t||this._isThumb(e),this._crossThumbScrolling=!this._thumbScrolling&&this._isAnyThumbScrolling(e),this._thumbScrolling&&this._scrollbar.feedbackOn()}},_isThumbScrollingHandler:function(i){return this._isThumb(i)},_moveToMouseLocation:function(i){var e=i["page"+this._axis.toUpperCase()]-this._$element.offset()[this._prop],t=this._location+e/this._containerToContentRatio()-(0,oe.Cr)(this._$container)/2;this._scrollStep(-Math.round(t))},_startHandler:function(){this._showScrollbar()},_moveHandler:function(i){this._crossThumbScrolling||(this._thumbScrolling&&(i[this._axis]=-Math.round(i[this._axis]/this._containerToContentRatio())),this._scrollBy(i))},_scrollBy:function(i){i=i[this._axis],this._inBounds()||(i*=.5),this._scrollStep(i)},_scrollByHandler:function(i){this._scrollBy(i),this._scrollComplete()},_containerToContentRatio:function(){return this._scrollbar.containerToContentRatio()},_endHandler:function(i){return this._completeDeferred=new Y.BH,this._velocity=i[this._axis],this._inertiaHandler(),this._resetThumbScrolling(),this._completeDeferred.promise()},_inertiaHandler:function(){this._suppressInertia(),this._inertiaAnimator.start()},_suppressInertia:function(){(!this._inertiaEnabled||this._thumbScrolling)&&(this._velocity=0)},_resetThumbScrolling:function(){this._thumbScrolling=!1,this._crossThumbScrolling=!1},_stopHandler:function(){this._thumbScrolling&&this._scrollComplete(),this._resetThumbScrolling(),this._scrollToBounds()},_disposeHandler:function(){this._stopScrolling(),this._$scrollbar.remove()},_updateHandler:function(){this._update(),this._moveToBounds()},_update:function(){return this._stopScrolling(),(0,J.Su)(()=>{this._resetScaleRatio(),this._updateLocation(),this._updateBounds(),this._updateScrollbar(),(0,J.g0)(()=>{this._moveScrollbar(),this._scrollbar.update()})})},_resetScaleRatio:function(){this._scaleRatio=null},_updateLocation:function(){this._location=((0,oi.jt)(this._$content)[this._prop]-this._$container[this._scrollProp]())*this._getScaleRatio()},_updateBounds:function(){this._maxOffset=this._getMaxOffset(),this._minOffset=this._getMinOffset()},_getMaxOffset:function(){return 0},_getMinOffset:function(){return this._maxScrollPropValue=Math.max(this._contentSize()-this._containerSize(),0),-this._maxScrollPropValue},_updateScrollbar:(0,J.bN)(function(){var i=this._containerSize(),e=this._contentSize(),t=this._getBaseDimension(this._$container.get(0),this._dimension),r=this._getBaseDimension(this._$content.get(0),this._dimension);(0,J.g0)(()=>{this._scrollbar.option({containerSize:i,contentSize:e,baseContainerSize:t,baseContentSize:r,scaleRatio:this._getScaleRatio()})})}),_moveToBounds:(0,J.Rg)((0,J.bN)((0,J.Rg)(function(){var i=this._boundLocation(),e=i!==this._location;this._location=i,this._move(),e&&this._scrollAction()}))),_createActionsHandler:function(i){this._scrollAction=i.scroll,this._bounceAction=i.bounce},_showScrollbar:function(){this._scrollbar.option("visible",!0)},_hideScrollbar:function(){this._scrollbar.option("visible",!1)},_containerSize:function(){return this._getRealDimension(this._$container.get(0),this._dimension)},_contentSize:function(){var i="hidden"===this._$content.css("overflow"+this._axis.toUpperCase()),e=this._getRealDimension(this._$content.get(0),this._dimension);if(!i){var t=this._$content[0]["scroll"+(0,ur.MI)(this._dimension)]*this._getScaleRatio();e=Math.max(t,e)}return e},_validateEvent:function(i){var e=(0,b.Z)(i.originalEvent.target);return this._isThumb(e)||this._isScrollbar(e)},_isThumb:function(i){return this._scrollByThumb&&this._scrollbar.isThumb(i)},_isScrollbar:function(i){return this._scrollByThumb&&i&&i.is(this._$scrollbar)},_reachedMin:function(){return Math.round(this._location-this._minOffset)<=0},_reachedMax:function(){return Math.round(this._location-this._maxOffset)>=0},_cursorEnterHandler:function(){this._resetScaleRatio(),this._updateScrollbar(),this._scrollbar.cursorEnter()},_cursorLeaveHandler:function(){this._scrollbar.cursorLeave()},dispose:J.ZT}),vC=dr.Z.inherit({ctor:function(i){this._init(i)},_init:function(i){this._component=i,this._$element=i.$element(),this._$container=(0,b.Z)(i.container()),this._$wrapper=i._$wrapper,this._$content=i.$content(),this.option=i.option.bind(i),this._createActionByOption=i._createActionByOption.bind(i),this._isLocked=i._isLocked.bind(i),this._isDirection=i._isDirection.bind(i),this._allowedDirection=i._allowedDirection.bind(i),this._getMaxOffset=i._getMaxOffset.bind(i)},render:function(){this._$element.addClass(Tp),this._createScrollers(),this.option("useKeyboard")&&this._$container.prop("tabIndex",0),this._attachKeyboardHandler(),this._attachCursorHandlers()},_createScrollers:function(){this._scrollers={},this._isDirection($i)&&this._createScroller($i),this._isDirection(Sa)&&this._createScroller(Sa),this._$element.toggleClass("dx-scrollable-scrollbars-alwaysvisible","always"===this.option("showScrollbar"))},_createScroller:function(i){this._scrollers[i]=new _C(this._scrollerOptions(i))},_scrollerOptions:function(i){return{direction:i,$content:this._$content,$container:this._$container,$wrapper:this._$wrapper,$element:this._$element,scrollByThumb:this.option("scrollByThumb"),scrollbarVisible:this.option("showScrollbar"),bounceEnabled:this.option("bounceEnabled"),inertiaEnabled:this.option("inertiaEnabled"),isAnyThumbScrolling:this._isAnyThumbScrolling.bind(this)}},_applyScaleRatio:function(i){for(var e in this._scrollers){var t=this._getPropByDirection(e);(0,m.$K)(i[t])&&(i[t]*=this._scrollers[e]._getScaleRatio())}return i},_isAnyThumbScrolling:function(i){var e=!1;return this._eventHandler("isThumbScrolling",i).done(function(t,r){e=t||r}),e},handleInit:function(i){this._suppressDirections(i),this._eventForUserAction=i,this._eventHandler("init",i)},_suppressDirections:function(i){(0,ce.pR)(i.originalEvent)?this._prepareDirections(!0):(this._prepareDirections(),this._eachScroller(function(e,t){var r=(0,b.Z)(i.originalEvent.target),a=e._validateEvent(i)||this.option("scrollByContent")&&this._isContent(r);this._validDirections[t]=a}))},_isContent:function(i){return!!i.closest(this._$element).length},_prepareDirections:function(i){i=i||!1,this._validDirections={},this._validDirections[$i]=i,this._validDirections[Sa]=i},_eachScroller:function(i){i=i.bind(this),(0,j.S6)(this._scrollers,function(e,t){i(t,e)})},handleStart:function(i){this._eventForUserAction=i,this._eventHandler("start").done(this._startAction)},_saveActive:function(){ao=this},_resetActive:function(){ao===this&&(ao=null)},handleMove:function(i){if(this._isLocked())return i.cancel=!0,void this._resetActive();this._saveActive(),i.preventDefault&&i.preventDefault(),this._adjustDistance(i,i.delta),this._eventForUserAction=i,this._eventHandler("move",i.delta)},_adjustDistance:function(i,e){e.x*=this._validDirections[$i],e.y*=this._validDirections[Sa];var t=this._tryGetDevicePixelRatio();t&&(0,ce.pR)(i.originalEvent)&&(e.x=Math.round(e.x/t*100)/100,e.y=Math.round(e.y/t*100)/100)},_tryGetDevicePixelRatio:function(){if((0,We.Ym)())return(0,We.Jj)().devicePixelRatio},handleEnd:function(i){return this._resetActive(),this._refreshCursorState(i.originalEvent&&i.originalEvent.target),this._adjustDistance(i,i.velocity),this._eventForUserAction=i,this._eventHandler("end",i.velocity).done(this._endAction)},handleCancel:function(i){return this._resetActive(),this._eventForUserAction=i,this._eventHandler("end",{x:0,y:0})},handleStop:function(){this._resetActive(),this._eventHandler("stop")},handleScroll:function(){this._updateRtlConfig(),this._scrollAction()},_attachKeyboardHandler:function(){k.Z.off(this._$element,".".concat(Ip)),!this.option("disabled")&&this.option("useKeyboard")&&k.Z.on(this._$element,(0,ce.V4)("keydown",Ip),this._keyDownHandler.bind(this))},_keyDownHandler:function(i){if(clearTimeout(this._updateHandlerTimeout),this._updateHandlerTimeout=setTimeout(()=>{"tab"===(0,ce.EV)(i)&&this._eachScroller(t=>{t._updateHandler()})}),this._$container.is(it.Z.getActiveElement(this._$container.get(0)))){var e=!0;switch((0,ce.EV)(i)){case"downArrow":this._scrollByLine({y:1});break;case"upArrow":this._scrollByLine({y:-1});break;case"rightArrow":this._scrollByLine({x:1});break;case"leftArrow":this._scrollByLine({x:-1});break;case"pageDown":this._scrollByPage(1);break;case"pageUp":this._scrollByPage(-1);break;case"home":this._scrollToHome();break;case"end":this._scrollToEnd();break;default:e=!1}e&&(i.stopPropagation(),i.preventDefault())}},_scrollByLine:function(i){var e=this._tryGetDevicePixelRatio(),t=40;e&&(t=Math.abs(t/e*100)/100),this.scrollBy({top:(i.y||0)*-t,left:(i.x||0)*-t})},_scrollByPage:function(i){var e=this._wheelProp(),t=this._dimensionByProp(e),r={};r[e]=i*-("width"===t?oe.dz:oe.Cr)(this._$container),this.scrollBy(r)},_dimensionByProp:function(i){return"left"===i?"width":"height"},_getPropByDirection:function(i){return i===$i?"left":"top"},_scrollToHome:function(){var e={};e[this._wheelProp()]=0,this._component.scrollTo(e)},_scrollToEnd:function(){var i=this._wheelProp(),t={},r="width"===this._dimensionByProp(i)?oe.dz:oe.Cr;t[i]=r(this._$content)-r(this._$container),this._component.scrollTo(t)},createActions:function(){this._startAction=this._createActionHandler("onStart"),this._endAction=this._createActionHandler("onEnd"),this._updateAction=this._createActionHandler("onUpdated"),this._createScrollerActions()},_createScrollerActions:function(){this._scrollAction=this._createActionHandler("onScroll"),this._bounceAction=this._createActionHandler("onBounce"),this._eventHandler("createActions",{scroll:this._scrollAction,bounce:this._bounceAction})},_createActionHandler:function(i){var e=this._createActionByOption(i);return()=>{e((0,N.l)(this._createActionArgs(),arguments))}},_createActionArgs:function(){var{horizontal:i,vertical:e}=this._scrollers,t=this._getScrollOffset();return this._scrollOffset={top:e&&t.top,left:i&&t.left},{event:this._eventForUserAction,scrollOffset:this._scrollOffset,reachedLeft:i&&i._reachedMax(),reachedRight:i&&i._reachedMin(),reachedTop:e&&e._reachedMax(),reachedBottom:e&&e._reachedMin()}},_getScrollOffset(){return{top:-this.location().top,left:-this.location().left}},_eventHandler:function(i){var e=[].slice.call(arguments).slice(1),t=(0,j.UI)(this._scrollers,r=>r["_"+i+"Handler"].apply(r,e));return Y.gx.apply(b.Z,t).promise()},location:function(){var i=(0,oi.jt)(this._$content);return i.top-=this._$container.scrollTop(),i.left-=this._$container.scrollLeft(),i},disabledChanged:function(){this._attachCursorHandlers()},_attachCursorHandlers:function(){k.Z.off(this._$element,".".concat(gu)),!this.option("disabled")&&this._isHoverMode()&&(k.Z.on(this._$element,(0,ce.V4)("mouseenter",gu),this._cursorEnterHandler.bind(this)),k.Z.on(this._$element,(0,ce.V4)("mouseleave",gu),this._cursorLeaveHandler.bind(this)))},_isHoverMode:function(){return"onHover"===this.option("showScrollbar")},_cursorEnterHandler:function(i){(i=i||{}).originalEvent=i.originalEvent||{},!ao&&!i.originalEvent._hoverHandled&&(qr&&qr._cursorLeaveHandler(),qr=this,this._eventHandler("cursorEnter"),i.originalEvent._hoverHandled=!0)},_cursorLeaveHandler:function(i){qr!==this||ao===qr||(this._eventHandler("cursorLeave"),qr=null,this._refreshCursorState(i&&i.relatedTarget))},_refreshCursorState:function(i){if(this._isHoverMode()||i&&!ao){var t=(0,b.Z)(i).closest(".".concat(Tp,":not(.dx-state-disabled)")),r=t.length&&t.data("dxScrollableStrategy");qr&&qr!==r&&qr._cursorLeaveHandler(),r&&r._cursorEnterHandler()}},update:function(){var i=this._eventHandler("update").done(this._updateAction);return(0,Y.gx)(i,(0,J.Su)(()=>{var e=this._allowedDirections();return(0,J.g0)(()=>{var t=e.vertical?"pan-x":"";t=e.horizontal?"pan-y":t,this._$container.css("touchAction",t=e.vertical&&e.horizontal?"none":t)}),(0,Y.gx)().promise()}))},_allowedDirections:function(){var i=this.option("bounceEnabled"),e=this._scrollers[Sa],t=this._scrollers[$i];return{vertical:e&&(e._minOffset<0||i),horizontal:t&&(t._minOffset<0||i)}},_updateBounds:function(){this._scrollers[$i]&&this._scrollers[$i]._updateBounds()},_isHorizontalAndRtlEnabled:function(){return this.option("rtlEnabled")&&this.option("direction")!==Sa},updateRtlPosition:function(i){if(i&&(this._rtlConfig={scrollRight:0,clientWidth:this._$container.get(0).clientWidth,windowPixelRatio:this._getWindowDevicePixelRatio()}),this._updateBounds(),this._isHorizontalAndRtlEnabled()){var e=this._getMaxOffset().left-this._rtlConfig.scrollRight;e<=0&&(e=0,this._rtlConfig.scrollRight=this._getMaxOffset().left),this._getScrollOffset().left!==e&&(this._rtlConfig.skipUpdating=!0,this._component.scrollTo({left:e}),this._rtlConfig.skipUpdating=!1)}},_updateRtlConfig:function(){if(this._isHorizontalAndRtlEnabled()&&!this._rtlConfig.skipUpdating){var{clientWidth:i,scrollLeft:e}=this._$container.get(0),t=this._getWindowDevicePixelRatio();this._rtlConfig.windowPixelRatio===t&&this._rtlConfig.clientWidth===i&&(this._rtlConfig.scrollRight=this._getMaxOffset().left-e),this._rtlConfig.clientWidth=i,this._rtlConfig.windowPixelRatio=t}},_getWindowDevicePixelRatio:function(){return(0,We.Ym)()?(0,We.Jj)().devicePixelRatio:1},scrollBy:function(i){var e=this._scrollers[Sa],t=this._scrollers[$i];e&&(i.top=e._boundLocation(i.top+e._location)-e._location),t&&(i.left=t._boundLocation(i.left+t._location)-t._location),this._prepareDirections(!0),this._startAction(),this._eventHandler("scrollBy",{x:i.left,y:i.top}),this._endAction(),this._updateRtlConfig()},validate:function(i){return!((0,ce.pR)(i)&&(0,ce.j1)(i)||this.option("disabled"))&&(!!this.option("bounceEnabled")||((0,ce.pR)(i)?this._validateWheel(i):this._validateMove(i)))},_validateWheel:function(i){var e=this._scrollers[this._wheelDirection(i)],t=e._reachedMin(),r=e._reachedMax(),l=(!t||!r)&&(!t&&!r||t&&i.delta>0||r&&i.delta<0);return(l=l||void 0!==this._validateWheelTimer)&&(clearTimeout(this._validateWheelTimer),this._validateWheelTimer=setTimeout(()=>{this._validateWheelTimer=void 0},500)),l},_validateMove:function(i){return!(!this.option("scrollByContent")&&!(0,b.Z)(i.target).closest(".".concat("dx-scrollable-scrollbar")).length)&&this._allowedDirection()},getDirection:function(i){return(0,ce.pR)(i)?this._wheelDirection(i):this._allowedDirection()},_wheelProp:function(){return this._wheelDirection()===$i?"left":"top"},_wheelDirection:function(i){switch(this.option("direction")){case $i:return $i;case Sa:return Sa;default:return i&&i.shiftKey?$i:Sa}},dispose:function(){this._resetActive(),qr===this&&(qr=null),this._eventHandler("dispose"),this._detachEventHandlers(),this._$element.removeClass(Tp),this._eventForUserAction=null,clearTimeout(this._validateWheelTimer),clearTimeout(this._updateHandlerTimeout)},_detachEventHandlers:function(){k.Z.off(this._$element,".".concat(gu)),k.Z.off(this._$container,".".concat(Ip))}}),gC="dxNativeScrollable",Ap="dx-scrollable-native",Il="vertical",Cu="horizontal",oD=dr.Z.inherit({ctor:function(i){this._init(i)},_init:function(i){this._component=i,this._$element=i.$element(),this._$container=(0,b.Z)(i.container()),this._$content=i.$content(),this._direction=i.option("direction"),this._useSimulatedScrollbar=i.option("useSimulatedScrollbar"),this.option=i.option.bind(i),this._createActionByOption=i._createActionByOption.bind(i),this._isLocked=i._isLocked.bind(i),this._isDirection=i._isDirection.bind(i),this._allowedDirection=i._allowedDirection.bind(i),this._getMaxOffset=i._getMaxOffset.bind(i),this._isRtlNativeStrategy=i._isRtlNativeStrategy.bind(i)},render:function(){var e=at.Z.real().platform;this._$element.addClass(Ap).addClass(Ap+"-"+e).toggleClass("dx-scrollable-scrollbars-hidden",!this._isScrollbarVisible()),this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._renderScrollbars()},updateRtlPosition:function(i){i&&this.option("rtlEnabled")&&this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._moveScrollbars()},_renderScrollbars:function(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass("dx-scrollable-scrollbar-simulated"),this._renderScrollbar(Il),this._renderScrollbar(Cu)},_renderScrollbar:function(i){this._isDirection(i)&&(this._scrollbars[i]=new uC((0,b.Z)("<div>").appendTo(this._$element),{direction:i,expandable:this._component.option("scrollByThumb")}))},handleInit:J.ZT,handleStart:J.ZT,handleMove:function(i){this._isLocked()?i.cancel=!0:this._allowedDirection()&&(i.originalEvent.isScrollingEvent=!0)},handleEnd:J.ZT,handleCancel:J.ZT,handleStop:J.ZT,_eachScrollbar:function(i){i=i.bind(this),(0,j.S6)(this._scrollbars||{},function(e,t){i(t,e)})},createActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")},_createActionArgs:function(){var{left:i,top:e}=this.location();return{event:this._eventForUserAction,scrollOffset:this._getScrollOffset(),reachedLeft:this._isRtlNativeStrategy()?this._isReachedRight(-i):this._isReachedLeft(i),reachedRight:this._isRtlNativeStrategy()?this._isReachedLeft(-Math.abs(i)):this._isReachedRight(i),reachedTop:this._isDirection(Il)?Math.round(e)>=0:void 0,reachedBottom:this._isDirection(Il)?Math.round(Math.abs(e)-this._getMaxOffset().top)>=0:void 0}},_getScrollOffset:function(){var{top:i,left:e}=this.location();return{top:-i,left:this._normalizeOffsetLeft(-e)}},_normalizeOffsetLeft(i){return this._isRtlNativeStrategy()?this._getMaxOffset().left+i:i},_isReachedLeft:function(i){return this._isDirection(Cu)?Math.round(i)>=0:void 0},_isReachedRight:function(i){return this._isDirection(Cu)?Math.round(Math.abs(i)-this._getMaxOffset().left)>=0:void 0},_isScrollbarVisible:function(){var{showScrollbar:i}=this.option();return"never"!==i&&!1!==i},handleScroll:function(i){this._eventForUserAction=i,this._moveScrollbars(),this._scrollAction(this._createActionArgs())},_moveScrollbars:function(){var{top:i,left:e}=this._getScrollOffset();this._eachScrollbar(function(t){t.moveTo({top:-i,left:-e}),t.option("visible",!0)}),this._hideScrollbars()},_hideScrollbars:function(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout(function(){this._eachScrollbar(function(i){i.option("visible",!1)})}.bind(this),500)},location:function(){return{left:-this._$container.scrollLeft(),top:-this._$container.scrollTop()}},disabledChanged:J.ZT,update:function(){this._update(),this._updateAction(this._createActionArgs())},_update:function(){this._updateDimensions(),this._updateScrollbars()},_updateDimensions:function(){this._containerSize={height:(0,oe.Cr)(this._$container),width:(0,oe.dz)(this._$container)},this._componentContentSize={height:(0,oe.Cr)(this._component.$content()),width:(0,oe.dz)(this._component.$content())},this._contentSize={height:(0,oe.Cr)(this._$content),width:(0,oe.dz)(this._$content)}},_updateScrollbars:function(){this._eachScrollbar(function(i,e){var t=e===Il?"height":"width";i.option({containerSize:this._containerSize[t],contentSize:this._componentContentSize[t]}),i.update()})},_allowedDirections:function(){return{vertical:this._isDirection(Il)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(Cu)&&this._contentSize.width>this._containerSize.width}},dispose:function(){var i=this._$element.get(0).className,e=new RegExp(Ap+"\\S*","g");e.test(i)&&this._$element.removeClass(i.match(e).join(" ")),k.Z.off(this._$element,"."+gC),k.Z.off(this._$container,"."+gC),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)},_removeScrollbars:function(){this._eachScrollbar(function(i){i.$element().remove()})},scrollBy:function(i){var e=this.location();this._$container.scrollTop(Math.round(-e.top-i.top)),this._$container.scrollLeft(Math.round(-e.left-i.left))},validate:function(i){return!(this.option("disabled")||(0,ce.pR)(i)&&this._isScrolledInMaxDirection(i)||!this._allowedDirection())},_isScrolledInMaxDirection(i){var e=this._$container.get(0);return i.delta>0?i.shiftKey?!e.scrollLeft:!e.scrollTop:i.shiftKey?e.scrollLeft>=this._getMaxOffset().left:e.scrollTop>=this._getMaxOffset().top},getDirection:function(){return this._allowedDirection()}});const Dp=oD;var mC=function(){return[{device:function(){return!Br.nativeScrolling},options:{useNative:!1}},{device:function(i){return!at.Z.isSimulator()&&"desktop"===at.Z.real().deviceType&&"generic"===i.platform},options:{bounceEnabled:!1,scrollByThumb:!0,scrollByContent:Br.touch,showScrollbar:"onHover"}}]};function CC(i,e){for(var t={left:0,top:0},r=e;null!==(a=r)&&void 0!==a&&a.offsetParent&&!r.classList.contains(i);){var a,n=r.offsetParent,s=r.getBoundingClientRect(),o=n.getBoundingClientRect();t.left+=s.left-o.left,t.top+=s.top-o.top,r=r.offsetParent}return t}var bu="vertical",bC="horizontal",Op="both",wC="dx-scrollable-content",ya="dxScrollable",SC="dx-scrollable",yC="dx-scrollable-content",xa="vertical",Xa="horizontal",Rp="both",Lp=El.Z.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{disabled:!1,onScroll:null,direction:xa,showScrollbar:"onScroll",useNative:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,onUpdated:null,onStart:null,onEnd:null,onBounce:null,useSimulatedScrollbar:!1,useKeyboard:!0,inertiaEnabled:!0,updateManually:!1})},_defaultOptionsRules:function(){return this.callBase().concat(mC(),[{device:function(){return Br.nativeScrolling&&"android"===at.Z.real().platform&&!ii.Z.mozilla},options:{useSimulatedScrollbar:!0}}])},_initOptions:function(i){this.callBase(i),"useSimulatedScrollbar"in i||this._setUseSimulatedScrollbar()},_setUseSimulatedScrollbar:function(){this.initialOption("useSimulatedScrollbar")||this.option("useSimulatedScrollbar",!this.option("useNative"))},_init:function(){this.callBase(),this._initScrollableMarkup(),this._locked=!1},_visibilityChanged:function(i){i?(this.update(),this._updateRtlPosition(),this._savedScrollOffset&&this.scrollTo(this._savedScrollOffset),delete this._savedScrollOffset):this._savedScrollOffset=this.scrollOffset()},_initScrollableMarkup:function(){var i=this.$element().addClass(SC),e=this._$container=(0,b.Z)("<div>").addClass("dx-scrollable-container"),t=this._$wrapper=(0,b.Z)("<div>").addClass("dx-scrollable-wrapper");(this._$content=(0,b.Z)("<div>").addClass(yC)).append(i.contents()).appendTo(e),e.appendTo(t),t.appendTo(i)},_dimensionChanged:function(){this.update(),this._updateRtlPosition()},_initMarkup:function(){this.callBase(),this._renderDirection()},_render:function(){this._renderStrategy(),this._attachEventHandlers(),this._renderDisabledState(),this._createActions(),this.update(),this.callBase(),this._updateRtlPosition(!0)},_updateRtlPosition:function(i){this._strategy.updateRtlPosition(i)},_getMaxOffset:function(){var{scrollWidth:i,clientWidth:e,scrollHeight:t,clientHeight:r}=(0,b.Z)(this.container()).get(0);return{left:i-e,top:t-r}},_attachEventHandlers:function(){var i=this._strategy,e={getDirection:i.getDirection.bind(i),validate:this._validate.bind(this),isNative:this.option("useNative"),scrollTarget:this._$container};k.Z.off(this._$wrapper,"."+ya),k.Z.on(this._$wrapper,(0,ce.V4)(io.Z.init,ya),e,this._initHandler.bind(this)),k.Z.on(this._$wrapper,(0,ce.V4)(io.Z.start,ya),i.handleStart.bind(i)),k.Z.on(this._$wrapper,(0,ce.V4)(io.Z.move,ya),i.handleMove.bind(i)),k.Z.on(this._$wrapper,(0,ce.V4)(io.Z.end,ya),i.handleEnd.bind(i)),k.Z.on(this._$wrapper,(0,ce.V4)(io.Z.cancel,ya),i.handleCancel.bind(i)),k.Z.on(this._$wrapper,(0,ce.V4)(io.Z.stop,ya),i.handleStop.bind(i)),k.Z.off(this._$container,"."+ya),k.Z.on(this._$container,(0,ce.V4)("scroll",ya),i.handleScroll.bind(i))},_validate:function(i){return!this._isLocked()&&(this._updateIfNeed(),this._moveIsAllowed(i))},_moveIsAllowed(i){return this._strategy.validate(i)},handleMove(i){this._strategy.handleMove(i)},_prepareDirections(i){this._strategy._prepareDirections(i)},_initHandler:function(){var i=this._strategy;i.handleInit.apply(i,arguments)},_renderDisabledState:function(){this.$element().toggleClass("dx-scrollable-disabled",this.option("disabled")),this.option("disabled")?this._lock():this._unlock()},_renderDirection:function(){this.$element().removeClass("dx-scrollable-"+Xa).removeClass("dx-scrollable-"+xa).removeClass("dx-scrollable-"+Rp).addClass("dx-scrollable-"+this.option("direction"))},_renderStrategy:function(){this._createStrategy(),this._strategy.render(),this.$element().data("dxScrollableStrategy",this._strategy)},_createStrategy:function(){this._strategy=this.option("useNative")?new Dp(this):new vC(this)},_createActions:function(){this._strategy&&this._strategy.createActions()},_clean:function(){this._strategy&&this._strategy.dispose()},_optionChanged:function(i){switch(i.name){case"onStart":case"onEnd":case"onUpdated":case"onScroll":case"onBounce":this._createActions();break;case"direction":this._resetInactiveDirection(),this._invalidate();break;case"useNative":this._setUseSimulatedScrollbar(),this._invalidate();break;case"inertiaEnabled":case"scrollByThumb":case"bounceEnabled":case"useKeyboard":case"showScrollbar":case"useSimulatedScrollbar":this._invalidate();break;case"disabled":this._renderDisabledState(),this._strategy&&this._strategy.disabledChanged();break;case"updateManually":case"scrollByContent":break;case"width":this.callBase(i),this._updateRtlPosition();break;default:this.callBase(i)}},_resetInactiveDirection:function(){var i=this._getInactiveProp();if(i&&(0,We.Ym)()){var e=this.scrollOffset();e[i]=0,this.scrollTo(e)}},_getInactiveProp:function(){var i=this.option("direction");return i===xa?"left":i===Xa?"top":void 0},_location:function(){return this._strategy.location()},_normalizeLocation:function(i){if((0,m.PO)(i)){var e=(0,J.IS)(i.left,i.x),t=(0,J.IS)(i.top,i.y);return{left:(0,m.$K)(e)?-e:void 0,top:(0,m.$K)(t)?-t:void 0}}var r=this.option("direction");return{left:r!==xa?-i:void 0,top:r!==Xa?-i:void 0}},_isLocked:function(){return this._locked},_lock:function(){this._locked=!0},_unlock:function(){this.option("disabled")||(this._locked=!1)},_isDirection:function(i){var e=this.option("direction");return i===xa?e!==Xa:i===Xa?e!==xa:e===i},_updateAllowedDirection:function(){var i=this._strategy._allowedDirections();this._allowedDirectionValue=this._isDirection(Rp)&&i.vertical&&i.horizontal?Rp:this._isDirection(Xa)&&i.horizontal?Xa:this._isDirection(xa)&&i.vertical?xa:null},_allowedDirection:function(){return this._allowedDirectionValue},$content:function(){return this._$content},content:function(){return(0,rt.u)(this._$content)},container:function(){return(0,rt.u)(this._$container)},scrollOffset:function(){return this._strategy._getScrollOffset()},_isRtlNativeStrategy:function(){var{useNative:i,rtlEnabled:e}=this.option();return i&&e},scrollTop:function(){return this.scrollOffset().top},scrollLeft:function(){return this.scrollOffset().left},clientHeight:function(){return(0,oe.Cr)(this._$container)},scrollHeight:function(){return(0,oe.zp)(this.$content())},clientWidth:function(){return(0,oe.dz)(this._$container)},scrollWidth:function(){return(0,oe.Y_)(this.$content())},update:function(){if(this._strategy)return(0,Y.gx)(this._strategy.update()).done(function(){this._updateAllowedDirection()}.bind(this))},scrollBy:function(i){((i=this._normalizeLocation(i)).top||i.left)&&(this._updateIfNeed(),this._strategy.scrollBy(i))},scrollTo:function(i){i=this._normalizeLocation(i),this._updateIfNeed();var e=this._location();this.option("useNative")||(i=this._strategy._applyScaleRatio(i),e=this._strategy._applyScaleRatio(e)),this._isRtlNativeStrategy()&&(e.left=e.left-this._getMaxOffset().left);var t=this._normalizeLocation({left:e.left-(0,J.IS)(i.left,e.left),top:e.top-(0,J.IS)(i.top,e.top)});!t.top&&!t.left||this._strategy.scrollBy(t)},scrollToElement:function(i,e){var t=(0,b.Z)(i),r=this.$content().find(i).length,a=t.parents("."+SC).length-t.parents("."+yC).length==0;if(r&&a){var n={top:0,left:0},s=this.option("direction");s!==xa&&(n.left=this.getScrollElementPosition(t,Xa,e)),s!==Xa&&(n.top=this.getScrollElementPosition(t,xa,e)),this.scrollTo(n)}},getScrollElementPosition:function(i,e,t){var r=this.scrollOffset();return function lD(i,e,t,r,a){var n=(0,ye.Z)({top:0,left:0,right:0,bottom:0},a),s=e===bu,o=s?"top":"left",l=s?"bottom":"right",d=s?"height":"width",u=t["offset".concat((0,ur.MI)(d))],c=t["client".concat((0,ur.MI)(d))],f=t.getBoundingClientRect()[d],p=i.getBoundingClientRect()[d],g=1;Math.abs(f-u)>1&&(g=f/u);var w=CC(wC,i)[o]/g,x=r[o],y=x-w+n[o],E=x-w-p/g+c-n[l];return y<=0&&E>=0?x:x-(Math.abs(y)>Math.abs(E)?E:y)}(i.get(0),e,(0,b.Z)(this.container()).get(0),r,t)},_updateIfNeed:function(){this.option("updateManually")||this.update()},_useTemplates:function(){return!1},isRenovated:function(){return!!Lp.IS_RENOVATED_WIDGET}});(0,It.Z)(ya,Lp);const xC=Lp,Ea=xC;var Pp="dx-group-row",EC="dx-group-cell",wu="dx-freespace-row",IC="dx-column-lines",TC="dx-row-alt",AC="dx-last-row-border";function DC(i){return i?Math.round(i.scrollWidth()-i.clientWidth()):0}function OC(i){var{rowType:e,column:t}=i;return"group"===e&&(0,m.$K)(t.groupIndex)&&!t.showWhenGrouped&&!t.command}function RC(i){var{element:e,watch:t,getter:r,callBack:a}=i;if(t){var n=t(r,a);k.Z.on(e,ns.x,n)}}var wD=function(i,e){var t=(0,ma.xb)(e.text)&&"data"===e.rowType,{text:r}=e,a=i.get(0);t?Te.setEmptyText(i):e.column.encodeHtml?a.textContent=r:a.innerHTML=r},LC={defaultOptions:()=>({hoverStateEnabled:!1,scrolling:{useNative:"auto"},loadPanel:{enabled:"auto",text:ae.Z.format("Loading"),width:200,height:90,showIndicator:!0,indicatorSrc:"",showPane:!0},dataRowTemplate:null,columnAutoWidth:!1,noDataText:ae.Z.format("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1,twoWayBindingEnabled:!0}),views:{rowsView:class yD extends wl{init(){super.init(),this._editingController=this.getController("editing"),this._resizingController=this.getController("resizing"),this._columnsResizerController=this.getController("columnsResizer"),this._focusController=this.getController("focus"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._validatingController=this.getController("validating"),this._errorHandlingController=this.getController("errorHandling"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowHeight=0,this._scrollTop=0,this._scrollLeft=-1,this._scrollRight=0,this._hasHeight=void 0,this._contentChanges=[],this._dataController.loadingChanged.add((e,t)=>{this.setLoading(e,t)}),this._dataController.dataSourceChanged.add(()=>{this._scrollLeft>=0&&!this._dataController.isLoading()&&this._handleScroll({component:this.getScrollable(),forceUpdateScrollPosition:!0,scrollOffset:{top:this._scrollTop,left:this._scrollLeft}})})}_getDefaultTemplate(e){return"empty"===e.command?function(t){t.html("&nbsp;")}:wD}_getDefaultGroupTemplate(e){var t=this.option("summary.texts");return function(r,a){var{data:n}=a,s="".concat(a.column.caption,": ").concat(a.text),o=r.get(0);a.summaryItems&&a.summaryItems.length&&(s+=" ".concat(Te.getGroupRowSummaryText(a.summaryItems,t))),n&&(a.groupContinuedMessage&&a.groupContinuesMessage?s+=" (".concat(a.groupContinuedMessage,". ").concat(a.groupContinuesMessage,")"):a.groupContinuesMessage?s+=" (".concat(a.groupContinuesMessage,")"):a.groupContinuedMessage&&(s+=" (".concat(a.groupContinuedMessage,")"))),e.encodeHtml?o.textContent=s:o.innerHTML=s}}_update(e){}_updateCell(e,t){OC(t)&&e.addClass(EC),super._updateCell.apply(this,arguments)}_getCellTemplate(e){var{column:t}=e;return OC(e)?t.groupCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultGroupTemplate(t)}:("data"===e.rowType||t.command)&&t.cellTemplate?t.cellTemplate:{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(t)}}_createRow(e,t){var r=super._createRow.apply(this,arguments);if(e){var a="group"===e.rowType,n="data"===e.rowType;n&&r.addClass("dx-data-row"),n&&this.option("showRowLines")&&r.addClass("dx-row-lines"),this.option("showColumnLines")&&r.addClass(IC),!1===e.visible&&r.hide(),a&&(r.addClass(Pp),this.setAriaExpandedAttribute(r,e))}return r}_rowPrepared(e,t,r){"data"===t.rowType&&(this.option("rowAlternationEnabled")&&(this._isAltRow(r)&&e.addClass(TC),RC({element:e.get(0),watch:t.watch,getter:()=>this._isAltRow(r),callBack:a=>{e.toggleClass(TC,a)}})),this._setAriaRowIndex(t,e),RC({element:e.get(0),watch:t.watch,getter:()=>t.rowIndex,callBack:()=>this._setAriaRowIndex(t,e)})),super._rowPrepared.apply(this,arguments)}_setAriaRowIndex(e,t){if(t.is("tr")){var{component:r}=this,a="standard"===r.option("scrolling.mode")&&!Te.isVirtualRowRendering(r),n=e.rowIndex+1;a?n=r.pageIndex()*r.pageSize()+n:n+=this._dataController.getRowIndexOffset(),this.setAria("rowindex",n,t)}}setAriaExpandedAttribute(e,t){var r=this.localize(t.isExpanded?"dxDataGrid-ariaExpandedRow":"dxDataGrid-ariaCollapsedRow");this.setAria("roledescription",r,e)}_afterRowPrepared(e){var t=e.args[0],r=this._dataController,a=r.getVisibleRows()[t.rowIndex],n=this.option("integrationOptions.watchMethod");if(t.data&&"data"===t.rowType&&!t.isNewRow&&this.option("twoWayBindingEnabled")&&n&&a){var s=n(()=>r.generateDataValues(t.data,t.columns),()=>{r.repaintRows([a.rowIndex],this.option("repaintChangesOnly"))},{deep:!0,skipImmediate:!0});k.Z.on(t.rowElement,ns.x,s)}}_renderScrollable(e){var t=this.element();if(t.children().length||t.append("<div>"),(e||!this._loadPanel)&&this._renderLoadPanel(t,t.parent(),this._dataController.isLocalStore()),(e||!this.getScrollable())&&this._dataController.isLoaded()){for(var r=this.getColumns(),a=!0,n=0;n<r.length;n++)if(!r[n].width&&!r[n].minWidth){a=!1;break}(this.option("columnAutoWidth")||this._hasHeight||a||this._columnsController._isColumnFixing())&&this._renderScrollableCore(t)}}_handleScroll(e){var t=this.option("rtlEnabled"),r=e.component.option("useNative");this._scrollTop=e.scrollOffset.top,this._scrollLeft=e.scrollOffset.left;var a=e.scrollOffset.left;t&&(this._scrollRight=DC(e.component)-this._scrollLeft,r&&(a=-this._scrollRight),this.isScrollbarVisible(!0)||(this._scrollLeft=-1)),this.scrollChanged.fire((0,ye.Z)((0,ye.Z)({},e.scrollOffset),{left:a}),this.name)}_renderScrollableCore(e){var t=this._createScrollableOptions(),r=this._handleScroll.bind(this);t.onScroll=r,this._scrollable=this._createComponent(e,Ea,t),this._scrollableContainer=this._scrollable&&(0,b.Z)(this._scrollable.container())}_renderLoadPanel(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Te.renderLoadPanel.apply(this,arguments)}_renderContent(e,t,r){return e.empty().append(t),this._findContentElement()}_updateContent(e,t,r){return this._contentChanges.push({newTableElement:e,change:t,isFixedTableRendering:r}),this.waitAsyncTemplates().done(()=>{var a=this._contentChanges;this._contentChanges=[],a.forEach(n=>{var{newTableElement:s,change:o,isFixedTableRendering:l}=n,d=this.getTableElement(l),u=this._findContentElement(l),c=o?.changeType,f=[],p=this.option("highlightChanges"),g=this.addWidgetPrefix("row-inserted-animation");"update"===c?((0,j.S6)(o.rowIndices,(w,x)=>{var y,E=this._getRowElements(s).eq(w),V=null===(y=o.changeTypes)||void 0===y?void 0:y[w],F=o.items&&o.items[w];f.push(()=>{var q,ee=this._getRowElements(d),X=ee.eq(x);switch(V){case"update":if(F){var M=null===(q=o.columnIndices)||void 0===q?void 0:q[w];(0,m.$K)(F.visible)&&F.visible!==X.is(":visible")?X.toggle(F.visible):M?this._updateCells(X,E,M):X.replaceWith(E)}break;case"insert":if(ee.length)X.length?E.insertBefore(X):E.insertAfter(ee.last());else if(d){var le=E.is("tbody")?d:d.children("tbody");E.prependTo(le)}p&&o.isLiveUpdate&&E.addClass(g);break;case"remove":X.remove()}})}),(0,j.S6)(f,function(){this()}),s.remove()):(this.setTableElement(s,l),u.addClass(this.addWidgetPrefix("content")),this._setGridRole(u),this._renderContent(u,s,l))})}).fail(()=>{this._contentChanges=[]})}_getGridRoleName(){return"grid"}_setGridRole(e){var t,r=!(null!==(t=this._dataController)&&void 0!==t&&t.isEmpty()),a=this._getGridRoleName();e?.length&&r&&this.setAria("role",a,e)}_createEmptyRow(e,t,r){var a,n=this._createRow(),s=t?this.getFixedColumns():this.getColumns();n.addClass(e).toggleClass(IC,this.option("showColumnLines"));for(var o=0;o<s.length;o++)a=this._createCell({column:s[o],rowType:"freeSpace",columnIndex:o,columns:s}),(0,m.kE)(r)&&a.css("height",r),n.append(a);return this.setAria("role","presentation",n),n}getFixedColumns(){throw new Error("Method not implemented.")}_appendEmptyRow(e,t,r){var a=this._getBodies(e),n=!a.length||t.is("tbody"),s=n?e:a;if("top"===r){if(s.first().prepend(t),n){var o=s.children("colgroup");s.prepend(o)}}else s.last().append(t)}_renderFreeSpaceRow(e,t){var r=this._createEmptyRow(wu);r=this._wrapRowIfNeed(e,r,"refresh"===t?.changeType),this._appendEmptyRow(e,r)}_checkRowKeys(e){var t=this,r=t._getRows(e),a=t._dataController.store()&&t._dataController.store().key();a&&r.some(n=>{if("data"===n.rowType&&void 0===n.key)return t._dataController.fireError("E1046",a),!0})}_needUpdateRowHeight(e){return e>0&&!this._rowHeight}_getRowsHeight(e){return(e=e||this._tableElement).children("tbody").children().not(".dx-virtual-row").not(".".concat(wu)).toArray().reduce((r,a)=>r+(0,di.l)(a).height,0)}_updateRowHeight(){var e=this.getTableElement(),t=this._dataController.items().length;if(e&&this._needUpdateRowHeight(t)){var r=this._getRowsHeight(e);this._rowHeight=r/t}}_findContentElement(e){var t=this.element(),r=this.getScrollable();if(t)return r&&(t=(0,b.Z)(r.content())),t.children().first()}_getRowElements(e){var t=super._getRowElements(e);return t&&t.not(".".concat(wu))}_getFreeSpaceRowElements(e){var t=e||this.getTableElements();return t&&t.children("tbody").children(".".concat(wu))}_getNoDataText(){return this.option("noDataText")}_rowClick(e){var t=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowClick",(0,N.l)({evaluate:r=>(0,Dt.vb)(r)(t.data)},e,t))}_rowDblClick(e){var t=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowDblClick",(0,N.l)({},e,t))}_getColumnsCountBeforeGroups(e){for(var t=0;t<e.length;t++)if("groupExpand"===e[t].type)return t;return 0}_getGroupCellOptions(e){var t=this._getColumnsCountBeforeGroups(e.columns),r=(e.row.groupIndex||0)+t;return{columnIndex:r,colspan:e.columns.length-r-1}}_needWrapRow(){return super._needWrapRow.apply(this,arguments)||!!this.option("dataRowTemplate")}_renderCells(e,t){"group"===t.row.rowType?this._renderGroupedCells(e,t):t.row.values&&super._renderCells(e,t)}_renderGroupedCells(e,t){for(var a,o,{row:r}=t,{columns:n}=t,{rowIndex:s}=r,l=this._getGroupCellOptions(t),d=0;d<=l.columnIndex;d++)d===l.columnIndex&&n[d].allowCollapsing&&"infinite"!==t.scrollingMode?(o=!!r.isExpanded,a=n[d]):(o=null,a={command:"expand",cssClass:n[d].cssClass}),this._needRenderCell(d,t.columnIndices)&&this._renderCell(e,{value:o,row:r,rowIndex:s,column:a,columnIndex:d,columnIndices:t.columnIndices,change:t.change});var u=(0,di.q)(this.option("rtlEnabled")),c=(0,N.l)({},n[l.columnIndex],{command:null,type:null,cssClass:null,width:null,showWhenGrouped:!1,alignment:u});l.colspan>1&&(c.colspan=l.colspan),this._needRenderCell(l.columnIndex+1,t.columnIndices)&&this._renderCell(e,{value:r.values[r.groupIndex],row:r,rowIndex:s,column:c,columnIndex:l.columnIndex+1,columnIndices:t.columnIndices,change:t.change})}_renderRows(e,t){var r=this.option("scrolling.mode");super._renderRows(e,(0,N.l)({scrollingMode:r},t)),this._checkRowKeys(t.change),this._renderFreeSpaceRow(e,t.change),this._hasHeight||this.updateFreeSpaceRowHeight(e)}_renderDataRowByTemplate(e,t,r){var{row:a}=t,n=(0,N.l)({columns:t.columns},a),s=this._createRow(a,"tbody");s.appendTo(e),this.renderTemplate(s,r,n,!0,t.change),this._rowPrepared(s,n,t.row)}_renderRow(e,t){var{row:r}=t,{rowTemplate:a}=this.option(),n=this.option("dataRowTemplate");"data"===r.rowType&&n?this._renderDataRowByTemplate(e,t,n):"data"!==r.rowType&&"group"!==r.rowType||(0,m.$K)(r.groupIndex)||!a?super._renderRow(e,t):this.renderTemplate(e,a,(0,N.l)({columns:t.columns},r),!0)}_renderTable(e){var t=this,r=super._renderTable(e);return(0,m.$K)(t.getTableElement())?t._renderScrollable():(t.setTableElement(r),t._renderScrollable(!0),t.resizeCompleted.add(function a(){var n=t.getScrollable();n&&t.element().closest((0,We.Jj)().document).length&&(t.resizeCompleted.remove(a),n._visibilityChanged(!0))})),r}_createTable(){var e=super._createTable.apply(this,arguments);return(this.option().rowTemplate||this.option().dataRowTemplate)&&e.appendTo(this.component.$element()),e}_renderCore(e){var t=this.element();t.addClass(this.addWidgetPrefix("rowsview")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")),t.toggleClass("dx-empty",this._dataController.isEmpty()),this.setAria("role","presentation",t);var r=this._renderTable({change:e}),a=this._updateContent(r,e);return super._renderCore(e),this._lastColumnWidths=null,a}_getRows(e){return e&&e.items||this._dataController.items()}_getCellOptions(e){var{column:t}=e,{row:r}=e,{data:a}=r,n=r&&r.summaryCells,{value:s}=e,o=Te.getDisplayValue(t,s,a,r.rowType),l=super._getCellOptions(e);if(l.value=s,l.oldValue=e.oldValue,l.displayValue=o,l.row=r,l.key=r.key,l.data=a,l.rowType=r.rowType,l.values=r.values,l.text=t.command?"":Te.formatValue(o,t),l.rowIndex=r.rowIndex,l.summaryItems=n&&n[e.columnIndex],l.resized=t.resizedCallbacks,(0,m.$K)(t.groupIndex)&&!t.command){var d=this.option("grouping.texts"),u=this.option("scrolling.mode");"virtual"!==u&&"infinite"!==u&&(l.groupContinuesMessage=a&&a.isContinuationOnNextPage&&d&&d.groupContinuesMessage,l.groupContinuedMessage=a&&a.isContinuation&&d&&d.groupContinuedMessage)}return l}_setRowsOpacityCore(e,t,r,a){var n=this._columnsController,s=n.getColumns(),o=s&&s[r],l=o&&o.isBand&&o.index;(0,j.S6)(e,(d,u)=>{if(!(0,b.Z)(u).hasClass(Pp))for(var c=0;c<t.length&&(!((0,m.kE)(l)&&n.isParentBandColumn(t[c].index,l)||t[c].index===r)||(e.eq(d).children().eq(c).css({opacity:a}),(0,m.kE)(l)));c++);})}_getDevicePixelRatio(){return(0,We.Jj)().devicePixelRatio}renderNoDataText(){return Te.renderNoDataText.apply(this,arguments)}getCellOptions(e,t){var a,n,r=this._dataController.items()[e];return r&&(n=(0,m.HD)(t)?this._columnsController.columnOption(t):this._columnsController.getVisibleColumns()[t])&&(a=this._getCellOptions({value:n.calculateCellValue(r.data),rowIndex:r.rowIndex,row:r,column:n})),a}getRow(e){if(e>=0){var t=this._getRowElements();if(t.length>e)return(0,b.Z)(t[e])}}updateFreeSpaceRowHeight(e){var t=this._dataController,r=t.items(!0).length,a=this._findContentElement(),n=this._getFreeSpaceRowElements(e);if(n&&a&&t.totalCount()>=0){var s=!1;if(r>0)if(this._hasHeight)n.hide(),(0,J.Su)(()=>{var d=this.getScrollbarWidth(!0),u=(0,oe.Cr)(this.element())-d,f=u-(0,oe.zp)(a)>0,p=this._getRowsHeight(a.children().first()),g=e||this.getTableElements(),y=u-p-Math.ceil(parseFloat(g.css("borderTopWidth")))-this._getHeightCorrection();f&&(0,J.g0)(()=>{n.css("height",y),s=!0,n.show()}),(0,J.g0)(()=>this._updateLastRowBorder(s))});else{var o=t.pageSize()-r,l=this.option("scrolling.mode");o>0&&t.pageCount()>1&&"virtual"!==l&&"infinite"!==l&&((0,lr.QQ)(n,o*this._rowHeight),s=!0),!s&&e?(0,lr.QQ)(n,0):n.toggle(s),this._updateLastRowBorder(s)}else n.css("height",0),n.show(),this._updateLastRowBorder(!0)}}_getHeightCorrection(){var e=ii.Z.webkit&&this._getDevicePixelRatio()>=2,t=ii.Z.chrome&&ii.Z.version>=91,r=ii.Z.mozilla&&ii.Z.version>=70&&!this.option("showRowLines");return e||r||t?1:0}_columnOptionChanged(e){var{optionNames:t}=e;e.changeTypes.grouping||(t.width||t.visibleWidth)&&(super._columnOptionChanged(e),this._fireColumnResizedCallbacks())}getScrollable(){return this._scrollable}_handleDataChanged(e){switch(e.changeType){case"refresh":case"prepend":case"append":case"update":this.render(null,e);break;default:this._update(e)}}publicMethods(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement","getRowElement","getScrollable"]}contentWidth(){return(0,oe.dz)(this.element())-this.getScrollbarWidth()}getScrollbarWidth(e){var t=this._scrollableContainer&&this._scrollableContainer.get(0),r=0;return t&&(e?(r=t.clientHeight?t.offsetHeight-t.clientHeight:0,r+=function(i){var e=i.getScrollable();return e?Math.ceil(parseFloat((0,b.Z)(e.content()).css("paddingBottom"))):0}(this)):r=t.clientWidth?t.offsetWidth-t.clientWidth:0),r>0?r:0}_fireColumnResizedCallbacks(){for(var e=this._lastColumnWidths||[],t=[],r=this.getColumns(),a=0;a<r.length;a++)t[a]=r[a].visibleWidth,r[a].resizedCallbacks&&!(0,m.$K)(r[a].groupIndex)&&e[a]!==t[a]&&r[a].resizedCallbacks.fire(t[a]);this._lastColumnWidths=t}_updateLastRowBorder(e){this.option("showBorders")&&!e?this.element().addClass(AC):this.element().removeClass(AC)}_updateScrollable(){var e=Ea.getInstance(this.element());e&&(e.update(),(e.option("useNative")||!e?.isRenovated())&&this._updateHorizontalScrollPosition())}_updateHorizontalScrollPosition(){var e=this.getScrollable(),t=e&&e.scrollOffset().left;if(this.option("rtlEnabled")){var a=DC(e);a-t!==this._scrollRight&&(this._scrollLeft=a-this._scrollRight)}this._scrollLeft>=0&&t!==this._scrollLeft&&e.scrollTo({x:this._scrollLeft})}_resizeCore(){var e=this;e._fireColumnResizedCallbacks(),e._updateRowHeight(),(0,J.g0)(()=>{e._renderScrollable(),e.renderNoDataText(),e.updateFreeSpaceRowHeight(),(0,J.Su)(()=>{e._updateScrollable()})})}scrollTo(e){var t=this.element(),r=t&&Ea.getInstance(t);r&&r.scrollTo(e)}height(e){var t=this.element();if(0===arguments.length)return t?(0,oe.zp)(t,!0):0;(0,m.$K)(e)&&t&&(this.hasHeight("auto"!==e),(0,lr.QQ)(t,e))}hasHeight(e){if(0===arguments.length)return!!this._hasHeight;this._hasHeight=e}setLoading(e,t){var r=this._loadPanel,a=this._dataController,n=this.option("loadPanel")||{},s=a.isLoaded()?n.animation:null,o=this.element();if((0,We.Ym)()&&(!r&&void 0!==t&&a.isLocalStore()&&"auto"===n.enabled&&o&&(this._renderLoadPanel(o,o.parent()),r=this._loadPanel),r)){var l={message:t||n.text,animation:s,visible:e};e&&(l.position=Te.calculateLoadPanelPosition(o)),clearTimeout(this._hideLoadingTimeoutID),r.option("visible")&&!e?this._hideLoadingTimeoutID=setTimeout(()=>{r.option(l)},200):r.option(l)}}setRowsOpacity(e,t){var r=this._getRowElements().not(".".concat(Pp))||[];this._setRowsOpacityCore(r,this.getColumns(),e,t)}_getCellElementsCore(e){var t=super._getCellElementsCore.apply(this,arguments);if(t){var r=t.filter(".".concat(EC)).index();if(r>=0&&t.length>r+1)return t.slice(0,r+1)}return t}_getBoundaryVisibleItemIndex(e,t){var r=0,a=0,n=0,s=this._scrollTop,o=this._findContentElement(),l=o&&o.offset().top,d=this._dataController.items(),u=this.getTableElement();if(d.length&&u){var c=this._getRowElements(u).filter(":visible");for(e||(s+=(0,oe.zp)(this._hasHeight?this.element():(0,We.Jj)())),r=0;r<d.length;r++){a=n;var p=(0,b.Z)(c).eq(r);if(p.length&&(n=p.offset(),(n=(e?n.top:n.top+(0,oe.zp)(p))-l)>s)){r&&(t||2*s<Math.round(n+a))&&r--;break}}r&&r===d.length&&r--}return r}getTopVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!0,e)}getBottomVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!1,e)}getTopVisibleRowData(){var e=this.getTopVisibleItemIndex(),t=this._dataController.items();if(t[e])return t[e].data}_scrollToElement(e,t){var r=this.getScrollable();r&&r.scrollToElement(e,t)}optionChanged(e){switch(super.optionChanged(e),e.name){case"wordWrapEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"dataRowTemplate":case"twoWayBindingEnabled":this._invalidate(!0,!0),e.handled=!0;break;case"scrolling":this._rowHeight=null,this._tableElement=null,e.handled=!0;break;case"rtlEnabled":this._rowHeight=null,this._tableElement=null;break;case"loadPanel":this._tableElement=null,this._invalidate(!0,"loadPanel.enabled"!==e.fullName),e.handled=!0;break;case"noDataText":this.renderNoDataText(),e.handled=!0}}setAriaOwns(e,t,r){var a,n=this._findContentElement(),s=this.getTableElement();s?.length&&this.setAria("owns","".concat(e??""," ").concat(null!==(a=s.attr("id"))&&void 0!==a?a:""," ").concat(t??"").trim(),n)}dispose(){super.dispose(),clearTimeout(this._hideLoadingTimeoutID),this._scrollable&&this._scrollable.dispose()}setScrollerSpacing(e,t){}_restoreErrorRow(e){}}}};He.registerModule("rows",LC);var Yt=be(4383),In=be(1923),Bp=be(1120),Ia=be(1554),PC=function xD(i){return class{constructor(){throw new Error("Module '".concat(i,"' not found"))}static getInstance(){}}}("TextBox");const us={_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){var i=this.$element(),e=this.option("searchEnabled"),t=this._addWidgetPrefix("search"),r=this._addWidgetPrefix("with-search");if(!e)return i.removeClass(r),void this._removeSearchBox();var a=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(a):(i.addClass(r),this._$searchEditorElement=(0,b.Z)("<div>").addClass(t).prependTo(i),this._searchEditor=this._createComponent(this._$searchEditorElement,PC,a))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){var i=this,e=i.option("searchEditorOptions"),t=ae.Z.format("Search");return(0,N.l)({mode:"search",placeholder:t,tabIndex:i.option("tabIndex"),value:i.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":t},onValueChanged:function(r){var a=i.option("searchTimeout");i._valueChangeDeferred=new Y.BH,clearTimeout(i._valueChangeTimeout),i._valueChangeDeferred.done(function(){this.option("searchValue",r.value)}.bind(i)),r.event&&"input"===r.event.type&&a?i._valueChangeTimeout=setTimeout(function(){i._valueChangeDeferred.resolve()},a):i._valueChangeDeferred.resolve()}},e)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(i,e){this.option("searchEnabled")&&this._toggleFocusClass(e,this.$element()),this.callBase(i,e)},getOperationBySearchMode:function(i){return"equals"===i?"=":i},_optionChanged:function(i){switch(i.name){case"searchEnabled":case"searchEditorOptions":this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource)return void Rt.Z.log("W1009");"searchMode"===i.name?this._dataSource.searchOperation(this.getOperationBySearchMode(i.value)):this._dataSource[i.name](i.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(i)}},focus:function(){this.option("focusedElement")||!this.option("searchEnabled")?this.callBase():this._searchEditor&&this._searchEditor.focus()},_cleanAria:function(){var i=this.$element();this.setAria({role:null,activedescendant:null},i),i.attr("tabIndex",null)},_clean(){this.callBase(),this._cleanAria()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(i){PC=i}};var Su=be(5710),Ta=be(6056),no=be(8287),ED=dr.Z.inherit({ctor:function(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes:function(i,e){var t=this;(0,j.S6)(i,function(r,a){var n=(0,m.$K)(e)?e:t._getParentId(a),s=t._convertItemToNode(a,n);t._dataStructure.push(s),t._checkForDuplicateId(s.internalFields.key),t._indexByKey[s.internalFields.key]=t._dataStructure.length-1,t._itemHasChildren(a)&&t._convertItemsToNodes(t._dataAccessors.getters.items(a),s.internalFields.key)})},_checkForDuplicateId:function(i){if((0,m.$K)(this._indexByKey[i]))throw Rt.Z.Error("E1040",i)},_getParentId:function(i){return"plain"===this._dataType?this._dataAccessors.getters.parentKey(i):void 0},_itemHasChildren:function(i){if("plain"!==this._dataType){var e=this._dataAccessors.getters.items(i);return e&&e.length}},_getUniqueKey:function(i){var e=this._dataAccessors.getters.key,t=e(i);return e&&(t||0===t)&&(0,m.pt)(t)?t:this.getItemsCount()},_convertItemToNode:function(i,e){this._itemsCount++,!1!==i.visible&&this._visibleItemsCount++;var t={internalFields:{disabled:this._dataAccessors.getters.disabled(i,{defaultValue:!1}),expanded:this._dataAccessors.getters.expanded(i,{defaultValue:!1}),selected:this._dataAccessors.getters.selected(i,{defaultValue:!1}),key:this._getUniqueKey(i),parentKey:(0,m.$K)(e)?e:this._rootValue,item:this._makeObjectFromPrimitive(i),childrenKeys:[]}};return(0,N.l)(t,i),delete t.items,t},setChildrenKeys:function(){var i=this;(0,j.S6)(this._dataStructure,function(e,t){if(t.internalFields.parentKey!==i._rootValue){var r=i.getParentNode(t);r&&r.internalFields.childrenKeys.push(t.internalFields.key)}})},_makeObjectFromPrimitive:function(i){if((0,m.pt)(i)){var e=i;this._dataAccessors.setters.key(i={},e)}return i},_convertToPublicNode:function(i,e){if(!i)return null;var t={text:this._dataAccessors.getters.display(i),key:i.internalFields.key,selected:i.internalFields.selected,expanded:i.internalFields.expanded,disabled:i.internalFields.disabled,parent:e||null,itemData:i.internalFields.item,children:[],items:[]};return t.parent&&(t.parent.children.push(t),t.parent.items.push(t)),t},convertToPublicNodes:function(i,e){if(!i.length)return[];var t=this,r=[];return(0,j.S6)(i,function(a,n){n=(0,m.pt)(n)?t._getByKey(n):n;var s=t._convertToPublicNode(n,e);s.children=t.convertToPublicNodes(n.internalFields.childrenKeys,s),r.push(s),n.internalFields.publicNode=s}),r},setDataAccessors:function(i){this._dataAccessors=i},_getByKey:function(i){return this._dataStructure[this.getIndexByKey(i)]||null},getParentNode:function(i){return this._getByKey(i.internalFields.parentKey)},getByKey:function(i,e){if(null==e)return null;var s,t=null,r=this;return s=e,(0,j.S6)(i,function(o,l){if((l.internalFields&&l.internalFields.key||r._dataAccessors.getters.key(l)).toString()===s.toString())return t=l,!1}),t},getItemsCount:function(){return this._itemsCount},getVisibleItemsCount:function(){return this._visibleItemsCount},updateIndexByKey:function(){var i=this;this._indexByKey={},(0,j.S6)(this._dataStructure,function(e,t){i._checkForDuplicateId(t.internalFields.key),i._indexByKey[t.internalFields.key]=e})},updateChildrenKeys:function(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys:function(){this._indexByKey={},(0,j.S6)(this._dataStructure,function(i,e){e.internalFields.childrenKeys=[]})},getIndexByKey:function(i){return this._indexByKey[i]},createPlainStructure:function(i,e,t){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=e,this._dataType=t,this._indexByKey={},this._convertItemsToNodes(i),this.setChildrenKeys(),this._dataStructure}});const ID=ED;var so="expanded",hs="selected";us.setEditorClass(Su.Z);var AD=dr.Z.inherit({ctor:function(i){this.options={},(0,N.l)(this.options,this._defaultOptions(),i),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption:function(i,e){this.options[i]=e,"recursiveSelection"===i&&this._updateSelection()},_defaultOptions:function(){return{dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new ID,onNodeChanged:J.ZT,sort:null}},_createInternalDataStructure:function(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection:function(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(hs)},_updateExpansion:function(i){this.options.recursiveExpansion&&(i?this._updateOneBranch(i):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray(so)},_updateNodesKeysArray:function(i){var e=this,t=[];return(0,j.S6)(e._getDataBySelectionMode(),function(r,a){e._isNodeVisible(a)&&a.internalFields[i]&&(i===so||e.options.multipleSelection?t.push(a.internalFields.key):(t.length&&e.toggleSelection(t[0],!1,!0),t=[a.internalFields.key]))}),t},_getDataBySelectionMode:function(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:function(i){return!1!==i.internalFields.item.visible},_getByKey:function(i,e){return i===this._dataStructure?this.options.dataConverter._getByKey(e):this.options.dataConverter.getByKey(i,e)},_setChildrenSelection:function(){var i=this;(0,j.S6)(this._dataStructure,function(e,t){if(t.internalFields.childrenKeys.length){var r=t.internalFields.selected;!0===r&&i._toggleChildrenSelection(t,r)}})},_setParentSelection:function(){var i=this;(0,j.S6)(this._dataStructure,function(e,t){i.options.dataConverter.getParentNode(t)&&t.internalFields.parentKey!==i.options.rootValue&&i._iterateParents(t,function(a){var n=i._calculateSelectedState(a);i._setFieldState(a,hs,n)})})},_setParentExpansion:function(){var i=this;(0,j.S6)(this._dataStructure,function(e,t){t.internalFields.expanded&&i._updateOneBranch(t.internalFields.key)})},_updateOneBranch:function(i){var e=this,t=this.getNodeByKey(i);e._iterateParents(t,function(r){e._setFieldState(r,so,!0)})},_iterateChildren:function(i,e,t,r){if((0,m.mf)(t)){var a=this,n=i.internalFields.key;-1===(r=r||[]).indexOf(n)&&(r.push(n),(0,j.S6)(i.internalFields.childrenKeys,function(s,o){var l=a.getNodeByKey(o);t(l),l.internalFields.childrenKeys.length&&e&&a._iterateChildren(l,e,t,r)}))}},_iterateParents:function(i,e,t){if(i.internalFields.parentKey!==this.options.rootValue&&(0,m.mf)(e)){var r=i.internalFields.key;if(-1===(t=t||[]).indexOf(r)){t.push(r);var a=this.options.dataConverter.getParentNode(i);a&&(e(a),a.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(a,e,t))}}},_calculateSelectedState:function(i){for(var e=i.internalFields.childrenKeys.length,t=0,r=0,a=!1,n=0;n<=e-1;n++){var s=this.getNodeByKey(i.internalFields.childrenKeys[n]),l=s.internalFields.selected;!1===s.internalFields.item.visible?r++:l?t++:void 0===l&&(t+=.5)}return t&&(a=t===e-r||void 0),a},_toggleChildrenSelection:function(i,e){var t=this;this._iterateChildren(i,!0,function(r){t._isNodeVisible(r)&&t._setFieldState(r,hs,e)})},_setFieldState:function(i,e,t){i.internalFields[e]!==t&&(i.internalFields[e]=t,i.internalFields.publicNode&&(i.internalFields.publicNode[e]=t),this.options.dataAccessors.setters[e](i.internalFields.item,t),this.options.onNodeChanged(i))},_markChildren:function(i){var e=this;(0,j.S6)(i,function(t,r){var a=e.getIndexByKey(r),n=e.getNodeByKey(r);e._dataStructure[a]=0,n.internalFields.childrenKeys.length&&e._markChildren(n.internalFields.childrenKeys)})},_removeNode:function(i){var e=this.getNodeByKey(i);this._dataStructure[this.getIndexByKey(i)]=0,this._markChildren(e.internalFields.childrenKeys);var t=this,r=0,a=(0,N.l)([],this._dataStructure);(0,j.S6)(a,function(n,s){s||(t._dataStructure.splice(n-r,1),r++)})},_addNode:function(i){var e=this.options.dataConverter,t=e._convertItemToNode(i,this.options.dataAccessors.getters.parentKey(i));this._dataStructure=this._dataStructure.concat(t),this._initialDataStructure=this._initialDataStructure.concat(t),e._dataStructure=e._dataStructure.concat(t)},_updateFields:function(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys:function(){return this._selectedNodesKeys},getExpandedNodesKeys:function(){return this._expandedNodesKeys},getData:function(){return this._dataStructure},getFullData:function(){return this._initialDataStructure},getNodeByItem:function(i){var e=null;return(0,j.S6)(this._dataStructure,function(t,r){if(r.internalFields.item===i)return e=r,!1}),e},getNodesByItems:function(i){var e=this,t=[];return(0,j.S6)(i,function(r,a){var n=e.getNodeByItem(a);n&&t.push(n)}),t},getNodeByKey:function(i,e){return this._getByKey(e||this._getDataBySelectionMode(),i)},getTreeNodes:function(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount:function(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount:function(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:function(i){return i.internalFields.publicNode},getRootNodes:function(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes:function(i){return(0,Ta.Z)(this._dataStructure,{langParams:this.options.langParams}).filter(["internalFields.parentKey",i]).toArray()},getIndexByKey:function(i){return this.options.dataConverter.getIndexByKey(i)},addItem:function(i){this._addNode(i),this._updateFields()},removeItem:function(i){this._removeNode(i),this._updateFields()},toggleSelection:function(i,e,t){var r=this._isSingleModeUnselect(e),a=this._getByKey(t||r?this._initialDataStructure:this._dataStructure,i);this._setFieldState(a,hs,e),this.options.recursiveSelection&&!t&&(e?this._setChildrenSelection():this._toggleChildrenSelection(a,e),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(hs)},_isSingleModeUnselect:function(i){return!this.options.multipleSelection&&!i},toggleNodeDisabledState:function(i,e){var t=this.getNodeByKey(i);this._setFieldState(t,"disabled",e)},toggleSelectAll:function(i){if((0,m.$K)(i)){var e=this,t=e._selectedNodesKeys[e._selectedNodesKeys.length-1],r=e._isSingleModeUnselect(i)?this._initialDataStructure:this._dataStructure;(0,j.S6)(r,function(a,n){e._isNodeVisible(n)&&e._setFieldState(n,hs,i)}),e._selectedNodesKeys=e._updateNodesKeysArray(hs),!i&&e.options.selectionRequired&&e.toggleSelection(t,!0)}},isAllSelected:function(){return!!this.getSelectedNodesKeys().length&&(this.getSelectedNodesKeys().length===this.getVisibleItemsCount()||void 0)},toggleExpansion:function(i,e){var t=this.getNodeByKey(i);this._setFieldState(t,so,e),e&&this._updateExpansion(i),this._expandedNodesKeys=this._updateNodesKeysArray(so)},isFiltered:function(i){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[i]).length},_createCriteria:function(i,e,t){var r=[];return Array.isArray(i)?((0,j.S6)(i,function(a,n){r.push([n,t,e],"or")}),r.pop(),r):[i,t,e]},_filterDataStructure:function(i,e){var t=this.options.searchExpr||this.options.dataAccessors.getters.display,r=us.getOperationBySearchMode(this.options.searchMode),a=this._createCriteria(t,i,r);return(0,Ta.Z)(e=e||this._initialDataStructure,{langParams:this.options.langParams}).filter(a).toArray()},search:function(i){var e=this,t=this._filterDataStructure(i),r=this.options.dataConverter;return function a(n,s){for(var o=n.length;s<o;){var l=n[s];if(l.internalFields.parentKey!==e.options.rootValue){var d=r.getParentNode(l);d?(d.internalFields.expanded||e._setFieldState(d,so,!0),n.includes(d)?s++:(n.splice(s,0,d),a(n,s))):(Rt.Z.log("W1007",l.internalFields.parentKey,l.internalFields.key),s++)}else s++}}(t,0),this.options.sort&&(t=no.Z.queryByOptions((0,Ta.Z)(t),{sort:this.options.sort,langParams:this.options.langParams}).toArray()),r._indexByKey={},(0,j.S6)(t,function(a,n){n.internalFields.childrenKeys=[],r._indexByKey[n.internalFields.key]=a}),r._dataStructure=t,r.setChildrenKeys(),r._dataStructure}});const DD=AD;var oo=be(346),Tl=be(5219),LD=oo.Z.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource:function(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter:function(){var i=this._createDataAdapterAccessors();this._dataAdapter=new DD((0,N.l)({dataAccessors:{getters:i.getters,setters:i.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:J.ZT,_getItemExtraPropNames:J.ZT,_initDynamicTemplates:function(){var i=["text","html","items","icon"].concat(this._getItemExtraPropNames());this._templateManager.addDefaultTemplates({item:new Tl.c(this._addContent.bind(this),i,this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_addContent:function(i,e){i.html(e.html).append(this._getIconContainer(e)).append(this._getTextContainer(e))},_getLinkContainer:function(i,e,t){var{linkAttr:r,url:a}=t,n=(0,m.Kn)(r)?r:{};return(0,b.Z)("<a>").addClass("dx-item-url").attr((0,ye.Z)({},n,{href:a})).append(i).append(e)},_getIconContainer:function(i){if(i.icon){var e=(0,Ia.H)(i.icon);return e.is("img")&&e.attr("alt","".concat(this.NAME," item icon")),e}},_getTextContainer:function(i){return(0,b.Z)("<span>").text(i.text)},_initAccessors:function(){var i=this;(0,j.S6)(this._getAccessors(),function(e,t){i._compileAccessor(t)}),this._compileDisplayGetter()},_getAccessors:function(){return["key","selected","items","disabled","parentId","expanded"]},_getChildNodes:function(i){var e=this,t=[];return(0,j.S6)(i.internalFields.childrenKeys,function(r,a){var n=e._dataAdapter.getNodeByKey(a);t.push(n)}),t},_hasChildren:function(i){return i&&i.internalFields.childrenKeys.length},_compileAccessor:function(i){var e="_"+i+"Getter",t="_"+i+"Setter",r=this.option(i+"Expr");return r?(0,m.mf)(r)?(this[t]=function(a,n){a[r()]=n},void(this[e]=function(a){return a[r()]})):(this[e]=(0,Dt.vb)(r),void(this[t]=(0,Dt.OM)(r))):(this[e]=J.ZT,void(this[t]=J.ZT))},_createDataAdapterAccessors:function(){var i=this,e={getters:{},setters:{}};return(0,j.S6)(this._getAccessors(),function(t,r){var n="_"+r+"Setter",s="parentId"===r?"parentKey":r;e.getters[s]=i["_"+r+"Getter"],e.setters[s]=i[n]}),e.getters.display=this._displayGetter?this._displayGetter:t=>t.text,e},_initMarkup:function(){this.callBase(),this._addWidgetClass()},_addWidgetClass:function(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:J.ZT,_renderItemFrame:function(i,e){var t=this.callBase.apply(this,arguments);return t.toggleClass("dx-state-disabled",!!this._disabledGetter(e)),t},_optionChanged:function(i){switch(i.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(i);break;default:this.callBase(i)}}});const BC=LD;var VC=be(648);const BD=class PD extends VC.Z{_getPlainItems(){return(0,j.UI)(this._collectionWidget.option("items"),function e(t){return t.items?[t].concat((0,j.UI)(t.items,e)):t})}_stringifyItem(e){return JSON.stringify(e,(t,r)=>"template"===t?this._getTemplateString(r):r)}_getTemplateString(e){return"object"==typeof e?(0,b.Z)(e).text():e.toString()}};var Al=be(9216),Dl="dx-menu",VD=Dl+"-no-icons",Vr=Dl+"-item",FD=Vr+"-content",Vp=Vr+"-selected",NC=Vr+"-wrapper",kD=Dl+"-items-container",MD=Vr+"-expanded",HD=Dl+"-separator",ZD=Dl+"-last-group-item",zD=Vr+"-has-text",WD=Vr+"-has-icon",$D=Vr+"-has-submenu",FC=Vr+"-popout",KD=FC+"-container",kC=Vr+"-text",UD={show:50,hide:300},jD="".concat(kC,"-with-url");const MC=(()=>{class i extends BC{_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return Vr}_setAriaSelectionAttribute(){}_selectedItemClass(){return Vp}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return(0,N.l)(super._supportedKeys(),{space:()=>{var t=(0,b.Z)(this.option("focusedElement"));!t.length||!this._isSelectionEnabled()||this.selectItem(t[0])},pageUp:J.ZT,pageDown:J.ZT})}_isSelectionEnabled(){return"single"===this.option("selectionMode")}_init(){this._activeStateUnit=".".concat(Vr),super._init(),this._renderSelectedItem(),this._initActions()}_getLinkContainer(t,r,a){var{linkAttr:n,url:s}=a;return t?.addClass("dx-icon-with-url"),r?.addClass(jD),super._getLinkContainer(t,r,{linkAttr:n,url:s})}_addContent(t,r){var{html:a,url:n}=r;if(n){t.html(a);var s=this._getLinkContainer(this._getIconContainer(r),this._getTextContainer(r),r);t.append(s)}else super._addContent(t,r);t.append(this._getPopoutContainer(r)),this._addContentClasses(r,t.parent())}_getTextContainer(t){var{text:r}=t;if(r){var a=(0,b.Z)("<span>").addClass(kC),n=(0,m.PO)(t)?r:String(t);return a.text(n)}}_getItemExtraPropNames(){return["url","linkAttr"]}_getPopoutContainer(t){var a,r=t.items;if(r&&r.length){var n=(0,b.Z)("<div>").addClass(FC);a=(0,b.Z)("<span>").addClass(KD).append(n)}return a}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(t){if(t){var r=this._dataAdapter.getNodeByItem(t);this._dataAdapter.toggleSelection(r.internalFields.key,!0)}}_renderSelectedItem(){var t=this._dataAdapter.getSelectedNodesKeys(),r=t.length&&t[0],a=this.option("selectedItem");if(r){var n=this._dataAdapter.getNodeByKey(r);if(!1!==n.selectable){if(!a)return void this.option("selectedItem",n.internalFields.item);a!==n.internalFields.item&&(this._dataAdapter.toggleSelection(r,!1),this._selectByItem(a))}}else this._selectByItem(a)}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=(0,Bp.sY)()}_toggleActiveState(t,r,a){if(super._toggleActiveState.apply(this,arguments),this._inkRipple){var n={element:t,event:a};r?this._inkRipple.showWave(n):this._inkRipple.hideWave(n)}}_getShowSubmenuMode(){var t=this.option("showSubmenuMode");return t=(0,m.Kn)(t)?t.name:t,this._isDesktopDevice()?t:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return"desktop"===at.Z.real().deviceType}_initEditStrategy(){this._editStrategy=new BD(this)}_addCustomCssClass(t){t.addClass(this.option("cssClass"))}_itemWrapperSelector(){return".".concat(NC)}_hoverStartHandler(t){var r=this._getItemElementByEventArgs(t);!r||this._isItemDisabled(r)||(t.stopPropagation(),"onHover"===this._getShowSubmenuMode()&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,r),this._getSubmenuDelay("show"))))}_getAvailableItems(t){return super._getAvailableItems(t).filter(function(){return"hidden"!==(0,b.Z)(this).css("visibility")})}_isItemDisabled(t){return this._disabledGetter(t.data(this._itemDataKey()))}_showSubmenu(t){this._addExpandedClass(t)}_addExpandedClass(t){(0,b.Z)(t).addClass(MD)}_getSubmenuDelay(t){var{delay:r}=this.option("showSubmenuMode");return(0,m.$K)(r)?(0,m.Kn)(r)?r[t]:r:UD[t]}_getItemElementByEventArgs(t){var r=(0,b.Z)(t.target);if(r.hasClass(this._itemClass())||r.get(0)===t.currentTarget)return r;for(;!r.hasClass(this._itemClass());)if((r=r.parent()).hasClass("dx-submenu"))return null;return r}_hoverEndHandler(){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(t){return t&&t.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(t,r){if(t.length){this.hasIcons=!1;var a=this._renderContainer(this.$element(),r),n=-1,s=-1;(0,j.S6)(t,(o,l)=>{var d=!1!==l.visible;d&&n<0&&(n=o),n<o&&(l.beginGroup||o===s)&&(s=d?o:o+1),o===s&&n<o&&this._renderSeparator(a),this._renderItem(o,l,a)}),this.hasIcons||a.addClass(VD)}}_renderContainer(t){var r=(0,b.Z)("<ul>");return this.setAria("role","none",r),r.appendTo(t).addClass(kD)}_createDOMElement(t){var r=(0,b.Z)("<li>");return this.setAria("role","none",r),r.appendTo(t).addClass(NC)}_renderItem(t,r,a,n){var s=this.option("items"),o=n||this._createDOMElement(a);s[t+1]&&s[t+1].beginGroup&&o.addClass(ZD);var l=super._renderItem(t,r.internalFields.item,o);r.internalFields.item===this.option("selectedItem")&&l.addClass(Vp),l.attr("tabIndex",-1),this._hasSubmenu(r)&&this.setAria("haspopup","true",l)}_renderItemFrame(t,r,a){var n=a.children(".".concat(Vr));return n.length?n:super._renderItemFrame.apply(this,arguments)}_refreshItem(t,r){var a=this._dataAdapter.getNodeByItem(r),n=t.data(this._itemIndexKey()),s=t.closest("ul"),o=t.closest("li");this._renderItem(n,a,s,o)}_addContentClasses(t,r){var n=!!t.icon,s=!!t.items&&!!t.items.length;r.toggleClass(zD,!!t.text&&!!t.text.length),r.toggleClass(WD,n),this.hasIcons||(this.hasIcons=n),r.toggleClass($D,s)}_getItemContent(t){var r=super._getItemContent(t);return r.length||(r=t.children(".".concat(FD))),r}_postprocessRenderItem(t){var r=(0,b.Z)(t.itemElement),a=this._dataAdapter.getSelectedNodesKeys();a.length&&this._selectedGetter(t.itemData)&&this._isItemSelectable(t.itemData)&&this._dataAdapter.getNodeByItem(t.itemData).internalFields.key===a[0]?(r.addClass(this._selectedItemClass()),this._setAriaSelectionAttribute(r,"true")):this._setAriaSelectionAttribute(r,"false")}_isItemSelectable(t){return!1!==t.selectable}_renderSeparator(t){(0,b.Z)("<li>").appendTo(t).addClass(HD)}_itemClickHandler(t){if(!t._skipHandling){var r=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(t,"onItemClick",{},{beforeExecute:this._itemClick,afterExecute:r.bind(this)}),t._skipHandling=!0}}_itemClick(t){var{event:r,itemData:a}=t.args[0],n=this._getItemElementByEventArgs(r),s=n&&n.find(".".concat("dx-item-url")).get(0);a.url&&s&&s.click()}_updateSubmenuVisibilityOnClick(t){this._updateSelectedItemOnClick(t),"onClick"===this._getShowSubmenuMode()&&this._addExpandedClass(t.args[0].itemElement)}_updateSelectedItemOnClick(t){var r=t.args?t.args[0]:t;if(this._isItemSelectAllowed(r.itemData)){var a=this._dataAdapter.getSelectedNodesKeys(),n=a.length&&this._dataAdapter.getNodeByKey(a[0]);n&&this._toggleItemSelection(n,!1),n&&n.internalFields.item===r.itemData?(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null)):this.selectItem(r.itemData)}}_isItemSelectAllowed(t){var r=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&r&&this._isItemSelectable(t)&&!this._itemsGetter(t)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return(0,J.C$)()}_optionChanged(t){switch(t.name){case"showSubmenuMode":break;case"selectedItem":var r=this._dataAdapter.getNodeByItem(t.value),a=this._dataAdapter.getSelectedNodesKeys()[0];if(r&&r.internalFields.key!==a){if(!1===r.selectable)break;a&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(a),!1),this._toggleItemSelection(r,!0),this._updateSelectedItems()}break;case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(t)}}_toggleItemSelection(t,r){var a=this._getElementByItem(t.internalFields.item);a&&(0,b.Z)(a).toggleClass(Vp),this._dataAdapter.toggleSelection(t.internalFields.key,r)}_getElementByItem(t){var r;return(0,j.S6)(this._itemElements(),(a,n)=>(0,b.Z)(n).data(this._itemDataKey())!==t||(r=n,!1)),r}_updateSelectedItems(t,r){(t||r)&&this._fireSelectionChangeEvent(r,t)}_fireSelectionChangeEvent(t,r){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[t],removedItems:[r]})}selectItem(t){var r=t.nodeType?this._getItemData(t):t,a=this._dataAdapter.getSelectedNodesKeys()[0],n=this.option("selectedItem"),s=this._dataAdapter.getNodeByItem(r);s.internalFields.key!==a&&(a&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(a),!1),this._toggleItemSelection(s,!0),this._updateSelectedItems(n,r),this._setOptionWithoutOptionChange("selectedItem",r))}unselectItem(t){var r=t.nodeType?this._getItemData(t):t,a=this._dataAdapter.getNodeByItem(r),n=this.option("selectedItem");a.internalFields.selected&&(this._toggleItemSelection(a,!1),this._updateSelectedItems(n,null),this._setOptionWithoutOptionChange("selectedItem",null))}}return i.ItemClass=Al.Z,i})();var XD=be(4676),lo=be(1244),HC="dx-menu",Ol=HC+"-item",uo=Ol+"-expanded",yu=HC+"-items-container",ZC=Ol+"-wrapper",cr="dx-submenu",zC="dx-state-hover",UC=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],sO=["up","down","first","last"],jC="dxcontextmenu",oO=(0,We.Jj)();class qC extends MC{getShowEvent(e){var t=null;return(0,m.Kn)(e)?null!==e.name&&(t=e.name||jC):t=e,t}getShowDelay(e){return(0,m.Kn)(e)&&e.delay}_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{showEvent:jC,hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!(0,We.Ym)(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),(0,N.l)(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},(0,j.S6)(UC,(e,t)=>{this._actions[t]=this._createActionByOption(t)||J.ZT})}_setOptionsByReference(){super._setOptionsByReference(),(0,N.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():(0,b.Z)()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return(0,N.l)(super._supportedKeys(),{space:()=>{var e=(0,b.Z)(this.option("focusedElement"));this.hide(),e.length&&this._isSelectionEnabled()&&this.selectItem(e[0])},escape:this.hide})}_getActiveItem(){var e=this._getAvailableItems(),t=e.filter(".".concat("dx-state-focused")),r=e.filter(".".concat(zC));return r.closest(".".concat(yu)).find(".".concat(Ol)).index(t)>=0?t:r.length?r:super._getActiveItem()}_moveFocus(e){var o,t=this._getItemsByLocation(e),r=this._getActiveItem(!0),a=this.itemsContainer().find(".".concat(zC)),s=!(!(0,b.Z)(this.option("focusedElement")).length&&!a.length);switch(e){case"up":o=s?this._prevItem(t):r,this._setFocusedElement(o),r.is(t.first())&&this._actions.onLeftFirstItem(r);break;case"down":o=s?this._nextItem(t):r,this._setFocusedElement(o),r.is(t.last())&&this._actions.onLeftLastItem(r);break;case"right":o=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler(t,e),this._setFocusedElement(o);break;case"left":o=this.option("rtlEnabled")?this._expandSubmenuHandler(t,e):this._hideSubmenuHandler(),this._setFocusedElement(o);break;case"first":o=t.first(),this._setFocusedElement(o);break;case"last":o=t.last(),this._setFocusedElement(o);break;default:return super._moveFocus(e)}}_setFocusedElement(e){e&&0!==e.length&&this.option("focusedElement",(0,rt.u)(e))}_getItemsByLocation(e){var r,t=this._getActiveItem(!0);return sO.includes(e)&&(r=t.closest(".".concat(yu)).children().children()),this._getAvailableItems(r)}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if((0,m.$K)(this._overlay)){var e=this._overlay.$content();super._refreshActiveDescendant(e)}}_hideSubmenuHandler(){var e=this._getActiveItem(!0),t=e.parents(".".concat(uo)).first();return t.length?(this._hideSubmenusOnSameLevel(t),this._hideSubmenu(e.closest(".".concat(cr))),t):(this._actions.onCloseRootSubmenu(e),e)}_expandSubmenuHandler(e,t){var r=this._getActiveItem(!0),a=this._getItemData(r),n=this._dataAdapter.getNodeByItem(a),s=this._hasSubmenu(n),o=r.children(".".concat(cr));if(s&&!r.hasClass("dx-state-disabled"))return(!o.length||"hidden"===o.css("visibility"))&&this._showSubmenu(r),this._nextItem(this._getItemsByLocation(t));this._actions.onExpandLastSubmenu(r)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(!this._overlay){var e=this._getOverlayOptions();this._overlay=this._createComponent((0,b.Z)("<div>").appendTo(this._$element),ss.Z,e);var t=this._overlay.$content();t.addClass("dx-context-menu"),this._addCustomCssClass(t),this._addPlatformDependentClass(t),this._attachContextMenuEvent()}}preventShowingDefaultContextMenuAboveOverlay(){var e=this._itemContainer(),t=(0,ce.V4)(XD.u,this.NAME);k.Z.off(e,t,".".concat(cr)),k.Z.on(e,t,".".concat(cr),(r=>{r.stopPropagation(),r.preventDefault(),k.Z.off(e,t,".".concat(cr))}).bind(this))}_itemContextMenuHandler(e){super._itemContextMenuHandler(e),e.stopPropagation()}_addPlatformDependentClass(e){at.Z.current().phone&&e.addClass("dx-menu-phone-overlay")}_detachShowContextMenuEvents(e){var t=this.getShowEvent(this.option("showEvent"));if(t){var r=(0,ce.V4)(t,this.NAME);this._showContextMenuEventHandler?k.Z.off(it.Z.getDocument(),r,e,this._showContextMenuEventHandler):k.Z.off((0,b.Z)(e),r)}}_attachShowContextMenuEvents(){var e=this._getTarget(),t=this.getShowEvent(this.option("showEvent"));if(t){var r=(0,ce.V4)(t,this.NAME),a=this._createAction(s=>{var o=this.getShowDelay(this.option("showEvent"));o?setTimeout(()=>this._show(s.event),o):this._show(s.event)},{validatingTargetName:"target"}),n=s=>a({event:s,target:(0,b.Z)(s.currentTarget)});a=this._createAction(a),(0,m.ZU)(e)||e.nodeType||(0,m.FJ)(e)?(this._showContextMenuEventHandler=void 0,k.Z.on(e,r,n)):(this._showContextMenuEventHandler=n,k.Z.on(it.Z.getDocument(),r,e,this._showContextMenuEventHandler))}}_hoverEndHandler(e){super._hoverEndHandler(e),e.stopPropagation()}_renderDimensions(){}_renderContainer(e,t){var r=t||this._itemContainer();(e=(0,b.Z)("<div>")).appendTo(r).addClass(cr).css("visibility",t?"hidden":"visible"),e.parent().hasClass("dx-overlay-content")||this._addCustomCssClass(e);var a=super._renderContainer(e);return t?a:this.option("width")?a.css("minWidth",this.option("width")):this.option("height")?a.css("minHeight",this.option("height")):a}_renderSubmenuItems(e,t){this._renderItems(this._getChildNodes(e),t),this._actions.onSubmenuCreated({itemElement:(0,rt.u)(t),itemData:e.internalFields.item,submenuElement:(0,rt.u)(t.children(".".concat(cr)))})}_getOverlayOptions(){var e=this.option("position"),t={focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:r=>this._hideOnOutsideClickHandler(r),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:e.at,my:e.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:oO};return t}_overlayShownActionHandler(e){this._actions.onShown(e)}_overlayHidingActionHandler(e){this._actions.onHiding(e),e.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(e){this._actions.onHidden(e)}_shouldHideOnOutsideClick(e){var{closeOnOutsideClick:t,hideOnOutsideClick:r}=this.option();return(0,m.mf)(r)?r(e):(0,m.mf)(t)?t(e):r||t}_hideOnOutsideClickHandler(e){if(!this._shouldHideOnOutsideClick(e))return!1;if(it.Z.isDocument(e.target))return!0;var t=this._getActiveItemsContainer(e.target),r=this._getItemsContainers(),a=this._searchActiveItem(e.target),n=this.$element().parents(".".concat(Ol)),s=a[0]===n[0]&&a.length&&n.length;return!(this._isIncludeOverlay(t,r)&&a.length)&&!s||("onClick"===this._getShowSubmenuMode()&&this._hideAllShownChildSubmenus(a),!1)}_getActiveItemsContainer(e){return(0,b.Z)(e).closest(".".concat(yu))}_getItemsContainers(){return this._overlay.$content().find(".".concat(yu))}_searchActiveItem(e){return(0,b.Z)(e).closest(".".concat(Ol)).eq(0)}_isIncludeOverlay(e,t){var r=!1;return(0,j.S6)(t,(a,n)=>{e.is(n)&&!r&&(r=!0)}),r}_hideAllShownChildSubmenus(e){var t=e.find(".".concat(cr)),r=(0,N.l)([],this._shownSubmenus);t.length>0&&(0,j.S6)(r,(a,n)=>{var s=this._searchActiveItem(n.context).parent();s.parent().is(e.parent().parent())&&!s.is(e.parent())&&this._hideSubmenu(n)})}_showSubmenu(e){var t=this._dataAdapter.getNodeByItem(this._getItemData(e));if(this._hideSubmenusOnSameLevel(e),this._hasSubmenu(t)){var r=e.children(".".concat(cr)),a=r.length;super._showSubmenu(e),a||this._renderSubmenuItems(t,e),this._isSubmenuVisible(r)||this._drawSubmenu(e)}}_hideSubmenusOnSameLevel(e){var t=e.parent(".".concat(ZC)).siblings().find(".".concat(uo));t.length&&(t.removeClass(uo),this._hideSubmenu(t.find(".".concat(cr))))}_hideSubmenuGroup(e){this._isSubmenuVisible(e)&&this._hideSubmenuCore(e)}_isSubmenuVisible(e){return"visible"===e.css("visibility")}_drawSubmenu(e){var t=this.option("animation")?this.option("animation").show:{},r=e.children(".".concat(cr)),a=this._getSubmenuPosition(e);this._overlay&&this._overlay.option("visible")&&((0,m.$K)(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(r)||this._shownSubmenus.push(r),t&&Yt.Z.stop(r),In.Z.setup(r,a),t&&((0,m.PO)(t.to)&&(t.to.position=a),this._animate(r,t)),r.css("visibility","visible"))}_animate(e,t){Yt.Z.animate(e,t)}_getSubmenuPosition(e){var t=this.option("submenuDirection").toLowerCase(),a={collision:"flip",of:e.parent(".".concat(ZC)),offset:{h:0,v:-1}};switch(t){case"left":a.at="left top",a.my="right top";break;case"right":a.at="right top",a.my="left top";break;default:this.option("rtlEnabled")?(a.at="left top",a.my="right top"):(a.at="right top",a.my="left top")}return a}_updateSubmenuVisibilityOnClick(e){if(e.args.length){var t=e.args[0].itemData,r=this._dataAdapter.getNodeByItem(t);if(r){var a=(0,b.Z)(e.args[0].itemElement),n=a.find(".".concat(cr));if(this._hasSubmenu(r)&&!n.length&&(this._renderSubmenuItems(r,a),n=a.find(".".concat(cr))),(a.context!==n.context||"visible"!==n.css("visibility"))&&(this._updateSelectedItemOnClick(e),t&&!t.disabled&&(!t||!1!==t.closeMenuOnClick)))if(0===n.length){var l=(0,b.Z)(a.parents(".".concat(cr))[0]);this._hideSubmenu(l),!e.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(n)&&this._hideSubmenu(n),this._showSubmenu(a)}}}_hideSubmenu(e){var t=(0,N.l)([],this._shownSubmenus);(0,j.S6)(t,(r,a)=>{(e.is(a)||(0,ga.r3)(e[0],a[0]))&&(a.parent().removeClass(uo),this._hideSubmenuCore(a))})}_hideSubmenuCore(e){var t=this._shownSubmenus.indexOf(e),r=this.option("animation")?this.option("animation").hide:null;t>=0&&this._shownSubmenus.splice(t,1),this._stopAnimate(e),r&&this._animate(e,r),e.css("visibility","hidden")}_stopAnimate(e){Yt.Z.stop(e,!0)}_hideAllShownSubmenus(){var e=(0,N.l)([],this._shownSubmenus);this._overlay.$content().find(".".concat(uo)).removeClass(uo),(0,j.S6)(e,(r,a)=>{this._hideSubmenu(a)})}_visibilityChanged(e){e&&this._renderContentImpl()}_optionChanged(e){if(UC.includes(e.name))this._initActions();else switch(e.name){case"visible":this._renderVisibility(e.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":e.previousValue&&this._detachShowContextMenuEvents(e.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(e)}}_renderVisibility(e){return e?this._show():this._hide()}_toggleVisibility(){}_show(e){var t={jQEvent:e},r=(new Y.BH).reject().promise();if(this._actions.onShowing(t),t.cancel)return r;var n,a=this._positionContextMenu(e);return a&&(this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes())),this._setOptionWithoutOptionChange("visible",!0),this._overlay.option("position",a),r=this._overlay.show(),e&&e.stopPropagation(),this._setAriaAttributes(),(null==e||null===(n=e.originalEvent)||void 0===n?void 0:n.type)===lo.Z.name&&this.preventShowingDefaultContextMenuAboveOverlay()),r}_setAriaAttributes(){this._overlayContentId="dx-".concat(new Ri.Z),this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||(0,b.Z)(it.Z.getDocument())}_getContextMenuPosition(){return(0,N.l)({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(e){var t=this._getContextMenuPosition(),r=this._isInitialOptionValue("position"),a=this._createActionByOption("onPositioning");e&&e.preventDefault&&r&&(t.of=e);var n={position:t,event:e};return a(n),n.cancel?t=null:n.event&&(n.event.cancel=!0,e.preventDefault()),t}_refresh(){if((0,We.Ym)())if(this._overlay){var e=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",e)}else super._refresh();else super._refresh()}_hide(){var e;return this._overlay&&(e=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),e||(new Y.BH).reject().promise()}toggle(e){var t=this.option("visible");return this._renderVisibility(e=void 0===e?!t:e)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}(0,It.Z)("dxContextMenu",qC);const YC=qC;var dO={columnHeadersView:"header",rowsView:"content",footerView:"footer",headerPanel:"headerPanel"},uO=["columnHeadersView","rowsView","footerView","headerPanel"],pO={defaultOptions:()=>({onContextMenuPreparing:null}),controllers:{contextMenu:class hO extends Nt.ViewController{init(){this.createAction("onContextMenuPreparing")}getContextMenuItems(e){if(!e)return!1;var a,n,s,o,t=this,r=(0,b.Z)(e.target);return(0,j.S6)(uO,function(){var l,d,u=t.getView(this);if((a=u&&u.element())&&(a.is(r)||a.find(r).length)){s=r.closest(".dx-row > td, .dx-row > tr"),n=s.parent();var c=u.getRowIndex(n),f=s[0]&&s[0].cellIndex,p=n.data("options"),g={event:e,targetElement:(0,rt.u)(r),target:dO[this],rowIndex:c,row:u._getRows()[c],columnIndex:f,column:null===(d=null===(l=p?.cells)||void 0===l?void 0:l[f])||void 0===d?void 0:d.column};if(g.items=u.getContextMenuItems&&u.getContextMenuItems(g),t.executeAction("onContextMenuPreparing",g),t._contextMenuPrepared(g),o=g.items)return!1}}),o}_contextMenuPrepared(e){}}},views:{contextMenuView:class cO extends Nt.View{init(){super.init(),this._contextMenuController=this.getController("contextMenu")}_renderCore(){var e=this.element().addClass("dx-context-menu");this.setAria("role","presentation",e),this._createComponent(e,YC,{onPositioning:t=>{var{event:r}=t,a=t.component,n=this._contextMenuController.getContextMenuItems(r);n?(a.option("items",n),r.stopPropagation()):t.cancel=!0},onItemClick(t){var r,a;null===(a=null===(r=t.itemData)||void 0===r?void 0:r.onItemClick)||void 0===a||a.call(r,t)},cssClass:this.getWidgetContainerClass(),target:this.component.$element()})}}}};He.registerModule("contextMenu",pO);var Rl="dx-error-row",XC="dx-error-message",mO={defaultOptions:()=>({errorRowEnabled:!0}),controllers:{errorHandling:class vO extends Nt.ViewController{init(){this._resizingController=this.getController("resizing"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView")}_createErrorRow(e,t){var r,a,n=this._renderErrorMessage(e);return t?(r=(0,b.Z)("<tr>").attr("role","row").addClass(Rl),a=(0,b.Z)("<div>").addClass("dx-closebutton").addClass(this.addWidgetPrefix("action")),k.Z.on(a,Pt.u,this.createAction(s=>{var o,l,u,d=s.event,c=(0,b.Z)(d.currentTarget).closest(".".concat(Rl)).index();d.stopPropagation(),(0,j.S6)(t,(f,p)=>{u=(0,b.Z)(p).children("tbody").children("tr").eq(c),this.removeErrorRow(u)}),null===(l=null===(o=this._resizingController)||void 0===o?void 0:o.fireContentReadyAction)||void 0===l||l.call(o)})),(0,b.Z)("<td>").attr({colSpan:this._columnsController.getVisibleColumns().length,role:"gridcell"}).prepend(a).append(n).appendTo(r),r):n}_renderErrorMessage(e){var t=e.url?e.message.replace(e.url,""):e.message||e,r=(0,b.Z)("<div>").attr("role","alert").attr("aria-roledescription",ae.Z.format("dxDataGrid-ariaError")).addClass(XC).text(t);return e.url&&(0,b.Z)("<a>").attr("href",e.url).text(e.url).appendTo(r),r}renderErrorRow(e,t,r){var a,n,o,l,s=this;if(r)return r.find(".".concat(XC)).remove(),o=s._createErrorRow(e),r.prepend(o),o;var d=t>=0||!s._columnHeadersView.isVisible()?s._rowsView:s._columnHeadersView,u=d.getTableElements();return(0,j.S6)(u,(c,f)=>{if(o=s._createErrorRow(e,u),l=l||o,t>=0){var p=d._getRowElements((0,b.Z)(f)).eq(t);s.removeErrorRow(p.next()),o.insertAfter(p)}else{var g=(0,b.Z)(f).children("tbody"),w=g.children("tr");s._columnHeadersView.isVisible()?(s.removeErrorRow(w.last()),(0,b.Z)(f).append(o)):(s.removeErrorRow(w.first()),g.first().prepend(o))}}),null===(n=null===(a=this._resizingController)||void 0===a?void 0:a.fireContentReadyAction)||void 0===n||n.call(a),l}removeErrorRow(e){if(!e){var t=this._columnHeadersView&&this._columnHeadersView.element();if(!(e=t&&t.find(".".concat(Rl)))||!e.length){var r=this._rowsView.element();e=r&&r.find(".".concat(Rl))}}e&&e.hasClass(Rl)&&e.remove()}optionChanged(e){"errorRowEnabled"===e.name?e.handled=!0:super.optionChanged(e)}}},extenders:{controllers:{data:i=>class extends i{init(){super.init(),this.dataErrorOccurred.add((e,t)=>{this.option("errorRowEnabled")&&this._errorHandlingController.renderErrorRow(e,void 0,t)}),this.changed.add(e=>{var t,r;e&&"loadError"===e.changeType||this._editingController&&!this._editingController.hasChanges()&&(null===(r=null===(t=this._errorHandlingController)||void 0===t?void 0:t.removeErrorRow)||void 0===r||r.call(t))})}}}}};He.registerModule("errorHandling",mO);var JC="borders",QC="dx-gridbase-container",xu="adaptiveHidden",Np=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","filterPanelView","pagerView","draggingHeaderView","contextMenuView","errorView","headerFilterView","filterBuilderView"],Ll=function(i){return(0,m.HD)(i)&&i.endsWith("%")},e0=function(i,e){var t=i._rowsView.contentWidth();return t-i._getTotalWidth(e,t)},AO={defaultOptions:()=>({showBorders:!1,renderAsync:!1}),controllers:{resizing:class EO extends Nt.ViewController{init(){this._prevContentMinHeight=null,this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._editorFactoryController=this.getController("editorFactory"),this._footerView=this.getView("footerView"),this._rowsView=this.getView("rowsView")}_initPostRenderHandlers(){this._refreshSizesHandler||(this._refreshSizesHandler=e=>{var t=(new Y.BH).resolve(null),r=e?.changeType,a=e?.isDelayed,n=r&&"updateSelection"!==r&&"updateFocusedRow"!==r&&"pageIndex"!==r&&!a;this._dataController.changed.remove(this._refreshSizesHandler),this._checkSize()&&(t=this._refreshSizes(e)),n&&(0,Y.gx)(t).done(()=>{this._setAriaLabel(),this.fireContentReadyAction()})},this._dataController.changed.add(()=>{this._dataController.changed.add(this._refreshSizesHandler)}))}_refreshSizes(e){var t,r=(new Y.BH).resolve(null),a=e?.changeType,n=e?.isDelayed,s=this._dataController.items();if(e&&"refresh"!==a&&"prepend"!==a&&"append"!==a){if("update"===a){if(0===(null===(t=e.changeTypes)||void 0===t?void 0:t.length))return r;!(s.length>1||"insert"!==e.changeTypes[0])||0===s.length&&"remove"===e.changeTypes[0]||e.needUpdateDimensions?r=this.resize():(r=new Y.BH,this._waitAsyncTemplates().done(()=>{(0,J.Su)(()=>(0,J.g0)(()=>(0,J.Su)(()=>{this._setScrollerSpacing(),this._rowsView.resize(),r.resolve()})))}).fail(r.reject))}}else n||(r=this.resize());return r}fireContentReadyAction(){this.component._fireContentReadyAction()}_getWidgetAriaLabel(){return"dxDataGrid-ariaDataGrid"}_setAriaLabel(){var e=Math.max(0,this._dataController.totalItemsCount());this.component.setAria("label",ae.Z.format(this._getWidgetAriaLabel(),e,this.component.columnCount()),this.component.$element().children(".".concat(QC)))}_getBestFitWidths(){var e,t=this._rowsView,r=this._columnHeadersView,a=t.getColumnWidths();if(!a?.length){var n=r.getTableElement();r.setTableElement(null===(e=t.getTableElement())||void 0===e?void 0:e.children(".dx-header")),a=r.getColumnWidths(),r.setTableElement(n)}return a}_setVisibleWidths(e,t){var r=this._columnsController;r.beginUpdate(),(0,j.S6)(e,(a,n)=>{var s=r.getColumnId(n);r.columnOption(s,"visibleWidth",t[a])}),r.endUpdate()}_toggleBestFitModeForView(e,t,r){if(e&&e.isVisible()){var a=this._rowsView.getTableElements(),n=e.getTableElements();(0,j.S6)(a,(s,o)=>{var l,d=(0,b.Z)(o),u=n.eq(s);u&&u.length&&((l=r?u.children("tbody").appendTo(d):d.children(".".concat(t)).appendTo(u)).toggleClass(t,r),l.toggleClass(this.addWidgetPrefix("best-fit"),r))})}}_toggleBestFitMode(e){var t=this._rowsView.getTableElement(),r=this._rowsView.getTableElements().eq(1);t&&(t.css("tableLayout",e?"auto":"fixed"),t.children("colgroup").css("display",e?"none":""),(0,j.S6)(r.find("tr.dx-group-row"),(a,n)=>{(0,b.Z)(n).css("display",e?"none":"")}),r.toggleClass(this.addWidgetPrefix("table-fixed"),!e),this._toggleBestFitModeForView(this._columnHeadersView,"dx-header",e),this._toggleBestFitModeForView(this._footerView,"dx-footer",e),this._needStretch()&&(t.get(0).style.width=e?"auto":""))}_toggleContentMinHeight(e){var t=this._rowsView.getScrollable(),r=this._rowsView._findContentElement();!1===t?.option("useNative")&&(!0===e&&(this._prevContentMinHeight=r.get(0).style.minHeight),(0,m.$K)(this._prevContentMinHeight)&&r.css({minHeight:e?Te.getContentHeightLimit(ii.Z):this._prevContentMinHeight}))}_synchronizeColumns(){var l,c,f,e=this._columnsController,t=e.getVisibleColumns(),r=this.option("columnAutoWidth"),a=this.option("wordWrapEnabled"),n=t.some(g=>!(0,m.$K)(g.width)),s=this._needBestFit(),o=!1,d=!1,u=[];!s&&(0,j.S6)(t,(g,w)=>{if("auto"===w.width)return s=!0,!1}),(0,j.S6)(t,(g,w)=>{if(w.minWidth)return o=!0,!1}),this._setVisibleWidths(t,[]);var p=this.component.$element();s&&(c=it.Z.getActiveElement(p.get(0)),f=Te.getSelectionRange(c),this._toggleBestFitMode(!0),l=!0),this._toggleContentMinHeight(a),p&&p.get(0)&&this._maxWidth&&(delete this._maxWidth,p[0].style.maxWidth=""),(0,J.Su)(()=>{var w;s?(u=this._getBestFitWidths(),(0,j.S6)(t,(w,x)=>{var y=e.getColumnId(x);e.columnOption(y,"bestFitWidth",u[w],!0)})):o&&(u=this._getBestFitWidths()),(0,j.S6)(t,function(w){var{width:x}=this;"auto"!==x&&((0,m.$K)(x)?u[w]=(0,m.kE)(x)||function(i){return(0,m.HD)(i)&&i.endsWith("px")}(x)?parseFloat(x):x:r||(u[w]=void 0))}),l&&(this._toggleBestFitMode(!1),l=!1,c&&c!==it.Z.getActiveElement())&&((0,di.l)(c).bottom<0||function(i,e){(function DT(i,e){lu=!0,i.focus({preventScroll:e}),lu=!1})(i,!0),Te.setSelectionRange(i,e)}(c,f)),d=this._correctColumnWidths(u,t),r&&((0,j.S6)(t,(x,y)=>{"groupExpand"===y.type&&(w=u[x])}),(0,j.S6)(t,(x,y)=>{"groupExpand"===y.type&&w&&(u[x]=w)}),this._needStretch()&&this._processStretch(u,t)),(0,J.g0)(()=>{(s||d||n)&&this._setVisibleWidths(t,u),a&&this._toggleContentMinHeight(!1)})})}_needBestFit(){return this.option("columnAutoWidth")}_needStretch(){return this._columnsController.getVisibleColumns().some(e=>"auto"===e.width&&!e.command)}_getAverageColumnsWidth(e){return e0(this,e)/e.filter(a=>void 0===a).length}_correctColumnWidths(e,t){var a,r=this,n=!1,s=!1,o=!1,l=r.component.$element(),d=r._hasWidth,u=function(){var y=a,E=t[y],V=e[y]===xu,F=e[y],{minWidth:q}=E;if(q)if(void 0===F){var ee=r._getAverageColumnsWidth(e);F=ee}else if(Ll(F)){var X=function(i,e,t,r){return e0(i,r.map((a,n)=>n===e?t:a))}(r,y,q,e);X<0&&(F=-1)}var M=r._getRealColumnWidth(y,e.map((le,fe)=>y===fe?F:le));q&&!V&&M<q&&(e[y]=q,o=!0,a=-1),(0,m.$K)(E.width)||(s=!0),Ll(E.width)&&(n=!0)};for(a=0;a<t.length;a++)u();if(!s&&e.length){var c=r._rowsView.element(),f=r._rowsView.contentWidth(),p=r._rowsView.getScrollbarWidth(),g=r._getTotalWidth(e,f);if(g<f){var w=Te.getLastResizableColumnIndex(t,e);if(w>=0&&(e[w]="auto",o=!0,!1===d&&!n)){var x=r.option("showBorders")?Math.ceil((0,oe.Y_)(c)-(0,oe.Xt)(c)):0;r._maxWidth=g+p+x,l.css("maxWidth",r._maxWidth)}}}return o}_processStretch(e,t){var r=this._rowsView.contentWidth(),a=this._getTotalWidth(e,r),n={length:0};if(e.length){(0,j.S6)(t,function(u){(this.width||e[u]===xu)&&(n[u]=!0,n.length++)});var s=r-a,o=Math.floor(s/(e.length-n.length)),l=s-o*(e.length-n.length);if(s>=0)for(var d=0;d<e.length;d++)n[d]||(e[d]+=o,l>0&&(l<1?(e[d]+=l,l=0):(e[d]++,l--)))}}_getRealColumnWidth(e,t,r){var a=1,n=t[e];if(!Ll(n))return parseFloat(n);var s=t.reduce((u,c,f)=>Ll(c)?u+parseFloat(c):u,0),o=t.reduce((u,c)=>!c||c===xu||Ll(c)?u:u+parseFloat(c),0),l=(r=r||this._rowsView.contentWidth())-o,d=s*r/100;return o>0&&d+o>=r&&(a=d>l?l/d:1),parseFloat(n)*r*a/100}_getTotalWidth(e,t){for(var r=0,a=0;a<e.length;a++){var n=e[a];n&&n!==xu&&(r+=this._getRealColumnWidth(a,e,t))}return Math.ceil(r)}_getGroupElement(){return this.component.$element().children().get(0)}updateSize(e){var t=(0,b.Z)(e),r=this.addWidgetPrefix("important-margin");if(void 0===this._hasHeight&&t&&t.is(":visible")&&(0,oe.dz)(t)){var a=t.children(".".concat(this.getWidgetContainerClass()));a.length&&a.detach(),this._hasHeight=!!(0,oe.Cr)(t);var n=(0,oe.dz)(t);t.addClass(r),this._hasWidth=(0,oe.dz)(t)===n,t.removeClass(r),a.length&&a.appendTo(t)}}publicMethods(){return["resize","updateDimensions"]}_waitAsyncTemplates(){var e,t,r;return(0,Y.gx)(null===(e=this._columnHeadersView)||void 0===e?void 0:e.waitAsyncTemplates(!0),null===(t=this._rowsView)||void 0===t?void 0:t.waitAsyncTemplates(!0),null===(r=this._footerView)||void 0===r?void 0:r.waitAsyncTemplates(!0))}resize(){if(!this.component._requireResize){var e=new Y.BH;return this._waitAsyncTemplates().done(()=>{(0,Y.gx)(this.updateDimensions()).done(e.resolve).fail(e.reject)}).fail(e.reject),e.promise()}}updateDimensions(e){var t=this;if(t._initPostRenderHandlers(),t._checkSize(e)){var r=t._resizeDeferred,a=t._resizeDeferred=new Y.BH;return(0,Y.gx)(r).always(()=>{(0,J.g0)(()=>{t._dataController.isLoaded()&&t._synchronizeColumns(),t._resetGroupElementHeight(),(0,J.Su)(()=>{(0,J.g0)(()=>{(0,J.Su)(()=>{t._updateDimensionsCore()})})})}).done(a.resolve).fail(a.reject)}),a.promise()}}_resetGroupElementHeight(){var e=this._getGroupElement(),t=this._rowsView.getScrollable();e&&e.style.height&&(!t||!t.scrollTop())&&(e.style.height="")}_checkSize(e){var t=this.component.$element(),r=t.is(":visible"),a=this._lastWidth!==(0,oe.dz)(t)||this._lastHeight!==(0,oe.Cr)(t)||this._devicePixelRatio!==(0,We.Jj)().devicePixelRatio;return r&&(!e||a)}_setScrollerSpacingCore(){var e=this,t=e._rowsView.getScrollbarWidth(),r=e._rowsView.getScrollbarWidth(!0);(0,J.g0)(()=>{e._columnHeadersView&&e._columnHeadersView.setScrollerSpacing(t),e._footerView&&e._footerView.setScrollerSpacing(t),e._rowsView.setScrollerSpacing(t,r)})}_setScrollerSpacing(){var e=this._rowsView.getScrollable(),t=!0===this.option("scrolling.useNative");!e||t?(0,J.g0)(()=>{(0,J.Su)(()=>{this._setScrollerSpacingCore()})}):this._setScrollerSpacingCore()}_setAriaOwns(){var e,t,r,a=null===(e=this._columnHeadersView)||void 0===e?void 0:e.getTableElement(),n=null===(t=this._footerView)||void 0===t?void 0:t.getTableElement();null===(r=this._rowsView)||void 0===r||r.setAriaOwns(a?.attr("id"),n?.attr("id"))}_updateDimensionsCore(){var e,t=this,r=t._dataController,a=t._rowsView,n=t.component.$element(),s=this._getGroupElement(),o=(0,oe.Cr)(n),l=null!==(e=t.option("height"))&&void 0!==e?e:n.get(0).style.height,d=!!l&&"auto"!==l,u=parseInt(n.css("maxHeight")),c=u&&o>=u,f=s&&s.scrollHeight===s.offsetHeight;t.updateSize(n),(0,J.g0)(()=>{a.hasHeight(t._hasHeight||!!u||d),this._setAriaOwns(),c&&!f&&(0,b.Z)(s).css("height",u),r.isLoaded()?(0,J.Su)(()=>{t._updateLastSizes(n),t._setScrollerSpacing(),(0,j.S6)(Np,(g,w)=>{var x=t.getView(w);x&&x.resize()}),this._editorFactoryController&&this._editorFactoryController.resize()}):a.setLoading(r.isLoading())})}_updateLastSizes(e){this._lastWidth=(0,oe.dz)(e),this._lastHeight=(0,oe.Cr)(e),this._devicePixelRatio=(0,We.Jj)().devicePixelRatio}optionChanged(e){switch(e.name){case"width":case"height":this.component._renderDimensions(),this.resize();case"renderAsync":return void(e.handled=!0);default:super.optionChanged(e)}}},synchronizeScrolling:class IO extends Nt.ViewController{_scrollChangedHandler(e,t,r){for(var a=0;a<e.length;a++)e[a]&&e[a].name!==r&&e[a].scrollTo({left:t.left,top:t.top})}init(){for(var e=[this.getView("columnHeadersView"),this.getView("footerView"),this.getView("rowsView")],t=0;t<e.length;t++){var r=e[t];r&&r.scrollChanged.add(this._scrollChangedHandler.bind(this,e))}}}},views:{gridView:class TO extends Nt.View{_endUpdateCore(){this.component._requireResize&&(this.component._requireResize=!1,this._resizingController.resize())}init(){this._resizingController=this.getController("resizing"),this._dataController=this.getController("data")}getView(e){return this.component._views[e]}element(){return this._groupElement}optionChanged(e){(0,m.$K)(this._groupElement)&&"showBorders"===e.name?(this._groupElement.toggleClass(this.addWidgetPrefix(JC),!!e.value),e.handled=!0):super.optionChanged(e)}_renderViews(e){var t=this;(0,j.S6)(Np,(r,a)=>{var n=t.getView(a);n&&n.render(e)})}_getTableRoleName(){return"group"}render(e){var t=!this._groupElement,r=this._groupElement||(0,b.Z)("<div>").addClass(this.getWidgetContainerClass());r.addClass(QC),r.toggleClass(this.addWidgetPrefix(JC),!!this.option("showBorders")),this.setAria("role","presentation",e),this.component.setAria("role",this._getTableRoleName(),r),this._rootElement=e||this._rootElement,t&&(this._groupElement=r,(0,We.Ym)()&&this._resizingController.updateSize(e),r.appendTo(e)),this._renderViews(r)}update(){this._rootElement&&this._groupElement&&(this._resizingController.resize(),this._dataController.isLoaded()&&this._resizingController.fireContentReadyAction())}}},VIEW_NAMES:Np};He.registerModule("gridView",AO);var DO=be(1760),RO=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"];function Eu(i,e){var t;if(i){var r=i._findItemElementByItem(e);if(r.length){var a=i._getItemData(r),n=!!(null!==(t=a.options)&&void 0!==t&&t.disabled||a.disabled||i.option("disabled")),{widget:s}=a;if(s&&-1!==RO.indexOf(s)){var o=r.find(s.toLowerCase().replace("dx",".dx-"));if(o.length){var l,d,u=function(i){var e=i.data&&i.data(),t=e&&e.dxComponents,r=t&&t[0];return r&&e[r]}(o);if(!u)return;var f,c=null===(l=u._focusTarget)||void 0===l?void 0:l.call(u);c="dxDropDownButton"===s?c&&c.find(".".concat("dx-buttongroup")):null!==(f=c)&&void 0!==f?f:(0,b.Z)(u.element());var p=null===(d=a.options)||void 0===d?void 0:d.tabIndex;c.attr("tabIndex",n?-1:p??0)}}}}}class BO{constructor(e){this._toolbar=e}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){var e;return null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[]}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",this._toolbar.itemElements(),!0)}_arrangeItems(){var e=this._toolbar._$toolbarItemsContainer.find(".".concat("dx-toolbar-label")).eq(0);if(e.length){var t=(0,oe.dz)(this._toolbar.$element()),r=(0,oe.Y_)(e)-(0,oe.dz)(e);e.css("maxWidth",t-r)}}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}var pr=be(4490),VO=be(1062),NO=be(1767),Iu="dxswipestart",Tu="dxswipe",Pl="dxswipeend",FO={defaultItemSizeFunc:function(){return(0,oe.dz)(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(i){return((0,ce.a0)(i).x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,i)},isFastSwipe:function(i){var e=(0,ce.a0)(i);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.x-this._tickData.x)>=e.time-this._tickData.time}},kO={defaultItemSizeFunc:function(){return(0,oe.Cr)(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(i){return((0,ce.a0)(i).y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,i)},isFastSwipe:function(i){var e=(0,ce.a0)(i);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.y-this._tickData.y)>=e.time-this._tickData.time}},MO={horizontal:FO,vertical:kO},HO=VO.Z.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(i){this.callBase(i),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return MO[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(i){this._tickData=(0,ce.a0)(i)},_start:function(i){this._savedEventData=(0,ce.a0)(i),(i=this._fireEvent(Iu,i)).cancel||(this._maxLeftOffset=i.maxLeftOffset,this._maxRightOffset=i.maxRightOffset,this._maxTopOffset=i.maxTopOffset,this._maxBottomOffset=i.maxBottomOffset)},_move:function(i){var e=this._getStrategy(),t=(0,ce.a0)(i),r=e.calcOffsetRatio.call(this,i);r=this._fitOffset(r,this.elastic),t.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=t),this._fireEvent(Tu,i,{offset:r}),!1!==i.cancelable&&i.preventDefault()},_end:function(i){var e=this._getStrategy(),t=e.calcOffsetRatio.call(this,i),r=e.isFastSwipe.call(this,i),a=t,n=this._calcTargetOffset(t,r);a=this._fitOffset(a,this.elastic),n=this._fitOffset(n,!1),this._fireEvent(Pl,i,{offset:a,targetOffset:n})},_fitOffset:function(i,e){var r=this._getStrategy().getBounds.call(this);return i<-r[0]?e?(-2*r[0]+i)/3:-r[0]:i>r[1]?e?(2*r[1]+i)/3:r[1]:i},_calcTargetOffset:function(i,e){var t;return e?(t=Math.ceil(Math.abs(i)),i<0&&(t=-t)):t=Math.round(i),t}});(0,NO.Z)({emitter:HO,events:[Iu,Tu,Pl]});var t0="dx-list-item-badge-container",Fp="dx-list-item-chevron-container",$O=Al.Z.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge:function(i){if(this._$element.children("."+t0).remove(),i){var e=(0,b.Z)("<div>").addClass(t0).append((0,b.Z)("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(i)),t=this._$element.children("."+Fp).first();t.length>0?e.insertBefore(t):e.appendTo(this._$element)}},_renderShowChevron:function(i){if(this._$element.children("."+Fp).remove(),i){var e=(0,b.Z)("<div>").addClass(Fp),t=(0,b.Z)("<div>").addClass("dx-list-item-chevron");e.append(t).appendTo(this._$element)}}});const KO=$O;var i0="dx-scrollview-pull-down-loading",kp="dx-scrollview-pull-down-ready",XO=Dp.inherit({_init:function(i){this.callBase(i),this._$topPocket=i._$topPocket,this._$pullDown=i._$pullDown,this._$refreshingText=i._$refreshingText,this._$scrollViewContent=(0,b.Z)(i.content()),this._$container=(0,b.Z)(i.container()),this._initCallbacks()},_initCallbacks:function(){this.pullDownCallbacks=(0,ri.Z)(),this.releaseCallbacks=(0,ri.Z)(),this.reachBottomCallbacks=(0,ri.Z)()},render:function(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown:function(){var i=(0,b.Z)("<div>").addClass("dx-scrollview-pull-down-image"),e=(0,b.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),t=new jr.Z((0,b.Z)("<div>")).$element(),r=this._$pullDownText=(0,b.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,b.Z)("<div>").text(this.option("pullingDownText")).appendTo(r),this._$pulledDownText=(0,b.Z)("<div>").text(this.option("pulledDownText")).appendTo(r),this._$refreshingText=(0,b.Z)("<div>").text(this.option("refreshingText")).appendTo(r),this._$pullDown.empty().append(i).append(e.append(t)).append(r)},_releaseState:function(){this._state=0,this._refreshPullDownText()},_refreshPullDownText:function(){var i=this;(0,j.S6)([{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}],function(t,r){r.element[i._state===r.visibleState?"addClass":"removeClass"]("dx-scrollview-pull-down-text-visible")})},update:function(){this.callBase(),this._setTopPocketOffset()},_updateDimensions:function(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var i=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(i.clientHeight-e.clientHeight,0)},_allowedDirections:function(){var i=this.callBase();return i.vertical=i.vertical||this._pullDownEnabled,i},_setTopPocketOffset:function(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd:function(){this.callBase(),this._complete()},handleStop:function(){this.callBase(),this._complete()},_complete:function(){1===this._state&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout(function(){this._pullDownRefreshing()}.bind(this),400))},_setPullDownOffset:function(i){(0,oi.pB)(this._$topPocket,{top:i}),(0,oi.pB)(this._$scrollViewContent,{top:i})},handleScroll:function(i){if(this.callBase(i),2!==this._state){var e=this.location().top,t=(this._location||0)-e;this._location=e,this._isPullDown()?this._pullDownReady():t>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isPullDown:function(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom:function(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom:function(){3!==this._state&&(this._state=3,this.reachBottomCallbacks.fire())},_pullDownReady:function(){1!==this._state&&(this._state=1,this._$pullDown.addClass(kp),this._refreshPullDownText())},_stateReleased:function(){0!==this._state&&(this._$pullDown.removeClass(i0).removeClass(kp),this._releaseState())},_pullDownRefreshing:function(){2!==this._state&&(this._state=2,this._$pullDown.addClass(i0).removeClass(kp),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable:function(i){i&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=i},reachBottomEnable:function(i){this._reachBottomEnabled=i},pendingRelease:function(){this._state=1},release:function(){var i=new Y.BH;return this._updateDimensions(),clearTimeout(this._releaseTimeout),3===this._state&&(this._state=0),this._releaseTimeout=setTimeout(function(){this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),i.resolve()}.bind(this),400),i.promise()},dispose:function(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}});const JO=XO;var r0="dx-scrollview-pull-down-loading",r5=Dp.inherit({_init:function(i){this.callBase(i),this._$topPocket=i._$topPocket,this._$pullDown=i._$pullDown,this._$scrollViewContent=(0,b.Z)(i.content()),this._$container=(0,b.Z)(i.container()),this._initCallbacks(),this._location=0},_initCallbacks:function(){this.pullDownCallbacks=(0,ri.Z)(),this.releaseCallbacks=(0,ri.Z)(),this.reachBottomCallbacks=(0,ri.Z)()},render:function(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown:function(){var i=(0,b.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),e=new jr.Z((0,b.Z)("<div>")).$element();this._$icon=(0,b.Z)("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(i.append(e))},_releaseState:function(){this._state=0,this._releasePullDown(),this._updateDimensions()},_releasePullDown:function(){this._$pullDown.css({opacity:0})},_updateDimensions:function(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;var i=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(i.clientHeight-e.clientHeight,0)},_allowedDirections:function(){var i=this.callBase();return i.vertical=i.vertical||this._pullDownEnabled,i},handleInit:function(i){this.callBase(i),0===this._state&&0===this._location&&(this._startClientY=(0,ce.a0)(i.originalEvent).y,this._state=4)},handleMove:function(i){this.callBase(i),this._deltaY=(0,ce.a0)(i.originalEvent).y-this._startClientY,4===this._state&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),5===this._state&&(i.preventDefault(),this._movePullDown())},_movePullDown:function(){var i=this._getPullDownHeight(),e=Math.min(3*i,this._deltaY+this._getPullDownStartPosition()),t=180*e/i/3;this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",e<i),(0,oi.pB)(this._$pullDown,{top:e}),this._$icon.css({transform:"rotate("+t+"deg)"})},_isPullDown:function(){return this._pullDownEnabled&&5===this._state&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight:function(){return Math.round(.05*(0,oe.zp)(this._$element))},_getPullDownStartPosition:function(){return-Math.round(1.5*(0,oe.zp)(this._$pullDown))},handleEnd:function(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop:function(){this._complete()},_complete:function(){(4===this._state||5===this._state)&&this._releaseState()},handleScroll:function(i){if(this.callBase(i),2!==this._state){var e=this.location().top,t=this._location-e;this._location=e,t>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()}},_isReachBottom:function(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom:function(){this.reachBottomCallbacks.fire()},_stateReleased:function(){0!==this._state&&(this._$pullDown.removeClass(r0),this._releaseState())},_pullDownRefreshing:function(){this._state=2,this._pullDownRefreshHandler()},_pullDownRefreshHandler:function(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown:function(){this._$pullDown.addClass(r0),(0,oi.pB)(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable:function(i){this._$topPocket.toggle(i),this._pullDownEnabled=i},reachBottomEnable:function(i){this._reachBottomEnabled=i},pendingRelease:function(){this._state=1},release:function(){var i=new Y.BH;return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout(function(){this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),i.resolve()}.bind(this),800),i.promise()},dispose:function(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}});const a5=r5;var n5=Math,n0="dx-scrollview-pull-down-loading",zp="dx-scrollview-pull-down-ready",u5=_C.inherit({ctor:function(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState:function(){this._state=0,this._refreshPullDownText()},_refreshPullDownText:function(){var i=this;(0,j.S6)([{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}],function(t,r){r.element[i._state===r.visibleState?"addClass":"removeClass"]("dx-scrollview-pull-down-text-visible")})},_initCallbacks:function(){this.pullDownCallbacks=(0,ri.Z)(),this.releaseCallbacks=(0,ri.Z)(),this.reachBottomCallbacks=(0,ri.Z)()},_updateBounds:function(){if("horizontal"!==this._direction){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;var e=this._$container.get(0),t=this._$content.get(0);this._bottomBoundary=Math.max(t.clientHeight-this._bottomPocketSize-e.clientHeight,0)}this.callBase()},_updateScrollbar:function(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent:function(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():0!==this._state&&this._stateReleased()},_moveScrollbar:function(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown:function(){return this._pullDownEnabled&&this._location>=0},_isReachBottom:function(){var i=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(i.scrollTop))<=1},_scrollComplete:function(){this._inBounds()&&1===this._state?this._pullDownRefreshing():this._inBounds()&&3===this._state?this._reachBottomLoading():this.callBase()},_reachBottomReady:function(){3!==this._state&&(this._state=3,this._minOffset=this._getMinOffset())},_getMaxOffset:function(){return-this._topPocketSize},_getMinOffset:function(){return n5.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading:function(){this.reachBottomCallbacks.fire()},_pullDownReady:function(){1!==this._state&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass(zp),this._refreshPullDownText())},_stateReleased:function(){0!==this._state&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass(n0).removeClass(zp),this.releaseCallbacks.fire())},_pullDownRefreshing:function(){2!==this._state&&(this._state=2,this._$pullDown.addClass(n0).removeClass(zp),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler:function(){return 0===this._state&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=(0,J.Wi)(this._release.bind(this)),this._releaseTask.promise},_release:function(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler:function(i){this._reachBottomEnabled!==i&&(this._reachBottomEnabled=i,this._updateBounds())},_pullDownEnablingHandler:function(i){this._pullDownEnabled!==i&&(this._pullDownEnabled=i,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange:function(){this._location-=(0,oe.Cr)(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler:function(){this._state=1},dispose:function(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),h5=vC.inherit({_init:function(i){this.callBase(i),this._$pullDown=i._$pullDown,this._$topPocket=i._$topPocket,this._$bottomPocket=i._$bottomPocket,this._initCallbacks()},_initCallbacks:function(){this.pullDownCallbacks=(0,ri.Z)(),this.releaseCallbacks=(0,ri.Z)(),this.reachBottomCallbacks=(0,ri.Z)()},render:function(){this._renderPullDown(),this.callBase()},_renderPullDown:function(){var i=(0,b.Z)("<div>").addClass("dx-scrollview-pull-down-image"),e=(0,b.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),t=new jr.Z((0,b.Z)("<div>")).$element(),r=this._$pullDownText=(0,b.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,b.Z)("<div>").text(this.option("pullingDownText")).appendTo(r),this._$pulledDownText=(0,b.Z)("<div>").text(this.option("pulledDownText")).appendTo(r),this._$refreshingText=(0,b.Z)("<div>").text(this.option("refreshingText")).appendTo(r),this._$pullDown.empty().append(i).append(e.append(t)).append(r)},pullDownEnable:function(i){this._eventHandler("pullDownEnabling",i)},reachBottomEnable:function(i){this._eventHandler("reachBottomEnabling",i)},_createScroller:function(i){var e=this,t=e._scrollers[i]=new u5(e._scrollerOptions(i));t.pullDownCallbacks.add(function(){e.pullDownCallbacks.fire()}),t.releaseCallbacks.add(function(){e.releaseCallbacks.fire()}),t.reachBottomCallbacks.add(function(){e.reachBottomCallbacks.fire()})},_scrollerOptions:function(i){return(0,N.l)(this.callBase(i),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease:function(){this._eventHandler("pendingRelease")},release:function(){return this._eventHandler("release").done(this._updateAction)},location:function(){var i=this.callBase();return i.top+=(0,oe.Cr)(this._$topPocket),i},dispose:function(){(0,j.S6)(this._scrollers,function(){this.dispose()}),this.callBase()}}),cs="dx-scrollview",p5=cs+"-content",f5=cs+"-top-pocket",_5=cs+"-bottom-pocket",v5=cs+"-pull-down",Kp=cs+"-scrollbottom",g5=Kp+"-indicator",m5=Kp+"-text",C5=cs+"-loadpanel",b5={pullDown:JO,swipeDown:a5,simulated:h5},w5=!(0,We.Ym)(),S5={finishLoading:J.ZT,release:J.ZT,refresh:J.ZT,scrollOffset:()=>({top:0,left:0}),_optionChanged:function(i){if("onUpdated"!==i.name)return this.callBase.apply(this,arguments)}},s0=Ea.inherit(w5?S5:{_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{pullingDownText:ae.Z.format("dxScrollView-pullingDownText"),pulledDownText:ae.Z.format("dxScrollView-pulledDownText"),refreshingText:ae.Z.format("dxScrollView-refreshingText"),reachBottomText:ae.Z.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"android"===at.Z.real().platform},options:{refreshStrategy:"swipeDown"}},{device:function(){return(0,_t.yj)()},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init:function(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup:function(){this.callBase(),this.$element().addClass(cs),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent:function(){var i=(0,b.Z)("<div>").addClass(p5);this._$content.wrapInner(i)},_initTopPocket:function(){var i=this._$topPocket=(0,b.Z)("<div>").addClass(f5),e=this._$pullDown=(0,b.Z)("<div>").addClass(v5);i.append(e),this._$content.prepend(i)},_initBottomPocket:function(){var i=this._$bottomPocket=(0,b.Z)("<div>").addClass(_5),e=this._$reachBottom=(0,b.Z)("<div>").addClass(Kp),t=(0,b.Z)("<div>").addClass(g5),r=new jr.Z((0,b.Z)("<div>")).$element(),a=this._$reachBottomText=(0,b.Z)("<div>").addClass(m5);this._updateReachBottomText(),e.append(t.append(r)).append(a),i.append(e),this._$content.append(i)},_initLoadPanel:function(){var i=(0,b.Z)("<div>").addClass(C5).appendTo(this.$element()),e={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(i,op,e)},_updateReachBottomText:function(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy:function(){var i=this.option("useNative")?this.option("refreshStrategy"):"simulated";this._strategy=new(0,b5[i])(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions:function(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState:function(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on:function(i){var e=this.callBase.apply(this,arguments);return("pullDown"===i||"reachBottom"===i)&&this._tryRefreshPocketState(),e},_pullDownEnable:function(i){if(0===arguments.length)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(i),this._strategy.pullDownEnable(i),this._pullDownEnabled=i)},_reachBottomEnable:function(i){if(0===arguments.length)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(i),this._strategy.reachBottomEnable(i),this._reachBottomEnabled=i)},_pullDownHandler:function(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator:function(i){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=i},_pullDownLoading:function(){this.startLoading(),this._pullDownAction()},_reachBottomHandler:function(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading:function(){this.startLoading(),this._reachBottomAction()},_releaseHandler:function(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged:function(i){switch(i.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(i)}},content:function(){return(0,rt.u)(this._$content.children().eq(1))},release:function(i){return void 0!==i&&this.toggleLoading(!i),this._strategy.release()},toggleLoading:function(i){this._reachBottomEnable(i)},refresh:function(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading:function(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading:function(){this._loadPanel.hide(),this._unlock()},_dispose:function(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});(0,It.Z)("dxScrollView",s0);const o0=s0;var Ru="__dx_key__";const Gp=oo.Z.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{repaintChangesOnly:!1})},ctor:function(){var i;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=e=>{this._dataController.getDataSource()&&!this._dataController.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&e.storeLoadOptions&&(e.storeLoadOptions.skip+=this._correctionIndex)},null===(i=this._dataController)||void 0===i||i.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload:function(){this._correctionIndex=0},_init:function(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey:function(i){var e=(0,b.Z)(),t=this.key();return this.itemElements().each((r,a)=>{var n=(0,b.Z)(a),s=this._getItemData(n);if(t?(0,Ca.OI)(t,this.keyOf(s),i):this._isItemEquals(s,i))return e=n,!1}),e},_dataSourceChangedHandler:function(i,e){null!=e&&e.changes?this._modifyByChanges(e.changes):(this.callBase(i,e),this._refreshItemsCache())},_isItemEquals:function(i,e){i&&i[Ru]&&(i=i.data);try{return JSON.stringify(i)===JSON.stringify(e)}catch{return i===e}},_isItemStrictEquals:function(i,e){return this._isItemEquals(i,e)},_shouldAddNewGroup:function(i,e){var t=!1;return this.option("grouped")&&(i.length||(t=!0),(0,j.S6)(i,(r,a)=>{"insert"===a.type&&(t=!0,(0,j.S6)(e,(n,s)=>{if(void 0!==a.data.key&&a.data.key===s.key)return t=!1,!1}))})),t},_partialRefresh:function(){if(this.option("repaintChangesOnly")){var i=(0,Zm.h)(this._itemsCache,this._editStrategy.itemsGetter(),e=>e&&void 0!==e[Ru]?e[Ru]:this.keyOf(e),this._isItemStrictEquals.bind(this));if(i&&this._itemsCache.length&&!this._shouldAddNewGroup(i,this._itemsCache))return this._modifyByChanges(i,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache:function(){if(this.option("repaintChangesOnly")){var i=this._editStrategy.itemsGetter();try{this._itemsCache=(0,N.l)(!0,[],i),this.key()||(this._itemsCache=this._itemsCache.map((e,t)=>({[Ru]:i[t],data:e})))}catch{this._itemsCache=(0,N.l)([],i)}}},_dispose:function(){this._dataController.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange:function(i,e,t,r){if(r)this._renderItem(t.index,t.data,null,this._findItemElementByKey(t.key));else{var a=e[(0,ar.qk)(i,e,t.key)];a&&(0,ar.Vx)(i,e,t.key,t.data).done(()=>{this._renderItem(e.indexOf(a),a,null,this._findItemElementByKey(t.key))})}},_insertByChange:function(i,e,t,r){(0,Y.gx)(r||(0,ar.$T)(i,e,t.data,t.index)).done(()=>{var a;this._beforeItemElementInserted(t),this._renderItem(null!==(a=t.index)&&void 0!==a?a:e.length,t.data),this._afterItemElementInserted(),this._correctionIndex++})},_updateSelectionAfterRemoveByChange:function(i){var e=this.option("selectedIndex");e>i?this.option("selectedIndex",e-1):e===i&&1===this.option("selectedItems").length?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted:function(i){var e=this.option("selectedIndex");i.index<=e&&this.option("selectedIndex",e+1)},_afterItemElementInserted:J.ZT,_removeByChange:function(i,e,t,r){var a=r?t.index:(0,ar.qk)(i,e,t.key);if(r?t.oldItem:e[a]){var s=this._findItemElementByKey(t.key),o=this._extendActionArgs(s);this._waitDeletingPrepare(s).done(()=>{r?(this._updateIndicesAfterIndex(a-1),this._afterItemElementDeleted(s,o),this._updateSelectionAfterRemoveByChange(a)):(this._deleteItemElementByIndex(a),this._afterItemElementDeleted(s,o))}),this._correctionIndex--}},_modifyByChanges:function(i,e){var t=this._editStrategy.itemsGetter(),r={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},a=this._dataController,n=a.paginate(),s=a.group();(n||s)&&(i=i.filter(o=>"insert"!==o.type||void 0!==o.index)),i.forEach(o=>this["_".concat(o.type,"ByChange")](r,t,o,e)),this._renderedItemsCount=t.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer:function(i,e,t){var r=i.children(this._itemSelector()).get(t);it.Z.insertElement(i.get(0),e.get(0),r)},_optionChanged:function(i){switch(i.name){case"items":this._partialRefresh(i.value)||this.callBase(i);break;case"dataSource":(!this.option("repaintChangesOnly")||!i.value)&&this.option("items",[]),this.callBase(i);break;case"repaintChangesOnly":break;default:this.callBase(i)}}}),l0={_getSpecificDataSourceOption:function(){var i=this.option("dataSource"),e=!1,t={};return this._getGroupedOption()&&(i=>Array.isArray(i)&&i.every(e=>2===Object.keys(e).length&&"key"in e&&"items"in e&&Array.isArray(e.items)))(i)&&(t=i.reduce((r,a)=>{var n=a.items.map(s=>((0,m.Kn)(s)||(s={text:s},e=!0),"key"in s||(s.key=a.key),s));return r.concat(n)},[]),i={store:{type:"array",data:t},group:{selector:"key",keepInitialKeyOrder:!0}},e&&(i.searchExpr="text")),i}};function d0(i){return i?Number(i.replace("px","")):0}function x5(i,e){var t=function Fl(i){var e,t;return i&&(0,We.Ym)()?null===(e=(t=(0,We.Jj)()).getComputedStyle)||void 0===e?void 0:e.call(t,i):null}(i);return t?d0(t["margin".concat((0,ur.MI)(e))]):0}var Lu="dx-list-item",T5="."+Lu,ho="dx-list-group",Up="dx-list-group-header",Pu="dx-list-group-body",u0="dx-list-group-collapsed",F5=(0,Dt.vb)("items"),jp=Gp.inherit({_activeStateUnit:[T5,".dx-list-select-all"].join(","),_supportedKeys:function(){var i=this,e=function(r){var s,o,l,a=t(r);a.is(i.option("focusedElement"))&&(o=r,l=(s=a).position().top,"prev"===o&&(l=s.position().top-(0,oe.Cr)(i.$element())+(0,oe.zp)(s)),i.scrollTo(l),a=t(r)),i.option("focusedElement",(0,rt.u)(a)),i.scrollToItem(a)};function t(r){var a=i.scrollTop(),n=(0,oe.Cr)(i.$element()),s=(0,b.Z)(i.option("focusedElement")),o=!0;if(!s.length)return(0,b.Z)();for(;o;){var l=s[r]();if(!l.length)break;var d=l.position().top+(0,oe.zp)(l)/2;(o=d<n+a&&d>a)&&(s=l)}return s}return(0,N.l)(this.callBase(),{leftArrow:J.ZT,rightArrow:J.ZT,pageUp:function(){return e("prev"),!1},pageDown:function(){return e("next"),!1}})},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:ae.Z.format("dxList-pullingDownText"),pulledDownText:ae.Z.format("dxList-pulledDownText"),refreshingText:ae.Z.format("dxList-refreshingText"),pageLoadingText:ae.Z.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:ae.Z.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:function(i){return i?i.showChevron:void 0},badgeExpr:function(i){return i?i.badge:void 0}})},_defaultOptionsRules:function(){var i=(0,_t.Vk)();return this.callBase().concat(mC(),[{device:function(){return!Br.nativeScrolling},options:{useNativeScrolling:!1}},{device:function(e){return!Br.nativeScrolling&&!at.Z.isSimulator()&&"desktop"===at.Z.real().deviceType&&"generic"===e.platform},options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:function(){return"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,_t.x2)(i)},options:{useInkRipple:!0}},{device:function(){return(0,_t.yj)(i)},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:""}}])},_visibilityChanged:function(i){i&&this._updateLoadingState(!0)},_itemClass:function(){return Lu},_itemDataKey:function(){return"dxListItemData"},_itemContainer:function(){return this._$container},_getItemsContainer:function(){return this._$listContainer},_cleanItemContainer:function(){this.callBase();var i=this._getItemsContainer();(0,b.Z)(i).empty(),i.appendTo(this._$container)},_saveSelectionChangeEvent:function(i){this._selectionChangeEventInstance=i},_getSelectionChangeEvent:function(){return this._selectionChangeEventInstance},_refreshItemElements:function(){this._itemElementsCache=this.option("grouped")?this._getItemsContainer().children("."+ho).children("."+Pu).children(this._itemSelector()):this._getItemsContainer().children(this._itemSelector())},_modifyByChanges:function(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem:function(i,e){return this.callBase(i,e).done(function(){this._refreshItemElements()})},deleteItem:function(i){return this.callBase(i).done(function(){this._refreshItemElements()})},_itemElements:function(){return this._itemElementsCache},_itemSelectHandler:function(i){if("single"!==this.option("selectionMode")||!this.isItemSelected(i.currentTarget))return this.callBase(i)},_allowDynamicItemsAppend:function(){return!0},_init:function(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._$listContainer=(0,b.Z)("<div>").addClass("dx-list-items"),this._initScrollView(),this._feedbackShowTimeout=70,this._createGroupRenderAction()},_scrollBottomMode:function(){return"scrollBottom"===this.option("pageLoadMode")},_nextButtonMode:function(){return"nextButton"===this.option("pageLoadMode")},_dataSourceOptions:function(){var i=this._scrollBottomMode(),e=this._nextButtonMode();return(0,N.l)(this.callBase(),{paginate:(0,J.IS)(i||e,!0)})},_getGroupedOption:function(){return this.option("grouped")},_getGroupContainerByIndex:function(i){return this._getItemsContainer().find(".".concat(ho)).eq(i).find(".".concat(Pu))},_dataSourceFromUrlLoadMode:function(){return"raw"},_initScrollView:function(){var i=this.option("scrollingEnabled"),e=i&&this.option("pullRefreshEnabled"),t=i&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),function k5(){return o0}(),{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!i,onScroll:this._scrollHandler.bind(this),onPullDown:e?this._pullDownHandler.bind(this):null,onReachBottom:t?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=(0,b.Z)(this._scrollView.content()),this._$listContainer.appendTo(this._$container),this._toggleWrapItemText(this.option("wrapItemText")),this._createScrollViewActions()},_toggleWrapItemText:function(i){this._$listContainer.toggleClass("dx-wrap-item-text",i)},_createScrollViewActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler:function(i){this._scrollAction&&this._scrollAction(i)},_initTemplates:function(){this._templateManager.addDefaultTemplates({group:new Tl.c(function(i,e){(0,m.PO)(e)?e.key&&i.text(e.key):i.text(String(e))},["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate:function(i,e){if(this.callBase(i,e),i.icon){var t=(0,Ia.H)(i.icon).addClass("dx-list-item-icon"),r=(0,b.Z)("<div>").addClass("dx-list-item-icon-container");r.append(t),e.prepend(r)}},_getBindableFields:function(){return["text","html","icon"]},_updateLoadingState:function(i){var e=this._dataController,t=this._scrollBottomMode()&&i&&!e.isLoading()&&!this._isLastPage();this._shouldContinueLoading(t)?this._infiniteDataLoading():(this._scrollView.release(!t&&!e.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton:function(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted:function(i){return(0,m.$K)(i)&&(this._isFirstLoadCompleted=i),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler:function(i){this._loadIndicationSuppressed()||(i&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout(function(){var r;!this._itemElements().length&&!this._isDataSourceFirstLoadCompleted()||null===(r=this._scrollView)||void 0===r||r.startLoading()}.bind(this)):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),i||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler:function(){!this._shouldAppendItems()&&(0,We.Ym)()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent:function(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff:function(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed:function(i){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=i},_scrollViewIsFull:function(){var i=this._scrollView;return!i||(0,oe.Cr)(i.content())>(0,oe.Cr)(i.container())},_pullDownHandler:function(i){this._pullRefreshAction(i);var e=this._dataController;e.getDataSource()&&!e.isLoading()?(this._clearSelectedItems(),e.pageIndex(0),e.reload()):this._updateLoadingState()},_shouldContinueLoading:function(i){var e,t,r=(0,oe.Cr)(this._scrollView.content())-(0,oe.Cr)(this._scrollView.container())<(null!==(e=null===(t=this._scrollView.scrollOffset())||void 0===t?void 0:t.top)&&void 0!==e?e:0);return i&&(!this._scrollViewIsFull()||r)},_infiniteDataLoading:function(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout(()=>{this._loadNextPage()}))},_scrollBottomHandler:function(i){this._pageLoadingAction(i),this._dataController.isLoading()||this._isLastPage()?this._updateLoadingState():this._loadNextPage()},_renderItems:function(i){this.option("grouped")?((0,j.S6)(i,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),(0,_t.x2)()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent:function(){var i=(0,ce.V4)(Pt.u,this.NAME),e="."+Up,t=this.$element(),r=this.option("collapsibleGroups");t.toggleClass("dx-list-collapsible-groups",r),k.Z.off(t,i,e),r&&k.Z.on(t,i,e,function(a){this._createAction(function(n){var s=(0,b.Z)(n.event.currentTarget).parent();this._collapseGroupHandler(s),this.option("focusStateEnabled")&&this.option("focusedElement",(0,rt.u)(s.find("."+Lu).eq(0)))}.bind(this),{validatingTargetName:"element"})({event:a})}.bind(this))},_collapseGroupHandler:function(i,e){var t=new Y.BH;if(i.hasClass(u0)===e)return t.resolve();var r=i.children("."+Pu),a=(0,oe.zp)(r),n=0;return 0===a&&((0,oe.QQ)(r,"auto"),n=(0,oe.zp)(r)),i.toggleClass(u0,e),Yt.Z.animate(r,{type:"custom",from:{height:a},to:{height:n},duration:200,complete:function(){this.updateDimensions(),this._updateLoadingState(!0),t.resolve()}.bind(this)}),t.promise()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup:function(){this._itemElementsCache=(0,b.Z)(),this.$element().addClass("dx-list"),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria({role:"group",roledescription:"list"},this.$element()),this.setAria({role:"group"},this._focusTarget()),this._setListAria()},_setListAria(){var{items:i}=this.option();this.setAria(null!=i&&i.length?{role:"listbox",label:"Items"}:{role:void 0,label:void 0},this._$listContainer)},_focusTarget:function(){return this._itemContainer()},_renderInkRipple:function(){this._inkRipple=(0,Bp.sY)()},_toggleActiveState:function(i,e,t){this.callBase.apply(this,arguments);var r=this;if(this._inkRipple){var a={element:i,event:t};e?(0,_t.x2)()?this._inkRippleTimer=setTimeout(function(){r._inkRipple.showWave(a)},35):r._inkRipple.showWave(a):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(a))}},_postprocessRenderItem:function(i){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent((0,b.Z)(i.itemElement))},_attachSwipeEvent:function(i){var e=(0,ce.V4)(Pl,this.NAME);k.Z.on(i,e,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler:function(i){this._itemDXEventHandler(i,"onItemSwipe",{direction:i.offset<0?"left":"right"})},_nextButtonHandler:function(i){this._pageLoadingAction(i);var e=this._dataController;e.getDataSource()&&!e.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup:function(i,e){var t=(0,b.Z)("<div>").addClass(ho).appendTo(this._getItemsContainer()),r="dx-".concat((new Ri.Z).toString());this.setAria({role:"group",labelledby:r},t);var n=(0,b.Z)("<div>").addClass(Up).attr("id",r).appendTo(t),s=this.option("groupTemplate"),o=this._getTemplate(e.template||s,e,i,n),l={index:i,itemData:e,container:(0,rt.u)(n)};this._createItemByTemplate(o,l),(0,b.Z)("<div>").addClass("dx-list-group-header-indicator").prependTo(n),this._renderingGroupIndex=i;var d=(0,b.Z)("<div>").addClass(Pu).appendTo(t);(0,j.S6)(F5(e)||[],function(u,c){this._renderItem({group:i,item:u},c,d)}.bind(this)),this._groupRenderAction({groupElement:(0,rt.u)(t),groupIndex:i,groupData:e})},downInkRippleHandler:function(i){this._toggleActiveState((0,b.Z)(i.currentTarget),!0,i)},upInkRippleHandler:function(i){this._toggleActiveState((0,b.Z)(i.currentTarget),!1)},attachGroupHeaderInkRippleEvents:function(){var i="."+Up,e=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);var t=[e,"dxpointerdown",i,this._downInkRippleHandler],r=[e,"dxpointerup dxpointerout",i,this._upInkRippleHandler];k.Z.off(...t),k.Z.on(...t),k.Z.off(...r),k.Z.on(...r)},_createGroupRenderAction:function(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean:function(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose:function(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState:function(i){this.callBase(i),this._scrollView.option("disabled",i||!this.option("scrollingEnabled"))},_toggleNextButton:function(i){var e=this._dataController,t=this._getNextButton();this.$element().toggleClass("dx-has-next",i),i&&e.isLoaded()&&t.appendTo(this._itemContainer()),i||t.detach()},_getNextButton:function(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton:function(){var i=(0,b.Z)("<div>").addClass("dx-list-next-button"),e=(0,b.Z)("<div>").appendTo(i);return this._createComponent(e,pr.Z,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:(0,_t.yj)()?"default":void 0,integrationOptions:{}}),i},_moveFocus:function(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh:function(){if((0,We.Ym)()){var i=this._scrollView.scrollTop();this.callBase(),i&&this._scrollView.scrollTo(i)}else this.callBase()},_optionChanged:function(i){switch(i.name){case"pageLoadMode":this._toggleNextButton(i.value),this._initScrollView();break;case"dataSource":this.callBase(i),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(i),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"collapsibleGroups":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"wrapItemText":this._toggleWrapItemText(i.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(i),this._scrollView.option(i.name,i.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(i),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(i);break;case"_swipeEnabled":case"selectByClick":break;default:this.callBase(i)}},_extendActionArgs:function(i){if(!this.option("grouped"))return this.callBase(i);var e=i.closest("."+ho),t=e.find("."+Lu);return(0,N.l)(this.callBase(i),{itemIndex:{group:e.index(),item:t.index(i)}})},expandGroup:function(i){var e=new Y.BH,t=this._getItemsContainer().find(".".concat(ho)).eq(i);return this._collapseGroupHandler(t,!1).done(function(){e.resolveWith(this)}.bind(this)),e.promise()},collapseGroup:function(i){var e=new Y.BH,t=this._getItemsContainer().find(".".concat(ho)).eq(i);return this._collapseGroupHandler(t,!0).done(function(){e.resolveWith(this)}.bind(this)),e},updateDimensions:function(){var i=this,e=new Y.BH;return i._scrollView?i._scrollView.update().done(function(){!i._scrollViewIsFull()&&i._updateLoadingState(!0),e.resolveWith(i)}):e.resolveWith(i),e.promise()},reload:function(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint:function(){this.scrollTo(0),this.callBase()},scrollTop:function(){return this._scrollView.scrollOffset().top},clientHeight:function(){return this._scrollView.clientHeight()},scrollHeight:function(){return this._scrollView.scrollHeight()},scrollBy:function(i){this._scrollView.scrollBy(i)},scrollTo:function(i){this._scrollView.scrollTo(i)},scrollToItem:function(i){var e=this._editStrategy.getItemElement(i),t=e?.get(0);this._scrollView.scrollToElement(t,{bottom:x5(t,"bottom")})},_dimensionChanged:function(){this.updateDimensions()}}).include(l0);jp.ItemClass=KO;var qp="dx-toolbar-menu-action",p0="dx-toolbar-hidden-button-group",f0="dx-toolbar-menu-section",_0="dx-toolbar-menu-last-section";class z5 extends jp{_init(){super._init(),this._activeStateUnit=".".concat(qp,":not(.").concat(p0,")")}_initMarkup(){this._renderSections(),super._initMarkup(),this._setMenuRole()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){var e=this._itemContainer();(0,j.S6)(["before","center","after","menu"],(t,r)=>{var a="_$".concat(r,"Section");this[a]||(this[a]=(0,b.Z)("<div>").addClass(f0)),this[a].appendTo(e)})}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_setMenuRole(){this.$element().find(".".concat("dx-scrollview-content")).attr("role","menu")}_updateSections(){var e=this.$element().find(".".concat(f0));e.removeClass(_0),e.not(":empty").eq(-1).addClass(_0)}_renderItem(e,t,r,a){var n,s=null!==(n=t.location)&&void 0!==n?n:"menu",o=this["_$".concat(s,"Section")],l=super._renderItem(e,t,o,a);return this._getItemTemplateName({itemData:t})&&l.addClass("dx-toolbar-menu-custom"),("menu"===s||"dxButton"===t.widget||"dxButtonGroup"===t.widget||t.isAction)&&l.addClass(qp),"dxButton"===t.widget&&l.addClass("dx-toolbar-hidden-button"),"dxButtonGroup"===t.widget&&l.addClass(p0),l.addClass(t.cssClass),l}_getItemTemplateName(e){var t=super._getItemTemplateName(e),r=e.itemData;return r&&r.menuItemTemplate||t}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(e,t,r){(0,b.Z)(e.target).closest(".".concat(qp)).length&&super._itemClickHandler(e,t,r)}_clean(){this._getSections().empty(),super._clean()}}var v0=be(9431),Ja=be(187);let g0=(()=>{class i extends Ja.Z{_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{preventScrollEvents:!1})}_getToolbarName(){return"dxToolbar"}}return i.defaultOptions=function(e){Ja.Z.defaultOptions(e)},i})();(0,It.Z)("dxPopup",g0);const m0=g0;class q5 extends hr.default{_supportedKeys(){var e={};return(!this.option("opened")||!this._list.option("focusedElement"))&&(e=this._button._supportedKeys()),(0,N.l)(super._supportedKeys(),e,{tab:function(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,_t.yj)()},options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass("dx-dropdownmenu"),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new v0.s("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){var e=this.$element().addClass("dx-dropdownmenu-button");this._button=this._createComponent(e,pr.Z,{icon:"overflow",template:"content",stylingMode:(0,_t.dC)()?"text":"contained",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:t=>{this.option("opened",!this.option("opened")),this._buttonClickAction(t)}})}_toggleActiveState(e,t,r){this._button._toggleActiveState(e,t,r)}_toggleMenuVisibility(e){var t=e??!this._popup.option("visible");e&&this._renderPopup(),this._popup.toggle(t),this.setAria("expanded",t)}_renderPopup(){if(!this._$popup){this._$popup=(0,b.Z)("<div>").appendTo(this.$element());var{rtlEnabled:e,container:t,animation:r}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(a){var{component:n}=a;n.$wrapper().addClass("dx-dropdownmenu-popup-wrapper").addClass("dx-dropdownmenu-popup")},deferRendering:!1,contentTemplate:a=>this._renderList(a),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top ".concat(e?"left":"right"),at:"bottom ".concat(e?"left":"right"),collision:"fit flip",offset:{v:3},of:this.$element()},animation:r,onOptionChanged:a=>{var{name:n,value:s}=a;"visible"===n&&this.option("opened",s)},container:t,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:a=>this._closeOutsideDropDownHandler(a),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}}_getMaxHeight(){var e=this.$element(),t=e.offset().top,r=(0,oe.zp)((0,We.Jj)()),a=Math.max(t,r-t-(0,oe.zp)(e));return Math.min(r,a-3-10)}_closeOutsideDropDownHandler(e){return!(0,b.Z)(e.target).closest(this.$element()).length}_renderList(e){var t=(0,b.Z)(e);t.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(t,z5,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:r=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(r)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_itemAttributes:{role:"menuitem"}})}_itemOptionChanged(e,t,r){var a;null===(a=this._list)||void 0===a||a._itemOptionChanged(e,t,r),Eu(this._list,e)}_getListDataSource(){var e;return null!==(e=this.option("dataSource"))&&void 0!==e?e:this.option("items")}_setListDataSource(){var e;null===(e=this._list)||void 0===e||e.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(e){super._toggleVisibility(e),this._button.option("visible",e)}_optionChanged(e){var t,r,a,{name:n,value:s}=e;switch(n){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":null===(t=this._list)||void 0===t||t.option(n,this._getTemplate(s));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":null===(r=this._list)||void 0===r||r.option(n,s),super._optionChanged(e);break;case"onItemRendered":null===(a=this._list)||void 0===a||a.option(n,s);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(s),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(n,s);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}_updateFocusableItemsTabIndex(){this.option("items").forEach(e=>Eu(this._list,e))}}var b0="dx-state-invisible",Bu="dx-toolbar-item-auto-hide",Yp="dx-toolbar-item-invisible";class J5{constructor(e){this._toolbar=e}_initMarkup(){(0,J.g0)(()=>{this._renderOverflowMenu(),this._renderMenuItems()})}_renderOverflowMenu(){if(this._hasVisibleMenuItems()){this._renderMenuButtonContainer();var e=(0,b.Z)("<div>").appendTo(this._overflowMenuContainer()),t=this._toolbar._createActionByOption("onItemClick"),r=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(e,q5,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>r,onItemClick:a=>{t(a)},container:this._toolbar.option("menuContainer"),onOptionChanged:a=>{var{name:n,value:s}=a;"opened"===n&&this._toolbar.option("overflowMenuVisible",s),"items"===n&&this._updateMenuVisibility(s)}})}}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=(0,b.Z)("<div>").appendTo(this._toolbar._$afterSection).addClass("dx-toolbar-button").addClass("dx-toolbar-menu-container")}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(e){var t=e??this._getMenuItems(),r=t.length&&this._hasVisibleMenuItems(t);this._toggleMenuVisibility(r)}_toggleMenuVisibility(e){this._overflowMenuContainer()&&this._overflowMenuContainer().toggleClass(b0,!e)}_renderMenuItems(){(0,J.g0)(()=>{this.renderMenuItems()})}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){var e;return(0,J.h3)(null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[],t=>!this._toolbar._isMenuItem(t))}_getHiddenItems(){return this._toolbar._itemContainer().children(".".concat(Bu,".").concat(Yp)).not(".".concat(b0))}_getMenuItems(){var e,t,r=(0,J.h3)(null!==(e=this._toolbar.option("items"))&&void 0!==e?e:[],s=>this._toolbar._isMenuItem(s)),a=this._getHiddenItems();return this._restoreItems=null!==(t=this._restoreItems)&&void 0!==t?t:[],[...[].slice.call(a).map(s=>{var o=this._toolbar._getItemData(s),l=(0,b.Z)(s),d=l.children();return(0,N.l)({menuItemTemplate:()=>(this._restoreItems.push({container:l,item:d}),(0,b.Z)("<div>").addClass(Bu).append(d))},o)}),...r]}_hasVisibleMenuItems(e){var t=e??this._toolbar.option("items"),r=!1,a=(0,Dt.vb)("visible"),n=(0,Dt.vb)("locateInMenu");return(0,j.S6)(t,function(s,o){var l=a(o,{functionsAsIs:!0}),d=n(o,{functionsAsIs:!0});(!1!==l&&("auto"===d||"always"===d)||"menu"===o.location)&&(r=!0)}),r}_arrangeItems(){var e;this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),(0,j.S6)(null!==(e=this._restoreItems)&&void 0!==e?e:[],function(r,a){(0,b.Z)(a.container).append(a.item)}),this._restoreItems=[];var t=(0,oe.dz)(this._toolbar.$element());return this._hideOverflowItems(t),t}_hideOverflowItems(e){var t,r=this._toolbar.$element().find(".".concat(Bu));if(r.length){e=null!==(t=e)&&void 0!==t?t:(0,oe.dz)(this._toolbar.$element()),(0,b.Z)(r).removeClass(Yp);for(var a=this._getItemsWidth();r.length&&e<a;)r.eq(-1).addClass(Yp),a=this._getItemsWidth(),r.splice(-1,1)}}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",[this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(e,t,r){var a;"disabled"!==t&&"options.disabled"!==t||!this._toolbar._isMenuItem(e)?this.renderMenuItems():null===(a=this._menu)||void 0===a||a._itemOptionChanged(e,t,r)}_renderItem(e,t){"auto"===e.locateInMenu&&t.addClass(Bu)}_optionChanged(e,t){var r,a,n,s,o;switch(e){case"disabled":null===(r=this._menu)||void 0===r||r.option(e,t);break;case"overflowMenuVisible":null===(a=this._menu)||void 0===a||a.option("opened",t);break;case"onItemClick":null===(n=this._menu)||void 0===n||n.option(e,t);break;case"menuContainer":null===(s=this._menu)||void 0===s||s.option("container",t);break;case"menuItemTemplate":null===(o=this._menu)||void 0===o||o.option("itemTemplate",t)}}}class w0 extends DO.Z{_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(e){"height"!==e&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass("dx-toolbar-multiline",this._isMultiline()),this._layoutStrategy=this._isMultiline()?new BO(this):new J5(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(e,t,r,a){var n=super._renderItem(e,t,r,a);this._layoutStrategy._renderItem(t,n);var{widget:s,showText:o}=t;return"dxButton"===s&&"inMenu"===o&&n.toggleClass("dx-toolbar-text-auto-hide"),n}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(!this.$element().is(":hidden")){var e=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(e)}}_itemOptionChanged(e,t,r){this._isMenuItem(e)||super._itemOptionChanged(e,t,r),this._layoutStrategy._itemOptionChanged(e,t,r),("disabled"===t||"options.disabled"===t)&&Eu(this,e),"location"===t&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach(e=>Eu(this,e))}_isMenuItem(e){return"menu"===e.location||"always"===e.locateInMenu}_isToolbarItem(e){return void 0===e.location||"never"===e.locateInMenu}_optionChanged(e){var{name:t,value:r}=e;switch(this._layoutStrategy._optionChanged(t,r),t){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged.apply(this,arguments),this._updateFocusableItemsTabIndex();break;default:super._optionChanged.apply(this,arguments)}}updateDimensions(){this._dimensionChanged()}}(0,It.Z)("dxToolbar",w0);const tR=w0;var S0="toolbar-button",y0=["addRowButton","applyFilterButton","columnChooserButton","exportButton","groupPanel","revertButton","saveButton","searchPanel"],x0={defaultOptions:()=>({}),views:{headerPanel:class aR extends wl{init(){super.init(),this._editingController=this.getController("editing"),this._headerFilterController=this.getController("headerFilter"),this.createAction("onToolbarPreparing",{excludeValidators:["disabled","readOnly"]})}_getToolbarItems(){return[]}_getButtonContainer(){return(0,b.Z)("<div>").addClass(this.addWidgetPrefix(S0))}_getToolbarButtonClass(e){var t=e?" ".concat(e):"";return this.addWidgetPrefix(S0)+t}_getToolbarOptions(){var e=this.option("toolbar"),t={toolbarOptions:{items:this._getToolbarItems(),visible:e?.visible,disabled:e?.disabled,onItemRendered(n){var s=n.itemData.onItemRendered;s&&s(n)}}},r=e?.items;if(t.toolbarOptions.items=this._normalizeToolbarItems(t.toolbarOptions.items,r),this.executeAction("onToolbarPreparing",t),t.toolbarOptions&&!(0,m.$K)(t.toolbarOptions.visible)){var a=t.toolbarOptions.items;t.toolbarOptions.visible=!!a?.length}return t.toolbarOptions}_normalizeToolbarItems(e,t){e.forEach(o=>{if(!y0.includes(o.name))throw new Error("Default toolbar item '".concat(o.name,"' is not added to DEFAULT_TOOLBAR_ITEM_NAMES"))});var r={location:"after"},a=Array.isArray(t);if(!(0,m.$K)(t))return e;a||(t=[t]);var n={};e.forEach(o=>{n[o.name]=o});var s=t.map(o=>((0,m.HD)(o)&&(o={name:o}),(0,m.$K)(o.name)&&((0,m.$K)(n[o.name])?o=(0,N.l)(!0,{},n[o.name],o):y0.includes(o.name)&&(o=(0,ye.Z)((0,ye.Z)({},o),{visible:!1}))),(0,N.l)(!0,{},r,o)));return a?s:s[0]}_renderCore(){if(this._toolbar)this._toolbar.option(this._toolbarOptions);else{var e=this.element();e.addClass(this.addWidgetPrefix("header-panel"));var t=ae.Z.format(this.component.NAME+"-ariaToolbar"),r=(0,b.Z)("<div>").attr("aria-label",t).appendTo(e);this._toolbar=this._createComponent(r,tR,this._toolbarOptions)}}_columnOptionChanged(){}_handleDataChanged(){this._requireReady&&this.render()}_isDisabledDefinedByUser(e){var t,r=null===(t=this.option("toolbar"))||void 0===t?void 0:t.items,a=r?.find(n=>n?.name===e);return(0,m.$K)(a?.disabled)}render(){this._toolbarOptions=this._getToolbarOptions(),super.render.apply(this,arguments)}setToolbarItemDisabled(e,t){var r,a=this._toolbar,n=this._isDisabledDefinedByUser(e);if(a&&!n){var o=(null!==(r=a.option("items"))&&void 0!==r?r:[]).findIndex(d=>d.name===e);if(!(o<0)){var l=a.option("items[".concat(o,"]"));a.option("items[".concat(o,"].disabled"),t),l.options&&a.option("items[".concat(o,"].options.disabled"),t)}}}updateToolbarDimensions(){var e;null===(e=this._toolbar)||void 0===e||e.updateDimensions()}getHeaderPanel(){return this.element()}getHeight(){return this.getElementHeight()}optionChanged(e){if("onToolbarPreparing"===e.name&&(this._invalidate(),e.handled=!0),"toolbar"===e.name&&(e.handled=!0,this._toolbar)){var t=(0,Dt.Zw)(e.fullName),r=e.fullName.replace(/^toolbar\./,"");if(1===t.length){var a=this._getToolbarOptions();this._toolbar.option(a)}else if("items"===t[1])if(2===t.length){var n=this._getToolbarOptions();this._toolbar.option("items",n.items)}else if(3===t.length){var s=this._normalizeToolbarItems(this._getToolbarItems(),e.value);this._toolbar.option(r,s)}else t.length>=4&&this._toolbar.option(r,e.value);else this._toolbar.option(r,e.value)}super.optionChanged(e)}isVisible(){return!(!this._toolbarOptions||!this._toolbarOptions.visible)}allowDragging(){}hasGroupedColumns(){}}},extenders:{controllers:{resizing:i=>class extends i{_updateDimensionsCore(){super._updateDimensionsCore.apply(this,arguments),this.getView("headerPanel").updateToolbarDimensions()}}}}};He.registerModule("headerPanel",x0);var sR=be(3657);He.registerModulesOrder(["stateStoring","columns","selection","editorFactory","columnChooser","grouping","editing","editingRowBased","editingFormBased","editingCellBased","masterDetail","validating","adaptivity","data","virtualScrolling","columnHeaders","filterRow","headerPanel","headerFilter","sorting","search","rows","pager","columnsResizingReordering","contextMenu","keyboardNavigation","errorHandling","summary","columnFixing","export","gridView"]);var Xp=hr.default.inherit({_activeStateUnit:".dx-row",_getDefaultOptions(){var i=this.callBase();return(0,j.S6)(He.modules,function(){(0,m.mf)(this.defaultOptions)&&(0,N.l)(!0,i,this.defaultOptions())}),i},_setDeprecatedOptions(){this.callBase(),(0,N.l)(this._deprecatedOptions,{useKeyboard:{since:"19.2",alias:"keyboardNavigation.enabled"},rowTemplate:{since:"21.2",message:'Use the "dataRowTemplate" option instead'},"columnChooser.allowSearch":{since:"23.1",message:'Use the "columnChooser.search.enabled" option instead'},"columnChooser.searchTimeout":{since:"23.1",message:'Use the "columnChooser.search.timeout" option instead'}})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{showRowLines:!0}},{device:()=>(0,_t.yj)(),options:{showRowLines:!0,showColumnLines:!1,headerFilter:{height:315},editing:{useIcons:!0},selection:{showCheckBoxesMode:"always"}}},{device:()=>ii.Z.webkit,options:{loadingTimeout:30,loadPanel:{animation:{show:{easing:"cubic-bezier(1, 0, 1, 0)",duration:500,from:{opacity:0},to:{opacity:1}}}}}},{device:i=>"desktop"!==i.deviceType,options:{grouping:{expandMode:"rowClick"}}}])},_init(){this.callBase(),Te.logHeaderFilterDeprecatedWarningIfNeed(this),He.processModules(this,He),He.callModuleItemsMethod(this,"init")},_clean:J.ZT,_optionChanged(i){He.callModuleItemsMethod(this,"optionChanged",[i]),i.handled||this.callBase(i)},_dimensionChanged(){this.updateDimensions(!0)},_visibilityChanged(i){i&&this.updateDimensions()},_initMarkup(){this.callBase.apply(this,arguments),this.getView("gridView").render(this.$element())},_renderContentImpl(){this.getView("gridView").update()},_renderContent(){var i=this;(0,J.g0)(()=>{i._renderContentImpl()})},_getTemplate(i){var e=i;return(0,m.HD)(e)&&e.startsWith("#")&&(e=(0,b.Z)(i),sR.k.warn("Specifying grid templates with the jQuery selector name is now deprecated. Use the DOM Node or the jQuery object that references this selector instead.")),this.callBase(e)},_dispose(){this.callBase(),He.callModuleItemsMethod(this,"dispose")},isReady(){return this.getController("data").isReady()},beginUpdate(){this.callBase(),He.callModuleItemsMethod(this,"beginUpdate")},endUpdate(){He.callModuleItemsMethod(this,"endUpdate"),this.callBase()},getController(i){return this._controllers[i]},getView(i){return this._views[i]},focus(i){this.getController("keyboardNavigation").focus(i)}});Xp.registerModule=He.registerModule.bind(He),(0,It.Z)("dxDataGrid",Xp);const dR=Xp;var uR=be(8589),hR=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,cR=function i(e){e&&(0,j.S6)(e,(t,r)=>{if((0,m.PO)(r)||Array.isArray(r))i(r);else if("string"==typeof r){var a=hR.exec(r);a&&(e[t]=new Date(Date.UTC(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6])))}})},E0=function(i){var e="sessionStorage"===i.type?(0,uR.y)():(0,We.Jj)().localStorage;if(!e)throw new Error("E1007");return e},I0=function(i){return(0,m.$K)(i.storageKey)?i.storageKey:"storage"};var SR={defaultOptions:()=>({stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}),controllers:{stateStoring:class T0 extends Nt.ViewController{get _dataController(){return this.getController("data")}get _exportController(){return this.getController("export")}get _columnsController(){return this.getController("columns")}init(){return this._state={},this._isLoaded=!1,this._isLoading=!1,this._windowUnloadHandler=()=>{void 0!==this._savingTimeoutID&&this._saveState(this.state())},k.Z.on((0,We.Jj)(),"unload",this._windowUnloadHandler),this}optionChanged(e){"stateStoring"===e.name?(this.isEnabled()&&!this.isLoading()&&this.load(),e.handled=!0):super.optionChanged(e)}dispose(){clearTimeout(this._savingTimeoutID),k.Z.off((0,We.Jj)(),"unload",this._windowUnloadHandler)}_loadState(){var e=this.option("stateStoring");if("custom"===e.type)return e.customLoad&&e.customLoad();try{return JSON.parse(E0(e).getItem(I0(e)))}catch(t){Rt.Z.log("W1022","State storing",t.message)}}_saveState(e){var t=this.option("stateStoring");if("custom"!==t.type)try{E0(t).setItem(I0(t),JSON.stringify(e))}catch(r){Rt.Z.log(r.message)}else t.customSave&&t.customSave(e)}publicMethods(){return["state"]}isEnabled(){return this.option("stateStoring.enabled")}isLoaded(){return this._isLoaded}isLoading(){return this._isLoading}load(){this._isLoading=!0;var e=(0,Y.p4)(this._loadState());return e.always(()=>{this._isLoaded=!0,this._isLoading=!1}).done(t=>{null!==t&&!(0,m.Qr)(t)&&this.state(t)}),e}state(e){if(!arguments.length)return(0,N.l)(!0,{},this._state);this._state=(0,N.l)({},e),cR(this._state)}save(){var e=this;clearTimeout(e._savingTimeoutID),e._savingTimeoutID=setTimeout(()=>{e._saveState(e.state()),e._savingTimeoutID=void 0},e.option("stateStoring.savingTimeout"))}}},extenders:{views:{rowsView:i=>class extends i{init(){super.init(),this._dataController.stateLoaded.add(()=>{if(this._dataController.isLoaded()&&!this._dataController.getDataSource()){this.setLoading(!1),this.renderNoDataText();var e=this.component.getView("columnHeadersView");e&&e.render(),this.component._fireContentReadyAction()}})}}},controllers:{stateStoring:i=>class extends i{init(){return super.init.apply(this,arguments),(i=>{var e=i.getController("columns"),t=i.getController("selection"),r=i.getController("export"),a=i.getController("data");e&&e.columnsChanged.add(()=>{i.updateState({columns:e.getUserState()})}),t&&t.selectionChanged.add(n=>{i.updateState({selectedRowKeys:n.selectedRowKeys,selectionFilter:n.selectionFilter})}),a&&(i._initialPageSize=i.option("paging.pageSize"),i._initialFilterValue=i.option("filterValue"),a.changed.add(()=>{var n=(i=>{var e=i.getView("pagerView"),t=i.getController("data"),r={allowedPageSizes:e?e.getPageSizes():void 0,filterPanel:{filterEnabled:i.option("filterPanel.filterEnabled")},filterValue:i.option("filterValue"),focusedRowKey:i.option("focusedRowEnabled")?i.option("focusedRowKey"):void 0};return(0,N.l)(r,t.getUserState())})(i);i.updateState(n)})),r&&r.selectionOnlyChanged.add(()=>{i.updateState({exportSelectionOnly:r.selectionOnly()})})})(this),this}isLoading(){return super.isLoading()||this._dataController.isStateLoading()}state(e){var t=super.state.apply(this,arguments);return void 0!==e&&this.applyState((0,N.l)(!0,{},e)),t}updateState(e){if(this.isEnabled()){var t=this.state(),r=(0,N.l)({},t,e),a=(0,J.k3)(t),n=(0,J.k3)(r);(0,J.bY)(a,n)||(e=(0,N.l)(!0,{},e),(0,N.l)(this._state,e),this.save())}else(0,N.l)(this._state,e)}applyState(e){var t,{allowedPageSizes:r}=e,{searchText:a}=e,{selectedRowKeys:n}=e,{selectionFilter:s}=e,o=this.option("scrolling.mode"),l="virtual"===o||"infinite"===o,d=!0===this.option("pager.visible")&&this.option("pager.showPageSizeSelector"),u=null===(t=this.getView("rowsView"))||void 0===t?void 0:t.hasHeight();this.component.beginUpdate(),this._columnsController&&this._columnsController.setUserState(e.columns),this._exportController&&this._exportController.selectionOnly(e.exportSelectionOnly),this.option("selection.deferred")||this.option("selectedRowKeys",n||[]),this.option("selectionFilter",s),r&&"auto"===this.option("pager.allowedPageSizes")&&(this.option("pager").allowedPageSizes=r),this.option("focusedRowEnabled")&&(this.option("focusedRowIndex",-1),this.option("focusedRowKey",e.focusedRowKey||null)),this.component.endUpdate(),this.option("searchPanel.text",a||""),this.option("filterValue",((i,e)=>{var t=i.getController("filterSync"),r=i.getController("columns");return t?e.columns||void 0!==e.filterValue?e.filterValue||t.getFilterValueFromColumns(e.columns):i._initialFilterValue||t.getFilterValueFromColumns(r.getColumns()):null})(this,e)),this.option("filterPanel.filterEnabled",!e.filterPanel||e.filterPanel.filterEnabled),this.option("paging.pageIndex",(!l||u)&&e.pageIndex||0),this.option("paging.pageSize",l&&!d||!(0,m.$K)(e.pageSize)?this._initialPageSize:e.pageSize),this._dataController&&this._dataController.reset()}},columns:i=>class extends i{_shouldReturnVisibleColumns(){return super._shouldReturnVisibleColumns.apply(this,arguments)&&(!this._stateStoringController.isEnabled()||this._stateStoringController.isLoaded())}},data:i=>class extends i{dispose(){clearTimeout(this._restoreStateTimeoutID),super.dispose()}callbackNames(){return super.callbackNames().concat(["stateLoaded"])}_refreshDataSource(){if(this._stateStoringController.isEnabled()&&!this._stateStoringController.isLoaded()){clearTimeout(this._restoreStateTimeoutID);var e=new Y.BH;return this._restoreStateTimeoutID=setTimeout(()=>{this._stateStoringController.load().always(()=>{this._restoreStateTimeoutID=null}).done(()=>{super._refreshDataSource(),this.stateLoaded.fire(),e.resolve()}).fail(t=>{this.stateLoaded.fire(),this._handleLoadError(t||"Unknown error"),e.reject()})}),e.promise()}this.isStateLoading()||super._refreshDataSource()}isLoading(){return super.isLoading()||this._stateStoringController.isLoading()}isStateLoading(){return(0,m.$K)(this._restoreStateTimeoutID)}isLoaded(){return super.isLoaded()&&!this.isStateLoading()}},selection:i=>class extends i{_fireSelectionChanged(e){var t=this.option("selection.deferred");this._stateStoringController.isLoading()&&t||super._fireSelectionChanged.apply(this,arguments)}}}}};He.registerModule("stateStoring",SR);var yR=be(5162),A0="dx-editor-cell",D0="dx-selection",ps="dx-select-checkbox",O0="dx-command-select",R0="dx-data-row",Aa="selection.showCheckBoxesMode",kl="selection.mode",L0=function(i,e){var t=i.getView("rowsView"),r=i.getController("selection"),a=(0,b.Z)(e.target).closest(".".concat(R0)),n=t.getRowIndex(a);n<0||("onLongTap"===i.option(Aa)?r.isSelectionWithCheckboxes()?r.stopSelectionWithCheckboxes():r.startSelectionWithCheckboxes():("onClick"===i.option(Aa)&&r.startSelectionWithCheckboxes(),"always"!==i.option(Aa)&&r.changeItemSelection(n,{control:!0})))},AR=(i,e)=>{var{component:t}=e,r=t.getView("rowsView");t.option("renderAsync")&&!t.option("selection.deferred")&&(e.value=t.isRowSelected(e.row.key)),r.renderSelectCheckBoxContainer((0,b.Z)(i),e)},DR=(i,e)=>{var{column:t}=e,r=(0,b.Z)(i),a=e.component.getView("columnHeadersView");r.addClass(A0),a._renderSelectAllCheckBox(r,t),a._attachSelectAllCheckBoxClickEvent(r)},VR={defaultOptions:()=>({selection:{mode:"none",showCheckBoxesMode:"onClick",allowSelectAll:!0,selectAllMode:"allPages",deferred:!1,maxFilterLengthInRequest:1500,alwaysSelectByShift:!1},selectionFilter:[],selectedRowKeys:[]}),controllers:{selection:class OR extends Nt.Controller{init(){var e,{deferred:t,selectAllMode:r,mode:a}=null!==(e=this.option("selection"))&&void 0!==e?e:{};"infinite"===this.option("scrolling.mode")&&!t&&"multiple"===a&&"allPages"===r&&Rt.Z.log("W1018"),this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._stateStoringController=this.getController("stateStoring"),this._selectionMode=a,this._isSelectionWithCheckboxes=!1,this._selection=this._createSelection(),this._updateSelectColumn(),this.createAction("onSelectionChanged",{excludeValidators:["disabled","readOnly"]}),this._dataPushedHandler||(this._dataPushedHandler=this._handleDataPushed.bind(this),this._dataController.pushed.add(this._dataPushedHandler))}_handleDataPushed(e){this._deselectRemovedOnPush(e),this._updateSelectedOnPush(e)}_deselectRemovedOnPush(e){var t=this.option("selection.deferred"),r=e.filter(n=>"remove"===n.type).map(n=>n.key);if(t){var a=this._dataController.items().filter(n=>n.isSelected).map(n=>n.key);r=r.filter(n=>a.find(s=>(0,J.bY)(s,n)))}r.length&&this.deselectRows(r)}_updateSelectedOnPush(e){if(!this.option("selection.deferred")){var r=e.filter(n=>"update"===n.type),a=this.getSelectedRowsData();(0,ar.ii)({keyInfo:this._selection.options,data:a,changes:r})}}_getSelectionConfig(){var e,t=this._dataController,r=this._columnsController,a=null!==(e=this.option("selection"))&&void 0!==e?e:{},{deferred:n}=a,s=this.option("scrolling.mode"),o="virtual"===s||"infinite"===s,l=this.option("selection.allowSelectAll"),d=this.option("scrolling.legacyMode");return{selectedKeys:this.option("selectedRowKeys"),mode:this._selectionMode,deferred:n,alwaysSelectByShift:a.alwaysSelectByShift,maxFilterLengthInRequest:a.maxFilterLengthInRequest,selectionFilter:this.option("selectionFilter"),ignoreDisabledItems:!0,isVirtualPaging:o,allowLoadByRange(){var u=r.getGroupColumns().length>0;return o&&!d&&!u&&l&&!n},key:()=>t?.key(),keyOf:u=>t?.keyOf(u),dataFields(){var u;return null===(u=t.dataSource())||void 0===u?void 0:u.select()},load(u){var c;return(null===(c=t.dataSource())||void 0===c?void 0:c.load(u))||(new Y.BH).resolve([])},plainItems:u=>t.items(!0),isItemSelected:u=>u.selected,isSelectableItem:u=>"data"===u?.rowType&&!u.isNewRow,getItemData:u=>(0,m.$K)(u?.rowType)?u?.oldData||u?.data:u,filter:()=>t.getCombinedFilter(n),totalCount:()=>t.totalCount(),getLoadOptions(u,c,f){var p,g,{sort:w,filter:x}=null!==(g=null===(p=t.dataSource())||void 0===p?void 0:p.lastLoadOptions())&&void 0!==g?g:{},y=Math.min(u,c),E=Math.max(u,c);return(0,m.$K)(f)&&(y=Math.min(f,y),E=Math.max(f,E)),{skip:y,take:E-y+1,filter:x,sort:w}},onSelectionChanged:this._updateSelectedItems.bind(this)}}_updateSelectColumn(){var e=this._columnsController,t=this.isSelectColumnVisible();e.addCommandColumn({type:"selection",command:"select",visible:t,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:O0,width:"auto",cellTemplate:AR,headerCellTemplate:DR}),e.columnOption("command:select","visible",t)}_createSelection(){var e=this._getSelectionConfig();return new yR.Z(e)}_fireSelectionChanged(e){var t=this.option("selection.deferred")?{selectionFilter:this.option("selectionFilter")}:{selectedRowKeys:this.option("selectedRowKeys")};this.selectionChanged.fire(t),e&&this.executeAction("onSelectionChanged",e)}_updateCheckboxesState(e){var{isDeferredMode:t}=e,{selectionFilter:r}=e,{selectedItemKeys:a}=e,{removedItemKeys:n}=e;"onClick"===this.option(Aa)&&((t?r&&function(i,e){var t=0,r=i._dataController.store(),a=r&&r.key(),n=Array.isArray(a);if(!e.length)return!1;if(n&&Array.isArray(e[0])&&"and"===e[1]){for(var s=0;s<e.length;s++)if(Array.isArray(e[s])){if(e[s][0]!==a[t]||"="!==e[s][1])return!0;t++}return!1}return a!==e[0]}(this,r):a.length>1)?this.startSelectionWithCheckboxes():(t?r&&!r.length:0===a.length&&n.length)&&this.stopSelectionWithCheckboxes())}_updateSelectedItems(e){var t,r=this.option("selection.deferred"),a=this._selection.selectionFilter(),n=this._dataController,s=n.items(!0),o=n.items();if(s){var l=this.isSelectionWithCheckboxes(),d=this.getChangedItemIndexes(s),u=this.getChangedItemIndexes(o);this._updateCheckboxesState({selectedItemKeys:e.selectedItemKeys,removedItemKeys:e.removedItemKeys,selectionFilter:a,isDeferredMode:r}),(d.length||l!==this.isSelectionWithCheckboxes())&&n.updateItems({changeType:"updateSelection",itemIndexes:u}),r?(this.option("selectionFilter",a),t={}):(e.addedItemKeys.length||e.removedItemKeys.length)&&(this._selectedItemsInternalChange=!0,this.option("selectedRowKeys",e.selectedItemKeys.slice(0)),this._selectedItemsInternalChange=!1,t={selectedRowsData:e.selectedItems.slice(0),selectedRowKeys:e.selectedItemKeys.slice(0),currentSelectedRowKeys:e.addedItemKeys.slice(0),currentDeselectedRowKeys:e.removedItemKeys.slice(0)}),this._fireSelectionChanged(t)}}getChangedItemIndexes(e){for(var t=[],r=this.option("selection.deferred"),a=0,{length:n}=e;a<n;a++){var s=e[a],o=this.isRowSelected(r?s.data:s.key);this._selection.isDataItem(s)&&s.isSelected!==o&&t.push(a)}return t}callbackNames(){return["selectionChanged"]}optionChanged(e){switch(super.optionChanged(e),e.name){case"selection":var t=this._selectionMode;if(this.init(),"selection.showCheckBoxesMode"!==e.fullName){var r=this._selectionMode,a=this.option("selectedRowKeys");t!==r&&("single"===r?a.length>1&&(a=[a[0]]):"multiple"!==r&&(a=[])),this.selectRows(a).always(()=>{this._fireSelectionChanged()})}this._columnsController.updateColumns(),e.handled=!0;break;case"selectionFilter":this._selection.selectionFilter(e.value),e.handled=!0;break;case"selectedRowKeys":var n=e.value||[];Array.isArray(n)&&!this._selectedItemsInternalChange&&(this.component.getDataSource()||!n.length)&&this.selectRows(n),e.handled=!0}}publicMethods(){return["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","deselectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"]}isRowSelected(e){return this._selection.isItemSelected(e)}isSelectColumnVisible(){return"multiple"===this.option(kl)&&("always"===this.option(Aa)||"onClick"===this.option(Aa)||this._isSelectionWithCheckboxes)}_isOnePageSelectAll(){return"page"===this.option("selection.selectAllMode")}isSelectAll(){return this._selection.getSelectAllState(this._isOnePageSelectAll())}selectAll(){return"onClick"===this.option(Aa)&&this.startSelectionWithCheckboxes(),this._selection.selectAll(this._isOnePageSelectAll())}deselectAll(){return this._selection.deselectAll(this._isOnePageSelectAll())}clearSelection(){return this.selectedItemKeys([])}refresh(){var e,t=null!==(e=this.option("selectedRowKeys"))&&void 0!==e?e:[];return!this.option("selection.deferred")&&t.length?this.selectedItemKeys(t):(new Y.BH).resolve().promise()}selectedItemKeys(e,t,r,a){return this._selection.selectedItemKeys(e,t,r,a)}getSelectedRowKeys(e){return this._selection.getSelectedItemKeys()}selectRows(e,t){return this.selectedItemKeys(e,t)}deselectRows(e){return this.selectedItemKeys(e,!0,!0)}selectRowsByIndexes(e){var t=this._dataController.items(),r=[];return Array.isArray(e)||(e=Array.prototype.slice.call(arguments,0)),(0,j.S6)(e,function(){var a=t[this];a&&"data"===a.rowType&&r.push(a.key)}),this.selectRows(r)}getSelectedRowsData(e){return this._selection.getSelectedItems()}loadSelectedItemsWithFilter(){return this._selection.loadSelectedItemsWithFilter()}changeItemSelection(e,t,r){t=t||{},this.isSelectionWithCheckboxes()&&(t.control=!0);var a=e+this._dataController.getRowIndexOffset()-this._dataController.getRowIndexOffset(!0);return this._selection.changeItemSelection(a,t,r)}focusedItemIndex(e){if(!(0,m.$K)(e))return this._selection._focusedItemIndex;this._selection._focusedItemIndex=e}isSelectionWithCheckboxes(){return"multiple"===this.option(kl)&&("always"===this.option(Aa)||this._isSelectionWithCheckboxes)}startSelectionWithCheckboxes(){return"multiple"===this.option(kl)&&!this.isSelectionWithCheckboxes()&&(this._isSelectionWithCheckboxes=!0,this._updateSelectColumn(),!0)}stopSelectionWithCheckboxes(){return!!this._isSelectionWithCheckboxes&&(this._isSelectionWithCheckboxes=!1,this._updateSelectColumn(),!0)}}},extenders:{controllers:{data:i=>class extends i{init(){var e=this.option("selection.deferred");super.init.apply(this,arguments),e&&this._selectionController._updateCheckboxesState({isDeferredMode:!0,selectionFilter:this.option("selectionFilter")})}_loadDataSource(){var e=this;return super._loadDataSource().always(()=>{e._selectionController.refresh()})}_processDataItem(e,t){var r=this._selectionController.isSelectColumnVisible(),a=t.isDeferredSelection=void 0===t.isDeferredSelection?this.option("selection.deferred"):t.isDeferredSelection,n=super._processDataItem.apply(this,arguments);if(n.isSelected=this._selectionController.isRowSelected(a?n.data:n.key),r&&n.values)for(var s=0;s<t.visibleColumns.length;s++)if("select"===t.visibleColumns[s].command){n.values[s]=n.isSelected;break}return n}refresh(e){var t=this,r=new Y.BH;return super.refresh.apply(this,arguments).done(()=>{!e||e.selection?t._selectionController.refresh().done(r.resolve).fail(r.reject):r.resolve()}).fail(r.reject),r.promise()}_handleDataChanged(e){var t=this.hasLoadOperation();super._handleDataChanged.apply(this,arguments),t&&!this._repaintChangesOnly&&this._selectionController.focusedItemIndex(-1)}_applyChange(e){if(!e||"updateSelection"!==e.changeType)return super._applyChange.apply(this,arguments);e.items.forEach((t,r)=>{var a=this._items[r];a&&(a.isSelected=t.isSelected,a.values=t.values)})}_endUpdateCore(){var e=this._changes;if(e.length>1&&e.every(a=>"updateSelection"===a.changeType)){var r=e.map(a=>a.itemIndexes||[]).reduce((a,n)=>a.concat(n));this._changes=[{changeType:"updateSelection",itemIndexes:r}]}super._endUpdateCore.apply(this,arguments)}},contextMenu:i=>class extends i{_contextMenuPrepared(e){var t=e.event;t.originalEvent&&"dxhold"!==t.originalEvent.type||e.items&&e.items.length>0||L0(this,t)}}},views:{columnHeadersView:i=>class extends i{init(){super.init(),this._selectionController.selectionChanged.add(this._updateSelectAllValue.bind(this))}_updateSelectAllValue(){var e=this.element(),t=e&&e.find(".".concat(ps));if(e&&t.length&&"multiple"===this.option("selection.mode")){var r=this._selectionController.isSelectAll(),a=!1!==r,n=this.option("selection.allowSelectAll")?!this._dataController.isEmpty():a;t.dxCheckBox("instance").option({visible:n,value:r})}}_handleDataChanged(e){super._handleDataChanged(e),(!e||"refresh"===e.changeType||e.repaintChangesOnly&&"update"===e.changeType)&&this.waitAsyncTemplates().done(()=>{this._updateSelectAllValue()})}_renderSelectAllCheckBox(e,t){var r=this,a=r._dataController.isEmpty(),n=(0,b.Z)("<div>").appendTo(e).addClass(ps);return r.setAria("label",ae.Z.format("dxDataGrid-ariaSelectAll"),n),r._editorFactoryController.createEditor(n,(0,N.l)({},t,{parentType:"headerRow",dataType:"boolean",value:this._selectionController.isSelectAll(),editorOptions:{visible:!a&&(r.option("selection.allowSelectAll")||!1!==this._selectionController.isSelectAll())},tabIndex:r.option("useLegacyKeyboardNavigation")?-1:r.option("tabIndex")||0,setValue:(s,o)=>{var l=r.option("selection.allowSelectAll");o.component.option("visible",l||!1!==o.component.option("value")),o.event&&this._selectionController.isSelectAll()!==s&&(o.value&&!l?o.component.option("value",!1):o.value?this._selectionController.selectAll():this._selectionController.deselectAll(),o.event.preventDefault())}})),n}_attachSelectAllCheckBoxClickEvent(e){k.Z.on(e,Pt.u,this.createAction(t=>{var{event:r}=t;(0,b.Z)(r.target).closest(".".concat(ps)).length||k.Z.trigger((0,b.Z)(r.currentTarget).children(".".concat(ps)),Pt.u),r.preventDefault()}))}},rowsView:i=>class extends i{renderSelectCheckBoxContainer(e,t){"data"!==t.rowType||t.row.isNewRow?Te.setEmptyText(e):(e.addClass(A0),this._attachCheckBoxClickEvent(e),this._renderSelectCheckBox(e,t))}_renderSelectCheckBox(e,t){var r=(0,b.Z)("<div>").addClass(ps).appendTo(e);return this.setAria("label",ae.Z.format("dxDataGrid-ariaSelectRow"),r),this._editorFactoryController.createEditor(r,(0,N.l)({},t.column,{parentType:"dataRow",dataType:"boolean",lookup:null,value:t.value,setValue(a,n){var s;"keydown"===(null===(s=n?.event)||void 0===s?void 0:s.type)&&k.Z.trigger(n.element,Pt.u,n)},row:t.row})),r}_attachCheckBoxClickEvent(e){k.Z.on(e,Pt.u,this.createAction(function(t){var{event:r}=t,a=this.getRowIndex((0,b.Z)(r.currentTarget).closest(".".concat("dx-row")));a>=0&&(this._selectionController.startSelectionWithCheckboxes(),this._selectionController.changeItemSelection(a,{shift:r.shiftKey}),(0,b.Z)(r.target).closest(".".concat(ps)).length&&this._dataController.updateItems({changeType:"updateSelection",itemIndexes:[a]}))}))}_update(e){var t=this,r=t.getTableElements();"updateSelection"===e.changeType?r.length>0&&((0,j.S6)(r,(a,n)=>{(0,j.S6)(e.itemIndexes||[],(s,o)=>{var l;if(e.items[o]&&(l=t._getRowElements((0,b.Z)(n)).eq(o)).length){var{isSelected:d}=e.items[o];l.toggleClass(D0,void 0!==d&&d).find(".".concat(ps)).dxCheckBox("option","value",d),t.setAria("selected",d,l)}})}),t._updateCheckboxesClass()):super._update(e)}_createTable(){var e=this,t=e.option("selection.mode"),r=super._createTable.apply(e,arguments);return"none"!==t&&(("onLongTap"===e.option(Aa)||!Br.touch)&&k.Z.on(r,(0,ce.V4)(lo.Z.name,"dxDataGridRowsView"),".".concat(R0),e.createAction(a=>{L0(e.component,a.event),a.event.stopPropagation()})),k.Z.on(r,"mousedown selectstart",e.createAction(a=>{var{event:n}=a;n.shiftKey&&n.preventDefault()}))),r}_createRow(e){var t=super._createRow.apply(this,arguments);if(e){var{isSelected:r}=e;r&&t.addClass(D0),"none"!==this.option(kl)&&this.setAria("selected",r,t)}return t}_rowClickForTreeList(e){super._rowClick(e)}_rowClick(e){var t=e.event,r=(0,b.Z)(t.target).closest(".".concat("dx-selection-disabled")).length;this.isClickableElement((0,b.Z)(t.target))||(!r&&("multiple"!==this.option(kl)||"always"!==this.option(Aa))&&this._selectionController.changeItemSelection(e.rowIndex,{control:(0,ce.j1)(t),shift:t.shiftKey})&&(t.preventDefault(),e.handled=!0),super._rowClick(e))}isClickableElement(e){return!!e.closest(".".concat(O0)).length}_renderCore(e){var t=super._renderCore(e);return this._updateCheckboxesClass(),t}_updateCheckboxesClass(){var e=this.getTableElements(),t=this._selectionController.isSelectColumnVisible()&&!this._selectionController.isSelectionWithCheckboxes();(0,j.S6)(e,(r,a)=>{(0,b.Z)(a).toggleClass("dx-select-checkboxes-hidden",t)})}}}}};He.registerModule("selection",VR);var P0=be(295),Xt=be(2557),Qa=be(3720),B0="dx-invalid-message-auto",V0="dx-validation-target";class Jp extends P0.Z{getProps(){var e=super.getProps();return e.onFocusIn=()=>{if("auto"===this.option("validationMessageMode")){var r=(0,b.Z)(function NR(i,e){var t,r;return(null!==(t=null===(r=i.getRootNode)||void 0===r?void 0:r.call(i))&&void 0!==t?t:document).querySelector(e)}(this.element(),".dx-invalid-message.dx-overlay-wrapper"));r?.removeClass(B0),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>{r?.addClass(B0)},150)}},e.saveValueChangeEvent=t=>{this._valueChangeEventInstance=t},e}_createElement(e){super._createElement(e),this.showValidationMessageTimeout=void 0,this.validationRequest=(0,ri.Z)(),(0,Ys.aT)(this.$element()[0],V0,this)}_render(){var e;null===(e=this.option("_onMarkupRendered"))||void 0===e||e()}_init(){super._init(),this._initialValue=this.option("value")}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(e){super._initOptions(e),this.option(Xt.Z.initValidationOptions(e))}_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(e,t){var r=(0,N.l)({},e.option()),a=()=>this._silent(t,r);a(),e.on("optionChanged",a)}_raiseValidation(e,t){var r=!(0,m.$K)(e)&&!(0,m.$K)(t);e!==t&&!r&&this.validationRequest.fire({value:e,editor:this})}_raiseValueChangeAction(e,t){var r;null===(r=this._valueChangeAction)||void 0===r||r.call(this,{element:this.$element(),previousValue:t,value:e,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(e){var{name:t,previousValue:r,value:a}=e;switch(t&&void 0!==this._getActionConfigs()[t]&&this._addAction(t),t){case"value":this._raiseValidation(a,r),this.option("isDirty",this._initialValue!==a),this._raiseValueChangeAction(a,r);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(Xt.Z.synchronizeValidationOptions(e,this.option()))}super._optionChanged(e)}clear(){var{value:e}=this._getDefaultOptions();this.option({value:e})}reset(){arguments.length&&(this._initialValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0),this.option("value",this._initialValue),this.option("isDirty",!1),this.option("isValid",!0)}_dispose(){super._dispose(),(0,Ys.aT)(this.element(),V0,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}}var FR=Qa.Z.isEditor,N0=i=>FR(i)||i instanceof Jp;Jp.isEditor=N0,Qa.Z.isEditor=N0;class kR extends Jp{_useTemplates(){return!1}_isFocused(){return this.$element()[0].classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){var e=super.getProps();return null!==e.value&&(e.value=!!e.value),e}}var pi=be(3366),Qe=be(2492),Tt=be(7379),Ml=be(8794),F0=be(8877),co=be(25),MR=be(7392),Er=be(7143),HR=["dataSource","selectedRowKeys"],ZR={integrationOptions:!0};function Hl(i,e,t){return{path:i,value:e,previousValue:t}}function k0(i,e,t,r,a,n){if(!ZR[r]){var s=(0,m.dt)(e),o=(0,m.dt)(t);if(e!==t)if(s!==o)i.push(Hl(r,t,e));else if("object"===s)if((0,m.PO)(t)){var l=H0(e,t,a,n);i.push(...l.map(c=>(0,ye.Z)({},c,{path:"".concat(r,".").concat(c.path)})))}else i.push(Hl(r,t,e));else if("array"===s)if(n.some(c=>a.includes(c))&&e!==t)i.push(Hl(r,t,e));else if(e.length!==t.length)i.push(Hl(r,t,e));else{var u=H0(e,t,a,n);[].push.apply(i,u.map(c=>(0,ye.Z)({},c,{path:"".concat(r).concat(c.path)})))}else i.push(Hl(r,t,e))}}var M0=i=>(e,t,r,a)=>{var n=[],s=Array.isArray(e)?o=>{k0(n,e[o],t[o],"[".concat(o,"]"),"".concat(r,".").concat(o),a)}:o=>{k0(n,e[o],t[o],o,"".concat(r,".").concat(o),a)};return i(e).forEach(s),Object.keys(t).filter(o=>!Object.prototype.hasOwnProperty.call(e,o)&&e[o]!==t[o]).forEach(o=>{n.push({path:o,value:t[o],previousValue:e[o]})}),n},H0=M0(i=>Object.keys(i)),zR={key:!0,ref:!0,children:!0,style:!0},WR=M0(i=>Object.keys(i).filter(e=>!zR[e])),KR=["valueChange"],GR=["componentProps","componentType","templateNames"],Z0=i=>Object.keys(i).reduce((e,t)=>(void 0!==i[t]&&(e[t]=i[t]),e),{}),jR={};let Qp=(()=>{class i extends Tt.OS{constructor(t){super(t),this.state={},this.widgetRef=(0,Qe.Vf)(),this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.updateWidget=this.updateWidget.bind(this)}get config(){return this.context[Er.E.id]?this.context[Er.E.id]:Er.E.defaultValue}createEffects(){return[new Tt.b0(this.setupWidget,[]),new Tt.b0(this.updateWidget,[this.props.componentProps,this.config,this.props.templateNames])]}updateEffects(){var t;null===(t=this._effects[1])||void 0===t||t.update([this.props.componentProps,this.config,this.props.templateNames])}setupWidget(){var t=new this.props.componentType(this.widgetRef.current,this.properties);return this.instance=t,()=>{t.dispose(),this.instance=null}}updateWidget(){var t=this.getInstance();if(t){var r=function $R(i,e){return WR(i,e,"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:HR)}(this.prevProps||{},this.properties);r.length&&(t.beginUpdate(),r.forEach(a=>{var{path:n,value:s}=a;t.option(n,s)}),t.endUpdate()),this.prevProps=this.properties}}get properties(){var t,r=Z0(this.props.componentProps),{valueChange:a}=r,n=(0,pi.Z)(r,KR),s=(0,ye.Z)({rtlEnabled:!(null===(t=this.config)||void 0===t||!t.rtlEnabled),isRenovated:!0},n);return a&&(s.onValueChanged=l=>{var{value:d}=l;return a(d)}),this.props.templateNames.forEach(l=>{(0,Tt._V)(l,s,this)&&(s[l]=(d,u,c)=>{(0,Tt.SM)(this.props.componentProps[l],{item:d,index:u,container:c},this)})}),s}get restAttributes(){return(0,pi.Z)(this.props,GR)}getInstance(){return this.instance}render(){return(i=>{var{props:{componentProps:{className:e}},restAttributes:t,widgetRef:r}=i;return Z0((0,Qe.Wm)(1,"div",e,null,1,(0,ye.Z)({},t),null,r))})({props:(0,ye.Z)({},this.props),widgetRef:this.widgetRef,config:this.config,properties:this.properties,restAttributes:this.restAttributes})}}return i.defaultProps=jR,i})();var qR=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionSide","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],XR=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(F0.O),Object.getOwnPropertyDescriptors({mode:"auto",positionSide:"top",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0})));let JR=(()=>{class i extends Tt.Ul{constructor(t){super(t),this.state={}}get componentProps(){return this.props}get restAttributes(){return(0,pi.Z)(this.props,qR)}render(){return(i=>{var{componentProps:e,restAttributes:t}=i;return(0,Qe.vs)((0,Qe.Iz)(2,Qp,(0,ye.Z)({componentType:MR.Z,componentProps:e,templateNames:[]},t)))})({props:(0,ye.Z)({},this.props),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return i.defaultProps=XR,i})();var QR=be(3188),eL=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],fi=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(F0.O),Object.getOwnPropertyDescriptors({readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,isDirty:!1,inputAttr:Object.freeze({}),defaultValue:null,valueChange:()=>{}}))),rL={get readOnly(){return fi.readOnly},get name(){return fi.name},get validationError(){return fi.validationError},get validationErrors(){return fi.validationErrors},get validationMessageMode(){return fi.validationMessageMode},get validationMessagePosition(){return fi.validationMessagePosition},get validationStatus(){return fi.validationStatus},get isValid(){return fi.isValid},get isDirty(){return fi.isDirty},get inputAttr(){return fi.inputAttr},get defaultValue(){return fi.defaultValue},get valueChange(){return fi.valueChange},get className(){return fi.className},get activeStateEnabled(){return fi.activeStateEnabled},get disabled(){return fi.disabled},get focusStateEnabled(){return fi.focusStateEnabled},get hoverStateEnabled(){return fi.hoverStateEnabled},get tabIndex(){return fi.tabIndex},get visible(){return fi.visible},get aria(){return Ml.W6.aria},get classes(){return Ml.W6.classes}};class Vu extends Tt.DZ{constructor(e){super(e),this.widgetRef=(0,Qe.Vf)(),this.rootElementRef=(0,Qe.Vf)(),this.__getterCache={},this.state={validationMessageGuid:"dx-".concat(new Ri.Z),isValidationMessageVisible:!1,value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new Tt.b0(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),(0,Tt.gt)()]}updateEffects(){var e;null===(e=this._effects[0])||void 0===e||e.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState(e=>({isValidationMessageVisible:this.shouldShowValidationMessage}))}onFocusIn(e){var{onFocusIn:t}=this.props;t?.(e)}get cssClasses(){return"".concat((i=>{var{classes:e,isValid:t,readOnly:r}=i,a={"dx-state-readonly":!!r,"dx-invalid":!t,["".concat(e)]:!!e};return(0,co.G)(a)})((0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})))}get shouldShowValidationMessage(){var e,{isValid:t,validationStatus:r}=this.props,a=null!==(e=this.validationErrors)&&void 0!==e?e:[];return!(t&&"invalid"!==r)&&a.length>0}get aria(){var{isValid:e,readOnly:t}=this.props,r={readonly:t?"true":"false",invalid:e?"false":"true"};return this.shouldShowValidationMessage&&(r.describedBy=this.state.validationMessageGuid),(0,ye.Z)({},r,this.props.aria)}get validationErrors(){return void 0!==this.__getterCache.validationErrors?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{var{validationError:e,validationErrors:t}=this.props,r=t&&[...t];return!r&&e&&(r=[(0,ye.Z)({},e)]),r})()}get validationMessageTarget(){var e;return null===(e=this.rootElementRef)||void 0===e?void 0:e.current}get restAttributes(){var e=(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,pi.Z)(e,eL)}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(e,t,r){super.componentWillUpdate(),(this.props.validationError!==e.validationError||this.props.validationErrors!==e.validationErrors)&&(this.__getterCache.validationErrors=void 0)}render(){return(i=>{var{aria:e,cssClasses:t,isValidationMessageVisible:r,onFocusIn:a,props:{accessKey:n,activeStateEnabled:s,children:o,className:l,disabled:d,focusStateEnabled:u,height:c,hint:f,hoverStateEnabled:p,onClick:g,onKeyDown:w,rtlEnabled:x,tabIndex:y,validationMessageMode:E,validationMessagePosition:V,visible:F,width:q},restAttributes:ee,rootElementRef:X,validationErrors:M,validationMessageGuid:le,validationMessageTarget:fe,widgetRef:B}=i;return(0,Qe.vs)((0,Qe.Iz)(2,Ml.$L,(0,ye.Z)({rootElementRef:X,aria:e,classes:t,activeStateEnabled:s,focusStateEnabled:u,hoverStateEnabled:p,accessKey:n,className:l,rtlEnabled:x,hint:f,disabled:d,height:c,width:q,onFocusIn:a,onClick:g,onKeyDown:w,tabIndex:y,visible:F},ee,{children:(0,Qe.xJ)([o,r&&(0,Qe.Iz)(2,JR,{validationErrors:M,mode:E,positionSide:V,rtlEnabled:x,target:fe,boundary:fe,visualContainer:fe,contentId:le})],0)}),null,B))})({props:(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),validationMessageGuid:this.state.validationMessageGuid,isValidationMessageVisible:this.state.isValidationMessageVisible,rootElementRef:this.rootElementRef,widgetRef:this.widgetRef,onFocusIn:this.onFocusIn,cssClasses:this.cssClasses,shouldShowValidationMessage:this.shouldShowValidationMessage,aria:this.aria,validationErrors:this.validationErrors,validationMessageTarget:this.validationMessageTarget,restAttributes:this.restAttributes})}}function W0(i){var e,t=(0,We.Jj)();return i?null===(e=t.getComputedStyle)||void 0===e?void 0:e.call(t,i):null}Vu.defaultProps=rL;var nL=[[22,16],[18,16]],sL=[[[12,8],[20,18]],[[16,10],[16,14]]];function $0(){var i=(0,_t.Vk)();return{isMaterialTheme:(0,_t.x2)(i),isCompactTheme:(0,_t.f5)(i)}}var uL=["isChecked","size"],cL={isChecked:!1};let pL=(()=>{class i extends Tt.OS{constructor(t){super(t),this.state={},this.elementRef=(0,Qe.Vf)(),this.__getterCache={},this.updateFontSize=this.updateFontSize.bind(this),this.setIconFontSize=this.setIconFontSize.bind(this),this.getIconSize=this.getIconSize.bind(this),this.getComputedIconSize=this.getComputedIconSize.bind(this)}createEffects(){return[new Tt.b0(this.updateFontSize,[this.props.isChecked,this.props.size])]}updateEffects(){var t;null===(t=this._effects[0])||void 0===t||t.update([this.props.isChecked,this.props.size])}updateFontSize(){var{isChecked:t,size:r}=this.props;if((0,We.Ym)()&&r){var n=function dL(i,e){var t=function lL(i){var{isCompactTheme:e,isMaterialTheme:t}=$0();return sL[+i][+t][+e]}(e),r=function oL(){var{isCompactTheme:i,isMaterialTheme:e}=$0();return nL[+e][+i]}();return Math.ceil(t/r*i)}(this.getIconSize(r),t);this.setIconFontSize(n)}}setIconFontSize(t){this.elementRef.current.style.fontSize="".concat(t,"px")}getIconSize(t){return(0,m.kE)(t)?t:t.endsWith("px")?parseInt(t,10):this.getComputedIconSize()}getComputedIconSize(){var r=W0(this.elementRef.current);return parseInt(r?.width,10)}get cssStyles(){return void 0!==this.__getterCache.cssStyles?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{var{size:t}=this.props,r=(0,lr.bh)("width",t);return{height:(0,lr.bh)("height",t),width:r}})()}get restAttributes(){return(0,pi.Z)(this.props,uL)}componentWillUpdate(t,r,a){super.componentWillUpdate(),this.props.size!==t.size&&(this.__getterCache.cssStyles=void 0)}render(){return(i=>{var{cssStyles:e,elementRef:t}=i;return(0,Qe.Wm)(1,"span","dx-checkbox-icon",null,1,{style:(0,Tt.jk)(e)},null,t)})({props:(0,ye.Z)({},this.props),elementRef:this.elementRef,setIconFontSize:this.setIconFontSize,getIconSize:this.getIconSize,getComputedIconSize:this.getComputedIconSize,cssStyles:this.cssStyles,restAttributes:this.restAttributes})}}return i.defaultProps=cL,i})();var fL=["accessKey","activeStateEnabled","aria","className","defaultValue","disabled","enableThreeStateBehavior","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],bi=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(fi),Object.getOwnPropertyDescriptors({text:"",enableThreeStateBehavior:!1,activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator()},defaultValue:!1,valueChange:()=>{}}))),gL={get text(){return bi.text},get enableThreeStateBehavior(){return bi.enableThreeStateBehavior},get activeStateEnabled(){return bi.activeStateEnabled},get hoverStateEnabled(){return bi.hoverStateEnabled},get focusStateEnabled(){return bi.focusStateEnabled},get defaultValue(){return bi.defaultValue},get valueChange(){return bi.valueChange},get readOnly(){return bi.readOnly},get name(){return bi.name},get validationError(){return bi.validationError},get validationErrors(){return bi.validationErrors},get validationMessageMode(){return bi.validationMessageMode},get validationMessagePosition(){return bi.validationMessagePosition},get validationStatus(){return bi.validationStatus},get isValid(){return bi.isValid},get isDirty(){return bi.isDirty},get inputAttr(){return bi.inputAttr},get className(){return bi.className},get disabled(){return bi.disabled},get tabIndex(){return bi.tabIndex},get visible(){return bi.visible},get aria(){return Ml.W6.aria}};class Nu extends Tt.DZ{constructor(e){super(e),this.editorRef=(0,Qe.Vf)(),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[(0,Tt.gt)()]}onWidgetClick(e){var{enableThreeStateBehavior:t,readOnly:r,saveValueChangeEvent:a}=this.props;if(!r)if(a?.(e),t){var n;this.setState(o=>({value:n=null===(void 0!==this.props.value?this.props.value:o.value)||!(void 0!==this.props.value?this.props.value:o.value)&&null})),this.props.valueChange(n)}else{var s;this.setState(o=>{var l;return{value:s=!(null!==(l=void 0!==this.props.value?this.props.value:o.value)&&void 0!==l&&l)}}),this.props.valueChange(s)}}keyDown(e){var{onKeyDown:t}=this.props,{keyName:r,originalEvent:a,which:n}=e,s=t?.(e);if(null!=s&&s.cancel)return s;("space"===r||"space"===n)&&(a.preventDefault(),this.onWidgetClick(a))}get cssClasses(){return(i=>{var{text:e,value:t}=i;return(0,co.G)({"dx-checkbox":!0,"dx-checkbox-checked":!0===t,"dx-checkbox-has-text":!!e,"dx-checkbox-indeterminate":null===t})})((0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}))}get aria(){var r={role:"checkbox",checked:null===(void 0!==this.props.value?this.props.value:this.state.value)?"mixed":"".concat(!0===(void 0!==this.props.value?this.props.value:this.state.value))};return(0,ye.Z)({},r,this.props.aria)}get restAttributes(){var e=(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,pi.Z)(e,fL)}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){return(i=>{var{aria:e,cssClasses:t,editorRef:r,keyDown:a,onWidgetClick:n,props:{accessKey:s,activeStateEnabled:o,className:l,disabled:d,focusStateEnabled:u,height:c,hint:f,hoverStateEnabled:p,iconSize:g,isValid:w,name:x,onFocusIn:y,readOnly:E,rtlEnabled:V,tabIndex:F,text:q,validationError:ee,validationErrors:X,validationMessageMode:M,validationMessagePosition:le,validationStatus:fe,value:B,visible:P,width:U},restAttributes:$}=i;return(0,Qe.vs)((0,Qe.Iz)(2,Vu,(0,ye.Z)({aria:e,classes:t,onClick:n,onKeyDown:a,accessKey:s,activeStateEnabled:o,focusStateEnabled:u,hoverStateEnabled:p,className:l,disabled:d,readOnly:E,hint:f,height:c,width:U,rtlEnabled:V,tabIndex:F,visible:P,validationError:ee,validationErrors:X,validationMessageMode:M,validationMessagePosition:le,validationStatus:fe,isValid:w,onFocusIn:y},$,{children:(0,Qe.xJ)([(0,Qe.vs)((0,Qe.Wm)(64,"input",null,null,1,(0,ye.Z)({type:"hidden",value:"".concat(B)},x&&{name:x}))),(0,Qe.Wm)(1,"div","dx-checkbox-container",[(0,Qe.Iz)(2,pL,{size:g,isChecked:!0===B}),q&&(0,Qe.Wm)(1,"span","dx-checkbox-text",q,0)],0)],4)}),null,r))})({props:(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),editorRef:this.editorRef,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,cssClasses:this.cssClasses,aria:this.aria,restAttributes:this.restAttributes})}}Nu.defaultProps=gL;var K0=[];class ef extends kR{getProps(){var e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.focus(...arguments)}blur(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","enableThreeStateBehavior","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","isValid","isDirty","inputAttr","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return Nu}}(0,It.Z)("dxCheckBox",ef),ef.defaultOptions=function CL(i){K0.push(i),Nu.defaultProps=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(Nu.defaultProps),Object.getOwnPropertyDescriptors(function mL(i){var e=["value"];return Object.keys(i).reduce((t,r)=>{var a=i[r];return t[e.some(s=>s===r)?"default"+r.charAt(0).toUpperCase()+r.slice(1):r]=a,t},{})}((0,QR.wt)(K0)))))};const Zl=ef;var Ir="dx-treeview",nr="".concat(Ir,"-node"),en="".concat(nr,"-container"),tf="".concat(nr,"-loadindicator"),Tn="".concat(nr,"-container-opened"),zl="".concat(nr,"-is-leaf"),Ki="".concat(Ir,"-item"),bL="".concat(Ki,"-with-checkbox"),wL="".concat(Ki,"-with-custom-expander-icon"),SL="".concat(Ir,"-custom-expander-icon-item-container"),yL="".concat(Ki,"-without-checkbox"),xL="".concat(Ki,"-data"),Wl="".concat(Ir,"-toggle-item-visibility"),rf="".concat(Ir,"-custom-collapse-icon"),af="".concat(Ir,"-custom-expand-icon"),EL="".concat(Ir,"-loadindicator"),IL="".concat(Ir,"-loadindicator-wrapper"),G0="".concat(Ir,"-toggle-item-visibility-opened"),Fu="".concat(Ir,"-select-all-item"),U0="dx-state-invisible",$l="dx-state-disabled",nf="dxTreeView_expand",ku="data-item-id",j0="dx-checkbox",OL="".concat(Ir,"-root-node"),RL="".concat(Ir,"-expander-icon-stub"),LL=BC.inherit({_supportedKeys:function(i){var e=a=>{var n=(0,b.Z)(this.option("focusedElement"));n.length&&(a.target=n,a.currentTarget=n,this._itemClickHandler(a,n.children("."+Ki)),this._getEventNameByOption(this.option("expandEvent"))===(0,ce.V4)(Pt.u,nf)&&this._expandEventHandler(a))},t=a=>{a.preventDefault();var n=(0,b.Z)(this.option("focusedElement")),s=this._getCheckBoxInstance(n);if(!s.option("disabled")){var o=s.option("value");this._updateItemSelection(!o,n.find("."+Ki).get(0),!0)}},r=function(a,n){if(this.option("expandAllEnabled")){n.preventDefault();var s=(0,b.Z)(this.option("focusedElement"));if(s.length){var o=this._getItemData(s.find(".".concat(Ki)));this._toggleExpandedNestedItems([o],a)}}};return(0,N.l)(this.callBase(),{enter:this._showCheckboxes()?t:e,space:this._showCheckboxes()?t:e,asterisk:r.bind(this,!0),minus:r.bind(this,!1)})},_toggleExpandedNestedItems:function(i,e){if(i)for(var t=0,r=i.length;t<r;t++){var a=i[t],n=this._dataAdapter.getNodeByItem(a);this._toggleExpandedState(n,e),this._toggleExpandedNestedItems(a.items,e)}},_getNodeElement:function(i,e){var t=this._encodeString(i.internalFields.key);if(e)return e.$nodeByKey||(e.$nodeByKey={},this.$element().find(".".concat(nr)).each(function(){var a=(0,b.Z)(this),n=a.attr(ku);e.$nodeByKey[n]=a})),e.$nodeByKey[t]||(0,b.Z)();var r=this.$element().get(0).querySelector("[".concat(ku,'="').concat(t,'"]'));return(0,b.Z)(r)},_activeStateUnit:"."+Ki,_widgetClass:function(){return Ir},_getDefaultOptions:function(){var i=(0,N.l)(this.callBase(),{animationEnabled:!0,dataStructure:"tree",deferRendering:!0,expandAllEnabled:!1,hasItemsExpr:"hasItems",selectNodesRecursive:!0,expandNodesRecursive:!0,showCheckBoxesMode:"none",expandIcon:null,collapseIcon:null,selectAllText:ae.Z.format("dxList-selectAll"),onItemSelectionChanged:null,onItemExpanded:null,onItemCollapsed:null,scrollDirection:"vertical",useNativeScrolling:!0,virtualModeEnabled:!1,rootValue:0,focusStateEnabled:!1,selectionMode:"multiple",expandEvent:"dblclick",selectByClick:!1,createChildren:null,onSelectAllValueChanged:null});return(0,N.l)(!0,i,{integrationOptions:{useDeferUpdateForTemplates:!1}})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return!Br.nativeScrolling},options:{useNativeScrolling:!1}}])},_initSelectedItems:J.ZT,_syncSelectionOptions:J.C$,_fireSelectionChanged:function(){(0,Y.gx)(this._selectionChangePromise).done(function(){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})()}.bind(this))},_createSelectAllValueChangedAction:function(){this._selectAllValueChangedAction=this._createActionByOption("onSelectAllValueChanged",{excludeValidators:["disabled","readOnly"]})},_fireSelectAllValueChanged:function(i){this._selectAllValueChangedAction({value:i})},_checkBoxModeChange:function(i,e){var t=this.option("searchEnabled"),r=this._selectAllEnabled(e),a=this._itemContainer(t,r);if(this._detachClickEvent(a),this._detachExpandEvent(a),"none"!==e&&"none"!==i){var n=this._$selectAllItem&&this._$selectAllItem.length;switch(i){case"selectAll":n||(this._createSelectAllValueChangedAction(),this._renderSelectAllItem());break;case"normal":n&&(this._$selectAllItem.remove(),delete this._$selectAllItem)}}},_removeSelection:function(){var i=this;(0,j.S6)(this._dataAdapter.getFullData(),function(e,t){i._hasChildren(t)&&i._dataAdapter.toggleSelection(t.internalFields.key,!1,!0)})},_optionChanged:function(i){var{name:e,value:t,previousValue:r}=i;switch(e){case"selectAllText":this._$selectAllItem&&this._$selectAllItem.dxCheckBox("instance").option("text",t);break;case"showCheckBoxesMode":this._checkBoxModeChange(t,r),this._invalidate();break;case"scrollDirection":this.getScrollable().option("direction",t);break;case"useNativeScrolling":this.getScrollable().option("useNative",t);break;case"items":delete this._$selectAllItem,this.callBase(i);break;case"dataSource":this.callBase(i),this._initDataAdapter(),this._filter={};break;case"hasItemsExpr":this._initAccessors(),this.repaint();break;case"expandEvent":this._attachExpandEvent();break;case"deferRendering":case"dataStructure":case"rootValue":case"createChildren":case"expandNodesRecursive":case"onItemSelectionChanged":case"onItemExpanded":case"onItemCollapsed":case"expandAllEnabled":case"animationEnabled":case"virtualModeEnabled":case"selectByClick":break;case"selectionMode":this._initDataAdapter(),this.callBase(i);break;case"onSelectAllValueChanged":this._createSelectAllValueChangedAction();break;case"selectNodesRecursive":this._dataAdapter.setOption("recursiveSelection",i.value),this.repaint();break;case"expandIcon":case"collapseIcon":this.repaint();break;default:this.callBase(i)}},_initDataSource:function(){this._useCustomChildrenLoader()?this._loadChildrenByCustomLoader(null).done(function(i){i&&i.length&&this.option("items",i)}.bind(this)):(this.callBase(),this._isVirtualMode()&&this._initVirtualMode())},_initVirtualMode:function(){var i=this._filter;i.custom||(i.custom=this._dataSource.filter()),i.internal||(i.internal=[this.option("parentIdExpr"),this.option("rootValue")])},_useCustomChildrenLoader:function(){return(0,m.mf)(this.option("createChildren"))&&this._isDataStructurePlain()},_loadChildrenByCustomLoader:function(i){var e=this.option("createChildren").call(this,i);return Array.isArray(e)?(new Y.BH).resolve(e).promise():e&&(0,m.mf)(e.then)?(0,Y.p4)(e):(new Y.BH).resolve([]).promise()},_combineFilter:function(){return this._filter.custom&&this._filter.custom.length?[this._filter.custom,this._filter.internal]:this._filter.internal},_dataSourceLoadErrorHandler:function(){this._renderEmptyMessage()},_init:function(){this._filter={},this.callBase(),this._initStoreChangeHandlers()},_dataSourceChangedHandler:function(i){var e=this.option("items");this._initialized&&this._isVirtualMode()&&e.length||this.option("items",i)},_removeTreeViewLoadIndicator:function(){this._treeViewLoadIndicator&&(this._treeViewLoadIndicator.remove(),this._treeViewLoadIndicator=null)},_createTreeViewLoadIndicator:function(){return this._treeViewLoadIndicator=(0,b.Z)("<div>").addClass(EL),this._createComponent(this._treeViewLoadIndicator,jr.Z,{}),this._treeViewLoadIndicator},_dataSourceLoadingChangedHandler:function(i){var e;if(this._isVirtualMode()&&(e=this._combineFilter(),this._dataSource.filter(e)),i&&!this._dataSource.isLoaded()){this.option("items",[]);var t=(0,b.Z)("<div>").addClass(IL);this._createTreeViewLoadIndicator().appendTo(t),this.itemsContainer().append(t),this._isVirtualMode()&&this._dataSource.filter()!==e&&this._dataSource.filter([])}else this._removeTreeViewLoadIndicator()},_initStoreChangeHandlers:function(){"plain"===this.option("dataStructure")&&this._dataSource&&this._dataSource.store().on("inserted",i=>{this.option().items=this.option("items").concat(i),this._dataAdapter.addItem(i),this._dataAdapter.isFiltered(i)&&this._updateLevel(this._parentIdGetter(i))}).on("removed",i=>{var e=this._dataAdapter.getNodeByKey(i);(0,m.$K)(e)&&(this.option("items")[this._dataAdapter.getIndexByKey(e.internalFields.key)]=0,this._markChildrenItemsToRemove(e),this._removeItems(),this._dataAdapter.removeItem(i),this._updateLevel(this._parentIdGetter(e)))})},_markChildrenItemsToRemove:function(i){(0,j.S6)(i.internalFields.childrenKeys,(t,r)=>{this.option("items")[this._dataAdapter.getIndexByKey(r)]=0,this._markChildrenItemsToRemove(this._dataAdapter.getNodeByKey(r))})},_removeItems:function(){var i=(0,N.l)(!0,[],this.option("items")),e=0;(0,j.S6)(i,(t,r)=>{r||(this.option("items").splice(t-e,1),e++)})},_updateLevel:function(i){var e=this._getContainerByParentKey(i);this._renderItems(e,this._dataAdapter.getChildrenNodes(i))},_getOldContainer:function(i){if(i.length)return i.children(".".concat(en));var e=this.getScrollable();return e?(0,b.Z)(e.content()).children():(0,b.Z)()},_getContainerByParentKey:function(i){var e=this._dataAdapter.getNodeByKey(i),t=e?this._getNodeElement(e):[];this._getOldContainer(t).remove();var r=this._renderNodeContainer(t);if(this._isRootLevel(i)){var a=this.getScrollable();a||this._renderScrollableContainer(),(0,b.Z)(a.content()).append(r)}return r},_isRootLevel:function(i){return i===this.option("rootValue")},_getAccessors:function(){var i=this.callBase();return i.push("hasItems"),i},_getDataAdapterOptions:function(){var i,e,t;return{rootValue:this.option("rootValue"),multipleSelection:!this._isSingleSelection(),recursiveSelection:this._isRecursiveSelection(),recursiveExpansion:this.option("expandNodesRecursive"),selectionRequired:this.option("selectionRequired"),dataType:this.option("dataStructure"),sort:this._dataSource&&this._dataSource.sort(),langParams:null===(i=this._dataSource)||void 0===i||null===(e=i.loadOptions)||void 0===e||null===(t=e.call(i))||void 0===t?void 0:t.langParams}},_initMarkup(){this._renderScrollableContainer(),this._renderEmptyMessage(this._dataAdapter.getRootNodes()),this.callBase(),this._setAriaRole()},_setAriaRole(){var{items:i}=this.option();null!=i&&i.length&&this.setAria({role:"tree"})},_renderContentImpl:function(){var i=this._renderNodeContainer();(0,b.Z)(this.getScrollable().content()).append(i),this.option("items")&&this.option("items").length&&(this._renderItems(i,this._dataAdapter.getRootNodes()),this._attachExpandEvent(),this._selectAllEnabled()&&(this._createSelectAllValueChangedAction(),this._renderSelectAllItem(i)))},_isVirtualMode:function(){return this.option("virtualModeEnabled")&&this._isDataStructurePlain()&&!!this.option("dataSource")},_isDataStructurePlain:function(){return"plain"===this.option("dataStructure")},_fireContentReadyAction:function(){var i=this.getDataSource(),e=i&&!i.isLoaded()||this._skipContentReadyAndItemExpanded,t=this.getScrollable();t&&(0,We.Ym)()&&t.update(),e||this.callBase(),t&&(0,We.Ym)()&&t.update()},_renderScrollableContainer:function(){this._scrollable=this._createComponent((0,b.Z)("<div>").appendTo(this.$element()),Ea,{useNative:this.option("useNativeScrolling"),direction:this.option("scrollDirection"),useKeyboard:!1})},_renderNodeContainer:function(i){var e=(0,b.Z)("<ul>").addClass(en);if(this.setAria("role","group",e),i&&i.length){var t=this._getItemData(i.children("."+Ki));this._expandedGetter(t)&&e.addClass(Tn),e.appendTo(i)}return e},_createDOMElement:function(i,e){var t,r,a=(0,b.Z)("<li>").addClass(nr).attr(ku,this._encodeString(e.internalFields.key)).prependTo(i),n={role:"treeitem",label:this._displayGetter(e.internalFields.item)||"",level:this._getLevel(i)};return!(null==e||null===(t=e.internalFields)||void 0===t||null===(r=t.childrenKeys)||void 0===r||!r.length)&&(n.expanded=e.internalFields.expanded||!1),this.setAria(n,a),a},_getLevel:function(i){var e=i.parent();return e.hasClass("dx-scrollable-content")?1:parseInt(e.attr("aria-level"))+1},_showCheckboxes:function(){return"none"!==this.option("showCheckBoxesMode")},_hasCustomExpanderIcons:function(){return this.option("expandIcon")||this.option("collapseIcon")},_selectAllEnabled:function(i){return"selectAll"===(i??this.option("showCheckBoxesMode"))&&!this._isSingleSelection()},_renderItems:function(i,e){for(var r=e.length-1;r>=0;r--)this._renderItem(r,e[r],i);this._renderedItemsCount+=e.length},_renderItem:function(i,e,t){var r=this._createDOMElement(t,e),a=e.internalFields,n=this._showCheckboxes();r.addClass(n?bL:yL),r.toggleClass(U0,!1===a.item.visible),this._hasCustomExpanderIcons()&&(r.addClass(wL),t.addClass(SL)),this.setAria("selected",a.selected,r),this._toggleSelectedClass(r,a.selected),a.disabled&&this.setAria("disabled",a.disabled,r),this.callBase(this._renderedItemsCount+i,a.item,r),this._getNode(e.internalFields.parentKey)||r.addClass(OL),!1!==a.item.visible&&this._renderChildren(r,e)},_setAriaSelectionAttribute:J.ZT,_renderChildren:function(i,e){if(!this._hasChildren(e))return this._addLeafClass(i),void(0,b.Z)("<div>").addClass(RL).appendTo(this._getItem(i));this._hasCustomExpanderIcons()?this._renderCustomExpanderIcons(i,e):this._renderDefaultExpanderIcons(i,e),this._shouldRenderSublevel(e.internalFields.expanded)&&this._loadSublevel(e).done(t=>{this._renderSublevel(i,this._getActualNode(e),t)})},_shouldRenderSublevel:function(i){return i||!this.option("deferRendering")},_getActualNode:function(i){return this._dataAdapter.getNodeByKey(i.internalFields.key)},_hasChildren:function(i){return this._isVirtualMode()||this._useCustomChildrenLoader()?!1!==this._hasItemsGetter(i.internalFields.item):this.callBase(i)},_loadSublevel:function(i){var e=new Y.BH,t=this._getChildNodes(i);return t.length?e.resolve(t):this._loadNestedItems(i).done(r=>{e.resolve(this._dataAdapter.getNodesByItems(r))}),e.promise()},_getItemExtraPropNames:()=>["url","linkAttr"],_addContent:function(i,e){var{html:t,url:r}=e;if(r){i.html(t);var a=this._getLinkContainer(this._getIconContainer(e),this._getTextContainer(e),e);i.append(a)}else this.callBase(i,e)},_postprocessRenderItem(i){var{itemData:e,itemElement:t}=i;this._showCheckboxes()&&this._renderCheckBox(t,this._getNode(e)),this.callBase(i)},_renderSublevel:function(i,e,t){var r=this._renderNodeContainer(i,e),a=t.filter(s=>-1!==e.internalFields.childrenKeys.indexOf(s.internalFields.key));if(this._renderItems(r,a),a.length&&!e.internalFields.selected){var n=a[0];this._updateParentsState(n,this._getNodeElement(n))}this._normalizeIconState(i,a.length),e.internalFields.expanded&&r.addClass(Tn)},_executeItemRenderAction:function(i,e,t){var r=this._getNode(t);this._getItemRenderAction()({itemElement:t,itemIndex:i,itemData:e,node:this._dataAdapter.getPublicNode(r)})},_addLeafClass:function(i){i.addClass(zl)},_expandEventHandler:function(i){(0,b.Z)(i.currentTarget.parentNode).hasClass(zl)||this._toggleExpandedState(i.currentTarget,void 0,i)},_attachExpandEvent:function(){var i=this._getEventNameByOption(this.option("expandEvent")),e=this._itemContainer();this._detachExpandEvent(e),k.Z.on(e,i,this._itemSelector(),this._expandEventHandler.bind(this))},_detachExpandEvent(i){k.Z.off(i,".".concat(nf),this._itemSelector())},_getEventNameByOption:function(i){return(0,ce.V4)("click"===i?Pt.u:Xs,nf)},_getNode:function(i){if(!(0,m.$K)(i))return null;if(i.internalFields)return i;if((0,m.pt)(i))return this._dataAdapter.getNodeByKey(i);var e=(0,b.Z)(i).get(0);return e?it.Z.isElementNode(e)?this._getNodeByElement(e):this._dataAdapter.getNodeByItem(e):null},_getNodeByElement:function(i){var e=(0,b.Z)(i).closest("."+nr),t=this._decodeString(e.attr(ku));return this._dataAdapter.getNodeByKey(t)},_toggleExpandedState:function(i,e,t){var r=this._getNode(i);if(!r)return(new Y.BH).reject().promise();if(r.internalFields.disabled)return(new Y.BH).reject().promise();var a=r.internalFields.expanded;if(a===e)return(new Y.BH).resolve().promise();if(this._hasChildren(r)){var n=this._getNodeElement(r);if(n.find(".".concat(tf,":not(.").concat(U0,")")).length)return(new Y.BH).reject().promise();!a&&!this._nodeHasRenderedChildren(n)&&this._createLoadIndicator(n)}return(0,m.$K)(e)||(e=!a),this._dataAdapter.toggleExpansion(r.internalFields.key,e),this._updateExpandedItemsUI(r,e,t)},_nodeHasRenderedChildren:i=>i.children(".".concat(en)).not(":empty").length,_getItem:function(i){return i.children(".".concat(Ki)).eq(0)},_createLoadIndicator:function(i){var e=this._getItem(i);this._createComponent((0,b.Z)("<div>").addClass(tf),jr.Z,{}).$element().appendTo(e),e.children(".".concat(Wl,",.").concat(af)).hide()},_renderExpanderIcon:function(i,e,t,r){t.appendTo(this._getItem(i)),t.addClass(r),e.internalFields.disabled&&t.addClass($l),this._renderToggleItemVisibilityIconClick(t,e)},_renderDefaultExpanderIcons:function(i,e){var t=this._getItem(i),r=(0,b.Z)("<div>").addClass(Wl).appendTo(t);e.internalFields.expanded&&(r.addClass(G0),i.parent().addClass(Tn)),e.internalFields.disabled&&r.addClass($l),this._renderToggleItemVisibilityIconClick(r,e)},_renderCustomExpanderIcons:function(i,e){var{expandIcon:t,collapseIcon:r}=this.option(),a=(0,Ia.H)(t??r),n=(0,Ia.H)(r??t);this._renderExpanderIcon(i,e,a,af),this._renderExpanderIcon(i,e,n,rf);var s=e.internalFields.expanded;s&&i.parent().addClass(Tn),this._toggleCustomExpanderIcons(a,n,s)},_renderToggleItemVisibilityIconClick:function(i,e){var t=(0,ce.V4)(Pt.u,this.NAME);k.Z.off(i,t),k.Z.on(i,t,r=>(this._toggleExpandedState(e.internalFields.key,void 0,r),!1))},_toggleCustomExpanderIcons:function(i,e,t){e.toggle(t),i.toggle(!t)},_updateExpandedItemsUI:function(i,e,t){var r=this._getNodeElement(i),a=!r.length||e&&r.is(":hidden");if(this.option("expandNodesRecursive")&&a){var n=this._getNode(i.internalFields.parentKey);n&&this._updateExpandedItemsUI(n,e,t)}if(this._hasCustomExpanderIcons()){if(this._nodeHasRenderedChildren(r)){var o=this._getItem(r),l=o.children(".".concat(af)),d=o.children(".".concat(rf));this._toggleCustomExpanderIcons(l,d,e)}}else this._getItem(r).children(".".concat(Wl)).toggleClass(G0,e);var u=r.children(".".concat(en)),c=u.length>0,f=new Y.BH;return!e||c&&!u.is(":empty")?(this._animateNodeContainer(i,e,t,f),f.promise()):0===i.internalFields.childrenKeys.length&&(this._isVirtualMode()||this._useCustomChildrenLoader())?(this._loadNestedItemsWithUpdate(i,e,t,f),f.promise()):(this._renderSublevel(r,i,this._getChildNodes(i)),this._fireContentReadyAction(),this._animateNodeContainer(i,e,t,f),f.promise())},_loadNestedItemsWithUpdate:function(i,e,t,r){var a=this._getNodeElement(i);this._loadNestedItems(i).done(n=>{var s=this._getActualNode(i);this._renderSublevel(a,s,this._dataAdapter.getNodesByItems(n)),n&&n.length?(this._fireContentReadyAction(),this._animateNodeContainer(s,e,t,r)):r.resolve()})},_loadNestedItems:function(i){if(this._useCustomChildrenLoader()){var e=this._dataAdapter.getPublicNode(i);return this._loadChildrenByCustomLoader(e).done(t=>{this._areNodesExists(t)||this._appendItems(t)})}return this._isVirtualMode()?(this._filter.internal=[this.option("parentIdExpr"),i.internalFields.key],this._dataSource.filter(this._combineFilter()),this._dataSource.load().done(t=>{this._areNodesExists(t)||this._appendItems(t)})):(new Y.BH).resolve([]).promise()},_areNodesExists:function(i,e){var t=this.keyOf(i[0]),r=this._dataAdapter.getFullData();return!!this._dataAdapter.getNodeByKey(t,r)},_appendItems:function(i){this.option().items=this.option("items").concat(i),this._initDataAdapter()},_animateNodeContainer:function(i,e,t,r){var a=this._getNodeElement(i),n=a.children(".".concat(en));i&&r&&0===n.length&&r.resolve(),n.addClass(Tn);var s=(0,oe.Cr)(n);Yt.Z.stop(n,!0),Yt.Z.animate(n,{type:"custom",duration:this.option("animationEnabled")?400:0,from:{maxHeight:e?0:s},to:{maxHeight:e?s:0},complete:function(){n.css("maxHeight","none"),n.toggleClass(Tn,e),this.setAria("expanded",e,a),this.getScrollable().update(),this._fireExpandedStateUpdatedEvent(e,i,t),r&&r.resolve()}.bind(this)})},_fireExpandedStateUpdatedEvent:function(i,e,t){if(this._hasChildren(e)&&!this._skipContentReadyAndItemExpanded){var r=i?"onItemExpanded":"onItemCollapsed";if((0,m.$K)(t))this._itemDXEventHandler(t,r,{node:this._dataAdapter.getPublicNode(e)});else{var a=this._getNodeElement(e);this._itemEventHandler(a,r,{event:t,node:this._dataAdapter.getPublicNode(e)})}}},_normalizeIconState:function(i,e){var r,t=i.find(".".concat(tf));t.length&&(null===(r=jr.Z.getInstance(t))||void 0===r||r.option("visible",!1));var n=this._getItem(i).children(".".concat(rf,",.").concat(Wl));e?n.show():(n.removeClass(Wl),i.addClass(zl))},_emptyMessageContainer:function(){var i=this.getScrollable();return i?(0,b.Z)(i.content()):this.callBase()},_renderContent:function(){var i=this.option("items");i&&i.length&&(this._contentAlreadyRendered=!0),this.callBase()},_renderSelectAllItem:function(i){var{selectAllText:e,focusStateEnabled:t}=this.option();i=i||this.$element().find(".".concat(en)).first(),this._$selectAllItem=(0,b.Z)("<div>").addClass(Fu);var r=this._dataAdapter.isAllSelected();this._createComponent(this._$selectAllItem,Zl,{value:r,elementAttr:{"aria-label":"Select All"},text:e,focusStateEnabled:t,onValueChanged:this._onSelectAllCheckboxValueChanged.bind(this),onInitialized:a=>{var{component:n}=a;n.registerKeyHandler("enter",()=>{n.option("value",!n.option("value"))})}}),this._toggleSelectedClass(this._$selectAllItem,r),i.before(this._$selectAllItem)},_onSelectAllCheckboxValueChanged:function(i){this._toggleSelectAll(i),this._fireSelectAllValueChanged(i.value)},_toggleSelectAll:function(i){this._dataAdapter.toggleSelectAll(i.value),this._updateItemsUI(),this._fireSelectionChanged()},_renderCheckBox:function(i,e){var t=(0,b.Z)("<div>").appendTo(i);this._createComponent(t,Zl,{value:e.internalFields.selected,onValueChanged:this._changeCheckboxValue.bind(this),focusStateEnabled:!1,elementAttr:{"aria-label":"Check State"},disabled:this._disabledGetter(e)})},_toggleSelectedClass:function(i,e){i.toggleClass("dx-state-selected",!!e)},_toggleNodeDisabledState:function(i,e){var t=this._getNodeElement(i),r=t.find("."+Ki).eq(0);this._dataAdapter.toggleNodeDisabledState(i.internalFields.key,e),r.toggleClass($l,!!e),this._showCheckboxes()&&this._getCheckBoxInstance(t).option("disabled",!!e)},_itemOptionChanged:function(i,e,t){var r=this._dataAdapter.getNodeByItem(i);e===this.option("disabledExpr")&&this._toggleNodeDisabledState(r,t)},_changeCheckboxValue:function(i){var e=(0,b.Z)(i.element).closest(".".concat(nr)),t=this._getItem(e),r=this._getItemData(t),a=this._getNodeByElement(t),n=i.value;a&&a.internalFields.selected===n||this._updateItemSelection(n,r,i.event)},_isSingleSelection:function(){return"single"===this.option("selectionMode")},_isRecursiveSelection:function(){return this.option("selectNodesRecursive")&&"single"!==this.option("selectionMode")},_isLastSelectedBranch:function(i,e,t){var r=e.indexOf(i.key);return r>=0&&e.splice(r,1),t&&(0,j.S6)(i.children,function(a,n){this._isLastSelectedBranch(n,e,!0)}.bind(this)),i.parent&&this._isLastSelectedBranch(i.parent,e),0===e.length},_isLastRequired:function(i){var e=this.option("selectionRequired"),t=this._isSingleSelection(),r=this.getSelectedNodeKeys();if(e)return t?1===r.length:this._isLastSelectedBranch(i.internalFields.publicNode,r.slice(),!0)},_updateItemSelection:function(i,e,t){var r=this._getNode(e);if(!r||!1===r.visible)return!1;if(r.internalFields.selected===i)return!0;if(!i&&this._isLastRequired(r)){if(this._showCheckboxes()){var a=this._getNodeElement(r);this._getCheckBoxInstance(a).option("value",!0)}return!1}if(i&&this._isSingleSelection()){var n=this.getSelectedNodeKeys();(0,j.S6)(n,(l,d)=>{this._dataAdapter.toggleSelection(d,!1),this._updateItemsUI(),this._fireItemSelectionChanged(this._getNode(d))})}this._dataAdapter.toggleSelection(r.internalFields.key,i);var s=this._dataAdapter.isAllSelected(),o=this._selectAllEnabled()&&this._$selectAllItem.dxCheckBox("instance").option("value")!==s;return this._updateItemsUI(),this._fireItemSelectionChanged(r,t),this._fireSelectionChanged(),o&&this._fireSelectAllValueChanged(s),!0},_fireItemSelectionChanged:function(i,e){var t=e||this._findItemElementByItem(i.internalFields.item);(e?this._itemDXEventHandler:this._itemEventHandler).call(this,t,"onItemSelectionChanged",{node:this._dataAdapter.getPublicNode(i),itemData:i.internalFields.item})},_getCheckBoxInstance:function(i){return this._getItem(i).children(".".concat(j0)).dxCheckBox("instance")},_updateItemsUI:function(){var i={};if((0,j.S6)(this._dataAdapter.getData(),(t,r)=>{var a=this._getNodeElement(r,i),n=r.internalFields.selected;a.length&&(this._toggleSelectedClass(a,n),this.setAria("selected",n,a),this._showCheckboxes()&&this._getCheckBoxInstance(a).option("value",n))}),this._selectAllEnabled()){var e=this._$selectAllItem.dxCheckBox("instance");e.option("onValueChanged",void 0),e.option("value",this._dataAdapter.isAllSelected()),e.option("onValueChanged",this._onSelectAllCheckboxValueChanged.bind(this))}},_updateParentsState:function(i,e){if(e){var t=this._dataAdapter.getNodeByKey(i.internalFields.parentKey),r=(0,b.Z)(e.parents("."+nr)[0]);if(this._showCheckboxes()){var a=t.internalFields.selected;this._getCheckBoxInstance(r).option("value",a),this._toggleSelectedClass(r,a)}t.internalFields.parentKey!==this.option("rootValue")&&this._updateParentsState(t,r)}},_itemEventHandlerImpl:function(i,e,t){var r=(0,b.Z)(i).closest("."+nr).children("."+Ki);return e((0,N.l)(this._extendActionArgs(r),t))},_itemContextMenuHandler:function(i){this._createEventHandler("onItemContextMenu",i)},_itemHoldHandler:function(i){this._createEventHandler("onItemHold",i)},_createEventHandler:function(i,e){var t=this._getNodeByElement(e.currentTarget);this._itemDXEventHandler(e,i,{node:this._dataAdapter.getPublicNode(t)})},_itemClass:function(){return Ki},_itemDataKey:function(){return xL},_attachClickEvent:function(){var i=this._itemContainer();this._detachClickEvent(i);var{clickEventNamespace:e,itemSelector:t,pointerDownEventNamespace:r,nodeSelector:a}=this._getItemClickEventData();k.Z.on(i,e,t,n=>{(0,b.Z)(n.target).hasClass("dx-checkbox-icon")||(0,b.Z)(n.target).hasClass(j0)||this._itemClickHandler(n,(0,b.Z)(n.currentTarget))}),k.Z.on(i,r,a,n=>{this._itemPointerDownHandler(n)})},_detachClickEvent:function(i){var{clickEventNamespace:e,itemSelector:t,pointerDownEventNamespace:r,nodeSelector:a}=this._getItemClickEventData();k.Z.off(i,e,t),k.Z.off(i,r,a)},_getItemClickEventData:function(){var i=".".concat(this._itemClass()),e=".".concat(nr,", .").concat(Fu);return{clickEventNamespace:(0,ce.V4)(Pt.u,this.NAME),itemSelector:i,pointerDownEventNamespace:(0,ce.V4)(Bt.Z.down,this.NAME),nodeSelector:e}},_itemClick:function(i){var e=i.args[0],r=(e.event.target[0]||e.event.target).getElementsByClassName("dx-item-url")[0];e.itemData.url&&r&&r.click()},_itemClickHandler:function(i,e){var t=this._getItemData(e),r=this._getNodeByElement(e);this._itemDXEventHandler(i,"onItemClick",{node:this._dataAdapter.getPublicNode(r)},{beforeExecute:this._itemClick}),this.option("selectByClick")&&!i.isDefaultPrevented()&&this._updateItemSelection(!r.internalFields.selected,t,i)},_updateSelectionToFirstItem:function(i,e){for(var t=e;t>=0;){var r=(0,b.Z)(i[t]);this._updateItemSelection(!0,r.find("."+Ki).get(0)),t--}},_updateSelectionToLastItem:function(i,e){for(var t=i.length,r=e;r<t;){var a=(0,b.Z)(i[r]);this._updateItemSelection(!0,a.find("."+Ki).get(0)),r++}},focus:function(){this._selectAllEnabled()?k.Z.trigger(this._$selectAllItem,"focus"):this.callBase()},_focusInHandler:function(i){this._updateFocusState(i,!0);var e=(0,b.Z)(i.target).hasClass(Fu);if(e||this.option("focusedElement"))return clearTimeout(this._setFocusedItemTimeout),void(this._setFocusedItemTimeout=setTimeout(()=>{var r=e?(0,rt.u)(this._$selectAllItem):(0,b.Z)(this.option("focusedElement"));this._setFocusedItem(r)}));var t=this._getActiveItem();this.option("focusedElement",(0,rt.u)(t.closest("."+nr)))},_itemPointerDownHandler:function(i){if(this.option("focusStateEnabled")){var e=(0,b.Z)(i.target).closest("."+nr+", ."+Fu);if(e.length){var t=e.hasClass($l)?null:e;this.option("focusedElement",(0,rt.u)(t))}}},_findNonDisabledNodes:function(i){return i.not(function(){return(0,b.Z)(this).children("."+Ki).hasClass($l)})},_moveFocus:function(i,e){var s=this.option("rtlEnabled")?"right":"left",o=this.option("rtlEnabled")?"left":"right";this.$element().find(".".concat(en)).each(function(){Yt.Z.stop(this,!0)});var l=this._nodeElements();if(l&&l.length)switch(i){case"up":var d=this._prevItem(l);this.option("focusedElement",(0,rt.u)(d));var u=this._getNodeItemElement(d);this.getScrollable().scrollToElement(u),e.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,u);break;case"down":var c=this._nextItem(l);this.option("focusedElement",(0,rt.u)(c));var f=this._getNodeItemElement(c);this.getScrollable().scrollToElement(f),e.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,f);break;case"first":var p=l.first();e.shiftKey&&this._showCheckboxes()&&this._updateSelectionToFirstItem(l,l.index(this._prevItem(l))),this.option("focusedElement",(0,rt.u)(p)),this.getScrollable().scrollToElement(this._getNodeItemElement(p));break;case"last":var g=l.last();e.shiftKey&&this._showCheckboxes()&&this._updateSelectionToLastItem(l,l.index(this._nextItem(l))),this.option("focusedElement",(0,rt.u)(g)),this.getScrollable().scrollToElement(this._getNodeItemElement(g));break;case o:this._expandFocusedContainer();break;case s:this._collapseFocusedContainer();break;default:return void this.callBase.apply(this,arguments)}},_getNodeItemElement:function(i){return i.find("."+Ki).get(0)},_nodeElements:function(){return this.$element().find("."+nr).not(":hidden")},_expandFocusedContainer:function(){var i=(0,b.Z)(this.option("focusedElement"));if(i.length&&!i.hasClass(zl)){if(i.find(".".concat(en)).eq(0).hasClass(Tn)){var t=this._nextItem(this._findNonDisabledNodes(this._nodeElements()));return this.option("focusedElement",(0,rt.u)(t)),void this.getScrollable().scrollToElement(this._getNodeItemElement(t))}var r=this._getNodeByElement(this._getItem(i));this._toggleExpandedState(r,!0)}},_getClosestNonDisabledNode:function(i){do{i=i.parent().closest("."+nr)}while(i.children(".dx-treeview-item.dx-state-disabled").length);return i},_collapseFocusedContainer:function(){var i=(0,b.Z)(this.option("focusedElement"));if(i.length){var e=i.find(".".concat(en)).eq(0);if(!i.hasClass(zl)&&e.hasClass(Tn)){var t=this._getNodeByElement(this._getItem(i));this._toggleExpandedState(t,!1)}else{var r=this._getClosestNonDisabledNode(i);r.length&&this.option("focusedElement",(0,rt.u)(r)),this.getScrollable().scrollToElement(this._getNodeItemElement(r))}}},_encodeString:function(i){return(0,m.HD)(i)?encodeURI(i):i},_decodeString:function(i){return(0,m.HD)(i)?decodeURI(i):i},getScrollable:function(){return this._scrollable},updateDimensions:function(){var i=new Y.BH,e=this.getScrollable();return e?e.update().done(()=>{i.resolveWith(this)}):i.resolveWith(this),i.promise()},selectItem:function(i){return this._updateItemSelection(!0,i)},unselectItem:function(i){return this._updateItemSelection(!1,i)},expandItem:function(i){return this._toggleExpandedState(i,!0)},collapseItem:function(i){return this._toggleExpandedState(i,!1)},getNodes:function(){return this._dataAdapter.getTreeNodes()},getSelectedNodes:function(){return this.getSelectedNodeKeys().map(i=>{var e=this._dataAdapter.getNodeByKey(i);return this._dataAdapter.getPublicNode(e)})},getSelectedNodeKeys:function(){return this._dataAdapter.getSelectedNodesKeys()},selectAll:function(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!0):this._toggleSelectAll({value:!0})},unselectAll:function(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!1):this._toggleSelectAll({value:!1})},_allItemsExpandedHandler:function(){this._skipContentReadyAndItemExpanded=!1,this._fireContentReadyAction()},expandAll:function(){var i=this._dataAdapter.getData(),e=[];this._skipContentReadyAndItemExpanded=!0,i.forEach(t=>e.push(this._toggleExpandedState(t.internalFields.key,!0))),Promise.allSettled(e).then(()=>{var t;return null===(t=this._allItemsExpandedHandler)||void 0===t?void 0:t.call(this)})},collapseAll:function(){(0,j.S6)(this._dataAdapter.getExpandedNodesKeys(),function(i,e){this._toggleExpandedState(e,!1)}.bind(this))},scrollToItem:function(i){var e=this._getNode(i);if(!e)return(new Y.BH).reject().promise();for(var t=[],r=e.internalFields.publicNode.parent;null!=r;)r.expanded||t.push(r.key),r=r.parent;var a=new Y.BH;return this._expandNodes(t.reverse()).always(()=>{var n=this._getNodeElement(e);n&&n.length?(this.scrollToElementTopLeft(n.get(0)),a.resolve()):a.reject()}),a.promise()},scrollToElementTopLeft:function(i){var e=this.getScrollable(),{scrollDirection:t,rtlEnabled:r}=this.option(),a={top:0,left:0},n=CC(wC,i);if(t!==bu){var s=(0,b.Z)(e.container()).get(0);a.left=r?n.left+i.offsetWidth-s.clientWidth:n.left}t!==bC&&(a.top=n.top),e.scrollTo(a)},_expandNodes:function(i){if(!i||0===i.length)return(new Y.BH).resolve().promise();var e=new Y.BH,t=i.map(r=>this.expandItem(r));return Y.gx.apply(b.Z,t).done(()=>e.resolve()).fail(()=>e.reject()),e.promise()},_dispose:function(){this.callBase(),clearTimeout(this._setFocusedItemTimeout),this._allItemsExpandedHandler=null}});const PL=LL;us.setEditorClass(Su.Z);var q0="dx-treeview",BL="".concat(q0,"-node-container"),Y0=PL.inherit(us).inherit({_addWidgetPrefix:function(i){return"".concat(q0,"-").concat(i)},_optionChanged:function(i){switch(i.name){case"searchValue":this._showCheckboxes()&&this._isRecursiveSelection()&&this._removeSelection(),this._initDataAdapter(),this._updateSearch(),this._repaintContainer(),this.option("focusedElement",null);break;case"searchExpr":this._initDataAdapter(),this.repaint();break;case"searchMode":this.option("expandNodesRecursive")?this._updateDataAdapter():this._initDataAdapter(),this.repaint();break;default:this.callBase(i)}},_updateDataAdapter:function(){this._setOptionWithoutOptionChange("expandNodesRecursive",!1),this._initDataAdapter(),this._setOptionWithoutOptionChange("expandNodesRecursive",!0)},_getDataAdapterOptions:function(){return(0,N.l)(this.callBase(),{searchValue:this.option("searchValue"),searchMode:this.option("searchMode")||"contains",searchExpr:this.option("searchExpr")})},_getNodeContainer:function(){return this.$element().find(".".concat(BL)).first()},_updateSearch:function(){if(this._searchEditor){var i=this._getSearchEditorOptions();this._searchEditor.option(i)}},_repaintContainer:function(){var e,i=this._getNodeContainer();i.length&&(i.empty(),e=this._dataAdapter.getRootNodes(),this._renderEmptyMessage(e),this._renderItems(i,e),this._fireContentReadyAction())},_focusTarget:function(){return this._itemContainer(this.option("searchEnabled"))},_cleanItemContainer:function(){this.$element().empty()},_itemContainer:function(i,e){var t;return null!==(t=e)&&void 0!==t||(e=this._selectAllEnabled()),e?this._getNodeContainer():this._scrollable&&i?(0,b.Z)(this._scrollable.content()):this.callBase()},_addWidgetClass:function(){this.$element().addClass(this._widgetClass())},_clean:function(){this.callBase(),this._removeSearchBox()}});(0,It.Z)("dxTreeView",Y0);const Mu=Y0;var X0="column-chooser-button",J0="notouch-action",Q0="column-chooser",eb="dx-column-chooser-item",HL=["showInColumnChooser","caption","allowHiding","visible","cssClass","ownerBand"],sf={defaultOptions:()=>({columnChooser:{enabled:!1,search:{enabled:!1,timeout:500,editorOptions:{}},selection:{allowSelectAll:!1,selectByClick:!1,recursive:!1},position:void 0,mode:"dragAndDrop",width:250,height:260,title:ae.Z.format("dxDataGrid-columnChooserTitle"),emptyPanelText:ae.Z.format("dxDataGrid-columnChooserEmptyText"),container:void 0}}),controllers:{columnChooser:class zL extends Nt.ViewController{init(){super.init(),this._rowsView=this.getView("rowsView")}renderShowColumnChooserButton(e){var s,t=this,r=t.addWidgetPrefix(X0),a=t.option("columnChooser.enabled"),n=e.find(".".concat(r));a?n.length?n.show():(s=(0,b.Z)("<div>").addClass(r).appendTo(e),t._createComponent(s,pr.Z,{icon:Q0,onClick(){t.getView("columnChooserView").showColumnChooser()},hint:t.option("columnChooser.title"),integrationOptions:{}})):n.hide()}getPosition(){var e=this.option("columnChooser.position");return(0,m.$K)(e)?e:{my:"right bottom",at:"right bottom",of:this._rowsView&&this._rowsView.element(),collision:"fit",offset:"-2 -2",boundaryOffset:"2 2"}}}},views:{columnChooserView:class WL extends wl{optionChanged(e){"columnChooser"===e.name?(this._initializePopupContainer(),this.render(null,"full")):super.optionChanged(e)}publicMethods(){return["showColumnChooser","hideColumnChooser"]}_resizeCore(){}_isWinDevice(){return!!at.Z.real().win}_initializePopupContainer(){var e=this,t=e.addWidgetPrefix("column-chooser"),r=e.element().addClass(t),a=e.option("columnChooser"),n=this._columnChooserController.getPosition(),s=(0,_t.Vk)(),o=(0,_t.OD)(s),l=(0,_t.x2)(s),d={visible:!1,shading:!1,showCloseButton:!1,dragEnabled:!0,resizeEnabled:!0,wrapperAttr:{class:t},toolbarItems:[{text:a.title,toolbar:"top",location:o||l?"before":"center"}],position:n,width:a.width,height:a.height,rtlEnabled:e.option("rtlEnabled"),onHidden(){e._isWinDevice()&&(0,b.Z)("body").removeClass(e.addWidgetPrefix(J0))},container:a.container};o||l?(0,N.l)(d,{showCloseButton:!0}):d.toolbarItems[d.toolbarItems.length]={shortcut:"cancel"},(0,m.$K)(this._popupContainer)?this._popupContainer.option(d):(e._popupContainer=e._createComponent(r,Ja.Z,d),e._popupContainer.on("optionChanged",u=>{"visible"===u.name&&e.renderCompleted.fire()})),this.setPopupAttributes()}setPopupAttributes(){var e=this.isSelectMode(),t=this._columnsController.isBandColumnsUsed();this._popupContainer.setAria({role:"dialog",label:ae.Z.format("dxDataGrid-columnChooserTitle")}),this._popupContainer.$wrapper().toggleClass(this.addWidgetPrefix("column-chooser-mode-drag"),!e).toggleClass(this.addWidgetPrefix("column-chooser-mode-select"),e),this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-list")),e&&!t&&this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-plain"))}_renderCore(e){if(this._popupContainer){var t=!this.isSelectMode();this._columnChooserList&&"full"!==e?t&&this._updateItems():this._renderTreeView()}}_renderTreeView(){var e,t,r,a=this,n=this._popupContainer.$content(),s=this.option("columnChooser"),o=this.isSelectMode(),u={dataStructure:"plain",activeStateEnabled:!0,focusStateEnabled:!0,hoverStateEnabled:!0,itemTemplate:"item",showCheckBoxesMode:"none",rootValue:null,searchEnabled:(0,m.$K)(s.allowSearch)?s.allowSearch:null===(e=s.search)||void 0===e?void 0:e.enabled,searchTimeout:(0,m.$K)(s.searchTimeout)?s.searchTimeout:null===(t=s.search)||void 0===t?void 0:t.timeout,searchEditorOptions:null===(r=s.search)||void 0===r?void 0:r.editorOptions};if(this._isWinDevice()&&(u.useNativeScrolling=!1),(0,N.l)(u,o?this._prepareSelectModeConfig():this._prepareDragModeConfig()),this._columnChooserList)u.searchEnabled||(u.searchValue=""),this._columnChooserList.option(u),this._updateItems();else{this._columnChooserList=this._createComponent(n,Mu,u),this._updateItems();var c=0;this._columnChooserList.on("optionChanged",f=>{var p=f.component.getScrollable();c=p.scrollTop()}),this._columnChooserList.on("contentReady",f=>{(0,J.Su)(()=>{f.component.getScrollable().scrollTo({y:c}),a.renderCompleted.fire()})})}}_prepareDragModeConfig(){return{noDataText:this.option("columnChooser").emptyPanelText,activeStateEnabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,itemTemplate(t,r,a){(0,b.Z)(a).text(t.text).parent().addClass(t.cssClass).addClass(eb)}}}_prepareSelectModeConfig(){var e,t=this,r=null!==(e=this.option("columnChooser.selection"))&&void 0!==e?e:{},a=!1;return{selectByClick:r.selectByClick,selectNodesRecursive:r.recursive,showCheckBoxesMode:r.allowSelectAll?"selectAll":"normal",onSelectionChanged:n=>{if(!a){var s=(o=n.component.getNodes(),(l=(d,u)=>d.reduce((c,f)=>(c.push(f),f.children.length&&l(f.children,c),c),u))(o,[]));n.component.beginUpdate(),a=!0,((o,l)=>{l.filter(d=>!1===d.itemData.allowHiding).forEach(d=>o.component.selectItem(d.key))})(n,s),n.component.endUpdate(),a=!1,t.component.beginUpdate(),this._isUpdatingColumnVisibility=!0,(o=>{o.forEach(l=>{t._columnsController.columnOption(l.itemData.id,"visible",!1!==l.selected)})})(s),t.component.endUpdate(),this._isUpdatingColumnVisibility=!1}var o,l}}}_updateItems(){var e=this.isSelectMode(),r=function(i,e){var t=[],r=i.isSelectMode(),a=i.option("columnChooser.selection.recursive");return e.length&&(0,j.S6)(e,(n,s)=>{var o={text:s.caption,cssClass:s.cssClass,allowHiding:s.allowHiding,expanded:!0,id:s.index,disabled:!1===s.allowHiding,parentId:(0,m.$K)(s.ownerBand)?s.ownerBand:null};r&&!(a&&s.hasColumns)&&(o.selected=s.visible),t.push(o)}),t}(this,this._columnsController.getChooserColumns(e));this._columnChooserList.option("items",r)}_updateItemsSelection(e){var t=e?.map(r=>this._columnsController.columnOption(r));this._columnChooserList.beginUpdate(),t?.forEach(r=>{var{visible:a,index:n}=r;a?this._columnChooserList.selectItem(n):this._columnChooserList.unselectItem(n)}),this._columnChooserList.endUpdate()}_columnOptionChanged(e){if(super._columnOptionChanged(e),this.isSelectMode()&&this._columnChooserList&&!this._isUpdatingColumnVisibility){var{optionNames:r}=e,a=r.visible&&1===r.length,n=(0,m.$K)(e.columnIndex)?[e.columnIndex]:e.columnIndices;(HL.some(o=>r[o])||e.changeTypes.columns&&r.all)&&(this._updateItemsSelection(n),a||this._updateItems())}}getColumnElements(){var e=[],t=this.isSelectMode(),r=this._columnsController.getChooserColumns(t),a=this._popupContainer&&this._popupContainer.$content(),n=a&&a.find(".dx-treeview-node");return n&&r.forEach(s=>{var o=n.filter("[data-item-id = '".concat(s.index,"']")),l=o.length?o.children(".".concat(eb)).get(0):null;e.push(l)}),(0,b.Z)(e)}getName(){return"columnChooser"}getColumns(){return this._columnsController.getChooserColumns()}allowDragging(e){var t=this._columnsController.isParentColumnVisible(e.index),r=!e.visible&&e.allowHiding;return this.isColumnChooserVisible()&&t&&r}allowColumnHeaderDragging(e){return!this.isSelectMode()&&this.isColumnChooserVisible()&&e.allowHiding}getBoundingRect(){var e=this._popupContainer&&this._popupContainer.$overlayContent();if(e&&e.is(":visible")){var t=e.offset();return{left:t.left,top:t.top,right:t.left+(0,oe.Y_)(e),bottom:t.top+(0,oe.zp)(e)}}return null}showColumnChooser(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show(),this._isWinDevice()&&(0,b.Z)("body").addClass(this.addWidgetPrefix(J0))}hideColumnChooser(){this._popupContainer&&this._popupContainer.hide()}isColumnChooserVisible(){var e=this._popupContainer;return e&&e.option("visible")}isSelectMode(){return"select"===this.option("columnChooser.mode")}hasHiddenColumns(){var e=this.option("columnChooser.enabled"),t=this.getColumns().filter(r=>!r.visible);return e&&t.length}}},extenders:{views:{headerPanel:i=>class extends i{_getToolbarItems(){var e=super._getToolbarItems();return this._appendColumnChooserItem(e)}_appendColumnChooserItem(e){var t=this;if(t.option("columnChooser.enabled")){var a=t.option("columnChooser.title");e.push({widget:"dxButton",options:{icon:Q0,onClick:function(){t.component.getView("columnChooserView").showColumnChooser()},hint:a,text:a,onInitialized:function(s){(0,b.Z)(s.element).addClass(t._getToolbarButtonClass(t.addWidgetPrefix(X0)))},elementAttr:{"aria-haspopup":"dialog"}},showText:"inMenu",location:"after",name:"columnChooserButton",locateInMenu:"auto",sortIndex:40})}return e}optionChanged(e){"columnChooser"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}isVisible(){var e=this.option("columnChooser.enabled");return super.isVisible()||e}},columnHeadersView:i=>class extends i{allowDragging(e){var t=!this._columnChooserView.isSelectMode(),r=this._columnChooserView.isColumnChooserVisible();return t&&r&&e.allowHiding||super.allowDragging(e)}}},controllers:{columns:i=>class extends i{allowMoveColumn(e,t,r,a){return!("select"===this.option("columnChooser.mode")&&"columnChooser"===a)&&super.allowMoveColumn(e,t,r,a)}}}}};He.registerModule("columnChooser",sf);var Hu=be(8772);function fs(i,e){for(var t=(0,Ca.G5)(e.group),r=[],a=0;a<i.length;a++)r.push([t[a].selector,"=",i[a]]);return e.filter&&r.push(e.filter),Te.combineFilters(r)}function tb(i,e,t){for(var r=(0,Ca.G5)(e.group),a=[],n=t?i.length-1:0;n<i.length;n++){for(var s=[],o=0;o<=n;o++){var{selector:l}=r[o];if(n!==o||null!==i[o]&&!1!==i[o]&&!0!==i[o]){var d=[l,n===o?r[o].desc?">":"<":"=",i[o]];s.push("<"===d[1]?[d,"or",[l,"=",null]]:d)}else!1===i[o]?s.push([l,"=",!!r[o].desc||null]):(i[o]?!r[o].desc:r[o].desc)?s.push([l,"<>",i[o]]):(s.push([l,"<>",null]),s.push([l,"=",null]))}a.push(He.combineFilters(s))}return a=He.combineFilters(a,"or"),He.combineFilters([a,e.filter])}var ib=function(i,e){var{hash:t}=i;return t&&t[JSON.stringify(e)]},UL=function(i,e){var n,t=0,r=i.length-1;if(!i.length)return 0;do{var a=r+t>>1;i[a].offset>e?r=a:t=a}while(r-t>1);for(n=t;n<=r&&!(i[n].offset>e);n++);return n},jL=function i(e,t,r){for(var a=0;a<e.length;a++)t+1>=r?e[a].children=[]:i(e[a].children,t+1,r)},qL=function i(e,t,r){var a=0;if(t)if(r)for(var n=0;n<t.length;n++)e.isGroupItemCountable(t[n])&&a++,a+=i(e,t[n].items,r-1);else a=t.length;return a};class rb{constructor(e){this._dataSource=e,this.reset()}reset(){this._groupsInfo=[],this._totalCountCorrection=0}totalCountCorrection(){return this._totalCountCorrection}updateTotalItemsCount(e){this._totalCountCorrection=e||0}isGroupItemCountable(e){return!this._isVirtualPaging()||!e.isContinuation}_isVirtualPaging(){var e=this._dataSource.option("scrolling.mode");return"virtual"===e||"infinite"===e}itemsCount(){var t=this._dataSource._dataSource,r=He.normalizeSortingInfo(t.group()||[]).length;return qL(this,t.items(),r)}foreachGroups(e,t,r,a,n){var s=this;return function o(l,d,u,c){var f=[];function p(E,V,F,q){var ee=V&&E(V,F);return ee&&q.push(ee),ee}for(var g=0;g<l.length;g++){if(c.push(l[g].data),!u&&!1===p(d,l[g].data,c,f))return!1;if(!l[g].data||l[g].data.isExpanded||r){var{children:w}=l[g],x=w.length&&o(w,d,u,c);if(x&&f.push(x),!1===x)return!1}if(u&&!1===p(d,l[g].data,c,f))return!1;(!l[g].data||l[g].data.offset!==l[g].offset)&&(a=!0),c.pop()}var y=n&&c.slice(0);return a&&Y.gx.apply(b.Z,f).always(()=>{s._updateGroupInfoOffsets(l,y)})}(s._groupsInfo,e,t,[])}_updateGroupInfoOffsets(e,t){t=t||[];for(var r=0;r<e.length;r++){var a=e[r];if(a.data&&a.data.offset!==a.offset){a.offset=a.data.offset;for(var n=0;n<t.length;n++)t[n].offset=a.offset}}e.sort((s,o)=>s.offset-o.offset)}findGroupInfo(e){for(var t,r=this._groupsInfo,a=0;r&&a<e.length;a++)r=(t=ib(r,e[a]))&&t.children;return t&&t.data}addGroupInfo(e){for(var t,{path:r}=e,a=this._groupsInfo,n=0;n<r.length;n++){if(!(t=ib(a,r[n]))){t={key:r[n],offset:e.offset,data:{offset:e.offset,isExpanded:!0,path:r.slice(0,n+1)},children:[]};var s=UL(a,e.offset);a.splice(s,0,t),a.hash=a.hash||{},a.hash[JSON.stringify(t.key)]=t}n===r.length-1&&(t.data=e,t.offset!==e.offset&&this._updateGroupInfoOffsets(a)),a=t.children}}allowCollapseAll(){return!0}refresh(e){var{storeLoadOptions:t}=e,r=(0,Ca.G5)(t.group||[]),a="_group"in this?(0,Ca.G5)(this._group||[]):r,n=Math.min(a.length,r.length);this._group=t.group;for(var s=0;s<n;s++)if(a[s].selector!==r[s].selector){n=s;break}n?jL(this._groupsInfo,0,n):this.reset()}handleDataLoading(){}handleDataLoaded(e,t){t(e)}handleDataLoadedCore(e,t){t(e)}}function of(i,e,t,r){if(r=r||0,e>1&&t>0){var a=i-Math.floor(i/e)*e||e;return(a+=t-r-2)<0&&(a+=e),Math.floor(a/(e-r-1))}return 0}var Kl=function(i,e,t){return i.foreachGroups((r,a)=>{if(r.isExpanded)return e(r,a)},!0,!1,t,t)},ab=function i(e,t,r,a,n,s,o){var l;if(a.items=a.items||[],a.paths=a.paths||[],a.count=a.count||0,a.lastCount=a.lastCount||0,r)for(var d=0;d<t.length;d++){var u=t[d];if(void 0!==u.items){if(n.push(u.key),s)l=!0;else{var c=e.findGroupInfo(n);l=c&&c.isExpanded}l?u.items?i(e,u.items,r-1,a,n,s,o):1===r&&u.count&&(!s||o)&&(a.items.push(u),a.paths.push(n.slice(0)),a.count+=a.lastCount,a.lastCount=u.count):(u.collapsedItems=u.items,u.items=null),n.pop()}}},YL=function(i,e,t,r,a){var s,n=i.findGroupInfo(r);n?(t?n.count=e.count>0?e.count:e.items&&e.items.length||0:e.count=n.count||e.count,n.offset=a):(t&&(s=e.count>0?e.count:e.items.length),i.addGroupInfo({isExpanded:i._isGroupExpanded(r.length-1),path:r.slice(0),offset:a,count:s||0}))},nb=function i(e,t,r,a,n,s,o){var p,d=(t.group?t.group.length:0)===a,c=0,f=0;if(n=n||0,s=s||[],t.remoteOperations.paging&&!o&&(c=0===n?t.skip||0:t.skips[n-1]||0),n>=a)return r.length;for(var g=0;g<r.length;g++){var w=r[g];if(w){if(s.push(w.key),!w.count&&!w.items||void 0===w.items||(YL(e,w,d,s,c+g),(p=w.items?i(e,t,w.items,a,n+1,s,g):w.count||-1)<0))return-1;f+=p,s.pop()}}return f},lf=function(i,e){return i&&i.length&&i[e]&&!!i[e].isExpanded},sb=function(i,e,t){for(var r,a=t,n=0;n<i.length;n++)r=i[n].offset+1,n>0&&(r+=i[n-1].childrenTotalCount,e&&(r+=of(a,e,r,n-1)*n)),a+=r;return a};function ob(i,e,t,r){var a=e.items[r],n=i.skips&&i.skips[t],s=i.takes&&i.takes[t],o=r===e.items.length-1,l=0===r,u=a.count>s+(l&&n||0);l&&void 0!==n&&(a.isContinuation=!0),o&&void 0!==s&&u&&(a.isContinuationOnNextPage=!0)}function lb(i){return!Array.isArray(i)}function db(i){lb(i.data)||(i.data=new Y.BH)}function ub(i,e,t,r,a,n){e.isCustomLoading||(ab(i,n,t,r={},[]),function XL(i,e,t){var r=t-1,a=i.group?i.group.length:0;e.skip=i.skips&&i.skips[r],i.takes&&void 0!==i.takes[r]&&(e.take=a===t&&e.count?e.count-(e.skip||0):0,e.take+=i.takes[r])}(e,r,t)),r.paths.length&&(e.group?e.group.length:0)-t>0?(db(e),function JL(i,e,t,r,a,n){var s=e.group||[],o=s[a+1],l=[];(0,j.S6)(t.paths,d=>{var u,c={requireTotalCount:!1,requireGroupCount:!0,group:[o],groupSummary:e.storeLoadOptions.groupSummary,filter:fs(t.paths[d],{filter:e.storeLoadOptions.filter,group:s}),select:e.storeLoadOptions.select,langParams:null===(u=e.storeLoadOptions)||void 0===u?void 0:u.langParams};0===d&&(c.skip=t.skip||0),d===t.paths.length-1&&(c.take=t.take);var f=0===c.take?[]:i._dataSource.loadFromStore(c);(0,Y.gx)(f).done(p=>{var g=t.items[d];ob(e,t,a,d),g.items=p}),l.push(f)}),Y.gx.apply(null,l).done(()=>{nb(i,e,n,r+1),ub(i,e,r+1,t,a+1,n)})}(i,e,r,t,a,n)):r.paths.length&&e.storeLoadOptions.group?(db(e),function QL(i,e,t,r){var a=[],n=e.group||[];(0,j.S6)(t.paths,(d,u)=>{a.push(fs(u,{group:e.isCustomLoading?e.storeLoadOptions.group:n}))});var{filter:s}=e.storeLoadOptions;e.storeLoadOptions.isLoadingAll||(s=He.combineFilters([s,He.combineFilters(a,"or")]));var o=(0,N.l)({},e.storeLoadOptions,{requireTotalCount:!1,requireGroupCount:!1,group:null,sort:n.concat(He.normalizeSortingInfo(e.storeLoadOptions.sort||[])),filter:s}),l=i._dataSource.isLastLevelGroupItemsPagingLocal();l||(o.skip=t.skip,o.take=t.take),(0,Y.gx)(0===t.take?[]:i._dataSource.loadFromStore(o)).done(d=>{l&&(d=i._dataSource.sortLastLevelGroupItems(d,n,t.paths),d=t.skip?d.slice(t.skip):d,d=t.take?d.slice(0,t.take):d),(0,j.S6)(t.items,(u,c)=>{var p=d.splice(0,c.count-(0===u&&t.skip||0));ob(e,t,n.length-1,u),c.items=p}),e.data.resolve(r)}).fail(e.data.reject)}(i,e,r,n)):lb(e.data)&&e.data.resolve(n)}var df=function(i,e){var t=new Y.BH,r=!(!e.group||!e.group.length),a=(0,N.l)({skip:0,take:1,requireGroupCount:r,requireTotalCount:!r},e,{group:r?e.group:null});return i.load(a).done((n,s)=>{var o=s&&(r?s.groupCount:s.totalCount);isFinite(o)?t.resolve(o):t.reject(Hu.R0.Error(r?"E4022":"E4021"))}).fail(t.reject.bind(t)),t};class hb extends rb{updateTotalItemsCount(e){var t=0,r=e.extra&&e.extra.totalCount||0,a=e.extra&&e.extra.groupCount||0,n=this._dataSource.pageSize(),s=this._isVirtualPaging();Kl(this,o=>{o.childrenTotalCount=0}),Kl(this,(o,l)=>{var d=sb(l,s?0:n,t),u=o.count+o.childrenTotalCount;s||(u+=of(d,n,u,l.length-1)),l[l.length-2]?l[l.length-2].childrenTotalCount+=u:t+=u}),super.updateTotalItemsCount(t-r+a)}_isGroupExpanded(e){var t=this._dataSource.group();return lf(t,e)}_updatePagingOptions(e,t){var r=this._isVirtualPaging(),a=this._dataSource.pageSize(),n=[],s=[],o=0,l=0;e.take&&(Kl(this,d=>{d.childrenTotalCount=0,d.skipChildrenTotalCount=0}),Kl(this,(d,u)=>{var c,f=0,p=0,g=sb(u,r?0:a,l),w=0,x=0,y=d.count+d.childrenTotalCount,E=y;t&&t(d,g);var V=e.skip-g;g<=e.skip+e.take&&y&&(c=e.take,r||(y+=(w=of(g,a,y,u.length-1))*u.length,E+=w,a&&V>=0&&(f=u.length,p=u.length-1,x=Math.floor(V/a))),V>=0?(g+y>e.skip&&n.unshift(V-x*f-d.skipChildrenTotalCount),g+y>=e.skip+c&&s.unshift(c-f-d.childrenTotalCount+d.skipChildrenTotalCount)):g+y>=e.skip+c&&s.unshift(c+V-d.childrenTotalCount)),g<=e.skip&&(u[u.length-2]?u[u.length-2].skipChildrenTotalCount+=Math.min(E,V+1-x*p):o+=Math.min(E,V+1)),g<=e.skip+c&&(y=Math.min(E,V+c-(x+1)*p),u[u.length-2]?u[u.length-2].childrenTotalCount+=y:l+=y)}),e.skip-=o,e.take-=l-o),e.skips=n,e.takes=s}changeRowExpand(e){var t=this.findGroupInfo(e),r=this._dataSource,a=r.remoteOperations().groupPaging,n=He.normalizeSortingInfo(r.group());return t?(t.isExpanded=!t.isExpanded,a&&t.isExpanded&&e.length<n.length?df(r,{filter:fs(e,{filter:r.lastLoadOptions().filter,group:r.group()}),group:[n[e.length]],select:r.select()}).done(s=>{t.count=s}):(new Y.BH).resolve()):(new Y.BH).reject()}handleDataLoading(e){var{storeLoadOptions:t}=e,r=He.normalizeSortingInfo(t.group||e.loadOptions.group);if(!e.isCustomLoading&&r.length){if(e.remoteOperations.grouping){var a=this._dataSource.remoteOperations().paging;t.group=He.normalizeSortingInfo(t.group),t.group.forEach((n,s)=>{n.isExpanded=!(a&&s===t.group.length-1)})}e.group=e.group||r,e.remoteOperations.paging?(e.skip=t.skip,e.take=t.take,t.requireGroupCount=!0,t.group=r.slice(0,1),this._updatePagingOptions(e),t.skip=e.skip,t.take=e.take):(e.skip=e.loadOptions.skip,e.take=e.loadOptions.take,this._updatePagingOptions(e))}}handleDataLoadedCore(e,t){var n,r=He.normalizeSortingInfo(e.storeLoadOptions.group||e.loadOptions.group).length,a=e.group?e.group.length:0,s={};if(e.isCustomLoading)t(e),ab(this,e.data,r,s,[],e.isCustomLoading,e.storeLoadOptions.isLoadingAll);else{if(e.remoteOperations.paging||this.foreachGroups(o=>{o.count=0}),(n=nb(this,e,e.data,r))<0)return void(e.data=(new Y.BH).reject(Rt.Z.Error("E1037")));if(e.remoteOperations.paging||r&&e.extra&&e.loadOptions.requireTotalCount&&(e.extra.totalCount=n,e.extra.groupCount=e.data.length),a&&e.storeLoadOptions.requireGroupCount&&!isFinite(e.extra.groupCount))return void(e.data=(new Y.BH).reject(Hu.R0.Error("E4022")));this.updateTotalItemsCount(e),e.remoteOperations.paging||(this._updatePagingOptions(e),e.lastLoadOptions.skips=e.skips,e.lastLoadOptions.takes=e.takes),t(e),e.remoteOperations.paging||this._processPaging(e,r)}ub(this,e,r,s,0,e.data)}_processSkips(e,t,r){if(r){var a=e[0],n=t[0],s=a&&a.items;void 0!==n&&(a.isContinuation=!0,s&&(a.items=s.slice(n),this._processSkips(a.items,t.slice(1),r-1)))}}_processTakes(e,t,r,a,n){if(a&&e){n=n||[];var s=e[e.length-1],o=s&&s.items,l=r[0];s&&(void 0!==l&&(s.count-(s.isContinuation&&t[0]||0)||o.length)>l&&(s.isContinuationOnNextPage=!0,n.forEach(c=>{c.isContinuationOnNextPage=!0}),o&&(o=o.slice(0,l),s.items=o)),n.push(s),this._processTakes(o,t.slice(1),r.slice(1),a-1,n))}}_processPaging(e,t){this._processSkips(e.data,e.skips,t),this._processTakes(e.data,e.skips,e.takes,t)}isLastLevelGroupItemsPagingLocal(){return!1}sortLastLevelGroupItems(e){return e}refresh(e,t){var l,d,r=this,a=r._dataSource,{storeLoadOptions:n}=e,s=e.group||e.storeLoadOptions.group,o=He.normalizeSortingInfo(r._group);function u(c,f){f.length===d+1&&(c.isExpanded=l)}for(d=0;d<o.length;d++)l=lf(s,d),lf(r._group,d)!==l&&r.foreachGroups(u);if(super.refresh.apply(this,arguments),s&&e.remoteOperations.paging&&t.reload)return Kl(r,c=>{var f=df(a,{filter:fs(c.path,{filter:n.filter,group:s}),group:s.slice(c.path.length),select:n.select}),p=df(a,{filter:tb(c.path,{filter:n.filter,group:s},!0),group:s.slice(c.path.length-1,c.path.length),select:n.select});return(0,Y.gx)(p,f).done((g,w)=>{g=parseInt(g.length?g[0]:g),w=parseInt(w.length?w[0]:w),c.offset=g,c.count!==w&&(c.count=w,r.updateTotalItemsCount(e))})},!0)}}var uf=function(i,e){var t=new Y.BH,r=(0,N.l)({skip:0,take:1,requireTotalCount:!0},e);return i.load(r).done((a,n)=>{t.resolve(n&&n.totalCount)}).fail(t.reject.bind(t)),t},Zu=function(i,e,t){return i.foreachGroups(r=>{if(!r.isExpanded)return e(r)},!1,!1,t,!0)},cb=function(i,e){var t=0,r=e||0;return e&&(Zu(i,a=>{if(a.offset-t>=e)return!1;t+=a.count-1}),r+=t),r},eP=function i(e,t,r,a,n,s){for(var o=0,l=!1,d=0;d<t.length;d++){var u=t[d];if(void 0!==u.items){r.push(u.key);var c=e.findGroupInfo(r);if(c&&!c.isExpanded)u.collapsedItems=u.items,u.items=null,a+=c.count,--s<0&&o++,n&&(l=!0);else if(u.items){var f=i(e,u.items,r,a,n,s);n&&(f.offset-a>1?u.isContinuation=!0:l=!0),a=f.offset,(s=f.take)<0&&(u.items.length?u.isContinuationOnNextPage=!0:o++)}r.pop()}else n&&(l=!0),a++,--s<0&&o++;n=!1}return l&&t.splice(0,1),o&&t.splice(-o,o),{offset:a,take:s}},tP=function(i,e){if(i.length!==e.length)return!1;for(var t=0;t<i.length;t++)if(!(0,Ca.OI)(null,i[t],e[t]))return!1;return!0},pb=function i(e,t,r,a,n){if(t){for(var s=0;s<t.length;s++){var o=t[s];if("key"in o&&void 0!==o.items){r.push(o.key),n&&tP(n.path,r)&&!o.isContinuation&&(n.offset=a);var l=e.findGroupInfo(r);l&&!o.isContinuation&&(l.offset=a),l&&!l.isExpanded?a+=l.count:a=i(e,o.items,r,a,n),r.pop()}else a++}return a}},aP=function i(e,t){var r=e.count||e.items.length;if(!e.count&&t>1){r=0;for(var a=0;a<e.items.length;a++)r+=i(e.items[a],t-1)}return r};class fb extends rb{handleDataLoading(e){var s,{storeLoadOptions:t}=e,r=[],a=0,n=!1,{group:o}=e.loadOptions,l=0;if(function(i,e){if(e.group){var t=He.normalizeSortingInfo(e.group),r=He.normalizeSortingInfo(i.sort);i.sort=no.Z.arrangeSortingInfo(t,r),delete e.group}}(t,e.loadOptions),e.group=e.group||o,!e.isCustomLoading){var d=(0,N.l)({},t);d.skip=cb(this,t.skip),d.skip&&d.take&&o&&(d.skip--,d.take++,n=!0),d.take&&o&&(s=d.take,d.take++),Zu(this,u=>{if(u.offset>=d.skip+d.take+l)return!1;u.offset>=d.skip+l&&u.count&&(l+=u.count-1,r.push(u),a+=u.count)}),(0,j.S6)(r,function(){d.filter=function(i,e,t){for(var r=He.normalizeSortingInfo(t||e.group),a=[],n=0;n<i.length;n++){for(var s=[],o=0;o<=n;o++)s.push([r[o].selector,n===o?"<>":"=",i[o]]);a.push(He.combineFilters(s))}return a=He.combineFilters(a,"or"),He.combineFilters([a,e.filter])}(this.path,d,o)}),e.storeLoadOptions=d,e.collapsedGroups=r,e.collapsedItemsCount=a,e.skip=d.skip||0,e.skipFirstItem=n,e.take=s}}handleDataLoaded(e,t){var{collapsedGroups:r}=e,a=He.normalizeSortingInfo(e.group),n=a.length;function s(u,c,f,p,g){if(u&&c.length&&f.length){var w,x,y=(0,Dt.Ex)(c[0],!0);for(x=0;x<u.length&&(w=(0,Dt.Ex)(u[x].key,!0),!(g>=p.offset||y===w));x++)g+=aP(u[x],f.length);(!u.length||y!==w)&&u.splice(x,0,{key:c[0],items:[],count:1===c.length?p.count:void 0}),s(u[x].items,c.slice(1),f.slice(1),p,g)}}if(e.collapsedItemsCount&&e.extra&&e.extra.totalCount>=0&&(e.extra._totalCountWasIncreasedByCollapsedItems||(e.extra.totalCount+=e.collapsedItemsCount,e.extra._totalCountWasIncreasedByCollapsedItems=!0)),t(e),n){var{data:o}=e,l=(0,Ta.Z)(o);if(no.Z.multiLevelGroup(l,a).enumerate().done(u=>{o=u}),r)for(var d=0;d<r.length;d++)s(o,r[d].path,a,r[d],e.skip);e.isCustomLoading||eP(this,o,[],e.skip,e.skipFirstItem,e.take),e.data=o}}isGroupItemCountable(e){return null===e.items}updateTotalItemsCount(){var e=0;Zu(this,t=>{t.count&&(e-=t.count-1)}),super.updateTotalItemsCount(e)}changeRowExpand(e){var l,t=this,r=t._dataSource,a=r.beginPageIndex?r.beginPageIndex():r.pageIndex(),n=r.items(),s=cb(t,a*r.pageSize()),o=t.findGroupInfo(e);return l=o&&!o.isExpanded?(new Y.BH).resolve(o.count):uf(r,{filter:fs(e,{filter:r.filter(),group:r.group()})}),(0,Y.gx)(l).done(d=>{d=parseInt(d.length?d[0]:d),o?(pb(t,n,[],s),o.isExpanded=!o.isExpanded,o.count=d):(pb(t,n,[],s,o={offset:-1,count:d,path:e,isExpanded:!1}),o.offset>=0&&t.addGroupInfo(o)),t.updateTotalItemsCount()}).fail(function(){r._eventsStrategy.fireEvent("loadError",arguments)})}allowCollapseAll(){return!1}refresh(e,t){var r=this,{storeLoadOptions:a}=e,n=r._dataSource;if(super.refresh.apply(this,arguments),t.reload)return Zu(r,s=>{var o=uf(n,{filter:fs(s.path,a)}),l=uf(n,{filter:tb(s.path,a)});return(0,Y.gx)(l,o).done((d,u)=>{d=parseInt(d.length?d[0]:d),u=parseInt(u.length?u[0]:u),s.offset=d,s.count!==u&&(s.count=u,r.updateTotalItemsCount())})},!0)}}var hf="dx-datagrid-group-panel",zu="dx-group-panel-item",_b="dx-toolbar-label";vu.extend(i=>class extends i{init(){super.init.apply(this,arguments),this._initGroupingHelper()}_initGroupingHelper(e){var t=this._grouping,r=this.option("grouping.autoExpandAll"),a=this.option("focusedRowEnabled"),n=e?e.remoteOperations:this.remoteOperations();!(n.filtering&&n.sorting&&n.paging)||n.grouping||!r&&a?(!t||t instanceof fb)&&(this._grouping=new hb(this)):(!t||t instanceof hb)&&(this._grouping=new fb(this))}totalItemsCount(){var e=super.totalItemsCount();return e>0&&this._dataSource.group()&&this._dataSource.requireTotalCount()?e+this._grouping.totalCountCorrection():e}itemsCount(){return this._dataSource.group()?this._grouping.itemsCount()||0:super.itemsCount.apply(this,arguments)}allowCollapseAll(){return this._grouping.allowCollapseAll()}isGroupItemCountable(e){return this._grouping.isGroupItemCountable(e)}isRowExpanded(e){var t=this._grouping.findGroupInfo(e);return t?t.isExpanded:!this._grouping.allowCollapseAll()}collapseAll(e){return this._collapseExpandAll(e,!1)}expandAll(e){return this._collapseExpandAll(e,!0)}_collapseExpandAll(e,t){var r=this._dataSource,a=r.group(),n=He.normalizeSortingInfo(a||[]);if(n.length){for(var s=0;s<n.length;s++)void 0===e||e===s?n[s].isExpanded=t:a&&a[s]&&(n[s].isExpanded=a[s].isExpanded);r.group(n),this._grouping.foreachGroups((o,l)=>{(void 0===e||e===l.length-1)&&(o.isExpanded=t)},!1,!0),this.resetPagesCache()}return!0}refresh(){return super.refresh.apply(this,arguments),this._grouping.refresh.apply(this._grouping,arguments)}changeRowExpand(e){var t=this._dataSource;if(t.group())return t.beginLoading(),this._lastLoadOptions&&(this._lastLoadOptions.groupExpand=!0),this._changeRowExpandCore(e).always(()=>{t.endLoading()})}_changeRowExpandCore(e){return this._grouping.changeRowExpand(e)}_hasGroupLevelsExpandState(e,t){if(e&&Array.isArray(e))for(var r=0;r<e.length;r++)if(e[r].isExpanded===t)return!0}_customizeRemoteOperations(e,t){var{remoteOperations:r}=e;e.storeLoadOptions.group?(r.grouping&&!e.isCustomLoading&&(!r.groupPaging||this._hasGroupLevelsExpandState(e.storeLoadOptions.group,!0))&&(r.paging=!1),!r.grouping&&(!r.sorting||!r.filtering||e.isCustomLoading||this._hasGroupLevelsExpandState(e.storeLoadOptions.group,!1))&&(r.paging=!1)):!e.isCustomLoading&&r.paging&&t.grouping&&this.resetCache(),super._customizeRemoteOperations.apply(this,arguments)}_handleDataLoading(e){return super._handleDataLoading(e),this._initGroupingHelper(e),this._grouping.handleDataLoading(e)}_handleDataLoaded(e){return this._grouping.handleDataLoaded(e,super._handleDataLoaded.bind(this))}_handleDataLoadedCore(e){return this._grouping.handleDataLoadedCore(e,super._handleDataLoadedCore.bind(this))}});var cf=function(i,e){var t=this._columnsController;switch(e.itemData.value){case"group":var r=t._dataSource.group()||[];t.columnOption(i.dataField,"groupIndex",r.length);break;case"ungroup":t.columnOption(i.dataField,"groupIndex",-1);break;case"ungroupAll":this.component.clearGrouping()}},vb=i=>{var e=i?.visible;return"auto"===e?"desktop"===at.Z.current().deviceType:!!e},gb=(i,e)=>vb(i)&&!(!i?.allowColumnDragging||!e.allowGrouping);He.registerModule("grouping",{defaultOptions:()=>({grouping:{autoExpandAll:!0,allowCollapsing:!0,contextMenuEnabled:!1,expandMode:"buttonClick",texts:{groupContinuesMessage:ae.Z.format("dxDataGrid-groupContinuesMessage"),groupContinuedMessage:ae.Z.format("dxDataGrid-groupContinuedMessage"),groupByThisColumn:ae.Z.format("dxDataGrid-groupHeaderText"),ungroup:ae.Z.format("dxDataGrid-ungroupHeaderText"),ungroupAll:ae.Z.format("dxDataGrid-ungroupAllText")}},groupPanel:{visible:!1,emptyPanelText:ae.Z.format("dxDataGrid-groupPanelEmptyText"),allowColumnDragging:!0}}),extenders:{controllers:{data:i=>class extends i{init(){super.init(),this.createAction("onRowExpanding"),this.createAction("onRowExpanded"),this.createAction("onRowCollapsing"),this.createAction("onRowCollapsed")}_beforeProcessItems(e){var t=this._columnsController.getGroupColumns();return(e=super._beforeProcessItems(e)).length&&t.length&&(e=this._processGroupItems(e,t.length)),e}_processItem(e,t){return(0,m.$K)(e.groupIndex)&&(0,m.HD)(e.rowType)&&0===e.rowType.indexOf("group")?(e=this._processGroupItem(e,t),t.dataIndex=0):e=super._processItem.apply(this,arguments),e}_processGroupItem(e,t){return e}_processGroupItems(e,t,r){var a=this._columnsController.getGroupColumns(),n=a[a.length-t];if(!r){var s=this.option("scrolling.mode");r={collectContinuationItems:"virtual"!==s&&"infinite"!==s,resultItems:[],path:[],values:[]}}var{resultItems:o}=r;if(r.data&&(r.collectContinuationItems||!r.data.isContinuation)&&o.push({rowType:"group",data:r.data,groupIndex:r.path.length-1,isExpanded:!!r.data.items,key:r.path.slice(0),values:r.values.slice(0)}),e)if(0===t)o.push.apply(o,e);else for(var l=0;l<e.length;l++){var d=e[l];d&&"items"in d?(r.data=d,r.path.push(d.key),r.values.push(n&&n.deserializeValue&&!n.calculateDisplayValue?n.deserializeValue(d.key):d.key),this._processGroupItems(d.items,t-1,r),r.data=void 0,r.path.pop(),r.values.pop()):o.push(d)}return o}publicMethods(){return super.publicMethods().concat(["collapseAll","expandAll","isRowExpanded","expandRow","collapseRow"])}collapseAll(e){var t=this._dataSource;t&&t.collapseAll(e)&&(t.pageIndex(0),t.reload())}expandAll(e){var t=this._dataSource;t&&t.expandAll(e)&&(t.pageIndex(0),t.reload())}changeRowExpand(e){var t=this,r=t.isRowExpanded(e),a={key:e,expanded:r};return t.executeAction(r?"onRowCollapsing":"onRowExpanding",a),a.cancel?(new Y.BH).resolve():(0,Y.gx)(t._changeRowExpandCore(e)).done(()=>{a.expanded=!r,t.executeAction(r?"onRowCollapsed":"onRowExpanded",a)})}_changeRowExpandCore(e){var t=this,r=this._dataSource,a=new Y.BH;return r?(0,Y.gx)(r.changeRowExpand(e)).done(()=>{t.load().done(a.resolve).fail(a.reject)}).fail(a.reject):a.resolve(),a}isRowExpanded(e){var t=this._dataSource;return t&&t.isRowExpanded(e)}expandRow(e){return this.isRowExpanded(e)?(new Y.BH).resolve():this.changeRowExpand(e)}collapseRow(e){return this.isRowExpanded(e)?this.changeRowExpand(e):(new Y.BH).resolve()}optionChanged(e){"grouping"===e.name&&(e.name="dataSource"),super.optionChanged(e)}},columns:i=>class extends i{_getExpandColumnOptions(){var e=super._getExpandColumnOptions.apply(this,arguments);return e.cellTemplate=He.getExpandCellTemplate(),e}},editing:i=>class extends i{_isProcessedItem(e){return(0,m.$K)(e.groupIndex)&&(0,m.HD)(e.rowType)&&0===e.rowType.indexOf("group")}}},views:{headerPanel:i=>class extends i{_getToolbarItems(){var e=super._getToolbarItems();return this._appendGroupingItem(e)}_appendGroupingItem(e){if(this._isGroupPanelVisible()){var t=!1;e.push({template:()=>{var a=(0,b.Z)("<div>").addClass(hf);return this._updateGroupPanelContent(a),ml("groupPanel",this,a,void 0,this._handleActionKeyDown.bind(this)),a},name:"groupPanel",onItemRendered:()=>{t&&this.renderCompleted.fire(),t=!0},location:"before",locateInMenu:"never",sortIndex:1}),this.updateToolbarDimensions()}return e}_handleActionKeyDown(e){var{event:t}=e,r=(0,b.Z)(t.target),a=r.closest(".".concat(zu)).index(),n=this._columnsController.getGroupColumns()[a],s=n&&n.index;r.is(".dx-header-filter")?this.getController("headerFilter").showHeaderFilterMenu(s,!0):this._processGroupItemAction(s),t.preventDefault()}_isGroupPanelVisible(){return vb(this.option("groupPanel"))}_renderGroupPanelItems(e,t){var r=this;e.empty(),(0,j.S6)(t,(a,n)=>{r._createGroupPanelItem(e,n)}),ap(this)}_createGroupPanelItem(e,t){var r=(0,b.Z)("<div>").addClass(t.cssClass).addClass(zu).data("columnData",t).appendTo(e).text(t.caption);return function OT(i,e){i.option("useLegacyKeyboardnavigation")||e.attr("tabindex",i.option("tabindex")||0)}(this,r),r}_columnOptionChanged(e){if(!this._requireReady&&!He.checkChanges(e.optionNames,["width","visibleWidth"])){var t=this.element(),r=t&&t.find(".".concat(hf));r&&r.length&&(this._updateGroupPanelContent(r),this.updateToolbarDimensions(),this.renderCompleted.fire())}super._columnOptionChanged()}_updateGroupPanelContent(e){var t=this.getController("columns").getGroupColumns(),r=this.option("groupPanel");this._renderGroupPanelItems(e,t),r.allowColumnDragging&&!t.length&&((0,b.Z)("<div>").addClass("dx-group-panel-message").text(r.emptyPanelText).appendTo(e),e.closest(".".concat("dx-toolbar-item")).addClass(_b),e.closest(".".concat(_b)).css("maxWidth","none"))}allowDragging(e){var t=this.option("groupPanel");return gb(t,e)}getColumnElements(){var e=this.element();return e&&e.find(".".concat(zu))}getColumns(){return this.getController("columns").getGroupColumns()}getBoundingRect(){var e=this.element();if(e&&e.find(".".concat(hf)).length){var t=e.offset();return{top:t.top,bottom:t.top+(0,oe.Cr)(e)}}return null}getName(){return"group"}getContextMenuItems(e){var a,t=this.option("grouping.contextMenuEnabled"),r=(0,b.Z)(e.targetElement).closest(".".concat(zu));if(r.length&&(e.column=r.data("columnData")),t&&e.column){var{column:n}=e;if(!(0,m.$K)(n.allowGrouping)||n.allowGrouping){var o=(0,m.$K)(n.groupIndex)&&n.groupIndex>-1,l=this.option("grouping.texts"),d=cf.bind(this,n);a=[{text:l.ungroup,value:"ungroup",disabled:!o,onItemClick:d},{text:l.ungroupAll,value:"ungroupAll",onItemClick:d}]}}return a}isVisible(){return super.isVisible()||this._isGroupPanelVisible()}hasGroupedColumns(){return this._isGroupPanelVisible()&&!!this.getColumns().length}optionChanged(e){"groupPanel"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}},rowsView:i=>class extends i{getContextMenuItems(e){var r;if(this.option("grouping.contextMenuEnabled")&&e.row&&"group"===e.row.rowType){var n=this._columnsController.columnOption("groupIndex:".concat(e.row.groupIndex));if(n&&n.allowGrouping){var s=this.option("grouping.texts"),o=cf.bind(this,n);(r=[]).push({text:s.ungroup,value:"ungroup",onItemClick:o},{text:s.ungroupAll,value:"ungroupAll",onItemClick:o})}}return r}_rowClick(e){var t=this.option("grouping.expandMode"),a="infinite"!==this.option("scrolling.mode")&&"rowClick"===t&&(0,b.Z)(e.event.target).closest(".".concat("dx-group-row")).length,n=(0,b.Z)(e.event.target).closest(".".concat("dx-datagrid-expand")).length;(a||n)&&this._changeGroupRowState(e),super._rowClick(e)}_changeGroupRowState(e){var t=this.getController("data"),r=t.items()[e.rowIndex],a=this._columnsController.columnOption("groupIndex:".concat(r.groupIndex),"allowCollapsing");("data"===r.rowType||"group"===r.rowType&&!1!==a)&&(t.changeRowExpand(r.key,!0),e.event.preventDefault(),e.handled=!0)}},columnHeadersView:i=>class extends i{getContextMenuItems(e){var t=this.option("grouping.contextMenuEnabled"),r=super.getContextMenuItems(e);if(t&&e.row&&("header"===e.row.rowType||"detailAdaptive"===e.row.rowType)){var{column:a}=e;if(!a.command&&(!(0,m.$K)(a.allowGrouping)||a.allowGrouping)){var n=this.option("grouping.texts"),s=(0,m.$K)(a.groupIndex)&&a.groupIndex>-1,o=cf.bind(this,a);(r=r||[]).push({text:n.groupByThisColumn,value:"group",beginGroup:!0,disabled:s,onItemClick:o}),a.showWhenGrouped&&r.push({text:n.ungroup,value:"ungroup",disabled:!s,onItemClick:o}),r.push({text:n.ungroupAll,value:"ungroupAll",onItemClick:o})}}return r}allowDragging(e){var t=this.option("groupPanel");return gb(t,e)||super.allowDragging(e)}}}}});var mb="dx-master-detail-row",pf=function(i){i._expandedItems=[],i._isExpandAll=i.option("masterDetail.autoExpandAll")},SP={defaultOptions:()=>({masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}),extenders:{controllers:{columns:i=>class extends i{_getExpandColumnsCore(){var e=super._getExpandColumnsCore();return this.option("masterDetail.enabled")&&e.push({type:"detailExpand",cellTemplate:Te.getExpandCellTemplate()}),e}},data:i=>class extends i{init(){pf(this),super.init()}expandAll(e){e<0?(this._isExpandAll=!0,this._expandedItems=[],this.updateItems()):super.expandAll.apply(this,arguments)}collapseAll(e){e<0?(this._isExpandAll=!1,this._expandedItems=[],this.updateItems()):super.collapseAll.apply(this,arguments)}isRowExpandedHack(){return super.isRowExpanded.apply(this,arguments)}isRowExpanded(e){var t=Te.getIndexByKey(e,this._expandedItems);return Array.isArray(e)?super.isRowExpanded.apply(this,arguments):!!(this._isExpandAll^(t>=0&&this._expandedItems[t].visible))}_getRowIndicesForExpand(e){var t=this.getRowIndexByKey(e);return[t,t+1]}_changeRowExpandCore(e){var t;if(Array.isArray(e))t=super._changeRowExpandCore.apply(this,arguments);else{var r=Te.getIndexByKey(e,this._expandedItems);if(r>=0){var{visible:a}=this._expandedItems[r];this._expandedItems[r].visible=!a}else this._expandedItems.push({key:e,visible:!0});this.updateItems({changeType:"update",rowIndices:this._getRowIndicesForExpand(e)}),t=(new Y.BH).resolve()}return t}_processDataItemHack(){return super._processDataItem.apply(this,arguments)}_processDataItem(e,t){var r=super._processDataItem.apply(this,arguments);return r.isExpanded=this.isRowExpanded(r.key),void 0===t.detailColumnIndex&&(t.detailColumnIndex=-1,(0,j.S6)(t.visibleColumns,(a,n)=>{if("expand"===n.command&&!(0,m.$K)(n.groupIndex))return t.detailColumnIndex=a,!1})),t.detailColumnIndex>=0&&(r.values[t.detailColumnIndex]=r.isExpanded),r}_processItemsHack(){return super._processItems.apply(this,arguments)}_processItems(e,t){var r=this,{changeType:a}=t,n=[];return e=super._processItems.apply(r,arguments),"loadingAll"===a?e:("refresh"===a&&(r._expandedItems=(0,J.h3)(r._expandedItems,s=>s.visible)),(0,j.S6)(e,(s,o)=>{n.push(o);var l=Te.getIndexByKey(o.key,r._expandedItems);"data"===o.rowType&&(o.isExpanded||l>=0)&&!o.isNewRow&&n.push({visible:o.isExpanded,rowType:"detail",key:o.key,data:o.data,values:[]})}),n)}optionChanged(e){var t,r;if("masterDetail"===e.name){switch(e.name="dataSource",e.fullName){case"masterDetail":var a=e.value||{},n=e.previousValue||{};t=a.enabled!==n.enabled,r=a.autoExpandAll!==n.autoExpandAll;break;case"masterDetail.template":pf(this);break;case"masterDetail.enabled":t=!0;break;case"masterDetail.autoExpandAll":r=!0}(t||r)&&pf(this)}super.optionChanged(e)}},resizing:i=>class extends i{fireContentReadyAction(){super.fireContentReadyAction.apply(this,arguments),this._updateParentDataGrids(this.component.$element())}_updateParentDataGrids(e){var t=e.closest(".".concat(mb));t.length&&(0,Y.gx)(this._updateMasterDataGrid(t,e)).done(()=>{this._updateParentDataGrids(t.parent())})}_updateMasterDataGrid(e,t){var r=(0,b.Z)(e).data("options"),a=(0,b.Z)(e).closest(".".concat(this.getWidgetContainerClass())).parent().data("dxDataGrid");if(r&&a)return this._updateMasterDataGridCore(a,r)}_updateMasterDataGridCore(e,t){var r=(0,Y.BH)();if(e.getView("rowsView").isFixedColumns())this._updateFixedMasterDetailGrids(e,t.rowIndex,(0,b.Z)(t.rowElement)).done(r.resolve);else{if(!0===e.option("scrolling.useNative"))return void e.updateDimensions().done(()=>r.resolve(!0));var a=e.getScrollable();a?a?.update().done(()=>r.resolve()):r.resolve()}return r.promise()}_updateFixedMasterDetailGrids(e,t,r){var a=(0,Y.BH)(),n=(0,b.Z)(e.getRowElement(t)),s=(0,b.Z)(e.getView("rowsView").getTableElements()),o=2===n?.length&&(0,oe.Cr)(n.eq(0))!==(0,oe.Cr)(n.eq(1)),l=2===s?.length&&(0,oe.Cr)(s.eq(0))!==(0,oe.Cr)(s.eq(1));if(o||l){var d=(0,oe.dz)(r);return e.updateDimensions().done(()=>{var u=this.option("columnAutoWidth")&&!0===e.option("scrolling.useNative"),c=u&&d!==(0,oe.dz)(r);u&&c?this.updateDimensions().done(()=>a.resolve(!0)):a.resolve(!0)}),a.promise()}return(0,Y.BH)().resolve()}_toggleBestFitMode(e){if(super._toggleBestFitMode.apply(this,arguments),this.option("masterDetail.template")){var t=this._rowsView.getTableElement();t&&t.find(".dx-master-detail-cell").css("maxWidth",e?0:"")}}}},views:{rowsView:i=>class extends i{_getCellTemplate(e){var{column:t}=e,r=this._editingController,a=r&&r.isEditRow(e.rowIndex);return"detail"!==t.command||a?super._getCellTemplate.apply(this,arguments):this.option("masterDetail.template")||{allowRenderToDetachedContainer:!1,render:this._getDefaultTemplate(t)}}_isDetailRow(e){return e&&e.rowType&&0===e.rowType.indexOf("detail")}_createRow(e){var t=super._createRow.apply(this,arguments);return e&&this._isDetailRow(e)&&(this.option("showRowLines")&&t.addClass("dx-row-lines"),t.addClass(mb),(0,m.$K)(e.visible)&&t.toggle(e.visible)),t}_renderCells(e,t){var{row:r}=t,n=this._columnsController.getVisibleColumns();r.rowType&&this._isDetailRow(r)?this._needRenderCell(0,t.columnIndices)&&this._renderCell(e,{value:null,row:r,rowIndex:r.rowIndex,column:{command:"detail"},columnIndex:0,change:t.change}).addClass("dx-cell-focus-disabled").addClass("dx-master-detail-cell").attr("colSpan",n.length):super._renderCells.apply(this,arguments)}}}}};He.registerModule("masterDetail",SP);var Li=be(2063),Wu=function(i){for(var e=0,t=0,r=0;r<i.length;++r)if("'"===i[r]&&e++,"."===i[r]&&(++t,e%2==0))return{occurrence:t,index:r};return{occurrence:1,index:-1}},ff=function(i,e,t){for(var r=-1;t--&&r++<i.length;)r=i.indexOf(e,r);return r},_f=function(i,e){return-1===e?[i]:[i.slice(0,e),i.slice(e+1)]},$u=function(i,e){if("string"==typeof e){var t=e.split(";"),r=qt.Z.getSign(i,e);t[1]=t[1]||"-"+t[0],e=(e=t[r<0?1:0]).replace(/'([^']*)'/g,o=>o.split("").map(()=>" ").join("").substr(2));var a=/^[^#0.,]*/.exec(e)[0].length,n=/[^#0.,]*$/.exec(e)[0].length;return{start:a,end:i.length-n}}return{start:0,end:i.length}},Cb=function(i,e){var t=qt.Z.getDecimalSeparator(),r=new RegExp("[^0-9"+(0,J.hr)(t)+"]","g");return e.slice(0,i).replace(r,"").length},bb=function(i){return i.split("").reverse().join("")},wb=function(i,e){if(!i)return-1;for(var t=/[0-9]/g,r=1,a=null,n=t.exec(e);n;){if(a=n.index,r>=i)return a;r++,n=t.exec(e)}return null===a?e.length:a},_s=function(i,e){return void 0===i.start&&(i={start:i,end:i}),{start:i.start+e,end:i.end+e}};function An(i,e,t){i=_s(i,0);var r=$u(e,t);return{start:(0,Li.n$)(i.start,r.start,r.end),end:(0,Li.n$)(i.end,r.start,r.end)}}var DP=be(8541),OP=be(3599),Sb=be(216),yb=be(8740),xb="dxNumberBox",Eb=(0,ce.V4)(Bt.Z.up,xb),Ib=(0,ce.V4)(Bt.Z.cancel,xb),BP=hr.default.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup:function(){this.callBase();var i="dx-numberbox-spin-"+this.option("direction");this.$element().addClass("dx-numberbox-spin-button").addClass(i),this._spinIcon=(0,b.Z)("<div>").addClass(i+"-icon").appendTo(this.$element())},_render:function(){this.callBase();var i=(0,ce.V4)(Bt.Z.down,this.NAME),e=this.$element();k.Z.off(e,i),k.Z.on(e,i,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler:function(i){i.preventDefault(),this._clearTimer(),k.Z.on(this.$element(),lo.Z.name,function(){this._feedBackDeferred=new Y.BH,(0,yb.dR)(this._feedBackDeferred),this._spinChangeHandler({event:i}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:i})}.bind(this));var e=it.Z.getDocument();k.Z.on(e,Eb,this._clearTimer.bind(this)),k.Z.on(e,Ib,this._clearTimer.bind(this)),this._spinChangeHandler({event:i})},_dispose:function(){this._clearTimer(),this.callBase()},_clearTimer:function(){k.Z.off(this.$element(),lo.Z.name);var i=it.Z.getDocument();k.Z.off(i,Eb),k.Z.off(i,Ib),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged:function(i){switch(i.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(i)}}});const po=BP;class kP extends Sb.Z{_attachEvents(e,t){var{editor:r}=this,a=(0,ce.V4)(Bt.Z.down,r.NAME),n=t.children(),s=r._createAction(o=>r._spinButtonsPointerDownHandler(o));k.Z.off(t,a),k.Z.on(t,a,o=>s({event:o})),po.getInstance(n.eq(0)).option("onChange",o=>r._spinUpChangeHandler(o)),po.getInstance(n.eq(1)).option("onChange",o=>r._spinDownChangeHandler(o))}_create(){var{editor:e}=this,t=(0,b.Z)("<div>").addClass("dx-numberbox-spin-container"),r=(0,b.Z)("<div>").appendTo(t),a=(0,b.Z)("<div>").appendTo(t),n=this._getOptions();return this._addToContainer(t),e._createComponent(r,po,(0,N.l)({direction:"up"},n)),e._createComponent(a,po,(0,N.l)({direction:"down"},n)),this._legacyRender(e.$element(),this._isTouchFriendly(),n.visible),{instance:t,$element:t}}_getOptions(){var{editor:e}=this;return{visible:this._isVisible(),disabled:e.option("disabled")}}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showSpinButtons")}_isTouchFriendly(){var{editor:e}=this;return e.option("showSpinButtons")&&e.option("useLargeSpinButtons")}_legacyRender(e,t,r){e.toggleClass("dx-numberbox-spin-touch-friendly",t),e.toggleClass("dx-numberbox-spin",r)}update(){if(super.update()){var{editor:t,instance:r}=this,a=t.$element(),n=this._isVisible(),s=this._isTouchFriendly(),o=r.children(),l=po.getInstance(o.eq(0)),d=po.getInstance(o.eq(1)),u=this._getOptions();l.option(u),d.option(u),this._legacyRender(a,s,n)}}}var MP=Math,ZP=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],WP=OP.Z.inherit({_supportedKeys:function(){return(0,N.l)(this.callBase(),{upArrow:function(i){(0,ce.j1)(i)||(i.preventDefault(),i.stopPropagation(),this._spinUpChangeHandler(i))},downArrow:function(i){(0,ce.j1)(i)||(i.preventDefault(),i.stopPropagation(),this._spinDownChangeHandler(i))},enter:function(){}})},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:ae.Z.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:function(){return!1},_getDefaultButtons:function(){return this.callBase().concat([{name:"spins",Ctor:kP}])},_isSupportInputMode:function(){var i=parseFloat(ii.Z.version);return ii.Z.chrome&&i>=66||ii.Z.safari&&i>=12},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return at.Z.real().generic&&!at.Z.isSimulator()},options:{useLargeSpinButtons:!1}},{device:function(){return"desktop"!==at.Z.real().deviceType&&!this._isSupportInputMode()}.bind(this),options:{mode:"number"}}])},_initMarkup:function(){this._renderSubmitElement(),this.$element().addClass("dx-numberbox"),this.callBase()},_getDefaultAttributes:function(){var i=this.callBase();return i.inputmode="decimal",i},_renderContentImpl:function(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement:function(){this._$submitElement=(0,b.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(i){this._getSubmitElement().val((0,J.FH)(i))},_getSubmitElement:function(){return this._$submitElement},_keyPressHandler:function(i){this.callBase(i);var e=(0,ce.qK)(i);if(!/[\d.,eE\-+]/.test(e)){var r=(0,ce.EV)(i);return(0,ce.j1)(i)||r&&ZP.includes(r)?void 0:(i.preventDefault(),!1)}this._keyPressed=!0},_onMouseWheel:function(i){this._spinValueChange(i.delta>0?1:-1,i)},_renderValue:function(){var i=this._input().val(),e=this.option("value");(!i.length||Number(i)!==e)&&(this._forceValueRender(),this._toggleEmptinessEventHandler());var t=(0,m.$K)(e)?null:ae.Z.format("dxNumberBox-noDataText");return this.setAria({valuenow:(0,J.IS)(e,""),valuetext:t}),this.option("text",this._input().val()),this._updateButtons(),(new Y.BH).resolve()},_forceValueRender:function(){var i=this.option("value"),e=Number(i),t=isNaN(e)?"":this._applyDisplayValueFormatter(i);this._renderDisplayText(t)},_applyDisplayValueFormatter:function(i){return this.option("displayValueFormatter")(i)},_renderProps:function(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:(0,J.IS)(this.option("min"),""),valuemax:(0,J.IS)(this.option("max"),"")})},_spinButtonsPointerDownHandler:function(){var i=this._input();!this.option("useLargeSpinButtons")&&it.Z.getActiveElement()!==i[0]&&k.Z.trigger(i,"focus")},_spinUpChangeHandler:function(i){this.option("readOnly")||this._spinValueChange(1,i.event||i)},_spinDownChangeHandler:function(i){this.option("readOnly")||this._spinValueChange(-1,i.event||i)},_spinValueChange:function(i,e){var t=parseFloat(this.option("step"));if(0!==t){var r=parseFloat(this._normalizeInputValue())||0;r=this._correctRounding(r,t*i);var a=this.option("min"),n=this.option("max");(0,m.$K)(a)&&(r=Math.max(a,r)),(0,m.$K)(n)&&(r=Math.min(n,r)),this._saveValueChangeEvent(e),this.option("value",r)}},_correctRounding:function(i,e){var t=/[,.](.*)/,r=t.test(i),a=t.test(e);if(r||a){var n=r?t.exec(i)[0].length:0,s=a?t.exec(e)[0].length:0,o=MP.max(n,s);return this._round(i+e,o)}return i+e},_round:function(i,e){e=e||0;var t=Math.pow(10,e);return i*=t,Math.round(i)/t},_renderValueChangeEvent:function(){this.callBase();var i=(0,ce.V4)("focusout","NumberBoxForceValueChange");k.Z.off(this.element(),i),k.Z.on(this.element(),i,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue:function(){if("number"!==this.option("mode")){var i=this._input(),e=this._applyDisplayValueFormatter(this.option("value"));i.val(null),i.val(e)}},_valueChangeEventHandler:function(i){var e=this._input(),t=this._normalizeText(),r=this._parseValue(t),a="."!==t&&"-"!==t;!this._isValueValid()||this._validateValue(r)?(a&&this.callBase(i,isNaN(r)?null:r),this._applyValueBoundaries(t,r),this.validationRequest.fire({value:r,editor:this})):e.val(this._applyDisplayValueFormatter(r))},_applyValueBoundaries:function(i,e){var t=this._isValueIncomplete(i),r=this._isValueInRange(i);!t&&!r&&null!==e&&Number(i)!==e&&this._input().val(this._applyDisplayValueFormatter(e))},_replaceCommaWithPoint:function(i){return i.replace(",",".")},_inputIsInvalid:function(){var i="number"===this.option("mode"),e=this._input().get(0).validity;return i&&e&&e.badInput},_renderDisplayText:function(i){this._inputIsInvalid()||this.callBase(i)},_isValueIncomplete:function(i){return/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(i)},_isValueInRange:function(i){return(0,Li.Z2)(i,this.option("min"),this.option("max"))},_isNumber:function(i){return null!==this._parseValue(i)},_validateValue:function(i){var e=this._normalizeText(),t=this._isValueValid(),r=!0,a=this._isNumber(e);return isNaN(Number(i))&&(r=!1),!i&&t?r=!0:!a&&!t&&(r=!1),this.option({isValid:r,validationError:r?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),r},_normalizeInputValue:function(){return this._parseValue(this._normalizeText())},_normalizeText:function(){var i=this._input().val().trim();return this._replaceCommaWithPoint(i)},_parseValue:function(i){var e=parseFloat(i);return isNaN(e)?null:(0,Li.n$)(e,this.option("min"),this.option("max"))},_clearValue:function(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},clear:function(){null===this.option("value")?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged:function(i){switch(i.name){case"value":this._validateValue(i.value),this._setSubmitValue(i.value),this.callBase(i),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(i)}}}),vf="dxNumberFormatter",Gl="minus",UP=WP.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:function(i){return"del"===i},_supportedKeys:function(){return this._useMaskBehavior()?(0,N.l)(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex:function(i){var e=qt.Z.getDecimalSeparator(),t=Wu(this.option("format")).occurrence;return ff(i,e,t)},_focusInHandler:function(i){this._preventNestedFocusEvent(i)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0;var e=this._caret();if(e.start===e.end&&this._useMaskBehavior()){var t=this._getInputVal(),r=this._getTextSeparatorIndex(t);r>=0?this._caret({start:r,end:r}):this._moveCaretToBoundaryEventHandler(-1,i)}}.bind(this),0)),this.callBase(i)},_focusOutHandler:function(i){var e=!this._preventNestedFocusEvent(i);e&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(i),e&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(i){var e=this._getFormatPattern(),t=this.option("value");return(this._format(t,e)||"")!==i},_updateFormattedValue:function(){var i=this._getInputVal();this._hasValueBeenChanged(i)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&k.Z.trigger(this._input(),"change"))},_arrowHandler:function(i,e){if(this._useMaskBehavior()){var t=this._getInputVal(),r=this._getFormatPattern(),a=_s(this._caret(),i);(function(i,e,t){var r=An(i=_s(i,0),e,t);return i.start>=r.start&&i.end<=r.end})(a,t,r)||(a=1===i?a.end:a.start,e.preventDefault(),this._caret(An(a,t,r)))}},_moveCaretToBoundary:function(i){var e=$u(this._getInputVal(),this._getFormatPattern()),t=_s(1===i?e.start:e.end,0);this._caret(t)},_moveCaretToBoundaryEventHandler:function(i,e){!this._useMaskBehavior()||e&&e.shiftKey||(this._moveCaretToBoundary(i),e&&e.preventDefault())},_shouldMoveCaret:function(i,e){var t=qt.Z.getDecimalSeparator(),r=i.charAt(e.end)===t;return(this._lastKey===t||"."===this._lastKey||","===this._lastKey)&&r},_getInputVal:function(){return qt.Z.convertDigits(this._input().val(),!0)},_keyboardHandler:function(i){if(this.clearCaretTimeout(),this._lastKey=qt.Z.convertDigits((0,ce.qK)(i),!0),this._lastKeyName=(0,ce.EV)(i),!this._shouldHandleKey(i.originalEvent))return this.callBase(i);var r,e=this._getInputVal(),t=this._caret();r=this._lastKeyName===Gl?"":110===i.which?qt.Z.getDecimalSeparator():this._lastKey;var a=this._tryParse(e,t,r);return this._shouldMoveCaret(e,t)&&(this._moveCaret(1),i.originalEvent.preventDefault()),void 0===a?this._lastKeyName!==Gl&&i.originalEvent.preventDefault():this._parsedValue=a,this.callBase(i)},_keyPressHandler:function(i){this._useMaskBehavior()||this.callBase(i)},_removeHandler:function(i){var e=this._caret(),t=this._getInputVal(),r=e.start,a=e.end;this._lastKey=(0,ce.qK)(i),this._lastKeyName=(0,ce.EV)(i);var n=this._isDeleteKey(this._lastKeyName),s=!n;if(r===a){if(!(s&&r>0||n&&r<t.length))return void i.preventDefault();n&&a++,s&&r--}var d=t.slice(r,a);if(this._isStub(d))this._moveCaret(n?1:-1),(this._parsedValue<0||1/this._parsedValue==-1/0)&&(this._revertSign(i),this._setTextByParsedValue(),this.option("valueChangeEvent").split(" ").includes("input")&&k.Z.trigger(this._input(),"input")),i.preventDefault();else{var c=qt.Z.getDecimalSeparator();if(d!==c){if(a-r<t.length&&this._replaceSelectedText(t,{start:r,end:a},"").search(/[0-9]/)<0&&this._isValueInRange(0))return void(this._parsedValue=this._parsedValue<0||1/this._parsedValue==-1/0?-0:0);var w=this._tryParse(t,{start:r,end:a},"");void 0===w?i.preventDefault():this._parsedValue=w}else{var f=t.indexOf(c);this._isNonStubAfter(f+1)&&(this._moveCaret(n?1:-1),i.preventDefault())}}},_isPercentFormat:function(){return-1!==this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")},_parse:function(i,e){var t=this.option("format"),r=(0,m.mf)(t.parser),a=r?t.parser:qt.Z.parse,n=0;if(!r){var s=Wu(e).index,o=this._getTextSeparatorIndex(i),l=-1!==s?s:e.length,d=-1!==o?o:i.length;d>l&&-1===e.indexOf("#")&&(n=d-l)}return a(i=i.substr(n),e)},_format:function(i,e){var t=this.option("format"),r=t?.formatter||t,a=(0,m.mf)(r)?r:qt.Z.format;return null===i?"":a(i,e)},_getFormatPattern:function(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat:function(){var i=this.option("format"),e=(0,m.mf)(i?.parser),t=(0,m.HD)(i)&&(i.indexOf("0")>=0||i.indexOf("#")>=0);this._currentFormat=e||t||"exponential"===i||"exponential"===i?.type?i:(0,DP.y)(n=>{var s=this._format(n,i);return qt.Z.convertDigits(s,!0)})},_getFormatForSign:function(i){var e=this._getFormatPattern();if((0,m.HD)(e)){var t=e.split(";"),r=qt.Z.getSign(i,e);return t[1]=t[1]||"-"+t[0],r<0?t[1]:t[0]}return qt.Z.getSign(i)<0?"-":""},_removeStubs:function(i,e){var t=this._getFormatForSign(i),r=qt.Z.getThousandsSeparator(),a=this._getStubs(t),n=i;if(a.length){var s=a[0],o=new RegExp("("+(0,J.hr)(a[1]||"")+")$","g"),l=new RegExp("[-"+(0,J.hr)(e?"":r)+"]","g");n=n.replace(s,"").replace(o,"").replace(l,"")}return n},_getStubs:function(i){var e=/[^']([#0.,]+)/g.exec(i),t=e&&e[0].trim();return i.split(t).map(function(r){return r.replace(/'/g,"")})},_truncateToPrecision:function(i,e){if((0,m.$K)(i)){var t=i.toString(),r=t.indexOf(".");if(t&&r>-1){var a=parseFloat(t.substr(0,r+e+1));return isNaN(a)?i:a}}return i},_tryParse:function(i,e,t){var r=e.start!==e.end,a=r&&0===e.start&&e.end===i.length,n=qt.Z.getDecimalSeparator();if(a&&t===n)return 0;var s=this._replaceSelectedText(i,e,t),o=this._getFormatPattern(),l=this._getParsedValue(s,o),d=!o.parser&&this._getPrecisionLimits(s).max,c=t===n&&0===d,f=!r&&!(l!==this._parsedValue)&&"-"!==t&&this._isStub(t);return c||f||(""===this._removeStubs(s)&&(l=Math.abs(0*this._parsedValue)),isNaN(l))?void 0:(l=d?this._truncateToPrecision(null===l?this._parsedValue:l,d):l,!o.parser&&this._isPercentFormat()?function(i,e){return i&&(0,Li.zB)(i/100,e)}(l,d):l)},_getParsedValue:function(i,e){var t=qt.Z.getSign(i,e?.formatter||e),r=this._removeStubs(i,!0),a=this._parse(r,e),n=a<0?-1:1;return(0,m.kE)(a)&&t!==n?t*a:a},_isValueIncomplete:function(i){if(!this._useMaskBehavior())return this.callBase(i);var e=this._caret(),t=qt.Z.getDecimalSeparator(),r=this._getTextSeparatorIndex(i),a=r>=0&&r<e.start,n=this._removeStubs(i,!0).split(t);if(!a||2!==n.length)return!1;var s=n[1].length,l=!!this._getFormatPattern().parser,d=!l&&this._getPrecisionLimits(this._getFormatPattern(),i),u=!!l||(0,Li.Z2)(s,d.min,d.max),c="0"===n[1].charAt(s-1);return u&&(c||!s)},_isValueInRange:function(i){var e=(0,J.IS)(this.option("min"),-1/0),t=(0,J.IS)(this.option("max"),1/0);return(0,Li.Z2)(i,e,t)},_setInputText:function(i){var e=qt.Z.convertDigits(i,!0),t=function(i,e,t,r){t=_s(t,0);var a=qt.Z.getDecimalSeparator(),n=function IP(i){return 1===i.length&&!!i.match(/^[,.][0-9]*$/g)}(i),s=Wu(r).occurrence,o=n?0:ff(i,a,s),l=ff(e,a,s),d=_f(i,o),u=_f(e,l);if(-1!==o&&t.start>o){var p=Cb(t.start-o-1,d[1]);return An(u[1]?l+1+wb(p,u[1])+1:e.length,e,r)}var w=function(i){return i.replace(/[^0-9e]+$/,"")}(u[0]),y=Cb(d[0].length-t.start,bb(d[0])),E=wb(y,bb(w));return An(w.length-(E+1),e,r)}(this._getInputVal(),e,this._caret(),this._getFormatPattern());this._input().val(i),this._toggleEmptinessEventHandler(),this._formattedValue=i,this._focusOutOccurs||this._caret(t)},_useMaskBehavior:function(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType:function(){var i="number"===this.option("mode"),e="desktop"===at.Z.real().deviceType;this._useMaskBehavior()&&i?this._setInputType(e||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:function(i){return(0,m.HD)(i)&&1===i.length},_moveCaret:function(i){if(i){var t=An(_s(this._caret(),i),this._getInputVal(),this._getFormatPattern());this._caret(t)}},_shouldHandleKey:function(i){var e=(0,ce.EV)(i),t=(0,ce.j1)(i)||i.altKey||i.shiftKey||!this._isChar(e),r=e===Gl;return this._useMaskBehavior()&&!t&&!r},_renderInput:function(){this.callBase(),this._renderFormatter()},_renderFormatter:function(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents:function(){k.Z.off(this._input(),"."+vf)},_isInputFromPaste:function(i){var e=i.originalEvent&&i.originalEvent.inputType;return(0,m.$K)(e)?"insertFromPaste"===e:this._isValuePasted},_attachFormatterEvents:function(){var i=this._input();k.Z.on(i,(0,ce.V4)("input",vf),function(e){this._formatValue(e),this._isValuePasted=!1}.bind(this)),k.Z.on(i,(0,ce.V4)("dxclick",vf),function(){this._caretTimeout||(this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0,this._caret(An(this._caret(),this._getInputVal(),this._getFormatPattern()))}.bind(this),0))}.bind(this)),k.Z.on(i,Xs,function(){this.clearCaretTimeout()}.bind(this))},clearCaretTimeout:function(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue:function(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter:function(i){var e=this._getInputVal().slice(i);return e&&!this._isStub(e,!0)},_isStub:function(i,e){var t=(0,J.hr)(qt.Z.getDecimalSeparator());return new RegExp("^[^0-9"+t+"]+$","g").test(i)&&(e||this._isChar(i))},_parseValue:function(i){return this._useMaskBehavior()?this._parsedValue:this.callBase(i)},_getPrecisionLimits:function(i){var e=this._getFormatForSign(i),t=Wu(e).index,r=(_f(e,t)[1]||"").replace(/[^#0]/g,"");return{min:r.replace(/^(0*)#*/,"$1").length,max:r.length}},_revertSign:function(i){if(this._useMaskBehavior()){var e=this._caret();if(e.start!==e.end){if((0,ce.EV)(i)===Gl)return void this._applyRevertedSign(i,e,!0);this._caret(An(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(i,e)}},_applyRevertedSign:function(i,e,t){var r=-1*(0,J.IS)(this._parsedValue,null);if((this._isValueInRange(r)||0===r)&&(this._parsedValue=r,t)){var a=this._getFormatPattern(),n=this._getInputVal();this._setTextByParsedValue(),i.preventDefault();var s=this._getInputVal(),o=function(i,e,t){var r=$u(i,t);return $u(e,t).start-r.start}(n,s,a),l=An(e=_s(e,o),s,a);this._caret(l)}},_removeMinusFromText:function(i,e){return this._lastKeyName===Gl&&"-"===i.charAt(e.start-1)?this._replaceSelectedText(i,{start:e.start-1,end:e.start},""):i},_setTextByParsedValue:function(){var i=this._getFormatPattern(),e=this._parseValue(),t=this._format(e,i)||"";this._setInputText(t)},_formatValue:function(i){var e=this._getInputVal(),t=this._caret(),r=this._removeMinusFromText(e,t),a=r!==e;if(e=r,!this._isInputFromPaste(i)&&this._isValueIncomplete(r))return this._formattedValue=e,void(a&&this._setTextByParsedValue());if(qt.Z.convertDigits(this._formattedValue,!0)!==e){var s=this._tryParse(e,t,"");(0,m.$K)(s)&&(this._parsedValue=s)}this._setTextByParsedValue()},_renderDisplayText:function(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue:function(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue:function(){var i=this._getInputVal();this._parsedValue=this._tryParse(i,this._caret())},_adjustParsedValue:function(){if(this._useMaskBehavior()){var e=this._removeStubs(this._getInputVal())?this._parseValue():null;if(!(0,m.kE)(e))return void(this._parsedValue=e);this._parsedValue=(0,Li.n$)(e,this.option("min"),this.option("max"))}},_valueChangeEventHandler:function(i){if(!this._useMaskBehavior())return this.callBase(i);var e=this._caret();this._saveValueChangeEvent(i),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),e&&this._caret(e)},_optionChanged:function(i){switch(i.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(i);break;default:this.callBase(i)}},_clearCache:function(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean:function(){this._clearCache(),this.callBase()}});const Db=UP;(0,It.Z)("dxNumberBox",Db);const mf=Db;var Ob="dx-radiobutton-icon",Rb=Qa.Z.inherit({_supportedKeys:function(){return(0,N.l)(this.callBase(),{space:function(i){i.preventDefault(),this._clickAction({event:i})}})},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:function(){return!0},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this.$element().addClass("dx-radiobutton")},_initMarkup:function(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon:function(){this._$icon=(0,b.Z)("<div>").addClass(Ob),(0,b.Z)("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState:function(i){this.$element().toggleClass("dx-radiobutton-checked",i).find("."+Ob).toggleClass("dx-radiobutton-icon-checked",i),this.setAria("checked",i)},_renderClick:function(){var i=(0,ce.V4)(Pt.u,this.NAME);this._clickAction=this._createAction(function(e){this._clickHandler(e.event)}.bind(this)),k.Z.off(this.$element(),i),k.Z.on(this.$element(),i,function(e){this._clickAction({event:e})}.bind(this))},_clickHandler:function(i){this._saveValueChangeEvent(i),this.option("value",!0)},_optionChanged:function(i){"value"===i.name?(this._renderCheckedState(i.value),this.callBase(i)):this.callBase(i)}});(0,It.Z)("dxRadioButton",Rb);const JP=Rb;var Lb={},Cf="dxListEditDecorator",eB=(0,ce.V4)(Iu,Cf),tB=(0,ce.V4)(Tu,Cf),iB=(0,ce.V4)(Pl,Cf),rB=dr.Z.inherit({ctor:function(i){this._list=i,this._init()},_init:J.ZT,_shouldHandleSwipe:!1,_attachSwipeEvent:function(i){var e={itemSizeFunc:function(){return this._clearSwipeCache&&(this._itemWidthCache=(0,oe.dz)(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}.bind(this)};k.Z.on(i.$itemElement,eB,e,this._itemSwipeStartHandler.bind(this)),k.Z.on(i.$itemElement,tB,this._itemSwipeUpdateHandler.bind(this)),k.Z.on(i.$itemElement,iB,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler:function(i){var e=(0,b.Z)(i.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")?i.cancel=!0:(clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(e,i))},_itemSwipeUpdateHandler:function(i){var e=(0,b.Z)(i.currentTarget);this._swipeUpdateHandler(e,i)},_itemSwipeEndHandler:function(i){var e=(0,b.Z)(i.currentTarget);this._swipeEndHandler(e,i),this._clearSwipeCache=!0},beforeBag:J.ZT,afterBag:J.ZT,_commonOptions:function(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement:function(i){this._shouldHandleSwipe&&(this._attachSwipeEvent(i),this._clearSwipeCache=!0)},afterRender:J.ZT,handleClick:J.ZT,handleKeyboardEvents:J.ZT,handleEnterPressing:J.ZT,handleContextMenu:J.ZT,_swipeStartHandler:J.ZT,_swipeUpdateHandler:J.ZT,_swipeEndHandler:J.ZT,visibilityChange:J.ZT,getExcludedSelectors:J.ZT,dispose:J.ZT});const aB=rB;var Pb="dx-list-select-decorator-enabled",Bb=(0,ce.V4)(Pt.u,"dxListEditDecorator");!function QP(i,e,t){var r=Lb,a={};a[i]=r[i]?r[i]:{},a[i][e]=t,(0,N.l)(r,a)}("selection","default",aB.inherit({_init:function(){this.callBase.apply(this,arguments);var i=this._list.option("selectionMode");this._singleStrategy="single"===i,this._containerClass=this._singleStrategy?"dx-list-select-radiobutton-container":"dx-list-select-checkbox-container",this._controlClass=this._singleStrategy?"dx-list-select-radiobutton":"dx-list-select-checkbox",this._controlWidget=this._singleStrategy?JP:Zl,this._list.$element().addClass(Pb)},beforeBag:function(i){var e=i.$itemElement,t=i.$container.addClass(this._containerClass),r=(0,b.Z)("<div>").addClass(this._controlClass).appendTo(t);new this._controlWidget(r,(0,N.l)(this._commonOptions(),{value:this._isSelected(e),elementAttr:{"aria-label":"Check State"},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:function(a){a.event&&this._list._saveSelectionChangeEvent(a.event),this._processCheckedState(e,a.value),a.event&&a.event.stopPropagation()}.bind(this)}))},modifyElement:function(i){this.callBase.apply(this,arguments);var e=i.$itemElement,t=this._controlWidget.getInstance(e.find("."+this._controlClass));k.Z.on(e,"stateChanged",function(r,a){t.option("value",a)}.bind(this))},_updateSelectAllState:function(){this._$selectAll&&this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender:function(){"all"===this._list.option("selectionMode")&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents:function(i,e){var t=!e,r=this._list,a=this._$selectAll,n=r._getLastItemIndex();return!(!a||!(e&&0===i||t&&i===n)||(r.option("focusedElement",a),r.scrollToItem(r.option("focusedElement")),0))},handleEnterPressing:function(i){if(this._$selectAll&&this._$selectAll.hasClass("dx-state-focused"))return i.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(i),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll:function(){var i=this._$selectAll=(0,b.Z)("<div>").addClass("dx-list-select-all"),e=this._list,t=e._supportedKeys().downArrow.bind(e);this._selectAllCheckBox=e._createComponent((0,b.Z)("<div>").addClass("dx-list-select-all-checkbox").appendTo(i),Zl,{elementAttr:{"aria-label":"Select All"},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",t),(0,b.Z)("<div>").addClass("dx-list-select-all-label").text(this._list.option("selectAllText")).appendTo(i),this._list.itemsContainer().prepend(i),this._updateSelectAllState(),this._attachSelectAllHandler()},_attachSelectAllHandler:function(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),k.Z.off(this._$selectAll,Bb),k.Z.on(this._$selectAll,Bb,this._selectAllClickHandler.bind(this))},_selectAllHandler:function(i){i.event&&i.event.stopPropagation();var e=this._selectAllCheckBox.option("value");i.event&&this._list._saveSelectionChangeEvent(i.event),!0===e?this._selectAllItems():!1===e&&this._unselectAllItems(),this._list._createActionByOption("onSelectAllValueChanged")({value:e})},_checkSelectAllCapability:function(){var i=this._list,e=i._dataController;return!("allPages"===i.option("selectAllMode")&&i.option("grouped")&&!e.group()&&(Rt.Z.log("W1010"),1))},_selectAllItems:function(){this._checkSelectAllCapability()&&this._list._selection.selectAll("page"===this._list.option("selectAllMode"))},_unselectAllItems:function(){this._checkSelectAllCapability()&&this._list._selection.deselectAll("page"===this._list.option("selectAllMode"))},_selectAllClickHandler:function(i){this._list._saveSelectionChangeEvent(i),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected:function(i){return this._list.isItemSelected(i)},_processCheckedState:function(i,e){e?this._list.selectItem(i):this._list.unselectItem(i)},dispose:function(){this._disposeSelectAll(),this._list.$element().removeClass(Pb),this.callBase.apply(this,arguments)},_disposeSelectAll:function(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));var bf=be(7694),Gu=be(7767);class vB extends Sb.Z{constructor(e,t,r){super(e,t,r),this.currentTemplate=null}_attachEvents(e){var{editor:t}=this;e.option("onClick",r=>{var a;(null!==(a=t._shouldCallOpenHandler)&&void 0!==a&&a.call(t)||!t.option("openOnFieldClick"))&&t._openHandler(r)}),k.Z.on(e.$element(),"mousedown",r=>{t.$element().is(".dx-state-focused")&&r.preventDefault()})}_create(){var{editor:e}=this,t=(0,b.Z)("<div>"),r=this._getOptions();this._addToContainer(t);var a=e._createComponent(t,pr.Z,(0,N.l)({},r,{elementAttr:{"aria-label":ae.Z.format("dxDropDownEditor-selectLabel")}}));return this._legacyRender(e.$element(),t,r.visible),{$element:t,instance:a}}_getOptions(){var{editor:e}=this,t=this._isVisible(),a={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:e.option("readOnly"),visible:t};return this._addTemplate(a),a}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,t,r){e.toggleClass("dx-dropdowneditor-button-visible",r),t&&t.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){var{editor:t,instance:r}=this,a=t.$element(),n=this._getOptions();r?.option(n),this._legacyRender(a,r?.$element(),n.visible)}}}var wf=be(5270),Uu=function(i){if((0,We.Ym)())return(0,oe.Y_)(i)},Sf=function(i){return null===i&&(i=void 0),"function"==typeof i&&(i=i()),i},Vb="dx-dropdowneditor-input-wrapper",ju="dx-dropdowneditor-overlay",Nb="ios"===at.Z.current().platform,Fb=Su.Z.inherit({_supportedKeys:function(){return(0,N.l)({},this.callBase(),{tab:function(i){if(this.option("opened")){if(!this._popup.getFocusableElements().length)return void this.close();var e=i.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();e&&(k.Z.trigger(e,"focus"),e.select()),i.preventDefault()}},escape:function(i){return this.option("opened")&&i.preventDefault(),this.close(),!0},upArrow:function(i){return!(!(0,ce.j1)(i)&&(i.preventDefault(),i.stopPropagation(),i.altKey)&&(this.close(),1))},downArrow:function(i){return!(!(0,ce.j1)(i)&&(i.preventDefault(),i.stopPropagation(),i.altKey)&&(this._validatedOpening(),1))},enter:function(i){return this.option("opened")&&(i.preventDefault(),this._valueChangeEventHandler(i)),!0}})},_getDefaultButtons:function(){return this.callBase().concat([{name:"dropDown",Ctor:vB}])},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:ae.Z.format("OK"),cancelButtonText:ae.Z.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:function(){return!0},_getDefaultPopupPosition:function(i){var e=(0,di.q)(i);return{offset:{h:0,v:-1},my:e+" top",at:e+" bottom",collision:"flip flip"}},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(i){return"generic"===i.platform},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper:function(){return this.$element().find("."+Vb).first()},_init:function(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition:function(i){var{my:e,at:t}=this._getDefaultPopupPosition(i),r=this.option("popupPosition");this.option("popupPosition",(0,N.l)({},r,{my:e,at:t}))},_initVisibilityActions:function(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction:function(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup:function(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role","combobox")},_render:function(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl:function(){this.option("deferRendering")||this._createPopup()},_renderInput:function(){this.callBase(),this._wrapInput(),this._setDefaultAria()},_wrapInput:function(){this._$container=this.$element().wrapInner((0,b.Z)("<div>").addClass(Vb)).children().eq(0)},_setDefaultAria:function(){this.setAria({haspopup:"true",autocomplete:"list"})},_readOnlyPropValue:function(){return!this._isEditable()||this.callBase()},_cleanFocusState:function(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate:function(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask:function(){this.option("fieldTemplate")||this.callBase()},_renderField:function(){var i=this._getFieldTemplate();i&&this._renderTemplatedField(i,this._fieldRenderData())},_renderPlaceholder:function(){this._getFieldTemplate()||this.callBase()},_renderValue:function(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_renderTemplatedField:function(i,e){var t=(0,Gu.si)(this._input()),r=this._$container;this._detachKeyboardEvents(),this._refreshButtonsContainer(),this._detachWrapperContent(),this._detachFocusEvents(),r.empty();var a=(0,b.Z)("<div>").addClass("dx-dropdowneditor-field-template-wrapper").appendTo(r);i.render({model:e,container:(0,rt.u)(a),onRendered:()=>{if(this.$element().find(a).length){var s=this._input();if(!s.length)throw Rt.Z.Error("E1010");this._integrateInput(),t&&k.Z.trigger(s,"focus")}}}),this._attachWrapperContent(r)},_detachWrapperContent(){var i,e,t;this.option("useHiddenSubmitElement")&&(null===(i=this._$submitElement)||void 0===i||i.detach());var a=null===(e=this._$beforeButtonsContainer)||void 0===e?void 0:e[0].parentNode,n=null===(t=this._$afterButtonsContainer)||void 0===t?void 0:t[0].parentNode;a?.removeChild(this._$beforeButtonsContainer[0]),n?.removeChild(this._$afterButtonsContainer[0])},_attachWrapperContent(i){var e,t=this.option("useHiddenSubmitElement");i.prepend(this._$beforeButtonsContainer),t&&(null===(e=this._$submitElement)||void 0===e||e.appendTo(i)),i.append(this._$afterButtonsContainer)},_refreshButtonsContainer(){this._$buttonsContainer=this.$element().children().eq(0)},_integrateInput:function(){this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent()},_refreshEmptinessEvent:function(){k.Z.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData:function(){return this.option("value")},_initTemplates:function(){this._templateManager.addDefaultTemplates({dropDownButton:new wf.k(function(i){var e=(0,b.Z)("<div>").addClass("dx-dropdowneditor-icon");(0,b.Z)(i.container).append(e)})}),this.callBase()},_renderOpenHandler:function(){var i=this._inputWrapper(),e=(0,ce.V4)(Pt.u,this.NAME),t=this.option("openOnFieldClick");k.Z.off(i,e),k.Z.on(i,e,this._getInputClickHandler(t)),this.$element().toggleClass("dx-dropdowneditor-field-clickable",t),t&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler:function(){Nb&&(this._detachFocusOutEvents(),k.Z.on(this._inputWrapper(),(0,ce.V4)("focusout",this.NAME),i=>{var e=i.relatedTarget;e&&this.option("opened")&&this._isTargetOutOfComponent(e)&&this.close()}))},_isTargetOutOfComponent:function(i){var e=this.content?(0,b.Z)(this.content()).closest(".".concat(ju)):this._$popup;return 0===(0,b.Z)(i).closest(".".concat(ju),e).length},_detachFocusOutEvents:function(){Nb&&k.Z.off(this._inputWrapper(),(0,ce.V4)("focusout",this.NAME))},_getInputClickHandler:function(i){return i?e=>{this._executeOpenAction(e)}:e=>{this._focusInput()}},_openHandler:function(){this._toggleOpenState()},_executeOpenAction:function(i){this._openOnFieldClickAction({event:i})},_keyboardEventBindingTarget:function(){return this._input()},_focusInput:function(){return!this.option("disabled")&&(this.option("focusStateEnabled")&&!(0,Gu.si)(this._input())&&(this._resetCaretPosition(),k.Z.trigger(this._input(),"focus")),!0)},_resetCaretPosition:function(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._input().get(0);if(e){var{value:t}=e,r=(0,m.$K)(t)&&(i||this._isEditable())?t.length:0;this._caret({start:r,end:r},!0)}},_isEditable:function(){return this.option("acceptCustomValue")},_toggleOpenState:function(i){this._focusInput()&&(this.option("readOnly")||(i=arguments.length?i:!this.option("opened"),this.option("opened",i)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState:function(){var i=this.option("opened");i&&this._createPopup(),this.$element().toggleClass("dx-dropdowneditor-active",i),this._setPopupOption("visible",i);var e={expanded:i,controls:this._getControlsAria()};this.setAria(e),this.setAria("owns",i?this._popupContentId:void 0,this.$element())},_createPopup:function(){this._$popup||(this._$popup=(0,b.Z)("<div>").addClass(ju).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent())},_renderPopupContent:J.ZT,_renderPopup:function(){var i=(0,N.l)(this._popupConfig(),this._options.cache("dropDownOptions"));delete i.closeOnOutsideClick,i.elementAttr&&!Object.keys(i.elementAttr).length&&delete i.elementAttr,this._popup=this._createComponent(this._$popup,Ja.Z,i),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_attachPopupKeyHandler(){k.Z.on(this._popup.$overlayContent(),(0,ce.V4)("keydown",this.NAME),i=>this._popupKeyHandler(i))},_popupKeyHandler(i){switch((0,ce.EV)(i)){case"tab":this._popupTabHandler(i);break;case"escape":this._popupEscHandler(i)}},_popupTabHandler(i){var e=(0,b.Z)(i.target),t=i.shiftKey&&e.is(this._getFirstPopupElement());(!i.shiftKey&&e.is(this._getLastPopupElement())||t)&&(k.Z.trigger(this.field(),"focus"),i.preventDefault())},_popupEscHandler(){k.Z.trigger(this._input(),"focus"),this.close()},_setPopupContentId(i){this._popupContentId="dx-"+new Ri.Z,this.setAria("id",this._popupContentId,i)},_contentReadyHandler:J.ZT,_popupConfig:function(){return{onInitialized:this._getPopupInitializedHandler(),position:(0,N.l)(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>Uu(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:i=>this._closeOutsideDropDownHandler(i),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:ju,_ignorePreventScrollEventsDeprecation:!0}},_popupInitializedHandler:J.ZT,_getPopupInitializedHandler:function(){var i=this.option("onPopupInitialized");return e=>{this._popupInitializedHandler(e),i&&this._popupInitializedAction({popup:e.component})}},_dimensionChanged:function(){!(0,We.Ym)()||this.$element().is(":visible")?this._updatePopupWidth():this.close()},_updatePopupWidth:function(){void 0===Sf(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>Uu(this.$element()))},_popupPositionedHandler:function(i){var e,t,{labelMode:r,stylingMode:a}=this.option();if(this._popup){var n=this._popup.$overlayContent(),s=null===(e=i.position)||void 0===e||null===(t=e.v)||void 0===t?void 0:t.flip,o="hidden"!==r&&"outside"!==r&&"outlined"===a;if(i.position&&n.toggleClass("dx-dropdowneditor-overlay-flipped",s),s&&o&&this._label.isVisible()){var l=this._label.$element();(0,oi.pB)(n,{top:(0,oi.jt)(n).top-parseInt(l.css("fontSize"))})}}},_popupShowingHandler:J.ZT,_popupHidingHandler:function(){this.option("opened",!1)},_popupShownHandler:function(){var i;this._openAction(),null===(i=this._validationMessage)||void 0===i||i.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler:function(){var i;this._closeAction(),null===(i=this._validationMessage)||void 0===i||i.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide:function(){var i=this.option("validationMessagePosition");if("auto"!==i)return i;var e="bottom";if(this._popup&&this._popup.option("visible")){var{top:t}=In.Z.setup(this.$element()),{top:r}=In.Z.setup(this._popup.$content());e=t+this.option("popupPosition").offset.v>r?"bottom":"top"}return e},_closeOutsideDropDownHandler:function(i){var{target:e}=i,t=(0,b.Z)(e),r=this.getButton("dropDown"),a=r&&r.$element(),n=!!t.closest(this.$element()).length,s=!!t.closest(a).length;return!n&&!s},_clean:function(){delete this._openOnFieldClickAction,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption:function(i,e){this._setWidgetOption("_popup",arguments)},_validatedOpening:function(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems:function(){return"useButtons"===this.option("applyValueMode")?this._popupToolbarItemsConfig():[]},_getFirstPopupElement:function(){return(0,b.Z)(this._popup.getFocusableElements()).first()},_getLastPopupElement:function(){return(0,b.Z)(this._popup.getFocusableElements()).last()},_popupToolbarItemsConfig:function(){var i=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(i)},_applyButtonsLocation:function(i){var e=this.option("buttonsLocation"),t=i;if("default"!==e){var r=(0,J.Um)(e);(0,j.S6)(t,function(a,n){(0,N.l)(n,{toolbar:r[0],location:r[1]})})}return t},_applyButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged:function(i){var e=hr.default.getOptionsFromContainer(i);this._setPopupOption(e);var t=Object.keys(e);(-1!==t.indexOf("width")||-1!==t.indexOf("height"))&&this._dimensionChanged()},_renderSubmitElement:function(){this.option("useHiddenSubmitElement")&&(this._$submitElement=(0,b.Z)("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue:function(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement:function(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose:function(){this._detachFocusOutEvents(),this.callBase()},_optionChanged:function(i){var e;switch(i.name){case"width":case"height":this.callBase(i),null===(e=this._popup)||void 0===e||e.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":(0,m.$K)(i.value)?this._renderField():this._invalidate();break;case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(i),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":(0,We.Ym)()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(i.value),this.callBase(i);break;default:this.callBase(i)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)},field:function(){return(0,rt.u)(this._input())},content:function(){return this._popup?this._popup.content():null}});(0,It.Z)("dxDropDownEditor",Fb);const kb=Fb;var Mb="dx-list-group",Hb=function(i){return(i.group<<20)+i.item},vs=function(i){return{group:i>>20,item:1048575&i}},EB=VC.Z.inherit({_groupElements:function(){return this._collectionWidget._itemContainer().find("."+Mb)},_groupItemElements:function(i){return i.find(".dx-list-item")},getIndexByItemData:function(i){var e=this._collectionWidget.option("items"),t=!1;return!!i&&(i.items&&i.items.length&&(i=i.items[0]),(0,j.S6)(e,function(r,a){if(!a.items||((0,j.S6)(a.items,function(n,s){return s!==i||(t={group:r,item:n},!1)}),t))return!1}),t)},getItemDataByIndex:function(i){var e=this._collectionWidget.option("items");return(0,m.kE)(i)?this.itemsGetter()[i]:i&&e[i.group]&&e[i.group].items[i.item]||null},itemsGetter:function(){for(var i=[],e=this._collectionWidget.option("items"),t=0;t<e.length;t++)e[t]&&e[t].items?i=i.concat(e[t].items):i.push(e[t]);return i},deleteItemAtIndex:function(i){var e=vs(i);this._collectionWidget.option("items")[e.group].items.splice(e.item,1)},getKeysByItems:function(i){var t,e=[];for(t=0;t<i.length;t++)i[t]&&i[t].items?e=e.concat(i[t].items):e.push(i[t]);var r=[];for(t=0;t<e.length;t++)r.push(this._collectionWidget.keyOf(e[t]));return r},getIndexByKey:function(i,e){var t=e||this._collectionWidget.option("items"),r=-1,a=this;return(0,j.S6)(t,function(n,s){if(s.items&&((0,j.S6)(s.items,function(o,l){var d=a._collectionWidget.keyOf(l);if(a._equalKeys(d,i))return r={group:n,item:o},!1}),-1!==r))return!1}),r},_getGroups:function(i){var t=this._collectionWidget._dataController.group();return t?no.Z.queryByOptions((0,Ta.Z)(i),{group:t}).toArray():this._collectionWidget.option("items")},getItemsByKeys:function(i,e){var t=[],r=this._getGroups(e),a={},n=s=>{var o=this.getIndexByKey(s,r),l=o&&r[o.group];if(l)return{groupKey:l.key,item:l.items[o.item]}};return(0,j.S6)(i,function(s,o){var l=n(o);if(l){var d=l.groupKey,u=l.item,c=a[d];c||(a[d]=c={key:d,items:[]},t.push(c)),c.items.push(u)}}),t},moveItemAtIndexToIndex:function(i,e){var t=this._collectionWidget.option("items"),r=vs(i),a=vs(e),n=t[r.group].items,s=t[a.group].items,o=n[r.item];n.splice(r.item,1),s.splice(a.item,0,o)},_isItemIndex:function(i){return i&&(0,m.kE)(i.group)&&(0,m.kE)(i.item)},_getNormalizedItemIndex:function(i){var e=(0,b.Z)(i),t=e.closest("."+Mb);return t.length?Hb({group:this._groupElements().index(t),item:this._groupItemElements(t).index(e)}):-1},_normalizeItemIndex:function(i){return Hb(i)},_denormalizeItemIndex:function(i){return vs(i)},_getItemByNormalizedIndex:function(i){var e=vs(i),t=this._groupElements().eq(e.group);return this._groupItemElements(t).eq(e.item)},_itemsFromSameParent:function(i,e){return vs(i).group===vs(e).group}});const IB=EB;var Zb=[],qu=function(i,e,t){Zb.push({enabled:i,decoratorType:e,decoratorSubType:t})};qu(function(){return this.option("menuItems").length},function(){return"menu"},function(){return this.option("menuMode")}),qu(function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")},function(){var i=this.option("itemDeleteMode");return"toggle"===i||"slideButton"===i||"swipe"===i||"static"===i?"delete":"menu"},function(){var i=this.option("itemDeleteMode");return"slideItem"===i&&(i="slide"),i}),qu(function(){return"none"!==this.option("selectionMode")&&this.option("showSelectionControls")},function(){return"selection"},function(){return"default"}),qu(function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")},function(){return"reorder"},function(){return"default"});var BB=dr.Z.inherit({ctor:function(i){this._list=i,this._fetchRequiredDecorators()},dispose:function(){this._decorators&&this._decorators.length&&(0,j.S6)(this._decorators,function(i,e){e.dispose()})},_fetchRequiredDecorators:function(){this._decorators=[],(0,j.S6)(Zb,function(i,e){if(e.enabled.call(this._list)){var r=e.decoratorType.call(this._list),a=e.decoratorSubType.call(this._list),n=this._createDecorator(r,a);this._decorators.push(n)}}.bind(this))},_createDecorator:function(i,e){return new(this._findDecorator(i,e))(this._list)},_findDecorator:function(i,e){var t,r=null===(t=Lb[i])||void 0===t?void 0:t[e];if(!r)throw Rt.Z.Error("E1012",i,e);return r},modifyItemElement:function(i){var e=(0,b.Z)(i.itemElement),t={$itemElement:e};this._prependBeforeBags(e,t),this._appendAfterBags(e,t),this._applyDecorators("modifyElement",t)},afterItemsRendered:function(){this._applyDecorators("afterRender")},_prependBeforeBags:function(i,e){var t=this._collectDecoratorsMarkup("beforeBag",e,"dx-list-item-before-bag");i.prepend(t)},_appendAfterBags:function(i,e){var t=this._collectDecoratorsMarkup("afterBag",e,"dx-list-item-after-bag");i.append(t)},_collectDecoratorsMarkup:function(i,e,t){var r=(0,b.Z)("<div>");return(0,j.S6)(this._decorators,function(){var a=(0,b.Z)("<div>").addClass(t);this[i]((0,N.l)({$container:a},e)),a.children().length&&r.append(a)}),r.children()},_applyDecorators:function(i,e){(0,j.S6)(this._decorators,function(){this[i](e)})},_handlerExists:function(i){if(!this._decorators)return!1;for(var e=this._decorators,t=e.length,r=0;r<t;r++)if(e[r][i]!==J.ZT)return!0;return!1},_eventHandler:function(i,e,t){if(!this._decorators)return!1;for(var r=!1,a=this._decorators,n=a.length,s=0;s<n&&!(r=a[s][i](e,t));s++);return r},handleClick:function(i,e){return this._eventHandler("handleClick",i,e)},handleKeyboardEvents:function(i,e){return this._eventHandler("handleKeyboardEvents",i,e)},handleEnterPressing:function(i){return this._eventHandler("handleEnterPressing",i)},contextMenuHandlerExists:function(){return this._handlerExists("handleContextMenu")},handleContextMenu:function(i,e){return this._eventHandler("handleContextMenu",i,e)},getExcludedItemSelectors:function(){var i=[];return this._applyDecorators("getExcludedSelectors",i),i.join(",")}});const VB=BB;var kB=jp.inherit({_supportedKeys(){var i=this,e=this.callBase(),t=(r,a)=>{var n=this._editStrategy,s=this.option("focusedElement"),o=n.getNormalizedIndex(s);if(o!==this._getLastItemIndex()||!this._dataController.isLoading())if(r.shiftKey&&i.option("itemDragging.allowReordering")){var u=n.getItemElement(o+(a?-1:1));this.reorderItem(s,u),this.scrollToItem(s),r.preventDefault()}else this._editProvider.handleKeyboardEvents(o,a)||(a?e.upArrow(r):e.downArrow(r))};return(0,N.l)({},e,{del:r=>{i.option("allowItemDeleting")&&(r.preventDefault(),i.deleteItem(i.option("focusedElement")))},upArrow:r=>t(r,!0),downArrow:r=>t(r),enter:function(r){this._editProvider.handleEnterPressing(r)||e.enter.apply(this,arguments)},space:function(r){this._editProvider.handleEnterPressing(r)||e.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();var i=this._editProvider.getExcludedItemSelectors();i.length&&(this._itemElementsCache=this._itemElementsCache.not(i))},_isItemStrictEquals:function(i,e){var t=i&&i.__dx_key__;return!(t&&!this.key()&&this._selection.isItemSelected(t))&&this.callBase(i,e)},_getDefaultOptions(){return(0,N.l)(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:ae.Z.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:i=>"ios"===i.platform,options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return"page"===this.option("selectAllMode")},_initEditProvider(){this._editProvider=new VB(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new IB(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>"dx-list-item-selected",_itemResponseWaitClass:()=>"dx-list-item-response-wait",_itemClickHandler(i){var e=(0,b.Z)(i.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(e,i)||(this._saveSelectionChangeEvent(i),this.callBase(...arguments))},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(i){var e=(0,b.Z)(i.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){if((0,ce.z6)(i)&&this._editProvider.handleContextMenu(e,i))return void(i.handledByEditProvider=!0);this.callBase(...arguments)}},_getItemContainer:function(i){if(this.option("grouped")){var e,t=null===(e=this._editStrategy.getIndexByItemData(i))||void 0===e?void 0:e.group;return this._getGroupContainerByIndex(t)}return this.callBase(i)},_itemContextMenuHandler(i){var e=(0,b.Z)(i.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){if(!i.handledByEditProvider&&this._editProvider.handleContextMenu(e,i))return void i.preventDefault();this.callBase(...arguments)}},_postprocessRenderItem(i){this.callBase(...arguments),this._editProvider.modifyItemElement(i)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(i){var e=this._editStrategy.getItemElement(i);this.option("focusedElement",e),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(i){switch(i.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(i);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(i)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(i){return this._itemElements().index(i)},getItemElementByFlatIndex(i){var e=this._itemElements();return i<0||i>=e.length?(0,b.Z)():e.eq(i)},getItemByIndex(i){return this._editStrategy.getItemDataByIndex(i)},deleteItem(i){var e=this._editStrategy,t=e.getNormalizedIndex(i),r=this.option("focusedElement"),a=r?e.getNormalizedIndex(r):t,s=a===this._getLastItemIndex()||t<a?a-1:a;return this.callBase(i).done(function(){return this.focusListItem(s)})}}),MB=kB.inherit(us).inherit({_addWidgetPrefix:function(i){return"dx-list-"+i},_getCombinedFilter:function(){var i=this._dataController,e={filter:i.filter()};return i.addSearchFilter(e),e.filter},_initDataSource:function(){var i=this.option("searchValue"),e=this.option("searchExpr"),t=this.option("searchMode");this.callBase();var r=this._dataController;i&&i.length&&r.searchValue(i),t.length&&r.searchOperation(us.getOperationBySearchMode(t)),e&&r.searchExpr(e)}});const zb=MB;(0,It.Z)("dxList",zb);const Ul=zb;var Wb=be(6151),HB=(0,N.l)({},Wb.Z,{_dataExpressionDefaultOptions:function(){return{items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}},_initDataExpressions:function(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource:function(){this.option("dataSource")||(this._dataSource=new xn.o({store:new _u.Z(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter:function(){this._displayGetter=(0,Dt.vb)(this._displayGetterExpr())},_displayGetterExpr:function(){return this.option("displayExpr")},_compileValueGetter:function(){this._valueGetter=(0,Dt.vb)(this._valueGetterExpr())},_valueGetterExpr:function(){return this.option("valueExpr")||"this"},_loadValue:function(i){var e=new Y.BH;return i=this._unwrappedValue(i),(0,m.$K)(i)?(this._loadSingle(this._valueGetterExpr(),i).done(function(t){this._isValueEquals(this._valueGetter(t),i)?e.resolve(t):e.reject()}.bind(this)).fail(function(){e.reject()}),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading:function(){var i;null===(i=this._loadValueDeferred)||void 0===i||i.reject({shouldSkipCallback:!0})},_getCurrentValue:function(){return this.option("value")},_unwrappedValue:function(i){var e;return(i=null!==(e=i)&&void 0!==e?e:this._getCurrentValue())&&this._dataSource&&"this"===this._valueGetterExpr()&&(i=this._getItemKey(i)),Ur.default.unwrap(i)},_getItemKey:function(i){var e=this._dataSource.key();if(Array.isArray(e)){for(var t={},r=0,a=e.length;r<a;r++)t[e[r]]=i[e[r]];return t}return e&&"object"==typeof i&&(i=i[e]),i},_isValueEquals:function(i,e){var t=this._dataSource&&this._dataSource.key(),r=this._compareValues(i,e);return!r&&t&&(0,m.$K)(i)&&(0,m.$K)(e)&&(r=Array.isArray(t)?this._compareByCompositeKey(i,e,t):this._compareByKey(i,e,t)),r},_compareByCompositeKey:function(i,e,t){var r=m.Kn;if(!r(i)||!r(e))return!1;for(var a=0,n=t.length;a<n;a++)if(i[t[a]]!==e[t[a]])return!1;return!0},_compareByKey:function(i,e,t){var r=Ur.default.unwrap,a=(0,J.IS)(r(i[t]),i),n=(0,J.IS)(r(e[t]),e);return this._compareValues(a,n)},_compareValues:function(i,e){return(0,Dt.Ex)(i,!0)===(0,Dt.Ex)(e,!0)},_initDynamicTemplates:J.ZT,_setCollectionWidgetItemTemplate:function(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr:function(){var i=this.option("valueExpr");return(0,m.HD)(i)&&"this"!==i||(0,m.mf)(i)?i:null},_dataExpressionOptionChanged:function(i){switch(i.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}});const $b=HB;var Kb=(0,We.Jj)(),KB=["startswith","contains","endwith","notcontains"],Gb="android"!==at.Z.real().platform,Ub=kb.inherit({_supportedKeys:function(){var i=this.callBase();return(0,N.l)({},i,{tab:function(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);var t=(0,b.Z)(this._list.option("focusedElement"));t.length&&this._setSelectedElement(t)}i.tab.apply(this,arguments)},space:J.ZT,home:J.ZT,end:J.ZT})},_allowSelectItemByTab:function(){return this.option("opened")&&"instantly"===this.option("applyValueMode")},_setSelectedElement:function(i){var e=this._valueGetter(this._list._getItemData(i));this._setValue(e)},_setValue:function(i){this.option("value",i)},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),(0,N.l)($b._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:ae.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:J.ZT,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference:function(){this.callBase(),(0,N.l)(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init:function(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange:function(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems:function(){var i=this.option().items;i&&!i.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions:function(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction:function(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction:function(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new v0.s("item")})},_isEditable:function(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget:function(i){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:function(i,e,t){return i>t?e:i<e?t:i},_items:function(){var i=this._getPlainItems(!this._list&&this._dataSource.items());return new Ta.Z(i).filter("disabled","<>",!0).toArray()},_calcNextItem:function(i){var e=this._items();return e[this._fitIntoRange(this._getSelectedIndex()+i,0,e.length-1)]},_getSelectedIndex:function(){var i=this._items(),e=this.option("selectedItem"),t=-1;return(0,j.S6)(i,function(r,a){if(this._isValueEquals(a,e))return t=r,!1}.bind(this)),t},_createPopup:function(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());var i=this._popup.$content();k.Z.off(i,"mouseup"),k.Z.on(i,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer:function(){var i=this.option("dropDownOptions.container"),e=i&&(0,b.Z)(i);if(e&&e.length&&!(0,m.FJ)(e.get(0))){var t=[].slice.call(e.parents());t.unshift(e.get(0)),(0,j.S6)(t,function(r,a){return a!==(0,b.Z)("body").get(0)&&("hidden"===Kb.getComputedStyle(a).overflowY?(this._$customBoundaryContainer=(0,b.Z)(a),!1):void 0)}.bind(this))}},_popupWrapperClass:function(){return"dx-dropdownlist-popup-wrapper"},_renderInputValue:function(){var i=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(i,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,i))},_loadInputValue:function(i,e){return this._loadItem(i).always(e)},_getItemFromPlain:function(i,e){var t,r;return e&&"object"!=typeof i&&(e.itemByValue||(e.itemByValue={},(t=this._getPlainItems()).forEach(function(a){e.itemByValue[this._valueGetter(a)]=a},this)),r=e.itemByValue[i]),r||(t=this._getPlainItems(),r=(0,J.h3)(t,function(a){return this._isValueEquals(this._valueGetter(a),i)}.bind(this))[0]),r},_loadItem:function(i,e){var t=this._getItemFromPlain(i,e);return void 0!==t?(new Y.BH).resolve(t).promise():this._loadValue(i)},_getPlainItems:function(i){var e=[];i=i||this.option("items")||this._dataSource.items()||[];for(var t=0;t<i.length;t++)i[t]&&i[t].items?e=e.concat(i[t].items):e.push(i[t]);return e},_updateActiveDescendant(i){var e,t=this.option("opened"),r=null===(e=this._list)||void 0===e?void 0:e.getFocusedItemId(),a=(0,b.Z)("#".concat(r)).length>0;this.setAria({activedescendant:t&&a&&r||null},i)},_setSelectedItem:function(i){var e=this._displayValue(i);this.option("selectedItem",(0,J.IS)(i,null)),this.option("displayValue",e)},_displayValue:function(i){return this._displayGetter(i)},_refreshSelected:function(){var i={};this._listItemElements().each(function(e,t){var r=(0,b.Z)(t),a=this._valueGetter(r.data("dxListItemData"));this._isSelectedValue(a,i)?this._list.selectItem(r):this._list.unselectItem(r)}.bind(this))},_popupShownHandler:function(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy:function(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue:function(i){return this._isValueEquals(i,this.option("value"))},_validateSearchMode:function(){var i=this.option("searchMode"),e=i.toLowerCase();if(!KB.includes(e))throw Rt.Z.Error("E1019",i)},_clearSelectedItem:function(){this.option("selectedItem",null)},_processDataSourceChanging:function(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(function(){this._isCustomValueAllowed()||this._clearSelectedItem()}.bind(this))},_isCustomValueAllowed:function(){return this.option("displayCustomValue")},clear:function(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements:function(){return this._$list?this._$list.find(".dx-list-item"):(0,b.Z)()},_popupConfig:function(){return(0,N.l)(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent:function(){this.callBase(),this._renderList()},_getKeyboardListeners(){var i=this._canListHaveFocus();return this.callBase().concat([!i&&this._list])},_renderList:function(){this._listId="dx-"+(new Ri.Z)._value;var i=(0,b.Z)("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=i,this._list=this._createComponent(i,Ul,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick:function(){var i=(0,ce.V4)("mousedown","dxDropDownList");k.Z.off(this._$list,i),k.Z.on(this._$list,i,e=>e.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState:function(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_setDefaultAria:function(){this.setAria({haspopup:"listbox",autocomplete:"list"})},_refreshList:function(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource:function(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:function(){return"desktop"===at.Z.real().deviceType},_listConfig:function(){var i={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:!!this._isDesktopDevice()&&this.option("hoverStateEnabled"),focusStateEnabled:!!this._isDesktopDevice()&&this.option("focusStateEnabled")};return this._canListHaveFocus()||(i.tabIndex=null),i},_canListHaveFocus:()=>!1,_getDataSource:function(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:function(){return{paginate:!1}},_getGroupedOption:function(){return this.option("grouped")},_dataSourceFromUrlLoadMode:function(){return"raw"},_listContentReadyHandler:function(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption:function(i,e){this._setWidgetOption("_list",arguments)},_listItemClickAction:function(i){this._listItemClickHandler(i),this._itemClickAction(i)},_listItemClickHandler:J.ZT,_setListDataSource:function(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList:function(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded:function(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter:function(){return!this._canKeepDataSource()&&this._needPassDataSourceToList()},_canKeepDataSource:function(){var i=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!i&&!this._isLastMinSearchLengthExceeded},_searchValue:function(){return this._input().val()||""},_getSearchEvent:function(){return(0,ce.V4)("input",this.NAME+"Search")},_getCompositionStartEvent:function(){return(0,ce.V4)("compositionstart",this.NAME+"CompositionStart")},_getCompositionEndEvent:function(){return(0,ce.V4)("compositionend",this.NAME+"CompositionEnd")},_getSetFocusPolicyEvent:function(){return(0,ce.V4)("input",this.NAME+"FocusPolicy")},_renderEvents:function(){this.callBase(),k.Z.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(k.Z.on(this._input(),this._getSearchEvent(),i=>{this._searchHandler(i)}),Gb&&(k.Z.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),k.Z.on(this._input(),this._getCompositionEndEvent(),i=>{this._isTextCompositionInProgress(void 0),this._searchHandler(i,this._searchValue())})))},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")},_refreshEvents:function(){k.Z.off(this._input(),this._getSearchEvent()),k.Z.off(this._input(),this._getSetFocusPolicyEvent()),Gb&&(k.Z.off(this._input(),this._getCompositionStartEvent()),k.Z.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress:function(i){if(!arguments.length)return this._isTextComposition;this._isTextComposition=i},_searchHandler:function(i,e){if(!this._isTextCompositionInProgress()){if(!this._isMinSearchLengthExceeded())return void this._searchCanceled();var t=this.option("searchTimeout");t?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(e)},t)):this._searchDataSource(e)}},_searchCanceled:function(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._searchValue();this._filterDataSource(i)},_filterDataSource:function(i){this._clearSearchTimer();var e=this._dataController;e.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),e.searchOperation(this.option("searchMode")),e.searchValue(i),e.load().done(this._dataSourceFiltered.bind(this,i))},_clearFilter:function(){var i=this._dataController;i.searchValue()&&i.searchValue(null)},_dataSourceFiltered:function(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup:function(){return this._hasItemsToShow()},_refreshPopupVisibility:function(){if(!this.option("readOnly")&&this._searchValue()){var i=this._shouldOpenPopup();i&&!this._isFocused()||(this.option("opened",i),i&&(this._updatePopupWidth(),this._updateListDimensions()))}},_dataSourceChangedHandler:function(i){0===this._dataController.pageIndex()?this.option().items=i:this.option().items=this.option().items.concat(i)},_hasItemsToShow:function(){var t=(this._dataController.items()||[]).length;return!(!this._needPassDataSourceToList()||!t)},_clearSearchTimer:function(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler:function(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged:function(){this.callBase(),this._updateListDimensions()},_needPopupRepaint:function(){var i=this._dataController,e=i.pageIndex(),t=(0,m.$K)(this._pageIndex)&&e<=this._pageIndex||i.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,t},_updateListDimensions:function(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight:function(){var i=this.$element(),e=this._$customBoundaryContainer,t=i.offset().top-(e?e.offset().top:0),r=(0,oe.zp)(Kb),a=e?Math.min((0,oe.zp)(e),r):r,n=Math.max(t,a-t-(0,oe.zp)(i));return Math.min(.5*a,n)},_clean:function(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose:function(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption:function(){this._setListOption.apply(this,arguments)},_setSubmitValue:function(){var i=this.option("value"),e=this._shouldUseDisplayValue(i)?this._displayGetter(i):i;this._getSubmitElement().val(e)},_shouldUseDisplayValue:function(i){return"this"===this.option("valueExpr")&&(0,m.Kn)(i)},_optionChanged:function(i){switch(this._dataExpressionOptionChanged(i),i.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(i.name,i.value),this.callBase(i);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(i.name);break;case"displayValue":this.option("text",i.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":i.previousValue!==i.value&&this._selectionChangedAction({selectedItem:i.value});break;default:this.callBase(i)}}}).include($b,l0);(0,It.Z)("dxDropDownList",Ub);var jb="dx-selectbox-popup-wrapper",qb=Ub.inherit({_supportedKeys(){var i=this,e=this.callBase(),t=function(a){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(a.preventDefault(),this.clear()),this._savedTextRemoveEvent=a,this._preventSubstitution=!0},r=function(){i.option("searchEnabled")&&i._valueSubstituted()&&i._searchHandler()};return(0,N.l)({},e,{tab(){this.option("opened")&&!this._popup.getFocusableElements().length&&this._resetCaretPosition(!0),e.tab&&e.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow(a){if(e.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(a),!0},downArrow(a){if(e.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(a),!0},leftArrow(){var a;r(),null===(a=e.leftArrow)||void 0===a||a.apply(this,arguments)},rightArrow(){r(),e.rightArrow&&e.rightArrow.apply(this,arguments)},home(){r(),e.home&&e.home.apply(this,arguments)},end(){r(),e.end&&e.end.apply(this,arguments)},escape(){var a=e.escape&&e.escape.apply(this,arguments);return this._cancelEditing(),a??!0},enter(a){var n=this.option("opened"),s=this._input().val().trim(),o=s&&this._list&&!this._list.option("focusedElement");if(!s&&(0,m.$K)(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(a),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return a.preventDefault(),o&&(n&&this._toggleOpenState(),this._valueChangeEventHandler(a)),n;if(e.enter&&e.enter.apply(this,arguments))return n}},space(a){var n=this.option("opened"),s=this.option("searchEnabled"),o=this.option("acceptCustomValue");if(n&&!s&&!o)return a.preventDefault(),this._valueChangeEventHandler(a),!0},backspace:t,del:t})},_getDefaultOptions(){return(0,N.l)(this.callBase(),{placeholder:ae.Z.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating(i){(0,m.$K)(i.customItem)||(i.customItem=i.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass(){return"".concat(this.callBase()," ").concat(jb)},_setDeprecatedOptions(){this.callBase(),(0,N.l)(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement(){var i;if(this._searchValue()){var{items:t,selectedItem:r}=this.option(),a=this._list._itemElements(),n=null!==(i=t?.indexOf(r))&&void 0!==i?i:-1,s=-1===n||this._isCustomItemSelected()?null:a.eq(n);this._focusListElement(s)}else this._focusListElement(null)},_renderFocusedElement(){if(this._list){if(!this._searchValue()||this.option("acceptCustomValue"))return void this._focusListElement(null);var t=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(t)}},_focusListElement(i){this._preventInputValueRender=!0,this._list.option("focusedElement",(0,rt.u)(i)),delete this._preventInputValueRender},_scrollToSelectedItem(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler(){this.callBase(),this._dataController.paginate()&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue(){return this._renderInputValue(),this._setSubmitValue(),(new Y.BH).resolve()},_renderInputValue(){return this.callBase().always(()=>{this._renderInputValueAsync()})},_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always(()=>{this._refreshSelected()})},_renderInputValueImpl(){return this._renderField(),(new Y.BH).resolve()},_setNextItem(i){var e=this._calcNextItem(i),t=this._valueGetter(e);this._setValue(t)},_setNextValue(i){(this._dataController.isLoaded()?(new Y.BH).resolve():this._dataController.load()).done(()=>{var t=this._getSelectedIndex(),r=this._dataController.pageSize(),a=this._dataController.isLastPage(),n=t===this._items().length-1;this._saveValueChangeEvent(i);var s="downArrow"===(0,ce.EV)(i)?1:-1;r&&!a&&n&&s>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,s))):this._setNextItem(s)})},_setSelectedItem(i){var e=!this._isCustomValueAllowed()&&void 0===i;this.callBase(e?null:i),!e&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed(){return this.option("acceptCustomValue")||this.callBase()},_displayValue(i){return i=!(0,m.$K)(i)&&this._isCustomValueAllowed()?this.option("value"):i,this.callBase(i)},_listConfig(){var i=(0,N.l)(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&(0,N.l)(i,{showSelectionControls:!0,selectByClick:!0}),i},_listFocusedItemChangeHandler(i){if(!this._preventInputValueRender){var e=i.component,t=(0,b.Z)(e.option("focusedElement")),r=e._getItemData(t);this._updateField(r)}},_updateField(i){if(!this._getTemplateByOption("fieldTemplate")||!this.option("fieldTemplate")){var t=this._displayGetter(i);return this.option("text",t),void this._renderDisplayText(t)}this._renderField()},_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):J.ZT},_selectionChangeHandler(i){(0,j.S6)(i.addedItems||[],(e,t)=>{this._setValue(this._valueGetter(t))})},_getActualSearchValue(){return this._dataController.searchValue()},_toggleOpenState(i){if(!this.option("disabled")){if(!(i=arguments.length?i:!this.option("opened"))&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&i)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;var t=this._getActualSearchValue();t&&this._wasSearch(!0),this._filterDataSource(t||null)}else this._setListOption("items",[]);i&&this._scrollToSelectedItem(),this.callBase(i)}},_renderTooltip(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText(){var i=this.option("selectedItem");if(null===i)return!1;var e=this._displayGetter(i);return(e?String(e):"")===this._searchValue()},_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText(i){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(()=>{var{acceptCustomValue:e,text:t,selectedItem:r}=this.option();e?!i&&!this._isValueChanging&&(this._updateField(r??this._createCustomItem(t)),this._clearFilter()):this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")?this._clearTextValue():this._isValueEqualInputText()||this._renderInputValue().always(a=>{var n=(0,J.IS)(a,r);this._setSelectedItem(n),this._updateField(n),this._clearFilter()})})},_valueChangeEventIncludesBlur(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent(i){return this._preventNestedFocusEvent(i)||this._valueChangeEventIncludesBlur()},_focusOutHandler(i){this._isPreventedFocusOutEvent(i)||(this._isOverlayNestedTarget(i.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(i)),i.target=this._input().get(0),this.callBase(i)},_cancelSearchIfNeed(i){var e,{searchEnabled:t}=this.option(),r=this._isOverlayNestedTarget(i?.relatedTarget);if(this._wasSearch()&&t&&!r){var n=null===(e=this._popup)||void 0===e?void 0:e._hideAnimationProcessing;this._clearSearchTimer(),n?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch(i){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=i},_isOverlayNestedTarget:i=>!!(0,b.Z)(i).closest(".".concat(jb)).length,_clearTextValue(){var i=this.option("selectedItem"),e=this._displayGetter(i);i&&""!==e&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused(){var i=it.Z.getActiveElement(this.element());return this.callBase()&&(0,b.Z)(i).closest(this._input()).length>0},_getValueChangeEventOptionName:()=>"customItemCreateEvent",_renderValueChangeEvent(){this._isEditable()&&this.callBase()},_fieldRenderData(){var i=this._list&&this.option("opened")&&(0,b.Z)(this._list.option("focusedElement"));return i&&i.length?this._list._getItemData(i):this.option("selectedItem")},_isSelectedValue(i){return this._isValueEquals(i,this.option("value"))},_shouldCloseOnItemClick(){return!(this.option("showSelectionControls")&&"single"!==this.option("selectionMode"))},_listItemClickHandler(i){var e=this._getCurrentValue();this._focusListElement((0,b.Z)(i.itemElement)),this._saveValueChangeEvent(i.event),this._completeSelection(this._valueGetter(i.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&e===this._valueGetter(i.itemData)&&this._updateField(i.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter(){return this._wasSearch()},_completeSelection(i){this._setValue(i)},_loadItem(i,e){var t=this,r=new Y.BH;return this.callBase(i,e).done(a=>{r.resolve(a)}).fail(a=>{if(!a?.shouldSkipCallback){var n=t.option("selectedItem");t.option("acceptCustomValue")&&i===t._valueGetter(n)?r.resolve(n):r.reject()}}),r.promise()},_loadInputValue(i,e){return this._loadItemDeferred=this._loadItem(i).always(e),this._loadItemDeferred},_isCustomItemSelected(){var i=this.option("selectedItem"),e=this._searchValue(),t=this._displayGetter(i);return!t||e!==t.toString()},_valueChangeEventHandler(i){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(i))},_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem(i){var e={text:i},t=this._customItemCreatingAction(e),r=(0,J.IS)(t,e.customItem);return(0,m.$K)(t)&&bf.Z.log("W0015","onCustomItemCreating","customItem"),r},_customItemAddedHandler(i){var e=this._searchValue(),t=this._createCustomItem(e);if(this._saveValueChangeEvent(i),void 0===t)throw this._renderValue(),bf.Z.Error("E0121");(0,m.tI)(t)?(0,Y.p4)(t).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(t)},_setCustomItem(i){this._disposed||(this.option("selectedItem",i=i||null),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(i)),this._renderDisplayText(this._displayGetter(i)),this._isValueChanging=!1)},_clearValueHandler(i){return this._preventFiltering=!0,this.callBase(i),this._searchCanceled(),!1},_wasSearch(i){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=i},_searchHandler(){this._preventFiltering?delete this._preventFiltering:(this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments))},_dataSourceFiltered(i){this.callBase(),null!==i&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted(){var i=this._input().get(0),e=this._searchValue().length,t=0===i.selectionStart&&i.selectionEnd===e,r=i.selectionStart!==i.selectionEnd,a=e===i.selectionEnd;return this._wasSearch()&&r&&!t&&a&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this.option("searchEnabled")&&!this.option("acceptCustomValue")&&"startswith"===this.option("searchMode")},_renderInputSubstitution(){if(this._shouldSubstitutionBeRendered()){var i=this._list&&this._getPlainItems(this._list.option("items"))[0];if(i){var e=this._input(),t=e.val().length;if(0!==t){var r=e.get(0),a=this._displayGetter(i).toString();r.value=a,this._caret({start:t,end:a.length})}}}else delete this._preventSubstitution},_dispose(){this._renderInputValueAsync=J.ZT,delete this._loadItemDeferred,this.callBase()},_optionChanged(i){switch(i.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(i)}}});(0,It.Z)("dxSelectBox",qb);const Yb=qb;var Xb=be(8749),Jb=i=>i.getMonth()+1,Qb=(i,e)=>{var t=i.getDate(),r=jl("M",i),a=(0,Li.n$)(parseInt(e),r.min,r.max);i.setMonth(a-1,1);var{min:n,max:s}=jl("dM",i),o=(0,Li.n$)(t,n,s);i.setDate(o)},XB={a:i=>i.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:Jb,L:Jb,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds"},JB=(0,N.l)({},(0,Xb.xe)(),{a:(i,e)=>{var t=i.getHours();t>=12!=!!parseInt(e)&&i.setHours((t+12)%24)},d:(i,e)=>{e>jl("dM",i).max&&i.setMonth(i.getMonth()+1),i.setDate(e)},h:(i,e)=>{var t=i.getHours()>=12;i.setHours(+e%12+(t?12:0))},M:Qb,L:Qb,E:(i,e)=>{e<0||i.setDate(i.getDate()-i.getDay()+parseInt(e))},y:(i,e)=>{var t=i.getFullYear(),r=String(e).length,a=String(jl("y",i).max).length,n=parseInt(String(t).substr(0,a-r)+e);i.setFullYear(n)}}),jl=(i,e,t)=>{var r={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:1,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1}};return r[t||i]||r.getAmPm},iV=be(1933),$e=be(22),xf=["year","day","month","day"],ew=["hours","minutes","seconds","milliseconds"],Da={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:864e5,ONE_YEAR:31536e6,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){var i=new Date;return new Date(i.getFullYear()+50,i.getMonth(),i.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:function(){return"yyyy-MM-dd"},components:xf},time:{getStandardPattern:function(){return"HH:mm"},components:ew},datetime:{getStandardPattern:function(){var i;return function(){var e=(0,b.Z)("<input>").attr("type","datetime");e.val("2000-01-01T01:01Z"),e.val()&&(i="yyyy-MM-ddTHH:mmZ")}(),i||(i="yyyy-MM-ddTHH:mm:ssZ"),Da.FORMATS_INFO.datetime.getStandardPattern=function(){return i},i},components:[...xf,...ew]},"datetime-local":{getStandardPattern:function(){return"yyyy-MM-ddTHH:mm:ss"},components:[...xf,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat:function(i,e){var t=Da.FORMATS_INFO[e].getStandardPattern();return hi.Z.serializeDate(i,t)},fromStandardDateFormat:function(i){var e=hi.Z.dateParser(i);return(0,m.J_)(e)?e:void 0},getMaxMonthDay:function(i,e){return new Date(i,e+1,0).getDate()},mergeDates:function(i,e,t){if(!e)return e||null;if(!i||isNaN(i.getTime())){var r=new Date(null);i=new Date(r.getFullYear(),r.getMonth(),r.getDate())}var a=new Date(i.valueOf());return(0,j.S6)(Da.FORMATS_INFO[t].components,function(){var s=Da.DATE_COMPONENTS_INFO[this];a[s.setter](e[s.getter]())}),a},getLongestCaptionIndex:function(i){var r,e=0,t=0;for(r=0;r<i.length;++r)i[r].length>t&&(e=r,t=i[r].length);return e},formatUsesMonthName:function(i){return vt.Z.formatUsesMonthName(i)},formatUsesDayName:function(i){return vt.Z.formatUsesDayName(i)},getLongestDate:function(i,e,t){var r=function(i){var e=typeof i;return"string"===e?"format":"object"===e&&void 0!==i.type?i.type:null}(i),a=9;(!r||Da.formatUsesMonthName(r))&&(a=Da.getLongestCaptionIndex(e));var n=new Date(1888,a,21,23,59,59,999);if(!r||Da.formatUsesDayName(r)){var s=n.getDate()-n.getDay()+Da.getLongestCaptionIndex(t);n.setDate(s)}return n},normalizeTime:function(i){i.setSeconds(0),i.setMilliseconds(0)}};Da.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter:function(i,e){var t=new Date(e.getTime());return t.setFullYear(i),vt.Z.format(t,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter:function(i,e){var t=new Date(e.getTime());return t.setDate(i),vt.Z.format(t,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:function(i){return vt.Z.getMonthNames()[i]},startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:function(i){return vt.Z.format(new Date(0,0,0,i),"hour")},startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:function(i){return vt.Z.format(new Date(0,0,0,0,i),"minute")},startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:function(i){return vt.Z.format(new Date(0,0,0,0,0,i),"second")},startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:function(i){return vt.Z.format(new Date(0,0,0,0,0,0,i),"millisecond")},startValue:0,endValue:999}};const Wt=Da;var nV=be(9756),rw="dxSwipeable",oV={onStart:Iu,onUpdated:Tu,onEnd:Pl,onCancel:"dxswipecancel"},aw=El.Z.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{elastic:!0,immediate:!1,immediateTimeout:180,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass("dx-swipeable"),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),!this.option("disabled")){var i=this.NAME;this._createEventData(),(0,j.S6)(oV,function(e,t){var r=this._createActionByOption(e,{context:this});t=(0,ce.V4)(t,i),k.Z.on(this.$element(),t,this._eventData,function(a){return r({event:a})})}.bind(this))}},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}},_detachEventHandlers:function(){k.Z.off(this.$element(),"."+rw)},_optionChanged:function(i){switch(i.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(i)}},_useTemplates:function(){return!1}});(0,nV.u2)(aw,rw);const Yu=aw,mV=class gV extends hr.default{_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{onClick:null,onCaptionClick:null,type:"normal",stylingMode:"outlined",text:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return(0,_t.x2)()},options:{type:"default",stylingMode:"text"}},{device:function(){return(0,_t.dC)()},options:{type:"normal",stylingMode:"text"}}])}_init(){super._init(),this._initActions()}_initActions(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")}_initMarkup(){super._initMarkup(),this.$element().addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()}_renderButtons(){var{rtlEnabled:e,type:t,stylingMode:r,focusStateEnabled:a}=this.option();this._prevButton=this._createComponent((0,b.Z)("<div>"),pr.Z,{focusStateEnabled:a,icon:e?"chevronright":"chevronleft",onClick:l=>{this._clickAction({direction:-1,event:l})},type:t,stylingMode:r,integrationOptions:{}});var n=this._prevButton.$element().addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent((0,b.Z)("<div>"),pr.Z,{focusStateEnabled:a,icon:e?"chevronleft":"chevronright",onClick:l=>{this._clickAction({direction:1,event:l})},type:t,stylingMode:r,integrationOptions:{}});var s=this._nextButton.$element().addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent((0,b.Z)("<div>").addClass("dx-calendar-caption-button"),pr.Z,{focusStateEnabled:a,onClick:l=>{this._captionClickAction({event:l})},type:t,stylingMode:r,template:(l,d)=>{var{text:u}=this.option();u.split(" - ").forEach(f=>{(0,b.Z)(d).append((0,b.Z)("<span>").addClass("dx-button-text").text(f))})},integrationOptions:{}});var o=this._caption.$element();this.$element().append(n,o,s)}_renderCaption(){this._caption.option("text",this.option("text"))}toggleButton(e,t){var a=this["_"+e+"Button"];a&&(a.option("disabled",t),a.$element().toggleClass("dx-calendar-disabled-navigator-link",t))}_optionChanged(e){"text"===e.name?this._renderCaption():super._optionChanged(e)}};var Ef=be(6513),{abstract:Oa}=hr.default,If="dx-calendar-cell",nw="dx-calendar-week-number-cell",Tf="dx-calendar-empty-cell",sw="dx-calendar-selected-date",ow="dx-calendar-cell-in-range",Af="dx-calendar-cell-range-hover",Df="dx-calendar-cell-range-hover-start",Of="dx-calendar-cell-range-hover-end",lw="dx-calendar-range-start-date",dw="dx-calendar-range-end-date",Rf="dx-calendar-contoured-date",uw="td:not(.".concat(nw,")"),Lf=(0,ce.V4)(Pt.u,"dxCalendar"),hw=(0,ce.V4)(Ef.B,"dxCalendar"),ql="dxDateValueKey",IV=hr.default.inherit({_getViewName:function(){return"base"},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,onCellHover:null,onWeekNumberClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup:function(){this.callBase(),this._renderImpl()},_renderImpl:function(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderRange(),this._renderEvents()},_createTable:function(){this._$table=(0,b.Z)("<table>");var i=ae.Z.format("dxCalendar-ariaWidgetName");return this.setAria({label:i,role:"grid"},this._$table),this._$table},_renderBody:function(){this.$body=(0,b.Z)("<tbody>").appendTo(this._$table);for(var i={cellDate:this._getFirstCellData(),prevCellDate:null},e=0,t=this.option("rowCount");e<t;e++){i.row=this._createRow();for(var r=0,a=this.option("colCount");r<a;r++)this._renderCell(i,r);this._renderWeekNumberCell(i)}},_createRow:function(){var i=it.Z.createElement("tr");return this.setAria("role","row",(0,b.Z)(i)),this.$body.get(0).appendChild(i),i},_createCell:function(i,e){var t=it.Z.createElement("td"),r=(0,b.Z)(t);return t.className=this._getClassNameByDate(i,e),t.setAttribute("data-value",hi.Z.serializeDate(i,$e.Z.getShortDateFormat())),(0,Ys.aT)(t,ql,i),this.setAria({role:"gridcell",label:this.getCellAriaLabel(i)},r),{cell:t,$cell:r}},_renderCell:function(i,e){var{cellDate:t,prevCellDate:r,row:a}=i;r&&$e.Z.fixTimezoneGap(r,t),i.prevCellDate=t;var{cell:n,$cell:s}=this._createCell(t,e),o=this.option("cellTemplate");(0,b.Z)(a).append(n),o?o.render(this._prepareCellTemplateData(t,e,s)):n.innerHTML=this._getCellText(t),i.cellDate=this._getNextCellData(t)},_getClassNameByDate:function(i,e){var t=If;return this._isTodayCell(i)&&(t+=" ".concat("dx-calendar-today")),(this._isDateOutOfRange(i)||this.isDateDisabled(i))&&(t+=" ".concat(Tf)),this._isOtherView(i)&&(t+=" ".concat("dx-calendar-other-view")),"range"===this.option("selectionMode")&&(0===e&&(t+=" ".concat("dx-calendar-cell-start-in-row")),e===this.option("colCount")-1&&(t+=" ".concat("dx-calendar-cell-end-in-row")),this._isStartDayOfMonth(i)&&(t+=" ".concat("dx-calendar-cell-start")),this._isEndDayOfMonth(i)&&(t+=" ".concat("dx-calendar-cell-end"))),t},_prepareCellTemplateData:function(i,e,t){var r=i instanceof Date;return{model:{text:r?this._getCellText(i):i,date:r?i:void 0,view:this._getViewName()},container:(0,rt.u)(t),index:e}},_renderEvents:function(){this._createCellClickAction(),k.Z.off(this._$table,Lf),k.Z.on(this._$table,Lf,uw,e=>{(0,b.Z)(e.currentTarget).hasClass(Tf)||this._cellClickAction({event:e,value:(0,b.Z)(e.currentTarget).data(ql)})});var{selectionMode:i}=this.option();k.Z.off(this._$table,hw),"range"===i&&(this._createCellHoverAction(),k.Z.on(this._$table,hw,uw,e=>{(0,b.Z)(e.currentTarget).hasClass(Tf)||this._cellHoverAction({event:e,value:(0,b.Z)(e.currentTarget).data(ql)})})),"single"!==i&&(this._createWeekNumberCellClickAction(),k.Z.on(this._$table,Lf,".".concat(nw),e=>{var t=(0,b.Z)(e.currentTarget).closest("tr"),r=t.find(".".concat(If)).first().data(ql),a=t.find(".".concat(If)).last().data(ql),n=[...$e.Z.getDatesOfInterval(r,a,864e5),a];this._weekNumberCellClickAction({event:e,rowDates:n})}))},_createCellClickAction:function(){this._cellClickAction=this._createActionByOption("onCellClick")},_createCellHoverAction:function(){this._cellHoverAction=this._createActionByOption("onCellHover")},_createWeekNumberCellClickAction:function(){this._weekNumberCellClickAction=this._createActionByOption("onWeekNumberClick")},_createDisabledDatesHandler:function(){var i=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(i)?this._getDefaultDisabledDatesHandler(i):i||J.ZT},_getDefaultDisabledDatesHandler:function(i){return J.ZT},_isTodayCell:Oa,_isDateOutOfRange:Oa,isDateDisabled:function(i){var e={date:i,view:this._getViewName()};return this._disabledDatesHandler(e)},_isOtherView:Oa,_isStartDayOfMonth:Oa,_isEndDayOfMonth:Oa,_getCellText:Oa,_getFirstCellData:Oa,_getNextCellData:Oa,_renderContouredDate:function(i){if(this.option("focusStateEnabled")){i=i||this.option("contouredDate");var e=this._getContouredCell(),t=this._getCellByDate(i);e.removeClass(Rf),i&&t.addClass(Rf)}},_getContouredCell:function(){return this._$table.find(".".concat(Rf))},_renderValue:function(){if(this.option("allowValueSelection")){var i=this.option("value");Array.isArray(i)||(i=[i]),this._updateSelectedClass(i)}},_updateSelectedClass:function(i){var e;this._isRangeMode()&&!this._isMonthView()||(null===(e=this._$selectedCells)||void 0===e||e.forEach(t=>{t.removeClass(sw)}),this._$selectedCells=i.map(t=>this._getCellByDate(t)),this._$selectedCells.forEach(t=>{t.addClass(sw)}))},_renderRange:function(){var i,e,t,r,a,n,s,o,{allowValueSelection:l,value:d,range:u}=this.option();!l||!this._isRangeMode()||!this._isMonthView()||(null===(i=this._$rangeCells)||void 0===i||i.forEach(c=>{c.removeClass(ow)}),null===(e=this._$hoveredRangeCells)||void 0===e||e.forEach(c=>{c.removeClass(Af)}),null===(t=this._$rangeStartHoverCell)||void 0===t||t.removeClass(Df),null===(r=this._$rangeEndHoverCell)||void 0===r||r.removeClass(Of),null===(a=this._$rangeStartDateCell)||void 0===a||a.removeClass(lw),null===(n=this._$rangeEndDateCell)||void 0===n||n.removeClass(dw),this._$rangeCells=u.map(c=>this._getCellByDate(c)),this._$rangeStartDateCell=this._getCellByDate(d[0]),this._$rangeEndDateCell=this._getCellByDate(d[1]),this._$rangeCells.forEach(c=>{c.addClass(ow)}),null===(s=this._$rangeStartDateCell)||void 0===s||s.addClass(lw),null===(o=this._$rangeEndDateCell)||void 0===o||o.addClass(dw))},_renderHoveredRange(){var i,e,t,r,a,{allowValueSelection:n,hoveredRange:s}=this.option();!n||!this._isRangeMode()||!this._isMonthView()||(null===(i=this._$hoveredRangeCells)||void 0===i||i.forEach(o=>{o.removeClass(Af)}),null===(e=this._$rangeStartHoverCell)||void 0===e||e.removeClass(Df),null===(t=this._$rangeEndHoverCell)||void 0===t||t.removeClass(Of),this._$hoveredRangeCells=s.map(o=>this._getCellByDate(o)),this._$rangeStartHoverCell=this._getCellByDate(s[0]),this._$rangeEndHoverCell=this._getCellByDate(s[s.length-1]),this._$hoveredRangeCells.forEach(o=>{o.addClass(Af)}),null===(r=this._$rangeStartHoverCell)||void 0===r||r.addClass(Df),null===(a=this._$rangeEndHoverCell)||void 0===a||a.addClass(Of))},_isMonthView:function(){return"month"===this.option("zoomLevel")},_isRangeMode:function(){return"range"===this.option("selectionMode")},getCellAriaLabel:function(i){return this._getCellText(i)},_getFirstAvailableDate:function(){var i=this.option("date"),e=this.option("min");return i=$e.Z.getViewFirstCellDate(this._getViewName(),i),new Date(e&&i<e?e:i)},_getCellByDate:Oa,isBoundary:Oa,_optionChanged:function(i){var{name:e,value:t}=i;switch(e){case"value":this._renderValue();break;case"range":this._renderRange();break;case"hoveredRange":this._renderHoveredRange();break;case"contouredDate":this._renderContouredDate(t);break;case"onCellClick":this._createCellClickAction();break;case"onCellHover":this._createCellHoverAction();break;case"min":case"max":case"disabledDates":case"cellTemplate":case"selectionMode":this._invalidate();break;case"_todayDate":this._renderBody();break;default:this.callBase(i)}}});const Xu=IV;var RV={month:Xu.inherit({_getViewName:function(){return"month"},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl:function(){this.callBase(),this._renderHeader()},_renderBody:function(){this.callBase(),this._$table.find(".".concat("dx-calendar-other-view")).addClass("dx-calendar-other-month")},_renderFocusTarget:J.ZT,getCellAriaLabel:function(i){return vt.Z.format(i,"longdate")},_renderHeader:function(){var i=(0,b.Z)("<tr>"),e=(0,b.Z)("<thead>").append(i);this._$table.prepend(e);for(var t=0,r=this.option("colCount");t<r;t++)this._renderHeaderCell(t,i);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(i)},_renderHeaderCell:function(i,e){var{firstDayOfWeek:t}=this.option(),{full:r,abbreviated:a}=this._getDayCaption(t+i),n=(0,b.Z)("<th>").attr({scope:"col",abbr:r}).text(a);e.append(n)},_renderWeekHeaderCell:function(i){var e=(0,b.Z)("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"});i.prepend(e)},_renderWeekNumberCell:function(i){var{showWeekNumbers:e,cellTemplate:t,selectionMode:r,selectWeekOnClick:a}=this.option();if(e){var n=this._getWeekNumber(i.prevCellDate),s=it.Z.createElement("td"),o=(0,b.Z)(s);s.className="dx-calendar-week-number-cell","single"!==r&&a&&o.addClass("dx-calendar-week-selection"),t?t.render(this._prepareCellTemplateData(n,-1,o)):s.innerHTML=n,i.row.prepend(s),this.setAria({role:"gridcell",label:"Week ".concat(n)},o)}},_getWeekNumber:function(i){var{weekNumberRule:e,firstDayOfWeek:t}=this.option();return $e.Z.getWeekNumber(i,t,"auto"===e?1===t?"firstFourDays":"firstDay":e)},getNavigatorCaption:function(){return vt.Z.format(this.option("date"),"monthandyear")},_isTodayCell:function(i){var e=this.option("_todayDate")();return $e.Z.sameDate(i,e)},_isDateOutOfRange:function(i){var e=this.option("min"),t=this.option("max");return!$e.Z.dateInRange(i,e,t,"date")},_isOtherView:function(i){return i.getMonth()!==this.option("date").getMonth()},_isStartDayOfMonth:function(i){return $e.Z.sameDate(i,$e.Z.getFirstMonthDate(this.option("date")))},_isEndDayOfMonth:function(i){return $e.Z.sameDate(i,$e.Z.getLastMonthDate(this.option("date")))},_getCellText:function(i){return vt.Z.format(i,"d")},_getDayCaption:function(i){var t=i%this.option("colCount");return{full:vt.Z.getDayNames()[t],abbreviated:vt.Z.getDayNames("abbreviated")[t]}},_getFirstCellData:function(){var{firstDayOfWeek:i}=this.option(),e=$e.Z.getFirstMonthDate(this.option("date")),t=i-e.getDay(),r=this.option("colCount");return t>=0&&(t-=r),e.setDate(e.getDate()+t),e},_getNextCellData:function(i){return(i=new Date(i)).setDate(i.getDate()+1),i},_getCellByDate:function(i){return this._$table.find("td[data-value='".concat(hi.Z.serializeDate(i,$e.Z.getShortDateFormat()),"']"))},isBoundary:function(i){return $e.Z.sameMonthAndYear(i,this.option("min"))||$e.Z.sameMonthAndYear(i,this.option("max"))},_getDefaultDisabledDatesHandler:function(i){return function(e){var t=i.some(function(r){return $e.Z.sameDate(r,e.date)});if(t)return!0}}}),year:Xu.inherit({_getViewName:function(){return"year"},_isTodayCell:function(i){var e=this.option("_todayDate")();return $e.Z.sameMonthAndYear(i,e)},_isDateOutOfRange:function(i){return!$e.Z.dateInRange(i,$e.Z.getFirstMonthDate(this.option("min")),$e.Z.getLastMonthDate(this.option("max")))},_isOtherView:function(){return!1},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(i){return vt.Z.getMonthNames("abbreviated")[i.getMonth()]},_getFirstCellData:function(){var i=this.option("date"),e=new Date(i);return e.setDate(1),e.setMonth(0),e},_getNextCellData:function(i){return(i=new Date(i)).setMonth(i.getMonth()+1),i},_getCellByDate:function(i){var e=new Date(i);return e.setDate(1),this._$table.find("td[data-value='".concat(hi.Z.serializeDate(e,$e.Z.getShortDateFormat()),"']"))},getCellAriaLabel:function(i){return vt.Z.format(i,"monthandyear")},getNavigatorCaption:function(){return vt.Z.format(this.option("date"),"yyyy")},isBoundary:function(i){return $e.Z.sameYear(i,this.option("min"))||$e.Z.sameYear(i,this.option("max"))},_renderWeekNumberCell:J.ZT}),decade:Xu.inherit({_getViewName:function(){return"decade"},_isTodayCell:function(i){var e=this.option("_todayDate")();return $e.Z.sameYear(i,e)},_isDateOutOfRange:function(i){var e=this.option("min"),t=this.option("max");return!$e.Z.dateInRange(i.getFullYear(),e&&e.getFullYear(),t&&t.getFullYear())},_isOtherView:function(i){var e=new Date(i);return e.setMonth(1),!$e.Z.sameDecade(e,this.option("date"))},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(i){return vt.Z.format(i,"yyyy")},_getFirstCellData:function(){var i=$e.Z.getFirstYearInDecade(this.option("date"))-1;return $e.Z.createDateWithFullYear(i,0,1)},_getNextCellData:function(i){return(i=new Date(i)).setFullYear(i.getFullYear()+1),i},getNavigatorCaption:function(){var i=this.option("date"),e=$e.Z.getFirstYearInDecade(i),t=new Date(i),r=new Date(i);return t.setFullYear(e),r.setFullYear(e+9),vt.Z.format(t,"yyyy")+"-"+vt.Z.format(r,"yyyy")},_isValueOnCurrentView:function(i,e){return $e.Z.sameDecade(i,e)},_getCellByDate:function(i){var e=new Date(i);return e.setDate(1),e.setMonth(0),this._$table.find("td[data-value='".concat(hi.Z.serializeDate(e,$e.Z.getShortDateFormat()),"']"))},isBoundary:function(i){return $e.Z.sameDecade(i,this.option("min"))||$e.Z.sameDecade(i,this.option("max"))},_renderWeekNumberCell:J.ZT}),century:Xu.inherit({_getViewName:function(){return"century"},_isTodayCell:function(i){var e=this.option("_todayDate")();return $e.Z.sameDecade(i,e)},_isDateOutOfRange:function(i){var e=$e.Z.getFirstYearInDecade(i),t=$e.Z.getFirstYearInDecade(this.option("min")),r=$e.Z.getFirstYearInDecade(this.option("max"));return!$e.Z.dateInRange(e,t,r)},_isOtherView:function(i){var e=new Date(i);return e.setMonth(1),!$e.Z.sameCentury(e,this.option("date"))},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(i){var e=vt.Z.format(i,"yyyy"),t=new Date(i);return t.setFullYear(t.getFullYear()+9),e+" - "+vt.Z.format(t,"yyyy")},_getFirstCellData:function(){var i=$e.Z.getFirstDecadeInCentury(this.option("date"))-10;return $e.Z.createDateWithFullYear(i,0,1)},_getNextCellData:function(i){return(i=new Date(i)).setFullYear(i.getFullYear()+10),i},_getCellByDate:function(i){var e=new Date(i);return e.setDate(1),e.setMonth(0),e.setFullYear($e.Z.getFirstYearInDecade(e)),this._$table.find("td[data-value='".concat(hi.Z.serializeDate(e,$e.Z.getShortDateFormat()),"']"))},getNavigatorCaption:function(){var i=this.option("date"),e=$e.Z.getFirstDecadeInCentury(i),t=new Date(i),r=new Date(i);return t.setFullYear(e),r.setFullYear(e+99),vt.Z.format(t,"yyyy")+"-"+vt.Z.format(r,"yyyy")},isBoundary:function(i){return $e.Z.sameCentury(i,this.option("min"))||$e.Z.sameCentury(i,this.option("max"))},_renderWeekNumberCell:J.ZT})};const LV=RV,Pf=class PV{constructor(e){this.calendar=e}dateOption(e){return this.calendar._dateOption(e)}dateValue(e,t){this.calendar._dateValue(e,t)}skipNavigate(){this.calendar._skipNavigate=!0}updateAriaSelected(e,t){this.calendar._updateAriaSelected(e,t),e[0]&&this.calendar.option("currentDate").getTime()===e[0].getTime()&&this.calendar._updateAriaId(e[0])}processValueChanged(e,t){var r,a;(0,m.$K)(e)&&!Array.isArray(e)&&(e=[e]),(0,m.$K)(t)&&!Array.isArray(t)&&(t=[t]),e=(null===(r=e)||void 0===r?void 0:r.map(n=>this._convertToDate(n)))||[],t=(null===(a=t)||void 0===a?void 0:a.map(n=>this._convertToDate(n)))||[],this._updateViewsValue(e),this.updateAriaSelected(e,t),this._currentDateChanged||this.calendar._initCurrentDate(),this._currentDateChanged=!1}_isDateDisabled(e){var t=this.calendar._dateOption("min"),r=this.calendar._dateOption("max"),a=(0,m.$K)(t)&&e<t&&!$e.Z.sameDate(t,e),n=(0,m.$K)(r)&&e>r&&!$e.Z.sameDate(r,e);return this.calendar._view.isDateDisabled(e)||a||n}_getLowestDateInArray(e){if(e.length)return new Date(Math.min(...e))}_convertToDate(e){return this.calendar._convertToDate(e)}_isMaxZoomLevel(){return this.calendar._isMaxZoomLevel()}_updateViewsOption(e,t){this.calendar._updateViewsOption(e,t)}_updateViewsValue(e){this._updateViewsOption("value",e)}_updateCurrentDate(e){this.calendar.option("currentDate",e??new Date)}_shouldHandleWeekNumberClick(){var{selectionMode:e,selectWeekOnClick:t}=this.calendar.option();return t&&"single"!==e}};var Bf="dx-calendar",cw="dx-calendar-view",_w=(0,ce.V4)(Ef.u,"dxCalendar"),fo={month:3,year:2,decade:1,century:0},JV={SingleSelection:class BV extends Pf{constructor(e){super(e),this.NAME="SingleSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"single"}}selectValue(e,t){this.skipNavigate(),this.dateValue(e,t)}updateAriaSelected(e,t){var r,a;null!==(r=e)&&void 0!==r||(e=[this.dateOption("value")]),null!==(a=t)&&void 0!==a||(t=[]),super.updateAriaSelected(e,t)}getDefaultCurrentDate(){return this.dateOption("value")}restoreValue(){this.calendar.option("value",null)}_updateViewsValue(e){this._updateViewsOption("value",e[0])}},MultipleSelection:class NV extends Pf{constructor(e){super(e),this.NAME="MultiSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"multi",onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){var r=[...this.dateOption("value")],a=r.findIndex(n=>n?.toDateString()===e.toDateString());a>-1?r.splice(a,1):r.push(e),this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,this.dateValue(r,t)}updateAriaSelected(e,t){var r,a;null!==(r=e)&&void 0!==r||(e=this.dateOption("value")),null!==(a=t)&&void 0!==a||(t=[]),super.updateAriaSelected(e,t)}getDefaultCurrentDate(){var e=this.dateOption("value").filter(t=>t);return this._getLowestDateInArray(e)}restoreValue(){this.calendar.option("value",[])}_weekNumberClickHandler(e){var{rowDates:t,event:r}=e,a=t.filter(n=>!this._isDateDisabled(n));this.dateValue(a,r)}},RangeSelection:class MV extends Pf{constructor(e){super(e),this.NAME="RangeSelection"}getViewOptions(){var e=this._getValue();return{value:e,range:this._getDaysInRange(e[0],e[1]),selectionMode:"range",onCellHover:this._cellHoverHandler.bind(this),onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){var[r,a]=this._getValue();this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,!0===this.calendar.option("_allowChangeSelectionOrder")?(this.calendar._valueSelected=!0,"startDate"===this.calendar.option("_currentSelection")?this.calendar._convertToDate(e)>this.calendar._convertToDate(a)?this.dateValue([e,null],t):this.dateValue([e,a],t):this.calendar._convertToDate(e)>=this.calendar._convertToDate(r)?this.dateValue([r,e],t):this.dateValue([e,null],t)):this.dateValue(!r||a?[e,null]:r<e?[r,e]:[e,r],t)}updateAriaSelected(e,t){var r,a;null!==(r=e)&&void 0!==r||(e=this._getValue()),null!==(a=t)&&void 0!==a||(t=[]),super.updateAriaSelected(e,t)}processValueChanged(e,t){super.processValueChanged(e,t);var r=this._getRange();this._updateViewsOption("range",r)}getDefaultCurrentDate(){var{_allowChangeSelectionOrder:e,_currentSelection:t}=this.calendar.option(),r=this.dateOption("value");if(e){if("startDate"===t&&r[0])return r[0];if("endDate"===t&&r[1])return r[1]}var a=r.filter(n=>n);return this._getLowestDateInArray(a)}restoreValue(){this.calendar.option("value",[null,null])}_getValue(){var e=this.dateOption("value");if(!e.length)return e;var[t,r]=e;return t&&r&&t>r&&([t,r]=[r,t]),[t,r]}_getRange(){var[e,t]=this._getValue();return this._getDaysInRange(e,t)}_getDaysInRange(e,t){if(!e||!t)return[];var{currentDate:r,viewsCount:a}=this.calendar.option(),n=this.calendar._isAdditionalViewDate(r),s=$e.Z.getFirstMonthDate($e.Z.addDateInterval(r,"month",n?-2:-1)),o=$e.Z.getLastMonthDate($e.Z.addDateInterval(r,"month",n?1:a)),l=new Date(Math.max(s,e)),d=new Date(Math.min(o,t));return[...$e.Z.getDatesOfInterval(l,d,864e5),d]}_cellHoverHandler(e){var t=this._isMaxZoomLevel(),[r,a]=this._getValue(),{_allowChangeSelectionOrder:n,_currentSelection:s}=this.calendar.option();if(t){if(!r||a||n&&"startDate"===s){if(r||!a||n&&"endDate"===s){if(r&&a){if("startDate"===s&&e.value<r)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,r));if("endDate"===s&&e.value>a)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(a,e.value))}}else if(e.value<a)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,a))}else if(e.value>r)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(r,e.value));this._updateViewsOption("hoveredRange",[])}}_weekNumberClickHandler(e){var{rowDates:t,event:r}=e,a=t.filter(s=>!this._isDateDisabled(s));this.dateValue(a.length?[a[0],a[a.length-1]]:[null,null],r)}}},vw=Qa.Z.inherit({_activeStateUnit:".dx-calendar-cell",_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,viewsCount:1,zoomLevel:"month",maxZoomLevel:"month",minZoomLevel:"century",selectionMode:"single",selectWeekOnClick:!0,showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_supportedKeys:function(){return(0,N.l)(this.callBase(),{rightArrow:function(i){i.preventDefault(),(0,ce.j1)(i)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow:function(i){i.preventDefault(),(0,ce.j1)(i)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow:function(i){if(i.preventDefault(),(0,ce.j1)(i))this._navigateUp();else{if(Yt.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow:function(i){if(i.preventDefault(),(0,ce.j1)(i))this._navigateDown();else{if(Yt.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home:function(i){i.preventDefault();var e=this.option("zoomLevel"),t=this.option("currentDate"),r=this._dateOption("min");if(!this._view.isDateDisabled(t)){var a=$e.Z.sameView(e,t,r)?r:$e.Z.getViewFirstCellDate(e,t);this._moveToClosestAvailableDate(a)}},end:function(i){i.preventDefault();var e=this.option("zoomLevel"),t=this.option("currentDate"),r=this._dateOption("max");if(!this._view.isDateDisabled(t)){var a=$e.Z.sameView(e,t,r)?r:$e.Z.getViewLastCellDate(e,t);this._moveToClosestAvailableDate(a)}},pageUp:function(i){i.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown:function(i){i.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:J.ZT,enter:this._enterKeyHandler})},_enterKeyHandler:function(i){if(this._isMaxZoomLevel()){if(!this._view.isDateDisabled(this.option("currentDate"))){var e=this._updateTimeComponent(this.option("currentDate"));this._selectionStrategy.selectValue(e,i)}}else this._navigateDown()},_getSerializationFormat:function(i){var e=this.option(i||"value");return this.option("dateSerializationFormat")?this.option("dateSerializationFormat"):(0,m.kE)(e)?"number":(0,m.HD)(e)?hi.Z.getDateSerializationFormat(e):void 0},_convertToDate:function(i){return hi.Z.deserializeDate(i)},_dateValue:function(i,e){if(e){if("keydown"===e.type){var t=this._view._getContouredCell().get(0);e.target=t}this._saveValueChangeEvent(e)}this._dateOption("value",i)},_dateOption:function(i,e){var t="value"===i&&!this._isSingleMode(),r=this.option("value");if(1===arguments.length)return t?(r??[]).map(s=>this._convertToDate(s)):this._convertToDate(this.option(i));var a=this._getSerializationFormat(i),n=t?e?.map(s=>hi.Z.serializeDate(s,a))||[]:hi.Z.serializeDate(e,a);this.option(i,n)},_isSingleMode:function(){return"single"===this.option("selectionMode")},_shiftDate:function(i,e,t,r){switch(i){case"month":e.setDate(e.getDate()+t*r);break;case"year":e.setMonth(e.getMonth()+t*r);break;case"decade":e.setFullYear(e.getFullYear()+t*r);break;case"century":e.setFullYear(e.getFullYear()+10*t*r)}},_moveCurrentDateByOffset:function(i){var e=this.option("currentDate"),t=new Date(e),r=this.option("zoomLevel");this._shiftDate(r,t,i,1);for(var a=this._getMaxDate(),n=this._getMinDate(),s=this._areDatesInNeighborView(r,t,e),o=(0,Li.Z2)(t,n,a)&&s,l=new Date(t);o;){if(!this._view.isDateDisabled(l)){t=l;break}this._shiftDate(r,l,i,1),s=this._areDatesInNeighborView(r,l,e),o=(0,Li.Z2)(l,n,a)&&s}if(this._view.isDateDisabled(e)||this._view.isDateDisabled(t)){var d=i>0?1:-1;(1===d?this._isNextViewDisabled():this._isPrevViewDisabled())?this._moveToClosestAvailableDate(t):this._waitRenderView(d)}else this._skipNavigate=!0,this.option("currentDate",t)},_isNextViewDisabled(){return this._navigator._nextButton.option("disabled")},_isPrevViewDisabled(){return this._navigator._prevButton.option("disabled")},_areDatesInSameView(i,e,t){switch(i){case"month":return e.getMonth()===t.getMonth();case"year":return e.getYear()===t.getYear();case"decade":return parseInt(e.getYear()/10)===parseInt(t.getYear()/10);case"century":return parseInt(e.getYear()/100)===parseInt(t.getYear()/100)}},_areDatesInNeighborView(i,e,t){switch(i){case"month":return r=e.getMonth(),a=t.getMonth(),n=Math.abs(r-a),Math.min(n,12-n)<=1;case"year":return Math.abs(e.getYear()-t.getYear())<=1;case"decade":return Math.abs(e.getYear()-t.getYear())<=10;case"century":return Math.abs(e.getYear()-t.getYear())<=100}var r,a,n},_moveToClosestAvailableDate:function(){var s,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("currentDate"),e=new Date(i),t=this.option("zoomLevel"),r=!this._isDateNotAvailable(e),a=r,n=r,l=new Date(e),d=new Date(e);do{if(a){e=l;break}if(n){e=d;break}this._shiftDate(t,l,1,1),this._shiftDate(t,d,1,-1),s=this._areDatesInSameView(t,l,i),o=this._areDatesInSameView(t,d,i),a=s&&!this._isDateNotAvailable(l),n=o&&!this._isDateNotAvailable(d)}while(s||o);this.option("currentDate",e)},_isDateNotAvailable:function(i){var e=this._getMaxDate(),t=this._getMinDate();return!(0,Li.Z2)(i,t,e)||this._view.isDateDisabled(i)},_init:function(){this.callBase(),this._initSelectionStrategy(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_initSelectionStrategy:function(){var i=this._getSelectionStrategyName();(!this._selectionStrategy||this._selectionStrategy.NAME!==i)&&(this._selectionStrategy=new(0,JV[i])(this))},_refreshSelectionStrategy:function(){this._initSelectionStrategy(),this._selectionStrategy.restoreValue(),this._refresh()},_getSelectionStrategyName:function(){switch(this.option("selectionMode")){case"multiple":return"MultipleSelection";case"range":return"RangeSelection";default:return"SingleSelection"}},_correctZoomLevel:function(){var i=this.option("minZoomLevel"),e=this.option("maxZoomLevel"),t=this.option("zoomLevel");fo[e]<fo[i]||(fo[t]>fo[e]?this.option("zoomLevel",e):fo[t]<fo[i]&&this.option("zoomLevel",i))},_initCurrentDate:function(){var i,e=null!==(i=this._getNormalizedDate(this._selectionStrategy.getDefaultCurrentDate()))&&void 0!==i?i:this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",e)},_getNormalizedDate:function(i){return i=$e.Z.normalizeDate(i,this._getMinDate(),this._getMaxDate()),(0,m.$K)(i)?this._getDate(i):i},_initActions:function(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates:function(){this._templateManager.addDefaultTemplates({cell:new wf.k(function(i){var e=i.model;(0,b.Z)(i.container).append((0,b.Z)("<span>").text(e&&e.text||String(e)))})}),this.callBase()},_updateCurrentDate:function(i){if(Yt.Z.isAnimating(this._$viewsWrapper)&&Yt.Z.stop(this._$viewsWrapper,!0),this._getMinDate()>this._getMaxDate())this.option("currentDate",new Date);else{var r=this._getNormalizedDate(i);if(i.getTime()===r.getTime()){var a=this._getViewsOffset(this._view.option("date"),r);0!==a&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(a=0),this._view&&0!==a&&!this._suppressNavigation?this._additionalView?a>2||a<-1?(this._refreshViews(),this._setViewContoured(r),this._updateAriaId(r),this._renderNavigator()):1===a&&this._skipNavigate?(this._setViewContoured(r),this._updateAriaId(r)):this._navigate(a,r):this._navigate(a,r):(this._renderNavigator(),this._setViewContoured(r),this._updateAriaId(r)),this._skipNavigate=!1}else this.option("currentDate",new Date(r))}},_isAdditionalViewDate(i){return!!this._additionalView&&i>=this._additionalView._getFirstAvailableDate()},_getActiveView:function(i){return this._isAdditionalViewDate(i)?this._additionalView:this._view},_setViewContoured:function(i){var e;(this.option("skipFocusCheck")||(0,b.Z)(this._$viewsWrapper).is(":focus"))&&(this._view.option("contouredDate",null),null===(e=this._additionalView)||void 0===e||e.option("contouredDate",null),(this._isAdditionalViewDate(i)?this._additionalView:this._view).option("contouredDate",i))},_getMinDate:function(){return this.option("_rangeMin")||(this.min||(this.min=this._dateOption("min")||new Date(1e3,0)),this.min)},_getMaxDate:function(){return this.option("_rangeMax")||(this.max||(this.max=this._dateOption("max")||new Date(3e3,0)),this.max)},_getViewsOffset:function(i,e){var r,t=this.option("zoomLevel");if("month"===t)return this._getMonthsOffset(i,e);switch(t){case"century":r=100;break;case"decade":r=10;break;default:r=1}return parseInt(e.getFullYear()/r)-parseInt(i.getFullYear()/r)},_getMonthsOffset:function(i,e){return 12*(e.getFullYear()-i.getFullYear())+(e.getMonth()-i.getMonth())},_waitRenderView:function(i){if(!this._alreadyViewRender){this._alreadyViewRender=!0;var e=this._getDateByOffset(i*this._getRtlCorrection());this._moveToClosestAvailableDate(e),this._waitRenderViewTimeout=setTimeout(()=>{this._alreadyViewRender=!1})}},_getRtlCorrection:function(){return this.option("rtlEnabled")?-1:1},_getDateByOffset:function(i,e){var t,r=(e=this._getDate(null!==(t=e)&&void 0!==t?t:this.option("currentDate"))).getDate(),a=$e.Z.getDifferenceInMonth(this.option("zoomLevel"))*i;e.setDate(1),e.setMonth(e.getMonth()+a);var n=$e.Z.getLastMonthDate(e).getDate();return e.setDate(r>n?n:r),e},_focusTarget:function(){return this._$viewsWrapper},_focusEventTarget(){return this.$element()},_initMarkup:function(){this._renderSubmitElement();var i=this.$element();i.addClass(Bf),i.toggleClass("dx-calendar-range","range"===this.option("selectionMode")),this._renderBody(),i.append(this.$body),this._renderViews(),this._renderNavigator(),this.callBase(),this._renderEvents(),i.prepend(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._selectionStrategy.updateAriaSelected(),this._updateAriaId(),this._updateNavigatorLabels(),this.setAria("role","application"),this._moveToClosestAvailableDate()},_render:function(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody:function(){this._$viewsWrapper||(this.$body=(0,b.Z)("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=(0,b.Z)("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))},_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews:function(){this.$element().addClass(cw+"-"+this.option("zoomLevel"));var{currentDate:i,viewsCount:e}=this.option();if(this.$element().toggleClass("dx-calendar-multiview",e>1),this._view=this._renderSpecificView(i),(0,We.Ym)()){var t=this._getDateByOffset(-1,i);this._beforeView=this._isViewAvailable(t)?this._renderSpecificView(t):null;var r=this._getDateByOffset(e,i);r.setDate(1),this._afterView=this._isViewAvailable(r)?this._renderSpecificView(r):null}e>1&&(this._additionalView=this._renderSpecificView(this._getDateByOffset(1,i))),this._translateViews()},_renderSpecificView:function(i){var{zoomLevel:e}=this.option(),t=LV[e],r=(0,b.Z)("<div>").appendTo(this._$viewsWrapper),a=this._viewConfig(i);return this._createComponent(r,t,a)},_viewConfig:function(i){var e,t=this.option("disabledDates");return t=(0,m.mf)(t)?this._injectComponent(t.bind(this)):t,(0,ye.Z)({},this._selectionStrategy.getViewOptions(),{date:i,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:null!==(e=this.option("firstDayOfWeek"))&&void 0!==e?e:vt.Z.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),selectWeekOnClick:this.option("selectWeekOnClick"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:t,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")})},_renderEvents(){k.Z.off(this._$viewsWrapper,_w),"range"===this.option("selectionMode")&&k.Z.on(this._$viewsWrapper,_w,null,i=>{this._updateViewsOption("hoveredRange",[])})},_injectComponent:function(i){var e=this;return function(t){return(0,N.l)(t,{component:e}),i(t)}},_isViewAvailable:function(i){var e=this.option("zoomLevel"),t=$e.Z.getViewMinBoundaryDate(e,this._getMinDate()),r=$e.Z.getViewMaxBoundaryDate(e,this._getMaxDate());return $e.Z.dateInRange(i,t,r)},_translateViews:function(){var{viewsCount:i}=this.option();(0,oi.pB)(this._view.$element(),{left:0,top:0}),this._moveViewElement(this._beforeView,-1),this._moveViewElement(this._afterView,i),this._moveViewElement(this._additionalView,1)},_moveViewElement(i,e){i&&(0,oi.pB)(i.$element(),{left:this._getViewPosition(e),top:0})},_getViewPosition:function(i){return 100*i*(this.option("rtlEnabled")?-1:1)+"%"},_cellClickHandler:function(i){var e=this.option("zoomLevel"),t=$e.Z.getViewDown(e),r=this._isMaxZoomLevel();if(t&&!r)this._navigateDown(i.event.currentTarget);else{var a=this._updateTimeComponent(i.value);this._selectionStrategy.selectValue(a,i.event),this._cellClickAction(i)}},_updateTimeComponent:function(i){var e=new Date(i),t=this._dateOption("value");return t&&this._isSingleMode()&&(e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds())),e},_isMaxZoomLevel:function(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown:function(i){var e=this.option("zoomLevel");if(!this._isMaxZoomLevel()){var t=$e.Z.getViewDown(e);if(t){var r=this._view.option("contouredDate")||this._view.option("date");i&&(r=(0,b.Z)(i).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",r),this.option("zoomLevel",t),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))}}},_renderNavigator:function(){this._navigator||(this._navigator=new mV((0,b.Z)("<div>"),this._navigatorConfig())),this._navigator.option("text",this._getViewsCaption(this._view,this._additionalView)),this._updateButtonsVisibility()},_navigatorConfig:function(){var{focusStateEnabled:i,rtlEnabled:e}=this.option();return{text:this._getViewsCaption(this._view,this._additionalView),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),focusStateEnabled:i,rtlEnabled:e,tabIndex:void 0}},_navigatorClickHandler:function(i){var{currentDate:e,viewsCount:t}=this.option(),r=i.direction;if(t>1){var a=this._isAdditionalViewDate(e);(a&&r<0||!a&&r>0)&&(r*=2)}var s=this._getDateByOffset(r,e);this._moveToClosestAvailableDate(s)},_navigateUp:function(){var i=this.option("zoomLevel"),e=$e.Z.getViewUp(i);!e||this._isMinZoomLevel(i)||(this.option("zoomLevel",e),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel:function(i){var e=this._getMinDate(),t=this._getMaxDate();return $e.Z.sameView(i,e,t)||this.option("minZoomLevel")===i},_updateButtonsVisibility:function(){this._navigator.toggleButton("next",!(0,m.$K)(this._afterView)),this._navigator.toggleButton("prev",!(0,m.$K)(this._beforeView))},_renderSwipeable:function(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),Yu,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler:function(i){Yt.Z.stop(this._$viewsWrapper,!0);var{viewsCount:e}=this.option();this._toggleGestureCoverCursor("grabbing"),i.event.maxLeftOffset=this._getRequiredView("next")?1/e:0,i.event.maxRightOffset=this._getRequiredView("prev")?1/e:0},_toggleGestureCoverCursor:function(i){(0,b.Z)(".".concat("dx-gesture-cover")).css("cursor",i)},_getRequiredView:function(i){var e,t=this.option("rtlEnabled");return"next"===i?e=t?this._beforeView:this._afterView:"prev"===i&&(e=t?this._afterView:this._beforeView),e},_swipeUpdateHandler:function(i){var e=i.event.offset;(0,oi.pB)(this._$viewsWrapper,{left:e*this._viewWidth(),top:0}),this._updateNavigatorCaption(e)},_swipeEndHandler:function(i){this._toggleGestureCoverCursor("auto");var{currentDate:e,rtlEnabled:t}=this.option(),r=i.event.targetOffset,a=r?r/Math.abs(r):0,s=this._isAdditionalViewDate(e)&&(t?-1===a:1===a);if(0!==a){var o=-a*this._getRtlCorrection()*(s?2:1),l=this._getDateByOffset(o);this._isDateInInvalidRange(l)&&(l=a>=0?new Date(this._getMinDate()):new Date(this._getMaxDate())),this.option("currentDate",l)}else this._animateWrapper(0,250)},_viewWidth:function(){return this._viewWidthValue||(this._viewWidthValue=(0,oe.dz)(this.$element())/this.option("viewsCount")),this._viewWidthValue},_updateNavigatorCaption:function(i){i*=this._getRtlCorrection();var t,r,e=this.option("viewsCount")>1;i>.5&&this._beforeView?(t=this._beforeView,r=e&&this._view):i<-.5&&this._afterView?(t=e?this._additionalView:this._afterView,r=e?this._afterView:null):(t=this._view,r=e?this._additionalView:null),this._navigator.option("text",this._getViewsCaption(t,r))},_getViewsCaption:function(i,e){var t=i.getNavigatorCaption(),{viewsCount:r}=this.option();if(r>1&&e){var a=e.getNavigatorCaption();t="".concat(t," - ").concat(a)}return t},_isDateInInvalidRange:function(i){if(!this._view.isBoundary(i)){var e=this._getMinDate(),t=this._getMaxDate(),r=$e.Z.normalizeDate(i,e,t);return r===e||r===t}},_renderFooter:function(){var i=this.option("showTodayButton");if(i){var e=this._createComponent((0,b.Z)("<div>"),pr.Z,{focusStateEnabled:this.option("focusStateEnabled"),text:ae.Z.format("dxCalendar-todayButtonText"),onClick:t=>{this._toTodayView(t)},type:(0,_t.dC)()?"normal":"default",stylingMode:(0,_t.dC)()?"outlined":"text",integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=(0,b.Z)("<div>").addClass("dx-calendar-footer").append(e),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",i)},_renderSubmitElement:function(){this._$submitElement=(0,b.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(i){var e=this._convertToDate(i);this._getSubmitElement().val(hi.Z.serializeDate(e,"yyyy-MM-dd"))},_getSubmitElement:function(){return this._$submitElement},_animateShowView:function(){Yt.Z.stop(this._view.$element(),!0),this._popAnimationView(this._view,.6,1,250),this.option("viewsCount")>1&&(Yt.Z.stop(this._additionalView.$element(),!0),this._popAnimationView(this._additionalView,.6,1,250))},_popAnimationView:function(i,e,t,r){return Yt.Z.animate(i.$element(),{type:"pop",from:{scale:e,opacity:e},to:{scale:t,opacity:t},duration:r})},_navigate:function(i,e){if(0!==i&&1!==Math.abs(i)&&this._isViewAvailable(e)){var t=this._renderSpecificView(e);i>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=t):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=t),this._translateViews()}var n=-this._getRtlCorrection()*(i>0?1:i<0?-1:0)*this._viewWidth();this._$viewsWrapper.position().left!==n&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(i,e):this._animateWrapper(n,250).done(this._wrapperAnimationEndHandler.bind(this,i,e)))},_animateWrapper:function(i,e){return Yt.Z.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:i},duration:e})},_getDate:i=>new Date(i),_toTodayView:function(i){var e=new Date;this._isMaxZoomLevel()?this._selectionStrategy.selectValue(e,i.event):(this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._selectionStrategy.selectValue(e,i.event),this._animateShowView(),this._preventViewChangeAnimation=!1)},_wrapperAnimationEndHandler:function(i,e){this._rearrangeViews(i),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(e),this._updateAriaId(e),this._selectionStrategy.updateAriaSelected()},_rearrangeViews:function(i){var e;if(0!==i){var r,a,n,s,o,{viewsCount:t}=this.option();if(i<0?(r=1,a="_beforeView",n="_afterView",s="_view",o=1===t?"_view":"_additionalView"):(r=-1,a="_afterView",n="_beforeView",s=1===t?"_view":"_additionalView",o="_view"),this[a]){var l=this[a].option("date");null===(e=this[n])||void 0===e||e.$element().remove(),this[n]=this._renderSpecificView(this._getDateByOffset(r*t,l)),this[o].$element().remove(),1===t?this[o]=this[a]:(this[o]=this[s],this[s]=this[a]);var d=this._getDateByOffset(-r,l);this[a]=this._isViewAvailable(d)?this._renderSpecificView(d):null}}},_resetLocation:function(){(0,oi.pB)(this._$viewsWrapper,{left:0,top:0})},_clean:function(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache:function(){delete this._viewWidthValue},_disposeViews:function(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._additionalView&&this._additionalView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._additionalView,delete this._beforeView,delete this._afterView,delete this._skipNavigate},_dispose:function(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews:function(){this._resetActiveState(),this._disposeViews(),this._renderViews()},_visibilityChanged:function(){this._translateViews()},_shouldSkipFocusEvent(i){var{target:e,relatedTarget:t}=i;return(0,b.Z)(e).parents(".".concat(Bf)).length&&(0,b.Z)(t).parents(".".concat(Bf)).length},_focusInHandler:function(i){(0,b.Z)(i.target).is(this._$viewsWrapper)&&this._setViewContoured(this.option("currentDate")),!this._shouldSkipFocusEvent(i)&&(this.callBase.apply(this,arguments),this._toggleFocusClass(!0,this.$element()))},_focusOutHandler:function(i){var e;(0,b.Z)(i.target).is(this._$viewsWrapper)&&(this._view.option("contouredDate",null),null===(e=this._additionalView)||void 0===e||e.option("contouredDate",null)),this._shouldSkipFocusEvent(i)||(this.callBase.apply(this,arguments),this._toggleFocusClass(!1,this.$element()))},_updateViewsOption:function(i,e){var t,r,a;this._view.option(i,e),null===(t=this._additionalView)||void 0===t||t.option(i,e),null===(r=this._beforeView)||void 0===r||r.option(i,e),null===(a=this._afterView)||void 0===a||a.option(i,e)},_setViewsMinOption:function(i){this._restoreViewsMinMaxOptions(),this.option("_rangeMin",this._convertToDate(i)),this._updateViewsOption("min",this._getMinDate())},_setViewsMaxOption:function(i){this._restoreViewsMinMaxOptions(),this.option("_rangeMax",this._convertToDate(i)),this._updateViewsOption("max",this._getMaxDate())},_restoreViewsMinMaxOptions:function(){this._resetActiveState(),this.option({_rangeMin:null,_rangeMax:null}),this._updateViewsOption("min",this._getMinDate()),this._updateViewsOption("max",this._getMaxDate())},_updateNavigatorLabels:function(){var i=this.option("zoomLevel");i=i.charAt(0).toUpperCase()+i.slice(1);var e=this._navigator._caption.option("text"),t=ae.Z.format("dxCalendar-previous".concat(i,"ButtonLabel")),r=ae.Z.format("dxCalendar-caption".concat(i,"Label")),a=ae.Z.format("dxCalendar-next".concat(i,"ButtonLabel"));this.setAria("label",t,this._navigator._prevButton.$element()),this.setAria("label","".concat(e,". ").concat(r),this._navigator._caption.$element()),this.setAria("label",a,this._navigator._nextButton.$element())},_updateAriaSelected:function(i,e){e.forEach(t=>{this.setAria("selected",void 0,this._view._getCellByDate(t))}),i.forEach(t=>{this.setAria("selected",!0,this._view._getCellByDate(t))}),this.option("viewsCount")>1&&(e.forEach(t=>{this.setAria("selected",void 0,this._additionalView._getCellByDate(t))}),i.forEach(t=>{this.setAria("selected",!0,this._additionalView._getCellByDate(t))}))},_updateAriaId:function(i){var e;i=null!==(e=i)&&void 0!==e?e:this.option("currentDate");var t="dx-"+new Ri.Z,a=this._getActiveView(i)._getCellByDate(i);this.setAria("id",t,a),this.setAria("activedescendant",t),this._onContouredChanged(t)},_suppressingNavigation:function(i,e){this._suppressNavigation=!0,i.apply(this,e),delete this._suppressNavigation},_optionChanged:function(i){var{value:e,previousValue:t}=i;switch(i.name){case"width":this.callBase(i),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"selectionMode":this._refreshSelectionStrategy(),this._initCurrentDate();break;case"selectWeekOnClick":case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"focusStateEnabled":case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(t)),this._updateCurrentDate(e);break;case"zoomLevel":this.$element().removeClass(cw+"-"+t),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId(),this._updateNavigatorLabels();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":this._selectionStrategy.processValueChanged(e,t),this._setSubmitValue(e),this.callBase(i);break;case"viewsCount":this._refreshViews(),this._renderNavigator();break;case"onCellClick":this._view.option("onCellClick",e);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"skipFocusCheck":break;default:this.callBase(i)}},getContouredDate:function(){return this._view.option("contouredDate")}});(0,It.Z)("dxCalendar",vw);const QV=vw;var Qu=dr.Z.abstract,eN=dr.Z.inherit({ctor:function(i){this.dateBox=i},widgetOption:function(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget:function(i){i=i||(0,b.Z)("<div>"),this._widget=this._createWidget(i),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget:function(i){var e=this._getWidgetName(),t=this._getWidgetOptions();return this.dateBox._createComponent(i,e,t)},_getWidgetOptions:Qu,_getWidgetName:Qu,getDefaultOptions:function(){return{mode:"text"}},getDisplayFormat:Qu,supportedKeys:J.ZT,getKeyboardListener:J.ZT,customizeButtons:J.ZT,getParsedText:function(i,e){return vt.Z.parse(i,e)||vt.Z.parse(i)},renderInputMinMax:J.ZT,renderOpenedState:function(){this._updateValue()},popupConfig:Qu,_dimensionChanged:function(){var i;null===(i=this._getPopup())||void 0===i||i.repaint()},renderPopupContent:function(){var i=this._getPopup();this._renderWidget();var e=i.$content().parent();k.Z.off(e,"mousedown"),k.Z.on(e,"mousedown",this._preventFocusOnPopup.bind(this))},_preventFocusOnPopup:function(i){i.preventDefault()},_getWidgetContainer:function(){return this._getPopup().$content()},_getPopup:function(){return this.dateBox._popup},popupShowingHandler:J.ZT,popupHiddenHandler:J.ZT,_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:J.ZT,getDefaultDate:function(){return new Date},textChangedHandler:J.ZT,renderValue:function(){this.dateBox.option("opened")&&this._updateValue()},getValue:function(){return this._widget.option("value")},isAdaptivityChanged:function(){return!1},dispose:function(){var i=this._getPopup();i&&i.$content().empty()},dateBoxValue:function(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}});const eh=eN;var iN=eh.inherit({NAME:"Calendar",getDefaultOptions:function(){return(0,N.l)(this.callBase(),{todayButtonText:ae.Z.format("dxCalendar-todayButtonText")})},supportedKeys:function(){var i=function(e){return!!this.option("opened")&&(e.preventDefault(),!0)};return{rightArrow:function(){if(this.option("opened"))return!0},leftArrow:function(){if(this.option("opened"))return!0},enter:function(e){if(this.dateBox.option("opened")){if(e.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){var t=this._getContouredValue(),r=this._lastActionElement,a=this._closeDropDownByEnter();return a&&t&&"calendar"===r&&this.dateBoxValue(t,e),a&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(e),!a}return!0}this.dateBox._valueChangeEventHandler(e)}.bind(this),home:i,end:i}},getDisplayFormat:function(i){return i||"shortdate"},_closeDropDownByEnter:()=>!0,_getWidgetName:function(){return QV},_getContouredValue:function(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions:function(){var i=this.dateBox.option("disabledDates");return(0,N.l)(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,selectionMode:"single",dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),disabledDates:(0,m.mf)(i)?this._injectComponent(i.bind(this.dateBox)):i,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent:function(i){var e=this;return function(t){return(0,N.l)(t,{component:e.dateBox}),i(t)}},_refreshActiveDescendant:function(i){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",i.actionValue)},_getTodayButtonConfig(){var i=this.dateBox.option("buttonsLocation"),t="default"===i?["bottom","center"]:(0,J.Um)(i),r=(0,_t.x2)()?"text":"outlined";return{widget:"dxButton",toolbar:t[0],location:"after"===t[1]?"before":t[1],options:{onClick:a=>{this._widget._toTodayView(a)},text:this.dateBox.option("todayButtonText"),elementAttr:{class:"dx-button-today"},stylingMode:r}}},_isCalendarVisible:function(){var{calendarOptions:i}=this.dateBox.option();return(0,m.Qr)(i)||!1!==i.visible},_getPopupToolbarItems(i){return"useButtons"===this.dateBox.option("applyValueMode")&&this._isCalendarVisible()?[this._getTodayButtonConfig(),...i]:i},popupConfig:function(i){return(0,N.l)(!0,i,{position:{collision:"flipfit flip"},width:"auto"})},_valueChangedHandler:function(i){var e=i.value,t=i.previousValue;$e.Z.sameDate(e,t)&&$e.Z.sameHoursAndMinutes(e,t)||"instantly"===this.dateBox.option("applyValueMode")&&this.dateBoxValue(this.getValue(),i.event)},_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler:function(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler:function(i){var e=this.dateBox;"instantly"===e.option("applyValueMode")&&(e.option("opened",!1),this.dateBoxValue(this.getValue(),i.event))}});const gw=iN;class rN{constructor(e){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=e??bu}get isHorizontal(){return this.direction===bC||this.direction===Op}get isVertical(){return this.direction===bu||this.direction===Op}get isBoth(){return this.direction===Op}}var mw="dx-dateview-item";class Cw extends xC{_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){k.Z.on((0,b.Z)(this.container()),"dxmousewheel",e=>{this._isWheelScrolled=!0})}_renderContainerClick(){if(this.option("showOnClick")){var e=(0,ce.V4)(Pt.u,this.NAME),t=this._createActionByOption("onClick");k.Z.off((0,b.Z)(this.container()),e),k.Z.on((0,b.Z)(this.container()),e,function(r){t({event:r})})}}_renderItems(){var e=this.option("items")||[],t=(0,b.Z)();(0,b.Z)(this.content()).empty(),e.forEach(function(r){t=t.add((0,b.Z)("<div>").addClass(mw).append(r))}),(0,b.Z)(this.content()).append(t),this._$items=t,this.update()}_renderSelectedItemFrame(){(0,b.Z)("<div>").addClass("dx-dateview-item-selected-frame").append((0,b.Z)("<div>").addClass("dx-dateview-item-selected-border")).appendTo((0,b.Z)(this.container()))}_renderSelectedValue(e){var t=this._fitIndex(e??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(t)}),this._renderActiveStateItem()}_fitIndex(e){var r=(this.option("items")||[]).length;return e>=r?r-1:e<0?0:e}_getItemPosition(e){return Math.round(this._itemHeight()*e)}_renderItemsClick(){var e=this._getItemSelector(),t=(0,ce.V4)(Pt.u,this.NAME);k.Z.off(this.$element(),t,e),k.Z.on(this.$element(),t,e,this._itemClickHandler.bind(this))}_getItemSelector(){return"."+mw}_itemClickHandler(e){this.option("selectedIndex",this._itemElementIndex(e.currentTarget))}_itemElementIndex(e){return this._itemElements().index(e)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){var e=this.option("selectedIndex");(0,j.S6)(this._$items,function(t){(0,b.Z)(this).toggleClass("dx-dateview-item-selected",e===t)})}_shouldScrollToNeighborItem(){return"desktop"===at.Z.real().deviceType&&this._isWheelScrolled}_moveTo(e){var{top:t,left:r}=function aN(i,e){if((0,m.PO)(i)){var t=(0,J.IS)(i.left,i.x),r=(0,J.IS)(i.top,i.y);return{left:(0,m.$K)(t)?t:void 0,top:(0,m.$K)(r)?r:void 0}}var{isHorizontal:a,isVertical:n}=new rN(e);return{left:a&&(0,m.$K)(i)?i:void 0,top:n&&(0,m.$K)(i)?i:void 0}}(e),a=this.scrollOffset(),n={x:a.left-r,y:a.top-t};if(this._isVisible()&&(n.x||n.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){var s=this;Yt.Z.stop((0,b.Z)(this.content())),Yt.Z.animate((0,b.Z)(this.content()),{duration:200,type:"slide",to:{top:Math.floor(n.y)},complete(){(0,oi.Kx)((0,b.Z)(s.content())),s.handleMove({delta:n})}}),delete this._animation}else this.handleMove({delta:n})}_validate(e){return this._moveIsAllowed(e)}_fitSelectedIndexInRange(e){var t=this.option("items").length;return Math.max(Math.min(e,t-1),0)}_isInNullNeighborhood(e){return-.1<=e&&e<=.1}_getSelectedIndexAfterScroll(e){var a=this.scrollOffset().top-e*this._itemHeight();return this._isInNullNeighborhood(a)?e:this._fitSelectedIndexInRange(e+(a>0?1:-1))}_getNewSelectedIndex(e){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(e);this._animation=!0;var t=this.scrollOffset().top/this._itemHeight();return Math.round(t)}_endActionHandler(){var e=this.option("selectedIndex"),t=this._getNewSelectedIndex(e);t===e?this._renderSelectedValue(t):this.option("selectedIndex",t),this._isWheelScrolled=!1}_itemHeight(){var e=this._$items.first();return(0,oe.Cr)(e)}_toggleActive(e){this.$element().toggleClass("dx-state-active",e)}_isVisible(){return(0,b.Z)(this.container()).is(":visible")}_fireSelectedIndexChanged(e,t){this._selectedIndexChanged({value:e,previousValue:t,event:void 0})}_visibilityChanged(e){super._visibilityChanged(e),this._visibilityChangedHandler(e)}_visibilityChangedHandler(e){e&&(this._visibilityTimer=setTimeout(()=>{this._renderSelectedValue(this.option("selectedIndex"))})),this.toggleActiveState(!1)}toggleActiveState(e){this.$element().toggleClass("dx-dateviewroller-current",e)}_refreshSelectedIndex(){var e=this.option("selectedIndex"),t=this._fitIndex(e);t===e?this._renderActiveStateItem():this.option("selectedIndex",t)}_optionChanged(e){switch(e.name){case"selectedIndex":this._fireSelectedIndexChanged(e.value,e.previousValue),this._renderSelectedValue(e.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(e)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}(0,It.Z)("dxDateViewRoller",Cw);const hN=Cw;var Vf="dx-dateview",ww=Qa.Z.inherit({_valueOption:function(){var i=this.option("value"),e=new Date(i);return!i||isNaN(e)?this._getDefaultDate():e},_getDefaultDate:function(){var i=new Date;return"date"===this.option("type")?new Date(i.getFullYear(),i.getMonth(),i.getDate()):i},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{minDate:Wt.MIN_DATEVIEW_DEFAULT_DATE,maxDate:Wt.MAX_DATEVIEW_DEFAULT_DATE,type:"date",value:new Date,applyCompactClass:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(i){return"desktop"!==i.deviceType},options:{applyCompactClass:!0}}])},_render:function(){this.callBase(),this.$element().addClass(Vf),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses:function(i,e){this.$element().addClass(Vf+"-"+i),e&&this.$element().removeClass(Vf+"-"+e)},_toggleCompactClass:function(){this.$element().toggleClass("dx-dateview-compact",this.option("applyCompactClass"))},_wrapper:function(){return this._$wrapper},_renderContentImpl:function(){this._$wrapper=(0,b.Z)("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers:function(){this._$rollersContainer||(this._$rollersContainer=(0,b.Z)("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};var i=this;(0,j.S6)(i._rollerConfigs,function(e){var t=(0,b.Z)("<div>").appendTo(i._$rollersContainer).addClass("dx-dateviewroller-"+i._rollerConfigs[e].type);i._rollers[i._rollerConfigs[e].type]=i._createComponent(t,hN,{items:i._rollerConfigs[e].displayItems,selectedIndex:i._rollerConfigs[e].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart:function(r){var a=r.component;a._toggleActive(!0),i._setActiveRoller(i._rollerConfigs[e],a.option("selectedIndex"))},onEnd:function(r){r.component._toggleActive(!1)},onClick:function(r){var a=r.component;a._toggleActive(!0),i._setActiveRoller(i._rollerConfigs[e],a.option("selectedIndex")),i._setRollerState(i._rollerConfigs[e],a.option("selectedIndex")),a._toggleActive(!1)},onSelectedIndexChanged:function(r){i._setRollerState(i._rollerConfigs[e],r.component.option("selectedIndex"))}})}),i._$rollersContainer.appendTo(i._wrapper())},_createRollerConfigs:function(i){var e=this;i=i||e.option("type"),e._rollerConfigs={},vt.Z.getFormatParts(Wt.FORMATS_MAP[i]).forEach(function(t){e._createRollerConfig(t)})},_createRollerConfig:function(i){for(var e=Wt.DATE_COMPONENTS_INFO[i],t=this._calculateRollerConfigValueRange(i),r=t.startValue,a=t.endValue,n=e.formatter,s=this._getCurrentDate(),o={type:i,setValue:e.setter,valueItems:[],displayItems:[],getIndex:function(d){return d[e.getter]()-r}},l=r;l<=a;l++)o.valueItems.push(l),o.displayItems.push(n(l,s));o.selectedIndex=o.getIndex(s),this._rollerConfigs[i]=o},_setActiveRoller:function(i){var e=i&&this._rollers[i.type];(0,j.S6)(this._rollers,function(){this.toggleActiveState(this===e)})},_updateRollersPosition:function(){var i=this;(0,j.S6)(this._rollers,function(e){var t=i._rollerConfigs[e].getIndex(i._getCurrentDate());this.option("selectedIndex",t)})},_setRollerState:function(i,e){if(e!==i.selectedIndex){var t=i.valueItems[e],r=i.setValue,a=new Date(this._getCurrentDate()),n=a.getDate(),s=this.option("minDate"),o=this.option("maxDate");"month"===i.type?n=Math.min(n,Wt.getMaxMonthDay(a.getFullYear(),t)):"year"===i.type&&(n=Math.min(n,Wt.getMaxMonthDay(t,a.getMonth()))),a.setDate(n),a[r](t);var l=$e.Z.normalizeDate(a,s,o);a=Wt.mergeDates(l,a,"time"),a=$e.Z.normalizeDate(a,s,o),this.option("value",a),i.selectedIndex=e}"year"===i.type&&this._refreshRollers(),"month"===i.type&&(this._refreshRoller("day"),this._refreshRoller("hours"))},_refreshRoller:function(i){var e=this._rollers[i];if(e){this._createRollerConfig(i);var t=this._rollerConfigs[i];("day"===i||t.displayItems.toString()!==e.option("items").toString())&&e.option({items:t.displayItems,selectedIndex:t.selectedIndex})}},_getCurrentDate:function(){var i=this._valueOption(),e=this.option("minDate"),t=this.option("maxDate");return $e.Z.normalizeDate(i,e,t)},_calculateRollerConfigValueRange:function(i){var e=this._getCurrentDate(),t=this.option("minDate"),r=this.option("maxDate"),a=$e.Z.sameYear(e,t),n=a&&e.getMonth()===t.getMonth(),s=$e.Z.sameYear(e,r),o=s&&e.getMonth()===r.getMonth(),l=n&&e.getDate()===t.getDate(),d=o&&e.getDate()===r.getDate(),u=Wt.DATE_COMPONENTS_INFO[i],c=u.startValue,f=u.endValue;return"year"===i&&(c=t.getFullYear(),f=r.getFullYear()),"month"===i&&(a&&(c=t.getMonth()),s&&(f=r.getMonth())),"day"===i&&(f=Wt.getMaxMonthDay(e.getFullYear(),e.getMonth()),a&&n&&(c=t.getDate()),s&&o&&(f=r.getDate())),"hours"===i&&(c=l?t.getHours():c,f=d?r.getHours():f),{startValue:c,endValue:f}},_refreshRollers:function(){this._refreshRoller("month"),this._refreshRoller("day"),this._refreshRoller("hours")},_optionChanged:function(i){switch(i.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(i.value,i.previousValue);break;case"visible":this.callBase(i),i.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(i)}},_clean:function(){this.callBase(),delete this._$rollersContainer}});(0,It.Z)("dxDateView",ww);const vN=ww;var gN=(0,We.Jj)(),mN=eh.inherit({NAME:"DateView",getDefaultOptions:function(){return(0,N.l)(this.callBase(),{openOnFieldClick:!0,applyButtonText:ae.Z.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat:function(i){return i||Wt.FORMATS_MAP[this.dateBox.option("type")]},popupConfig:function(i){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:i.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device:function(e){var t=e.platform;return"generic"===t||"ios"===t},options:{width:"auto",height:"auto"}},{device:function(e){return"generic"===e.platform&&e.phone},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:gN}}}]}},_renderWidget:function(){if((0,Br.inputType)(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly"))this._widget&&(this._widget.$element().remove(),this._widget=null);else{var i=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{var e=(0,b.Z)("<div>").appendTo(i.$content());this._widget=this._createWidget(e)}this._widget.$element().appendTo(this._getWidgetContainer())}},_getWidgetName:function(){return vN},renderOpenedState:function(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions:function(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*Wt.ONE_YEAR),onDisposing:function(){this._widget=null}.bind(this)}}});const CN=mN;var bN=eh.inherit({NAME:"Native",popupConfig:function(i){return(0,N.l)({},i,{width:"auto"})},getParsedText:function(i){return i?"datetime"===this.dateBox.option("type")?new Date(i.replace(/-/g,"/").replace("T"," ").split(".")[0]):Wt.fromStandardDateFormat(i):null},renderPopupContent:J.ZT,_getWidgetName:J.ZT,_getWidgetOptions:J.ZT,_getDateBoxType:function(){var i=this.dateBox.option("type");return Wt.SUPPORTED_FORMATS.includes(i)?"datetime"===i&&!(0,Br.inputType)(i)&&(i="datetime-local"):i="date",i},customizeButtons:function(){var i=this.dateBox.getButton("dropDown");at.Z.real().android&&i&&i.on("click",function(){this.dateBox._input().get(0).click()}.bind(this))},getDefaultOptions:function(){return{mode:this._getDateBoxType()}},getDisplayFormat:function(i){var e=this._getDateBoxType();return i||Wt.FORMATS_MAP[e]},renderInputMinMax:function(i){i.attr({min:hi.Z.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:hi.Z.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}});const wN=bN;var Sw="dxBoxItemData",IN={row:"minWidth",col:"minHeight"},TN={row:"maxWidth",col:"maxHeight"},yw={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},xw={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},AN={row:"row",col:"column"},_o=(i,e,t)=>{if(t=(0,lr.bh)(e,t),i.style[(0,lr.Hj)(e)]=t,!(0,We.Ym)()){if(""===t||!(0,m.$K)(t))return;var r=(0,ur.H0)(e),a="".concat(r,": ").concat(t,";");(0,lr.A_)(i,a,!1)}};class DN extends Al.Z{_renderVisible(e,t){super._renderVisible(e),(0,m.$K)(t)&&this._options.fireItemStateChangedAction({name:"visible",state:e,oldState:t})}}class ON{constructor(e,t){this._$element=e,this._option=t}renderBox(){this._$element.css({display:"".concat((0,lr.gC)("flexDirection"),"flex")}),_o(this._$element.get(0),"flexDirection",AN[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){var e=this._option("align");return e in yw?yw[e]:e}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){var e=this._option("crossAlign");return e in xw?xw[e]:e}renderItems(e){var t=(0,lr.gC)("flexDirection"),r=this._option("direction");(0,j.S6)(e,function(){var a=(0,b.Z)(this),n=a.data(Sw);a.css({display:"".concat(t,"flex")}).css(TN[r],n.maxSize||"none").css(IN[r],n.minSize||"0"),_o(a.get(0),"flexBasis",n.baseSize||0),_o(a.get(0),"flexGrow",n.ratio),_o(a.get(0),"flexShrink",(0,m.$K)(n.shrink)?n.shrink:1),a.children().each((s,o)=>{(0,b.Z)(o).css({width:"auto",height:"auto",display:"".concat((0,lr.gC)("flexDirection"),"flex"),flexBasis:0}),_o(o,"flexGrow",1),_o(o,"flexDirection",(0,b.Z)(o)[0].style.flexDirection||"column")})})}}let Ew=(()=>{class i extends oo.Z{_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return"dx-box-item"}_itemDataKey(){return Sw}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new ON(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return!this.option("_queue")&&!!this._queue.length}_pushItemToQueue(t,r){this._queue.push({$item:t,config:r})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(t){for(super._renderItems(t);this._queueIsNotEmpty();){var r=this._shiftItemFromQueue();this._createComponent(r.$item,i,(0,N.l)({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},r.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(t){var r=t.itemData&&t.itemData.node;return r?this._renderItemContentByNode(t,r):super._renderItemContent(t)}_postprocessRenderItem(t){var r=t.itemData.box;r&&this._pushItemToQueue(t.itemContent,r)}_createItemByTemplate(t,r){return r.itemData.box?t.source?t.source():(0,b.Z)():super._createItemByTemplate(t,r)}_itemOptionChanged(t,r,a,n){"visible"===r&&this._onItemStateChanged({name:r,state:a,oldState:!1!==n}),super._itemOptionChanged(t,r,a)}_optionChanged(t){switch(t.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(t)}}_itemOptions(){var t=super._itemOptions();return t.fireItemStateChangedAction=r=>{this._onItemStateChanged(r)},t}}return i.ItemClass=DN,i})();(0,It.Z)("dxBox",Ew);const th=Ew;var Iw=function(i,e,t){kN(i,e,t)},kN=function(i,e,t){i.css("transform","rotate("+e+"deg) translate(0,"+t+"px)")},Tw=Qa.Z.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue:function(){return this.option("value")||new Date},_init:function(){this.callBase(),this.$element().addClass("dx-timeview")},_render:function(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox:function(){var i=(0,b.Z)("<div>").appendTo(this.$element()),e=[];this.option("_showClock")&&e.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),e.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(i,th,{height:"100%",width:"100%",direction:"col",items:e})},_renderClock:function(i,e,t){this._$hourArrow=(0,b.Z)("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=(0,b.Z)("<div>").addClass("dx-timeview-minutearrow");var r=(0,b.Z)(t);r.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",r)},_updateClock:function(){var i=this._getValue(),e=i.getHours()/12*360+i.getMinutes()/60*30,t=i.getMinutes()/60*360;Iw(this._$hourArrow,e,this.option("_arrowOffset")),Iw(this._$minuteArrow,t,this.option("_arrowOffset"))},_getBoxItems:function(i){var e=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:(0,b.Z)("<div>").addClass("dx-timeview-time-separator").text(vt.Z.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return i&&e.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),e},_renderField:function(){var i=!this.option("use24HourFormat");return this._createHourBox(i),this._createMinuteBox(),i&&this._createFormat12Box(),this._createComponent((0,b.Z)("<div>").addClass("dx-timeview-field"),th,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(i)}).$element()},_createHourBox:function(i){var e=this._hourBox=this._createComponent((0,b.Z)("<div>"),mf,(0,N.l)({min:-1,max:i?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:t=>this._keyboardHandler(t)},this._getNumberBoxConfig()));e.setAria("label","hours")},_isPM:function(){return!this.option("use24HourFormat")&&1===this._format12.option("value")},_onHourBoxValueChanged:function(i){var{value:e,component:t}=i,r=this._getValue(),a=new Date(r),n=this._convertMaxHourToMin(e);t.option("value",n),this._isPM()&&(n+=12),a.setHours(n),Wt.normalizeTime(a),this.option("value",a)},_convertMaxHourToMin:function(i){var e=this.option("use24HourFormat")?24:12;return(e+i)%e},_createMinuteBox:function(){var i=this._minuteBox=this._createComponent((0,b.Z)("<div>"),mf,(0,N.l)({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{var{value:t,component:r}=e,a=(60+t)%60;r.option("value",a);var n=new Date(this._getValue());n.setMinutes(a),Wt.normalizeTime(n),this.option("value",n)}},this._getNumberBoxConfig()));i.setAria("label","minutes")},_createFormat12Box:function(){var i=vt.Z.getPeriodNames(),e=this._format12=this._createComponent((0,b.Z)("<div>").addClass("dx-timeview-format12"),Yb,{items:[{value:-1,text:i[0]},{value:1,text:i[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:t=>this._keyboardHandler(t),onValueChanged:t=>{var{value:r}=t,a=this._getValue().getHours(),n=new Date(this._getValue());n.setHours((a+12*r)%24),this.option("value",n)},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")});e.setAria("label","type")},_refreshFormat12:function(){if(!this.option("use24HourFormat")){var e=this._getValue().getHours();this._silentEditorValueUpdate(this._format12,e>=12?1:-1)}},_silentEditorValueUpdate:function(i,e){i&&(i._suppressValueChangeAction(),i.option("value",e),i._resumeValueChangeAction())},_getNumberBoxConfig:function(){return{showSpinButtons:!0,displayValueFormatter:function(i){return(i<10?"0":"")+i},stylingMode:this.option("stylingMode")}},_normalizeHours:function(i){return this.option("use24HourFormat")?i:i%12||12},_updateField:function(){var i=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,i),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime:function(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged:function(i){i&&this._updateTime()},_optionChanged:function(i){switch(i.name){case"value":this._updateTime(),this.callBase(i);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(i)}}});(0,It.Z)("dxTimeView",Tw);const MN=Tw;var HN=(0,We.Jj)(),Aw="dx-datebox-datetime-time-side",WN=gw.inherit({NAME:"CalendarWithTime",getDefaultOptions:function(){return(0,N.l)(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter:function(){return $e.Z.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:function(i){return i||"shortdateshorttime"},_is24HourFormat:function(){return vt.Z.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue:function(){var i=this.callBase();return this._updateDateTime(i)},_renderWidget:function(){this.callBase(),this._timeView=this.dateBox._createComponent((0,b.Z)("<div>"),MN,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")})},renderOpenedState:function(){this.callBase();var i=this._getPopup();i&&i.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(function(){this._getPopup()&&this._getPopup().repaint()}.bind(this),0)},isAdaptivityChanged:function(){var i=this._isShrinkView(),e=this._currentAdaptiveMode;return i!==e?(this._currentAdaptiveMode=i,void 0!==e):this.callBase()},_updateValue:function(i){var e=this.dateBoxValue();!e&&!i&&Wt.normalizeTime(e=new Date),this.callBase(),this._timeView&&(e&&this._timeView.option("value",e),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:function(){return(0,oe.dz)(HN)<=573},_isShrinkView:function(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems:function(){var i=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||i.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),i},renderPopupContent:function(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();var i=this._getPopup().$content();this._box=this.dateBox._createComponent((0,b.Z)("<div>").appendTo(i),th,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:function(e,t,r){var a=(0,b.Z)("<div>");switch(e.name){case"calendar":a.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(Aw),a.append(this._timeView.$element()));break;case"time":a.append(this._timeView.$element()),(0,b.Z)(r).addClass(Aw)}return a}.bind(this)})},popupConfig:function(i){var e=this.callBase(i);return(0,N.l)(e,{width:"auto"})},_preventFocusOnPopup:function(i){(0,b.Z)(i.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime:function(i){var e=this._timeView.option("value");return i.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),i},getValue:function(){var i,e=null!==(i=this._widget.option("value"))&&void 0!==i?i:this._widget.getContouredDate();return e=e?new Date(e):new Date,this._updateDateTime(e)},dispose:function(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}});const $N=WN;var KN=(0,We.Jj)(),UN={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},jN=eh.inherit({NAME:"List",supportedKeys:function(){return{space:J.ZT,home:J.ZT,end:J.ZT}},getDefaultOptions:function(){return(0,N.l)(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:function(i){return i||"shorttime"},popupConfig:function(i){return i},getValue:function(){var i=this._widget.option("selectedIndex");return-1===i?this.dateBox.option("value"):this._getDateByItemData(this._widgetItems[i])},useCurrentDateByDefault:function(){return!0},getDefaultDate:function(){return new Date(null)},popupShowingHandler:function(){this.dateBox._dimensionChanged()},_renderWidget:function(){this.callBase(),this._refreshItems()},_getWidgetName:function(){return Ul},_getWidgetOptions:function(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant:function(i){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",i.actionValue)},_refreshItems:function(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState:function(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose:function(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue:function(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue:function(){var i=this.dateBoxValue(),e=this._getDateIndex(i);-1===e?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",e)},_scrollToSelectedItem:function(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex:function(i){for(var e=-1,t=0,r=this._widgetItems.length;t<r;t++)if(this._areDatesEqual(i,this._widgetItems[t])){e=t;break}return e},_areDatesEqual:function(i,e){return(0,m.J_)(i)&&(0,m.J_)(e)&&i.getHours()===e.getHours()&&i.getMinutes()===e.getMinutes()},_getTimeListItems:function(){var i=this.dateBox.dateOption("min")||this._getBoundaryDate("min"),e=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),t=this.dateBox.dateOption("value")||null,r=e-i,a=i.getMinutes()%this.dateBox.option("interval");return r<0?[]:(r>Wt.ONE_DAY&&(r=Wt.ONE_DAY),t-i<Wt.ONE_DAY||((i=this._getBoundaryDate("min")).setMinutes(a),t&&Math.abs(t-e)<Wt.ONE_DAY&&(r=(60*e.getHours()+Math.abs(e.getMinutes()-a))*Wt.ONE_MINUTE)),this._getRangeItems(i,new Date(i),r))},_getRangeItems:function(i,e,t){for(var r=[],a=this.dateBox.option("interval");e-i<=t;)r.push(new Date(e)),e.setMinutes(e.getMinutes()+a);return r},_getBoundaryDate:function(i){var e=UN[i],t=new Date((0,J.IS)(this.dateBox.dateOption("value"),0));return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes())},_timeListItemTemplate:function(i){var e=this.dateBox.option("displayFormat");return vt.Z.format(i,this.getDisplayFormat(e))},_listItemClickHandler:function(i){if("useButtons"!==this.dateBox.option("applyValueMode")){var e=this._getDateByItemData(i.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(e,i.event)}},_getDateByItemData:function(i){var e=this.dateBox.option("value"),t=i.getHours(),r=i.getMinutes(),a=i.getSeconds(),n=i.getFullYear(),s=i.getMonth(),o=i.getDate();return e?((e=this.dateBox.option("dateSerializationFormat")?hi.Z.deserializeDate(e):new Date(e)).setHours(t),e.setMinutes(r),e.setSeconds(a),e.setFullYear(n),e.setMonth(s),e.setDate(o)):e=new Date(n,s,o,t,r,0,0),e},getKeyboardListener:function(){return this._widget},_updatePopupHeight:function(){var i=Sf(this.dateBox.option("dropDownOptions.height"));if(void 0===i||"auto"===i){this.dateBox._setPopupOption("height","auto");var e=(0,oe.zp)(this._widget.$element()),t=.45*(0,oe.Cr)(KN);this.dateBox._setPopupOption("height",Math.min(e,t))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText:function(i,e){var t=this.callBase(i,e);return t&&(t=Wt.mergeDates(t,new Date(null),"date")),t}});const qN=jN;var Yl=(0,We.Jj)(),Xl="dx-datebox",ih="dx-datebox-wrapper",Nr={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},Fr={date:"date",datetime:"datetime",time:"time"},eF={Calendar:gw,DateView:CN,Native:wN,CalendarWithTime:$N,List:qN},tF=kb.inherit({_supportedKeys:function(){return(0,N.l)(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers:function(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:Nr.calendar,invalidDateMessage:ae.Z.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:ae.Z.format("validation-range"),applyButtonText:ae.Z.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0,_showValidationIcon:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device:function(){var e=at.Z.real().platform;return"ios"===e||"android"===e},options:{pickerType:Nr.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions:function(i){this._userOptions=(0,N.l)({},i),this.callBase(i),this._updatePickerOptions()},_updatePickerOptions:function(){var i=this.option("pickerType"),e=this.option("type");i===Nr.list&&(e===Fr.datetime||e===Fr.date)&&(i=Nr.calendar),e===Fr.time&&i===Nr.calendar&&(i=Nr.list),this._pickerType=i,this._setShowDropDownButtonOption()},_setShowDropDownButtonOption(){var i=at.Z.real().platform,e="android"===i&&ii.Z.mozilla,t=this._isNativeType(),r="generic"!==i||!t;t&&e&&(r=!1),this.option({showDropDownButton:r})},_init:function(){this._initStrategy(),this.option((0,N.l)({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:function(i){return i.charAt(0).toLowerCase()+i.substr(1)},_initStrategy:function(){var i=this._getStrategyName(this._getFormatType());this._strategy&&this._strategy.NAME===i||(this._strategy=new(0,eF[i])(this))},_getFormatType:function(){var i=this.option("type"),e=/h|m|s/g.test(i),r="";return/d|M|Y/g.test(i)&&(r+=Fr.date),e&&(r+=Fr.time),r},_getStrategyName:function(i){var e=this._pickerType;return e===Nr.rollers?"DateView":e===Nr.native?"Native":i===Fr.date?"Calendar":i===Fr.datetime?"CalendarWithTime":"List"},_initMarkup:function(){this.$element().addClass(Xl),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render:function(){this.callBase(),this._formatValidationIcon()},_renderDimensions:function(){this.callBase(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged:function(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight:function(){var i,e;this._popup&&(null===(i=(e=this._strategy)._updatePopupHeight)||void 0===i||i.call(e))},_refreshFormatClass:function(){var i=this.$element();(0,j.S6)(Fr,function(e,t){i.removeClass(Xl+"-"+t)}),i.addClass(Xl+"-"+this.option("type"))},_refreshPickerTypeClass:function(){var i=this.$element();(0,j.S6)(Nr,function(e,t){i.removeClass(Xl+"-"+t)}),i.addClass(Xl+"-"+this._pickerType)},_formatValidationIcon:function(){if((0,We.Ym)()){var i=this._input().get(0),e=this.option("rtlEnabled"),t=this._getClearButtonWidth(),r=this._getLongestElementDimensions(),a=parseFloat(Yl.getComputedStyle(i).width)-t,n=r.width>a,s=i.style;this.$element().toggleClass("dx-show-invalid-badge",!n&&this.option("_showValidationIcon")),n?(void 0===this._storedPadding&&(this._storedPadding=e?r.leftPadding:r.rightPadding),e?s.paddingLeft=0:s.paddingRight=0):e?s.paddingLeft=this._storedPadding+"px":s.paddingRight=this._storedPadding+"px"}},_getClearButtonWidth:function(){var i=0;if(this._isClearButtonVisible()&&""===this._input().val()){var e=this.$element().find(".dx-clear-button-area").get(0);i=parseFloat(Yl.getComputedStyle(e).width)}return i},_getLongestElementDimensions:function(){var i=this._strategy.getDisplayFormat(this.option("displayFormat")),e=vt.Z.format(Wt.getLongestDate(i,vt.Z.getMonthNames(),vt.Z.getDayNames()),i),t=this._input(),r=t.get(0),a=(0,ga.l5)(t,e),s=void 0!==this._storedPadding?this._storedPadding:0;a.appendTo(this.$element());var o=parseFloat(Yl.getComputedStyle(a.get(0)).width),l=parseFloat(Yl.getComputedStyle(r).paddingRight),d=parseFloat(Yl.getComputedStyle(r).paddingLeft),u=o+d+l+s;return a.remove(),{width:u,leftPadding:d,rightPadding:l}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup:function(){this.callBase(),this._popup.$wrapper().addClass(ih),this._renderPopupWrapper()},_getPopupToolbarItems(){var i,e,t,r=this.callBase();return null!==(i=null===(e=(t=this._strategy)._getPopupToolbarItems)||void 0===e?void 0:e.call(t,r))&&void 0!==i?i:r},_popupConfig:function(){var i=this.callBase();return(0,N.l)(this._strategy.popupConfig(i),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper:function(){if(this._popup){var i=this.$element(),e=(0,N.l)({},Fr,Nr);(0,j.S6)(e,function(t,r){i.removeClass(ih+"-"+r)}.bind(this)),this._popup.$wrapper().addClass(ih+"-"+this.option("type")).addClass(ih+"-"+this._pickerType).addClass("dx-dropdowneditor-overlay")}},_renderPopupContent:function(){this.callBase(),this._strategy.renderPopupContent()},_popupShowingHandler:function(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler:function(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler:function(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged:function(i){i&&this._formatValidationIcon()},_clearValueHandler:function(i){this.option("text",""),this.callBase(i)},_readOnlyPropValue:function(){if(this._pickerType===Nr.rollers)return!0;var i=at.Z.real().platform;return!this._isNativeType()||"ios"!==i&&"android"!==i?this.callBase():this.option("readOnly")},_isClearButtonVisible:function(){return this.callBase()&&!this._isNativeType()},_renderValue:function(){var i=this.dateOption("value");return this.option("text",this._getDisplayedText(i)),this._strategy.renderValue(),this.callBase()},_setSubmitValue:function(){var i=this.dateOption("value"),e=this.option("dateSerializationFormat"),t=Wt.SUBMIT_FORMATS_MAP[this.option("type")],r=e?hi.Z.serializeDate(i,e):Wt.toStandardDateFormat(i,t);this._getSubmitElement().val(r)},_getDisplayedText:function(i){var t,e=this.option("mode");if("text"===e){var r=this._strategy.getDisplayFormat(this.option("displayFormat"));t=vt.Z.format(i,r)}else{var a=this._getFormatByMode(e);t=a?vt.Z.format(i,a):Wt.toStandardDateFormat(i,e)}return t},_getFormatByMode:function(i){return(0,Br.inputType)(i)?null:Wt.FORMATS_MAP[i]},_valueChangeEventHandler:function(i){var{text:e,type:t,validationError:r}=this.option(),a=this.dateOption("value");if(e!==this._getDisplayedText(a)){var n=this._getParsedDate(e),s=a??this._getDateByDefault(),o=Wt.mergeDates(s,n,t);if(this._applyInternalValidation(n&&"time"===t?o:n).isValid){var d=this._getDisplayedText(o);s&&o&&s.getTime()===o.getTime()&&d!==e?this._renderValue():this.dateValue(o,i)}}else this._recallInternalValidation(a,r)},_recallInternalValidation(i,e){(!e||e.editorSpecific)&&(this._applyInternalValidation(i),this._applyCustomValidation(i))},_getDateByDefault:function(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate:function(i){var e=this._strategy.getDisplayFormat(this.option("displayFormat"));return this._strategy.getParsedText(i,e)??void 0},_applyInternalValidation(i){var t=!!this.option("text")&&null!==i,r=!!i&&(0,m.J_)(i)&&!isNaN(i.getTime()),a=r&&$e.Z.dateInRange(i,this.dateOption("min"),this.dateOption("max"),this.option("type")),n=!t&&!i||a,s="";return r?a||(s=this.option("dateOutOfRangeMessage")):s=this.option("invalidDateMessage"),this._updateInternalValidationState(n,s),{isValid:n,isDate:r}},_updateInternalValidationState(i,e){this.option({isValid:i,validationError:i?null:{editorSpecific:!0,message:e}})},_applyCustomValidation:function(i){this.validationRequest.fire({editor:this,value:this._serializeDate(i)})},_isValueChanged:function(i){var e=this.dateOption("value");return(e&&e.getTime())!==(i&&i.getTime())},_isTextChanged:function(i){return this.option("text")!==(i&&this._getDisplayedText(i)||"")},_renderProps:function(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState:function(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle:function(){var i=this.option("placeholder");if(i)return i;var e=this.option("type");return e===Fr.time?ae.Z.format("dxDateBox-simulatedDataPickerTitleTime"):e===Fr.date||e===Fr.datetime?ae.Z.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy:function(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler:function(i){var e=this._strategy.getValue();this.dateValue(e,i.event),this.callBase()},_dispose:function(){var i;this.callBase(),null===(i=this._strategy)||void 0===i||i.dispose()},_isNativeType:function(){return this._pickerType===Nr.native},_updatePopupTitle:function(){var i;null===(i=this._popup)||void 0===i||i.option("title",this._getPopupTitle())},_optionChanged:function(i){switch(i.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:i.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:i.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":var e=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),e||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break;case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(i.value),this.callBase.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":case"_showValidationIcon":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat:function(){var i=this.option("value");return this.option("dateSerializationFormat")&&(0,uu.Z)().forceIsoDateParsing?this.option("dateSerializationFormat"):(0,m.kE)(i)?"number":(0,m.HD)(i)?hi.Z.getDateSerializationFormat(i):void 0},_updateValue:function(i){this.callBase(),this._applyInternalValidation(i??this.dateOption("value"))},dateValue:function(i,e){var t=this._isValueChanged(i);return t&&e&&this._saveValueChangeEvent(e),t||(this._isTextChanged(i)?this._updateValue(i):""===this.option("text")&&this._applyCustomValidation(i)),this.dateOption("value",i)},dateOption:function(i,e){if(1===arguments.length)return hi.Z.deserializeDate(this.option(i));this.option(i,this._serializeDate(e))},_serializeDate:function(i){var e=this._getSerializationFormat();return hi.Z.serializeDate(i,e)},_clearValue:function(){var i=this.option("value");this.callBase(),null===i&&this._applyCustomValidation(null)},clear:function(){var i=this.option("value");this.callBase(),null===i&&this._applyInternalValidation(null)}});const iF=tF;var rF=be(5672),vo="dateBoxMask",aF=iF.inherit({_supportedKeys(i){var e=this.callBase(i),t=a=>{var n=e[(0,ce.EV)(a)];return n&&n.apply(this,[a])},r=(a,n)=>this._shouldUseOriginalHandler(a)?t.apply(this,[a]):n.apply(this,[a]);return(0,N.l)({},e,{del:a=>r(a,n=>{this._revertPart(1),this._isAllSelected()||n.preventDefault()}),backspace:a=>r(a,n=>{this._revertPart(-1),this._isAllSelected()||n.preventDefault()}),home:a=>r(a,n=>{this._selectFirstPart(),n.preventDefault()}),end:a=>r(a,n=>{this._selectLastPart(),n.preventDefault()}),escape:a=>r(a,n=>{this._revertChanges(n)}),enter:a=>r(a,()=>{this._enterHandler()}),leftArrow:a=>r(a,n=>{this._selectNextPart(-1),n.preventDefault()}),rightArrow:a=>r(a,n=>{this._selectNextPart(1),n.preventDefault()}),upArrow:a=>r(a,n=>{this._upDownArrowHandler(1),n.preventDefault()}),downArrow:a=>r(a,n=>{this._upDownArrowHandler(-1),n.preventDefault()})})},_shouldUseOriginalHandler(i){var e=this.option("opened")&&i&&-1===["backspace","del"].indexOf((0,ce.EV)(i));return!this._useMaskBehavior()||e||i&&i.altKey},_upDownArrowHandler(i){this._setNewDateIfEmpty();var e=this._getActivePartValue(this._initialMaskValue),r=this._getActivePartValue()-e;this._loadMaskValue(this._initialMaskValue),this._changePartValue(r+i,!0)},_changePartValue(i,e){"a"===this._getActivePartProp("pattern")?this._toggleAmPm():this._partIncrease(i,e)},_toggleAmPm(){var i=this._getActivePartProp("text"),e=rF.Z.getPeriodNames().indexOf(i);this._setActivePartValue(1^e)},_getDefaultOptions(){return(0,N.l)(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(i){var{originalEvent:e,alt:t}=i,r=e.data||e.key;return"string"==typeof r&&1===r.length&&!t&&!(0,ce.j1)(e)},_isSingleDigitKey(i){var e,t=null===(e=i.originalEvent)||void 0===e?void 0:e.data;return 1===t?.length&&parseInt(t,10)},_useBeforeInputEvent:function(){return at.Z.real().android},_keyInputHandler(i,e){var t=this._input().val();this._processInputKey(e),i.preventDefault(),t!==this._input().val()&&k.Z.trigger(this._input(),"input")},_keyboardHandler(i){var e=i.originalEvent.key,t=this.callBase(i);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(ii.Z.chrome&&"Process"===i.key&&0===i.code.indexOf("Digit")?(e=i.code.replace("Digit",""),this._processInputKey(e),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(i)&&this._keyInputHandler(i.originalEvent,e)),t},_maskBeforeInputHandler(i){this._maskInputHandler=null;var{inputType:e}=i.originalEvent;"insertCompositionText"===e&&(this._maskInputHandler=()=>{this._renderSelectedPart()});var t="deleteContentBackward"===e;if(t||"deleteContentForward"===e){var a=t?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(a)}}if(this._useMaskBehavior()&&this._isSingleCharKey(i))return this._keyInputHandler(i,i.originalEvent.data),!0},_keyPressHandler(i){var{originalEvent:e}=i;"insertCompositionText"===e?.inputType&&this._isSingleDigitKey(i)&&(this._processInputKey(e.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(i),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(i){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(i))?this._searchString(i):this._searchNumber(i)},_isAllSelected(){var i=this._caret();return i.end-i.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;var i=this._strategy.getDisplayFormat(this.option("displayFormat")),e=(0,m.HD)(i)&&!vt.Z._getPatternByFormat(i);return this._formatPattern=e?i:(0,iV.y)(function(t){return vt.Z.format(t,i)}),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){var i="time"===this.option("type")?new Date(null):new Date;this._maskValue=i,this._initialMaskValue=i,this._renderDateParts()}},_partLimitsReached(i){var e=String(i).length,t=this._getActivePartProp("pattern").length,a=1===t?e:Math.min(t,e),n=this._searchValue.length===a,s=parseInt(this._searchValue+"0")>i;return n||s},_searchNumber(i){var{max:e}=this._getActivePartLimits(),t=String(e).length;this._searchValue=(this._searchValue+i).substr(-t),isNaN(this._searchValue)&&(this._searchValue=i),this._setActivePartValue(this._searchValue),this._partLimitsReached(e)&&this._selectNextPart(1)},_searchString(i){if(isNaN(parseInt(this._getActivePartProp("text")))){for(var e=this._getActivePartProp("limits")(this._maskValue),t=this._searchValue+i.toLowerCase(),r=e.max-e.min,a=0;a<=r;a++)if(this._loadMaskValue(this._initialMaskValue),this._changePartValue(a+1),0===this._getActivePartProp("text").toLowerCase().indexOf(t))return void(this._searchValue=t);this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(i))}},_clearSearchValue(){this._searchValue=""},_revertPart:function(i){if(!this._isAllSelected()){var e=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(e),this._selectNextPart(i)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&"text"===this.option("mode")},_prepareRegExpInfo(){this._regExpInfo=(0,Xb.oo)(this._getFormatPattern(),vt.Z);var i=this._regExpInfo.regexp,e=i.source,t=i.flags,r=new RegExp(/(\{[0-9]+,?[0-9]*\})/),a=e.split(r).map(n=>r.test(n)?n:qt.Z.convertDigits(n,!1)).join("");this._regExpInfo.regexp=new RegExp(a,t)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(this._useMaskBehavior()){var i=this.option("text")||this._getDisplayedText(this._maskValue);i&&(this._dateParts=((i,e)=>{for(var t=e.regexp.exec(i),r=0,a=0,n=[],s=function(){a=(r=a)+t[o].length;var l=e.patterns[o-1].replace(/^'|'$/g,""),d=(i=>XB[i]||(()=>i))(l[0]);n.push({index:o-1,isStub:l===t[o],caret:{start:r,end:a},pattern:l,text:t[o],limits:function(){for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];return jl(l[0],...c)},setter:JB[l[0]]||J.ZT,getter:d})},o=1;o<t.length;o++)s();return n})(i,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())}},_detachMaskEvents(){k.Z.off(this._input(),"."+vo)},_attachMaskEvents(){k.Z.on(this._input(),(0,ce.V4)("dxclick",vo),this._maskClickHandler.bind(this)),k.Z.on(this._input(),(0,ce.V4)("paste",vo),this._maskPasteHandler.bind(this)),k.Z.on(this._input(),(0,ce.V4)("drop",vo),()=>{this._renderSelectedPart()}),k.Z.on(this._input(),(0,ce.V4)("compositionend",vo),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&k.Z.on(this._input(),(0,ce.V4)("beforeinput",vo),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(1))},_onMouseWheel(i){this._useMaskBehavior()&&this._partIncrease(i.delta>0?1:-1,i)},_selectNextPart(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.option("text")&&!this._disposed){i&&(this._initialMaskValue=new Date(this._maskValue));var e=(0,Li.n$)(this._activePartIndex+i,0,this._dateParts.length-1);if(this._dateParts[e].isStub){if(!(0===e&&i<0||e===this._dateParts.length-1&&i>0))return void this._selectNextPart(i>=0?i+1:i-1);e=this._activePartIndex}this._activePartIndex!==e&&this._clearSearchValue(),this._activePartIndex=e,this._caret(this._getActivePartProp("caret"))}},_getRealLimitsPattern(){if("d"===this._getActivePartProp("pattern")[0])return"dM"},_getActivePartLimits(i){return this._getActivePartProp("limits")(this._maskValue,i&&this._getRealLimitsPattern())},_getActivePartValue(i){i=i||this._maskValue;var e=this._getActivePartProp("getter");return(0,m.mf)(e)?e(i):i[e]()},_addLeadingZeroes(i){var e=this._searchValue.match(/^0+/),t=this._getActivePartLimits(),r=String(t.max).length;return((e&&e[0]||"")+String(i)).substr(-r)},_setActivePartValue(i,e){e=e||this._maskValue;var t=this._getActivePartProp("setter"),r=this._getActivePartLimits();i=(0,Li.Z2)(i,r.min,r.max)?i:i%10,i=this._addLeadingZeroes((0,Li.n$)(i,r.min,r.max)),(0,m.mf)(t)?t(e,i):e[t](i),this._renderDisplayText(this._getDisplayedText(e)),this._renderDateParts()},_getActivePartProp(i){if(this._dateParts&&this._dateParts[this._activePartIndex])return this._dateParts[this._activePartIndex][i]},_loadMaskValue(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dateOption("value");this._maskValue=i&&new Date(i),this._initialMaskValue=i&&new Date(i)},_saveMaskValue(){var i=this._maskValue&&new Date(this._maskValue);i&&"date"===this.option("type")&&i.setHours(0,0,0,0),this._initialMaskValue=new Date(i),this.dateOption("value",i)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(i){this.callBase(i),this._useMaskBehavior()&&this.option("text",i)},_partIncrease(i,e){this._setNewDateIfEmpty();var{max:t,min:r}=this._getActivePartLimits(e),a=i+this._getActivePartValue();a>t?a=this._applyLimits(a,{limitBase:r,limitClosest:t,max:t}):a<r&&(a=this._applyLimits(a,{limitBase:t,limitClosest:r,max:t})),this._setActivePartValue(a)},_applyLimits(i,e){var{limitBase:t,limitClosest:r,max:a}=e,n=(i-r)%a;return n?t+n-1*(0,Li.Xx)(n):r},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=((i,e)=>{for(var t=0;t<i.length;t++)if(!i[t].isStub&&i[t].caret.end>=e)return t;return null})(this._dateParts,this._caret().start),this._isAllSelected()||((0,m.$K)(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(i){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(i){var e=this._replaceSelectedText(this.option("text"),this._caret(),(0,ga.Zx)(i)),t=vt.Z.parse(e,this._getFormatPattern());t&&this._isDateValid(t)&&(this._maskValue=t,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),i.preventDefault()},_isDateValid:i=>(0,m.J_)(i)&&!isNaN(i),_isValueDirty(){var i=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(i&&i.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&k.Z.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)},_focusOutHandler(i){this._useMaskBehavior()&&!i.isDefaultPrevented()?(this._fireChangeEvent(),this.callBase(i),this._selectFirstPart(i)):this.callBase(i)},_valueChangeEventHandler(i){var e=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(i),e?null===this._maskValue&&this._loadMaskValue(e):this._maskValue=null,this._saveMaskValue()):this.callBase(i)},_optionChanged(i){switch(i.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(i),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(i),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(i)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},clear(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}});(0,It.Z)("dxDateBox",aF);var{isWrapped:sF}=Ur.default,Ql=function(i,e){return(0,N.l)(i,{readOnly:e.readOnly,placeholder:e.placeholder,inputAttr:{id:e.id,"aria-labelledby":e["aria-labelledby"]},tabIndex:e.tabIndex},e.editorOptions)},Dw=function(){return ii.Z.mozilla||at.Z.real().ios},Ow=function(i){var e={},t=Dw(),r=i.sharedData||e;return Ql({placeholder:i.placeholder,width:i.width,value:i.value,onValueChanged:function(a){var n="filterRow"===i.parentType||"searchPanel"===i.parentType,s=a.event&&("input"===a.event.type||"keyup"===a.event.type),o=function(l,d){i&&i.setValue(l.value,d)};clearTimeout(e.valueChangeTimeout),s&&n?r.valueChangeTimeout=e.valueChangeTimeout=setTimeout(function(){o(a,e.valueChangeTimeout!==r.valueChangeTimeout)},(0,m.$K)(i.updateValueTimeout)?i.updateValueTimeout:0):o(a)},onKeyDown:function(a){t&&"enter"===(0,ce.EV)(a.event)&&k.Z.trigger((0,b.Z)(a.component._input()),"change")},valueChangeEvent:"change"+("filterRow"===i.parentType?" keyup input":"")},i)},Rw=function(i){i.editorName="dxDateBox",i.editorOptions=Ql({value:i.value,onValueChanged:function(e){i.setValue(e.value)},onKeyDown:function(e){var{component:t,event:r}=e,a=t.option("useMaskBehavior");(Dw()||a)&&"enter"===(0,ce.EV)(r)&&(t.blur(),t.focus())},displayFormat:i.format,type:i.dataType,dateSerializationFormat:null,width:"filterBuilder"===i.parentType?void 0:"auto"},i)},Lw=function(i){var r,e=Ow(i),t="searchPanel"===i.parentType;e.value=i.editorType&&"dxTextBox"!==i.editorType?i.value:(0,m.$K)(r=i.value)?r.toString():"",e.valueChangeEvent+=t?" keyup input search":"",e.mode=e.mode||(t?"search":"text"),i.editorName="dxTextBox",i.editorOptions=e},Pw=function(i){var e=Ow(i);e.value=(0,m.$K)(i.value)?i.value:null,i.editorName="dxNumberBox",i.editorOptions=e};function Bw(i){var t,r,a,e=i.lookup,n="filterRow"===i.parentType;if(e){var s;t=(0,Dt.vb)(e.displayExpr),(0,m.mf)(r=e.dataSource)&&!sF(r)&&(r=r(i.row||{}),function uF(i){if(i.row&&i.row.watch&&"dataRow"===i.parentType){var e=i.editorOptions||{};i.editorOptions=e;var t,r=e.onInitialized;e.onInitialized=function(s){r&&r.apply(this,arguments),(t=s.component).on("disposing",n)};var a,n=i.row.watch(()=>(a=i.lookup.dataSource(i.row))&&a.filter,()=>{t.option("dataSource",a)},s=>{i.row=s})}}(i)),((0,m.Kn)(r)||Array.isArray(r))&&(r=(0,Cl.aN)(r),n&&(a=r.postProcess,r.postProcess=function(l){return 0===this.pageIndex()&&(l=l.slice(0)).unshift(null),a?a.call(this,l):l}));var o=!(!e.allowClearing||n);i.editorName=null!==(s=i.editorType)&&void 0!==s?s:"dxSelectBox",i.editorOptions=Ql({searchEnabled:!0,value:i.value,valueExpr:i.lookup.valueExpr,searchExpr:i.lookup.searchExpr||i.lookup.displayExpr,allowClearing:o,showClearButton:o,displayExpr:function(l){return null===l?i.showAllText:t(l)},dataSource:r,onValueChanged:function(l){var d=[l.value];!n&&d.push(l.component.option("text")),i.setValue.apply(this,d)}},i)}}function Vw(i){i.editorName="dxCheckBox",i.editorOptions=Ql({elementAttr:{id:i.id},value:(0,m.$K)(i.value)?i.value:void 0,hoverStateEnabled:!i.readOnly,focusStateEnabled:!i.readOnly,activeStateEnabled:!1,onValueChanged:function(e){i.setValue&&i.setValue(e.value,e)}},i)}var cF=i=>{i.editorName=i.editorType,i.editorOptions=Ql({value:i.value,onValueChanged:function(e){i.setValue(e.value)}},i)},pF=i=>{var e={dxDateBox:Rw,dxCheckBox:Vw,dxNumberBox:Pw,dxTextBox:Lw};if(i.lookup)Bw(i);else if(i.editorType){var t;(null!==(t=e[i.editorType])&&void 0!==t?t:cF)(i)}else switch(i.dataType){case"date":case"datetime":Rw(i);break;case"boolean":!function(i){"filterRow"===i.parentType||"filterBuilder"===i.parentType?Bw((0,N.l)(i,{lookup:{displayExpr:function(e){return!0===e?i.trueText||"true":!1===e?i.falseText||"false":void 0},dataSource:[!0,!1]}})):Vw(i)}(i);break;case"number":Pw(i);break;default:Lw(i)}};const Nw=i=>class extends i{createEditor(e,t){t.cancel=!1,t.editorElement=(0,rt.u)(e),(0,m.$K)(t.tabIndex)||(t.tabIndex=this.option("tabIndex")),pF(t),this.executeAction("onEditorPreparing",t),!t.cancel&&("dataRow"===t.parentType&&!t.isOnForm&&!(0,m.$K)(t.editorOptions.showValidationMark)&&(t.editorOptions.showValidationMark=!1),function(i,e){var t=(0,b.Z)(e.editorElement);if(e.editorName&&e.editorOptions&&t[e.editorName]){if(("dxCheckBox"===e.editorName||"dxSwitch"===e.editorName)&&(e.isOnForm||(t.addClass(i.addWidgetPrefix("checkbox-size")),t.parent().addClass("dx-editor-inline-block"))),i._createComponent(t,e.editorName,e.editorOptions),"dxDateBox"===e.editorName){var r=t.dxDateBox("instance"),a=r._supportedKeys().enter;r.registerKeyHandler("enter",n=>(r.option("opened")&&a(n),!0))}"dxTextArea"===e.editorName&&t.dxTextArea("instance").registerKeyHandler("enter",function(n){"enter"===(0,ce.EV)(n)&&!n.ctrlKey&&!n.shiftKey&&n.stopPropagation()})}}(this,t),this.executeAction("onEditorPrepared",t))}};var kf="dx-cell-focus-disabled",Fw="focus-overlay",Mf="dx-focused",kw="dxDataGridEditorFactory",Mw=(0,ce.V4)([Bt.Z.down,"focusin",Pt.u].join(" "),kw),Hf="dx-hidden",SF=Nw(Nt.ViewController),xF={defaultOptions:()=>({}),controllers:{editorFactory:class yF extends SF{init(){this.createAction("onEditorPreparing",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onEditorPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this._columnsResizerController=this.getController("columnsResizer"),this._editingController=this.getController("editing"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._columnsController=this.getController("columns"),this._validatingController=this.getController("validating"),this._rowsView=this.getView("rowsView"),this._updateFocusHandler=this._updateFocusHandler||this.createAction(this._updateFocus.bind(this)),this._subscribedContainerRoot=this._getContainerRoot(),k.Z.on(this._subscribedContainerRoot,Mw,this._updateFocusHandler),this._attachContainerEventHandlers()}dispose(){clearTimeout(this._focusTimeoutID),clearTimeout(this._updateFocusTimeoutID),k.Z.off(this._subscribedContainerRoot,Mw,this._updateFocusHandler)}_getFocusedElement(e){var t=this.option("focusedRowEnabled")?"tr[tabindex]:focus":"tr[tabindex]:not(.dx-data-row):focus",r=["td[tabindex]:focus","".concat(t),"input:focus","button:focus","textarea:focus","div[tabindex]:focus",".dx-lookup-field:focus",".dx-checkbox:focus",".dx-switch:focus",".dx-dropdownbutton",".dx-buttongroup:focus",".dx-adaptive-item-text:focus"].join(","),a=e.find(r);return this.elementIsInsideGrid(a)&&a}_getFocusCellSelector(){return".dx-row > td"}_updateFocusCore(){var e=this.component&&this.component.$element();if(e){var t=this._getFocusedElement(e);if(t&&t.length){var r;if(!t.hasClass(kf)&&!t.hasClass("dx-row")){var a=t.closest("".concat(this._getFocusCellSelector(),", .").concat(kf));a.get(0)!==t.get(0)&&(r=this._needHideBorder(a),t=a)}if(t.length&&!t.hasClass(kf))return void this.focus(t,r)}}this.loseFocus()}_needHideBorder(e){var t=this._rowsView.element(),r=e.closest(t).length>0,a=this._editingController.isEditing();return e.hasClass("dx-editor-inline-block")||r&&!a}_updateFocus(e){var t=this,r=e&&e.event&&(0,b.Z)(e.event.target).hasClass(t.addWidgetPrefix(Fw));t._isFocusOverlay=t._isFocusOverlay||r,clearTimeout(t._updateFocusTimeoutID),t._updateFocusTimeoutID=setTimeout(()=>{delete t._updateFocusTimeoutID,t._isFocusOverlay||t._updateFocusCore(),t._isFocusOverlay=!1})}_updateFocusOverlaySize(e,t){e.hide();var r=In.Z.calculate(e,(0,N.l)({collision:"fit"},t));r.h.oversize>0&&(0,oe.Ns)(e,(0,oe.Y_)(e)-r.h.oversize),r.v.oversize>0&&(0,oe.qt)(e,(0,oe.zp)(e)-r.v.oversize),e.show()}callbackNames(){return["focused"]}focus(e,t){var r=this;if(void 0===e)return r._$focusedElement;e&&(e.is(r._$focusedElement)||r._$focusedElement&&r._$focusedElement.removeClass(Mf),r._$focusedElement=e,clearTimeout(r._focusTimeoutID),r._focusTimeoutID=setTimeout(()=>{delete r._focusTimeoutID,r.renderFocusOverlay(e,t),e.addClass(Mf),r.focused.fire(e)}))}refocus(){var e=this.focus();this.focus(e)}renderFocusOverlay(e,t){if(Te.isElementInCurrentGrid(this,e))if(this._$focusOverlay||(this._$focusOverlay=(0,b.Z)("<div>").addClass(this.addWidgetPrefix(Fw))),t)this._$focusOverlay.addClass(Hf);else if(e.length){var r=ii.Z.mozilla?"right bottom":"left top",a=e.closest(".".concat(this.addWidgetPrefix("content"))),n=(0,di.l)(e.get(0)),s=e.hasClass(this.addWidgetPrefix("invalid")),o=e.hasClass("dx-cell-modified")&&!s;this._$focusOverlay.removeClass(Hf).toggleClass("dx-focused-cell-invalid",s).toggleClass("dx-focused-cell-modified",o).appendTo(a),(0,oe.qt)(this._$focusOverlay,n.bottom-n.top+1),(0,oe.Ns)(this._$focusOverlay,n.right-n.left+1);var l={precise:!0,my:r,at:r,of:e,boundary:a.length&&a};this._updateFocusOverlaySize(this._$focusOverlay,l),In.Z.setup(this._$focusOverlay,l),this._$focusOverlay.css("visibility","visible")}}resize(){var e=this._$focusedElement;e&&this.focus(e)}loseFocus(e){this._$focusedElement&&this._$focusedElement.removeClass(Mf),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.addClass(Hf)}_getContainerRoot(){var e,t=null===(e=this.component)||void 0===e?void 0:e.$element(),r=it.Z.getRootNode(t?.get(0));return r.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||r.host?r:it.Z.getDocument()}_attachContainerEventHandlers(){var e=this,t=e.component&&e.component.$element();t&&k.Z.on(t,(0,ce.V4)("keydown",kw),r=>{"tab"===(0,ce.EV)(r)&&e._updateFocusHandler(r)})}}}};He.registerModule("editorFactory",xF);var EF=be(4394),rh=be(1078),ah=(0,We.Jj)(),Hw={text:"OK",onClick:function(){return!0}},gs="dx-dialog",IF="".concat(gs,"-wrapper"),TF="".concat(gs,"-root"),AF="".concat(gs,"-content"),DF="".concat(gs,"-message"),OF="".concat(gs,"-buttons"),RF="".concat(gs,"-button"),Zw="dx-button",Zf=function(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0;return function(i){var e,t=new Y.BH;i=i||{};var r=(0,b.Z)("<div>").addClass(gs).appendTo((0,rh.S3)()),n="messageHtml"in i;"message"in i&&Rt.Z.log("W1013");var s=String(n?i.messageHtml:i.message),o=i.title?null:new Ri.Z,l=(0,b.Z)("<div>").addClass(DF).html(s).attr("id",o),d=[],u=new Ja.Z(r,(0,N.l)({title:null!==(e=i.title)&&void 0!==e?e:"",showTitle:(0,J.IS)(i.showTitle,!0),dragEnabled:(0,J.IS)(i.dragEnabled,!0),height:"auto",width:i.width,showCloseButton:i.showCloseButton||!1,ignoreChildEvents:!1,container:r,visualContainer:ah,dragAndResizeArea:ah,onContentReady:function(p){p.component.$content().addClass(AF).append(l),o&&p.component.$overlayContent().attr("aria-labelledby",o)},onShowing:function(p){p.component.bottomToolbar().addClass(OF).find(".".concat(Zw)).addClass(RF),(0,ga.M3)()},onShown:function(p){var g=p.component.bottomToolbar().find(".".concat(Zw)).first();k.Z.trigger(g,"focus")},onHiding:function(){t.reject()},onHidden:function(p){var{element:g}=p;(0,b.Z)(g).remove()},animation:{show:{type:"pop",duration:400},hide:{type:"pop",duration:400,to:{opacity:0,scale:0},from:{opacity:1,scale:1}}},rtlEnabled:(0,uu.Z)().rtlEnabled,position:{boundaryOffset:{h:10,v:0}}},i.popupOptions));function f(p){t.resolve(p),u.hide()}return(i.buttons||[Hw]).forEach(p=>{var g=new EF.Z(p.onClick,{context:u});d.push({toolbar:"bottom",location:at.Z.current().android?"after":"center",widget:"dxButton",options:(0,ye.Z)({},p,{onClick:function(){f(g.execute(...arguments))}})})}),u.option("toolbarItems",d),u.$wrapper().addClass(IF),i.position&&u.option("position",i.position),u.$wrapper().addClass(TF),{show:function(){if("phone"===at.Z.real().deviceType){var p=(0,oe.Cr)(ah)>(0,oe.dz)(ah);u.option({width:p?"90%":"60%"})}return u.show(),t.promise()},hide:f}}((0,m.PO)(i)?i:{title:e,messageHtml:i,showTitle:t,buttons:[(0,ye.Z)({text:ae.Z.format("Yes"),onClick:function(){return!0}},(0,_t.dC)()?{stylingMode:"contained",type:"default"}:{}),(0,ye.Z)({text:ae.Z.format("No"),onClick:function(){return!1}},(0,_t.dC)()?{stylingMode:"outlined",type:"default"}:{})],dragEnabled:t}).show()},nh="dx-editor-cell",On="dx-row",$w="dx-selection",sh="edit-form",Ra="insert",tn="remove",oh="editing.popup",zf="editing.form",Tr="editing.editRowKey",ms="editing.editColumnName",Kw="targetComponent",Wf="input:not([type='hidden'])",$f="[tabindex]:not([disabled]), ".concat(Wf,":not([disabled])"),Cs="batch",rn="row",mo="cell",Co="form",Kf="popup",lh="last",Uw="pageBottom",Gf="pageTop",jw="viewportBottom",qw="viewportTop",BF=[Cs,rn,mo,Co,Kf],VF=[rn,Co,Kf],NF=[Cs,mo],FF=[Cs,rn,mo],kF=[rn,Co],Yw="dx-command-edit",Xw="".concat(Yw,"-with-icons"),Rn="__DX_INSERT_INDEX__",Jw="dx-cell-modified",ed="update",qF={save:"dx-link-save",cancel:"dx-link-cancel",edit:"dx-link-edit",undelete:"dx-link-undelete",delete:"dx-link-delete",add:"dx-link-add"},YF={save:"save",cancel:"revert",edit:"edit",undelete:"revert",delete:"trash",add:"add"},XF={edit:"editRow",delete:"deleteRow",undelete:"undeleteRow",save:"saveEditData",cancel:"cancelEditData",add:"addRowByRowIndex"},JF={add:"allowAdding",edit:"allowUpdating",delete:"allowDeleting"},QF=["edit","save","cancel","delete","undelete"],an="editing.changes",Qw="edit-form-item",lk=Ea.IS_RENOVATED_WIDGET?"dx-scrollable":"dx-scrollable-container",eS="dx-edit-row",Uf="_DX_KEY_",td=function(i){return function(e){var t=e instanceof Error?e:new Error(e&&String(e)||"Unknown error");i.reject(t)}},tS=function(i,e){return e.isEditing||i&&e.column.allowEditing},iS=function(i,e){var t=!!e.column.command,r=tS(i,e);return"data"===e.rowType&&!t&&(r||e.column.showEditorAlways)},bo=(i,e)=>{var t=-1;return i.some((r,a)=>{if(rS(r)===e)return t=a,!0}),t};function rS(i){return(0,m.Kn)(i)?i.name:i}var aS=(i,e)=>{i.forEach(t=>{t.items||t.tabs?aS(t.items||t.tabs,e):e(t)})},nS=i=>class extends i{reload(e,t){return!t&&this._editingController.refresh(),super.reload.apply(this,arguments)}repaintRows(){if(!this._editingController.isSaving())return super.repaintRows.apply(this,arguments)}_updateEditRow(e){var t,r=this.option(Tr),n=e[Te.getIndexByKey(r,e)];n&&(n.isEditing=!0,null===(t=this._updateEditItem)||void 0===t||t.call(this,n))}_updateItemsCore(e){super._updateItemsCore(e),this._updateEditRow(this.items(!0))}_applyChangeUpdate(e){this._updateEditRow(e.items),super._applyChangeUpdate(e)}_applyChangesOnly(e){this._updateEditRow(e.items),super._applyChangesOnly(e)}_processItems(e,t){return e=this._editingController.processItems(e,t),super._processItems(e,t)}_processDataItem(e,t){return this._editingController.processDataItem(e,t,this.generateDataValues),super._processDataItem(e,t)}_processItem(e,t){return(e=super._processItem(e,t)).isNewRow&&(t.dataIndex--,delete e.dataIndex),e}_getChangedColumnIndices(e,t,r,a){if(e.isNewRow===t.isNewRow&&e.removed===t.removed)return super._getChangedColumnIndices.apply(this,arguments)}_isCellChanged(e,t,r,a,n){var s=e.cells&&e.cells[a],o=this._editingController&&this._editingController.isEditCell(r,a);return(!n||!o)&&(!(!s||!s.column||s.column.showEditorAlways||s.isEditing===o)||super._isCellChanged.apply(this,arguments))}needToRefreshOnDataSourceChange(e){return!(Array.isArray(e.value)&&e.value===e.previousValue&&this._editingController.isSaving())}_handleDataSourceChange(e){var t=super._handleDataSourceChange(e),r=this.option("editing.changes"),a=e.value;if(Array.isArray(a)&&r.length){var n=a.map(d=>this.keyOf(d)),s=r.filter(d=>"insert"===d.type||n.some(u=>(0,J.bY)(d.key,u)));s.length!==r.length&&this.option("editing.changes",s);var o=this.option("editing.editRowKey");!s.some(d=>"insert"===d.type&&(0,J.bY)(o,d.key))&&n.every(d=>!(0,J.bY)(o,d))&&this.option("editing.editRowKey",null)}return t}},jf={defaultOptions:()=>({editing:{mode:"row",refreshMode:"full",newRowPosition:qw,allowAdding:!1,allowUpdating:!1,allowDeleting:!1,useIcons:!1,selectTextOnEditStart:!1,confirmDelete:!0,texts:{editRow:ae.Z.format("dxDataGrid-editingEditRow"),saveAllChanges:ae.Z.format("dxDataGrid-editingSaveAllChanges"),saveRowChanges:ae.Z.format("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:ae.Z.format("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:ae.Z.format("dxDataGrid-editingCancelRowChanges"),addRow:ae.Z.format("dxDataGrid-editingAddRow"),deleteRow:ae.Z.format("dxDataGrid-editingDeleteRow"),undeleteRow:ae.Z.format("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:ae.Z.format("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:""},form:{colCount:2},popup:{},startEditAction:"click",editRowKey:null,editColumnName:null,changes:[]},useLegacyColumnButtonTemplate:!1}),controllers:{editing:class gk extends Nt.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._validatingController=this.getController("validating"),this._editorFactoryController=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._columnsResizerController=this.getController("columnsResizer"),this._errorHandlingController=this.getController("errorHandling"),this._rowsView=this.getView("rowsView"),this._headerPanelView=this.getView("headerPanel"),this._lastOperation=null,this._changes=[],this._deferreds&&this._deferreds.forEach(e=>{e.reject("cancel")}),this._deferreds=[],this._dataChangedHandler||(this._dataChangedHandler=this._handleDataChanged.bind(this),this._dataController.changed.add(this._dataChangedHandler)),this._saveEditorHandler||(this.createAction("onInitNewRow",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserting",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserted",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditingStart",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdating",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdated",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceling",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceled",{excludeValidators:["disabled","readOnly"]})),this._updateEditColumn(),this._updateEditButtons(),this._internalState||(this._internalState=[]),this.component._optionsByReference[Tr]=!0,this.component._optionsByReference[an]=!0}getEditMode(){var e,t=null!==(e=this.option("editing.mode"))&&void 0!==e?e:rn;return BF.includes(t)?t:rn}isCellBasedEditMode(){var e=this.getEditMode();return NF.includes(e)}_getDefaultEditorTemplate(){return(e,t)=>{var r=(0,b.Z)("<div>").appendTo(e),a=(0,N.l)({},t.column,{value:t.value,setValue:t.setValue,row:t.row,parentType:"dataRow",width:null,readOnly:!t.setValue,isOnForm:t.isOnForm,id:t.id});FF.includes(this.getEditMode())&&(a["aria-labelledby"]=t.column.headerId),this._editorFactoryController.createEditor(r,a)}}_getNewRowPosition(){var e=this.option("editing.newRowPosition");if("virtual"===this.option("scrolling.mode"))switch(e){case Gf:return qw;case Uw:return jw;default:return e}return e}getChanges(){return this.option(an)}getInsertRowCount(){return this.option(an).filter(t=>"insert"===t.type).length}resetChanges(){var e=this.getChanges(),t=e?.length;t&&this._silentOption(an,[])}_getInternalData(e){return this._internalState.filter(t=>(0,J.bY)(t.key,e))[0]}_addInternalData(e){var t=this._getInternalData(e.key);return t?(0,N.l)(t,e):(this._internalState.push(e),e)}_getOldData(e){var t;return null===(t=this._getInternalData(e))||void 0===t?void 0:t.oldData}getUpdatedData(e){var t=this._dataController.keyOf(e),r=this.getChanges(),a=Te.getIndexByKey(t,r);return r[a]?(0,ar.FL)(e,r[a].data):e}getInsertedData(){return this.getChanges().filter(e=>e.data&&e.type===Ra).map(e=>e.data)}getRemovedData(){return this.getChanges().filter(e=>this._getOldData(e.key)&&e.type===tn).map(e=>this._getOldData(e.key))}_fireDataErrorOccurred(e){if("cancel"!==e){var t=this.getPopupContent();this._dataController.dataErrorOccurred.fire(e,t)}}_needToCloseEditableCell(e){}_closeEditItem(e){}_handleDataChanged(e){}_isDefaultButtonVisible(e,t){var r=!0;switch(e.name){case"delete":r=this.allowDeleting(t);break;case"undelete":r=!1}return r}_isButtonVisible(e,t){var{visible:r}=e;return(0,m.$K)(r)?(0,m.mf)(r)?r.call(e,{component:t.component,row:t.row,column:t.column}):r:this._isDefaultButtonVisible(e,t)}_isButtonDisabled(e,t){var{disabled:r}=e;return(0,m.mf)(r)?r.call(e,{component:t.component,row:t.row,column:t.column}):!!r}_getButtonConfig(e,t){var r=(0,m.Kn)(e)?e:{},a=rS(e),n=(i=>{var e=i.component.option("editing.texts")||{};return{save:e.saveRowChanges,cancel:e.cancelRowChanges,edit:e.editRow,undelete:e.undeleteRow,delete:e.deleteRow,add:e.addRowToNode}})(t),s=XF[a],o=this.option("editing"),l=JF[a],d=!l||o[l];return(0,N.l)({name:a,text:n[a],cssClass:qF[a]},{onClick:s&&(u=>{var{event:c}=u;c.stopPropagation(),c.preventDefault(),setTimeout(()=>{t.row&&d&&this[s]&&this[s](t.row.rowIndex)})})},r)}_getEditingButtons(e){var t,r=!!e.column.buttons,a=(e.column.buttons||[]).slice();return r?((t=bo(a,"edit"))>=0&&(bo(a,"save")<0&&a.splice(t+1,0,"save"),bo(a,"cancel")<0&&a.splice(bo(a,"save")+1,0,"cancel")),(t=bo(a,"delete"))>=0&&bo(a,"undelete")<0&&a.splice(t+1,0,"undelete")):a=QF.slice(),a.map(n=>this._getButtonConfig(n,e))}_renderEditingButtons(e,t,r,a){t.forEach(n=>{this._isButtonVisible(n,r)&&this._createButton(e,n,r,a)})}_getEditCommandCellTemplate(){return(e,t,r)=>{var a=(0,b.Z)(e);if("data"===t.rowType){var n=this._getEditingButtons(t);if(this._renderEditingButtons(a,n,t,r),t.watch){var s=t.watch(()=>n.map(o=>({visible:this._isButtonVisible(o,t),disabled:this._isButtonDisabled(o,t)})),()=>{a.empty(),this._renderEditingButtons(a,n,t)});k.Z.on(a,ns.x,s)}}else Te.setEmptyText(a)}}isRowBasedEditMode(){var e=this.getEditMode();return VF.includes(e)}getFirstEditableColumnIndex(){var e,t=this._columnsController.getVisibleColumns();return(0,j.S6)(t,(r,a)=>{if(a.allowEditing)return e=r,!1}),e}getFirstEditableCellInRow(e){var t,r=this.getFirstEditableColumnIndex();return null===(t=this._rowsView)||void 0===t?void 0:t._getCellElement(e||0,r)}getFocusedCellInRow(e){return this.getFirstEditableCellInRow(e)}getIndexByKey(e,t){return Te.getIndexByKey(e,t)}hasChanges(e){for(var t=this.getChanges(),r=!1,a=0;a<t?.length;a++)if(t[a].type&&(!(0,m.$K)(e)||this._dataController.getRowIndexByKey(t[a].key)===e)){r=!0;break}return r}dispose(){super.dispose(),clearTimeout(this._inputFocusTimeoutID),k.Z.off(it.Z.getDocument(),Bt.Z.up,this._pointerUpEditorHandler),k.Z.off(it.Z.getDocument(),Bt.Z.down,this._pointerDownEditorHandler),k.Z.off(it.Z.getDocument(),Pt.u,this._saveEditorHandler)}_silentOption(e,t){"editing.changes"===e&&(this._changes=(0,ba.HR)([],t)),super._silentOption(e,t)}optionChanged(e){if("editing"===e.name){var{fullName:t}=e;t===Tr?this._handleEditRowKeyChange(e):t===an?(0,J.bY)(e.value,this._changes,{maxDepth:4})||(this._changes=(0,ba.HR)([],e.value),this._handleChangesChange(e)):e.handled||(this._columnsController.reinit(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey()),e.handled=!0}else super.optionChanged(e)}_handleEditRowKeyChange(e){var t=this._dataController.getRowIndexByKey(e.value),r=this._getEditRowIndexCorrection(),a=this._dataController.getRowIndexByKey(e.previousValue)+r;(0,m.$K)(e.value)?e.value!==e.previousValue&&this._editRowFromOptionChanged(t,a):this.cancelEditData()}_handleChangesChange(e){var t=this._dataController;!e.value.length&&!e.previousValue.length||(e.value.forEach(a=>{var n;if("insert"===a.type)this._addInsertInfo(a);else{var s=t.getCachedStoreData()||(null===(n=t.items())||void 0===n?void 0:n.map(l=>l.data)),o=Te.getIndexByKey(a.key,s,t.key());this._addInternalData({key:a.key,oldData:s[o]})}}),t.updateItems({repaintChangesOnly:!0,isLiveUpdate:!1,isOptionChanged:!0}))}publicMethods(){return["addRow","deleteRow","undeleteRow","editRow","saveEditData","cancelEditData","hasEditData"]}refresh(){(0,m.$K)(this._pageIndex)&&this._refreshCore.apply(this,arguments)}_refreshCore(e){}isEditing(){return(0,m.$K)(this.option(Tr))}isEditRow(e){return!1}_setEditRowKey(e,t){t?this._silentOption(Tr,e):this.option(Tr,e),this._refocusEditCell&&(this._refocusEditCell=!1,this._focusEditingCell())}_setEditRowKeyByIndex(e,t){var r=this._dataController.getKeyByRowIndex(e);void 0!==r?this._setEditRowKey(r,t):this._dataController.fireError("E1043")}getEditRowIndex(){return this._getVisibleEditRowIndex()}getEditFormRowIndex(){return-1}isEditRowByIndex(e){var t=this._dataController.getKeyByRowIndex(e);return(0,m.$K)(t)&&(0,J.bY)(this.option(Tr),t)&&this._getVisibleEditRowIndex()===e}isEditCell(e,t){return this.isEditRowByIndex(e)&&this._getVisibleEditColumnIndex()===t}getPopupContent(){}_isProcessedItem(e){return!1}_getInsertRowIndex(e,t,r){var a=-1,n=this._dataController,s=this._getInsertAfterOrBeforeKey(t);return(0,m.$K)(s)||0!==e.length?(0,m.$K)(s)&&e.some((o,l)=>{var d=r||this._isProcessedItem(o);if((0,m.Kn)(o)&&(d||(0,m.$K)(o[Rn])?(0,J.bY)(o.key,s)&&(a=l):(0,J.bY)(n.keyOf(o),s)&&(a=l)),a>=0){var u=e[a+1];return u&&("detail"===u.rowType||"detailAdaptive"===u.rowType)&&(0,m.$K)(t.insertAfterKey)?void 0:((0,m.$K)(t.insertAfterKey)&&(a+=1),!0)}}):a=0,a}_generateNewItem(e){var t,r={key:e},a=null===(t=this._getInternalData(e))||void 0===t?void 0:t.insertInfo;return a?.[Rn]&&(r[Rn]=a[Rn]),r}_getLoadedRowIndex(e,t,r){var a=this._getInsertRowIndex(e,t,r),n=this._dataController;if(a<0){var s=this._getNewRowPosition(),o=n.pageIndex(),l=this._getInsertAfterOrBeforeKey(t);s===lh||0!==o||(0,m.$K)(l)?s===lh&&n.isLastPageLoaded()&&(a=e.length):a=0}return a}processItems(e,t){var{changeType:r}=t;return this.update(r),this.getChanges().forEach(n=>{var s;if(n.type===Ra){var{key:l}=n,d=null===(s=this._getInternalData(l))||void 0===s?void 0:s.insertInfo;(!(0,m.$K)(l)||!(0,m.$K)(d))&&(l=(d=this._addInsertInfo(n)).key);var u=this._getLoadedRowIndex(e,n),c=this._generateNewItem(l);u>=0&&e.splice(u,0,c)}}),e}processDataItem(e,t,r){var a=t.visibleColumns,n=e.data[Rn]?e.data.key:e.key,s=this.getChanges(),o=Te.getIndexByKey(n,s);e.isEditing=!1,o>=0&&this._processDataItemCore(e,s[o],n,a,r)}_processDataItemCore(e,t,r,a,n){var{data:s,type:o}=t;switch(o){case Ra:e.isNewRow=!0,e.key=r,e.data=s;break;case ed:e.modified=!0,e.oldData=e.data,e.data=(0,ar.FL)(e.data,s),e.modifiedValues=n(s,a,!0);break;case tn:e.removed=!0}}_initNewRow(e){if(this.executeAction("onInitNewRow",e),e.promise){var t=new Y.BH;return(0,Y.gx)((0,Y.p4)(e.promise)).done(t.resolve).fail(td(t)).fail(r=>this._fireDataErrorOccurred(r)),t}}_createInsertInfo(){var e={};return e[Rn]=this._getInsertIndex(),e}_addInsertInfo(e,t){var r,a;console.log("add insert info"),e.key=this.getChangeKeyValue(e);var{key:n}=e;if(a=null===(r=this._getInternalData(n))||void 0===r?void 0:r.insertInfo,!(0,m.$K)(a)){var s=this._getInsertAfterOrBeforeKey(e);a=this._createInsertInfo(),(0,m.$K)(s)||this._setInsertAfterOrBeforeKey(e,t)}return this._addInternalData({insertInfo:a,key:n}),{insertInfo:a,key:n}}getChangeKeyValue(e){if((0,m.$K)(e.key))return e.key;var r,t=this._dataController.key();return e.data&&t&&!Array.isArray(t)&&(r=e.data[t]),(0,m.$K)(r)||(r="".concat(Uf).concat(new Ri.Z)),r}_setInsertAfterOrBeforeKey(e,t){var r=this.getView("rowsView"),a=this._dataController,n=a.items(!0),s=this._getNewRowPosition();switch(s){case"first":case lh:break;case Gf:case Uw:if(n.length){var o=s===Gf?0:n.length-1;e[0===o?"insertBeforeKey":"insertAfterKey"]=n[o].key}break;default:var d=s===jw?r?.getBottomVisibleItemIndex():r?.getTopVisibleItemIndex(),u=a.getVisibleRows()[d];u&&(!u.isEditing&&"detail"===u.rowType||"detailAdaptive"===u.rowType)&&d++;var c=a.getKeyByRowIndex(d);(0,m.$K)(c)&&(e.insertBeforeKey=c)}}_getInsertIndex(){var e=0;return this.getChanges().forEach(t=>{var r,a=null===(r=this._getInternalData(t.key))||void 0===r?void 0:r.insertInfo;(0,m.$K)(a)&&t.type===Ra&&a[Rn]>e&&(e=a[Rn])}),e+1}_getInsertAfterOrBeforeKey(e){var t;return null!==(t=e.insertAfterKey)&&void 0!==t?t:e.insertBeforeKey}_getPageIndexToInsertRow(){var e=this._getNewRowPosition(),t=this._dataController,r=t.pageIndex(),a=t.pageCount()-1;return"first"===e&&0!==r?0:e===lh&&r!==a?a:-1}addRow(e){var t=this._dataController;return t.store()?this._addRow(e):(t.fireError("E1052",this.component.NAME),(new Y.BH).reject())}_addRow(e){var r=this._dataController.store(),a=r&&r.key(),n={data:{}},s=this._getVisibleEditRowIndex(),o=new Y.BH;return this.refresh({allowCancelEditing:!0}),this._allowRowAdding()?(a||(n.data.__KEY__=String(new Ri.Z)),(0,Y.gx)(this._initNewRow(n,e)).done(()=>{this._allowRowAdding()?(0,Y.gx)(this._addRowCore(n.data,e,s)).done(o.resolve).fail(o.reject):o.reject("cancel")}).fail(o.reject),o.promise()):((0,Y.gx)(this._navigateToNewRow(s)).done(o.resolve).fail(o.reject),o.promise())}_allowRowAdding(e){return!(this._getInsertIndex()>1)}_addRowCore(e,t,r){var a={data:e,type:Ra},n=this._getVisibleEditRowIndex(),s=this._addInsertInfo(a,t),{key:o}=s;return this._setEditRowKey(o,!0),this._addChange(a),this._navigateToNewRow(r,a,n)}_navigateToNewRow(e,t,r){var a=new Y.BH,n=this._dataController;if(r=r??-1,!(t=t??this.getChanges().filter(u=>u.type===Ra)[0]))return a.reject("cancel").promise();var s=this._getPageIndexToInsertRow(),o=this._getLoadedRowIndex(n.items(),t,!0),l=u=>{var c;(0,Y.gx)(null===(c=this._focusController)||void 0===c?void 0:c.navigateToRow(u)).done(()=>{o=n.getRowIndexByKey(t.key),a.resolve()})},d=this._getInsertAfterOrBeforeKey(t);return s>=0?n.pageIndex(s).done(()=>{l(t.key)}).fail(a.reject):o<0&&(0,m.$K)(d)?l(d):(n.updateItems({changeType:"update",rowIndices:[e,r,o]}),(o=n.getRowIndexByKey(t.key))<0?l(t.key):a.resolve()),a.done(()=>{var u;null===(u=this._rowsView)||void 0===u||u.waitAsyncTemplates(!0).done(()=>{this._showAddedRow(o),this._afterInsertRow(t.key)})}),a.promise()}_showAddedRow(e){this._focusFirstEditableCellInRow(e)}_beforeFocusElementInRow(e){}_focusFirstEditableCellInRow(e){var t,r=this._dataController,a=r.getKeyByRowIndex(e),n=this.getFirstEditableCellInRow(e);null===(t=this._keyboardNavigationController)||void 0===t||t.focus(n),this.option("focusedRowKey",a),this._editCellInProgress=!0,this._delayedInputFocus(n,()=>{e=r.getRowIndexByKey(a),this._editCellInProgress=!1,this._beforeFocusElementInRow(e)})}_isEditingStart(e){return this.executeAction("onEditingStart",e),e.cancel}_beforeUpdateItems(e,t){}_getVisibleEditColumnIndex(){var e=this.option(ms);return(0,m.$K)(e)?this._columnsController.getVisibleColumnIndex(e):-1}_setEditColumnNameByIndex(e,t){var r,a=this._columnsController.getVisibleColumns();this._setEditColumnName(null===(r=a[e])||void 0===r?void 0:r.name,t)}_setEditColumnName(e,t){t?this._silentOption(ms,e):this.option(ms,e)}_resetEditColumnName(){this._setEditColumnName(null,!0)}_getEditColumn(){var e=this.option(ms);return this._getColumnByName(e)}_getColumnByName(e){var r,t=this._columnsController.getVisibleColumns();return(0,m.$K)(e)&&t.some(a=>{if(a.name===e)return r=a,!0}),r}_getVisibleEditRowIndex(e){var t=this._dataController,r=this.option(Tr),a=t.getRowIndexByKey(r);return-1===a?a:a+this._getEditRowIndexCorrection(e)}_getEditRowIndexCorrection(e){var t=e?this._getColumnByName(e):this._getEditColumn();return"adaptiveHidden"===t?.visibleWidth?1:0}_resetEditRowKey(){this._refocusEditCell=!1,this._setEditRowKey(null,!0)}_resetEditIndices(){this._resetEditColumnName(),this._resetEditRowKey()}editRow(e){var t,r=this._dataController,n=r.items()[e],s={data:n&&n.data,cancel:!1},o=this._getVisibleEditRowIndex();if(n){if(e===o)return!0;if(void 0===n.key)return void this._dataController.fireError("E1043");n.isNewRow||(s.key=n.key),!this._isEditingStart(s)&&(this.resetChanges(),this.init(),this._resetEditColumnName(),this._pageIndex=r.pageIndex(),this._addInternalData({key:n.key,oldData:null!==(t=n.oldData)&&void 0!==t?t:n.data}),this._setEditRowKey(n.key))}}_editRowFromOptionChanged(e,t){var r=[t,e];this._beforeUpdateItems(r,e,t),this._editRowFromOptionChangedCore(r,e)}_editRowFromOptionChangedCore(e,t,r){this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:e,cancel:r})}_focusEditorIfNeed(){}_showEditPopup(e,t){}_repaintEditPopup(){}_getEditPopupHiddenHandler(){return e=>{this.isEditing()&&this.cancelEditData()}}_getPopupEditFormTemplate(e){}_getSaveButtonConfig(){var e={text:this.option("editing.texts.saveRowChanges"),onClick:this.saveEditData.bind(this)};return(0,_t.dC)((0,_t.Vk)())&&(e.stylingMode="contained",e.type="default"),e}_getCancelButtonConfig(){var e={text:this.option("editing.texts.cancelRowChanges"),onClick:this.cancelEditData.bind(this)};return(0,_t.dC)((0,_t.Vk)())&&(e.stylingMode="outlined"),e}_removeInternalData(e){var t=this._getInternalData(e),r=this._internalState.indexOf(t);r>-1&&this._internalState.splice(r,1)}_updateInsertAfterOrBeforeKeys(e,t){var r=e[t];e.forEach(a=>{var n=this._getInsertAfterOrBeforeKey(a);(0,J.bY)(n,r.key)&&(a[(0,m.$K)(a.insertAfterKey)?"insertAfterKey":"insertBeforeKey"]=this._getInsertAfterOrBeforeKey(r))})}_removeChange(e){if(e>=0){var t=[...this.getChanges()],{key:r}=t[e];this._removeInternalData(r),this._updateInsertAfterOrBeforeKeys(t,e),t.splice(e,1),this._silentOption(an,t),(0,J.bY)(this.option(Tr),r)&&this._resetEditIndices()}}executeOperation(e,t){this._lastOperation&&this._lastOperation.reject(),this._lastOperation=e,this.waitForDeferredOperations().done(()=>{"rejected"!==e.state()&&(t(),this._lastOperation=null)}).fail(()=>{e.reject(),this._lastOperation=null})}waitForDeferredOperations(){return(0,Y.gx)(...this._deferreds)}_processCanceledEditingCell(){}_repaintEditCell(e,t,r){!e||!e.showEditorAlways||t&&!t.showEditorAlways?(this._editCellInProgress=!0,this._needFocusEditor=!0,this._editorFactoryController.loseFocus(),this._dataController.updateItems({changeType:"update",rowIndices:[r,this._getVisibleEditRowIndex()]})):e!==t&&(this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:[]}))}_delayedInputFocus(e,t,r){var a=()=>{if(t&&t(),e){var n=e.find($f).first();Te.focusAndSelectElement(this,n)}this._beforeFocusCallback=null};at.Z.real().ios||at.Z.real().android?a():(this._beforeFocusCallback&&this._beforeFocusCallback(),clearTimeout(this._inputFocusTimeoutID),r&&(this._beforeFocusCallback=t),this._inputFocusTimeoutID=setTimeout(a))}_focusEditingCell(e,t,r){var a=this._getVisibleEditColumnIndex();(t=t||this._rowsView&&this._rowsView._getCellElement(this._getVisibleEditRowIndex(),a))&&this._delayedInputFocus(t,e,r)}deleteRow(e){this._checkAndDeleteRow(e)}_checkAndDeleteRow(e){var t=this.option("editing"),r=t?.texts,a=t?.confirmDelete,n=r?.confirmDeleteMessage,s=this._dataController.items()[e],o=!this.isEditing()||s.isNewRow;if(s&&o)if(a&&n){var l=r&&r.confirmDeleteTitle,d=(0,m.$K)(l)&&l.length>0;Zf(n,l,d).done(u=>{u&&this._deleteRowCore(e)})}else this._deleteRowCore(e)}_deleteRowCore(e){var r=this._dataController.items()[e],a=r&&r.key,n=this._getVisibleEditRowIndex();this.refresh();var s=this.getChanges(),o=Te.getIndexByKey(a,s);return o>=0?s[o].type===Ra?this._removeChange(o):this._addChange({key:a,type:tn}):this._addChange({key:a,oldData:r.data,type:tn}),this._afterDeleteRow(e,n)}_afterDeleteRow(e,t){return this.saveEditData()}undeleteRow(e){var t=this._dataController,r=t.items()[e],a=this._getVisibleEditRowIndex(),n=r&&r.key,s=this.getChanges();if(r){var o=Te.getIndexByKey(n,s);if(o>=0){var{data:l}=s[o];(0,m.Qr)(l)?this._removeChange(o):this._addChange({key:n,type:ed}),t.updateItems({changeType:"update",rowIndices:[a,e]})}}}_fireOnSaving(){var e={cancel:!1,promise:null,changes:[...this.getChanges()]};this.executeAction("onSaving",e);var t=new Y.BH;return(0,Y.gx)((0,Y.p4)(e.promise)).done(()=>{t.resolve(e)}).fail(r=>{td(t),this._fireDataErrorOccurred(r),t.resolve({cancel:!0})}),t}_executeEditingAction(e,t,r){if(this.component._disposed)return null;var a=new Y.BH;return this.executeAction(e,t),(0,Y.gx)((0,Y.p4)(t.cancel)).done(n=>{n?setTimeout(()=>{a.resolve("cancel")}):r(t).done(a.resolve).fail(td(a))}).fail(td(a)),a}_processChanges(e,t,r,a){var n=this._dataController.store();(0,j.S6)(a,(s,o)=>{var f,p,l=this._getOldData(o.key),{data:d,type:u}=o,c=(0,ye.Z)({},o);if(!this._beforeSaveEditData(o,s)){switch(u){case tn:f=this._executeEditingAction("onRowRemoving",p={data:l,key:o.key,cancel:!1},()=>n.remove(o.key).done(w=>{r.push({type:"remove",key:w})}));break;case Ra:f=this._executeEditingAction("onRowInserting",p={data:d,cancel:!1},()=>n.insert(p.data).done((w,x)=>{(0,m.$K)(x)&&(c.key=x),w&&(0,m.Kn)(w)&&w!==p.data&&(c.data=w),r.push({type:"insert",data:w,index:0})}));break;case ed:f=this._executeEditingAction("onRowUpdating",p={newData:d,oldData:l,key:o.key,cancel:!1},()=>n.update(o.key,p.newData).done((w,x)=>{w&&(0,m.Kn)(w)&&w!==p.newData&&(c.data=w),r.push({type:"update",key:x,data:w})}))}if(a[s]=c,f){var g=new Y.BH;f.always(w=>{t.push({key:o.key,result:w})}).always(g.resolve),e.push(g.promise())}}})}_processRemoveIfError(e,t){var r=e[t];return r?.type===tn&&t>=0&&e.splice(t,1),!0}_processRemove(e,t,r){var a=e[t];if(!r||!a||a.type===tn)return this._processRemoveCore(e,t,!r||!a)}_processRemoveCore(e,t,r){return t>=0&&e.splice(t,1),!0}_processSaveEditDataResult(e){for(var t=!1,r=[...this.getChanges()],a=r.length,n=0;n<e.length;n++){var s=e[n].result,o="cancel"===s,l=Te.getIndexByKey(e[n].key,r),d=r[l];if(s&&s instanceof Error){if(d&&this._addInternalData({key:d.key,error:s}),this._fireDataErrorOccurred(s),this._processRemoveIfError(r,l))break}else this._processRemove(r,l,o)&&(t=!o)}return r.length<a&&this._silentOption(an,r),t}_fireSaveEditDataEvents(e){(0,j.S6)(e,(t,r)=>{var{data:a,key:n,type:s}=r,o=this._addInternalData({key:n}),l={key:n,data:a};switch(o.error&&(l.error=o.error),s){case tn:this.executeAction("onRowRemoved",(0,N.l)({},l,{data:o.oldData}));break;case Ra:this.executeAction("onRowInserted",l);break;case ed:this.executeAction("onRowUpdated",l)}}),this.executeAction("onSaved",{changes:e})}saveEditData(){var e=new Y.BH;return this.waitForDeferredOperations().done(()=>{this.isSaving()?this._resolveAfterSave(e):(0,Y.gx)(this._beforeSaveEditData()).done(t=>{t?this._resolveAfterSave(e,{cancel:t}):(this._saving=!0,this._saveEditDataInner().always(()=>{this._saving=!1,this._refocusEditCell&&this._focusEditingCell()}).done(e.resolve).fail(e.reject))}).fail(e.reject)}).fail(e.reject),e.promise()}_resolveAfterSave(e){var{cancel:t,error:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Y.gx)(this._afterSaveEditData(t)).done(()=>{e.resolve(r)}).fail(e.reject)}_saveEditDataInner(){var e=new Y.BH,t=[],r=[],a=[],n=this._dataController.dataSource();return(0,Y.gx)(this._fireOnSaving()).done(s=>{var{cancel:o,changes:l}=s;return o?e.resolve().promise():(this._processChanges(r,t,a,l),r.length?(this._refocusEditCell=!0,n?.beginLoading(),(0,Y.gx)(...r).done(()=>{this._processSaveEditDataResult(t)?this._endSaving(a,l,e):(n?.endLoading(),e.resolve())}).fail(d=>{n?.endLoading(),e.resolve(d)}),e.always(()=>{this._refocusEditCell=!0}).promise()):void this._cancelSaving(e))}).fail(e.reject),e.promise()}_beforeEndSaving(e){this._resetEditIndices()}_endSaving(e,t,r){var a=this._dataController.dataSource();this._beforeEndSaving(t),a?.endLoading(),this._refreshDataAfterSave(e,t,r)}_cancelSaving(e){this.executeAction("onSaved",{changes:[]}),this._resolveAfterSave(e)}_refreshDataAfterSave(e,t,r){var a=this._dataController,n=this.option("editing.refreshMode"),s="reshape"!==n&&"repaint"!==n;s||a.push(e),(0,Y.gx)(a.refresh({selection:s,reload:s,load:"reshape"===n,changesOnly:this.option("repaintChangesOnly")})).always(()=>{this._fireSaveEditDataEvents(t)}).done(()=>{this._resolveAfterSave(r)}).fail(o=>{this._resolveAfterSave(r,{error:o})})}isSaving(){return this._saving}_updateEditColumn(){var e=this._isEditColumnVisible(),t=this.option("editing.useIcons"),r=Yw+(t?" ".concat(Xw):"");this._columnsController.addCommandColumn({type:"buttons",command:"edit",visible:e,cssClass:r,width:"auto",alignment:"center",cellTemplate:this._getEditCommandCellTemplate(),fixedPosition:"right"}),this._columnsController.columnOption("command:edit",{visible:e,cssClass:r})}_isEditColumnVisible(){return this.option("editing").allowDeleting}_isEditButtonDisabled(){var e=this.hasChanges();return!((0,m.$K)(this.option("editing.editRowKey"))||e)}_updateEditButtons(){var e=this._isEditButtonDisabled();this._headerPanelView&&(this._headerPanelView.setToolbarItemDisabled("saveButton",e),this._headerPanelView.setToolbarItemDisabled("revertButton",e))}_applyModified(e,t){e&&e.addClass(Jw)}_beforeCloseEditCellInBatchMode(e){}cancelEditData(){var e=this.getChanges(),t={cancel:!1,changes:e};this.executeAction("onEditCanceling",t),t.cancel||(this._cancelEditDataCore(),this.executeAction("onEditCanceled",{changes:e}))}_cancelEditDataCore(){var e=this._getVisibleEditRowIndex();this._beforeCancelEditData(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey(),this._afterCancelEditData(e)}_afterCancelEditData(e){this._dataController.updateItems({repaintChangesOnly:this.option("repaintChangesOnly")})}_hideEditPopup(){}hasEditData(){return this.hasChanges()}update(e){var t=this._dataController;t&&this._pageIndex!==t.pageIndex()&&("refresh"===e&&this.refresh({isPageChanged:!0}),this._pageIndex=t.pageIndex()),this._updateEditButtons()}_getRowIndicesForCascadeUpdating(e,t){return t?[]:[e.rowIndex]}addDeferred(e){this._deferreds.includes(e)||(this._deferreds.push(e),e.always(()=>{var t=this._deferreds.indexOf(e);t>=0&&this._deferreds.splice(t,1)}))}_prepareChange(e,t,r){var a,n={},s=null===(a=e.row)||void 0===a?void 0:a.data,o=e.key,l=new Y.BH;return void 0!==o&&(e.value=t,(0,Y.p4)(e.column.setCellValue(n,t,(0,N.l)(!0,{},s),r)).done(()=>{l.resolve({data:n,key:o,oldData:s,type:ed})}).fail(td(l)).fail(u=>this._fireDataErrorOccurred(u)),(0,m.$K)(r)&&e.column.displayValueMap&&(e.column.displayValueMap[t]=r),this._updateRowValues(e),this.addDeferred(l)),l}_updateRowValues(e){if(e.values){var t=this._dataController,r=t.getRowIndexByKey(e.key),a=t.getVisibleRows()[r];a&&(e.row.values=a.values,e.values=a.values),e.values[e.columnIndex]=e.value}}updateFieldValue(e,t,r,a){var n=e.key,s=new Y.BH;return void 0===n&&this._dataController.fireError("E1043"),e.column.setCellValue?this._prepareChange(e,t,r).done(o=>{(0,Y.gx)(this._applyChange(e,o,a)).always(()=>{s.resolve()})}):s.resolve(),s.promise()}_focusPreviousEditingCellIfNeed(e){if(this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex))return this._focusEditingCell(),this._updateEditRow(e.row,!0),!0}_needUpdateRow(e){var t=this._columnsController.getVisibleColumns();e||(e=this._getEditColumn());var r=e&&e.setCellValue!==e.defaultSetCellValue,a=t.some(n=>n.calculateCellValue!==n.defaultCalculateCellValue);return r||a}_applyChange(e,t,r){var a=(0,ye.Z)((0,ye.Z)({},e),{forceUpdateRow:r});return this._addChange(t,a),this._updateEditButtons(),this._applyChangeCore(e,a.forceUpdateRow)}_applyChangeCore(e,t){var r=e.column.setCellValue!==e.column.defaultSetCellValue,{row:a}=e;a&&(t||r?this._updateEditRow(a,t,r):a.update&&a.update())}_updateEditRowCore(e,t,r){this._dataController.updateItems({changeType:"update",rowIndices:this._getRowIndicesForCascadeUpdating(e,t)})}_updateEditRow(e,t,r){t?this._updateRowImmediately(e,t,r):this._updateRowWithDelay(e,r)}_updateRowImmediately(e,t,r){this._updateEditRowCore(e,!t,r),this._validateEditFormAfterUpdate(e,r),t||this._focusEditingCell()}_updateRowWithDelay(e,t){var r=new Y.BH;this.addDeferred(r),setTimeout(()=>{var a,n=(null===(a=this._editForm)||void 0===a?void 0:a.element())||this.component.$element().get(0),s=(0,b.Z)(it.Z.getActiveElement(n)),o=this._rowsView.getCellIndex(s,e.rowIndex),l=s.get(0),d=Te.getSelectionRange(l);if(this._updateEditRowCore(e,!1,t),this._validateEditFormAfterUpdate(e,t),o>=0){var u=this._rowsView._getCellElement(e.rowIndex,o);this._delayedInputFocus(u,()=>{setTimeout(()=>{var c;l=it.Z.getActiveElement(null===(c=this.component.$element())||void 0===c?void 0:c.get(0)),d.selectionStart>=0&&Te.setSelectionRange(l,d)})})}r.resolve()})}_validateEditFormAfterUpdate(){}_addChange(e,t){var r,a=t?.row,n=[...this.getChanges()],s=Te.getIndexByKey(e.key,n);s<0&&(s=n.length,this._addInternalData({key:e.key,oldData:e.oldData}),delete e.oldData,n.push(e));var o=(0,ye.Z)({},n[s]);return o&&(e.data&&(o.data=(0,ar.FL)(o.data,e.data)),(!o.type||!e.data)&&e.type&&(o.type=e.type),a&&(a.oldData=this._getOldData(a.key),a.data=(0,ar.FL)(a.data,e.data))),n[s]=o,this._silentOption(an,n),t&&o!==(null===(r=this.getChanges())||void 0===r?void 0:r[s])&&(t.forceUpdateRow=!0),o}_getFormEditItemTemplate(e,t){return t.editCellTemplate||this._getDefaultEditorTemplate()}getColumnTemplate(e){var a,l,{column:t}=e,r=e.row&&e.row.rowIndex,n=this.isRowBasedEditMode(),s=this.isEditRow(r),o=this.isEditCell(r,e.columnIndex);return!(t.showEditorAlways||t.setCellValue&&(s&&t.allowEditing||o))||"data"!==e.rowType&&"detailAdaptive"!==e.rowType||t.command?"detail"===t.command&&"detail"===e.rowType&&s&&(a=null==this?void 0:this.getEditFormTemplate(e)):(((this.allowUpdating(e)||s)&&t.allowEditing||o)&&(s||!n)&&(t.showEditorAlways&&!n&&this._isEditingStart(l={cancel:!1,key:e.row.isNewRow?void 0:e.row.key,data:e.row.data,column:t}),(!l||!l.cancel)&&(e.setValue=(u,c)=>{this.updateFieldValue(e,u,c)})),a=t.editCellTemplate||this._getDefaultEditorTemplate()),a}_createButton(e,t,r,a){var n=YF[t.name],s=this.option("editing.useIcons"),o=this.option("useLegacyColumnButtonTemplate"),l=(0,b.Z)("<a>").attr("href","#").addClass("dx-link").addClass(t.cssClass);if(t.template&&o)this._rowsView.renderTemplate(e,t.template,r,!0);else{if(t.template)l=(0,b.Z)("<span>").addClass(t.cssClass);else if(s&&n||t.icon){var d=Ia.P(n=t.icon||n);"image"===d||"svg"===d?l=Ia.H(n).addClass(t.cssClass):l.addClass("dx-icon".concat("dxIcon"===d?"-":" ").concat(n)).attr("title",t.text),l.addClass("dx-link-icon"),e.addClass(Xw);var u=this.getButtonLocalizationNames()[t.name];u&&l.attr("aria-label",ae.Z.format(u))}else l.text(t.text);(0,m.$K)(t.hint)&&l.attr("title",t.hint),this._isButtonDisabled(t,r)?l.addClass("dx-state-disabled"):(!t.template||t.onClick)&&k.Z.on(l,(0,ce.V4)("click","dxDataGridEditing"),this.createAction(c=>{var f;null===(f=t.onClick)||void 0===f||f.call(t,(0,N.l)({},c,{row:r.row,column:r.column})),c.event.preventDefault(),c.event.stopPropagation()})),e.append(l,"&nbsp;"),t.template&&(r.renderAsync=!1,this._rowsView.renderTemplate(l,t.template,r,!0,a))}}getButtonLocalizationNames(){return{edit:"dxDataGrid-editingEditRow",save:"dxDataGrid-editingSaveRowChanges",delete:"dxDataGrid-editingDeleteRow",undelete:"dxDataGrid-editingUndeleteRow",cancel:"dxDataGrid-editingCancelRowChanges"}}prepareButtonItem(e,t,r,a){var n,s=null!==(n=this.option("editing.texts"))&&void 0!==n?n:{},l={revert:"cancel",save:"save",addRow:"addrow"}[t],d={revert:s.cancelAllChanges,save:s.saveAllChanges,addRow:s.addRow}[t],u=("save"===l||"cancel"===l)&&this._isEditButtonDisabled();return{widget:"dxButton",options:{onInitialized:c=>{(0,b.Z)(c.element).addClass(e._getToolbarButtonClass("".concat("dx-edit-button"," ").concat(this.addWidgetPrefix(l),"-button")))},icon:"edit-button-".concat(l),disabled:u,onClick:()=>{setTimeout(()=>{this[r]()})},text:d,hint:d},showText:"inMenu",name:"".concat(t,"Button"),location:"after",locateInMenu:"auto",sortIndex:a}}prepareEditButtons(e){var t,a=[];return(null!==(t=this.option("editing"))&&void 0!==t?t:{}).allowAdding&&a.push(this.prepareButtonItem(e,"addRow","addRow",20)),a}highlightDataCell(e,t){this.shouldHighlightCell(t)&&e.addClass(Jw)}_afterInsertRow(e){}_beforeSaveEditData(e){if(e&&!(0,m.$K)(e.key)&&(0,m.$K)(e.type))return!0}_afterSaveEditData(){}_beforeCancelEditData(){}_allowEditAction(e,t){var r=this.option("editing.".concat(e));return(0,m.mf)(r)&&(r=r({component:this.component,row:t.row})),r}allowUpdating(e,t){var r,a=null!==(r=this.option("editing.startEditAction"))&&void 0!==r?r:"click";return(!(arguments.length>1)||a===t||"down"===t)&&this._allowEditAction("allowUpdating",e)}allowDeleting(e){return this._allowEditAction("allowDeleting",e)}isCellModified(e){var t,r,a,{columnIndex:n}=e,s=null===(r=null===(t=e?.row)||void 0===t?void 0:t.modifiedValues)||void 0===r?void 0:r[n];return!(null===(a=e?.row)||void 0===a)&&a.isNewRow&&(s=e.value),void 0!==s}isNewRowInEditMode(){var e=this._getVisibleEditRowIndex(),t=this._dataController.items();return e>=0&&t[e].isNewRow}_isRowDeleteAllowed(){}shouldHighlightCell(e){return this.isCellModified(e)&&e.column.setCellValue&&(this.getEditMode()!==rn||!e.row.isEditing)}}},extenders:{controllers:{data:nS},views:{rowsView:i=>class extends i{getCellIndex(e,t){if(!e.is("td")&&t>=0){var r=this.getCellElements(t),a=-1;return(0,j.S6)(r,(n,s)=>{(0,b.Z)(s).find(e).length&&(a=n)}),a}return super.getCellIndex.apply(this,arguments)}publicMethods(){return super.publicMethods().concat(["cellValue"])}_getCellTemplate(e){return this._editingController.getColumnTemplate(e)||super._getCellTemplate(e)}_createRow(e){var t=super._createRow.apply(this,arguments);if(e){var r=!!e.removed,a=!!e.isNewRow,n=!!e.modified;a&&t.addClass("dx-row-inserted"),n&&t.addClass("dx-row-modified"),(a||r)&&t.removeClass("dx-selection")}return t}_getColumnIndexByElement(e){for(var t=e.closest("table"),r=this.getTableElements();t.length&&!r.filter(t).length;)e=t.closest("td"),t=e.closest("table");return this._getColumnIndexByElementCore(e)}_getColumnIndexByElementCore(e){var t=e.closest(".".concat(On,"> td:not(.dx-master-detail-cell)"));return this.getCellIndex(t)}_editCellByClick(e,t){var r=this._editingController,a=(0,b.Z)(e.event.target),n=this._getColumnIndexByElement(a),s=this._dataController.items()[e.rowIndex],o=r.allowUpdating({row:s},t)||s&&s.isNewRow,l=this._columnsController.getVisibleColumns()[n],d=r.isEditCell(e.rowIndex,n),u=o&&l&&(l.allowEditing||d),c=this.option("editing.startEditAction")||"click",f=l&&l.showEditorAlways;if(d)return!0;if("down"===t)return(at.Z.real().ios||at.Z.real().android)&&(0,ga.M3)(),f&&u&&r.editCell(e.rowIndex,n);if("click"===t&&"dblClick"===c&&this._pointerDownTarget===a.get(0)){var p=s?.isNewRow;r.closeEditCell(!1,p)}return u&&t===c?r.editCell(e.rowIndex,n)||r.isEditRow(e.rowIndex):void 0}_rowPointerDown(e){this._pointerDownTarget=e.event.target,this._pointerDownTimeout=setTimeout(()=>{this._editCellByClick(e,"down")})}_rowClickTreeListHack(e){super._rowClick.apply(this,arguments)}_rowClick(e){var t=(0,b.Z)(e.rowElement).hasClass(this.addWidgetPrefix(sh));e.event[Kw]=this.component,!this._editCellByClick(e,"click")&&!t&&super._rowClick.apply(this,arguments)}_rowDblClickTreeListHack(e){super._rowDblClick.apply(this,arguments)}_rowDblClick(e){this._editCellByClick(e,"dblClick")||super._rowDblClick.apply(this,arguments)}_cellPrepared(e,t){var r,a=this._editingController,n=!!t.column.command,s=t.setValue,o=a.isEditRow(t.rowIndex),l=tS(o,t);if(iS(o,t)){var{alignment:d}=t.column;e.toggleClass(this.addWidgetPrefix("readonly"),!s).toggleClass("dx-cell-focus-disabled",!s),d&&e.find(Wf).first().css("textAlign",d)}l&&this._editCellPrepared(e);var u=!(null===(r=t.column)||void 0===r||!r.cellTemplate);t.column&&!n&&(!u||a.shouldHighlightCell(t))&&a.highlightDataCell(e,t),super._cellPrepared.apply(this,arguments)}_getCellOptions(e){var t=super._getCellOptions(e),{columnIndex:r,row:a}=e;return t.isEditing=this._editingController.isEditCell(t.rowIndex,t.columnIndex),t.removed=a.removed,a.modified&&(t.modified=void 0!==a.modifiedValues[r]),t}_setCellAriaAttributes(e,t){super._setCellAriaAttributes(e,t),t.removed&&this.setAria("roledescription",ae.Z.format("dxDataGrid-ariaDeletedCell"),e),t.modified&&this.setAria("roledescription",ae.Z.format("dxDataGrid-ariaModifiedCell"),e),t.column.allowEditing&&!t.removed&&!t.modified&&"data"===t.rowType&&t.column.calculateCellValue===t.column.defaultCalculateCellValue&&this._editingController.isCellBasedEditMode()&&this.setAria("roledescription",ae.Z.format("dxDataGrid-ariaEditableCell"),e)}_createCell(e){var t=super._createCell(e),r=this._editingController.isEditRow(e.rowIndex);return iS(r,e)&&t.addClass(nh),t}cellValue(e,t,r,a){var n=this.getCellOptions(e,t);if(n){if(void 0===r)return n.value;this._editingController.updateFieldValue(n,r,a,!0)}}dispose(){super.dispose.apply(this,arguments),clearTimeout(this._pointerDownTimeout)}_renderCore(){return super._renderCore.apply(this,arguments),this.waitAsyncTemplates(!0).done(()=>{this._editingController._focusEditorIfNeed()})}_editCellPrepared(){}_formItemPrepared(){}},headerPanel:i=>class extends i{optionChanged(e){var{fullName:t}=e;switch(e.name){case"editing":t&&![oh,an,ms,Tr].some(n=>n===t)&&this._invalidate(),super.optionChanged(e);break;case"useLegacyColumnButtonTemplate":e.handled=!0;break;default:super.optionChanged(e)}}_getToolbarItems(){var e=super._getToolbarItems();return this._editingController.prepareEditButtons(this).concat(e)}isVisible(){var e=this._editingController.option("editing");return super.isVisible()||e?.allowAdding}}}}};He.registerModule("editing",(0,ye.Z)((0,ye.Z)({},jf),{extenders:(0,ye.Z)((0,ye.Z)({},jf.extenders),{controllers:(0,ye.Z)((0,ye.Z)({},jf.extenders.controllers),{data:i=>class extends(nS(i)){_changeRowExpandCore(e){var t=this._editingController;return Array.isArray(e)&&t&&t.refresh(),super._changeRowExpandCore.apply(this,arguments)}}})})}));var xk={extenders:{controllers:{editing:i=>class extends i{isRowEditMode(){return this.getEditMode()===rn}_afterCancelEditData(e){var t=this._dataController;this.isRowBasedEditMode()&&e>=0?t.updateItems({changeType:"update",rowIndices:[e,e+1]}):super._afterCancelEditData(e)}_isDefaultButtonVisible(e,t){var r=this.isRowBasedEditMode(),a=t.row&&(0,J.bY)(t.row.key,this.option(Tr));if(r)switch(e.name){case"edit":return!a&&this.allowUpdating(t);case"delete":return super._isDefaultButtonVisible(e,t)&&!a;case"save":case"cancel":return a;default:return super._isDefaultButtonVisible(e,t)}return super._isDefaultButtonVisible(e,t)}isEditRow(e){return this.isRowBasedEditMode()&&this.isEditRowByIndex(e)}_cancelSaving(e){this.isRowBasedEditMode()&&(this.hasChanges()||this._cancelEditDataCore()),super._cancelSaving(e)}_refreshCore(e){var{allowCancelEditing:t}=e??{};if(this.isRowBasedEditMode()){var r=this.getChanges().filter(a=>"update"===a.type).length>0;this.init(),t&&r&&this._cancelEditDataCore()}super._refreshCore(e)}_isEditColumnVisible(){var e=super._isEditColumnVisible(),t=this.option("editing"),r=this.isRowEditMode();return e||r&&(t.allowUpdating||t.allowAdding)}_focusEditorIfNeed(){var e=this.getEditMode();if(this._needFocusEditor){if(kF.includes(e)){var t=this.getFocusedCellInRow(this._getVisibleEditRowIndex());this._delayedInputFocus(t,()=>{t&&this.component.focus(t)})}this._needFocusEditor=!1}}},data:i=>class extends i{_getChangedColumnIndices(e,t,r,a){if(!this._editingController.isRowBasedEditMode()||e.isEditing===t.isEditing)return super._getChangedColumnIndices.apply(this,arguments)}}},views:{rowsView:i=>class extends i{_createRow(e){var t=super._createRow.apply(this,arguments);return e&&this._editingController.isEditRow(e.rowIndex)&&(t.addClass(eS),t.removeClass($w),"detail"===e.rowType&&t.addClass(this.addWidgetPrefix(sh))),t}_update(e){super._update(e),"updateSelection"===e.changeType&&this.getTableElements().children("tbody").children(".".concat(eS)).removeClass($w)}}}}};He.registerModule("editingRowBased",xk);var qf=be(340);class sS{constructor(){this._map={}}_findWidgetInstance(e){var t;return(0,j.S6)(this._map,function(r,a){var{widgetInstance:n,item:s}=a;if(e(s))return t=n,!1}),t}_findFieldByCondition(e,t){var r;return(0,j.S6)(this._map,function(a,n){if(e(n))return r="guid"===t?a:n[t],!1}),r}clear(){this._map={}}removeItemsByItems(e){(0,j.S6)(e.getItems(),t=>this.removeItemByKey(t))}removeItemByKey(e){delete this._map[e]}add(e){var t=e.guid||new Ri.Z;return this._map[t]=e,t}addItemsOrExtendFrom(e){e.each((t,r)=>{this._map[t]?(r.widgetInstance&&(this._map[t].widgetInstance=r.widgetInstance),this._map[t].$itemContainer=r.$itemContainer):this.add({item:r.item,widgetInstance:r.widgetInstance,guid:t,$itemContainer:r.$itemContainer})})}extendRunTimeItemInfoByKey(e,t){this._map[e]&&(this._map[e]=(0,N.l)(this._map[e],t))}findWidgetInstanceByItem(e){return this._findWidgetInstance(t=>t===e)}findGroupOrTabLayoutManagerByPath(e){return this._findFieldByCondition(t=>{var{path:r}=t;return r===e},"layoutManager")}findKeyByPath(e){return this._findFieldByCondition(t=>{var{path:r}=t;return r===e},"guid")}findWidgetInstanceByName(e){return this._findWidgetInstance(t=>e===t.name)}findWidgetInstanceByDataField(e){return this._findWidgetInstance(t=>e===((0,m.HD)(t)?t:t.dataField))}findItemContainerByItem(e){for(var t in this._map)if(this._map[t].item===e)return this._map[t].$itemContainer;return null}findItemIndexByItem(e){return this._findFieldByCondition(t=>{var{item:r}=t;return r===e},"itemIndex")}findPreparedItemByItem(e){return this._findFieldByCondition(t=>{var{item:r}=t;return r===e},"preparedItem")}getItems(){return this._map}each(e){(0,j.S6)(this._map,function(t,r){e(t,r)})}removeItemsByPathStartWith(e){Object.keys(this._map).filter(a=>!!this._map[a].path&&this._map[a].path.indexOf(e,0)>-1).forEach(a=>this.removeItemByKey(a))}}var dh={move(i,e){(0,oi.pB)(i,{left:e})}},Yf={moveTo(i,e,t,r){Yt.Z.animate(i,{type:"slide",to:{left:e},duration:t,complete:r})},complete(i){Yt.Z.stop(i,!0)}},oS="dx-multiview-item",lS=i=>+i,dS=Gp.inherit({_activeStateUnit:"."+oS,_supportedKeys:function(){return(0,N.l)(this.callBase(),{pageUp:J.ZT,pageDown:J.ZT})},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_itemClass:function(){return oS},_itemDataKey:function(){return"dxMultiViewItemData"},_itemContainer:function(){return this._$itemContainer},_itemElements:function(){return this._itemContainer().children(this._itemSelector())},_itemWidth:function(){return this._itemWidthValue||(this._itemWidthValue=(0,oe.dz)(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache:function(){delete this._itemWidthValue},_itemsCount:function(){return this.option("items").length},_normalizeIndex:function(i){var e=this._itemsCount();return i<0&&(i+=e),i>=e&&(i-=e),i},_getRTLSignCorrection:function(){return this.option("rtlEnabled")?-1:1},_init:function(){this.callBase.apply(this,arguments);var i=this.$element();i.addClass("dx-multiview"),this._$wrapper=(0,b.Z)("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo(i),this._$itemContainer=(0,b.Z)("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._findBoundaryIndices(),this._initSwipeable()},_initMarkup:function(){this._deferredItems=[],this.callBase();var i=this._getSelectedItemIndices();this._updateItemsVisibility(i[0]),this._setElementAria(),this._setItemsAria()},_afterItemElementDeleted:function(i,e){this.callBase(i,e),this._deferredItems&&this._deferredItems.splice(e.itemIndex,1)},_beforeItemElementInserted:function(i){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(i.index,0,null)},_executeItemRenderAction:function(i,e,t){i=(this.option("items")||[]).indexOf(e),this.callBase(i,e,t)},_renderItemContent:function(i){var e=new Y.BH,t=this,r=this.callBase,a=new Y.BH;return a.done(function(){var n=r.call(t,i);e.resolve(n)}),this._deferredItems[i.index]=a,this.option("deferRendering")||a.resolve(),e.promise()},_render:function(){this.callBase(),(0,J.g0)(()=>{var i=this._getSelectedItemIndices();this._updateItems(i[0])})},_getElementAria:()=>({role:"group",roledescription:ae.Z.format("dxMultiView-elementAriaRoleDescription"),label:ae.Z.format("dxMultiView-elementAriaLabel")}),_setElementAria(){var i=this._getElementAria();this.setAria(i,this.$element())},_setItemsAria(){var i=this._itemElements(),e=this._itemsCount();i.each((t,r)=>{var a=this._getItemAria({itemIndex:t,itemsCount:e});this.setAria(a,(0,b.Z)(r))})},_getItemAria(i){var{itemIndex:e,itemsCount:t}=i;return{role:"group",roledescription:ae.Z.format("dxMultiView-itemAriaRoleDescription"),label:ae.Z.format("dxMultiView-itemAriaLabel",e+1,t)}},_updateItems:function(i,e){this._updateItemsPosition(i,e),this._updateItemsVisibility(i,e)},_modifyByChanges:function(){this.callBase.apply(this,arguments);var i=this._getSelectedItemIndices();this._updateItemsVisibility(i[0])},_updateItemsPosition:function(i,e){var t=this._itemElements(),r=(0,m.$K)(e)?-this._animationDirection(e,i):void 0,a=t.eq(i);dh.move(a,0),(0,m.$K)(e)&&dh.move(t.eq(e),100*r+"%")},_updateItemsVisibility(i,e){this._itemElements().each((r,a)=>{var n=(0,b.Z)(a),s=r!==i&&r!==e;s||this._renderSpecificItem(r),n.toggleClass("dx-multiview-item-hidden",s),this.setAria("hidden",s||void 0,n)})},_renderSpecificItem:function(i){var e=this._itemElements().eq(i),t=e.find(this._itemContentClass()).length>0;(0,m.$K)(i)&&!t&&(this._deferredItems[i].resolve(),(0,qf.U_)(e))},_refreshItem:function(i,e){this.callBase(i,e),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelectionAttribute:J.ZT,_updateSelection:function(i,e){var t=i[0],r=e[0];Yf.complete(this._$itemContainer),this._updateItems(r,t);var a=this._animationDirection(t,r);this._animateItemContainer(a*this._itemWidth(),function(){dh.move(this._$itemContainer,0),this._updateItems(t),(0,oe.dz)(this._$itemContainer)}.bind(this))},_animateItemContainer:function(i,e){var t=this.option("animationEnabled")?200:0;Yf.moveTo(this._$itemContainer,i,t,e)},_animationDirection:function(i,e){var t=(i=>(0,oi.jt)(this._$itemContainer).left)(),r=(e-i)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection();return(0,Li.Xx)(0!==t?t:r)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),Yu,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:i=>this._swipeStartHandler(i.event),onUpdated:i=>this._swipeUpdateHandler(i.event),onEnd:i=>this._swipeEndHandler(i.event)})},_findBoundaryIndices(){var i,e,r,a,t=this.option("items");t.forEach((n,s)=>{var l;n?.disabled||(null!==(l=r)&&void 0!==l||(r=s),a=s)}),this._boundaryIndices={firstAvailableIndex:null!==(i=r)&&void 0!==i?i:0,lastAvailableIndex:null!==(e=a)&&void 0!==e?e:t.length-1,firstTrueIndex:0,lastTrueIndex:t.length-1}},_swipeStartHandler:function(i){Yf.complete(this._$itemContainer);var e=this.option("selectedIndex"),t=this.option("loop"),{firstAvailableIndex:r,lastAvailableIndex:a}=this._boundaryIndices,n=this.option("rtlEnabled");i.maxLeftOffset=lS(t||(n?e>r:e<a)),i.maxRightOffset=lS(t||(n?e<a:e>r)),this._swipeDirection=null},_swipeUpdateHandler:function(i){var e=i.offset,t=(0,Li.Xx)(e)*this._getRTLSignCorrection();if(dh.move(this._$itemContainer,e*this._itemWidth()),t!==this._swipeDirection){this._swipeDirection=t;var r=this.option("selectedIndex"),a=this._normalizeIndex(r-t);this._updateItems(r,a)}},_findNextAvailableIndex(i,e){var{items:t,loop:r}=this.option(),{firstAvailableIndex:a,lastAvailableIndex:n,firstTrueIndex:s,lastTrueIndex:o}=this._boundaryIndices,l=[s,a].includes(i),d=[o,n].includes(i);if(r){if(l&&e<0)return n;if(d&&e>0)return a}for(var u=i+e;u>=a&&u<=n;u+=e)if(!t[u].disabled)return u;return i},_swipeEndHandler:function(i){var e=i.targetOffset*this._getRTLSignCorrection();if(e){var t=this._findNextAvailableIndex(this.option("selectedIndex"),-e);this.option("selectedIndex",t);var r=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",(0,rt.u)(r))}else this._animateItemContainer(0,J.ZT)},_getItemFocusLoopSignCorrection:function(){return this._itemFocusLooped?-1:1},_moveFocus:function(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem:function(i){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(i.last()),e},_nextItem:function(i){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(i.first()),e},_dimensionChanged:function(){this._clearItemWidthCache()},_visibilityChanged:function(i){i&&this._dimensionChanged()},_updateSwipeDisabledState(){var i=this._getSwipeDisabledState();Yu.getInstance(this.$element()).option("disabled",i)},_dispose:function(){delete this._boundaryIndices,this.callBase()},_optionChanged:function(i){var e=i.value;switch(i.name){case"loop":this.option("loopItemFocus",e);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),this.callBase(i);break;default:this.callBase(i)}}});(0,It.Z)("dxMultiView",dS);const Lk=dS;var uS="dx-badge",Bk=Al.Z.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge:function(i){if(this._$element.children("."+uS).remove(),i){var e=(0,b.Z)("<div>").addClass("dx-tabs-item-badge").addClass(uS).text(i);this._$element.append(e)}}});const Vk=Bk;var hS="dx-tabs-expanded";function cS(i){return i.scrollWidth-i.clientWidth}var gS="dx-tabs-stretched",mS="dx-tabs-nav-buttons",CS="dx-overflow-hidden",wS="dx-state-disabled",SS="dx-focused-disabled-next-tab",yS="dx-focused-disabled-prev-tab",ES={top:"dx-tab-indicator-position-top",right:"dx-tab-indicator-position-right",bottom:"dx-tab-indicator-position-bottom",left:"dx-tab-indicator-position-left"},id={top:"dx-tabs-icon-position-top",end:"dx-tabs-icon-position-end",bottom:"dx-tabs-icon-position-bottom",start:"dx-tabs-icon-position-start"},Xf={primary:"dx-tabs-styling-mode-primary",secondary:"dx-tabs-styling-mode-secondary"},IS="chevronnext",TS="chevronprev",Qf=Gp.inherit({_activeStateUnit:".dx-tab",_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",orientation:"horizontal",iconPosition:"start",stylingMode:"primary",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:function(i){return i?i.badge:void 0},_itemAttributes:{role:"tab"},_indicatorPosition:null})},_defaultOptionsRules:function(){var i=(0,_t.Vk)();return this.callBase().concat([{device:()=>"desktop"!==at.Z.real().deviceType,options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:()=>"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,_t.dC)(i),options:{iconPosition:"top",stylingMode:"secondary"}},{device:()=>(0,_t.x2)(i),options:{useInkRipple:!0,selectOnFocus:!1,iconPosition:"top"}}])},_init(){var{orientation:i,stylingMode:e,scrollingEnabled:t}=this.option(),r=this._getIndicatorPosition();this.callBase(),this.$element().addClass("dx-tabs"),this._toggleScrollingEnabledClass(t),this._toggleOrientationClass(i),this._toggleIndicatorPositionClass(r),this._toggleIconPositionClass(),this._toggleStylingModeClass(e),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_prepareDefaultItemTemplate(i,e){var t=(0,m.PO)(i)?i?.text:i;if((0,m.$K)(t)){var r=(0,b.Z)("<span>").addClass("dx-tab-text-span");r.text(t);var a=(0,b.Z)("<span>").addClass("dx-tab-text-span-pseudo");a.text(t),a.appendTo(r),r.appendTo(e)}(0,m.$K)(i.html)&&e.html(i.html)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Tl.c(((i,e)=>{this._prepareDefaultItemTemplate(e,i);var t=(0,Ia.H)(e.icon);t&&t.prependTo(i);var r=(0,b.Z)("<div>").addClass("dx-tab-text");i.wrapInner(r)}).bind(this),["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(i,e){var{itemData:t,container:r,index:a}=e;return this._deferredTemplates[a]=new Y.BH,i.render({model:t,container:r,index:a,onRendered:()=>this._deferredTemplates[a].resolve()})},_itemClass:function(){return"dx-tab"},_selectedItemClass:function(){return"dx-tab-selected"},_itemDataKey:function(){return"dxTabData"},_initMarkup:function(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass(CS)},_render:function(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){Y.gx.apply(this,this._deferredTemplates).done(()=>this._renderScrolling())},_renderScrolling(){var i=[gS,hS,CS];if(this.$element().removeClass(i.join(" ")),this.option("scrollingEnabled")&&this._isItemsSizeExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());var e=this.getScrollable();if(e.update(),this.option("rtlEnabled")){var t=cS((0,b.Z)(this.getScrollable().container()).get(0));e.scrollTo({left:t})}this._updateNavButtonsState(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsSizeExceeded()||(this._cleanScrolling(),this._needStretchItems()&&this.$element().addClass(gS),this.$element().removeClass(mS).addClass(hS))},_isVertical(){return"vertical"===this.option("orientation")},_isItemsSizeExceeded(){return this._isVertical()?this._isItemsHeightExceeded():this._isItemsWidthExceeded()},_isItemsWidthExceeded(){var i=this._getVisibleItems(),e=this._getSummaryItemsSize("width",i,!0),t=(0,oe.dz)(this.$element());return![e,t].includes(0)&&e>t-1},_isItemsHeightExceeded(){var i=this._getVisibleItems();return this._getSummaryItemsSize("height",i,!0)-1>(0,oe.Cr)(this.$element())},_needStretchItems(){var i=this._getVisibleItems(),e=(0,oe.dz)(this.$element()),t=[];return(0,j.S6)(i,(s,o)=>{t.push((0,oe.Y_)(o,!0))}),Math.max.apply(null,t)>e/i.length+1},_cleanNavButtons:function(){!this._leftButton||!this._rightButton||(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling:function(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple:function(){this._inkRipple=(0,Bp.sY)()},_getPointerEvent:()=>Bt.Z.up,_toggleActiveState:function(i,e,t){if(this.callBase.apply(this,arguments),this._inkRipple){var r={element:i,event:t};e?this._inkRipple.showWave(r):this._inkRipple.hideWave(r)}},_renderMultiple:function(){"multiple"===this.option("selectionMode")&&this.option("selectOnFocus",!1)},_renderWrapper:function(){this._$wrapper=(0,b.Z)("<div>").addClass("dx-tabs-wrapper"),this.setAria("role","tablist",this._$wrapper),this.$element().append(this._$wrapper)},_itemContainer:function(){return this._$wrapper},_getScrollableDirection(){return this._isVertical()?"vertical":"horizontal"},_updateScrollable(){this.getScrollable()&&this._cleanScrolling(),this._renderScrolling()},_renderScrollable(){var i=this.$element().wrapInner((0,b.Z)("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent(i,Ea,{direction:this._getScrollableDirection(),showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsState()}}),this.$element().append(this._scrollable.$element())},_scrollToItem:function(i){if(this._scrollable){var e=this._editStrategy.getItemElement(i);this._scrollable.scrollToElement(e)}},_renderNavButtons:function(){if(this.$element().toggleClass(mS,this.option("showNavButtons")),this.option("showNavButtons")){var i=this.option("rtlEnabled");this._leftButton=this._createNavButton(-30,i?IS:TS);var e=this._leftButton.$element();e.addClass("dx-tabs-nav-button-left"),this.$element().prepend(e),this._rightButton=this._createNavButton(30,i?TS:IS);var t=this._rightButton.$element();t.addClass("dx-tabs-nav-button-right"),this.$element().append(t)}},_updateNavButtonsState(){var t,r,a,n,i=this._isVertical(),e=this.getScrollable();i?(null===(t=this._leftButton)||void 0===t||t.option("disabled",function _S(i,e){return Math.round(i)<=e}(e.scrollTop(),1)),null===(r=this._rightButton)||void 0===r||r.option("disabled",function vS(i,e,t,r){return Math.round(function Nk(i){return i.scrollHeight-i.clientHeight}(i)-e-t)<=r}((0,b.Z)(e.container()).get(0),e.scrollTop(),0,1))):(null===(a=this._leftButton)||void 0===a||a.option("disabled",function pS(i,e){return Math.round(i)<=e}(e.scrollLeft(),1)),null===(n=this._rightButton)||void 0===n||n.option("disabled",function fS(i,e,t){return Math.round(cS(i)-e)<=t}((0,b.Z)(e.container()).get(0),e.scrollLeft(),1)))},_updateScrollPosition:function(i,e){this._scrollable.update(),this._scrollable.scrollBy(i/e)},_createNavButton:function(i,e){var t=this,r=t._createAction(function(){t._holdInterval=setInterval(function(){t._updateScrollPosition(i,5)},5)}),a=(0,ce.V4)(lo.Z.name,"dxNavButton"),n=(0,ce.V4)(Bt.Z.up,"dxNavButton"),s=(0,ce.V4)(Bt.Z.out,"dxNavButton"),o=this._createComponent((0,b.Z)("<div>").addClass("dx-tabs-nav-button"),pr.Z,{focusStateEnabled:!1,icon:e,onClick:function(){t._updateScrollPosition(i,1)},integrationOptions:{}}),l=o.$element();return k.Z.on(l,a,{timeout:300},function(d){r({event:d})}.bind(this)),k.Z.on(l,n,function(){t._clearInterval()}),k.Z.on(l,s,function(){t._clearInterval()}),o},_clearInterval:function(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection:function(i){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(i[0]))},_visibilityChanged:function(i){i&&this._dimensionChanged()},_dimensionChanged:function(){this._renderScrolling()},_itemSelectHandler:function(i){"single"===this.option("selectionMode")&&this.isItemSelected(i.currentTarget)||this.callBase(i)},_refreshActiveDescendant:function(){this.callBase(this._$wrapper)},_clean:function(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_toggleTabsVerticalClass(i){this.$element().toggleClass("dx-tabs-vertical",i)},_toggleTabsHorizontalClass(i){this.$element().toggleClass("dx-tabs-horizontal",i)},_getIndicatorPositionClass:i=>ES[i],_getIndicatorPosition(){var{_indicatorPosition:i,rtlEnabled:e}=this.option();if(i)return i;var t=this._isVertical();return e?t?"left":"bottom":t?"right":"bottom"},_toggleIndicatorPositionClass(i){var e=this._getIndicatorPositionClass(i);this._toggleElementClasses(ES,e)},_toggleScrollingEnabledClass(i){this.$element().toggleClass("dx-tabs-scrolling-enabled",!!i)},_toggleOrientationClass(i){var e="vertical"===i;this._toggleTabsVerticalClass(e),this._toggleTabsHorizontalClass(!e)},_getTabsIconPositionClass(){switch(this.option("iconPosition")){case"top":return id.top;case"end":return id.end;case"bottom":return id.bottom;default:return id.start}},_toggleIconPositionClass(){var i=this._getTabsIconPositionClass();this._toggleElementClasses(id,i)},_toggleStylingModeClass(i){var e,t=null!==(e=Xf[i])&&void 0!==e?e:Xf.primary;this._toggleElementClasses(Xf,t)},_toggleElementClasses(i,e){for(var t in i)this.$element().removeClass(i[t]);this.$element().addClass(e)},_toggleFocusedDisabledNextClass(i,e){this._itemElements().eq(i).toggleClass(SS,e)},_toggleFocusedDisabledPrevClass(i,e){this._itemElements().eq(i).toggleClass(yS,e)},_toggleFocusedDisabledClasses(i){var{selectedIndex:e}=this.option();this._itemElements().removeClass(SS).removeClass(yS);var t=e-1,r=e+1,a=(0,b.Z)(i).index(),n=this._itemElements().eq(r).hasClass(wS),l=this._itemElements().eq(t).hasClass(wS)&&a===t;this._toggleFocusedDisabledNextClass(e,n&&a===r),this._toggleFocusedDisabledPrevClass(e,l)},_updateFocusedElement(){var{focusStateEnabled:i,selectedIndex:e}=this.option(),t=this._itemElements();if(i&&t.length){var r=t.get(e);this.option({focusedElement:r})}},_optionChanged:function(i){switch(i.name){case"useInkRipple":case"scrollingEnabled":this._toggleScrollingEnabledClass(i.value),this._invalidate();break;case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(i.name,i.value);break;case"width":case"height":this.callBase(i),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(i);break;case"focusedElement":this._toggleFocusedDisabledClasses(i.value),this.callBase(i),this._scrollToItem(i.value);break;case"rtlEnabled":this.callBase(i);var e=this._getIndicatorPosition();this._toggleIndicatorPositionClass(e);break;case"orientation":this._toggleOrientationClass(i.value);var t=this._getIndicatorPosition();this._toggleIndicatorPositionClass(t),(0,We.Ym)()&&this._updateScrollable();break;case"iconPosition":this._toggleIconPositionClass(),(0,We.Ym)()&&this._dimensionChanged();break;case"stylingMode":this._toggleStylingModeClass(i.value),(0,We.Ym)()&&this._dimensionChanged();break;case"_indicatorPosition":this._toggleIndicatorPositionClass(i.value);break;case"selectedIndex":case"selectedItem":case"selectedItems":this.callBase(i),this._updateFocusedElement();break;default:this.callBase(i)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(i,e){this.callBase(i,e),this._renderScrolling()},getScrollable(){return this._scrollable}});Qf.ItemClass=Vk,(0,It.Z)("dxTabs",Qf);const Xk=Qf;var wo={top:"dx-tabpanel-tabs-position-top",right:"dx-tabpanel-tabs-position-right",bottom:"dx-tabpanel-tabs-position-bottom",left:"dx-tabpanel-tabs-position-left"},ws={top:"top",right:"right",bottom:"bottom",left:"left"},oM={top:"bottom",right:"left",bottom:"top",left:"right"},e_=Lk.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,tabsPosition:ws.top,iconPosition:"start",stylingMode:"primary",onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:function(i){return i?i.badge:void 0},_tabsIndicatorPosition:null})},_defaultOptionsRules:function(){var i=(0,_t.Vk)();return this.callBase().concat([{device:function(){return"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return!Br.touch},options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}},{device:()=>(0,_t.dC)(i),options:{stylingMode:"secondary"}},{device:()=>(0,_t.yj)(i),options:{iconPosition:"top"}}])},_init:function(){this.callBase(),this.$element().addClass("dx-tabpanel"),this._toggleTabPanelTabsPositionClass()},_getElementAria:()=>({role:"tabpanel"}),_getItemAria:()=>({role:"tabpanel"}),_initMarkup:function(){this.callBase(),this._createTitleActions(),this._renderLayout()},_prepareTabsItemTemplate(i,e){var t=(0,Ia.H)(i?.icon);t&&e.append(t);var r=(0,m.PO)(i)?i?.title:i;if((0,m.$K)(r)&&!(0,m.PO)(r)){var a=(0,b.Z)("<span>").addClass("dx-tab-text-span");a.append(it.Z.createTextNode(r));var n=(0,b.Z)("<span>").addClass("dx-tab-text-span-pseudo");n.append(it.Z.createTextNode(r)),n.appendTo(a),a.appendTo(e)}},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new Tl.c((i,e)=>{this._prepareTabsItemTemplate(e,i);var t=(0,b.Z)("<div>").addClass("dx-tab-text");i.wrapInner(t)},["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions:function(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction:function(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction:function(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction:function(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderLayout:function(){if(!this._tabs){var i=this.$element();this._$tabContainer=(0,b.Z)("<div>").addClass("dx-tabpanel-tabs").appendTo(i);var e=(0,b.Z)("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(e,Xk,this._tabConfig()),this._$container=(0,b.Z)("<div>").addClass("dx-tabpanel-container").appendTo(i),this._$container.append(this._$wrapper)}},_refreshActiveDescendant:function(){if(this._tabs){var i=this._tabs,e=i.itemElements(),t=(0,b.Z)(e[i.option("selectedIndex")]),r=this.getFocusedItemId();this.setAria("controls",void 0,(0,b.Z)(e)),this.setAria("controls",r,t)}},_getTabsIndicatorPosition(){var{_tabsIndicatorPosition:i,tabsPosition:e}=this.option();return i??oM[e]},_tabConfig(){var i=this._getTabsIndicatorPosition();return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:function(e){this.option("selectedIndex",e.component.option("selectedIndex")),this._refreshActiveDescendant()}.bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:function(e){if("focusedElement"===e.name)if(e.value){var t=(0,b.Z)(e.value),r=this._itemElements().eq(t.index());this.option("focusedElement",(0,rt.u)(r))}else this.option("focusedElement",e.value)}.bind(this),onFocusIn:function(e){this._focusInHandler(e.event)}.bind(this),onFocusOut:function(e){this._isFocusOutHandlerExecuting||this._focusOutHandler(e.event)}.bind(this),orientation:this._getTabsOrientation(),iconPosition:this.option("iconPosition"),stylingMode:this.option("stylingMode"),_itemAttributes:{class:"dx-tabpanel-tab"},_indicatorPosition:i}},_renderFocusTarget:function(){this._focusTarget().attr("tabIndex",-1)},_getTabsOrientation(){var{tabsPosition:i}=this.option();return[ws.right,ws.left].includes(i)?"vertical":"horizontal"},_getTabPanelTabsPositionClass(){switch(this.option("tabsPosition")){case ws.right:return wo.right;case ws.bottom:return wo.bottom;case ws.left:return wo.left;default:return wo.top}},_toggleTabPanelTabsPositionClass(){for(var i in wo)this.$element().removeClass(wo[i]);var e=this._getTabPanelTabsPositionClass();this.$element().addClass(e)},_updateTabsOrientation(){var i=this._getTabsOrientation();this._setTabsOption("orientation",i)},_toggleWrapperFocusedClass(i){this._toggleFocusClass(i,this._$wrapper)},_toggleDisabledFocusedClass(i){this._focusTarget().toggleClass("dx-disabled-focused-tab",i)},_updateFocusState:function(i,e){this.callBase(i,e);var t=i.target===this._tabs._focusTarget().get(0),r=i.target===this._focusTarget().get(0);if(t&&this._toggleFocusClass(e,this._focusTarget()),t||r){var a=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(e&&!a),this._toggleDisabledFocusedClass(e&&a)}r&&this._toggleFocusClass(e,this._tabs.option("focusedElement"))},_focusOutHandler:function(i){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(i),this._isFocusOutHandlerExecuting=!1},_setTabsOption(i,e){this._tabs&&this._tabs.option(i,e)},_visibilityChanged:function(i){i&&this._tabs._dimensionChanged()},registerKeyHandler:function(i,e){this.callBase(i,e),this._tabs&&this._tabs.registerKeyHandler(i,e)},repaint:function(){this.callBase(),this._tabs.repaint()},_updateTabsIndicatorPosition(){var i=this._getTabsIndicatorPosition();this._setTabsOption("_indicatorPosition",i)},_optionChanged:function(i){var{name:e,value:t,fullName:r}=i;switch(e){case"dataSource":default:this.callBase(i);break;case"items":this._setTabsOption(e,this.option(e)),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(i);break;case"width":this.callBase(i),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(r,t),this.callBase(i),!0===this.option("focusStateEnabled")){var a=this.option("selectedIndex"),n=this._itemElements().eq(a);this.option("focusedElement",(0,rt.u)(n))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(r,t),this.callBase(i);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(r,t);break;case"focusedElement":var s=t&&(0,b.Z)(t).index(),o=t&&this._tabs._itemElements().eq(s);if(this._setTabsOption("focusedElement",(0,rt.u)(o)),t){var l=this._isDisabled(t);this._toggleWrapperFocusedClass(!l),this._toggleDisabledFocusedClass(l)}this.callBase(i);break;case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",t);break;case"badgeExpr":this._invalidate();break;case"tabsPosition":this._toggleTabPanelTabsPositionClass(),this._updateTabsIndicatorPosition(),this._updateTabsOrientation();break;case"iconPosition":this._setTabsOption("iconPosition",t);break;case"stylingMode":this._setTabsOption("stylingMode",t);break;case"_tabsIndicatorPosition":this._setTabsOption("_indicatorPosition",t)}}});e_.ItemClass=class Jk extends Al.Z{_renderWatchers(){return this._startWatcher("badge",J.ZT),super._renderWatchers()}},(0,It.Z)("dxTabPanel",e_);const lM=e_;class Ss{constructor(e){this._options=e,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){dr.Z.abstract()}}var t_=(i,e)=>"".concat(e?"tabs":"items","[").concat(i,"]"),VS=(i,e)=>(0,m.$K)(i)&&(0,m.$K)(e)?"".concat(i,".").concat(e):i||e,i_=i=>i?i.replace(/\s/g,""):void 0,rd=(i,e)=>"".concat(i,".").concat(e),NS=i=>{var e=i.split(".");return e[e.length-1].replace(/\[\d+]/,"")},FS=i=>i.indexOf("tabs")>-1,kS=(i,e,t)=>{var r=i.indexOf(e);if(r>-1)return t_(r,t);for(var a=0;a<i.length;a++){var n=i[a],s=n.tabs||n.items;if(s){var o=kS(s,e,n.tabs);if(o)return VS(t_(a,t),o)}}};class cM extends Ss{tryExecute(){var{value:e}=this._options,t=this.findInstance();return!!t&&(t.option(e),!0)}}class MS extends Ss{tryExecute(){var e=this.findInstance();if(e){var{optionName:t,item:r,value:a}=this._options,n=this._itemsRunTimeInfo.findItemIndexByItem(r);if(n>=0)return e.option(rd("items[".concat(n,"]"),t),a),!0}return!1}}class pM extends Ss{tryExecute(){return!1}}class fM extends Ss{tryExecute(){var e=this.findPreparedItem();return!(null==e||!e._prepareGroupItemTemplate||!e._renderGroupContentTemplate||(e._prepareGroupItemTemplate(this._options.item.template),e._renderGroupContentTemplate(),0))}}class _M extends Ss{tryExecute(){var e=this.findInstance();if(e){var{value:t}=this._options;return e.option("dataSource",t),!0}return!1}}class vM extends Ss{tryExecute(){var{item:e}=this._options,t=this.findInstance(),r=t&&(0,Ys.aT)(t.$element()[0],"dxValidator");if(r&&e){var a=o=>"required"===o.type,n=(r.option("validationRules")||[]).some(a),s=(e.validationRules||[]).some(a);if(!n&&!s||n&&s)return r.option("validationRules",e.validationRules),!0}return!1}}class gM extends Ss{tryExecute(){var e=this.findItemContainer(),{previousValue:t,value:r}=this._options;return!!e&&(e.removeClass(t).addClass(r),!0)}}var r_=be(4826),HS="dx-responsivebox",ZS=HS+"-screen-",zS="dxBoxItemData",WS=oo.Z.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init:function(){this.option("screenByWidth")||this._options.silent("screenByWidth",We.$n),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction:function(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:function(){return"dx-box-item"},_itemDataKey:function(){return zS},_initMarkup:function(){this.callBase(),this.$element().addClass(HS)},_renderItems:function(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged:function(i){var e=this._findItemElementByItem(i);e.length&&(this._refreshItem(e,i),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize:function(){var i=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(ZS+i),this.option("currentScreenFactor",i)},_removeScreenSizeClass:function(){var i=this.option("currentScreenFactor");i&&this.$element().removeClass(ZS+i)},_prepareGrid:function(){var i=this._grid=[];this._prepareRowsAndCols(),(0,j.S6)(this._rows,function(){var e=[];i.push(e),(0,j.S6)(this._cols,function(){e.push(this._createEmptyCell())}.bind(this))}.bind(this))},getSingleColumnRows:function(){var i=this.option("rows"),e=this._screenItems.length;if(i.length){for(var t=this._filterByScreen(i),r=[],a=0;a<e;a++){var n=this._defaultSizeConfig();a<t.length&&(0,m.$K)(t[a].shrink)&&(n.shrink=t[a].shrink),r.push(n)}return r}return this._defaultSizeConfig(e)},_prepareRowsAndCols:function(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen:function(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems:function(){this._screenItems.sort(function(i,e){return i.location.row-e.location.row||i.location.col-e.location.col}),(0,j.S6)(this._screenItems,function(i,e){(0,N.l)(e.location,{row:i,col:0,rowspan:1,colspan:1})})},_sizesByScreen:function(i){return(0,j.UI)(this._filterByScreen(i),function(e){return(0,N.l)(this._defaultSizeConfig(),e)}.bind(this))},_createDefaultSizeConfig:function(){return{ratio:1,baseSize:0,minSize:0,maxSize:0}},_defaultSizeConfig:function(i){var e=this._createDefaultSizeConfig();if(!arguments.length)return e;for(var t=[],r=0;r<i;r++)t.push(e);return t},_filterByScreen:function(i){var e=this._screenRegExp();return(0,J.h3)(i,function(t){return!t.screen||e.test(t.screen)})},_screenRegExp:function(){var i=this._getCurrentScreen();return new RegExp("(^|\\s)"+i+"($|\\s)","i")},_getCurrentScreen:function(){var i=this._screenWidth();return this.option("screenByWidth")(i)},_screenWidth:function(){return(0,We.Ym)()?(0,oe.dz)((0,We.Jj)()):1920},_createEmptyCell:function(){return{item:{},location:{colspan:1,rowspan:1}}},_spreadItems:function(){(0,j.S6)(this._screenItems,function(i,e){var t=e.location||{},n=this._grid[t.row];this._occupyCells(n&&n[t.col],e)}.bind(this))},_itemsByScreen:function(){return this.option("items").reduce((i,e)=>{var t=e.location||{};return t=(0,m.PO)(t)?[t]:t,this._filterByScreen(t).forEach(r=>{i.push({item:e,location:(0,N.l)({rowspan:1,colspan:1},r)})}),i},[])},_occupyCells:function(i,e){!i||this._isItemCellOccupied(i,e)||((0,N.l)(i,e),this._markSpanningCell(i))},_isItemCellOccupied:function(i,e){if(!(0,m.Qr)(i.item))return!0;var t=!1;return this._loopOverSpanning(e.location,function(r){t=t||!(0,m.Qr)(r.item)}),t},_loopOverSpanning:function(i,e){var t=i.row+i.rowspan-1,r=i.col+i.colspan-1,a=Math.min(t,this._rows.length-1),n=Math.min(r,this._cols.length-1);i.rowspan-=t-a,i.colspan-=r-n;for(var s=i.row;s<=a;s++)for(var o=i.col;o<=n;o++)(s!==i.row||o!==i.col)&&e(this._grid[s][o])},_markSpanningCell:function(i){this._loopOverSpanning(i.location,function(e){(0,N.l)(e,{item:i.item,spanningCell:i})})},_linkNodeToItem:function(){(0,j.S6)(this._itemElements(),function(i,e){var t=(0,b.Z)(e),r=t.data(zS);r.box||(r.node=t.children())})},_layoutItems:function(){var i=this._grid.length,e=i&&this._grid[0].length;if(i||e){var t=this._layoutBlock({direction:"col",row:{start:0,end:i-1},col:{start:0,end:e-1}}),r=this._prepareBoxConfig(t.box||{direction:"row",items:[(0,N.l)(t,{ratio:1})]});(0,N.l)(r,this._rootBoxConfig(r.items)),this._$root=(0,b.Z)("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,th,r)}},_rootBoxConfig:function(i){var e=(0,j.S6)(i,function(t,r){this._needApplyAutoBaseSize(r)&&(0,N.l)(r,{baseSize:"auto"})}.bind(this));return{width:"100%",height:"100%",items:e,itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:function(i){return!(i.baseSize||i.minSize&&"auto"!==i.minSize||i.maxSize&&"auto"!==i.maxSize)},_prepareBoxConfig:function(i){return(0,N.l)(i||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock:function(i){return this._isSingleItem(i)?this._itemByCell(i.row.start,i.col.start):this._layoutDirection(i)},_isSingleItem:function(i){var e=this._grid[i.row.start][i.col.start].location;return i.row.end-i.row.start==e.rowspan-1&&i.col.end-i.col.start==e.colspan-1},_itemByCell:function(i,e){var t=this._grid[i][e];return t.spanningCell?null:t.item},_layoutDirection:function(i){for(var a,e=[],t=i.direction,r=this._crossDirection(t);a=this._nextBlock(i);){if(this._isBlockIndivisible(i.prevBlockOptions,a))throw Rt.Z.Error("E1025");var n=this._layoutBlock({direction:r,row:a.row,col:a.col,prevBlockOptions:i});n&&((0,N.l)(n,this._blockSize(a,r)),e.push(n)),i[r].start=a[r].end+1}return{box:this._prepareBoxConfig({direction:t,items:e})}},_isBlockIndivisible:function(i,e){return i&&i.col.start===e.col.start&&i.col.end===e.col.end&&i.row.start===e.row.start&&i.row.end===e.row.end},_crossDirection:function(i){return"col"===i?"row":"col"},_nextBlock:function(i){var e=i.direction,t=this._crossDirection(e),r=i[e].start,a=i[e].end,n=i[t].start;if(n>i[t].end)return null;for(var s=1,o=n;o<n+s;o++){for(var l=1,d=r;d<=a;d++){var u=this._cellByDirection(e,d,o);l=Math.max(l,u.location[t+"span"])}var c=o+l,f=n+s;c>f&&(s+=c-f)}var p={};return p[e]={start:r,end:a},p[t]={start:n,end:n+s-1},p},_cellByDirection:function(i,e,t){return"col"===i?this._grid[t][e]:this._grid[e][t]},_blockSize:function(i,e){for(var t="row"===e?"auto":0,r="row"===e?this._rows:this._cols,a=(0,N.l)(this._createDefaultSizeConfig(),{ratio:0}),n=i[e].start;n<=i[e].end;n++){var s=r[n];a.ratio+=s.ratio,a.baseSize+=s.baseSize,a.minSize+=s.minSize,a.maxSize+=s.maxSize,(0,m.$K)(s.shrink)&&(a.shrink=s.shrink)}return a.minSize=a.minSize?a.minSize:t,a.maxSize=a.maxSize?a.maxSize:"auto",this._isSingleColumnScreen()&&(a.baseSize="auto"),a},_update:function(i){var e=this._$root;this._renderItems(),e&&(i?e.remove():(e.detach(),this._saveAssistantRoot(e))),this._layoutChangedAction()},_saveAssistantRoot:function(i){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(i)},_dispose:function(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots:function(){this._assistantRoots&&(0,j.S6)(this._assistantRoots,function(i,e){(0,b.Z)(e).remove()})},_clearItemNodeTemplates:function(){(0,j.S6)(this.option("items"),function(){delete this.node})},_attachClickEvent:J.ZT,_optionChanged:function(i){switch(i.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(i),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(i);break;case"currentScreenFactor":break;default:this.callBase(i)}},_dimensionChanged:function(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint:function(){this._update()}});(0,It.Z)("dxResponsiveBox",WS);const SM=WS;var a_="dx-form-group",$S="dx-col-",KS="dx-field-item",GS="dx-layout-manager-one-col",US="dx-field-item-label-content",jS="dx-field-item-label",n_="dx-field-item-content",qS="dx-root-simple-item",YS="dx-field-item-tab",XS="dx-group-colcount-",JS="group-col-count",s_="simple",PM=dr.Z.inherit({ctor(i,e){this.editor=i,this.validator=e,this.validationRequestsCallbacks=[];var t=r=>{this.validationRequestsCallbacks.forEach(a=>a(r))};i.validationRequest.add(t),i.on("disposing",function(){i.validationRequest.remove(t)})},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(i){this.editor.option({validationErrors:i.brokenRules,validationStatus:i.status})},reset(){this.editor.clear()},focus(){this.editor.focus()}});const BM=PM;var o_="pending",ey=El.Z.inherit({_initOptions:function(i){this.callBase.apply(this,arguments),this.option(Xt.Z.initValidationOptions(i))},_getDefaultOptions(){return(0,N.l)(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=(0,ri.Z)(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){var i=this._findGroup();this._groupWasInit||this.on("disposing",function(e){Xt.Z.removeRegisteredValidator(e.component._validationGroup,e.component)}),(!this._groupWasInit||this._validationGroup!==i)&&(Xt.Z.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=i,Xt.Z.registerValidatorInGroup(i,this))},_setOptionsByReference(){this.callBase(),(0,N.l)(this._optionsByReference,{validationGroup:!0})},_getEditor(){var i=this.$element()[0];return(0,Ys.aT)(i,"dx-validation-target")},_initAdapter(){var i=this._getEditor(),e=this.option("adapter");if(!e){if(i)return(e=new BM(i,this)).validationRequestsCallbacks.push(r=>{this._validationInfo.skipValidation||this.validate(r)}),void this.option("adapter",e);throw Rt.Z.Error("E0120")}var t=e.validationRequestsCallbacks;t&&t.push(r=>{this.validate(r)})},_toggleRTLDirection(i){var e,t,r,a=null!==(e=null===(t=this.option("adapter"))||void 0===t||null===(r=t.editor)||void 0===r?void 0:r.option("rtlEnabled"))&&void 0!==e?e:i;this.callBase(a)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){var i=this._getEditor();if(i){var t=(this.option("validationRules")||[]).some(r=>{var{type:a}=r;return"required"===a})||null;i.isInitialized()&&i.setAria("required",t),i.option("_onMarkupRendered",()=>{i.setAria("required",t)})}},_visibilityChanged(i){i&&this._initGroupRegistration()},_optionChanged(i){switch(i.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),this._toggleAccessibilityAttributes(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(Xt.Z.synchronizeValidationOptions(i,this.option()));break;default:this.callBase(i)}},_getValidationRules(){return this._validationRules||(this._validationRules=(0,j.UI)(this.option("validationRules"),(i,e)=>(0,N.l)({},i,{validator:this,index:e}))),this._validationRules},_findGroup(){var i=this.$element();return this.option("validationGroup")||Xt.Z.findGroup(i,this._modelByElement(i))},_resetValidationRules(){delete this._validationRules},validate(i){var l,e=this.option("adapter"),t=this.option("name"),r=e.bypass&&e.bypass(),a=i&&void 0!==i.value?i.value:e.getValue(),n=e.getCurrentValidationError&&e.getCurrentValidationError(),s=this._getValidationRules(),o=this._validationInfo&&this._validationInfo.result;return o&&o.status===o_&&o.value===a?(0,N.l)({},o):(r?l={isValid:!0,status:"valid"}:n&&n.editorSpecific?(n.validator=this,l={isValid:!1,status:"invalid",brokenRule:n,brokenRules:[n]}):l=Xt.Z.validate(a,s,t),l.id=(new Ri.Z).toString(),this._applyValidationResult(l,e),l.complete&&l.complete.then(d=>{d.id===this._validationInfo.result.id&&this._applyValidationResult(d,e)}),(0,N.l)({},this._validationInfo.result))},reset(){var i=this.option("adapter");this._validationInfo.skipValidation=!0,i.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult({id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null},i)},_updateValidationResult(i){if(this._validationInfo.result&&this._validationInfo.result.id===i.id)for(var t in i)"id"!==t&&"complete"!==t&&(this._validationInfo.result[t]=i[t]);else this._validationInfo.result=(0,N.l)({},i,{complete:this._validationInfo.deferred&&this._validationInfo.result.complete})},_applyValidationResult(i,e){var t=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(i.validator=this,this._updateValidationResult(i),e.applyValidationResults&&e.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),this._validationInfo.result.status===o_)return this._validationInfo.deferred||(this._validationInfo.deferred=new Y.BH,this._validationInfo.result.complete=this._validationInfo.deferred.promise()),void this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);this._validationInfo.result.status!==o_&&(t(i),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(i),this._validationInfo.deferred=null))},focus(){var i=this.option("adapter");i&&i.focus&&i.focus()},_useTemplates:function(){return!1}});(0,It.Z)("dxValidator",ey);const l_=ey;var FM=["dxTagBox","dxRangeSlider","dxDateRangeBox"],kM=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function ty(i,e){var{showRequiredMark:t,requiredMark:r,showOptionalMark:a,optionalMark:n}=i;return{showRequiredMark:t&&e,requiredMark:r,showOptionalMark:a&&!e,optionalMark:n}}var $M="dx-field-item-required-mark",iy="dx-field-item-label-location-",KM="dx-field-item-optional-mark",GM="dx-field-item-label-text";function YM(i){for(var e=0,t=i.children.length,r=0;r<t;r++)e+=i.children[r].offsetWidth;return e}var ry="dx-field-item-content-wrapper",s3="dx-template-wrapper",d_="dx-validation-target",o3="dx-invalid";function l3(i){var{$parent:e,rootElementCssClassList:t,formOrLayoutManager:r,createComponentCallback:a,labelOptions:n,labelNeedBaselineAlign:s,labelLocation:o,needRenderLabel:l,formLabelLocation:d,item:u,editorOptions:c,isSimpleItem:f,isRequired:p,template:g,helpID:w,labelID:x,name:y,helpText:E,requiredMessageTemplate:V,validationGroup:F}=i,q=(0,b.Z)("<div>").addClass(t.join(" ")).appendTo(e);q.addClass(p?"dx-field-item-required":"dx-field-item-optional"),f&&q.addClass("dx-flex-layout"),f&&s&&q.addClass("dx-field-item-label-align");var ee=(0,b.Z)("<div>");ee.data("dx-form-item",u),ee.addClass(n_).addClass("dx-field-item-content-location-"+{right:"left",left:"right",top:"bottom"}[d]);var $,X=null;if(l&&(n.labelTemplate&&(n.labelTemplateData=sy(u,c,r)),X=function UM(i){var{text:e,id:t,location:r,alignment:a,labelID:n=null,markOptions:s={},labelTemplate:o,labelTemplateData:l,onLabelTemplateRendered:d}=i;if((!(0,m.$K)(e)||e.length<=0)&&!(0,m.$K)(o))return null;var u=(0,b.Z)("<label>").addClass(jS+" "+iy+r).attr("for",t).attr("id",n).css("textAlign",a),c=(0,b.Z)("<span>").addClass(US),f=(0,b.Z)("<span>").addClass(GM).text(e);return o&&(f=(0,b.Z)("<div>").addClass("dx-field-item-custom-label-content"),l.text=e,o.render({container:(0,rt.u)(f),model:l,onRendered(){d?.()}})),u.append(c.append(f,function jM(i){var e=function HM(i){var{showRequiredMark:e,requiredMark:t,showOptionalMark:r,optionalMark:a}=i;return e||r?String.fromCharCode(160)+(e?t:a):""}(i);return""===e?null:(0,b.Z)("<span>").addClass(i.showRequiredMark?$M:KM).text(e)}(s)))}(n)),X){var{editorType:M}=u;q.append(X),("top"===o||"left"===o)&&q.append(ee),"right"===o&&q.prepend(ee),q.addClass("top"===o?"dx-label-v-align":"dx-label-h-align"),("dxCheckBox"===M||"dxSwitch"===M)&&k.Z.on(X,Pt.u,function(){k.Z.trigger(ee.children(),Pt.u)});var le=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(M),fe=n.alignment;!g&&le&&"top"===o&&("left"===fe||!fe)&&ee.addClass("dx-toggle-controls-paddings")}else q.append(ee);if(g)g.render({container:(0,rt.u)(ee),model:sy(u,c,r),onRendered(){var te=function d3(i){var e,t;return i?.data(d_)||(null==i||null===(e=i.parent)||void 0===e||null===(t=e.call(i))||void 0===t?void 0:t.data(d_))}(ay(ee));ny(te)}});else{var me=(0,b.Z)("<div>").appendTo(ee);try{($=a(me,u.editorType,c)).setAria("describedby",w),x&&$.setAria("labelledby",x),$.setAria("required",p)}catch(K){Rt.Z.log("E1035",K.message)}}var pe=ay(ee),xe=pe&&pe.data(d_);if(xe){var Me,_e=u.label&&u.label.text,Ae=_e?null:y,Ie=_e?u.label.text:Ae&&(0,ur.GK)(Ae);if(f)if(u.validationRules)Me=u.validationRules;else{var D=(0,ma.WU)(V,Ie||"");Me=u.isRequired?[{type:"required",message:D}]:null}Array.isArray(Me)&&Me.length&&a(pe,l_,{validationRules:Me,validationGroup:F,dataGetter:function(){return{formItem:u}}}),ny(xe)}return E&&f&&ee.parent().append((0,b.Z)("<div>").addClass(ry).append(ee).append((0,b.Z)("<div>").addClass("dx-field-item-help-text").attr("id",w).text(E))),{$fieldEditorContainer:ee,$rootElement:q,widgetInstance:$}}function ay(i){var e=i.children().first();return e.hasClass(s3)?e.children().first():e}function ny(i){if(i&&(0,_t.yj)()){var e=".".concat(ry),t=r=>{var{element:a,component:n}=r,{isValid:s,validationMessageMode:o}=n.option();(0,b.Z)(a).parents(e).toggleClass(o3,!1===s&&(n._isFocused()||"always"===o))};i.on("optionChanged",r=>{"isValid"===r.name&&t(r)}),i.on("focusIn",t).on("focusOut",t).on("enterKey",t)}}function sy(i,e,t){return{dataField:i.dataField,editorType:i.editorType,editorOptions:e,component:t,name:i.name}}function oy(i){var{$parent:e,rootElementCssClassList:t}=i;return(0,b.Z)("<div>").addClass("dx-field-empty-item").html("&nbsp;").addClass(t.join(" ")).appendTo(e)}var b3=hr.default.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:ae.Z.format("dxForm-optionalMark"),requiredMessage:ae.Z.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference:function(){this.callBase(),(0,N.l)(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init:function(){var i=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new sS,this._updateReferencedOptions(i),this._initDataAndItems(i)},_dispose:function(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems:function(i){this._syncDataWithItems(),this._updateItems(i)},_syncDataWithItems:function(){var i=this.option("layoutData"),e=this.option("items");(0,m.$K)(e)&&e.forEach(t=>{var r;t.dataField&&void 0===this._getDataByField(t.dataField)&&(t.editorOptions&&(r=t.editorOptions.value),((0,m.$K)(r)||t.dataField in i)&&this._updateFieldValue(t.dataField,r))})},_getDataByField:function(i){return i?this.option("layoutData."+i):null},_isCheckboxUndefinedStateEnabled:function(i){var{allowIndeterminateState:e,editorType:t,dataField:r}=i;if(!0===e&&"dxCheckBox"===t){var a=["layoutData",...r.split(".")],n=a.pop(),s=this.option(a.join("."));return s&&n in s}return!1},_updateFieldValue:function(i,e){var t=this.option("layoutData"),r=e;!Ur.default.isWrapped(t[i])&&(0,m.$K)(i)?this.option("layoutData."+i,r):Ur.default.isWritableWrapped(t[i])&&(r=(0,m.mf)(r)?r():r,t[i](r)),this._triggerOnFieldDataChanged({dataField:i,value:r})},_triggerOnFieldDataChanged:function(i){this._createActionByOption("onFieldDataChanged")(i)},_updateItems:function(i){var e=this,t=this.option("items"),r=(0,m.$K)(t),a=e.option("customizeItem"),n=r?t:this._generateItemsByData(i);if((0,m.$K)(n)){var s=[];(0,j.S6)(n,function(o,l){e._isAcceptableItem(l)&&(l=e._processItem(l),a&&a(l),(0,m.Kn)(l)&&!1!==Ur.default.unwrap(l.visible)&&s.push(l))}),(!e._itemWatchers.length||!r)&&e._updateItemWatchers(n),this._setItems(s),this._sortItems()}},_cleanItemWatchers:function(){this._itemWatchers.forEach(function(i){i()}),this._itemWatchers=[]},_updateItemWatchers:function(i){var e=this,t=e._getWatch();i.forEach(function(r){(0,m.Kn)(r)&&(0,m.$K)(r.visible)&&(0,m.mf)(t)&&e._itemWatchers.push(t(function(){return Ur.default.unwrap(r.visible)},function(){e._updateItems(e.option("layoutData")),e.repaint()},{skipImmediate:!0}))})},_generateItemsByData:function(i){var e=[];return(0,m.$K)(i)&&(0,j.S6)(i,function(t){e.push({dataField:t})}),e},_isAcceptableItem:function(i){var t=this._getDataByField(i.dataField||i);return!((0,m.mf)(t)&&!Ur.default.isWrapped(t))},_processItem:function(i){if("string"==typeof i&&(i={dataField:i}),"object"==typeof i&&!i.itemType&&(i.itemType=s_),!(0,m.$K)(i.editorType)&&(0,m.$K)(i.dataField)){var e=this._getDataByField(i.dataField);i.editorType=(0,m.$K)(e)?this._getEditorTypeByDataType((0,m.dt)(e)):"dxTextBox"}var t;return"dxCheckBox"===i.editorType&&(i.allowIndeterminateState=null===(t=i.allowIndeterminateState)||void 0===t||t),i},_getEditorTypeByDataType:function(i){switch(i){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems:function(){(0,Sl.Sq)(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes:function(){this._items.sort(function(i,e){var t=i.visibleIndex,r=e.visibleIndex;return t>r?1:t<r?-1:0})},_initMarkup:function(){this._itemsRunTimeInfo.clear(),this.$element().addClass("dx-layout-manager"),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox:function(){var i=[];if(this._items&&this._items.length){var e=this._getColCount(),t=(0,b.Z)("<div>").appendTo(this.$element());this._prepareItemsWithMerging(e);var r=this._generateLayoutItems();this._responsiveBox=this._createComponent(t,SM,this._getResponsiveBoxConfig(r,e,i)),(0,We.Ym)()||this._renderTemplates(i)}},_itemStateChangedHandler:function(i){this._refresh()},_renderTemplates:function(i){var e=this,t=0;i.forEach(r=>{var a,{item:n}=r;null!=n&&null!==(a=n.label)&&void 0!==a&&a.template&&t++}),(0,j.S6)(i,function(r,a){switch(a.itemType){case"empty":oy(a);break;case"button":e._renderButtonItem(a);break;default:e._renderFieldItem(a,t)}})},_getResponsiveBoxConfig:function(i,e,t){var r=this,a=r.option("colCountByScreen"),n=a&&a.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged:function(){var s=r.option("onLayoutChanged"),o=r.isSingleColumnMode();s&&(r.$element().toggleClass(GS,o),s(o))},onContentReady:function(s){(0,We.Ym)()&&r._renderTemplates(t),r.option("onLayoutChanged")&&r.$element().toggleClass(GS,r.isSingleColumnMode(s.component))},itemTemplate:function(s,o,l){if(s.location){var d=(0,b.Z)(l),c=r._items[s.location.col+s.location.row*e];if(c){var f=[c.cssClass];d.toggleClass("dx-single-column-item-content",r.isSingleColumnMode(this)),0===s.location.row&&f.push("dx-first-row"),0===s.location.col&&f.push("dx-first-col"),c.itemType===s_&&r.option("isRoot")&&d.addClass(qS);var p=s.location.col===e-1||s.location.col+s.location.colspan===e,g=r._getRowsCount(),w=s.location.row===g-1;p&&f.push("dx-last-col"),w&&f.push("dx-last-row"),"empty"!==c.itemType&&(f.push(KS),f.push(r.option("cssItemClass")),(0,m.$K)(c.col)&&f.push("dx-col-"+c.col)),t.push({itemType:c.itemType,item:c,$parent:d,rootElementCssClassList:f})}}},cols:r._generateRatio(e),rows:r._generateRatio(r._getRowsCount(),!0),dataSource:i,screenByWidth:r.option("screenByWidth"),singleColumnScreen:!n&&"xs"}},_getColCount:function(){var i=this.option("colCount"),e=this.option("colCountByScreen");if(e){var t=this.option("form").getTargetScreenFactor();t||(t=(0,We.Ym)()?(0,We.Wf)(this.option("screenByWidth")):"lg"),i=e[t]||i}if("auto"===i){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=i=this._getMaxColCount()}return i<1?1:i},_getMaxColCount:function(){if(!(0,We.Ym)())return 1;var i=this.option("minColWidth"),e=(0,oe.dz)(this.$element()),t=this._items.length,r=Math.floor(e/i)||1;return t<r?t:r},isCachedColCountObsolete:function(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging:function(i){var t,r,n,s,e=this._items.slice(0),a=[];for(s=0;s<e.length;s++)if(a.push(t=e[s]),(this.option("alignItemLabels")||t.alignItemLabels||t.colSpan)&&(t.col=this._getColByIndex(a.length-1,i)),t.colSpan>1&&t.col+t.colSpan<=i){for(r=[],n=0;n<t.colSpan-1;n++)r.push({merged:!0});a=a.concat(r)}else delete t.colSpan;this._setItems(a)},_getColByIndex:function(i,e){return i%e},_setItems:function(i){this._items=i,this._cashedColCount=null},_generateLayoutItems:function(){var r,a,i=this._items,e=this._getColCount(),t=[];for(a=0;a<i.length;a++)if(!(r=i[a]).merged){var n={location:{row:parseInt(a/e),col:this._getColByIndex(a,e)}};(0,m.$K)(r.disabled)&&(n.disabled=r.disabled),(0,m.$K)(r.visible)&&(n.visible=r.visible),(0,m.$K)(r.colSpan)&&(n.location.colspan=r.colSpan),(0,m.$K)(r.rowSpan)&&(n.location.rowspan=r.rowSpan),t.push(n)}return t},_renderEmptyItem:function(i){oy({$container:i})},_renderButtonItem:function(i){var{item:e,$parent:t,rootElementCssClassList:r}=i,{$rootElement:a,buttonInstance:n}=function h3(i){var{item:e,$parent:t,rootElementCssClassList:r,validationGroup:a,createComponentCallback:n}=i,s=(0,b.Z)("<div>").appendTo(t).addClass(r.join(" ")).addClass("dx-field-button-item").css("textAlign",function c3(i){return(0,m.$K)(i)?i:"right"}(e.horizontalAlignment));return t.css("justifyContent",function p3(i){switch(i){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}(e.verticalAlignment)),{$rootElement:s,buttonInstance:n((0,b.Z)("<div>").appendTo(s),"dxButton",(0,N.l)({validationGroup:a},e.buttonOptions))}}({item:e,$parent:t,rootElementCssClassList:r,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:e,widgetInstance:n,guid:e.guid,$itemContainer:a})},_renderFieldItem:function(i,e){var t,r,{item:a,$parent:n,rootElementCssClassList:s}=i,o=this._getDataByField(a.dataField),l=!1;if(void 0===o){var{allowIndeterminateState:d,editorType:u,dataField:c}=a;l=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:d,editorType:u,dataField:c})}var f=a.dataField||a.name,p=this._getFormOrThis(),{$fieldEditorContainer:g,widgetInstance:w,$rootElement:x}=l3(function MM(i){var{$parent:e,rootElementCssClassList:t,formOrLayoutManager:r,createComponentCallback:a,item:n,template:s,labelTemplate:o,name:l,formLabelLocation:d,requiredMessageTemplate:u,validationGroup:c,editorValue:f,canAssignUndefinedValueToEditor:p,editorValidationBoundary:g,editorStylingMode:w,showColonAfterLabel:x,managerLabelLocation:y,itemId:E,managerMarkOptions:V,labelMode:F,onLabelTemplateRendered:q}=i,ee=(0,m.$K)(n.isRequired)?n.isRequired:!!function zM(i){var e;return i&&i.length&&(0,j.S6)(i,function(t,r){if("required"===r.type)return e=!0,!1}),e}(n.validationRules),X=n.itemType===s_,M=n.helpText?"dx-"+new Ri.Z:null,le=function WM(i){var{item:e,id:t,isRequired:r,managerMarkOptions:a,showColonAfterLabel:n,labelLocation:s,labelTemplate:o,formLabelMode:l,onLabelTemplateRendered:d}=i,u=kM.includes(e.editorType),c=(0,N.l)({showColon:n,location:s,id:t,visible:"outside"===l||u&&"hidden"!==l,isRequired:r},e?e.label:{},{markOptions:ty(a,r),labelTemplate:o,onLabelTemplateRendered:d});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor","dxDateRangeBox"].includes(e.editorType)&&(c.labelID="dx-label-".concat(new Ri.Z)),!c.text&&e.dataField&&(c.text=(0,ur.GK)(e.dataField)),c.text&&(c.textWithoutColon=c.text,c.text+=c.showColon?":":""),c}({item:n,id:E,isRequired:ee,managerMarkOptions:V,showColonAfterLabel:x,labelLocation:y,formLabelMode:F,labelTemplate:o,onLabelTemplateRendered:q}),fe=le.visible&&(le.text||le.labelTemplate&&X),{location:B,labelID:P}=le,U="top"!==B&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(n.editorType),$=function ZM(i){var{editorType:e,defaultEditorName:t,editorValue:r,canAssignUndefinedValueToEditor:a,externalEditorOptions:n,editorInputId:s,editorValidationBoundary:o,editorStylingMode:l,formLabelMode:d,labelText:u,labelMark:c}=i,f={};(void 0!==r||a)&&(f.value=r),-1!==FM.indexOf(e)&&(f.value=f.value||[]);var p=n?.labelMode;(0,m.$K)(p)||(p="outside"===d?"hidden":d);var w=(0,N.l)(!0,f,n,{inputAttr:{id:s},validationBoundary:o,stylingMode:n?.stylingMode||l,label:u,labelMode:p,labelMark:c});return n&&(w.dataSource&&(w.dataSource=n.dataSource),w.items&&(w.items=n.items)),t&&!w.name&&(w.name=t),w}({editorType:n.editorType,editorValue:f,defaultEditorName:n.dataField,canAssignUndefinedValueToEditor:p,externalEditorOptions:n.editorOptions,editorInputId:E,editorValidationBoundary:g,editorStylingMode:w,formLabelMode:F,labelText:le.textWithoutColon,labelMark:le.markOptions.showRequiredMark?String.fromCharCode(160)+le.markOptions.requiredMark:""});return{$parent:e,rootElementCssClassList:t,formOrLayoutManager:r,createComponentCallback:a,labelOptions:le,labelNeedBaselineAlign:U,labelLocation:B,needRenderLabel:fe,item:n,isSimpleItem:X,isRequired:ee,template:s,helpID:M,labelID:P,name:l,helpText:!le.markOptions.showOptionalMark||le.visible||"hidden"===$.labelMode||(0,m.$K)(n.helpText)?n.helpText:le.markOptions.optionalMark,formLabelLocation:d,requiredMessageTemplate:u,validationGroup:c,editorOptions:$}}({$parent:n,rootElementCssClassList:s,item:a,name:f,editorValue:o,canAssignUndefinedValueToEditor:l,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:a.template?this._getTemplate(a.template):null,labelTemplate:null!==(t=a.label)&&void 0!==t&&t.template?this._getTemplate(a.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(f),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(p,e)&&p._alignLabels(this,this.isSingleColumnMode(p))}}));null===(r=this.option("onFieldItemRendered"))||void 0===r||r(),w&&a.dataField&&this._bindDataField(w,a.dataField,a.editorType,g),this._itemsRunTimeInfo.add({item:a,widgetInstance:w,guid:a.guid,$itemContainer:x})},_incTemplateRenderedCallCount(){var i;this._labelTemplateRenderedCallCount=(null!==(i=this._labelTemplateRenderedCallCount)&&void 0!==i?i:0)+1},_shouldAlignLabelsOnTemplateRendered(i,e){return i.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===e},_getMarkOptions:function(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis:function(){return this.option("form")||this},_bindDataField:function(i,e,t,r){var a=this._getFormOrThis();i.on("enterKey",function(n){a._createActionByOption("onEditorEnterKey")((0,N.l)(n,{dataField:e}))}),this._createWatcher(i,r,e),this.linkEditorToDataField(i,e,t)},_createWatcher:function(i,e,t){var r=this,a=r._getWatch();if((0,m.mf)(a)){var n=a(function(){return r._getDataByField(t)},function(){var s=r._getDataByField(t);if("dxTagBox"===i.NAME){var o=i.option("value");if(s!==o&&function(l,d){if(!Array.isArray(l)||!Array.isArray(d)||l.length!==d.length)return!1;for(var u=0;u<l.length;u++)if(l[u]!==d[u])return!1;return!0}(s,o))return}i.option("value",s)},{deep:!0,skipImmediate:!0});k.Z.on(e,ns.x,n)}},_getWatch:function(){if(!(0,m.$K)(this._watch)){var i=this.option("form");this._watch=i&&i.option("integrationOptions.watchMethod")}return this._watch},_createComponent:function(i,e,t){var r=this.option("readOnly"),a=Object.hasOwn(t,"readOnly"),n=this.callBase(i,e,(0,ye.Z)({},t,{readOnly:a?t.readOnly:r})),s=!1;return n.on("optionChanged",o=>{"readOnly"===o.name&&!s&&(a=!0)}),this.on("optionChanged",function(o){"readOnly"===o.name&&!a&&(s=!0,n.option(o.name,o.value),s=!1)}),n},_generateRatio:function(i,e){var r,a,t=[];for(a=0;a<i;a++)r={ratio:1},e&&(r.baseSize="auto"),t.push(r);return t},_getRowsCount:function(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions:function(i){var e=this.option("layoutData");(0,m.Kn)(e)&&Object.getOwnPropertyNames(e).forEach(t=>delete this._optionsByReference["layoutData."+t]),(0,m.Kn)(i)&&Object.getOwnPropertyNames(i).forEach(t=>this._optionsByReference["layoutData."+t]=!0)},_clearWidget(i){this._disableEditorValueChangedHandler=!0,i.clear(),this._disableEditorValueChangedHandler=!1,i.option("isValid",!0)},_optionChanged(i){if(0!==i.fullName.search("layoutData."))switch(i.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(i.value),this.option("items")?(0,m.Qr)(i.value)||this._itemsRunTimeInfo.each((e,t)=>{if((0,m.$K)(t.item)){var r=t.item.dataField;if(r&&(0,m.$K)(t.widgetInstance)){var n=(0,Dt.vb)(r)(i.value),{allowIndeterminateState:s,editorType:o}=t.item;void 0!==n||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:s,editorType:o,dataField:r})?t.widgetInstance.option("value",n):this._clearWidget(t.widgetInstance)}}}):(this._initDataAndItems(i.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(i.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":"auto"===this.option("colCount")&&this._resetColCount();break;case"readOnly":case"onFieldDataChanged":break;case"width":this.callBase(i),"auto"===this.option("colCount")&&this._resetColCount();break;default:this.callBase(i)}},_resetColCount:function(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(i,e){this.on("optionChanged",t=>{t.fullName==="layoutData.".concat(e)&&i._setOptionWithoutOptionChange("value",t.value)}),i.on("valueChanged",t=>{var r=(0,m.Kn)(t.value)||Array.isArray(t.value);!this._disableEditorValueChangedHandler&&(!r||t.value!==t.previousValue)&&this._updateFieldValue(e,t.value)})},_dimensionChanged:function(){"auto"===this.option("colCount")&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData:function(i,e){var t=this;(0,m.Kn)(i)?(0,j.S6)(i,function(r,a){t._updateFieldValue(r,a)}):"string"==typeof i&&t._updateFieldValue(i,e)},getEditor:function(i){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(i)||this._itemsRunTimeInfo.findWidgetInstanceByName(i)},isSingleColumnMode:function(i){var e=this._responsiveBox||i;if(e)return e.option("currentScreenFactor")===e.option("singleColumnScreen")},getItemsRunTimeInfo:function(){return this._itemsRunTimeInfo}});(0,It.Z)("dxLayoutManager",b3);var u_="dx-validationsummary",w3=u_+"-item",S3=u_+"-item-data",ly=oo.Z.inherit({_getDefaultOptions(){return(0,N.l)(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),(0,N.l)(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){var i=this.$element(),e=this.option("validationGroup")||Xt.Z.findGroup(i,this._modelByElement(i)),t=Xt.Z.addGroup(e);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=e,this.groupSubscription=this._groupValidationHandler.bind(this),t.on("validated",this.groupSubscription)},_unsubscribeGroup(){var i=Xt.Z.getGroupConfig(this._validationGroup);i&&i.off("validated",this.groupSubscription)},_getOrderedItems(i,e){var t=[];return(0,j.S6)(i,function(r,a){var n=(0,J.h3)(e,function(s){if(s.validator===a)return!0});n.length&&(t=t.concat(n))}),t},_groupValidationHandler(i){var e=this._getOrderedItems(i.validators,(0,j.UI)(i.brokenRules,function(t){return{text:t.message,validator:t.validator,index:t.index}}));this.validators=i.validators,(0,j.S6)(this.validators,(t,r)=>{if(r._validationSummary!==this){var a=this._itemValidationHandler.bind(this);r.on("validated",a),r.on("disposing",function(){r.off("validated",a),r._validationSummary=null,a=null}),r._validationSummary=this}}),this.option("items",e)},_itemValidationHandler(i){for(var{isValid:e,validator:t,brokenRules:r}=i,a=this.option("items"),n=!1,s=0,o=function(){var l=a[s];if(l.validator===t){var d=(0,J.h3)(r||[],function(u){return u.index===l.index})[0];if(e||!d)return a.splice(s,1),n=!0,1;d.message!==l.text&&(l.text=d.message,n=!0)}s++};s<a.length;)o();(0,j.S6)(r,function(l,d){(0,J.h3)(a,function(c){return c.validator===t&&c.index===d.index})[0]||(a.push({text:d.message,validator:t,index:d.index}),n=!0)}),n&&(a=this._getOrderedItems(this.validators,a),this.option("items",a))},_initMarkup(){this.$element().addClass(u_),this.callBase()},_optionChanged(i){"validationGroup"===i.name?this._initGroupRegistration():this.callBase(i)},_itemClass:()=>w3,_itemDataKey:()=>S3,_postprocessRenderItem(i){k.Z.on(i.itemElement,"click",function(){i.itemData.validator&&i.itemData.validator.focus&&i.itemData.validator.focus()})},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});(0,It.Z)("dxValidationSummary",ly);const y3=ly;var dy="dx-validationgroup";(0,It.Z)("dxValidationGroup",class I3 extends El.Z{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),Xt.Z.addGroup(this)}_initMarkup(){var e=this.$element();e.addClass(dy),e.find(".".concat("dx-validator")).each(function(t,r){l_.getInstance((0,b.Z)(r))._initGroupRegistration()}),e.find(".".concat("dx-validationsummary")).each(function(t,r){y3.getInstance((0,b.Z)(r)).refreshValidationGroup()}),super._initMarkup()}validate(){return Xt.Z.validateGroup(this)}reset(){return Xt.Z.resetGroup(this)}_dispose(){Xt.Z.removeGroup(this),this.$element().removeClass(dy),super._dispose()}_useTemplates(){return!1}});var T3=be(4977),uy="dx-state-focused",A3=["items","isRequired","validationRules","visible"],hy=hr.default.inherit({_init:function(){this.callBase(),this._dirtyFields=new Set,this._cachedColCountOptions=[],this._itemsRunTimeInfo=new sS,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{formID:"dx-"+new Ri.Z,formData:{},colCount:1,screenByWidth:We.$n,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:ae.Z.format("dxForm-optionalMark"),requiredMessage:ae.Z.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:(0,uu.Z)().editorStylingMode,labelMode:"outside",isDirty:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return(0,_t.yj)()},options:{labelLocation:"top"}},{device:function(){return(0,_t.x2)()},options:{showColonAfterLabel:!1}}])},_setOptionsByReference:function(){this.callBase(),(0,N.l)(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:function(i){return parseInt(i.attr(JS))},_applyLabelsWidthByCol:function(i,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.inOneColumn?KS:$S+e,n=t.excludeTabbed?":not(.".concat(YS,")"):"";!function qM(i,e,t){var s,o,r="".concat(e," > .").concat(jS,":not(.").concat(iy,"top) > .").concat(US),a=i.find(r),n=a.length,l=0;for(o=0;o<n;o++)(s=YM(a[o]))>l&&(l=s);for(o=0;o<n;o++)a[o].style.width=l+"px"}(i,".".concat(a).concat(n))},_applyLabelsWidth:function(i,e,t,r,a){r=t?1:r||this._getGroupColCount(i);var s,n={excludeTabbed:e,inOneColumn:t};for(s=0;s<r;s++)this._applyLabelsWidthByCol(i,s,n,a)},_getGroupElementsInColumn:function(i,e,t){var r=(0,m.$K)(t)?"."+XS+t:"";return i.find("."+$S+e+" > ."+n_+" > ."+a_+r)},_applyLabelsWidthWithGroups:function(i,e,t,r){if(!0===this.option("alignRootItemLabels"))for(var a=i.find(".".concat(qS)),n=0;n<e;n++)this._applyLabelsWidthByCol(a,n,t,r);if(this.option("alignItemLabelsInAllGroups"))this._applyLabelsWidthWithNestedGroups(i,e,t,r);else{var l,o=this.$element().find("."+a_);for(l=0;l<o.length;l++)this._applyLabelsWidth(o.eq(l),t,void 0,void 0,r)}},_applyLabelsWidthWithNestedGroups:function(i,e,t,r){var n,s,o,l,a={excludeTabbed:t};for(n=0;n<e;n++)for(l=this._getGroupElementsInColumn(i,n),this._applyLabelsWidthByCol(l,0,a,r),s=0;s<this._groupsColCount.length;s++){l=this._getGroupElementsInColumn(i,n,this._groupsColCount[s]);var d=this._getGroupColCount(l);for(o=1;o<d;o++)this._applyLabelsWidthByCol(l,o,a,r)}},_labelLocation:function(){return this.option("labelLocation")},_alignLabelsInColumn:function(i){var{layoutManager:e,inOneColumn:t,$container:r,excludeTabbed:a,items:n}=i;if((0,We.Ym)()&&"top"!==this._labelLocation()){var s=ty(e._getMarkOptions());t?this._applyLabelsWidth(r,a,!0,void 0,s):this._checkGrouping(n)?this._applyLabelsWidthWithGroups(r,e._getColCount(),a,s):this._applyLabelsWidth(r,a,!1,e._getColCount(),s)}},_prepareFormData:function(){(0,m.$K)(this.option("formData"))||this.option("formData",{})},_setStylingModeClass:function(){"underlined"===this.option("stylingMode")&&this.$element().addClass("dx-form-styling-mode-underlined")},_initMarkup:function(){Xt.Z.addGroup(this._getValidationGroup()),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass("dx-form"),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription:function(){if((0,We.Ym)()){var i=this.$element().get(0);r_.Z.unobserve(i),r_.Z.observe(i,()=>{this._resizeHandler()})}},_resizeHandler:function(){this._cachedLayoutManagers.length&&(0,j.S6)(this._cachedLayoutManagers,(i,e)=>{var t;null===(t=e.option("onLayoutChanged"))||void 0===t||t(e.isSingleColumnMode())})},_getCurrentScreenFactor:function(){return(0,We.Ym)()?(0,We.Wf)(this.option("screenByWidth")):"lg"},_clearCachedInstances:function(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels:function(i,e){this._alignLabelsInColumn({$container:this.$element(),layoutManager:i,excludeTabbed:!0,items:this.option("items"),inOneColumn:e}),(0,qf.U_)(this.$element().find(".".concat(T3.z)))},_clean:function(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,r_.Z.unobserve(this.$element().get(0))},_renderScrollable:function(){var i=this.option("useNativeScrolling");this._scrollable=new Ea(this.$element(),{useNative:!!i,useSimulatedScrollbar:!i,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent:function(){return this.option("scrollingEnabled")?(0,b.Z)(this._scrollable.content()):this.$element()},_clearValidationSummary:function(){var i;null===(i=this._$validationSummary)||void 0===i||i.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary:function(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=(0,b.Z)("<div>").addClass("dx-form-validation-summary").appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(i,e,t,r){if(i){for(var a=[],n=0;n<i.length;n++){var s=i[n],o=VS(t,t_(n,r)),l={item:s,itemIndex:n,path:o},d=this._itemsRunTimeInfo.add(l);if((0,m.HD)(s)&&(s={dataField:s}),(0,m.Kn)(s)){var u=(0,ye.Z)({},s);l.preparedItem=u,u.guid=d,this._tryPrepareGroupItem(u),this._tryPrepareTabbedItem(u,o),this._tryPrepareItemTemplate(u),e&&(u.cssItemClass=YS),u.items&&(u.items=this._prepareItems(u.items,e,o)),a.push(u)}else a.push(s)}return a}},_tryPrepareGroupItem:function(i){"group"===i.itemType&&(i.alignItemLabels=(0,J.IS)(i.alignItemLabels,!0),i._prepareGroupItemTemplate=e=>{i.template&&(i.groupContentTemplate=this._getTemplate(e)),i.template=this._itemGroupTemplate.bind(this,i)},i._prepareGroupItemTemplate(i.template))},_tryPrepareTabbedItem:function(i,e){"tabbed"===i.itemType&&(i.template=this._itemTabbedTemplate.bind(this,i),i.tabs=this._prepareItems(i.tabs,!0,e,!0))},_tryPrepareItemTemplate:function(i){i.template&&(i.template=this._getTemplate(i.template))},_checkGrouping:function(i){if(i)for(var e=0;e<i.length;e++)if("group"===i[e].itemType)return!0},_renderLayout:function(){var i=this,e=i.option("items"),t=i._getContent();e=i._prepareItems(e),i._rootLayoutManager=i._renderLayoutManager(t,this._createLayoutManagerOptions(e,{isRoot:!0,colCount:i.option("colCount"),alignItemLabels:i.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged:function(r){i._alignLabels.bind(i)(i._rootLayoutManager,r)},onContentReady:function(r){i._alignLabels(r.component,r.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:function(i){return i.items||[]},_itemTabbedTemplate:function(i,e,t){var r,a=(0,b.Z)("<div>").appendTo(t),n=(0,N.l)({},i.tabPanelOptions,{dataSource:i.tabs,onItemRendered:l=>{var d,u;null===(d=i.tabPanelOptions)||void 0===d||null===(u=d.onItemRendered)||void 0===u||u.call(d,l),(0,qf.Uo)(l.itemElement)},itemTemplate:(l,d,u)=>{var c=(0,b.Z)(u),f=(0,J.IS)(l.alignItemLabels,!0),p=this._renderLayoutManager(c,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(l),{colCount:l.colCount,alignItemLabels:f,screenByWidth:this.option("screenByWidth"),colCountByScreen:l.colCountByScreen,cssItemClass:l.cssItemClass,onLayoutChanged:g=>{this._alignLabelsInColumn({$container:c,layoutManager:p,items:l.items,inOneColumn:g})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(l.guid,{layoutManager:p}),f&&this._alignLabelsInColumn({$container:c,layoutManager:p,items:l.items,inOneColumn:p.isSingleColumnMode()})}}),s=(l,d)=>{Array.isArray(l)&&l.forEach(u=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(u.guid,{widgetInstance:d}))},o=this._createComponent(a,lM,n);(0,b.Z)(t).parent().addClass("dx-field-item-has-tabs"),o.on("optionChanged",l=>{"dataSource"===l.fullName&&s(l.value,l.component)}),s([{guid:i.guid},...null!==(r=i.tabs)&&void 0!==r?r:[]],o)},_itemGroupTemplate:function(i,e,t){var r=e.editorOptions.inputAttr.id,a=(0,b.Z)("<div>").toggleClass("dx-form-group-with-caption",(0,m.$K)(i.caption)&&i.caption.length).addClass(a_).appendTo(t);this.setAria({role:"group",labelledby:r},a),(0,b.Z)(t).parent().addClass("dx-field-item-has-group"),i.caption&&(0,b.Z)("<span>").addClass("dx-form-group-caption").text(i.caption).attr("id",r).appendTo(a);var s=(0,b.Z)("<div>").addClass("dx-form-group-content").appendTo(a);if(i.groupContentTemplate)i._renderGroupContentTemplate=()=>{s.empty();var d={formData:this.option("formData"),component:this};i.groupContentTemplate.render({model:d,container:(0,rt.u)(s)})},i._renderGroupContentTemplate();else{var o=this._renderLayoutManager(s,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(i),{colCount:i.colCount,colCountByScreen:i.colCountByScreen,alignItemLabels:i.alignItemLabels,cssItemClass:i.cssItemClass}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(i.guid,{layoutManager:o});var l=o._getColCount();this._groupsColCount.includes(l)||this._groupsColCount.push(l),a.addClass(XS+l),a.attr(JS,l)}},_createLayoutManagerOptions:function(i,e){return function hM(i){var{form:e,$formElement:t,formOptions:r,items:a,validationGroup:n,extendedLayoutManagerOptions:s,onFieldDataChanged:o,onContentReady:l,onDisposing:d,onFieldItemRendered:u}=i;return(0,N.l)({form:e,items:a,$formElement:t,validationGroup:n,onFieldDataChanged:o,onContentReady:l,onDisposing:d,onFieldItemRendered:u,validationBoundary:r.scrollingEnabled?t:void 0,scrollingEnabled:r.scrollingEnabled,showRequiredMark:r.showRequiredMark,showOptionalMark:r.showOptionalMark,requiredMark:r.requiredMark,optionalMark:r.optionalMark,requiredMessage:r.requiredMessage,screenByWidth:r.screenByWidth,layoutData:r.formData,labelLocation:r.labelLocation,customizeItem:r.customizeItem,minColWidth:r.minColWidth,showColonAfterLabel:r.showColonAfterLabel,onEditorEnterKey:r.onEditorEnterKey,labelMode:r.labelMode},{isRoot:s.isRoot,colCount:s.colCount,alignItemLabels:s.alignItemLabels,cssItemClass:s.cssItemClass,colCountByScreen:s.colCountByScreen,onLayoutChanged:s.onLayoutChanged,width:s.width})}({form:this,formOptions:this.option(),$formElement:this.$element(),items:i,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:e,onFieldDataChanged:t=>{this._isDataUpdating||this._triggerOnFieldDataChanged(t)},onContentReady:t=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(t.component._itemsRunTimeInfo),e.onContentReady&&e.onContentReady(t)},onDisposing:t=>{var{component:r}=t,a=r.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(a)},onFieldItemRendered:()=>{var t;null===(t=this._validationSummary)||void 0===t||t.refreshValidationGroup()}})},_renderLayoutManager:function(i,e){this._cachedColCountOptions.push({colCountByScreen:(0,N.l)({lg:e.colCount,md:e.colCount,sm:e.colCount,xs:1},e.colCountByScreen)});var r=(0,b.Z)("<div>");r.appendTo(i);var a=this._createComponent(r,"dxLayoutManager",e);return a.on("autoColCountChanged",()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout(()=>!this._disposed&&this._refresh(),0)}),this._cachedLayoutManagers.push(a),a},_getValidationGroup:function(){return this.option("validationGroup")||this},_createComponent:function(i,e,t){return this._extendConfig(t=t||{},{readOnly:this.option("readOnly")}),this.callBase(i,e,t)},_attachSyncSubscriptions:function(){var i=this;i.on("optionChanged",function(e){var t=e.fullName;"formData"===t&&((0,m.$K)(e.value)||i._options.silent("formData",e.value={}),i._triggerOnFieldDataChangedByDataSet(e.value)),i._cachedLayoutManagers.length&&(0,j.S6)(i._cachedLayoutManagers,function(r,a){"formData"===t&&(i._isDataUpdating=!0,a.option("layoutData",e.value),i._isDataUpdating=!1),("readOnly"===e.name||"disabled"===e.name)&&a.option(t,e.value)})})},_optionChanged:function(i){var e=i.fullName.split(".");e.length>1&&-1!==e[0].search("items")&&this._itemsOptionChangedHandler(i)||e.length>1&&-1!==e[0].search("formData")&&this._formDataOptionChangedHandler(i)||this._defaultOptionChangedHandler(i)},_defaultOptionChangedHandler:function(i){switch(i.name){case"formData":this.option("items")?(0,m.Qr)(i.value)&&this._clear():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":case"isDirty":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":"auto"===this.option("colCount")&&this._invalidate();break;case"width":this.callBase(i),this._rootLayoutManager.option(i.name,i.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":Xt.Z.removeGroup(i.previousValue||this),this._invalidate();break;default:this.callBase(i)}},_itemsOptionChangedHandler:function(i){var e=i.fullName.split("."),t=i.value,r=this._getItemPath(e),a=this.option(r),n=i.fullName.replace(r+".",""),s=n.split(".")[0].replace(/\[\d+]/,""),o=this._tryCreateItemOptionAction(s,a,a[s],i.previousValue,r),l=this._tryExecuteItemOptionAction(o)||this._tryChangeLayoutManagerItemOption(i.fullName,t);if(!l&&a){this._changeItemOption(a,n,t);var d=this._generateItemsFromData(this.option("items"));this.option("items",d),l=!0}return l},_formDataOptionChangedHandler:function(i){var e=i.fullName.split("."),t=i.value,r=e.slice(1).join("."),a=this.getEditor(r);return a?a.option("value",t):this._triggerOnFieldDataChanged({dataField:r,value:t}),!0},_tryCreateItemOptionAction:function(i,e,t,r,a){return"tabs"===i&&(this._itemsRunTimeInfo.removeItemsByPathStartWith("".concat(a,".tabs")),t=this._prepareItems(t,!0,a,!0)),((i,e)=>{switch(i){case"editorOptions":case"buttonOptions":return new cM(e);case"validationRules":return new vM(e);case"cssClass":return new gM(e);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new MS((0,N.l)(e,{optionName:i}));case"tabs":return new _M(e);case"template":var t,r,a,n=null!==(t=null==e||null===(r=e.item)||void 0===r?void 0:r.itemType)&&void 0!==t?t:null===(a=e.itemsRunTimeInfo.findPreparedItemByItem(e?.item))||void 0===a?void 0:a.itemType;return"simple"===n?new pM(e):"group"===n?new fM(e):new MS((0,N.l)(e,{optionName:i}));default:return null}})(i,{item:e,value:t,previousValue:r,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:function(i){return i&&i.tryExecute()},_updateValidationGroupAndSummaryIfNeeded:function(i){var t,e=NS(i);A3.indexOf(e)>-1&&(Xt.Z.addGroup(this._getValidationGroup()),this.option("showValidationSummary"))&&(null===(t=this._validationSummary)||void 0===t||t.refreshValidationGroup())},_setLayoutManagerItemOption(i,e,t,r){if(this._updateLockCount>0){!i._updateLockCount&&i.beginUpdate();var a=this._itemsRunTimeInfo.findKeyByPath(r);this.postponedOperations.add(a,()=>(!i._disposed&&i.endUpdate(),(new Y.BH).resolve()))}var n=s=>{if(s.component.off("contentReady",n),FS(r)){var o=(i=>{for(var e=i.split("."),t=[...e],r=e.length-1;r>=0;r--){if(FS(e[r]))return t.join(".");t.splice(r,1)}return""})(r),l=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(o);l&&this._alignLabelsInColumn({items:l.option("items"),layoutManager:l,$container:l.$element(),inOneColumn:l.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};i.on("contentReady",n),i.option(e,t),this._updateValidationGroupAndSummaryIfNeeded(e)},_tryChangeLayoutManagerItemOption(i,e){var t=i.split("."),r=NS(i);if("items"===r&&t.length>1){var a=this._getItemPath(t),n=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(a);if(n){this._itemsRunTimeInfo.removeItemsByItems(n.getItemsRunTimeInfo());var s=this._prepareItems(e,!1,a);return this._setLayoutManagerItemOption(n,r,s,a),!0}}else if(t.length>2){var o=t.length-2,l=this._getItemPath(t.slice(0,o)),d=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(l);if(d){var u=rd(t[o],r);if("editorType"===r&&d.option(u)!==e)return!1;if("visible"===r){var c=this.option(rd(l,"items"));if(c&&c.length){var f=d.option("items");c.forEach((p,g)=>{f[g].visibleIndex=p.visibleIndex})}}return this._setLayoutManagerItemOption(d,u,e,l),!0}}return!1},_tryChangeLayoutManagerItemOptions(i,e){var t;return this.beginUpdate(),(0,j.S6)(e,(r,a)=>{if(!(t=this._tryChangeLayoutManagerItemOption(rd(i,r),a)))return!1}),this.endUpdate(),t},_getItemPath:function(i){var t,e=i[0];for(t=1;t<i.length&&-1!==i[t].search(/items\[\d+]|tabs\[\d+]/);t++)e+="."+i[t];return e},_triggerOnFieldDataChanged:function(i){this._updateIsDirty(i.dataField),this._createActionByOption("onFieldDataChanged")(i)},_triggerOnFieldDataChangedByDataSet(i){i&&(0,m.Kn)(i)&&Object.keys(i).forEach(e=>{this._triggerOnFieldDataChanged({dataField:e,value:i[e]})})},_updateFieldValue:function(i,e){if((0,m.$K)(this.option("formData"))){var t=this.getEditor(i);this.option("formData."+i,e),t&&t.option("value")!==e&&t.option("value",e)}},_generateItemsFromData:function(i){var e=this.option("formData"),t=[];return!i&&(0,m.$K)(e)&&(0,j.S6)(e,function(r){t.push({dataField:r})}),i&&(0,j.S6)(i,function(r,a){(0,m.Kn)(a)?t.push(a):t.push({dataField:a})}),t},_getItemByField:function(i,e){var s,t=this,r=(0,m.Kn)(i)?i:t._getFieldParts(i),a=r.fieldName,n=r.fieldPath;return e.length&&(0,j.S6)(e,function(o,l){var d=l.itemType;if(n.length){var u=n.slice();l=t._getItemByFieldPath(u,a,l)}else if("group"===d&&!l.caption&&!l.name||"tabbed"===d&&!l.name){var c=t._getSubItemField(d);l.items=t._generateItemsFromData(l.items),l=t._getItemByField({fieldName:a,fieldPath:n},l[c])}if(((i,e)=>!!i&&(i.dataField===e||i.name===e||i_(i.title)===e||"group"===i.itemType&&i_(i.caption)===e))(l,a))return s=l,!1}),s},_getFieldParts:function(i){for(var e=i,t=e.indexOf("."),r=[];-1!==t;)r.push(e.substr(0,t)),t=(e=e.substr(t+1)).indexOf(".");return{fieldName:e,fieldPath:r.reverse()}},_getItemByFieldPath:function(i,e,t){var s,r=t.itemType,a=this._getSubItemField(r),n="group"===r||"tabbed"===r||t.title;do{if(!n)break;var o=t.name||t.caption||t.title,l=(0,m.$K)(o),d=i_(o),u=void 0;if(t[a]=this._generateItemsFromData(t[a]),l&&(u=i.pop()),!i.length&&(s=this._getItemByField(e,t[a])))break;(!l||l&&d===u)&&i.length&&(s=this._searchItemInEverySubItem(i,e,t[a]))}while(i.length&&!(0,m.$K)(s));return s},_getSubItemField:function(i){return"tabbed"===i?"tabs":"items"},_searchItemInEverySubItem:function(i,e,t){var a,r=this;return(0,j.S6)(t,function(n,s){if(a=r._getItemByFieldPath(i.slice(),e,s))return!1}),a||(a=!1),a},_changeItemOption:function(i,e,t){(0,m.Kn)(i)&&(i[e]=t)},_dimensionChanged:function(){var i=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==i&&(this._isColCountChanged(this._lastMarkupScreenFactor,i)&&(this._targetScreenFactor=i,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=i)},_isColCountChanged:function(i,e){var t=!1;return(0,j.S6)(this._cachedColCountOptions,function(r,a){if(a.colCountByScreen[i]!==a.colCountByScreen[e])return t=!0,!1}),t},_refresh:function(){var i=".".concat(uy," > :not(.dx-dropdowneditor-input-wrapper) input,")+" .".concat(uy," textarea");k.Z.trigger(this.$element().find(i),"change"),this.callBase()},_updateIsDirty:function(i){var e=this.getEditor(i);e&&(e.option("isDirty")?this._dirtyFields.add(i):this._dirtyFields.delete(i),this.option("isDirty",!!this._dirtyFields.size))},updateRunTimeInfoForEachEditor:function(i){this._itemsRunTimeInfo.each(function(e,t){var r=t.widgetInstance;(0,m.$K)(r)&&Qa.Z.isEditor(r)&&i(r)})},_clear:function(){this.updateRunTimeInfoForEachEditor(i=>{i.clear(),i.option("isValid",!0)}),Xt.Z.resetGroup(this._getValidationGroup())},_updateData:function(i,e,t){var r=this,a=t?e:i;(0,m.Kn)(a)?(0,j.S6)(a,function(n,s){r._updateData(t?i+"."+n:n,s,(0,m.Kn)(s))}):(0,m.HD)(i)&&r._updateFieldValue(i,e)},registerKeyHandler:function(i,e){this.callBase(i,e),this._itemsRunTimeInfo.each(function(t,r){(0,m.$K)(r.widgetInstance)&&r.widgetInstance.registerKeyHandler(i,e)})},_focusTarget:function(){return this.$element().find("."+n_+" [tabindex]").first()},_visibilityChanged:function(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout:function(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose:function(){this._clearAutoColCountChangedTimeout(),Xt.Z.removeGroup(this._getValidationGroup()),this.callBase()},clear:function(){this._clear()},resetValues:function(){this._clear()},reset:function(i){this.updateRunTimeInfoForEachEditor(e=>{var t=e.option("name");i&&t in i?e.reset(i[t]):e.reset()}),this._renderValidationSummary()},updateData:function(i,e){this._updateData(i,e)},getEditor:function(i){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(i)||this._itemsRunTimeInfo.findWidgetInstanceByName(i)},getButton:function(i){return this._itemsRunTimeInfo.findWidgetInstanceByName(i)},updateDimensions:function(){var i=this,e=new Y.BH;return i._scrollable?i._scrollable.update().done(function(){e.resolveWith(i)}):e.resolveWith(i),e.promise()},itemOption:function(i,e,t){var r=this._generateItemsFromData(this.option("items")),a=this._getItemByField(i,r),n=kS(r,a);if(a)switch(arguments.length){case 1:return a;case 3:var s=this._tryCreateItemOptionAction(e,a,t,a[e],n);this._changeItemOption(a,e,t);var o=rd(n,e);!this._tryExecuteItemOptionAction(s)&&!this._tryChangeLayoutManagerItemOption(o,t)&&this.option("items",r);break;default:var l;(0,m.Kn)(e)&&!this._tryChangeLayoutManagerItemOptions(n,e)&&((0,j.S6)(e,(d,u)=>{var c=this._tryCreateItemOptionAction(d,a,u,a[d],n);this._changeItemOption(a,d,u),!l&&!this._tryExecuteItemOptionAction(c)&&(l=!0)}),l&&this.option("items",r))}},validate:function(){return Xt.Z.validateGroup(this._getValidationGroup())},getItemID:function(i){return"dx_"+this.option("formID")+"_"+(i||new Ri.Z)},getTargetScreenFactor:function(){return this._targetScreenFactor}});(0,It.Z)("dxForm",hy);const cy=hy;var L3={extenders:{controllers:{editing:i=>class extends i{init(){this._editForm=null,this._updateEditFormDeferred=null,super.init()}isFormOrPopupEditMode(){return this.isPopupEditMode()||this.isFormEditMode()}isPopupEditMode(){return this.option("editing.mode")===Kf}isFormEditMode(){return this.option("editing.mode")===Co}getFirstEditableColumnIndex(){var e=this._firstFormItem;if(this.isFormEditMode()&&e){var t=this.option(Tr),r=this._dataController.getRowIndexByKey(t),a=this._rowsView.getCellElements(r);return this._rowsView._getEditFormEditorVisibleIndex(a,e.column)}return super.getFirstEditableColumnIndex()}getEditFormRowIndex(){return this.isFormOrPopupEditMode()?this._getVisibleEditRowIndex():super.getEditFormRowIndex()}_isEditColumnVisible(){var e=super._isEditColumnVisible(),t=this.option("editing");return this.isFormOrPopupEditMode()&&t.allowUpdating||e}_handleDataChanged(e){var t,r;if(this.isPopupEditMode()){var a=this.option("editing.editRowKey"),n=null===(t=e?.items)||void 0===t?void 0:t.some(o=>(0,J.bY)(o.key,a)),s=(null===(r=e.changeTypes)||void 0===r?void 0:r.length)&&e.changeTypes.every(o=>"insert"===o);("refresh"===e.changeType||n&&e.isOptionChanged)&&!s&&this._repaintEditPopup()}super._handleDataChanged(e)}getPopupContent(){var e,t=null===(e=this._editPopup)||void 0===e?void 0:e.option("visible");if(this.isPopupEditMode()&&t)return this._$popupContent}_showAddedRow(e){this.isPopupEditMode()?this._showEditPopup(e):super._showAddedRow(e)}_cancelEditDataCore(){super._cancelEditDataCore(),this.isPopupEditMode()&&this._hideEditPopup()}_updateEditRowCore(e,t,r){var a,n=this._editForm;this.isPopupEditMode()?this.option("repaintChangesOnly")?(null===(a=e.update)||void 0===a||a.call(e,e),this._rowsView.renderDelayedTemplates()):n&&(this._updateEditFormDeferred=(new Y.BH).done(()=>n.repaint()),this._updateLockCount||this._updateEditFormDeferred.resolve()):super._updateEditRowCore(e,t,r)}_showEditPopup(e,t){var r="desktop"!==at.Z.current().deviceType,a=this.addWidgetPrefix("edit-popup"),n=(0,N.l)({showTitle:!1,fullScreen:r,wrapperAttr:{class:a},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getSaveButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getCancelButtonConfig()}],contentTemplate:this._getPopupEditFormTemplate(e)},this.option(oh));if(!this._editPopup){var s=(0,b.Z)("<div>").appendTo(this.component.$element()).addClass(a);this._editPopup=this._createComponent(s,Ja.Z),this._editPopup.on("hiding",this._getEditPopupHiddenHandler()),this._editPopup.on("shown",o=>{var l;k.Z.trigger(o.component.$content().find($f).not(".".concat(lk)).first(),"focus"),t&&(null===(l=this._editForm)||void 0===l||l.repaint())})}this._editPopup.option(n),this._editPopup.show(),super._showEditPopup(e,t)}_getPopupEditFormTemplate(e){var t=this.component.getVisibleRows()[e],r={row:t,values:t.values,rowType:t.rowType,key:t.key,rowIndex:e};return this._rowsView._addWatchMethod(r,t),a=>{var n=this.getEditFormTemplate(),s=this._createComponent((0,b.Z)("<div>").appendTo(a),Ea);this._$popupContent=(0,b.Z)(s.content()),n(this._$popupContent,r,{isPopupForm:!0}),this._rowsView.renderDelayedTemplates(),(0,b.Z)(a).parent().attr("aria-label",this.localize("dxDataGrid-ariaEditForm"))}}_repaintEditPopup(){var e,t,r=this._getVisibleEditRowIndex();if(r>=0){var a=null===(e=this._editPopup)||void 0===e?void 0:e.option("animation");null===(t=this._editPopup)||void 0===t||t.option("animation",null),this._showEditPopup(r,!0),void 0!==a&&this._editPopup.option("animation",a)}}_hideEditPopup(){var e;null===(e=this._editPopup)||void 0===e||e.option("visible",!1)}optionChanged(e){if("editing"===e.name&&this.isFormOrPopupEditMode()){var{fullName:t}=e;0===t.indexOf(zf)?(this._handleFormOptionChange(e),e.handled=!0):0===t.indexOf(oh)&&(this._handlePopupOptionChange(e),e.handled=!0)}super.optionChanged(e)}_handleFormOptionChange(e){var t;if(this.isFormEditMode()){var r=this._getVisibleEditRowIndex();r>=0&&this._dataController.updateItems({changeType:"update",rowIndices:[r]})}else null!==(t=this._editPopup)&&void 0!==t&&t.option("visible")&&0===e.fullName.indexOf(zf)&&this._repaintEditPopup()}_handlePopupOptionChange(e){var t=this._editPopup;if(t){var r=e.fullName.slice(14);r?t.option(r,e.value):t.option(e.value)}}renderFormEditorTemplate(e,t,r,a,n){var s=this,o=(0,b.Z)(a),{column:l}=t,d=(i=>{var e,{column:t}=i;return i.isCustomEditorType?i.editorType:null===(e=t.formItem)||void 0===e?void 0:e.editorType})(t),u=e?.row.data,c=r.component,{label:f,labelMark:p,labelMode:g}=r.editorOptions||{},w=(0,N.l)({},e,{data:u,cellElement:null,isOnForm:!0,item:t,id:c.getItemID(t.name||t.dataField),column:(0,N.l)({},l,{editorType:d,editorOptions:(0,N.l)({label:f,labelMark:p,labelMode:g},l.editorOptions,t.editorOptions)}),columnIndex:l.index,setValue:!n&&l.allowEditing&&function(y,E){s.updateFieldValue(w,y,E)}});w.value=l.calculateCellValue(u);var x=this._getFormEditItemTemplate.bind(this)(w,l);return this._rowsView.renderTemplate(o,x,w,!!(0,ga.al)(o)).done(()=>{this._rowsView._updateCell(o,w)}),w}getFormEditorTemplate(e,t){var r=this.component.columnOption(t.name||t.dataField);return(a,n)=>{var s=(0,b.Z)(n),{row:o}=e;if(o?.watch){var l=o.watch(()=>r.selector(o.data),()=>{var d=s.find(".dx-widget").first(),u=d.data("dxValidator"),c=u?.option();s.contents().remove(),e=this.renderFormEditorTemplate.bind(this)(e,t,a,s),u=(d=s.find(".dx-widget").first()).data("dxValidator"),c&&!u&&d.dxValidator({validationRules:c.validationRules,validationGroup:c.validationGroup,dataGetter:c.dataGetter})});k.Z.on(s,ns.x,l)}e=this.renderFormEditorTemplate.bind(this)(e,t,a,s)}}getEditFormOptions(e){var t,r=null===(t=this._getValidationGroupsInForm)||void 0===t?void 0:t.call(this,e),a=this.option("editing.form.customizeItem"),n=this.addWidgetPrefix(Qw),s=this.option("editing.form.items"),o={};if(s)aS(s,d=>{var u=d?.name||d?.dataField;u&&(o[u]=!!d.editorType)});else{var l=this._columnsController.getColumns();s=[],(0,j.S6)(l,(d,u)=>{!u.isBand&&!u.type&&s.push({column:u,name:u.name,dataField:u.dataField})})}return(0,N.l)({},r,{items:s,formID:"dx-".concat(new Ri.Z),customizeItem:d=>{var u,c=d.name||d.dataField;if((d.column||c)&&(u=d.column||this._columnsController.columnOption(d.name?"name:".concat(d.name):"dataField:".concat(d.dataField))),u){if(d.label=d.label||{},d.label.text=d.label.text||u.caption,"boolean"===u.dataType&&void 0===d.label.visible){var f=this.option("editing.form.labelMode");("floating"===f||"static"===f)&&(d.label.visible=!0)}d.template=d.template||this.getFormEditorTemplate(e,d),d.column=u,d.isCustomEditorType=o[c],u.formItem&&(0,N.l)(d,u.formItem),void 0===d.isRequired&&u.validationRules&&(d.isRequired=u.validationRules.some(g=>"required"===g.type),d.validationRules=[]);var p=!(0,m.$K)(d.visible)||d.visible;!this._firstFormItem&&p&&(this._firstFormItem=d)}a?.call(this,d),d.cssClass=(0,m.HD)(d.cssClass)?"".concat(d.cssClass," ").concat(n):n}})}getEditFormTemplate(){return(e,t,r)=>{var a=this.option(zf),n=this.getEditFormOptions(t),s=(0,b.Z)("<div>").appendTo(e),o=r?.isPopupForm;if(this._firstFormItem=void 0,o&&s.addClass(this.addWidgetPrefix("edit-popup-form")),this._editForm=this._createComponent(s,cy,(0,N.l)({},a,n)),!o){var l=(0,b.Z)("<div>").addClass(this.addWidgetPrefix("form-buttons-container")).appendTo(e);this._createComponent((0,b.Z)("<div>").appendTo(l),pr.Z,this._getSaveButtonConfig()),this._createComponent((0,b.Z)("<div>").appendTo(l),pr.Z,this._getCancelButtonConfig())}this._editForm.on("contentReady",()=>{var d;this._rowsView.renderDelayedTemplates(),null===(d=this._editPopup)||void 0===d||d.repaint()})}}getEditForm(){return this._editForm}_endUpdateCore(){var e;null===(e=this._updateEditFormDeferred)||void 0===e||e.resolve()}_beforeEndSaving(e){var t;super._beforeEndSaving(e),this.isPopupEditMode()&&(null===(t=this._editPopup)||void 0===t||t.hide())}_processDataItemCore(e,t,r,a,n){var{type:s}=t;this.isPopupEditMode()&&s===Ra&&(e.visible=!1),super._processDataItemCore(e,t,r,a,n)}_editRowFromOptionChangedCore(e,t){var r=this.isPopupEditMode();super._editRowFromOptionChangedCore(e,t,r),r&&this._showEditPopup(t)}},data:i=>class extends i{_updateEditItem(e){this._editingController.isFormEditMode()&&(e.rowType="detail")}_getChangedColumnIndices(e,t,r,a){if(!1!==a||!t.isEditing||!this._editingController.isFormEditMode())return super._getChangedColumnIndices.apply(this,arguments)}}},views:{rowsView:i=>class extends i{_renderCellContent(e,t){"data"===t.rowType&&this._editingController.isPopupEditMode()&&!1===t.row.visible||super._renderCellContent.apply(this,arguments)}getCellElements(e){var t=super.getCellElements(e),r=this._editingController,a=r.getEditForm();return r.getEditFormRowIndex()===e&&t&&a?a.$element().find(".".concat(this.addWidgetPrefix(Qw),", .").concat("dx-button")):t}_getVisibleColumnIndex(e,t,r){if(this._editingController.getEditFormRowIndex()===t&&(0,m.HD)(r)){var n=this._columnsController.columnOption(r);return this._getEditFormEditorVisibleIndex(e,n)}return super._getVisibleColumnIndex.apply(this,arguments)}_getEditFormEditorVisibleIndex(e,t){var r=-1;return(0,j.S6)(e,(a,n)=>{var s=(0,b.Z)(n).find(".dx-field-item-content").data("dx-form-item");if(s?.column&&t&&s.column.index===t.index)return r=a,!1}),r}_isFormItem(e){var t="detail"===e.rowType||"detailAdaptive"===e.rowType,r="data"===e.rowType&&this._editingController.isPopupEditMode();return(t||r)&&e.item}_updateCell(e,t){this._isFormItem(t)?this._formItemPrepared(t,e):super._updateCell(e,t)}_updateContent(){var e=this._editingController,t=e.getEditForm(),r=t?.option("validationGroup");return super._updateContent.apply(this,arguments).done(()=>{var n=e.getEditForm();r&&n&&n!==t&&n.option("validationGroup",r)})}}}}};He.registerModule("editingFormBased",L3);var N3={extenders:{controllers:{editing:i=>class extends i{init(){var t,r,e=!this._saveEditorHandler;super.init(),e&&(this._pointerUpEditorHandler=()=>{var a;r=null===(a=this._columnsResizerController)||void 0===a?void 0:a.isResizing()},this._pointerDownEditorHandler=a=>t=(0,b.Z)(a.target),this._saveEditorHandler=this.createAction(function(a){var{event:n}=a,s=(0,b.Z)(n.target),o=n[Kw],{component:l}=this;if((!function _k(i){return i&&(i.is("input")||i.is("textarea"))}(t)||t.is(s))&&this.isCellOrBatchEditMode()&&!this._editCellInProgress){var u=d(s)||d(o?.$element()),c=o&&!o._disposed&&o!==this.component,f=!!s.closest(".".concat(this.addWidgetPrefix("addrow-button"))).length,p=s.hasClass(this.addWidgetPrefix("focus-overlay")),g=this.isCellEditMode();!r&&!u&&!p&&!(f&&g&&this.isEditing())&&((0,ga.al)(s)||c)&&this._closeEditItem.bind(this)(s)}function d(w){if(!w)return!1;var x=w.closest(".".concat("dx-dropdowneditor-overlay")),y=l.$element();return x.length>0&&0===y.closest(x).length}}),k.Z.on(it.Z.getDocument(),Bt.Z.up,this._pointerUpEditorHandler),k.Z.on(it.Z.getDocument(),Bt.Z.down,this._pointerDownEditorHandler),k.Z.on(it.Z.getDocument(),Pt.u,this._saveEditorHandler))}isCellEditMode(){return this.option("editing.mode")===mo}isBatchEditMode(){return this.option("editing.mode")===Cs}isCellOrBatchEditMode(){return this.isCellEditMode()||this.isBatchEditMode()}_needToCloseEditableCell(e){var t,r=this.component.$element(),a=this.isEditing();if((!r||e.closest(r).length)&&e.closest(".".concat("dx-data-row")).length){var o=e.closest(".".concat(On,"> td")),l=this._rowsView.getRowIndex(o.parent()),d=this._rowsView.getCellElements(l);if(d?.length){var u=d.index(o),f=null===(t=this._columnsController.getVisibleColumns()[u])||void 0===t?void 0:t.allowEditing,p=this.isEditCell(l,u);a=a&&!f&&!p}}return a||super._needToCloseEditableCell(e)}_closeEditItem(e){this._needToCloseEditableCell(e)&&this.closeEditCell()}_focusEditorIfNeed(){var e;if(this._needFocusEditor&&this.isCellOrBatchEditMode()){var t=this._getVisibleEditColumnIndex(),r=null===(e=this._rowsView)||void 0===e?void 0:e._getCellElement(this._getVisibleEditRowIndex(),t);r&&!r.find(":focus").length?this._focusEditingCell(()=>{this._editCellInProgress=!1},r,!0):this._editCellInProgress=!1,this._needFocusEditor=!1}else super._focusEditorIfNeed()}isEditing(){if(this.isCellOrBatchEditMode()){var e=(0,m.$K)(this.option(Tr)),t=(0,m.$K)(this.option(ms));return e&&t}return super.isEditing()}_handleEditColumnNameChange(e){var t=this._getVisibleEditRowIndex(e.previousValue);if(this.isCellOrBatchEditMode()&&-1!==t&&(0,m.$K)(e.value)&&e.value!==e.previousValue){var r=this._columnsController.getVisibleColumnIndex(e.value),a=this._columnsController.getVisibleColumnIndex(e.previousValue);this._editCellFromOptionChanged(r,a,t)}}_addRow(e){if(this.isCellEditMode()&&this.hasChanges()){var t=new Y.BH;return this.saveEditData().done(()=>{this.hasChanges()?t.reject("cancel"):this.addRow(e).done(t.resolve).fail(t.reject)}),t.promise()}return super._addRow(e)}editCell(e,t){return this._editCell({rowIndex:e,columnIndex:t})}_editCell(e){var r,t=new Y.BH;return this.executeOperation(t,()=>{r=this._editCellCore(e),(0,Y.gx)(r).done(t.resolve).fail(t.reject)}),void 0!==r?r:t.promise()}_editCellCore(e){var t=this._dataController,r=(0,m.$K)(e.oldColumnIndex)||(0,m.$K)(e.oldRowIndex),{columnIndex:a,rowIndex:n,column:s,item:o}=this._getNormalizedEditCellOptions(e),l={data:o?.data,cancel:!1,column:s};if(void 0!==o.key){if(s&&("data"===o.rowType||"detailAdaptive"===o.rowType)&&!o.removed&&this.isCellOrBatchEditMode()){if(!r&&this.isEditCell(n,a))return!0;var d=n+t.getRowIndexOffset();return(0,Y.gx)(this._beforeEditCell(n,a,o)).done(u=>{u||this._prepareEditCell(l,o,a,d)||this._processCanceledEditingCell()})}return!1}this._dataController.fireError("E1043")}_beforeEditCell(e,t,r){if(this.isCellEditMode()&&!r.isNewRow&&this.hasChanges()){var a=new Y.BH;return this.saveEditData().always(()=>{a.resolve(this.hasChanges())}),this.addDeferred(a),a}return!1}publicMethods(){return super.publicMethods().concat(["editCell","closeEditCell"])}_getNormalizedEditCellOptions(e){var u,{oldColumnIndex:t,oldRowIndex:r,columnIndex:a,rowIndex:n}=e,s=this._columnsController,o=s.getVisibleColumns(),d=this._dataController.items()[n];return u=(0,m.$K)(t)?o[t]:this._getEditColumn(),(0,m.$K)(r)||(r=this._getVisibleEditRowIndex()),(0,m.HD)(a)&&(a=s.columnOption(a,"index"),a=s.getVisibleIndex(a)),{oldColumn:u,columnIndex:a,oldRowIndex:r,rowIndex:n,column:o[a],item:d}}_prepareEditCell(e,t,r,a){var n;return t.isNewRow||(e.key=t.key),!this._isEditingStart(e)&&(this._pageIndex=this._dataController.pageIndex(),this._setEditRowKey(t.key),this._setEditColumnNameByIndex(r),e.column.showEditorAlways||this._addInternalData({key:t.key,oldData:null!==(n=t.oldData)&&void 0!==n?n:t.data}),!0)}closeEditCell(e,t){var r=(0,Y.gx)(),a=this._getVisibleEditRowIndex();if(this.isCellOrBatchEditMode()){var n=new Y.BH;r=new Y.BH,this.executeOperation(n,()=>{this._closeEditCellCore(e,a,t).always(r.resolve)})}return r.promise()}_closeEditCellCore(e,t,r){var a=this._dataController,n=new Y.BH,s=n.promise();if(this.isCellEditMode()&&this.hasChanges()){if(!r)return this.saveEditData().done(l=>{this.hasChanges()?n.resolve():this.closeEditCell(!!l).always(n.resolve)}),s}else if(this._resetEditRowKey(),this._resetEditColumnName(),t>=0){var o=[t];this._beforeCloseEditCellInBatchMode(o),e||a.updateItems({changeType:"update",rowIndices:o})}return n.resolve(),s}_resetModifiedClassCells(e){if(this.isBatchEditMode()){var t=this._columnsController.getVisibleColumns().length;e.forEach(r=>{for(var{key:a}=r,n=this._dataController.getRowIndexByKey(a),s=0;s<t;s++){var o=this._rowsView._getCellElement(n,s);o?.removeClass("dx-cell-modified")}})}}_prepareChange(e,t,r){var a=(0,b.Z)(e.cellElement);return this.isBatchEditMode()&&void 0!==e.key&&this._applyModified(a,e),super._prepareChange(e,t,r)}_cancelSaving(e){var t=this._dataController;this.isCellOrBatchEditMode()&&(this.isBatchEditMode()&&this._resetEditIndices(),t.updateItems()),super._cancelSaving(e)}optionChanged(e){var{fullName:t}=e;"editing"===e.name&&t===ms?(this._handleEditColumnNameChange(e),e.handled=!0):super.optionChanged(e)}_editCellFromOptionChanged(e,t,r){var a=this._columnsController.getVisibleColumns();e>-1&&(0,J.g0)(()=>{this._repaintEditCell(a[e],a[t],r)})}_handleEditRowKeyChange(e){var t;if(this.isCellOrBatchEditMode()){var r=this._getVisibleEditColumnIndex(),a=this._getEditRowIndexCorrection(),n=this._dataController.getRowIndexByKey(e.previousValue)+a;(0,m.$K)(e.value)&&e.value!==e.previousValue&&(null===(t=this._editCellFromOptionChanged)||void 0===t||t.call(this,r,r,n))}else super._handleEditRowKeyChange(e)}deleteRow(e){if(this.isCellEditMode()&&this.isEditing()){var{isNewRow:t}=this._dataController.items()[e],r=this._dataController.getKeyByRowIndex(e);this.closeEditCell(null,t).always(()=>{e=this._dataController.getRowIndexByKey(r),this._checkAndDeleteRow(e)})}else super.deleteRow(e)}_checkAndDeleteRow(e){this.isBatchEditMode()?this._deleteRowCore(e):super._checkAndDeleteRow(e)}_refreshCore(e){var{isPageChanged:t}=e??{},r=this.isBatchEditMode()||t&&"virtual"!==this.option("scrolling.mode");this.isCellOrBatchEditMode()?r&&(this._resetEditColumnName(),this._resetEditRowKey()):super._refreshCore(e)}_allowRowAdding(e){return!!this.isBatchEditMode()||super._allowRowAdding(e)}_afterDeleteRow(e,t){var r=this._dataController;return this.isBatchEditMode()?(r.updateItems({changeType:"update",rowIndices:[t,e]}),(new Y.BH).resolve()):super._afterDeleteRow(e,t)}_updateEditRow(e,t,r){this.isCellOrBatchEditMode()?this._updateRowImmediately(e,t,r):super._updateEditRow(e,t,r)}_isDefaultButtonVisible(e,t){if(this.isCellOrBatchEditMode()){var r=this.isBatchEditMode();switch(e.name){case"save":case"cancel":case"edit":return!1;case"delete":return super._isDefaultButtonVisible(e,t)&&(!r||!t.row.removed);case"undelete":return r&&this.allowDeleting(t)&&t.row.removed;default:return super._isDefaultButtonVisible(e,t)}}return super._isDefaultButtonVisible(e,t)}_isRowDeleteAllowed(){return super._isRowDeleteAllowed()||this.isBatchEditMode()}_beforeEndSaving(e){var t;this.isCellEditMode()?"update"!==(null===(t=e[0])||void 0===t?void 0:t.type)&&super._beforeEndSaving(e):(this.isBatchEditMode()&&this._resetModifiedClassCells(e),super._beforeEndSaving(e))}prepareEditButtons(e){var t,r=null!==(t=this.option("editing"))&&void 0!==t?t:{},a=super.prepareEditButtons(e);return(r.allowUpdating||r.allowAdding||r.allowDeleting)&&this.isBatchEditMode()&&(a.push(this.prepareButtonItem(e,"save","saveEditData",21)),a.push(this.prepareButtonItem(e,"revert","cancelEditData",22))),a}_saveEditDataInner(){var n,e=this._dataController.getVisibleRows()[this.getEditRowIndex()],t=this._getEditColumn(),r=t?.showEditorAlways;return this.isCellEditMode()&&!e?.isNewRow&&r&&(n=new Y.BH,this.addDeferred(n)),super._saveEditDataInner().always(n?.resolve)}_applyChange(e,t,r){var a=this.isCellEditMode()&&e.row&&!e.row.isNewRow,{showEditorAlways:n}=e.column,s=e.column.setCellValue!==e.column.defaultSetCellValue;return n&&!r&&a&&this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex)?(this._focusEditingCell(),void this._updateEditRow(e.row,!0,s)):super._applyChange(e,t,r)}_applyChangeCore(e,t){var{showEditorAlways:r}=e.column,a=this.isCellEditMode()&&e.row&&!e.row.isNewRow;if(r&&!t){if(a)return this._setEditRowKey(e.row.key,!0),this._setEditColumnNameByIndex(e.columnIndex,!0),this.saveEditData();if(this.isBatchEditMode())return t=this._needUpdateRow(e.column),super._applyChangeCore(e,t)}return super._applyChangeCore(e,t)}_processDataItemCore(e,t,r,a,n){var{data:s,type:o}=t;this.isBatchEditMode()&&o===tn&&(e.data=(0,ar.FL)(e.data,s)),super._processDataItemCore(e,t,r,a,n)}_processRemoveCore(e,t,r){if(!this.isBatchEditMode()||r)return super._processRemoveCore(e,t,r)}_processRemoveIfError(e,t){if(!this.isBatchEditMode())return super._processRemoveIfError(e,t)}_beforeFocusElementInRow(e){super._beforeFocusElementInRow(e);var t=e>=0?e:0,r=this.getFirstEditableColumnIndex();r>=0&&this.editCell(t,r)}}},views:{rowsView:i=>class extends i{_createTable(){var e=super._createTable.apply(this,arguments),t=this._editingController;return t.isCellOrBatchEditMode()&&this.option("editing.allowUpdating")&&k.Z.on(e,(0,ce.V4)(lo.Z.name,"dxDataGridRowsView"),"td:not(.".concat(nh,")"),this.createAction(()=>{t.isEditing()&&t.closeEditCell()})),e}_createRow(e){var t=super._createRow.apply(this,arguments);if(e){var a=!!e.removed;this._editingController.isBatchEditMode()&&a&&t.addClass("dx-row-removed")}return t}},headerPanel:i=>class extends i{isVisible(){var e=this._editingController.option("editing");return super.isVisible()||e&&(e.allowUpdating||e.allowDeleting)&&e.mode===Cs}}}}};He.registerModule("editingCellBased",N3);var py="invalid",h_="revert-tooltip",fy="dx-invalid-message",_y="dxInvalidMessage",c_="invalid-message",vy="dx-invalid-message-always",gy="dxRevertButton",my="validator",p_="dx-pending-indicator",Cy="dx-validation-pending",by="content",wy="__DX_INSERT_INDEX__",Sy="row",hh="batch",So="cell",yy=["popup","form"],ad="insert",nd="cancel",sd=function(i){return(0,m.$K)(i)&&i!==nd},xy=function(i,e){return void 0!==i||void 0===i&&e&&!e.isNewRow},X3={defaultOptions:()=>({editing:{texts:{validationCancelChanges:ae.Z.format("dxDataGrid-validationCancelChanges")}}}),controllers:{validating:class $3 extends Nt.Controller{constructor(){super(...arguments),this._isValidationInProgress=!1,this._disableApplyValidationResults=!1}init(){this._editingController=this.getController("editing"),this._editorFactoryController=this.getController("editorFactory"),this._columnsController=this.getController("columns"),this.createAction("onRowValidating"),this._validationState||this.initValidationState()}initValidationState(){this._validationState=[],this._validationStateCache={}}_rowIsValidated(e){var t=this._getValidationData(e?.key);return!!t&&!!t.validated}_getValidationData(e,t){var n,r=(0,J.k3)(e),a=(0,m.Kn)(r);return!(n=a?this._validationState.filter(s=>(0,J.bY)(s.key,e))[0]:this._validationStateCache[r])&&t&&(this._validationState.push(n={key:e,isValid:!0}),a||(this._validationStateCache[r]=n)),n}_getBrokenRules(e,t){return t?t.brokenRules||t.brokenRule&&[t.brokenRule]:e.brokenRules||[]}_rowValidating(e,t){var r=new Y.BH,a=this._editingController.getChangeByKey(e?.key),n=this._getBrokenRules(e,t),o={brokenRules:n,isValid:t?t.isValid:e.isValid,key:a.key,newData:a.data,oldData:this._editingController._getOldData(a.key),promise:null,errorText:this.getHiddenValidatorsErrorText(n)};return this.executeAction("onRowValidating",o),(0,Y.gx)((0,Y.p4)(o.promise)).always(()=>{e.isValid=o.isValid,e.errorText=o.errorText,r.resolve(o)}),r.promise()}getHiddenValidatorsErrorText(e){var t=[];return(0,j.S6)(e,(r,a)=>{var{column:n}=a,s=n&&void 0!==n.groupIndex&&!n.showWhenGrouped,o=n&&n.visible;!a.validator.$element().parent().length&&(!o||s)&&t.push(a.message)}),t.join(", ")}validate(e){var t=!0,r=this._editingController,a=new Y.BH,n=[],s=r.getEditMode();if(e=e||s===Sy,this._isValidationInProgress)return a.resolve(!1).promise();if(this._isValidationInProgress=!0,e){r.addDeferred(a);var o=r.getChanges();(0,j.S6)(o,(d,u)=>{var{type:c,key:f}=u;if("remove"!==c){var p=this._getValidationData(f,!0),g=this.validateGroup(p);n.push(g),g.done(w=>{p.validated=!0,t=t&&w.isValid})}})}else if(this._currentCellValidator){var l=this.validateGroup(this._currentCellValidator._findGroup());n.push(l),l.done(d=>{t=d.isValid})}return(0,Y.gx)(...n).done(()=>{this._isValidationInProgress=!1,a.resolve(t)}),a.promise()}validateGroup(e){var a,t=new Y.BH,r=e&&Xt.Z.getGroupConfig(e);return r?.validators.length&&(this.resetRowValidationResults(e),a=Xt.Z.validateGroup(e)),(0,Y.gx)(a?.complete||a).done(n=>{(0,Y.gx)(this._rowValidating(e,n)).done(t.resolve)}),t.promise()}isRowDataModified(e){return!(0,m.Qr)(e.data)}updateValidationState(e){var t=this._editingController.getEditMode(),{key:r}=e,a=this._getValidationData(r,!0);if(yy.includes(t))a.isValid=!0;else{if(e.type===ad&&!this.isRowDataModified(e))return void(a.isValid=!0);if(this.setDisableApplyValidationResults(!0),Xt.Z.getGroupConfig(a)){var s=Xt.Z.validateGroup(a);(0,Y.gx)(s.complete||s).done(o=>{a.isValid=o.isValid,a.brokenRules=o.brokenRules})}else(!a.brokenRules||!a.brokenRules.length)&&(a.isValid=!0);this.setDisableApplyValidationResults(!1)}}setValidator(e){this._currentCellValidator=e}renderCellPendingIndicator(e){var t=e.find(".".concat(p_));if(!t.length){var r=e;t=(0,b.Z)("<div>").appendTo(r).addClass(p_),this._createComponent(t,jr.Z),e.addClass(Cy)}}disposeCellPendingIndicator(e){var t=e.find(".".concat(p_));if(t.length){var r=jr.Z.getInstance(t);r&&(r.dispose(),r.$element().remove()),e.removeClass(Cy)}}validationStatusChanged(e){var{validator:t}=e,r=t.option("validationGroup"),{column:a}=t.option("dataGetter")();this.updateCellValidationResult({rowKey:r.key,columnIndex:a.index,validationResult:e})}validatorInitialized(e){e.component.on("validating",this.validationStatusChanged.bind(this)),e.component.on("validated",this.validationStatusChanged.bind(this))}validatorDisposing(e){var t=e.component,r=t.option("validationGroup"),{column:a}=t.option("dataGetter")(),n=this.getCellValidationResult({rowKey:r?.key,columnIndex:a.index});sd(n)&&"pending"===n.status&&this.cancelCellValidationResult({change:r,columnIndex:a.index})}applyValidationResult(e,t){var{validator:r}=t,a=r.option("validationGroup"),{column:n}=r.option("dataGetter")();if(t.brokenRules&&t.brokenRules.forEach(u=>{u.columnIndex=n.index,u.column=n}),e){var s=this.getCellValidationResult({rowKey:a.key,columnIndex:n.index}),o=sd(s)&&s.disabledPendingId===t.id;if(this._disableApplyValidationResults||o)return;if("invalid"===t.status){var l=e.find(":focus");(0,Gu.si)(l)||(k.Z.trigger(l,"focus"),k.Z.trigger(l,Bt.Z.down))}var d=!n.editCellTemplate&&this._editorFactoryController.getEditorInstance(e);"pending"===t.status?d?d.option("validationStatus","pending"):this.renderCellPendingIndicator(e):d?d.option("validationStatus","valid"):this.disposeCellPendingIndicator(e),e.toggleClass(this.addWidgetPrefix(py),"invalid"===t.status)}}_syncInternalEditingData(e){var t,r=this._editingController,a=r.getChangeByKey(e.key),n=r._getOldData(e.key),s=null===(t=e.row)||void 0===t?void 0:t.oldData;a&&s&&!n&&r._addInternalData({key:e.key,oldData:s})}createValidator(e,t){var r,a,n,s=this._editingController,{column:o}=e,{showEditorAlways:l}=o;if(!(0,m.$K)(o.command)&&o.validationRules&&Array.isArray(o.validationRules)&&o.validationRules.length){var u=s.getIndexByKey(e.key,s.getChanges())>-1;if(!u){l||(l=((null===(r=this._columnsController)||void 0===r?void 0:r.getVisibleColumns())||[]).some(q=>q.showEditorAlways));var f=(0,J.bY)(this.option("editing.editRowKey"),e.key),p=s.isCellOrBatchEditMode()&&s.allowUpdating({row:e.row});u=f||p&&l,p&&l&&s._addInternalData({key:e.key,oldData:null!==(n=null===(a=e.row)||void 0===a?void 0:a.oldData)&&void 0!==n?n:e.data})}if(u){if(t&&!t.length)return void Rt.Z.log("E1050");this._syncInternalEditingData(e);var g=this._getValidationData(e.key,!0),w=()=>{var q=s.getChangeByKey(g?.key),ee=o.calculateCellValue(q?.data||{});return void 0!==ee?ee:e.value},x=t&&t.hasClass("dx-widget");t&&t.addClass(this.addWidgetPrefix(my));var y=new l_(t||(0,b.Z)("<div>"),{name:o.caption,validationRules:(0,N.l)(!0,[],o.validationRules),validationGroup:g,adapter:x?null:{getValue:w,applyValidationResults:q=>{this.applyValidationResult(t,q)}},dataGetter(){var q=g?.key,ee=s.getChangeByKey(q),X=s._getOldData(q);return{data:(0,ar.FL)(X,ee?.data),column:o}},onInitialized:this.validatorInitialized.bind(this),onDisposing:this.validatorDisposing.bind(this)});if(x){var E=y.option("adapter");if(E){var V=E.bypass,F=()=>e.row.isNewRow&&!this._isValidationInProgress&&!s.isCellModified(e);E.getValue=w,E.validationRequestsCallbacks=[],E.bypass=()=>V.call(E)||F()}}return y}}}setDisableApplyValidationResults(e){this._disableApplyValidationResults=e}getDisableApplyValidationResults(){return this._disableApplyValidationResults}isCurrentValidatorProcessing(e){var{rowKey:t,columnIndex:r}=e;return this._currentCellValidator&&(0,J.bY)(this._currentCellValidator.option("validationGroup").key,t)&&this._currentCellValidator.option("dataGetter")().column.index===r}validateCell(e){var t={rowKey:e.option("validationGroup").key,columnIndex:e.option("dataGetter")().column.index,validationResult:null},r=this.getCellValidationResult(t),a=sd(r),n=e.option("adapter");if(a){var s=n.getValue();(0,J.bY)(s,r.value)||(r=e.validate())}else r=e.validate();var o=new Y.BH;return a&&"pending"===r.status&&(this.updateCellValidationResult(t),n.applyValidationResults(r)),(0,Y.gx)(r.complete||r).done(l=>{a&&n.applyValidationResults(l),o.resolve(l)}),o.promise()}updateCellValidationResult(e){var{rowKey:t,columnIndex:r,validationResult:a}=e,n=this._getValidationData(t);if(n){var s;if(n.validationResults||(n.validationResults={}),a){if(s=(0,N.l)({},a),n.validationResults[r]=s,"pending"===a.status&&(this._editingController.getEditMode()===So&&(s.deferred=new Y.BH,s.complete.always(()=>{s.deferred.resolve()}),this._editingController.addDeferred(s.deferred)),this._disableApplyValidationResults))return void(s.disabledPendingId=a.id)}else s=n.validationResults[r];s&&s.disabledPendingId&&delete s.disabledPendingId}}getCellValidationResult(e){var a,{rowKey:t,columnIndex:r}=e,n=this._getValidationData(t,!0);return null===(a=n?.validationResults)||void 0===a?void 0:a[r]}removeCellValidationResult(e){var{change:t,columnIndex:r}=e,a=this._getValidationData(t?.key);a&&a.validationResults&&(this.cancelCellValidationResult({change:t,columnIndex:r}),delete a.validationResults[r])}cancelCellValidationResult(e){var{change:t,columnIndex:r}=e,a=this._getValidationData(t.key);if(t&&a.validationResults){var n=a.validationResults[r];n&&(n.deferred&&n.deferred.reject(nd),a.validationResults[r]=nd)}}resetRowValidationResults(e){e&&(e.validationResults&&delete e.validationResults,delete e.validated)}isInvalidCell(e){var{rowKey:t,columnIndex:r}=e,a=this.getCellValidationResult({rowKey:t,columnIndex:r});return sd(a)&&"invalid"===a.status}getCellValidator(e){var{rowKey:t,columnIndex:r}=e,a=this._getValidationData(t),n=a&&Xt.Z.getGroupConfig(a),s=n&&n.validators;return s&&s.filter(o=>{var{column:l}=o.option("dataGetter")();return!!l&&l.index===r})[0]}setCellValidationStatus(e){var t=this.getCellValidationResult({rowKey:e.key,columnIndex:e.column.index});(0,m.$K)(t)?e.validationStatus=t!==nd?t.status:nd:delete e.validationStatus}}},extenders:{controllers:{editing:i=>class extends i{processDataItemTreeListHack(e){super.processDataItem.apply(this,arguments)}processItemsTreeListHack(e,t){return super.processItems.apply(this,arguments)}_addChange(e){var t=super._addChange.apply(this,arguments);return t&&"remove"!==e.type&&this._validatingController.updateValidationState(t),t}_handleChangesChange(e){super._handleChangesChange.apply(this,arguments),e.value.forEach(t=>{void 0===this._validatingController._getValidationData(t.key)&&this._validatingController.updateValidationState(t)})}_updateRowAndPageIndices(){var e=this,t=e.getView("rowsView").getTopVisibleItemIndex(),r=t;(0,j.S6)(e.getChanges(),(a,n)=>{var{key:s,type:o}=n,l=this._validatingController._getValidationData(s);l&&!l.isValid&&l.pageIndex!==e._pageIndex&&(l.pageIndex=e._pageIndex,l.rowIndex=o===ad?t:r,r++)})}_getValidationGroupsInForm(e){return{validationGroup:this._validatingController._getValidationData(e.key,!0)}}_validateEditFormAfterUpdate(e,t){t&&this._editForm&&this._editForm.validate(),super._validateEditFormAfterUpdate.apply(this,arguments)}_prepareEditCell(e){var t=super._prepareEditCell.apply(this,arguments);return t&&e.column.showEditorAlways&&this._validatingController.updateValidationState({key:e.key}),t}processItems(e,t){var r=this.getChanges(),a=(s,o)=>{var l=-1,d=s.type===ad,{key:u}=s;return(0,j.S6)(o,(c,f)=>{if((0,J.bY)(u,d?f.key:this._dataController.keyOf(f)))return l=c,!1}),l},n=(e=super.processItems(e,t)).length;return this.getEditMode()===hh&&"prepend"!==t&&"append"!==t&&r.forEach(s=>{var{key:o}=s,l=this._validatingController._getValidationData(o);l&&s.type&&l.pageIndex===this._pageIndex&&s?.pageIndex!==this._pageIndex&&function(d,u){var c={key:d.key};if(!(a(d,e)>=0)){u.rowIndex=u.rowIndex>n?u.rowIndex%n:u.rowIndex;var{rowIndex:p}=u;c[wy]=1,e.splice(p,0,c)}}(s,l)}),e}processDataItem(e){var t=e.data[wy],r=t?e.data.key:e.key;if(this.getEditMode()===hh&&t&&r){var n=this.getChanges(),s=Te.getIndexByKey(r,n);if(s>=0){var o=n[s];if(o.type!==ad){var l=this._getOldData(o.key);e.data=(0,N.l)(!0,{},l,o.data),e.key=r}}}super.processDataItem.apply(this,arguments)}_createInvisibleColumnValidators(e){var t=this,r=this._columnsController.getColumns(),a=this._columnsController.getInvisibleColumns().filter(l=>!l.isBand),n=this._columnsController.getGroupColumns().filter(l=>!l.showWhenGrouped&&-1===a.indexOf(l)),s=[],o=(l,d)=>this._dataController.getRowIndexByKey(d)>=0&&a.indexOf(l)<0;return a.push(...n),yy.includes(this.getEditMode())||(0,j.S6)(r,(l,d)=>{e.forEach(u=>{var c;if(!o(d,u.key)){if(u.type===ad)c=u.data;else if("update"===u.type){var f=t._getOldData(u.key);if(!(0,m.$K)(f))return;c=(0,ar.FL)(f,u.data)}if(c){var p=this._validatingController.createValidator({column:d,key:u.key,value:d.calculateCellValue(c)});p&&s.push(p)}}})}),function(){s.forEach(l=>{l.dispose()})}}_beforeSaveEditData(e,t){var r=super._beforeSaveEditData.apply(this,arguments),a=this._validatingController._getValidationData(e?.key);if(e)r=r||!("remove"===e.type||a.isValid);else{var s=this._createInvisibleColumnValidators(this.getChanges());r=new Y.BH,this.executeOperation(r,()=>{this._validatingController.validate(!0).done(o=>{switch(s(),this._updateRowAndPageIndices(),this.getEditMode()){case So:o||this._focusEditingCell();break;case hh:o||(this._resetEditRowKey(),this._resetEditColumnName(),this._dataController.updateItems())}r.resolve(!o)})})}return r.promise?r.promise():r}_beforeEditCell(e,t,r){var a=super._beforeEditCell(e,t,r);if(this.getEditMode()===So){var n=this._rowsView._getCellElement(e,t),s=n&&n.data("dxValidator"),o=n&&n.closest(".dx-row").data("options"),l=s&&s.option("adapter").getValue();if(s&&xy(l,o)){var d=new Y.BH;return(0,Y.gx)(this._validatingController.validateCell(s),a).done((u,c)=>{d.resolve("valid"===u.status&&c)}),d.promise()}if(!s)return a}return!1}_afterSaveEditData(e){var t,r=this.getEditMode()===So;if((0,j.S6)(this.getChanges(),(d,u)=>{var c=this._showErrorRow(u);t=t||c}),t){var a=this._rowsView.getScrollable();a&&(a.update(),a.scrollToElement(t))}if(e&&r&&this._needUpdateRow()){var n=this.getEditRowIndex();this._dataController.updateItems({changeType:"update",rowIndices:[n]}),this._focusEditingCell()}else if(!e){var s=!0;r&&(s=!(this._columnsController.getColumns().filter(d=>{var u;return d.showEditorAlways&&(null===(u=d.validationRules)||void 0===u?void 0:u.length)>0}).length>0)),s&&this._validatingController.initValidationState()}}_handleDataChanged(e){var t=this._validatingController._validationState;"standard"===this.option("scrolling.mode")&&this.resetRowAndPageIndices(),"prepend"===e.changeType&&(0,j.S6)(t,(r,a)=>{a.rowIndex+=e.items.length}),super._handleDataChanged(e)}resetRowAndPageIndices(){(0,j.S6)(this._validatingController._validationState,(t,r)=>{r.pageIndex!==this._pageIndex&&(delete r.pageIndex,delete r.rowIndex)})}_beforeCancelEditData(){this._validatingController.initValidationState(),super._beforeCancelEditData()}_showErrorRow(e){var t,r=this._dataController.items(),a=this.getIndexByKey(e.key,r),n=this._validatingController._getValidationData(e.key);if(!n?.isValid&&n?.errorText&&a>=0)return t=this.getPopupContent(),this._errorHandlingController&&this._errorHandlingController.renderErrorRow(n?.errorText,a,t)}updateFieldValue(e){var t=new Y.BH;return this._validatingController.removeCellValidationResult({change:this.getChangeByKey(e.key),columnIndex:e.column.index}),super.updateFieldValue.apply(this,arguments).done(()=>{var r=this._validatingController.getCellValidator({rowKey:e.key,columnIndex:e.column.index});(0,Y.gx)(r&&this._validatingController.validateCell(r)).done(a=>{this._editorFactoryController.refocus(),t.resolve(a)})}),t.promise()}highlightDataCell(e,t){super.highlightDataCell.apply(this,arguments),this._validatingController.setCellValidationStatus(t);var r=!!t.setValue,a=this.isCellModified(t),n=(0,m.$K)(t.validationStatus);if(a&&t.column.setCellValue||r&&!a&&!t.row.isNewRow&&n){var o=e.data("dxValidator");o&&(0,Y.gx)(this._validatingController.validateCell(o)).done(()=>{this._validatingController.setCellValidationStatus(t)})}}getChangeByKey(e){var t=this.getChanges();return t[Te.getIndexByKey(e,t)]}isCellModified(e){var t=super.isCellModified(e),r=this.getChangeByKey(e.key),a=!!e.row&&this._validatingController.isInvalidCell({rowKey:e.key,columnIndex:e.column.index});return t||this._validatingController._rowIsValidated(r)&&a}},editorFactory:i=>class extends i{_showRevertButton(e){var t,r=null===(t=this._revertTooltip)||void 0===t?void 0:t.$element();if(!e||!e.length)return r?.remove(),void(this._revertTooltip=void 0);if(!e.find(r).length){var a=e.closest(".".concat(this.addWidgetPrefix(by))).parent(),n=this.addWidgetPrefix(h_);r?.remove(),r=(0,b.Z)("<div>").addClass(n).appendTo(e);var s={animation:null,visible:!0,width:"auto",height:"auto",shading:!1,container:a,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:n},contentTemplate:()=>{var o=(0,b.Z)("<div>").addClass("dx-revert-button"),l={icon:"revert",hint:this.option("editing.texts.validationCancelChanges"),elementAttr:{id:gy,"aria-label":ae.Z.format("dxDataGrid-ariaRevertButton")},onClick:()=>{this._editingController.cancelEditData()}};return new pr.Z(o,l).$element()},position:{my:"left top",at:"right top",offset:"1 0",collision:"flip",boundaryOffset:"0 0",boundary:this._rowsView.element(),of:e},onPositioned:this._positionedHandler.bind(this)};this._revertTooltip=new ss.Z(r,s)}}_hideFixedGroupCell(e,t){var r,a,n=this._rowsView.isFixedColumns(),s=this._editingController.isFormOrPopupEditMode();if(n&&!s){var o=e.closest(".dx-row").next().data("options");o&&"group"===o.rowType&&(r=(0,b.Z)(this._rowsView.getRowElement(o.rowIndex)).last(),(a=r.find(".".concat("dx-group-cell"))).length&&"hidden"!==a.get(0).style.visibility&&(a.css("visibility","hidden"),t.onDisposing=function(){a.css("visibility","")}))}}_positionedHandler(e,t){if(!e.component.__skipPositionProcessing){var r=(0,b.Z)(e.element).hasClass(this.addWidgetPrefix(h_)),a=!r&&this._rowsView.updateFreeSpaceRowHeight(),n=this._normalizeValidationMessagePositionAndMaxWidth(e,r,t);e.component.__skipPositionProcessing=!(!a&&!n),n?e.component.option(n):a&&e.component.repaint()}}_showValidationMessage(e,t,r){var a,n=e.find(".dx-dropdowneditor-overlay").data("dxPopup"),s=n&&n.option("visible"),o=s?"top right":"top ".concat(r),l=s?"top left":"bottom ".concat(r),u=(null===(a=this._columnsController.getFixedColumns())||void 0===a?void 0:a.length)>0?this.getView("rowsView").element():e.closest(".".concat(this.addWidgetPrefix(by))),c="";t&&t.forEach(w=>{c+=(c.length?"<br/>":"")+(0,ma.HZ)(w)});var f=this.addWidgetPrefix(c_);this._rowsView.element().find(".".concat(f)).remove();var p=(0,b.Z)("<div>").addClass(fy).addClass(vy).addClass(f).html(c).appendTo(e),g={container:u,shading:!1,width:"auto",height:"auto",visible:!0,animation:!1,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{id:_y,class:"".concat(fy," ").concat(vy," ").concat(f)},position:{collision:"flip",boundary:this._rowsView.element(),boundaryOffset:"0 0",offset:{x:0,y:!s&&ii.Z.mozilla?-1:0},my:o,at:l,of:e},onPositioned:w=>{this._positionedHandler(w,s),this._shiftValidationMessageIfNeed(w.component.$content(),e)}};this._hideFixedGroupCell(e,g),new ss.Z(p,g)}_hideValidationMessage(){var e,t=null===(e=this._rowsView.element())||void 0===e?void 0:e.find(this._getValidationMessagesSelector());t?.remove()}_normalizeValidationMessagePositionAndMaxWidth(e,t,r){var a=this._columnsController.getFixedColumns();if(a&&a.length){var n,s=!t&&function(i,e){var t=(0,b.Z)(e).closest("tr").index(),r=(0,b.Z)(i._rowsView.getRowElement(t)).first().children().filter(":not(.dx-hidden-cell)");return i._rowsView._getWidths(r).reduce((a,n)=>a+n,0)}(this,e.element),o=e.component.$content(),l=(0,oe.Y_)(o,!0),d=!t&&l>s,u=this._rowsView.getCellIndex((0,b.Z)(e.element).closest("td")),c=function(i){var e,t;return i.some((r,a)=>{if("transparent"===r.command)return e=0===a?-1:a,t=a===i.length-1?-1:a+r.colspan-1,!0}),{startColumnIndex:e,endColumnIndex:t}}(a);return t||u!==c.startColumnIndex&&!d?u===c.endColumnIndex&&(n={collision:"none flip",my:"top right",at:t||r?"top left":"bottom right"},t&&(n.offset="-1 0")):n={collision:"none flip",my:"top left",at:r?"top right":"bottom left"},n&&{position:n,maxWidth:d?s-2:void 0}}}_shiftValidationMessageIfNeed(e,t){var r=this._revertTooltip&&this._revertTooltip.$content();if(r){var a=e.offset(),n=r.offset();if(a.top===n.top&&a.left+(0,oe.dz)(e)>n.left){var s=(0,oe.dz)(r)+2;e.css("left",n.left<t.offset().left?-s:s)}}}_getRevertTooltipsSelector(){var e=this.addWidgetPrefix(h_);return".dx-editor-cell .".concat(e)}_getValidationMessagesSelector(){var e=this.addWidgetPrefix(c_);return".dx-editor-cell .".concat(e,", .dx-cell-modified .").concat(e)}loseFocus(e){e||this._validatingController.setValidator(null),super.loseFocus()}updateCellState(e,t,r){var a,n=e?.closest(this._getFocusCellSelector()),s=n?.is("td")?n:null,o=n?.closest(".dx-row").data("options"),l=o?this._editingController.getChangeByKey(o.key):null,d=s&&this._columnsController.getVisibleColumns()[s.index()],u=void 0!==(null===(a=l?.data)||void 0===a?void 0:a[d?.name])&&!this._editingController.isSaving(),c=[];if(this._editingController.getEditMode()===So&&("invalid"===t?.status||u?(this._showRevertButton(n),c.push(gy)):this._revertTooltip&&this._revertTooltip.$element().remove()),t&&"invalid"===t.status&&s&&d&&t&&t.brokenRules){var p=[];t.brokenRules.forEach(g=>{g.message&&p.push(g.message)}),p.length&&(this._showValidationMessage(n,p,d.alignment||"left"),c.push(_y))}this._updateAriaValidationAttributes(n,c),!r&&this._rowsView.element()&&this._rowsView.updateFreeSpaceRowHeight()}_updateAriaValidationAttributes(e,t){if(0!==t.length){var r=this._editingController.getEditMode();if([So,hh,Sy].includes(r)){var n=this._getCurrentFocusElement(e);n.attr("aria-labelledby",t.join(" ")),n.attr("aria-invalid",!0)}}}_getCurrentFocusElement(e){return this._editingController.isEditing()?e.find(Wf).first():e}focus(e,t){if(!arguments.length)return super.focus();if(this._hideValidationMessage(),e?.hasClass("dx-row")||e?.hasClass("dx-master-detail-cell"))return super.focus(e,t);var o,r=e?.closest(this._getFocusCellSelector()),a=r&&(r.data("dxValidator")||e.find(".".concat(this.addWidgetPrefix(my))).eq(0).data("dxValidator")),n=r&&r.closest(".dx-row").data("options"),s=n?this._editingController.getChangeByKey(n.key):null;if(a){this._validatingController.setValidator(a);var l=a.option("adapter").getValue();if(xy(l,n)||this._validatingController._rowIsValidated(s))return this._editingController.waitForDeferredOperations().done(()=>{0===e.closest("tr").length||(0,Y.gx)(this._validatingController.validateCell(a)).done(u=>{o=u;var{column:c}=o.validator.option("dataGetter")();s&&c&&!this._validatingController.isCurrentValidatorProcessing({rowKey:s.key,columnIndex:c.index})||(!(0,_t.dC)((0,_t.Vk)())&&"invalid"===o.status&&(t=!0),this.updateCellState(e,o,t),super.focus.call(this,e,t))})}),super.focus(e,t)}return this.updateCellState(e,o,t),super.focus(e,t)}getEditorInstance(e){var t=e.find(".dx-texteditor").eq(0);return Te.getWidgetInstance(t)}},data:i=>class extends i{_getValidationStatus(e){return(sd(e)?e.status:e)||"valid"}_isCellChanged(e,t,r,a,n){var s,o,l=null===(s=e.cells)||void 0===s?void 0:s[a],d=this._getValidationStatus({status:l?.validationStatus}),u=this._validatingController.getCellValidationResult({rowKey:e.key,columnIndex:a}),c=this._validatingController._getValidationData(e.key),f=this._getValidationStatus(u),p=JSON.stringify(t.modifiedValues)!==JSON.stringify(e.modifiedValues),g=d!==f&&p,w=(0,b.Z)(l?.cellElement).hasClass(this.addWidgetPrefix(py)),x=null===(o=l?.column.validationRules)||void 0===o?void 0:o.length;return!!(e.isEditing!==t.isEditing&&x||g||c.isValid&&w)||super._isCellChanged.apply(this,arguments)}}},views:{rowsView:i=>class extends i{updateFreeSpaceRowHeight(e){var t,r,a,n=this.element(),s=n&&n.find(".".concat(this.addWidgetPrefix(c_)," .dx-overlay-content"));if(super.updateFreeSpaceRowHeight(e),s&&s.length&&(t=this._getRowElements(),(r=(a=this._getFreeSpaceRowElements(e)).first())&&1===t.length&&(!r.is(":visible")||(0,oe.zp)(s)>(0,oe.zp)(r))))return a.show(),(0,oe.QQ)(a,(0,oe.zp)(s)),!0}_formItemPrepared(e,t){super._formItemPrepared.apply(this,arguments),(0,J.Su)(()=>{var r=t.find(".dx-widget").first();r.length&&!r.children().length||this._validatingController.createValidator(e,r)})}_cellPrepared(e,t){this._editingController.isFormOrPopupEditMode()||this._validatingController.createValidator(t,e),super._cellPrepared.apply(this,arguments)}_restoreErrorRow(e){this._editingController&&this._editingController.hasChanges()&&this._getRowElements(e).each((t,r)=>{var a=(0,b.Z)(r).data("options");if(a){var n=this._editingController.getChangeByKey(a.key);n&&this._editingController._showErrorRow(n)}})}}}}};He.registerModule("validating",X3);var f_="scrolling.legacyMode",Ey=i=>i.option("scrolling.loadTwoPagesOnStart")||i._controller.isVirtual()||i._controller.getViewportItemIndex()>0,ch=i=>i._cache.length?i._cache[0].pageIndex:-1,__=i=>i._cache.length?i._cache[i._cache.length-1].pageIndex:-1,ph=(i,e,t)=>{i._isChangedFiring=!0,e(t),i._isChangedFiring=!1},Iy=(i,e,t)=>{if(i._isDelayChanged)return i._isDelayChanged=!1,ph(i,e,t),!0},fh=(i,e)=>{var t=i.option("scrolling.preloadEnabled"),r=(i=>{var e=i._dataOptions.pageSize();if(i.option("scrolling.preventPreload"))return 0;var r=i._controller.viewportSize();if(i._controller.isVirtualMode()&&i.option("scrolling.removeInvisiblePages")){r=0;for(var a=i._controller.viewportSize()*i._controller.viewportItemSize(),n=i._controller.getContentOffset(),s=i._controller.getViewportPosition(),o=i._controller.virtualItemsCount(),l=i._dataOptions.totalItemsCount(),d=o.begin;d<l&&!(n>=s+a);d++)(n+=i._controller.getItemSizes()[d]||i._controller.viewportItemSize())>=s&&r++}return e&&r>0?Math.ceil(r/e):1})(i),a=i._controller.isAppendMode();return r&&(e?r=t?1:0:(t&&r++,(a||!Ey(i))&&r--)),r},Ty=(i,e,t,r,a)=>{var n=i._dataOptions,s=n.items().slice(),o=(0,m.Kn)(t)?t:void 0,l="prepend"===t,d=n.viewportItems();t&&(0,m.HD)(t)&&!i._isDelayChanged&&(o={changeType:t,items:s},a&&(o.removeCount=a.itemsCount,o.removeCount&&n.correctCount&&(o.removeCount=n.correctCount(d,o.removeCount,l))));var u=a?a.itemsLength:0;u&&n.correctCount&&(u=n.correctCount(d,u,l)),"append"===t?(d.push.apply(d,s),a&&d.splice(0,u)):l?(d.unshift.apply(d,s),a&&d.splice(-u)):i._dataOptions.viewportItems(s),n.updateLoading(),i._lastPageIndex=i.pageIndex(),i._isDelayChanged=r,r||ph(i,e,o)};class t4{constructor(e,t){this._dataOptions=t,this._controller=e,this._pageIndex=this._lastPageIndex=t.pageIndex(),this._cache=[],this._loadingPageIndexes={}}option(){return this._controller.option.apply(this._controller,arguments)}viewportItemIndexChanged(e){var o,t=this._dataOptions.pageSize(),r=this._dataOptions.pageCount(),a=this._controller.isVirtualMode(),n=this._controller.isAppendMode(),s=this._dataOptions.totalItemsCount();if(t&&(a||n)&&s>=0){var l=this._controller.viewportSize();if(l&&e+l>=s&&!this._controller.isVirtual())if(this._dataOptions.hasKnownLastPage()){var d=s%t;(o=r-1)>0&&d>0&&d<l&&o--}else o=r;else{o=Math.floor(e/t);var u=r-1;o=Math.max(o,0),o=Math.min(o,u)}return this.pageIndex(o),this.load()}}pageIndex(e){var t=this._controller.isVirtualMode(),r=this._controller.isAppendMode();return!1!==this.option(f_)&&(t||r)?(void 0!==e&&(this._pageIndex=e),this._pageIndex):this._dataOptions.pageIndex(e)}beginPageIndex(e){var t=ch(this);return t<0&&(t=void 0!==e?e:this.pageIndex()),t}endPageIndex(){var e=__(this);return e>0?e:this._lastPageIndex}pageSize(){return this._dataOptions.pageSize()}load(){var t,e=this._dataOptions,r=this._controller.isVirtualMode(),a=this._controller.isAppendMode();if(!1!==this.option(f_)&&(r||a)){var n=(i=>{var e=-1,t=ch(i),r=i._dataOptions;return t<0?e=i._pageIndex:i._cache[i._pageIndex-t]?t>=0&&i._controller.viewportSize()>=0&&(t>0&&(__(i)+1===r.pageCount()&&i._cache.length<fh(i)+1||i._pageIndex===t&&fh(i,!0))&&(e=t-1),e<0&&t+i._cache.length<=i._pageIndex+fh(i)&&(e=t+i._cache.length)):e=i._pageIndex,i._loadingPageIndexes[e]&&(e=-1),e})(this);if(n>=0){var s=((i,e)=>{var t=i._dataOptions;if(e===i.pageIndex()||!t.isLoading()&&e<t.pageCount()||!t.hasKnownLastPage()&&e===t.pageCount())return t.pageIndex(e),i._loadingPageIndexes[e]=!0,(0,Y.gx)(t.load()).always(()=>{i._loadingPageIndexes[e]=!1})})(this,n);s&&(t=new Y.BH,s.done(()=>{var o=this._delayDeferred;o?o.done(t.resolve).fail(t.reject):t.resolve()}).fail(t.reject),e.updateLoading())}}else t=e.load();return!t&&this._lastPageIndex!==this.pageIndex()&&this._dataOptions.onChanged({changeType:"pageIndex"}),t||(new Y.BH).resolve()}loadIfNeed(){var e=this._controller.isVirtualMode(),t=this._controller.isAppendMode();if((e||t)&&!this._dataOptions.isLoading()&&(!this._isChangedFiring||this._controller.isVirtual())){var r=this._controller.getViewportPosition();r>0?this._controller._setViewportPositionCore(r):this.load()}}handleDataChanged(e,t){var n,s,r=this._dataOptions,a=this._cache.length,o=this._controller.isVirtualMode(),l=this._controller.isAppendMode();if(t&&t.changes)ph(this,e,t);else if(!1!==this.option(f_)&&(o||l)){var d=ch(this);if(d>=0&&(o&&d+this._cache.length!==r.pageIndex()&&d-1!==r.pageIndex()&&(a=0,this._cache=[]),l))if(0===r.pageIndex())this._cache=[];else if(r.pageIndex()<__(this))return void ph(this,e,{changeType:"append",items:[]});var c,u={pageIndex:r.pageIndex(),itemsLength:r.items(!0).length,itemsCount:this.itemsCount(!0)};this.option("scrolling.removeInvisiblePages")&&o?s=this._cache.length>Math.max(fh(this)+(this.option("scrolling.preloadEnabled")?1:0),2):Iy(this,e,{isDelayed:!0}),d===r.pageIndex()+1?(s&&(c=this._cache.pop()),n="prepend",this._cache.unshift(u)):(s&&(c=this._cache.shift()),n="append",this._cache.push(u));var f=o&&0===a&&Ey(this);Ty(this,e,this._cache.length>1?n:void 0,f,c),this._delayDeferred=this.load().done(()=>{Iy(this,e)&&this.load()})}else Ty(this,e,t)}getDelayDeferred(){return this._delayDeferred}itemsCount(e){var t=0,r=this._controller.isVirtualMode();return!e&&r?this._cache.forEach(a=>{t+=a.itemsCount}):t=this._dataOptions.itemsCount(),t}virtualItemsCount(){var e=ch(this);e<0&&(e=this._dataOptions.pageIndex());var t=e*this._dataOptions.pageSize(),r=this._cache.length*this._dataOptions.pageSize();return{begin:t,end:Math.max(0,this._dataOptions.totalItemsCount()-r-t)}}reset(){this._loadingPageIndexes={},this._cache=[]}}var Ay="virtual",_h="scrolling.legacyMode",Dy=i=>i.option("scrolling.mode")===Ay||i._isVirtual;function Oy(i,e,t){var r,a=[],n=[],s=[];function o(c){var f=c.element?c.$element():c,p=In.Z.offset(f);return p?c.scrollTop()-(p.top-i.offset().top):i.offset().top}var c,f,l={on(c,f,p){c.on("scroll",p)},off(c,f,p){c.off("scroll",p)}};function d(c){var y,f="#document"===c.get(0).nodeName,p=c.get(0).nodeType===(0,We.Jj)().Node.ELEMENT_NODE,g=c.data("dxScrollable"),w=l;if(g||(g=f&&(0,b.Z)((0,We.Jj)())||p&&"auto"===c.css("overflowY")&&c,w=k.Z,g)){var x=(y=g,function(){var E=y.scrollTop()-o(y);e(E=E>0?E:0)});w.on(g,"scroll",x),n.push(y=>{var E=o(g);y-E>=0&&g[g.scrollTo?"scrollTo":"scrollTop"](y+E)}),a.push(g),s.push(()=>{w.off(g,"scroll",x)})}}for(r=(t=t||i).parent();r.length;void 0,r=(0,b.Z)(null!==(f=(c=r).get(0).parentNode)&&void 0!==f?f:c.get(0).host))d(r);return{scrollTo(c){(0,j.S6)(n,(f,p)=>{p(c)})},dispose(){(0,j.S6)(s,(c,f)=>{f()})}}}class v_{constructor(e,t,r){this._dataOptions=t,this.component=e,this._viewportSize=!1===e.option(_h)?15:0,this._viewportItemSize=20,this._viewportItemIndex=0,this._position=0,this._isScrollingBack=!1,this._contentSize=0,this._itemSizes={},this._sizeRatio=1,this._isVirtual=r,this.positionChanged=(0,ri.Z)(),this._dataLoader=new t4(this,this._dataOptions)}getItemSizes(){return this._itemSizes}option(e,t){return this.component.option.apply(this.component,arguments)}isVirtual(){return this._isVirtual}virtualItemsCount(){if(Dy(this)){var e=this._dataOptions,t=e.totalItemsCount();if(!1===this.option(_h)&&-1!==t){var r=this.getViewportParams(),a=e.loadedOffset(),n=e.loadedItemCount(),s=Math.max(r.skip,a),o=Math.min(r.take,n);return{begin:s,end:Math.max(t-(s+o),0)}}return this._dataLoader.virtualItemsCount.apply(this._dataLoader,arguments)}}getScrollingTimeout(){var e,t=this.option("scrolling.renderAsync"),r=0;return(0,m.$K)(t)?t&&(r=null!==(e=this.option("scrolling.timeout"))&&void 0!==e?e:0):(r=Math.min(this.option("scrolling.timeout")||0,this._dataOptions.changingDuration()))<this.option("scrolling.renderingThreshold")&&(r=this.option("scrolling.minTimeout")||0),r}setViewportPosition(e){var t=new Y.BH,r=this.getScrollingTimeout();return clearTimeout(this._scrollTimeoutID),r>0?this._scrollTimeoutID=setTimeout(()=>{this._setViewportPositionCore(e),t.resolve()},r):(this._setViewportPositionCore(e),t.resolve()),t.promise()}getViewportPosition(){return this._position}getItemIndexByPosition(e,t,r){e=e??this._position;for(var a=this.getItemSize(),n=0,s=0,o=Object.keys(this._itemSizes).concat(-1),l=0;l<o.length&&n<e;l++){var d=parseInt(o[l]),u=(e-n)/a;if(d<0||s+u<d){s+=u,this._sizeRatio<1&&(0,m.$K)(t)&&(s=t+r/this._viewportItemSize);break}n+=(u=d-s)*a,s+=u;var c=this._itemSizes[d];s+=(n+=c)<e?1:(e-n+c)/c}return Math.round(50*s)/50}isScrollingBack(){return this._isScrollingBack}_setViewportPositionCore(e){var t=this._position||0;this._position=e,t!==this._position&&(this._isScrollingBack=this._position<t);var r=this.getItemIndexByPosition(),a=this.setViewportItemIndex(r);return this.positionChanged.fire(),a}setContentItemSizes(e){var t=this.virtualItemsCount();if(this._contentSize=e.reduce((n,s)=>n+s,0),t){e.forEach((n,s)=>{this._itemSizes[t.begin+s]=n});var r=(t.begin+t.end+this.itemsCount())*this._viewportItemSize,a=Te.getContentHeightLimit(ii.Z);this._sizeRatio=r>a?a/r:1}}getItemSize(){return this._viewportItemSize*this._sizeRatio}getItemOffset(e,t){var r=this.virtualItemsCount(),a=e;if(!r)return 0;var n=0,s=this._dataOptions.totalItemsCount();return Object.keys(this._itemSizes).forEach(o=>{a&&(t?o>=s-e:o<e)&&(n+=this._itemSizes[o],a--)}),Math.floor(n+a*this._viewportItemSize*this._sizeRatio)}getContentOffset(e){var t="end"===e,r=this.virtualItemsCount();return r?this.getItemOffset(t?r.end:r.begin,t):0}getVirtualContentSize(){return this.virtualItemsCount()?this.getContentOffset("begin")+this.getContentOffset("end")+this._contentSize:0}getViewportItemIndex(){return this._viewportItemIndex}setViewportItemIndex(e){if(this._viewportItemIndex=e,!1!==this.option(_h))return this._dataLoader.viewportItemIndexChanged.apply(this._dataLoader,arguments)}viewportItemSize(e){return void 0!==e&&(this._viewportItemSize=e),this._viewportItemSize}viewportSize(e){return void 0!==e&&(this._viewportSize=e),this._viewportSize}viewportHeight(e,t){var r=t??this._position,a=this.getItemIndexByPosition(r),n=this.getItemIndexByPosition(r+e,a,e);this.viewportSize(Math.ceil(n-a)),!(0,m.$K)(t)&&this._viewportItemIndex!==a&&this._setViewportPositionCore(r)}reset(e){this._dataLoader.reset(),e||(this._itemSizes={})}subscribeToWindowScrollEvents(e){this._windowScroll=this._windowScroll||Oy(e,t=>{this.viewportItemSize()&&this.setViewportPosition(t)})}dispose(){clearTimeout(this._scrollTimeoutID),this._windowScroll&&this._windowScroll.dispose(),this._windowScroll=null}scrollTo(e){this._windowScroll&&this._windowScroll.scrollTo(e)}isVirtualMode(){return Dy(this)}isAppendMode(){return(i=>"infinite"===i.option("scrolling.mode")&&!i._isVirtual)(this)}getViewportParams(){var e,t=this.option("scrolling.mode")===Ay,r=this._dataOptions.totalItemsCount(),n=this._dataOptions.hasKnownLastPage()&&this._viewportItemIndex>r?r:this._viewportItemIndex,s=this._viewportSize+n,o=this.option("scrolling.prerenderedRowChunkSize")||1,l=this.isScrollingBack(),d=null!==(e=this.option("scrolling.prerenderedRowCount"))&&void 0!==e?e:1,c=l?0:d,f=Math.floor(Math.max(0,n-(l?d:0))/o)*o,p=Math.ceil((s+c-f)/o)*o;if(t){var g=Math.max(0,r-f);p=Math.min(p,g)}return{skip:f,take:p}}itemsCount(){return this.option(_h)?this._dataLoader.itemsCount.apply(this._dataLoader,arguments):this._dataOptions.itemsCount()}pageIndex(){return this._dataLoader.pageIndex(...arguments)}beginPageIndex(){return this._dataLoader.beginPageIndex(...arguments)}endPageIndex(){return this._dataLoader.endPageIndex(...arguments)}pageSize(){return this._dataLoader.pageSize(...arguments)}load(){return this._dataLoader.load(...arguments)}loadIfNeed(){return this._dataLoader.loadIfNeed(...arguments)}handleDataChanged(){return this._dataLoader.handleDataChanged(...arguments)}getDelayDeferred(){return this._dataLoader.getDelayDeferred()}}var Ry="bottom-load-panel",Ly="dx-freespace-row",vh="dx-virtual-row",pt="scrolling.legacyMode",g_="paging.pageIndex",d4=["beginPageIndex","endPageIndex","pageIndex"],qi=function(i){return"virtual"===i.option("scrolling.mode")},La=function(i){return"infinite"===i.option("scrolling.mode")},Yr=function(i){return qi(i)||La(i)},By=function(i,e,t,r){for(var a=0;a<e+1;a++){var n=i[t?i.length-1-a:a];n&&!r(n,a===e,t)&&e++}return e},gh=function(i,e){return"data"===i.rowType&&!i.isNewRow||"group"===i.rowType&&e.isGroupItemCountable(i.data)},m_=function(i){var e=i._virtualScrollController.beginPageIndex(-1);qi(i)&&(e<0||i.viewportSize()>=0&&i.getViewportItemIndex()>=0&&(e*i.pageSize()>i.getViewportItemIndex()||e*i.pageSize()+i.itemsCount()<i.getViewportItemIndex()+i.viewportSize())&&i._dataSource.isLoading()?i._isLoading||(i._isLoading=!0,i.loadingChanged.fire(!0)):i._isLoading&&(i._isLoading=!1,i.loadingChanged.fire(!1)))},Yi=function(i,e,t){if(!1===i.option(pt)&&d4.includes(e)){var r=i._dataSource;return r.pageIndex.apply(r,t)}var a=i._virtualScrollController;return a[e].apply(a,t)},Vy=function(i,e){var t=i.toArray().map(n=>(0,b.Z)(n).parent(".".concat(e)).get(0)).filter(n=>n);t.length&&(i=(0,b.Z)(t));for(var r=e===Ly?i.length-1:i.length,a=0;a<r;a++)i.eq(a).remove()},_4={defaultOptions:()=>({scrolling:{timeout:300,updateTimeout:300,minTimeout:0,renderingThreshold:100,removeInvisiblePages:!0,rowPageSize:5,prerenderedRowChunkSize:1,mode:"standard",preloadEnabled:!1,rowRenderingMode:"standard",loadTwoPagesOnStart:!1,legacyMode:!1,prerenderedRowCount:1}}),extenders:{controllers:{data:i=>class extends i{dispose(){var e=this._rowsScrollController;e&&e.dispose(),super.dispose.apply(this,arguments)}_refreshDataSource(){var e=super._refreshDataSource.apply(this,arguments)||(new Y.BH).resolve().promise();return e.done(this.initVirtualRows.bind(this)),e}_loadDataSource(){var e;if(this._rowsScrollController&&Yr(this)){var{loadPageCount:t}=(0,m.$K)(this._loadViewportParams)?this.getLoadPageParams():{loadPageCount:0};t>=1&&(null===(e=this._dataSource)||void 0===e||e.loadPageCount(t))}return super._loadDataSource.apply(this,arguments)}getRowPageSize(){var e=this.option("scrolling.rowPageSize"),t=this.pageSize();return t&&t<e?t:e}reload(){var e=this._rowsScrollController||this._dataSource,t=e&&e.getItemIndexByPosition(),r=super.reload.apply(this,arguments);return r&&r.done(()=>{var a,n;if(qi(this)||Te.isVirtualRowRendering(this)){var s=this.getRowIndexOffset(),o=Math.floor(t)-s,{component:l}=this,d=l.getScrollable&&l.getScrollable(),u=this.dataSource().operationTypes().sorting;if(d&&!u&&o>=0){var c=l.getRowElement(o),f=c&&c[0]&&(0,b.Z)(c[0]),p=f&&(null===(a=f.position())||void 0===a?void 0:a.top),g=ii.Z.chrome&&Number(null!==(n=ii.Z.version)&&void 0!==n?n:0)>=91;p&&p>(ii.Z.mozilla||g?1:0)&&(p=Math.round(p+(0,oe.zp)(f)*(t%1)),d.scrollTo({y:p}))}}})}initVirtualRows(){var e=Te.isVirtualRowRendering(this);if(this._allItems=null,this._loadViewportParams=null,"virtual"!==this.option("scrolling.mode")&&!e||!e||!1!==this.option(pt)&&!this.option("scrolling.rowPageSize"))return this._visibleItems=null,void(this._rowsScrollController=null);var t=!qi(this)&&this.pageIndex()>=this.pageCount()?this.pageCount()-1:this.pageIndex();this._rowPageIndex=Math.ceil(t*this.pageSize()/this.getRowPageSize()),this._visibleItems=!1===this.option(pt)?null:[],this._viewportChanging=!1,this._needUpdateViewportAfterLoading=!1,this._rowsScrollController||(this._rowsScrollController=new v_(this.component,this._getRowsScrollDataOptions(),!0),this._rowsScrollController.positionChanged.add(()=>{var r;if(!1===this.option(pt))return this._viewportChanging=!0,this.loadViewport(),void(this._viewportChanging=!1);null===(r=this._dataSource)||void 0===r||r.setViewportItemIndex(this._rowsScrollController.getViewportItemIndex())})),!1===this.option(pt)&&this._updateLoadViewportParams(),this.isLoaded()&&!1!==this.option(pt)&&this._rowsScrollController.load()}isViewportChanging(){return this._viewportChanging}_getRowsScrollDataOptions(){var e=this,t=function(r){return gh(r,e._dataSource)};return{pageSize:()=>e.getRowPageSize(),loadedOffset(){var r;return qi(e)&&(null===(r=e._dataSource)||void 0===r?void 0:r.lastLoadOptions().skip)||0},loadedItemCount:()=>e._itemCount,totalItemsCount:()=>Yr(e)?e.totalItemsCount():!1===e.option(pt)?e._itemCount:e._items.filter(t).length,hasKnownLastPage:()=>!1!==e.option(pt)||e.hasKnownLastPage(),pageIndex:r=>(void 0!==r&&(e._rowPageIndex=r),e._rowPageIndex),isLoading:()=>e.isLoading(),pageCount(){return Math.ceil(this.totalItemsCount()/this.pageSize())||1},load(){e._rowsScrollController.pageIndex()>=this.pageCount()&&(e._rowPageIndex=this.pageCount()-1,e._rowsScrollController.pageIndex(e._rowPageIndex)),(this.items().length||!this.totalItemsCount())&&e._rowsScrollController.handleDataChanged(r=>{(r=r||{}).changeType=r.changeType||"refresh",r.items=r.items||e._visibleItems,e._visibleItems.forEach((a,n)=>{a.rowIndex=n}),e._fireChanged(r)})},updateLoading(){},itemsCount(){return this.items(!0).length},correctCount:(r,a,n)=>By(r,a,n,(s,o,l)=>s.isNewRow?o&&!l:o&&l?!s.isNewRow:t(s)),items(r){var a=e._items;if(e.option(pt)){var n=e.dataSource(),s=n?.virtualItemsCount(),o=s?s.begin:0,l=e.getRowPageSize(),d=e._rowPageIndex*l-o,u=l;if(d<0)return[];d&&(d=this.correctCount(a,d),a=a.slice(d)),u&&(u=this.correctCount(a,u),a=a.slice(0,u))}return r?a.filter(t):a},viewportItems:r=>(r&&!1!==e.option(pt)&&(e._visibleItems=r),e._visibleItems),onChanged(){},changingDuration(){var r=e.dataSource();return r?.isLoading()&&!1!==e.option(pt)?300:r?._renderTime||0}}}_updateItemsCore(e){var t=this.getRowIndexDelta();if(super._updateItemsCore.apply(this,arguments),!1===this.option(pt)&&Te.isVirtualRowRendering(this))"update"===e.changeType&&0===e.rowIndices.length&&e.cancelEmptyChanges&&(e.cancel=!0);else{var r=this._rowsScrollController;if(r){var a=this._visibleItems,n="refresh"===e.changeType||e.isLiveUpdate;if("append"===e.changeType&&e.items&&!e.items.length)return;n||"append"===e.changeType||"prepend"===e.changeType?(e.cancel=!0,n&&r.reset(!0),r.load()):("update"===e.changeType?e.rowIndices.forEach((s,o)=>{var l=e.changeTypes[o],d=e.items[o];"update"===l?a[s]=d:"insert"===l?a.splice(s,0,d):"remove"===l&&a.splice(s,1)}):(a.forEach((s,o)=>{a[o]=this._items[o+t]||a[o]}),e.items=a),function(i){i.forEach((e,t)=>{e.rowIndex=t})}(a))}}}_updateLoadViewportParams(){var e=this._rowsScrollController.getViewportParams(),t=this.pageSize();if(e&&!Yr(this)&&t>0){var r=this.pageIndex()*t;e.skip+=r}this._loadViewportParams=e}_processItems(){var e,t=super._processItems.apply(this,arguments);if(!1===this.option(pt)){var n,s,o,r=this._dataSource,a=null!==(e=r?.lastLoadOptions().skip)&&void 0!==e?e:0,l=!1,d=[];t.forEach(u=>{var{rowType:c}=u,f=gh(u,r),p="group"===c&&(n||f||"group"!==s&&a>0),g="data"===c&&f&&(n||"group"!==s);!u.isNewRow&&(0,m.$K)(n)&&(p||g)&&(!o||l)&&a++,(p||g)&&(l=!0),u.isNewRow?d.push(u):(d.forEach(x=>{x.loadIndex=a}),d=[]),u.loadIndex=a,n=f,s=c,o=u.isNewRow}),d.forEach(u=>{u.loadIndex=a})}return t}_afterProcessItems(e){if(this._itemCount=e.filter(s=>gh(s,this._dataSource)).length,(0,m.$K)(this._loadViewportParams)){this._updateLoadViewportParams();var t=e;if(this._allItems=e,e.length){var{skipForCurrentPage:r}=this.getLoadPageParams(!0),a=e[0].loadIndex+r,{take:n}=this._loadViewportParams;t=e.filter(s=>s.loadIndex>=a&&(s.loadIndex<a+n||s.isNewRow&&s.loadIndex===a&&0===n))}return t}return super._afterProcessItems.apply(this,arguments)}_applyChange(e){var t=this,{items:r}=e,{changeType:a}=e,{removeCount:n}=e;switch(n&&(n=By(t._items,n,"prepend"===a,(o,l)=>"data"===o.rowType&&!o.isNewRow||"group"===o.rowType&&(t._dataSource.isGroupItemCountable(o.data)||l)),e.removeCount=n),a){case"prepend":t._items.unshift.apply(t._items,r),n&&t._items.splice(-n);break;case"append":t._items.push.apply(t._items,r),n&&t._items.splice(0,n);break;default:super._applyChange(e)}}items(e){return e?this._allItems||this._items:this._visibleItems||this._items}getRowIndexDelta(){var e=0;if(this.option(pt)){var t=this._visibleItems;t&&t[0]&&(e=this._items.indexOf(t[0]))}return e<0?0:e}getRowIndexOffset(e,t){var r,a,n=0,s=this.dataSource(),o=this._rowsScrollController,l=!1===this.option(pt),d=Yr(this);if(o&&!e)if(l&&(0,m.$K)(this._loadViewportParams)){var{skipForCurrentPage:u,pageIndex:c}=this.getLoadPageParams(!0),f=this.items(!0);if(n=d?c*this.pageSize():0,f.length){var p=f[0].loadIndex;n+=f.filter(w=>w.loadIndex<p+u).length}}else n=o.beginPageIndex()*o.pageSize();else if(d&&l&&s){var g=s.lastLoadOptions();n=t&&null!==(r=g.skips)&&void 0!==r&&r.length?g.skips.reduce((w,x)=>w+x,0):null!==(a=g.skip)&&void 0!==a?a:0}else qi(this)&&s&&(n=s.beginPageIndex()*s.pageSize());return n}getDataIndex(){return!1===this.option(pt)?this.getRowIndexOffset(!0,!0):super.getDataIndex.apply(this,arguments)}viewportSize(){var e=this._rowsScrollController,t=this._dataSource,r=e?.viewportSize.apply(e,arguments);return!1===this.option(pt)?r:t?.viewportSize.apply(t,arguments)}viewportHeight(e,t){var r;null===(r=this._rowsScrollController)||void 0===r||r.viewportHeight(e,t)}viewportItemSize(){var e=this._rowsScrollController,t=this._dataSource,r=e?.viewportItemSize.apply(e,arguments);return!1===this.option(pt)?r:t?.viewportItemSize.apply(t,arguments)}setViewportPosition(){var e=this._rowsScrollController,t=this._dataSource;this._isPaging=!1,e?e.setViewportPosition.apply(e,arguments):t?.setViewportPosition.apply(t,arguments)}setContentItemSizes(e){var t=this._rowsScrollController,r=this._dataSource,a=t?.setContentItemSizes(e);return!1===this.option(pt)?a:r?.setContentItemSizes(e)}getPreloadedRowCount(){var e=this.option("scrolling.preloadedRowCount"),t=this.option("scrolling.preloadEnabled");if((0,m.$K)(e))return e;var r=this.viewportSize();return t?2*r:r}getLoadPageParams(e){var t,r,a=this.pageSize(),n=this._loadViewportParams,s=null===(t=this._dataSource)||void 0===t?void 0:t.lastLoadOptions(),o=s?.pageIndex||0,l=s?.take||0,d=this._rowsScrollController.isScrollingBack(),u=d?this.getPreloadedRowCount():0,c=d?0:this.getPreloadedRowCount(),f=(null===(r=this._dataSource)||void 0===r?void 0:r.totalCountCorrection())||0,p=Math.max(0,n.skip-u),g=e?o:Math.floor(a?p/a:0),x=n.skip-g*a,V=Math.ceil(a?(e?l:n.take+x+c-f)/a:0);return{pageIndex:g,loadPageCount:Math.max(1,V),skipForCurrentPage:Math.max(0,x)}}_updateVisiblePageIndex(e){if(this._rowsScrollController){if((0,m.$K)(e))return this._silentOption(g_,e),void this.pageChanged.fire();var t=this._rowsScrollController.getViewportItemIndex(),r=Math.floor(t/this.pageSize());this.pageIndex()!==r&&(this._silentOption(g_,r),this.updateItems({changeType:"pageIndex"}))}}_getChangedLoadParams(){var e=this.getLoadPageParams(!0),{pageIndex:t,loadPageCount:r}=this.getLoadPageParams(),a=this._pageIndexIsValid(t),n=null;return!this._isLoading&&a&&(t!==e.pageIndex||r!==e.loadPageCount)&&(n={pageIndex:t,loadPageCount:r}),n}_pageIndexIsValid(e){var t=!0;return(La(this)&&this.hasKnownLastPage()||qi(this))&&(t=e*this.pageSize()<this.totalItemsCount()),t}_loadItems(e,t){var r,a,n=Yr(this),s=this._dataSource,o=this._getChangedLoadParams(),l=null!==(r=s?.loadPageCount())&&void 0!==r?r:0,d=this.pageSize()*l,u=null!==(a=s?.pageIndex())&&void 0!==a?a:0,c=o?.pageIndex===u,f=La(this)&&this.totalItemsCount()<d,p="repaint"===this.option("editing.refreshMode"),w=!1;if(!s||n&&e&&(p&&t||o?.pageIndex>u||c&&f))return w;if(n&&this._isLoading&&(this._needUpdateViewportAfterLoading=!0),n&&o){w=!0,s.pageIndex(o.pageIndex),s.loadPageCount(o.loadPageCount),this._repaintChangesOnly=!0,this._needUpdateDimensions=!0;var x=this._viewportChanging;this.load().always(()=>{this._repaintChangesOnly=void 0,this._needUpdateDimensions=void 0}).done(()=>{var y=this.pageCount()>0&&this.pageIndex()===this.pageCount()-1;(x||y)&&this._updateVisiblePageIndex(),this._needUpdateViewportAfterLoading&&(this._needUpdateViewportAfterLoading=!1,this.loadViewport({checkLoadedParamsOnly:!0}))})}return w}loadViewport(e){var t,r,a,{checkLoadedParamsOnly:n,checkLoading:s,viewportIsNotFilled:o}=e??{};if(Yr(this)||Te.isVirtualRowRendering(this)){this._updateLoadViewportParams();var d=this._loadItems(s,!o),u=null===(t=this._dataSource)||void 0===t?void 0:t.isCustomLoading();if(!(d||s&&!u&&this._isLoading||n)){var p=!(null!==(a=null===(r=this._editingController)||void 0===r?void 0:r.getChanges())&&void 0!==a&&a.length);this.updateItems({repaintChangesOnly:!0,needUpdateDimensions:!0,useProcessedItemsCache:p,cancelEmptyChanges:!0})}}}updateViewport(){var e,t,r=this.viewportSize(),a=this.items().length,n=r>a,s=null!==(t=null===(e=this._loadViewportParams)||void 0===e?void 0:e.take)&&void 0!==t?t:0,o=this._rowsScrollController,l=o?.getViewportParams().take;(n||s<l)&&!this._isPaging&&a&&this.loadViewport({checkLoading:!0,viewportIsNotFilled:n})}loadIfNeed(){if(!1!==this.option(pt)){var e=this._rowsScrollController;e&&e.loadIfNeed();var t=this._dataSource;return t&&t.loadIfNeed()}}getItemSize(){var e=this._rowsScrollController;if(e)return e.getItemSize.apply(e,arguments);var t=this._dataSource;return t&&t.getItemSize.apply(t,arguments)}getItemSizes(){var e=this._rowsScrollController;if(e)return e.getItemSizes.apply(e,arguments);var t=this._dataSource;return t&&t.getItemSizes.apply(t,arguments)}getContentOffset(){var e=this._rowsScrollController;if(e)return e.getContentOffset.apply(e,arguments);var t=this._dataSource;return t&&t.getContentOffset.apply(t,arguments)}refresh(e){var t=this._dataSource;return t&&e&&e.load&&La(this)&&t.resetCurrentTotalCount(),super.refresh.apply(this,arguments)}topItemIndex(){var e;return null===(e=this._loadViewportParams)||void 0===e?void 0:e.skip}bottomItemIndex(){var e=this._loadViewportParams;return e&&e.skip+e.take}virtualItemsCount(){var e=this._rowsScrollController;if(e)return e.virtualItemsCount.apply(e,arguments);var t=this._dataSource;return t?.virtualItemsCount.apply(t,arguments)}pageIndex(e){var t,r=Yr(this),a=this._rowsScrollController;return!1===this.option(pt)&&r&&a&&void 0===e?null!==(t=this.option(g_))&&void 0!==t?t:0:super.pageIndex.apply(this,arguments)}_fireChanged(e){super._fireChanged.apply(this,arguments);var{operationTypes:t}=e;if(!1===this.option(pt)&&Yr(this)&&t){var{fullReload:r,pageIndex:a}=t;e.isDataChanged&&!r&&a&&this._updateVisiblePageIndex(this._dataSource.pageIndex())}}_getPagingOptionValue(e){var t=super._getPagingOptionValue.apply(this,arguments);return!1===this.option(pt)&&Yr(this)&&(t=this[e]()),t}isEmpty(){return!1===this.option(pt)?!this.items(!0).length:super.isEmpty.apply(this,arguments)}isLastPageLoaded(){var e=!1;if(!1===this.option(pt)&&Yr(this)){var{pageIndex:t,loadPageCount:r}=this.getLoadPageParams(!0);e=t+r>=this.pageCount()}else e=super.isLastPageLoaded.apply(this,arguments);return e}reset(){this._itemCount=0,this._allItems=null,super.reset.apply(this,arguments)}_applyFilter(){var e;return null===(e=this._dataSource)||void 0===e||e.loadPageCount(1),super._applyFilter.apply(this,arguments)}getVirtualContentSize(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.getVirtualContentSize.apply(this._dataSource,arguments)}setViewportItemIndex(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.setViewportItemIndex.apply(this._dataSource,arguments)}},resizing:i=>class extends i{dispose(){super.dispose.apply(this,arguments),clearTimeout(this._resizeTimeout)}_updateMasterDataGridCore(e){return(0,Y.gx)(super._updateMasterDataGridCore.apply(this,arguments)).done(t=>{var r=qi(e)&&!1===e.option(pt);!t&&r&&e.getScrollable()&&e.updateDimensions()})}hasResizeTimeout(){return!!this._resizeTimeout}resize(){var e;if(qi(this)||Te.isVirtualRowRendering(this)){clearTimeout(this._resizeTimeout),this._resizeTimeout=null;var t=new Date-this._lastTime,r=this.option("scrolling.updateTimeout");this._lastTime&&t<r?(e=new Y.BH,this._resizeTimeout=setTimeout(()=>{this._resizeTimeout=null,super.resize.apply(this).done(e.resolve).fail(e.reject),this._lastTime=new Date},r),this._lastTime=new Date):(e=super.resize.apply(this),this._dataController.isLoaded()&&(this._lastTime=new Date))}else e=super.resize.apply(this);return e}}},views:{rowsView:i=>class extends i{init(){var e;super.init(),this._dataController.pageChanged.add(t=>{var r=this._scrollTop;this.scrollToPage(t??this._dataController.pageIndex()),!1===this.option(pt)&&this._scrollTop===r&&this._dataController.updateViewport()}),this._dataController.dataSourceChanged.add(()=>{!this._scrollTop&&this._scrollToCurrentPageOnResize()}),null===(e=this._dataController.stateLoaded)||void 0===e||e.add(()=>{this._scrollToCurrentPageOnResize()}),this._scrollToCurrentPageOnResize()}dispose(){clearTimeout(this._scrollTimeoutID),super.dispose()}_scrollToCurrentPageOnResize(){if(this._dataController.pageIndex()>0){var e=()=>{this.resizeCompleted.remove(e),this.scrollToPage(this._dataController.pageIndex())};this.resizeCompleted.add(e)}}scrollToPage(e){var r,t=this._dataController?this._dataController.pageSize():0;if(qi(this)||La(this)){var a=this._dataController.getItemSize(),n=this._dataController.getItemSizes(),s=e*t;for(var o in r=s*a,n)parseInt(o)<s&&(r+=n[o]-a)}else r=0;this.scrollTo({y:r,x:this._scrollLeft})}renderDelayedTemplates(){this.waitAsyncTemplates().done(()=>{this._updateContentPosition(!0)}),super.renderDelayedTemplates.apply(this,arguments)}_renderCore(e){var t=new Date,r=super._renderCore.apply(this,arguments),a=this._dataController._dataSource;if(a&&e){var n=e.items?e.items.length:20,s=this._dataController.viewportSize()||20;a._renderTime=Te.isVirtualRowRendering(this)&&n>0&&!1!==this.option(pt)?(new Date-t)*s/n:new Date-t}return r}_getRowElements(e){var t=super._getRowElements(e);return t&&t.not(".".concat(vh))}_removeRowsElements(e,t,r){var a=this._getRowElements(e).toArray();(a="append"===r?a.slice(0,t):a.slice(-t)).map(n=>{var s=(0,b.Z)(n);this._errorHandlingController&&this._errorHandlingController.removeErrorRow(s.next()),s.remove()})}_updateContent(e,t){var r,a=this._findContentElement(),n=t&&t.changeType,s=(0,Y.BH)(),o=a.children().first();return"append"===n||"prepend"===n?this.waitAsyncTemplates().done(()=>{var l=this._getBodies(e);1===l.length?this._getBodies(o)["append"===n?"append":"prepend"](l.children()):l["append"===n?"appendTo":"prependTo"](o),e.remove(),r=this._getFreeSpaceRowElements(o),Vy(r,Ly),t.removeCount&&this._removeRowsElements(o,t.removeCount,n),this._restoreErrorRow(o),s.resolve()}).fail(s.reject):super._updateContent.apply(this,arguments).done(()=>{"update"===n&&this._restoreErrorRow(o),s.resolve()}).fail(s.reject),s.promise().done(()=>{this._updateBottomLoading()})}_addVirtualRow(e,t,r,a){if(a){var n=this._createEmptyRow(vh,t,a);n=this._wrapRowIfNeed(e,n),this._appendEmptyRow(e,n,r)}}_updateContentItemSizes(){var e=this._getRowHeights(),t=this._correctRowHeights(e);this._dataController.setContentItemSizes(t)}_updateViewportSize(e,t){(0,m.$K)(e)||(e=(0,oe.zp)(this._hasHeight?this.element():(0,We.Jj)())),this._dataController.viewportHeight(e,t)}_getRowHeights(){var e,t,r=null===(t=null===(e=this._editingController)||void 0===e?void 0:e.isPopupEditMode)||void 0===t?void 0:t.call(e),a=this._getRowElements(this._tableElement).toArray();return r&&(a=a.filter(n=>!(0,b.Z)(n).hasClass("dx-row-inserted"))),a.map(n=>(0,di.l)(n).height)}_correctRowHeights(e){for(var t=this._dataController,r=t._dataSource,a=[],n=t.getVisibleRows(),s=0,o=!0,l=-1,d=0;d<e.length;d++){var u=n[d];(0,m.$K)(u)&&(!1===this.option(pt)?(l>=0&&l!==u.loadIndex&&(a.push(s),s=0),l=u.loadIndex):gh(u,r)&&(o?o=!1:(a.push(s),s=0)),s+=e[d])}return s>0&&a.push(s),a}_updateContentPosition(e){if(this._dataController.viewportItemSize(this._rowHeight||20),qi(this)||Te.isVirtualRowRendering(this)){e||this._updateContentItemSizes();var r=this._dataController.getContentOffset("begin"),a=this._dataController.getContentOffset("end"),n=this.getTableElements(),s=n.children("tbody").children(".".concat(vh));Vy(s,vh),n.each((o,l)=>{var d=o>0,u=this._isFixedTableRendering;this._isFixedTableRendering=d,this._addVirtualRow((0,b.Z)(l),d,"top",r),this._addVirtualRow((0,b.Z)(l),d,"bottom",a),this._isFixedTableRendering=u})}}_isTableLinesDisplaysCorrect(e){return e.find(".".concat("dx-column-lines")).length>0===this.option("showColumnLines")}_isColumnElementsEqual(e,t){var r=e.length===t.length;return r&&(0,j.S6)(e,(a,n)=>{if(n.style.width!==t[a].style.width)return r=!1}),r}_getCellClasses(e){var t=[],{cssClass:r}=e,a="expand"===e.command;return r&&t.push(r),a&&t.push(this.addWidgetPrefix("group-space")),t}_findBottomLoadPanel(e){var t=e||this.element(),r=t&&t.find(".".concat(this.addWidgetPrefix(Ry)));if(r&&r.length)return r}_updateBottomLoading(){var e=qi(this),t=La(this),r=!this._dataController.hasKnownLastPage()&&this._dataController.isLoaded()&&(e||t),a=this._findContentElement(),n=this._findBottomLoadPanel(a);r?n||(0,b.Z)("<div>").addClass(this.addWidgetPrefix(Ry)).append(this._createComponent((0,b.Z)("<div>"),jr.Z).$element()).appendTo(a):n&&n.remove()}_handleScroll(e){var t=!0===this.option(pt);(this._scrollTop!==e.scrollOffset.top||e.forceUpdateScrollPosition)&&(this._hasHeight||!t&&0===e.scrollOffset.top)&&this._rowHeight&&(this._scrollTop=e.scrollOffset.top,(qi(this)||"standard"!==this.option("scrolling.rowRenderingMode"))&&!1===this.option(pt)&&(this._updateContentItemSizes(),this._updateViewportSize(null,this._scrollTop)),this._dataController.setViewportPosition(e.scrollOffset.top)),super._handleScroll.apply(this,arguments)}_needUpdateRowHeight(e){return super._needUpdateRowHeight.apply(this,arguments)||e>0&&La(this)&&!Te.isVirtualRowRendering(this)}_updateRowHeight(){if(super._updateRowHeight.apply(this,arguments),this._rowHeight){this._updateContentPosition();var e=(0,oe.zp)(this._hasHeight?this.element():(0,We.Jj)());!1===this.option(pt)?(this._updateViewportSize(e),this._dataController.updateViewport()):this._dataController.viewportSize(Math.ceil(e/this._rowHeight))}}updateFreeSpaceRowHeight(){var e=super.updateFreeSpaceRowHeight.apply(this,arguments);return e&&this._updateContentPosition(),e}setLoading(e,t){var r=this._dataController,a=r.pageIndex()>0&&r.isLoaded()&&!!this._findBottomLoadPanel();!1===this.option(pt)&&e&&r.isViewportChanging()||(a&&(e=!1),super.setLoading.call(this,e,t))}throwHeightWarningIfNeed(){void 0!==this._hasHeight&&!this._hasHeight&&Yr(this)&&!this._heightWarningIsThrown&&(this._heightWarningIsThrown=!0,Rt.Z.log("W1025"))}_resizeCore(){var e=this,t=e.element();super._resizeCore(),this.throwHeightWarningIfNeed(),e.component.$element()&&!e._windowScroll&&(0,ga.al)(t)&&(e._windowScroll=Oy(t,r=>{!e._hasHeight&&e._rowHeight&&e._dataController.setViewportPosition(r)},e.component.$element()),e.on("disposing",()=>{e._windowScroll.dispose()})),!1!==this.option(pt)&&e.loadIfNeed()}loadIfNeed(){var e,t;null===(t=null===(e=this._dataController)||void 0===e?void 0:e.loadIfNeed)||void 0===t||t.call(e)}_restoreErrorRow(e){var t;!1===this.option(pt)&&(null===(t=this._errorHandlingController)||void 0===t||t.removeErrorRow()),super._restoreErrorRow.apply(this,arguments)}}}}};He.registerModule("virtualScrolling",_4),vu.extend(i=>class extends i{init(){super.init.apply(this,arguments),this._items=[],this._totalCount=-1,this._isLoaded=!0,this._loadPageCount=1,this._virtualScrollController=new v_(this.component,this._getVirtualScrollDataOptions())}dispose(){this._virtualScrollController.dispose(),super.dispose.apply(this,arguments)}_getVirtualScrollDataOptions(){var e=this;return{pageSize:()=>e.pageSize(),totalItemsCount:()=>e.totalItemsCount(),hasKnownLastPage:()=>e.hasKnownLastPage(),pageIndex:t=>e._dataSource.pageIndex(t),isLoading:()=>e._dataSource.isLoading()&&!e.isCustomLoading(),pageCount:()=>e.pageCount(),load:()=>e._dataSource.load(),updateLoading(){m_(e)},itemsCount:()=>e.itemsCount(!0),items:()=>e._dataSource.items(),viewportItems:t=>(t&&(e._items=t),e._items),onChanged(t){e.changed.fire(t)},changingDuration:()=>e.isLoading()?300:e._renderTime||0}}_handleLoadingChanged(e){!1!==this.option(pt)?((!qi(this)||this._isLoadingAll)&&(this._isLoading=e,super._handleLoadingChanged.apply(this,arguments)),this._startLoadTime=e?new Date:void 0):super._handleLoadingChanged.apply(this,arguments)}_handleLoadError(){!1!==this.option(pt)&&(this._isLoading=!1,this.loadingChanged.fire(!1)),super._handleLoadError.apply(this,arguments)}_handleDataChanged(e){if(!1===this.option(pt))return this._items=this._dataSource.items().slice(),this._totalCount=this._dataSourceTotalCount(!0),void super._handleDataChanged.apply(this,arguments);var t=super._handleDataChanged.bind(this);this._virtualScrollController.handleDataChanged(t,e)}_customizeRemoteOperations(e,t){var r=!1===this.option(pt),a=this.option("scrolling.renderAsync");(0,m.$K)(a)||(a=this._renderTime>=this.option("scrolling.renderingThreshold")),(qi(this)||La(this)&&r)&&!t.reload&&(t.skip||r)&&!a&&(e.delay=void 0),super._customizeRemoteOperations.apply(this,arguments)}items(){return this._items}_dataSourceTotalCount(e){return!1===this.option(pt)&&qi(this)&&!e?this._totalCount:super._dataSourceTotalCount()}itemsCount(e){return e||!1===this.option(pt)?super.itemsCount():this._virtualScrollController.itemsCount()}load(e){return!1===this.option(pt)||e?super.load(e):this._virtualScrollController.load()}isLoading(){return!1===this.option(pt)?this._dataSource.isLoading():this._isLoading}isLoaded(){return this._dataSource.isLoaded()&&this._isLoaded}resetPagesCache(e){e||this._virtualScrollController.reset(!0),super.resetPagesCache.apply(this,arguments)}_changeRowExpandCore(){var e=super._changeRowExpandCore.apply(this,arguments);return!1===this.option(pt)||(this.resetPagesCache(),m_(this)),e}reload(){this._dataSource.pageIndex(this.pageIndex());var e=this._virtualScrollController;if(!1!==this.option(pt)&&e){var t=new Y.BH;return super.reload.apply(this,arguments).done(r=>{var a=e.getDelayDeferred();a?a.done(t.resolve).fail(t.reject):t.resolve(r)}).fail(t.reject),t}return super.reload.apply(this,arguments)}refresh(e,t){if(!1!==this.option(pt)){var{storeLoadOptions:r}=e,a=this._dataSource;t.reload?(this._virtualScrollController.reset(),a.items().length=0,this._isLoaded=!1,m_(this),this._isLoaded=!0,La(this)?(this.pageIndex(0),a.pageIndex(0),r.pageIndex=0,e.pageIndex=0,r.skip=0):(a.pageIndex(this.pageIndex()),a.paginate()&&(e.pageIndex=this.pageIndex(),r.skip=this.pageIndex()*this.pageSize()))):La(this)&&r.skip&&this._totalCountCorrection<0&&(r.skip+=this._totalCountCorrection)}return super.refresh.apply(this,arguments)}loadPageCount(e){if(!(0,m.$K)(e))return this._loadPageCount;this._loadPageCount=e}_handleDataLoading(e){var t=this.loadPageCount(),r=this.pageSize(),a=!1===this.option(pt),{storeLoadOptions:n}=e,s=(0,m.$K)(n.take);e.loadPageCount=t,!e.isCustomLoading&&a&&s&&t>1&&r>0&&(n.take=t*r),super._handleDataLoading.apply(this,arguments)}_loadPageSize(){return super._loadPageSize.apply(this,arguments)*this.loadPageCount()}beginPageIndex(){return Yi(this,"beginPageIndex",[...arguments])}endPageIndex(){return Yi(this,"endPageIndex",[...arguments])}pageIndex(e){return Yi(this,"pageIndex",[...arguments])}virtualItemsCount(){return Yi(this,"virtualItemsCount",[...arguments])}getContentOffset(){return Yi(this,"getContentOffset",[...arguments])}getVirtualContentSize(){return Yi(this,"getVirtualContentSize",[...arguments])}setContentItemSizes(){return Yi(this,"setContentItemSizes",[...arguments])}setViewportPosition(){return Yi(this,"setViewportPosition",[...arguments])}getViewportItemIndex(){return Yi(this,"getViewportItemIndex",[...arguments])}setViewportItemIndex(e){return Yi(this,"setViewportItemIndex",[...arguments])}getItemIndexByPosition(){return Yi(this,"getItemIndexByPosition",[...arguments])}viewportSize(){return Yi(this,"viewportSize",[...arguments])}viewportItemSize(){return Yi(this,"viewportItemSize",[...arguments])}getItemSize(){return Yi(this,"getItemSize",[...arguments])}getItemSizes(){return Yi(this,"getItemSizes",[...arguments])}loadIfNeed(){return Yi(this,"loadIfNeed",[...arguments])}});var Ny=(i,e)=>{var a,t=(0,b.Z)((0,We.Jj)()),{top:r}=i.offset();if((0,m.kE)(e)){if(e<r)return r-e;a=(0,oe.fA)(t)-e+t.scrollTop()}else{var n=r-t.scrollTop(),s=(0,oe.fA)(t)-n-(0,oe.zp)(i);a=Math.max(n,s)}return.9*a};const C_=class C4 extends YC{_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{orientation:"horizontal",tabIndex:null,onHoverStart:J.ZT})}_initDataAdapter(){this._dataAdapter=this.option("_dataAdapter"),this._dataAdapter||super._initDataAdapter()}_renderContentImpl(){this._renderContextMenuOverlay(),super._renderContentImpl();var e=this._dataAdapter.getNodeByKey(this.option("_parentKey"));e&&this._renderItems(this._getChildNodes(e)),this._renderDelimiter()}_renderDelimiter(){this.$contentDelimiter=(0,b.Z)("<div>").appendTo(this._itemContainer()).addClass("dx-context-menu-content-delimiter")}_getOverlayOptions(){return(0,N.l)(!0,super._getOverlayOptions(),{onPositioned:this._overlayPositionedActionHandler.bind(this),position:{precise:!0}})}_overlayPositionedActionHandler(e){this._showDelimiter(e)}_hoverEndHandler(e){super._hoverEndHandler(e),this._toggleFocusClass(!1,e.currentTarget)}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_hoverStartHandler(e){this.option("onHoverStart")(e),super._hoverStartHandler(e),this._toggleFocusClass(!0,e.currentTarget)}_drawSubmenu(e){this._actions.onShowing({rootItem:(0,rt.u)(e),submenu:this}),super._drawSubmenu(e),this._actions.onShown({rootItem:(0,rt.u)(e),submenu:this})}_hideSubmenu(e){this._actions.onHiding({cancel:!0,rootItem:(0,rt.u)(e),submenu:this}),super._hideSubmenu(e),this._actions.onHidden({rootItem:(0,rt.u)(e),submenu:this})}_showDelimiter(e){if(this.$contentDelimiter){var t=this._itemContainer().children(".".concat("dx-submenu")).eq(0),r=this.option("position").of.find(".dx-context-menu-container-border"),a={of:t,precise:!0},n=e.position,s=n.v.location,o=n.h.location,l=r.offset(),d=Math.round(l.left),u=Math.round(l.top),c=(0,oe.dz)(r),f=(0,oe.Cr)(r),p=(0,oe.dz)(t),g=(0,oe.Cr)(t);this.$contentDelimiter.css("display","block"),(0,oe.cl)(this.$contentDelimiter,this._isMenuHorizontal()?c<p?c:p:3),(0,oe.QQ)(this.$contentDelimiter,this._isMenuHorizontal()?3:f<g?f:g),this._isMenuHorizontal()?s>u?Math.round(o)===d?(a.offset="0 -2.5",a.at=a.my="left top"):(a.offset="0 -2.5",a.at=a.my="right top"):((0,oe.QQ)(this.$contentDelimiter,5),Math.round(o)===d?(a.offset="0 5",a.at=a.my="left bottom"):(a.offset="0 5",a.at=a.my="right bottom")):o>d?Math.round(s)===u?(a.offset="-2.5 0",a.at=a.my="left top"):(a.offset="-2.5 0",a.at=a.my="left bottom"):Math.round(s)===u?(a.offset="2.5 0",a.at=a.my="right top"):(a.offset="2.5 0",a.at=a.my="right bottom"),In.Z.setup(this.$contentDelimiter,a)}}_getContextMenuPosition(){return this.option("position")}isOverlayVisible(){return this._overlay.option("visible")}getOverlayContent(){return this._overlay.$content()}};var ys="dx-menu",b4=ys+"-vertical",Fy=ys+"-horizontal",b_=ys+"-item",ky=ys+"-items-container",w_=b_+"-expanded",mh="dx-context-menu",S_=mh+"-container-border",My="dx-state-hover",Ch=ys+"-adaptive-mode",Hy=ys+"-hamburger-button",E4=Ch+"-overlay-wrapper",od="showSubmenu",yo="nextItem",Ln="prevItem",O4={show:50,hide:300},Zy=["onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","onItemContextMenu","onItemClick","onSelectionChanged","onItemRendered"];class zy extends MC{_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{orientation:"horizontal",submenuDirection:"auto",showFirstSubmenuMode:{name:"onClick",delay:{show:50,hide:300}},hideSubmenuOnMouseLeave:!1,onSubmenuShowing:null,onSubmenuShown:null,onSubmenuHiding:null,onSubmenuHidden:null,adaptivityEnabled:!1})}_setOptionsByReference(){super._setOptionsByReference(),(0,N.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_itemElements(){var e=super._itemElements(),t=this._submenuItemElements();return e.add(t)}_submenuItemElements(){var e=[],t=".".concat(b_),r=this._submenus.length&&this._submenus[0];return r&&r.itemsContainer()&&(e=r.itemsContainer().find(t)),e}_focusTarget(){return this.$element()}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_moveFocus(e){var s,l,t=this._getAvailableItems(),r=this._isMenuHorizontal(),a=this._getActiveItem(!0);switch(e){case"up":s=r?od:this._getItemsNavigationOperation(Ln),l=this._getKeyboardNavigationAction(s,r?a:t)();break;case"down":s=r?od:this._getItemsNavigationOperation(yo),l=this._getKeyboardNavigationAction(s,r?a:t)();break;case"right":s=r?this._getItemsNavigationOperation(yo):od,l=this._getKeyboardNavigationAction(s,r?t:a)();break;case"left":s=r?this._getItemsNavigationOperation(Ln):od,l=this._getKeyboardNavigationAction(s,r?t:a)();break;default:return super._moveFocus(e)}l&&0!==l.length&&this.option("focusedElement",(0,rt.u)(l))}_getItemsNavigationOperation(e){var t=e;return this.option("rtlEnabled")&&(t=e===Ln?yo:Ln),t}_getKeyboardNavigationAction(e,t){var r=J.ZT;switch(e){case od:t.hasClass("dx-state-disabled")||(r=this._showSubmenu.bind(this,t));break;case yo:r=this._nextItem.bind(this,t);break;case Ln:r=this._prevItem.bind(this,t)}return r}_clean(){super._clean(),this.option("templatesRenderAsynchronously")&&clearTimeout(this._resizeEventTimer)}_visibilityChanged(e){e&&(this._menuItemsWidth||this._updateItemsWidthCache(),this._dimensionChanged())}_isAdaptivityEnabled(){return this.option("adaptivityEnabled")&&"horizontal"===this.option("orientation")}_updateItemsWidthCache(){var e=this.$element().find("ul").first().children("li").children(".".concat(b_));this._menuItemsWidth=this._getSummaryItemsSize("width",e,!0)}_dimensionChanged(){if(this._isAdaptivityEnabled()){var e=(0,oe.Y_)(this.$element());this._toggleAdaptiveMode(this._menuItemsWidth>e)}}_init(){super._init(),this._submenus=[]}_initActions(){this._actions={},(0,j.S6)(Zy,(e,t)=>{this._actions[t]=this._createActionByOption(t)})}_initMarkup(){this._visibleSubmenu=null,this.$element().addClass(ys),super._initMarkup(),this._addCustomCssClass(this.$element()),this.setAria("role","menubar")}_render(){super._render(),this._initAdaptivity()}_renderHamburgerButton(){return this._hamburger=new pr.Z((0,b.Z)("<div>").addClass(Hy),{icon:"menu",activeStateEnabled:!1,onClick:this._toggleTreeView.bind(this)}),this._hamburger.$element()}_toggleTreeView(e){(0,m.PO)(e)&&(e=!this._overlay.option("visible")),this._overlay.option("visible",e),e&&this._treeView.focus(),this._toggleHamburgerActiveState(e)}_toggleHamburgerActiveState(e){this._hamburger&&this._hamburger.$element().toggleClass("dx-state-active",e)}_toggleAdaptiveMode(e){var t=this.$element().find(".".concat(Fy)),r=this.$element().find(".".concat(Ch));e?this._hideVisibleSubmenu():(this._treeView&&this._treeView.collapseAll(),this._overlay&&this._toggleTreeView(e)),t.toggle(!e),r.toggle(e)}_removeAdaptivity(){this._$adaptiveContainer&&(this._toggleAdaptiveMode(!1),this._$adaptiveContainer.remove(),this._$adaptiveContainer=null,this._treeView=null,this._hamburger=null,this._overlay=null)}_treeviewItemClickHandler(e){this._actions.onItemClick(e),e.node.children.length||this._toggleTreeView(!1)}_getAdaptiveOverlayOptions(){var t=this.option("rtlEnabled")?"right":"left";return{_ignoreFunctionValueDeprecation:!0,maxHeight:()=>Ny(this.$element()),deferRendering:!1,shading:!1,animation:!1,hideOnParentScroll:!0,onHidden:()=>{this._toggleHamburgerActiveState(!1)},height:"auto",hideOnOutsideClick:r=>!(0,b.Z)(r.target).closest(".".concat(Hy)).length,position:{collision:"flipfit",at:"bottom "+t,my:"top "+t,of:this._hamburger.$element()}}}_getTreeViewOptions(){var e={};return(0,j.S6)(["rtlEnabled","width","accessKey","activeStateEnabled","animation","dataSource","disabled","displayExpr","displayExpr","focusStateEnabled","hint","hoverStateEnabled","itemsExpr","items","itemTemplate","selectedExpr","selectionMode","tabIndex","visible"],(t,r)=>{e[r]=this.option(r)}),(0,j.S6)(["onItemContextMenu","onSelectionChanged","onItemRendered"],(t,r)=>{e[r]=a=>{this._actions[r](a)}}),(0,N.l)(e,{dataSource:this.getDataSource(),animationEnabled:!!this.option("animation"),onItemClick:this._treeviewItemClickHandler.bind(this),onItemExpanded:t=>{this._overlay.repaint(),this._actions.onSubmenuShown(t)},onItemCollapsed:t=>{this._overlay.repaint(),this._actions.onSubmenuHidden(t)},selectNodesRecursive:!1,selectByClick:this.option("selectByClick"),expandEvent:"click"})}_initAdaptivity(){if(this._isAdaptivityEnabled()){this._$adaptiveContainer=(0,b.Z)("<div>").addClass(Ch);var e=this._renderHamburgerButton();this._treeView=this._createComponent((0,b.Z)("<div>"),Mu,this._getTreeViewOptions()),this._overlay=this._createComponent((0,b.Z)("<div>"),ss.Z,this._getAdaptiveOverlayOptions()),this._overlay.$content().append(this._treeView.$element()).addClass(Ch).addClass(this.option("cssClass")),this._overlay.$wrapper().addClass(E4),this._$adaptiveContainer.append(e),this._$adaptiveContainer.append(this._overlay.$element()),this.$element().append(this._$adaptiveContainer),this._updateItemsWidthCache(),this._dimensionChanged()}}_getDelay(e){var t=this.option("showFirstSubmenuMode").delay;return(0,m.$K)(t)?(0,m.Kn)(t)?t[e]:t:O4[e]}_keyboardHandler(e){return super._keyboardHandler(e,!!this._visibleSubmenu)}_renderContainer(){var e=(0,b.Z)("<div>");return e.appendTo(this.$element()).addClass(this._isMenuHorizontal()?Fy:b4),super._renderContainer(e)}_renderSubmenuItems(e,t){var r=this._createSubmenu(e,t);return this._submenus.push(r),this._renderBorderElement(t),r}_getKeyboardListeners(){return super._getKeyboardListeners().concat(this._visibleSubmenu)}_createSubmenu(e,t){var r=(0,b.Z)("<div>").addClass(mh).appendTo(t),a=this._getChildNodes(e),n=this._createComponent(r,C_,(0,N.l)(this._getSubmenuOptions(),{_dataAdapter:this._dataAdapter,_parentKey:e.internalFields.key,items:a,onHoverStart:this._clearTimeouts.bind(this),position:this.getSubmenuPosition(t)}));return this._attachSubmenuHandlers(t,n),n}_getSubmenuOptions(){var e=(0,b.Z)("<div>"),t=this._isMenuHorizontal();return{itemTemplate:this.option("itemTemplate"),target:e,orientation:this.option("orientation"),selectionMode:this.option("selectionMode"),cssClass:this.option("cssClass"),selectByClick:this.option("selectByClick"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),showSubmenuMode:this.option("showSubmenuMode"),displayExpr:this.option("displayExpr"),disabledExpr:this.option("disabledExpr"),selectedExpr:this.option("selectedExpr"),itemsExpr:this.option("itemsExpr"),onFocusedItemChanged:r=>{r.component.option("visible")&&this.option("focusedElement",r.component.option("focusedElement"))},onSelectionChanged:this._nestedItemOnSelectionChangedHandler.bind(this),onItemClick:this._nestedItemOnItemClickHandler.bind(this),onItemRendered:this._nestedItemOnItemRenderedHandler.bind(this),onLeftFirstItem:t?null:this._moveMainMenuFocus.bind(this,Ln),onLeftLastItem:t?null:this._moveMainMenuFocus.bind(this,yo),onCloseRootSubmenu:this._moveMainMenuFocus.bind(this,t?Ln:null),onExpandLastSubmenu:t?this._moveMainMenuFocus.bind(this,yo):null}}_getShowFirstSubmenuMode(){if(!this._isDesktopDevice())return"onClick";var e=this.option("showFirstSubmenuMode");return(0,m.Kn)(e)?e.name:e}_moveMainMenuFocus(e){var t=this._getAvailableItems(),r=t.length,a=t.filter(".".concat(w_)).eq(0),n=t.index(a);this._hideSubmenu(this._visibleSubmenu),(n+=e===Ln?-1:1)>=r?n=0:n<0&&(n=r-1);var s=t.eq(n);this.option("focusedElement",(0,rt.u)(s))}_nestedItemOnSelectionChangedHandler(e){var t=e.addedItems.length&&e.addedItems[0],r=C_.getInstance(e.element);(0,this._actions.onSelectionChanged)(e),t&&this._clearSelectionInSubmenus(t[0],r),this._clearRootSelection(),this._setOptionWithoutOptionChange("selectedItem",t)}_clearSelectionInSubmenus(e,t){var r=!arguments.length;(0,j.S6)(this._submenus,(a,n)=>{var s=n._itemContainer(),o=!s.is(t&&t._itemContainer()),l=s.find(".".concat(this._selectedItemClass()));if(o&&l.length||r){l.removeClass(this._selectedItemClass());var d=this._getItemData(l);d&&(d.selected=!1),n._clearSelectedItems()}})}_clearRootSelection(){var e=this.$element().find(".".concat(ky)).first().children().children().filter(".".concat(this._selectedItemClass()));e.length&&(this._getItemData(e).selected=!1,e.removeClass(this._selectedItemClass()))}_nestedItemOnItemClickHandler(e){this._actions.onItemClick(e)}_nestedItemOnItemRenderedHandler(e){this._actions.onItemRendered(e)}_attachSubmenuHandlers(e,t){var a=t.getOverlayContent().find(".".concat("dx-submenu")),n=(0,ce.V4)(Ef.u,this.NAME+"_submenu");t.option({onShowing:this._submenuOnShowingHandler.bind(this,e,t),onShown:this._submenuOnShownHandler.bind(this,e,t),onHiding:this._submenuOnHidingHandler.bind(this,e,t),onHidden:this._submenuOnHiddenHandler.bind(this,e,t)}),(0,j.S6)(a,(s,o)=>{k.Z.off(o,n),k.Z.on(o,n,null,this._submenuMouseLeaveHandler.bind(this,e))})}_submenuOnShowingHandler(e,t){var r=e.children(".".concat(S_));this._actions.onSubmenuShowing({rootItem:(0,rt.u)(e),submenu:t}),r.show(),e.addClass(w_)}_submenuOnShownHandler(e,t){this._actions.onSubmenuShown({rootItem:(0,rt.u)(e),submenu:t})}_submenuOnHidingHandler(e,t,r){var a=e.children(".".concat(S_)),n=r;n.rootItem=(0,rt.u)(e),n.submenu=t,this._actions.onSubmenuHiding(n),(r=n).cancel||(this._visibleSubmenu===t&&(this._visibleSubmenu=null),a.hide(),e.removeClass(w_))}_submenuOnHiddenHandler(e,t){this._actions.onSubmenuHidden({rootItem:(0,rt.u)(e),submenu:t})}_submenuMouseLeaveHandler(e,t){var r=(0,b.Z)(t.relatedTarget).parents(".".concat(mh))[0],a=this._getSubmenuByRootElement(e).getOverlayContent()[0];this.option("hideSubmenuOnMouseLeave")&&r!==a&&(this._clearTimeouts(),setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")))}_hideSubmenuAfterTimeout(){if(this._visibleSubmenu){var e=(0,b.Z)(this._visibleSubmenu.$element().context).hasClass(My),t=this._visibleSubmenu.getOverlayContent().find(".".concat(My)).length;!this._visibleSubmenu.getOverlayContent().get(0).querySelector(":hover")&&!t&&!e&&this._visibleSubmenu.hide()}}_getSubmenuByRootElement(e){if(!e)return!1;var t=e.children(".".concat(mh));return t.length&&C_.getInstance(t)}getSubmenuPosition(e){var t=this._isMenuHorizontal(),r=this.option("submenuDirection").toLowerCase(),a=this.option("rtlEnabled"),n={collision:"flip",of:e,precise:!0};switch(r){case"leftortop":n.at="left top",n.my=t?"left bottom":"right top";break;case"rightorbottom":n.at=t?"left bottom":"right top",n.my="left top";break;default:t?(n.at=a?"right bottom":"left bottom",n.my=a?"right top":"left top"):(n.at=a?"left top":"right top",n.my=a?"right top":"left top")}return n}_renderBorderElement(e){(0,b.Z)("<div>").appendTo(e).addClass(S_).hide()}_itemPointerDownHandler(e){(0,b.Z)(e.target).closest(this._itemElements()).hasClass("dx-menu-item-has-submenu")?this.option("focusedElement",null):super._itemPointerDownHandler(e)}_hoverStartHandler(e){var t=(0,ce.V4)(Bt.Z.move,this.NAME),r=this._getItemElementByEventArgs(e),a=this._dataAdapter.getNodeByItem(this._getItemData(r)),n=(0,m.$K)(e.buttons)&&1===e.buttons||!(0,m.$K)(e.buttons)&&1===e.which;if(!this._isItemDisabled(r)){if(k.Z.off(r,t),!this._hasChildren(a))return void(this._showSubmenuTimer=setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")));if("onHover"===this._getShowFirstSubmenuMode()&&!n){var s=this._getSubmenuByElement(r);this._clearTimeouts(),s.isOverlayVisible()||(k.Z.on(r,t,this._itemMouseMoveHandler.bind(this)),this._showSubmenuTimer=this._getDelay("hide"))}}}_hoverEndHandler(e){var t=this._getItemElementByEventArgs(e),r=(0,b.Z)(e.relatedTarget);super._hoverEndHandler(e),this._clearTimeouts(),!this._isItemDisabled(t)&&(r.hasClass("dx-context-menu-content-delimiter")||this.option("hideSubmenuOnMouseLeave")&&!r.hasClass(ky)&&(this._hideSubmenuTimer=setTimeout(()=>{this._hideSubmenuAfterTimeout()},this._getDelay("hide"))))}_hideVisibleSubmenu(){return!!this._visibleSubmenu&&(this._hideSubmenu(this._visibleSubmenu),!0)}_showSubmenu(e){var t=this._getSubmenuByElement(e);this._visibleSubmenu!==t&&this._hideVisibleSubmenu(),t&&(this._clearTimeouts(),this.focus(),t.show(),this.option("focusedElement",t.option("focusedElement"))),this._visibleSubmenu=t,this._hoveredRootItem=e}_hideSubmenu(e){e&&e.hide(),this._visibleSubmenu===e&&(this._visibleSubmenu=null),this._hoveredRootItem=null}_itemMouseMoveHandler(e){if(!e.pointers||!e.pointers.length){var t=(0,b.Z)(e.currentTarget);(0,m.$K)(this._showSubmenuTimer)&&(this._clearTimeouts(),this._showSubmenuTimer=setTimeout(()=>{var r=this._getSubmenuByElement(t);r&&!r.isOverlayVisible()&&this._showSubmenu(t)},this._getDelay("show")))}}_clearTimeouts(){clearTimeout(this._hideSubmenuTimer),clearTimeout(this._showSubmenuTimer)}_getSubmenuByElement(e,t){var r=this._getSubmenuByRootElement(e);if(r)return r;t=t||this._getItemData(e);var a=this._dataAdapter.getNodeByItem(t);return this._hasChildren(a)&&this._renderSubmenuItems(a,e)}_updateSubmenuVisibilityOnClick(e){var t=e.args.length&&e.args[0];if(t&&!this._disabledGetter(t.itemData)){var r=(0,b.Z)(t.itemElement),a=this._getSubmenuByElement(r,t.itemData);if(this._updateSelectedItemOnClick(e),this._visibleSubmenu){if(this._visibleSubmenu===a)return void("onClick"===this.option("showFirstSubmenuMode")&&this._hideSubmenu(this._visibleSubmenu));this._hideSubmenu(this._visibleSubmenu)}if(a&&!a.isOverlayVisible())return void this._showSubmenu(r)}}_optionChanged(e){if(Zy.indexOf(e.name)>=0)this._initActions();else switch(e.name){case"orientation":case"submenuDirection":this._invalidate();break;case"showFirstSubmenuMode":case"hideSubmenuOnMouseLeave":break;case"showSubmenuMode":this._changeSubmenusOption(e.name,e.value);break;case"adaptivityEnabled":e.value?this._initAdaptivity():this._removeAdaptivity();break;case"width":this._isAdaptivityEnabled()&&(this._treeView.option(e.name,e.value),this._overlay.option(e.name,e.value)),super._optionChanged(e),this._dimensionChanged();break;case"animation":this._isAdaptivityEnabled()&&this._treeView.option("animationEnabled",!!e.value),super._optionChanged(e);break;default:this._isAdaptivityEnabled()&&(e.name===e.fullName||"items"===e.name)&&this._treeView.option(e.fullName,e.value),super._optionChanged(e)}}_changeSubmenusOption(e,t){(0,j.S6)(this._submenus,(r,a)=>{a.option(e,t)})}selectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}unselectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}}(0,It.Z)("dxMenu",zy);const Wy=zy;var y_={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal",default:"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with",between:"filter-operation-between"},$y={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",between:"between"},ld="filter-row",bh="filter-range-overlay",wh="filter-range-start",Gy="dx-menu",Uy="dx-editor-with-menu",xs="dx-editor-container",x_="dx-editor-cell",E_="dx-highlight-outline",jy="dx-focused",I_="dx-filter-range-content",T_="dx-filter-modified",dd="input:not([type='hidden'])",N4=["date","datetime","number"],F4=ae.Z.format("dxDataGrid-ariaSearchBox");function xo(i){return"onClick"===i.option("filterRow.applyFilter")}var A_=function(i){var e=i&&i.children(),t=e&&e.data("dxComponents"),r=t&&t.length&&e.data(t[0]);return r instanceof Qa.Z?r:null},D_=function(i,e){var t="",r="",a=O_(i,e),n=Te.getFormatOptionsByColumn(e,"filterRow");return Array.isArray(a)?(t=Te.formatValue(a[0],n),""!==(r=Te.formatValue(a[1],n))&&(t+=" - ".concat(r))):(0,m.$K)(a)&&(t=Te.formatValue(a,n)),t};function O_(i,e){if(e)return xo(i)&&void 0!==e.bufferedFilterValue?e.bufferedFilterValue:e.filterValue}var Pa=function(i,e){if(e)return xo(i)&&void 0!==e.bufferedSelectedFilterOperation?e.bufferedSelectedFilterOperation:e.selectedFilterOperation},R_=function(i,e,t){var r=i._columnsController.columnOption(e),a=O_(i,r),n=t.closest(".".concat(i.addWidgetPrefix(bh))).length,s=t.hasClass(i.addWidgetPrefix(wh));return a&&Array.isArray(a)&&"between"===Pa(i,r)?s?a[0]:a[1]:!n&&function(i,e){return!(e&&N4.includes(e.dataType)&&Array.isArray(i))&&void 0!==i}(a,r)?a:null},U4={defaultOptions:()=>({syncLookupFilterValues:!0,filterRow:{visible:!1,showOperationChooser:!0,showAllText:ae.Z.format("dxDataGrid-filterRowShowAllText"),resetOperationText:ae.Z.format("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:ae.Z.format("dxDataGrid-applyFilterText"),operationDescriptions:{equal:ae.Z.format("dxDataGrid-filterRowOperationEquals"),notEqual:ae.Z.format("dxDataGrid-filterRowOperationNotEquals"),lessThan:ae.Z.format("dxDataGrid-filterRowOperationLess"),lessThanOrEqual:ae.Z.format("dxDataGrid-filterRowOperationLessOrEquals"),greaterThan:ae.Z.format("dxDataGrid-filterRowOperationGreater"),greaterThanOrEqual:ae.Z.format("dxDataGrid-filterRowOperationGreaterOrEquals"),startsWith:ae.Z.format("dxDataGrid-filterRowOperationStartsWith"),contains:ae.Z.format("dxDataGrid-filterRowOperationContains"),notContains:ae.Z.format("dxDataGrid-filterRowOperationNotContains"),endsWith:ae.Z.format("dxDataGrid-filterRowOperationEndsWith"),between:ae.Z.format("dxDataGrid-filterRowOperationBetween"),isBlank:ae.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:ae.Z.format("dxFilterBuilder-filterOperationIsNotBlank")},betweenStartText:ae.Z.format("dxDataGrid-filterRowOperationBetweenStartText"),betweenEndText:ae.Z.format("dxDataGrid-filterRowOperationBetweenEndText")}}),controllers:{applyFilter:class W4 extends Nt.ViewController{init(){this._columnsController=this.getController("columns")}_getHeaderPanel(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel}setHighLight(e,t){xo(this)&&(e&&e.toggleClass(E_,t)&&e.closest(".".concat(x_)).toggleClass(T_,t),this._getHeaderPanel().enableApplyButton(t))}applyFilter(){var e=this._columnsController.getColumns();this._columnsController.beginUpdate();for(var t=0;t<e.length;t++){var r=e[t];void 0!==r.bufferedFilterValue&&(this._columnsController.columnOption(t,"filterValue",r.bufferedFilterValue),r.bufferedFilterValue=void 0),void 0!==r.bufferedSelectedFilterOperation&&(this._columnsController.columnOption(t,"selectedFilterOperation",r.bufferedSelectedFilterOperation),r.bufferedSelectedFilterOperation=void 0)}this._columnsController.endUpdate(),this.removeHighLights()}removeHighLights(){if(xo(this)){var e=this.getView("columnHeadersView").element();e.find(".".concat(this.addWidgetPrefix(ld)," .").concat(E_)).removeClass(E_),e.find(".".concat(this.addWidgetPrefix(ld)," .").concat(T_)).removeClass(T_),this._getHeaderPanel().enableApplyButton(!1)}}setCurrentColumnForFiltering(e){this._currentColumn=e}getCurrentColumnForFiltering(){return this._currentColumn}}},extenders:{controllers:{data:i=>class extends i{skipCalculateColumnFilters(){return!1}_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return super._calculateAdditionalFilter();var e=[super._calculateAdditionalFilter()],t=this._columnsController.getVisibleColumns(null,!0),r=this._applyFilterController;return(0,j.S6)(t,function(){var a,n=(null===(a=r.getCurrentColumnForFiltering())||void 0===a?void 0:a.index)===this.index;if(this.allowFiltering&&this.calculateFilterExpression&&(0,m.$K)(this.filterValue)&&!n){var s=this.createFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation,"filterRow");e.push(s)}}),Te.combineFilters(e)}},columnsResizer:i=>class extends i{_startResizing(){if(super._startResizing.apply(this,arguments),this.isResizing()){var e=this._columnHeadersView.getFilterRangeOverlayInstance();if(e){var t=e.$element().closest("td").index();(t===this._targetPoint.columnIndex||t===this._targetPoint.columnIndex+1)&&e.$content().hide()}}}_endResizing(){var e;if(this.isResizing()){var t=this._columnHeadersView.getFilterRangeOverlayInstance();t&&(e=t.$element().closest("td"),this._columnHeadersView._updateFilterRangeOverlay({width:(0,oe.Y_)(e,!0)+1}),t.$content().show())}super._endResizing.apply(this,arguments)}},editing:i=>class extends i{updateFieldValue(e){return e.column.lookup&&(this._needUpdateLookupDataSource=!0),super.updateFieldValue.apply(this,arguments)}_afterSaveEditData(e){var t;return this._needUpdateLookupDataSource&&!e&&(null===(t=this.getView("columnHeadersView"))||void 0===t||t.updateLookupDataSource()),this._needUpdateLookupDataSource=!1,super._afterSaveEditData.apply(this,arguments)}_afterCancelEditData(){return this._needUpdateLookupDataSource=!1,super._afterCancelEditData.apply(this,arguments)}}},views:{columnHeadersView:i=>class extends i{init(){super.init(),this._applyFilterViewController=this.getController("applyFilter")}optionChanged(e){switch(e.name){case"filterRow":case"showColumnLines":this._invalidate(!0,!0),e.handled=!0;break;case"syncLookupFilterValues":e.value?this.updateLookupDataSource():this.render(),e.handled=!0;break;default:super.optionChanged(e)}}_updateEditorValue(e,t){var r=A_(t);r&&r.option("value",R_(this,e.index,t))}_columnOptionChanged(e){var t,a,n,s,o,{optionNames:r}=e;if(Te.checkChanges(r,["filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","filterValues","filterType"])&&void 0!==e.columnIndex){var l=this._columnsController.getVisibleIndex(e.columnIndex),d=this._columnsController.columnOption(e.columnIndex);if(n=(a=null!==(t=this._getCellElement(this.element().find(".".concat(this.addWidgetPrefix(ld))).index(),l))&&void 0!==t?t:(0,b.Z)()).find(".".concat(xs)).first(),r.filterValue||r.bufferedFilterValue){this._updateEditorValue(d,n);var u=a.find(".".concat(this.addWidgetPrefix(bh))).data("dxOverlay");u&&(s=u.$content().find(".".concat(xs)),this._updateEditorValue(d,s.first()),this._updateEditorValue(d,s.last())),(!u||!u.option("visible"))&&this._updateFilterRangeContent(a,D_(this,d))}(r.selectedFilterOperation||r.bufferedSelectedFilterOperation)&&l>=0&&d&&(o=a.find(".".concat(Gy))).length&&(this._updateFilterOperationChooser(o,d,n),"between"===Pa(this,d)?this._renderFilterRangeContent(a,d):n.find(".".concat(I_)).length&&(this._renderEditor(n,this._getEditorOptions(n,d)),this._hideFilterRange()))}else super._columnOptionChanged(e)}_renderCore(){return this._filterRangeOverlayInstance=null,super._renderCore.apply(this,arguments)}_resizeCore(){var e;super._resizeCore.apply(this,arguments),null===(e=this._filterRangeOverlayInstance)||void 0===e||e.repaint()}isFilterRowVisible(){return this._isElementVisible(this.option("filterRow"))}isVisible(){return super.isVisible()||this.isFilterRowVisible()}_initFilterRangeOverlay(e,t){var r=this,a={},n=e.find(".dx-editor-container"),s=r.addWidgetPrefix(bh),o=(0,b.Z)("<div>").addClass(s).appendTo(e);return r._createComponent(o,ss.Z,{height:"auto",shading:!1,showTitle:!1,focusStateEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:s},animation:!1,position:{my:"top",at:"top",of:n.length&&n||e,offset:"0 -1"},contentTemplate(l){var d,u=(0,b.Z)("<div>").addClass("".concat(xs," ").concat(r.addWidgetPrefix(wh))).appendTo(l);return t=r._columnsController.columnOption(t.index),(d=r._getEditorOptions(u,t)).sharedData=a,r._renderEditor(u,d),k.Z.on(u.find(dd),"keydown",c=>{var f=e.find("[tabindex]").not(c.target).first();"tab"===(0,ce.EV)(c)&&c.shiftKey&&(c.preventDefault(),r._hideFilterRange(),f.length||(f=e.prev().find("[tabindex]").last()),k.Z.trigger(f,"focus"))}),u=(0,b.Z)("<div>").addClass("".concat(xs," ").concat(r.addWidgetPrefix("filter-range-end"))).appendTo(l),(d=r._getEditorOptions(u,t)).sharedData=a,r._renderEditor(u,d),k.Z.on(u.find(dd),"keydown",c=>{"tab"===(0,ce.EV)(c)&&!c.shiftKey&&(c.preventDefault(),r._hideFilterRange(),k.Z.trigger(e.next().find("[tabindex]").first(),"focus"))}),(0,b.Z)(l).addClass(r.getWidgetContainerClass())},onShown(l){var d=l.component.$content().find(".".concat(xs)).first();k.Z.trigger(d.find(dd),"focus")},onHidden(){t=r._columnsController.columnOption(t.index),e.find(".".concat(Gy)).parent().addClass(Uy),"between"===Pa(r,t)&&(r._updateFilterRangeContent(e,D_(r,t)),r.component.updateDimensions())}})}_updateFilterRangeOverlay(e){var t=this._filterRangeOverlayInstance;t&&t.option(e)}_showFilterRange(e,t){var r=e.children(".".concat(this.addWidgetPrefix(bh))),a=r.length&&r.data("dxOverlay");!a&&t&&(a=this._initFilterRangeOverlay(e,t)),a.option("visible")||(this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.hide(),this._filterRangeOverlayInstance=a,this._updateFilterRangeOverlay({width:(0,oe.Y_)(e,!0)+1}),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.show())}_hideFilterRange(){var e=this._filterRangeOverlayInstance;e&&e.hide()}getFilterRangeOverlayInstance(){return this._filterRangeOverlayInstance}_createRow(e){var t=super._createRow(e);return"filter"===e.rowType&&(t.addClass(this.addWidgetPrefix(ld)),this.option("useLegacyKeyboardNavigation")||k.Z.on(t,"keydown",r=>np("filterRow",this,r))),t}_getRows(){var e=super._getRows();return this.isFilterRowVisible()&&e.push({rowType:"filter"}),e}_renderFilterCell(e,t){var{column:r}=t,a=(0,b.Z)(e);this.component.option("showColumnHeaders")&&this.setAria("describedby",r.headerId,a),this.setAria("label",ae.Z.format("dxDataGrid-ariaFilterCell"),a),a.addClass(x_);var n=(0,b.Z)("<div>").appendTo(a),s=(0,b.Z)("<div>").addClass(xs).appendTo(n);if("between"===Pa(this,r))this._renderFilterRangeContent(a,r);else{var o=this._getEditorOptions(s,r);this._renderEditor(s,o)}var{alignment:l}=r;l&&"center"!==l&&a.find(dd).first().css("textAlign",r.alignment),r.filterOperations&&r.filterOperations.length&&this._renderFilterOperationChooser(n,r,s)}_renderCellContent(e,t){var r=this,{column:a}=t;if("filter"===t.rowType)if(a.command)e.html("&nbsp;");else if(a.allowFiltering)return void r.renderTemplate(e,r._renderFilterCell.bind(r),t).done(()=>{r._updateCell(e,t)});super._renderCellContent.apply(this,arguments)}_getEditorOptions(e,t){var r=this,a={editorOptions:{inputAttr:r._getFilterInputAccessibilityAttributes(t)}},n=(0,N.l)(a,t,{value:R_(r,t.index,e),parentType:"filterRow",showAllText:r.option("filterRow.showAllText"),updateValueTimeout:"onClick"===r.option("filterRow.applyFilter")?0:700,width:null,setValue(s,o){!function(i,e){var t=""===e.value?null:e.value,r=e.container,a=i._columnsController.columnOption(e.column.index),n=R_(i,a.index,r);if((0,m.$K)(n)||(0,m.$K)(t)){i._applyFilterViewController.setHighLight(r,n!==t);var s=xo(i)?"bufferedFilterValue":"filterValue",o=function(i,e,t,r){if("between"===Pa(i,t)){var a=O_(i,t);return r.hasClass(i.addWidgetPrefix(wh))?[e,Array.isArray(a)?a[1]:void 0]:[Array.isArray(a)?a[0]:a,e]}return e}(i,t,a,r),l="between"===Pa(i,a),d=e.notFireEvent||l&&Array.isArray(o)&&o.includes(void 0);i._columnsController.columnOption(a.index,s,o,d)}}(r,{column:t,value:s,container:e,notFireEvent:o})}});return"between"===Pa(r,t)&&(n.placeholder=e.hasClass(r.addWidgetPrefix(wh))?r.option("filterRow.betweenStartText"):r.option("filterRow.betweenEndText")),n}_getFilterInputAccessibilityAttributes(e){var t=ae.Z.format("dxDataGrid-ariaFilterCell");return this.component.option("showColumnHeaders")?{"aria-label":t,"aria-describedby":e.headerId}:{"aria-label":t}}_renderEditor(e,t){e.empty();var r=(0,b.Z)("<div>").appendTo(e),a=this._dataController.dataSource();if(t.lookup&&this.option("syncLookupFilterValues")){this._applyFilterViewController.setCurrentColumnForFiltering(t);var n=this._dataController.getCombinedFilter();this._applyFilterViewController.setCurrentColumnForFiltering(null);var s=Te.getWrappedLookupDataSource(t,a,n),o=(0,ye.Z)((0,ye.Z)({},t),{lookup:(0,ye.Z)((0,ye.Z)({},t.lookup),{dataSource:s})});return this._editorFactoryController.createEditor(r,o)}return this._editorFactoryController.createEditor(r,t)}_renderFilterRangeContent(e,t){var r=this,a=e.find(".".concat(xs)).first();a.empty();var n=(0,b.Z)("<div>").addClass(I_).attr("tabindex",this.option("tabIndex"));k.Z.on(n,"focusin",()=>{r._showFilterRange(e,t)}),n.appendTo(a),r._updateFilterRangeContent(e,D_(r,t))}_updateFilterRangeContent(e,t){var r=e.find(".".concat(I_));r.length&&(""===t?r.html("&nbsp;"):r.text(t))}_updateFilterOperationChooser(e,t,r){var n,a=this,s=function(){var l=Wy.getInstance(e);l&&l.option("focusedElement",null),n&&a._focusEditor(r)},o=this._editorFactoryController;a._createComponent(e,Wy,{integrationOptions:{},activeStateEnabled:!1,selectionMode:"single",cssClass:"".concat(a.getWidgetContainerClass()," ").concat("dx-cell-focus-disabled"," ").concat("dx-filter-menu"),showFirstSubmenuMode:"onHover",hideSubmenuOnMouseLeave:!0,items:[{disabled:!(t.filterOperations&&t.filterOperations.length),icon:y_[Pa(a,t)||"default"],selectable:!1,items:a._getFilterOperationMenuItems(t)}],onItemRendered:l=>{var{itemElement:d}=l;this.setAria("label",F4,(0,b.Z)(d))},onItemClick(l){var d=l.itemData.name,u=Pa(a,t),c=!1,f=xo(a),p={};if(!(l.itemData.items||d&&d===u)){if(d?(p[f?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=d,("between"===d||"between"===u)&&(c="between"===d,p[f?"bufferedFilterValue":"filterValue"]=null)):(p[f?"bufferedFilterValue":"filterValue"]=null,p[f?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=t.defaultSelectedFilterOperation||null),a._columnsController.columnOption(t.index,p),a._applyFilterViewController.setHighLight(r,!0),!d){var g=A_(r);g&&"dxDateBox"===g.NAME&&!g.option("isValid")&&(g.clear(),g.option("isValid",!0))}c?a._showFilterRange(r.closest(".".concat(x_)),t):a._focusEditor(r)}},onSubmenuShowing(){n=a._isEditorFocused(r),o.loseFocus()},onSubmenuHiding(){k.Z.trigger(e,"blur"),s()},onContentReady(l){k.Z.on(e,"blur",()=>{l.component._hideSubmenuAfterTimeout(),s()})},rtlEnabled:a.option("rtlEnabled")})}_isEditorFocused(e){return e.hasClass(jy)||e.parents(".".concat(jy)).length}_focusEditor(e){this._editorFactoryController.focus(e),k.Z.trigger(e.find(dd),"focus")}_renderFilterOperationChooser(e,t,r){var a;this.option("filterRow.showOperationChooser")&&(e.addClass(Uy),a=(0,b.Z)("<div>").prependTo(e),this._updateFilterOperationChooser(a,t,r))}_getFilterOperationMenuItems(e){var t=this,r=[{}],a=t.option("filterRow"),n=a&&a.operationDescriptions||{};if(e.filterOperations&&e.filterOperations.length){var s=e.filterOperations.filter(o=>(0,m.$K)($y[o]));(r=(0,j.UI)(s,o=>{var l=$y[o];return{name:o,selected:(Pa(t,e)||e.defaultFilterOperation)===o,text:n[l],icon:y_[o]}})).push({name:null,text:a&&a.resetOperationText,icon:y_.default})}return r}_handleDataChanged(e){var t,r,a,n,s,o,l=null===(r=null===(t=this._dataController)||void 0===t?void 0:t.dataSource)||void 0===r?void 0:r.call(t),d=null===(a=l?.lastLoadOptions)||void 0===a?void 0:a.call(l);super._handleDataChanged.apply(this,arguments),(null!==(n=e.operationTypes)&&void 0!==n&&n.filtering||null!==(s=e.operationTypes)&&void 0!==s&&s.fullReload)&&this.updateLookupDataSource((null===(o=e.operationTypes)||void 0===o?void 0:o.filtering)||d?.filter)}updateLookupDataSource(e){if(this.option("syncLookupFilterValues")&&this.element()){var t=this._columnsController.getVisibleColumns(),r=this._dataController.dataSource(),a=this._applyFilterViewController,n=this.element().find(".".concat(this.addWidgetPrefix(ld))).index();-1!==n&&t.forEach((s,o)=>{if(s.lookup&&s.calculateCellValue===s.defaultCalculateCellValue){var l=this._getCellElement(n,o),d=A_(l?.find(".dx-editor-container"));if(d){a.setCurrentColumnForFiltering(s);var u=this._dataController.getCombinedFilter()||null;a.setCurrentColumnForFiltering(null);var c=d.option("dataSource");if(!e||!(0,J.bY)(c.__dataGridSourceFilter||null,u)){var p=Te.getWrappedLookupDataSource(s,r,u);d.option("dataSource",p)}}}})}}},headerPanel:i=>class extends i{init(){super.init(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")}optionChanged(e){"filterRow"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_getToolbarItems(){var e=super._getToolbarItems();return this._prepareFilterItem().concat(e)}_prepareFilterItem(){var e=this,t=[];if(e._isShowApplyFilterButton()){var r=e.option("filterRow.applyFilterText"),n=!e._columnsController.getColumns().filter(o=>void 0!==o.bufferedFilterValue).length;t.push({widget:"dxButton",options:{icon:"apply-filter",disabled:n,onClick:function(){e._applyFilterViewController.applyFilter()},hint:r,text:r,onInitialized:function(o){(0,b.Z)(o.element).addClass(e._getToolbarButtonClass("dx-apply-button"))}},showText:"inMenu",name:"applyFilterButton",location:"after",locateInMenu:"auto",sortIndex:10})}return t}_isShowApplyFilterButton(){var e=this.option("filterRow");return!!e?.visible&&"onClick"===e.applyFilter}enableApplyButton(e){this.setToolbarItemDisabled("applyFilterButton",!e)}isVisible(){return super.isVisible()||this._isShowApplyFilterButton()}}}}};He.registerModule("filterRow",U4),us.setEditorClass(Su.Z);var qy="dx-header-filter",Yy="dx-header-filter-menu";function Xy(i){i=i||[];for(var e=0;e<i.length;e++)i[e].selected=!1,Xy(i[e].items)}function Jy(i){var e="dxTreeView"===i.NAME?".dx-treeview-select-all-item":".dx-list-select-all-checkbox";return i.$element().find(e).dxCheckBox("instance")}function Qy(i,e){if(!i.component.option("searchValue")){var t=Jy(i.component);t&&e&&e.length&&t.option("value",void 0)}}function q4(i,e,t){if(e^t){if(i.selected=!0,t&&i.items)for(var r=0;r<i.items.length;r++)if(!i.items[r].selected){i.selected=void 0;break}}else(t||i.selected)&&(i.selected=!1,Xy(i.items))}var Sh=function(i){return(0,m.$K)(i.allowHeaderFiltering)?i.allowHeaderFiltering:i.allowFiltering},ex=i=>class extends i{optionChanged(e){if("headerFilter"===e.name){var t="columnHeadersView"===this.name;this._invalidate(t,t),e.handled=!0}else super.optionChanged(e)}_applyColumnState(e){var t,{rootElement:r}=e,{column:a}=e;if("headerFilter"===e.name){if(r.find(".".concat(qy)).remove(),Sh(a)){t=super._applyColumnState(e).toggleClass("dx-header-filter-empty",this._isHeaderFilterEmpty(a)),this.option("useLegacyKeyboardNavigation")||t.attr("tabindex",this.option("tabindex")||0);var n=ae.Z.format("dxDataGrid-headerFilterIndicatorLabel",a.caption);t.attr("aria-label",n),t.attr("aria-haspopup","dialog"),t.attr("role","button")}return t}return super._applyColumnState(e)}_isHeaderFilterEmpty(e){return!e.filterValues||!e.filterValues.length}_getIndicatorClassName(e){return"headerFilter"===e?qy:super._getIndicatorClassName(e)}_renderIndicator(e){var t=e.container,r=e.indicator;if("headerFilter"===e.name){var a=this.option("rtlEnabled");if(t.children().length&&(!a&&"right"===e.columnAlignment||a&&"left"===e.columnAlignment))return void t.prepend(r)}super._renderIndicator(e)}},X4={month:i=>vt.Z.getMonthNames()[i-1],quarter:i=>vt.Z.format(new Date(2e3,3*i-1),"quarter")};function tx(i,e,t){return e=e||[],t=t||[],i.forEach(r=>{if((0,m.$K)(r.key)){if(e.push(1===e.length?r.key-1:r.key),r.items)tx(r.items,e,t);else{var n=new Date(Date.UTC.apply(Date,e));t.push(n)}e.pop()}else t.push(null)}),t}function J4(i,e){var t=tx(i),r=(0,Ta.Z)(t),a=Te.getHeaderFilterGroupParameters((0,ye.Z)((0,ye.Z)({},e),{calculateCellValue:n=>n}));return no.Z.queryByOptions(r,{group:a}).toArray()}var n6={defaultOptions:()=>({syncLookupFilterValues:!0,headerFilter:{visible:!1,width:252,height:325,allowSelectAll:!0,search:{enabled:!1,timeout:500,mode:"contains",editorOptions:{}},texts:{emptyValue:ae.Z.format("dxDataGrid-headerFilterEmptyValue"),ok:ae.Z.format("dxDataGrid-headerFilterOK"),cancel:ae.Z.format("dxDataGrid-headerFilterCancel")}}}),controllers:{headerFilter:class t6 extends Nt.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._headerFilterView=this.getView("headerFilterView")}_updateSelectedState(e,t){for(var r=e.length,a="exclude"===t.filterType;r--;){var n=e[r];"items"in e[r]&&this._updateSelectedState(e[r].items,t),q4(n,Te.getIndexByKey(e[r].value,t.filterValues,null)>-1,a)}}_normalizeGroupItem(e,t,r){var a,n,{path:s}=r,{valueSelector:o}=r,{displaySelector:l}=r,{column:d}=r;return o&&l?(a=o(e),n=l(e)):n=a=e.key,e=(0,m.Kn)(e)?(0,N.l)({},e):{},s.push(a),e.value=1===s.length?s[0]:s.join("/"),e.text=this.getHeaderItemText(n,d,t,r.headerFilterOptions),e}getHeaderItemText(e,t,r,a){var n=Te.formatValue(e,function(i,e,t){var r=os.getGroupInterval(e),a=Te.getFormatOptionsByColumn(e,"headerFilter");return r&&(a.groupInterval=r[t],Te.isDateType(e.dataType)?a.format=X4[r[t]]:"number"===e.dataType&&(a.getDisplayFormat=function(){var n={format:e.format,target:"headerFilter"},s=Te.formatValue(i,n),l=Te.formatValue(i+r[t],n);return s&&l?"".concat(s," - ").concat(l):""})),a}(e,t,r));return n||(n=a.texts.emptyValue),n}_processGroupItems(e,t,r,a){var n,s,{column:o}=a,{lookup:l}=o,{level:d}=a;r=r||[],t=t||0,l&&(n=(0,Dt.vb)(l.displayExpr),s=(0,Dt.vb)(l.valueExpr));for(var u=0;u<e.length;u++)e[u]=this._normalizeGroupItem(e[u],t,{column:a.column,headerFilterOptions:a.headerFilterOptions,displaySelector:n,valueSelector:s,path:r}),"items"in e[u]&&(t!==d&&(0,m.$K)(e[u].value)?this._processGroupItems(e[u].items,t+1,r,a):delete e[u].items),r.pop()}getDataSource(e){var t,r=this._dataController.dataSource(),a=r?.remoteOperations().grouping,n=Te.getHeaderFilterGroupParameters(e,a),s=null===(t=e.headerFilter)||void 0===t?void 0:t.dataSource,o=this.option("headerFilter"),l=!1,d={component:this.component};if(r){if((0,m.$K)(s)&&!(0,m.mf)(s))d.dataSource=(0,Cl.aN)(s);else if(e.lookup)if(l=!0,this.option("syncLookupFilterValues")){this._currentColumn=e;var u=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource=Te.getWrappedLookupDataSource(e,r,u)}else d.dataSource=Te.normalizeLookupDataSource(e.lookup);else{var c=Array.isArray(n)?n.length-1:0;this._currentColumn=e;var f=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource={filter:f,group:n,useDefaultSearch:!0,load:w=>{var x=new Y.BH;return w.dataField=e.dataField||e.name,r.load(w).done(y=>{var E=a&&function Q4(i){return"Z"===i?.slice(-1)||"'Z'"===i?.slice(-3)}(e.serializationFormat)&&c>3;E&&(y=J4(y,e)),g._processGroupItems(y,null,null,{level:c,column:e,headerFilterOptions:o}),x.resolve(y)}).fail(x.reject),x}}}(0,m.mf)(s)&&s.call(e,d);var p=d.dataSource.postProcess,g=this;return d.dataSource.postProcess=function(w){var x=w;return l&&(x=x.filter(y=>null!==y[e.lookup.valueExpr]),0===this.pageIndex()&&!this.searchValue()&&(x=x.slice(0)).unshift(null),g._processGroupItems(x,null,null,{level:0,column:e,headerFilterOptions:o})),x=p&&p.call(this,x)||x,g._updateSelectedState(x,e),x},d.dataSource}}getCurrentColumn(){return this._currentColumn}showHeaderFilterMenu(e,t){var r=this._columnsController,a=(0,N.l)(!0,{},this._columnsController.getColumns()[e]);if(a){var n=r.getVisibleIndex(e),o=this.getView(t?"headerPanel":"columnHeadersView").getColumnElements().eq(t?a.groupIndex:n);this.showHeaderFilterMenuBase({columnElement:o,column:a,applyFilter:!0,apply(){r.columnOption(e,{filterValues:this.filterValues,filterType:this.filterType})}})}}showHeaderFilterMenuBase(e){var{column:t}=e;if(t){var r=os.getGroupInterval(t),a=this._dataController.dataSource(),n=a&&a.remoteOperations().filtering,s=e.onHidden;(0,N.l)(e,t,{type:r&&r.length>1?"tree":"list",remoteFiltering:n,onShowing:o=>{var l=o.component.$overlayContent().dxResizable("instance");l&&l.option("onResizeEnd",d=>{var u=this._columnsController.columnOption(e.dataField,"headerFilter");(u=u||{}).width=d.width,u.height=d.height,this._columnsController.columnOption(e.dataField,"headerFilter",u,!0)})},onHidden:()=>{s?.(),ap(this)}}),e.dataSource=this.getDataSource(e),e.isFilterBuilder&&(e.dataSource.filter=null,e.alignment="right"),this._headerFilterView.showHeaderFilterMenu(e.columnElement,e)}}hideHeaderFilterMenu(){this._headerFilterView.hideHeaderFilterMenu()}}},views:{headerFilterView:class Y4 extends Nt.View{getPopupContainer(){return this._popupContainer}getListComponent(){return this._listComponent}applyHeaderFilter(e){var t=this.getListComponent(),r=t.option("searchValue"),a=Jy(t),s=[];r||e.isFilterBuilder||!a?.option("value")?"tree"===e.type&&(e.filterType&&(e.filterType="include"),function o(l,d,u){(0,j.S6)(d,(c,f)=>{if(void 0!==f.selected&&!!f.selected^u){var p=t._getNode(f),w=t._hasChildren(p)&&f.items&&f.items.some(x=>x.selected);if(!r||!w)return void l.push(f.value)}f.items&&f.items.length&&o(l,f.items,u)})}(s,t.option("items"),!1),e.filterValues=s):("tree"===e.type&&(e.filterType="exclude"),Array.isArray(e.filterValues)&&(e.filterValues=[])),e.filterValues&&!e.filterValues.length&&(e.filterValues=null),e.apply(),this.hideHeaderFilterMenu()}showHeaderFilterMenu(e,t){if(t){this._initializePopupContainer(t);var r=this.getPopupContainer();this.hideHeaderFilterMenu(),this.updatePopup(e,t),r.show()}}hideHeaderFilterMenu(){var e=this.getPopupContainer();e&&e.hide()}updatePopup(e,t){var r=this.option("showColumnLines"),a="right"===t.alignment^!r?"left":"right";this._popupContainer.setAria({role:"dialog",label:ae.Z.format("dxDataGrid-headerFilterLabel")}),this._popupContainer&&(this._cleanPopupContent(),this._popupContainer.option("position",{my:"".concat(a," top"),at:"".concat(a," bottom"),of:e,collision:"fit fit"}))}_getSearchExpr(e,t){var{lookup:r}=e,{useDefaultSearchExpr:a}=e,n=t.dataSource,s=t.search.searchExpr;if(s)return s;if(a||(0,m.$K)(n)&&!(0,m.mf)(n))return"text";if(r)return r.displayExpr||"this";if(e.dataSource){var{group:o}=e.dataSource;if(Array.isArray(o)&&o.length>0)return o[0].selector;if((0,m.mf)(o)&&!e.remoteFiltering)return o}return e.dataField||e.selector}_cleanPopupContent(){this._popupContainer&&this._popupContainer.$content().empty()}_initializePopupContainer(e){var t=this,r=t.element(),a=this._normalizeHeaderFilterOptions(e),{height:n,width:s}=a,o={width:s,height:n,visible:!1,shading:!1,showTitle:!1,showCloseButton:!1,hideOnParentScroll:!1,dragEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:Yy},focusStateEnabled:!1,toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:a.texts.ok,onClick(){t.applyHeaderFilter(e)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:a.texts.cancel,onClick(){t.hideHeaderFilterMenu()}}}],resizeEnabled:!0,onShowing(l){l.component.$content().parent().addClass("dx-dropdowneditor-overlay"),t._initializeListContainer(e,a),e.onShowing&&e.onShowing(l)},onShown(){t.getListComponent().focus()},onHidden:e.onHidden,onInitialized(l){var{component:d}=l;d.option("animation",d._getDefaultOptions().animation)}};(0,m.$K)(t._popupContainer)?t._popupContainer.option(o):t._popupContainer=t._createComponent(r,Ja.Z,o)}_initializeListContainer(e,t){var r=this,a=r._popupContainer.$content(),n=!e.isFilterBuilder&&t.allowSelectAll,s={searchEnabled:t.search.enabled,searchTimeout:t.search.timeout,searchEditorOptions:t.search.editorOptions,searchMode:t.search.mode||"",dataSource:e.dataSource,onContentReady(){r.renderCompleted.fire()},itemTemplate(l,d,u){var c=(0,b.Z)(u);return e.encodeHtml?c.text(l.text):c.html(l.text)}};function o(l){"searchValue"===l.fullName&&n&&!1!==r.option("headerFilter.hideSelectAllOnSearch")&&("tree"===e.type?l.component.option("showCheckBoxesMode",l.value?"normal":"selectAll"):l.component.option("selectionMode",l.value?"multiple":"all"))}r._listComponent="tree"===e.type?r._createComponent((0,b.Z)("<div>").appendTo(a),Mu,(0,N.l)(s,{showCheckBoxesMode:n?"selectAll":"normal",onOptionChanged:o,keyExpr:"id"})):r._createComponent((0,b.Z)("<div>").appendTo(a),Ul,(0,N.l)(s,{searchExpr:r._getSearchExpr(e,t),pageLoadMode:"scrollBottom",showSelectionControls:!0,selectionMode:n?"all":"multiple",onOptionChanged:o,onSelectionChanged(l){var d=l.component.option("items"),u=l.component.option("selectedItems");if(!l.component._selectedItemsUpdating&&!l.component.option("searchValue")&&!e.isFilterBuilder){var c=e.filterValues||[];0===u.length&&d.length&&(c.length<=1||"exclude"===e.filterType&&c.length===d.length-1)?(e.filterType="include",e.filterValues=[]):u.length===d.length&&(e.filterType="exclude",e.filterValues=[])}(0,j.S6)(d,(p,g)=>{var w=Te.getIndexByKey(g,u,null)>=0;if(!!g.selected!==w){g.selected=w,e.filterValues=e.filterValues||[];var y=Te.getIndexByKey(g.value,e.filterValues,null);y>=0&&e.filterValues.splice(y,1),w^"exclude"===e.filterType&&e.filterValues.push(g.value)}}),Qy(l,e.filterValues)},onContentReady(l){var{component:d}=l,u=d.option("items"),c=[];(0,j.S6)(u,function(){this.selected&&c.push(this)}),d._selectedItemsUpdating=!0,d.option("selectedItems",c),d._selectedItemsUpdating=!1,Qy(l,e.filterValues)}}))}_normalizeHeaderFilterOptions(e){var t=this.option("headerFilter")||{},r=e.headerFilter||{};return(0,N.l)(!0,{},t,{search:{enabled:t.allowSearch,timeout:t.searchTimeout}},r,{search:{enabled:r.allowSearch,mode:r.searchMode,timeout:r.searchTimeout}})}_renderCore(){this.element().addClass(Yy)}}},extenders:{controllers:{data:i=>class extends i{skipCalculateColumnFilters(){return!1}_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return super._calculateAdditionalFilter();var e=[super._calculateAdditionalFilter()],t=this._columnsController.getVisibleColumns(null,!0),a=this._headerFilterController.getCurrentColumn();return(0,j.S6)(t,(n,s)=>{var o;if((!a||a.index!==s.index)&&Sh(s)&&s.calculateFilterExpression&&Array.isArray(s.filterValues)&&s.filterValues.length){var l=[];(0,j.S6)(s.filterValues,(d,u)=>{Array.isArray(u)?o=u:(s.deserializeValue&&!Te.isDateType(s.dataType)&&"number"!==s.dataType&&(u=s.deserializeValue(u)),o=s.createFilterExpression(u,"=","headerFilter")),o&&(o.columnIndex=s.index),l.push(o)}),l=Te.combineFilters(l,"or"),e.push("exclude"===s.filterType?["!",l]:l)}}),Te.combineFilters(e)}}},views:{columnHeadersView:i=>class extends(ex(i)){_renderCellContent(e,t){var r,{column:a}=t;!a.command&&Sh(a)&&this.option("headerFilter.visible")&&"header"===t.rowType&&(r=this._applyColumnState({name:"headerFilter",rootElement:e,column:a,showColumnLines:this.option("showColumnLines")}))&&this._subscribeToIndicatorEvent(r,a,"headerFilter"),super._renderCellContent.apply(this,arguments)}_subscribeToIndicatorEvent(e,t,r){"headerFilter"===r&&k.Z.on(e,Pt.u,this.createAction(a=>{a.event.stopPropagation(),Gg(e,this),this._headerFilterController.showHeaderFilterMenu(t.index,!1)}))}_updateIndicator(e,t,r){var a=super._updateIndicator(e,t,r);a&&this._subscribeToIndicatorEvent(a,t,r)}_updateHeaderFilterIndicators(){this.option("headerFilter.visible")&&this._updateIndicators("headerFilter")}_needUpdateFilterIndicators(){return!0}_columnOptionChanged(e){var{optionNames:t}=e,r=Te.checkChanges(t,["filterValues","filterValue"]),a=Te.checkChanges(t,["filterValues","filterType"]);(r||a)&&this._needUpdateFilterIndicators()&&this._updateHeaderFilterIndicators(),a||super._columnOptionChanged(e)}},headerPanel:i=>class extends(ex(i)){_createGroupPanelItem(e,t){var a,r=super._createGroupPanelItem.apply(this,arguments);return!t.command&&Sh(t)&&this.option("headerFilter.visible")&&(a=this._applyColumnState({name:"headerFilter",rootElement:r,column:{alignment:(0,di.q)(this.option("rtlEnabled")),filterValues:t.filterValues,allowHeaderFiltering:!0,caption:t.caption},showColumnLines:!0}))&&k.Z.on(a,Pt.u,this.createAction(n=>{var{event:s}=n;s.stopPropagation(),this._headerFilterController.showHeaderFilterMenu(t.index,!0)})),r}}}}};He.registerModule("headerFilter",n6);var yh="dx-filterbuilder-range",s6="".concat(yh,"-start"),o6="".concat(yh,"-end"),l6="".concat(yh,"-separator"),ix="\u2013";function d6(i,e){var t=(0,b.Z)("<div>").addClass(s6),r=(0,b.Z)("<div>").addClass(o6),a=i.value||[],n=function(o){return o&&o.length>0?o[0]:null},s=function(o){return o&&2===o.length?o[1]:null};e.append(t),e.append((0,b.Z)("<span>").addClass(l6).text(ix)),e.append(r),e.addClass(yh),this._editorFactory.createEditor.call(this,t,(0,N.l)({},i.field,i,{value:n(a),parentType:"filterBuilder",setValue(o){a=[o,s(a)],i.setValue(a)}})),this._editorFactory.createEditor.call(this,r,(0,N.l)({},i.field,i,{value:s(a),parentType:"filterBuilder",setValue(o){a=[n(a),o],i.setValue(a)}}))}function rx(i,e){return{name:"between",caption:i,icon:"range",valueSeparator:ix,dataTypes:["number","date","datetime"],editorTemplate:d6.bind(e),notForLookup:!0}}var u6={"=":"equal","<>":"notequal","<":"less","<=":"lessorequal",">":"greater",">=":"greaterorequal",notcontains:"doesnotcontain",contains:"contains",startswith:"startswith",endswith:"endswith",isblank:"isblank",isnotblank:"isnotblank"},h6={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",isblank:"isBlank",isnotblank:"isNotBlank",between:"between"};const ax_getIconByFilterOperation=i=>u6[i],ax_getNameByFilterOperation=i=>h6[i];var L_="string",nx="icon-none",Pn="and",P_="=",p6={number:["=","<>","<",">","<=",">=","isblank","isnotblank"],string:["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"],date:["=","<>","<",">","<=",">=","isblank","isnotblank"],datetime:["=","<>","<",">","<=",">=","isblank","isnotblank"],boolean:["=","<>","isblank","isnotblank"],object:["isblank","isnotblank"]},f6={date:"shortDate",datetime:"shortDateShortTime"},_6=["=","<>","isblank","isnotblank"],v6=["caption","customizeText","dataField","dataType","editorTemplate","falseText","editorOptions","filterOperations","format","lookup","trueText","calculateFilterExpression","name"],sx="".concat("dx-filterbuilder","-text"),m6="".concat(sx,"-part"),ox="".concat(sx,"-separator"),C6="".concat(ox,"-empty");function Es(i){return i&&i.length>1&&"!"===i[0]&&!wi(i)}function nn(i){return Es(i)?i[1]:i}function lx(i){if(wi(i))return Pn;for(var e="",t=0;t<i.length;t++){var r=i[t];if(!Array.isArray(r)){if(e&&e!==r)throw new Hu.R0.Error("E4019");"!"!==r&&(e=r)}}return e}function Is(i){var e=nn(i),t=lx(e);return t||(t=Pn),e!==i&&(t="!".concat(t)),t}function dx(i){var e=function I6(i){return Array.isArray(i)&&i.length}(i.filterOperations)?i.filterOperations:function E6(i){return i.lookup&&_6||p6[i.dataType||L_]}(i);return(0,N.l)([],e)}function B_(i,e){var t=ax_getNameByFilterOperation(i);return e&&e[t]?e[t]:t}function sn(i,e){var t=i.filter(r=>r.name===e);return t.length?t[0]:null}function V_(i){return i.defaultFilterOperation||dx(i)[0]}function N_(i,e){var t=nn(i),r=t.indexOf(e);return t.splice(r,1),1!==t.length&&t.splice(r,1),i}function ux(i){var e=F_(i),t=e?k_(i):i;return e?["!",[t]]:[t]}function xh(i,e){var t=nn(e),r=Is(t);return 1===t.length?t.unshift(i):t.push(i,r),e}function Eh(i,e){for(var t=0;t<e.length;t++)if(e[t].name===i||e[t].dataField.toLowerCase()===i.toLowerCase())return e[t];var r=Cx(e,!0).filter(a=>a.dataField.toLowerCase()===i.toLowerCase());if(r.length>0)return r[0];throw new Rt.Z.Error("E1047",i)}function Bn(i){return!!Array.isArray(i)&&(i.length<2||Array.isArray(i[0])||Array.isArray(i[1]))}function wi(i){return!!Array.isArray(i)&&i.length>1&&!Array.isArray(i[0])&&!Array.isArray(i[1])}function hx(i,e,t){t=t||Pn;for(var r=lx(i).toLowerCase()||t,a=[],n=0;n<i.length;n++)Bn(i[n])?(a.push(Z_(i[n],e,t)),a=H_(a,r)):wi(i[n])&&(a.push(Ih(i[n],e)),a=H_(a,r));return 0===a.length&&(a=H_(a,r)),a}function Ih(i,e){return function O6(i,e){var t=sn(e,i[1]);return t&&t.name===i[1]}(i,e)||i.length<3&&(i[2]=i[1],i[1]=P_),i}function F_(i){return-1!==i.indexOf("not")}function k_(i){return i.substring(3).toLowerCase()}function M_(i,e){var t=F_(e);return e=t?k_(e):e,t?["!",i,e]:[i,e]}function H_(i,e){var t=F_(e);e=t?k_(e):e,i.push(e);var r=i;return t&&(r=["!",r]),r}function Z_(i,e,t){return t=t||Pn,i?wi(i=(0,N.l)(!0,[],i))?M_(Ih(i,e),t):Es(i)?["!",wi(i[1])?M_(Ih(i[1],e),t):Es(i[1])?M_(Z_(i[1],e),t):hx(i[1],e,t)]:hx(i,e,t):ux(t)}function cx(i,e,t,r){var a=Eh(i[0],e),n=Ih(i,t),s=t.length&&sn(t,n[1]);return s&&s.calculateFilterExpression?s.calculateFilterExpression.apply(s,[n[2],a,e]):a.createFilterExpression?a.createFilterExpression.apply(a,[n[2],n[1],r]):a.calculateFilterExpression?a.calculateFilterExpression.apply(a,[n[2],n[1],r]):a.defaultCalculateFilterExpression.apply(a,[n[2],n[1],r])}function Eo(i,e,t,r){if(!(0,m.$K)(i))return null;if(Es(i))return["!",Eo(i[1],e,t,r)];var n=nn(i);if(wi(n))return cx(n,e,t,r)||null;for(var o,s=[],l=Is(n),d=0;d<n.length;d++)Bn(n[d])?(o=Eo(n[d],e,t,r))&&(d&&s.push(l),s.push(o)):wi(n[d])&&(o=cx(n[d],e,t,r))&&(s.length&&s.push(l),s.push(o));return 1===s.length&&(s=s[0]),s.length?s:null}function ud(i){var t,e=nn(i);if(0===e.length)return null;var r=[];for(t=0;t<e.length;t++)if(Bn(e[t])){var a=ud(e[t]);a?e[t]=a:r.push(e[t])}else wi(e[t])&&(P6(e[t])||r.push(e[t]));for(t=0;t<r.length;t++)N_(e,r[t]);return 1===e.length||(e.splice(e.length-1,1),1===e.length&&(i=function w6(i,e){return Es(i)?i[1]=e:i=e,i}(i,e[0])),0===i.length)?null:i}function px(i,e,t){if(""!==e){var{lookup:r}=i;if(r.items)t(r.calculateCellValue(e)||"");else{var a=(0,m.mf)(r.dataSource)?r.dataSource({}):r.dataSource;new xn.o(a).loadSingle(r.valueExpr,e).done(s=>{var o="";s&&(o=r.displayExpr?(0,Dt.vb)(r.displayExpr)(s):s),i.customizeText&&(o=i.customizeText({value:e,valueText:o})),t(o)}).fail(()=>{t("")})}}else t("")}function fx(i,e,t,r,a){var n;return n=!0===e?i.trueText||ae.Z.format("dxDataGrid-trueText"):!1===e?i.falseText||ae.Z.format("dxDataGrid-falseText"):function b6(i,e){return nm.Z.format(e,i.format||f6[i.dataType])}(i,e),i.customizeText&&(n=i.customizeText.call(i,{value:e,valueText:n,target:r})),t&&t.customizeText&&(n=t.customizeText.call(t,{value:e,valueText:n,field:i,target:r},a)),n}function z_(i){return""===i||null===i}function _x(i,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"filterBuilder";if(z_(e))return"";if(Array.isArray(e)){var a=new Y.BH;return Y.gx.apply(this,function L6(i,e,t,r){var a={values:e};return e.map(n=>fx(i,n,t,r,a))}(i,e,t,r)).done(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var l=s.some(d=>!z_(d))?s.map(d=>z_(d)?"?":d):"";a.resolve(l)}),a}return fx(i,e,t,r)}function vx(i,e){return i.some(t=>t.dataField===e)}function gx(i,e,t){var{dataField:r}=t;W_(r)&&(t.parentId=bx(r),!vx(e,t.parentId)&&!vx(i,t.parentId)&&gx(i,e,{id:t.parentId,dataType:"object",dataField:t.parentId,caption:mx(t.parentId,!0),filterOperations:["isblank","isnotblank"],defaultCalculateFilterExpression:os.defaultCalculateFilterExpression})),e.push(t)}function mx(i,e){var t="";if(e)i=i.substring(i.lastIndexOf(".")+1);else if(W_(i))return i.split(".").forEach((r,a,n)=>{t+=(0,ur.GK)(r),a!==n.length-1&&(t+=".")}),t;return(0,ur.GK)(i)}function Cx(i,e){for(var t=[],r=0;r<i.length;r++){var a=(0,N.l)(!0,{caption:mx(i[r].dataField,e)},i[r]);a.id=a.name||a.dataField,e?gx(i,t,a):t.push(a)}return t}function W_(i){return-1!==i.lastIndexOf(".")}function bx(i){return i.substring(0,i.lastIndexOf("."))}function wx(i,e){if(W_(i.dataField))for(var t=bx(i.dataField),r=0;r<e.length;r++)if(e[r].dataField===t)return"".concat(wx(e[r],e),".").concat(i.caption);return i.caption}function $_(i,e,t){var r=sn(t,e);return r?(!1===r.hasValue?(i[1]=e,i.length=2):(i[1]=e,i[2]=""),i):("isblank"===e?(i[1]=P_,i[2]=null):"isnotblank"===e?(i[1]="<>",i[2]=null):(((r=sn(t,i[1]))||2===i.length||null===i[2])&&(i[2]=""),i[1]=e),i)}function Sx(i){return null===i[2]?i[1]===P_?"isblank":"isnotblank":i[1]}function P6(i){return""!==i[2]}function hd(i,e){return i[0]===e}function K_(i,e){return i&&0!==i.length?wi(i)?hd(i,e)?null:i:yx(i,[e],!1):null}function yx(i,e,t){var r=[];return i.forEach(a=>{wi(a)?hd(a,e[0])?t?(r.push(e),t=!1):r.splice(r.length-1,1):r.push(a):(r.length||Bn(a))&&r.push(a)}),0===r.length?null:(t&&(r.push(Pn),r.push(e)),1===r.length?r[0]:r)}function xx(i,e){return null===i||0===i.length?e:wi(i)?hd(i,e[0])?e:[i,Pn,e]:Is(i)!==Pn?[e,"and",i]:yx(i,e,!0)}function Ex(i,e){return null!==i&&0!==i.length&&(wi(i)?i[0]===e:i.some(t=>(wi(t)||Bn(t))&&Ex(t,e)))}var G_=function(i,e,t){if(Array.isArray(e)){var r=e.length-1;i.empty(),e.forEach((a,n)=>{(0,b.Z)("<span>").addClass(m6).text(a).appendTo(i),n!==r&&(0,b.Z)("<span>").addClass(ox).text(t&&t.valueSeparator?t.valueSeparator:"|").addClass(C6).appendTo(i)})}else i.text(e||ae.Z.format("dxFilterBuilder-enterValueText"))};function Ix(i){var e=function(r,a){return a?"".concat(a,"/").concat(r):r},t=i&&i.getController("headerFilter");return{dataTypes:["string","date","datetime","number","boolean","object"],calculateFilterExpression:function(r,a,n){var s=[],o=r.length-1;return r&&r.forEach((l,d)=>{if(wi(l)||Bn(l)){var u=Eo(l,n,[],"headerFilter");s.push(u)}else{var c=Eo([a.dataField,"=",l],n,[],"headerFilter");s.push(c)}d!==o&&s.push("or")}),1===s.length?s[0]:s},editorTemplate(r,a){var n=(0,b.Z)("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(a),s=(0,N.l)(!0,{},i.columnOption(r.field.dataField));return G_(n,r.text&&r.text.split("|")),s.filterType="include",s.filterValues=r.value?r.value.slice():[],t.showHeaderFilterMenuBase({columnElement:n,column:s,apply(){r.setValue(this.filterValues),t.hideHeaderFilterMenu(),r.closeEditor()},onHidden(){r.closeEditor()},isFilterBuilder:!0}),a},customizeText:function(r,a){a=a||{};var{value:n}=r,s=i.columnOption(r.field.dataField),o=s&&s.headerFilter,l=s&&s.lookup,d=a.values||[n];if(o&&o.dataSource||l&&l.dataSource){var u=new Y.BH,c=a.items||new Y.BH;if(!a.items){s=(0,N.l)({},s,{filterType:"include",filterValues:d});var f=t.getDataSource(s);f.paginate=!1;var p=new xn.o(f),g=p.store().key();if(g){var{values:w}=a;if(w&&w.length>1){var x=w.reduce((E,V)=>(E.length&&E.push("or"),E.push([g,"=",V]),E),[]);p.filter(x)}else p.filter([g,"=",r.value])}else r.field.calculateDisplayValue&&Rt.Z.log("W1017");a.items=c,p.load().done(c.resolve)}return c.done(E=>{var V=d.indexOf(r.value);u.resolve(function F(q,ee){var X=[];return q.forEach(M=>{if(M.items){var le=F(M.items,e(M.text,ee));X=X.concat(le)}M.selected&&X.push(e(M.text,ee))}),X}(E,null)[V])}),u}return t.getHeaderItemText(n,s,0,i.option("headerFilter"))}}}function N6(i){return(0,N.l)(Ix(i),{name:"anyof",icon:"selectall",caption:ae.Z.format("dxFilterBuilder-filterOperationAnyOf")})}function F6(i){var e=Ix(i);return(0,N.l)({},e,{calculateFilterExpression(t,r,a){var n=e.calculateFilterExpression(t,r,a);return n&&0!==n.length?"!"===n[0]?n:["!",n]:null},name:"noneof",icon:"unselectall",caption:ae.Z.format("dxFilterBuilder-filterOperationNoneOf")})}var k6=["=","<>","<","<=",">",">=","notcontains","contains","startswith","endswith","between"],Tx="include",cd="exclude";function Ba(i){return i.name||i.dataField}var U_=function(){return{filterType:Tx,filterValues:void 0}},Ax=function(i){var e=i.filterValues||[];return!os.getGroupInterval(i)&&!(i.headerFilter&&i.headerFilter.dataSource)||1===e.length&&null===e[0]},Dx=function(i){if((0,m.$K)(i.filterValue)){var t=i.selectedFilterOperation||i.defaultFilterOperation||V_(i);return[Ba(i),t,i.filterValue]}return null},Ox=function(i){var e,t,{filterValues:r}=i;return r?(1===r.length&&Ax(i)&&!Array.isArray(r[0])?(e=i.filterType===cd?"<>":"=",t=r[0]):(e=i.filterType===cd?"noneof":"anyof",t=r),[Ba(i),e,t]):null},Rx=function(i,e,t){var r=function(i,e){if(!i)return U_();var t,r=i[1],a=i[2],n=Array.isArray(a);if(!n&&!Ax(e))return U_();switch(r){case"anyof":case"=":t=Tx;break;case"noneof":case"<>":t=cd;break;default:return U_()}return{filterType:t,filterValues:n?a:[a]}}(t,e);i.columnOption(Ba(e),r)},Lx=function(i,e,t){var r,a=t?.[1],n=t?.[2],s=e.filterOperations||e.defaultFilterOperations;(!s||s.indexOf(a)>=0||a===e.defaultFilterOperation)&&k6.includes(a)&&null!==n?(a===e.defaultFilterOperation&&!(0,m.$K)(e.selectedFilterOperation)&&(a=e.selectedFilterOperation),r={filterValue:n,selectedFilterOperation:a}):r={filterValue:void 0,selectedFilterOperation:void 0},i.columnOption(Ba(e),r)},$6={defaultOptions:()=>({filterValue:null,filterSyncEnabled:"auto"}),controllers:{filterSync:class Z6 extends Nt.Controller{init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._dataController.isFilterSyncActive()&&(this._columnsController.isAllDataTypesDefined()?this._initSync():this._dataController.dataSourceChanged.add(()=>this._initSync()))}publicMethods(){return["getCustomFilterOperations"]}syncFilterValue(){var e=this,t=this._columnsController.getFilteringColumns();this._skipSyncColumnOptions=!0,t.forEach(r=>{var a=function V6(i,e){return null===i||0===i.length?[]:wi(i)?hd(i,e)?[i]:[]:Is(i)!==Pn?[]:i.filter(a=>wi(a)&&hd(a,e))}(e.option("filterValue"),Ba(r));if(1===a.length){var n=a[0];Rx(this._columnsController,r,n),Lx(this._columnsController,r,n)}else(0,m.$K)(r.filterValues)&&Rx(this._columnsController,r,null),(0,m.$K)(r.filterValue)&&Lx(this._columnsController,r,null)}),this._skipSyncColumnOptions=!1}_initSync(){var e=this._columnsController.getColumns(),t=this._dataController.pageIndex();if(function M6(i){i.forEach(e=>{var t=Ba(e);if(!(0,m.$K)(t)&&e.allowFiltering)throw new Rt.Z.Error("E1049",e.caption)})}(e),!this.option("filterValue")){var r=this._columnsController.getFilteringColumns(),a=this.getFilterValueFromColumns(r);this._silentOption("filterValue",a)}this.syncFilterValue(),this._dataController.pageIndex(t)}_getSyncFilterRow(e,t){var r=Dx(t);return(0,m.$K)(r)?xx(e,r):K_(e,Ba(t))}_getSyncHeaderFilter(e,t){var r=Ox(t);return r?xx(e,r):K_(e,Ba(t))}getFilterValueFromColumns(e){if(!this._dataController.isFilterSyncActive())return null;var t=["and"];return e&&e.forEach(r=>{var a=Ox(r),n=Dx(r);a&&xh(a,t),n&&xh(n,t)}),ud(t)}syncFilterRow(e,t){this.option("filterValue",this._getSyncFilterRow(this.option("filterValue"),e))}syncHeaderFilter(e){this.option("filterValue",this._getSyncHeaderFilter(this.option("filterValue"),e))}getCustomFilterOperations(){var e,t=null!==(e=this.option("filterBuilder.customOperations"))&&void 0!==e?e:[];return[N6(this.component),F6(this.component)].concat(t)}}},extenders:{controllers:{data:i=>class extends i{optionChanged(e){switch(e.name){case"filterValue":this._applyFilter(),this.isFilterSyncActive()&&this._filterSyncController.syncFilterValue(),e.handled=!0;break;case"filterSyncEnabled":e.handled=!0;break;case"columns":if(this.isFilterSyncActive()){var t=this._columnsController.getColumnByPath(e.fullName);if(t&&!this._filterSyncController._skipSyncColumnOptions){var r=this._parseColumnPropertyName(e.fullName);this._filterSyncController._skipSyncColumnOptions=!0,"filterType"===r?(cd===e.value||cd===e.previousValue)&&this._filterSyncController.syncHeaderFilter(t):"filterValues"===r?this._filterSyncController.syncHeaderFilter(t):["filterValue","selectedFilterOperation"].includes(r)&&this._filterSyncController.syncFilterRow(t,t.filterValue),this._filterSyncController._skipSyncColumnOptions=!1}}super.optionChanged(e);break;default:super.optionChanged(e)}}isFilterSyncActive(){var e=this.option("filterSyncEnabled");return"auto"===e?this.option("filterPanel.visible"):e}skipCalculateColumnFilters(){return((0,m.$K)(this.option("filterValue"))||this._filterSyncController._skipSyncColumnOptions)&&this.isFilterSyncActive()}_calculateAdditionalFilter(){if(!1===this.option("filterPanel.filterEnabled"))return super._calculateAdditionalFilter();var e=[super._calculateAdditionalFilter()],t=this._columnsController.getFilteringColumns(),r=this.option("filterValue");if(this.isFilterSyncActive()){var a=this._headerFilterController.getCurrentColumn(),n=this._applyFilterController.getCurrentColumnForFiltering(),s=a||n;(a||(0,m.$K)(n?.filterValue))&&r&&(r=K_(r,Ba(s)))}var d=Eo(r,t,this._filterSyncController.getCustomFilterOperations(),"filterBuilder");return d&&e.push(d),Te.combineFilters(e)}_parseColumnPropertyName(e){var t=e.match(/.*\.(.*)/);return t?t[1]:null}clearFilter(e){this.component.beginUpdate(),arguments.length>0?("filterValue"===e&&this.option("filterValue",null),super.clearFilter(e)):(this.option("filterValue",null),super.clearFilter()),this.component.endUpdate()}_applyFilter(){return this._filterSyncController._skipSyncColumnOptions?(new Y.BH).resolve():super._applyFilter.apply(this,arguments)}}},views:{columnHeadersView:i=>class extends i{optionChanged(e){"filterValue"===e.name?this._updateHeaderFilterIndicators():super.optionChanged(e)}_isHeaderFilterEmpty(e){return this._dataController.isFilterSyncActive()?!Ex(this.option("filterValue"),Ba(e)):super._isHeaderFilterEmpty(e)}_needUpdateFilterIndicators(){return!this._dataController.isFilterSyncActive()}}}}};He.registerModule("filterSync",$6);var Ar="dx-filterbuilder",Io="".concat(Ar,"-group"),Px="".concat(Io,"-item"),Bx="".concat(Io,"-content"),K6="".concat(Io,"-operations"),G6="".concat(Io,"-operation"),j_="".concat(Ar,"-action"),Vx="".concat(j_,"-icon"),pd="".concat(Ar,"-text"),q6="".concat(Ar,"-item-field"),Y6="".concat(Ar,"-item-operation"),Nx="".concat(Ar,"-item-value"),X6="".concat(Ar,"-item-value-text"),J6="".concat(Ar,"-overlay"),Q6="".concat(Ar,"-operations"),eH="".concat(Ar,"-fields"),tH="".concat(Ar,"-add-condition"),Th="dx-state-active",iH="".concat(Ar,"-menu-custom-operation"),Fx="filterBuilder",q_="enter",aH=[{name:"onEditorPreparing",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onEditorPrepared",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onValueChanged",config:{excludeValidators:["disabled","readOnly"]}}],Hx={and:"and",or:"or",notAnd:"!and",notOr:"!or"},nH=Nw(class{});class Zx extends hr.default{_getDefaultOptions(){return(0,N.l)(super._getDefaultOptions(),{onEditorPreparing:null,onEditorPrepared:null,onValueChanged:null,fields:[],groupOperations:["and","or","notAnd","notOr"],maxGroupLevel:void 0,value:null,allowHierarchicalFields:!1,groupOperationDescriptions:{and:ae.Z.format("dxFilterBuilder-and"),or:ae.Z.format("dxFilterBuilder-or"),notAnd:ae.Z.format("dxFilterBuilder-notAnd"),notOr:ae.Z.format("dxFilterBuilder-notOr")},customOperations:[],closePopupOnTargetScroll:!0,filterOperationDescriptions:{between:ae.Z.format("dxFilterBuilder-filterOperationBetween"),equal:ae.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:ae.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:ae.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:ae.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:ae.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:ae.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:ae.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:ae.Z.format("dxFilterBuilder-filterOperationContains"),notContains:ae.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:ae.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:ae.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:ae.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}})}_optionChanged(e){switch(e.name){case"closePopupOnTargetScroll":break;case"onEditorPreparing":case"onEditorPrepared":case"onValueChanged":this._initActions();break;case"customOperations":this._initCustomOperations(),this._invalidate();break;case"fields":case"maxGroupLevel":case"groupOperations":case"allowHierarchicalFields":case"groupOperationDescriptions":case"filterOperationDescriptions":this._invalidate();break;case"value":if(e.value!==e.previousValue){var t=this._disableInvalidateForValue;t||(this._initModel(),this._invalidate()),this._disableInvalidateForValue=!1,this.executeAction("onValueChanged",{value:e.value,previousValue:e.previousValue}),this._disableInvalidateForValue=t}break;default:super._optionChanged(e)}}getFilterExpression(){var e=this._getNormalizedFields();return Eo(ud((0,N.l)(!0,[],this._model)),e,this._customOperations,Fx)}_getNormalizedFields(){return function R6(i){return i.reduce((e,t)=>{if((0,m.$K)(t.dataField)){var r={};for(var a in t)t[a]&&v6.includes(a)&&(r[a]=t[a]);r.defaultCalculateFilterExpression=os.defaultCalculateFilterExpression,(0,m.$K)(r.dataType)||(r.dataType=L_),(0,m.$K)(r.trueText)||(r.trueText=ae.Z.format("dxDataGrid-trueText")),(0,m.$K)(r.falseText)||(r.falseText=ae.Z.format("dxDataGrid-falseText")),e.push(r)}return e},[])}(this.option("fields"))}_updateFilter(){this._disableInvalidateForValue=!0;var t=ud((0,N.l)(!0,[],this._model)),r=ud(this._getModel(this.option("value")));JSON.stringify(r)!==JSON.stringify(t)&&this.option("value",t),this._disableInvalidateForValue=!1,this._fireContentReadyAction()}_init(){this._initCustomOperations(),this._initModel(),this._initEditorFactory(),this._initActions(),super._init()}_initEditorFactory(){this._editorFactory=new nH}_initCustomOperations(){this._customOperations=function B6(i,e,t){var r=(0,N.l)(!0,[],i),a=-1;return r.some((n,s)=>{if("between"===n.name)return a=s,!0}),-1!==a?r[a]=(0,N.l)(rx(e,t),r[a]):r.unshift(rx(e,t)),r}(this.option("customOperations"),this.option("filterOperationDescriptions.between"),this)}_getDefaultGroupOperation(){var e,t;return null!==(t=null===(e=this.option("groupOperations"))||void 0===e?void 0:e[0])&&void 0!==t?t:Hx.and}_getModel(e){return Z_(e,this._customOperations,this._getDefaultGroupOperation())}_initModel(){this._model=this._getModel(this.option("value"))}_initActions(){var e=this;e._actions={},aH.forEach(t=>{var r=(0,N.l)({},t.config);e._actions[t.name]=e._createActionByOption(t.name,r)})}executeAction(e,t){var r=this._actions[e];return r&&r(t)}_initMarkup(){this.$element().addClass(Ar),super._initMarkup(),this._createGroupElementByCriteria(this._model).appendTo(this.$element())}_createConditionElement(e,t){return(0,b.Z)("<div>").addClass(Io).append(this._createConditionItem(e,t))}_createGroupElementByCriteria(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this._createGroupElement(e,t,r),n=a.find(".".concat(Bx)),s=nn(e),o=0;o<s.length;o++){var l=s[o];Bn(l)?this._createGroupElementByCriteria(l,e,r+1).appendTo(n):wi(l)&&this._createConditionElement(l,e).appendTo(n)}return a}_createGroupElement(e,t,r){var a=(0,b.Z)("<div>").addClass(Px),n=(0,b.Z)("<div>").addClass(Bx),s=(0,b.Z)("<div>").addClass(Io).append(a).append(n);return null!=t&&this._createRemoveButton(()=>{N_(t,e),s.remove(),this._updateFilter()}).appendTo(a),this._createGroupOperationButton(e).appendTo(a),this._createAddButton(()=>{var o=ux(this._getDefaultGroupOperation());xh(o,e),this._createGroupElement(o,e,r+1).appendTo(n),this._updateFilter()},()=>{var l=function D6(i,e){var t=[i.dataField,"",""];return $_(t,V_(i),e),t}(this.option("fields")[0],this._customOperations);xh(l,e),this._createConditionElement(l,e).appendTo(n),this._updateFilter()},r).appendTo(a),s}_createButton(e){return(0,b.Z)("<div>").text(e)}_createGroupOperationButton(e){var t=this._getGroupOperations(e),r=function x6(i,e){var t=Is(i);return e.filter(r=>r.value===t)[0]}(e,t),a=r.text,n=t&&t.length<2?this._createButton(a).addClass("dx-state-disabled"):this._createButtonWithMenu({caption:a,menu:{items:t,displayExpr:"text",keyExpr:"value",onItemClick:s=>{r!==s.itemData&&(function y6(i,e){var r,a;return function S6(i,e){!function(t){return-1!==t.indexOf("!")}(e)?Es(i)&&function(t){var r=nn(t);t.length=0,[].push.apply(t,r)}(i):Es(i)||function(t){var r=t.slice(0);t.length=0,t.push("!",r)}(i)}(i,e),function(a,n){for(r=0;r<a.length;r++)Array.isArray(a[r])||(a[r]=n)}(nn(i),e=-1===(a=e).indexOf("!")?a:a.substring(1)),i}(e,s.itemData.value),n.text(s.itemData.text),r=s.itemData,this._updateFilter())},onContentReady(s){s.component.selectItem(r)},cssClass:K6}});return n.addClass(pd).addClass(G6).attr("tabindex",0)}_createButtonWithMenu(e){var o,t=this,r=function(){t.$element().find(".".concat(Th)).removeClass(Th),t.$element().find(".dx-overlay .dx-treeview").remove(),t.$element().find(".dx-overlay").remove()},a=this.option("rtlEnabled"),n=a?"right":"left",s=this._createButton(e.caption);return(0,N.l)(e.menu,{focusStateEnabled:!0,selectionMode:"single",onItemClick:(o=e.menu.onItemClick,function(l){o(l),"dxclick"===l.event.type&&r()}),onHiding(){s.removeClass(Th)},position:{my:"".concat(n," top"),at:"".concat(n," bottom"),offset:"0 1",of:s,collision:"flip"},animation:null,onHidden(){r()},cssClass:"".concat(J6," ").concat(e.menu.cssClass),rtlEnabled:a}),e.popup={onShown(l){var d=(0,b.Z)(l.component.content()).find(".dx-treeview"),u=d.dxTreeView("instance");k.Z.on(d,"keyup keydown",c=>{var f=(0,ce.EV)(c);("keydown"===c.type&&"tab"===f||"keyup"===c.type&&("escape"===f||f===q_))&&(l.component.hide(),k.Z.trigger(e.menu.position.of,"focus"))}),u.focus(),u.option("focusedElement",null)}},this._subscribeOnClickAndEnterKey(s,()=>{r(),t._createPopupWithTreeView(e,t.$element()),s.addClass(Th)}),s}_hasValueButton(e){var t=sn(this._customOperations,e[1]);return t?!1!==t.hasValue:null!==e[2]}_createOperationButtonWithMenu(e,t){var r=this,a=function A6(i,e,t){var r=dx(i),a=!!i.lookup;return t.forEach(n=>{if(!i.filterOperations&&-1===r.indexOf(n.name)){var s=n&&n.dataTypes;(!a||!n.notForLookup)&&s&&s.indexOf(i.dataType||L_)>=0&&r.push(n.name)}}),r.map(n=>{var s=sn(t,n);return s?{icon:s.icon||nx,text:s.caption||(0,ur.GK)(s.name),value:s.name,isCustom:!0}:{icon:ax_getIconByFilterOperation(n)||nx,text:B_(n,e),value:n}})}(t,this.option("filterOperationDescriptions"),this._customOperations),n=function T6(i,e){for(var t=0;t<e.length;t++)if(e[t].value===i)return e[t];throw new Rt.Z.Error("E1048",i)}(Sx(e),a),s=this._createButtonWithMenu({caption:n.text,menu:{items:a,displayExpr:"text",onItemRendered(o){o.itemData.isCustom&&(0,b.Z)(o.itemElement).addClass(iH)},onContentReady(o){o.component.selectItem(n)},onItemClick:o=>{if(n!==o.itemData){$_(e,(n=o.itemData).value,r._customOperations);var l=s.siblings().filter(".".concat(Nx));r._hasValueButton(e)?(0!==l.length&&l.remove(),r._createValueButton(e,t).appendTo(s.parent())):l.remove(),s.text(n.text),this._updateFilter()}},cssClass:Q6}}).addClass(pd).addClass(Y6).attr("tabindex",0);return s}_createOperationAndValueButtons(e,t,r){this._createOperationButtonWithMenu(e,t).appendTo(r),this._hasValueButton(e)&&this._createValueButton(e,t).appendTo(r)}_createFieldButtonWithMenu(e,t,r){var a=this,n=this.option("allowHierarchicalFields"),s=Cx(e,n),o=Eh(r.name||r.dataField,s),l=function(u,c){return n?wx(u,c):u.caption},d=this._createButtonWithMenu({caption:l(o,s),menu:{items:s,dataStructure:"plain",keyExpr:"id",parentId:"parentId",displayExpr:"caption",onItemClick:u=>{if(o!==u.itemData){t[0]=(o=u.itemData).name||o.dataField,t[2]="object"===o.dataType?null:"",$_(t,V_(o),a._customOperations),d.siblings().filter(".".concat(pd)).remove(),a._createOperationAndValueButtons(t,o,d.parent());var c=l(o,u.component.option("items"));d.text(c),this._updateFilter()}},onContentReady(u){u.component.selectItem(o)},cssClass:eH}}).addClass(pd).addClass(q6).attr("tabindex",0);return d}_createConditionItem(e,t){var r=(0,b.Z)("<div>").addClass(Px),a=this._getNormalizedFields(),n=Eh(e[0],a);return this._createRemoveButton(()=>{N_(t,e),1===r.parent().children().length?r.parent().remove():r.remove(),this._updateFilter()}).appendTo(r),this._createFieldButtonWithMenu(a,e,n).appendTo(r),this._createOperationAndValueButtons(e,n,r),r}_getGroupOperations(e){var t=this.option("groupOperations"),r=this.option("groupOperationDescriptions");return(!t||!t.length)&&(t=[Is(e).replace("!","not")]),t.map(a=>({text:r[a],value:Hx[a]}))}_createRemoveButton(e){var t=(0,b.Z)("<div>").addClass(Vx).addClass("dx-icon-remove").addClass(j_).attr("tabindex",0);return this._subscribeOnClickAndEnterKey(t,e),t}_createAddButton(e,t,r){var a,n=this.option("maxGroupLevel");return(0,m.$K)(n)&&r>=n?(a=this._createButton(),this._subscribeOnClickAndEnterKey(a,t)):a=this._createButtonWithMenu({menu:{items:[{caption:ae.Z.format("dxFilterBuilder-addCondition"),click:t},{caption:ae.Z.format("dxFilterBuilder-addGroup"),click:e}],displayExpr:"caption",onItemClick(s){s.itemData.click()},cssClass:tH}}),a.addClass(Vx).addClass("dx-icon-plus").addClass(j_).attr("tabindex",0)}_createValueText(e,t,r){var a=this,n=(0,b.Z)("<div>").html("&nbsp;").addClass(X6).attr("tabindex",0).appendTo(r),s=e[2],o=sn(a._customOperations,e[1]);return!o&&t.lookup?px(t,s,l=>{G_(n,l)}):(0,Y.gx)(_x(t,s,o)).done(l=>{G_(n,l,o)}),a._subscribeOnClickAndEnterKey(n,l=>{"keyup"===l.type&&l.stopPropagation(),a._createValueEditorWithEvents(e,t,r)}),n}_updateConditionValue(e,t,r){e[2]!==t&&(e[2]=t),r(),this._updateFilter()}_addDocumentKeyUp(e,t){var r=!1,a=!1,n=it.Z.getDocument(),s=l=>{r||a?a=!1:t(l)};k.Z.on(n,"keyup",s);var o=e.find("input");k.Z.on(o,"compositionstart",()=>{r=!0}),k.Z.on(o,"compositionend",()=>{r=!1,a=!0}),k.Z.on(o,"keydown",l=>{229!==l.which&&(a=!1)}),this._documentKeyUpHandler=s}_addDocumentClick(e,t){var r=it.Z.getDocument(),a=n=>{this._isFocusOnEditorParts(e,n.target)||(k.Z.trigger(e.find("input"),"change"),t())};k.Z.on(r,"dxpointerdown",a),this._documentClickHandler=a}_isFocusOnEditorParts(e,t){var r=t||it.Z.getActiveElement();return(0,b.Z)(r).closest(e.children()).length||(0,b.Z)(r).closest(".dx-dropdowneditor-overlay").length}_removeEvents(){var e=it.Z.getDocument();(0,m.$K)(this._documentKeyUpHandler)&&k.Z.off(e,"keyup",this._documentKeyUpHandler),(0,m.$K)(this._documentClickHandler)&&k.Z.off(e,"dxpointerdown",this._documentClickHandler)}_dispose(){this._removeEvents(),super._dispose()}_createValueEditorWithEvents(e,t,r){var a=e[2],n=()=>(r.empty(),this._removeEvents(),this._createValueText(e,t,r)),s=()=>{this._updateConditionValue(e,a,()=>{n()})},o={value:""===a?null:a,filterOperation:Sx(e),setValue(d){a=null===d?"":d},closeEditor:s,text:r.text()};r.empty();var l=this._createValueEditor(r,t,o);k.Z.trigger(l.find("input").not(":hidden").eq(0),"focus"),this._removeEvents(),this._addDocumentClick(l,s),this._addDocumentKeyUp(l,d=>{var u=(0,ce.EV)(d);if("tab"===u){if(this._isFocusOnEditorParts(l))return;this._updateConditionValue(e,a,()=>{n(),d.shiftKey&&k.Z.trigger(r.prev(),"focus")})}"escape"===u&&k.Z.trigger(n(),"focus"),u===q_&&this._updateConditionValue(e,a,()=>{k.Z.trigger(n(),"focus")})}),this._fireContentReadyAction()}_createValueButton(e,t){var r=(0,b.Z)("<div>").addClass(pd).addClass(Nx);return this._createValueText(e,t,r),r}_createValueEditor(e,t,r){var a=(0,b.Z)("<div>").attr("tabindex",0).appendTo(e),n=sn(this._customOperations,r.filterOperation),s=n&&n.editorTemplate?n.editorTemplate:t.editorTemplate;return s?this._getTemplate(s).render({model:(0,N.l)({field:t},r),container:a}):this._editorFactory.createEditor.call(this,a,(0,N.l)({},t,r,{parentType:Fx})),a}_createPopupWithTreeView(e,t){var r=this,a=(0,b.Z)("<div>").addClass(e.menu.cssClass).appendTo(t);this._createComponent(a,m0,{onHiding:e.menu.onHiding,onHidden:e.menu.onHidden,rtlEnabled:e.menu.rtlEnabled,position:e.menu.position,animation:e.menu.animation,contentTemplate(n){var s=(0,b.Z)("<div>").appendTo(n);r._createComponent(s,Mu,e.menu),this.repaint()},_ignoreFunctionValueDeprecation:!0,maxHeight:()=>Ny(e.menu.position.of),visible:!0,focusStateEnabled:!1,hideOnParentScroll:this.option("closePopupOnTargetScroll"),hideOnOutsideClick:!0,onShown:e.popup.onShown,shading:!1,width:"auto",height:"auto",showTitle:!1,_wrapperClassExternal:e.menu.cssClass})}_subscribeOnClickAndEnterKey(e,t){k.Z.on(e,"dxclick",t),k.Z.on(e,"keyup",r=>{(0,ce.EV)(r)===q_&&t(r)})}}(0,It.Z)("dxFilterBuilder",Zx);const sH=Zx;var lH={defaultOptions:()=>({filterBuilder:{groupOperationDescriptions:{and:ae.Z.format("dxFilterBuilder-and"),or:ae.Z.format("dxFilterBuilder-or"),notAnd:ae.Z.format("dxFilterBuilder-notAnd"),notOr:ae.Z.format("dxFilterBuilder-notOr")},filterOperationDescriptions:{between:ae.Z.format("dxFilterBuilder-filterOperationBetween"),equal:ae.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:ae.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:ae.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:ae.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:ae.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:ae.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:ae.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:ae.Z.format("dxFilterBuilder-filterOperationContains"),notContains:ae.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:ae.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:ae.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:ae.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}},filterBuilderPopup:{}}),views:{filterBuilderView:class oH extends Nt.View{init(){super.init(),this._columnsController=this.getController("columns"),this._filterSyncController=this.getController("filterSync")}optionChanged(e){switch(e.name){case"filterBuilder":case"filterBuilderPopup":this._invalidate(),e.handled=!0;break;default:super.optionChanged(e)}}_renderCore(){this._updatePopupOptions()}_updatePopupOptions(){this.option("filterBuilderPopup.visible")?this._initPopup():this._filterBuilderPopup&&this._filterBuilderPopup.hide()}_disposePopup(){this._filterBuilderPopup&&(this._filterBuilderPopup.dispose(),this._filterBuilderPopup=void 0),this._filterBuilder&&(this._filterBuilder.dispose(),this._filterBuilder=void 0)}_initPopup(){var e=this;e._disposePopup(),e._filterBuilderPopup=e._createComponent(e.element(),Ja.Z,(0,N.l)({title:ae.Z.format("dxDataGrid-filterBuilderPopupTitle"),contentTemplate:t=>e._getPopupContentTemplate(t),onOptionChanged(t){"visible"===t.name&&e.option("filterBuilderPopup.visible",t.value)},toolbarItems:e._getPopupToolbarItems()},e.option("filterBuilderPopup"),{onHidden(){ap(e),e._disposePopup()}}))}_getPopupContentTemplate(e){var t=(0,b.Z)(e),r=(0,b.Z)("<div>").appendTo((0,b.Z)(e));this._filterBuilder=this._createComponent(r,sH,(0,N.l)({value:this.option("filterValue"),fields:this._columnsController.getFilteringColumns()},this.option("filterBuilder"),{customOperations:this._filterSyncController.getCustomFilterOperations()})),this._createComponent(t,o0,{direction:"both"})}_getPopupToolbarItems(){var e=this;return[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:ae.Z.format("OK"),onClick(){var t=e._filterBuilder.option("value");e.option("filterValue",t),e._filterBuilderPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:ae.Z.format("Cancel"),onClick(){e._filterBuilderPopup.hide()}}}]}}}};He.registerModule("filterBuilder",lH);var fd="filter-panel",dH="".concat(fd,"-text"),uH="".concat(fd,"-checkbox"),hH="".concat(fd,"-clear-filter"),cH="".concat(fd,"-left"),vH={defaultOptions:()=>({filterPanel:{visible:!1,filterEnabled:!0,texts:{createFilter:ae.Z.format("dxDataGrid-filterPanelCreateFilter"),clearFilter:ae.Z.format("dxDataGrid-filterPanelClearFilter"),filterEnabledHint:ae.Z.format("dxDataGrid-filterPanelFilterEnabledHint")}}}),views:{filterPanelView:class fH extends Nt.View{init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._filterSyncController=this.getController("filterSync"),this._dataController.dataSourceChanged.add(()=>this.render())}isVisible(){return this.option("filterPanel.visible")&&this._dataController.dataSource()}_renderCore(){var e=this.element();if(e.empty(),this._columnsController.getColumns().length){e.addClass(this.addWidgetPrefix(fd));var r=(0,b.Z)("<div>").addClass(this.addWidgetPrefix(cH)).appendTo(e);this._renderFilterBuilderText(e,r)}}_renderFilterBuilderText(e,t){var r=this._getFilterElement(),a=this._getTextElement();if(this.option("filterValue")||this._filterValueBuffer){var n=this._getCheckElement(),s=this._getRemoveButtonElement();return t.append(n).append(r).append(a),void e.append(s)}t.append(r).append(a)}_getCheckElement(){var e=this,t=(0,b.Z)("<div>").addClass(this.addWidgetPrefix(uH));return e._createComponent(t,Zl,{value:e.option("filterPanel.filterEnabled"),onValueChanged(r){e.option("filterPanel.filterEnabled",r.value)}}),t.attr("title",this.option("filterPanel.texts.filterEnabledHint")),t}_getFilterElement(){var e=this,t=(0,b.Z)("<div>").addClass("dx-icon-filter");return k.Z.on(t,"click",()=>e._showFilterBuilder()),ml("filterPanel",e,t,void 0,()=>e._showFilterBuilder()),e._addTabIndexToElement(t),t}_getTextElement(){var r,e=this,t=(0,b.Z)("<div>").addClass(e.addWidgetPrefix(dH)),a=e.option("filterValue");return a?(0,Y.gx)(e.getFilterText(a,this._filterSyncController.getCustomFilterOperations())).done(n=>{var s=e.option("filterPanel.customizeText");if(s){var o=s({component:e.component,filterValue:a,text:n});"string"==typeof o&&(n=o)}t.text(n)}):(r=e.option("filterPanel.texts.createFilter"),t.text(r)),k.Z.on(t,"click",()=>e._showFilterBuilder()),ml("filterPanel",e,t,void 0,()=>e._showFilterBuilder()),e._addTabIndexToElement(t),t}_showFilterBuilder(){this.option("filterBuilderPopup.visible",!0)}_getRemoveButtonElement(){var e=this,t=()=>e.option("filterValue",null),r=(0,b.Z)("<div>").addClass(e.addWidgetPrefix(hH)).text(e.option("filterPanel.texts.clearFilter"));return k.Z.on(r,"click",t),ml("filterPanel",this,r,void 0,t),e._addTabIndexToElement(r),r}_addTabIndexToElement(e){if(!this.option("useLegacyKeyboardNavigation")){var t=this.option("tabindex")||0;e.attr("tabindex",t)}}optionChanged(e){switch(e.name){case"filterValue":this._invalidate(),this.option("filterPanel.filterEnabled",!0),e.handled=!0;break;case"filterPanel":this._invalidate(),e.handled=!0;break;default:super.optionChanged(e)}}_getConditionText(e,t,r){var a="[".concat(e,"] ").concat(t);return(0,m.$K)(r)&&(a+=r),a}_getValueMaskedText(e){return Array.isArray(e)?"('".concat(e.join("', '"),"')"):" '".concat(e,"'")}_getValueText(e,t,r){var a=new Y.BH,n=t&&t.customizeText;if((0,m.$K)(r)||n)if(!n&&e.lookup)px(e,r,o=>{a.resolve(this._getValueMaskedText(o))});else{var s=Array.isArray(r)?r:Te.getDisplayValue(e,r,null);(0,Y.gx)(_x(e,s,t,"filterPanel")).done(o=>{a.resolve(this._getValueMaskedText(o))})}else a.resolve("");return a.promise()}getConditionText(e,t){var o,r=this,a=e[1],n=new Y.BH,s=sn(t.customOperations,a),l=Eh(e[0],t.columns),d=l.caption||"",u=e[2];return o=s?s.caption||(0,ur.GK)(s.name):B_(null===u?"="===a?"isblank":"isnotblank":a,t.filterOperationDescriptions),this._getValueText(l,s,u).done(c=>{n.resolve(r._getConditionText(d,o,c))}),n}getGroupText(e,t,r){var a=this,n=new Y.BH,s=[],o=Is(e);return e.forEach(l=>{wi(l)?s.push(a.getConditionText(l,t)):Bn(l)&&s.push(a.getGroupText(l,t,!0))}),Y.gx.apply(this,s).done(function(){for(var l,d=arguments.length,u=new Array(d),c=0;c<d;c++)u[c]=arguments[c];if(o.startsWith("!")){var f=t.groupOperationDescriptions["not".concat(o.substring(1,2).toUpperCase()).concat(o.substring(2))].split(" ");l="".concat(f[0]," ").concat(u[0])}else l=u.join(" ".concat(t.groupOperationDescriptions[o]," "));r&&(l="(".concat(l,")")),n.resolve(l)}),n}getFilterText(e,t){var r={customOperations:t,columns:this._columnsController.getFilteringColumns(),filterOperationDescriptions:this.option("filterBuilder.filterOperationDescriptions"),groupOperationDescriptions:this.option("filterBuilder.groupOperationDescriptions")};return wi(e)?this.getConditionText(e,r):this.getGroupText(e,r)}}},extenders:{controllers:{data:i=>class extends i{optionChanged(e){"filterPanel"===e.name?(this._applyFilter(),e.handled=!0):super.optionChanged(e)}}}}};He.registerModule("filterPanel",vH);var zx="search-panel",Wx="search-text";function $x(i){var e;return!!(null!==(e=i.allowSearch)&&void 0!==e?e:i.allowFiltering)}function Kx(i,e){var{lookup:t}=i;return i.parseValue?t?i.parseValue.call(t,e):i.parseValue(e):e}var SH={defaultOptions:()=>({searchPanel:{visible:!1,width:160,placeholder:ae.Z.format("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,highlightCaseSensitive:!1,text:"",searchVisibleColumnsOnly:!1}}),extenders:{controllers:{data:i=>class extends i{optionChanged(e){switch(e.fullName){case"searchPanel.text":case"searchPanel":this._applyFilter(),e.handled=!0;break;default:super.optionChanged(e)}}publicMethods(){return super.publicMethods().concat(["searchByText"])}_calculateAdditionalFilter(){var e=super._calculateAdditionalFilter(),t=this.calculateSearchFilter(this.option("searchPanel.text"));return Te.combineFilters([e,t])}searchByText(e){this.option("searchPanel.text",e)}calculateSearchFilter(e){var t,r,s,a=this._columnsController.getColumns(),n=this.option("searchPanel.searchVisibleColumnsOnly"),o=[];if(!e)return null;function l(u){for(var c=(0,Dt.vb)(s.valueExpr),f=0;f<u.length;f++){var p=c(u[f]);o.push(r.createFilterExpression(p,null,"search"))}}for(t=0;t<a.length;t++)if(r=a[t],(!n||r.visible)&&$x(r)&&r.calculateFilterExpression){s=r.lookup;var d=Kx(r,e);s&&s.items?(0,Ta.Z)(s.items).filter(r.createFilterExpression.call({dataField:s.displayExpr,dataType:s.dataType,calculateFilterExpression:r.calculateFilterExpression},d,null,"search")).enumerate().done(l):void 0!==d&&o.push(r.createFilterExpression(d,null,"search"))}return 0===o.length?["!"]:Te.combineFilters(o,"or")}}},views:{headerPanel:i=>class extends i{optionChanged(e){if("searchPanel"===e.name){if("searchPanel.text"===e.fullName){var t=this.getSearchTextEditor();t&&t.option("value",e.value)}else this._invalidate();e.handled=!0}else super.optionChanged(e)}_getToolbarItems(){var e=super._getToolbarItems();return this._prepareSearchItem(e)}_prepareSearchItem(e){var t=this,r=this._dataController,a=this.option("searchPanel");return a&&a.visible&&e.push({template(s,o,l){var d=(0,b.Z)("<div>").addClass(t.addWidgetPrefix(zx)).appendTo(l);t._editorFactoryController.createEditor(d,{width:a.width,placeholder:a.placeholder,parentType:"searchPanel",value:t.option("searchPanel.text"),updateValueTimeout:700,setValue(u){r.searchByText(u)},editorOptions:{inputAttr:{"aria-label":ae.Z.format("".concat(t.component.NAME,"-ariaSearchInGrid"))}}}),t.resize()},name:"searchPanel",location:"after",locateInMenu:"never",sortIndex:40}),e}getSearchTextEditor(){var e=this,t=e.element(),r=t.find(".".concat(e.addWidgetPrefix(zx))).filter(function(){return(0,b.Z)(this).closest(".".concat(e.addWidgetPrefix("header-panel"))).is(t)});return r.length?r.dxTextBox("instance"):null}isVisible(){var e=this.option("searchPanel");return super.isVisible()||!!e?.visible}},rowsView:i=>class extends i{init(){super.init.apply(this,arguments),this._searchParams=[],this._dataController=this.getController("data")}dispose(){clearTimeout(this._highlightTimer),super.dispose()}_getFormattedSearchText(e,t){var r=Kx(e,t),a=Te.getFormatOptionsByColumn(e,"search");return Te.formatValue(r,a)}_getStringNormalizer(){var e,t,r,a,n=this.option("searchPanel.highlightCaseSensitive"),s=null===(t=null===(e=this._dataController)||void 0===e?void 0:e.getDataSource)||void 0===t?void 0:t.call(e),o=null===(a=null===(r=s?.loadOptions)||void 0===r?void 0:r.call(s))||void 0===a?void 0:a.langParams;return l=>(0,Dt.Ex)(l,n,o)}_findHighlightingTextNodes(e,t,r){var n,a=t.parent(),s=this._getStringNormalizer(),o=s(r),l=[];if(a.length){if(e)if(e.groupIndex>=0&&!e.showWhenGrouped)n=t;else{var d=this._columnsController.getVisibleIndex(e.index);n=a.children("td").eq(d).find("*")}}else a=(0,b.Z)("<div>").append(t);return(n=n?.length?n:a.find("*")).each((u,c)=>{for(var f,p,g=(0,b.Z)(c).contents(),w=0;w<g.length;w++){var x=g.get(w);3===x.nodeType&&s(null!==(p=null!==(f=x.textContent)&&void 0!==f?f:x.nodeValue)&&void 0!==p?p:"").includes(o)&&l.push(x)}}),l}_highlightSearchTextCore(e,t){var r=(0,b.Z)("<span>").addClass(this.addWidgetPrefix(Wx)),a=e.text(),n=e[0],s=this._getStringNormalizer(),o=s(a).indexOf(s(t));if(o>=0)return n.textContent?n.textContent=a.substr(0,o):n.nodeValue=a.substr(0,o),e.after(r.text(a.substr(o,t.length))),e=(0,b.Z)(it.Z.createTextNode(a.substr(o+t.length))).insertAfter(r),this._highlightSearchTextCore(e,t)}_highlightSearchText(e,t,r){var a=this,n=this._getStringNormalizer(),s=a.option("searchPanel.text");t&&r&&(s=s&&a._getFormattedSearchText(r,s)),s&&a.option("searchPanel.highlightSearchText")&&a._findHighlightingTextNodes(r,e,s).forEach(l=>{t?n((0,b.Z)(l).text())===n(s??"")&&(0,b.Z)(l).replaceWith((0,b.Z)("<span>").addClass(a.addWidgetPrefix(Wx)).text((0,b.Z)(l).text())):a._highlightSearchTextCore((0,b.Z)(l),s)})}_renderCore(){var e=super._renderCore.apply(this,arguments);return(this.option().rowTemplate||this.option("dataRowTemplate"))&&(this.option("templatesRenderAsynchronously")?(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._highlightSearchText(this.getTableElement())})):this._highlightSearchText(this.getTableElement())),e}_updateCell(e,t){var{column:r}=t,n="string"!==(r.lookup&&r.lookup.dataType||r.dataType);$x(r)&&!t.isOnForm&&(this.option("templatesRenderAsynchronously")?(this._searchParams.length||(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._searchParams.forEach(s=>{this._highlightSearchText.apply(this,s)}),this._searchParams=[]})),this._searchParams.push([e,n,r])):this._highlightSearchText(e,n,r)),super._updateCell(e,t)}}}}};He.registerModule("search",SH);class yH extends P0.Z{_optionChanged(e){switch(e.name){case"pageIndex":var t=this.option("pageIndexChanged");t&&t(e.value);break;case"pageSize":var r=this.option("pageSizeChanged");r&&r(e.value)}super._optionChanged(e)}}var Gx=be(5871);function on(i,e){var t;return d0((null!==(t=W0(e))&&void 0!==t?t:{})[i])}function Ah(i){return on("marginLeft",i)+on("marginRight",i)+on("width",i)}function Ux(i){return on("minWidth",i)}var EH=["contentTemplate","pagerProps"];var OH={},RH=i=>i&&(i.defaultProps?e=>(0,Qe.vs)((0,Qe.Iz)(2,i,(0,ye.Z)({},e))):i);let LH=(()=>{class i extends Tt.OS{constructor(t){super(t),this.parentRef=(0,Qe.Vf)(),this.pageSizesRef=(0,Qe.Vf)(),this.infoTextRef=(0,Qe.Vf)(),this.pagesRef=(0,Qe.Vf)(),this.actualIsLargeDisplayMode=!0,this.actualInfoTextVisible=!0,this.state={infoTextVisible:!0,isLargeDisplayMode:!0},this.subscribeToResize=this.subscribeToResize.bind(this),this.effectUpdateChildProps=this.effectUpdateChildProps.bind(this),this.updateAdaptivityProps=this.updateAdaptivityProps.bind(this)}createEffects(){return[new Tt.b0(this.subscribeToResize,[this.state.infoTextVisible,this.state.isLargeDisplayMode]),new Tt.b0(this.effectUpdateChildProps,[this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])]}updateEffects(){var t,r;null===(t=this._effects[0])||void 0===t||t.update([this.state.infoTextVisible,this.state.isLargeDisplayMode]),null===(r=this._effects[1])||void 0===r||r.update([this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])}subscribeToResize(){var t=()=>{this.parentWidth>0&&this.updateAdaptivityProps()};return Gx.Z.add(t),()=>{Gx.Z.remove(t)}}effectUpdateChildProps(){this.parentWidth>0&&this.updateAdaptivityProps()}get contentAttributes(){var{className:t,displayMode:r,gridCompatibility:a,hasKnownLastPage:n,infoText:s,label:o,lightModeEnabled:l,maxPagesCount:d,onKeyDown:u,pageCount:c,pageIndex:f,pageIndexChange:p,pageSize:g,pageSizeChange:w,pageSizes:x,pagesCountText:y,pagesNavigatorVisible:E,rtlEnabled:V,showInfo:F,showNavigationButtons:q,showPageSizes:ee,totalCount:X,visible:M}=this.props.pagerProps;return(0,ye.Z)({},this.restAttributes,{pageSize:g,pageIndex:f,pageIndexChange:p,pageSizeChange:w,gridCompatibility:a,className:t,showInfo:F,infoText:s,lightModeEnabled:l,displayMode:r,maxPagesCount:d,pageCount:c,pagesCountText:y,visible:M,hasKnownLastPage:n,pagesNavigatorVisible:E,showPageSizes:ee,pageSizes:x,rtlEnabled:V,showNavigationButtons:q,totalCount:X,onKeyDown:u,label:o})}get parentWidth(){return this.parentRef.current?Ah(this.parentRef.current):0}updateAdaptivityProps(){var t=function DH(i){var{info:e,pageSizes:t,pages:r,parent:a}=i,n=function xH(i){var e=on("paddingLeft",i)+on("paddingRight",i);return on("width",i)-e}(a),s=Ah(t),o=Ah(e),l=Ah(r);return{parent:n,pageSizes:s,info:o+on("marginLeft",e)+on("marginRight",e),pages:l}}({parent:this.parentRef.current,pageSizes:this.pageSizesRef.current,info:this.infoTextRef.current,pages:this.pagesRef.current});if(this.actualInfoTextVisible===this.state.infoTextVisible&&this.actualIsLargeDisplayMode===this.state.isLargeDisplayMode){var r=!(0,m.$K)(this.elementsWidth);r&&(this.elementsWidth={}),(r||this.state.isLargeDisplayMode)&&(this.elementsWidth.pageSizes=t.pageSizes,this.elementsWidth.pages=t.pages),(r||this.state.infoTextVisible)&&(this.elementsWidth.info=t.info),this.actualIsLargeDisplayMode=function TH(i){var{pageSizes:e,pages:t,parent:r}=i;return r-(e+t)>0}((0,ye.Z)({parent:t.parent},{pageSizes:this.elementsWidth.pageSizes,pages:this.elementsWidth.pages})),this.actualInfoTextVisible=function AH(i){var{info:e,pageSizes:t,pages:r,parent:a}=i;return a-(t+r+e)>0}((0,ye.Z)({},t,{info:this.elementsWidth.info})),this.setState(a=>({infoTextVisible:this.actualInfoTextVisible})),this.setState(a=>({isLargeDisplayMode:this.actualIsLargeDisplayMode}))}}get restAttributes(){return(0,pi.Z)(this.props,EH)}render(){var t=this.props;return(i=>{var{contentAttributes:e,infoTextRef:t,infoTextVisible:r,isLargeDisplayMode:a,pageSizesRef:n,pagesRef:s,parentRef:o,props:{contentTemplate:l}}=i;return l((0,ye.Z)({rootElementRef:o,pageSizesRef:n,infoTextRef:t,pagesRef:s,infoTextVisible:r,isLargeDisplayMode:a},e))})({props:(0,ye.Z)({},t,{contentTemplate:RH(t.contentTemplate)}),infoTextVisible:this.state.infoTextVisible,isLargeDisplayMode:this.state.isLargeDisplayMode,parentRef:this.parentRef,pageSizesRef:this.pageSizesRef,infoTextRef:this.infoTextRef,pagesRef:this.pagesRef,contentAttributes:this.contentAttributes,parentWidth:this.parentWidth,updateAdaptivityProps:this.updateAdaptivityProps,restAttributes:this.restAttributes})}}return i.defaultProps=OH,i})();var jx={gridCompatibility:!0,showInfo:!1,displayMode:"adaptive",maxPagesCount:10,pageCount:10,visible:!0,hasKnownLastPage:!0,pagesNavigatorVisible:"auto",showPageSizes:!0,pageSizes:Object.freeze([5,10]),showNavigationButtons:!1,totalCount:0,get label(){return ae.Z.format("dxPager-ariaLabel")}},PH=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(jx),Object.getOwnPropertyDescriptors({defaultPageSize:5,pageSizeChange:()=>{},defaultPageIndex:1,pageIndexChange:()=>{}}))),Pi=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(jx),Object.getOwnPropertyDescriptors({pageSize:5,pageIndex:1}))),BH=["infoText","pageCount","pageIndex","rootElementRef","totalCount"],qx="dx-info",NH={get pageIndex(){return Pi.pageIndex},get pageCount(){return Pi.pageCount},get totalCount(){return Pi.totalCount}};let FH=(()=>{class i extends Tt.Ul{constructor(t){super(t),this.state={}}get infoText(){var t;return(null!==(t=this.props.infoText)&&void 0!==t?t:"")||ae.Z.getFormatter("dxPager-infoText")()}get text(){var{pageCount:t,pageIndex:r,totalCount:a}=this.props;return(0,ma.WU)(this.infoText,(r+1).toString(),t.toString(),a.toString())}get restAttributes(){return(0,pi.Z)(this.props,BH)}render(){return(i=>{var{props:{rootElementRef:e},text:t}=i;return(0,Qe.Wm)(1,"div",qx,t,0,null,null,e)})({props:(0,ye.Z)({},this.props),infoText:this.infoText,text:this.text,restAttributes:this.restAttributes})}}return i.defaultProps=NH,i})();var kH=be(28),_d=(0,Tt.kr)(void 0),MH=["children","className","label","onClick","selected","tabIndex"],ZH={className:"",label:"",tabIndex:0,selected:!1};let Dh=(()=>{class i extends Tt.OS{constructor(t){super(t),this.state={},this.widgetRef=(0,Qe.Vf)(),this.keyboardEffect=this.keyboardEffect.bind(this),this.subscribeToClick=this.subscribeToClick.bind(this)}get keyboardContext(){return this.context[_d.id]?this.context[_d.id]:_d.defaultValue}createEffects(){return[new Tt.b0(this.keyboardEffect,[this.keyboardContext,this.props.onClick]),new Tt.b0(this.subscribeToClick,[this.props.onClick])]}updateEffects(){var t,r;null===(t=this._effects[0])||void 0===t||t.update([this.keyboardContext,this.props.onClick]),null===(r=this._effects[1])||void 0===r||r.update([this.props.onClick])}keyboardEffect(){return this.keyboardContext.registerKeyboardAction(this.widgetRef.current,this.props.onClick)}subscribeToClick(){return(0,kH.OZ)(this.widgetRef.current,this.props.onClick)}get restAttributes(){return(0,pi.Z)(this.props,MH)}render(){return(i=>{var{props:{children:e,className:t,label:r,selected:a,tabIndex:n},widgetRef:s}=i;return(0,Qe.Wm)(1,"div",t,e,0,{tabIndex:n,role:"button","aria-label":r,"aria-current":a?"page":void 0},null,s)})({props:(0,ye.Z)({},this.props),widgetRef:this.widgetRef,keyboardContext:this.keyboardContext,restAttributes:this.restAttributes})}}return i.defaultProps=ZH,i})();var Yx="dx-selection",Xx="dx-page-size",jH="".concat(Xx," ").concat(Yx),YH=["className","index","onClick","selected"],JH={index:0,selected:!1,className:"dx-page"};let Jx=(()=>{class i extends Tt.Ul{constructor(t){super(t),this.state={}}get label(){return(0,ma.WU)(ae.Z.getFormatter("dxPager-page"),this.value)}get value(){return this.props.index+1}get className(){var{selected:t}=this.props;return(0,co.G)({["".concat(this.props.className)]:!!this.props.className,[Yx]:!!t})}get restAttributes(){return(0,pi.Z)(this.props,YH)}render(){return(i=>{var{className:e,label:t,props:{onClick:r,selected:a},value:n}=i;return(0,Qe.Iz)(2,Dh,{className:e,label:t,onClick:r,selected:a,children:n})})({props:(0,ye.Z)({},this.props),label:this.label,value:this.value,className:this.className,restAttributes:this.restAttributes})}}return i.defaultProps=JH,i})();var QH=["pageIndexes"],eZ=["maxPagesCount","pageCount","pageIndex","pageIndexChange"];function Qx(i,e,t){return 1===i?"high":i+e===t-1?"low":"both"}function eE(i,e,t){var r=[],a=[];switch(t){case"none":r=[...i];break;case"both":r=[0,"low",...i,"high",e-1],a=i.slice(1,-1);break;case"high":r=[0,...i,"high",e-1],a=i.slice(0,-1);break;case"low":r=[0,"low",...i,e-1],a=i.slice(1)}return{slidingWindowIndexes:i,indexesForReuse:a,pageIndexes:r}}function tE(i,e,t,r){for(var a=[],n=0;n<e;n+=1)a.push(n+i);return eE(a,t,r)}var rZ={get pageIndex(){return Pi.pageIndex},get maxPagesCount(){return Pi.maxPagesCount},get pageCount(){return Pi.pageCount}};let aZ=(()=>{class i extends Tt.Ul{constructor(t){super(t),this.state={},this.canReuseSlidingWindow=this.canReuseSlidingWindow.bind(this),this.generatePageIndexes=this.generatePageIndexes.bind(this),this.isSlidingWindowMode=this.isSlidingWindowMode.bind(this),this.onPageClick=this.onPageClick.bind(this)}get config(){return this.context[Er.E.id]?this.context[Er.E.id]:Er.E.defaultValue}get slidingWindowState(){return this.slidingWindowStateHolder||{indexesForReuse:[],slidingWindowIndexes:[]}}canReuseSlidingWindow(t,r){var{indexesForReuse:a}=this.slidingWindowState,n=a.slice(-1)[0]<t-1,s=a.includes(r);return n&&s}generatePageIndexes(){var a,{pageCount:t,pageIndex:r}=this.props,{slidingWindowIndexes:n}=this.slidingWindowState,l=tE(a=r===n[0]?r-1:r===n[n.length-1]?r+2-4:r<4?1:r>=t-4?t-4-1:r-1,4,t,Qx(a,4,t)),{pageIndexes:d}=l,u=(0,pi.Z)(l,QH);return this.slidingWindowStateHolder=u,d}isSlidingWindowMode(){var{maxPagesCount:t,pageCount:r}=this.props;return r<=4||r<=t}onPageClick(t){this.props.pageIndexChange(t)}get pageIndexes(){var{pageCount:t}=this.props;if(this.isSlidingWindowMode())return tE(0,t,t,"none").pageIndexes;if(this.canReuseSlidingWindow(t,this.props.pageIndex)){var{slidingWindowIndexes:r}=this.slidingWindowState;return eE(r,t,Qx(r[0],4,t)).pageIndexes}return this.generatePageIndexes()}get pages(){var t,{pageIndex:r}=this.props,a=s=>{var o="low"===s||"high"===s?null:{index:s,onClick:()=>this.onPageClick(s),selected:r===s};return{key:s.toString(),pageProps:o}};return(null!==(t=this.config)&&void 0!==t&&t.rtlEnabled?[...this.pageIndexes].reverse():this.pageIndexes).map(s=>a(s))}get restAttributes(){return(0,pi.Z)(this.props,eZ)}render(){return(i=>{var{pages:e}=i,t=e.map(r=>{var{key:a,pageProps:n}=r;return n?(0,Qe.Iz)(2,Jx,{index:n.index,selected:n.selected,onClick:n.onClick},a):(0,Qe.Wm)(1,"div","dx-separator",". . .",16,null,a)});return(0,Qe.xJ)(t,0)})({props:(0,ye.Z)({},this.props),config:this.config,pageIndexes:this.pageIndexes,pages:this.pages,restAttributes:this.restAttributes})}}return i.defaultProps=rZ,i})();var To={hoverStateEnabled:!0,activeStateEnabled:!0,get focusStateEnabled(){return"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator()}},Oh={label:"",get labelMode(){return(0,_t.x2)((0,_t.Vk)())?"floating":"static"}},nZ=["accessKey","activeStateEnabled","className","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","invalidValueMessage","isDirty","isValid","label","labelMode","max","min","mode","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","showSpinButtons","step","tabIndex","useLargeSpinButtons","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],sr=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(fi),Object.getOwnPropertyDescriptors({defaultValue:0,isReactComponentWrapper:!0}))),lZ={get defaultValue(){return sr.defaultValue},get readOnly(){return sr.readOnly},get name(){return sr.name},get validationError(){return sr.validationError},get validationErrors(){return sr.validationErrors},get validationMessageMode(){return sr.validationMessageMode},get validationMessagePosition(){return sr.validationMessagePosition},get validationStatus(){return sr.validationStatus},get isValid(){return sr.isValid},get isDirty(){return sr.isDirty},get inputAttr(){return sr.inputAttr},get className(){return sr.className},get activeStateEnabled(){return To.activeStateEnabled},get disabled(){return sr.disabled},get focusStateEnabled(){return To.focusStateEnabled},get hoverStateEnabled(){return To.hoverStateEnabled},get tabIndex(){return sr.tabIndex},get visible(){return sr.visible},get label(){return Oh.label},get labelMode(){return Oh.labelMode},isReactComponentWrapper:!0};let dZ=(()=>{class i extends Tt.Ul{constructor(t){super(t),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var t=(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,pi.Z)(t,nZ)}render(){return(i=>{var{componentProps:e,restAttributes:t}=i;return(0,Qe.vs)((0,Qe.Iz)(2,Qp,(0,ye.Z)({componentType:mf,componentProps:e,templateNames:[]},t)))})({props:(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return i.defaultProps=lZ,i})();function iE(i,e){return i+10*Math.max(...e).toString().length}var hZ=["inputAttr","pageCount","pageIndex","pageIndexChange","pagesCountText"],cZ="".concat(qx,"  dx-info-text"),rE="dx-page-index",vZ={inputAttr:Object.freeze({"aria-label":ae.Z.format("dxPager-ariaPageNumber")})},gZ={get pageIndex(){return Pi.pageIndex},get pageCount(){return Pi.pageCount},get inputAttr(){return vZ.inputAttr}};let mZ=(()=>{class i extends Tt.OS{constructor(t){super(t),this.pageIndexRef=(0,Qe.Vf)(),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this),this.selectLastPageIndex=this.selectLastPageIndex.bind(this),this.valueChange=this.valueChange.bind(this)}createEffects(){return[new Tt.b0(this.updateWidth,[this.state.minWidth])]}updateEffects(){var t;null===(t=this._effects[0])||void 0===t||t.update([this.state.minWidth])}updateWidth(){var t,r=null===(t=this.pageIndexRef.current)||void 0===t?void 0:t.querySelector(".".concat(rE));this.setState(a=>({minWidth:r&&Ux(r)||a.minWidth}))}get value(){return this.props.pageIndex+1}get width(){var{pageCount:t}=this.props;return iE(this.state.minWidth,[t])}get pagesCountText(){var t;return(null!==(t=this.props.pagesCountText)&&void 0!==t?t:"")||ae.Z.getFormatter("dxPager-pagesCountText")()}selectLastPageIndex(){this.props.pageIndexChange(this.props.pageCount-1)}valueChange(t){this.props.pageIndexChange(t-1)}get restAttributes(){return(0,pi.Z)(this.props,hZ)}render(){return(i=>{var{pageIndexRef:e,pagesCountText:t,props:{inputAttr:r,pageCount:a},selectLastPageIndex:n,value:s,valueChange:o,width:l}=i;return(0,Qe.Wm)(1,"div","dx-light-pages",[(0,Qe.Iz)(2,dZ,{className:rE,min:1,max:Math.max(a,s),width:l,value:s,valueChange:o,inputAttr:r}),(0,Qe.Wm)(1,"span",cZ,t,0),(0,Qe.Iz)(2,Jx,{className:"dx-pages-count",selected:!1,index:a-1,onClick:n})],4,null,null,e)})({props:(0,ye.Z)({},this.props),pageIndexRef:this.pageIndexRef,value:this.value,width:this.width,pagesCountText:this.pagesCountText,selectLastPageIndex:this.selectLastPageIndex,valueChange:this.valueChange,restAttributes:this.restAttributes})}}return i.defaultProps=gZ,i})();var CZ=["hasKnownLastPage","isLargeDisplayMode","maxPagesCount","pageCount","pageIndex","pageIndexChange","pagesCountText","showNavigationButtons","totalCount"],Rh="dx-navigate-button",aE="dx-prev-button",nE="dx-next-button",sE="dx-button-disable",SZ={nextEnabledClass:"".concat(Rh," ").concat(nE),prevEnabledClass:"".concat(Rh," ").concat(aE),nextDisabledClass:"".concat(sE," ").concat(Rh," ").concat(nE),prevDisabledClass:"".concat(sE," ").concat(Rh," ").concat(aE)},yZ={next:"prev",prev:"next"},TZ={get pageIndex(){return Pi.pageIndex},get maxPagesCount(){return Pi.maxPagesCount},get pageCount(){return Pi.pageCount},get hasKnownLastPage(){return Pi.hasKnownLastPage},get showNavigationButtons(){return Pi.showNavigationButtons},get totalCount(){return Pi.totalCount},get isLargeDisplayMode(){return true}};let AZ=(()=>{class i extends Tt.Ul{constructor(t){super(t),this.state={},this.__getterCache={},this.pageIndexChange=this.pageIndexChange.bind(this),this.getButtonProps=this.getButtonProps.bind(this),this.canNavigateToPage=this.canNavigateToPage.bind(this),this.getNextPageIndex=this.getNextPageIndex.bind(this),this.canNavigateTo=this.canNavigateTo.bind(this),this.navigateToPage=this.navigateToPage.bind(this)}get config(){return this.context[Er.E.id]?this.context[Er.E.id]:Er.E.defaultValue}pageIndexChange(t){this.canNavigateToPage(t)&&this.props.pageIndexChange(t)}getButtonProps(t){var r,a=null!==(r=this.config)&&void 0!==r&&r.rtlEnabled?yZ[t]:t,n=this.canNavigateTo(a);return{className:SZ["".concat(t).concat(n?"Enabled":"Disabled","Class")],tabIndex:n?0:-1,navigate:()=>this.navigateToPage(a)}}canNavigateToPage(t){return this.props.hasKnownLastPage?t>=0&&t<=this.props.pageCount-1:t>=0}getNextPageIndex(t){return this.props.pageIndex+function EZ(i){return"next"===i?1:-1}(t)}canNavigateTo(t){return this.canNavigateToPage(this.getNextPageIndex(t))}navigateToPage(t){this.pageIndexChange(this.getNextPageIndex(t))}get renderPrevButton(){var{isLargeDisplayMode:t,showNavigationButtons:r}=this.props;return!t||r}get renderNextButton(){return this.renderPrevButton||!this.props.hasKnownLastPage}get prevButtonProps(){return void 0!==this.__getterCache.prevButtonProps?this.__getterCache.prevButtonProps:this.__getterCache.prevButtonProps=(()=>this.getButtonProps("prev"))()}get nextButtonProps(){return void 0!==this.__getterCache.nextButtonProps?this.__getterCache.nextButtonProps:this.__getterCache.nextButtonProps=(()=>this.getButtonProps("next"))()}get restAttributes(){return(0,pi.Z)(this.props,CZ)}componentWillUpdate(t,r,a){(this.context[Er.E.id]!==a[Er.E.id]||this.props.hasKnownLastPage!==t.hasKnownLastPage||this.props.pageCount!==t.pageCount||this.props.pageIndex!==t.pageIndex||this.props.pageIndexChange!==t.pageIndexChange)&&(this.__getterCache.prevButtonProps=void 0),(this.context[Er.E.id]!==a[Er.E.id]||this.props.hasKnownLastPage!==t.hasKnownLastPage||this.props.pageCount!==t.pageCount||this.props.pageIndex!==t.pageIndex||this.props.pageIndexChange!==t.pageIndexChange)&&(this.__getterCache.nextButtonProps=void 0)}render(){return(i=>{var{nextButtonProps:e,pageIndexChange:t,prevButtonProps:r,props:{isLargeDisplayMode:a,maxPagesCount:n,pageCount:s,pageIndex:o,pagesCountText:l},renderNextButton:d,renderPrevButton:u}=i;return(0,Qe.xJ)([u&&(0,Qe.Iz)(2,Dh,{label:ae.Z.getFormatter("dxPager-prevPage")(),className:r.className,tabIndex:r.tabIndex,onClick:r.navigate}),a&&(0,Qe.Iz)(2,aZ,{maxPagesCount:n,pageCount:s,pageIndex:o,pageIndexChange:t}),!a&&(0,Qe.Iz)(2,mZ,{pageCount:s,pageIndex:o,pageIndexChange:t,pagesCountText:l}),d&&(0,Qe.Iz)(2,Dh,{label:ae.Z.getFormatter("dxPager-nextPage")(),className:e.className,tabIndex:e.tabIndex,onClick:e.navigate})],0)})({props:(0,ye.Z)({},this.props),config:this.config,pageIndexChange:this.pageIndexChange,renderPrevButton:this.renderPrevButton,renderNextButton:this.renderNextButton,prevButtonProps:this.prevButtonProps,nextButtonProps:this.nextButtonProps,restAttributes:this.restAttributes})}}return i.defaultProps=TZ,i})();var DZ=["accessKey","activeStateEnabled","className","dataSource","defaultValue","disabled","displayExpr","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","label","labelMode","name","onClick","onFocusIn","onKeyDown","placeholder","readOnly","rtlEnabled","searchEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","valueExpr","visible","width"],Gi=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(fi),Object.getOwnPropertyDescriptors({placeholder:"",hoverStateEnabled:!0,searchEnabled:!1,defaultValue:null,isReactComponentWrapper:!0}))),RZ={get placeholder(){return Gi.placeholder},get hoverStateEnabled(){return To.hoverStateEnabled},get searchEnabled(){return Gi.searchEnabled},get defaultValue(){return Gi.defaultValue},get readOnly(){return Gi.readOnly},get name(){return Gi.name},get validationError(){return Gi.validationError},get validationErrors(){return Gi.validationErrors},get validationMessageMode(){return Gi.validationMessageMode},get validationMessagePosition(){return Gi.validationMessagePosition},get validationStatus(){return Gi.validationStatus},get isValid(){return Gi.isValid},get isDirty(){return Gi.isDirty},get inputAttr(){return Gi.inputAttr},get className(){return Gi.className},get activeStateEnabled(){return To.activeStateEnabled},get disabled(){return Gi.disabled},get focusStateEnabled(){return To.focusStateEnabled},get tabIndex(){return Gi.tabIndex},get visible(){return Gi.visible},get label(){return Oh.label},get labelMode(){return Oh.labelMode},isReactComponentWrapper:!0};let LZ=(()=>{class i extends Tt.Ul{constructor(t){super(t),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var t=(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,pi.Z)(t,DZ)}render(){return(i=>{var{componentProps:e,restAttributes:t}=i;return(0,Qe.vs)((0,Qe.Iz)(2,Qp,(0,ye.Z)({componentType:Yb,componentProps:e,templateNames:["dropDownButtonTemplate","groupTemplate","itemTemplate"]},t)))})({props:(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return i.defaultProps=RZ,i})();var PZ=["inputAttr","pageSize","pageSizeChange","pageSizes","parentRef"],VZ={inputAttr:Object.freeze({"aria-label":ae.Z.format("dxPager-ariaPageSize")})},NZ={get pageSize(){return Pi.pageSize},get inputAttr(){return VZ.inputAttr}};let FZ=(()=>{class i extends Tt.OS{constructor(t){super(t),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this)}createEffects(){return[new Tt.b0(this.updateWidth,[this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])]}updateEffects(){var t;null===(t=this._effects[0])||void 0===t||t.update([this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])}updateWidth(){this.setState(t=>({minWidth:Ux(this.props.parentRef.current)||t.minWidth}))}get width(){return iE(this.state.minWidth,this.props.pageSizes.map(t=>t.value))}get restAttributes(){return(0,pi.Z)(this.props,PZ)}render(){return(i=>{var{props:{inputAttr:e,pageSize:t,pageSizeChange:r,pageSizes:a},width:n}=i;return(0,Qe.Iz)(2,LZ,{displayExpr:"text",valueExpr:"value",dataSource:a,value:t,valueChange:r,width:n,inputAttr:e})})({props:(0,ye.Z)({},this.props),width:this.width,restAttributes:this.restAttributes})}}return i.defaultProps=NZ,i})();var kZ=["pageSize","pageSizeChange","pageSizes"],HZ={get pageSize(){return Pi.pageSize}};let ZZ=(()=>{class i extends Tt.Ul{constructor(t){super(t),this.state={},this.__getterCache={},this.onPageSizeChange=this.onPageSizeChange.bind(this)}get pageSizesText(){return void 0!==this.__getterCache.pageSizesText?this.__getterCache.pageSizesText:this.__getterCache.pageSizesText=(()=>{var{pageSize:t,pageSizes:r}=this.props;return r.map((a,n)=>{var{text:s,value:o}=a;return{className:(0,co.G)({[o===t?jH:Xx]:!0,"dx-first-child":0===n}),click:this.onPageSizeChange(o),label:(0,ma.WU)(ae.Z.getFormatter("dxPager-pageSize"),o||ae.Z.getFormatter("dxPager-pageSizesAllText")),text:s}})})()}onPageSizeChange(t){return()=>(this.props.pageSizeChange(t),this.props.pageSize)}get restAttributes(){return(0,pi.Z)(this.props,kZ)}componentWillUpdate(t,r,a){(this.props.pageSize!==t.pageSize||this.props.pageSizes!==t.pageSizes||this.props.pageSizeChange!==t.pageSizeChange)&&(this.__getterCache.pageSizesText=void 0)}render(){return(i=>{var{pageSizesText:e}=i;return(0,Qe.xJ)(e.map(t=>{var{className:r,click:a,label:n,text:s}=t;return(0,Qe.Iz)(2,Dh,{className:r,label:n,onClick:a,children:s},s)}),0)})({props:(0,ye.Z)({},this.props),pageSizesText:this.pageSizesText,restAttributes:this.restAttributes})}}return i.defaultProps=HZ,i})();var zZ=["isLargeDisplayMode","pageSize","pageSizeChange","pageSizes","rootElementRef"],GZ={get pageSize(){return Pi.pageSize},get pageSizes(){return Pi.pageSizes},get isLargeDisplayMode(){return true}};let UZ=(()=>{class i extends Tt.OS{constructor(t){super(t),this.state={},this.htmlRef=(0,Qe.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this)}createEffects(){return[new Tt.b0(this.setRootElementRef,[])]}setRootElementRef(){var{rootElementRef:t}=this.props;t&&(t.current=this.htmlRef.current)}get normalizedPageSizes(){return void 0!==this.__getterCache.normalizedPageSizes?this.__getterCache.normalizedPageSizes:this.__getterCache.normalizedPageSizes=(()=>{var{pageSizes:t}=this.props;return t.map(r=>"all"===r||0===r?{text:ae.Z.getFormatter("dxPager-pageSizesAllText")(),value:0}:{text:String(r),value:r})})()}get restAttributes(){return(0,pi.Z)(this.props,zZ)}componentWillUpdate(t,r,a){super.componentWillUpdate(),this.props.pageSizes!==t.pageSizes&&(this.__getterCache.normalizedPageSizes=void 0)}render(){return(i=>{var{htmlRef:e,normalizedPageSizes:t,props:{isLargeDisplayMode:r,pageSize:a,pageSizeChange:n}}=i;return(0,Qe.Wm)(1,"div","dx-page-sizes",[r&&(0,Qe.Iz)(2,ZZ,{pageSizes:t,pageSize:a,pageSizeChange:n}),!r&&(0,Qe.Iz)(2,FZ,{parentRef:e,pageSizes:t,pageSize:a,pageSizeChange:n})],0,null,null,e)})({props:(0,ye.Z)({},this.props),htmlRef:this.htmlRef,normalizedPageSizes:this.normalizedPageSizes,restAttributes:this.restAttributes})}}return i.defaultProps=GZ,i})();var jZ=["className","displayMode","gridCompatibility","hasKnownLastPage","infoText","infoTextRef","infoTextVisible","isLargeDisplayMode","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pageSizesRef","pagesCountText","pagesNavigatorVisible","pagesRef","rootElementRef","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"],YZ=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(Pi),Object.getOwnPropertyDescriptors({infoTextVisible:!0,isLargeDisplayMode:!0})));let XZ=(()=>{class i extends Tt.OS{constructor(t){super(t),this.state={},this.widgetRootElementRef=(0,Qe.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this),this.createFakeInstance=this.createFakeInstance.bind(this)}createEffects(){return[new Tt.b0(this.setRootElementRef,[])]}getChildContext(){return(0,ye.Z)({},this.context,{[_d.id]:this.keyboardAction||_d.defaultValue})}setRootElementRef(){var{rootElementRef:t}=this.props;t&&(t.current=this.widgetRootElementRef.current)}createFakeInstance(){return{option:()=>!1,element:()=>this.widgetRootElementRef.current,_createActionByOption:()=>t=>{var r,a;null===(r=(a=this.props).onKeyDown)||void 0===r||r.call(a,t)}}}get keyboardAction(){return void 0!==this.__getterCache.keyboardAction?this.__getterCache.keyboardAction:this.__getterCache.keyboardAction=(()=>({registerKeyboardAction:(t,r)=>Yg("pager",this.createFakeInstance(),t,void 0,r)}))()}get infoVisible(){var{infoTextVisible:t,showInfo:r}=this.props;return r&&t}get pageIndexSelectorVisible(){return 0!==this.props.pageSize}get normalizedDisplayMode(){var{displayMode:t,lightModeEnabled:r}=this.props;return"adaptive"===t&&void 0!==r?r?"compact":"full":t}get pagesContainerVisible(){return!!this.props.pagesNavigatorVisible&&this.props.pageCount>0}get pagesContainerVisibility(){if("auto"===this.props.pagesNavigatorVisible&&1===this.props.pageCount&&this.props.hasKnownLastPage)return"hidden"}get isLargeDisplayMode(){var t=this.normalizedDisplayMode;return"adaptive"===t?this.props.isLargeDisplayMode:"full"===t}get classes(){var t={["".concat(this.props.className)]:!!this.props.className,"dx-pager":!0,"dx-light-mode":!this.isLargeDisplayMode};return(0,co.G)(t)}get aria(){return{role:"navigation",label:this.props.label}}get restAttributes(){return(0,pi.Z)(this.props,jZ)}componentWillUpdate(t,r,a){super.componentWillUpdate(),this.props.onKeyDown!==t.onKeyDown&&(this.__getterCache.keyboardAction=void 0)}render(){return(i=>{var{aria:e,classes:t,infoVisible:r,isLargeDisplayMode:a,pageIndexSelectorVisible:n,pagesContainerVisibility:s,pagesContainerVisible:o,props:{hasKnownLastPage:l,infoText:d,infoTextRef:u,maxPagesCount:c,pageCount:f,pageIndex:p,pageIndexChange:g,pageSize:w,pageSizeChange:x,pageSizes:y,pageSizesRef:E,pagesCountText:V,pagesRef:F,rtlEnabled:q,showNavigationButtons:ee,showPageSizes:X,totalCount:M,visible:le},restAttributes:fe,widgetRootElementRef:B}=i;return(0,Qe.vs)((0,Qe.Iz)(2,Ml.$L,(0,ye.Z)({rootElementRef:B,rtlEnabled:q,classes:t,visible:le,aria:e},fe,{children:[X&&(0,Qe.Iz)(2,UZ,{rootElementRef:E,isLargeDisplayMode:a,pageSize:w,pageSizeChange:x,pageSizes:y}),o&&(0,Qe.Wm)(1,"div","dx-pages",[r&&(0,Qe.Iz)(2,FH,{rootElementRef:u,infoText:d,pageCount:f,pageIndex:p,totalCount:M}),n&&(0,Qe.Wm)(1,"div","dx-page-indexes",(0,Qe.Iz)(2,AZ,{hasKnownLastPage:l,isLargeDisplayMode:a,maxPagesCount:c,pageCount:f,pageIndex:p,pageIndexChange:g,pagesCountText:V,showNavigationButtons:ee,totalCount:M}),2,null,null,F)],0,{style:(0,Tt.jk)({visibility:s})})]})))})({props:(0,ye.Z)({},this.props),widgetRootElementRef:this.widgetRootElementRef,keyboardAction:this.keyboardAction,infoVisible:this.infoVisible,pageIndexSelectorVisible:this.pageIndexSelectorVisible,pagesContainerVisible:this.pagesContainerVisible,pagesContainerVisibility:this.pagesContainerVisibility,isLargeDisplayMode:this.isLargeDisplayMode,classes:this.classes,aria:this.aria,restAttributes:this.restAttributes})}}return i.defaultProps=YZ,i})();var JZ=["className","defaultPageIndex","defaultPageSize","displayMode","gridCompatibility","hasKnownLastPage","infoText","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pagesCountText","pagesNavigatorVisible","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"];let ez=(()=>{class i extends Tt.DZ{constructor(t){super(t),this.__getterCache={},this.state={pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.props.defaultPageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.props.defaultPageIndex},this.pageIndexChange=this.pageIndexChange.bind(this),this.pageSizeChange=this.pageSizeChange.bind(this)}createEffects(){return[(0,Tt.gt)()]}pageIndexChange(t){var r,a;this.props.gridCompatibility?(this.setState(n=>({pageIndex:r=t+1})),this.props.pageIndexChange(r)):(this.setState(n=>({pageIndex:a=t})),this.props.pageIndexChange(a))}get pageIndex(){return this.props.gridCompatibility?(void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex)-1:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}pageSizeChange(t){var r;this.setState(a=>({pageSize:r=t})),this.props.pageSizeChange(r)}get className(){return this.props.gridCompatibility?(0,co.G)({"dx-datagrid-pager":!0,["".concat(this.props.className)]:!!this.props.className}):this.props.className}get pagerProps(){return void 0!==this.__getterCache.pagerProps?this.__getterCache.pagerProps:this.__getterCache.pagerProps=(()=>(0,ye.Z)({},(0,ye.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),{className:this.className,pageIndex:this.pageIndex,pageIndexChange:t=>this.pageIndexChange(t),pageSizeChange:t=>this.pageSizeChange(t)}))()}get restAttributes(){var t=(0,ye.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex});return(0,pi.Z)(t,JZ)}componentWillUpdate(t,r,a){super.componentWillUpdate(),(this.props!==t||this.props.gridCompatibility!==t.gridCompatibility||this.props.className!==t.className||this.state.pageIndex!==r.pageIndex||this.props.pageIndex!==t.pageIndex||this.props.pageIndexChange!==t.pageIndexChange||this.props.pageSizeChange!==t.pageSizeChange)&&(this.__getterCache.pagerProps=void 0)}render(){return(i=>{var{pagerProps:e,restAttributes:t}=i;return(0,Qe.vs)((0,Qe.Iz)(2,LH,(0,ye.Z)({contentTemplate:XZ,pagerProps:e},t)))})({props:(0,ye.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),pageIndexChange:this.pageIndexChange,pageIndex:this.pageIndex,pageSizeChange:this.pageSizeChange,className:this.className,pagerProps:this.pagerProps,restAttributes:this.restAttributes})}}return i.defaultProps=PH,i})();class oE extends yH{getProps(){var e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}get _propsInfo(){return{twoWay:[["pageSize","defaultPageSize","pageSizeChange"],["pageIndex","defaultPageIndex","pageIndexChange"]],allowNull:[],elements:[],templates:[],props:["defaultPageSize","pageSizeChange","defaultPageIndex","pageIndexChange","gridCompatibility","className","showInfo","infoText","lightModeEnabled","displayMode","maxPagesCount","pageCount","pagesCountText","visible","hasKnownLastPage","pagesNavigatorVisible","showPageSizes","pageSizes","rtlEnabled","showNavigationButtons","totalCount","label","onKeyDown","pageSize","pageIndex"]}}get _viewComponent(){return ez}}(0,It.Z)("dxPager",oE);const tz=oE;var lE=function(i){return 1+(parseInt(i.pageIndex())||0)},nz={defaultOptions:()=>({pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto",label:ae.Z.format("dxPager-ariaLabel")}}),views:{pagerView:class az extends Nt.View{init(){var e=this.getController("data");e.changed.add(t=>{if(t&&t.repaintChangesOnly){var r=this._pager;r?r.option({pageIndex:lE(e),pageSize:e.pageSize(),pageCount:e.pageCount(),totalCount:e.totalCount(),hasKnownLastPage:e.hasKnownLastPage()}):this.render()}else(!t||"update"!==t.changeType&&"updateSelection"!==t.changeType&&"updateFocusedRow"!==t.changeType)&&(this._pager=null,this.render())})}dispose(){this._pager=null}optionChanged(e){var{name:t}=e,r="pager"===t,a="paging"===t,n="dataSource"===t,s="scrolling"===t,o=this.getController("data");if(r||a||s||n){if(e.handled=!0,o.skipProcessingPagingChange(e.fullName))return;(r||a)&&(this._pageSizes=null),n||(this._pager=null,this._invalidate(),(0,We.Ym)()&&r&&this.component&&this.component.resize())}}_renderCore(){var e,t=this.element().addClass(this.addWidgetPrefix("pager")),r=null!==(e=this.option("pager"))&&void 0!==e?e:{},a=this.getController("data"),n=this.getController("keyboardNavigation"),s={maxPagesCount:10,pageIndex:lE(a),pageCount:a.pageCount(),pageSize:a.pageSize(),showPageSizes:r.showPageSizeSelector,showInfo:r.showInfo,displayMode:r.displayMode,pagesNavigatorVisible:r.visible,showNavigationButtons:r.showNavigationButtons,label:r.label,pageSizes:this.getPageSizes(),totalCount:a.totalCount(),hasKnownLastPage:a.hasKnownLastPage(),pageIndexChanged(o){a.pageIndex()!==o-1&&a.pageIndex(o-1)},pageSizeChanged(o){a.pageSize(o)},onKeyDown:o=>n&&n.executeAction("onKeyDown",o),useLegacyKeyboardNavigation:this.option("useLegacyKeyboardNavigation"),useKeyboard:this.option("keyboardNavigation.enabled")};(0,m.$K)(r.infoText)&&(s.infoText=r.infoText),this._pager?this._pager.repaint():(0,We.Ym)()?this._pager=this._createComponent(t,tz,s):t.addClass("dx-pager").html('<div class="dx-pages"><div class="dx-page"></div></div>')}getPager(){return this._pager}getPageSizes(){var e=this.getController("data"),t=this.option("pager"),r=t&&t.allowedPageSizes,a=e.pageSize();return(!(0,m.$K)(this._pageSizes)||!this._pageSizes.includes(a))&&(this._pageSizes=[],t&&(Array.isArray(r)?this._pageSizes=r:r&&a>1&&(this._pageSizes=[Math.floor(a/2),a,2*a]))),this._pageSizes}isVisible(){var e=this.getController("data"),t=this.option("pager"),r=t&&t.visible,a=this.option("scrolling");return"auto"===r&&(r=(!a||"virtual"!==a.mode&&"infinite"!==a.mode)&&(e.pageCount()>1||e.isLoaded()&&!e.hasKnownLastPage())),!!r}getHeight(){return this.getElementHeight()}}}};He.registerModule("pager",nz);var Xr=be(6050),sz=be(5328),dE="columns-separator-transparent",uE="drag-header",Y_="drag-action",hE="tracker",cE="drop-highlight",pE="dx-block-separator",fE="dx-header-row",vr="dxDataGridResizingReordering",vd=function(i){return i.option("allowColumnResizing")||i.getController("columns").isColumnOptionUsed("allowResizing")},vE=function(i){return i.option("allowColumnReordering")||i.getController("columns").isColumnOptionUsed("allowReordering")};class gE extends Nt.View{_renderSeparator(){}_renderCore(e){var t=super._renderCore(e);return this._isShown=!0,this._renderSeparator(),this.hide(),t}show(){this._isShown=!0}hide(){this._isShown=!1}height(e){var t=this.element();if(t){if(!(0,m.$K)(e))return(0,oe.Cr)(t);(0,oe.QQ)(t,e)}}width(e){var t=this.element();if(t){if(!(0,m.$K)(e))return(0,oe.dz)(t);(0,oe.cl)(t,e)}}}var J_=function(i){return"widget"!==i.option("columnResizingMode")},As={views:{columnsSeparatorView:class pz extends gE{init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._init()}dispose(){this._unsubscribeFromCallback(),super.dispose()}optionChanged(e){"allowColumnResizing"===e.name&&(e.value?(this._init(),this._invalidate(),this.hide(!0)):(this._unsubscribeFromCallback(),this._isTransparent=vd(this),this.hide(!0))),super.optionChanged(e)}_renderSeparator(){super._renderSeparator(),this.element().addClass(this.addWidgetPrefix("columns-separator"))}_subscribeToCallback(){var t,e=this;e._positionChanged=function(r){(t=e.element())&&(t.css({top:r.top}),(0,oe.QQ)(t,r.height))},e._tablePositionController.positionChanged.add(e._positionChanged)}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_init(){this._isTransparent=vd(this),this.isVisible()&&this._subscribeToCallback()}isVisible(){return this.option("showColumnHeaders")&&(vE(this)||vd(this))}show(){var e=this.element();e&&!this._isShown&&(this._isTransparent?e.removeClass(this.addWidgetPrefix(dE)):e.show()),super.show()}hide(e){var t=this.element(),r=this.addWidgetPrefix(dE);t&&(this._isShown||e)&&(this._isTransparent?(t.addClass(r),t.css("left",""),t.show()):(t.hasClass(r)&&t.removeClass(r),t.hide())),super.hide()}moveByX(e){var t=this.element();t&&t.css("left",null===e?0:e-this._parentElement().offset().left)}changeCursor(e){e=(0,m.$K)(e)?e:"";var t=this.element();t&&t.css("cursor",e)}},blockSeparatorView:class fz extends gE{init(){super.init(),this.getController("data").loadingChanged.add(t=>{t||this.hide()})}_renderSeparator(){super._renderSeparator(),this.element().addClass(pE).html("&nbsp;")}hide(){var e=this._parentElement(),t=this.element();t&&this._isShown&&t.css("display","none"),e&&!e.children(".".concat(pE)).length&&e.prepend(this.element()),super.hide()}isVisible(){var e=this.option("groupPanel"),t=this.option("columnChooser");return e&&e.visible||t&&t.enabled}show(e){var t=this.element();if(t&&!this._isShown)switch(e){case"group":this.element().css("display","block");break;case"columnChooser":!function(r){Yt.Z.stop(t,!0),Yt.Z.animate(t,{type:"slide",from:{width:0,display:r.display},to:r,duration:300,easing:"swing"})}({width:"100%",display:"block"});break;default:t.css("display","")}super.show()}},draggingHeaderView:class _z extends Nt.View{init(){super.init();var e=this.getController("data");this._controller=this.getController("draggingHeader"),this._columnsResizerViewController=this.getController("columnsResizer"),this._columnsController=this.getController("columns"),this._isDragging=!1,e.loadingChanged.add(t=>{var r=this.element();!t&&r&&r.hide()})}isDragging(){return this._isDragging}_getDraggingPanelByPos(e){var t;return(0,j.S6)(this._dragOptions.draggingPanels,(r,a)=>{if(a){var n=a.getBoundingRect();if(n&&(void 0===n.bottom||e.y<n.bottom)&&(void 0===n.top||e.y>n.top)&&(void 0===n.left||e.x>n.left)&&(void 0===n.right||e.x<n.right))return t=a,!1}}),t}_renderCore(){this.element().addClass("".concat(this.addWidgetPrefix(uE)," ").concat(this.addWidgetPrefix("text-content")," ").concat("dx-widget")).hide()}_resetTargetColumnOptions(){var e=this._dropOptions;e.targetColumnIndex=-1,delete e.targetColumnElement,delete e.isLast,delete e.posX,delete e.posY}_getVisibleIndexObject(e,t){return(0,m.$K)(e)?{columnIndex:t,rowIndex:e}:t}dispose(){var e=this.element();this._dragOptions=null,e&&e.parent().find(".".concat(this.addWidgetPrefix(uE))).remove()}isVisible(){var e=this._columnsController.getCommonSettings();return this.option("showColumnHeaders")&&(vE(this)||e.allowGrouping||e.allowHiding)}dragHeader(e){var{columnElement:t}=e,r=!!e.sourceColumn.type;this._isDragging=!0,this._dragOptions=e,this._dropOptions={sourceIndex:e.index,sourceColumnIndex:this._getVisibleIndexObject(e.rowIndex,e.columnIndex),sourceColumnElement:e.columnElement,sourceLocation:e.sourceLocation};var a=it.Z.getDocument();this._onSelectStart=a.onselectstart,a.onselectstart=function(){return!1},this._controller.drag(this._dropOptions),this.element().css({textAlign:t&&t.css("textAlign"),height:t&&(r&&t.get(0).clientHeight||(0,oe.Cr)(t)),width:t&&(r&&t.get(0).clientWidth||(0,oe.dz)(t)),whiteSpace:t&&t.css("whiteSpace")}).addClass(this.addWidgetPrefix(Y_)).toggleClass("dx-drag-command-cell",r).text(r?"":e.sourceColumn.caption),this.element().appendTo(sz.Z.getSwatchContainer(t))}moveHeader(e){var t=e.event,{that:r}=t.data,a=(0,ce.a0)(t),n=!!r._columnsResizerViewController&&r._columnsResizerViewController.isResizing(),s=r._dragOptions;if(r._isDragging&&!n){var o=r.element(),l=Math.abs(a.x-s.columnElement.offset().left-s.deltaX),d=Math.abs(a.y-s.columnElement.offset().top-s.deltaY);(o.is(":visible")||l>5||d>5)&&(o.show(),o.css({left:a.x-s.deltaX,top:a.y-s.deltaY}),r.dockHeader(a)),t.preventDefault()}}dockHeader(e){var t=this._getDraggingPanelByPos(e),r=this._controller,a=this._dropOptions,n=this._dragOptions;if(t){var s=this.option("rtlEnabled"),o="columnChooser"===t.getName(),l=o?"y":"x",d=t.getName(),u="headers"===d?n.rowIndex:void 0,{sourceColumn:c}=n,f=t.getColumnElements(u,c?.ownerBand)||[],p=n.pointsByTarget=n.pointsByTarget||{},g="columnChooser"===d?[]:p[d]||r._generatePointsByColumns((0,N.l)({},n,{targetDraggingPanel:t,columns:t.getColumns(u),columnElements:f,isVerticalOrientation:o,startColumnIndex:"headers"===d&&(0,b.Z)(f[0]).index()}));if(p[d]=g,a.targetLocation=d,g.length>0)for(var w=0;w<g.length;w++){var x=g[w+1]&&(g[w][l]+g[w+1][l])/2;if(void 0===x||(s&&"x"===l?e[l]>x:e[l]<x)){a.targetColumnIndex=this._getVisibleIndexObject(u,g[w].columnIndex),f[w]?(a.targetColumnElement=f.eq(w),a.isLast=!1):(a.targetColumnElement=f.last(),a.isLast=!0),a.posX=g[w].x,a.posY=g[w].y,r.dock(a);break}}else this._resetTargetColumnOptions(),r.dock(a)}}dropHeader(e){var t=e.event,{that:r}=t.data,a=r._controller;r.element().hide(),a&&r._isDragging&&a.drop(r._dropOptions),r.element().appendTo(r._parentElement()),r._dragOptions=null,r._dropOptions=null,r._isDragging=!1,it.Z.getDocument().onselectstart=r._onSelectStart||null}},trackerView:class cz extends Nt.View{init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._subscribeToCallback()}dispose(){this._unsubscribeFromCallback(),super.dispose()}optionChanged(e){"allowColumnResizing"===e.name&&(this._unsubscribeFromCallback(),e.value&&(this._subscribeToCallback(),this._invalidate())),super.optionChanged(e)}_renderCore(){var e=super._renderCore();return this.element().addClass(this.addWidgetPrefix(hE)),this.hide(),e}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_subscribeToCallback(){var e=this;e._positionChanged=function(t){var r=e.element();r&&r.hasClass(e.addWidgetPrefix(hE))&&(r.css({top:t.top}),(0,oe.QQ)(r,t.height))},this._tablePositionController.positionChanged.add(e._positionChanged)}isVisible(){return vd(this)}show(){this.element().show()}hide(){this.element()&&this.element().hide()}setHeight(e){(0,oe.QQ)(this.element(),e)}}},controllers:{draggingHeader:class mz extends Nt.ViewController{init(){super.init(),this._columnsController=this.getController("columns"),this._tablePositionController=this.getController("tablePosition"),this._columnHeadersView=this.getView("columnHeadersView"),this._columnsSeparatorView=this.getView("columnsSeparatorView"),this._draggingHeaderView=this.getView("draggingHeaderView"),this._rowsView=this.getView("rowsView"),this._blockSeparatorView=this.getView("blockSeparatorView"),this._headerPanelView=this.getView("headerPanel"),this._columnChooserView=this.getView("columnChooserView");var e=()=>{if(this._draggingHeaderView){var t=[this._columnChooserView,this._columnHeadersView,this._headerPanelView];this._unsubscribeFromEvents(this._draggingHeaderView,t),this._subscribeToEvents(this._draggingHeaderView,t)}};this._columnHeadersView.renderCompleted.add(e),this._headerPanelView&&this._headerPanelView.renderCompleted.add(e),this._columnChooserView&&this._columnChooserView.renderCompleted.add(e)}dispose(){this._draggingHeaderView&&this._unsubscribeFromEvents(this._draggingHeaderView,[this._columnChooserView,this._columnHeadersView,this._headerPanelView])}_generatePointsByColumns(e){var t=this;return this.isCustomGroupColumnPosition=this.checkIsCustomGroupColumnPosition(e),Te.getPointsByColumns(e.columnElements,a=>t._pointCreated(a,e.columns,e.targetDraggingPanel.getName(),e.sourceColumn),e.isVerticalOrientation,e.startColumnIndex)}checkIsCustomGroupColumnPosition(e){for(var t=!0,r=0;r<e.columns.length;r+=1){var a=e.columns[r];if("expand"===a.command&&!t)return!0;a.command||(t=!1)}return!1}_pointCreated(e,t,r,a){var n,s=t[e.columnIndex],o=t[e.columnIndex-1],l="expand"===o?.command,d="expand"===s?.command&&"expand"!==o?.command,u=a&&!a.allowReordering,c=!s?.allowReordering&&!o?.allowReordering;switch(r){case"columnChooser":return!0;case"headers":if(u)return!0;if(!d)return l||c;if(this.isCustomGroupColumnPosition)return!1;for(;"expand"===(null===(n=t[e.columnIndex])||void 0===n?void 0:n.command);)e.columnIndex+=1;return!1;default:return 0===t.length}}_subscribeToEvents(e,t){var r=this;(0,j.S6)(t,(a,n)=>{if(n)for(var s,o=n.getRowCount?n.getRowCount():1,l=n.getName(),d=function(f,p){if(p){var g=(0,b.Z)(p),w=s[f];w&&n.allowDragging(w)&&(g.addClass(r.addWidgetPrefix(Y_)),k.Z.on(g,(0,ce.V4)(Xr.BL,vr),r.createAction(x=>{var y=x.event,E=(0,ce.a0)(y);e.dragHeader({deltaX:E.x-(0,b.Z)(y.currentTarget).offset().left,deltaY:E.y-(0,b.Z)(y.currentTarget).offset().top,sourceColumn:w,index:w.index,columnIndex:f,columnElement:g,sourceLocation:l,draggingPanels:t,rowIndex:r._columnsController.getRowIndex(w.index,!0)})})),k.Z.on(g,(0,ce.V4)(Xr.pB,vr),{that:e},r.createAction(e.moveHeader)),k.Z.on(g,(0,ce.V4)(Xr.ut,vr),{that:e},r.createAction(e.dropHeader)))}},u=0;u<o;u++){var c=n.getColumnElements(u)||[];c.length&&(s=n.getColumns(u)||[],(0,j.S6)(c,d))}})}_unsubscribeFromEvents(e,t){var r=this;(0,j.S6)(t,(a,n)=>{if(n){var s=n.getColumnElements()||[];(0,j.S6)(s,(o,l)=>{var d=(0,b.Z)(l);k.Z.off(d,(0,ce.V4)(Xr.BL,vr)),k.Z.off(d,(0,ce.V4)(Xr.pB,vr)),k.Z.off(d,(0,ce.V4)(Xr.ut,vr)),d.removeClass(r.addWidgetPrefix(Y_))})}})}_getSeparator(e){return"headers"===e?this._columnsSeparatorView:this._blockSeparatorView}hideSeparators(e){var t=this._blockSeparatorView,r=this._columnsSeparatorView;this._animationColumnIndex=void 0,t&&t.hide(),"block"!==e&&r&&r.hide()}allowDrop(e){return this._columnsController.allowMoveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}drag(e){var{sourceIndex:t}=e,{sourceLocation:r}=e,{sourceColumnElement:a}=e,n=this._columnHeadersView,s=this._rowsView;a&&(a.css({opacity:.5}),"headers"===r&&(n&&n.setRowsOpacity(t,.5),s&&s.setRowsOpacity(t,.5)))}dock(e){var t=this,r=(0,m.Kn)(e.targetColumnIndex)?e.targetColumnIndex.columnIndex:e.targetColumnIndex,{sourceLocation:a}=e,{targetLocation:n}=e,s=t._getSeparator(n),o=r>=0;t._columnHeadersView.element().find(".".concat(fE)).toggleClass(t.addWidgetPrefix(cE),"headers"!==a&&"headers"===n&&!o),s&&(t.allowDrop(e)&&o?"group"===n||"columnChooser"===n?t._animationColumnIndex!==r&&(t.hideSeparators(),s.element()[e.isLast?"insertAfter":"insertBefore"](e.targetColumnElement),t._animationColumnIndex=r,s.show(n)):(t.hideSeparators("block"),t._tablePositionController.update(e.posY),s.moveByX(e.posX-s.width()),s.show()):t.hideSeparators())}drop(e){var{sourceColumnElement:t}=e;if(t&&(t.css({opacity:""}),this._columnHeadersView.setRowsOpacity(e.sourceIndex,""),this._rowsView.setRowsOpacity(e.sourceIndex,""),this._columnHeadersView.element().find(".".concat(fE)).removeClass(this.addWidgetPrefix(cE))),this.allowDrop(e)){var r=this._getSeparator(e.targetLocation);r&&r.hide(),this._columnsController.moveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}}},tablePosition:class gz extends Nt.ViewController{constructor(e){super(e),this.positionChanged=(0,ri.Z)()}init(){super.init(),this._columnsResizerController=this.getController("columnsResizer"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView"),this._pagerView=this.getView("pagerView"),this._rowsView.resizeCompleted.add(()=>{if(this.option("allowColumnResizing")){var e=this._columnsResizerController._targetPoint;this.update(e?e.y:null)}})}update(e){var t={},r=this._columnHeadersView.element(),a=r&&r.offset(),n=a&&a.top||0,s=(0,m.$K)(e)?Math.abs(e-n):0,o=this._columnHeadersView?this._columnHeadersView.getHeight():0,l=this._rowsView.getScrollbarWidth(!0),d=this._rowsView?this._rowsView.height()-l:0,u=this.component.getView("draggingHeaderView");t.height=o,(this._columnsResizerController.isResizing()||u.isDragging())&&(t.height+=d-s),null!==e&&r&&r.length&&(t.top=r[0].offsetTop+s),this.positionChanged.fire(t)}},columnsResizer:class vz extends Nt.ViewController{init(){this._subscribesToCallbacks=[],vd(this)&&this._init()}dispose(){this._unsubscribes(),super.dispose()}optionChanged(e){super.optionChanged(e),"allowColumnResizing"===e.name&&(e.value?(this._init(),this._subscribeToEvents()):this._unsubscribes())}_isHeadersRowArea(e){if(this._columnHeadersView){var t=this._columnHeadersView.element();if(t){var r=t.offset().top,a=this._columnHeadersView.getHeadersRowHeight();return e>=r&&e<=r+a}}return!1}_isRtlParentStyle(){var e;return this.option("rtlEnabled")&&"rtl"===(null===(e=this._$parentContainer)||void 0===e?void 0:e.parent().css("direction"))}_pointCreated(e,t,r){var a=J_(this),n=this.option("rtlEnabled"),s=this._isRtlParentStyle(),o=a||!n||s?1:0;if(e.index>=o&&e.index<t+(a||n&&!s?0:1)){e.columnIndex-=o;var l=r[e.columnIndex]||{};return!(a?l.allowResizing&&(r[e.columnIndex+1]||{}).allowResizing:l.allowResizing)}return!0}_getTargetPoint(e,t,r){if(e)for(var a=0;a<e.length;a++)if((e[a].x!==e[0].x||!e[a+1]||e[a].x!==e[a+1].x)&&e[a].x-r<=t&&t<=e[a].x+r)return e[a];return null}_moveSeparator(e){var t,r=e.event,a=r.data,n=a._columnsSeparatorView.width(),s=J_(a),o=n/2,l=a._$parentContainer.offset(),d=l.left,u=(0,ce.a0)(r),c=a.option("rtlEnabled"),f=this._isRtlParentStyle(),p=null===(t=a._draggingHeaderView)||void 0===t?void 0:t.isDragging();if(a._isResizing&&a._resizingInfo){if((d<=u.x||!s&&f)&&(!s||u.x<=d+(0,oe.dz)(a._$parentContainer))&&a._updateColumnsWidthIfNeeded(u.x)){var g=a._columnHeadersView.getColumnElements().eq(a._resizingInfo.currentColumnIndex),w=g[0];if(w){var x=w.getBoundingClientRect().width;a._columnsSeparatorView.moveByX(g.offset().left+((s||f)&&c?0:x)),a._tablePositionController.update(a._targetPoint.y),r.preventDefault()}}}else p||(a._isHeadersRowArea(u.y)?(a._previousParentOffset&&(a._previousParentOffset.left!==l.left||a._previousParentOffset.top!==l.top)&&a.pointsByColumns(null),a._targetPoint=a._getTargetPoint(a.pointsByColumns(),u.x,n),a._previousParentOffset=l,a._isReadyResizing=!1,a._targetPoint?(a._columnsSeparatorView.changeCursor("col-resize"),a._columnsSeparatorView.moveByX(a._targetPoint.x-o),a._tablePositionController.update(a._targetPoint.y),a._isReadyResizing=!0,r.preventDefault()):(a._columnsSeparatorView.changeCursor(),a._columnsSeparatorView.moveByX(null))):(a.pointsByColumns(null),a._isReadyResizing=!1,a._columnsSeparatorView.changeCursor(),a._columnsSeparatorView.moveByX(null)))}_endResizing(e){var r=e.event.data;r._isResizing&&(r.pointsByColumns(null),r._resizingInfo=null,r._columnsSeparatorView.hide(),r._columnsSeparatorView.changeCursor(),r._trackerView.hide(),r._isReadyResizing=!1,r._isResizing=!1)}_getNextColumnIndex(e){return e+1}_setupResizingInfo(e){var t=this._targetPoint.columnIndex,r=this._getNextColumnIndex(t),a=this._columnHeadersView.getHeaderElement(t),n=this._columnHeadersView.getHeaderElement(r);this._resizingInfo={startPosX:e,currentColumnIndex:t,currentColumnWidth:a&&a.length>0?(0,di.l)(a[0]).width:0,nextColumnIndex:r,nextColumnWidth:n&&n.length>0?(0,di.l)(n[0]).width:0}}_startResizing(e){var t=e.event,r=t.data,a=(0,ce.a0)(t);if((0,ce.z6)(t)&&(r._isHeadersRowArea(a.y)?(r._targetPoint=r._getTargetPoint(r.pointsByColumns(),a.x,10),r._targetPoint&&(r._columnsSeparatorView.moveByX(r._targetPoint.x-r._columnsSeparatorView.width()/2),r._isReadyResizing=!0)):r._isReadyResizing=!1),r._isReadyResizing){r._setupResizingInfo(a.x),r._isResizing=!0,r._tablePositionController.update(r._targetPoint.y),r._columnsSeparatorView.show(),r._trackerView.show();var n=r.component.getScrollable();n&&r._isRtlParentStyle()&&(r._scrollRight=(0,oe.dz)(n.$content())-(0,oe.dz)(n.container())-n.scrollLeft()),t.preventDefault(),t.stopPropagation()}this.isResizing()&&this._editorFactoryController.loseFocus()}_generatePointsByColumns(){var e=this,t=e._columnsController?e._columnsController.getVisibleColumns():[],r=e._columnHeadersView.getColumnElements(),a=[];r&&r.length>0&&(a=Te.getPointsByColumns(r,n=>e._pointCreated(n,r.length,t))),e._pointsByColumns=a}_unsubscribeFromEvents(){this._moveSeparatorHandler&&k.Z.off(it.Z.getDocument(),(0,ce.V4)(Bt.Z.move,vr),this._moveSeparatorHandler),this._startResizingHandler&&k.Z.off(this._$parentContainer,(0,ce.V4)(Bt.Z.down,vr),this._startResizingHandler),this._endResizingHandler&&(k.Z.off(this._columnsSeparatorView.element(),(0,ce.V4)(Bt.Z.up,vr),this._endResizingHandler),k.Z.off(it.Z.getDocument(),(0,ce.V4)(Bt.Z.up,vr),this._endResizingHandler))}_subscribeToEvents(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing),k.Z.on(it.Z.getDocument(),(0,ce.V4)(Bt.Z.move,vr),this,this._moveSeparatorHandler),k.Z.on(this._$parentContainer,(0,ce.V4)(Bt.Z.down,vr),this,this._startResizingHandler),k.Z.on(this._columnsSeparatorView.element(),(0,ce.V4)(Bt.Z.up,vr),this,this._endResizingHandler),k.Z.on(it.Z.getDocument(),(0,ce.V4)(Bt.Z.up,vr),this,this._endResizingHandler)}_updateColumnsWidthIfNeeded(e){var t,r,a=this._rowsView.contentWidth(),n=this._resizingInfo,s=this._columnsController,o=s.getVisibleColumns(),l=this._columnsSeparatorView.width(),d=J_(this),u=d&&this.option("adaptColumnWidthByRatio")&&!this.option("columnAutoWidth"),c=this.option("rtlEnabled"),f=this._isRtlParentStyle(),p=o[n.currentColumnIndex],g=o[n.nextColumnIndex];function w(le){return(0,m.HD)(le)&&le.endsWith("%")}function x(le,fe,B,P){if(le){var U=le.width;U&&(P=w(U)),P?(s.columnOption(le.index,"visibleWidth",fe),s.columnOption(le.index,"width","".concat((fe/B*100).toFixed(3),"%"))):(s.columnOption(le.index,"visibleWidth",null),s.columnOption(le.index,"width",fe))}}t=e-n.startPosX,(d||f)&&c&&(t=-t);var le,fe,B,P,U,$,me,{cellWidth:y,nextCellWidth:E}=(me={},(U=n.currentColumnWidth+(le=t))>=($=p&&p.minWidth||l)?me.cellWidth=U:(me.cellWidth=$,P=!0),d&&((B=n.nextColumnWidth-le)>=(fe=g&&g.minWidth||l)?me.nextCellWidth=P?n.nextColumnWidth-(le+$-U):B:(me.nextCellWidth=fe,me.cellWidth=n.currentColumnWidth+(le-fe+B))),me);if(r=p.width!==y){if(s.beginUpdate(),y=Math.floor(y),a=function(le,fe){var B=fe.every(U=>U.width);if(B){var P=fe.reduce((U,$)=>(w($.width)&&(U+=parseFloat($.width)),U),0);P>100&&(le=le/P*100)}return le}(a,o),x(p,y,a,u),d)x(g,E=Math.floor(E),a,u);else{var V=this._columnHeadersView.getColumnWidths();V[n.currentColumnIndex]=y;var F=V.reduce((le,fe)=>le+fe,0)>this._rowsView.contentWidth();if(!F){var q=Te.getLastResizableColumnIndex(o);q>=0&&s.columnOption(o[q].index,"visibleWidth","auto")}for(var ee=0;ee<V.length;ee++)o[ee]&&o[ee]!==p&&void 0===o[ee].width&&s.columnOption(o[ee].index,"width",V[ee])}if(s.endUpdate(),!d){this.component.updateDimensions();var X=this.component.getScrollable();if(X&&f){var M=(0,oe.dz)(X.$content())-(0,oe.dz)(X.container())-this._scrollRight;X.scrollTo({left:M})}}}return r}_subscribeToCallback(e,t){e.add(t),this._subscribesToCallbacks.push({callback:e,handler:t})}_unsubscribeFromCallbacks(){for(var e=0;e<this._subscribesToCallbacks.length;e++){var t=this._subscribesToCallbacks[e];t.callback.remove(t.handler)}this._subscribesToCallbacks=[]}_unsubscribes(){this._unsubscribeFromEvents(),this._unsubscribeFromCallbacks()}_init(){var e=()=>{this._isResizing||this.pointsByColumns(null)},t=n=>{this._scrollLeft!==n.left&&(this._scrollLeft=n.left,this.pointsByColumns(null))};this._columnsSeparatorView=this.getView("columnsSeparatorView"),this._columnHeadersView=this.getView("columnHeadersView"),this._trackerView=this.getView("trackerView"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._tablePositionController=this.getController("tablePosition"),this._editorFactoryController=this.getController("editorFactory"),this._draggingHeaderView=this.component.getView("draggingHeaderView"),this._$parentContainer=this.component.$element(),this._subscribeToCallback(this._columnHeadersView.renderCompleted,e),this._subscribeToCallback(this._columnHeadersView.resizeCompleted,e),this._subscribeToCallback(this._columnsSeparatorView.renderCompleted,()=>{this._unsubscribeFromEvents(),this._subscribeToEvents()}),this._subscribeToCallback(this._rowsView.renderCompleted,()=>{this._rowsView.scrollChanged.remove(t),this._rowsView.scrollChanged.add(t)});var r=0!==this._rowsView.getScrollbarWidth(),a=0;this._subscribeToCallback(this._tablePositionController.positionChanged,n=>{if(this._isResizing&&!this._rowsView.isResizing){var s=0!==this._rowsView.getScrollbarWidth();r!==s||a&&a!==n.height?(r=s,a=n.height,this.component.updateDimensions()):this._rowsView.updateFreeSpaceRowHeight()}a=n.height})}isResizing(){return this._isResizing}pointsByColumns(e){if(void 0===e)return this._pointsByColumns||this._generatePointsByColumns(),this._pointsByColumns;this._pointsByColumns=e}}},extenders:{views:{rowsView:i=>class extends i{_needUpdateRowHeight(e){var t=this.option("wordWrapEnabled"),r=this._columnsResizerController.isResizing();return super._needUpdateRowHeight.apply(this,arguments)||e>0&&t&&r}}},controllers:{editorFactory:i=>class extends i{renderFocusOverlay(){if(!this._columnsResizerController.isResizing())return super.renderFocusOverlay.apply(this,arguments)}}}}};He.registerModule("columnsResizingReordering",As);var Q_=be(2346),wz=(i,e)=>i.length===e.length&&!Object.keys(i).some(t=>i[t]!==e[t]),Sz=(i,e)=>(0,J.bY)(i,e,{maxDepth:4}),xz={compareType:"reference"},mE=function(i){var{compareType:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xz,t=null;return function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];if(!t){var s=i(...a);return t=((i,e,t,r)=>{var a=i,n=e;return function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return r(o,a)||(a=o,n=t(...a)),n}})(a,s,i,"reference"===e?wz:Sz),s}return t(...a)}},tv="rowsview",CE="dx-data-row",bE="dx-freespace-row",wE="dx-master-detail-cell",Lh="dx-command-expand",SE="dx-command-select",yE="dx-command-edit",xE="[class^=dx-command]",Ph="dx-cell-focus-disabled",EE="dx-state-focused",IE="dx-focused",iv="delete",Bh='\n  input:not([type="hidden"]):not([disabled]),\n  textarea:not([disabled]),\n  a:not([disabled]),\n  select:not([disabled]),\n  button:not([disabled]),\n  [tabindex]:not([disabled]),\n  .dx-checkbox:not([disabled],.dx-state-readonly)\n',TE="".concat(Bh,", .dx-dropdowneditor-icon"),OE="columnHeadersView",Vz=["shift","control","alt"];function gd(i){return i&&i.hasClass("dx-group-row")}function rv(i){return i&&i.hasClass("dx-master-detail-row")}function md(i){return i&&i.hasClass(CE)}function LE(i,e){return!i._isRowEditMode()&&e&&!e.hasClass(SE)&&e.hasClass(nh)}function kr(i){return(0,m.$K)(i)&&i.length>0}function av(){return"desktop"!==at.Z.current().deviceType}function PE(i){return!!i.parent(".".concat("dx-header-row")).length}var qz={defaultOptions:()=>({useLegacyKeyboardNavigation:!1,keyboardNavigation:{enabled:!0,enterKeyAction:"startEdit",enterKeyDirection:"none",editOnKeyPress:!1}}),controllers:{keyboardNavigation:class $z extends Nt.ViewController{init(){var e,t;this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._editingController=this.getController("editing"),this._headerPanel=this.getView("headerPanel"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._editorFactory=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._columnResizerController=this.getController("columnsResizer"),this._memoFireFocusedCellChanged=mE(this._memoFireFocusedCellChanged.bind(this),{compareType:"value"}),this._memoFireFocusedRowChanged=mE(this._memoFireFocusedRowChanged.bind(this),{compareType:"value"}),this.focusedHandlerWithContext=this.focusedHandlerWithContext||this.focusedHandler.bind(this),this.renderCompletedWithContext=this.renderCompletedWithContext||this.renderCompleted.bind(this),this.rowsViewFocusHandlerContext=this.rowsViewFocusHandlerContext||this.rowsViewFocusHandler.bind(this),this._updateFocusTimeout=null,this._fastEditingStarted=!1,this._focusedCellPosition={},this._canceledCellPosition=null,this.isKeyboardEnabled()?(function AT(){k.Z.on(it.Z.getDocument(),"visibilitychange",jg)}(),null===(e=this._editorFactory)||void 0===e||e.focused.add(this.focusedHandlerWithContext),this.createAction("onKeyDown")):(qg(),null===(t=this._editorFactory)||void 0===t||t.focused.remove(this.focusedHandlerWithContext)),this.initViewHandlers(),this.initDocumentHandlers()}dispose(){super.dispose(),this._resetFocusedView(),Q_.dG.off(this._keyDownListener),k.Z.off(it.Z.getDocument(),(0,ce.V4)(Bt.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),clearTimeout(this._updateFocusTimeout),qg()}focusedHandler(e){this.setupFocusedView(),this._isNeedScroll&&e.is(":visible")&&this._focusedView&&this._focusedView.getScrollable()&&(this._focusedView._scrollToElement(e),this._isNeedScroll=!1)}rowsViewFocusHandler(e){var t,r=(0,b.Z)(e.target),a=(0,b.Z)(e.relatedTarget).closest(this._rowsView.element()).length,n=r.is("a");if(e.relatedTarget&&n&&!a&&this._isEventInCurrentGrid(e)){var s=this._getFocusedCell();s=kr(s)?s:this._rowsView.getCellElements(0).filter("[tabindex]").eq(0),r.closest(s).length||(e.preventDefault(),k.Z.trigger(s,"focus"))}var o=r.is("td"),l=(null!==(t=this.option("focusedRowIndex"))&&void 0!==t?t:-1)<0;o&&l&&this._updateFocusedCellPosition(r)}subscribeToRowsViewFocusEvent(){var e,t=null===(e=this._rowsView)||void 0===e?void 0:e.element();k.Z.on(t,"focusin",this.rowsViewFocusHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var e,t=null===(e=this._rowsView)||void 0===e?void 0:e.element();k.Z.off(t,"focusin",this.rowsViewFocusHandlerContext)}renderCompleted(e){var t=this._rowsView.element(),r=!e||"refresh"===e.changeType,a=this._focusedView&&this._focusedView.name===this._rowsView.name,s=e&&("append"===e.changeType||"prepend"===e.changeType),l=(0,b.Z)(it.Z.getRootNode(t.get&&t.get(0))).find(":focus"),d=!l.length||l.closest(t).length;this.unsubscribeFromRowsViewFocusEvent(),this.subscribeToRowsViewFocusEvent(),this.initPointerEventHandler(),this.initKeyDownHandler(),this._setRowsViewAttributes(),a&&d&&(this._isNeedFocus?!s:this._isHiddenFocus&&r&&!e?.virtualColumnsScrolling)&&this._updateFocus(!0)}initViewHandlers(){var e,t;this.unsubscribeFromRowsViewFocusEvent(),this.unsubscribeFromPointerEvent(),this.unsubscribeFromKeyDownEvent(),null===(t=null===(e=this._rowsView)||void 0===e?void 0:e.renderCompleted)||void 0===t||t.remove(this.renderCompletedWithContext),this.isKeyboardEnabled()&&this._rowsView.renderCompleted.add(this.renderCompletedWithContext)}initDocumentHandlers(){var e=it.Z.getDocument();this._documentClickHandler=this._documentClickHandler||this.createAction(t=>{var r=(0,b.Z)(t.event.target),a=this._isEventInCurrentGrid(t.event)&&r.closest(".".concat(this.addWidgetPrefix(tv))).length,n=r.closest(".".concat("dx-dropdowneditor-overlay")).length,s=!!this._columnResizerController&&this._columnResizerController.isResizing();a||n||s||(!(this._focusedView&&r.parents().filter(this._focusedView.element()).length>0)&&this._resetFocusedCell(!0),this._resetFocusedView())}),k.Z.off(e,(0,ce.V4)(Bt.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),this.isKeyboardEnabled()&&k.Z.on(e,(0,ce.V4)(Bt.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler)}_setRowsViewAttributes(){var e=this._getRowsViewElement();!this._dataController.getVisibleRows().length&&this._applyTabIndexToElement(e)}unsubscribeFromPointerEvent(){var e=av()?Pt.u:Bt.Z.down,t=this._getRowsViewElement();this._pointerEventAction&&k.Z.off(t,(0,ce.V4)(e,"dxDataGridKeyboardNavigation"),this._pointerEventAction)}subscribeToPointerEvent(){var e=av()?Pt.u:Bt.Z.down,t=this._getRowsViewElement(),r=".".concat(On," > td, .").concat(On);k.Z.on(t,(0,ce.V4)(e,"dxDataGridKeyboardNavigation"),r,this._pointerEventAction)}initPointerEventHandler(){this._pointerEventAction=this._pointerEventAction||this.createAction(this._pointerEventHandler),this.unsubscribeFromPointerEvent(),this.subscribeToPointerEvent()}unsubscribeFromKeyDownEvent(){Q_.dG.off(this._keyDownListener)}subscribeToKeyDownEvent(){var e=this._getRowsViewElement();this._keyDownListener=Q_.dG.on(e,null,t=>this._keyDownHandler(t))}initKeyDownHandler(){this._keyDownListener&&this.unsubscribeFromKeyDownEvent(),this.subscribeToKeyDownEvent()}optionChanged(e){switch(e.name){case"keyboardNavigation":"keyboardNavigation.enabled"===e.fullName&&this.init(),e.handled=!0;break;case"useLegacyKeyboardNavigation":this.init(),e.handled=!0;break;default:super.optionChanged(e)}}isRowFocusType(){return"row"===this.focusType}isCellFocusType(){return"cell"===this.focusType}setRowFocusType(){this.option("focusedRowEnabled")&&(this.focusType="row")}setCellFocusType(){this.focusType="cell"}_keyDownHandler(e){var t,r=!0;this._isNeedFocus=!0,this._isNeedScroll=!0;var a=this._processOnKeyDown(e),n=null===(t=this._editingController)||void 0===t?void 0:t.isEditing(),{originalEvent:s}=e;if(s.isDefaultPrevented())return this._isNeedFocus=!1,void(this._isNeedScroll=!1);if(!Vz.includes(e.keyName)&&this._updateFocusedCellPositionByTarget(s.target),!a){switch(e.keyName){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(e,n),a=!0;break;case"upArrow":case"downArrow":e.ctrl?np("rowsView",this,s):this._upDownKeysHandler(e,n),a=!0;break;case"pageUp":case"pageDown":this._pageUpDownKeyHandler(e),a=!0;break;case"space":a=this._spaceKeyHandler(e,n);break;case"A":(0,ce.j1)(e.originalEvent)?(this._ctrlAKeyHandler(e,n),a=!0):a=this._beginFastEditing(e.originalEvent);break;case"tab":this._tabKeyHandler(e,n),a=!0;break;case"enter":this._enterKeyHandler(e,n),a=!0;break;case"escape":a=this._escapeKeyHandler(e,n);break;case"F":(0,ce.j1)(e.originalEvent)?(this._ctrlFKeyHandler(e),a=!0):a=this._beginFastEditing(e.originalEvent);break;case"F2":this._f2KeyHandler(),a=!0;break;case"del":case"backspace":this._isFastEditingAllowed()&&!this._isFastEditingStarted()&&(a=this._beginFastEditing(s,!0))}!a&&!this._beginFastEditing(s)&&(this._isNeedFocus=!1,this._isNeedScroll=!1,r=!1),r&&s.stopPropagation()}}_processOnKeyDown(e){var{originalEvent:t}=e,r={handled:!1,event:t};return this.executeAction("onKeyDown",r),e.ctrl=t.ctrlKey,e.alt=t.altKey,e.shift=t.shiftKey,!!r.handled}_closeEditCell(){setTimeout(()=>{this._editingController.closeEditCell()})}_leftRightKeysHandler(e,t){var r=this.getVisibleRowIndex(),a=e.originalEvent,n=this._focusedView&&this._focusedView.getRow(r),s=this._getDirectionCodeByKey(e.keyName),o=this._isFastEditingStarted();if((!t||o)&&md(n)){this.setCellFocusType(),o&&this._closeEditCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(s);var d=this._getNextCell(s);kr(d)&&this._arrowKeysHandlerFocusCell(a,d,s),a&&a.preventDefault()}}_upDownKeysHandler(e,t){var r,a,n=this.getVisibleRowIndex(),s=this._focusedView&&this._focusedView.getRow(n),o=e.originalEvent,l="upArrow"===e.keyName,d=this._dataController.dataSource(),u=null===(a=null===(r=this._editingController)||void 0===r?void 0:r.isEditRowByIndex)||void 0===a?void 0:a.call(r,n),c=this._isFastEditingStarted();if((!u||!t||c)&&s&&!rv(s)){if(c&&this._closeEditCell(),!this._navigateNextCell(o,e.keyName)&&this._isVirtualRowRender()&&l&&d&&!d.isLoading()){var p=(0,oe.zp)(s);this._scrollBy(0,-p,this._focusedCellPosition.rowIndex-1,o)}o&&o.preventDefault()}}_pageUpDownKeyHandler(e){var t=this._dataController.pageIndex(),r=this._dataController.pageCount(),a=this.option("paging.enabled"),n="pageUp"===e.keyName,s=n?-1:1,o=this._rowsView.getScrollable();a&&!this._isVirtualScrolling()?(n?t>0:t<r-1)&&!this._isVirtualScrolling()&&(this._dataController.pageIndex(t+s),e.originalEvent.preventDefault()):o&&(0,oe.Cr)(o.container())<(0,oe.Cr)(o.$content())&&(this._scrollBy(0,(0,oe.Cr)(o.container())*s),e.originalEvent.preventDefault())}_spaceKeyHandler(e,t){var r=this.getVisibleRowIndex(),a=(0,b.Z)(e.originalEvent&&e.originalEvent.target);if(this.option("selection")&&"none"!==this.option("selection").mode&&!t){var n="row"===this._getElementType(a)&&this.isRowFocusType()&&md(a);return a.hasClass(SE)&&"onClick"===this.option("selection.showCheckBoxesMode")&&this._selectionController.startSelectionWithCheckboxes(),!!(n||a.parent().hasClass(CE)||a.hasClass(this.addWidgetPrefix(tv)))&&(this._selectionController.changeItemSelection(r,{shift:e.shift,control:e.ctrl}),e.originalEvent.preventDefault(),!0)}return this._beginFastEditing(e.originalEvent)}_ctrlAKeyHandler(e,t){!t&&!e.alt&&"multiple"===this.option("selection.mode")&&this.option("selection.allowSelectAll")&&(this._selectionController.selectAll(),e.originalEvent.preventDefault())}_tabKeyHandler(e,t){var r=this.option("editing"),a=e.shift?"previous":"next",s=!((0,m.$K)(this._focusedCellPosition)&&!(0,m.Qr)(this._focusedCellPosition))||!e.shift&&this._isLastValidCell(this._focusedCellPosition)||e.shift&&this._isFirstValidCell(this._focusedCellPosition),o=e.originalEvent.target,l=this._focusedView&&this._focusedView.element();if(!this._handleTabKeyOnMasterDetailCell(o,a)){if((0,b.Z)(l).addClass(EE),r&&o&&!s)if((0,b.Z)(o).hasClass(this.addWidgetPrefix(tv))&&this._resetFocusedCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(a),t){if(!this._editingCellTabHandler(e,a))return}else this._targetCellTabHandler(e,a)&&(s=!0);s?(this._editorFactory.loseFocus(),this._editingController.isEditing()&&!this._isRowEditMode()&&(this._resetFocusedCell(!0),this._resetFocusedView(),this._closeEditCell())):e.originalEvent.preventDefault()}}_getMaxHorizontalOffset(){var e=this.component.getScrollable();return e?e.scrollWidth()-(0,oe.dz)(this._rowsView.element()):0}_isColumnRendered(e){var t=this._columnsController.getVisibleColumns(null,!0),r=this._columnsController.getVisibleColumns(),a=t[e],n=!1;return a&&(n=r.indexOf(a)>=0),n}_isFixedColumn(e){var r=this._columnsController.getVisibleColumns(null,!0)[e];return!!r&&!!r.fixed}_isColumnVirtual(e){var t=e-this._columnsController.getColumnIndexOffset(),a=this._columnsController.getVisibleColumns()[t];return!!a&&"virtual"===a.command}_processVirtualHorizontalPosition(e){var a,t=this.component.getScrollable(),r=this.getColumnIndex(),n=0,s=!1;switch(e){case"next":case"nextInRow":var o=this._getVisibleColumnCount();a=r+1,n=this.option("rtlEnabled")?this._getMaxHorizontalOffset():0,s="next"===e?o===a||this._isFixedColumn(r)&&!this._isColumnRendered(a):o>a&&this._isFixedColumn(r)&&!this._isColumnRendered(a);break;case"previous":case"previousInRow":if(a=r-1,n=this.option("rtlEnabled")?0:this._getMaxHorizontalOffset(),"previous"===e){var l=this._columnsController.getColumnIndexOffset();s=a<0&&0===l||this._isFixedColumn(r)&&!this._isColumnRendered(a)}else s=a>=0&&this._isFixedColumn(r)&&!this._isColumnRendered(a)}s?t.scrollTo({left:n}):(0,m.$K)(a)&&(0,m.$K)(e)&&this._isColumnVirtual(a)&&0!==(n=this._getHorizontalScrollPositionOffset(e))&&t.scrollBy({left:n,top:0})}_getHorizontalScrollPositionOffset(e){var t=0,r=this._getCell(this._focusedCellPosition),a=r&&(0,oe.Y_)(r);if(a>0){var n=this.option("rtlEnabled")?-1:1;t="nextInRow"===e||"next"===e?a*n:a*n*-1}return t}_editingCellTabHandler(e,t){var n,r=e.originalEvent.target,a=this._getCellElementFromTarget(r),s=e.originalEvent,o=this._getElementType(r);if(a.is(xE))return!this._targetCellTabHandler(e,t);this._updateFocusedCellPosition(a);var l=this._getNextCellByTabKey(s,t,o);if(!(a=l.$cell)||this._handleTabKeyOnMasterDetailCell(a,t))return!1;var d=this._getColumnByCellElement(a),u=a.parent(),c=this._getRowIndex(u),f=this._dataController.items()[c];if(d&&d.allowEditing){var g=!f||"data"===f.rowType;n=this._editingController.allowUpdating({row:f})?g:f&&f.isNewRow}return n||this._closeEditCell(),this._focusCell(a,!l.isHighlighted)&&(!this._isRowEditMode()&&n?this._editFocusedCell():this._focusInteractiveElement(a,e.shift)),!0}_targetCellTabHandler(e,t){var r=e.originalEvent,a=r.target,n=this._getElementType(a),s=this._getCellElementFromTarget(a),o="cell"===n&&this._getInteractiveElement(s,!e.shift),l=!1;if(!LE(this,s)&&o?.length&&a!==o.get(0))l=!0;else{void 0===this._focusedCellPosition.rowIndex&&(0,b.Z)(a).hasClass(On)&&this._updateFocusedCellPosition(s),n=this._getElementType(a),this.isRowFocusType()&&(this.setCellFocusType(),"row"===n&&md((0,b.Z)(a))&&(a=this.getFirstValidCellInRow((0,b.Z)(a)),n=this._getElementType(a)));var d=this._getNextCellByTabKey(r,t,n);if(!(s=d.$cell)||!(s=this._checkNewLineTransition(r,s)))return!1;this._focusCell(s,!d.isHighlighted),LE(this,s)||this._focusInteractiveElement(s,e.shift)}return l}_getNextCellByTabKey(e,t,r){var a=this._getNextCell(t,r),n=a&&this._fireFocusedCellChanging(e,a,!0);return!n||n.cancel?{}:(n.$newCellElement&&(a=n.$newCellElement),{$cell:a,isHighlighted:n.isHighlighted})}_checkNewLineTransition(e,t){var r=this.getVisibleRowIndex(),a=t.parent();if(r!==this._getRowIndex(a)){var n=this._getCellPosition(t),s=this._fireFocusedRowChanging(e,a);if(s.cancel)return;s.rowIndexChanged&&n&&(this.setFocusedColumnIndex(n.columnIndex),t=this._getFocusedCell())}return t}_enterKeyHandler(e,t){var r,a=this.getVisibleRowIndex(),n=this._dataController.getKeyByRowIndex(a),s=null===(r=this._focusedView)||void 0===r?void 0:r.getRow(a),o=this._getFocusedCell(),l=this.option("grouping.allowCollapsing")&&gd(s),d=this.option("masterDetail.enabled")&&o?.hasClass(Lh),u=o?.hasClass("dx-command-adaptive");if(l||d){var c=this._dataController.items()[a],f=c?.data&&!c.data.isContinuation;(0,m.$K)(n)&&f&&this._dataController.changeRowExpand(n)}else u?(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(n),this._updateFocusedCellPosition(o)):o?.hasClass(yE)||this._processEnterKeyForDataCell(e,t)}_processEnterKeyForDataCell(e,t){var r=this._getEnterKeyDirection(e),a=this._allowEditingOnEnterKey();t||!a&&r?(this._handleEnterKeyEditingCell(e.originalEvent),"next"===r||"previous"===r?this._targetCellTabHandler(e,r):("upArrow"===r||"downArrow"===r)&&this._navigateNextCell(e.originalEvent,r)):a&&this._startEditing(e)}_getEnterKeyDirection(e){var t=this.option("keyboardNavigation.enterKeyDirection"),r=e.shift;return"column"===t?r?"upArrow":"downArrow":"row"===t?r?"previous":"next":void 0}_handleEnterKeyEditingCell(e){var{target:t}=e,r=this._getCellElementFromTarget(t),a=this._isRowEditMode();this._updateFocusedCellPosition(r),a?(this._focusEditFormCell(r),setTimeout(this._editingController.saveEditData.bind(this._editingController))):(k.Z.trigger((0,b.Z)(t),"change"),this._closeEditCell(),e.preventDefault())}_escapeKeyHandler(e,t){var r=this._getCellElementFromTarget(e.originalEvent.target);return!!t&&(this._updateFocusedCellPosition(r),this._isRowEditMode()?(this._focusEditFormCell(r),this._editingController.cancelEditData(),0===this._dataController.items().length&&(this._resetFocusedCell(),this._editorFactory.loseFocus())):"cell"===this._editingController.getEditMode()?this._editingController.cancelEditData():this._closeEditCell(),e.originalEvent.preventDefault(),!0)}_ctrlFKeyHandler(e){if(this.option("searchPanel.visible")){var t=this._headerPanel.getSearchTextEditor();t&&(t.focus(),e.originalEvent.preventDefault())}}_f2KeyHandler(){var e=this._editingController.isEditing(),t=this.getVisibleRowIndex(),r=this._focusedView&&this._focusedView.getRow(t);!e&&md(r)&&this._startEditing()}_navigateNextCell(e,t){var r=this._getNextCell(t),a=this._getDirectionCodeByKey(t);return!(!r||!this._isCellValid(r))&&this._arrowKeysHandlerFocusCell(e,r,a)}_arrowKeysHandlerFocusCell(e,t,r){var n=this._fireFocusChangingEvents(e,t,"prevRow"===r||"nextRow"===r,!0);return t=n.$newCellElement,!(n.cancel||!this._isCellValid(t)||(this._focus(t,!n.isHighlighted),0))}_beginFastEditing(e,t){if(!this._isFastEditingAllowed()||e.altKey||e.ctrlKey||this._editingController.isEditing())return!1;if(t)this._startEditing(e,iv);else{var{key:r}=e,a=e.keyCode||e.which,n=r||a&&String.fromCharCode(a);n&&(1===n.length||n===iv)&&this._startEditing(e,n)}return!0}_pointerEventHandler(e){var t,r=e.event||e,a=(0,b.Z)(r.currentTarget),n=null===(t=this._rowsView)||void 0===t?void 0:t.element(),s=a.parent(),o=(0,b.Z)(r.target).is(Bh),l=!!(0,b.Z)(r.target).closest(".".concat("dx-revert-button")).length,d=a.hasClass(Lh);this._isEventInCurrentGrid(r)&&(l||!this._isCellValid(a,!o)&&!d?a.is("td")&&this._resetFocusedCell():(a=this._isInsideEditForm(a)?(0,b.Z)(r.target):a,this._focusView(),(0,b.Z)(n).removeClass(EE),s.hasClass(bE)?(this._updateFocusedCellPosition(a),this._applyTabIndexToElement(this._focusedView.element()),this._focusedView.focus(!0)):this._isMasterDetailCell(a)?this._updateFocusedCellPosition(a):this._clickTargetCellHandler(r,a)))}_clickTargetCellHandler(e,t){var r=this._getColumnByCellElement(t),a=this._isCellEditMode();this.setCellFocusType();var n=this._fireFocusChangingEvents(e,t,!0);if(t=n.$newCellElement,n.cancel)this.setRowFocusType(),this.setFocusedRowIndex(n.prevRowIndex),this._editingController.isEditing()&&a&&this._closeEditCell();else{if(n.resetFocusedRow)return void this._focusController._resetFocusedRow();if(n.rowIndexChanged&&(t=this._getFocusedCell()),!n.isHighlighted&&!a&&this.setRowFocusType(),this._updateFocusedCellPosition(t),this._allowRowUpdating()&&a&&r&&r.allowEditing)this._isNeedFocus=!1,this._isHiddenFocus=!1;else{t=this._getFocusedCell();var s=e&&(0,b.Z)(e.target).closest("".concat(TE,", td")),o=s&&s.not(t).is(TE),l=!!r&&!r.command&&t.hasClass(nh);this._focus(t,!l&&(!n.isHighlighted||o),o)}}}_allowRowUpdating(){var e=this.getVisibleRowIndex(),t=this._dataController.items()[e];return this._editingController.allowUpdating({row:t},"click")}focus(e){var t,r=this.option("focusedRowEnabled"),a=this._isCellElement((0,b.Z)(e));e||(t=".dx-datagrid-rowsview .dx-row[tabindex]",r||(t+=", .dx-datagrid-rowsview .dx-row > td[tabindex]"),e=this.component.$element().find(t).first()),e&&this._focusElement((0,b.Z)(e),a)}getFocusedView(){return this._focusedView}setupFocusedView(){this.isKeyboardEnabled()&&!(0,m.$K)(this._focusedView)&&this._focusView()}_focusElement(e,t){var r=(0,b.Z)(this._getRowsViewElement()),a=e.closest(r),n=this.isRowFocusType(),s={};!a.length||this._isCellElement(e)&&!this._isCellValid(e)||(this._focusView(),this._isNeedFocus=!0,this._isNeedScroll=!0,(this._isCellElement(e)||gd(e))&&(this.setCellFocusType(),e=(s=this._fireFocusChangingEvents(null,e,!0,t)).$newCellElement,n&&!s.isHighlighted&&this.setRowFocusType()),s.cancel||(this._focus(e,!s.isHighlighted),this._focusInteractiveElement(e)))}_getFocusedViewByElement(e){var t=this.getFocusedView(),r=t&&(0,b.Z)(t.element());return e&&0!==e.closest(r).length}_focusView(){this._focusedView=this._rowsView}_resetFocusedView(){this.setRowFocusType(),this._focusedView=null}_focusInteractiveElement(e,t){if(e){var r=this._getInteractiveElement(e,t);Te.focusAndSelectElement(this,r)}}_focus(e,t,r){var a=e&&!e.hasClass(On)?e.closest(".".concat(On)):e;if(!a||!function Hz(i){return!i||i.hasClass(bE)||i.hasClass("dx-virtual-row")}(a)){var o,n=this._focusedView,s=n&&n.element();this._isHiddenFocus=t;var l=gd(a)||function Mz(i){return i&&i.hasClass("dx-datagrid-group-footer")}(a)||this.isRowFocusType();l?(o=a,n&&this.setFocusedRowIndex(this._getRowIndex(a))):this._isCellElement(e)&&(o=e,this._updateFocusedCellPosition(e)),o&&(s&&s.find(".dx-row[tabindex], .dx-row > td[tabindex]").not(o).removeClass(Ph).removeClass(IE).removeAttr("tabindex"),k.Z.one(o,"blur",d=>{d.relatedTarget&&o.removeClass(Ph).removeClass(IE)}),r||(this._applyTabIndexToElement(o),k.Z.trigger(o,"focus")),t?(o.addClass(Ph),l&&e.addClass(Ph)):this._editorFactory.focus(o))}}_updateFocus(e){this._updateFocusTimeout=setTimeout(()=>{if(this._needFocusEditingCell())this._editingController._focusEditingCell();else{var t=this._getFocusedCell(),r=this._editingController.isEditing();if((!this._isMasterDetailCell(t)||this._isRowEditMode())&&(this._hasSkipRow(t.parent())&&(t=this._getNextCell(this._focusedCellPosition&&this._focusedCellPosition.rowIndex>0?"upArrow":"downArrow")),kr(t)))if(t.is("td")||t.hasClass(this.addWidgetPrefix("edit-form-item"))){var n=t.is(xE),s=t.find(":focus"),o=kr(s),l=this._getColumnByCellElement(t);if(!e&&n||!this._editorFactory.focus())!o&&(this._isNeedFocus||this._isHiddenFocus)&&this._focus(t,this._isHiddenFocus);else{if(n&&o)return void Te.focusAndSelectElement(this,s);!o&&this._focus(t)}r&&!l?.showEditorAlways&&this._focusInteractiveElement.bind(this)(t)}else k.Z.trigger(t,"focus")}})}_getColumnByCellElement(e){var r=this._rowsView.getCellIndex(e)+this._columnsController.getColumnIndexOffset();return this._columnsController.getVisibleColumns(null,!0)[r]}_needFocusEditingCell(){var e=this._editingController.getEditMode()===mo,t=this._editingController.getEditMode()===Cs,r=e&&this._editingController.hasChanges(),a=t&&this._editingController.isNewRowInEditMode(),n=this._getFocusedCell();return(0===n.children().length||n.find($f).length>0)&&(r||a)}_getFocusedCell(){return(0,b.Z)(this._getCell(this._focusedCellPosition))}_updateFocusedCellPositionByTarget(e){var t;if("row"===this._getElementType(e)&&(0,m.$K)(null===(t=this._focusedCellPosition)||void 0===t?void 0:t.columnIndex)){var a=(0,b.Z)(e);this._focusedView&&gd(a)&&this.setFocusedRowIndex(this._getRowIndex(a))}else this._updateFocusedCellPosition(this._getCellElementFromTarget(e))}_updateFocusedCellPosition(e,t){var r=this._getCellPosition(e,t);return r&&(!e.length||r.rowIndex>=0&&r.columnIndex>=0)&&this.setFocusedCellPosition(r.rowIndex,r.columnIndex),r}_getFocusedColumnIndexOffset(e){var t=0,r=this._columnsController.getVisibleColumns()[e];return r&&r.fixed?t=this._getFixedColumnIndexOffset(r):e>=0&&(t=this._columnsController.getColumnIndexOffset()),t}_getFixedColumnIndexOffset(e){var t=function Zz(i,e){return i.option("rtlEnabled")?!("right"===e.fixedPosition||(0,m.$K)(e.command)&&!(0,m.$K)(e.fixedPosition)):!(!(0,m.$K)(e.fixedPosition)||"left"===e.fixedPosition)}(this,e)?this._getVisibleColumnCount()-this._columnsController.getVisibleColumns().length:0;return t}_getCellPosition(e,t){var r,a=kr(e)&&e.closest("tr");if(kr(a)){var n=this._getRowIndex(a);return r=this._rowsView.getCellIndex(e,n),r+=this._getFocusedColumnIndexOffset(r),t&&(r=this._applyColumnIndexBoundaries(r="previous"===t?r-1:r+1)),{rowIndex:n,columnIndex:r}}}_focusCell(e,t){if(this._isCellValid(e))return this._focus(e,t),!0}_focusEditFormCell(e){e.hasClass(wE)&&this._editorFactory.focus(e,!0)}_resetFocusedCell(e){var t,r=this._getFocusedCell();kr(r)&&r.removeAttr("tabindex"),this._isNeedFocus=!1,this._isNeedScroll=!1,this._focusedCellPosition={},clearTimeout(this._updateFocusTimeout),null===(t=this._focusedView)||void 0===t||t.renderFocusState({preventScroll:e})}restoreFocusableElement(e,t){var r,a,n=(0,m.$K)(e),s=this._rowsView.element(),{columnIndex:o}=this._focusedCellPosition,l=this._dataController.getRowIndexOffset();e=n?e:this._rowsView.getTopVisibleItemIndex()+l,n?(a=this._rowsView.getRow(e-l),!(r=this._fireFocusedRowChanging(t,a)).cancel&&r.rowIndexChanged&&(e=r.newRowIndex)):(this._editorFactory.loseFocus(),this._applyTabIndexToElement(s),k.Z.trigger(s,"focus")),(!n||!r.cancel)&&this.setFocusedCellPosition(e,o),n&&this._updateFocus()}_getNewPositionByCode(e,t,r){var{columnIndex:a}=e,{rowIndex:n}=e;if(void 0===e.rowIndex&&"next"===r)return{columnIndex:0,rowIndex:0};switch(r){case"nextInRow":case"next":a<this._getVisibleColumnCount()-1&&"row"!==t&&this._hasValidCellAfterPosition({columnIndex:a,rowIndex:n})?a++:!this._isLastRow(n)&&"next"===r&&(a=0,n++);break;case"previousInRow":case"previous":a>0&&"row"!==t&&this._hasValidCellBeforePosition({columnIndex:a,rowIndex:n})?a--:n>0&&"previous"===r&&(n--,a=this._getVisibleColumnCount()-1);break;case"upArrow":n=n>0?n-1:n;break;case"downArrow":n=this._isLastRow(n)?n:n+1}return{columnIndex:a,rowIndex:n}}setFocusedCellPosition(e,t){this.setFocusedRowIndex(e),this.setFocusedColumnIndex(t)}setFocusedRowIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.rowIndex=e}setFocusedColumnIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.columnIndex=e}getRowIndex(){return this._focusedCellPosition?this._focusedCellPosition.rowIndex:-1}getColumnIndex(){return this._focusedCellPosition?this._focusedCellPosition.columnIndex:-1}getVisibleRowIndex(){var e,t=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.rowIndex;return!(0,m.$K)(t)||t<0?-1:t-this._dataController.getRowIndexOffset()}getVisibleColumnIndex(){var e,t=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.columnIndex;return(0,m.$K)(t)?t-this._columnsController.getColumnIndexOffset():-1}_applyColumnIndexBoundaries(e){var t=this._getVisibleColumnCount();return e<0?e=0:e>=t&&(e=t-1),e}_isCellByPositionValid(e){var t=(0,b.Z)(this._getCell(e));return this._isCellValid(t)}_isLastRow(e){var t=this._dataController;return this._isVirtualRowRender()?e>=t.getMaxRowIndex():e===Math.max(...t.items().map((a,n)=>!1!==a.visible?n:-1))}_isFirstValidCell(e){var t=!1;return 0===e.rowIndex&&e.columnIndex>=0&&(t=t||!this._hasValidCellBeforePosition(e)),t}_hasValidCellBeforePosition(e){for(var{columnIndex:t}=e,r=!1;t>0&&!r;){var a={columnIndex:--t,rowIndex:e.rowIndex};r=this._isCellByPositionValid(a)}return r}_hasValidCellAfterPosition(e){for(var{columnIndex:t}=e,r=!1,a=this._getVisibleColumnCount();t<a-1&&!r;){var n={columnIndex:++t,rowIndex:e.rowIndex};r=this._isCellByPositionValid(n)}return r}_isLastValidCell(e){var t=e.columnIndex>=0?e.columnIndex+1:0,{rowIndex:r}=e,a={columnIndex:t,rowIndex:r},n=this._dataController.getVisibleRows(),s=n&&n[r];return!!this._isLastRow(r)&&(!!(("group"===s?.rowType||"groupFooter"===s?.rowType)&&e.columnIndex>0||e.columnIndex===this._getVisibleColumnCount()-1)||!this._isCellByPositionValid(a)&&this._isLastValidCell(a))}_isCellValid(e,t){if(kr(e)){var r=e.parent(),a=this._rowsView.getCellIndex(e)+this._columnsController.getColumnIndexOffset(),n=this._getColumnByCellElement(e),s=this._getVisibleColumnCount(),o=this._editingController,l=rv(r),d=n&&n.showWhenGrouped,u=n&&!e.hasClass(Lh)&&md(r);if((i=>void 0!==i.attr("dx-drag-cell"))(e))return!1;if(this._isMasterDetailCell(e))return!0;if(s>a&&(!l&&n&&(!(0,m.$K)(n.groupIndex)||d&&u)||parseInt(e.attr("colspan"),10)>1)){var f=this._dataController.items(),p=this._rowsView.getRowIndex(r),g=f[p],w=o&&this._isCellEditMode()&&o.isEditing(),x=o&&o.isEditRow(p),y=x||w;return n.command?this._isLegacyNavigation()?!y&&"expand"===n.command:!w&&(x?"select"!==n.command:!y):(!w||!g||"data"===g.rowType)&&(!y||n.allowEditing||t)}}}getFirstValidCellInRow(e,t){for(var a,n,r=e.find("> td"),s=t=t||0;s<r.length;++s)if(a=r.eq(s),this._isCellValid(a)){n=a;break}return n}_getNextCell(e,t,r){var o,l,a=r||this._focusedCellPosition,n=this.isRowFocusType(),s=n||["next","previous"].includes(e);if(this._focusedView&&a){var d=this._getNewPositionByCode(a,t,e);o=(0,b.Z)(this._getCell(d));var u="previous"===e?this._isFirstValidCell(d):this._isLastValidCell(d);if(kr(o)&&!this._isCellValid(o)&&this._isCellInRow(d,s)&&!u&&(o=n?this.getFirstValidCellInRow(o.parent(),d.columnIndex):this._getNextCell(e,"cell",d)),l=kr(o)&&o.parent(),this._hasSkipRow(l)){var c=this._getRowIndex(l);if(this._isLastRow(c))return null;o=this._getNextCell(e,"row",{columnIndex:a.columnIndex,rowIndex:c})}return kr(o)?o:null}return null}_startEditing(e,t){var r=this._focusedCellPosition,a=this.getVisibleRowIndex(),n=this.getVisibleColumnIndex(),s=this._dataController.items()[a],o=this._columnsController.getVisibleColumns()[n];this._isAllowEditing(s,o)&&(this._isRowEditMode()?this._editingController.editRow(a):r&&this._startEditCell(e,t))}_isAllowEditing(e,t){return this._editingController.allowUpdating({row:e})&&t&&t.allowEditing}_editFocusedCell(){var e=this.getVisibleRowIndex(),t=this.getVisibleColumnIndex();return this._editingController.editCell(e,t)}_startEditCell(e,t){this._fastEditingStarted=(0,m.$K)(t);var r=this._editFocusedCell(),a=(0,m.EY)(r);if(this._isFastEditingStarted()&&(a||r)){var s=a&&t===iv?"":t,o=a?r:(0,Y.BH)().resolve(),l=this._rowsView.waitAsyncTemplates(!0);(0,Y.gx)(o,l).done(()=>{this._editingCellHandler(e,s)})}}_editingCellHandler(e,t){var r,a,n=this._getFocusedCell().find(Bh).eq(0),s=n.get(0);if(s){var o=(0,ce.yM)(e,{type:"keydown",target:s}),l=(0,ce.yM)(e,{type:"keypress",target:s}),d=(0,ce.yM)(e,{type:"input",target:s});d.originalEvent&&(d.originalEvent=(0,ce.yM)(d.originalEvent,{data:t})),null===(a=(r=s).select)||void 0===a||a.call(r),k.Z.trigger(n,o),o.isDefaultPrevented()||(k.Z.trigger(n,l),l.isDefaultPrevented())||setTimeout(()=>{var c=this._getKeyPressInputValue(n,t);n.val(c);var f=n.closest(".".concat("dx-widget"));k.Z.off(f,"focusout"),k.Z.one(f,"focusout",()=>{k.Z.trigger(n,"change")}),k.Z.trigger(n,d)},ii.Z.mozilla?25:0)}}_getKeyPressInputValue(e,t){var r=e.val();return"-"===t&&"-0"===r?"-0":t}_fireFocusChangingEvents(e,t,r,a){var n,s={},o=null!==(n=this._getCellPosition(t))&&void 0!==n?n:{};return this.isCellFocusType()&&((s=this._fireFocusedCellChanging(e,t,a)).cancel||(o.columnIndex=s.newColumnIndex,o.rowIndex=s.newRowIndex,a=s.isHighlighted,t=(0,b.Z)(this._getCell(o)))),!s.cancel&&r&&t&&((s=this._fireFocusedRowChanging(e,t.parent())).cancel||(o.rowIndex=s.newRowIndex,s.isHighlighted=a)),s.$newCellElement=(0,b.Z)(this._getCell(o)),s.$newCellElement.length||(s.$newCellElement=t),s}_fireFocusedCellChanging(e,t,r){var a=this.option("focusedColumnIndex"),n=this.option("focusedRowIndex"),s=this._getCellPosition(t),o=s?s.columnIndex:-1,l=s?s.rowIndex:-1,c={cellElement:t,prevColumnIndex:a,prevRowIndex:n,newColumnIndex:o,newRowIndex:l,rows:this._dataController.getVisibleRows(),columns:this._columnsController.getVisibleColumns(),event:e,isHighlighted:r||!1,cancel:!1};return this._canceledCellPosition=null,this.executeAction("onFocusedCellChanging",c),(c.newColumnIndex!==o||c.newRowIndex!==l)&&(c.$newCellElement=(0,b.Z)(this._getCell({columnIndex:c.newColumnIndex,rowIndex:c.newRowIndex}))),c.cancel&&(this._canceledCellPosition={rowIndex:l,columnIndex:o}),c}_fireFocusedCellChanged(e){var t=this._rowsView.getCellIndex(e),r=e?.parent().data("options"),a=r?.key;this._memoFireFocusedCellChanged(a,t)}_memoFireFocusedCellChanged(e,t){var r=this._getFocusedCell(),a=this._getRowIndex(r?.parent()),n=Math.min(a-this._dataController.getRowIndexOffset(),this._dataController.items().length-1);if(!this._editingController.isEditCell(n,t)){var o=this._dataController.items()[n],l=this._columnsController.getVisibleColumns()[t];this.executeAction("onFocusedCellChanged",{cellElement:r?(0,rt.u)(r):void 0,columnIndex:t,rowIndex:a,row:o,column:l})}}_fireFocusedRowChanging(e,t){var r=this._getRowIndex(t),a=this.option("focusedRowIndex"),n=this._dataController.loadingOperationTypes(),s={rowElement:t,prevRowIndex:a,newRowIndex:r,event:e,rows:this._dataController.getVisibleRows(),cancel:!1},o=n.sorting||n.grouping||n.filtering||n.paging;return!this._dataController||this._dataController.isLoading()&&o?(s.cancel=!0,s):(this.option("focusedRowEnabled")&&(this.executeAction("onFocusedRowChanging",s),!s.cancel&&s.newRowIndex!==r&&(s.resetFocusedRow=s.newRowIndex<0,s.resetFocusedRow||this.setFocusedRowIndex(s.newRowIndex),s.rowIndexChanged=!0)),s)}_fireFocusedRowChanged(){var e,t=this.option("focusedRowEnabled"),r=this.option("focusedRowKey"),a=null===(e=this._focusController)||void 0===e?void 0:e.getFocusedRowIndexByKey(r);!t||(0,m.$K)(r)&&a<0||this._memoFireFocusedRowChanged(r,a)}_memoFireFocusedRowChanged(e,t){var r=t-this._dataController.getRowIndexOffset();this.executeAction("onFocusedRowChanged",{rowElement:t<0?void 0:this._rowsView.getRowElement(r),rowIndex:t,row:t<0?void 0:this._dataController.getVisibleRows()[r]})}_isEventInCurrentGrid(e){return Te.isElementInCurrentGrid(this,(0,b.Z)(e.target))}_isRowEditMode(){var e=this._editingController.getEditMode();return e===rn||e===Co}_isCellEditMode(){var e=this._editingController.getEditMode();return e===mo||e===Cs}_isFastEditingAllowed(){return this._isCellEditMode()&&this.option("keyboardNavigation.editOnKeyPress")}_getInteractiveElement(e,t){var r=e.find(Bh).filter(":visible");return t?r.last():r.first()}_applyTabIndexToElement(e){var t,r=null!==(t=this.option("tabIndex"))&&void 0!==t?t:0;e.attr("tabindex",r)}_getCell(e){if(this._focusedView&&e){var t=this._dataController.getRowIndexOffset(),r=this._columnsController.getVisibleColumns(null,!0)[e.columnIndex],a=r&&r.fixed?this._getFixedColumnIndexOffset(r):this._columnsController.getColumnIndexOffset();return this._focusedView.getCell({rowIndex:e.rowIndex>=0?e.rowIndex-t:-1,columnIndex:e.columnIndex>=0?e.columnIndex-a:-1})}}_getRowIndex(e){var t=this._rowsView.getRowIndex(e);return t>=0&&(t+=this._dataController.getRowIndexOffset()),t}_hasSkipRow(e){var t=e&&e.get(0);return t&&("none"===t.style.display||rv(e)&&!e.hasClass(this.addWidgetPrefix(sh)))}_allowEditingOnEnterKey(){return"startEdit"===this.option("keyboardNavigation.enterKeyAction")}_isLegacyNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDirectionCodeByKey(e){var t;switch(e){case"upArrow":t="prevRow";break;case"downArrow":t="nextRow";break;case"leftArrow":t=this.option("rtlEnabled")?"nextInRow":"previousInRow";break;case"rightArrow":t=this.option("rtlEnabled")?"previousInRow":"nextInRow"}return t}_isVirtualScrolling(){var e=this.option("scrolling.mode");return"virtual"===e||"infinite"===e}_isVirtualRowRender(){return this._isVirtualScrolling()||Te.isVirtualRowRendering(this)}_isVirtualColumnRender(){return"virtual"===this.option("scrolling.columnRenderingMode")}_scrollBy(e,t,r,a){var n=this,s=this._rowsView.getScrollable();return n._focusedCellPosition&&s.on("scroll",function o(){s.off("scroll",o),setTimeout(n.restoreFocusableElement.bind(n,r,a))}),s.scrollBy({left:e,top:t})}_isInsideEditForm(e){var t=(0,b.Z)(e).closest(".".concat(this.addWidgetPrefix(sh)));return t.length&&this.elementIsInsideGrid(t)}_isMasterDetailCell(e){var t=(0,b.Z)(e).closest(".".concat(wE));return t.length&&this.elementIsInsideGrid(t)}_processNextCellInMasterDetail(e,t){!this._isInsideEditForm(e)&&e&&this._applyTabIndexToElement(e)}_handleTabKeyOnMasterDetailCell(e,t){if(this._isMasterDetailCell(e)){this._updateFocusedCellPosition((0,b.Z)(e),t);var r=this._getNextCell(t,"row");return this._processNextCellInMasterDetail(r,(0,b.Z)(e)),!0}return!1}_getElementType(e){return(0,b.Z)(e).is("tr")?"row":"cell"}_isFastEditingStarted(){return this._isFastEditingAllowed()&&this._fastEditingStarted}_getVisibleColumnCount(){return this._columnsController.getVisibleColumns(null,!0).length}_isCellInRow(e,t){var{columnIndex:r}=e,a=this._getVisibleColumnCount();return t?r>=0&&r<=a-1:r>0&&r<a-1}_isCellElement(e){return e.length&&"TD"===e[0].tagName}_getCellElementFromTarget(e){var t=this._getElementType(e),r=(0,b.Z)(e);return"cell"===t?r.closest(".".concat(On," > td")):r.children().not(".".concat(Lh)).first()}_getRowsViewElement(){var e;return null===(e=this._rowsView)||void 0===e?void 0:e.element()}isKeyboardEnabled(){return this.option("keyboardNavigation.enabled")}_processCanceledEditCellPosition(e,t){if(this._canceledCellPosition){var r=this._canceledCellPosition.rowIndex===e&&this._canceledCellPosition.columnIndex===t;return this._canceledCellPosition=null,r}}updateFocusedRowIndex(){var e=this._dataController,t=this.getVisibleRowIndex(),r=e.items(),a=r.length?r.length-1:-1,n=e.getRowIndexOffset();a>=0&&t>a&&this.setFocusedRowIndex(a+n)}}},extenders:{views:{rowsView:i=>class extends i{_rowClick(e){var t=this._editingController.getEditRowIndex(),r=this._keyboardNavigationController.isKeyboardEnabled();t===e.rowIndex&&this._keyboardNavigationController.setCellFocusType(),(av()||!r)&&this.option("focusedRowEnabled")&&this._triggerPointerDownEventHandler(e,!r),super._rowClick.apply(this,arguments)}_triggerPointerDownEventHandler(e,t){var{originalEvent:r}=e.event;if(r){var a=(0,b.Z)(r.target),n=this.getCellIndex(a),s=this._columnsController.getVisibleColumns()[n],o=this._dataController.items()[e.rowIndex];if(this._keyboardNavigationController._isAllowEditing(o,s)||t){var l=(0,ce.yM)(r,{currentTarget:r.target});this._keyboardNavigationController._pointerEventHandler(l)}}}renderFocusState(e){var{preventScroll:t,pageSizeChanged:r}=e??{},a=this.element();a&&!(0,Gu.si)(a)&&a.attr("tabindex",null),r&&this._keyboardNavigationController.updateFocusedRowIndex();var n=this._keyboardNavigationController.getVisibleRowIndex();(!(0,m.$K)(n)||n<0)&&(n=0);var s=this.getCellElements(n);this._keyboardNavigationController.isKeyboardEnabled()&&s?.length&&this.updateFocusElementTabIndex(s,t)}updateFocusElementTabIndex(e,t){var r=e.eq(0).parent();if(gd(r))this._keyboardNavigationController._applyTabIndexToElement(r);else{var a=this._keyboardNavigationController.getColumnIndex();(!(0,m.$K)(a)||a<0)&&(a=0),this._updateFocusedCellTabIndex(e,a)}}_updateFocusedCellTabIndex(e,t){var r=this._keyboardNavigationController,a=e?e.length:-1,n=function(l){var d=r._isMasterDetailCell(l),u=r._isCellValid(l);if(!d&&u&&r._isCellElement(l))return r._applyTabIndexToElement(l),r.setCellFocusType(),!0},s=((i,e)=>i.filter("[".concat("aria-colindex",'="').concat(e+1,'"]:not([').concat("dx-drag-cell","])")).first())(e,t);if(s.length)n(s);else{a<=t&&(t=a-1);for(var o=t;o<a&&!n((0,b.Z)(e[o]));++o);}}renderDelayedTemplates(e){super.renderDelayedTemplates.apply(this,arguments),this.waitAsyncTemplates().done(()=>{this._renderFocusByChange(e)})}_renderFocusByChange(e){var t,{operationTypes:r,repaintChangesOnly:a}=e??{},{fullReload:n,pageSize:s}=r??{},o=!(null===(t=e?.changeTypes)||void 0===t||!t.find(d=>"insert"===d||"remove"===d));if(!e||!a||n||s||o){var l=function zz(i){var e=i.getController("keyboardNavigation");return!!e._isVirtualScrolling()&&i.option("focusedRowIndex")===e.getRowIndex()}(this);this.renderFocusState({preventScroll:l,pageSizeChanged:s})}}_renderCore(e){var t=super._renderCore.apply(this,arguments);return this._renderFocusByChange(e),t}_editCellPrepared(e){var t,r=this._getEditorInstance(e),a=null===(t=this._keyboardNavigationController)||void 0===t?void 0:t._isFastEditingStarted();r&&a&&this._handleEditingNavigationMode(r),super._editCellPrepared.apply(this,arguments)}_handleEditingNavigationMode(e){["downArrow","upArrow"].forEach(r=>{var a=e._supportedKeys()[r];e.registerKeyHandler(r,n=>{if("true"===e._input().attr("aria-expanded"))return a&&a.call(e,n)})}),e.registerKeyHandler("leftArrow",J.ZT),e.registerKeyHandler("rightArrow",J.ZT),"dxDateBox"===e.NAME&&e.option("useMaskBehavior")&&e.registerKeyHandler("enter",J.ZT)}_getEditorInstance(e){var t=e.find(".dx-texteditor").eq(0);return Te.getWidgetInstance(t)}}},controllers:{editing:i=>class extends i{editCell(e,t){if(this._keyboardNavigationController._processCanceledEditCellPosition(e,t))return!1;var r=super.editCell(e,t);return r&&this._keyboardNavigationController.setupFocusedView(),r}editRow(e){var t=this._keyboardNavigationController.getVisibleColumnIndex(),r=this._columnsController.getVisibleColumns()[t];(r&&r.type||this.option("editing.mode")===Co)&&this._keyboardNavigationController._resetFocusedCell(),super.editRow(e)}addRow(e){return this._keyboardNavigationController.setupFocusedView(),this._keyboardNavigationController.setCellFocusType(),super.addRow.apply(this,arguments)}getFocusedCellInRow(e){var t=super.getFocusedCellInRow(e),r=this._dataController.getRowIndexOffset(),a=this._keyboardNavigationController._focusedCellPosition.rowIndex-r;if(this._keyboardNavigationController.isKeyboardEnabled()&&a===e){var n=this._keyboardNavigationController._getFocusedCell();kr(n)&&!n.hasClass(yE)&&(t=n)}return t}_processCanceledEditingCell(){this.closeEditCell().done(()=>{this._keyboardNavigationController._updateFocus()})}closeEditCell(){var e=this._keyboardNavigationController;e._fastEditingStarted=!1;var t=super.closeEditCell.apply(this,arguments);return e._updateFocus(),t}_delayedInputFocus(){this._keyboardNavigationController._isNeedScroll=!0,super._delayedInputFocus.apply(this,arguments)}_isEditingStart(){var e=super._isEditingStart.apply(this,arguments);if(e&&!this._keyboardNavigationController._isNeedFocus){var t=this._keyboardNavigationController._getFocusedCell();this._keyboardNavigationController._focus(t,!0)}return e}},data:i=>class extends i{_correctRowIndices(e){var t=this._keyboardNavigationController._focusedCellPosition;if(super._correctRowIndices.apply(this,arguments),t&&t.rowIndex>=0){var r=e(t.rowIndex);r&&(t.rowIndex+=r,this._editorFactoryController.refocus())}}getMaxRowIndex(){var e=this.items().length-1,t=this.virtualItemsCount();return t&&(e+=this.getRowIndexOffset()+t.end),e}},adaptiveColumns:i=>class extends i{_showHiddenCellsInView(e){var{viewName:t,$cells:r,isCommandColumn:a}=e;super._showHiddenCellsInView.apply(this,arguments),t===OE&&!a&&r.each((n,s)=>{var o=(0,b.Z)(s);PE(o)&&o.attr("tabindex",0)})}_hideVisibleCellInView(e){var{viewName:t,$cell:r,isCommandColumn:a}=e;super._hideVisibleCellInView.apply(this,arguments),t===OE&&!a&&PE(r)&&r.removeAttr("tabindex")}},keyboardNavigation:i=>class extends i{init(){var e;super.init(),this.rowsViewFocusOutHandlerContext=null!==(e=this.rowsViewFocusOutHandlerContext)&&void 0!==e?e:this.rowsViewFocusOutHandler.bind(this)}subscribeToRowsViewFocusEvent(){var e;super.subscribeToRowsViewFocusEvent();var t=null===(e=this._rowsView)||void 0===e?void 0:e.element();k.Z.on(t,"focusout",this.rowsViewFocusOutHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var e;super.unsubscribeFromRowsViewFocusEvent();var t=null===(e=this._rowsView)||void 0===e?void 0:e.element();k.Z.off(t,"focusout",this.rowsViewFocusOutHandlerContext)}rowsViewFocusHandler(e){var t=(0,b.Z)(e.target);this.translateFocusIfNeed(e,t),super.rowsViewFocusHandler(e)}rowsViewFocusOutHandler(){this.makeScrollableFocusableIfNeed()}translateFocusIfNeed(e,t){var r=this.isScrollableNeedFocusable(),a=this._isFixedColumn(0);if(r&&a){var n=this._rowsView.getCell({rowIndex:0,columnIndex:0}),s=!!n.attr("tabindex"),o=t.is(this._$firstNotFixedCell);s&&o&&(e.preventDefault(),this._focus(n))}}renderCompleted(e){this._$firstNotFixedCell=this.getFirstNotFixedCell(),this.makeScrollableFocusableIfNeed(),super.renderCompleted(e)}_focus(e,t,r){super._focus(e,t,r),this.makeScrollableFocusableIfNeed()}_tabKeyHandler(e,t){var r,n=!((0,m.$K)(this._focusedCellPosition)&&!(0,m.Qr)(this._focusedCellPosition))||!e.shift&&this._isLastValidCell(this._focusedCellPosition)||e.shift&&this._isFirstValidCell(this._focusedCellPosition),s=this.isScrollableNeedFocusable();n&&s&&(null===(r=this._$firstNotFixedCell)||void 0===r||r.removeAttr("tabIndex")),super._tabKeyHandler(e,t)}getFirstNotFixedCell(){var t=this._columnsController.getVisibleColumns().findIndex(r=>{var{fixed:a}=r;return!a});return-1===t?void 0:this._rowsView._getCellElement(0,t)}isScrollableNeedFocusable(){var e,t,r=!!this._rowsView.getScrollable(),a=!(null===(e=this._rowsView._fixedTableElement)||void 0===e||!e.length),n=!(null===(t=this._rowsView.getCellElements(0))||void 0===t||!t.length);return r&&a&&n}makeScrollableFocusableIfNeed(){!this.isScrollableNeedFocusable()||!this._$firstNotFixedCell||this._applyTabIndexToElement(this._$firstNotFixedCell)}}}}};function nv(i,e,t,r){var a=0;if(i<e)for(;a<t.items.length;a++)nv(i+1,e,t.items[a],r);i===e&&r(t)}function Vh(i,e){var t;if("map"in i)return i.map(e);var r=new Array(i.length);for(t in i)r[t]=e(i[t],t);return r}function Xz(i){return i===Ca.bG.count}function BE(i){var e=(0,Dt.vb)(i.selector),t=!("skipEmptyValues"in i)||i.skipEmptyValues,{aggregator:r}=i;if("string"==typeof r&&!(r=Ca.bG[r]))throw Hu.R0.Error("E4001",i.aggregator);return{selector:e,aggregator:r,skipEmptyValues:t}}He.registerModule("keyboardNavigation",qz);class Jz{constructor(e){this._data=e.data,this._groupLevel=e.groupLevel||0,this._totalAggregates=Vh(e.totalAggregates||[],BE),this._groupAggregates=Vh(e.groupAggregates||[],BE),this._totals=[]}calculate(){this._totalAggregates.length&&this._calculateTotals(0,{items:this._data}),this._groupAggregates.length&&this._groupLevel>0&&this._calculateGroups({items:this._data})}totalAggregates(){return this._totals}_aggregate(e,t,r){for(var a=t.items?t.items.length:0,n=0;n<e.length;n++)if(Xz(e[n].aggregator))r[n]=(r[n]||0)+a;else for(var s=0;s<a;s++)this._accumulate(n,e[n],r,t.items[s])}_calculateTotals(e,t){if(0===e&&(this._totals=this._seed(this._totalAggregates)),e===this._groupLevel)this._aggregate(this._totalAggregates,t,this._totals);else for(var r=0;r<t.items.length;r++)this._calculateTotals(e+1,t.items[r]);0===e&&(this._totals=this._finalize(this._totalAggregates,this._totals))}_calculateGroups(e){var t=this._groupLevel,r=t+1,a=this._seed.bind(this,this._groupAggregates),n=this._aggregate.bind(this,this._groupAggregates),s=this._finalize.bind(this,this._groupAggregates);function o(l){l.aggregates=a(r-1),r===t?n(l,l.aggregates):nv(r,t,l,d=>{n(d,l.aggregates)}),l.aggregates=s(l.aggregates)}for(;--r>0;)nv(0,r,e,o)}_seed(e,t){return Vh(e,r=>{var{aggregator:a}=r;return"seed"in a?(0,m.mf)(a.seed)?a.seed(t):a.seed:NaN})}_accumulate(e,t,r,a){var n=t.selector(a),{aggregator:s}=t,{skipEmptyValues:o}=t;o&&function Yz(i){return i!=i||""===i||null==i}(n)||(r[e]=r[e]!=r[e]?n:s.step(r[e],n))}_finalize(e,t){return Vh(e,(r,a)=>{var n=r.aggregator.finalize;return n?n(t[a]):t[a]})}}var sv="groupFooter",VE="totalFooter",NE=function(i,e){var t=(0,b.Z)(i),{column:r}=e,{summaryItems:a}=e,n=[];if(!r.command&&a){for(var s=0;s<a.length;s++){var o=a[s],l=He.getSummaryText(o,e.summaryTexts);n.push((0,b.Z)("<div>").css("textAlign",o.alignment||r.alignment).addClass("dx-datagrid-summary-item").addClass("dx-datagrid-text-content").addClass(o.cssClass).toggleClass("dx-datagrid-group-text-content","group"===e.rowType).text(l).attr("aria-label","".concat(r.caption," ").concat(l)))}t.append(n)}},FE=function(i,e){var t=i.option("summary.texts")||{};return{totalItem:e.row,summaryItems:e.row.summaryCells[e.columnIndex],summaryTexts:t}},ov=function(i){return i.summary||i.aggregates||[]},lv=function(i){return i.option("summary.recalculateWhileEditing")},oW=function i(e,t,r,a){a=a||[];for(var n=0;n<e.length;n++)a.push(e[n].key),1===t?r(a,e[n].items):i(e[n].items,t-1,r,a),a.pop()},lW=function i(e,t,r){return r?i(e,t.map(a=>({items:[a]}),r-1)):e.concat(t)},dW=function i(e,t,r){return r?e.map(a=>{var n={},s=i(a.items||[],t,r-1);return Object.defineProperty(n,"aggregates",{get:()=>a.aggregates,set:o=>{a.aggregates=o}}),(0,N.l)(n,a,{items:s})}):e.filter(a=>t.indexOf(a)<0)},uW=function i(e,t,r){if(!e||!t.length)return e;var s,n=r[0];return t[0]&&n&&n.length&&(s=(0,Ta.Z)(e),(0,j.S6)(n,function(o){s=0===o?s.sortBy(this.selector,this.desc):s.thenBy(this.selector,this.desc)}),s.enumerate().done(o=>{e=o})),t=t.slice(1),r=r.slice(1),t.length&&r.length&&(0,j.S6)(e,function(){this.items=i(this.items,t,r)}),e},kE=function(i,e,t){var r=t&&t.sortByGroups&&t.sortByGroups();return r&&r.length?uW(i,e,r):i},ME=function(i,e,t,r){var a;if(lv(i)){var n=i.getController("editing");if(n){var s=n.getInsertedData();s.length&&(t=lW(t,s,r));var o=n.getRemovedData();o.length&&(t=dW(t,o,r))}}return e&&(a=new Jz({totalAggregates:e.totalAggregates,groupAggregates:e.groupAggregates,data:t,groupLevel:r})).calculate(),a?a.totalAggregates():[]};vu.extend(i=>class extends i{init(){super.init.apply(this,arguments),this._totalAggregates=[],this._summaryGetter=J.ZT}summaryGetter(e){if(!arguments.length)return this._summaryGetter;(0,m.mf)(e)&&(this._summaryGetter=e)}summary(e){if(!arguments.length)return this._summaryGetter();this._summaryGetter=function(){return e}}totalAggregates(){return this._totalAggregates}isLastLevelGroupItemsPagingLocal(){var e=this.summary(),t=e?.sortByGroups();return t?.length}sortLastLevelGroupItems(e,t,r){var a=no.Z.multiLevelGroup((0,Ta.Z)(e),t).toArray(),n=[];return r.forEach(s=>{oW(a,t.length,(o,l)=>{s.toString()===o.toString()&&(n=n.concat(l))})}),n}_customizeRemoteOperations(e){var t=this.summary();t&&(e.remoteOperations.summary?(!e.isCustomLoading||e.storeLoadOptions.isLoadingAll)&&(e.storeLoadOptions.group&&(e.remoteOperations.grouping?e.storeLoadOptions.groupSummary=t.groupAggregates:t.groupAggregates.length&&(e.remoteOperations.paging=!1)),e.storeLoadOptions.totalSummary=t.totalAggregates):(t.totalAggregates.length||t.groupAggregates.length&&e.storeLoadOptions.group)&&(e.remoteOperations.paging=!1)),super._customizeRemoteOperations.apply(this,arguments);var r=e.cachedData.extra;r?.summary&&!e.isCustomLoading&&(e.storeLoadOptions.totalSummary=void 0)}_handleDataLoadedCore(e){var t,r,a=(0,Ca.G5)(e.storeLoadOptions.group||e.loadOptions.group||[]),n=e.remoteOperations||{},s=this.summaryGetter()(n);if(!e.isCustomLoading||e.storeLoadOptions.isLoadingAll)if(n.summary)!n.paging&&a.length&&s&&(n.grouping||ME(this,{groupAggregates:s.groupAggregates},e.data,a.length),e.data=kE(e.data,a,s));else if(!n.paging&&s){var o=e.operationTypes||{};if(!Object.keys(o).some(u=>o[u])||null===(r=null===(t=e.cachedData)||void 0===t?void 0:t.extra)||void 0===r||!r.summary||a.length&&s.groupAggregates.length){var d=ME(this,s,e.data,a.length);e.extra=(0,m.PO)(e.extra)?e.extra:{},e.extra.summary=d,e.cachedData&&(e.cachedData.extra=e.extra)}e.data=kE(e.data,a,s)}e.isCustomLoading||(this._totalAggregates=e.extra&&e.extra.summary||this._totalAggregates),super._handleDataLoadedCore(e)}}),He.registerModule("summary",{defaultOptions:()=>({summary:{groupItems:void 0,totalItems:void 0,calculateCustomSummary:void 0,skipEmptyValues:!0,recalculateWhileEditing:!1,texts:{sum:ae.Z.format("dxDataGrid-summarySum"),sumOtherColumn:ae.Z.format("dxDataGrid-summarySumOtherColumn"),min:ae.Z.format("dxDataGrid-summaryMin"),minOtherColumn:ae.Z.format("dxDataGrid-summaryMinOtherColumn"),max:ae.Z.format("dxDataGrid-summaryMax"),maxOtherColumn:ae.Z.format("dxDataGrid-summaryMaxOtherColumn"),avg:ae.Z.format("dxDataGrid-summaryAvg"),avgOtherColumn:ae.Z.format("dxDataGrid-summaryAvgOtherColumn"),count:ae.Z.format("dxDataGrid-summaryCount")}},sortByGroupSummaryInfo:void 0}),views:{footerView:class hW extends wl{_getRows(){return this._dataController.footerItems()}_getCellOptions(e){return(0,N.l)(super._getCellOptions(e),FE(this,e))}_renderCellContent(e,t){NE(e,t),super._renderCellContent.apply(this,arguments)}_renderCore(e){var t=!1,r=this._dataController.footerItems()[0];(!e||!e.columnIndices)&&(this.element().empty().addClass("dx-datagrid-total-footer").toggleClass("dx-datagrid-nowrap",!this.option("wordWrapEnabled")),t=!0),r&&r.summaryCells&&r.summaryCells.length&&(this._updateContent(this._renderTable({change:e}),e),t&&this._updateScrollLeftPosition())}_updateContent(e,t){return t&&"update"===t.changeType&&t.columnIndices?this.waitAsyncTemplates().done(()=>{var r=this.getTableElement().find(".dx-row"),a=e.find(".dx-row");this._updateCells(r,a,t.columnIndices[0])}):super._updateContent.apply(this,arguments)}_rowClick(e){var t=this._dataController.footerItems()[e.rowIndex]||{};this.executeAction("onRowClick",(0,N.l)({},e,t))}_columnOptionChanged(e){var{optionNames:t}=e;e.changeTypes.grouping||(t.width||t.visibleWidth)&&super._columnOptionChanged(e)}_handleDataChanged(e){var{changeType:t}=e;"update"===e.changeType&&e.repaintChangesOnly?e.totalColumnIndices?e.totalColumnIndices.length&&this.render(null,{changeType:"update",columnIndices:[e.totalColumnIndices]}):this.render():("refresh"===t||"append"===t||"prepend"===t)&&this.render()}_createRow(e){var t=super._createRow.apply(this,arguments);return e.rowType===VE&&(t.addClass("dx-footer-row"),t.addClass("dx-cell-focus-disabled"),t.attr("tabindex",0)),t}getHeight(){return this.getElementHeight()}isVisible(){return!!this._dataController.footerItems().length}}},extenders:{controllers:{data:i=>class extends i{_isDataColumn(e){return e&&(!(0,m.$K)(e.groupIndex)||e.showWhenGrouped)}_isGroupFooterVisible(){for(var e=this.option("summary.groupItems")||[],t=0;t<e.length;t++){var r=e[t],a=this._columnsController.columnOption(r.showInColumn||r.column);if(r.showInGroupFooter&&this._isDataColumn(a))return!0}return!1}_processGroupItems(e,t,r){var a=r&&r.data,n=super._processGroupItems.apply(this,arguments);return r&&(void 0===r.isGroupFooterVisible&&(r.isGroupFooterVisible=this._isGroupFooterVisible()),a&&a.items&&r.isGroupFooterVisible&&(r.collectContinuationItems||!a.isContinuationOnNextPage)&&n.push({rowType:sv,key:r.path.slice(),data:a,groupIndex:r.path.length-1,values:[]})),n}_processGroupItem(e,t){var r=this;if(t.summaryGroupItems||(t.summaryGroupItems=r.option("summary.groupItems")||[]),"group"===e.rowType){var a=-1,n=-1;(0,j.S6)(t.visibleColumns,function(s){e.groupIndex===this.groupIndex&&(a=this.index),s>0&&"expand"===t.visibleColumns[s-1].command&&"expand"!==this.command&&(n=this.index)}),e.summaryCells=this._calculateSummaryCells(t.summaryGroupItems,ov(e.data),t.visibleColumns,(s,o)=>s.showInGroupFooter?-1:s.alignByColumn&&o&&!(0,m.$K)(o.groupIndex)&&o.index!==n?o.index:a,!0)}return e.rowType===sv&&(e.summaryCells=this._calculateSummaryCells(t.summaryGroupItems,ov(e.data),t.visibleColumns,(s,o)=>s.showInGroupFooter&&r._isDataColumn(o)?o.index:-1)),e}_calculateSummaryCells(e,t,r,a,n){var s=this,o=[],l={};return(0,j.S6)(e,(d,u)=>{var c=s._columnsController.columnOption(u.column),f=u.showInColumn&&s._columnsController.columnOption(u.showInColumn)||c,p=a(u,f);if(p>=0){l[p]||(l[p]=[]);var w,g=t[d];g==g&&((0,m.$K)(u.valueFormat)?w=u.valueFormat:"count"!==u.summaryType&&(w=He.getFormatByDataType(c&&c.dataType)),l[p].push((0,N.l)({},u,{value:(0,m.HD)(g)&&c&&c.deserializeValue?c.deserializeValue(g):g,valueFormat:w,columnCaption:c&&c.index!==p?c.caption:void 0})))}}),(0,m.Qr)(l)||r.forEach((d,u)=>{var c=r[u-1];o.push(l[!n||"expand"!==c?.command&&"expand"!==d.command?d.index:c?.index]||[])}),o}_getSummaryCells(e,t){var r=this;return r._calculateSummaryCells(e,t,r._columnsController.getVisibleColumns(),(n,s)=>r._isDataColumn(s)?s.index:-1)}_updateItemsCore(e){var t,r=this._dataSource,a=this._footerItems,n=a&&a[0]&&a[0].summaryCells,s=this.option("summary.totalItems");if(this._footerItems=[],r&&s&&s.length){var o=r.totalAggregates();t=this._getSummaryCells(s,o),e&&e.repaintChangesOnly&&n&&(e.totalColumnIndices=t.map((l,d)=>JSON.stringify(l)!==JSON.stringify(n[d])?d:-1).filter(l=>l>=0)),t.length&&this._footerItems.push({rowType:VE,summaryCells:t})}super._updateItemsCore(e)}_prepareUnsavedDataSelector(e){if(lv(this)){var t=this.getController("editing");if(t)return function(r){return r=t.getUpdatedData(r),e(r)}}return e}_prepareAggregateSelector(e,t){return e=this._prepareUnsavedDataSelector(e),"avg"===t||"sum"===t?function(r){var a=e(r);return(0,m.$K)(a)?Number(a):a}:e}_getAggregates(e,t){var r=this,a=r.getController("columns"),n=r.option("summary.calculateCustomSummary"),s=r.option("summary.skipEmptyValues");return(0,j.UI)(e||[],o=>{var l=a.columnOption(o.column),d=l&&l.calculateCellValue?l.calculateCellValue.bind(l):(0,Dt.vb)(l?l.dataField:o.column),u=o.summaryType||"count",c=(0,m.$K)(o.skipEmptyValues)?o.skipEmptyValues:s;if(t)return{selector:o.column,summaryType:u};var f=r._prepareAggregateSelector(d,u);if("custom"===u){n||(Rt.Z.log("E1026"),n=function(){});var p={component:r.component,name:o.name};n(p),p.summaryProcess="calculate",u={seed:g=>(p.summaryProcess="start",p.totalValue=void 0,p.groupIndex=g,delete p.value,n(p),p.totalValue),step:(g,w)=>(p.summaryProcess="calculate",p.totalValue=g,p.value=w,n(p),p.totalValue),finalize:g=>(p.summaryProcess="finalize",p.totalValue=g,delete p.value,n(p),p.totalValue)}}return{selector:f,aggregator:u,skipEmptyValues:c}})}_addSortInfo(e,t,r,a){if(t){var{groupIndex:n}=t;a=a||t.sortOrder,(0,m.$K)(n)&&(e[n]=e[n]||[],e[n].push({selector:r,desc:"desc"===a}))}}_findSummaryItem(e,t){var r=-1;return(0,m.$K)(t)&&(0,j.S6)(e||[],function(a){if(this.name===t||a===t||this.summaryType===t||this.column===t||function(n){var{summaryType:s}=n,{column:o}=n;return s&&o&&"".concat(s,"_").concat(o)}(this)===t)return r=a,!1}),r}_getSummarySortByGroups(e,t){var r=this,a=r._columnsController,n=a.getGroupColumns(),s=[];if(t&&t.length)return(0,j.S6)(e||[],function(){var{sortOrder:o}=this,{groupColumn:l}=this,d=r._findSummaryItem(t,this.summaryItem);if(!(d<0)){var u=function(c){return ov(c)[d]};(0,m.$K)(l)?(l=a.columnOption(l),r._addSortInfo(s,l,u,o)):(0,j.S6)(n,(c,f)=>{r._addSortInfo(s,f,u,o)})}}),s}_createDataSourceAdapterCore(e,t){var r=this,a=super._createDataSourceAdapterCore(e,t);return a.summaryGetter(n=>r._getSummaryOptions(n||t)),a}_getSummaryOptions(e){var t=this,r=t.option("summary.groupItems"),a=t.option("summary.totalItems"),n=t.option("sortByGroupSummaryInfo"),s=t._getAggregates(r,e&&e.grouping&&e.summary),o=t._getAggregates(a,e&&e.summary);if(s.length||o.length)return{groupAggregates:s,totalAggregates:o,sortByGroups:function(){return t._getSummarySortByGroups(n,r)}}}publicMethods(){var e=super.publicMethods();return e.push("getTotalSummaryValue"),e}getTotalSummaryValue(e){var t=this._findSummaryItem(this.option("summary.totalItems"),e),r=this._dataSource.totalAggregates();if(r.length&&t>-1)return r[t]}optionChanged(e){("summary"===e.name||"sortByGroupSummaryInfo"===e.name)&&(e.name="dataSource"),super.optionChanged(e)}init(){this._footerItems=[],super.init()}footerItems(){return this._footerItems}},editing:i=>class extends i{_refreshSummary(){lv(this)&&!this.isSaving()&&this._dataController.refresh({load:!0,changesOnly:!0})}_addChange(e){var t=super._addChange.apply(this,arguments);return e.type&&this._refreshSummary(),t}_removeChange(){var e=super._removeChange.apply(this,arguments);return this._refreshSummary(),e}cancelEditData(){var e=super.cancelEditData.apply(this,arguments);return this._refreshSummary(),e}}},views:{rowsView:i=>class extends i{_createRow(e){var t=super._createRow.apply(this,arguments);return e&&t.addClass(e.rowType===sv?"dx-datagrid-group-footer":""),t}_renderCells(e,t){super._renderCells.apply(this,arguments),"group"===t.row.rowType&&t.row.summaryCells&&t.row.summaryCells.length&&this._renderGroupSummaryCells(e,t)}_hasAlignByColumnSummaryItems(e,t){return!(0,m.$K)(t.columns[e].groupIndex)&&t.row.summaryCells[e].length}_getAlignByColumnCellCount(e,t){for(var r=0,a=1;a<e;a++)r=this._hasAlignByColumnSummaryItems(t.row.summaryCells.length-a,t)?a:r;return r}_renderGroupSummaryCells(e,t){var r=e.children().last(),a=Number(r.attr("colSpan"))||1,n=this._getAlignByColumnCellCount(a,t);this._renderGroupSummaryCellsCore(r,t,a,n)}_renderGroupSummaryCellsCore(e,t,r,a){if(a>0){e.attr("colSpan",r-a);for(var n=0;n<a;n++){var s=t.columns.length-a+n;this._renderCell(e.parent(),(0,N.l)({column:t.columns[s],columnIndex:this._getSummaryCellIndex(s,t.columns)},t))}}}_getSummaryCellIndex(e,t){return e}_getCellTemplate(e){return!e.column.command&&!(0,m.$K)(e.column.groupIndex)&&e.summaryItems&&e.summaryItems.length?NE:super._getCellTemplate(e)}_getCellOptions(e){var t=super._getCellOptions(e);return e.row.summaryCells?(0,N.l)(t,FE(this,e)):t}}}}});var vW=be(8047),HE="content",Cd="content-fixed",ZE="dx-first-cell",zE="dx-state-hover",WE="dx-col-fixed",dv="dx-pointer-events-none",Ds="transparent",$E="dx-group-row",ln=function(i){var e=-1;return(0,j.S6)(i,(t,r)=>{if(r.command===Ds)return e=t,!1}),e},KE=function(i,e,t){var r=0;if(i&&e&&t)for(var a=0;a<i.length;a++)i[a].command===Ds?r+=i[a].colspan:(e[r]<t[a]&&(e[r]=t[a]),r++);return e},uv=i=>class extends i{init(){super.init(),this._isFixedTableRendering=!1,this._isFixedColumns=!1}_createCol(e){return super._createCol(e).toggleClass(WE,!(!this._isFixedTableRendering||!(e.fixed||e.command&&e.command!==Ds)))}_correctColumnIndicesForFixedColumns(e,t){var r=ln(e),a=e[r].colspan,n=t&&t.columnIndices;n&&(t.columnIndices=n.map(s=>{if(s)return s.map(o=>o<r?o:o>=r+a?o-a+1:-1).filter(o=>o>=0)}))}_partialUpdateFixedTable(e){var t=this._fixedTableElement,r=this._getRowElementsCore(t);t.children("colgroup").replaceWith(this._createColGroup(e));for(var n=0;n<r.length;n++)this._partialUpdateFixedRow((0,b.Z)(r[n]),e)}_partialUpdateFixedRow(e,t){var r,l,a=e.get(0).childNodes,n=ln(t),s=t[n],d=this._columnsController.getColumnIndexOffset()+1,{colspan:u}=s;if(e.hasClass("dx-master-detail-row"))a[0].setAttribute("colspan",null===(r=this._columnsController.getVisibleColumns())||void 0===r?void 0:r.length);else{e.hasClass($E)&&(u=(l=this._getGroupCellOptions({row:e.data("options"),columns:this._columnsController.getVisibleColumns()})).colspan-Math.max(0,a.length-(l.columnIndex+2)));for(var c=0;c<a.length;c++){var f=l?c===l.columnIndex+1:c===n;a[c].setAttribute("aria-colindex",d),f?(a[c].setAttribute("colspan",u),d+=u):d++}}}_renderTable(e){var t,r,a=this.getFixedColumns();this._isFixedColumns=!!a.length;var n=super._renderTable(e);if(this._isFixedColumns){var s=e?.change,o=this._getRowElements(this._fixedTableElement),l=s?.virtualColumnsScrolling&&o.length===(null===(t=s?.items)||void 0===t?void 0:t.length);if(this._isFixedTableRendering=!0,l&&!0!==this.option("scrolling.legacyMode"))this._partialUpdateFixedTable(a),this._isFixedTableRendering=!1;else{var d=s?.columnIndices;this._correctColumnIndicesForFixedColumns(a,s),r=this._createTable(a),this._renderRows(r,(0,N.l)({},e,{columns:a})),this._updateContent(r,s,!0),d&&(s.columnIndices=d),this._isFixedTableRendering=!1}}else this._fixedTableElement&&this._fixedTableElement.parent().remove(),this._fixedTableElement=null;return n}_renderRow(e,t){var r,{cells:a}=t.row;if(super._renderRow.apply(this,arguments),this._isFixedTableRendering&&a&&a.length){r=0;var n=t.row.cells||[];a=a.slice(),t.row.cells=a;for(var s=0;s<n.length;s++)n[s].column&&n[s].column.command===Ds?r=(n[s].column.colspan||1)-1:a[s+r]=n[s]}}_createCell(e){var s,o,l,{column:t}=e,r=t&&t.command,{rowType:a}=e,n=super._createCell.apply(this,arguments);(this._isFixedTableRendering||"filter"===a)&&(o=(s=this.getFixedColumns())[(l=ln(s))-1]),this._isFixedTableRendering?r===Ds&&(n.addClass(dv).toggleClass(ZE,0===l||o&&"expand"===o.command).toggleClass("dx-last-cell",s.length&&l===s.length-1),"freeSpace"!==a&&Te.setEmptyText(n)):"filter"===a&&n.toggleClass(ZE,e.columnIndex===l);var d=this.option("rowAlternationEnabled")&&e.isAltRow,u="multiple"===this.option("selection.mode")&&0===e.columnIndex&&"header"===e.rowType;return ii.Z.mozilla&&e.column.fixed&&"group"!==e.rowType&&!d&&!u&&n.addClass(WE),n}_getContent(e){var t;return e?null===(t=this._fixedTableElement)||void 0===t?void 0:t.parent():super._getContent.apply(this,arguments)}_wrapTableInScrollContainer(e,t){var r=super._wrapTableInScrollContainer.apply(this,arguments);return(this._isFixedTableRendering||t)&&r.addClass(this.addWidgetPrefix(Cd)),r}_renderCellContent(e,t){var r,{column:a}=t,n=this._isFixedTableRendering,s="group"===t.rowType&&(0,m.$K)(a.groupIndex);if(n&&s&&!a.command&&!a.groupCellTemplate&&e.css("pointerEvents","none"),!n&&this._isFixedColumns){if(r=a.fixed||a.command&&!1!==a.fixed,s&&(r=!1,t.row.summaryCells&&t.row.summaryCells.length)){var o=this._columnsController.getVisibleColumns(),l=this._getAlignByColumnCellCount?this._getAlignByColumnCellCount(a.colspan,{columns:o,row:t.row,isFixed:!0}):0;if(l>0){var d=ln(this._columnsController.getFixedColumns());r=o.length-l<d}}if(r){if(a.command&&"buttons"!==a.type||"group"===t.rowType)return void e.html("&nbsp;").addClass(a.cssClass);e.addClass("dx-hidden-cell")}}a.command!==Ds&&super._renderCellContent.apply(this,arguments)}_getCellElementsCore(e){var t=super._getCellElementsCore.apply(this,arguments),r=t?.parent().hasClass($E),a="columnHeadersView"===this.name?e:void 0;if(this._fixedTableElement&&t){var n=this.getFixedColumns(a),s=this._getRowElements(this._fixedTableElement).eq(e).children("td");(0,j.S6)(s,(o,l)=>{if(r)t[o]&&"hidden"!==l.style.visibility&&(t[o]=l);else{var d=n[o];if(d)if(d.command===Ds)s.eq(o).hasClass("dx-master-detail-cell")&&(t[o]=l||t[o]);else{var u=this._columnsController.getVisibleIndexByColumn(d,a);t[u]=l||t[u]}}})}return t}getColumnWidths(e){var t=super.getColumnWidths(),r=this.getFixedColumns(),a=this._fixedTableElement&&t.length?super.getColumnWidths(this._fixedTableElement):void 0;return KE(r,t,a)}getTableElement(e){return(e=this._isFixedTableRendering||e)?this._fixedTableElement:super.getTableElement()}setTableElement(e,t){this._isFixedTableRendering||t?this._fixedTableElement=e.addClass(dv):super.setTableElement(e)}getColumns(e){var t=this.getTableElement();return this._isFixedTableRendering?this.getFixedColumns(e):super.getColumns(e,t)}getRowIndex(e){var t=this._fixedTableElement;return t&&t.find(e).length?this._getRowElements(t).index(e):super.getRowIndex(e)}getTableElements(){var e=super.getTableElements.apply(this,arguments);return this._fixedTableElement&&(e=(0,b.Z)([e.get(0),this._fixedTableElement.get(0)])),e}getFixedColumns(e){return this._columnsController.getFixedColumns(e)}getFixedColumnsOffset(){var t,e={left:0,right:0};if(this._fixedTableElement){var r=(t=this.getTransparentColumnElement()).position();e={left:r.left,right:(0,oe.Y_)(this.element(),!0)-((0,oe.Y_)(t,!0)+r.left)}}return e}getTransparentColumnElement(){return this._fixedTableElement&&this._fixedTableElement.find(".".concat(dv)).first()}getFixedTableElement(){return this._fixedTableElement}isFixedColumns(){return this._isFixedColumns}_resizeCore(){super._resizeCore(),this.synchronizeRows()}setColumnWidths(e){var t,{widths:r}=e,a=this._columnsController.getVisibleColumns(),n=r?.length&&a.some(f=>(0,m.$K)(f.visibleWidth)),s=null===(t=e.optionNames)||void 0===t?void 0:t.width;if(super.setColumnWidths(e),this._fixedTableElement){var o=r?.some(f=>"auto"===f||!(0,m.$K)(f)),d=!o||n&&this.isScrollbarVisible(!0)?this.getFixedColumns():a;this.setFixedTableColumnWidths(d,r)}var u=this.option("wordWrapEnabled");(n||s&&u)&&this.synchronizeRows()}setFixedTableColumnWidths(e,t){if(this._fixedTableElement&&t){var r=this._fixedTableElement.children("colgroup").children("col");r.toArray().forEach(n=>n.removeAttribute("style"));var a=0;e.forEach(n=>{if(n.colspan)a+=n.colspan;else{var s=Cm(t[a]);(0,m.$K)(s)&&(0,lr.cl)(r.eq(a),s),a+=1}})}}_getClientHeight(e){var t=e.getBoundingClientRect&&(0,di.l)(e);return t&&t.height?t.height:e.clientHeight}synchronizeRows(){var r,a,n,s,e=[],t=[];this.waitAsyncTemplates(!0).done(()=>{if(this._isFixedColumns&&this._tableElement&&this._fixedTableElement){var o=this._getClientHeight(this._tableElement.get(0)),l=this._getClientHeight(this._fixedTableElement.get(0));if(a=this._getRowElements(this._tableElement),n=this._getRowElements(this._fixedTableElement),s=this._findContentElement(),o!==l){for(s&&s.css("height",o),a.css("height",""),n.css("height",""),r=0;r<a.length;r++)e.push(this._getClientHeight(a.get(r))),t.push(this._getClientHeight(n.get(r)));for(r=0;r<a.length;r++){var d=e[r],u=t[r];d>u?n.eq(r).css("height",d):d<u&&a.eq(r).css("height",u)}s&&s.css("height","")}}})}setScrollerSpacing(e,t){var r=this.option("rtlEnabled");super.setScrollerSpacing(e),this.element().children(".".concat(this.addWidgetPrefix(Cd))).css({paddingLeft:r?e:"",paddingRight:r?"":e})}},AW={defaultOptions:()=>({columnFixing:{enabled:!1,texts:{fix:ae.Z.format("dxDataGrid-columnFixingFix"),unfix:ae.Z.format("dxDataGrid-columnFixingUnfix"),leftPosition:ae.Z.format("dxDataGrid-columnFixingLeftPosition"),rightPosition:ae.Z.format("dxDataGrid-columnFixingRightPosition")}}}),extenders:{views:{columnHeadersView:i=>class extends(uv(i)){_getRowVisibleColumns(e){return this._isFixedTableRendering?this.getFixedColumns(e):super._getRowVisibleColumns(e)}getContextMenuItems(e){var{column:t}=e,r=this.option("columnFixing"),a=super.getContextMenuItems(e);if(e.row&&"header"===e.row.rowType&&!0===r.enabled&&t&&t.allowFixing){var n=s=>{switch(s.itemData.value){case"none":this._columnsController.columnOption(t.index,"fixed",!1);break;case"left":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"left"});break;case"right":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"right"})}};(a=a||[]).push({text:r.texts.fix,beginGroup:!0,items:[{text:r.texts.leftPosition,value:"left",disabled:t.fixed&&(!t.fixedPosition||"left"===t.fixedPosition),onItemClick:n},{text:r.texts.rightPosition,value:"right",disabled:t.fixed&&"right"===t.fixedPosition,onItemClick:n}]},{text:r.texts.unfix,value:"none",disabled:!t.fixed,onItemClick:n})}return a}getFixedColumnElements(e){if((0,m.$K)(e))return this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(e).children();var t=this.getColumnElements(),r=this.getTransparentColumnElement();if(t&&r&&r.length){var a=ln(this.getFixedColumns());t.splice(a,r.get(0).colSpan,r.get(0))}return t}getColumnWidths(){var e,t=super.getColumnWidths(),r=this.getFixedColumnElements(),a=this.getFixedColumns();return this._fixedTableElement&&(e=r&&r.length?this._getWidths(r):super.getColumnWidths(this._fixedTableElement)),KE(a,t,e)}},rowsView:i=>class extends(uv(i)){dispose(){super.dispose.apply(this,arguments),clearTimeout(this._fixedScrollTimeout)}optionChanged(e){super.optionChanged(e),"hoverStateEnabled"===e.name&&this._isFixedColumns&&(e.value?this._attachHoverEvents():this._detachHoverEvents())}_detachHoverEvents(){var e=this.element();this._fixedTableElement&&this._tableElement&&k.Z.off(e,"mouseover mouseout",".dx-data-row")}_attachHoverEvents(){this._fixedTableElement&&this._tableElement&&k.Z.on(this.element(),"mouseover mouseout",".dx-data-row",this.createAction(e=>{var{event:t}=e,r=this.getRowIndex((0,b.Z)(t.target).closest(".dx-row")),a="mouseover"===t.type;r>=0&&(this._tableElement&&this._getRowElements(this._tableElement).eq(r).toggleClass(zE,a),this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(r).toggleClass(zE,a))}))}_getScrollDelay(){var e;return(null===(e=this._resizingController)||void 0===e?void 0:e.hasResizeTimeout())?this.option("scrolling.updateTimeout"):ii.Z.mozilla?60:0}_findContentElement(e){var t,r,a=this.addWidgetPrefix(HE),n=this.element();if(e=this._isFixedTableRendering||e,n&&e){t=n.children(".".concat(a));var s=this.getScrollable();return!t.length&&s&&(t=(0,b.Z)("<div>").addClass(a),k.Z.on(t,"scroll",o=>{var{target:l}=o,d=this._getScrollDelay();clearTimeout(this._fixedScrollTimeout),this._fixedScrollTimeout=setTimeout(()=>{r=(0,b.Z)(l).scrollTop(),s.scrollTo({y:r})},d)}),k.Z.on(t,vW.u,o=>{var l=(0,b.Z)(o.target).closest(".dx-scrollable"),d=!1;if(s&&s.$element().is(l))d=!0;else{var u=l.length&&Ea.getInstance(l.get(0)),c=u&&u.scrollHeight()-u.clientHeight()>0;d=u&&!c}if(d){r=s.scrollTop(),s.scrollTo({y:r-o.delta});var f=s.scrollTop()+s.clientHeight(),p=s.scrollHeight()+this.getScrollbarWidth();if(s.scrollTop()>0&&f<p)return!1}}),t.appendTo(n)),t}return super._findContentElement()}_updateScrollable(){super._updateScrollable();var e=this.getScrollable();if(!e?._disposed){var t=e&&e.scrollOffset().top;this._updateFixedTablePosition(t)}}_renderContent(e,t,r){return this._isFixedTableRendering||r?e.empty().addClass("".concat(this.addWidgetPrefix(HE)," ").concat(this.addWidgetPrefix(Cd))).append(t):super._renderContent(e,t)}_getGroupCellOptions(e){return super._getGroupCellOptions(this._isFixedTableRendering?(0,N.l)({},e,{columns:this._columnsController.getVisibleColumns()}):e)}_renderGroupedCells(e,t){return super._renderGroupedCells(e,(0,N.l)({},t,{columns:this._columnsController.getVisibleColumns()}))}_renderGroupSummaryCells(e,t){super._renderGroupSummaryCells(e,this._isFixedTableRendering?(0,N.l)({},t,{columns:this._columnsController.getVisibleColumns()}):t)}_hasAlignByColumnSummaryItems(e,t){var r=super._hasAlignByColumnSummaryItems.apply(this,arguments),a=t.columns[e];return t.isFixed?a.fixed&&(r||"right"===a.fixedPosition):r&&(!this._isFixedColumns||!a.fixed)}_renderGroupSummaryCellsCore(e,t,r,a){var n;if(this._isFixedTableRendering){t.isFixed=!0,n=this._getAlignByColumnCellCount(r,t),t.isFixed=!1;var s=t.columns.length-n;t=(0,N.l)({},t,{columns:this.getFixedColumns()});var o=ln(t.columns);s<o?(n-=t.columns[o].colspan-1||0,r-=t.columns[o].colspan-1||0):a>0&&e.css("visibility","hidden"),a=n}super._renderGroupSummaryCellsCore(e,t,r,a)}_getSummaryCellIndex(e,t){if(this._isFixedTableRendering){var r=ln(t);return e>r&&(e+=t[r].colspan-1),e}return super._getSummaryCellIndex.apply(this,arguments)}_renderCore(e){this._detachHoverEvents();var t=super._renderCore(e),r=this._isFixedColumns;return this.element().toggleClass("dx-fixed-columns",r),this.option("hoverStateEnabled")&&r&&this._attachHoverEvents(),t}setAriaOwns(e,t,r){var a,n;if(r){var s=this.addWidgetPrefix(Cd),o=null===(a=this.element())||void 0===a?void 0:a.children(".".concat(s)),l=this.getFixedTableElement();o.length&&l?.length&&this.setAria("owns","".concat(e??""," ").concat(null!==(n=l.attr("id"))&&void 0!==n?n:""," ").concat(t??"").trim(),o)}else super.setAriaOwns.apply(this,arguments)}setRowsOpacity(e,t){super.setRowsOpacity(e,t);var r=this._getRowElements(this._fixedTableElement);this._setRowsOpacityCore(r,this.getFixedColumns(),e,t)}getCellIndex(e){var t=this._fixedTableElement,r=0;if(t&&e.is("td")&&e.closest(t).length){var a=this.getFixedColumns();return(0,j.S6)(a,(n,s)=>{if(n===e[0].cellIndex)return!1;s.colspan?r+=s.colspan:r++}),r}return super.getCellIndex.apply(this,arguments)}_updateFixedTablePosition(e,t){var r;this._fixedTableElement&&this._tableElement&&(this._fixedTableElement.parent().scrollTop(e),t&&this._editorFactoryController&&(r=this._editorFactoryController.focus())&&this._editorFactoryController.focus(r))}setScrollerSpacing(e,t){var r={marginBottom:0},a=this.element().children(".".concat(this.addWidgetPrefix(Cd)));a.length&&this._fixedTableElement&&(a.css(r),this._fixedTableElement.css(r),r[this.option("rtlEnabled")?"marginLeft":"marginRight"]=e,r.marginBottom=t,(this._scrollable&&this._scrollable.option("useNative")?a:this._fixedTableElement).css(r))}_getElasticScrollTop(e){var t=0;if(e.scrollOffset.top<0)t=-e.scrollOffset.top;else if(e.reachedBottom){var r=(0,b.Z)(e.component.content()),a=(0,b.Z)(e.component.container()),n=Math.max(r.get(0).clientHeight-a.get(0).clientHeight,0);t=Math.min(n-e.scrollOffset.top,0)}return Math.floor(t)}_applyElasticScrolling(e){if(this._fixedTableElement){var t=this._getElasticScrollTop(e);0!==Math.ceil(t)?(0,oi.pB)(this._fixedTableElement,{top:t}):this._fixedTableElement.css("transform","")}}_handleScroll(e){this._updateFixedTablePosition(e.scrollOffset.top,!0),this._applyElasticScrolling(e),super._handleScroll(e)}_updateContentPosition(e){super._updateContentPosition.apply(this,arguments),e||this._updateFixedTablePosition(this._scrollTop)}_afterRowPrepared(e){this._isFixedTableRendering||super._afterRowPrepared(e)}_scrollToElement(e){super._scrollToElement(e,this.getFixedColumnsOffset())}},footerView:i=>class extends(uv(i)){}},controllers:{draggingHeader:i=>class extends i{_generatePointsByColumns(e){var t=e.columns,{targetDraggingPanel:r}=e;if(r&&"headers"===r.getName()&&r.isFixedColumns()&&e.sourceColumn.fixed){e.rowIndex||(e.columnElements=r.getFixedColumnElements(0)),e.columns=r.getFixedColumns(e.rowIndex);var a=super._generatePointsByColumns(e);return function(i,e,t){var r=ln(e),a=i.length-e.length;(0,j.S6)(t,(n,s)=>{s.index>r&&(s.columnIndex+=a,s.index+=a)})}(t,e.columns,a),a}return super._generatePointsByColumns(e)}_pointCreated(e,t,r,a){var n=super._pointCreated.apply(this,arguments),s=t[e.columnIndex],o=this._columnHeadersView.getTransparentColumnElement();if(!n&&"headers"===r&&o&&o.length){var l=(0,di.l)(o.get(0));return a&&a.fixed?"right"===a.fixedPosition?e.x<l.right:e.x>l.left:!(!s||!s.fixed||"right"===s.fixedPosition)||e.x<l.left||e.x>l.right}return n}},columnsResizer:i=>class extends i{_generatePointsByColumns(){var e=this,t=e._columnsController,r=t&&e._columnsController.getVisibleColumns(),a=t&&e._columnsController.getFixedColumns(),n=ln(a),s=r.length-a.length,o=e._columnHeadersView.getFixedColumnElements();super._generatePointsByColumns(),o&&o.length>0&&(e._pointsByFixedColumns=Te.getPointsByColumns(o,l=>(l.index>n&&(l.columnIndex+=s,l.index+=s),e._pointCreated(l,r.length,r))))}_getTargetPoint(e,t,r){var a=this._columnHeadersView.getTransparentColumnElement();if(a&&a.length){var n=(0,di.l)(a.get(0));if(t<=n.left||t>=n.right)return super._getTargetPoint(this._pointsByFixedColumns,t,r)}return super._getTargetPoint(e,t,r)}},resizing:i=>class extends i{_setAriaOwns(){var e,t,r;super._setAriaOwns.apply(this,arguments);var a=null===(e=this._columnHeadersView)||void 0===e?void 0:e.getFixedTableElement(),n=null===(t=this._footerView)||void 0===t?void 0:t.getFixedTableElement();null===(r=this._rowsView)||void 0===r||r.setAriaOwns(a?.attr("id"),n?.attr("id"),!0)}}}}};He.registerModule("columnFixing",AW);var GE="columnHeadersView",UE="rowsView",hv=[GE,UE,"footerView"],dn="adaptiveHidden",Os="detailAdaptive",cv="dx-field-item-content",bd="hidden-column",jE="dx-command-adaptive",Nh="dx-command-adaptive-hidden",pv="dx-adaptive-item-text",Fh="adaptive",qE="dx-group-cell",YE="dxDataGrid-ariaAdaptiveExpand";function kh(i,e){return i._columnsController.getColumnId(e)}function $W(i,e){var t,r=(0,b.Z)(i),a=e.component.getController("adaptiveColumns");"data"===e.rowType?(t=(0,b.Z)("<span>").addClass(a.addWidgetPrefix("adaptive-more")),k.Z.on(t,(0,ce.V4)(Pt.u,"dxDataGridAdaptivity"),a.createAction(()=>{a.toggleExpandAdaptiveDetailRow(e.key)})),t.appendTo(r)):Te.setEmptyText(r)}function _v(i){var e,t=null===(e=i.data)||void 0===e?void 0:e.$nextCell;k.Z.off(t,"focus",_v),k.Z.trigger(t,"dxclick")}var i$={defaultOptions:()=>({columnHidingEnabled:!1,onAdaptiveDetailRowPreparing:null}),controllers:{adaptiveColumns:class KW extends Nt.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._editingController=this.getController("editing"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._rowsView=this.getView("rowsView"),this._columnsController.addCommandColumn({type:Fh,command:Fh,visible:!0,adaptiveHidden:!0,cssClass:jE,alignment:"center",width:"auto",cellTemplate:$W,fixedPosition:"right"}),this._columnsController.columnsChanged.add(()=>{var e=!!this.updateHidingQueue(this._columnsController.getColumns()).length;this._columnsController.columnOption("command:adaptive","adaptiveHidden",!e,!0)}),this._hidingColumnsQueue=[],this._hiddenColumns=[],this.createAction("onAdaptiveDetailRowPreparing"),super.init()}optionChanged(e){"columnHidingEnabled"===e.name&&this._columnsController.columnOption("command:adaptive","adaptiveHidden",!e.value),super.optionChanged(e)}publicMethods(){return["isAdaptiveDetailRowExpanded","expandAdaptiveDetailRow","collapseAdaptiveDetailRow"]}_isRowEditMode(){return"row"===this._getEditMode()}_isItemModified(e,t){var r=this._columnsController.getVisibleIndex(e.column.index),a=this._dataController.getRowIndexByKey(t.key),n=this._dataController.items()[a+1];return n&&n.modifiedValues&&(0,m.$K)(n.modifiedValues[r])}_renderFormViewTemplate(e,t,r){var a=this,{column:n}=e,s=a.createAction(()=>{a._editingController.isEditing()&&k.Z.trigger(r,Pt.u)}),o=t.row.data,l=n.calculateCellValue(o),d=Te.getDisplayValue(n,l,o,t.rowType),u=Te.formatValue(d,n),c=this._editingController.isCellOrBatchEditMode(),f=a._rowsView;if(n.allowEditing&&this._keyboardNavigationController.isKeyboardEnabled()&&(r.attr("tabIndex",a.option("tabIndex")),c&&(k.Z.off(r,"focus",s),k.Z.on(r,"focus",s))),n.cellTemplate){var p=(0,N.l)({},t,{value:l,displayValue:d,text:u,column:n});f.renderTemplate(r,n.cellTemplate,p,(0,ga.al)(r)).done(()=>{f._cellPrepared(r,t)})}else{var g=r.get(0);n.encodeHtml?g.textContent=u:g.innerHTML=u,r.addClass(pv),(!(0,m.$K)(u)||""===u)&&r.html("&nbsp;"),a._isRowEditMode()||a._isItemModified(e,t)&&r.addClass("dx-item-modified"),f._cellPrepared(r,t)}}_getTemplate(e,t,r){var a=this,{column:n}=e,s=this._editingController;return function(o,l){var d=(0,b.Z)(l),u=a._columnsController.getVisibleIndex(n.index),c=(0,N.l)({},t),f=function(){var g=a._isItemEdited(e);c.value=t.row.values[u],g||n.showEditorAlways?s.renderFormEditorTemplate(c,e,o,d,!g):(c.column=n,c.columnIndex=u,a._renderFormViewTemplate(e,c,d))};if(f(),c.watch){var p=c.watch(()=>({isItemEdited:a._isItemEdited(e),value:t.row.values[u]}),()=>{d.contents().remove(),d.removeClass(pv),f()});k.Z.on(d,ns.x,p)}}}_isVisibleColumnsValid(e){return!(e<2||e.length-function(){for(var t=0,r=0;r<e.length;r++)e[r].command&&t++;return t}()<=1)}_calculatePercentWidths(e,t){var r=this,a=0;return t.forEach((n,s)=>{e[s]!==dn&&(a+=r._getItemPercentWidth(n))}),a}_isPercentWidth(e){return(0,m.HD)(e)&&e.endsWith("%")}_isColumnHidden(e){return this._hiddenColumns.filter(t=>t.index===e.index).length>0}_getAverageColumnsWidth(e,t,r){var a=this,n=0,s=0;return t.forEach(o=>{if(!a._isColumnHidden(o)){var{width:l}=o;(0,m.$K)(l)&&!isNaN(parseFloat(l))?n+=a._isPercentWidth(l)?a._calculatePercentWidth({visibleIndex:o.visibleIndex,columnsCount:t.length,columnsCanFit:r,bestFitWidth:o.bestFitWidth,columnWidth:l,containerWidth:e}):parseFloat(l):s++}}),(e-n)/s}_calculateColumnWidth(e,t,r,a){var d,n=kh(this,e),s=this._columnsController.columnOption(n,"width"),o=this._columnsController.columnOption(n,"bestFitWidth"),l=r.length;if(s&&"auto"!==s){if(!this._isPercentWidth(s))return parseFloat(s);d=this._calculatePercentWidth({visibleIndex:e.visibleIndex,columnsCount:l,columnsCanFit:a,bestFitWidth:o,columnWidth:s,containerWidth:t})}else d=this.option("columnAutoWidth")||e.command?o:this._getAverageColumnsWidth(t,r,a);return d}_calculatePercentWidth(e){var t=e.visibleIndex<e.columnsCount-1&&e.columnsCanFit,r=e.containerWidth*parseFloat(e.columnWidth)/100,a=e.columnsCanFit&&r<e.bestFitWidth?e.bestFitWidth:r;return t?e.containerWidth*parseFloat(e.columnWidth)/100:a}_getNotTruncatedColumnWidth(e,t,r,a){var n=kh(this,e),s=this._columnsController.columnOption(n,"width"),o=this._columnsController.columnOption(n,"bestFitWidth");if(s&&"auto"!==s&&!this._isPercentWidth(s))return parseFloat(s);var l=this._calculateColumnWidth(e,t,r,a);return l<o?null:l}_getItemPercentWidth(e){var t=0;return e.width&&this._isPercentWidth(e.width)&&(t=parseFloat(e.width)),t}_getCommandColumnsWidth(){var e=this,t=e._columnsController.getVisibleColumns(),r=0;return(0,j.S6)(t,(a,n)=>{(n.index<0||n.command)&&(r+=e._columnsController.columnOption(kh(e,n),"bestFitWidth")||0)}),r}_isItemEdited(e){if(this.isFormOrPopupEditMode())return!1;if(!this._isRowEditMode()){var r=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,a=this._columnsController.getVisibleIndex(e.column.index);return this._editingController.isEditCell(r,a)}var t=this.option("editing.editRowKey");return!!(0,J.bY)(t,this._dataController.adaptiveExpandedKey())||void 0}_getFormItemsByHiddenColumns(e){var t=[];return(0,j.S6)(e,(r,a)=>{t.push({column:a,name:a.name,dataField:a.dataField,visibleIndex:a.visibleIndex})}),t}_getAdaptiveColumnVisibleIndex(e){for(var t=0;t<e.length;t++)if(e[t].command===Fh)return t}_hideAdaptiveColumn(e,t){var r=this._getAdaptiveColumnVisibleIndex(t);(0,m.$K)(r)&&(e[r]=dn,this._hideVisibleColumn({isCommandColumn:!0,visibleIndex:r}))}_showHiddenCellsInView(e){var{$cells:t,isCommandColumn:r}=e,a=this.addWidgetPrefix(bd);r?(a=Nh,t.attr({tabIndex:0,"aria-hidden":null}).removeClass(a)):t.removeClass(a)}_showHiddenColumns(){for(var e=0;e<hv.length;e++){var t=this.getView(hv[e]);if(t&&t.isVisible()&&t.element()){var r=t.name,a=t.element().find(".".concat(Nh));this._showHiddenCellsInView({viewName:r,$cells:a,isCommandColumn:!0});var n=t.element().find(".".concat(this.addWidgetPrefix(bd)));this._showHiddenCellsInView({viewName:r,$cells:n})}}}_isCellValid(e){return e&&e.length&&!e.hasClass("dx-master-detail-cell")&&!e.hasClass(qE)}_hideVisibleColumn(e){var{isCommandColumn:t,visibleIndex:r}=e,a=this;hv.forEach(n=>{var s=a.getView(n);s&&a._hideVisibleColumnInView({view:s,isCommandColumn:t,visibleIndex:r})})}_hideVisibleColumnInView(e){var s,{view:t,isCommandColumn:r,visibleIndex:a}=e,n=t.name,o=this._columnsController.getVisibleColumns()[a],l=this._editingController&&this._editingController.getEditFormRowIndex();if(t&&t.isVisible()&&o)for(var d=t.getRowsCount(),u=t._getRowElements(),c=0;c<d;c++)if(c!==l||n!==UE||"popup"===this.option("editing.mode")){var p=n===GE?this._columnsController.getVisibleIndex(o.index,c):a;if(p>=0){var g=u.eq(c);s=this._findCellElementInRow(g,p),this._isCellValid(s)&&this._hideVisibleCellInView({viewName:n,isCommandColumn:r,$cell:s})}}}_findCellElementInRow(e,t){var r=e.children(),a=t,n=!1;if(e.hasClass("dx-group-row")){var s=e.find(".".concat(qE)),o=s.attr("colspan");if(s.length&&(0,m.$K)(o)){var l=parseInt(o);t>s.index()+l-1?a=t-l+1:n=!0}}return n?void 0:r.eq(a)}_hideVisibleCellInView(e){var{$cell:t,isCommandColumn:r}=e,a=r?Nh:this.addWidgetPrefix(bd);t.attr({tabIndex:-1,"aria-hidden":!0}).addClass(a)}_getEditMode(){return this._editingController.getEditMode()}isFormOrPopupEditMode(){var e=this._getEditMode();return"form"===e||"popup"===e}hideRedundantColumns(e,t,r){if(this._hiddenColumns=[],this._isVisibleColumnsValid(t)&&r.length){var u,c,f,a=0,n=this.component.$element(),s=(0,oe.dz)(n)-this._getCommandColumnsWidth(),o=function(){return t.filter(X=>!X.command&&0===this._hiddenColumns.filter(M=>M.index===X.index).length)}.bind(this),l=o(),d=l.length;do{f=!1,a=0;var p=this._calculatePercentWidths(e,t),g=p<100&&0!==p;for(u=0;u<t.length;u++){var w=t[u],x=this._getNotTruncatedColumnWidth(w,s,l,g),y=kh(this,w),E=this._columnsController.columnOption(y,"width"),V=this._columnsController.columnOption(y,"minWidth"),F=this._columnsController.columnOption(y,"bestFitWidth");if(e[u]!==dn){if(!x&&!w.command&&!w.fixed){f=!0;break}(!E||"auto"===E)&&(x=Math.max(F||0,V||0)),(w.command!==Fh||c)&&(a+=x)}else c=!0}if(f=f||a>(0,oe.dz)(n)){var q=r.pop(),ee=this._columnsController.getVisibleIndex(q.index);s+=this._calculateColumnWidth(q,s,l,g),this._hideVisibleColumn({visibleIndex:ee}),e[ee]=dn,this._hiddenColumns.push(q),l=o()}}while(f&&l.length>1&&r.length);d===l.length&&this._hideAdaptiveColumn(e,t)}else this._hideAdaptiveColumn(e,t)}getAdaptiveDetailItems(){return this._$itemContents}getItemContentByColumnIndex(e){for(var t,r=0;r<this._$itemContents.length;r++){var a=(t=this._$itemContents.eq(r)).data("dx-form-item");if(a&&a.column&&this._columnsController.getVisibleIndex(a.column.index)===e)return t}}toggleExpandAdaptiveDetailRow(e,t){this.isFormOrPopupEditMode()&&this._editingController.isEditing()||this._dataController.toggleExpandAdaptiveDetailRow(e,t)}createFormByHiddenColumns(e,t){var r=this,a=(0,b.Z)(e),n={items:r._getFormItemsByHiddenColumns(r._hiddenColumns),formID:"dx-".concat(new Ri.Z)},s=(0,_t.x2)()?{colCount:2}:{};this.executeAction("onAdaptiveDetailRowPreparing",{formOptions:n}),r._$itemContents=null,r._form=r._createComponent((0,b.Z)("<div>").appendTo(a),cy,(0,N.l)(s,n,{customizeItem(o){var l=o.column||r._columnsController.columnOption(o.name||o.dataField);l&&(o.label=o.label||{},o.label.text=o.label.text||l.caption,o.column=l,o.template=r._getTemplate(o,t,r.updateForm.bind(r))),n.customizeItem&&n.customizeItem.call(this,o)},onContentReady(o){n.onContentReady&&n.onContentReady.call(this,o),r._$itemContents=a.find(".".concat(cv))}}))}hasAdaptiveDetailRowExpanded(){return(0,m.$K)(this._dataController.adaptiveExpandedKey())}updateForm(e){this.hasAdaptiveDetailRowExpanded()&&this._form&&(0,m.$K)(this._form._contentReadyAction)&&(e&&e.length?this._form.option("items",this._getFormItemsByHiddenColumns(e)):this._form.repaint())}updateHidingQueue(e){var r,a,t=e.filter(s=>s.visible&&!s.type&&!s.fixed&&!((0,m.$K)(s.groupIndex)&&s.groupIndex>=0));if(this._hidingColumnsQueue=[],this.option("allowColumnResizing")&&"widget"===this.option("columnResizingMode"))return this._hidingColumnsQueue;for(a=0;a<t.length;a++)(0,m.$K)(t[a].hidingPriority)&&t[a].hidingPriority>=0&&(r=!0,this._hidingColumnsQueue[t[a].hidingPriority]=t[a]);if(r)this._hidingColumnsQueue.reverse();else if(this.option("columnHidingEnabled"))for(a=0;a<t.length;a++){var n=this._columnsController.getVisibleIndex(t[a].index);this._hidingColumnsQueue[n]=t[a]}return this._hidingColumnsQueue=this._hidingColumnsQueue.filter(Object),this._hidingColumnsQueue}getHiddenColumns(){return this._hiddenColumns}hasHiddenColumns(){return this._hiddenColumns.length>0}getHidingColumnsQueue(){return this._hidingColumnsQueue}isAdaptiveDetailRowExpanded(e){var t=this._dataController;return t.adaptiveExpandedKey()&&(0,J.bY)(t.adaptiveExpandedKey(),e)}expandAdaptiveDetailRow(e){this.hasAdaptiveDetailRowExpanded()||this.toggleExpandAdaptiveDetailRow(e)}collapseAdaptiveDetailRow(){this.hasAdaptiveDetailRowExpanded()&&this.toggleExpandAdaptiveDetailRow()}updateCommandAdaptiveAriaLabel(e,t){var r=this._dataController.getRowIndexByKey(e);if(-1!==r){var a=(0,b.Z)(this.component.getRowElement(r));this.setCommandAdaptiveAriaLabel(a,t)}}setCommandAdaptiveAriaLabel(e,t){e.find(".dx-command-adaptive").attr("aria-label",ae.Z.format(t))}}},extenders:{views:{rowsView:i=>class extends i{_getCellTemplate(e){var t=this,{column:r}=e;return e.rowType===Os&&"detail"===r.command?function(a,n){t._adaptiveColumnsController.createFormByHiddenColumns((0,b.Z)(a),n)}:super._getCellTemplate(e)}_createRow(e){var t=super._createRow.apply(this,arguments);return e&&e.rowType===Os&&e.key===this._dataController.adaptiveExpandedKey()&&t.addClass("dx-adaptive-detail-row"),t}_renderCells(e,t){super._renderCells(e,t);var r=this._adaptiveColumnsController,a=r.getHidingColumnsQueue().length,n=r.getHiddenColumns().length;a&&!n&&function WW(i){return i.find("td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])")}(e).last().addClass("dx-last-data-cell"),"data"===t.row.rowType&&r.setCommandAdaptiveAriaLabel(e,YE)}_getColumnIndexByElementCore(e){var t=e.closest(".".concat(cv));if(t.length&&t.closest(this.component.$element()).length){var r=t.length?t.first().data("dx-form-item"):null;return r&&r.column&&this._columnsController.getVisibleIndex(r.column.index)}return super._getColumnIndexByElementCore(e)}_cellPrepared(e,t){super._cellPrepared.apply(this,arguments),t.row.rowType!==Os&&t.column.visibleWidth===dn&&e.addClass(this.addWidgetPrefix(bd))}getCell(e,t){var r=this._dataController.items()[e?.rowIndex];if(r?.rowType===Os){var a=this._adaptiveColumnsController.getAdaptiveDetailItems();return super.getCell(e,t,a)}return super.getCell.apply(this,arguments)}_getCellElement(e,t){var r=this._dataController.items()[e];return r&&r.rowType===Os?this._adaptiveColumnsController.getItemContentByColumnIndex(t):super._getCellElement.apply(this,arguments)}getContextMenuItems(e){var t;if(e.row&&"detailAdaptive"===e.row.rowType){var r=this._columnHeadersView,a=(0,b.Z)(e.targetElement).closest(".dx-field-item-label").next().data("dx-form-item");return e.column=a?a.column:e.column,r.getContextMenuItems&&r.getContextMenuItems(e)}return null===(t=super.getContextMenuItems)||void 0===t?void 0:t.call(this,e)}isClickableElement(e){var t,r;return null!==(r=null===(t=super.isClickableElement)||void 0===t?void 0:t.call(this,e))&&void 0!==r&&r||!!e.closest(".".concat(jE)).length}}},controllers:{export:i=>class extends i{_updateColumnWidth(e,t){super._updateColumnWidth(e,e.visibleWidth===dn?e.bestFitWidth:t)}},columnsResizer:i=>class extends i{_pointCreated(e,t,r){var a=super._pointCreated(e,t,r),n=r[e.columnIndex]||{},s=this._getNextColumnIndex(e.columnIndex);return a||n.visibleWidth===dn||s!==e.columnIndex+1&&(r[s]||{}).command}_getNextColumnIndex(e){for(var t=this._columnsController.getVisibleColumns(),r=super._getNextColumnIndex(e);t[r]&&t[r].visibleWidth===dn;)r++;return r}},draggingHeader:i=>class extends i{_pointCreated(e,t,r,a){return super._pointCreated(e,t,r,a)||(t[e.columnIndex-1]||{}).visibleWidth===dn}},editing:i=>class extends i{_isRowEditMode(){return"row"===this.getEditMode()}_getFormEditItemTemplate(e,t){return"row"!==this.getEditMode()&&"detailAdaptive"===e.rowType?(e.columnIndex=this._columnsController.getVisibleIndex(t.index),this.getColumnTemplate(e)):super._getFormEditItemTemplate(e,t)}_closeEditItem(e){var t=e.closest(".".concat(cv)),r=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,a=t.length?t.first().data("dx-form-item"):null,n=a&&a.column&&this._columnsController.getVisibleIndex(a.column.index);this.isEditCell(r,n)||super._closeEditItem(e)}_beforeUpdateItems(e,t){if(!this._adaptiveColumnsController.isFormOrPopupEditMode()&&this._adaptiveColumnsController.hasHiddenColumns()){var r=this._dataController.items(),a=r[t],n=Te.getIndexByKey(this._dataController.adaptiveExpandedKey(),r);this._isForceRowAdaptiveExpand=!this._adaptiveColumnsController.hasAdaptiveDetailRowExpanded(),n>=0&&e.push(n+1),e.push(t+1),this._dataController.adaptiveExpandedKey(a.key)}}_afterInsertRow(e){super._afterInsertRow.apply(this,arguments),this._adaptiveColumnsController.hasHiddenColumns()&&(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(e,this.isRowEditMode()),this._isForceRowAdaptiveExpand=!0)}_collapseAdaptiveDetailRow(){this._isRowEditMode()&&this._isForceRowAdaptiveExpand&&(this._adaptiveColumnsController.collapseAdaptiveDetailRow(),this._isForceRowAdaptiveExpand=!1)}_cancelEditAdaptiveDetailRow(){this._adaptiveColumnsController.hasHiddenColumns()&&this._collapseAdaptiveDetailRow()}_afterSaveEditData(){super._afterSaveEditData.apply(this,arguments);var e=new Y.BH;return this._isRowEditMode()&&this._adaptiveColumnsController.hasHiddenColumns()?(0,Y.gx)(this._validatingController.validate(!0)).done(t=>{t&&this._cancelEditAdaptiveDetailRow(),e.resolve()}):e.resolve(),e.promise()}_beforeCancelEditData(){super._beforeCancelEditData(),this._cancelEditAdaptiveDetailRow()}_getRowIndicesForCascadeUpdating(e){var t=super._getRowIndicesForCascadeUpdating.apply(this,arguments);return this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(e.key)&&t.push(e.rowType===Os?e.rowIndex-1:e.rowIndex+1),t}_beforeCloseEditCellInBatchMode(e){var t=this._dataController._adaptiveExpandedKey;if(t){var r=Te.getIndexByKey(t,this._dataController.items());r>-1&&e.unshift(r)}}editRow(e){return this._adaptiveColumnsController.isFormOrPopupEditMode()&&this._adaptiveColumnsController.collapseAdaptiveDetailRow(),super.editRow(e)}deleteRow(e){var t=this._dataController.getKeyByRowIndex(e);"batch"===this.getEditMode()&&this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(t)&&this._adaptiveColumnsController.collapseAdaptiveDetailRow(),super.deleteRow(e)}},resizing:i=>class extends i{dispose(){super.dispose.apply(this,arguments),clearTimeout(this._updateScrollableTimeoutID)}_needBestFit(){return super._needBestFit()||!!this._adaptiveColumnsController.getHidingColumnsQueue().length}_correctColumnWidths(e,t){var r=this._adaptiveColumnsController,a=r.getHiddenColumns(),n=r.updateHidingQueue(this._columnsController.getColumns());r.hideRedundantColumns(e,t,n);var s=r.getHiddenColumns();return r.hasAdaptiveDetailRowExpanded()&&a.length!==s.length&&r.updateForm(s),!s.length&&r.collapseAdaptiveDetailRow(),super._correctColumnWidths.apply(this,arguments)}_toggleBestFitMode(e){e&&this._adaptiveColumnsController._showHiddenColumns(),super._toggleBestFitMode(e)}_needStretch(){var e=this._adaptiveColumnsController;return super._needStretch.apply(this,arguments)||e.getHidingColumnsQueue().length||e.hasHiddenColumns()}},data:i=>class extends i{_processItems(e,t){var{changeType:r}=t;if(e=super._processItems.apply(this,arguments),"loadingAll"===r||!(0,m.$K)(this._adaptiveExpandedKey))return e;var a=Te.getIndexByKey(this._adaptiveExpandedKey,e),n=!1===this.option("scrolling.legacyMode");if(a>=0){var s=e[a];e.splice(a+1,0,{visible:!0,rowType:Os,key:s.key,data:s.data,node:s.node,modifiedValues:s.modifiedValues,isNewRow:s.isNewRow,values:s.values})}else"refresh"===r&&(!n||!t.repaintChangesOnly)&&(this._adaptiveExpandedKey=void 0);return e}_getRowIndicesForExpand(e){var t=super._getRowIndicesForExpand.apply(this,arguments);return this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(e)&&t.push(t[t.length-1]+1),t}adaptiveExpandedKey(e){if(!(0,m.$K)(e))return this._adaptiveExpandedKey;this._adaptiveExpandedKey=e}toggleExpandAdaptiveDetailRow(e,t){var r=Te.getIndexByKey(this._adaptiveExpandedKey,this._items),a=Te.getIndexByKey(e,this._items);r>=0&&r===a&&!t&&(e=void 0,a=-1);var n=this._adaptiveExpandedKey;this._adaptiveExpandedKey=e,r>=0&&r++,a>=0&&a++;var s=this.getRowIndexDelta();this.updateItems({allowInvisibleRowIndices:!0,changeType:"update",rowIndices:[r-s,a-s]}),this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(e,"dxDataGrid-ariaAdaptiveCollapse"),this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(n,YE)}},editorFactory:i=>class extends i{_needHideBorder(e){return super._needHideBorder(e)||e?.hasClass("dx-field-item-content")&&e?.find(".dx-checkbox").length}_getFocusCellSelector(){return"".concat(super._getFocusCellSelector(),", .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content")}_getRevertTooltipsSelector(){return"".concat(super._getRevertTooltipsSelector(),", .dx-field-item-content .").concat(this.addWidgetPrefix("revert-tooltip"))}},columns:i=>class extends i{_isColumnVisible(e){return super._isColumnVisible(e)&&!e.adaptiveHidden}},keyboardNavigation:i=>class extends i{_isCellValid(e,t){return super._isCellValid(e,t)&&!e.hasClass(this.addWidgetPrefix(bd))&&!e.hasClass(Nh)}_processNextCellInMasterDetail(e,t){super._processNextCellInMasterDetail(e,t);var r=this._editingController.isCellOrBatchEditMode();this._editingController.isEditing()&&e&&r&&!this._isInsideEditForm(e)&&(k.Z.off(e,"focus",_v),k.Z.on(e,"focus",{$nextCell:e},_v),k.Z.trigger(t,"focus"))}_isCellElement(e){return super._isCellElement(e)||e.hasClass(pv)}}}}};function XE(i,e,t,r,a,n){n=n||[],(r=r||[])[t=t||0]=r[t]||0;var d,s=i[t],l=0;if(s){for(d=n[t]+1||0;d<s.length;d++){var u=s[d],c=d+r[t],f=u.colspan||1;if(XE(i,e,t+(u.rowspan||1),r,f,n),r[t]+=f-1,l+=f,u.rowspan)for(var p=t+1;p<t+u.rowspan;p++)r[p]=r[p]||0,r[p]+=u.colspan||1;if(!1===e(u,c,t,d)||void 0!==a&&l>=a)break}n[t]=d}}function vv(i,e,t){var r=[];XE(i,(n,s,o)=>{var d,l=n,u=l.colspan||1,c=s+u-1>=e&&s<t;if(r[o]=r[o]||[],c)s<e?(d=u-(e-s),s=e):d=u,s+d>t&&(d=t-s),d!==u&&(l=(0,N.l)({},l,{colspan:d})),r[o].push(l);else if(s>t)return!1});for(var a=0;a<r.length;a++)r[a]=r[a]||[];return r}He.registerModule("adaptivity",i$);var Mh=function(i){return i.map(e=>e.visibleWidth||parseFloat(e.width)||50)},o$={defaultOptions:()=>({scrolling:{columnRenderingMode:"standard",columnPageSize:5,columnRenderingThreshold:300}}),extenders:{controllers:{columns:i=>class extends i{init(){super.init.apply(this,arguments),this._resizingController=this.getController("resizing"),this._beginPageIndex=null,this._endPageIndex=null,this._position=0,this._virtualVisibleColumns={}}dispose(){clearTimeout(this._changedTimeout),super.dispose.apply(this,arguments)}resetColumnsCache(){super.resetColumnsCache(),this._virtualVisibleColumns={}}getBeginPageIndex(e){for(var t=this.getVisibleColumns(void 0,!0),r=Mh(t),a=0,n=0;n<r.length;n++){if(a>=e)return Math.floor(n/this.getColumnPageSize());a+=r[n]}return 0}getTotalWidth(){var e=this.option("width");return"number"==typeof e?e:this._resizingController._lastWidth||(0,oe.Y_)(this.component.$element())}getEndPageIndex(e){var t=this.getVisibleColumns(void 0,!0),r=Mh(t),a=0;e+=this.getTotalWidth();for(var n=0;n<r.length;n++){if(a>=e)return Math.ceil(n/this.getColumnPageSize());a+=r[n]}return Math.ceil(r.length/this.getColumnPageSize())}getColumnPageSize(){return this.option("scrolling.columnPageSize")}_fireColumnsChanged(){var e=new Date;this.columnsChanged.fire({optionNames:{all:!0,length:1},changeTypes:{columns:!0,virtualColumnsScrolling:!0,length:2}}),this._renderTime=new Date-e}getScrollingTimeout(){var e=this.option("scrolling.columnRenderingThreshold"),t=this.option("scrolling.renderAsync"),r=0;return(!(0,m.$K)(t)&&this._renderTime>e||t)&&(r=this.option("scrolling.timeout")),r}setScrollPosition(e){var t=this.getScrollingTimeout();t>0?(clearTimeout(this._changedTimeout),this._changedTimeout=setTimeout(()=>{this._setScrollPositionCore(e)},t)):this._setScrollPositionCore(e)}isVirtualMode(){return(0,We.Ym)()&&"virtual"===this.option("scrolling.columnRenderingMode")}resize(){this._setScrollPositionCore(this._position)}_setScrollPositionCore(e){if(this.isVirtualMode()){var t=this.getBeginPageIndex(e),r=this.getEndPageIndex(e),a=e<this._position?this._beginPageIndex>t:this._endPageIndex<r;this._position=e,a&&(this._beginPageIndex=t,this._endPageIndex=r,this._fireColumnsChanged())}}getFixedColumns(e,t){var r=super.getFixedColumns(e);if(this.isVirtualMode()&&!t&&r.length){var a=r.map(n=>n.command).indexOf("transparent");return r[a].colspan=this.getVisibleColumns().length-super.getFixedColumns().length+1,r}return r}_compileVisibleColumns(e,t){var r;if(t||!this.isVirtualMode()||!this._shouldReturnVisibleColumns())return super._compileVisibleColumns(e);null!==(r=this._columns)&&void 0!==r&&r.length&&!(0,m.$K)(this._beginPageIndex)&&!(0,m.$K)(this._endPageIndex)&&(this._beginPageIndex=this.getBeginPageIndex(this._position),this._endPageIndex=this.getEndPageIndex(this._position));var a=this._beginPageIndex,n=this._endPageIndex,s="".concat(e,"-").concat(a,"-").concat(n);if(this._virtualVisibleColumns[s])return this._virtualVisibleColumns[s];var o=super._compileVisibleColumns(),l=this.getRowCount(),d=this.getColumnPageSize(),u=a*d,c=n*d,f=this.getFixedColumns(void 0,!0),p=f.map(M=>M.command).indexOf("transparent"),g=f.length?p:0,w=o.slice(0,g),x=o.slice(g,u),y=Mh(x).reduce((M,le)=>M+le,0);y||(u=0);var E=f.length?f.length-p-1:0,V=o.slice(o.length-E),F=o.slice(c,o.length-E),q=Mh(F).reduce((M,le)=>M+le,0);if(q||(c=o.length),l>1&&"number"==typeof e){for(var ee=[],X=0;X<=l;X++)ee.push(super._compileVisibleColumns(X));w=vv(ee,0,w.length)[e]||[],V=vv(ee,o.length-V.length,o.length)[e]||[],o=vv(ee,u,c)[e]||[]}else o=o.slice(u,c);return y&&(o.unshift({command:"virtual",width:y}),o=w.concat(o)),q&&(o.push({command:"virtual",width:q}),o=o.concat(V)),this._virtualVisibleColumns[s]=o,o}getColumnIndexOffset(){var e=0;if(this._beginPageIndex>0){var r=this.getFixedColumns().map(n=>n.command).indexOf("transparent"),a=r>=0?r:0;e=this._beginPageIndex*this.getColumnPageSize()-a-1}return e>0?e:0}}},views:{columnHeadersView:i=>class extends i{_renderCore(){var e=super._renderCore.apply(this,arguments);return this._columnsController.isVirtualMode()&&this._updateScrollLeftPosition(),e}},rowsView:i=>class extends i{_resizeCore(){super._resizeCore.apply(this,arguments),this._columnsController.resize()}_handleScroll(e){var t=this.getScrollable(),{left:r}=e.scrollOffset;super._handleScroll.apply(this,arguments),this.option("rtlEnabled")&&t&&(r=(0,oe.dz)(t.$content())-(0,oe.dz)(t.$element())-r),this._columnsController.setScrollPosition(r)}_renderCore(e){var t,r;if(e?.virtualColumnsScrolling){var a=this._findContentElement(),n=null===(t=this._columnsController)||void 0===t?void 0:t.getFixedColumns(),s=null===(r=this._scrollable)||void 0===r?void 0:r.option("useNative");if(n?.length){a.css({minHeight:s?(0,oe.Cr)(a):Te.getContentHeightLimit(ii.Z)});var o=()=>{this.resizeCompleted.remove(o),a.css({minHeight:""})};this.resizeCompleted.add(o)}}return super._renderCore.apply(this,arguments)}}}}};He.registerModule("virtualColumns",o$);var wd="dx-buttongroup",l$="".concat(wd,"-wrapper"),JE="".concat(wd,"-item"),d$="".concat(wd,"-first-item"),u$="".concat(wd,"-last-item"),QE="".concat(JE,"-has-width"),Hh={contained:"dx-buttongroup-mode-contained",outlined:"dx-buttongroup-mode-outlined",text:"dx-buttongroup-mode-text"},c$=oo.Z.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Tl.c((i,e,t)=>{this._prepareItemStyles(i);var r=this.option("buttonTemplate");this._createComponent(i,pr.Z,(0,N.l)({},t,e,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(r)?t:{},template:t.template||r}))},["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions(){return(0,N.l)(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(i){return(0,m.mf)(i)||this.option("integrationOptions.templates")[i]},_selectedItemClass:()=>"dx-item-selected dx-state-selected",_prepareItemStyles(i){var e=i.data("dxItemIndex");0===e&&i.addClass(d$);var t=this.option("items");t&&e===t.length-1&&i.addClass(u$),i.addClass("dx-shape-standard")},_renderItemContent(i){return i.container=(0,b.Z)(i.container).parent(),this.callBase(i)},_setAriaSelectionAttribute(i,e){this.setAria("pressed",e,i)},_renderItemContentByNode(i,e){return i.container=(0,b.Z)(i.container.children().first()),this.callBase(i,e)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>JE,_itemSelectHandler(i){"single"===this.option("selectionMode")&&this.isItemSelected(i.currentTarget)||this.callBase(i)}}),eI=hr.default.inherit({_getDefaultOptions(){return(0,N.l)(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass(wd),this._renderStylingMode(),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_renderStylingMode(){var i,{stylingMode:e}=this.option();for(var t in Hh)this.$element().removeClass(Hh[t]);this.$element().addClass(null!==(i=Hh[e])&&void 0!==i?i:Hh.contained)},_fireSelectionChangeEvent(i,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:i,removedItems:e})},_renderButtons(){var i=(0,b.Z)("<div>").addClass(l$).appendTo(this.$element()),e=this.option("selectedItems"),t={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:r=>{var a=this.option("width");(0,m.$K)(a)&&(0,b.Z)(r.itemElement).addClass(QE)},onSelectionChanged:r=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(r.addedItems,r.removedItems)},onItemClick:r=>{this._itemClickAction(r)}};(0,m.$K)(e)&&e.length&&(t.selectedItems=e),this._buttonsCollection=this._createComponent(i,c$,t)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(i){switch(i.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(i.name,i.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(i),this._buttonsCollection.itemElements().toggleClass(QE,!!i.value);break;default:this.callBase(i)}}});(0,It.Z)("dxButtonGroup",eI);const p$=eI;var tI="dx-dropdownbutton",iI="dx-dropdownbutton-action",rI="dx-dropdownbutton-toggle",w$=hr.default.inherit({_getDefaultOptions(){return(0,N.l)(this.callBase(),{itemTemplate:"item",keyExpr:"this",displayExpr:void 0,selectedItem:null,selectedItemKey:null,stylingMode:"outlined",deferRendering:!0,noDataText:ae.Z.format("dxCollectionWidget-noDataText"),useSelectMode:!1,splitButton:!1,showArrowIcon:!0,text:"",type:"normal",icon:void 0,onButtonClick:null,onSelectionChanged:null,onItemClick:null,opened:!1,items:null,dataSource:null,focusStateEnabled:!0,hoverStateEnabled:!0,dropDownOptions:{},dropDownContentTemplate:"content",wrapItemText:!1,useItemTextAsTitle:!0,grouped:!1,groupTemplate:"group",buttonGroupOptions:{}})},_setOptionsByReference(){this.callBase(),(0,N.l)(this._optionsByReference,{selectedItem:!0})},_init(){this.callBase(),this._createItemClickAction(),this._createActionClickAction(),this._createSelectionChangedAction(),this._initDataSource(),this._compileKeyGetter(),this._compileDisplayGetter(),this._itemsToDataSource(this.option("items")),this._options.cache("buttonGroupOptions",this.option("buttonGroupOptions")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_initTemplates(){this._templateManager.addDefaultTemplates({content:new wf.k(i=>{var e=(0,b.Z)(i.container),t=(0,b.Z)("<div>").appendTo(e);this._list=this._createComponent(t,Ul,this._listOptions()),this._list.registerKeyHandler("escape",this._escHandler.bind(this)),this._list.registerKeyHandler("tab",this._escHandler.bind(this)),this._list.registerKeyHandler("leftArrow",this._escHandler.bind(this)),this._list.registerKeyHandler("rightArrow",this._escHandler.bind(this))})}),this.callBase()},_itemsToDataSource:function(i){this._dataSource||(this._dataSource=new xn.o({store:new _u.Z({key:this._getKey(),data:i}),pageSize:0}))},_getKey:function(){var i,e=this.option("keyExpr"),t=null===(i=this._dataSource)||void 0===i?void 0:i.key();return!(0,m.$K)(t)||(0,m.$K)(e)&&"this"!==e?e:t},_compileKeyGetter(){this._keyGetter=(0,Dt.vb)(this._getKey())},_compileDisplayGetter(){this._displayGetter=(0,Dt.vb)(this.option("displayExpr"))},_initMarkup(){this.callBase(),this.$element().addClass(tI),this._renderButtonGroup(),this._updateArrowClass(),(0,m.$K)(this.option("selectedItemKey"))&&this._loadSelectedItem().done(this._updateActionButton.bind(this))},_renderFocusTarget:J.ZT,_render(){(!this.option("deferRendering")||this.option("opened"))&&this._renderPopup(),this.callBase()},_renderContentImpl(){return this._popup&&this._renderPopupContent(),this.callBase()},_loadSelectedItem(){var i;null===(i=this._loadSingleDeferred)||void 0===i||i.reject();var e=new Y.BH;if(this._list&&void 0!==this._lastSelectedItemData){var t=this.option("useSelectMode")?this._list.option("selectedItem"):this._lastSelectedItemData;return e.resolve(t)}this._lastSelectedItemData=void 0;var r=this.option("selectedItemKey");return this._loadSingle(this._getKey(),r).done(e.resolve).fail(()=>{e.resolve(null)}),this._loadSingleDeferred=e,e.promise()},_createActionClickAction(){this._actionClickAction=this._createActionByOption("onButtonClick")},_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_fireSelectionChangedAction(i){var{previousValue:e,value:t}=i;this._selectionChangedAction({item:t,previousItem:e})},_fireItemClickAction(i){var{event:e,itemElement:t,itemData:r}=i;return this._itemClickAction({event:e,itemElement:t,itemData:this._actionItem||r})},_actionButtonConfig(){var{icon:i,text:e,type:t}=this.option();return{text:e,icon:i,type:t,elementAttr:{class:iI}}},_getButtonGroupItems(){var{splitButton:i,type:e}=this.option(),t=[];return t.push(this._actionButtonConfig()),i&&t.push({icon:"spindown",type:e,elementAttr:{class:rI}}),t},_buttonGroupItemClick(i){var{event:e,itemData:t}=i,r=t.elementAttr.class===iI;t.elementAttr.class===rI?this.toggle():r&&(this._actionClickAction({event:e,selectedItem:this.option("selectedItem")}),this.option("splitButton")||this.toggle())},_buttonGroupOptions(){var{splitButton:i,showArrowIcon:e,focusStateEnabled:t,hoverStateEnabled:r,stylingMode:a,accessKey:n,tabIndex:s}=this.option(),o=i||!e?"content":(l,d)=>{var{text:u,icon:c}=l,f=(0,Ia.H)(c),p=u?(0,b.Z)("<span>").text(u).addClass("dx-button-text"):void 0,g=(0,Ia.H)("spindown").addClass("dx-icon-right");(0,b.Z)(d).append(f,p,g)};return(0,N.l)({items:this._getButtonGroupItems(),onItemClick:this._buttonGroupItemClick.bind(this),width:"100%",height:"100%",selectionMode:"none",onKeyboardHandled:l=>this._keyboardHandler(l),buttonTemplate:o,focusStateEnabled:t,hoverStateEnabled:r,stylingMode:a,accessKey:n,tabIndex:s},this._options.cache("buttonGroupOptions"))},_renderPopupContent(){var i=this._popup.$content(),e=this._getTemplateByOption("dropDownContentTemplate");return i.empty(),this._popupContentId="dx-"+new Ri.Z,this.setAria("id",this._popupContentId,i),e.render({container:(0,rt.u)(i),model:this.option("items")||this._dataSource})},_popupOptions(){var i=this.option("rtlEnabled")?"right":"left";return(0,N.l)({dragEnabled:!1,focusStateEnabled:!1,deferRendering:this.option("deferRendering"),hideOnOutsideClick:e=>{var t=this.$element();return!(0,b.Z)(e.target).closest(".".concat(tI)).is(t)},showTitle:!1,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},_ignoreFunctionValueDeprecation:!0,width:()=>Uu(this.$element()),height:"auto",shading:!1,position:{of:this.$element(),collision:"flipfit",my:i+" top",at:i+" bottom"},_wrapperClassExternal:"dx-dropdowneditor-overlay"},this._options.cache("dropDownOptions"),{visible:this.option("opened")})},_listOptions(){var i=this.option("selectedItemKey"),e=this.option("useSelectMode");return{selectionMode:e?"single":"none",wrapItemText:this.option("wrapItemText"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:()=>this._fireContentReadyAction(),selectedItemKeys:(0,m.$K)(i)&&e?[i]:[],grouped:this.option("grouped"),groupTemplate:this.option("groupTemplate"),keyExpr:this._getKey(),noDataText:this.option("noDataText"),displayExpr:this.option("displayExpr"),itemTemplate:this.option("itemTemplate"),items:this.option("items"),dataSource:this._dataSource,onItemClick:t=>{this.option("useSelectMode")||(this._lastSelectedItemData=t.itemData),this.option("selectedItemKey",this._keyGetter(t.itemData)),!1!==this._fireItemClickAction(t)&&(this.toggle(!1),this._buttonGroup.focus())}}},_upDownKeyHandler(){return this._popup&&this._popup.option("visible")&&this._list?this._list.focus():this.open(),!0},_escHandler(){return this.close(),this._buttonGroup.focus(),!0},_tabHandler(){return this.close(),!0},_renderPopup(){var i=(0,b.Z)("<div>");this.$element().append(i),this._popup=this._createComponent(i,Ja.Z,this._popupOptions()),this._popup.$content().addClass("dx-dropdownbutton-content"),this._popup.$wrapper().addClass("dx-dropdownbutton-popup-wrapper"),this._popup.on("hiding",this._popupHidingHandler.bind(this)),this._popup.on("showing",this._popupShowingHandler.bind(this)),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_popupHidingHandler(){this.option("opened",!1),this._updateAriaAttributes(!1)},_popupOptionChanged:function(i){var e=hr.default.getOptionsFromContainer(i);this._setPopupOption(e);var t=Object.keys(e);(-1!==t.indexOf("width")||-1!==t.indexOf("height"))&&this._dimensionChanged()},_dimensionChanged:function(){void 0===Sf(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>Uu(this.$element()))},_setPopupOption:function(i,e){this._setWidgetOption("_popup",arguments)},_popupShowingHandler(){this.option("opened",!0),this._updateAriaAttributes(!0)},_setElementAria(i){this.setAria({owns:i?this._popupContentId:void 0},this.$element())},_setButtonsAria(i){var e={expanded:i,haspopup:"listbox"},t={};this.option("text")||(t.label="dropdownbutton"),this._getButtons().each((r,a)=>{this.setAria(0===r?(0,ye.Z)({},t,e):e,(0,b.Z)(a))})},_updateAriaAttributes(i){this._setElementAria(i),this._setButtonsAria(i)},_getButtons(){return this._buttonGroup.$element().find(".".concat("dx-button"))},_renderButtonGroup(){var i=this._buttonGroup&&this._buttonGroup.$element()||(0,b.Z)("<div>");this._buttonGroup||this.$element().append(i),this._buttonGroup=this._createComponent(i,p$,this._buttonGroupOptions()),this._buttonGroup.registerKeyHandler("downArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("tab",this._tabHandler.bind(this)),this._buttonGroup.registerKeyHandler("upArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("escape",this._escHandler.bind(this)),this._bindInnerWidgetOptions(this._buttonGroup,"buttonGroupOptions"),this._updateAriaAttributes(this.option("opened"))},_updateArrowClass(){var i=this.option("splitButton")||this.option("showArrowIcon");this.$element().toggleClass("dx-dropdownbutton-has-arrow",i)},toggle(i){return this._popup||(this._renderPopup(),this._renderContent()),this._popup.toggle(i)},open(){return this.toggle(!0)},close(){return this.toggle(!1)},_setListOption(i,e){this._list&&this._list.option(i,e)},_getDisplayValue(i){var t=(0,m.PO)(i)?this._displayGetter(i):i;return(0,m.PO)(t)?"":String((0,J.IS)(t,""))},_updateActionButton(i){this.option("useSelectMode")&&this.option({text:this._getDisplayValue(i),icon:(0,m.PO)(i)?i.icon:void 0}),this._setOptionWithoutOptionChange("selectedItem",i),this._setOptionWithoutOptionChange("selectedItemKey",this._keyGetter(i))},_clean(){this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove()},_selectedItemKeyChanged(i){this._setListOption("selectedItemKeys",this.option("useSelectMode")&&(0,m.$K)(i)?[i]:[]);var e=this.option("selectedItem");this._loadSelectedItem().done(t=>{this._updateActionButton(t),this._displayGetter(e)!==this._displayGetter(t)&&this._fireSelectionChangedAction({previousValue:e,value:t})})},_updateButtonGroup(i,e){this._buttonGroup.option(i,e),this._updateAriaAttributes(this.option("opened"))},_actionButtonOptionChanged(i){var{name:e,value:t}=i,r={};r[e]=t,this._updateButtonGroup("items[0]",(0,N.l)({},this._actionButtonConfig(),r)),this._popup&&this._popup.repaint()},_selectModeChanged(i){if(i){this._setListOption("selectionMode","single");var e=this.option("selectedItemKey");this._setListOption("selectedItemKeys",(0,m.$K)(e)?[e]:[]),this._selectedItemKeyChanged(this.option("selectedItemKey"))}else this._setListOption("selectionMode","none"),this.option({selectedItemKey:void 0,selectedItem:void 0}),this._actionButtonOptionChanged({text:this.option("text")})},_updateItemCollection(i){var e=this.option("selectedItemKey");this._setListOption("selectedItem",null),this._setWidgetOption("_list",[i]),(0,m.$K)(e)&&this._loadSelectedItem().done(t=>{this._setListOption("selectedItemKeys",[e]),this._setListOption("selectedItem",t)}).fail(t=>{this._setListOption("selectedItemKeys",[])}).always(this._updateActionButton.bind(this))},_updateDataSource:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._dataSource.items();this._dataSource=void 0,this._itemsToDataSource(i),this._updateKeyExpr()},_updateKeyExpr:function(){this._compileKeyGetter(),this._setListOption("keyExpr",this._getKey())},focus:function(){this._buttonGroup.focus()},_optionChanged(i){var e,{name:t,value:r}=i;switch(t){case"useSelectMode":this._selectModeChanged(r);break;case"splitButton":this._updateArrowClass(),this._renderButtonGroup();break;case"displayExpr":this._compileDisplayGetter(),this._setListOption(t,r),this._updateActionButton(this.option("selectedItem"));break;case"keyExpr":this._updateDataSource();break;case"buttonGroupOptions":this._innerWidgetOptionChanged(this._buttonGroup,i);break;case"dropDownOptions":if("dropDownOptions.visible"===i.fullName)break;void 0!==i.value.visible&&delete i.value.visible,this._popupOptionChanged(i),this._innerWidgetOptionChanged(this._popup,i);break;case"opened":this.toggle(r);break;case"focusStateEnabled":case"hoverStateEnabled":this._setListOption(t,r),this._updateButtonGroup(t,r),this.callBase(i);break;case"items":this._updateDataSource(this.option("items")),this._updateItemCollection(t);break;case"dataSource":Array.isArray(r)?this._updateDataSource(this.option("dataSource")):(this._initDataSource(),this._updateKeyExpr()),this._updateItemCollection(t);break;case"icon":case"text":this._actionButtonOptionChanged(i);break;case"showArrowIcon":this._updateArrowClass(),this._renderButtonGroup(),this._popup&&this._popup.repaint();break;case"width":case"height":this.callBase(i),null===(e=this._popup)||void 0===e||e.repaint();break;case"stylingMode":case"tabIndex":this._updateButtonGroup(t,r);break;case"type":this._updateButtonGroup("items",this._getButtonGroupItems());break;case"itemTemplate":case"grouped":case"noDataText":case"groupTemplate":case"wrapItemText":case"useItemTextAsTitle":this._setListOption(t,r);break;case"dropDownContentTemplate":this._renderContent();break;case"selectedItemKey":this._selectedItemKeyChanged(r);break;case"selectedItem":break;case"onItemClick":this._createItemClickAction();break;case"onButtonClick":this._createActionClickAction();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"deferRendering":this.toggle(this.option("opened"));break;default:this.callBase(i)}}}).include(Wb.Z);(0,It.Z)("dxDropDownButton",w$);var aI="dx-datagrid-export-button";class A${constructor(e,t,r){this._exportController=e,this._initialColumnWidthsByColumnIndex=t,this._selectedRowsOnly=r}_getGroupValue(e){var{key:t,data:r,rowType:a,groupIndex:n,summaryCells:s}=e,o=this._options.groupColumns[n],l=He.getDisplayValue(o,o.deserializeValue?o.deserializeValue(t[n]):t[n],r,a),d="".concat(o.caption,": ").concat(He.formatValue(l,o));return s&&s[0]&&s[0].length&&(d+=" ".concat(He.getGroupRowSummaryText(s[0],this._options.summaryTexts))),d}_correctCellIndex(e){return e}_initOptions(){var e=this._exportController,t=e._columnsController.getGroupColumns();this._options={columns:e._getColumns(this._initialColumnWidthsByColumnIndex),groupColumns:t,items:this._selectedRowsOnly||e._selectionOnly?e._getSelectedItems():e._getAllItems(),isHeadersVisible:e.option("showColumnHeaders"),summaryTexts:e.option("summary.texts"),rtlEnabled:e.option("rtlEnabled")}}getHeaderStyles(){return[{bold:!0,alignment:"center"},{bold:!0,alignment:"left"},{bold:!0,alignment:"right"}]}getGroupRowStyle(){return{bold:!0,alignment:(0,di.q)(this._options.rtlEnabled)}}getColumnStyles(){var e=[];return this.getColumns().forEach(t=>{e.push({alignment:t.alignment||"left",format:t.format,dataType:t.dataType})}),e}getStyles(){return[...this.getHeaderStyles(),...this.getColumnStyles(),this.getGroupRowStyle()]}_getTotalCellStyleId(e){var t,r=(null===(t=this.getColumns()[e])||void 0===t?void 0:t.alignment)||"right";return this.getHeaderStyles().map(a=>a.alignment).indexOf(r)}getStyleId(e,t){return e<this.getHeaderRowCount()?0:this.isTotalCell(e-this.getHeaderRowCount(),t)?this._getTotalCellStyleId(t):this.isGroupRow(e-this.getHeaderRowCount())?this.getHeaderStyles().length+this.getColumns().length:t+this.getHeaderStyles().length}getColumns(e){var{columns:t}=this._options;return e?t:t[t.length-1]}getColumnsWidths(){var e=this.getColumns();return(0,m.$K)(e)?e.map(t=>t.width):void 0}getRowsCount(){return this._options.items.length+this.getHeaderRowCount()}getHeaderRowCount(){return this.isHeadersVisible()?this._options.columns.length-1:0}isGroupRow(e){return e<this._options.items.length&&"group"===this._options.items[e].rowType}getGroupLevel(e){var t=this._options.items[e-this.getHeaderRowCount()],r=t&&t.groupIndex;return t&&"totalFooter"===t.rowType?0:(0,m.$K)(r)?r:this._options.groupColumns.length}getCellType(e,t){var r=this.getColumns();if(e<this.getHeaderRowCount())return"string";if(e-=this.getHeaderRowCount(),t<r.length){var a=this._options.items.length&&this._options.items[e],n=r[t];return a&&"data"===a.rowType&&isFinite(a.values[this._correctCellIndex(t)])&&!(0,m.$K)(n.customizeText)?(0,m.$K)(n.lookup)?n.lookup.dataType:n.dataType:"string"}}ready(){this._initOptions();var e=this._options;return(0,Y.gx)(e.items).done(t=>{e.items=t}).fail(()=>{e.items=[]})}_convertFromGridGroupSummaryItems(e){if((0,m.$K)(e)&&e.length>0)return e.map(t=>({value:t.value,name:t.name}))}getCellData(e,t,r){var a,n,s={cellSourceData:{},value:a},o=this.getColumns(),l=this._correctCellIndex(t);if(e<this.getHeaderRowCount())n=this.getColumns(!0)[e][t],s.cellSourceData.rowType="header",s.cellSourceData.column=n&&n.gridColumn,s.value=n&&n.caption;else{e-=this.getHeaderRowCount();var u=this._options.items.length&&this._options.items[e];if(u){var c=u.values;switch(s.cellSourceData.rowType=u.rowType,s.cellSourceData.column=o[t]&&o[t].gridColumn,u.rowType){case"groupFooter":case"totalFooter":l<c.length&&((0,m.$K)(a=c[l])?(s.cellSourceData.value=a.value,s.cellSourceData.totalSummaryItemName=a.name,s.value=He.getSummaryText(a,this._options.summaryTexts)):s.cellSourceData.value=void 0);break;case"group":if(s.cellSourceData.groupIndex=u.groupIndex,t<1)s.cellSourceData.column=this._options.groupColumns[u.groupIndex],s.cellSourceData.value=u.key[u.groupIndex],s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(u.summaryCells[0]),s.value=this._getGroupValue(u);else{var f=u.values[l];if(Array.isArray(f)){s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(f),a="";for(var p=0;p<f.length;p++)a+=(p>0?r?"\n":" \n ":"")+He.getSummaryText(f[p],this._options.summaryTexts);s.value=a}else s.cellSourceData.value=void 0}break;default:if(n=o[t]){var g=c[l],w=He.getDisplayValue(n,g,u.data,u.rowType);s.value=!isFinite(w)||(0,m.$K)(n.customizeText)?r&&(0,m.$K)(n.customizeText)&&n.customizeText===this._exportController._columnsController.getCustomizeTextByDataType("boolean")?w:He.formatValue(w,n):w,s.cellSourceData.value=g}s.cellSourceData.data=u.data}}}return s}isHeadersVisible(){return this._options.isHeadersVisible}isTotalCell(e,t){var{items:r}=this._options,a=r[e],n=this._correctCellIndex(t);return a&&"groupFooter"===a.rowType||"totalFooter"===a.rowType||a.summaryCells&&a.summaryCells[n]&&a.summaryCells[n].length>0&&a.summaryCells[n][0].alignByColumn}getCellMerging(e,t){var{columns:r}=this._options,a=r[e]&&r[e][t];return a?{colspan:(a.exportColspan||1)-1,rowspan:(a.rowspan||1)-1}:{colspan:0,rowspan:0}}getFrozenArea(){return{x:0,y:this.getHeaderRowCount()}}}He.registerModule("export",{defaultOptions:()=>({export:{enabled:!1,fileName:"DataGrid",formats:["xlsx"],allowExportSelectedData:!1,texts:{exportTo:ae.Z.format("dxDataGrid-exportTo"),exportAll:ae.Z.format("dxDataGrid-exportAll"),exportSelectedRows:ae.Z.format("dxDataGrid-exportSelectedRows")}}}),controllers:{export:class D$ extends He.ViewController{_getEmptyCell(){return{caption:"",colspan:1,rowspan:1}}_updateColumnWidth(e,t){e.width=t}_getColumns(e){var r,a,t=[],n=this._columnsController,s=n.getRowCount();for(r=0;r<=s;r++){var o=[];a=n.getVisibleColumns(r,!0);var l=void 0;if(r===s)if(this._updateLockCount)l=e;else{var d=this._getColumnWidths(this._headersView,this._rowsView);if(d&&d.length){l={};for(var u=0;u<a.length;u++)l[a[u].index]=d[u]}}for(var c=0;c<a.length;c++){var f=(0,N.l)({},a[c],{dataType:"datetime"===a[c].dataType?"date":a[c].dataType,gridColumn:a[c]});if(this._needColumnExporting(f)){var p=this._calculateExportColspan(f);(0,m.$K)(p)&&(f.exportColspan=p),l&&this._updateColumnWidth(f,l[f.index]),o.push(f)}}t.push(o)}return a=t[s],t=function S$(i,e){for(var t=u=>u||1,r=[],a=(i[0]||[]).reduce((u,c)=>u+t(c.colspan),0),n=(u=>{var c=0,f=0;return()=>{var p=u[c]||[],g=p[f++];return f>=p.length&&(c++,f=0),g&&(g.colspan=t(g.colspan),g.rowspan=t(g.rowspan)),g}})(i),s=(u,c,f)=>{if((r[u]=r[u]||[])[c]=f,f.colspan>1||f.rowspan>1){for(var g=(0,N.l)({},f,e),w=1;w<f.colspan;w++)s(u,c+w,g);for(var x=1;x<f.rowspan;x++)for(var y=0;y<f.colspan;y++)s(u+x,c+y,g)}},o=n(),l=0;o;){for(var d=0;d<a&&o;d++)r[l]&&r[l][d]||(s(l,d,o),d+=o.colspan-1,o=n());l++}return r}(t.slice(0,-1),this._getEmptyCell()),t.push(a),t}_calculateExportColspan(e){if(e.isBand){var t=this._columnsController.getChildrenByBandColumn(e.index,!0);if((0,m.$K)(t))return t.reduce((r,a)=>this._needColumnExporting(a)?r+(this._calculateExportColspan(a)||1):r,0)}}_needColumnExporting(e){return!e.command&&(e.allowExporting||void 0===e.allowExporting)}_getFooterSummaryItems(e,t){var r=[],a=1,n=0;do{for(var s=[],o=0;o<e.length;o++){var l=e[o],d=l.length;a<d&&(a=d),s.push(l[n])}r.push({values:s,rowType:t?"totalFooter":"groupFooter"})}while(n++<a-1);return r}_hasSummaryGroupFooters(){var e=this.option("summary.groupItems");if((0,m.$K)(e))for(var t=0;t<e.length;t++)if(e[t].showInGroupFooter)return!0;return!1}_getItemsWithSummaryGroupFooters(e){for(var t=[],r=[],a=[],n=0;n<e.length;n++){var s=e[n];"groupFooter"===s.rowType?(a=this._getFooterSummaryItems(s.summaryCells),t=t.concat(r,a),r=[]):r.push(s)}return t.length?t:r}_updateGroupValuesWithSummaryByColumn(e){for(var t=[],r=0;r<e.length;r++){var a=e[r],{summaryCells:n}=a;if("group"===a.rowType&&n&&n.length>1){for(var s=a.values.length,o=1;o<n.length;o++)for(var l=0;l<n[o].length;l++){var d=n[o][l];d&&d.alignByColumn&&(Array.isArray(t[o-s])||(t[o-s]=[]),t[o-s].push(d))}t.length>0&&(a.values.push(...t),t=[])}}}_processUnExportedItems(e){for(var a,n,t=this._columnsController.getVisibleColumns(null,!0),r=this._columnsController.getGroupColumns(),s=0;s<e.length;s++){var o=e[s],l=!1;a=[],n=[];for(var d=0;d<t.length;d++){var u=t[d];if(l||(l=["detailExpand","buttons"].includes(u.type)),this._needColumnExporting(u)&&(o.values&&a.push("group"!==o.rowType||a.length?o.values[d]:o.key[o.groupIndex]),o.summaryCells))if("group"!==o.rowType||n.length)n.push(o.summaryCells[d]);else{var c=d-r.length+o.groupIndex;n.push(o.summaryCells[l?c:c+1])}}a.length&&(o.values=a),n.length&&(o.summaryCells=n)}}_getAllItems(e){var d,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this,a=new Y.BH,n=this.getController("data"),s=n.footerItems(),o=s.length&&s[0],l=r.option("summary.totalItems");return(0,Y.gx)(e).done(u=>{n.loadAll(u,t).done((c,f)=>{r._updateGroupValuesWithSummaryByColumn(c),r._hasSummaryGroupFooters()&&(c=r._getItemsWithSummaryGroupFooters(c)),d=o&&o.summaryCells,(0,m.$K)(f)&&l&&(d=r._getSummaryCells(l,f));var p=o&&r._getFooterSummaryItems(d,!0);p&&(c=c.concat(p)),r._processUnExportedItems(c),a.resolve(c)}).fail(a.reject)}).fail(a.reject),a}_getSummaryCells(e,t){var r=this.getController("data");return r._calculateSummaryCells(e,t,r._columnsController.getVisibleColumns(null,!0),(n,s)=>r._isDataColumn(s)?s.index:-1)}_getSelectedItems(){var e=this.getController("selection");return this.needLoadItemsOnExportingSelectedItems()?this._getAllItems(e.loadSelectedItemsWithFilter(),!0):this._getAllItems(e.getSelectedRowsData())}_getColumnWidths(e,t){return e&&e.isVisible()?e.getColumnWidths():t.getColumnWidths()}throwWarningIfNoOnExportingEvent(){var e,t,r=null===(t=(e=this.component).hasActionSubscription)||void 0===t?void 0:t.call(e,"onExporting");this.option("export.enabled")&&!r&&Rt.Z.log("W1024")}init(){this.throwWarningIfNoOnExportingEvent(),this._columnsController=this.getController("columns"),this._rowsView=this.getView("rowsView"),this._headersView=this.getView("columnHeadersView"),this.createAction("onExporting",{excludeValidators:["disabled","readOnly"]})}callbackNames(){return["selectionOnlyChanged"]}getDataProvider(e){var r,t=this._getColumnWidths(this._headersView,this._rowsView);if(t&&t.length){r={};for(var a=this._columnsController.getVisibleColumns(this._columnsController.getRowCount(),!0),n=0;n<a.length;n++)r[a[n].index]=t[n]}return new A$(this,r,e)}exportTo(e,t){this._selectionOnly=e;var r=this.getAction("onExporting"),a={rtlEnabled:this.option("rtlEnabled"),selectedRowsOnly:!!e,format:t,fileName:"DataGrid",cancel:!1};(0,m.mf)(r)&&r(a)}publicMethods(){return["getDataProvider"]}selectionOnly(e){if(!(0,m.$K)(e))return this._isSelectedRows;this._isSelectedRows=e,this.selectionOnlyChanged.fire()}optionChanged(e){super.optionChanged(e),"export"===e.name&&this.throwWarningIfNoOnExportingEvent()}needLoadItemsOnExportingSelectedItems(){var e;return null!==(e=this.option("loadItemsOnExportingSelectedItems"))&&void 0!==e?e:this.getController("data")._dataSource.remoteOperations().filtering}}},extenders:{controllers:{editing:i=>class extends i{callbackNames(){var e=super.callbackNames();return(0,m.$K)(e)?e.push("editingButtonsUpdated"):["editingButtonsUpdated"]}_updateEditButtons(){super._updateEditButtons(),this.editingButtonsUpdated.fire()}}},views:{headerPanel:i=>class extends i{_getToolbarItems(){var e=super._getToolbarItems(),t=this._getExportToolbarButton();return t&&(e.push(t),this._correctItemsPosition(e)),e}_getExportToolbarButton(){var e=this._getExportToolbarItems();if(0===e.length)return null;var t=this._needDisableExportButton(),r={name:"exportButton",location:"after",locateInMenu:"auto",sortIndex:30,options:{items:e},disabled:t};if(1===e.length){var a=(0,ye.Z)((0,ye.Z)({},e[0]),{hint:e[0].text,elementAttr:{class:aI}});r.widget="dxButton",r.showText="inMenu",r.options=a}else{var n={icon:"export",displayExpr:"text",items:e,hint:this.option("export.texts.exportTo"),elementAttr:{class:aI},dropDownOptions:{width:"auto",_wrapperClassExternal:"dx-datagrid-export-menu"}};r.options=n,r.widget="dxDropDownButton",r.menuItemTemplate=(s,o,l)=>{this._createComponent((0,b.Z)(l),Ul,{items:e})}}return r}_getExportToolbarItems(){var e,t=this.option("export"),r=this.option("export.texts"),a=null!==(e=this.option("export.formats"))&&void 0!==e?e:[];if(!t.enabled)return[];var n=[];return a.forEach(s=>{var o=s.toUpperCase(),l="export";"xlsx"===s&&(o="Excel",l="xlsxfile"),"pdf"===s&&(l="pdffile"),n.push({text:(0,ma.WU)(r.exportAll,o),icon:l,onClick:()=>{this._exportController.exportTo(!1,s)}}),t.allowExportSelectedData&&n.push({text:(0,ma.WU)(r.exportSelectedRows,o),icon:"exportselected",onClick:()=>{this._exportController.exportTo(!0,s)}})}),n}_correctItemsPosition(e){e.sort((t,r)=>t.sortIndex-r.sortIndex)}_isExportButtonVisible(){return this.option("export.enabled")}optionChanged(e){super.optionChanged(e),"export"===e.name&&(e.handled=!0,this._invalidate())}_needDisableExportButton(){var e=!this._columnsController.hasVisibleDataColumns(),t=this._editingController.hasChanges();return e||t}_columnOptionChanged(e){if(super._columnOptionChanged(e),He.checkChanges(e.optionNames,["groupIndex","visible","all"])){var r=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",r)}}init(){super.init(),this._exportController=this.getController("export"),this._editingController=this.getController("editing"),this._editingController.editingButtonsUpdated.add(()=>{var e=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",e)})}isVisible(){return super.isVisible()||this._isExportButtonVisible()}}}}});var Sd="dx-row-focused",B$=".dx-row.".concat(Sd),sI="dx-cell-focus-disabled",Zh={defaultOptions:()=>({focusedRowEnabled:!1,autoNavigateToFocusedRow:!0,focusedRowKey:null,focusedRowIndex:-1,focusedColumnIndex:-1}),controllers:{focus:class N$ extends Nt.ViewController{get _keyboardController(){return this.getController("keyboardNavigation")}get _dataController(){return this.getController("data")}init(){this.component._optionsByReference.focusedRowKey=!0}optionChanged(e){var{name:t,value:r,previousValue:a}=e;switch(t){case"focusedRowIndex":this._focusRowByIndex(r),this._keyboardController._fireFocusedRowChanged(),e.handled=!0;break;case"focusedRowKey":if(Array.isArray(r)&&JSON.stringify(r)===JSON.stringify(a))return;this._focusRowByKey(r),this._keyboardController._fireFocusedRowChanged(),e.handled=!0;break;case"focusedColumnIndex":case"focusedRowEnabled":case"autoNavigateToFocusedRow":e.handled=!0;break;default:super.optionChanged(e)}}publicMethods(){return["navigateToRow","isRowFocused"]}isAutoNavigateToFocusedRow(){return"infinite"!==this.option("scrolling.mode")&&this.option("autoNavigateToFocusedRow")}_focusRowByIndex(e,t){this.option("focusedRowEnabled")&&((e=void 0!==e?e:this.option("focusedRowIndex"))<0?this.isAutoNavigateToFocusedRow()&&this._resetFocusedRow():this._focusRowByIndexCore(e,t))}_focusRowByIndexCore(e,t){var r=this._dataController.pageSize(),a=()=>{if(this._isValidFocusedRowIndex(e)){var s=e-this._dataController.getRowIndexOffset(!0);if(!t||t.paging&&!t.filtering){var o=this._dataController._getLastItemIndex();s=Math.min(s,o)}var l=this._dataController.getKeyByRowIndex(s,!0);(0,m.$K)(l)&&!this.isRowFocused(l)&&this.option("focusedRowKey",l)}};if(r>=0)if(this._isLocalRowIndex(e))a();else{var n=Math.floor(e/this._dataController.pageSize());(0,Y.gx)(this._dataController.pageIndex(n),this._dataController.waitReady()).done(()=>{a()})}}_isLocalRowIndex(e){if(this._keyboardController._isVirtualScrolling()){var r=Math.floor(e/this._dataController.pageSize()),a=this._dataController.virtualItemsCount(),n=a?a.begin:-1,s=this._dataController.getVisibleRows().length+this._dataController.getRowIndexOffset(),o=Math.ceil(s/this._dataController.pageSize());return n<=e&&o>r}return!0}_setFocusedRowKeyByIndex(e){if(this._isValidFocusedRowIndex(e)){var t=Math.min(e-this._dataController.getRowIndexOffset(),this._dataController.items().length-1),r=this._dataController.getKeyByRowIndex(t);(0,m.$K)(r)&&!this.isRowFocused(r)&&this.option("focusedRowKey",r)}}_focusRowByKey(e){(0,m.$K)(e)?this._navigateToRow(e,!0):this._resetFocusedRow()}_resetFocusedRow(){var e=this.option("focusedRowKey"),t=(0,m.$K)(e);!t&&this.option("focusedRowIndex")<0||(t&&this.option("focusedRowKey",null),this._keyboardController.setFocusedRowIndex(-1),this.option("focusedRowIndex",-1),this._dataController.updateItems({changeType:"updateFocusedRow",focusedRowKey:null}),this._keyboardController._fireFocusedRowChanged())}_isValidFocusedRowIndex(e){var t=this._dataController.getVisibleRows()[e];return!t||"data"===t.rowType||"group"===t.rowType}navigateToRow(e){return this.isAutoNavigateToFocusedRow()||this.option("focusedRowIndex",-1),this._navigateToRow(e)}_navigateToRow(e,t){var r=this,a=r.isAutoNavigateToFocusedRow(),n=new Y.BH;if(void 0===e||!this._dataController.dataSource())return n.reject().promise();var s=r.getFocusedRowIndexByKey(e);return!a&&t||s>=0?r._navigateTo(e,n,t):this._dataController.getPageIndexByKey(e).done(o=>{o<0?n.resolve(-1):o===this._dataController.pageIndex()?this._dataController.reload().done(()=>{r.isRowFocused(e)&&this._dataController.getRowIndexByKey(e)>=0?n.resolve(r.getFocusedRowIndexByKey(e)):r._navigateTo(e,n,t)}).fail(n.reject):this._dataController.pageIndex(o).done(()=>{r._navigateTo(e,n,t)}).fail(n.reject)}).fail(n.reject),n.promise()}_navigateTo(e,t,r){var a=this._dataController.getRowIndexByKey(e),n=Te.isVirtualRowRendering(this);this.isAutoNavigateToFocusedRow()&&n&&a<0?this._navigateToVirtualRow(e,t,r):this._navigateToVisibleRow(e,t,r)}_navigateToVisibleRow(e,t,r){if(r)this._triggerUpdateFocusedRow(e,t);else{var a=this.getFocusedRowIndexByKey(e);this.getView("rowsView").scrollToRowElement(e,t).done(()=>{t.resolve(a)})}}_navigateToVirtualRow(e,t,r){var a=this._dataController._rowsScrollController,n=Te.getIndexByKey(e,this._dataController.items(!0)),s=this.getView("rowsView").getScrollable();if(a&&s&&n>=0){var o=n+this._dataController.getRowIndexOffset(!0),l=a.getItemOffset(o),d=()=>{this._dataController.totalCount()&&!this._dataController.items().length||(this.component.off("contentReady",d),r?this._triggerUpdateFocusedRow(e,t):t.resolve(o))};this.component.on("contentReady",d),this.getView("rowsView").scrollTopPosition(l)}else t.resolve(-1)}_triggerUpdateFocusedRow(e,t){var a,r=this.getFocusedRowIndexByKey(e);this._isValidFocusedRowIndex(r)?(this.option("focusedRowEnabled")?this._dataController.updateItems({changeType:"updateFocusedRow",focusedRowKey:e}):a=this.getView("rowsView").scrollToRowElement(e),(0,Y.gx)(a).done(()=>{this._keyboardController.setFocusedRowIndex(r),t&&t.resolve(r)})):t&&t.resolve(-1)}getFocusedRowIndexByKey(e){var t=this._dataController.getRowIndexByKey(e,!0);return t>=0?t+this._dataController.getRowIndexOffset(!0):-1}_focusRowByKeyOrIndex(){var e=this.option("focusedRowKey"),t=this.option("focusedRowIndex");if((0,m.$K)(e)){var r=this._dataController.getRowIndexByKey(e);r>=0?(this._keyboardController._isVirtualScrolling()&&(t=r+this._dataController.getRowIndexOffset()),this._keyboardController.setFocusedRowIndex(t),this._triggerUpdateFocusedRow(e)):this._navigateToRow(e,!0).done(a=>{t>=0&&a<0?this._focusRowByIndex():t<0&&a>=0&&this._keyboardController.setFocusedRowIndex(a)})}else t>=0&&this._focusRowByIndex(t)}isRowFocused(e){var t=this.option("focusedRowKey");if((0,m.$K)(t))return(0,J.bY)(e,this.option("focusedRowKey"))}updateFocusedRow(e){var s,o,{focusedRowKey:t}=e,r=this,a=r._dataController.getRowIndexByKey(t),n=r.getView("rowsView");(0,j.S6)(n.getTableElements(),(l,d)=>{var u=0===l;s=(0,b.Z)(d),r._clearPreviousFocusedRow(s,a);var c=r._prepareFocusedRow({changedItem:r._dataController.getVisibleRows()[a],$tableElement:s,focusedRowIndex:a});u&&(o=c)}),o&&n.scrollToElementVertically(o)}_clearPreviousFocusedRow(e,t){var r=e.find(B$).filter((n,s)=>{var o=(0,b.Z)(s).closest(".".concat(this.addWidgetPrefix("table")));return e.is(o)});r.removeClass(Sd).removeClass(sI).removeAttr("tabindex"),r.children("td").removeAttr("tabindex"),0!==t&&(0,b.Z)(this.getView("rowsView").getRowElement(0)).removeClass(sI).removeAttr("tabIndex")}_prepareFocusedRow(e){var t,{changedItem:r}=e;if(r&&("data"===r.rowType||"group"===r.rowType)){var{focusedRowIndex:a}=e,{$tableElement:n}=e,s=this.option("tabindex")||0,o=this.getView("rowsView");(t=(0,b.Z)(o._getRowElements(n).eq(a))).addClass(Sd).attr("tabindex",s)}return t}}},extenders:{controllers:{keyboardNavigation:i=>class extends i{init(){var e=this.option("focusedRowIndex"),t=this.option("focusedColumnIndex");this.createAction("onFocusedRowChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedRowChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanged",{excludeValidators:["disabled","readOnly"]}),super.init(),this.setRowFocusType(),this._focusedCellPosition={},(0,m.$K)(e)&&e>=0&&(this._focusedCellPosition.rowIndex=e),(0,m.$K)(t)&&t>=0&&(this._focusedCellPosition.columnIndex=t)}setFocusedRowIndex(e){super.setFocusedRowIndex(e),this.option("focusedRowIndex",e)}setFocusedColumnIndex(e){super.setFocusedColumnIndex(e),this.option("focusedColumnIndex",e)}_escapeKeyHandler(e,t){return t||!this.option("focusedRowEnabled")?super._escapeKeyHandler(e,t):!!this.isCellFocusType()&&(this.setRowFocusType(),this._focus(this._getCellElementFromTarget(e.originalEvent.target),!0),!0)}_updateFocusedCellPosition(e,t){var r=super._updateFocusedCellPosition(e,t);return r&&r.columnIndex>=0&&this._fireFocusedCellChanged(e),r}},editorFactory:i=>class extends i{renderFocusOverlay(e,t){var r,n,a=this.option("focusedRowEnabled");a&&null!==(r=this._keyboardNavigationController)&&void 0!==r&&r.isRowFocusType()&&!this._editingController.isEditing()?a&&"row"===this._keyboardNavigationController._getElementType(e)&&!e.hasClass(Sd)&&(n=this._keyboardNavigationController.getFirstValidCellInRow(e),this._keyboardNavigationController.focus(n)):super.renderFocusOverlay(e,t)}},columns:i=>class extends i{getSortDataSourceParameters(e,t){var r=super.getSortDataSourceParameters.apply(this,arguments),a=this._dataController._dataSource,n=this._dataController.store(),s=n&&n.key(),o=a&&a.remoteOperations()||{},l=Object.keys(o).every(u=>!o[u]);if(s&&(this.option("focusedRowEnabled")&&!1!==this._focusController.isAutoNavigateToFocusedRow()||t)){var d=(s=Array.isArray(s)?s:[s]).filter(u=>!this.columnOption(u,"sortOrder"));d.length&&(r=r||[],l?r.push({selector:a.getDataIndexGetter(),desc:!1}):d.forEach(u=>r.push({selector:u,desc:!1})))}return r}},data:i=>class extends i{_applyChange(e){if(!e||"updateFocusedRow"!==e.changeType)return super._applyChange.apply(this,arguments)}_fireChanged(e){if(super._fireChanged(e),this.option("focusedRowEnabled")&&this._dataSource){var r="update"===e.changeType&&e.repaintChangesOnly&&e.changeTypes&&e.changeTypes.indexOf("remove")>=0;"refresh"===e.changeType&&e.items.length||r?(this._updatePageIndexes(),this._updateFocusedRow(e)):"append"===e.changeType||"prepend"===e.changeType?this._updatePageIndexes():"update"===e.changeType&&e.repaintChangesOnly&&this._updateFocusedRow(e)}}_updatePageIndexes(){var e=this._lastRenderingPageIndex||0,t=this._rowsScrollController?this._rowsScrollController.pageIndex():0;this._lastRenderingPageIndex=t,this._isPagingByRendering=t!==e}isPagingByRendering(){return this._isPagingByRendering}_updateFocusedRow(e){var t=e.operationTypes||{},{reload:r,fullReload:a,pageIndex:n,paging:s}=t,o=this._keyboardNavigationController._isVirtualScrolling(),l=s&&!o,d=this.option("focusedRowKey"),u=this._focusController.isAutoNavigateToFocusedRow();if(r&&!1===n&&!a&&(0,m.$K)(d))this._focusController._navigateToRow(d,!0).done(y=>{y<0&&this._focusController._focusRowByIndex(void 0,t)});else if(l&&u){var f=this.getRowIndexByKey(d),p=this.option("focusedRowIndex");p>=0&&(p===f||!(f>=0))&&this._focusController._focusRowByIndex(p,t)}else l&&!u&&this.getRowIndexByKey(d)<0?this.option("focusedRowIndex",-1):t.fullReload&&this._focusController._focusRowByKeyOrIndex()}getPageIndexByKey(e){var t=this,r=new Y.BH;return t.getGlobalRowIndexByKey(e).done(a=>{r.resolve(a>=0?Math.floor(a/t.pageSize()):-1)}).fail(r.reject),r.promise()}getGlobalRowIndexByKey(e){return this._dataSource.group()?this._calculateGlobalRowIndexByGroupedData(e):this._calculateGlobalRowIndexByFlatData(e)}_calculateGlobalRowIndexByFlatData(e,t,r){var a=this,n=new Y.BH,s=a._dataSource;if(Array.isArray(e)||(i=>"string"==typeof i&&i.startsWith(Uf)&&44===i.length)(e))return n.resolve(-1).promise();var o=a._generateFilterByKey(e);return s.load({filter:a._concatWithCombinedFilter(o),skip:0,take:1}).done(l=>{l.length>0?(o=a._generateOperationFilterByKey(e,l[0],r),s.load({filter:a._concatWithCombinedFilter(o,t),skip:0,take:1,requireTotalCount:!0}).done((d,u)=>{n.resolve(u.totalCount)})):n.resolve(-1)}),n.promise()}_concatWithCombinedFilter(e,t){var r=this.getCombinedFilter();return Te.combineFilters([e,r,t])}_generateBooleanFilter(e,t,r){var{desc:a}=r;switch(!0){case!1===t&&a:return[e,"=",!0];case!1===t&&!a:return[e,"=",null];case!0===t&&!a:case!(0,m.jn)(t)&&a:return[e,"<>",t];default:return}}_generateOperationFilterByKey(e,t,r){var a=this,n=a.option("dateSerializationFormat"),s=a._dataSource.remoteOperations().filtering,o=a._dataSource.remoteOperations().sorting,l=a._generateFilterByKey(e,"<"),d=a._columnsController.getSortDataSourceParameters(!s,!0);if(r){var u=a._columnsController.getGroupDataSourceParameters(!s);u&&(d=d?u.concat(d):u)}return d&&d.slice().reverse().forEach(c=>{var{selector:f,desc:p,compare:g}=c,{getter:w,rawValue:x,safeValue:y}=((i,e,t)=>{var{isRemoteFiltering:r,dateSerializationFormat:a,getSelector:n}=t,{selector:s}=i,o=(0,m.mf)(s)?s:n(s),l=o?o(e):e[s];return{getter:o,rawValue:l,safeValue:r&&(0,m.J_)(l)?hi.Z.serializeDate(l,a):l}})(c,t,{isRemoteFiltering:s,dateSerializationFormat:n,getSelector:q=>a._columnsController.columnOption(q,"selector")});if(l=[[f,"=",y],"and",l],null===x||(0,m.jn)(x)){var E=a._generateBooleanFilter(f,y,p);E&&(l=[E,"or",l])}else{var F,V=p?">":"<";g&&!o?F=q=>"<"===V?g(x,w(q))>=1:g(x,w(q))<=-1:(F=[f,V,y],p||(F=[F,"or",[f,"=",null]])),l=[F,"or",l]}}),l}_generateFilterByKey(e,t){var r=this._dataSource.key(),a=[];if(t||(t="="),Array.isArray(r))for(var n=0;n<r.length;++n){var s=e[r[n]];s&&(a.length>0&&a.push("and"),a.push([r[n],t,s]))}else a=[r,t,e];return a}_getLastItemIndex(){return this.items(!0).length-1}},editing:i=>class extends i{_deleteRowCore(e){var t=super._deleteRowCore.apply(this,arguments),r=this._dataController.getKeyByRowIndex(e);t.done(()=>{var a=this._dataController.getRowIndexByKey(r),n=this._dataController.getVisibleRows();-1===a&&!n.length&&this._focusController._resetFocusedRow()})}}},views:{rowsView:i=>class extends i{_createRow(e){var t=super._createRow.apply(this,arguments);return this.option("focusedRowEnabled")&&e&&this._focusController.isRowFocused(e.key)&&t.addClass(Sd),t}_checkRowKeys(e){if(super._checkRowKeys.apply(this,arguments),this.option("focusedRowEnabled")&&this.option("dataSource")){var t=this._dataController.store();t&&!t.key()&&this._dataController.fireError("E1042","Row focusing")}}_update(e){"updateFocusedRow"===e.changeType?this.option("focusedRowEnabled")&&this._focusController.updateFocusedRow(e):super._update(e)}updateFocusElementTabIndex(e,t){this.option("focusedRowEnabled")?this._setFocusedRowElementTabIndex(t):super.updateFocusElementTabIndex(e)}_setFocusedRowElementTabIndex(e){var t,r=this.option("focusedRowKey"),a=null!==(t=this.option("tabIndex"))&&void 0!==t?t:0,n=this._columnsController,s=this._dataController.getRowIndexByKey(r),o=this.option("focusedColumnIndex"),l=this._findRowElementForTabIndex();if((0,m.$K)(this._scrollToFocusOnResize)||(this._scrollToFocusOnResize=()=>{this.scrollToElementVertically(this._findRowElementForTabIndex()),this.resizeCompleted.remove(this._scrollToFocusOnResize)}),l.attr("tabIndex",a),s>=0&&!e&&(o<0&&(o=0),s+=this._dataController.getRowIndexOffset(),o+=n.getColumnIndexOffset(),this._keyboardNavigationController.setFocusedCellPosition(s,o),this._focusController.isAutoNavigateToFocusedRow())){var d=this._dataController.dataSource(),u=d&&d.operationTypes();u&&!u.paging&&!this._dataController.isPagingByRendering()&&(this.resizeCompleted.remove(this._scrollToFocusOnResize),this.resizeCompleted.add(this._scrollToFocusOnResize))}}_findRowElementForTabIndex(){var e=this.option("focusedRowKey"),t=this._dataController.getRowIndexByKey(e);return(0,b.Z)(this.getRowElement(t>=0?t:0))}scrollToRowElement(e){var t=this._dataController.getRowIndexByKey(e),r=(0,b.Z)(this.getRow(t));return this.scrollToElementVertically(r)}scrollToElementVertically(e){var t=this.getScrollable();if(t&&e.length){var r=t.getScrollElementPosition(e,"vertical");return this.scrollTopPosition(r)}return(new Y.BH).resolve()}scrollTopPosition(e){var t=new Y.BH,r=this.getScrollable();if(r){var a=r.scrollTop(),n=()=>{r.off("scroll",n),t.resolve()};if(e!==a)return r.on("scroll",n),this._dataController.resetFilterApplying(),r.scrollTo({top:e}),t.promise()}return t.resolve()}}}}},W$=Number.MAX_SAFE_INTEGER||9007199254740991;He.registerModule("focus",(0,ye.Z)((0,ye.Z)({},Zh),{extenders:(0,ye.Z)((0,ye.Z)({},Zh.extenders),{controllers:(0,ye.Z)((0,ye.Z)({},Zh.extenders.controllers),{data:i=>class extends(Zh.extenders.controllers.data(i)){changeRowExpand(e,t){if(this.option("focusedRowEnabled")&&Array.isArray(e)&&this.isRowExpanded(e)){var r=this.getController("keyboardNavigation");(!t||!r.isKeyboardEnabled())&&this._isFocusedRowInsideGroup(e)&&this.option("focusedRowKey",e)}return super.changeRowExpand(e,t)}_isFocusedRowInsideGroup(e){var t=this.getController("columns"),r=this.option("focusedRowKey"),a=this.getRowIndexByKey(r),n=a>=0&&this.getVisibleRows()[a],s=t.getGroupDataSourceParameters(!0);if(n)for(var o=0;o<e.length;++o)if((0,Dt.vb)(s[o]&&s[o].selector)(n.data)!==e[o])return!1;return!0}_getGroupPath(e,t){for(var r=[],a=[e];a&&a[0]&&t;){var n=a[0];void 0!==n.key&&r.push(n.key),a=n.items,t--}return r}_expandGroupByPath(e,t,r){var a=new Y.BH;return r++,e.expandRow(t.slice(0,r)).done(()=>{r===t.length?a.resolve():e._expandGroupByPath(e,t,r).done(a.resolve).fail(a.reject)}).fail(a.reject),a.promise()}_calculateGlobalRowIndexByGroupedData(e){var t=this,r=t._dataSource,a=t._generateFilterByKey(e),n=new Y.BH,s=Array.isArray(e),o=r.group();return s?n.resolve(-1).promise():r._grouping._updatePagingOptions?(r.load({filter:t._concatWithCombinedFilter(a),group:o}).done(l=>{if(!l||0===l.length||!(0,m.$K)(l[0].key)||-1===l[0].key)return n.resolve(-1).promise();var d=t._getGroupPath(l[0],o.length);t._expandGroupByPath(t,d,0).done(()=>{t._calculateExpandedRowGlobalIndex(n,e,d,o)}).fail(n.reject)}).fail(n.reject),n.promise()):(t._calculateGlobalRowIndexByFlatData(e,null,!0).done(n.resolve).fail(n.reject),n)}_calculateExpandedRowGlobalIndex(e,t,r,a){var u,n=fs(r,{group:a}),s=this._dataSource,o=this.option("scrolling.mode"),l="virtual"===o||"infinite"===o,d=s.pageSize();s._grouping._updatePagingOptions({skip:0,take:W$},(c,f)=>{(0,J.bY)(c.path,r)&&(u=f)}),this._calculateGlobalRowIndexByFlatData(t,n).done(c=>{var f,p;c<0?e.resolve(-1):(f=(u%d||d)+c-r.length,p=l?0:Math.floor(f/(d-r.length))*r.length,e.resolve(f=u+c+p))}).fail(e.reject)}}})})}));var gv,Ao,K$=be(5582),oI=(0,We.Jj)(),Va="dxDraggable",U$=(0,ce.V4)(Xr.BL,Va),j$=(0,ce.V4)(Xr.pB,Va),q$=(0,ce.V4)(Xr.ut,Va),Y$=(0,ce.V4)(Xr.IO,Va),X$=(0,ce.V4)(Xr.Zu,Va),J$=(0,ce.V4)(Bt.Z.down,Va),Q$=(0,ce.V4)("keydown",Va),mv=i=>({x:i.pageX-(0,b.Z)(oI).scrollLeft(),y:i.pageY-(0,b.Z)(oI).scrollTop()});class dI{constructor(e,t){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=t,"vertical"===e?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(e,t){var r=!1;e.some(a=>{var n=(0,b.Z)(a),s=n.hasClass("dx-overlay-wrapper"),o=n.hasClass("dx-overlay-content");return!(!s&&!o)||(r=this._trySetScrollable(a,t))}),r||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(e){return("auto"===e.css(this._overFlowAttr)||e.hasClass("dx-scrollable-container"))&&e.prop(this._scrollSizeProp)>Math.ceil("width"===this._sizeAttr?(0,oe.dz)(e):(0,oe.Cr)(e))}_trySetScrollable(e,t){var a,r=(0,b.Z)(e),n=this._component.option("scrollSensitivity"),s=this.isScrollable(r);return s&&(n>(a=this._calculateDistanceToBorders(r,t))[this._limitProps.start]?this._preventScroll||(this._scrollSpeed=-this._calculateScrollSpeed(a[this._limitProps.start]),this._$scrollableAtPointer=r):n>a[this._limitProps.end]?this._preventScroll||(this._scrollSpeed=this._calculateScrollSpeed(a[this._limitProps.end]),this._$scrollableAtPointer=r):(s=!1,this._preventScroll=!1)),s}_calculateDistanceToBorders(e,t){var a,r=e.get(0);return r?(a=(0,di.l)(r),{left:t.x-a.left,top:t.y-a.top,right:a.right-t.x,bottom:a.bottom-t.y}):{}}_calculateScrollSpeed(e){var t=this._component,r=t.option("scrollSensitivity"),a=t.option("scrollSpeed");return Math.ceil(((r-e)/r)**2*a)}scrollByStep(){if(this._$scrollableAtPointer&&this._scrollSpeed){if(this._$scrollableAtPointer.hasClass("dx-scrollable-container")){var e=this._$scrollableAtPointer.closest(".dx-scrollable"),t=e.data("dxScrollable")||e.data("dxScrollView");if(t){var r=t.scrollOffset()[this._limitProps.start]+this._scrollSpeed;t.scrollTo({[this._limitProps.start]:r})}}else{var a=this._$scrollableAtPointer[this._scrollValue]()+this._scrollSpeed;this._$scrollableAtPointer[this._scrollValue](a)}var n=this._component._dragMoveArgs;n&&this._component._dragMoveHandler(n)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(e,t){if(!e)return!1;var r=(0,di.l)(e.get(0)),a=r[this._limitProps.start],n=r[this._sizeAttr],s=mv(t),o="width"===this._sizeAttr?s.x:s.y;return o<a||o>a+n}}var a8=nC.inherit({ctor(i){this.callBase(),this._strategy=i},_step(){var i=this._strategy._horizontalScrollHelper,e=this._strategy._verticalScrollHelper;i&&i.scrollByStep(),e&&e.scrollByStep()}}),uI=El.Z.inherit({reset:J.ZT,dragMove:J.ZT,dragEnter:J.ZT,dragLeave:J.ZT,dragEnd(i){return this._getSourceDraggable()._fireRemoveEvent(i),(0,Y.BH)().resolve()},_fireRemoveEvent:J.ZT,_getDefaultOptions(){return(0,N.l)(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),(0,N.l)(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new a8(this),this._horizontalScrollHelper=new dI("horizontal",this),this._verticalScrollHelper=new dI("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset:i=>((0,m.Kn)(i)&&(i={h:i.x,v:i.y}),i=(0,J.Um)(i).map(e=>parseFloat(e)),{left:i[0],top:1===i.length?i[0]:i[1]}),_getNormalizedCursorOffset(i,e){return(0,m.mf)(i)&&(i=i.call(this,e)),this._normalizeCursorOffset(i)},_calculateElementOffset(i){var e,t,{event:r}=i,a=(0,b.Z)(i.itemElement),n=(0,b.Z)(i.dragElement),s=this._dragElementIsCloned(),o=this.option("cursorOffset"),l={left:0,top:0},d=this._initialLocate=(0,oi.jt)(n);return(s||i.initialOffset||o)&&(e=i.initialOffset||a.offset(),o&&(l=this._getNormalizedCursorOffset(o,i),isFinite(l.left)&&(e.left=r.pageX),isFinite(l.top)&&(e.top=r.pageY)),t=n.offset(),e.top-=t.top+(l.top||0)-d.top,e.left-=t.left+(l.left||0)-d.left),e},_initPosition(i){var e=(0,b.Z)(i.dragElement),t=this._calculateElementOffset(i);t&&this._move(t,e),this._startPosition=(0,oi.jt)(e)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(i){return(0,ur.H0)(this.NAME)+(i?"-".concat(i):"")},_getItemsSelector(){return this.option("filter")||""},_$content(){var i=this.$element(),e=i.children(".dx-template-wrapper");return e.length?e:i},_attachEventHandlers(){if(!this.option("disabled")){var i=this._$content(),e=this._getItemsSelector(),t=this.option("allowMoveByClick"),r={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(a,n)=>{var s=this.option("group"),o=this._getSourceDraggable().option("group"),l=this._getScrollable(a);return!this._verticalScrollHelper.isOutsideScrollable(l,n)&&!this._horizontalScrollHelper.isOutsideScrollable(l,n)&&o&&o===s}};t&&(i=this._getArea(),k.Z.on(i,J$,r,this._pointerDownHandler.bind(this))),">"===e[0]&&(e=e.slice(1)),k.Z.on(i,U$,e,r,this._dragStartHandler.bind(this)),k.Z.on(i,j$,r,this._dragMoveHandler.bind(this)),k.Z.on(i,q$,r,this._dragEndHandler.bind(this)),k.Z.on(i,Y$,r,this._dragEnterHandler.bind(this)),k.Z.on(i,X$,r,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&k.Z.on(i,Q$,this._keydownHandler.bind(this))}},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(i,e){return{container:(0,rt.u)(e),model:{itemData:this.option("itemData"),itemElement:(0,rt.u)(i)}}},_createDragElement(i){var e=i,t=this.option("clone"),r=this._getContainer(),a=this.option("dragTemplate");return a?(a=this._getTemplate(a),e=(0,b.Z)("<div>").appendTo(r),a.render(this._getDragTemplateArgs(i,e))):t&&(e=(0,b.Z)("<div>").appendTo(r),i.clone().css({width:i.css("width"),height:i.css("height")}).appendTo(e)),e.toggleClass(this._addWidgetPrefix("clone"),e.get(0)!==i.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){k.Z.off(this._$content(),".".concat(Va)),k.Z.off(this._getArea(),".".concat(Va))},_move(i,e){(0,oi.pB)(e||this._$dragElement,i)},_getDraggableElement(i){var e=this._getSourceElement();if(e)return e;if(this.option("allowMoveByClick"))return this.$element();var r=(0,b.Z)(i&&i.target),a=this._getItemsSelector();if(">"===a[0]){var n=this._$content().find(a);n.is(r)||(r=r.closest(n))}return r},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(i){if(!(0,ce.r1)(i)){var e={},t=this.$element(),r=this.option("dragDirection");("horizontal"===r||"both"===r)&&(e.left=i.pageX-t.offset().left+(0,oi.jt)(t).left-(0,oe.dz)(t)/2),("vertical"===r||"both"===r)&&(e.top=i.pageY-t.offset().top+(0,oi.jt)(t).top-(0,oe.Cr)(t)/2),this._move(e,t),this._getAction("onDragMove")(this._getEventArgs(i))}},_isValidElement(i,e){var t=this.option("handle"),r=(0,b.Z)(i.originalEvent&&i.originalEvent.target);return!(t&&!r.closest(t).length||!e.length||e.is(".dx-state-disabled, .dx-state-disabled *"))},_dragStartHandler(i){var e=this._getDraggableElement(i);if(this.dragInProgress=!0,this._isValidElement(i,e)){if(!this._$sourceElement){var t=this._getDragStartArgs(i,e);if(this._getAction("onDragStart")(t),t.cancel)return void(i.cancel=!0);this.option("itemData",t.itemData),this._setSourceDraggable(),this._$sourceElement=e;var r=e.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),r=this._getDraggableElementOffset(r.left,r.top));var a=this._$dragElement=this._createDragElement(e);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(a.children());var n="fixed"===a.css("position");this._initPosition((0,N.l)({},t,{dragElement:a.get(0),initialOffset:n&&r})),this._getAction("onDraggableElementShown")((0,ye.Z)((0,ye.Z)({},t),{dragElement:a}));var s=this._getArea(),o=this._getAreaOffset(s),l=this._getBoundOffset(),d=(0,oe.Y_)(s),u=(0,oe.zp)(s),c=(0,oe.dz)(a),f=(0,oe.Cr)(a),p=a.offset().left-o.left,g=a.offset().top-o.top;s.length&&(i.maxLeftOffset=p-l.left,i.maxRightOffset=d-p-c-l.right,i.maxTopOffset=g-l.top,i.maxBottomOffset=u-g-f-l.bottom),this.option("autoScroll")&&this._startAnimator()}}else i.cancel=!0},_getAreaOffset:i=>i&&In.Z.offset(i)||{left:0,top:0},_toggleDraggingClass(i){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),i)},_toggleDragSourceClass(i,e){var t=e||this._$sourceElement;t&&t.toggleClass(this._addWidgetPrefix("source"),i)},_setGestureCoverCursor(i){(0,b.Z)(".".concat("dx-gesture-cover")).css("cursor",i.css("cursor"))},_getBoundOffset(){var i=this.option("boundOffset");return(0,m.mf)(i)&&(i=i.call(this)),(0,ma.$b)(i)},_getArea(){var i=this.option("boundary");return(0,m.mf)(i)&&(i=i.call(this)),(0,b.Z)(i)},_getContainer(){var i=this.option("container");return void 0===i&&(i=(0,rh.S3)()),(0,b.Z)(i)},_getDraggableElementOffset(i,e){var t,r,a,n,s=this._initScrollTop,o=this._initScrollLeft,l=this._getScrollableScrollTop(),d=this._getScrollableScrollLeft(),u=(0,b.Z)(this.element()).css("position"),f={left:(null!==(r=null===(t=this._startPosition)||void 0===t?void 0:t.left)&&void 0!==r?r:0)+i,top:(null!==(n=null===(a=this._startPosition)||void 0===a?void 0:a.top)&&void 0!==n?n:0)+e};return"fixed"===u||this._hasClonedDraggable()?f:{left:(0,m.kE)(d)?f.left+d-o:f.left,top:(0,m.kE)(l)?f.top+l-s:f.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(i){if(this._dragMoveArgs=i,this._$dragElement){var e=this._getDraggableElementOffset(i.offset.x,i.offset.y);this._move(e),this._updateScrollable(i);var t=this._getEventArgs(i);this._getAction("onDragMove")(t),!0!==t.cancel&&this._getTargetDraggable().dragMove(i,scrollBy)}else i.cancel=!0},_updateScrollable(i){if(this.option("autoScroll")){var e=mv(i),t=it.Z.elementsFromPoint(e.x,e.y,this.$element().get(0));this._verticalScrollHelper.updateScrollable(t,e),this._horizontalScrollHelper.updateScrollable(t,e)}},_getScrollable(i){var e;return i.parents().toArray().some(t=>{var r=(0,b.Z)(t);return!(!this._horizontalScrollHelper.isScrollable(r)&&!this._verticalScrollHelper.isScrollable(r)||(e=r,0))}),e},_getScrollableScrollTop(){var i,e;return null!==(e=null===(i=this._getScrollable((0,b.Z)(this.element())))||void 0===i?void 0:i.scrollTop())&&void 0!==e?e:0},_getScrollableScrollLeft(){var i,e;return null!==(e=null===(i=this._getScrollable((0,b.Z)(this.element())))||void 0===i?void 0:i.scrollLeft())&&void 0!==e?e:0},_defaultActionArgs(){var i=this.callBase.apply(this,arguments),e=this.option("component");return e&&(i.component=e,i.element=e.element()),i},_getEventArgs(i){var e=this._getSourceDraggable(),t=this._getTargetDraggable();return{event:i,itemData:e.option("itemData"),itemElement:(0,rt.u)(e._$sourceElement),fromComponent:e.option("component")||e,toComponent:t.option("component")||t,fromData:e.option("data"),toData:t.option("data")}},_getDragStartArgs(i,e){var t=this._getEventArgs(i);return{event:t.event,itemData:t.itemData,itemElement:e,fromData:t.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(i){var e=(0,Y.BH)(),t=this._getEventArgs(i),r=this._getEventArgs(i),a=this._getTargetDraggable(),n=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(t)}finally{(0,Y.gx)((0,Y.p4)(t.cancel)).done(s=>{if(!s&&(a!==this&&a._getAction("onDrop")(r),!r.cancel))return n=!1,void(0,Y.gx)((0,Y.p4)(a.dragEnd(t))).always(e.resolve);e.resolve()}).fail(e.resolve),e.done(()=>{n&&this._revertItemToInitialPosition(),this._resetDragOptions(a)})}},_isTargetOverAnotherDraggable(i){var e=this._getSourceDraggable();if(this===e)return!1;var t=e._$dragElement,r=e.$element(),a=this.$element(),n=mv(i),o=it.Z.elementsFromPoint(n.x,n.y,this.element()).filter(c=>{var f=(0,b.Z)(c);return!!f.hasClass(this._addWidgetPrefix())&&!f.closest(t).length})[0],l=this._getSourceElement(),d=o===r.get(0),u=(0,b.Z)(o).closest(l).length;return!o||o===a.get(0)&&!d&&!u},_dragEnterHandler(i){this._fireDragEnterEvent(i),this._isTargetOverAnotherDraggable(i)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(i)},_dragLeaveHandler(i){this._fireDragLeaveEvent(i),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(i)},_keydownHandler(i){this.dragInProgress&&"Escape"===i.key&&this._keydownEscapeHandler(i)},_keydownEscapeHandler(i){if(this._getSourceElement()){var t=this._getEventArgs(i);if(this._getAction("onDragCancel")(t),!t.cancel){this.dragInProgress=!1,Ao?._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();var r=this._getTargetDraggable();this._resetDragOptions(r),this._attachEventHandlers()}}},_getAction(i){return this["_".concat(i,"Action")]||this._createActionByOption(i)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new K$.s}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());var i=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),e=this._getTemplateByOption("contentTemplate");e&&(0,b.Z)(e.render({container:this.element(),transclude:i}))},_optionChanged(i){var{name:e}=i;switch(e){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this["_".concat(e,"Action")]=this._createActionByOption(e);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(i)}},_getTargetDraggable(){return gv||this},_getSourceDraggable(){return Ao||this},_setTargetDraggable(){var i=this.option("group"),e=this._getSourceDraggable();i&&i===e.option("group")&&(gv=this)},_setSourceDraggable(){Ao=this},_resetSourceDraggable(){Ao=null},_resetTargetDraggable(){gv=null},_resetDragOptions(i){this.reset(),i.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(i){var e=this._getEventArgs(i);this._getAction("onDragEnter")(e)},_fireDragLeaveEvent(i){var e=this._getEventArgs(i);this._getAction("onDragLeave")(e)}});(0,It.Z)(Va,uI);const n8=uI;var hI=(0,We.Jj)(),cI="placeholder",pI=i=>(0,b.Z)(i).is(":visible"),l8=(i,e)=>{var t,r;if(i){var a=(null===(t=e.to)||void 0===t?void 0:t.left)||0,n=(null===(r=e.to)||void 0===r?void 0:r.top)||0;i.style.transform="translate(".concat(a,"px,").concat(n,"px)"),i.style.transition=Yt.Z.off?"":"transform ".concat(e.duration,"ms ").concat(e.easing)}},d8=i=>{i&&(i.style.transform="",i.style.transition="")},fI=n8.inherit({_init(){this.callBase(),this._sourceScrollHandler=this._handleSourceScroll.bind(this),this._sourceScrollableInfo=null},_getDefaultOptions(){return(0,N.l)(this.callBase(),{clone:!0,filter:"> *",itemOrientation:"vertical",dropFeedbackMode:"push",allowDropInsideItem:!1,allowReordering:!0,moveItemOnDrop:!1,onDragChange:null,onAdd:null,onRemove:null,onReorder:null,onPlaceholderPrepared:null,animation:{type:"slide",duration:300,easing:"ease"},fromIndex:null,toIndex:null,dropInsideItem:!1,itemPoints:null,fromIndexOffset:0,offset:0,autoUpdate:!1,draggableElementSize:0})},reset(){this.option({dropInsideItem:!1,toIndex:null,fromIndex:null,itemPoints:null,fromIndexOffset:0,draggableElementSize:0}),this._$placeholderElement&&this._$placeholderElement.remove(),this._$placeholderElement=null,!this._isIndicateMode()&&this._$modifiedItem&&(this._$modifiedItem.css("marginBottom",this._modifiedItemMargin),this._$modifiedItem=null)},_getPrevVisibleItem:(i,e)=>i.slice(0,e).reverse().filter(pI)[0],_dragStartHandler(i){if(this.callBase.apply(this,arguments),!0!==i.cancel){var e=this._getSourceElement();this._updateItemPoints(),this._subscribeToSourceScroll(i),this.option("fromIndex",this._getElementIndex(e)),this.option("fromIndexOffset",this.option("offset"))}},_subscribeToSourceScroll(i){var e=this._getScrollable((0,b.Z)(i.target));e&&(this._sourceScrollableInfo={element:e,scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop()},k.Z.off(e,"scroll",this._sourceScrollHandler),k.Z.on(e,"scroll",this._sourceScrollHandler))},_unsubscribeFromSourceScroll(){this._sourceScrollableInfo&&(k.Z.off(this._sourceScrollableInfo.element,"scroll",this._sourceScrollHandler),this._sourceScrollableInfo=null)},_handleSourceScroll(i){var e=this._sourceScrollableInfo;e&&["scrollLeft","scrollTop"].forEach(t=>{i.target[t]!==e[t]&&(this._correctItemPoints(i.target[t]-e[t]),this._movePlaceholder(),e[t]=i.target[t])})},_dragEnterHandler(i){if(this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&(this._subscribeToSourceScroll(i),this._updateItemPoints(),this.option("fromIndex",-1),!this._isIndicateMode())){var e=this.option("itemPoints"),t=e[e.length-1];if(t){var r=this.$element(),a=this._getSourceElement(),n=this._isVerticalOrientation(),s=n?(0,oe.zp)(a,!0):(0,oe.Y_)(a,!0),o=r.get(0)[n?"scrollHeight":"scrollWidth"],l=r.get(0)[n?"scrollTop":"scrollLeft"],d=n?"top":"left",u=t[d],f=r.offset()[d]+o-l-u;if(f<s&&n){var p=this._getItems(),g=(0,b.Z)(this._getPrevVisibleItem(p));this._$modifiedItem=g,this._modifiedItemMargin=g.get(0).style.marginBottom,g.css("marginBottom",s-f);var w=g.closest(".dx-sortable"),x=w.data("dxScrollable")||w.data("dxScrollView");x&&x.update()}}}},_dragLeaveHandler(){this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&this._unsubscribeFromSourceScroll()},dragEnter(){this!==this._getTargetDraggable()&&this.option("toIndex",-1)},dragLeave(){this!==this._getTargetDraggable()&&this.option("toIndex",this.option("fromIndex"))},_allowDrop(i){var t=this._getTargetDraggable().$element(),r=this._getScrollable(t);if(r){var{left:a,right:n,top:s,bottom:o}=function u8(i){var e=i.offset(),{style:t}=i[0],r=parseFloat(t.paddingLeft)||0,a=parseFloat(t.paddingRight)||0,n=parseFloat(t.paddingTop)||0,s=i[0].clientWidth-(r+a),o=(0,oe.Cr)(i),l=e.left+r,d=e.top+n;return{left:l,right:l+s,top:d,bottom:d+o}}(r),l=this.option("toIndex"),d=this.option("itemPoints"),u=d?.filter(f=>f.index===l)[0];if(u&&void 0!==u.top)return this._isVerticalOrientation()?s<=Math.ceil(u.top)&&Math.floor(u.top)<=o:a<=Math.ceil(u.left)&&Math.floor(u.left)<=n}return!0},dragEnd(i){this._unsubscribeFromSourceScroll();var o,l,e=this._getSourceElement(),t=this._getSourceDraggable(),r=t.NAME!==this.NAME,a=this.option("toIndex"),{event:n}=i,s=this._allowDrop(n);return null!==a&&a>=0&&s&&(t!==this&&((o=this._fireAddEvent(n))||(l=this._fireRemoveEvent(n))),r&&(0,oi.Kx)(e),this.option("moveItemOnDrop")&&!o&&this._moveItem(e,a,l),t===this)?this._fireReorderEvent(n):(0,Y.BH)().resolve()},dragMove(i){var e=this.option("itemPoints");if(e){for(var s,t=this._isVerticalOrientation(),r=t?"top":"left",a=t?i.pageY:i.pageX,n=this.option("rtlEnabled"),o=e.length-1;o>=0;o--){var l=e[o+1]&&(e[o][r]+e[o+1][r])/2;if(!(!t&&n?a>l:l>a)&&void 0!==l)break;s=e[o]}s&&(this._updatePlaceholderPosition(i,s),this._verticalScrollHelper.isScrolling()&&this._isIndicateMode()&&this._movePlaceholder())}},_isIndicateMode(){return"indicate"===this.option("dropFeedbackMode")||this.option("allowDropInsideItem")},_createPlaceholder(){var i;return this._isIndicateMode()&&(i=(0,b.Z)("<div>").addClass(this._addWidgetPrefix(cI)).insertBefore(this._getSourceDraggable()._$dragElement)),this._$placeholderElement=i,i},_getItems(){var i=this._getItemsSelector();return this._$content().find(i).not(".".concat(this._addWidgetPrefix(cI))).not(".".concat(this._addWidgetPrefix("clone"))).toArray()},_allowReordering(){return this._getSourceDraggable()!==this._getTargetDraggable()||this.option("allowReordering")},_isValidPoint(i,e,t){var r=this.option("allowDropInsideItem");return!!(t||this._allowReordering()||0===i&&r)&&(!this._isIndicateMode()||-1===e||i!==e&&(t||i!==e+1))},_getItemPoints(){var e,t,r,i=[],a=this.option("rtlEnabled"),n=this._isVerticalOrientation(),s=this._getItems(),o=s.filter(pI),l=o.length,d=this._getDraggableElement(),u=o.indexOf(d.get(0));if(l){for(var c=0;c<=l;c++){var f=!n&&a^c===l,p=n&&c===l;c<l&&(t=(e=(0,b.Z)(o[c])).offset(),r=(0,oe.Y_)(e)),i.push({dropInsideItem:!1,left:t.left+(f?r:0),top:t.top+(p?i[c-1].height:0),index:c===l?s.length:s.indexOf(e.get(0)),$item:e,width:(0,oe.Y_)(e),height:(0,oe.zp)(e),isValid:this._isValidPoint(c,u)})}if(this.option("allowDropInsideItem")){var g=i;i=[];for(var w=0;w<g.length;w++)i.push(g[w]),g[w+1]&&i.push((0,N.l)({},g[w],{dropInsideItem:!0,top:Math.floor((g[w].top+g[w+1].top)/2),left:Math.floor((g[w].left+g[w+1].left)/2),isValid:this._isValidPoint(w,u,!0)}))}}else i.push({dropInsideItem:!1,index:0,isValid:!0});return i},_updateItemPoints(i){(i||this.option("autoUpdate")||!this.option("itemPoints"))&&this.option("itemPoints",this._getItemPoints())},_correctItemPoints(i){var e=this.option("itemPoints");if(i&&e&&!this.option("autoUpdate")){var r=this._isVerticalOrientation()?"top":"left";e.forEach(a=>{a[r]-=i})}},_getElementIndex(i){return this._getItems().indexOf(i.get(0))},_getDragTemplateArgs(i){var e=this.callBase.apply(this,arguments);return e.model.fromIndex=this._getElementIndex(i),e},_togglePlaceholder(i){this._$placeholderElement&&this._$placeholderElement.toggle(i)},_isVerticalOrientation(){return"vertical"===this.option("itemOrientation")},_normalizeToIndex(i,e){var t=this._getSourceDraggable()!==this._getTargetDraggable(),r=this._getActualFromIndex();return null===i?r:Math.max(t||r>=i||e?i:i-1,0)},_updatePlaceholderPosition(i,e){var t=this._getSourceDraggable(),r=this._normalizeToIndex(e.index,e.dropInsideItem),a=(0,N.l)(this._getEventArgs(i),{toIndex:r,dropInsideItem:e.dropInsideItem});e.isValid&&this._getAction("onDragChange")(a),!a.cancel&&e.isValid?(this.option({dropInsideItem:e.dropInsideItem,toIndex:e.index}),this._getAction("onPlaceholderPrepared")((0,N.l)(this._getEventArgs(i),{placeholderElement:(0,rt.u)(this._$placeholderElement),dragElement:(0,rt.u)(t._$dragElement)})),this._updateItemPoints()):e.isValid||this.option({dropInsideItem:!1,toIndex:null})},_makeWidthCorrection(i,e){if(this._$scrollable=this._getScrollable(i),this._$scrollable){var t=(0,oe.dz)(this._$scrollable),r=this._$scrollable.offset().left-i.offset().left,a=(0,oe.Y_)(i)-r-t;r>0&&(e-=r),a>0&&(e-=a)}return e},_updatePlaceholderSizes(i,e){var t=this.option("dropInsideItem"),r=(0,b.Z)(e),a=this._isVerticalOrientation(),n="",s="";i.toggleClass(this._addWidgetPrefix("placeholder-inside"),t),(a||t)&&(n=(0,oe.Y_)(r)),(!a||t)&&(s=(0,oe.zp)(r)),n=this._makeWidthCorrection(r,n),i.css({width:n,height:s})},_moveItem(i,e,t){var r,a=this._getItems(),n=a[e],s=this._getSourceDraggable();t&&(i=i.clone(),s._toggleDragSourceClass(!1,i)),n||(r=a[e-1]),this._moveItemCore(i,n,r)},_moveItemCore(i,e,t){e||t?t?i.insertAfter((0,b.Z)(t)):i.insertBefore((0,b.Z)(e)):i.appendTo(this.$element())},_getDragStartArgs(i,e){return(0,N.l)(this.callBase.apply(this,arguments),{fromIndex:this._getElementIndex(e)})},_getEventArgs(i){var e=this._getSourceDraggable(),t=this._getTargetDraggable(),r=t.option("dropInsideItem");return(0,N.l)(this.callBase.apply(this,arguments),{fromIndex:e.option("fromIndex"),toIndex:this._normalizeToIndex(t.option("toIndex"),r),dropInsideItem:r})},_optionChanged(i){var{name:e}=i;switch(e){case"onDragChange":case"onPlaceholderPrepared":case"onAdd":case"onRemove":case"onReorder":this["_".concat(e,"Action")]=this._createActionByOption(e);break;case"itemOrientation":case"allowDropInsideItem":case"moveItemOnDrop":case"dropFeedbackMode":case"itemPoints":case"animation":case"allowReordering":case"fromIndexOffset":case"offset":case"draggableElementSize":case"autoUpdate":break;case"fromIndex":[!1,!0].forEach(t=>{var r=t?i.value:i.previousValue;if(null!==r){var a=(0,b.Z)(this._getItems()[r]);this._toggleDragSourceClass(t,a)}});break;case"dropInsideItem":this._optionChangedDropInsideItem(i);break;case"toIndex":this._optionChangedToIndex(i);break;default:this.callBase(i)}},_optionChangedDropInsideItem(){this._isIndicateMode()&&this._$placeholderElement&&this._movePlaceholder()},_isPositionVisible(i){var t,e=this.$element();if("hidden"!==e.css("overflow")?t=e.get(0):e.parents().each(function(){if("visible"!==(0,b.Z)(this).css("overflow"))return t=this,!1}),t){var r=(0,di.l)(t),a=this._isVerticalOrientation(),n=a?"top":"left",o=a?hI.pageYOffset:hI.pageXOffset;if(i[n]<r[n]+o||i[n]>r[a?"bottom":"right"]+o)return!1}return!0},_optionChangedToIndex(i){var e=i.value;if(this._isIndicateMode()){var t=null!==e&&e>=0;this._togglePlaceholder(t),t&&this._movePlaceholder()}else this._moveItems(i.previousValue,i.value,i.fullUpdate)},update(){if(null!==this.option("fromIndex")||null!==this.option("toIndex")){this._updateItemPoints(!0),this._updateDragSourceClass();var i=this.option("toIndex");this._optionChangedToIndex({value:i,fullUpdate:!0})}},_updateDragSourceClass(){var i=this._getActualFromIndex(),e=(0,b.Z)(this._getItems()[i]);e.length&&(this._$sourceElement=e,this._toggleDragSourceClass(!0,e))},_makeLeftCorrection(i){var e=this._$scrollable;if(e&&this._isVerticalOrientation()){var t=e.offset().left-i;t>0&&(i+=t)}return i},_movePlaceholder(){var i=this._$placeholderElement||this._createPlaceholder();if(i){var e=this._getItems(),t=this.option("toIndex"),r=this._isVerticalOrientation(),a=this.option("rtlEnabled"),n=this.option("dropInsideItem"),s=null,o=e[t];if(o){var l=(0,b.Z)(o);s=l.offset(),!r&&a&&!n&&(s.left+=(0,oe.Y_)(l,!0))}else{var d=o=this._getPrevVisibleItem(e,t);d&&(s=(0,b.Z)(d).offset(),r?s.top+=(0,oe.zp)(d,!0):a||(s.left+=(0,oe.Y_)(d,!0)))}if(this._updatePlaceholderSizes(i,o),s&&!this._isPositionVisible(s)&&(s=null),s){var u=r&&t===e.length,c=(0,oe.zp)(i);s.left=this._makeLeftCorrection(s.left),s.top=u&&s.top>=c?s.top-c:s.top,this._move(s,i)}i.toggle(!!s)}},_getPositions(i,e,t,r){for(var a=[],n=0;n<i.length;n++){var s=0;null!==r&&null!==t?(-1===t?n>=r&&(s=e):-1===r?n>t&&(s=-e):t<r?n>t&&n<r&&(s=-e):t>r&&n>=r&&n<t&&(s=e),a.push(s)):a.push(s)}return a},_getDraggableElementSize(i){var e=this._getDraggableElement(),t=this.option("draggableElementSize");return t||(t=i?((0,oe.zp)(e)+(0,oe.zp)(e,!0))/2:((0,oe.Y_)(e)+(0,oe.Y_)(e,!0))/2,this.option("autoUpdate")||this.option("draggableElementSize",t)),t},_getActualFromIndex(){var{fromIndex:i,fromIndexOffset:e,offset:t}=this.option();return null==i?null:i+e-t},_moveItems(i,e,t){for(var r=this._getActualFromIndex(),a=this._isVerticalOrientation(),n=a?"top":"left",s=this._getDraggableElementSize(a),o=this._getItems(),l=this._getPositions(o,s,r,i),d=this._getPositions(o,s,r,e),u=this.option("animation"),c=this.option("rtlEnabled"),f=0;f<o.length;f++){var p=o[f],g=l[f],w=d[f];null===e||null===r?d8(p):(g!==w||t&&w)&&l8(p,(0,N.l)({},u,{to:{[n]:!a&&c?-w:w}}))}},_toggleDragSourceClass(i,e){var t=e||this._$sourceElement;this.callBase.apply(this,arguments),this._isIndicateMode()||t&&t.toggleClass(this._addWidgetPrefix("source-hidden"),i)},_dispose(){this.reset(),this.callBase()},_fireAddEvent(i){var e=this._getEventArgs(i);return this._getAction("onAdd")(e),e.cancel},_fireRemoveEvent(i){var e=this._getSourceDraggable(),t=this._getEventArgs(i);return e._getAction("onRemove")(t),t.cancel},_fireReorderEvent(i){var e=this._getEventArgs(i);return this._getAction("onReorder")(e),e.promise||(0,Y.BH)().resolve()}});(0,It.Z)("dxSortable",fI);const h8=fI;var v8={defaultOptions:()=>({rowDragging:{showDragIcons:!0,dropFeedbackMode:"indicate",allowReordering:!1,allowDropInsideItem:!1}}),extenders:{views:{rowsView:i=>class extends i{init(){super.init.apply(this,arguments),this._updateHandleColumn()}optionChanged(e){"rowDragging"===e.name&&(this._updateHandleColumn(),this._invalidate(!0,!0),e.handled=!0),super.optionChanged.apply(this,arguments)}_allowReordering(){var e=this.option("rowDragging");return!(!e||!(e.allowReordering||e.allowDropInsideItem||e.group))}_updateHandleColumn(){var e=this.option("rowDragging"),t=this._allowReordering(),r=this._columnsController,a=t&&e.showDragIcons;r?.addCommandColumn({type:"drag",command:"drag",visibleIndex:-2,alignment:"center",elementAttr:[{name:"dx-drag-cell",value:""}],cssClass:"dx-command-drag",width:"auto",cellTemplate:this._getHandleTemplate(),visible:a}),r?.columnOption("type:drag","visible",a)}_renderContent(){var e=this.option("rowDragging"),t=this._allowReordering(),r=super._renderContent.apply(this,arguments),a=this._isFixedTableRendering,n=a?"_sortableFixed":"_sortable",s=a?"_sortable":"_sortableFixed",o=u=>{var c;null===(c=this._sortableFixed)||void 0===c||c.$element().css("pointerEvents",u?"auto":"")},l=".dx-row:not(.dx-freespace-row):not(.dx-virtual-row):not(.dx-header-row):not(.dx-footer-row)",d=this.option("dataRowTemplate")?"> table > tbody".concat(l):"> table > tbody > ".concat(l);return(t||this[n])&&r.length&&(this[n]=this._createComponent(r,h8,(0,N.l)({component:this.component,contentTemplate:null,filter:d,cursorOffset:u=>{var{event:c}=u,f=(0,b.Z)(this.element()).offset();return{x:c.pageX-f.left}},onDraggableElementShown:u=>{if(!e.dragTemplate){var f=(0,b.Z)(u.dragElement).children(".dx-widget").data(this.component.NAME);this._synchronizeScrollLeftPosition(f)}},dragTemplate:this._getDraggableRowTemplate(),handle:e.showDragIcons&&".".concat("dx-command-drag"),dropFeedbackMode:"indicate"},e,{onDragStart:u=>{var c,f;null===(c=this.getController("keyboardNavigation"))||void 0===c||c._resetFocusedCell();var p=u.component.getVisibleRows()[u.fromIndex];u.itemData=p&&p.data,u.cancel=!t||!(p&&"data"===p.rowType),null===(f=e.onDragStart)||void 0===f||f.call(e,u)},onDragEnter:()=>{o(!0)},onDragLeave:()=>{o(!1)},onDragEnd:u=>{var c;o(!1),null===(c=e.onDragEnd)||void 0===c||c.call(e,u)},onAdd:u=>{var c;o(!1),null===(c=e.onAdd)||void 0===c||c.call(e,u)},dropFeedbackMode:e.dropFeedbackMode,onOptionChanged:u=>{this._sortableFixed&&("fromIndex"===u.name||"toIndex"===u.name)&&this[s].option(u.name,u.value)}})),r.toggleClass("dx-scrollable-container",a),r.toggleClass("dx-sortable-without-handle",t&&!e.showDragIcons)),r}_renderCore(e){super._renderCore.apply(this,arguments),e&&"update"===e.changeType&&e.repaintChangesOnly&&Te.isVirtualRowRendering(this)&&(0,J.Su)(()=>{this._updateSortable()})}_updateSortable(){var e=this._dataController.getRowIndexOffset(),t=e-this._previousOffset;[this._sortable,this._sortableFixed].forEach(r=>{var a=r?.option("toIndex");(0,m.$K)(a)&&(0,m.$K)(this._previousOffset)&&r?.option("toIndex",a-t),r?.option("offset",e),r?.update()}),this._previousOffset=e}_resizeCore(){super._resizeCore.apply(this,arguments),this._updateSortable()}_getDraggableGridOptions(e){var t=this.option(),r=this.getColumns(),a=(0,b.Z)(this.getRowElement(e.rowIndex));return{dataSource:[{id:1,parentId:0}],showBorders:!0,showColumnHeaders:!1,scrolling:{useNative:!1,showScrollbar:"never"},pager:{visible:!1},loadingTimeout:null,columnFixing:t.columnFixing,columnAutoWidth:t.columnAutoWidth,showColumnLines:t.showColumnLines,columns:r.map(n=>({width:n.width||n.visibleWidth,fixed:n.fixed,fixedPosition:n.fixedPosition})),onRowPrepared:n=>{var s=n.component.getView("rowsView");(0,b.Z)(n.rowElement).replaceWith(a.eq(s._isFixedTableRendering?1:0).clone())}}}_synchronizeScrollLeftPosition(e){var t=e?.getScrollable();t?.scrollTo({x:this._scrollLeft})}_getDraggableRowTemplate(){return e=>{var t=this.component.$element(),r=(0,b.Z)("<div>");(0,oe.cl)(r,(0,oe.dz)(t));var a=this._dataController.items(),s=this._getDraggableGridOptions(a&&a[e.fromIndex]);return this._createComponent(r,this.component.NAME,s),r.find(".dx-gridbase-container").children(":not(.".concat(this.addWidgetPrefix("rowsview"),")")).hide(),r.addClass(this.addWidgetPrefix("dragview")),r}}_getHandleTemplate(){return(i=>(e,t)=>{var r=(0,b.Z)(e);if("data"===t.rowType)return r.addClass("dx-cell-focus-disabled"),(0,b.Z)("<span>").addClass(i("drag-icon"));Te.setEmptyText(r)})(e=>this.addWidgetPrefix(e))}}}}};He.registerModule("rowDragging",v8);const g8=dR;var ct=be(9784),he=be(2173);let m8=(()=>{class i extends ct.Ay{constructor(t,r,a,n,s,o,l,d){super(t,r,a,n,l,d),this._watcherHelper=n,this._idh=s,this._createEventEmitters([{subscribe:"adaptiveDetailRowPreparing",emit:"onAdaptiveDetailRowPreparing"},{subscribe:"cellClick",emit:"onCellClick"},{subscribe:"cellDblClick",emit:"onCellDblClick"},{subscribe:"cellHoverChanged",emit:"onCellHoverChanged"},{subscribe:"cellPrepared",emit:"onCellPrepared"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"contextMenuPreparing",emit:"onContextMenuPreparing"},{subscribe:"dataErrorOccurred",emit:"onDataErrorOccurred"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"editCanceled",emit:"onEditCanceled"},{subscribe:"editCanceling",emit:"onEditCanceling"},{subscribe:"editingStart",emit:"onEditingStart"},{subscribe:"editorPrepared",emit:"onEditorPrepared"},{subscribe:"editorPreparing",emit:"onEditorPreparing"},{subscribe:"exporting",emit:"onExporting"},{subscribe:"focusedCellChanged",emit:"onFocusedCellChanged"},{subscribe:"focusedCellChanging",emit:"onFocusedCellChanging"},{subscribe:"focusedRowChanged",emit:"onFocusedRowChanged"},{subscribe:"focusedRowChanging",emit:"onFocusedRowChanging"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"initNewRow",emit:"onInitNewRow"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"rowClick",emit:"onRowClick"},{subscribe:"rowCollapsed",emit:"onRowCollapsed"},{subscribe:"rowCollapsing",emit:"onRowCollapsing"},{subscribe:"rowDblClick",emit:"onRowDblClick"},{subscribe:"rowExpanded",emit:"onRowExpanded"},{subscribe:"rowExpanding",emit:"onRowExpanding"},{subscribe:"rowInserted",emit:"onRowInserted"},{subscribe:"rowInserting",emit:"onRowInserting"},{subscribe:"rowPrepared",emit:"onRowPrepared"},{subscribe:"rowRemoved",emit:"onRowRemoved"},{subscribe:"rowRemoving",emit:"onRowRemoving"},{subscribe:"rowUpdated",emit:"onRowUpdated"},{subscribe:"rowUpdating",emit:"onRowUpdating"},{subscribe:"rowValidating",emit:"onRowValidating"},{subscribe:"saved",emit:"onSaved"},{subscribe:"saving",emit:"onSaving"},{subscribe:"selectionChanged",emit:"onSelectionChanged"},{subscribe:"toolbarPreparing",emit:"onToolbarPreparing"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"allowColumnReorderingChange"},{emit:"allowColumnResizingChange"},{emit:"autoNavigateToFocusedRowChange"},{emit:"cacheEnabledChange"},{emit:"cellHintEnabledChange"},{emit:"columnAutoWidthChange"},{emit:"columnChooserChange"},{emit:"columnFixingChange"},{emit:"columnHidingEnabledChange"},{emit:"columnMinWidthChange"},{emit:"columnResizingModeChange"},{emit:"columnsChange"},{emit:"columnWidthChange"},{emit:"customizeColumnsChange"},{emit:"dataRowTemplateChange"},{emit:"dataSourceChange"},{emit:"dateSerializationFormatChange"},{emit:"disabledChange"},{emit:"editingChange"},{emit:"elementAttrChange"},{emit:"errorRowEnabledChange"},{emit:"exportChange"},{emit:"filterBuilderChange"},{emit:"filterBuilderPopupChange"},{emit:"filterPanelChange"},{emit:"filterRowChange"},{emit:"filterSyncEnabledChange"},{emit:"filterValueChange"},{emit:"focusedColumnIndexChange"},{emit:"focusedRowEnabledChange"},{emit:"focusedRowIndexChange"},{emit:"focusedRowKeyChange"},{emit:"groupingChange"},{emit:"groupPanelChange"},{emit:"headerFilterChange"},{emit:"heightChange"},{emit:"highlightChangesChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"keyboardNavigationChange"},{emit:"keyExprChange"},{emit:"loadPanelChange"},{emit:"masterDetailChange"},{emit:"noDataTextChange"},{emit:"pagerChange"},{emit:"pagingChange"},{emit:"remoteOperationsChange"},{emit:"renderAsyncChange"},{emit:"repaintChangesOnlyChange"},{emit:"rowAlternationEnabledChange"},{emit:"rowDraggingChange"},{emit:"rowTemplateChange"},{emit:"rtlEnabledChange"},{emit:"scrollingChange"},{emit:"searchPanelChange"},{emit:"selectedRowKeysChange"},{emit:"selectionChange"},{emit:"selectionFilterChange"},{emit:"showBordersChange"},{emit:"showColumnHeadersChange"},{emit:"showColumnLinesChange"},{emit:"showRowLinesChange"},{emit:"sortByGroupSummaryInfoChange"},{emit:"sortingChange"},{emit:"stateStoringChange"},{emit:"summaryChange"},{emit:"syncLookupFilterValuesChange"},{emit:"tabIndexChange"},{emit:"toolbarChange"},{emit:"twoWayBindingEnabledChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"wordWrapEnabledChange"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(t){this._setOption("accessKey",t)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(t){this._setOption("activeStateEnabled",t)}get allowColumnReordering(){return this._getOption("allowColumnReordering")}set allowColumnReordering(t){this._setOption("allowColumnReordering",t)}get allowColumnResizing(){return this._getOption("allowColumnResizing")}set allowColumnResizing(t){this._setOption("allowColumnResizing",t)}get autoNavigateToFocusedRow(){return this._getOption("autoNavigateToFocusedRow")}set autoNavigateToFocusedRow(t){this._setOption("autoNavigateToFocusedRow",t)}get cacheEnabled(){return this._getOption("cacheEnabled")}set cacheEnabled(t){this._setOption("cacheEnabled",t)}get cellHintEnabled(){return this._getOption("cellHintEnabled")}set cellHintEnabled(t){this._setOption("cellHintEnabled",t)}get columnAutoWidth(){return this._getOption("columnAutoWidth")}set columnAutoWidth(t){this._setOption("columnAutoWidth",t)}get columnChooser(){return this._getOption("columnChooser")}set columnChooser(t){this._setOption("columnChooser",t)}get columnFixing(){return this._getOption("columnFixing")}set columnFixing(t){this._setOption("columnFixing",t)}get columnHidingEnabled(){return this._getOption("columnHidingEnabled")}set columnHidingEnabled(t){this._setOption("columnHidingEnabled",t)}get columnMinWidth(){return this._getOption("columnMinWidth")}set columnMinWidth(t){this._setOption("columnMinWidth",t)}get columnResizingMode(){return this._getOption("columnResizingMode")}set columnResizingMode(t){this._setOption("columnResizingMode",t)}get columns(){return this._getOption("columns")}set columns(t){this._setOption("columns",t)}get columnWidth(){return this._getOption("columnWidth")}set columnWidth(t){this._setOption("columnWidth",t)}get customizeColumns(){return this._getOption("customizeColumns")}set customizeColumns(t){this._setOption("customizeColumns",t)}get dataRowTemplate(){return this._getOption("dataRowTemplate")}set dataRowTemplate(t){this._setOption("dataRowTemplate",t)}get dataSource(){return this._getOption("dataSource")}set dataSource(t){this._setOption("dataSource",t)}get dateSerializationFormat(){return this._getOption("dateSerializationFormat")}set dateSerializationFormat(t){this._setOption("dateSerializationFormat",t)}get disabled(){return this._getOption("disabled")}set disabled(t){this._setOption("disabled",t)}get editing(){return this._getOption("editing")}set editing(t){this._setOption("editing",t)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(t){this._setOption("elementAttr",t)}get errorRowEnabled(){return this._getOption("errorRowEnabled")}set errorRowEnabled(t){this._setOption("errorRowEnabled",t)}get export(){return this._getOption("export")}set export(t){this._setOption("export",t)}get filterBuilder(){return this._getOption("filterBuilder")}set filterBuilder(t){this._setOption("filterBuilder",t)}get filterBuilderPopup(){return this._getOption("filterBuilderPopup")}set filterBuilderPopup(t){this._setOption("filterBuilderPopup",t)}get filterPanel(){return this._getOption("filterPanel")}set filterPanel(t){this._setOption("filterPanel",t)}get filterRow(){return this._getOption("filterRow")}set filterRow(t){this._setOption("filterRow",t)}get filterSyncEnabled(){return this._getOption("filterSyncEnabled")}set filterSyncEnabled(t){this._setOption("filterSyncEnabled",t)}get filterValue(){return this._getOption("filterValue")}set filterValue(t){this._setOption("filterValue",t)}get focusedColumnIndex(){return this._getOption("focusedColumnIndex")}set focusedColumnIndex(t){this._setOption("focusedColumnIndex",t)}get focusedRowEnabled(){return this._getOption("focusedRowEnabled")}set focusedRowEnabled(t){this._setOption("focusedRowEnabled",t)}get focusedRowIndex(){return this._getOption("focusedRowIndex")}set focusedRowIndex(t){this._setOption("focusedRowIndex",t)}get focusedRowKey(){return this._getOption("focusedRowKey")}set focusedRowKey(t){this._setOption("focusedRowKey",t)}get grouping(){return this._getOption("grouping")}set grouping(t){this._setOption("grouping",t)}get groupPanel(){return this._getOption("groupPanel")}set groupPanel(t){this._setOption("groupPanel",t)}get headerFilter(){return this._getOption("headerFilter")}set headerFilter(t){this._setOption("headerFilter",t)}get height(){return this._getOption("height")}set height(t){this._setOption("height",t)}get highlightChanges(){return this._getOption("highlightChanges")}set highlightChanges(t){this._setOption("highlightChanges",t)}get hint(){return this._getOption("hint")}set hint(t){this._setOption("hint",t)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(t){this._setOption("hoverStateEnabled",t)}get keyboardNavigation(){return this._getOption("keyboardNavigation")}set keyboardNavigation(t){this._setOption("keyboardNavigation",t)}get keyExpr(){return this._getOption("keyExpr")}set keyExpr(t){this._setOption("keyExpr",t)}get loadPanel(){return this._getOption("loadPanel")}set loadPanel(t){this._setOption("loadPanel",t)}get masterDetail(){return this._getOption("masterDetail")}set masterDetail(t){this._setOption("masterDetail",t)}get noDataText(){return this._getOption("noDataText")}set noDataText(t){this._setOption("noDataText",t)}get pager(){return this._getOption("pager")}set pager(t){this._setOption("pager",t)}get paging(){return this._getOption("paging")}set paging(t){this._setOption("paging",t)}get remoteOperations(){return this._getOption("remoteOperations")}set remoteOperations(t){this._setOption("remoteOperations",t)}get renderAsync(){return this._getOption("renderAsync")}set renderAsync(t){this._setOption("renderAsync",t)}get repaintChangesOnly(){return this._getOption("repaintChangesOnly")}set repaintChangesOnly(t){this._setOption("repaintChangesOnly",t)}get rowAlternationEnabled(){return this._getOption("rowAlternationEnabled")}set rowAlternationEnabled(t){this._setOption("rowAlternationEnabled",t)}get rowDragging(){return this._getOption("rowDragging")}set rowDragging(t){this._setOption("rowDragging",t)}get rowTemplate(){return this._getOption("rowTemplate")}set rowTemplate(t){this._setOption("rowTemplate",t)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(t){this._setOption("rtlEnabled",t)}get scrolling(){return this._getOption("scrolling")}set scrolling(t){this._setOption("scrolling",t)}get searchPanel(){return this._getOption("searchPanel")}set searchPanel(t){this._setOption("searchPanel",t)}get selectedRowKeys(){return this._getOption("selectedRowKeys")}set selectedRowKeys(t){this._setOption("selectedRowKeys",t)}get selection(){return this._getOption("selection")}set selection(t){this._setOption("selection",t)}get selectionFilter(){return this._getOption("selectionFilter")}set selectionFilter(t){this._setOption("selectionFilter",t)}get showBorders(){return this._getOption("showBorders")}set showBorders(t){this._setOption("showBorders",t)}get showColumnHeaders(){return this._getOption("showColumnHeaders")}set showColumnHeaders(t){this._setOption("showColumnHeaders",t)}get showColumnLines(){return this._getOption("showColumnLines")}set showColumnLines(t){this._setOption("showColumnLines",t)}get showRowLines(){return this._getOption("showRowLines")}set showRowLines(t){this._setOption("showRowLines",t)}get sortByGroupSummaryInfo(){return this._getOption("sortByGroupSummaryInfo")}set sortByGroupSummaryInfo(t){this._setOption("sortByGroupSummaryInfo",t)}get sorting(){return this._getOption("sorting")}set sorting(t){this._setOption("sorting",t)}get stateStoring(){return this._getOption("stateStoring")}set stateStoring(t){this._setOption("stateStoring",t)}get summary(){return this._getOption("summary")}set summary(t){this._setOption("summary",t)}get syncLookupFilterValues(){return this._getOption("syncLookupFilterValues")}set syncLookupFilterValues(t){this._setOption("syncLookupFilterValues",t)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(t){this._setOption("tabIndex",t)}get toolbar(){return this._getOption("toolbar")}set toolbar(t){this._setOption("toolbar",t)}get twoWayBindingEnabled(){return this._getOption("twoWayBindingEnabled")}set twoWayBindingEnabled(t){this._setOption("twoWayBindingEnabled",t)}get visible(){return this._getOption("visible")}set visible(t){this._setOption("visible",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}get wordWrapEnabled(){return this._getOption("wordWrapEnabled")}set wordWrapEnabled(t){this._setOption("wordWrapEnabled",t)}get columnsChildren(){return this._getOption("columns")}set columnsChildren(t){this.setChildren("columns",t)}get sortByGroupSummaryInfoChildren(){return this._getOption("sortByGroupSummaryInfo")}set sortByGroupSummaryInfoChildren(t){this.setChildren("sortByGroupSummaryInfo",t)}_createInstance(t,r){return new g8(t,r)}ngOnDestroy(){this._destroyWidget()}ngOnChanges(t){super.ngOnChanges(t),this.setupChanges("columns",t),this.setupChanges("dataSource",t),this.setupChanges("keyExpr",t),this.setupChanges("selectedRowKeys",t),this.setupChanges("sortByGroupSummaryInfo",t)}setupChanges(t,r){t in this._optionsToUpdate||this._idh.setup(t,r)}ngDoCheck(){this._idh.doCheck("columns"),this._idh.doCheck("dataSource"),this._idh.doCheck("keyExpr"),this._idh.doCheck("selectedRowKeys"),this._idh.doCheck("sortByGroupSummaryInfo"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(t,r){let a=this._idh.setupSingle(t,r),n=null!==this._idh.getChanges(t,r);(a||n)&&super._setOption(t,r)}}return i.\u0275fac=function(t){return new(t||i)(Z.Y36(Z.SBq),Z.Y36(Z.R0b),Z.Y36(ct._5),Z.Y36(ct._h),Z.Y36(ct.i9),Z.Y36(ct.al),Z.Y36(js.ki),Z.Y36(Z.Lbi))},i.\u0275cmp=Z.Xpm({type:i,selectors:[["dx-data-grid"]],contentQueries:function(t,r,a){if(1&t&&(Z.Suo(a,he.qvW,4),Z.Suo(a,he.KkC,4)),2&t){let n;Z.iGM(n=Z.CRH())&&(r.columnsChildren=n),Z.iGM(n=Z.CRH())&&(r.sortByGroupSummaryInfoChildren=n)}},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",allowColumnReordering:"allowColumnReordering",allowColumnResizing:"allowColumnResizing",autoNavigateToFocusedRow:"autoNavigateToFocusedRow",cacheEnabled:"cacheEnabled",cellHintEnabled:"cellHintEnabled",columnAutoWidth:"columnAutoWidth",columnChooser:"columnChooser",columnFixing:"columnFixing",columnHidingEnabled:"columnHidingEnabled",columnMinWidth:"columnMinWidth",columnResizingMode:"columnResizingMode",columns:"columns",columnWidth:"columnWidth",customizeColumns:"customizeColumns",dataRowTemplate:"dataRowTemplate",dataSource:"dataSource",dateSerializationFormat:"dateSerializationFormat",disabled:"disabled",editing:"editing",elementAttr:"elementAttr",errorRowEnabled:"errorRowEnabled",export:"export",filterBuilder:"filterBuilder",filterBuilderPopup:"filterBuilderPopup",filterPanel:"filterPanel",filterRow:"filterRow",filterSyncEnabled:"filterSyncEnabled",filterValue:"filterValue",focusedColumnIndex:"focusedColumnIndex",focusedRowEnabled:"focusedRowEnabled",focusedRowIndex:"focusedRowIndex",focusedRowKey:"focusedRowKey",grouping:"grouping",groupPanel:"groupPanel",headerFilter:"headerFilter",height:"height",highlightChanges:"highlightChanges",hint:"hint",hoverStateEnabled:"hoverStateEnabled",keyboardNavigation:"keyboardNavigation",keyExpr:"keyExpr",loadPanel:"loadPanel",masterDetail:"masterDetail",noDataText:"noDataText",pager:"pager",paging:"paging",remoteOperations:"remoteOperations",renderAsync:"renderAsync",repaintChangesOnly:"repaintChangesOnly",rowAlternationEnabled:"rowAlternationEnabled",rowDragging:"rowDragging",rowTemplate:"rowTemplate",rtlEnabled:"rtlEnabled",scrolling:"scrolling",searchPanel:"searchPanel",selectedRowKeys:"selectedRowKeys",selection:"selection",selectionFilter:"selectionFilter",showBorders:"showBorders",showColumnHeaders:"showColumnHeaders",showColumnLines:"showColumnLines",showRowLines:"showRowLines",sortByGroupSummaryInfo:"sortByGroupSummaryInfo",sorting:"sorting",stateStoring:"stateStoring",summary:"summary",syncLookupFilterValues:"syncLookupFilterValues",tabIndex:"tabIndex",toolbar:"toolbar",twoWayBindingEnabled:"twoWayBindingEnabled",visible:"visible",width:"width",wordWrapEnabled:"wordWrapEnabled"},outputs:{onAdaptiveDetailRowPreparing:"onAdaptiveDetailRowPreparing",onCellClick:"onCellClick",onCellDblClick:"onCellDblClick",onCellHoverChanged:"onCellHoverChanged",onCellPrepared:"onCellPrepared",onContentReady:"onContentReady",onContextMenuPreparing:"onContextMenuPreparing",onDataErrorOccurred:"onDataErrorOccurred",onDisposing:"onDisposing",onEditCanceled:"onEditCanceled",onEditCanceling:"onEditCanceling",onEditingStart:"onEditingStart",onEditorPrepared:"onEditorPrepared",onEditorPreparing:"onEditorPreparing",onExporting:"onExporting",onFocusedCellChanged:"onFocusedCellChanged",onFocusedCellChanging:"onFocusedCellChanging",onFocusedRowChanged:"onFocusedRowChanged",onFocusedRowChanging:"onFocusedRowChanging",onInitialized:"onInitialized",onInitNewRow:"onInitNewRow",onKeyDown:"onKeyDown",onOptionChanged:"onOptionChanged",onRowClick:"onRowClick",onRowCollapsed:"onRowCollapsed",onRowCollapsing:"onRowCollapsing",onRowDblClick:"onRowDblClick",onRowExpanded:"onRowExpanded",onRowExpanding:"onRowExpanding",onRowInserted:"onRowInserted",onRowInserting:"onRowInserting",onRowPrepared:"onRowPrepared",onRowRemoved:"onRowRemoved",onRowRemoving:"onRowRemoving",onRowUpdated:"onRowUpdated",onRowUpdating:"onRowUpdating",onRowValidating:"onRowValidating",onSaved:"onSaved",onSaving:"onSaving",onSelectionChanged:"onSelectionChanged",onToolbarPreparing:"onToolbarPreparing",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",allowColumnReorderingChange:"allowColumnReorderingChange",allowColumnResizingChange:"allowColumnResizingChange",autoNavigateToFocusedRowChange:"autoNavigateToFocusedRowChange",cacheEnabledChange:"cacheEnabledChange",cellHintEnabledChange:"cellHintEnabledChange",columnAutoWidthChange:"columnAutoWidthChange",columnChooserChange:"columnChooserChange",columnFixingChange:"columnFixingChange",columnHidingEnabledChange:"columnHidingEnabledChange",columnMinWidthChange:"columnMinWidthChange",columnResizingModeChange:"columnResizingModeChange",columnsChange:"columnsChange",columnWidthChange:"columnWidthChange",customizeColumnsChange:"customizeColumnsChange",dataRowTemplateChange:"dataRowTemplateChange",dataSourceChange:"dataSourceChange",dateSerializationFormatChange:"dateSerializationFormatChange",disabledChange:"disabledChange",editingChange:"editingChange",elementAttrChange:"elementAttrChange",errorRowEnabledChange:"errorRowEnabledChange",exportChange:"exportChange",filterBuilderChange:"filterBuilderChange",filterBuilderPopupChange:"filterBuilderPopupChange",filterPanelChange:"filterPanelChange",filterRowChange:"filterRowChange",filterSyncEnabledChange:"filterSyncEnabledChange",filterValueChange:"filterValueChange",focusedColumnIndexChange:"focusedColumnIndexChange",focusedRowEnabledChange:"focusedRowEnabledChange",focusedRowIndexChange:"focusedRowIndexChange",focusedRowKeyChange:"focusedRowKeyChange",groupingChange:"groupingChange",groupPanelChange:"groupPanelChange",headerFilterChange:"headerFilterChange",heightChange:"heightChange",highlightChangesChange:"highlightChangesChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",keyboardNavigationChange:"keyboardNavigationChange",keyExprChange:"keyExprChange",loadPanelChange:"loadPanelChange",masterDetailChange:"masterDetailChange",noDataTextChange:"noDataTextChange",pagerChange:"pagerChange",pagingChange:"pagingChange",remoteOperationsChange:"remoteOperationsChange",renderAsyncChange:"renderAsyncChange",repaintChangesOnlyChange:"repaintChangesOnlyChange",rowAlternationEnabledChange:"rowAlternationEnabledChange",rowDraggingChange:"rowDraggingChange",rowTemplateChange:"rowTemplateChange",rtlEnabledChange:"rtlEnabledChange",scrollingChange:"scrollingChange",searchPanelChange:"searchPanelChange",selectedRowKeysChange:"selectedRowKeysChange",selectionChange:"selectionChange",selectionFilterChange:"selectionFilterChange",showBordersChange:"showBordersChange",showColumnHeadersChange:"showColumnHeadersChange",showColumnLinesChange:"showColumnLinesChange",showRowLinesChange:"showRowLinesChange",sortByGroupSummaryInfoChange:"sortByGroupSummaryInfoChange",sortingChange:"sortingChange",stateStoringChange:"stateStoringChange",summaryChange:"summaryChange",syncLookupFilterValuesChange:"syncLookupFilterValuesChange",tabIndexChange:"tabIndexChange",toolbarChange:"toolbarChange",twoWayBindingEnabledChange:"twoWayBindingEnabledChange",visibleChange:"visibleChange",widthChange:"widthChange",wordWrapEnabledChange:"wordWrapEnabledChange"},features:[Z._Bn([ct._5,ct._h,ct.al,ct.i9]),Z.qOj,Z.TTD],decls:0,vars:0,template:function(t,r){},encapsulation:2}),i})(),C8=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Z.oAB({type:i}),i.\u0275inj=Z.cJS({imports:[[he.Uz5,he.D_l,he.JxK,he.zZW,he.ynY,he.lgR,he.sni,he.FcQ,he.kEo,he.LNK,he.mtS,he.tRk,he.idP,he.HaS,he.CxW,he.FZZ,he.Inm,he.e1H,he.$D5,he.SCM,he.DTR,he.ZCX,he.Oll,he.Q8p,he.Jiy,he._9O,he.kSd,he.fOF,he.IOm,he.kOw,he.weU,he.waX,he.pxS,he.pGy,he.lj9,he.SH1,he.FJZ,he.RbS,he.$wd,he.xHg,he.p6x,he.vLN,he.rH1,he.lUW,he.kIp,he.yFA,he.$9q,he.nD3,he.Pj6,he.Upd,he.WSE,he.LHj,he._PP,he.ywL,he.WyY,he.$YR,he.aLr,he.uKt,he.YOZ,he.Axk,he.Zjs,he.GaT,he.zLN,he.azD,ct.Lz,ct.ie],he.Uz5,he.D_l,he.JxK,he.zZW,he.ynY,he.lgR,he.sni,he.FcQ,he.kEo,he.LNK,he.mtS,he.tRk,he.idP,he.HaS,he.CxW,he.FZZ,he.Inm,he.e1H,he.$D5,he.SCM,he.DTR,he.ZCX,he.Oll,he.Q8p,he.Jiy,he._9O,he.kSd,he.fOF,he.IOm,he.kOw,he.weU,he.waX,he.pxS,he.pGy,he.lj9,he.SH1,he.FJZ,he.RbS,he.$wd,he.xHg,he.p6x,he.vLN,he.rH1,he.lUW,he.kIp,he.yFA,he.$9q,he.nD3,he.Pj6,he.Upd,he.WSE,he.LHj,he._PP,he.ywL,he.WyY,he.$YR,he.aLr,he.uKt,he.YOZ,he.Axk,he.Zjs,he.GaT,he.zLN,he.azD,ct.ie]}),i})();var b8=be(6358),w8=be(7533);const S8=["*"];let y8=(()=>{class i extends ct.Ay{constructor(t,r,a,n,s,o,l){super(t,r,a,n,o,l),this._createEventEmitters([{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"resize",emit:"onResize"},{subscribe:"resizeEnd",emit:"onResizeEnd"},{subscribe:"resizeStart",emit:"onResizeStart"},{emit:"areaChange"},{emit:"elementAttrChange"},{emit:"handlesChange"},{emit:"heightChange"},{emit:"keepAspectRatioChange"},{emit:"maxHeightChange"},{emit:"maxWidthChange"},{emit:"minHeightChange"},{emit:"minWidthChange"},{emit:"rtlEnabledChange"},{emit:"widthChange"}]),s.setHost(this)}get area(){return this._getOption("area")}set area(t){this._setOption("area",t)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(t){this._setOption("elementAttr",t)}get handles(){return this._getOption("handles")}set handles(t){this._setOption("handles",t)}get height(){return this._getOption("height")}set height(t){this._setOption("height",t)}get keepAspectRatio(){return this._getOption("keepAspectRatio")}set keepAspectRatio(t){this._setOption("keepAspectRatio",t)}get maxHeight(){return this._getOption("maxHeight")}set maxHeight(t){this._setOption("maxHeight",t)}get maxWidth(){return this._getOption("maxWidth")}set maxWidth(t){this._setOption("maxWidth",t)}get minHeight(){return this._getOption("minHeight")}set minHeight(t){this._setOption("minHeight",t)}get minWidth(){return this._getOption("minWidth")}set minWidth(t){this._setOption("minWidth",t)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(t){this._setOption("rtlEnabled",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}_createInstance(t,r){return new w8.Z(t,r)}ngOnDestroy(){this._destroyWidget()}}return i.\u0275fac=function(t){return new(t||i)(Z.Y36(Z.SBq),Z.Y36(Z.R0b),Z.Y36(ct._5),Z.Y36(ct._h),Z.Y36(ct.al),Z.Y36(js.ki),Z.Y36(Z.Lbi))},i.\u0275cmp=Z.Xpm({type:i,selectors:[["dx-resizable"]],inputs:{area:"area",elementAttr:"elementAttr",handles:"handles",height:"height",keepAspectRatio:"keepAspectRatio",maxHeight:"maxHeight",maxWidth:"maxWidth",minHeight:"minHeight",minWidth:"minWidth",rtlEnabled:"rtlEnabled",width:"width"},outputs:{onDisposing:"onDisposing",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",onResize:"onResize",onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart",areaChange:"areaChange",elementAttrChange:"elementAttrChange",handlesChange:"handlesChange",heightChange:"heightChange",keepAspectRatioChange:"keepAspectRatioChange",maxHeightChange:"maxHeightChange",maxWidthChange:"maxWidthChange",minHeightChange:"minHeightChange",minWidthChange:"minWidthChange",rtlEnabledChange:"rtlEnabledChange",widthChange:"widthChange"},features:[Z._Bn([ct._5,ct._h,ct.al]),Z.qOj],ngContentSelectors:S8,decls:1,vars:0,template:function(t,r){1&t&&(Z.F$t(),Z.Hsn(0))},encapsulation:2}),i})(),x8=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Z.oAB({type:i}),i.\u0275inj=Z.cJS({imports:[[ct.Lz,ct.ie],ct.ie]}),i})();const E8=["*"];let I8=(()=>{class i extends ct.Ay{constructor(t,r,a,n,s,o,l,d){super(t,r,a,n,l,d),this._watcherHelper=n,this._idh=s,this._createEventEmitters([{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"hidden",emit:"onHidden"},{subscribe:"hiding",emit:"onHiding"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"resize",emit:"onResize"},{subscribe:"resizeEnd",emit:"onResizeEnd"},{subscribe:"resizeStart",emit:"onResizeStart"},{subscribe:"showing",emit:"onShowing"},{subscribe:"shown",emit:"onShown"},{subscribe:"titleRendered",emit:"onTitleRendered"},{emit:"accessKeyChange"},{emit:"animationChange"},{emit:"closeOnOutsideClickChange"},{emit:"containerChange"},{emit:"contentTemplateChange"},{emit:"copyRootClassesToWrapperChange"},{emit:"deferRenderingChange"},{emit:"disabledChange"},{emit:"dragAndResizeAreaChange"},{emit:"dragEnabledChange"},{emit:"dragOutsideBoundaryChange"},{emit:"elementAttrChange"},{emit:"enableBodyScrollChange"},{emit:"focusStateEnabledChange"},{emit:"fullScreenChange"},{emit:"heightChange"},{emit:"hideOnOutsideClickChange"},{emit:"hideOnParentScrollChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"maxHeightChange"},{emit:"maxWidthChange"},{emit:"minHeightChange"},{emit:"minWidthChange"},{emit:"positionChange"},{emit:"resizeEnabledChange"},{emit:"restorePositionChange"},{emit:"rtlEnabledChange"},{emit:"shadingChange"},{emit:"shadingColorChange"},{emit:"showCloseButtonChange"},{emit:"showTitleChange"},{emit:"tabIndexChange"},{emit:"titleChange"},{emit:"titleTemplateChange"},{emit:"toolbarItemsChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"wrapperAttrChange"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(t){this._setOption("accessKey",t)}get animation(){return this._getOption("animation")}set animation(t){this._setOption("animation",t)}get closeOnOutsideClick(){return this._getOption("closeOnOutsideClick")}set closeOnOutsideClick(t){this._setOption("closeOnOutsideClick",t)}get container(){return this._getOption("container")}set container(t){this._setOption("container",t)}get contentTemplate(){return this._getOption("contentTemplate")}set contentTemplate(t){this._setOption("contentTemplate",t)}get copyRootClassesToWrapper(){return this._getOption("copyRootClassesToWrapper")}set copyRootClassesToWrapper(t){this._setOption("copyRootClassesToWrapper",t)}get deferRendering(){return this._getOption("deferRendering")}set deferRendering(t){this._setOption("deferRendering",t)}get disabled(){return this._getOption("disabled")}set disabled(t){this._setOption("disabled",t)}get dragAndResizeArea(){return this._getOption("dragAndResizeArea")}set dragAndResizeArea(t){this._setOption("dragAndResizeArea",t)}get dragEnabled(){return this._getOption("dragEnabled")}set dragEnabled(t){this._setOption("dragEnabled",t)}get dragOutsideBoundary(){return this._getOption("dragOutsideBoundary")}set dragOutsideBoundary(t){this._setOption("dragOutsideBoundary",t)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(t){this._setOption("elementAttr",t)}get enableBodyScroll(){return this._getOption("enableBodyScroll")}set enableBodyScroll(t){this._setOption("enableBodyScroll",t)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(t){this._setOption("focusStateEnabled",t)}get fullScreen(){return this._getOption("fullScreen")}set fullScreen(t){this._setOption("fullScreen",t)}get height(){return this._getOption("height")}set height(t){this._setOption("height",t)}get hideOnOutsideClick(){return this._getOption("hideOnOutsideClick")}set hideOnOutsideClick(t){this._setOption("hideOnOutsideClick",t)}get hideOnParentScroll(){return this._getOption("hideOnParentScroll")}set hideOnParentScroll(t){this._setOption("hideOnParentScroll",t)}get hint(){return this._getOption("hint")}set hint(t){this._setOption("hint",t)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(t){this._setOption("hoverStateEnabled",t)}get maxHeight(){return this._getOption("maxHeight")}set maxHeight(t){this._setOption("maxHeight",t)}get maxWidth(){return this._getOption("maxWidth")}set maxWidth(t){this._setOption("maxWidth",t)}get minHeight(){return this._getOption("minHeight")}set minHeight(t){this._setOption("minHeight",t)}get minWidth(){return this._getOption("minWidth")}set minWidth(t){this._setOption("minWidth",t)}get position(){return this._getOption("position")}set position(t){this._setOption("position",t)}get resizeEnabled(){return this._getOption("resizeEnabled")}set resizeEnabled(t){this._setOption("resizeEnabled",t)}get restorePosition(){return this._getOption("restorePosition")}set restorePosition(t){this._setOption("restorePosition",t)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(t){this._setOption("rtlEnabled",t)}get shading(){return this._getOption("shading")}set shading(t){this._setOption("shading",t)}get shadingColor(){return this._getOption("shadingColor")}set shadingColor(t){this._setOption("shadingColor",t)}get showCloseButton(){return this._getOption("showCloseButton")}set showCloseButton(t){this._setOption("showCloseButton",t)}get showTitle(){return this._getOption("showTitle")}set showTitle(t){this._setOption("showTitle",t)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(t){this._setOption("tabIndex",t)}get title(){return this._getOption("title")}set title(t){this._setOption("title",t)}get titleTemplate(){return this._getOption("titleTemplate")}set titleTemplate(t){this._setOption("titleTemplate",t)}get toolbarItems(){return this._getOption("toolbarItems")}set toolbarItems(t){this._setOption("toolbarItems",t)}get visible(){return this._getOption("visible")}set visible(t){this._setOption("visible",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}get wrapperAttr(){return this._getOption("wrapperAttr")}set wrapperAttr(t){this._setOption("wrapperAttr",t)}get toolbarItemsChildren(){return this._getOption("toolbarItems")}set toolbarItemsChildren(t){this.setChildren("toolbarItems",t)}_createInstance(t,r){return new m0(t,r)}ngOnDestroy(){this._destroyWidget()}ngOnChanges(t){super.ngOnChanges(t),this.setupChanges("toolbarItems",t)}setupChanges(t,r){t in this._optionsToUpdate||this._idh.setup(t,r)}ngDoCheck(){this._idh.doCheck("toolbarItems"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(t,r){let a=this._idh.setupSingle(t,r),n=null!==this._idh.getChanges(t,r);(a||n)&&super._setOption(t,r)}}return i.\u0275fac=function(t){return new(t||i)(Z.Y36(Z.SBq),Z.Y36(Z.R0b),Z.Y36(ct._5),Z.Y36(ct._h),Z.Y36(ct.i9),Z.Y36(ct.al),Z.Y36(js.ki),Z.Y36(Z.Lbi))},i.\u0275cmp=Z.Xpm({type:i,selectors:[["dx-popup"]],contentQueries:function(t,r,a){if(1&t&&Z.Suo(a,he.QjJ,4),2&t){let n;Z.iGM(n=Z.CRH())&&(r.toolbarItemsChildren=n)}},inputs:{accessKey:"accessKey",animation:"animation",closeOnOutsideClick:"closeOnOutsideClick",container:"container",contentTemplate:"contentTemplate",copyRootClassesToWrapper:"copyRootClassesToWrapper",deferRendering:"deferRendering",disabled:"disabled",dragAndResizeArea:"dragAndResizeArea",dragEnabled:"dragEnabled",dragOutsideBoundary:"dragOutsideBoundary",elementAttr:"elementAttr",enableBodyScroll:"enableBodyScroll",focusStateEnabled:"focusStateEnabled",fullScreen:"fullScreen",height:"height",hideOnOutsideClick:"hideOnOutsideClick",hideOnParentScroll:"hideOnParentScroll",hint:"hint",hoverStateEnabled:"hoverStateEnabled",maxHeight:"maxHeight",maxWidth:"maxWidth",minHeight:"minHeight",minWidth:"minWidth",position:"position",resizeEnabled:"resizeEnabled",restorePosition:"restorePosition",rtlEnabled:"rtlEnabled",shading:"shading",shadingColor:"shadingColor",showCloseButton:"showCloseButton",showTitle:"showTitle",tabIndex:"tabIndex",title:"title",titleTemplate:"titleTemplate",toolbarItems:"toolbarItems",visible:"visible",width:"width",wrapperAttr:"wrapperAttr"},outputs:{onContentReady:"onContentReady",onDisposing:"onDisposing",onHidden:"onHidden",onHiding:"onHiding",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",onResize:"onResize",onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart",onShowing:"onShowing",onShown:"onShown",onTitleRendered:"onTitleRendered",accessKeyChange:"accessKeyChange",animationChange:"animationChange",closeOnOutsideClickChange:"closeOnOutsideClickChange",containerChange:"containerChange",contentTemplateChange:"contentTemplateChange",copyRootClassesToWrapperChange:"copyRootClassesToWrapperChange",deferRenderingChange:"deferRenderingChange",disabledChange:"disabledChange",dragAndResizeAreaChange:"dragAndResizeAreaChange",dragEnabledChange:"dragEnabledChange",dragOutsideBoundaryChange:"dragOutsideBoundaryChange",elementAttrChange:"elementAttrChange",enableBodyScrollChange:"enableBodyScrollChange",focusStateEnabledChange:"focusStateEnabledChange",fullScreenChange:"fullScreenChange",heightChange:"heightChange",hideOnOutsideClickChange:"hideOnOutsideClickChange",hideOnParentScrollChange:"hideOnParentScrollChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",maxHeightChange:"maxHeightChange",maxWidthChange:"maxWidthChange",minHeightChange:"minHeightChange",minWidthChange:"minWidthChange",positionChange:"positionChange",resizeEnabledChange:"resizeEnabledChange",restorePositionChange:"restorePositionChange",rtlEnabledChange:"rtlEnabledChange",shadingChange:"shadingChange",shadingColorChange:"shadingColorChange",showCloseButtonChange:"showCloseButtonChange",showTitleChange:"showTitleChange",tabIndexChange:"tabIndexChange",titleChange:"titleChange",titleTemplateChange:"titleTemplateChange",toolbarItemsChange:"toolbarItemsChange",visibleChange:"visibleChange",widthChange:"widthChange",wrapperAttrChange:"wrapperAttrChange"},features:[Z._Bn([ct._5,ct._h,ct.al,ct.i9]),Z.qOj,Z.TTD],ngContentSelectors:E8,decls:1,vars:0,template:function(t,r){1&t&&(Z.F$t(),Z.Hsn(0))},encapsulation:2}),i})(),T8=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Z.oAB({type:i}),i.\u0275inj=Z.cJS({imports:[[he.IOm,he.kOw,he.weU,he.D_l,he.JxK,he.zZW,he.ynY,he.lgR,he.sni,he.waX,he.pxS,he.pGy,ct.Lz,ct.ie],he.IOm,he.kOw,he.weU,he.D_l,he.JxK,he.zZW,he.ynY,he.lgR,he.sni,he.waX,he.pxS,he.pGy,ct.ie]}),i})();var Vn="dx-switch",A8=Vn+"-wrapper",D8=Vn+"-container",O8=Vn+"-inner",R8=Vn+"-handle",_I=Vn+"-on-value",L8=Vn+"-on",P8=Vn+"-off",vI=Qa.Z.inherit({_supportedKeys:function(){var i=this.option("rtlEnabled"),e=function(r){r.preventDefault(),this._clickAction({event:r})},t=function(r,a){a.preventDefault(),a.stopPropagation(),this._saveValueChangeEvent(a),this._animateValue(r)};return(0,N.l)(this.callBase(),{space:e,enter:e,leftArrow:t.bind(this,!!i),rightArrow:t.bind(this,!i)})},_useTemplates:function(){return!1},_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,switchedOnText:ae.Z.format("dxSwitch-switchedOnText"),switchedOffText:ae.Z.format("dxSwitch-switchedOffText"),value:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===at.Z.real().deviceType&&!at.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_feedbackHideTimeout:0,_animating:!1,_initMarkup:function(){this._renderContainers(),this.$element().addClass(Vn).append(this._$switchWrapper),this._renderSubmitElement(),this._renderClick(),this.setAria("role","button"),this._renderSwipeable(),this.callBase(),this._renderSwitchInner(),this._renderLabels(),this._renderValue()},_getInnerOffset:function(i,e){return(e-this._offsetDirection()*+!i)/2*100+"%"},_getHandleOffset:function(i,e){return this.option("rtlEnabled")&&(i=!i),i?100*-e-100+"%":100*-e+"%"},_renderSwitchInner:function(){this._$switchInner=(0,b.Z)("<div>").addClass(O8).appendTo(this._$switchContainer),this._$handle=(0,b.Z)("<div>").addClass(R8).appendTo(this._$switchInner)},_renderLabels:function(){this._$labelOn=(0,b.Z)("<div>").addClass(L8).prependTo(this._$switchInner),this._$labelOff=(0,b.Z)("<div>").addClass(P8).appendTo(this._$switchInner),this._setLabelsText()},_renderContainers:function(){this._$switchContainer=(0,b.Z)("<div>").addClass(D8),this._$switchWrapper=(0,b.Z)("<div>").addClass(A8).append(this._$switchContainer)},_renderSwipeable:function(){this._createComponent(this.$element(),Yu,{elastic:!1,immediate:!0,onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._getItemSizeFunc.bind(this)})},_getItemSizeFunc:function(){return(0,oe.Y_)(this._$switchContainer,!0)-(0,di.l)(this._$handle.get(0)).width},_renderSubmitElement:function(){this._$submitElement=(0,b.Z)("<input>").attr("type","hidden").appendTo(this.$element())},_getSubmitElement:function(){return this._$submitElement},_offsetDirection:function(){return this.option("rtlEnabled")?-1:1},_renderPosition:function(i,e){var t=this._getInnerOffset(i,e),r=this._getHandleOffset(i,e);this._$switchInner.css("transform"," translateX("+t+")"),this._$handle.css("transform"," translateX("+r+")")},_validateValue:function(){var i=this.option("value");"boolean"!=typeof i&&this._options.silent("value",!!i)},_renderClick:function(){var i=(0,ce.V4)(Pt.u,this.NAME),e=this.$element();this._clickAction=this._createAction(this._clickHandler.bind(this)),k.Z.off(e,i),k.Z.on(e,i,function(t){this._clickAction({event:t})}.bind(this))},_clickHandler:function(i){this._saveValueChangeEvent(i.event),!this._animating&&!this._swiping&&this._animateValue(!this.option("value"))},_animateValue:function(i){var e=this.option("value"),t=i;if(e!==t){this._animating=!0;var r=this._getInnerOffset(e,0),a=this._getInnerOffset(t,0),n=this._getHandleOffset(e,0),s=this._getHandleOffset(t,0),o=this,l={},d={},u={},c={};l.transform=" translateX("+r+")",d.transform=" translateX("+a+")",u.transform=" translateX("+n+")",c.transform=" translateX("+s+")",this.$element().toggleClass(_I,t),Yt.Z.animate(this._$handle,{from:u,to:c,duration:100}),Yt.Z.animate(this._$switchInner,{from:l,to:d,duration:100,complete:function(){o._animating=!1,o.option("value",t)}})}},_swipeStartHandler:function(i){var e=this.option("value"),t=this.option("rtlEnabled"),r=t?0:1,a=t?1:0;i.event.maxLeftOffset=e?r:a,i.event.maxRightOffset=e?a:r,this._swiping=!0,this._feedbackDeferred=new Y.BH,(0,yb.dR)(this._feedbackDeferred),this._toggleActiveState(this.$element(),this.option("activeStateEnabled"))},_swipeUpdateHandler:function(i){this._renderPosition(this.option("value"),i.event.offset)},_swipeEndHandler:function(i){var e=this,t=this._offsetDirection(),r={},a={},n=this._getInnerOffset(e.option("value"),i.event.targetOffset),s=this._getHandleOffset(e.option("value"),i.event.targetOffset);r.transform=" translateX("+n+")",a.transform=" translateX("+s+")",Yt.Z.animate(this._$handle,{to:a,duration:100}),Yt.Z.animate(this._$switchInner,{to:r,duration:100,complete:function(){e._swiping=!1;var o=e.option("value")+t*i.event.targetOffset;e._saveValueChangeEvent(i.event),e.option("value",!!o),e._feedbackDeferred.resolve(),e._toggleActiveState(e.$element(),!1)}})},_renderValue:function(){this._validateValue();var i=this.option("value");this._renderPosition(i,0),this.$element().toggleClass(_I,i),this._getSubmitElement().val(i),this.setAria({pressed:i,label:this.option(i?"switchedOnText":"switchedOffText")})},_setLabelsText:function(){this._$labelOn&&this._$labelOn.text(this.option("switchedOnText")),this._$labelOff&&this._$labelOff.text(this.option("switchedOffText"))},_visibilityChanged:function(i){i&&this.repaint()},_optionChanged:function(i){switch(i.name){case"width":delete this._marginBound,this._refresh();break;case"switchedOnText":case"switchedOffText":this._setLabelsText();break;case"value":this._renderValue(),this.callBase(i);break;default:this.callBase(i)}}});(0,It.Z)("dxSwitch",vI);const B8=vI,N8={provide:be(95).JU,useExisting:(0,Z.Gpc)(()=>gI),multi:!0};let gI=(()=>{class i extends ct.Ay{constructor(t,r,a,n,s,o,l,d){super(t,r,a,n,l,d),this._watcherHelper=n,this._idh=s,this.touched=u=>{},this._createEventEmitters([{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"nameChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"switchedOffTextChange"},{emit:"switchedOnTextChange"},{emit:"tabIndexChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(t){this._setOption("accessKey",t)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(t){this._setOption("activeStateEnabled",t)}get disabled(){return this._getOption("disabled")}set disabled(t){this._setOption("disabled",t)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(t){this._setOption("elementAttr",t)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(t){this._setOption("focusStateEnabled",t)}get height(){return this._getOption("height")}set height(t){this._setOption("height",t)}get hint(){return this._getOption("hint")}set hint(t){this._setOption("hint",t)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(t){this._setOption("hoverStateEnabled",t)}get isDirty(){return this._getOption("isDirty")}set isDirty(t){this._setOption("isDirty",t)}get isValid(){return this._getOption("isValid")}set isValid(t){this._setOption("isValid",t)}get name(){return this._getOption("name")}set name(t){this._setOption("name",t)}get readOnly(){return this._getOption("readOnly")}set readOnly(t){this._setOption("readOnly",t)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(t){this._setOption("rtlEnabled",t)}get switchedOffText(){return this._getOption("switchedOffText")}set switchedOffText(t){this._setOption("switchedOffText",t)}get switchedOnText(){return this._getOption("switchedOnText")}set switchedOnText(t){this._setOption("switchedOnText",t)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(t){this._setOption("tabIndex",t)}get validationError(){return this._getOption("validationError")}set validationError(t){this._setOption("validationError",t)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(t){this._setOption("validationErrors",t)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(t){this._setOption("validationMessageMode",t)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(t){this._setOption("validationMessagePosition",t)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(t){this._setOption("validationStatus",t)}get value(){return this._getOption("value")}set value(t){this._setOption("value",t)}get visible(){return this._getOption("visible")}set visible(t){this._setOption("visible",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}change(t){}_createInstance(t,r){return new B8(t,r)}writeValue(t){this.eventHelper.lockedValueChangeEvent=!0,this.value=t,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(t){this.disabled=t}registerOnChange(t){this.change=t}registerOnTouched(t){this.touched=t}_createWidget(t){super._createWidget(t),this.instance.on("focusOut",r=>{this.eventHelper.fireNgEvent("onBlur",[r])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(t){super.ngOnChanges(t),this.setupChanges("validationErrors",t)}setupChanges(t,r){t in this._optionsToUpdate||this._idh.setup(t,r)}ngDoCheck(){this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(t,r){let a=this._idh.setupSingle(t,r),n=null!==this._idh.getChanges(t,r);(a||n)&&super._setOption(t,r)}}return i.\u0275fac=function(t){return new(t||i)(Z.Y36(Z.SBq),Z.Y36(Z.R0b),Z.Y36(ct._5),Z.Y36(ct._h),Z.Y36(ct.i9),Z.Y36(ct.al),Z.Y36(js.ki),Z.Y36(Z.Lbi))},i.\u0275cmp=Z.Xpm({type:i,selectors:[["dx-switch"]],hostBindings:function(t,r){1&t&&Z.NdJ("valueChange",function(n){return r.change(n)})("onBlur",function(n){return r.touched(n)})},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",disabled:"disabled",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",isDirty:"isDirty",isValid:"isValid",name:"name",readOnly:"readOnly",rtlEnabled:"rtlEnabled",switchedOffText:"switchedOffText",switchedOnText:"switchedOnText",tabIndex:"tabIndex",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",visible:"visible",width:"width"},outputs:{onContentReady:"onContentReady",onDisposing:"onDisposing",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",onValueChanged:"onValueChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",nameChange:"nameChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",switchedOffTextChange:"switchedOffTextChange",switchedOnTextChange:"switchedOnTextChange",tabIndexChange:"tabIndexChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[Z._Bn([ct._5,ct._h,N8,ct.al,ct.i9]),Z.qOj,Z.TTD],decls:0,vars:0,template:function(t,r){},encapsulation:2}),i})(),F8=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Z.oAB({type:i}),i.\u0275inj=Z.cJS({imports:[[ct.Lz,ct.ie],ct.ie]}),i})();var mI=be(167),k8=be(5861);function CI(i){var e,t,r,a;return(0,m.kE)(i)?{top:i,right:i,bottom:i,left:i}:{top:null!==(e=i?.top)&&void 0!==e?e:0,right:null!==(t=i?.right)&&void 0!==t?t:0,bottom:null!==(r=i?.bottom)&&void 0!==r?r:0,left:null!==(a=i?.left)&&void 0!==a?a:0}}var Cv="...";function Wh(i,e){return e*(1/i.internal.scaleFactor)}function bv(i){return i.internal.pageSize.getWidth()}function H8(i){return i.internal.pageSize.getHeight()}function wv(i,e,t,r){var{wordWrapEnabled:a,targetRectWidth:n}=r;if(a){var s=i.getFont(t?.name,t?.style);return i.splitTextToSize(e,n,{fontSize:t?.size||i.getFontSize(),fontName:s.fontName,fontStyle:s.fontStyle})}var o=e.split("\n").filter(u=>""!==u).join(" ");if(yd(i,o,t).w<=n)return[o];for(var l=yd(i,o+Cv,t).w;o.length>0&&l>n;){var d=0;l>=2*n&&(d=o.length/2),d<1&&(d=1),l=yd(i,(o=o.substring(0,o.length-d))+Cv,t).w}return[o+Cv]}function Sv(i,e){var t=i-(e.left+e.right);return t>=0?t:0}function yd(i,e,t){return i.getTextDimensions(e,{font:i.getFont(t?.name,t?.style),fontSize:t?.size||i.getFontSize()})}function xd(i,e,t,r){var{wordWrapEnabled:a,targetRectWidth:n}=r;return yd(i,e,t).h*wv(i,e,t,{wordWrapEnabled:a,targetRectWidth:n}).length*i.getLineHeightFactor()}var bI=(i,e)=>i+e;var yv={base:{font:{size:10},borderWidth:.5,borderColor:"#979797"},header:{textColor:"#979797"},group:{},data:{},groupFooter:{},totalFooter:{}};function a7(i){for(var{doc:e,dataProvider:t,rowIndex:r,wordWrapEnabled:a,columns:n,styles:s,rowType:o,backgroundColor:l,rtlEnabled:d}=i,u=[],c=0;c<n.length;c++){var f,p=t.getCellData(r,c,!0),g=s[t.getStyleId(r,c)],w=s7(n[c],o,g),x=d?"right":"left",y=Wh(e,5),E={text:o7(p.value,g.format),verticalAlign:"middle",horizontalAlign:null!==(f=w.alignment)&&void 0!==f?f:x,wordWrapEnabled:a,backgroundColor:l,padding:{top:y,right:y,bottom:y,left:y},_rect:{},_internalTextOptions:{}};d&&(E._internalTextOptions.isInputVisual=!1,E._internalTextOptions.isOutputVisual=!0,E._internalTextOptions.isInputRtl=!0,E._internalTextOptions.isOutputRtl=!1);var V={gridCell:p.cellSourceData,pdfCell:(0,ye.Z)({},E,w)};if("header"===o){var F=t.getCellMerging(r,c);F&&F.rowspan>0&&(V.rowSpan=F.rowspan),F&&F.colspan>0&&(V.colSpan=F.colspan)}else if("group"===o){var ee=d?"drawLeftBorder":"drawRightBorder";if(V.pdfCell[d?"drawRightBorder":"drawLeftBorder"]=0===c,V.pdfCell[ee]=c===n.length-1,c>0){var X=u.slice(1).reduce((le,fe)=>le&&!(0,m.$K)(fe.pdfCell.text),!0);if(!(0,m.$K)(V.pdfCell.text)&&X){u[0].pdfCell[ee]=!0;for(var M=0;M<u.length;M++)u[M].colSpan=u.length;V.colSpan=u.length}}}u.push(V)}return u}function s7(i,e,t){var r=(0,ye.Z)({},yv.base,yv[e]),a="header"===e?i.alignment:t.alignment;return a&&(r.alignment=a),t.bold&&"header"!==e&&(r.font=(0,ye.Z)({},r.font,{style:"bold"})),r}function o7(i,e){if((0,m.$K)(e)){if((0,m.J_)(i))return vt.Z.format(i,e);if((0,m.kE)(i))return qt.Z.format(i,e)}return i?.toString()}var l7=["_rect","gridCell"];function wI(i){return i.charAt(0).toUpperCase()+i.slice(1)}function ai(i){return Math.round(1e3*i)/1e3}function $h(i,e,t,r,a){i.line(ai(e),ai(t),ai(r),ai(a))}function SI(i,e,t,r,a,n){(0,m.$K)(n)?i.rect(ai(e),ai(t),ai(r),ai(a),n):i.rect(ai(e),ai(t),ai(r),ai(a))}function xv(i,e,t,r){var{borderWidth:a,borderColor:n,drawLeftBorder:s=!0,drawRightBorder:o=!0,drawTopBorder:l=!0,drawBottomBorder:d=!0}=t;if(!(0,m.$K)(e))throw"rect is required";!s&&!o&&!l&&!d||(s&&o&&l&&d?(yI(i,{borderWidth:a,borderColor:n},r),SI(i,e.x,e.y,e.w,e.h)):(yI(i,{borderWidth:a,borderColor:n},r),l&&$h(i,e.x,e.y,e.x+e.w,e.y),s&&$h(i,e.x,e.y,e.x,e.y+e.h),o&&$h(i,e.x+e.w,e.y,e.x+e.w,e.y+e.h),d&&$h(i,e.x,e.y+e.h,e.x+e.w,e.y+e.h)))}function yI(i,e,t){var{borderWidth:r,borderColor:a}=e,n=(0,m.$K)(r)?r:t.borderWidth;n!==Iv(i)&&xI(i,Wh(i,n)),Ev(i,"draw",(0,m.$K)(a)?a:t.borderColor)}function Ev(i,e,t){var r="get".concat(wI(e),"Color"),a="set".concat(wI(e),"Color"),{ch1:n=t,ch2:s,ch3:o,ch4:l}=t;(i.__private__.decodeColorString(i.__private__.encodeColorString({ch1:n,ch2:s,ch3:o,ch4:l,precision:"text"===e?3:2}))!==i[r]()||"fill"===e)&&i[a].apply(i,[n,s,o,l].filter(u=>void 0!==u))}function Iv(i){var e;return(0,m.$K)(i.getLineWidth)?i.getLineWidth():null!==(e=i.__borderWidth)&&void 0!==e?e:.200025}function xI(i,e){i.setLineWidth(e),(0,m.$K)(i.getLineWidth)||(i.__borderWidth=e)}var EI=i=>"header"===i?.sourceCellInfo.gridCell.rowType;function Kh(i,e,t){return(0,ye.Z)({},i,{sourceCellInfo:(0,ye.Z)({},i.sourceCellInfo,{text:e}),y:t})}function TI(i){return[].concat.apply([],i.map(e=>e.cells.filter(t=>!(0,m.$K)(t.pdfCell.isMerged)).map(t=>(0,ye.Z)({},t.pdfCell._rect,{sourceCellInfo:(0,ye.Z)({},t.pdfCell,{gridCell:t.gridCell})}))))}function AI(i,e,t,r,a,n,s){for(var o=[],l=[...i],d=(c,f)=>a(c,f+e),u=function(){var c=0,f=l.filter(V=>{var F=V[t]+V[r];return!!a(0===o.length,F)&&(c<=F&&(c=F),!0)}),p=((i,e)=>e&&EI(i[i.length-1]))(f,0===o.length),g=((i,e,t,r,a)=>{if(!r)return[];var n=i[i.length-1],s=e[i.length];if(!s||EI(s))return[];if(a(t,s.h)&&!t)return[];var l=e.filter(f=>{var{y:p}=f;return p===s.y}),d=n.y+n.h,[u,c]=((i,e,t,r,a)=>{for(var[n,s]=r(e,i),o=[e?n.map(l=>(0,ye.Z)({},l,{y:t})):n];!a(!1,s[0].h);)[n,s]=r(!1,s),o.push(n);return[o,s]})(l,t,d,r,a);return((i,e,t)=>{e.forEach((s,o)=>{s.sourceCellInfo.text=t[o].sourceCellInfo.text,s.h=t[o].h});var r=i.indexOf(e[e.length-1])+1;if(!(r>=i.length))for(var a=i[r].y-(e[0].y+t[0].h),n=r;n<i.length;n++)i[n].y=i[n].y-a})(e,l,c),u})(f,l,p,s,d);if(l.filter(V=>c-V[t]>.001&&V[t]+V[r]-c>.001).forEach(V=>{n(V,c,f,l);var F=l.indexOf(V);-1!==F&&l.splice(F,1)}),f.forEach(V=>{var F=l.indexOf(V);-1!==F&&l.splice(F,1)}),l.forEach(V=>{V[t]=(0,m.$K)(c)?V[t]-c+e:V[t]}),p&&g.length>0){var[y,...E]=g;o.push([...f,...y]),o.push(...E)}else if(f.length>0)o.push(f),o.push(...g);else{if(!(g.length>0))return o.push(l),1;o.push(...g),o.push(l)}};l.length>0&&!u(););return o}const A7=Te;class DI{constructor(e,t,r,a){this._$targetElement=t,this._$container=r,this._loadPanel=e._createComponent((0,b.Z)("<div>").addClass("dx-export-loadpanel").appendTo(this._$container),op,this.getOptions(a))}getDefaultOptions(){return{animation:null,shading:!1,height:90,width:200,container:this._$container}}getOptions(e){return e.message=(0,m.$K)(e.text)?e.text:ae.Z.format("dxDataGrid-exporting"),(0,N.l)(this.getDefaultOptions(),e)}show(){this._loadPanel.option("position",A7.calculateLoadPanelPosition(this._$targetElement)),this._loadPanel.show()}dispose(){(0,b.Z)(this._loadPanel.element()).remove(),delete this._loadPanel}}var OI_getFullOptions=function O7(i){var{jsPDFDocument:e}=i,t=(0,N.l)({},i);return(0,m.$K)(t.topLeft)||(t.topLeft={x:0,y:0}),(0,m.$K)(t.indent)||(t.indent=0),(0,m.$K)(t.repeatHeaders)||(t.repeatHeaders=!0),(0,m.$K)(t.margin)||(t.margin=Wh(e,40)),t.margin=CI(t.margin),Array.isArray(t.columnWidths)||(t.columnWidths=[]),(0,m.$K)(t.loadPanel)||(t.loadPanel={}),(0,m.$K)(t.loadPanel.enabled)||(t.loadPanel.enabled=!0),(0,m.$K)(t.loadPanel.text)||(t.loadPanel.text=ae.Z.format("dxDataGrid-exporting")),t},OI_export=function R7(i){var e,l,{jsPDFDocument:t,component:r,selectedRowsOnly:a,loadPanel:n}=i,s=(null===(e=r._getInternalInstance)||void 0===e?void 0:e.call(r))||r,o=s.option("loadPanel")&&s.option("loadPanel").enabled;if(o&&r.option("loadPanel.enabled",!1),n.enabled&&(0,We.Ym)()){var d=r.getView("rowsView");(l=new DI(r,d.element(),d.element().parent(),n)).show()}var u=r.getDataProvider(a);return new Promise(c=>{u.ready().done(()=>{var f,p,g=function r7(i,e,t,r){for(var a=[],n=e.getRowsCount(),s=!!t.option("wordWrapEnabled"),o=!!t.option("rtlEnabled"),l=e.getColumns(),d=e.getStyles(),u=0;u<n;u++){var c=e.getCellData(u,0,!0).cellSourceData.rowType,f="header"!==c?e.getGroupLevel(u):0,p=a[u-1];"groupFooter"===c&&"groupFooter"===p?.rowType&&(f=p.indentLevel-1),a.push({rowType:c,indentLevel:f,cells:a7({doc:i,dataProvider:e,rowIndex:u,wordWrapEnabled:s,columns:l,styles:d,rowType:c,backgroundColor:"header"===c?r:void 0,rtlEnabled:o}),rowIndex:u})}return a}(t,u,r,null===(f=i.rowOptions)||void 0===f||null===(p=f.headerStyles)||void 0===p?void 0:p.backgroundColor);i.customizeCell&&g.forEach(E=>E.cells.forEach(V=>i.customizeCell(V))),function M8(i){i.forEach(e=>{e.cells.forEach(t=>{var{pdfCell:r}=t;r.padding=CI(r.padding)})})}(g),function G8(i,e,t,r){var a=function $8(i,e,t,r,a){var n=e.getColumnsWidths().map(u=>Wh(i,u??150)),s=n.filter((u,c)=>!(0,m.$K)(a[c])).reduce(bI,0),o=a.filter(u=>(0,m.kE)(u)).reduce(bI,0),l=function K8(i,e,t){return bv(i)-e-t.left-t.right}(i,t,r),d=o<l?(l-o)/s:1;return n.map((u,c)=>{var f;return null!==(f=a[c])&&void 0!==f?f:u*d})}(i,e,r.topLeft.x,r.margin,r.columnWidths);t.forEach(n=>{n.cells.forEach((s,o)=>{var{pdfCell:d}=s;d._rect.w=a[o]})})}(t,u,g,i),function Y8(i,e){i.forEach(t=>{t.cells[0].pdfCell._rect.w-=t.indentLevel*e.indent})}(g,i),function j8(i){for(var e=0;e<i.length;e++)for(var t=i[e],r=0;r<t.cells.length;r++){var a=t.cells[r];if((0,m.$K)(a.colSpan)&&!(0,m.$K)(a.pdfCell.isMerged))for(var n=1;n<=a.colSpan;n++){var s=i[e].cells[r+n];a.pdfCell._rect.w+=s.pdfCell._rect.w,s.pdfCell._rect.w=0,s.pdfCell.isMerged=!0}}}(g),function U8(i,e,t){e.forEach(r=>{var n,a=r.cells.map(o=>o.pdfCell);if(t.onRowExporting){var s={rowCells:a};t.onRowExporting(s),(0,m.$K)(s.rowHeight)&&(n=s.rowHeight)}r.height=(0,m.$K)(n)?n:function Z8(i,e,t){if(e.length!==t.length)throw"the cells count must be equal to the count of the columns";for(var r=0,a=0;a<e.length;a++)if(!(0,m.$K)(e[a].rowSpan)){var n=e[a].pdfCell.text,s=e[a].pdfCell.padding,o=e[a].pdfCell.font,l=e[a].pdfCell.wordWrapEnabled,u=Sv(t[a],s);if((0,m.$K)(n)){var f=(""!==n?xd(i,n,o,{wordWrapEnabled:l,targetRectWidth:u}):0)+s.top+s.bottom;r<f&&(r=f)}}return r}(i,r.cells,a.map(o=>o._rect.w)),a.forEach(o=>{o._rect.h=r.height})})}(t,g,i),function q8(i){for(var e=0;e<i.length;e++)for(var t=i[e],r=0;r<t.cells.length;r++){var a=t.cells[r];if((0,m.$K)(a.rowSpan)&&!(0,m.$K)(a.pdfCell.isMerged))for(var n=1;n<=a.rowSpan;n++){var s=i[e+n].cells[r];a.pdfCell._rect.h+=s.pdfCell._rect.h,s.pdfCell._rect.h=0,s.pdfCell.isMerged=!0}}}(g),function e7(i,e){var t=function t7(i,e){var t=Array.from({length:e.length},()=>0),r=function i7(i){var e=t=>{var r=t.cells.map(a=>{var n;return null!==(n=a.rowSpan)&&void 0!==n?n:0});return Math.max(...r)};return[...i].sort((t,r)=>{var a=e(t),n=e(r);return a>n?1:n>a?-1:0})}(e);return r.forEach(a=>{a.cells.filter(s=>(0,m.$K)(s.rowSpan)).forEach(s=>{var o=Sv(s.pdfCell._rect.w,s.pdfCell.padding),d=xd(i,s.pdfCell.text,s.pdfCell.font,{wordWrapEnabled:s.pdfCell.wordWrapEnabled,targetRectWidth:o})+s.pdfCell.padding.top+s.pdfCell.padding.bottom,u=s.rowSpan+1,c=e.slice(a.rowIndex,a.rowIndex+u).reduce((g,w)=>g+w.height+t[w.rowIndex],0);if(d>c)for(var f=(d-c)/u,p=a.rowIndex;p<a.rowIndex+u;p++)t[p]+=f})}),t}(i,e);e.forEach(r=>{r.height+=t[r.rowIndex]}),e.forEach(r=>{r.cells.forEach(a=>{var n,s=(null!==(n=a.rowSpan)&&void 0!==n?n:0)+1;a.pdfCell._rect.h=e.slice(r.rowIndex,r.rowIndex+s).reduce((o,l)=>o+l.height,0)})})}(t,g),function J8(i,e,t){var r,a=t?.topLeft,n=t?.margin,s=(null!==(r=a?.y)&&void 0!==r?r:0)+n.top;e.forEach(o=>{var l,d=(null!==(l=a?.x)&&void 0!==l?l:0)+n.left,u=o.indentLevel*t.indent;o.cells.forEach(c=>{c.pdfCell._rect.x=d+u,c.pdfCell._rect.y=s,d+=c.pdfCell._rect.w}),s+=o.height})}(0,g,i),function X8(i){for(var e=0;e<i.length;e++)for(var t=i[e].cells,r=0;r<t.length;r++){var a=t[r].pdfCell,n=r>=1?t[r-1].pdfCell:null,s=e>=1?i[e-1].cells[r].pdfCell:null;!1!==a.drawLeftBorder||(0,m.$K)(t[r].colSpan)?(0,m.$K)(a.drawLeftBorder)||(0,m.$K)(n)&&!1===n.drawRightBorder&&(a.drawLeftBorder=!1):(0,m.$K)(n)&&(n.drawRightBorder=!1),!1===a.drawTopBorder?(0,m.$K)(s)&&(s.drawBottomBorder=!1):(0,m.$K)(a.drawTopBorder)||(0,m.$K)(s)&&!1===s.drawBottomBorder&&(a.drawTopBorder=!1)}}(g),function z8(i,e){e.forEach(t=>{t.cells.forEach(r=>{var{pdfCell:a}=r;if((0,m.$K)(a.text)){var n=wv(i,a.text,a.font,{wordWrapEnabled:a.wordWrapEnabled,targetRectWidth:Sv(a._rect.w,a.padding)});a.text=n.join("\n")}})})}(t,g);var w=function g7(i){var e=i.getFont();return{borderWidth:Iv(i),borderColor:i.getDrawColor(),font:{name:e.fontName,style:e.fontStyle,size:i.getFontSize()},textColor:i.getTextColor()}}(t),x=!!r.option("rtlEnabled"),y=function T7(i,e,t,r,a){if(0===e.length)return[[]];var n={x:bv(i)-t.margin.right,y:H8(i)-t.margin.bottom},s=e.filter(p=>"header"===p.rowType),o=s.reduce((p,g)=>p+g.height,0),l=AI(TI(e),t.margin.top,"y","h",(p,g)=>ai(g+(!p&&t.repeatHeaders?o:0))<=ai(n.y),(p,g,w,x)=>{var y={sourceRect:p,topRect:{x:p.x,y:p.y,w:p.w,h:g-p.y},bottomRect:{x:p.x,y:g,w:p.w,h:p.h-(g-p.y)}};a(y),w.push(y.topRect),x.push(y.bottomRect)},((i,e,t,r)=>(a,n)=>{var s=[],o=[],l=0,d=0;return n.forEach(u=>{var{w:c,sourceCellInfo:f}=u,p=!a&&e.repeatHeaders?t:t+e.topLeft.y,g=yd(i,f.text,f.font).h,w=f.padding.top+f.padding.bottom,y=Math.floor((r.y-p-w-e.margin.top)/(g*i.getLineHeightFactor())),E=wv(i,f.text,f.font,{wordWrapEnabled:f.wordWrapEnabled,targetRectWidth:c});if(y<E.length){var V=E.slice(0,y).join("\n"),F=xd(i,V,f.font,{wordWrapEnabled:f.wordWrapEnabled,targetRectWidth:c});l=Math.max(l,F+w),d=u.h-F,s.push(Kh(u,V,e.margin.top)),o.push(Kh(u,E.slice(y).join("\n"),e.margin.top))}else{var q=xd(i,f.text,f.font,{wordWrapEnabled:f.wordWrapEnabled,targetRectWidth:c});l=Math.max(l,q+w),d=Math.max(d,q+w),s.push(Kh(u,f.text,e.margin.top)),o.push(Kh(u,"",e.margin.top))}}),s.forEach(u=>u.h=l),o.forEach(u=>u.h=d),[s,o]})(i,t,o,n));if(t.repeatHeaders)for(var d=1;d<l.length;d++){l[d].forEach(p=>p.y+=o);var u=TI(s);u.forEach(p=>{p.y-=t.topLeft.y}),l[d]=[...u,...l[d]]}for(var c=0;c<l.length;){var f=AI(l[c],t.margin.left,"x","w",(p,g)=>ai(g)<=ai(n.x),(p,g,w,x)=>{var y={sourceRect:p,leftRect:{x:p.x,y:p.y,w:g-p.x,h:p.h},rightRect:{x:g,y:p.y,w:p.w-(g-p.x),h:p.h}};r(y),w.push(y.leftRect),x.push(y.rightRect)});f.length>1?(l.splice(c,1,...f),c+=f.length):c+=1}return l.map(p=>p.map(g=>(0,ye.Z)({},g.sourceCellInfo,{_rect:g})))}(t,g,i,E=>{var V,{sourceRect:F,leftRect:q,rightRect:ee}=E,X={},M={};if((null===(V=F.sourceCellInfo.text)||void 0===V?void 0:V.length)>0)if(x){var P,U,$,me,pe,xe,fe=t.getTextWidth(F.sourceCellInfo.text)>q.w,B=!(0,m.$K)(F.sourceCellInfo.horizontalAlign)||"right"===F.sourceCellInfo.horizontalAlign;if(fe||!B)"right"===(null===(P=F.sourceCellInfo)||void 0===P?void 0:P.horizontalAlign)?pe=(me=null!==(xe=F.sourceCellInfo._textLeftOffset)&&void 0!==xe?xe:0)+q.w:"center"===(null===(U=F.sourceCellInfo)||void 0===U?void 0:U.horizontalAlign)?me=(pe=F.x+F.w-(ee.x+ee.w)+F.sourceCellInfo._rect.w/2-q.w/2)-ee.w:"left"===(null===($=F.sourceCellInfo)||void 0===$?void 0:$.horizontalAlign)&&(me=(pe=F.x+F.w-(ee.x+ee.w))-ee.w),X=(0,ye.Z)({},{_textLeftOffset:me}),M=(0,ye.Z)({},{_textLeftOffset:pe});else M=(0,ye.Z)({},{text:""})}else{var _e=t.getTextWidth(F.sourceCellInfo.text)>q.w,Ae=!(0,m.$K)(F.sourceCellInfo.horizontalAlign)||"left"===F.sourceCellInfo.horizontalAlign;if(_e||!Ae){var Ie,Me,D,z,K,te;if("left"===(null===(Ie=F.sourceCellInfo)||void 0===Ie?void 0:Ie.horizontalAlign))K=(z=null!==(te=F.sourceCellInfo._textLeftOffset)&&void 0!==te?te:0)-q.w;else if("center"===(null===(Me=F.sourceCellInfo)||void 0===Me?void 0:Me.horizontalAlign)){var de,Ce=null!==(de=F.sourceCellInfo._textLeftOffset)&&void 0!==de?de:0;z=Ce+(F.x+F.w/2)-(q.x+q.w/2),K=Ce+(F.x+F.w/2)-(ee.x+ee.w/2)}else"right"===(null===(D=F.sourceCellInfo)||void 0===D?void 0:D.horizontalAlign)&&(z=F.x+F.w-(q.x+q.w),K=F.x+F.w-(ee.x+ee.w));X=(0,ye.Z)({},{_textLeftOffset:z}),M=(0,ye.Z)({},{_textLeftOffset:K})}else M=(0,ye.Z)({},{text:""})}q.sourceCellInfo=(0,ye.Z)({},F.sourceCellInfo,{debugSourceCellInfo:F.sourceCellInfo},X),ee.sourceCellInfo=(0,ye.Z)({},F.sourceCellInfo,{debugSourceCellInfo:F.sourceCellInfo},M)},E=>{var V,{sourceRect:F,topRect:q,bottomRect:ee}=E,X={},M={};if((null===(V=F.sourceCellInfo.text)||void 0===V?void 0:V.length)>0){var fe,B=t.getTextDimensions(F.sourceCellInfo.text).h>q.h,P="top"===(null===(fe=F.sourceCellInfo)||void 0===fe?void 0:fe.verticalAlign);if(B||!P){var U,$,me,pe,xe,_e;if("top"===(null===(U=F.sourceCellInfo)||void 0===U?void 0:U.verticalAlign))xe=(pe=null!==(_e=F.sourceCellInfo._textTopOffset)&&void 0!==_e?_e:0)-q.h;else if("middle"===(null===($=F.sourceCellInfo)||void 0===$?void 0:$.verticalAlign)){var Ae,Ie=null!==(Ae=F.sourceCellInfo._textTopOffset)&&void 0!==Ae?Ae:0;pe=Ie+(F.y+F.h/2)-(q.y+q.h/2),xe=Ie+(F.y+F.h/2)-(ee.y+ee.h/2)}else"bottom"===(null===(me=F.sourceCellInfo)||void 0===me?void 0:me.verticalAlign)&&(pe=F.y+F.h-(q.y+q.h),xe=F.y+F.h-(ee.y+ee.h));X=(0,ye.Z)({},{_textTopOffset:pe}),M=(0,ye.Z)({},{_textTopOffset:xe})}else M=(0,ye.Z)({},{text:""})}q.sourceCellInfo=(0,ye.Z)({},F.sourceCellInfo,{debugSourceCellInfo:F.sourceCellInfo},X),ee.sourceCellInfo=(0,ye.Z)({},F.sourceCellInfo,{debugSourceCellInfo:F.sourceCellInfo},M)});x&&function W8(i,e,t){e.forEach(r=>{r.forEach(a=>{var n=bv(i)-(a._rect.x+a._rect.w);a._rect.x=n+(t.margin.left-t.margin.right)})})}(t,y,i),y.forEach((E,V)=>{if(V>0&&function C7(i){i.addPage(),function b7(i){(0,m.$K)(i.getLineWidth)||(i.__borderWidth=null)}(i)}(t),function d7(i,e,t,r){t.forEach(a=>{var{_rect:n,gridCell:s}=a,o=(0,pi.Z)(a,l7),{x:l,y:d,w:u,h:c}=n,p={doc:i,rect:{x:l,y:d,w:u,h:c},pdfCell:o,gridCell:s,cancel:!1};e?.(p),p.cancel||(function c7(i,e){(0,m.$K)(e.backgroundColor)&&(Ev(i,"fill",e.backgroundColor),SI(i,e._rect.x,e._rect.y,e._rect.w,e._rect.h,"F"))}(i,a),function p7(i,e,t){if((0,m.$K)(e.text)&&""!==e.text){var{textColor:r,font:a,_rect:n,padding:s}=e;!function v7(i,e,t){var{textColor:r,font:a}=e;Ev(i,"text",(0,m.$K)(r)?r:t.textColor);var n=(0,m.$K)(a)?(0,N.l)({},t.font,a):t.font,s=i.getFont();(n.name!==s.fontName||n.style!==s.fontStyle||(0,m.$K)(n.weight))&&i.setFont(n.name,n.style,n.weight),n.size!==i.getFontSize()&&i.setFontSize(n.size)}(i,{textColor:r,font:a},t);var l,d,o={x:n.x+s.left,y:n.y+s.top,w:n.w-(s.left+s.right),h:n.h-(s.top+s.bottom)};((0,m.$K)(e._textLeftOffset)||(0,m.$K)(e._textTopOffset))&&(o.x=o.x+(null!==(l=e._textLeftOffset)&&void 0!==l?l:0),o.y=o.y+(null!==(d=e._textTopOffset)&&void 0!==d?d:0),i.saveGraphicsState(),function w7(i,e,t,r,a){i.moveTo(ai(e),ai(t)),i.lineTo(ai(e+r),ai(t)),i.lineTo(ai(e+r),ai(t+a)),i.lineTo(ai(e),ai(t+a)),i.clip(),i.discardPath()}(i,e._rect.x,e._rect.y,e._rect.w,e._rect.h)),function h7(i,e,t,r,a,n){var s=e.split("\n"),o=s.length,l=xd(i,s[0],i.getFont(),{wordWrapEnabled:!1,targetRectWidth:1e9}),d=r??"middle",u=a??"left",c={top:0,middle:.5,bottom:1},f=t.y+t.h*c[d]-l*(o-1)*c[d]+function u7(i){return(i.getLineHeightFactor()-1.15)*i.getFontSize()}(i),p=t.x+t.w*{left:0,center:.5,right:1}[u],g=(0,N.l)({baseline:d,align:u},n);i.text(s.join("\n"),ai(p),ai(f),g)}(i,e.text,o,e.verticalAlign,e.horizontalAlign,e._internalTextOptions),((0,m.$K)(e._textLeftOffset)||(0,m.$K)(e._textTopOffset))&&i.restoreGraphicsState()}}(i,a,r))})}(t,i.customDrawCell,E,w),function f7(i,e,t){e.filter(r=>!(0,m.$K)(r.borderColor)).forEach(r=>{xv(i,r._rect,r,t)}),e.filter(r=>(0,m.$K)(r.borderColor)).forEach(r=>{xv(i,r._rect,r,t)})}(t,E,w),(0,m.$K)(E)&&0===E.length){var q=function Q8(i,e,t){var r,a,n,s,o,l,d,u,c,f;e.forEach(y=>{(!(0,m.$K)(d)||d>y._rect.x)&&(d=y._rect.x),(!(0,m.$K)(u)||u>y._rect.y)&&(u=y._rect.y),(!(0,m.$K)(c)||c<y._rect.x+y._rect.w)&&(c=y._rect.x+y._rect.w),(!(0,m.$K)(f)||f<y._rect.y+y._rect.h)&&(f=y._rect.y+y._rect.h)});var p=null!==(r=null!==(a=d)&&void 0!==a?a:null==t||null===(n=t.topLeft)||void 0===n?void 0:n.x)&&void 0!==r?r:0,g=null!==(s=null!==(o=u)&&void 0!==o?o:null==t||null===(l=t.topLeft)||void 0===l?void 0:l.y)&&void 0!==s?s:0;return{x:p,y:g,w:(0,m.$K)(c)?c-p:0,h:(0,m.$K)(f)?f-g:0}}(0,E,i),ee=function n7(){return yv.base}();!function _7(i,e,t,r){xv(i,e,t,r)}(t,q,ee,w)}}),function m7(i,e){var{borderWidth:t,borderColor:r,font:a,textColor:n}=e,s=i.getFont();(s.fontName!==a.name||s.fontStyle!==a.style)&&i.setFont(a.name,a.style,void 0),i.getFontSize()!==a.size&&i.setFontSize(a.size),Iv(i)!==t&&xI(i,t),i.getDrawColor()!==r&&i.setDrawColor(r),i.getTextColor()!==n&&i.setTextColor(n)}(t,w),c()}).always(()=>{o&&r.option("loadPanel.enabled",o),n.enabled&&(0,We.Ym)()&&l.dispose()})})};var gr=be(6443),RI="dx-toast",Ls=RI+"-",F7=Ls+"wrapper",k7=Ls+"content",M7=Ls+"message",H7=Ls+"icon",z7=["info","warning","error","success"],Tv=[],$7={top:{my:"top",at:"top",of:null,offset:"0 0"},bottom:{my:"bottom",at:"bottom",of:null,offset:"0 -20"},center:{my:"center",at:"center",of:null,offset:"0 0"},right:{my:"center right",at:"center right",of:null,offset:"0 0"},left:{my:"center left",at:"center left",of:null,offset:"0 0"}},K7={h:0,v:0};(0,sC.Z.add)(function(){k.Z.subscribeGlobal(it.Z.getDocument(),Bt.Z.down,function(i){for(var e=Tv.length-1;e>=0;e--)if(!Tv[e]._proxiedDocumentDownHandler(i))return})});var LI=ss.Z.inherit({_getDefaultOptions:function(){return(0,N.l)(this.callBase(),{message:"",type:"info",displayTime:2e3,position:"bottom center",animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},shading:!1,height:"auto",hideTopOverlayHandler:null,preventScrollEvents:!1,closeOnSwipe:!0,closeOnClick:!1})},_defaultOptionsRules:function(){var i={displayTime:(0,_t.yj)()?4e3:2e3,hideOnOutsideClick:!0,animation:{show:{type:"fade",duration:200,from:0,to:1},hide:{type:"fade",duration:200,from:1,to:0}}};return this.callBase().concat([{device:e=>"phone"===e.deviceType,options:(0,ye.Z)({width:"calc(100vw - ".concat(40,"px)")},i)},{device:e=>"tablet"===e.deviceType,options:(0,ye.Z)({width:"auto",maxWidth:"80vw"},i)},{device:e=>(0,_t.yj)()&&"desktop"===e.deviceType,options:{minWidth:344,maxWidth:568,displayTime:4e3}}])},_init:function(){this.callBase(),this._posStringToObject()},_renderContentImpl:function(){this._message=(0,b.Z)("<div>").addClass(M7).text(this.option("message")).appendTo(this.$content()),this.setAria("role","alert",this._message),z7.includes(this.option("type").toLowerCase())&&this.$content().prepend((0,b.Z)("<div>").addClass(H7)),this.callBase()},_render:function(){this.callBase(),this.$element().addClass(RI),this.$wrapper().addClass(F7),this.$content().addClass(Ls+String(this.option("type")).toLowerCase()),this.$content().addClass(k7),this._toggleCloseEvents("Swipe"),this._toggleCloseEvents("Click")},_toggleCloseEvents:function(i){var e="dx"+i.toLowerCase();k.Z.off(this.$content(),e),this.option("closeOn"+i)&&k.Z.on(this.$content(),e,this.hide.bind(this))},_posStringToObject:function(){if((0,m.HD)(this.option("position"))){var i=this.option("position").split(" ")[0],e=this.option("position").split(" ")[1];switch(this.option("position",(0,N.l)({boundaryOffset:K7},$7[i])),e){case"center":case"left":case"right":this.option("position").at+=" "+e,this.option("position").my+=" "+e}}},_show:function(){return this.callBase.apply(this,arguments).always(function(){clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(this.hide.bind(this),this.option("displayTime"))}.bind(this))},_overlayStack:function(){return Tv},_zIndexInitValue:function(){return this.callBase()+8e3},_dispose:function(){clearTimeout(this._hideTimeout),this.callBase()},_optionChanged:function(i){switch(i.name){case"type":this.$content().removeClass(Ls+i.previousValue),this.$content().addClass(Ls+String(i.value).toLowerCase());break;case"message":this._message&&this._message.text(i.value);break;case"closeOnSwipe":this._toggleCloseEvents("Swipe");break;case"closeOnClick":this._toggleCloseEvents("Click");break;case"displayTime":break;default:this.callBase(i)}}});(0,It.Z)("dxToast",LI);const U7=LI;var PI=(0,We.Jj)(),BI=null,VI={},eK=(i,e)=>{var{toastWidth:t,toastHeight:r,windowHeight:a,windowWidth:n}=e;switch(i){case"top left":return{top:10,left:10};case"top right":return{top:10,right:10};case"bottom left":return{bottom:10,left:10};case"bottom right":return{bottom:10,right:10};case"top center":return{top:10,left:Math.round(n/2-t/2)};case"left center":return{top:Math.round(a/2-r/2),left:10};case"right center":return{top:Math.round(a/2-r/2),right:10};case"center":return{top:Math.round(a/2-r/2),left:Math.round(n/2-t/2)};default:return{bottom:10,left:Math.round(n/2-t/2)}}},tK=(i,e,t)=>{var r,a,n,s,o,l,d,u,c,f,p,g,{toastWidth:w,toastHeight:x,windowHeight:y,windowWidth:E}=t;switch(i.replace(/-push|-stack/g,"")){case"up":return{bottom:null!==(r=e.bottom)&&void 0!==r?r:y-x-e.top,top:"",left:null!==(a=e.left)&&void 0!==a?a:"",right:null!==(n=e.right)&&void 0!==n?n:""};case"down":return{top:null!==(s=e.top)&&void 0!==s?s:y-x-e.bottom,bottom:"",left:null!==(o=e.left)&&void 0!==o?o:"",right:null!==(l=e.right)&&void 0!==l?l:""};case"left":return{right:null!==(d=e.right)&&void 0!==d?d:E-w-e.left,left:"",top:null!==(u=e.top)&&void 0!==u?u:"",bottom:null!==(c=e.bottom)&&void 0!==c?c:""};case"right":return{left:null!==(f=e.left)&&void 0!==f?f:E-w-e.right,right:"",top:null!==(p=e.top)&&void 0!==p?p:"",bottom:null!==(g=e.bottom)&&void 0!==g?g:""}}};const Av=function j7(i,e,t){var r=(0,m.PO)(i)?i:{message:i},a=(0,m.PO)(e)?e:void 0,n=(0,m.PO)(e)?void 0:e,{onHidden:s}=r;if(null!=a&&a.position){var{position:o}=a,l=a.direction||(i=>(0,m.HD)(i)&&i.includes("top")?"down-push":"up-push")(o),d=(0,m.HD)(o)?o:"".concat(o.top,"-").concat(o.left,"-").concat(o.bottom,"-").concat(o.right),{onShowing:u}=r,c=(i=>VI[i]||(i=>{var e=(0,b.Z)("<div>").appendTo((0,rh.S3)());return VI[i]=e,e})(i))(d);((i,e)=>{var t="dx-toast-stack dx-toast-stack-".concat(e,"-direction");i.removeAttr("class").addClass(t)})(c,l),(0,N.l)(r,{container:c,_skipContentPositioning:!0,onShowing:function(f){((i,e,t)=>{var{offsetWidth:r,offsetHeight:a}=i.children().first().get(0),n={toastWidth:r,toastHeight:a,windowHeight:PI.innerHeight,windowWidth:PI.innerWidth},s=(0,m.HD)(t)?eK(t,n):t,o=tK(e,s,n);i.css(o)})(c,l,o),u?.(f)}})}(0,N.l)(r,{type:n,displayTime:t,onHidden:function(f){(0,b.Z)(f.element).remove(),s?.(f)}}),BI=(0,b.Z)("<div>").appendTo((0,rh.S3)()),new U7(BI,r).show()};var Jt=be(1002),Gt=Uint8Array,Fi=Uint16Array,Nn=Uint32Array,Do=new Gt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Oo=new Gt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ed=new Gt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),FI=function(i,e){for(var t=new Fi(31),r=0;r<31;++r)t[r]=e+=1<<i[r-1];var a=new Nn(t[30]);for(r=1;r<30;++r)for(var n=t[r];n<t[r+1];++n)a[n]=n-t[r]<<5|r;return[t,a]},kI=FI(Do,2),Dv=kI[0],Gh=kI[1];Dv[28]=258,Gh[258]=28;for(var MI=FI(Oo,0),HI=MI[0],Ov=MI[1],Id=new Fi(32768),li=0;li<32768;++li){var Fn=(43690&li)>>>1|(21845&li)<<1;Id[li]=((65280&(Fn=(61680&(Fn=(52428&Fn)>>>2|(13107&Fn)<<2))>>>4|(3855&Fn)<<4))>>>8|(255&Fn)<<8)>>>1}var Mr=function(i,e,t){for(var r=i.length,a=0,n=new Fi(e);a<r;++a)++n[i[a]-1];var o,s=new Fi(e);for(a=0;a<e;++a)s[a]=s[a-1]+n[a-1]<<1;if(t){o=new Fi(1<<e);var l=15-e;for(a=0;a<r;++a)if(i[a])for(var d=a<<4|i[a],u=e-i[a],c=s[i[a]-1]++<<u,f=c|(1<<u)-1;c<=f;++c)o[Id[c]>>>l]=d}else for(o=new Fi(r),a=0;a<r;++a)o[a]=Id[s[i[a]-1]++]>>>15-i[a];return o},un=new Gt(288);for(li=0;li<144;++li)un[li]=8;for(li=144;li<256;++li)un[li]=9;for(li=256;li<280;++li)un[li]=7;for(li=280;li<288;++li)un[li]=8;var Ro=new Gt(32);for(li=0;li<32;++li)Ro[li]=5;var ZI=Mr(un,9,0),zI=Mr(un,9,1),WI=Mr(Ro,5,0),$I=Mr(Ro,5,1),Uh=function(i){for(var e=i[0],t=1;t<i.length;++t)i[t]>e&&(e=i[t]);return e},Hr=function(i,e,t){var r=e/8>>0;return(i[r]|i[r+1]<<8)>>>(7&e)&t},jh=function(i,e){var t=e/8>>0;return(i[t]|i[t+1]<<8|i[t+2]<<16)>>>(7&e)},Td=function(i){return(i/8>>0)+(7&i&&1)},Ps=function(i,e,t){(null==e||e<0)&&(e=0),(null==t||t>i.length)&&(t=i.length);var r=new(i instanceof Fi?Fi:i instanceof Nn?Nn:Gt)(t-e);return r.set(i.subarray(e,t)),r},Na=function(i,e,t){var r=e/8>>0;i[r]|=t<<=7&e,i[r+1]|=t>>>8},Lo=function(i,e,t){var r=e/8>>0;i[r]|=t<<=7&e,i[r+1]|=t>>>8,i[r+2]|=t>>>16},Yh=function(i,e){for(var t=[],r=0;r<i.length;++r)i[r]&&t.push({s:r,f:i[r]});var a=t.length,n=t.slice();if(!a)return[new Gt(0),0];if(1==a){var s=new Gt(t[0].s+1);return s[t[0].s]=1,[s,1]}t.sort(function(q,ee){return q.f-ee.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],d=0,u=1,c=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=a-1;)o=t[t[d].f<t[c].f?d++:c++],l=t[d!=u&&t[d].f<t[c].f?d++:c++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};var f=n[0].s;for(r=1;r<a;++r)n[r].s>f&&(f=n[r].s);var p=new Fi(f+1),g=Xh(t[u-1],p,0);if(g>e){r=0;var w=0,x=g-e,y=1<<x;for(n.sort(function(ee,X){return p[X.s]-p[ee.s]||ee.f-X.f});r<a;++r){var E=n[r].s;if(!(p[E]>e))break;w+=y-(1<<g-p[E]),p[E]=e}for(w>>>=x;w>0;){var V=n[r].s;p[V]<e?w-=1<<e-p[V]++-1:++r}for(;r>=0&&w;--r){var F=n[r].s;p[F]==e&&(--p[F],++w)}g=e}return[new Gt(p),g]},Xh=function(i,e,t){return-1==i.s?Math.max(Xh(i.l,e,t+1),Xh(i.r,e,t+1)):e[i.s]=t},Rv=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new Fi(++e),r=0,a=i[0],n=1,s=function(l){t[r++]=l},o=1;o<=e;++o)if(i[o]==a&&o!=e)++n;else{if(!a&&n>2){for(;n>138;n-=138)s(32754);n>2&&(s(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(s(a),--n;n>6;n-=6)s(8304);n>2&&(s(n-3<<5|8208),n=0)}for(;n--;)s(a);n=1,a=i[o]}return[t.subarray(0,r),e]},Po=function(i,e){for(var t=0,r=0;r<e.length;++r)t+=i[r]*e[r];return t},Ad=function(i,e,t){var r=t.length,a=Td(e+2);i[a]=255&r,i[a+1]=r>>>8,i[a+2]=255^i[a],i[a+3]=255^i[a+1];for(var n=0;n<r;++n)i[a+n+4]=t[n];return 8*(a+4+r)},Lv=function(i,e,t,r,a,n,s,o,l,d,u){Na(e,u++,t),++a[256];for(var c=Yh(a,15),f=c[0],p=c[1],g=Yh(n,15),w=g[0],x=g[1],y=Rv(f),E=y[0],V=y[1],F=Rv(w),q=F[0],ee=F[1],X=new Fi(19),M=0;M<E.length;++M)X[31&E[M]]++;for(M=0;M<q.length;++M)X[31&q[M]]++;for(var le=Yh(X,7),fe=le[0],B=le[1],P=19;P>4&&!fe[Ed[P-1]];--P);var pe,xe,_e,Ae,U=d+5<<3,$=Po(a,un)+Po(n,Ro)+s,me=Po(a,f)+Po(n,w)+s+14+3*P+Po(X,fe)+(2*X[16]+3*X[17]+7*X[18]);if(U<=$&&U<=me)return Ad(e,u,i.subarray(l,l+d));if(Na(e,u,1+(me<$)),u+=2,me<$){pe=Mr(f,p,0),xe=f,_e=Mr(w,x,0),Ae=w;var Ie=Mr(fe,B,0);for(Na(e,u,V-257),Na(e,u+5,ee-1),Na(e,u+10,P-4),u+=14,M=0;M<P;++M)Na(e,u+3*M,fe[Ed[M]]);u+=3*P;for(var Me=[E,q],D=0;D<2;++D){var z=Me[D];for(M=0;M<z.length;++M)Na(e,u,Ie[K=31&z[M]]),u+=fe[K],K>15&&(Na(e,u,z[M]>>>5&127),u+=z[M]>>>12)}}else pe=ZI,xe=un,_e=WI,Ae=Ro;for(M=0;M<o;++M)if(r[M]>255){var K;Lo(e,u,pe[257+(K=r[M]>>>18&31)]),u+=xe[K+257],K>7&&(Na(e,u,r[M]>>>23&31),u+=Do[K]);var te=31&r[M];Lo(e,u,_e[te]),u+=Ae[te],te>3&&(Lo(e,u,r[M]>>>5&8191),u+=Oo[te])}else Lo(e,u,pe[r[M]]),u+=xe[r[M]];return Lo(e,u,pe[256]),u+xe[256]},KI=new Nn([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),GI=new Gt(0),Qh=function(i,e,t,r,a){return function(i,e,t,r,a,n){var s=i.length,o=new Gt(r+s+5*(1+Math.floor(s/7e3))+a),l=o.subarray(r,o.length-a),d=0;if(!e||s<8)for(var u=0;u<=s;u+=65535){var c=u+65535;c<s?d=Ad(l,d,i.subarray(u,c)):(l[u]=n,d=Ad(l,d,i.subarray(u,s)))}else{for(var f=KI[e-1],p=f>>>13,g=8191&f,w=(1<<t)-1,x=new Fi(32768),y=new Fi(w+1),E=Math.ceil(t/3),V=2*E,F=function(ht){return(i[ht]^i[ht+1]<<E^i[ht+2]<<V)&w},q=new Nn(25e3),ee=new Fi(288),X=new Fi(32),M=0,le=0,fe=(u=0,0),B=0,P=0;u<s;++u){var U=F(u),$=32767&u,me=y[U];if(x[$]=me,y[U]=$,B<=u){var pe=s-u;if((M>7e3||fe>24576)&&pe>423){d=Lv(i,l,0,q,ee,X,le,fe,P,u-P,d),fe=M=le=0,P=u;for(var xe=0;xe<286;++xe)ee[xe]=0;for(xe=0;xe<30;++xe)X[xe]=0}var _e=2,Ae=0,Ie=g,Me=$-me&32767;if(pe>2&&U==F(u-Me))for(var D=Math.min(p,pe)-1,z=Math.min(32767,u),K=Math.min(258,pe);Me<=z&&--Ie&&$!=me;){if(i[u+_e]==i[u+_e-Me]){for(var te=0;te<K&&i[u+te]==i[u+te-Me];++te);if(te>_e){if(_e=te,Ae=Me,te>D)break;var de=Math.min(Me,te-2),Ce=0;for(xe=0;xe<de;++xe){var we=u-Me+xe+32768&32767,ke=we-x[we]+32768&32767;ke>Ce&&(Ce=ke,me=we)}}}Me+=($=me)-(me=x[$])+32768&32767}if(Ae){q[fe++]=268435456|Gh[_e]<<18|Ov[Ae];var Fe=31&Gh[_e],qe=31&Ov[Ae];le+=Do[Fe]+Oo[qe],++ee[257+Fe],++X[qe],B=u+_e,++M}else q[fe++]=i[u],++ee[i[u]]}}d=Lv(i,l,n,q,ee,X,le,fe,P,u-P,d),n||(d=Ad(l,d,GI))}return Ps(o,0,r+Td(d)+a)}(i,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):12+e.mem,t,r,!a)};function Od(i,e){void 0===e&&(e={});var t=function(){var i=1,e=0;return{p:function(t){for(var r=i,a=e,n=t.length,s=0;s!=n;){for(var o=Math.min(s+5552,n);s<o;++s)a+=r+=t[s];r%=65521,a%=65521}i=r,e=a},d:function(){return(i>>>8<<16|(255&e)<<8|e>>>8)+2*((255&i)<<23)}}}();t.p(i);var r=Qh(i,e,2,4);return function(i,e){var t=e.level,r=0==t?0:t<6?1:9==t?3:2;i[0]=120,i[1]=r<<6|(r?32-2*r:1)}(r,e),function(i,e,t){for(;t;++e)i[e]=t,t>>>=8}(r,r.length-4,t.d()),r}function ic(i,e){return function(i,e,t){var r=i.length,a=!e||t,n=!t||t.i;t||(t={}),e||(e=new Gt(3*r));var s=function(de){var Ce=e.length;if(de>Ce){var we=new Gt(Math.max(2*Ce,de));we.set(e),e=we}},o=t.f||0,l=t.p||0,d=t.b||0,u=t.l,c=t.d,f=t.m,p=t.n,g=8*r;do{if(!u){t.f=o=Hr(i,l,1);var w=Hr(i,l+1,3);if(l+=3,!w){var y=i[(x=Td(l)+4)-4]|i[x-3]<<8,E=x+y;if(E>r){if(n)throw"unexpected EOF";break}a&&s(d+y),e.set(i.subarray(x,E),d),t.b=d+=y,t.p=l=8*E;continue}if(1==w)u=zI,c=$I,f=9,p=5;else{if(2!=w)throw"invalid block type";var V=Hr(i,l,31)+257,F=Hr(i,l+10,15)+4,q=V+Hr(i,l+5,31)+1;l+=14;for(var ee=new Gt(q),X=new Gt(19),M=0;M<F;++M)X[Ed[M]]=Hr(i,l+3*M,7);l+=3*F;var le=Uh(X),fe=(1<<le)-1;if(!n&&l+q*(le+7)>g)break;var B=Mr(X,le,1);for(M=0;M<q;){var x,P=B[Hr(i,l,fe)];if(l+=15&P,(x=P>>>4)<16)ee[M++]=x;else{var U=0,$=0;for(16==x?($=3+Hr(i,l,3),l+=2,U=ee[M-1]):17==x?($=3+Hr(i,l,7),l+=3):18==x&&($=11+Hr(i,l,127),l+=7);$--;)ee[M++]=U}}var me=ee.subarray(0,V),pe=ee.subarray(V);f=Uh(me),p=Uh(pe),u=Mr(me,f,1),c=Mr(pe,p,1)}if(l>g)throw"unexpected EOF"}a&&s(d+131072);for(var xe=(1<<f)-1,_e=(1<<p)-1,Ae=f+p+18;n||l+Ae<g;){var Ie=(U=u[jh(i,l)&xe])>>>4;if((l+=15&U)>g)throw"unexpected EOF";if(!U)throw"invalid length/literal";if(Ie<256)e[d++]=Ie;else{if(256==Ie){u=null;break}var Me=Ie-254;Ie>264&&(Me=Hr(i,l,(1<<(D=Do[M=Ie-257]))-1)+Dv[M],l+=D);var z=c[jh(i,l)&_e],K=z>>>4;if(!z)throw"invalid distance";if(l+=15&z,pe=HI[K],K>3){var D=Oo[K];pe+=jh(i,l)&(1<<D)-1,l+=D}if(l>g)throw"unexpected EOF";a&&s(d+131072);for(var te=d+Me;d<te;d+=4)e[d]=e[d-pe],e[d+1]=e[d+1-pe],e[d+2]=e[d+2-pe],e[d+3]=e[d+3-pe];d=te}}t.l=u,t.p=l,t.b=d,u&&(o=1,t.m=f,t.d=c,t.n=p)}while(!o);return d==e.length?e:Ps(e,0,d)}((function(i){if(8!=(15&i[0])||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(32&i[1])throw"invalid zlib data: preset dictionaries not supported"}(i),i.subarray(2,-4)),e)}var ut=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function kv(){ut.console&&"function"==typeof ut.console.log&&ut.console.log.apply(ut.console,arguments)}var Qt={log:kv,warn:function(i){ut.console&&("function"==typeof ut.console.warn?ut.console.warn.apply(ut.console,arguments):kv.call(null,arguments))},error:function(i){ut.console&&("function"==typeof ut.console.error?ut.console.error.apply(ut.console,arguments):kv(i))}};function Mv(i,e,t){var r=new XMLHttpRequest;r.open("GET",i),r.responseType="blob",r.onload=function(){Bs(r.response,e,t)},r.onerror=function(){Qt.error("could not download file")},r.send()}function h1(i){var e=new XMLHttpRequest;e.open("HEAD",i,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function ac(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}}var Rd,Hv,Bs=ut.saveAs||("object"!==(typeof window>"u"?"undefined":(0,Jt.Z)(window))||window!==ut?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,e,t){var r=ut.URL||ut.webkitURL,a=document.createElement("a");a.download=e=e||i.name||"download",a.rel="noopener","string"==typeof i?(a.href=i,a.origin!==location.origin?h1(a.href)?Mv(i,e,t):ac(a,a.target="_blank"):ac(a)):(a.href=r.createObjectURL(i),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){ac(a)},0))}:"msSaveOrOpenBlob"in navigator?function(i,e,t){if(e=e||i.name||"download","string"==typeof i)if(h1(i))Mv(i,e,t);else{var r=document.createElement("a");r.href=i,r.target="_blank",setTimeout(function(){ac(r)})}else navigator.msSaveOrOpenBlob((a=i,void 0===(n=t)?n={autoBom:!1}:"object"!==(0,Jt.Z)(n)&&(Qt.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a),e);var a,n}:function(i,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof i)return Mv(i,e,t);var a="application/octet-stream"===i.type,n=/constructor/i.test(ut.HTMLElement)||ut.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&n)&&"object"===(typeof FileReader>"u"?"undefined":(0,Jt.Z)(FileReader))){var o=new FileReader;o.onloadend=function(){var u=o.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},o.readAsDataURL(i)}else{var l=ut.URL||ut.webkitURL,d=l.createObjectURL(i);r?r.location=d:location.href=d,r=null,setTimeout(function(){l.revokeObjectURL(d)},4e4)}});function c1(i){var e;i=i||"",this.ok=!1,"#"==i.charAt(0)&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<t.length;r++){var n=t[r].process,s=t[r].re.exec(i);s&&(e=n(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),d=this.b.toString(16);return 1==o.length&&(o="0"+o),1==l.length&&(l="0"+l),1==d.length&&(d="0"+d),"#"+o+l+d}}function Zv(i,e){var t=i[0],r=i[1],a=i[2],n=i[3];t=Xi(t,r,a,n,e[0],7,-680876936),n=Xi(n,t,r,a,e[1],12,-389564586),a=Xi(a,n,t,r,e[2],17,606105819),r=Xi(r,a,n,t,e[3],22,-1044525330),t=Xi(t,r,a,n,e[4],7,-176418897),n=Xi(n,t,r,a,e[5],12,1200080426),a=Xi(a,n,t,r,e[6],17,-1473231341),r=Xi(r,a,n,t,e[7],22,-45705983),t=Xi(t,r,a,n,e[8],7,1770035416),n=Xi(n,t,r,a,e[9],12,-1958414417),a=Xi(a,n,t,r,e[10],17,-42063),r=Xi(r,a,n,t,e[11],22,-1990404162),t=Xi(t,r,a,n,e[12],7,1804603682),n=Xi(n,t,r,a,e[13],12,-40341101),a=Xi(a,n,t,r,e[14],17,-1502002290),t=Ji(t,r=Xi(r,a,n,t,e[15],22,1236535329),a,n,e[1],5,-165796510),n=Ji(n,t,r,a,e[6],9,-1069501632),a=Ji(a,n,t,r,e[11],14,643717713),r=Ji(r,a,n,t,e[0],20,-373897302),t=Ji(t,r,a,n,e[5],5,-701558691),n=Ji(n,t,r,a,e[10],9,38016083),a=Ji(a,n,t,r,e[15],14,-660478335),r=Ji(r,a,n,t,e[4],20,-405537848),t=Ji(t,r,a,n,e[9],5,568446438),n=Ji(n,t,r,a,e[14],9,-1019803690),a=Ji(a,n,t,r,e[3],14,-187363961),r=Ji(r,a,n,t,e[8],20,1163531501),t=Ji(t,r,a,n,e[13],5,-1444681467),n=Ji(n,t,r,a,e[2],9,-51403784),a=Ji(a,n,t,r,e[7],14,1735328473),t=Qi(t,r=Ji(r,a,n,t,e[12],20,-1926607734),a,n,e[5],4,-378558),n=Qi(n,t,r,a,e[8],11,-2022574463),a=Qi(a,n,t,r,e[11],16,1839030562),r=Qi(r,a,n,t,e[14],23,-35309556),t=Qi(t,r,a,n,e[1],4,-1530992060),n=Qi(n,t,r,a,e[4],11,1272893353),a=Qi(a,n,t,r,e[7],16,-155497632),r=Qi(r,a,n,t,e[10],23,-1094730640),t=Qi(t,r,a,n,e[13],4,681279174),n=Qi(n,t,r,a,e[0],11,-358537222),a=Qi(a,n,t,r,e[3],16,-722521979),r=Qi(r,a,n,t,e[6],23,76029189),t=Qi(t,r,a,n,e[9],4,-640364487),n=Qi(n,t,r,a,e[12],11,-421815835),a=Qi(a,n,t,r,e[15],16,530742520),t=er(t,r=Qi(r,a,n,t,e[2],23,-995338651),a,n,e[0],6,-198630844),n=er(n,t,r,a,e[7],10,1126891415),a=er(a,n,t,r,e[14],15,-1416354905),r=er(r,a,n,t,e[5],21,-57434055),t=er(t,r,a,n,e[12],6,1700485571),n=er(n,t,r,a,e[3],10,-1894986606),a=er(a,n,t,r,e[10],15,-1051523),r=er(r,a,n,t,e[1],21,-2054922799),t=er(t,r,a,n,e[8],6,1873313359),n=er(n,t,r,a,e[15],10,-30611744),a=er(a,n,t,r,e[6],15,-1560198380),r=er(r,a,n,t,e[13],21,1309151649),t=er(t,r,a,n,e[4],6,-145523070),n=er(n,t,r,a,e[11],10,-1120210379),a=er(a,n,t,r,e[2],15,718787259),r=er(r,a,n,t,e[9],21,-343485551),i[0]=Mn(t,i[0]),i[1]=Mn(r,i[1]),i[2]=Mn(a,i[2]),i[3]=Mn(n,i[3])}function nc(i,e,t,r,a,n){return e=Mn(Mn(e,i),Mn(r,n)),Mn(e<<a|e>>>32-a,t)}function Xi(i,e,t,r,a,n,s){return nc(e&t|~e&r,i,e,a,n,s)}function Ji(i,e,t,r,a,n,s){return nc(e&r|t&~r,i,e,a,n,s)}function Qi(i,e,t,r,a,n,s){return nc(e^t^r,i,e,a,n,s)}function er(i,e,t,r,a,n,s){return nc(t^(e|~r),i,e,a,n,s)}function p1(i){var e,t=i.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=i.length;e+=64)Zv(r,fK(i.substring(e-64,e)));i=i.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i.length;e++)a[e>>2]|=i.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Zv(r,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,Zv(r,a),r}function fK(i){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return t}Rd=ut.atob.bind(ut),Hv=ut.btoa.bind(ut);var f1="0123456789abcdef".split("");function _K(i){for(var e="",t=0;t<4;t++)e+=f1[i>>8*t+4&15]+f1[i>>8*t&15];return e}function vK(i){return String.fromCharCode((255&i)>>0,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function zv(i){return p1(i).map(vK).join("")}var gK="5d41402abc4b2a76b9719d911017c592"!=function(i){for(var e=0;e<i.length;e++)i[e]=_K(i[e]);return i.join("")}(p1("hello"));function Mn(i,e){if(gK){var t=(65535&i)+(65535&e);return(i>>16)+(e>>16)+(t>>16)<<16|65535&t}return i+e&4294967295}function Wv(i,e){var t,r,a;if(i!==t){for(var s=(a=i,new Array(1+(256/i.length>>0)+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var d=0;for(l=0;l<256;l++){var u=o[l];d=(d+u+s.charCodeAt(l))%256,o[l]=o[d],o[d]=u}t=i,r=o}else o=r;var c=e.length,f=0,p=0,g="";for(l=0;l<c;l++)p=(p+(u=o[f=(f+1)%256]))%256,o[f]=o[p],o[p]=u,s=o[(o[f]+o[p])%256],g+=String.fromCharCode(e.charCodeAt(l)^s);return g}var _1={print:4,modify:8,copy:16,"annot-forms":32};function Vo(i,e,t,r){this.v=1,this.r=2;var a=192;i.forEach(function(o){if(void 0!==_1.perm)throw new Error("Invalid permission: "+o);a+=_1[o]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var n=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(n,s),this.P=-(1+(255^a)),this.encryptionKey=zv(n+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Wv(this.encryptionKey,this.padding)}function No(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var e="",t=i.length,r=0;r<t;r++){var a=i.charCodeAt(r);e+=a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?"#"+("0"+a.toString(16)).slice(-2):i[r]}return e}function v1(i){if("object"!==(0,Jt.Z)(i))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,a){if(a=a||!1,"string"!=typeof t||"function"!=typeof r||"boolean"!=typeof a)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var n=Math.random().toString(35);return e[t][n]=[r,!!a],n},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],0===Object.keys(e[r]).length&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var n in e[t]){var s=e[t][n];try{s[0].apply(i,r)}catch(o){ut.console&&Qt.error("jsPDF PubSub Error",o.message,o)}s[1]&&a.push(n)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function sc(i){if(!(this instanceof sc))return new sc(i);var e="opacity,stroke-opacity".split(",");for(var t in i)i.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=i[t]);this.id="",this.objectNumber=-1}function g1(i,e){this.gState=i,this.matrix=e,this.id="",this.objectNumber=-1}function Vs(i,e,t,r,a){if(!(this instanceof Vs))return new Vs(i,e,t,r,a);this.type="axial"===i?2:3,this.coords=e,this.colors=t,g1.call(this,r,a)}function Fo(i,e,t,r,a){if(!(this instanceof Fo))return new Fo(i,e,t,r,a);this.boundingBox=i,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,g1.call(this,r,a)}function lt(i){var e,t="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],a=arguments[2],n=arguments[3],s=[],o=1,l=16,d="S",u=null;"object"===(0,Jt.Z)(i=i||{})&&(t=i.orientation,r=i.unit||r,a=i.format||a,n=i.compress||i.compressPdf||n,null!==(u=i.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o="number"==typeof i.userUnit?Math.abs(i.userUnit):1,void 0!==i.precision&&(e=i.precision),void 0!==i.floatPrecision&&(l=i.floatPrecision),d=i.defaultPathOperation||"S"),s=i.filters||(!0===n?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var c=i.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=v1;var g="1.3",w=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(v){g=v};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return x};var y=p.__private__.getPageFormat=function(v){return x[v]};a=a||"a4";var V="compat";function F(){this.saveGraphicsState(),G(new dt(je,0,0,-je,0,Kn()*je).toString()+" cm"),this.setFontSize(this.getFontSize()/je),d="n",V="advanced"}function q(){this.restoreGraphicsState(),d="S",V="compat"}var ee=p.__private__.combineFontStyleAndFontWeight=function(v,T){if("bold"==v&&"normal"==T||"bold"==v&&400==T||"normal"==v&&"italic"==T||"bold"==v&&"italic"==T)throw new Error("Invalid Combination of fontweight and fontstyle");return T&&(v=400==T||"normal"===T?"italic"===v?"italic":"normal":700!=T&&"bold"!==T||"normal"!==v?(700==T?"bold":T)+""+v:"bold"),v};p.advancedAPI=function(v){var T="compat"===V;return T&&F.call(this),"function"!=typeof v||(v(this),T&&q.call(this)),this},p.compatAPI=function(v){var T="advanced"===V;return T&&q.call(this),"function"!=typeof v||(v(this),T&&F.call(this)),this},p.isAdvancedAPI=function(){return"advanced"===V};var X,M=function(v){if("advanced"!==V)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},le=p.roundToPrecision=p.__private__.roundToPrecision=function(v,T){var W=e||T;if(isNaN(v)||isNaN(W))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(W).replace(/0+$/,"")};X=p.hpf=p.__private__.hpf="number"==typeof l?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return le(v,l)}:"smart"===l?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return le(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return le(v,16)};var fe=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return le(v,2)},B=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return le(v,3)},P=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return"compat"===V?v*je:"advanced"===V?v:void 0},$=function(v){return P(function(v){return"compat"===V?Kn()-v:"advanced"===V?v:void 0}(v))};p.__private__.setPrecision=p.setPrecision=function(v){"number"==typeof parseInt(v,10)&&(e=parseInt(v,10))};var me,pe="00000000000000000000000000000000",xe=p.__private__.getFileId=function(){return pe},_e=p.__private__.setFileId=function(v){return pe=void 0!==v&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():pe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==u&&(ir=new Vo(u.userPermissions,u.userPassword,u.ownerPassword,pe)),pe};p.setFileId=function(v){return _e(v),this},p.getFileId=function(){return xe()};var Ae=p.__private__.convertDateToPDFDate=function(v){var T=v.getTimezoneOffset(),W=T<0?"+":"-",Q=Math.floor(Math.abs(T/60)),ue=Math.abs(T%60),De=[W,K(Q),"'",K(ue),"'"].join("");return["D:",v.getFullYear(),K(v.getMonth()+1),K(v.getDate()),K(v.getHours()),K(v.getMinutes()),K(v.getSeconds()),De].join("")},Ie=p.__private__.convertPDFDateToDate=function(v){var T=parseInt(v.substr(2,4),10),W=parseInt(v.substr(6,2),10)-1,Q=parseInt(v.substr(8,2),10),ue=parseInt(v.substr(10,2),10),De=parseInt(v.substr(12,2),10),Ve=parseInt(v.substr(14,2),10);return new Date(T,W,Q,ue,De,Ve,0)},Me=p.__private__.setCreationDate=function(v){var T;if(void 0===v&&(v=new Date),v instanceof Date)T=Ae(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");T=v}return me=T},D=p.__private__.getCreationDate=function(v){var T=me;return"jsDate"===v&&(T=Ie(me)),T};p.setCreationDate=function(v){return Me(v),this},p.getCreationDate=function(v){return D(v)};var z,K=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},te=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},de=0,Ce=[],we=[],Se=0,ke=[],Fe=[],qe=!1,Je=we;p.__private__.setCustomOutputDestination=function(v){qe=!0,Je=v};var Oe=function(v){qe||(Je=v)};p.__private__.resetCustomOutputDestination=function(){qe=!1,Je=we};var G=p.__private__.out=function(v){return v=v.toString(),Se+=v.length+1,Je.push(v),Je},wt=p.__private__.write=function(v){return G(1===arguments.length?v.toString():Array.prototype.join.call(arguments," "))},tt=p.__private__.getArrayBuffer=function(v){for(var T=v.length,W=new ArrayBuffer(T),Q=new Uint8Array(W);T--;)Q[T]=v.charCodeAt(T);return W},Ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ne};var Ze=i.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return Ze="advanced"===V?v/je:v,this};var Ue,Ge=p.__private__.getFontSize=p.getFontSize=function(){return"compat"===V?Ze:Ze*je},nt=i.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return nt=v,this},p.__private__.getR2L=p.getR2L=function(){return nt};var Ct,xt=p.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Ue=v;else if(isNaN(v)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Ue=v}else Ue=parseInt(v,10)};p.__private__.getZoomMode=function(){return Ue};var At,Ft=p.__private__.setPageMode=function(v){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');Ct=v};p.__private__.getPageMode=function(){return Ct};var Ut=p.__private__.setLayoutMode=function(v){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');At=v};p.__private__.getLayoutMode=function(){return At},p.__private__.setDisplayMode=p.setDisplayMode=function(v,T,W){return xt(v),Ut(T),Ft(W),this};var ft={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(-1===Object.keys(ft).indexOf(v))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ft[v]},p.__private__.getDocumentProperties=function(){return ft},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var T in ft)ft.hasOwnProperty(T)&&v[T]&&(ft[T]=v[T]);return this},p.__private__.setDocumentProperty=function(v,T){if(-1===Object.keys(ft).indexOf(v))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ft[v]=T};var Ot,je,tr,Mt,ia,ei={},ui={},Ha=[],Zt={},ks={},vi={},ra={},hn=null,gi=0,bt=[],zt=new v1(p),Ms=i.hotfixes||[],Ui={},Za={},za=[],dt=function v(T,W,Q,ue,De,Ve){if(!(this instanceof v))return new v(T,W,Q,ue,De,Ve);isNaN(T)&&(T=1),isNaN(W)&&(W=0),isNaN(Q)&&(Q=0),isNaN(ue)&&(ue=1),isNaN(De)&&(De=0),isNaN(Ve)&&(Ve=0),this._matrix=[T,W,Q,ue,De,Ve]};Object.defineProperty(dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(dt.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),dt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(X).join(v)},dt.prototype.multiply=function(v){return new dt(v.sx*this.sx+v.shy*this.shx,v.sx*this.shy+v.shy*this.sy,v.shx*this.sx+v.sy*this.shx,v.shx*this.shy+v.sy*this.sy,v.tx*this.sx+v.ty*this.shx+this.tx,v.tx*this.shy+v.ty*this.sy+this.ty)},dt.prototype.decompose=function(){var v=this.sx,T=this.shy,W=this.shx,Q=this.sy,ue=this.tx,De=this.ty,Ve=Math.sqrt(v*v+T*T),Ye=(v/=Ve)*W+(T/=Ve)*Q;W-=v*Ye,Q-=T*Ye;var st=Math.sqrt(W*W+Q*Q);return Ye/=st,v*(Q/=st)<T*(W/=st)&&(v=-v,T=-T,Ye=-Ye,Ve=-Ve),{scale:new dt(Ve,0,0,st,0,0),translate:new dt(1,0,0,1,ue,De),rotate:new dt(v,T,-T,v,0,0),skew:new dt(1,0,Ye,1,0,0)}},dt.prototype.toString=function(v){return this.join(" ")},dt.prototype.inversed=function(){var v=this.sx,T=this.shy,W=this.shx,Q=this.sy,ue=this.tx,De=this.ty,Ve=1/(v*Q-T*W),Ye=Q*Ve,st=-T*Ve,St=-W*Ve,Et=v*Ve;return new dt(Ye,st,St,Et,-Ye*ue-St*De,-st*ue-Et*De)},dt.prototype.applyToPoint=function(v){return new rl(v.x*this.sx+v.y*this.shx+this.tx,v.x*this.shy+v.y*this.sy+this.ty)},dt.prototype.applyToRectangle=function(v){var T=this.applyToPoint(v),W=this.applyToPoint(new rl(v.x+v.w,v.y+v.h));return new zd(T.x,T.y,W.x-T.x,W.y-T.y)},dt.prototype.clone=function(){return new dt(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},p.Matrix=dt;var aa=p.matrixMult=function(v,T){return T.multiply(v)},Wa=new dt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Wa;var Cr=function(v,T){if(!ks[v]){var W=(T instanceof Vs?"Sh":"P")+(Object.keys(Zt).length+1).toString(10);T.id=W,ks[v]=W,Zt[W]=T,zt.publish("addPattern",T)}};p.ShadingPattern=Vs,p.TilingPattern=Fo,p.addShadingPattern=function(v,T){return M("addShadingPattern()"),Cr(v,T),this},p.beginTilingPattern=function(v){M("beginTilingPattern()"),Pc(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,T){M("endTilingPattern()"),T.stream=Fe[z].join("\n"),Cr(v,T),zt.publish("endTilingPattern",T),za.pop().restore()};var v,Bi=p.__private__.newObject=function(){var v=Ti();return Dr(v,!0),v},Ti=p.__private__.newObjectDeferred=function(){return de++,Ce[de]=function(){return Se},de},Dr=function(v,T){return T="boolean"==typeof T&&T,Ce[v]=Se,T&&G(v+" 0 obj"),v},$o=p.__private__.newAdditionalObject=function(){var v={objId:Ti(),content:""};return ke.push(v),v},cn=Ti(),na=Ti(),sa=p.__private__.decodeColorString=function(v){var T=v.split(" ");if(2!==T.length||"g"!==T[1]&&"G"!==T[1])5===T.length&&("k"===T[4]||"K"===T[4])&&(T=[(1-T[0])*(1-T[3]),(1-T[1])*(1-T[3]),(1-T[2])*(1-T[3]),"r"]);else{var W=parseFloat(T[0]);T=[W,W,W,"r"]}for(var Q="#",ue=0;ue<3;ue++)Q+=("0"+Math.floor(255*parseFloat(T[ue])).toString(16)).slice(-2);return Q},oa=p.__private__.encodeColorString=function(v){var T;"string"==typeof v&&(v={ch1:v});var W=v.ch1,Q=v.ch2,ue=v.ch3,De=v.ch4,Ve="draw"===v.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof W&&"#"!==W.charAt(0)){var Ye=new c1(W);if(Ye.ok)W=Ye.toHex();else if(!/^\d*\.?\d*$/.test(W))throw new Error('Invalid color "'+W+'" passed to jsPDF.encodeColorString.')}if("string"==typeof W&&/^#[0-9A-Fa-f]{3}$/.test(W)&&(W="#"+W[1]+W[1]+W[2]+W[2]+W[3]+W[3]),"string"==typeof W&&/^#[0-9A-Fa-f]{6}$/.test(W)){var st=parseInt(W.substr(1),16);W=st>>16&255,Q=st>>8&255,ue=255&st}if(void 0===Q||void 0===De&&W===Q&&Q===ue)T="string"==typeof W?W+" "+Ve[0]:2===v.precision?fe(W/255)+" "+Ve[0]:B(W/255)+" "+Ve[0];else if(void 0===De||"object"===(0,Jt.Z)(De)){if(De&&!isNaN(De.a)&&0===De.a)return["1.","1.","1.",Ve[1]].join(" ");T="string"==typeof W?[W,Q,ue,Ve[1]].join(" "):2===v.precision?[fe(W/255),fe(Q/255),fe(ue/255),Ve[1]].join(" "):[B(W/255),B(Q/255),B(ue/255),Ve[1]].join(" ")}else T="string"==typeof W?[W,Q,ue,De,Ve[2]].join(" "):2===v.precision?[fe(W),fe(Q),fe(ue),fe(De),Ve[2]].join(" "):[B(W),B(Q),B(ue),B(De),Ve[2]].join(" ");return T},$a=p.__private__.getFilters=function(){return s},Zr=p.__private__.putStream=function(v){var T=(v=v||{}).data||"",W=v.filters||$a(),Q=v.alreadyAppliedFilters||[],ue=v.addLength1||!1,De=T.length,Ve=v.objectId,Ye=function(rr){return rr};if(null!==u&&void 0===Ve)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(Ye=ir.encryptor(Ve,0));var st={};!0===W&&(W=["FlateEncode"]);var St=v.additionalKeyValues||[],Et=(st=void 0!==lt.API.processDataByFilters?lt.API.processDataByFilters(T,W):{data:T,reverseChain:[]}).reverseChain+(Array.isArray(Q)?Q.join(" "):Q.toString());if(0!==st.data.length&&(St.push({key:"Length",value:st.data.length}),!0===ue&&St.push({key:"Length1",value:De})),0!=Et.length)if(Et.split("/").length-1==1)St.push({key:"Filter",value:Et});else{St.push({key:"Filter",value:"["+Et+"]"});for(var Vt=0;Vt<St.length;Vt+=1)if("DecodeParms"===St[Vt].key){for(var ci=[],mi=0;mi<st.reverseChain.split("/").length-1;mi+=1)ci.push("null");ci.push(St[Vt].value),St[Vt].value="["+ci.join(" ")+"]"}}G("<<");for(var Ai=0;Ai<St.length;Ai++)G("/"+St[Ai].key+" "+St[Ai].value);G(">>"),0!==st.data.length&&(G("stream"),G(Ye(st.data)),G("endstream"))},Ka=p.__private__.putPage=function(v){var T=v.number,W=v.data,Q=v.objId,ue=v.contentsObjId;Dr(Q,!0),G("<</Type /Page"),G("/Parent "+v.rootDictionaryObjId+" 0 R"),G("/Resources "+v.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(X(v.mediaBox.bottomLeftX))+" "+parseFloat(X(v.mediaBox.bottomLeftY))+" "+X(v.mediaBox.topRightX)+" "+X(v.mediaBox.topRightY)+"]"),null!==v.cropBox&&G("/CropBox ["+X(v.cropBox.bottomLeftX)+" "+X(v.cropBox.bottomLeftY)+" "+X(v.cropBox.topRightX)+" "+X(v.cropBox.topRightY)+"]"),null!==v.bleedBox&&G("/BleedBox ["+X(v.bleedBox.bottomLeftX)+" "+X(v.bleedBox.bottomLeftY)+" "+X(v.bleedBox.topRightX)+" "+X(v.bleedBox.topRightY)+"]"),null!==v.trimBox&&G("/TrimBox ["+X(v.trimBox.bottomLeftX)+" "+X(v.trimBox.bottomLeftY)+" "+X(v.trimBox.topRightX)+" "+X(v.trimBox.topRightY)+"]"),null!==v.artBox&&G("/ArtBox ["+X(v.artBox.bottomLeftX)+" "+X(v.artBox.bottomLeftY)+" "+X(v.artBox.topRightX)+" "+X(v.artBox.topRightY)+"]"),"number"==typeof v.userUnit&&1!==v.userUnit&&G("/UserUnit "+v.userUnit),zt.publish("putPage",{objId:Q,pageContext:bt[T],pageNumber:T,page:W}),G("/Contents "+ue+" 0 R"),G(">>"),G("endobj");var De=W.join("\n");return"advanced"===V&&(De+="\nQ"),Dr(ue,!0),Zr({data:De,filters:$a(),objectId:ue}),G("endobj"),Q},Hs=p.__private__.putPages=function(){var v,T,W=[];for(v=1;v<=gi;v++)bt[v].objId=Ti(),bt[v].contentsObjId=Ti();for(v=1;v<=gi;v++)W.push(Ka({number:v,data:Fe[v],objId:bt[v].objId,contentsObjId:bt[v].contentsObjId,mediaBox:bt[v].mediaBox,cropBox:bt[v].cropBox,bleedBox:bt[v].bleedBox,trimBox:bt[v].trimBox,artBox:bt[v].artBox,userUnit:bt[v].userUnit,rootDictionaryObjId:cn,resourceDictionaryObjId:na}));Dr(cn,!0),G("<</Type /Pages");var Q="/Kids [";for(T=0;T<gi;T++)Q+=W[T]+" 0 R ";G(Q+"]"),G("/Count "+gi),G(">>"),G("endobj"),zt.publish("postPutPages")},Ko=function(v){zt.publish("putFont",{font:v,out:G,newObject:Bi,putStream:Zr}),!0!==v.isAlreadyPutted&&(v.objectNumber=Bi(),G("<<"),G("/Type /Font"),G("/BaseFont /"+No(v.postScriptName)),G("/Subtype /Type1"),"string"==typeof v.encoding&&G("/Encoding /"+v.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},Uo=function(v){v.objectNumber=Bi();var T=[];T.push({key:"Type",value:"/XObject"}),T.push({key:"Subtype",value:"/Form"}),T.push({key:"BBox",value:"["+[X(v.x),X(v.y),X(v.x+v.width),X(v.y+v.height)].join(" ")+"]"}),T.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var W=v.pages[1].join("\n");Zr({data:W,additionalKeyValues:T,objectId:v.objectNumber}),G("endobj")},Xv=function(v,T){T||(T=21);var W=Bi(),Q=function(v,T){var W,Q=[],ue=1/(T-1);for(W=0;W<1;W+=ue)Q.push(W);Q.push(1),0!=v[0].offset&&v.unshift({offset:0,color:v[0].color}),1!=v[v.length-1].offset&&v.push({offset:1,color:v[v.length-1].color});for(var Ye="",st=0,St=0;St<Q.length;St++){for(W=Q[St];W>v[st+1].offset;)st++;var Et=v[st].offset,Vt=(W-Et)/(v[st+1].offset-Et),ci=v[st].color,mi=v[st+1].color;Ye+=te(Math.round((1-Vt)*ci[0]+Vt*mi[0]).toString(16))+te(Math.round((1-Vt)*ci[1]+Vt*mi[1]).toString(16))+te(Math.round((1-Vt)*ci[2]+Vt*mi[2]).toString(16))}return Ye.trim()}(v.colors,T),ue=[];ue.push({key:"FunctionType",value:"0"}),ue.push({key:"Domain",value:"[0.0 1.0]"}),ue.push({key:"Size",value:"["+T+"]"}),ue.push({key:"BitsPerSample",value:"8"}),ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Zr({data:Q,additionalKeyValues:ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:W}),G("endobj"),v.objectNumber=Bi(),G("<< /ShadingType "+v.type),G("/ColorSpace /DeviceRGB");var De="/Coords ["+X(parseFloat(v.coords[0]))+" "+X(parseFloat(v.coords[1]))+" ";De+=2===v.type?X(parseFloat(v.coords[2]))+" "+X(parseFloat(v.coords[3])):X(parseFloat(v.coords[2]))+" "+X(parseFloat(v.coords[3]))+" "+X(parseFloat(v.coords[4]))+" "+X(parseFloat(v.coords[5])),G(De+="]"),v.matrix&&G("/Matrix ["+v.matrix.toString()+"]"),G("/Function "+W+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Jv=function(v,T){var W=Ti(),Q=Bi();T.push({resourcesOid:W,objectOid:Q}),v.objectNumber=Q;var ue=[];ue.push({key:"Type",value:"/Pattern"}),ue.push({key:"PatternType",value:"1"}),ue.push({key:"PaintType",value:"1"}),ue.push({key:"TilingType",value:"1"}),ue.push({key:"BBox",value:"["+v.boundingBox.map(X).join(" ")+"]"}),ue.push({key:"XStep",value:X(v.xStep)}),ue.push({key:"YStep",value:X(v.yStep)}),ue.push({key:"Resources",value:W+" 0 R"}),v.matrix&&ue.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Zr({data:v.stream,additionalKeyValues:ue,objectId:v.objectNumber}),G("endobj")},vc=function(v){for(var T in v.objectNumber=Bi(),G("<<"),v)switch(T){case"opacity":G("/ca "+fe(v[T]));break;case"stroke-opacity":G("/CA "+fe(v[T]))}G(">>"),G("endobj")},Ei=function(v){Dr(v.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var v in G("/Font <<"),ei)ei.hasOwnProperty(v)&&(!1===c||!0===c&&f.hasOwnProperty(v))&&G("/"+v+" "+ei[v].objectNumber+" 0 R");G(">>")}(),function(){if(Object.keys(Zt).length>0){for(var v in G("/Shading <<"),Zt)Zt.hasOwnProperty(v)&&Zt[v]instanceof Vs&&Zt[v].objectNumber>=0&&G("/"+v+" "+Zt[v].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),G(">>")}}(),function(v){if(Object.keys(Zt).length>0){for(var T in G("/Pattern <<"),Zt)Zt.hasOwnProperty(T)&&Zt[T]instanceof p.TilingPattern&&Zt[T].objectNumber>=0&&Zt[T].objectNumber<v&&G("/"+T+" "+Zt[T].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),G(">>")}}(v.objectOid),function(){if(Object.keys(vi).length>0){var v;for(v in G("/ExtGState <<"),vi)vi.hasOwnProperty(v)&&vi[v].objectNumber>=0&&G("/"+v+" "+vi[v].objectNumber+" 0 R");zt.publish("putGStateDict"),G(">>")}}(),function(){for(var v in G("/XObject <<"),Ui)Ui.hasOwnProperty(v)&&Ui[v].objectNumber>=0&&G("/"+v+" "+Ui[v].objectNumber+" 0 R");zt.publish("putXobjectDict"),G(">>")}(),G(">>"),G("endobj")},bc=function(v){ui[v.fontName]=ui[v.fontName]||{},ui[v.fontName][v.fontStyle]=v.id},Pd=function(v,T,W,Q,ue){var De={id:"F"+(Object.keys(ei).length+1).toString(10),postScriptName:v,fontName:T,fontStyle:W,encoding:Q,isStandardFont:ue||!1,metadata:{}};return zt.publish("addFont",{font:De,instance:this}),ei[De.id]=De,bc(De),De.id},br=p.__private__.pdfEscape=p.pdfEscape=function(v,T){return function(v,T){var W,Q,ue,De,Ve,Ye,st,St,Et;if(ue=(T=T||{}).sourceEncoding||"Unicode",Ve=T.outputEncoding,(T.autoencode||Ve)&&ei[Ot].metadata&&ei[Ot].metadata[ue]&&ei[Ot].metadata[ue].encoding&&(De=ei[Ot].metadata[ue].encoding,!Ve&&ei[Ot].encoding&&(Ve=ei[Ot].encoding),!Ve&&De.codePages&&(Ve=De.codePages[0]),"string"==typeof Ve&&(Ve=De[Ve]),Ve)){for(st=!1,Ye=[],W=0,Q=v.length;W<Q;W++)(St=Ve[v.charCodeAt(W)])?Ye.push(String.fromCharCode(St)):Ye.push(v[W]),Ye[W].charCodeAt(0)>>8&&(st=!0);v=Ye.join("")}for(W=v.length;void 0===st&&0!==W;)v.charCodeAt(W-1)>>8&&(st=!0),W--;if(!st)return v;for(Ye=T.noBOM?[]:[254,255],W=0,Q=v.length;W<Q;W++){if((Et=(St=v.charCodeAt(W))>>8)>>8)throw new Error("Character at position "+W+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ye.push(Et),Ye.push(St-(Et<<8))}return String.fromCharCode.apply(void 0,Ye)}(v,T).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bd=p.__private__.beginPage=function(v){Fe[++gi]=[],bt[gi]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Sc(gi),Oe(Fe[z])},wc=function(v,T){var W,Q,ue;switch(t=T||t,"string"==typeof v&&(W=y(v.toLowerCase()),Array.isArray(W)&&(Q=W[0],ue=W[1])),Array.isArray(v)&&(Q=v[0]*je,ue=v[1]*je),isNaN(Q)&&(Q=a[0],ue=a[1]),(Q>14400||ue>14400)&&(Qt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Q=Math.min(14400,Q),ue=Math.min(14400,ue)),a=[Q,ue],t.substr(0,1)){case"l":ue>Q&&(a=[ue,Q]);break;case"p":Q>ue&&(a=[ue,Q])}Bd(a),Ac(kd),G(da),0!==Hd&&G(Hd+" J"),0!==Zd&&G(Zd+" j"),zt.publish("addPage",{pageNumber:gi})},ag=function(v){v>0&&v<=gi&&(Fe.splice(v,1),bt.splice(v,1),gi--,z>gi&&(z=gi),this.setPage(z))},Sc=function(v){v>0&&v<=gi&&(z=v)},ng=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Fe.length-1},yc=function(v,T,W){var Q,ue=void 0;return W=W||{},T=void 0!==T?T:ei[Ot].fontStyle,Q=(v=void 0!==v?v:ei[Ot].fontName).toLowerCase(),void 0!==ui[Q]&&void 0!==ui[Q][T]?ue=ui[Q][T]:void 0!==ui[v]&&void 0!==ui[v][T]?ue=ui[v][T]:!1===W.disableWarning&&Qt.warn("Unable to look up font label for font '"+v+"', '"+T+"'. Refer to getFontList() for available fonts."),ue||W.noFallback||null==(ue=ui.times[T])&&(ue=ui.times.normal),ue},sg=p.__private__.putInfo=function(){var v=Bi(),T=function(Q){return Q};for(var W in null!==u&&(T=ir.encryptor(v,0)),G("<<"),G("/Producer ("+br(T("jsPDF "+lt.version))+")"),ft)ft.hasOwnProperty(W)&&ft[W]&&G("/"+W.substr(0,1).toUpperCase()+W.substr(1)+" ("+br(T(ft[W]))+")");G("/CreationDate ("+br(T(me))+")"),G(">>"),G("endobj")},Vd=p.__private__.putCatalog=function(v){var T=(v=v||{}).rootDictionaryObjId||cn;switch(Bi(),G("<<"),G("/Type /Catalog"),G("/Pages "+T+" 0 R"),Ue||(Ue="fullwidth"),Ue){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var W=""+Ue;"%"===W.substr(W.length-1)&&(Ue=parseInt(Ue)/100),"number"==typeof Ue&&G("/OpenAction [3 0 R /XYZ null null "+fe(Ue)+"]")}switch(At||(At="continuous"),At){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}Ct&&G("/PageMode /"+Ct),zt.publish("putCatalog"),G(">>"),G("endobj")},og=p.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(de+1)),G("/Root "+de+" 0 R"),G("/Info "+(de-1)+" 0 R"),null!==u&&G("/Encrypt "+ir.oid+" 0 R"),G("/ID [ <"+pe+"> <"+pe+"> ]"),G(">>")},lg=p.__private__.putHeader=function(){G("%PDF-"+g),G("%\xba\xdf\xac\xe0")},dg=p.__private__.putXRef=function(){var v="0000000000";G("xref"),G("0 "+(de+1)),G("0000000000 65535 f ");for(var T=1;T<=de;T++)G("function"==typeof Ce[T]?(v+Ce[T]()).slice(-10)+" 00000 n ":void 0!==Ce[T]?(v+Ce[T]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},pn=p.__private__.buildDocument=function(){de=0,Se=0,we=[],Ce=[],ke=[],cn=Ti(),na=Ti(),Oe(we),zt.publish("buildDocument"),lg(),Hs(),function(){zt.publish("putAdditionalObjects");for(var v=0;v<ke.length;v++){var T=ke[v];Dr(T.objId,!0),G(T.content),G("endobj")}zt.publish("postPutAdditionalObjects")}(),function(){var v=[];(function(){for(var v in ei)ei.hasOwnProperty(v)&&(!1===c||!0===c&&f.hasOwnProperty(v))&&Ko(ei[v])})(),function(){var v;for(v in vi)vi.hasOwnProperty(v)&&vc(vi[v])}(),function(){for(var v in Ui)Ui.hasOwnProperty(v)&&Uo(Ui[v])}(),function(v){var T;for(T in Zt)Zt.hasOwnProperty(T)&&(Zt[T]instanceof Vs?Xv(Zt[T]):Zt[T]instanceof Fo&&Jv(Zt[T],v))}(v),zt.publish("putResources"),v.forEach(Ei),Ei({resourcesOid:na,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")}(),null!==u&&(ir.oid=Bi(),G("<<"),G("/Filter /Standard"),G("/V "+ir.v),G("/R "+ir.r),G("/U <"+ir.toHexString(ir.U)+">"),G("/O <"+ir.toHexString(ir.O)+">"),G("/P "+ir.P),G(">>"),G("endobj")),sg(),Vd();var v=Se;return dg(),og(),G("startxref"),G(""+v),G("%%EOF"),Oe(Fe[z]),we.join("\n")},Jo=p.__private__.getBlob=function(v){return new Blob([tt(v)],{type:"application/pdf"})},Qo=p.output=p.__private__.output=((v=function(v,T){switch("string"==typeof(T=T||{})?T={filename:T}:T.filename=T.filename||"generated.pdf",v){case void 0:return pn();case"save":p.save(T.filename);break;case"arraybuffer":return tt(pn());case"blob":return Jo(pn());case"bloburi":case"bloburl":if(void 0!==ut.URL&&"function"==typeof ut.URL.createObjectURL)return ut.URL&&ut.URL.createObjectURL(Jo(pn()))||void 0;Qt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var W="",Q=pn();try{W=Hv(Q)}catch{W=Hv(unescape(encodeURIComponent(Q)))}return"data:application/pdf;filename="+T.filename+";base64,"+W;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(ut)){var ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",De=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';T.pdfObjectUrl&&(ue=T.pdfObjectUrl,De="");var Ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ue+'"'+De+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(T)+");<\/script></body></html>",Ye=ut.open();return null!==Ye&&Ye.document.write(Ve),Ye}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(ut)){var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(T.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+T.filename+'" width="500px" height="400px" /></body></html>',St=ut.open();if(null!==St){St.document.write(st);var Et=this;St.document.documentElement.querySelector("#pdfViewer").onload=function(){St.document.title=T.filename,St.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Et.output("bloburl"))}}return St}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(ut))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",T)+'"></iframe></body></html>',ci=ut.open();if(null!==ci&&(ci.document.write(Vt),ci.document.title=T.filename),ci||typeof safari>"u")return ci;break;case"datauri":case"dataurl":return ut.document.location.href=this.output("datauristring",T);default:return null}}).foo=function(){try{return v.apply(this,arguments)}catch(Q){var T=Q.stack||"";~T.indexOf(" at ")&&(T=T.split(" at ")[1]);var W="Error in function "+T.split("\n")[0].split("<")[0]+": "+Q.message;if(!ut.console)throw new Error(W);ut.console.error(W,Q),ut.alert&&alert(W)}},v.foo.bar=v,v.foo),xc=function(v){return!0===Array.isArray(Ms)&&Ms.indexOf(v)>-1};switch(r){case"pt":je=1;break;case"mm":je=72/25.4;break;case"cm":je=72/2.54;break;case"in":je=72;break;case"px":je=1==xc("px_scaling")?.75:96/72;break;case"pc":case"em":je=12;break;case"ex":je=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);je=r}var ir=null;Me(),_e();var Ec=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:bt[v].objId,pageNumber:v,pageContext:bt[v]}},gt=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var T in bt)if(bt[T].objId===v)break;return Ec(T)},hg=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:bt[z].objId,pageNumber:z,pageContext:bt[z]}};p.addPage=function(){return wc.apply(this,arguments),this},p.setPage=function(){return Sc.apply(this,arguments),Oe.call(this,Fe[z]),this},p.insertPage=function(v){return this.addPage(),this.movePage(z,v),this},p.movePage=function(v,T){var W,Q;if(v>T){W=Fe[v],Q=bt[v];for(var ue=v;ue>T;ue--)Fe[ue]=Fe[ue-1],bt[ue]=bt[ue-1];Fe[T]=W,bt[T]=Q,this.setPage(T)}else if(v<T){W=Fe[v],Q=bt[v];for(var De=v;De<T;De++)Fe[De]=Fe[De+1],bt[De]=bt[De+1];Fe[T]=W,bt[T]=Q,this.setPage(T)}return this},p.deletePage=function(){return ag.apply(this,arguments),this},p.__private__.text=p.text=function(v,T,W,Q,ue){var De,Ve,Ye,st,St,Et,Vt,ci,mi,Ai=(Q=Q||{}).scope||this;if("number"==typeof v&&"number"==typeof T&&("string"==typeof W||Array.isArray(W))){var rr=W;W=T,T=v,v=rr}if(arguments[3]instanceof dt?(M("The transform parameter of text() with a Matrix value"),mi=ue):(Ye=arguments[4],st=arguments[5],"object"===(0,Jt.Z)(Vt=arguments[3])&&null!==Vt||("string"==typeof Ye&&(st=Ye,Ye=null),"string"==typeof Vt&&(st=Vt,Vt=null),"number"==typeof Vt&&(Ye=Vt,Vt=null),Q={flags:Vt,angle:Ye,align:st})),isNaN(T)||isNaN(W)||null==v)throw new Error("Invalid arguments passed to jsPDF.text");if(0===v.length)return Ai;var ua,Zi="",Or="number"==typeof Q.lineHeightFactor?Q.lineHeightFactor:zs,_n=Ai.internal.scaleFactor;function Bc(ni){return ni=ni.split("\t").join(Array(Q.TabLen||9).join(" ")),br(ni,Vt)}function Gd(ni){for(var si,Ii=ni.concat(),Vi=[],Cn=Ii.length;Cn--;)"string"==typeof(si=Ii.shift())?Vi.push(si):Array.isArray(ni)&&(1===si.length||void 0===si[1]&&void 0===si[2])?Vi.push(si[0]):Vi.push([si[0],si[1],si[2]]);return Vi}function Ud(ni,si){var Ii;if("string"==typeof ni)Ii=si(ni)[0];else if(Array.isArray(ni)){for(var Vi,Cn,Yn=ni.concat(),pl=[],Nc=Yn.length;Nc--;)"string"==typeof(Vi=Yn.shift())?pl.push(si(Vi)[0]):Array.isArray(Vi)&&"string"==typeof Vi[0]&&(Cn=si(Vi[0],Vi[1],Vi[2]),pl.push([Cn[0],Cn[1],Cn[2]]));Ii=pl}return Ii}var nl=!1,jd=!0;if("string"==typeof v)nl=!0;else if(Array.isArray(v)){var qd=v.concat();Ve=[];for(var sl,wr=qd.length;wr--;)("string"!=typeof(sl=qd.shift())||Array.isArray(sl)&&"string"!=typeof sl[0])&&(jd=!1);nl=jd}if(!1===nl)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');"string"==typeof v&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var ol=Ze/Ai.internal.scaleFactor,ll=ol*(Or-1);switch(Q.baseline){case"bottom":W-=ll;break;case"top":W+=ol-ll;break;case"hanging":W+=ol-2*ll;break;case"middle":W+=ol/2-ll}if((Et=Q.maxWidth||0)>0&&("string"==typeof v?v=Ai.splitTextToSize(v,Et):"[object Array]"===Object.prototype.toString.call(v)&&(v=v.reduce(function(ni,si){return ni.concat(Ai.splitTextToSize(si,Et))},[]))),zt.publish("preProcessText",De={text:v,x:T,y:W,options:Q,mutex:{pdfEscape:br,activeFontKey:Ot,fonts:ei,activeFontSize:Ze}}),v=De.text,Ye=(Q=De.options).angle,mi instanceof dt||!Ye||"number"!=typeof Ye)Ye&&Ye instanceof dt&&(mi=Ye);else{Ye*=Math.PI/180,0===Q.rotationDirection&&(Ye=-Ye),"advanced"===V&&(Ye=-Ye);var dl=Math.cos(Ye),Yd=Math.sin(Ye);mi=new dt(dl,Yd,-Yd,dl,0,0)}"advanced"!==V||mi||(mi=Wa),void 0!==(St=Q.charSpace||il)&&(Zi+=X(P(St))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(ci=Q.horizontalScale)&&(Zi+=X(100*ci)+" Tz\n");var Sr=-1,wg=void 0!==Q.renderingMode?Q.renderingMode:Q.stroke,Xd=Ai.internal.getCurrentPageInfo().pageContext;switch(wg){case 0:case!1:case"fill":Sr=0;break;case 1:case!0:case"stroke":Sr=1;break;case 2:case"fillThenStroke":Sr=2;break;case 3:case"invisible":Sr=3;break;case 4:case"fillAndAddForClipping":Sr=4;break;case 5:case"strokeAndAddPathForClipping":Sr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Sr=6;break;case 7:case"addToPathForClipping":Sr=7}-1!==Sr?Zi+=Sr+" Tr\n":-1!==(void 0!==Xd.usedRenderingMode?Xd.usedRenderingMode:-1)&&(Zi+="0 Tr\n"),-1!==Sr&&(Xd.usedRenderingMode=Sr),st=Q.align||"left";var ha,Jd=Ze*Or,Sg=Ai.internal.pageSize.getWidth(),yg=ei[Ot];St=Q.charSpace||il,Et=Q.maxWidth||0,Vt=Object.assign({autoencode:!0,noBOM:!0},Q.flags);var Gn=[];if("[object Array]"===Object.prototype.toString.call(v)){var zr;Ve=Gd(v),"left"!==st&&(ha=Ve.map(function(ni){return Ai.getStringUnitWidth(ni,{font:yg,charSpace:St,fontSize:Ze,doKerning:!1})*Ze/_n}));var ca,Un=0;if("right"===st){T-=ha[0],v=[],wr=Ve.length;for(var Ua=0;Ua<wr;Ua++)0===Ua?(ca=fn(T),zr=Wn(W)):(ca=P(Un-ha[Ua]),zr=-Jd),v.push([Ve[Ua],ca,zr]),Un=ha[Ua]}else if("center"===st){T-=ha[0]/2,v=[],wr=Ve.length;for(var vn=0;vn<wr;vn++)0===vn?(ca=fn(T),zr=Wn(W)):(ca=P((Un-ha[vn])/2),zr=-Jd),v.push([Ve[vn],ca,zr]),Un=ha[vn]}else if("left"===st){v=[],wr=Ve.length;for(var ul=0;ul<wr;ul++)v.push(Ve[ul])}else{if("justify"!==st)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');v=[],wr=Ve.length,Et=0!==Et?Et:Sg;for(var pa=0;pa<wr;pa++)zr=0===pa?Wn(W):-Jd,ca=0===pa?fn(T):0,Gn.push(pa<wr-1?X(P((Et-ha[pa])/(Ve[pa].split(" ").length-1))):0),v.push([Ve[pa],ca,zr])}}!0===("boolean"==typeof Q.R2L?Q.R2L:nt)&&(v=Ud(v,function(ni,si,Ii){return[ni.split("").reverse().join(""),si,Ii]})),zt.publish("postProcessText",De={text:v,x:T,y:W,options:Q,mutex:{pdfEscape:br,activeFontKey:Ot,fonts:ei,activeFontSize:Ze}}),v=De.text,ua=De.mutex.isHex||!1;var Qd=ei[Ot].encoding;"WinAnsiEncoding"!==Qd&&"StandardEncoding"!==Qd||(v=Ud(v,function(ni,si,Ii){return[Bc(ni),si,Ii]})),Ve=Gd(v),v=[];for(var jn,fa,gn,Gs=Array.isArray(Ve[0])?1:0,qn="",eu=function(ni,si,Ii){var Vi="";return Ii instanceof dt?(Ii="number"==typeof Q.angle?aa(Ii,new dt(1,0,0,1,ni,si)):aa(new dt(1,0,0,1,ni,si),Ii),"advanced"===V&&(Ii=aa(new dt(1,0,0,-1,0,0),Ii)),Vi=Ii.join(" ")+" Tm\n"):Vi=X(ni)+" "+X(si)+" Td\n",Vi},Wr=0;Wr<Ve.length;Wr++){switch(qn="",Gs){case 1:gn=(ua?"<":"(")+Ve[Wr][0]+(ua?">":")"),jn=parseFloat(Ve[Wr][1]),fa=parseFloat(Ve[Wr][2]);break;case 0:gn=(ua?"<":"(")+Ve[Wr]+(ua?">":")"),jn=fn(T),fa=Wn(W)}void 0!==Gn&&void 0!==Gn[Wr]&&(qn=Gn[Wr]+" Tw\n"),0===Wr?v.push(qn+eu(jn,fa,mi)+gn):0===Gs?v.push(qn+gn):1===Gs&&v.push(qn+eu(jn,fa,mi)+gn)}v=v.join(0===Gs?" Tj\nT* ":" Tj\n"),v+=" Tj\n";var mn="BT\n/";return mn+=Ot+" "+Ze+" Tf\n",mn+=X(Ze*Or)+" TL\n",mn+=Ws+"\n",mn+=Zi,mn+=v,G(mn+="ET"),f[Ot]=!0,Ai};var cg=p.__private__.clip=p.clip=function(v){return G("evenodd"===v?"W*":"W"),this};p.clipEvenOdd=function(){return cg("evenodd")},p.__private__.discardPath=p.discardPath=function(){return G("n"),this};var Ga=p.__private__.isValidStyle=function(v){var T=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)&&(T=!0),T};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return Ga(v)&&(d=v),this};var Ic=p.__private__.getStyle=p.getStyle=function(v){var T=d;switch(v){case"D":case"S":T="S";break;case"F":T="f";break;case"FD":case"DF":T="B";break;case"f":case"f*":case"B":case"B*":T=v}return T},Tc=p.close=function(){return G("h"),this};p.stroke=function(){return G("S"),this},p.fill=function(v){return el("f",v),this},p.fillEvenOdd=function(v){return el("f*",v),this},p.fillStroke=function(v){return el("B",v),this},p.fillStrokeEvenOdd=function(v){return el("B*",v),this};var el=function(v,T){"object"===(0,Jt.Z)(T)?fg(T,v):G(v)},Nd=function(v){null===v||"advanced"===V&&void 0===v||(v=Ic(v),G(v))};function pg(v,T,W,Q,ue){var De=new Fo(T||this.boundingBox,W||this.xStep,Q||this.yStep,this.gState,ue||this.matrix);De.stream=this.stream;var Ve=v+"$$"+this.cloneIndex+++"$$";return Cr(Ve,De),De}var fg=function(v,T){var W=ks[v.key],Q=Zt[W];if(Q instanceof Vs)G("q"),G(_g(T)),Q.gState&&p.setGState(Q.gState),G(v.matrix.toString()+" cm"),G("/"+W+" sh"),G("Q");else if(Q instanceof Fo){var ue=new dt(1,0,0,-1,0,Kn());v.matrix&&(ue=ue.multiply(v.matrix||Wa),W=pg.call(Q,v.key,v.boundingBox,v.xStep,v.yStep,ue).id),G("q"),G("/Pattern cs"),G("/"+W+" scn"),Q.gState&&p.setGState(Q.gState),G(T),G("Q")}},_g=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fd=p.moveTo=function(v,T){return G(X(P(v))+" "+X($(T))+" m"),this},Zs=p.lineTo=function(v,T){return G(X(P(v))+" "+X($(T))+" l"),this},zn=p.curveTo=function(v,T,W,Q,ue,De){return G([X(P(v)),X($(T)),X(P(W)),X($(Q)),X(P(ue)),X($(De)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,T,W,Q,ue){if(isNaN(v)||isNaN(T)||isNaN(W)||isNaN(Q)||!Ga(ue))throw new Error("Invalid arguments passed to jsPDF.line");return"compat"===V?this.lines([[W-v,Q-T]],v,T,[1,1],ue||"S"):this.lines([[W-v,Q-T]],v,T,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,T,W,Q,ue,De){var Ve,Ye,st,St,Et,rr,Zi,ua;if("number"==typeof v&&(ua=W,W=T,T=v,v=ua),Q=Q||[1,1],De=De||!1,isNaN(T)||isNaN(W)||!Array.isArray(v)||!Array.isArray(Q)||!Ga(ue)||"boolean"!=typeof De)throw new Error("Invalid arguments passed to jsPDF.lines");for(Fd(T,W),Ve=Q[0],Ye=Q[1],St=v.length,rr=T,Zi=W,st=0;st<St;st++)2===(Et=v[st]).length?Zs(rr=Et[0]*Ve+rr,Zi=Et[1]*Ye+Zi):zn(Et[0]*Ve+rr,Et[1]*Ye+Zi,Et[2]*Ve+rr,Et[3]*Ye+Zi,rr=Et[4]*Ve+rr,Zi=Et[5]*Ye+Zi);return De&&Tc(),Nd(ue),this},p.path=function(v){for(var T=0;T<v.length;T++){var W=v[T],Q=W.c;switch(W.op){case"m":Fd(Q[0],Q[1]);break;case"l":Zs(Q[0],Q[1]);break;case"c":zn.apply(this,Q);break;case"h":Tc()}}return this},p.__private__.rect=p.rect=function(v,T,W,Q,ue){if(isNaN(v)||isNaN(T)||isNaN(W)||isNaN(Q)||!Ga(ue))throw new Error("Invalid arguments passed to jsPDF.rect");return"compat"===V&&(Q=-Q),G([X(P(v)),X($(T)),X(P(W)),X(P(Q)),"re"].join(" ")),Nd(ue),this},p.__private__.triangle=p.triangle=function(v,T,W,Q,ue,De,Ve){if(isNaN(v)||isNaN(T)||isNaN(W)||isNaN(Q)||isNaN(ue)||isNaN(De)||!Ga(Ve))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[W-v,Q-T],[ue-W,De-Q],[v-ue,T-De]],v,T,[1,1],Ve,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,T,W,Q,ue,De,Ve){if(isNaN(v)||isNaN(T)||isNaN(W)||isNaN(Q)||isNaN(ue)||isNaN(De)||!Ga(Ve))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ye=4/3*(Math.SQRT2-1);return ue=Math.min(ue,.5*W),De=Math.min(De,.5*Q),this.lines([[W-2*ue,0],[ue*Ye,0,ue,De-De*Ye,ue,De],[0,Q-2*De],[0,De*Ye,-ue*Ye,De,-ue,De],[2*ue-W,0],[-ue*Ye,0,-ue,-De*Ye,-ue,-De],[0,2*De-Q],[0,-De*Ye,ue*Ye,-De,ue,-De]],v+ue,T,[1,1],Ve,!0),this},p.__private__.ellipse=p.ellipse=function(v,T,W,Q,ue){if(isNaN(v)||isNaN(T)||isNaN(W)||isNaN(Q)||!Ga(ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var De=4/3*(Math.SQRT2-1)*W,Ve=4/3*(Math.SQRT2-1)*Q;return Fd(v+W,T),zn(v+W,T-Ve,v+De,T-Q,v,T-Q),zn(v-De,T-Q,v-W,T-Ve,v-W,T),zn(v-W,T+Ve,v-De,T+Q,v,T+Q),zn(v+De,T+Q,v+W,T+Ve,v+W,T),Nd(ue),this},p.__private__.circle=p.circle=function(v,T,W,Q){if(isNaN(v)||isNaN(T)||isNaN(W)||!Ga(Q))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,T,W,W,Q)},p.setFont=function(v,T,W){return W&&(T=ee(T,W)),Ot=yc(v,T,{disableWarning:!1}),this};var vg=p.__private__.getFont=p.getFont=function(){return ei[yc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,T,W={};for(v in ui)if(ui.hasOwnProperty(v))for(T in W[v]=[],ui[v])ui[v].hasOwnProperty(T)&&W[v].push(T);return W},p.addFont=function(v,T,W,Q,ue){var De=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==De.indexOf(arguments[3])?ue=arguments[3]:arguments[3]&&-1==De.indexOf(arguments[3])&&(W=ee(W,Q)),Pd.call(this,v,T,W,ue=ue||"Identity-H")};var zs,kd=i.lineWidth||.200025,tl=p.__private__.getLineWidth=p.getLineWidth=function(){return kd},Ac=p.__private__.setLineWidth=p.setLineWidth=function(v){return kd=v,G(X(P(v))+" w"),this};p.__private__.setLineDash=lt.API.setLineDash=lt.API.setLineDashPattern=function(v,T){if(v=v||[],T=T||0,isNaN(T)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(W){return X(P(W))}).join(" "),T=X(P(T)),G("["+v+"] "+T+" d"),this};var Dc=p.__private__.getLineHeight=p.getLineHeight=function(){return Ze*zs};p.__private__.getLineHeight=p.getLineHeight=function(){return Ze*zs};var Oc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return"number"==typeof(v=v||1.15)&&(zs=v),this},Rc=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return zs};Oc(i.lineHeight);var fn=p.__private__.getHorizontalCoordinate=function(v){return P(v)},Wn=p.__private__.getVerticalCoordinate=function(v){return"advanced"===V?v:bt[z].mediaBox.topRightY-bt[z].mediaBox.bottomLeftY-P(v)},gg=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return X(fn(v))},$n=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return X(Wn(v))},da=i.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return sa(da)},p.__private__.setStrokeColor=p.setDrawColor=function(v,T,W,Q){return da=oa({ch1:v,ch2:T,ch3:W,ch4:Q,pdfColorType:"draw",precision:2}),G(da),this};var Md=i.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return sa(Md)},p.__private__.setFillColor=p.setFillColor=function(v,T,W,Q){return Md=oa({ch1:v,ch2:T,ch3:W,ch4:Q,pdfColorType:"fill",precision:2}),G(Md),this};var Ws=i.textColor||"0 g",mg=p.__private__.getTextColor=p.getTextColor=function(){return sa(Ws)};p.__private__.setTextColor=p.setTextColor=function(v,T,W,Q){return Ws=oa({ch1:v,ch2:T,ch3:W,ch4:Q,pdfColorType:"text",precision:3}),this};var il=i.charSpace,Cg=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(il||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return il=v,this};var Hd=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var T=p.CapJoinStyles[v];if(void 0===T)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Hd=T,G(T+" J"),this};var Zd=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var T=p.CapJoinStyles[v];if(void 0===T)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zd=T,G(T+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(X(P(v))+" M"),this},p.GState=sc,p.setGState=function(v){(v="string"==typeof v?vi[ra[v]]:Lc(null,v)).equals(hn)||(G("/"+v.id+" gs"),hn=v)};var Lc=function(v,T){if(!v||!ra[v]){var W=!1;for(var Q in vi)if(vi.hasOwnProperty(Q)&&vi[Q].equals(T)){W=!0;break}if(W)T=vi[Q];else{var ue="GS"+(Object.keys(vi).length+1).toString(10);vi[ue]=T,T.id=ue}return v&&(ra[v]=T.id),zt.publish("addGState",T),T}};p.addGState=function(v,T){return Lc(v,T),this},p.saveGraphicsState=function(){return G("q"),Ha.push({key:Ot,size:Ze,color:Ws}),this},p.restoreGraphicsState=function(){G("Q");var v=Ha.pop();return Ot=v.key,Ze=v.size,Ws=v.color,hn=null,this},p.setCurrentTransformationMatrix=function(v){return G(v.toString()+" cm"),this},p.comment=function(v){return G("#"+v),this};var rl=function(v,T){var W=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return W},set:function(De){isNaN(De)||(W=parseFloat(De))}});var Q=T||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Q},set:function(De){isNaN(De)||(Q=parseFloat(De))}});var ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ue},set:function(De){ue=De.toString()}}),this},zd=function(v,T,W,Q){rl.call(this,v,T),this.type="rect";var ue=W||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ue},set:function(Ve){isNaN(Ve)||(ue=parseFloat(Ve))}});var De=Q||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return De},set:function(Ve){isNaN(Ve)||(De=parseFloat(Ve))}}),this},Wd=function(){this.page=gi,this.currentPage=z,this.pages=Fe.slice(0),this.pagesContext=bt.slice(0),this.x=tr,this.y=Mt,this.matrix=ia,this.width=$s(z),this.height=Kn(z),this.outputDestination=Je,this.id="",this.objectNumber=-1};Wd.prototype.restore=function(){gi=this.page,bt=this.pagesContext,Fe=this.pages,tr=this.x,Mt=this.y,ia=this.matrix,$d(z=this.currentPage,this.width),Kd(z,this.height),Je=this.outputDestination};var Pc=function(v,T,W,Q,ue){za.push(new Wd),gi=z=0,Fe=[],tr=v,Mt=T,ia=ue,Bd([W,Q])};for(var al in p.beginFormObject=function(v,T,W,Q,ue){return Pc(v,T,W,Q,ue),this},p.endFormObject=function(v){return function(v){if(Za[v])za.pop().restore();else{var T=new Wd,W="Xo"+(Object.keys(Ui).length+1).toString(10);T.id=W,Za[v]=W,Ui[W]=T,zt.publish("addFormObject",T),za.pop().restore()}}(v),this},p.doFormObject=function(v,T){var W=Ui[Za[v]];return G("q"),G(T.toString()+" cm"),G("/"+W.id+" Do"),G("Q"),this},p.getFormObject=function(v){var T=Ui[Za[v]];return{x:T.x,y:T.y,width:T.width,height:T.height,matrix:T.matrix}},p.save=function(v,T){return v=v||"generated.pdf",(T=T||{}).returnPromise=T.returnPromise||!1,!1===T.returnPromise?(Bs(Jo(pn()),v),"function"==typeof Bs.unload&&ut.setTimeout&&setTimeout(Bs.unload,911),this):new Promise(function(W,Q){try{var ue=Bs(Jo(pn()),v);"function"==typeof Bs.unload&&ut.setTimeout&&setTimeout(Bs.unload,911),W(ue)}catch(De){Q(De.message)}})},lt.API)lt.API.hasOwnProperty(al)&&("events"===al&&lt.API.events.length?function(v,T){var Q,ue;for(ue=T.length-1;-1!==ue;ue--)v.subscribe.apply(v,[T[ue][0]].concat("function"==typeof(Q=T[ue][1])?[Q]:Q))}(zt,lt.API.events):p[al]=lt.API[al]);var $s=p.getPageWidth=function(v){return(bt[v=v||z].mediaBox.topRightX-bt[v].mediaBox.bottomLeftX)/je},$d=p.setPageWidth=function(v,T){bt[v].mediaBox.topRightX=T*je+bt[v].mediaBox.bottomLeftX},Kn=p.getPageHeight=function(v){return(bt[v=v||z].mediaBox.topRightY-bt[v].mediaBox.bottomLeftY)/je},Kd=p.setPageHeight=function(v,T){bt[v].mediaBox.topRightY=T*je+bt[v].mediaBox.bottomLeftY};return p.internal={pdfEscape:br,getStyle:Ic,getFont:vg,getFontSize:Ge,getCharSpace:Cg,getTextColor:mg,getLineHeight:Dc,getLineHeightFactor:Rc,getLineWidth:tl,write:wt,getHorizontalCoordinate:fn,getVerticalCoordinate:Wn,getCoordinateString:gg,getVerticalCoordinateString:$n,collections:{},newObject:Bi,newAdditionalObject:$o,newObjectDeferred:Ti,newObjectDeferredBegin:Dr,getFilters:$a,putStream:Zr,events:zt,scaleFactor:je,pageSize:{getWidth:function(){return $s(z)},setWidth:function(v){$d(z,v)},getHeight:function(){return Kn(z)},setHeight:function(v){Kd(z,v)}},encryptionOptions:u,encryption:ir,getEncryptor:function(v){return null!==u?ir.encryptor(v,0):function(T){return T}},output:Qo,getNumberOfPages:ng,pages:Fe,out:G,f2:fe,f3:B,getPageInfo:Ec,getPageInfoByObjId:gt,getCurrentPageInfo:hg,getPDFVersion:w,Point:rl,Rectangle:zd,Matrix:dt,hasHotfix:xc},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return $s(z)},set:function(v){$d(z,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Kn(z)},set:function(v){Kd(z,v)},enumerable:!0,configurable:!0}),function(v){for(var T=0,W=Ne.length;T<W;T++){var Q=Pd.call(this,v[T][0],v[T][1],v[T][2],Ne[T][3],!0);!1===c&&(f[Q]=!0);var ue=v[T][0].split("-");bc({id:Q,fontName:ue[0],fontStyle:ue[1]||""})}zt.publish("addFonts",{fonts:ei,dictionary:ui})}.call(p,Ne),Ot="F1",wc(a,t),zt.publish("initialized"),p}Vo.prototype.lsbFirstWord=function(i){return String.fromCharCode(i>>0&255,i>>8&255,i>>16&255,i>>24&255)},Vo.prototype.toHexString=function(i){return i.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Vo.prototype.hexToBytes=function(i){for(var e=[],t=0;t<i.length;t+=2)e.push(String.fromCharCode(parseInt(i.substr(t,2),16)));return e.join("")},Vo.prototype.processOwnerPassword=function(i,e){return Wv(zv(e).substr(0,5),i)},Vo.prototype.encryptor=function(i,e){var t=zv(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Wv(t,r)}},sc.prototype.equals=function(i){var e,t="id,objectNumber,equals";if(!i||(0,Jt.Z)(i)!==(0,Jt.Z)(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!i.hasOwnProperty(e)||this[e]!==i[e])return!1;r++}for(e in i)i.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return 0===r},lt.API={events:[]},lt.version="2.5.1";var _i=lt.API,$v=1,Ns=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ko=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mt=function(i){return i.toFixed(2)},Hn=function(i){return i.toFixed(5)};_i.__acroform__={};var mr=function(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i},m1=function(i){return i*$v},Fa=function(i){var e=new b1,t=et.internal.getHeight(i)||0,r=et.internal.getWidth(i)||0;return e.BBox=[0,0,Number(mt(r)),Number(mt(t))],e},mK=_i.__acroform__.setBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|1<<e},CK=_i.__acroform__.clearBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&~(1<<e)},bK=_i.__acroform__.getBit=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return i&1<<e?1:0},Si=_i.__acroform__.getBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bK(i,e-1)},yi=_i.__acroform__.setBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return mK(i,e-1)},xi=_i.__acroform__.clearBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return CK(i,e-1)},wK=_i.__acroform__.calculateCoordinates=function(i,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,a=i[0],n=i[1],s=i[2],o=i[3],l={};return l.lowerLeft_X=t(a)||0,l.lowerLeft_Y=r(n+o)||0,l.upperRight_X=t(a+s)||0,l.upperRight_Y=r(n)||0,[Number(mt(l.lowerLeft_X)),Number(mt(l.lowerLeft_Y)),Number(mt(l.upperRight_X)),Number(mt(l.upperRight_Y))]},SK=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var e=[],r=Kv(i,i._V||i.DV),a=i.scope.internal.getFont(i.fontName,i.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(i.scope.__private__.encodeColorString(i.color)),e.push("/"+a+" "+mt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var n=Fa(i);return n.scope=i.scope,n.stream=e.join("\n"),n}},Kv=function(i,e){var t=0===i.fontSize?i.maxFontSize:i.fontSize,r={text:"",fontSize:""},a=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");a=a.map(i.multiline?function(B){return B.split("\n")}:function(B){return[B]});var n=t,s=et.internal.getHeight(i)||0;s=s<0?-s:s;var B,o=et.internal.getWidth(i)||0;o=o<0?-o:o,n++;e:for(;n>0;){e="",n--;var d,u,c=oc("3",i,n).height,f=i.multiline?s-n:(s-c)/2,p=f+=2,g=0,w=0,x=0;if(n<=0){e="(...) Tj\n",e+="% Width of Text: "+oc(e,i,n=12).width+", FieldWidth:"+o+"\n";break}for(var y="",E=0,V=0;V<a.length;V++)if(a.hasOwnProperty(V)){var F=!1;if(1!==a[V].length&&x!==a[V].length-1){if((c+2)*(E+2)+2>s)continue e;y+=a[V][x],F=!0,w=V,V--}else{y=" "==(y+=a[V][x]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var q=parseInt(V),ee=(B=q)+1<a.length&&oc(y+" "+a[B+1][0],i,n).width<=o-4,X=V>=a.length-1;if(ee&&!X){y+=" ",x=0;continue}if(ee||X){if(X)w=q;else if(i.multiline&&(c+2)*(E+2)+2>s)continue e}else{if(!i.multiline||(c+2)*(E+2)+2>s)continue e;w=q}}for(var M="",le=g;le<=w;le++){var fe=a[le];if(i.multiline){if(le===w){M+=fe[x]+" ",x=(x+1)%fe.length;continue}if(le===g){M+=fe[fe.length-1]+" ";continue}}M+=fe[0]+" "}switch(M=" "==M.substr(M.length-1)?M.substr(0,M.length-1):M,u=oc(M,i,n).width,i.textAlign){case"right":d=o-u-2;break;case"center":d=(o-u)/2;break;default:d=2}e+=mt(d)+" "+mt(p)+" Td\n",e+="("+Ns(M)+") Tj\n",e+=-mt(d)+" 0 Td\n",p=-(n+2),u=0,g=F?w:w+1,E++,y=""}break}return r.text=e,r.fontSize=n,r},oc=function(i,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(i,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},yK={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},xK=function(i,e){var t={type:"reference",object:i};void 0===e.internal.getPageInfo(i.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})&&e.internal.getPageInfo(i.page).pageContext.annotations.push(t)},C1=_i.__acroform__.arrayToPdfArray=function(i,e,t){var r=function(s){return s};if(Array.isArray(i)){for(var a="[",n=0;n<i.length;n++)switch(0!==n&&(a+=" "),(0,Jt.Z)(i[n])){case"boolean":case"number":case"object":a+=i[n].toString();break;case"string":"/"!==i[n].substr(0,1)?(void 0!==e&&t&&(r=t.internal.getEncryptor(e)),a+="("+Ns(r(i[n].toString()))+")"):a+=i[n].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Gv=function(i,e,t){var r=function(a){return a};return void 0!==e&&t&&(r=t.internal.getEncryptor(e)),(i=i||"").toString(),"("+Ns(r(i))+")"},ka=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ka.prototype.toString=function(){return this.objId+" 0 R"},ka.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},ka.prototype.getKeyValueListForStream=function(){var i=[],e=Object.getOwnPropertyNames(this).filter(function(n){return"content"!=n&&"appearanceStreamContent"!=n&&"scope"!=n&&"objId"!=n&&"_"!=n.substring(0,1)});for(var t in e)if(!1===Object.getOwnPropertyDescriptor(this,e[t]).configurable){var r=e[t],a=this[r];a&&(Array.isArray(a)?i.push({key:r,value:C1(a,this.objId,this.scope)}):a instanceof ka?(a.scope=this.scope,i.push({key:r,value:a.objId+" 0 R"})):"function"!=typeof a&&i.push({key:r,value:a}))}return i};var b1=function(){ka.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){i=t.trim()},get:function(){return i||null}})};mr(b1,ka);var w1=function(){ka.call(this);var i,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ns(t(i))+")"}},set:function(t){i=t}})};mr(w1,ka);var Qr=function i(){ka.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');e=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Si(e,3)},set:function(y){this.F=y?yi(e,3):xi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');t=y}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(y){r=void 0!==y?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(y){r[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(y){r[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(y){r[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(y){r[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var n=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!n||n.length<1){if(this instanceof uc)return;n="FieldObject"+i.FieldNum++}var y=function(E){return E};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Ns(y(n))+")"},set:function(y){n=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return n},set:function(y){n=y}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(y){s=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===d?50/$v:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var c="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!c||this instanceof uc||this instanceof Fs))return Gv(c,this.objId,this.scope)},set:function(y){y=y.toString(),c=y}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Hi?f:Gv(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=this instanceof Hi?y:"("===y.substr(0,1)?ko(y.substr(1,y.length-2)):ko(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hi?ko(f.substr(1,f.length-1)):f},set:function(y){y=y.toString(),f=this instanceof Hi?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Hi?p:Gv(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Hi?y:"("===y.substr(0,1)?ko(y.substr(1,y.length-2)):ko(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hi?ko(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Hi?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(y){w=y=!!y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,1)},set:function(y){this.Ff=y?yi(this.Ff,1):xi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,2)},set:function(y){this.Ff=y?yi(this.Ff,2):xi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,3)},set:function(y){this.Ff=y?yi(this.Ff,3):xi(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==x)return x},set:function(y){if(-1===[0,1,2].indexOf(y))throw new Error('Invalid value "'+y+'" for attribute Q supplied.');x=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(x){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};mr(Qr,ka);var Mo=function(){Qr.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){i=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return C1(e,this.objId,this.scope)},set:function(t){var r,a;a=[],"string"==typeof(r=t)&&(a=function(n,s,o){o||(o=1);for(var l,d=[];l=s.exec(n);)d.push(l[o]);return d}(r,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==r););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,18)},set:function(t){this.Ff=t?yi(this.Ff,18):xi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,19)},set:function(t){!0===this.combo&&(this.Ff=t?yi(this.Ff,19):xi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,20)},set:function(t){t?(this.Ff=yi(this.Ff,20),e.sort()):this.Ff=xi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,22)},set:function(t){this.Ff=t?yi(this.Ff,22):xi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,23)},set:function(t){this.Ff=t?yi(this.Ff,23):xi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,27)},set:function(t){this.Ff=t?yi(this.Ff,27):xi(this.Ff,27)}}),this.hasAppearanceStream=!1};mr(Mo,Qr);var Ho=function(){Mo.call(this),this.fontName="helvetica",this.combo=!1};mr(Ho,Mo);var Zo=function(){Ho.call(this),this.combo=!0};mr(Zo,Ho);var lc=function(){Zo.call(this),this.edit=!0};mr(lc,Zo);var Hi=function(){Qr.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,15)},set:function(t){this.Ff=t?yi(this.Ff,15):xi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,16)},set:function(t){this.Ff=t?yi(this.Ff,16):xi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,17)},set:function(t){this.Ff=t?yi(this.Ff,17):xi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,26)},set:function(t){this.Ff=t?yi(this.Ff,26):xi(this.Ff,26)}});var i,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(n){return n};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var r,a=[];for(r in a.push("<<"),e)a.push("/"+r+" ("+Ns(t(e[r]))+")");return a.push(">>"),a.join("\n")}},set:function(t){"object"===(0,Jt.Z)(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}})};mr(Hi,Qr);var dc=function(){Hi.call(this),this.pushButton=!0};mr(dc,Hi);var zo=function(){Hi.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=void 0!==e?e:[]}})};mr(zo,Hi);var uc=function(){var i,e;Qr.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(a){i=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var n,s=[];for(n in s.push("<<"),r)s.push("/"+n+" ("+Ns(a(r[n]))+")");return s.push(">>"),s.join("\n")},set:function(a){"object"===(0,Jt.Z)(a)&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){"string"==typeof a&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};mr(uc,Qr),zo.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=i.createAppearanceStream(t.optionName),t.caption=i.getCA()}},zo.prototype.createOption=function(i){var e=new uc;return e.Parent=this,e.optionName=i,this.Kids.push(e),TK.call(this.scope,e),e};var hc=function(){Hi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=et.CheckBox.createAppearanceStream()};mr(hc,Hi);var Fs=function(){Qr.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,13)},set:function(e){this.Ff=e?yi(this.Ff,13):xi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,21)},set:function(e){this.Ff=e?yi(this.Ff,21):xi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,23)},set:function(e){this.Ff=e?yi(this.Ff,23):xi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,24)},set:function(e){this.Ff=e?yi(this.Ff,24):xi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,25)},set:function(e){this.Ff=e?yi(this.Ff,25):xi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,26)},set:function(e){this.Ff=e?yi(this.Ff,26):xi(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){Number.isInteger(e)&&(i=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};mr(Fs,Qr);var cc=function(){Fs.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Si(this.Ff,14)},set:function(i){this.Ff=i?yi(this.Ff,14):xi(this.Ff,14)}}),this.password=!0};mr(cc,Fs);var et={CheckBox:{createAppearanceStream:function(){return{N:{On:et.CheckBox.YesNormal},D:{On:et.CheckBox.YesPushDown,Off:et.CheckBox.OffPushDown}}},YesPushDown:function(i){var e=Fa(i);e.scope=i.scope;var t=[],r=i.scope.internal.getFont(i.fontName,i.fontStyle).id,a=i.scope.__private__.encodeColorString(i.color),n=Kv(i,i.caption);return t.push("0.749023 g"),t.push("0 0 "+mt(et.internal.getWidth(i))+" "+mt(et.internal.getHeight(i))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+mt(n.fontSize)+" Tf "+a),t.push("BT"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join("\n"),e},YesNormal:function(i){var e=Fa(i);e.scope=i.scope;var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,r=i.scope.__private__.encodeColorString(i.color),a=[],n=et.internal.getHeight(i),s=et.internal.getWidth(i),o=Kv(i,i.caption);return a.push("1 g"),a.push("0 0 "+mt(s)+" "+mt(n)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+mt(s-1)+" "+mt(n-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+mt(o.fontSize)+" Tf "+r),a.push(o.text),a.push("ET"),a.push("Q"),e.stream=a.join("\n"),e},OffPushDown:function(i){var e=Fa(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+mt(et.internal.getWidth(i))+" "+mt(et.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(i){var e={D:{Off:et.RadioButton.Circle.OffPushDown},N:{}};return e.N[i]=et.RadioButton.Circle.YesNormal,e.D[i]=et.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(i){var e=Fa(i);e.scope=i.scope;var t=[],r=et.internal.getWidth(i)<=et.internal.getHeight(i)?et.internal.getWidth(i)/4:et.internal.getHeight(i)/4;r=Number((.9*r).toFixed(5));var n=Number((r*et.internal.Bezier_C).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Hn(et.internal.getWidth(i)/2)+" "+Hn(et.internal.getHeight(i)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+n+" "+n+" "+r+" 0 "+r+" c"),t.push("-"+n+" "+r+" -"+r+" "+n+" -"+r+" 0 c"),t.push("-"+r+" -"+n+" -"+n+" -"+r+" 0 -"+r+" c"),t.push(n+" -"+r+" "+r+" -"+n+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e},YesPushDown:function(i){var e=Fa(i);e.scope=i.scope;var t=[],r=et.internal.getWidth(i)<=et.internal.getHeight(i)?et.internal.getWidth(i)/4:et.internal.getHeight(i)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),n=Number((a*et.internal.Bezier_C).toFixed(5)),s=Number((r*et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hn(et.internal.getWidth(i)/2)+" "+Hn(et.internal.getHeight(i)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+n+" "+n+" "+a+" 0 "+a+" c"),t.push("-"+n+" "+a+" -"+a+" "+n+" -"+a+" 0 c"),t.push("-"+a+" -"+n+" -"+n+" -"+a+" 0 -"+a+" c"),t.push(n+" -"+a+" "+a+" -"+n+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Hn(et.internal.getWidth(i)/2)+" "+Hn(et.internal.getHeight(i)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e},OffPushDown:function(i){var e=Fa(i);e.scope=i.scope;var t=[],r=et.internal.getWidth(i)<=et.internal.getHeight(i)?et.internal.getWidth(i)/4:et.internal.getHeight(i)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),n=Number((a*et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hn(et.internal.getWidth(i)/2)+" "+Hn(et.internal.getHeight(i)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+n+" "+n+" "+a+" 0 "+a+" c"),t.push("-"+n+" "+a+" -"+a+" "+n+" -"+a+" 0 c"),t.push("-"+a+" -"+n+" -"+n+" -"+a+" 0 -"+a+" c"),t.push(n+" -"+a+" "+a+" -"+n+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e}},Cross:{createAppearanceStream:function(i){var e={D:{Off:et.RadioButton.Cross.OffPushDown},N:{}};return e.N[i]=et.RadioButton.Cross.YesNormal,e.D[i]=et.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(i){var e=Fa(i);e.scope=i.scope;var t=[],r=et.internal.calculateCross(i);return t.push("q"),t.push("1 1 "+mt(et.internal.getWidth(i)-2)+" "+mt(et.internal.getHeight(i)-2)+" re"),t.push("W"),t.push("n"),t.push(mt(r.x1.x)+" "+mt(r.x1.y)+" m"),t.push(mt(r.x2.x)+" "+mt(r.x2.y)+" l"),t.push(mt(r.x4.x)+" "+mt(r.x4.y)+" m"),t.push(mt(r.x3.x)+" "+mt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join("\n"),e},YesPushDown:function(i){var e=Fa(i);e.scope=i.scope;var t=et.internal.calculateCross(i),r=[];return r.push("0.749023 g"),r.push("0 0 "+mt(et.internal.getWidth(i))+" "+mt(et.internal.getHeight(i))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+mt(et.internal.getWidth(i)-2)+" "+mt(et.internal.getHeight(i)-2)+" re"),r.push("W"),r.push("n"),r.push(mt(t.x1.x)+" "+mt(t.x1.y)+" m"),r.push(mt(t.x2.x)+" "+mt(t.x2.y)+" l"),r.push(mt(t.x4.x)+" "+mt(t.x4.y)+" m"),r.push(mt(t.x3.x)+" "+mt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(i){var e=Fa(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+mt(et.internal.getWidth(i))+" "+mt(et.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join("\n"),e}}},createDefaultAppearanceStream:function(i){var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,t=i.scope.__private__.encodeColorString(i.color);return"/"+e+" "+i.fontSize+" Tf "+t}};et.internal={Bezier_C:.551915024494,calculateCross:function(i){var e=et.internal.getWidth(i),t=et.internal.getHeight(i),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},et.internal.getWidth=function(i){var e=0;return"object"===(0,Jt.Z)(i)&&(e=m1(i.Rect[2])),e},et.internal.getHeight=function(i){var e=0;return"object"===(0,Jt.Z)(i)&&(e=m1(i.Rect[3])),e};var TK=_i.addField=function(i){if(function(i,e){if(e.scope=i,void 0!==i.internal&&(void 0===i.internal.acroformPlugin||!1===i.internal.acroformPlugin.isInitialized)){if(Qr.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(yK)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");$v=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new w1,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){!function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}(i)}),i.internal.events.subscribe("buildDocument",function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var n=r[a];n.objId=void 0,n.hasAnnotation&&xK(n,t)}}(i)}),i.internal.events.subscribe("putCatalog",function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(i)}),i.internal.events.subscribe("postPutPages",function(t){!function(r,a){var n=!r;for(var s in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var o=r[s],l=[],d=o.Rect;if(o.Rect&&(o.Rect=wK(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=et.createDefaultAppearanceStream(o),"object"===(0,Jt.Z)(o)&&"function"==typeof o.getKeyValueListForStream&&(l=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=SK(o);l.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var c="";for(var f in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(f)){var p=o.appearanceStreamContent[f];if(c+="/"+f+" ",c+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var s in p)if(p.hasOwnProperty(s)){var g=p[s];"function"==typeof g&&(g=g.call(a,o)),c+="/"+s+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else"function"==typeof(g=p)&&(g=g.call(a,o)),c+="/"+s+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);c+=">>"}l.push({key:"AP",value:"<<\n"+c+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}n&&function(i,e){for(var t in i)if(i.hasOwnProperty(t)){var r=t,a=i[t];e.internal.newObjectDeferredBegin(a.objId,!0),"object"===(0,Jt.Z)(a)&&"function"==typeof a.putStream&&a.putStream(),delete i[r]}}(a.internal.acroformPlugin.xForms,a)}(t,i)}),i.internal.acroformPlugin.isInitialized=!0}}(this,i),!(i instanceof Qr))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=i).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};function S1(i){return i.reduce(function(e,t,r){return e[t]=r,e},{})}_i.AcroFormChoiceField=Mo,_i.AcroFormListBox=Ho,_i.AcroFormComboBox=Zo,_i.AcroFormEditBox=lc,_i.AcroFormButton=Hi,_i.AcroFormPushButton=dc,_i.AcroFormRadioButton=zo,_i.AcroFormCheckBox=hc,_i.AcroFormTextField=Fs,_i.AcroFormPasswordField=cc,_i.AcroFormAppearance=et,_i.AcroForm={ChoiceField:Mo,ListBox:Ho,ComboBox:Zo,EditBox:lc,Button:Hi,PushButton:dc,RadioButton:zo,CheckBox:hc,TextField:Fs,PasswordField:cc,Appearance:et},lt.AcroForm={ChoiceField:Mo,ListBox:Ho,ComboBox:Zo,EditBox:lc,Button:Hi,PushButton:dc,RadioButton:zo,CheckBox:hc,TextField:Fs,PasswordField:cc,Appearance:et},function(i){i.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=i.__addimage__.getImageFileTypeByImageData=function(B,P){var U,$,me,pe,xe,_e=e;if("RGBA"===(P=P||e)||void 0!==B.data&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(ee(B))for(xe in t)for(me=t[xe],U=0;U<me.length;U+=1){for(pe=!0,$=0;$<me[U].length;$+=1)if(void 0!==me[U][$]&&me[U][$]!==B[$]){pe=!1;break}if(!0===pe){_e=xe;break}}else for(xe in t)for(me=t[xe],U=0;U<me.length;U+=1){for(pe=!0,$=0;$<me[U].length;$+=1)if(void 0!==me[U][$]&&me[U][$]!==B.charCodeAt($)){pe=!1;break}if(!0===pe){_e=xe;break}}return _e===e&&P!==e&&(_e=P),_e},a=function B(P){for(var U=this.internal.write,$=this.internal.putStream,me=(0,this.internal.getFilters)();-1!==me.indexOf("FlateEncode");)me.splice(me.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var pe=[];if(pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Image"}),pe.push({key:"Width",value:P.width}),pe.push({key:"Height",value:P.height}),P.colorSpace===x.INDEXED?pe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&void 0!==P.sMask?P.objectId+2:P.objectId+1)+" 0 R]"}):(pe.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===x.DEVICE_CMYK&&pe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pe.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&void 0!==P.decodeParameters&&pe.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var xe="",_e=0,Ae=P.transparency.length;_e<Ae;_e++)xe+=P.transparency[_e]+" "+P.transparency[_e]+" ";pe.push({key:"Mask",value:"["+xe+"]"})}if(void 0!==P.sMask&&pe.push({key:"SMask",value:P.objectId+1+" 0 R"}),$({data:P.data,additionalKeyValues:pe,alreadyAppliedFilters:void 0!==P.filter?["/"+P.filter]:void 0,objectId:P.objectId}),U("endobj"),"sMask"in P&&void 0!==P.sMask){var D={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:"/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,data:P.sMask};"filter"in P&&(D.filter=P.filter),B.call(this,D)}if(P.colorSpace===x.INDEXED){var z=this.internal.newObject();$({data:M(new Uint8Array(P.palette)),objectId:z}),U("endobj")}},n=function(){var B=this.internal.collections.addImage_images;for(var P in B)a.call(this,B[P])},s=function(){var B,P=this.internal.collections.addImage_images,U=this.internal.write;for(var $ in P)U("/I"+(B=P[$]).index,B.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",n),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var B=this.internal.collections.addImage_images;return o.call(this),B},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(B){return"function"==typeof i["process"+B.toUpperCase()]},c=function(B){return"object"===(0,Jt.Z)(B)&&1===B.nodeType},f=function(B,P){if("IMG"===B.nodeName&&B.hasAttribute("src")){var U=""+B.getAttribute("src");if(0===U.indexOf("data:image/"))return Rd(unescape(U).split("base64,").pop());var $=i.loadFile(U,!0);if(void 0!==$)return $}if("CANVAS"===B.nodeName){if(0===B.width||0===B.height)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var me;switch(P){case"PNG":me="image/png";break;case"WEBP":me="image/webp";break;default:me="image/jpeg"}return Rd(B.toDataURL(me,1).split("base64,").pop())}},p=function(B){var P=this.internal.collections.addImage_images;if(P)for(var U in P)if(B===P[U].alias)return P[U]},g=function(B,P,U){return B||P||(B=-96,P=-96),B<0&&(B=-1*U.width*72/B/this.internal.scaleFactor),P<0&&(P=-1*U.height*72/P/this.internal.scaleFactor),0===B&&(B=P*U.width/U.height),0===P&&(P=B*U.height/U.width),[B,P]},w=function(B,P,U,$,me,pe){var xe=g.call(this,U,$,me),_e=this.internal.getCoordinateString,Ae=this.internal.getVerticalCoordinateString,Ie=l.call(this);if(U=xe[0],$=xe[1],Ie[me.index]=me,pe){pe*=Math.PI/180;var Me=Math.cos(pe),D=Math.sin(pe),z=function(te){return te.toFixed(4)},K=[z(Me),z(D),z(-1*D),z(Me),0,0,"cm"]}this.internal.write("q"),pe?(this.internal.write([1,"0","0",1,_e(B),Ae(P+$),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([_e(U),"0","0",_e($),"0","0","cm"].join(" "))):this.internal.write([_e(U),"0","0",_e($),_e(B),Ae(P+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+me.index+" Do"),this.internal.write("Q")},x=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=i.__addimage__.sHashCode=function(B){var P,U,$=0;if("string"==typeof B)for(U=B.length,P=0;P<U;P++)$=($<<5)-$+B.charCodeAt(P),$|=0;else if(ee(B))for(U=B.byteLength/2,P=0;P<U;P++)$=($<<5)-$+B[P],$|=0;return $},V=i.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var P=!0;return 0===B.length&&(P=!1),B.length%4!=0&&(P=!1),!1===/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))&&(P=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))&&(P=!1),P},F=i.__addimage__.extractImageFromDataUrl=function(B){var P=(B=B||"").split("base64,"),U=null;if(2===P.length){var $=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(P[0]);Array.isArray($)&&(U={mimeType:$[1],charset:$[2],data:P[1]})}return U},q=i.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};i.__addimage__.isArrayBuffer=function(B){return q()&&B instanceof ArrayBuffer};var ee=i.__addimage__.isArrayBufferView=function(B){return q()&&typeof Uint32Array<"u"&&(B instanceof Int8Array||B instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array)},X=i.__addimage__.binaryStringToUint8Array=function(B){for(var P=B.length,U=new Uint8Array(P),$=0;$<P;$++)U[$]=B.charCodeAt($);return U},M=i.__addimage__.arrayBufferToBinaryString=function(B){for(var P="",U=ee(B)?B:new Uint8Array(B),$=0;$<U.length;$+=8192)P+=String.fromCharCode.apply(null,U.subarray($,$+8192));return P};i.addImage=function(){var B,P,U,$,me,pe,xe,_e,Ae;if("number"==typeof arguments[1]?(P=e,U=arguments[1],$=arguments[2],me=arguments[3],pe=arguments[4],xe=arguments[5],_e=arguments[6],Ae=arguments[7]):(P=arguments[1],U=arguments[2],$=arguments[3],me=arguments[4],pe=arguments[5],xe=arguments[6],_e=arguments[7],Ae=arguments[8]),"object"===(0,Jt.Z)(B=arguments[0])&&!c(B)&&"imageData"in B){var Ie=B;B=Ie.imageData,P=Ie.format||P||e,U=Ie.x||U||0,$=Ie.y||$||0,me=Ie.w||Ie.width||me,pe=Ie.h||Ie.height||pe,xe=Ie.alias||xe,_e=Ie.compression||_e,Ae=Ie.rotation||Ie.angle||Ae}var Me=this.internal.getFilters();if(void 0===_e&&-1!==Me.indexOf("FlateEncode")&&(_e="SLOW"),isNaN(U)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var D=le.call(this,B,P,xe,_e);return w.call(this,U,$,me,pe,D,Ae),this};var le=function(B,P,U,$){var me,pe,xe,Ae;if("string"==typeof B&&r(B)===e){B=unescape(B);var _e=fe(B,!1);(""!==_e||void 0!==(_e=i.loadFile(B,!0)))&&(B=_e)}if(c(B)&&(B=f(B,P)),P=r(B,P),!u(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if((null==(xe=U)||0===xe.length)&&(U="string"==typeof(Ae=B)||ee(Ae)?E(Ae):ee(Ae.data)?E(Ae.data):null),(me=p.call(this,U))||(q()&&(B instanceof Uint8Array||"RGBA"===P||(pe=B,B=X(B))),me=this["process"+P.toUpperCase()](B,d.call(this),U,function(Ae){return Ae&&"string"==typeof Ae&&(Ae=Ae.toUpperCase()),Ae in i.image_compression?Ae:y.NONE}($),pe)),!me)throw new Error("An unknown error occurred whilst processing the image.");return me},fe=i.__addimage__.convertBase64ToBinaryString=function(B,P){var U;P="boolean"!=typeof P||P;var $,me="";if("string"==typeof B){$=null!==(U=F(B))?U.data:B;try{me=Rd($)}catch(pe){if(P)throw V($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return me};i.getImageProperties=function(B){var P,U,$="";if(c(B)&&(B=f(B)),"string"==typeof B&&r(B)===e&&(""===($=fe(B,!1))&&($=i.loadFile(B)||""),B=$),U=r(B),!u(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!q()||B instanceof Uint8Array||(B=X(B)),!(P=this["process"+U.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=U,P}}(lt.API),
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){var e=function(t){if(void 0!==t&&""!=t)return!0};lt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(t){for(var r,a,n,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,u=!1,c=0;c<d.length&&!u;c++)switch((r=d[c]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(0!=u){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){r=d[f];var p=this.internal.pdfEscape,g=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(w.objId),E=r.title||"Note";n="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+p(y(r.contents))+")",n+=" /Popup "+x.objId+" 0 R",n+=" /P "+l.objId+" 0 R",n+=" /T ("+p(y(E))+") >>",w.content=n;var V=w.objId+" 0 R";n="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+V,r.open&&(n+=" /Open true"),x.content=n+=" >>",this.internal.write(w.objId,"0 R",x.objId,"0 R");break;case"freetext":a="/Rect ["+s(r.bounds.x)+" "+o(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var F=r.color||"#000000";n="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(g(r.contents))+")",n+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",n+=" /Border [0 0 0]",this.internal.write(n+=" >>");break;case"link":if(r.options.name){var q=this.annotations._nameMap[r.options.name];r.options.pageNumber=q.page,r.options.top=q.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",n="",r.options.url)n="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(g(r.options.url))+") >>";else if(r.options.pageNumber)switch(n="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":n+=" /Fit]";break;case"FitH":n+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,n+=" /FitV "+r.options.left+"]";break;default:var ee=o(r.options.top);r.options.left=r.options.left||0,void 0===r.options.zoom&&(r.options.zoom=0),n+=" /XYZ "+r.options.left+" "+ee+" "+r.options.zoom+"]"}""!=n&&this.internal.write(n+=" >>")}}this.internal.write("]")}}]),i.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},i.link=function(t,r,a,n,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:d(r),w:l(t+a),h:d(r+n)},options:s,type:"link"})},i.textWithLink=function(t,r,a,n){var s,o,l=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==n.maxWidth){var u=this.splitTextToSize(t,o=n.maxWidth).length;s=Math.ceil(d*u)}else o=l,s=d;return this.text(t,r,a,n),"center"===n.align&&(r-=l/2),"right"===n.align&&(r-=l),this.link(r,(a+=.2*d)-d,o,s,n),l},i.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(lt.API),
/**
       * @license
       * Copyright (c) 2017 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];i.__arabicParser__={};var n=i.__arabicParser__.isInArabicSubstitutionA=function(w){return void 0!==e[w.charCodeAt(0)]},s=i.__arabicParser__.isArabicLetter=function(w){return"string"==typeof w&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=i.__arabicParser__.isArabicEndLetter=function(w){return s(w)&&n(w)&&e[w.charCodeAt(0)].length<=2},l=i.__arabicParser__.isArabicAlfLetter=function(w){return s(w)&&a.indexOf(w.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return s(w)&&n(w)&&e[w.charCodeAt(0)].length>=1};var d=i.__arabicParser__.arabicLetterHasFinalForm=function(w){return s(w)&&n(w)&&e[w.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(w){return s(w)&&n(w)&&e[w.charCodeAt(0)].length>=3};var u=i.__arabicParser__.arabicLetterHasMedialForm=function(w){return s(w)&&n(w)&&4==e[w.charCodeAt(0)].length},c=i.__arabicParser__.resolveLigatures=function(w){var x=0,y=t,E="",V=0;for(x=0;x<w.length;x+=1)void 0!==y[w.charCodeAt(x)]?(V++,"number"==typeof(y=y[w.charCodeAt(x)])&&(E+=String.fromCharCode(y),y=t,V=0),x===w.length-1&&(y=t,E+=w.charAt(x-(V-1)),x-=V-1,V=0)):(y=t,E+=w.charAt(x-V),x-=V,V=0);return E};i.__arabicParser__.isArabicDiacritic=function(w){return void 0!==w&&void 0!==r[w.charCodeAt(0)]};var f=i.__arabicParser__.getCorrectForm=function(w,x,y){return s(w)?!1===n(w)?-1:!d(w)||!s(x)&&!s(y)||!s(y)&&o(x)||o(w)&&!s(x)||o(w)&&l(x)||o(w)&&o(x)?0:u(w)&&s(x)&&!o(x)&&s(y)&&d(y)?3:o(w)||!s(y)?1:2:-1},p=function(w){var x=0,y=0,E=0,V="",F="",q="",ee=(w=w||"").split("\\s+"),X=[];for(x=0;x<ee.length;x+=1){for(X.push(""),y=0;y<ee[x].length;y+=1)F=ee[x][y-1],q=ee[x][y+1],s(V=ee[x][y])?(E=f(V,F,q),X[x]+=-1!==E?String.fromCharCode(e[V.charCodeAt(0)][E]):V):X[x]+=V;X[x]=c(X[x])}return X.join(" ")},g=i.__arabicParser__.processArabic=i.processArabic=function(){var w,x="string"==typeof arguments[0]?arguments[0]:arguments[0].text,y=[];if(Array.isArray(x)){var E=0;for(y=[],E=0;E<x.length;E+=1)Array.isArray(x[E])?y.push([p(x[E][0]),x[E][1],x[E][2]]):y.push([p(x[E])]);w=y}else w=p(x);return"string"==typeof arguments[0]?w:(arguments[0].text=w,arguments[0])};i.events.push(["preProcessText",g])}(lt.API),lt.API.autoPrint=function(i){var e;return"javascript"===((i=i||{}).variant=i.variant||"non-conform",i.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||!1===Number.isInteger(o)||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||!1===Number.isInteger(o)||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var n=[];Object.defineProperty(this,"childNodes",{get:function(){return n},set:function(o){n=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var a;if("2d"!==(t=t||"2d"))return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(lt.API),function(i){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new n,this.internal.__cell__.pages=1},n=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var c=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(w){g=w}}),this};n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},n.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof l?l:void 0,this},i.getTextDimensions=function(l,d){r.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),c=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,p=0,g=0,w=0,x=this;if(!Array.isArray(l)&&"string"!=typeof l){if("number"!=typeof l)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var y=d.maxWidth;y>0?"string"==typeof l?l=this.splitTextToSize(l,y):"[object Array]"===Object.prototype.toString.call(l)&&(l=l.reduce(function(V,F){return V.concat(x.splitTextToSize(F,y))},[])):l=Array.isArray(l)?l:[l];for(var E=0;E<l.length;E++)p<(w=this.getStringUnitWidth(l[E],{font:c})*u)&&(p=w);return 0!==p&&(g=l.length),{w:p/=f,h:Math.max((g*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},i.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new n(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=i.cell=function(){var l;l=arguments[0]instanceof n?arguments[0]:new n(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,c=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return void 0!==d.lineNumber&&(d.lineNumber===l.lineNumber?(l.x=(d.x||0)+(d.width||0),l.y=d.y||0):d.y+d.height+l.height+c.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=c.top,p&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=d.y+d.height||l.y),void 0!==l.text[0]&&(this.rect(l.x,l.y,l.width,l.height,!0===t?"FD":void 0),"right"===l.align?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):"center"===l.align?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};i.table=function(l,d,u,c,f){if(r.call(this),!u)throw new Error("No data for PDF table.");var p,g,w,x,y=[],E=[],V=[],F={},q={},ee=[],X=[],M=(f=f||{}).autoSize||!1,le=!1!==f.printHeaders,fe=f.css&&void 0!==f.css["font-size"]?16*f.css["font-size"]:f.fontSize||12,B=f.margins||Object.assign({width:this.getPageWidth()},e),P="number"==typeof f.padding?f.padding:3,U=f.headerBackgroundColor||"#c8c8c8",$=f.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=le,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=fe,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=$,this.setFontSize(fe),null==c)E=y=Object.keys(u[0]),V=y.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,Jt.Z)(c[0]))for(y=c.map(function(Ie){return Ie.name}),E=c.map(function(Ie){return Ie.prompt||Ie.name||""}),V=c.map(function(Ie){return Ie.align||"left"}),p=0;p<c.length;p+=1)q[c[p].name]=c[p].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(E=y=c,V=y.map(function(){return"left"}));if(M||Array.isArray(c)&&"string"==typeof c[0])for(p=0;p<y.length;p+=1){for(F[x=y[p]]=u.map(function(Ie){return Ie[x]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(E[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=F[x],this.setFont(void 0,"normal"),w=0;w<g.length;w+=1)ee.push(this.getTextDimensions(g[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[x]=Math.max.apply(null,ee)+P+P,ee=[]}if(le){var me={};for(p=0;p<y.length;p+=1)me[y[p]]={},me[y[p]].text=E[p],me[y[p]].align=V[p];var pe=o.call(this,me,q);X=y.map(function(Ie){return new n(l,d,q[Ie],pe,me[Ie].text,void 0,me[Ie].align)}),this.setTableHeaderRow(X),this.printHeaderRow(1,!1)}var xe=c.reduce(function(Ie,Me){return Ie[Me.name]=Me.align,Ie},{});for(p=0;p<u.length;p+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:p,data:u[p]},this);var _e=o.call(this,u[p],q);for(w=0;w<y.length;w+=1){var Ae=u[p][y[w]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:p,col:w,data:Ae},this),s.call(this,new n(l,d,q[y[w]],_e,Ae,p+2,xe[y[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=d,this};var o=function(l,d){var u=this.internal.__cell__.padding,c=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(p){var g=l[p];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*c/f+u+u},this).reduce(function(p,g){return Math.max(p,g)},0)};i.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},i.printHeaderRow=function(l,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,"function"==typeof this.internal.__cell__.headerFunction){var c=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new n(c[0],c[1],c[2],c[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=l;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(g)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),t=!1}}(lt.API);var y1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},x1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Uv=S1(x1),E1=[100,200,300,400,500,600,700,800,900],AK=S1(E1);function jv(i){var n,e=i.family.replace(/"|'/g,"").toLowerCase(),t=y1[n=(n=i.style)||"normal"]?n:"normal",r=function(n){return n?"number"==typeof n?n>=100&&n<=900&&n%100==0?n:400:/^\d00$/.test(n)?parseInt(n):"bold"===n?700:400:400}(i.weight),a=function(n){return"number"==typeof Uv[n=n||"normal"]?n:"normal"}(i.stretch);return{family:e,style:t,weight:r,stretch:a,src:i.src||[],ref:i.ref||{name:e,style:[a,t,r].join(" ")}}}function I1(i,e,t,r){var a;for(a=t;a>=0&&a<e.length;a+=r)if(i[e[a]])return i[e[a]];for(a=t;a>=0&&a<e.length;a-=r)if(i[e[a]])return i[e[a]]}var DK={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},T1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function A1(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function D1(i){return i.trimLeft()}function RK(i,e){for(var t=0;t<i.length;){if(i.charAt(t)===e)return[i.substring(0,t),i.substring(t+1)];t+=1}return null}function LK(i){var e=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],i.substring(e[0].length)]}var pc,O1,R1,qv=["times"];(function(i){var e,t,r,a,n,s,o,l,d,u=function(D){return this.isStrokeTransparent=(D=D||{}).isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=void 0!==D.transform?D.transform.clone():new l,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new s,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new s,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof D.ignoreClearRect||D.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new c(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,n=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,d=new u}]);var c=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=D;Object.defineProperty(this,"pdf",{get:function(){return z}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(Oe){K=!!Oe}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Oe){te=!!Oe}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(Oe){isNaN(Oe)||(de=Oe)}});var Ce=0;Object.defineProperty(this,"posY",{get:function(){return Ce},set:function(Oe){isNaN(Oe)||(Ce=Oe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Oe){var G;"number"==typeof Oe?G=[Oe,Oe,Oe,Oe]:((G=new Array(4))[0]=Oe[0],G[1]=Oe.length>=2?Oe[1]:G[0],G[2]=Oe.length>=3?Oe[2]:G[0],G[3]=Oe.length>=4?Oe[3]:G[1]),d.margin=G}});var we=!1;Object.defineProperty(this,"autoPaging",{get:function(){return we},set:function(Oe){we=Oe}});var Se=0;Object.defineProperty(this,"lastBreak",{get:function(){return Se},set:function(Oe){Se=Oe}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(Oe){ke=Oe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Oe){Oe instanceof u&&(d=Oe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Oe){d.path=Oe}});var Fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Fe},set:function(Oe){Fe=Oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Oe){var G;G=f(Oe),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=0===G.a,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Oe){var G=f(Oe);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=0===G.a,this.ctx.strokeOpacity=G.a,0===G.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(G.r,G.g,G.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Oe){-1!==["butt","round","square"].indexOf(Oe)&&(this.ctx.lineCap=Oe,this.pdf.setLineCap(Oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Oe){isNaN(Oe)||(this.ctx.lineWidth=Oe,this.pdf.setLineWidth(Oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Oe){-1!==["bevel","round","miter"].indexOf(Oe)&&(this.ctx.lineJoin=Oe,this.pdf.setLineJoin(Oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Oe){isNaN(Oe)||(this.ctx.miterLimit=Oe,this.pdf.setMiterLimit(Oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Oe){this.ctx.textBaseline=Oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Oe){-1!==["right","end","center","left","start"].indexOf(Oe)&&(this.ctx.textAlign=Oe)}});var qe=null,ht=null;Object.defineProperty(this,"fontFaces",{get:function(){return ht},set:function(Oe){qe=null,ht=Oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Oe){var G;if(this.ctx.font=Oe,null!==(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Oe))){var wt=G[1],tt=G[3],Ne=G[4],Ze=G[6],Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor("px"===Ue?parseFloat(Ne)*this.pdf.internal.scaleFactor:"em"===Ue?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var Ge=function(ft){var Ot,je,tr=[],Mt=ft.trim();if(""===Mt)return qv;if(Mt in T1)return[T1[Mt]];for(;""!==Mt;){switch(je=null,Ot=(Mt=D1(Mt)).charAt(0)){case'"':case"'":je=RK(Mt.substring(1),Ot);break;default:je=LK(Mt)}if(null===je||(tr.push(je[0]),""!==(Mt=D1(je[1]))&&","!==Mt.charAt(0)))return qv;Mt=Mt.replace(/^,/,"")}return tr}(Ze);if(this.fontFaces){var nt=function OK(i,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",a=Object.assign({},DK,t.genericFontFamilies||{}),n=null,s=null,o=0;o<e.length;++o)if(a[(n=jv(e[o])).family]&&(n.family=a[n.family]),i.hasOwnProperty(n.family)){s=i[n.family];break}if(!(s=s||i[r]))throw new Error("Could not find a font-family for the rule '"+A1(n)+"' and default family '"+r+"'.");if(s=function(l,d){if(d[l])return d[l];var u=Uv[l],f=I1(d,x1,u,u<=Uv.normal?-1:1);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(n.stretch,s),s=function(l,d){if(d[l])return d[l];for(var u=y1[l],c=0;c<u.length;++c)if(d[u[c]])return d[u[c]];throw new Error("Could not find a matching font-style for "+l)}(n.style,s),!(s=function(l,d){if(d[l])return d[l];if(400===l&&d[500])return d[500];if(500===l&&d[400])return d[400];var c=I1(d,E1,AK[l],l<400?-1:1);if(!c)throw new Error("Could not find a matching font-weight for value "+l);return c}(n.weight,s)))throw new Error("Failed to resolve a font for the rule '"+A1(n)+"'.");return s}(function Je(Oe,G){if(null===qe){var wt=(tt=Oe.getFontList(),Ne=[],Object.keys(tt).forEach(function(Ze){tt[Ze].forEach(function(Ue){var Ge=null;switch(Ue){case"bold":Ge={family:Ze,weight:"bold"};break;case"italic":Ge={family:Ze,style:"italic"};break;case"bolditalic":Ge={family:Ze,weight:"bold",style:"italic"};break;case"":case"normal":Ge={family:Ze}}null!==Ge&&(Ge.ref={name:Ze,style:Ue},Ne.push(Ge))})}),Ne);qe=function(tt){for(var Ne={},Ze=0;Ze<tt.length;++Ze){var Ue=jv(tt[Ze]),Ge=Ue.family,nt=Ue.stretch,Ct=Ue.style,xt=Ue.weight;Ne[Ge]=Ne[Ge]||{},Ne[Ge][nt]=Ne[Ge][nt]||{},Ne[Ge][nt][Ct]=Ne[Ge][nt][Ct]||{},Ne[Ge][nt][Ct][xt]=Ue}return Ne}(wt.concat(G))}var tt,Ne;return qe}(this.pdf,this.fontFaces),Ge.map(function(ft){return{family:ft,stretch:"normal",weight:tt,style:wt}}));this.pdf.setFont(nt.ref.name,nt.ref.style)}else{var Ct="";("bold"===tt||parseInt(tt,10)>=700||"bold"===wt)&&(Ct="bold"),"italic"===wt&&(Ct+="italic"),0===Ct.length&&(Ct="normal");for(var xt="",At={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ft=0;Ft<Ge.length;Ft++){if(void 0!==this.pdf.internal.getFont(Ge[Ft],Ct,{noFallback:!0,disableWarning:!0})){xt=Ge[Ft];break}if("bolditalic"===Ct&&void 0!==this.pdf.internal.getFont(Ge[Ft],"bold",{noFallback:!0,disableWarning:!0}))xt=Ge[Ft],Ct="bold";else if(void 0!==this.pdf.internal.getFont(Ge[Ft],"normal",{noFallback:!0,disableWarning:!0})){xt=Ge[Ft],Ct="normal";break}}if(""===xt)for(var Ut=0;Ut<Ge.length;Ut++)if(At[Ge[Ut]]){xt=At[Ge[Ut]];break}this.pdf.setFont(xt=""===xt?"Times":xt,Ct)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Oe){this.ctx.globalCompositeOperation=Oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Oe){this.ctx.globalAlpha=Oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Oe){this.ctx.lineDashOffset=Oe,Me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Oe){this.ctx.lineDash=Oe,Me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Oe){this.ctx.ignoreClearRect=!!Oe}})};c.prototype.setLineDash=function(D){this.lineDash=D},c.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},c.prototype.fill=function(){F.call(this,"fill",!1)},c.prototype.stroke=function(){F.call(this,"stroke",!1)},c.prototype.beginPath=function(){this.path=[{type:"begin"}]},c.prototype.moveTo=function(D,z){if(isNaN(D)||isNaN(z))throw Qt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new s(D,z));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new s(D,z)},c.prototype.closePath=function(){var D=new s(0,0),z=0;for(z=this.path.length-1;-1!==z;z--)if("begin"===this.path[z].type&&"object"===(0,Jt.Z)(this.path[z+1])&&"number"==typeof this.path[z+1].x){D=new s(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(D.x,D.y)},c.prototype.lineTo=function(D,z){if(isNaN(D)||isNaN(z))throw Qt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new s(D,z));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new s(K.x,K.y)},c.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},c.prototype.quadraticCurveTo=function(D,z,K,te){if(isNaN(K)||isNaN(te)||isNaN(D)||isNaN(z))throw Qt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new s(K,te)),Ce=this.ctx.transform.applyToPoint(new s(D,z));this.path.push({type:"qct",x1:Ce.x,y1:Ce.y,x:de.x,y:de.y}),this.ctx.lastPoint=new s(de.x,de.y)},c.prototype.bezierCurveTo=function(D,z,K,te,de,Ce){if(isNaN(de)||isNaN(Ce)||isNaN(D)||isNaN(z)||isNaN(K)||isNaN(te))throw Qt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var we=this.ctx.transform.applyToPoint(new s(de,Ce)),Se=this.ctx.transform.applyToPoint(new s(D,z)),ke=this.ctx.transform.applyToPoint(new s(K,te));this.path.push({type:"bct",x1:Se.x,y1:Se.y,x2:ke.x,y2:ke.y,x:we.x,y:we.y}),this.ctx.lastPoint=new s(we.x,we.y)},c.prototype.arc=function(D,z,K,te,de,Ce){if(isNaN(D)||isNaN(z)||isNaN(K)||isNaN(te)||isNaN(de))throw Qt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ce=!!Ce,!this.ctx.transform.isIdentity){var we=this.ctx.transform.applyToPoint(new s(D,z));D=we.x,z=we.y;var Se=this.ctx.transform.applyToPoint(new s(0,K)),ke=this.ctx.transform.applyToPoint(new s(0,0));K=Math.sqrt(Math.pow(Se.x-ke.x,2)+Math.pow(Se.y-ke.y,2))}Math.abs(de-te)>=2*Math.PI&&(te=0,de=2*Math.PI),this.path.push({type:"arc",x:D,y:z,radius:K,startAngle:te,endAngle:de,counterclockwise:Ce})},c.prototype.arcTo=function(D,z,K,te,de){throw new Error("arcTo not implemented.")},c.prototype.rect=function(D,z,K,te){if(isNaN(D)||isNaN(z)||isNaN(K)||isNaN(te))throw Qt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,z),this.lineTo(D+K,z),this.lineTo(D+K,z+te),this.lineTo(D,z+te),this.lineTo(D,z),this.lineTo(D+K,z),this.lineTo(D,z)},c.prototype.fillRect=function(D,z,K,te){if(isNaN(D)||isNaN(z)||isNaN(K)||isNaN(te))throw Qt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var de={};"butt"!==this.lineCap&&(de.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,z,K,te),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},c.prototype.strokeRect=function(D,z,K,te){if(isNaN(D)||isNaN(z)||isNaN(K)||isNaN(te))throw Qt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(D,z,K,te),this.stroke())},c.prototype.clearRect=function(D,z,K,te){if(isNaN(D)||isNaN(z)||isNaN(K)||isNaN(te))throw Qt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,z,K,te))},c.prototype.save=function(D){D="boolean"!=typeof D||D;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},c.prototype.restore=function(D){D="boolean"!=typeof D||D;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(z),D&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},c.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(D){var z,K,te,de;if(!0===D.isCanvasGradient&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))z=0,K=0,te=0,de=0;else{var Ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(null!==Ce)z=parseInt(Ce[1]),K=parseInt(Ce[2]),te=parseInt(Ce[3]),de=1;else if(null!==(Ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D)))z=parseInt(Ce[1]),K=parseInt(Ce[2]),te=parseInt(Ce[3]),de=parseFloat(Ce[4]);else{if(de=1,"string"==typeof D&&"#"!==D.charAt(0)){var we=new c1(D);D=we.ok?we.toHex():"#000000"}4===D.length?(z=D.substring(1,2),z+=z,K=D.substring(2,3),K+=K,te=D.substring(3,4),te+=te):(z=D.substring(1,3),K=D.substring(3,5),te=D.substring(5,7)),z=parseInt(z,16),K=parseInt(K,16),te=parseInt(te,16)}}return{r:z,g:K,b:te,a:de,style:D}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},g=function(){return!(!this.ctx.isStrokeTransparent&&0!=this.globalAlpha)};c.prototype.fillText=function(D,z,K,te){if(isNaN(z)||isNaN(K)||"string"!=typeof D)throw Qt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var de=_e(this.ctx.transform.rotation);P.call(this,{text:D,x:z,y:K,scale:this.ctx.transform.scaleX,angle:de,align:this.textAlign,maxWidth:te})}},c.prototype.strokeText=function(D,z,K,te){if(isNaN(z)||isNaN(K)||"string"!=typeof D)throw Qt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){te=isNaN(te)?void 0:te;var de=_e(this.ctx.transform.rotation);P.call(this,{text:D,x:z,y:K,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:te})}},c.prototype.measureText=function(D){if("string"!=typeof D)throw Qt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,K=this.pdf.internal.scaleFactor,te=z.internal.getFontSize(),de=z.getStringUnitWidth(D)*te/z.internal.scaleFactor;return new function(we){var Se=(we=we||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Se}}),this}({width:de*=Math.round(96*K/72*1e4)/1e4})},c.prototype.scale=function(D,z){if(isNaN(D)||isNaN(z))throw Qt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(D,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},c.prototype.rotate=function(D){if(isNaN(D))throw Qt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new l(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},c.prototype.translate=function(D,z){if(isNaN(D)||isNaN(z))throw Qt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,D,z);this.ctx.transform=this.ctx.transform.multiply(K)},c.prototype.transform=function(D,z,K,te,de,Ce){if(isNaN(D)||isNaN(z)||isNaN(K)||isNaN(te)||isNaN(de)||isNaN(Ce))throw Qt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var we=new l(D,z,K,te,de,Ce);this.ctx.transform=this.ctx.transform.multiply(we)},c.prototype.setTransform=function(D,z,K,te,de,Ce){D=isNaN(D)?1:D,z=isNaN(z)?0:z,K=isNaN(K)?0:K,te=isNaN(te)?1:te,de=isNaN(de)?0:de,Ce=isNaN(Ce)?0:Ce,this.ctx.transform=new l(D,z,K,te,de,Ce)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};c.prototype.drawImage=function(D,z,K,te,de,Ce,we,Se,ke){var Fe=this.pdf.getImageProperties(D),qe=1,Je=1,ht=1,Oe=1;void 0!==te&&void 0!==Se&&(ht=Se/te,Oe=ke/de,qe=Fe.width/te*Se/te,Je=Fe.height/de*ke/de),void 0===Ce&&(Ce=z,we=K,z=0,K=0),void 0!==te&&void 0===Se&&(Se=te,ke=de),void 0===te&&void 0===Se&&(Se=Fe.width,ke=Fe.height);for(var G,wt=this.ctx.transform.decompose(),tt=_e(wt.rotate.shx),Ne=new l,Ze=(Ne=(Ne=(Ne=Ne.multiply(wt.translate)).multiply(wt.skew)).multiply(wt.scale)).applyToRectangle(new o(Ce-z*ht,we-K*Oe,te*qe,de*Je)),Ue=x.call(this,Ze),Ge=[],nt=0;nt<Ue.length;nt+=1)-1===Ge.indexOf(Ue[nt])&&Ge.push(Ue[nt]);if(V(Ge),this.autoPaging)for(var Ct=Ge[0],xt=Ge[Ge.length-1],At=Ct;At<xt+1;At++){this.pdf.setPage(At);var Ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ut=1===At?this.posY+this.margin[0]:this.margin[0],Ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],je=1===At?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(At-2)*Ot;if(0!==this.ctx.clip_path.length){var tr=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(G,this.posX+this.margin[3],-je+Ut+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=tr}var Mt=JSON.parse(JSON.stringify(Ze));Mt=E([Mt],this.posX+this.margin[3],-je+Ut+this.ctx.prevPageLastElemOffset)[0];var ia=(At>Ct||At<xt)&&w.call(this);ia&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ft,Ot,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Mt.x,Mt.y,Mt.w,Mt.h,null,null,tt),ia&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,tt)};var x=function(D,z,K){var te=[];z=z||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":te.push(Math.floor((D.y+de)/K)+1);break;case"arc":te.push(Math.floor((D.y+de-D.radius)/K)+1),te.push(Math.floor((D.y+de+D.radius)/K)+1);break;case"qct":var Ce=Ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);te.push(Math.floor((Ce.y+de)/K)+1),te.push(Math.floor((Ce.y+Ce.h+de)/K)+1);break;case"bct":var we=Ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);te.push(Math.floor((we.y+de)/K)+1),te.push(Math.floor((we.y+we.h+de)/K)+1);break;case"rect":te.push(Math.floor((D.y+de)/K)+1),te.push(Math.floor((D.y+D.h+de)/K)+1)}for(var Se=0;Se<te.length;Se+=1)for(;this.pdf.internal.getNumberOfPages()<te[Se];)y.call(this);return te},y=function(){var D=this.fillStyle,z=this.strokeStyle,K=this.font,te=this.lineCap,de=this.lineWidth,Ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=z,this.font=K,this.lineCap=te,this.lineWidth=de,this.lineJoin=Ce},E=function(D,z,K){for(var te=0;te<D.length;te++)switch(D[te].type){case"bct":D[te].x2+=z,D[te].y2+=K;case"qct":D[te].x1+=z,D[te].y1+=K;default:D[te].x+=z,D[te].y+=K}return D},V=function(D){return D.sort(function(z,K){return z-K})},F=function(D,z){for(var K,te,de=this.fillStyle,Ce=this.strokeStyle,we=this.lineCap,Se=this.lineWidth,ke=Math.abs(Se*this.ctx.transform.scaleX),Fe=this.lineJoin,qe=JSON.parse(JSON.stringify(this.path)),Je=JSON.parse(JSON.stringify(this.path)),ht=[],Oe=0;Oe<Je.length;Oe++)if(void 0!==Je[Oe].x)for(var G=x.call(this,Je[Oe]),wt=0;wt<G.length;wt+=1)-1===ht.indexOf(G[wt])&&ht.push(G[wt]);for(var tt=0;tt<ht.length;tt++)for(;this.pdf.internal.getNumberOfPages()<ht[tt];)y.call(this);if(V(ht),this.autoPaging)for(var Ne=ht[0],Ze=ht[ht.length-1],Ue=Ne;Ue<Ze+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=de,this.strokeStyle=Ce,this.lineCap=we,this.lineWidth=ke,this.lineJoin=Fe;var Ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=1===Ue?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=1===Ue?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Ue-2)*xt;if(0!==this.ctx.clip_path.length){var Ft=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(K,this.posX+this.margin[3],-At+nt+this.ctx.prevPageLastElemOffset),q.call(this,D,!0),this.path=Ft}if(te=JSON.parse(JSON.stringify(qe)),this.path=E(te,this.posX+this.margin[3],-At+nt+this.ctx.prevPageLastElemOffset),!1===z||0===Ue){var Ut=(Ue>Ne||Ue<Ze)&&w.call(this);Ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ge,xt,null).clip().discardPath()),q.call(this,D,z),Ut&&this.pdf.restoreGraphicsState()}this.lineWidth=Se}else this.lineWidth=ke,q.call(this,D,z),this.lineWidth=Se;this.path=qe},q=function(D,z){if(("stroke"!==D||z||!g.call(this))&&("stroke"===D||z||!p.call(this))){for(var K,te,de=[],Ce=this.path,we=0;we<Ce.length;we++){var Se=Ce[we];switch(Se.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:Se,deltas:[],abs:[]});break;case"lt":var ke=de.length;if(Ce[we-1]&&!isNaN(Ce[we-1].x)&&(K=[Se.x-Ce[we-1].x,Se.y-Ce[we-1].y],ke>0))for(;ke>=0;ke--)if(!0!==de[ke-1].close&&!0!==de[ke-1].begin){de[ke-1].deltas.push(K),de[ke-1].abs.push(Se);break}break;case"bct":de[de.length-1].deltas.push(K=[Se.x1-Ce[we-1].x,Se.y1-Ce[we-1].y,Se.x2-Ce[we-1].x,Se.y2-Ce[we-1].y,Se.x-Ce[we-1].x,Se.y-Ce[we-1].y]);break;case"qct":de[de.length-1].deltas.push(K=[Ce[we-1].x+2/3*(Se.x1-Ce[we-1].x)-Ce[we-1].x,Ce[we-1].y+2/3*(Se.y1-Ce[we-1].y)-Ce[we-1].y,Se.x+2/3*(Se.x1-Se.x)-Ce[we-1].x,Se.y+2/3*(Se.y1-Se.y)-Ce[we-1].y,Se.x-Ce[we-1].x,Se.y-Ce[we-1].y]);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(Se)}}te=z?null:"stroke"===D?"stroke":"fill";for(var wt=!1,tt=0;tt<de.length;tt++)if(de[tt].arc)for(var Ne=de[tt].abs,Ze=0;Ze<Ne.length;Ze++){var Ue=Ne[Ze];"arc"===Ue.type?M.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,z,!wt):U.call(this,Ue.x,Ue.y),wt=!0}else!0===de[tt].close?(this.pdf.internal.out("h"),wt=!1):!0!==de[tt].begin&&($.call(this,de[tt].deltas,de[tt].start.x,de[tt].start.y),wt=!0);te&&le.call(this,te),z&&fe.call(this)}},ee=function(D){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-K;case"top":return D+z-K;case"hanging":return D+z-2*K;case"middle":return D+z/2-K;default:return D}},X=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};c.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(z,K){this.colorStops.push([z,K])},D.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},c.prototype.createPattern=function(){return this.createLinearGradient()},c.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(D,z,K,te,de,Ce,we,Se,ke){for(var Fe=pe.call(this,K,te,de,Ce),qe=0;qe<Fe.length;qe++){var Je=Fe[qe];0===qe&&(ke?B.call(this,Je.x1+D,Je.y1+z):U.call(this,Je.x1+D,Je.y1+z)),me.call(this,D,z,Je.x2,Je.y2,Je.x3,Je.y3,Je.x4,Je.y4)}Se?fe.call(this):le.call(this,we)},le=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},fe=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(D,z){this.pdf.internal.out(t(D)+" "+r(z)+" m")},P=function(D){var z;switch(D.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var K=this.pdf.getTextDimensions(D.text),te=ee.call(this,D.y),de=X.call(this,te)-K.h,Ce=this.ctx.transform.applyToPoint(new s(D.x,te)),we=this.ctx.transform.decompose(),Se=new l;Se=(Se=(Se=Se.multiply(we.translate)).multiply(we.skew)).multiply(we.scale);for(var ke,Fe,qe,Je=this.ctx.transform.applyToRectangle(new o(D.x,te,K.w,K.h)),ht=Se.applyToRectangle(new o(D.x,de,K.w,K.h)),Oe=x.call(this,ht),G=[],wt=0;wt<Oe.length;wt+=1)-1===G.indexOf(Oe[wt])&&G.push(Oe[wt]);if(V(G),this.autoPaging)for(var tt=G[0],Ne=G[G.length-1],Ze=tt;Ze<Ne+1;Ze++){this.pdf.setPage(Ze);var Ue=1===Ze?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.margin[2],Ct=nt-this.margin[0],xt=this.pdf.internal.pageSize.width-this.margin[1],At=xt-this.margin[3],Ft=1===Ze?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Ze-2)*Ct;if(0!==this.ctx.clip_path.length){var Ut=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(ke,this.posX+this.margin[3],-1*Ft+Ue),q.call(this,"fill",!0),this.path=Ut}var ft=E([JSON.parse(JSON.stringify(ht))],this.posX+this.margin[3],-Ft+Ue+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*D.scale),this.lineWidth=(qe=this.lineWidth)*D.scale);var Ot="text"!==this.autoPaging;if(Ot||ft.y+ft.h<=nt){if(Ot||ft.y>=Ue&&ft.x<=xt){var je=Ot?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||xt-ft.x)[0],tr=E([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-Ft+Ue+this.ctx.prevPageLastElemOffset)[0],Mt=Ot&&(Ze>tt||Ze<Ne)&&w.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Ct,null).clip().discardPath()),this.pdf.text(je,tr.x,tr.y,{angle:D.angle,align:z,renderingMode:D.renderingMode}),Mt&&this.pdf.restoreGraphicsState()}}else ft.y<nt&&(this.ctx.prevPageLastElemOffset+=nt-ft.y);D.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=qe)}else D.scale>=.01&&(Fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fe*D.scale),this.lineWidth=(qe=this.lineWidth)*D.scale),this.pdf.text(D.text,Ce.x+this.posX,Ce.y+this.posY,{angle:D.angle,align:z,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(Fe),this.lineWidth=qe)},U=function(D,z,K,te){te=te||0,this.pdf.internal.out(t(D+(K=K||0))+" "+r(z+te)+" l")},$=function(D,z,K){return this.pdf.lines(D,z,K,null,null)},me=function(D,z,K,te,de,Ce,we,Se){this.pdf.internal.out([e(a(K+D)),e(n(te+z)),e(a(de+D)),e(n(Ce+z)),e(a(we+D)),e(n(Se+z)),"c"].join(" "))},pe=function(D,z,K,te){for(var de=2*Math.PI,Ce=Math.PI/2;z>K;)z-=de;var we=Math.abs(K-z);we<de&&te&&(we=de-we);for(var Se=[],ke=te?-1:1,Fe=z;we>1e-5;){var qe=Fe+ke*Math.min(we,Ce);Se.push(xe.call(this,D,Fe,qe)),we-=Math.abs(qe-Fe),Fe=qe}return Se},xe=function(D,z,K){var te=(K-z)/2,de=D*Math.cos(te),Ce=D*Math.sin(te),we=de,Se=-Ce,ke=we*we+Se*Se,Fe=ke+we*de+Se*Ce,qe=4/3*(Math.sqrt(2*ke*Fe)-Fe)/(we*Ce-Se*de),Je=we-qe*Se,ht=Se+qe*we,Oe=Je,G=-ht,wt=te+z,tt=Math.cos(wt),Ne=Math.sin(wt);return{x1:D*Math.cos(z),y1:D*Math.sin(z),x2:Je*tt-ht*Ne,y2:Je*Ne+ht*tt,x3:Oe*tt-G*Ne,y3:Oe*Ne+G*tt,x4:D*Math.cos(K),y4:D*Math.sin(K)}},_e=function(D){return 180*D/Math.PI},Ae=function(D,z,K,te,de,Ce){var we=D+.5*(K-D),Se=z+.5*(te-z),ke=de+.5*(K-de),Fe=Ce+.5*(te-Ce),qe=Math.min(D,de,we,ke),Je=Math.max(D,de,we,ke),ht=Math.min(z,Ce,Se,Fe),Oe=Math.max(z,Ce,Se,Fe);return new o(qe,ht,Je-qe,Oe-ht)},Ie=function(D,z,K,te,de,Ce,we,Se){var ke,Fe,qe,Je,ht,Oe,G,wt,tt,Ne,Ze,Ue,Ge,nt,Ct=K-D,xt=te-z,At=de-K,Ft=Ce-te,Ut=we-de,ft=Se-Ce;for(Fe=0;Fe<41;Fe++)tt=(G=(qe=D+(ke=Fe/40)*Ct)+ke*((ht=K+ke*At)-qe))+ke*(ht+ke*(de+ke*Ut-ht)-G),Ne=(wt=(Je=z+ke*xt)+ke*((Oe=te+ke*Ft)-Je))+ke*(Oe+ke*(Ce+ke*ft-Oe)-wt),0==Fe?(Ze=tt,Ue=Ne,Ge=tt,nt=Ne):(Ze=Math.min(Ze,tt),Ue=Math.min(Ue,Ne),Ge=Math.max(Ge,tt),nt=Math.max(nt,Ne));return new o(Math.round(Ze),Math.round(Ue),Math.round(Ge-Ze),Math.round(nt-Ue))},Me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var K=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(lt.API),
/**
       * @license
       * jsPDF filters PlugIn
       * Copyright (c) 2014 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){var e=function(n){var s,o,l,d,u,c,f,p,g,w;for(/[^\x00-\xFF]/.test(n),o=[],l=0,d=(n+=s="\0\0\0\0".slice(n.length%4||4)).length;d>l;l+=4)0!==(u=(n.charCodeAt(l)<<24)+(n.charCodeAt(l+1)<<16)+(n.charCodeAt(l+2)<<8)+n.charCodeAt(l+3))?(c=(u=((u=((u=((u=(u-(w=u%85))/85)-(g=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)%85,o.push(c+33,f+33,p+33,g+33,w+33)):o.push(122);return function(x,y){for(var E=y;E>0;E--)x.pop()}(o,s.length),String.fromCharCode.apply(String,o)+"~>"},t=function(n){var s,o,l,d,u,c=String,f="length",p=255,g="charCodeAt",w="slice",x="replace";for(n[w](-2),n=n[w](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),l=[],d=0,u=(n+=s="uuuuu"[w](n[f]%5||5))[f];u>d;d+=5)o=52200625*(n[g](d)-33)+614125*(n[g](d+1)-33)+7225*(n[g](d+2)-33)+85*(n[g](d+3)-33)+(n[g](d+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,E){for(var V=E;V>0;V--)y.pop()}(l,s[f]),c.fromCharCode.apply(c,l)},r=function(n){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(n=n.replace(/\s/g,"")).indexOf(">")&&(n=n.substr(0,n.indexOf(">"))),n.length%2&&(n+="0"),!1===s.test(n))return"";for(var o="",l=0;l<n.length;l+=2)o+=String.fromCharCode("0x"+(n[l]+n[l+1]));return o},a=function(n){for(var s=new Uint8Array(n.length),o=n.length;o--;)s[o]=n.charCodeAt(o);return(s=Od(s)).reduce(function(l,d){return l+String.fromCharCode(d)},"")};i.processDataByFilters=function(n,s){var o=0,l=n||"",d=[];for("string"==typeof(s=s||[])&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:l,reverseChain:d.reverse().join(" ")}}}(lt.API),
/**
       * @license
       * jsPDF fileloading PlugIn
       * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){i.loadFile=function(e,t,r){return function(a,n,s){n=!1!==n,s="function"==typeof s?s:function(){};var o=void 0;try{o=function(l,d,u){var c=new XMLHttpRequest,f=0,p=function(g){var w=g.length,x=[],y=String.fromCharCode;for(f=0;f<w;f+=1)x.push(y(255&g.charCodeAt(f)));return x.join("")};if(c.open("GET",l,!d),c.overrideMimeType("text/plain; charset=x-user-defined"),!1===d&&(c.onload=function(){u(200===c.status?p(this.responseText):void 0)}),c.send(null),d&&200===c.status)return p(c.responseText)}(a,n,s)}catch{}return o}(e,t,r)},i.loadImageFile=i.loadFile}(lt.API),function(i){function e(){return(ut.html2canvas?Promise.resolve(ut.html2canvas):be.e(456).then(be.t.bind(be,4456,23))).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(ut.DOMPurify?Promise.resolve(ut.DOMPurify):be.e(896).then(be.t.bind(be,896,23))).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var o=(0,Jt.Z)(s);return"undefined"===o?"undefined":"string"===o||s instanceof String?"string":"number"===o||s instanceof Number?"number":"function"===o||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&1===s.nodeType?"element":"object"===o?"object":"unknown"},a=function(s,o){var l=document.createElement(s);for(var d in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[d]=o.style[d];return l},n=function s(o){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),d=s.convert(Promise.resolve(),l);return(d=d.setProgress(1,s,1,[s])).set(o)};(n.prototype=Object.create(Promise.prototype)).constructor=n,n.convert=function(s,o){return s.__proto__=o||n.prototype,s},n.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},n.prototype.from=function(s,o){return this.then(function(){switch(o=o||function(l){switch(r(l)){case"string":return"string";case"element":return"canvas"===l.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(l){return this.set({src:a("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},n.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},n.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(d,u){for(var c=3===d.nodeType?document.createTextNode(d.nodeValue):d.cloneNode(!1),f=d.firstChild;f;f=f.nextSibling)!0!==u&&1===f.nodeType&&"SCRIPT"===f.nodeName||c.appendChild(l(f,u));return 1===d.nodeType&&("CANVAS"===d.nodeName?(c.width=d.width,c.height=d.height,c.getContext("2d").drawImage(d,0,0)):"TEXTAREA"!==d.nodeName&&"SELECT"!==d.nodeName||(c.value=d.value),c.addEventListener("load",function(){c.scrollTop=d.scrollTop,c.scrollLeft=d.scrollLeft},!0)),c}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===o.tagName&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},n.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},n.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(e).then(function(o){var l=this.opt.jsPDF,d=this.opt.fontFaces,u="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,c=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete c.onrendered,l.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var p=d[f],g=p.src.find(function(w){return"truetype"===w.format});g&&l.addFont(g.url,p.ref.name,p.ref.style)}return c.windowHeight=c.windowHeight||0,c.windowHeight=0==c.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):c.windowHeight,l.context2d.save(!0),o(this.prop.container,c)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},n.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},n.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},n.prototype.output=function(s,o,l){return"img"===(l=l||"pdf").toLowerCase()||"image"===l.toLowerCase()?this.outputImg(s,o):this.outputPdf(s,o)},n.prototype.outputPdf=function(s,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,o)})},n.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},n.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},n.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},n.prototype.set=function(s){if("object"!==r(s))return this;var o=Object.keys(s||{}).map(function(l){if(l in n.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(o)})},n.prototype.get=function(s,o){return this.then(function(){var l=s in n.template.prop?this.prop[s]:this.opt[s];return o?o(l):l})},n.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(2===s.length&&(s=[s[0],s[1],s[0],s[1]]),4===s.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},n.prototype.setPageSize=function(s){function o(l,d){return Math.floor(l*d/72*96)}return this.then(function(){(s=s||lt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:o(s.inner.width,s.k),height:o(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},n.prototype.setProgress=function(s,o,l,d){return null!=s&&(this.progress.val=s),null!=o&&(this.progress.state=o),null!=l&&(this.progress.n=l),null!=d&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},n.prototype.updateProgress=function(s,o,l,d){return this.setProgress(s?this.progress.val+s:null,o||null,l?this.progress.n+l:null,d?this.progress.stack.concat(d):null)},n.prototype.then=function(s,o){var l=this;return this.thenCore(s,o,function(d,u){return l.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(c){return l.updateProgress(null,d),c}).then(d,u).then(function(c){return l.updateProgress(1),c})})},n.prototype.thenCore=function(s,o,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),o&&(o=o.bind(this));var d=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:n.convert(Object.assign({},this),Promise.prototype),u=l.call(d,s,o);return n.convert(u,this.__proto__)},n.prototype.thenExternal=function(s,o){return Promise.prototype.then.call(this,s,o)},n.prototype.thenList=function(s){var o=this;return s.forEach(function(l){o=o.thenCore(l)}),o},n.prototype.catch=function(s){s&&(s=s.bind(this));var o=Promise.prototype.catch.call(this,s);return n.convert(o,this)},n.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},n.prototype.error=function(s){return this.then(function(){throw new Error(s)})},n.prototype.using=n.prototype.set,n.prototype.saveAs=n.prototype.save,n.prototype.export=n.prototype.output,n.prototype.run=n.prototype.then,lt.getPageSize=function(s,o,l){if("object"===(0,Jt.Z)(s)){var d=s;s=d.orientation,o=d.unit||o,l=d.format||l}o=o||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var u,c=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var p,g=0,w=0;if(f.hasOwnProperty(c))g=f[c][1]/u,w=f[c][0]/u;else try{g=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if("p"===s||"portrait"===s)s="p",w>g&&(p=w,w=g,g=p);else{if("l"!==s&&"landscape"!==s)throw"Invalid orientation: "+s;s="l",g>w&&(p=w,w=g,g=p)}return{width:w,height:g,unit:o,k:u,orientation:s}},i.html=function(s,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(jv):null;var l=new n(o);return o.worker?l:l.from(s).doCallback()}}(lt.API),lt.API.addJS=function(i){return R1=i,this.internal.events.subscribe("postPutResources",function(){pc=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(pc+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),O1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+R1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==pc&&void 0!==O1&&this.internal.out("/Names <</JavaScript "+pc+" 0 R>>")}),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){var e;i.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),n=0;n<a.length;n++){var s=a[n],o=r.exec(s);null!=o&&t.internal.newObjectDeferredBegin(o[1],!1),t.internal.write(s)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(n=0;n<d;n++){var c=t.internal.newObject();u.push(c);var f=t.internal.getPageInfo(n+1);t.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),n=0;n<u.length;n++)t.internal.write("(page_"+(n+1)+")"+u[n]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),i.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,a,n){var s={title:a,options:n,children:[]};return null==r&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,n=0;n<r.children.length;n++){var s=r.children[n];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),n>0&&this.line("/Prev "+this.makeRef(r.children[n-1])),n<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[n+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+"\r\n"},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+="\r\n"+r.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(r,a){for(var n=0;n<a.children.length;n++)r.count++,this.count_r(r,a.children[n]);return r.count}}])}(lt.API),
/**
       * @license
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){var e=[192,193,194,195,196,197,198,199];i.processJPEG=function(t,r,a,n,s,o){var l,d=this.decode.DCT_DECODE,u=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=this.__addimage__.isArrayBuffer(t=s||t)?new Uint8Array(t):t,(l=function(c){for(var f,p=256*c.charCodeAt(4)+c.charCodeAt(5),g=c.length,w={width:0,height:0,numcomponents:1},x=4;x<g;x+=2){if(-1!==e.indexOf(c.charCodeAt((x+=p)+1))){f=256*c.charCodeAt(x+5)+c.charCodeAt(x+6),w={width:256*c.charCodeAt(x+7)+c.charCodeAt(x+8),height:f,numcomponents:c.charCodeAt(x+9)};break}p=256*c.charCodeAt(x+2)+c.charCodeAt(x+3)}return w}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:d,index:r,alias:a}}return u}}(lt.API);var Wo,fc,L1,P1,B1,PK=function(){var i,e,t;function r(n){var s,l,d,u,c,f,p,g,w,x,y,E,V;for(this.data=n,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},c=null;;){switch(s=this.readUInt32(),g=function(){var F,q;for(q=[],F=0;F<4;++F)q.push(String.fromCharCode(this.data[this.pos++]));return q}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":c&&this.animation.frames.push(c),this.pos+=4,c={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,c.delay=1e3*u/d,c.disposeOp=this.data[this.pos++],c.blendOp=this.data[this.pos++],c.data=[];break;case"IDAT":case"fdAT":for("fdAT"===g&&(this.pos+=4,s-=4),n=c?.data||this.imgData,y=0;0<=s?y<s:y>s;0<=s?++y:--y)n.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(E=0;0<=w?E<w:E>w;0<=w?++E:--E)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":f=(x=this.read(s)).indexOf(0),p=String.fromCharCode.apply(String,x.slice(0,f)),this.text[p]=String.fromCharCode.apply(String,x.slice(f+1));break;case"IEND":return c&&this.animation.frames.push(c),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(V=this.colorType)||6===V,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(n){var s,o;for(o=[],s=0;0<=n?s<n:s>n;0<=n?++s:--s)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(n){var s=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*s),l=0,d=this;if(null==n&&(n=this.imgData),0===n.length)return new Uint8Array(0);function u(c,f,p,g){var w,x,y,E,V,F,q,ee,M,le,fe,B,P,U,$,me,pe,xe,_e,Ae,Ie=Math.ceil((d.width-c)/p),Me=Math.ceil((d.height-f)/g),D=d.width==Ie&&d.height==Me;for(P=s*Ie,fe=D?o:new Uint8Array(P*Me),F=n.length,B=0,x=0;B<Me&&l<F;){switch(n[l++]){case 0:for(E=me=0;me<P;E=me+=1)fe[x++]=n[l++];break;case 1:for(E=pe=0;pe<P;E=pe+=1)w=n[l++],V=E<s?0:fe[x-s],fe[x++]=(w+V)%256;break;case 2:for(E=xe=0;xe<P;E=xe+=1)w=n[l++],y=(E-E%s)/s,fe[x++]=((U=B&&fe[(B-1)*P+y*s+E%s])+w)%256;break;case 3:for(E=_e=0;_e<P;E=_e+=1)w=n[l++],y=(E-E%s)/s,V=E<s?0:fe[x-s],U=B&&fe[(B-1)*P+y*s+E%s],fe[x++]=(w+Math.floor((V+U)/2))%256;break;case 4:for(E=Ae=0;Ae<P;E=Ae+=1)w=n[l++],y=(E-E%s)/s,0===B?U=$=0:(U=fe[(B-1)*P+y*s+E%s],$=y&&fe[(B-1)*P+(y-1)*s+E%s]),q=(V=E<s?0:fe[x-s])+U-$,ee=Math.abs(q-V),M=Math.abs(q-U),le=Math.abs(q-$),fe[x++]=(w+(ee<=M&&ee<=le?V:M<=le?U:$))%256;break;default:throw new Error("Invalid filter algorithm: "+n[l-1])}if(!D){var z=((f+B*g)*d.width+c)*s,K=B*P;for(E=0;E<Ie;E+=1){for(var te=0;te<s;te+=1)o[z++]=fe[K++];z+=(p-1)*s}}B++}}return n=ic(n),1==d.interlaceMethod?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},r.prototype.decodePalette=function(){var n,s,o,l,d,u,c,f,p;for(o=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+o.length),l=0,n=0,s=c=0,f=o.length;c<f;s=c+=3)d[l++]=o[s],d[l++]=o[s+1],d[l++]=o[s+2],d[l++]=null!=(p=u[n++])?p:255;return d},r.prototype.copyToImageData=function(n,s){var o,l,d,u,c,f,p,g,w,x,y;if(l=this.colors,w=null,o=this.hasAlphaChannel,this.palette.length&&(w=null!=(y=this._decodedPalette)?y:this._decodedPalette=this.decodePalette(),l=4,o=!0),g=(d=n.data||n).length,c=w||s,u=f=0,1===l)for(;u<g;)p=w?4*s[u/4]:f,x=c[p++],d[u++]=x,d[u++]=x,d[u++]=x,d[u++]=o?c[p++]:255,f=p;else for(;u<g;)p=w?4*s[u/4]:f,d[u++]=c[p++],d[u++]=c[p++],d[u++]=c[p++],d[u++]=o?c[p++]:255,f=p},r.prototype.decode=function(){var n;return n=new Uint8Array(this.width*this.height*4),this.copyToImageData(n,this.decodePixels()),n};var a=function(){if("[object Window]"===Object.prototype.toString.call(ut)){try{e=ut.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),i=function(n){var s;if(!0===a())return t.width=n.width,t.height=n.height,t.clearRect(0,0,n.width,n.height),t.putImageData(n,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(n){var s,o,l,d,u,c,f,p;if(this.animation){for(p=[],o=u=0,c=(f=this.animation.frames).length;u<c;o=++u)l=n.createImageData((s=f[o]).width,s.height),d=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,d),s.imageData=l,p.push(s.image=i(l));return p}},r.prototype.renderFrame=function(n,s){var o,l,d;return o=(l=this.animation.frames)[s],d=l[s-1],0===s&&n.clearRect(0,0,this.width,this.height),1===d?.disposeOp?n.clearRect(d.xOffset,d.yOffset,d.width,d.height):2===d?.disposeOp&&n.putImageData(d.imageData,d.xOffset,d.yOffset),0===o.blendOp&&n.clearRect(o.xOffset,o.yOffset,o.width,o.height),n.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(n){var s,o,l,d,u,c,f=this;return o=0,d=(c=this.animation).numFrames,l=c.frames,u=c.numPlays,(s=function(){var p,g;if(p=o++%d,g=l[p],f.renderFrame(n,p),d>1&&o/d<u)return f.animation._timeout=setTimeout(s,g.delay)})()},r.prototype.stopAnimation=function(){var n;return clearTimeout(null!=(n=this.animation)?n._timeout:void 0)},r.prototype.render=function(n){var s,o;return n._png&&n._png.stopAnimation(),n._png=this,n.width=this.width,n.height=this.height,s=n.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(o=s.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),s.putImageData(o,0,0))},r}();function BK(i){var e=0;if(71!==i[e++]||73!==i[e++]||70!==i[e++]||56!==i[e++]||56!=(i[e++]+1&253)||97!==i[e++])throw new Error("Invalid GIF 87a/89a header.");var t=i[e++]|i[e++]<<8,r=i[e++]|i[e++]<<8,a=i[e++],s=1<<1+(7&a);e++,e++;var o=null,l=null;a>>7&&(o=e,l=s,e+=3*s);var d=!0,u=[],c=0,f=null,p=0,g=null;for(this.width=t,this.height=r;d&&e<i.length;)switch(i[e++]){case 33:switch(i[e++]){case 255:if(11!==i[e]||78==i[e+1]&&69==i[e+2]&&84==i[e+3]&&83==i[e+4]&&67==i[e+5]&&65==i[e+6]&&80==i[e+7]&&69==i[e+8]&&50==i[e+9]&&46==i[e+10]&&48==i[e+11]&&3==i[e+12]&&1==i[e+13]&&0==i[e+16])e+=14,g=i[e++]|i[e++]<<8,e++;else for(e+=12;;){if(!((B=i[e++])>=0))throw Error("Invalid block size");if(0===B)break;e+=B}break;case 249:if(4!==i[e++]||0!==i[e+4])throw new Error("Invalid graphics extension block.");var w=i[e++];c=i[e++]|i[e++]<<8,f=i[e++],!(1&w)&&(f=null),p=w>>2&7,e++;break;case 254:for(;;){if(!((B=i[e++])>=0))throw Error("Invalid block size");if(0===B)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+i[e-1].toString(16))}break;case 44:var x=i[e++]|i[e++]<<8,y=i[e++]|i[e++]<<8,E=i[e++]|i[e++]<<8,V=i[e++]|i[e++]<<8,F=i[e++],q=F>>6&1,ee=1<<1+(7&F),X=o,M=l,le=!1;F>>7&&(le=!0,X=e,M=ee,e+=3*ee);var fe=e;for(e++;;){var B;if(!((B=i[e++])>=0))throw Error("Invalid block size");if(0===B)break;e+=B}u.push({x,y,width:E,height:V,has_local_palette:le,palette_offset:X,palette_size:M,data_offset:fe,data_length:e-fe,transparent_index:f,interlaced:!!q,delay:c,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+i[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return g},this.frameInfo=function(P){if(P<0||P>=u.length)throw new Error("Frame index out of range.");return u[P]},this.decodeAndBlitFrameBGRA=function(P,U){var $=this.frameInfo(P),me=$.width*$.height,pe=new Uint8Array(me);V1(i,$.data_offset,pe,me);var xe=$.palette_offset,_e=$.transparent_index;null===_e&&(_e=256);var Ae=$.width,Ie=t-Ae,Me=Ae,D=4*($.y*t+$.x),z=4*(($.y+$.height)*t+$.x),K=D,te=4*Ie;!0===$.interlaced&&(te+=4*t*7);for(var de=8,Ce=0,we=pe.length;Ce<we;++Ce){var Se=pe[Ce];if(0===Me&&(Me=Ae,(K+=te)>=z&&(te=4*Ie+4*t*(de-1),K=D+(Ae+Ie)*(de<<1),de>>=1)),Se===_e)K+=4;else{var ke=i[xe+3*Se],Fe=i[xe+3*Se+1];U[K++]=i[xe+3*Se+2],U[K++]=Fe,U[K++]=ke,U[K++]=255}--Me}},this.decodeAndBlitFrameRGBA=function(P,U){var $=this.frameInfo(P),me=$.width*$.height,pe=new Uint8Array(me);V1(i,$.data_offset,pe,me);var xe=$.palette_offset,_e=$.transparent_index;null===_e&&(_e=256);var Ae=$.width,Ie=t-Ae,Me=Ae,D=4*($.y*t+$.x),z=4*(($.y+$.height)*t+$.x),K=D,te=4*Ie;!0===$.interlaced&&(te+=4*t*7);for(var de=8,Ce=0,we=pe.length;Ce<we;++Ce){var Se=pe[Ce];if(0===Me&&(Me=Ae,(K+=te)>=z&&(te=4*Ie+4*t*(de-1),K=D+(Ae+Ie)*(de<<1),de>>=1)),Se===_e)K+=4;else{var Fe=i[xe+3*Se+1],qe=i[xe+3*Se+2];U[K++]=i[xe+3*Se],U[K++]=Fe,U[K++]=qe,U[K++]=255}--Me}}}function V1(i,e,t,r){for(var a=i[e++],n=1<<a,s=n+1,o=s+1,l=a+1,d=(1<<l)-1,u=0,c=0,f=0,p=i[e++],g=new Int32Array(4096),w=null;;){for(;u<16&&0!==p;)c|=i[e++]<<u,u+=8,1===p?p=i[e++]:--p;if(u<l)break;var x=c&d;if(c>>=l,u-=l,x!==n){if(x===s)break;for(var y=x<o?x:w,E=0,V=y;V>n;)V=g[V]>>8,++E;var F=V;if(f+E+(y!==x?1:0)>r)return void Qt.log("Warning, gif stream longer than expected.");t[f++]=F;var q=f+=E;for(y!==x&&(t[f++]=F),V=y;E--;)t[--q]=255&(V=g[V]),V>>=8;null!==w&&o<4096&&(g[o++]=w<<8|F,o>=d+1&&l<12&&(++l,d=d<<1|1)),w=x}else o=s+1,d=(1<<(l=a+1))-1,w=null}return f!==r&&Qt.log("Warning, gif stream shorter than expected."),t}function Yv(i){var e,t,r,a,n,s=Math.floor,o=new Array(64),l=new Array(64),d=new Array(64),u=new Array(64),c=new Array(65535),f=new Array(65535),p=new Array(64),g=new Array(64),w=[],x=0,y=7,E=new Array(64),V=new Array(64),F=new Array(64),q=new Array(256),ee=new Array(2048),X=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],le=[0,1,2,3,4,5,6,7,8,9,10,11],fe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],me=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pe(D,z){for(var K=0,te=0,de=new Array,Ce=1;Ce<=16;Ce++){for(var we=1;we<=D[Ce];we++)de[z[te]]=[],de[z[te]][0]=K,de[z[te]][1]=Ce,te++,K++;K*=2}return de}function xe(D){for(var z=D[0],K=D[1]-1;K>=0;)z&1<<K&&(x|=1<<y),K--,--y<0&&(255==x?(_e(255),_e(0)):_e(x),y=7,x=0)}function _e(D){w.push(D)}function Ae(D){_e(D>>8&255),_e(255&D)}function Ie(D,z,K,te,de){for(var Ce,we=de[0],Se=de[240],ke=function(Ne,Ze){var Ue,Ge,nt,Ct,xt,At,Ft,Ut,ft,Ot,je=0;for(ft=0;ft<8;++ft){var tr=(Ue=Ne[je])+(Ut=Ne[je+7]),Mt=Ue-Ut,ia=(Ge=Ne[je+1])+(Ft=Ne[je+6]),ei=Ge-Ft,ui=(nt=Ne[je+2])+(At=Ne[je+5]),Ha=nt-At,Zt=(Ct=Ne[je+3])+(xt=Ne[je+4]),ks=Ct-xt,vi=tr+Zt,ra=tr-Zt,hn=ia+ui,gi=ia-ui;Ne[je]=vi+hn,Ne[je+4]=vi-hn;var bt=.707106781*(gi+ra);Ne[je+2]=ra+bt,Ne[je+6]=ra-bt;var zt=.382683433*((vi=ks+Ha)-(gi=ei+Mt)),Ms=.5411961*vi+zt,Ui=1.306562965*gi+zt,Za=.707106781*(hn=Ha+ei),za=Mt+Za,dt=Mt-Za;Ne[je+5]=dt+Ms,Ne[je+3]=dt-Ms,Ne[je+1]=za+Ui,Ne[je+7]=za-Ui,je+=8}for(je=0,ft=0;ft<8;++ft){var aa=(Ue=Ne[je])+(Ut=Ne[je+56]),Wa=Ue-Ut,Cr=(Ge=Ne[je+8])+(Ft=Ne[je+48]),Bi=Ge-Ft,Ti=(nt=Ne[je+16])+(At=Ne[je+40]),Dr=nt-At,$o=(Ct=Ne[je+24])+(xt=Ne[je+32]),cn=Ct-xt,na=aa+$o,sa=aa-$o,oa=Cr+Ti,$a=Cr-Ti;Ne[je]=na+oa,Ne[je+32]=na-oa;var Zr=.707106781*($a+sa);Ne[je+16]=sa+Zr,Ne[je+48]=sa-Zr;var Ka=.382683433*((na=cn+Dr)-($a=Bi+Wa)),Hs=.5411961*na+Ka,Ko=1.306562965*$a+Ka,Go=.707106781*(oa=Dr+Bi),Uo=Wa+Go,jo=Wa-Go;Ne[je+40]=jo+Hs,Ne[je+24]=jo-Hs,Ne[je+8]=Uo+Ko,Ne[je+56]=Uo-Ko,je++}for(ft=0;ft<64;++ft)p[ft]=(Ot=Ne[ft]*Ze[ft])>0?Ot+.5|0:Ot-.5|0;return p}(D,z),Fe=0;Fe<64;++Fe)g[X[Fe]]=ke[Fe];var qe=g[0]-K;K=g[0],0==qe?xe(te[0]):(xe(te[f[Ce=32767+qe]]),xe(c[Ce]));for(var Je=63;Je>0&&0==g[Je];)Je--;if(0==Je)return xe(we),K;for(var ht,Oe=1;Oe<=Je;){for(var G=Oe;0==g[Oe]&&Oe<=Je;)++Oe;var wt=Oe-G;if(wt>=16){ht=wt>>4;for(var tt=1;tt<=ht;++tt)xe(Se);wt&=15}xe(de[(wt<<4)+f[Ce=32767+g[Oe]]]),xe(c[Ce]),Oe++}return 63!=Je&&xe(we),K}function Me(D){D=Math.min(Math.max(D,1),100),n!=D&&(function(z){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var de=s((K[te]*z+50)/100);de=Math.min(Math.max(de,1),255),o[X[te]]=de}for(var Ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],we=0;we<64;we++){var Se=s((Ce[we]*z+50)/100);Se=Math.min(Math.max(Se,1),255),l[X[we]]=Se}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Fe=0,qe=0;qe<8;qe++)for(var Je=0;Je<8;Je++)d[Fe]=1/(o[X[Fe]]*ke[qe]*ke[Je]*8),u[Fe]=1/(l[X[Fe]]*ke[qe]*ke[Je]*8),Fe++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),n=D)}this.encode=function(D,z){var Ge,nt;z&&Me(z),w=new Array,x=0,y=7,Ae(65496),Ae(65504),Ae(16),_e(74),_e(70),_e(73),_e(70),_e(0),_e(1),_e(1),_e(0),Ae(1),Ae(1),_e(0),_e(0),function(){Ae(65499),Ae(132),_e(0);for(var Ge=0;Ge<64;Ge++)_e(o[Ge]);_e(1);for(var nt=0;nt<64;nt++)_e(l[nt])}(),Ge=D.width,nt=D.height,Ae(65472),Ae(17),_e(8),Ae(nt),Ae(Ge),_e(3),_e(1),_e(17),_e(0),_e(2),_e(17),_e(1),_e(3),_e(17),_e(1),function(){Ae(65476),Ae(418),_e(0);for(var Ge=0;Ge<16;Ge++)_e(M[Ge+1]);for(var nt=0;nt<=11;nt++)_e(le[nt]);_e(16);for(var Ct=0;Ct<16;Ct++)_e(fe[Ct+1]);for(var xt=0;xt<=161;xt++)_e(B[xt]);_e(1);for(var At=0;At<16;At++)_e(P[At+1]);for(var Ft=0;Ft<=11;Ft++)_e(U[Ft]);_e(17);for(var Ut=0;Ut<16;Ut++)_e($[Ut+1]);for(var ft=0;ft<=161;ft++)_e(me[ft])}(),Ae(65498),Ae(12),_e(3),_e(1),_e(0),_e(2),_e(17),_e(3),_e(17),_e(0),_e(63),_e(0);var K=0,te=0,de=0;x=0,y=7,this.encode.displayName="_encode_";for(var Ce,we,Se,ke,Fe,qe,Je,ht,Oe,G=D.data,tt=D.height,Ne=4*D.width,Ze=0;Ze<tt;){for(Ce=0;Ce<Ne;){for(Fe=Ne*Ze+Ce,Je=-1,ht=0,Oe=0;Oe<64;Oe++)qe=Fe+(ht=Oe>>3)*Ne+(Je=4*(7&Oe)),Ze+ht>=tt&&(qe-=Ne*(Ze+1+ht-tt)),Ce+Je>=Ne&&(qe-=Ce+Je-Ne+4),we=G[qe++],Se=G[qe++],ke=G[qe++],E[Oe]=(ee[we]+ee[Se+256>>0]+ee[ke+512>>0]>>16)-128,V[Oe]=(ee[we+768>>0]+ee[Se+1024>>0]+ee[ke+1280>>0]>>16)-128,F[Oe]=(ee[we+1280>>0]+ee[Se+1536>>0]+ee[ke+1792>>0]>>16)-128;K=Ie(E,d,K,e,r),te=Ie(V,u,te,t,a),de=Ie(F,u,de,t,a),Ce+=32}Ze+=8}if(y>=0){var Ue=[];Ue[1]=y+1,Ue[0]=(1<<y+1)-1,xe(Ue)}return Ae(65497),new Uint8Array(w)},i=i||50,function(){for(var D=String.fromCharCode,z=0;z<256;z++)q[z]=D(z)}(),e=pe(M,le),t=pe(P,U),r=pe(fe,B),a=pe($,me),function(){for(var D=1,z=2,K=1;K<=15;K++){for(var te=D;te<z;te++)f[32767+te]=K,c[32767+te]=[],c[32767+te][1]=K,c[32767+te][0]=te;for(var de=-(z-1);de<=-D;de++)f[32767+de]=K,c[32767+de]=[],c[32767+de][1]=K,c[32767+de][0]=z-1+de;D<<=1,z<<=1}}(),function(){for(var D=0;D<256;D++)ee[D]=19595*D,ee[D+256>>0]=38470*D,ee[D+512>>0]=7471*D+32768,ee[D+768>>0]=-11059*D,ee[D+1024>>0]=-21709*D,ee[D+1280>>0]=32768*D+8421375,ee[D+1536>>0]=-27439*D,ee[D+1792>>0]=-5329*D}(),Me(i)}function ea(i,e){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function N1(i){function e(M){if(!M)throw Error("assert :P")}function t(M,le,fe){for(var B=0;4>B;B++)if(M[le+B]!=fe.charCodeAt(B))return!0;return!1}function r(M,le,fe,B,P){for(var U=0;U<P;U++)M[le+U]=fe[B+U]}function a(M,le,fe,B){for(var P=0;P<B;P++)M[le+P]=fe}function n(M){return new Int32Array(M)}function s(M,le){for(var fe=[],B=0;B<M;B++)fe.push(new le);return fe}function o(M,le){var fe=[];return function B(P,U,$){for(var me=$[U],pe=0;pe<me&&(P.push($.length>U+1?[]:new le),!($.length<U+1));pe++)B(P[pe],U+1,$)}(fe,0,M),fe}var l=function(){var M=this;function le(h,_){for(var C=1<<_-1>>>0;h&C;)C>>>=1;return C?(h&C-1)+C:h}function fe(h,_,C,S,I){e(!(S%C));do{h[_+(S-=C)]=I}while(0<S)}function B(h,_,C,S,I){if(e(2328>=I),512>=I)var A=n(512);else if(null==(A=n(I)))return 0;return function(O,R,L,H,ie,ve){var ge,se,Pe=R,Ee=1<<L,re=n(16),ne=n(16);for(e(0!=ie),e(null!=H),e(null!=O),e(0<L),se=0;se<ie;++se){if(15<H[se])return 0;++re[H[se]]}if(re[0]==ie)return 0;for(ne[1]=0,ge=1;15>ge;++ge){if(re[ge]>1<<ge)return 0;ne[ge+1]=ne[ge]+re[ge]}for(se=0;se<ie;++se)ge=H[se],0<H[se]&&(ve[ne[ge]++]=se);if(1==ne[15])return(H=new P).g=0,H.value=ve[0],fe(O,Pe,1,Ee,H),Ee;var Re,Be=-1,Le=Ee-1,Xe=0,ze=1,ot=1,Ke=1<<L;for(se=0,ge=1,ie=2;ge<=L;++ge,ie<<=1){if(ze+=ot<<=1,0>(ot-=re[ge]))return 0;for(;0<re[ge];--re[ge])(H=new P).g=ge,H.value=ve[se++],fe(O,Pe+Xe,ie,Ke,H),Xe=le(Xe,ge)}for(ge=L+1,ie=2;15>=ge;++ge,ie<<=1){if(ze+=ot<<=1,0>(ot-=re[ge]))return 0;for(;0<re[ge];--re[ge]){if(H=new P,(Xe&Le)!=Be){for(Pe+=Ke,Re=1<<(Be=ge)-L;15>Be&&!(0>=(Re-=re[Be]));)++Be,Re<<=1;Ee+=Ke=1<<(Re=Be-L),O[R+(Be=Xe&Le)].g=Re+L,O[R+Be].value=Pe-R-Be}H.g=ge-L,H.value=ve[se++],fe(O,Pe+(Xe>>L),ie,Ke,H),Xe=le(Xe,ge)}}return ze!=2*ne[15]-1?0:Ee}(h,_,C,S,I,A)}function P(){this.value=this.g=0}function U(){this.value=this.g=0}function $(){this.G=s(5,P),this.H=n(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(wr,U)}function me(h,_,C,S){e(null!=h),e(null!=_),e(2147483648>S),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=_,h.pa=C,h.Jd=_,h.Yc=C+S,h.Zc=4<=S?C+S-4+1:C,Ce(h)}function pe(h,_){for(var C=0;0<_--;)C|=Se(h,128)<<_;return C}function xe(h,_){var C=pe(h,_);return we(h)?-C:C}function _e(h,_,C,S){var I,A=0;for(e(null!=h),e(null!=_),e(4294967288>S),h.Sb=S,h.Ra=0,h.u=0,h.h=0,4<S&&(S=4),I=0;I<S;++I)A+=_[C+I]<<8*I;h.Ra=A,h.bb=S,h.oa=_,h.pa=C}function Ae(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<dl-8>>>0,++h.bb,h.u-=8;K(h)&&(h.h=1,h.u=0)}function Ie(h,_){if(e(0<=_),!h.h&&_<=ll){var C=z(h)&ol[_];return h.u+=_,Ae(h),C}return h.h=1,h.u=0}function Me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(h){return h.Ra>>>(h.u&dl-1)>>>0}function K(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>dl}function te(h,_){h.u=_,h.h=K(h)}function de(h){h.u>=Yd&&(e(h.u>=Yd),Ae(h))}function Ce(h){e(null!=h&&null!=h.oa),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(null!=h&&null!=h.oa),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function we(h){return pe(h,1)}function Se(h,_){var C=h.Ca;0>h.b&&Ce(h);var S=h.b,I=C*_>>>8,A=(h.I>>>S>I)+0;for(A?(C-=I,h.I-=I+1<<S>>>0):C=I+1,S=C,I=0;256<=S;)I+=8,S>>=8;return h.b-=S=7^I+Sr[S],h.Ca=(C<<S)-1,A}function ke(h,_,C){h[_+0]=C>>24&255,h[_+1]=C>>16&255,h[_+2]=C>>8&255,h[_+3]=C>>0&255}function Fe(h,_){return h[_+0]<<0|h[_+1]<<8}function qe(h,_){return Fe(h,_)|h[_+2]<<16}function Je(h,_){return Fe(h,_)|Fe(h,_+2)<<16}function ht(h,_){var C=1<<_;return e(null!=h),e(0<_),h.X=n(C),null==h.X?0:(h.Mb=32-_,h.Xa=_,1)}function Oe(h,_){e(null!=h),e(null!=_),e(h.Xa==_.Xa),r(_.X,0,h.X,0,1<<_.Xa)}function G(){this.X=[],this.Xa=this.Mb=0}function wt(h,_,C,S){e(null!=C),e(null!=S);var I=C[0],A=S[0];return 0==I&&(I=(h*A+_/2)/_),0==A&&(A=(_*I+h/2)/h),0>=I||0>=A?0:(C[0]=I,S[0]=A,1)}function tt(h,_){return h+(1<<_)-1>>>_}function Ne(h,_){return((4278255360&h)+(4278255360&_)>>>0&4278255360)+((16711935&h)+(16711935&_)>>>0&16711935)>>>0}function Ze(h,_){M[_]=function(C,S,I,A,O,R,L){var H;for(H=0;H<O;++H){var ie=M[h](R[L+H-1],I,A+H);R[L+H]=Ne(C[S+H],ie)}}}function Ue(){this.ud=this.hd=this.jd=0}function Ge(h,_){return((4278124286&(h^_))>>>1)+(h&_)>>>0}function nt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Ct(h,_){return nt(h+(h-_+.5>>1))}function xt(h,_,C){return Math.abs(_-C)-Math.abs(h-C)}function At(h,_,C,S,I,A,O){for(S=A[O-1],C=0;C<I;++C)A[O+C]=S=Ne(h[_+C],S)}function Ft(h,_,C,S,I){var A;for(A=0;A<C;++A){var O=h[_+A],R=O>>8&255,L=16711935&(L=(L=16711935&O)+((R<<16)+R));S[I+A]=(4278255360&O)+L>>>0}}function Ut(h,_){_.jd=h>>0&255,_.hd=h>>8&255,_.ud=h>>16&255}function ft(h,_,C,S,I,A){var O;for(O=0;O<S;++O){var R=_[C+O],L=R>>>8,H=R,ie=255&(ie=(ie=R>>>16)+((h.jd<<24>>24)*(L<<24>>24)>>>5));H=255&(H=(H+=(h.hd<<24>>24)*(L<<24>>24)>>>5)+((h.ud<<24>>24)*(ie<<24>>24)>>>5)),I[A+O]=(4278255360&R)+(ie<<16)+H}}function Ot(h,_,C,S,I){M[_]=function(A,O,R,L,H,ie,ve,ge,se){for(L=ve;L<ge;++L)for(ve=0;ve<se;++ve)H[ie++]=I(R[S(A[O++])])},M[h]=function(A,O,R,L,H,ie,ve){var ge=8>>A.b,se=A.Ea,Pe=A.K[0],Ee=A.w;if(8>ge)for(A=(1<<A.b)-1,Ee=(1<<ge)-1;O<R;++O){var re,ne=0;for(re=0;re<se;++re)re&A||(ne=S(L[H++])),ie[ve++]=I(Pe[ne&Ee]),ne>>=ge}else M["VP8LMapColor"+C](L,H,Pe,Ee,ie,ve,O,R,se)}}function je(h,_,C,S,I){for(C=_+C;_<C;){var A=h[_++];S[I++]=A>>16&255,S[I++]=A>>8&255,S[I++]=A>>0&255}}function tr(h,_,C,S,I){for(C=_+C;_<C;){var A=h[_++];S[I++]=A>>16&255,S[I++]=A>>8&255,S[I++]=A>>0&255,S[I++]=A>>24&255}}function Mt(h,_,C,S,I){for(C=_+C;_<C;){var A=(O=h[_++])>>16&240|O>>12&15,O=O>>0&240|O>>28&15;S[I++]=A,S[I++]=O}}function ia(h,_,C,S,I){for(C=_+C;_<C;){var A=(O=h[_++])>>16&248|O>>13&7,O=O>>5&224|O>>3&31;S[I++]=A,S[I++]=O}}function ei(h,_,C,S,I){for(C=_+C;_<C;){var A=h[_++];S[I++]=A>>0&255,S[I++]=A>>8&255,S[I++]=A>>16&255}}function ui(h,_,C,S,I,A){if(0==A)for(C=_+C;_<C;)ke(S,((A=h[_++])[0]>>24|A[1]>>8&65280|A[2]<<8&16711680|A[3]<<24)>>>0),I+=32;else r(S,I,h,_,C)}function Ha(h,_){M[_][0]=M[h+"0"],M[_][1]=M[h+"1"],M[_][2]=M[h+"2"],M[_][3]=M[h+"3"],M[_][4]=M[h+"4"],M[_][5]=M[h+"5"],M[_][6]=M[h+"6"],M[_][7]=M[h+"7"],M[_][8]=M[h+"8"],M[_][9]=M[h+"9"],M[_][10]=M[h+"10"],M[_][11]=M[h+"11"],M[_][12]=M[h+"12"],M[_][13]=M[h+"13"],M[_][14]=M[h+"0"],M[_][15]=M[h+"0"]}function Zt(h){return h==Ig||h==Tg||h==zc||h==Ag}function ks(){this.eb=[],this.size=this.A=this.fb=0}function vi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ra(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ks,this.f.kb=new vi,this.sd=null}function hn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function gi(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function bt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function zt(h,_){var C=h.T,S=_.ba.f.RGBA,I=S.eb,A=S.fb+h.ka*S.A,O=Kr[_.ba.S],R=h.y,L=h.O,H=h.f,ie=h.N,ve=h.ea,ge=h.W,se=_.cc,Pe=_.dc,Ee=_.Mc,re=_.Nc,ne=h.ka,Re=h.ka+h.T,Be=h.U,Le=Be+1>>1;for(0==ne?O(R,L,null,null,H,ie,ve,ge,H,ie,ve,ge,I,A,null,null,Be):(O(_.ec,_.fc,R,L,se,Pe,Ee,re,H,ie,ve,ge,I,A-S.A,I,A,Be),++C);ne+2<Re;ne+=2)O(R,(L+=2*h.fa)-h.fa,R,L,se=H,Pe=ie,Ee=ve,re=ge,H,ie+=h.Rc,ve,ge+=h.Rc,I,(A+=2*S.A)-S.A,I,A,Be);return L+=h.fa,h.j+Re<h.o?(r(_.ec,_.fc,R,L,Be),r(_.cc,_.dc,H,ie,Le),r(_.Mc,_.Nc,ve,ge,Le),C--):1&Re||O(R,L,null,null,H,ie,ve,ge,H,ie,ve,ge,I,A+S.A,null,null,Be),C}function Ms(h,_,C){var S=h.F,I=[h.J];if(null!=S){var A=h.U,O=_.ba.S,R=O==Zc||O==zc;_=_.ba.f.RGBA;var L=[0],H=h.ka;L[0]=h.T,h.Kb&&(0==H?--L[0]:(--H,I[0]-=h.width),h.j+h.ka+h.T==h.o&&(L[0]=h.o-h.j-H));var ie=_.eb;h=Nc(S,I[0],h.width,A,L,ie,(H=_.fb+H*_.A)+(R?0:3),_.A),e(C==L),h&&Zt(O)&&Yn(ie,H,R,A,L,_.A)}return 0}function Ui(h){var _=h.ma,C=_.ba.S,S=11>C,I=C==Mc||C==Hc||C==Zc||C==Eg||12==C||Zt(C);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!jd(_.Oa,h,I?11:12))return 0;if(I&&Zt(C)&&Ve(),h.da)alert("todo:use_scaling");else{if(S){if(_.Ib=bt,h.Kb){if(_.memory=n(h.U+2*(C=h.U+1>>1)),null==_.memory)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+h.U,_.Mc=_.cc,_.Nc=_.dc+C,_.Ib=zt,Ve()}}else alert("todo:EmitYUV");I&&(_.Jb=Ms,S&&ue())}if(S&&!aT){for(h=0;256>h;++h)BG[h]=89858*(h-128)+$c>>Wc,FG[h]=-22014*(h-128)+$c,NG[h]=-45773*(h-128),VG[h]=113618*(h-128)+$c>>Wc;for(h=iu;h<Rg;++h)kG[h-iu]=Or(_=76283*(h-16)+$c>>Wc,255),MG[h-iu]=Or(_+8>>4,15);aT=1}return 1}function Za(h){var _=h.ma,C=h.U,S=h.T;return e(!(1&h.ka)),0>=C||0>=S?0:(C=_.Ib(h,_),null!=_.Jb&&_.Jb(h,_,C),_.Dc+=C,1)}function za(h){h.ma.memory=null}function dt(h,_,C,S){return 47!=Ie(h,8)?0:(_[0]=Ie(h,14)+1,C[0]=Ie(h,14)+1,S[0]=Ie(h,1),0!=Ie(h,3)?0:!h.h)}function aa(h,_){if(4>h)return h+1;var C=h-2>>1;return(2+(1&h)<<C)+Ie(_,C)+1}function Wa(h,_){return 120<_?_-120:1<=(C=((C=bG[_-1])>>4)*h+(8-(15&C)))?C:1;var C}function Cr(h,_,C){var S=z(C),I=h[_+=255&S].g-8;return 0<I&&(te(C,C.u+8),S=z(C),_+=h[_].value,_+=S&(1<<I)-1),te(C,C.u+h[_].g),h[_].value}function Bi(h,_,C){return C.g+=h.g,C.value+=h.value<<_>>>0,e(8>=C.g),h.g}function Ti(h,_,C){var S=h.xc;return e((_=0==S?0:h.vc[h.md*(C>>S)+(_>>S)])<h.Wb),h.Ya[_]}function Dr(h,_,C,S){var I=h.ab,A=h.c*_,O=h.C;_=O+_;var R=C,L=S;for(S=h.Ta,C=h.Ua;0<I--;){var H=h.gc[I],ie=O,ve=_,ge=R,se=L,Pe=(L=S,R=C,H.Ea);switch(e(ie<ve),e(ve<=H.nc),H.hc){case 2:Vc(ge,se,(ve-ie)*Pe,L,R);break;case 0:var Ee=ie,re=ve,ne=L,Re=R,Be=(Ke=H).Ea;0==Ee&&(wg(ge,se,null,null,1,ne,Re),At(ge,se+1,0,0,Be-1,ne,Re+1),se+=Be,Re+=Be,++Ee);for(var Le=1<<Ke.b,Xe=Le-1,ze=tt(Be,Ke.b),ot=Ke.K,Ke=Ke.w+(Ee>>Ke.b)*ze;Ee<re;){var Ht=ot,$t=Ke,kt=1;for(Xd(ge,se,ne,Re-Be,1,ne,Re);kt<Be;){var Lt=(kt&~Xe)+Le;Lt>Be&&(Lt=Be),(0,Gn[Ht[$t++]>>8&15])(ge,se+ +kt,ne,Re+kt-Be,Lt-kt,ne,Re+kt),kt=Lt}se+=Be,Re+=Be,++Ee&Xe||(Ke+=ze)}ve!=H.nc&&r(L,R-Pe,L,R+(ve-ie-1)*Pe,Pe);break;case 1:for(Pe=ge,re=se,Be=(ge=H.Ea)-(Re=ge&~(ne=(se=1<<H.b)-1)),Ee=tt(ge,H.b),Le=H.K,H=H.w+(ie>>H.b)*Ee;ie<ve;){for(Xe=Le,ze=H,ot=new Ue,Ke=re+Re,Ht=re+ge;re<Ke;)Ut(Xe[ze++],ot),zr(ot,Pe,re,se,L,R),re+=se,R+=se;re<Ht&&(Ut(Xe[ze++],ot),zr(ot,Pe,re,Be,L,R),re+=Be,R+=Be),++ie&ne||(H+=Ee)}break;case 3:if(ge==L&&se==R&&0<H.b){for(re=L,ge=Pe=R+(ve-ie)*Pe-(Re=(ve-ie)*tt(H.Ea,H.b)),se=L,ne=R,Ee=[],Re=(Be=Re)-1;0<=Re;--Re)Ee[Re]=se[ne+Re];for(Re=Be-1;0<=Re;--Re)re[ge+Re]=Ee[Re];ha(H,ie,ve,L,Pe,L,R)}else ha(H,ie,ve,ge,se,L,R)}R=S,L=C}L!=C&&r(S,C,R,L,A)}function $o(h,_){var C=h.V,S=h.Ba+h.c*h.C,I=_-h.C;if(e(_<=h.l.o),e(16>=I),0<I){var A=h.l,O=h.Ta,R=h.Ua,L=A.width;if(Dr(h,I,C,S),I=R=[R],e((C=h.C)<(S=_)),e(A.v<A.va),S>A.o&&(S=A.o),C<A.j){var H=A.j-C;C=A.j,I[0]+=H*L}if(C>=S?C=0:(I[0]+=4*A.v,A.ka=C-A.j,A.U=A.va-A.v,A.T=S-C,C=1),C){if(R=R[0],11>(C=h.ca).S){var ie=C.f.RGBA,ve=(S=C.S,I=A.U,A=A.T,H=ie.eb,ie.A),ge=A;for(ie=ie.fb+h.Ma*ie.A;0<ge--;){var se=O,Pe=R,Ee=I,re=H,ne=ie;switch(S){case kc:ca(se,Pe,Ee,re,ne);break;case Mc:Un(se,Pe,Ee,re,ne);break;case Ig:Un(se,Pe,Ee,re,ne),Yn(re,ne,0,Ee,1,0);break;case j1:ul(se,Pe,Ee,re,ne);break;case Hc:ui(se,Pe,Ee,re,ne,1);break;case Tg:ui(se,Pe,Ee,re,ne,1),Yn(re,ne,0,Ee,1,0);break;case Zc:ui(se,Pe,Ee,re,ne,0);break;case zc:ui(se,Pe,Ee,re,ne,0),Yn(re,ne,1,Ee,1,0);break;case Eg:Ua(se,Pe,Ee,re,ne);break;case Ag:Ua(se,Pe,Ee,re,ne),pl(re,ne,Ee,1,0);break;case q1:vn(se,Pe,Ee,re,ne);break;default:e(0)}R+=L,ie+=ve}h.Ma+=A}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=C.height)}}h.C=_,e(h.C<=h.i)}function cn(h){var _;if(0<h.ua)return 0;for(_=0;_<h.Wb;++_){var C=h.Ya[_].G,S=h.Ya[_].H;if(0<C[1][S[1]+0].g||0<C[2][S[2]+0].g||0<C[3][S[3]+0].g)return 0}return 1}function na(h,_,C,S,I,A){if(0!=h.Z){var O=h.qd,R=h.rd;for(e(null!=Jn[h.Z]);_<C;++_)Jn[h.Z](O,R,S,I,S,I,A),O=S,R=I,I+=A;h.qd=O,h.rd=R}}function sa(h,_){var C=h.l.ma,S=0==C.Z||1==C.Z?h.l.j:h.C;if(S=h.C<S?S:h.C,e(_<=h.l.o),_>S){var I=h.l.width,A=C.ca,O=C.tb+I*S,R=h.V,L=h.Ba+h.c*S,H=h.gc;e(1==h.ab),e(3==H[0].hc),Sg(H[0],S,_,R,L,A,O),na(C,S,_,A,O,I)}h.C=h.Ma=_}function oa(h,_,C,S,I,A,O){var R=h.$/S,L=h.$%S,H=h.m,ie=h.s,ve=C+h.$,ge=ve;I=C+S*I;var se=C+S*A,Pe=280+ie.ua,Ee=h.Pb?R:16777216,re=0<ie.ua?ie.Wa:null,ne=ie.wc,Re=ve<se?Ti(ie,L,R):null;e(h.C<A),e(se<=I);var Be=!1;e:for(;;){for(;Be||ve<se;){var Le=0;if(R>=Ee){var Xe=ve-C;e((Ee=h).Pb),Ee.wd=Ee.m,Ee.xd=Xe,0<Ee.s.ua&&Oe(Ee.s.Wa,Ee.s.vb),Ee=R+SG}if(L&ne||(Re=Ti(ie,L,R)),e(null!=Re),Re.Qb&&(_[ve]=Re.qb,Be=!0),!Be)if(de(H),Re.jc){Xe=_;var ze=ve,ot=Re.pd[z(Le=H)&wr-1];e(Re.jc),256>ot.g?(te(Le,Le.u+ot.g),Xe[ze]=ot.value,Le=0):(te(Le,Le.u+ot.g-256),e(256<=ot.value),Le=ot.value),0==Le&&(Be=!0)}else Le=Cr(Re.G[0],Re.H[0],H);if(H.h)break;if(Be||256>Le){if(!Be)if(Re.nd)_[ve]=(Re.qb|Le<<8)>>>0;else{if(de(H),Be=Cr(Re.G[1],Re.H[1],H),de(H),Xe=Cr(Re.G[2],Re.H[2],H),ze=Cr(Re.G[3],Re.H[3],H),H.h)break;_[ve]=(ze<<24|Be<<16|Le<<8|Xe)>>>0}if(Be=!1,++ve,++L>=S&&(L=0,++R,null!=O&&R<=A&&!(R%16)&&O(h,R),null!=re))for(;ge<ve;)Le=_[ge++],re.X[(506832829*Le&4294967295)>>>re.Mb]=Le}else if(280>Le){if(Le=aa(Le-256,H),Xe=Cr(Re.G[4],Re.H[4],H),de(H),Xe=Wa(S,Xe=aa(Xe,H)),H.h)break;if(ve-C<Xe||I-ve<Le)break e;for(ze=0;ze<Le;++ze)_[ve+ze]=_[ve+ze-Xe];for(ve+=Le,L+=Le;L>=S;)L-=S,++R,null!=O&&R<=A&&!(R%16)&&O(h,R);if(e(ve<=I),L&ne&&(Re=Ti(ie,L,R)),null!=re)for(;ge<ve;)Le=_[ge++],re.X[(506832829*Le&4294967295)>>>re.Mb]=Le}else{if(!(Le<Pe))break e;for(Be=Le-280,e(null!=re);ge<ve;)Le=_[ge++],re.X[(506832829*Le&4294967295)>>>re.Mb]=Le;Le=ve,e(!(Be>>>(Xe=re).Xa)),_[Le]=Xe.X[Be],Be=!0}Be||e(H.h==K(H))}if(h.Pb&&H.h&&ve<I)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Oe(h.s.vb,h.s.Wa);else{if(H.h)break e;O?.(h,R>A?A:R),h.a=0,h.$=ve-C}return 1}return h.a=3,0}function $a(h){e(null!=h),h.vc=null,h.yc=null,h.Ya=null;var _=h.Wa;null!=_&&(_.X=null),h.vb=null,e(null!=h)}function Zr(){var h=new bg;return null==h?null:(h.a=0,h.xb=J1,Ha("Predictor","VP8LPredictors"),Ha("Predictor","VP8LPredictors_C"),Ha("PredictorAdd","VP8LPredictorsAdd"),Ha("PredictorAdd","VP8LPredictorsAdd_C"),Vc=Ft,zr=ft,ca=je,Un=tr,Ua=Mt,vn=ia,ul=ei,M.VP8LMapColor32b=Jd,M.VP8LMapColor8b=yg,h)}function Ka(h,_,C,S,I){var A=1,O=[h],R=[_],L=S.m,H=S.s,ie=null,ve=0;e:for(;;){if(C)for(;A&&Ie(L,1);){var ge=O,se=R,Pe=S,Ee=1,re=Pe.m,ne=Pe.gc[Pe.ab],Re=Ie(re,2);if(Pe.Oc&1<<Re)A=0;else{switch(Pe.Oc|=1<<Re,ne.hc=Re,ne.Ea=ge[0],ne.nc=se[0],ne.K=[null],++Pe.ab,e(4>=Pe.ab),Re){case 0:case 1:ne.b=Ie(re,3)+2,Ee=Ka(tt(ne.Ea,ne.b),tt(ne.nc,ne.b),0,Pe,ne.K),ne.K=ne.K[0];break;case 3:var Be,Le=Ie(re,8)+1,Xe=16<Le?0:4<Le?1:2<Le?2:3;if(ge[0]=tt(ne.Ea,Xe),ne.b=Xe,Be=Ee=Ka(Le,1,0,Pe,ne.K)){var ze,ot=Le,Ke=ne,Ht=1<<(8>>Ke.b),$t=n(Ht);if(null==$t)Be=0;else{var kt=Ke.K[0],Lt=Ke.w;for($t[0]=Ke.K[0][0],ze=1;ze<1*ot;++ze)$t[ze]=Ne(kt[Lt+ze],$t[ze-1]);for(;ze<4*Ht;++ze)$t[ze]=0;Ke.K[0]=null,Ke.K[0]=$t,Be=1}}Ee=Be;break;case 2:break;default:e(0)}A=Ee}}if(O=O[0],R=R[0],A&&Ie(L,1)&&!(A=1<=(ve=Ie(L,4))&&11>=ve)){S.a=3;break e}var ti;if(ti=A)t:{var jt,yt,Di,yr=S,Oi=O,xr=R,Kt=ve,Lr=C,Pr=yr.m,zi=yr.s,ji=[null],or=1,Gr=0,ja=wG[Kt];i:for(;;){if(Lr&&Ie(Pr,1)){var Wi=Ie(Pr,3)+2,wn=tt(Oi,Wi),Us=tt(xr,Wi),fl=wn*Us;if(!Ka(wn,Us,0,yr,ji))break i;for(ji=ji[0],zi.xc=Wi,jt=0;jt<fl;++jt){var Qn=ji[jt]>>8&65535;ji[jt]=Qn,Qn>=or&&(or=Qn+1)}}if(Pr.h)break i;for(yt=0;5>yt;++yt){var Ci=Y1[yt];!yt&&0<Kt&&(Ci+=1<<Kt),Gr<Ci&&(Gr=Ci)}var Lg=s(or*ja,P),oT=or,lT=s(oT,$);if(null==lT)var Gc=null;else e(65536>=oT),Gc=lT;var ru=n(Gr);if(null==Gc||null==ru||null==Lg){yr.a=1;break i}var Uc=Lg;for(jt=Di=0;jt<or;++jt){var va=Gc[jt],_l=va.G,vl=va.H,dT=0,jc=1,uT=0;for(yt=0;5>yt;++yt){Ci=Y1[yt],_l[yt]=Uc,vl[yt]=Di,!yt&&0<Kt&&(Ci+=1<<Kt);a:{var qc,Pg=Ci,Yc=yr,au=ru,zG=Uc,WG=Di,Bg=0,es=Yc.m,$G=Ie(es,1);if(a(au,0,0,Pg),$G){var KG=Ie(es,1)+1,GG=Ie(es,1),hT=Ie(es,0==GG?1:8);au[hT]=1,2==KG&&(au[hT=Ie(es,8)]=1);var Xc=1}else{var cT=n(19),pT=Ie(es,4)+4;if(19<pT){Yc.a=3;var Jc=0;break a}for(qc=0;qc<pT;++qc)cT[CG[qc]]=Ie(es,3);var Vg=void 0,nu=void 0,fT=Yc,UG=cT,Qc=Pg,_T=au,Ng=0,ts=fT.m,vT=8,gT=s(128,P);r:for(;B(gT,0,7,UG,19);){if(Ie(ts,1)){var jG=2+2*Ie(ts,3);if((Vg=2+Ie(ts,jG))>Qc)break r}else Vg=Qc;for(nu=0;nu<Qc&&Vg--;){de(ts);var mT=gT[0+(127&z(ts))];te(ts,ts.u+mT.g);var gl=mT.value;if(16>gl)_T[nu++]=gl,0!=gl&&(vT=gl);else{var qG=16==gl,CT=gl-16,YG=gG[CT],bT=Ie(ts,vG[CT])+YG;if(nu+bT>Qc)break r;for(var XG=qG?vT:0;0<bT--;)_T[nu++]=XG}}Ng=1;break r}Ng||(fT.a=3),Xc=Ng}(Xc=Xc&&!es.h)&&(Bg=B(zG,WG,8,au,Pg)),Xc&&0!=Bg?Jc=Bg:(Yc.a=3,Jc=0)}if(0==Jc)break i;if(jc&&1==mG[yt]&&(jc=0==Uc[Di].g),dT+=Uc[Di].g,Di+=Jc,3>=yt){var su,Fg=ru[0];for(su=1;su<Ci;++su)ru[su]>Fg&&(Fg=ru[su]);uT+=Fg}}if(va.nd=jc,va.Qb=0,jc&&(va.qb=(_l[3][vl[3]+0].value<<24|_l[1][vl[1]+0].value<<16|_l[2][vl[2]+0].value)>>>0,0==dT&&256>_l[0][vl[0]+0].value&&(va.Qb=1,va.qb+=_l[0][vl[0]+0].value<<8)),va.jc=!va.Qb&&6>uT,va.jc){var ep,Sn=va;for(ep=0;ep<wr;++ep){var is=ep,rs=Sn.pd[is],tp=Sn.G[0][Sn.H[0]+is];256<=tp.value?(rs.g=tp.g+256,rs.value=tp.value):(rs.g=0,rs.value=0,is>>=Bi(tp,8,rs),is>>=Bi(Sn.G[1][Sn.H[1]+is],16,rs),is>>=Bi(Sn.G[2][Sn.H[2]+is],0,rs),Bi(Sn.G[3][Sn.H[3]+is],24,rs))}}}zi.vc=ji,zi.Wb=or,zi.Ya=Gc,zi.yc=Lg,ti=1;break t}ti=0}if(!(A=ti)){S.a=3;break e}if(0<ve){if(H.ua=1<<ve,!ht(H.Wa,ve)){S.a=1,A=0;break e}}else H.ua=0;var kg=S,wT=O,JG=R,Mg=kg.s,Hg=Mg.xc;if(kg.c=wT,kg.i=JG,Mg.md=tt(wT,Hg),Mg.wc=0==Hg?-1:(1<<Hg)-1,C){S.xb=DG;break e}if(null==(ie=n(O*R))){S.a=1,A=0;break e}A=(A=oa(S,ie,0,O,R,R,null))&&!L.h;break e}return A?(null!=I?I[0]=ie:(e(null==ie),e(C)),S.$=0,C||$a(H)):$a(H),A}function Hs(h,_){var C=h.c*h.i,S=C+_+16*_;return e(h.c<=_),h.V=n(S),null==h.V?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+C+_,1)}function Ko(h,_){var C=h.C,S=_-C,I=h.V,A=h.Ba+h.c*C;for(e(_<=h.l.o);0<S;){var O=16<S?16:S,R=h.l.ma,L=h.l.width,H=L*O,ie=R.ca,ve=R.tb+L*C,ge=h.Ta,se=h.Ua;Dr(h,O,I,A),z1(ge,se,ie,ve,H),na(R,C,C+O,ie,ve,L),S-=O,I+=O*h.c,C+=O}e(C==_),h.C=h.Ma=_}function Go(){this.ub=this.yd=this.td=this.Rb=0}function Uo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function jo(){this.Fb=this.Bb=this.Cb=0,this.Zb=n(4),this.Lb=n(4)}function _c(){var h;this.Yb=(function _(C,S,I){for(var A=I[S],O=0;O<A&&(C.push(I.length>S+1?[]:0),!(I.length<S+1));O++)_(C[O],S+1,I)}(h=[],0,[3,11]),h)}function Xv(){this.jb=n(3),this.Wc=o([4,8],_c),this.Xc=o([4,17],_c)}function Jv(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new n(4),this.od=new n(4)}function qo(){this.ld=this.La=this.dd=this.tc=0}function vc(){this.Na=this.la=0}function Qv(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ld(){this.ad=n(384),this.Za=0,this.Ob=n(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function eg(){this.uc=this.M=this.Nb=0,this.wa=Array(new qo),this.Y=0,this.ya=Array(new Ld),this.aa=0,this.l=new Yo}function gc(){this.y=n(16),this.f=n(8),this.ea=n(8)}function tg(){this.cb=this.a=0,this.sc="",this.m=new Me,this.Od=new Go,this.Kc=new Uo,this.ed=new Jv,this.Qa=new jo,this.Ic=this.$c=this.Aa=0,this.D=new eg,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,Me),this.ia=0,this.pb=s(4,Qv),this.Pa=new Xv,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new gc),this.Hd=0,this.rb=Array(new vc),this.sb=0,this.wa=Array(new qo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ld),this.L=this.aa=0,this.gd=o([4,2],qo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ig(){var h=new tg;return null!=h&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,tu||(tu=bc)),h}function Ei(h,_,C){return 0==h.a&&(h.a=_,h.sc=C,h.cb=0),0}function mc(h,_,C){return 3<=C&&157==h[_+0]&&1==h[_+1]&&42==h[_+2]}function Cc(h,_){if(null==h)return 0;if(h.a=0,h.sc="OK",null==_)return Ei(h,2,"null VP8Io passed to VP8GetHeaders()");var C=_.data,S=_.w,I=_.ha;if(4>I)return Ei(h,7,"Truncated header.");var A=C[S+0]|C[S+1]<<8|C[S+2]<<16,O=h.Od;if(O.Rb=!(1&A),O.td=A>>1&7,O.yd=A>>4&1,O.ub=A>>5,3<O.td)return Ei(h,3,"Incorrect keyframe parameters.");if(!O.yd)return Ei(h,4,"Frame not displayable.");S+=3,I-=3;var R=h.Kc;if(O.Rb){if(7>I)return Ei(h,7,"cannot parse picture header");if(!mc(C,S,I))return Ei(h,3,"Bad code word");R.c=16383&(C[S+4]<<8|C[S+3]),R.Td=C[S+4]>>6,R.i=16383&(C[S+6]<<8|C[S+5]),R.Ud=C[S+6]>>6,S+=7,I-=7,h.za=R.c+15>>4,h.Ub=R.i+15>>4,_.width=R.c,_.height=R.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,a((A=h.Pa).jb,0,255,A.jb.length),e(null!=(A=h.Qa)),A.Cb=0,A.Bb=0,A.Fb=1,a(A.Zb,0,0,A.Zb.length),a(A.Lb,0,0,A.Lb)}if(O.ub>I)return Ei(h,7,"bad partition length");me(A=h.m,C,S,O.ub),S+=O.ub,I-=O.ub,O.Rb&&(R.Ld=we(A),R.Kd=we(A)),R=h.Qa;var L,H=h.Pa;if(e(null!=A),e(null!=R),R.Cb=we(A),R.Cb){if(R.Bb=we(A),we(A)){for(R.Fb=we(A),L=0;4>L;++L)R.Zb[L]=we(A)?xe(A,7):0;for(L=0;4>L;++L)R.Lb[L]=we(A)?xe(A,6):0}if(R.Bb)for(L=0;3>L;++L)H.jb[L]=we(A)?pe(A,8):255}else R.Bb=0;if(A.Ka)return Ei(h,3,"cannot parse segment header");if((R=h.ed).zd=we(A),R.Tb=pe(A,6),R.wb=pe(A,3),R.Pc=we(A),R.Pc&&we(A)){for(H=0;4>H;++H)we(A)&&(R.vd[H]=xe(A,6));for(H=0;4>H;++H)we(A)&&(R.od[H]=xe(A,6))}if(h.L=0==R.Tb?0:R.zd?1:2,A.Ka)return Ei(h,3,"cannot parse filter header");var ie=I;if(I=L=S,S=L+ie,R=ie,h.Xb=(1<<pe(h.m,2))-1,ie<3*(H=h.Xb))C=7;else{for(L+=3*H,R-=3*H,ie=0;ie<H;++ie){var ve=C[I+0]|C[I+1]<<8|C[I+2]<<16;ve>R&&(ve=R),me(h.Jc[+ie],C,L,ve),L+=ve,R-=ve,I+=3}me(h.Jc[+H],C,L,R),C=L<S?0:5}if(0!=C)return Ei(h,C,"cannot parse partitions");for(C=pe(L=h.m,7),I=we(L)?xe(L,4):0,S=we(L)?xe(L,4):0,R=we(L)?xe(L,4):0,H=we(L)?xe(L,4):0,L=we(L)?xe(L,4):0,ie=h.Qa,ve=0;4>ve;++ve){if(ie.Cb){var ge=ie.Zb[ve];ie.Fb||(ge+=C)}else{if(0<ve){h.pb[ve]=h.pb[0];continue}ge=C}var se=h.pb[ve];se.Sc[0]=Dg[Or(ge+I,127)],se.Sc[1]=Og[Or(ge+0,127)],se.Eb[0]=2*Dg[Or(ge+S,127)],se.Eb[1]=101581*Og[Or(ge+R,127)]>>16,8>se.Eb[1]&&(se.Eb[1]=8),se.Qc[0]=Dg[Or(ge+H,117)],se.Qc[1]=Og[Or(ge+L,127)],se.lc=ge+L}if(!O.Rb)return Ei(h,4,"Not a key frame.");for(we(A),O=h.Pa,C=0;4>C;++C){for(I=0;8>I;++I)for(S=0;3>S;++S)for(R=0;11>R;++R)H=Se(A,TG[C][I][S][R])?pe(A,8):EG[C][I][S][R],O.Wc[C][I].Yb[S][R]=H;for(I=0;17>I;++I)O.Xc[C][I]=O.Wc[C][AG[I]]}return h.kc=we(A),h.kc&&(h.Bd=pe(A,8)),h.cb=1}function bc(h,_,C,S,I,A,O){var R=_[I].Yb[C];for(C=0;16>I;++I){if(!Se(h,R[C+0]))return I;for(;!Se(h,R[C+1]);)if(R=_[++I].Yb[0],C=0,16==I)return 16;var L=_[I+1].Yb;if(Se(h,R[C+2])){var H=h,ie=0;if(Se(H,(ge=R)[(ve=C)+3]))if(Se(H,ge[ve+6])){for(R=0,ve=2*(ie=Se(H,ge[ve+8]))+(ge=Se(H,ge[ve+9+ie])),ie=0,ge=yG[ve];ge[R];++R)ie+=ie+Se(H,ge[R]);ie+=3+(8<<ve)}else Se(H,ge[ve+7])?(ie=7+2*Se(H,165),ie+=Se(H,145)):ie=5+Se(H,159);else ie=Se(H,ge[ve+4])?3+Se(H,ge[ve+5]):2;R=L[2]}else ie=1,R=L[1];L=O+xG[I],0>(H=h).b&&Ce(H);var ve,ge=H.b,se=(ve=H.Ca>>1)-(H.I>>ge)>>31;--H.b,H.Ca+=se,H.Ca|=1,H.I-=(ve+1&se)<<ge,A[L]=((ie^se)-se)*S[(0<I)+0]}return 16}function Pd(h){var _=h.rb[h.sb-1];_.la=0,_.Na=0,a(h.zc,0,0,h.zc.length),h.ja=0}function la(h,_,C,S,I){h[_+C+32*S]=-256&(I=h[_+C+32*S]+(I>>3))?0>I?0:255:I}function Xo(h,_,C,S,I,A){la(h,_,0,C,S+I),la(h,_,1,C,S+A),la(h,_,2,C,S-A),la(h,_,3,C,S-I)}function br(h){return(20091*h>>16)+h}function Bd(h,_,C,S){var I,A=0,O=n(16);for(I=0;4>I;++I){var R=h[_+0]+h[_+8],L=h[_+0]-h[_+8],H=(35468*h[_+4]>>16)-br(h[_+12]),ie=br(h[_+4])+(35468*h[_+12]>>16);O[A+0]=R+ie,O[A+1]=L+H,O[A+2]=L-H,O[A+3]=R-ie,A+=4,_++}for(I=A=0;4>I;++I)R=(h=O[A+0]+4)+O[A+8],L=h-O[A+8],H=(35468*O[A+4]>>16)-br(O[A+12]),la(C,S,0,0,R+(ie=br(O[A+4])+(35468*O[A+12]>>16))),la(C,S,1,0,L+H),la(C,S,2,0,L-H),la(C,S,3,0,R-ie),A++,S+=32}function wc(h,_,C,S){var I=h[_+0]+4,A=35468*h[_+4]>>16,O=br(h[_+4]),R=35468*h[_+1]>>16;Xo(C,S,0,I+O,h=br(h[_+1]),R),Xo(C,S,1,I+A,h,R),Xo(C,S,2,I-A,h,R),Xo(C,S,3,I-O,h,R)}function ag(h,_,C,S,I){Bd(h,_,C,S),I&&Bd(h,_+16,C,S+4)}function Sc(h,_,C,S){hl(h,_+0,C,S,1),hl(h,_+32,C,S+128,1)}function ng(h,_,C,S){var I;for(h=h[_+0]+4,I=0;4>I;++I)for(_=0;4>_;++_)la(C,S,_,I,h)}function yc(h,_,C,S){h[_+0]&&fa(h,_+0,C,S),h[_+16]&&fa(h,_+16,C,S+4),h[_+32]&&fa(h,_+32,C,S+128),h[_+48]&&fa(h,_+48,C,S+128+4)}function sg(h,_,C,S){var I,A=n(16);for(I=0;4>I;++I){var O=h[_+0+I]+h[_+12+I],R=h[_+4+I]+h[_+8+I],L=h[_+4+I]-h[_+8+I],H=h[_+0+I]-h[_+12+I];A[0+I]=O+R,A[8+I]=O-R,A[4+I]=H+L,A[12+I]=H-L}for(I=0;4>I;++I)O=(h=A[0+4*I]+3)+A[3+4*I],L=A[1+4*I]-A[2+4*I],H=h-A[3+4*I],C[S+0]=O+(R=A[1+4*I]+A[2+4*I])>>3,C[S+16]=H+L>>3,C[S+32]=O-R>>3,C[S+48]=H-L>>3,S+=64}function Vd(h,_,C){var S,I=_-32,A=Rr,O=255-h[I-1];for(S=0;S<C;++S){var R,L=A,H=O+h[_-1];for(R=0;R<C;++R)h[_+R]=L[H+h[I+R]];_+=32}}function og(h,_){Vd(h,_,4)}function lg(h,_){Vd(h,_,8)}function dg(h,_){Vd(h,_,16)}function pn(h,_){var C;for(C=0;16>C;++C)r(h,_+32*C,h,_-32,16)}function Jo(h,_){var C;for(C=16;0<C;--C)a(h,_,h[_-1],16),_+=32}function Qo(h,_,C){var S;for(S=0;16>S;++S)a(_,C+32*S,h,16)}function xc(h,_){var C,S=16;for(C=0;16>C;++C)S+=h[_-1+32*C]+h[_+C-32];Qo(S>>5,h,_)}function ir(h,_){var C,S=8;for(C=0;16>C;++C)S+=h[_-1+32*C];Qo(S>>4,h,_)}function ug(h,_){var C,S=8;for(C=0;16>C;++C)S+=h[_+C-32];Qo(S>>4,h,_)}function Ec(h,_){Qo(128,h,_)}function gt(h,_,C){return h+2*_+C+2>>2}function hg(h,_){var C,S=_-32;for(S=new Uint8Array([gt(h[S-1],h[S+0],h[S+1]),gt(h[S+0],h[S+1],h[S+2]),gt(h[S+1],h[S+2],h[S+3]),gt(h[S+2],h[S+3],h[S+4])]),C=0;4>C;++C)r(h,_+32*C,S,0,S.length)}function cg(h,_){var C=h[_-1],S=h[_-1+32],I=h[_-1+64],A=h[_-1+96];ke(h,_+0,16843009*gt(h[_-1-32],C,S)),ke(h,_+32,16843009*gt(C,S,I)),ke(h,_+64,16843009*gt(S,I,A)),ke(h,_+96,16843009*gt(I,A,A))}function Ga(h,_){var C,S=4;for(C=0;4>C;++C)S+=h[_+C-32]+h[_-1+32*C];for(S>>=3,C=0;4>C;++C)a(h,_+32*C,S,4)}function Ic(h,_){var C=h[_-1+0],S=h[_-1+32],I=h[_-1+64],A=h[_-1-32],O=h[_+0-32],R=h[_+1-32],L=h[_+2-32],H=h[_+3-32];h[_+0+96]=gt(S,I,h[_-1+96]),h[_+1+96]=h[_+0+64]=gt(C,S,I),h[_+2+96]=h[_+1+64]=h[_+0+32]=gt(A,C,S),h[_+3+96]=h[_+2+64]=h[_+1+32]=h[_+0+0]=gt(O,A,C),h[_+3+64]=h[_+2+32]=h[_+1+0]=gt(R,O,A),h[_+3+32]=h[_+2+0]=gt(L,R,O),h[_+3+0]=gt(H,L,R)}function Tc(h,_){var C=h[_+1-32],S=h[_+2-32],I=h[_+3-32],A=h[_+4-32],O=h[_+5-32],R=h[_+6-32],L=h[_+7-32];h[_+0+0]=gt(h[_+0-32],C,S),h[_+1+0]=h[_+0+32]=gt(C,S,I),h[_+2+0]=h[_+1+32]=h[_+0+64]=gt(S,I,A),h[_+3+0]=h[_+2+32]=h[_+1+64]=h[_+0+96]=gt(I,A,O),h[_+3+32]=h[_+2+64]=h[_+1+96]=gt(A,O,R),h[_+3+64]=h[_+2+96]=gt(O,R,L),h[_+3+96]=gt(R,L,L)}function el(h,_){var C=h[_-1+0],S=h[_-1+32],I=h[_-1+64],A=h[_-1-32],O=h[_+0-32],R=h[_+1-32],L=h[_+2-32],H=h[_+3-32];h[_+0+0]=h[_+1+64]=A+O+1>>1,h[_+1+0]=h[_+2+64]=O+R+1>>1,h[_+2+0]=h[_+3+64]=R+L+1>>1,h[_+3+0]=L+H+1>>1,h[_+0+96]=gt(I,S,C),h[_+0+64]=gt(S,C,A),h[_+0+32]=h[_+1+96]=gt(C,A,O),h[_+1+32]=h[_+2+96]=gt(A,O,R),h[_+2+32]=h[_+3+96]=gt(O,R,L),h[_+3+32]=gt(R,L,H)}function Nd(h,_){var C=h[_+0-32],S=h[_+1-32],I=h[_+2-32],A=h[_+3-32],O=h[_+4-32],R=h[_+5-32],L=h[_+6-32],H=h[_+7-32];h[_+0+0]=C+S+1>>1,h[_+1+0]=h[_+0+64]=S+I+1>>1,h[_+2+0]=h[_+1+64]=I+A+1>>1,h[_+3+0]=h[_+2+64]=A+O+1>>1,h[_+0+32]=gt(C,S,I),h[_+1+32]=h[_+0+96]=gt(S,I,A),h[_+2+32]=h[_+1+96]=gt(I,A,O),h[_+3+32]=h[_+2+96]=gt(A,O,R),h[_+3+64]=gt(O,R,L),h[_+3+96]=gt(R,L,H)}function pg(h,_){var C=h[_-1+0],S=h[_-1+32],I=h[_-1+64],A=h[_-1+96];h[_+0+0]=C+S+1>>1,h[_+2+0]=h[_+0+32]=S+I+1>>1,h[_+2+32]=h[_+0+64]=I+A+1>>1,h[_+1+0]=gt(C,S,I),h[_+3+0]=h[_+1+32]=gt(S,I,A),h[_+3+32]=h[_+1+64]=gt(I,A,A),h[_+3+64]=h[_+2+64]=h[_+0+96]=h[_+1+96]=h[_+2+96]=h[_+3+96]=A}function fg(h,_){var C=h[_-1+0],S=h[_-1+32],I=h[_-1+64],A=h[_-1+96],O=h[_-1-32],R=h[_+0-32],L=h[_+1-32],H=h[_+2-32];h[_+0+0]=h[_+2+32]=C+O+1>>1,h[_+0+32]=h[_+2+64]=S+C+1>>1,h[_+0+64]=h[_+2+96]=I+S+1>>1,h[_+0+96]=A+I+1>>1,h[_+3+0]=gt(R,L,H),h[_+2+0]=gt(O,R,L),h[_+1+0]=h[_+3+32]=gt(C,O,R),h[_+1+32]=h[_+3+64]=gt(S,C,O),h[_+1+64]=h[_+3+96]=gt(I,S,C),h[_+1+96]=gt(A,I,S)}function _g(h,_){var C;for(C=0;8>C;++C)r(h,_+32*C,h,_-32,8)}function Fd(h,_){var C;for(C=0;8>C;++C)a(h,_,h[_-1],8),_+=32}function Zs(h,_,C){var S;for(S=0;8>S;++S)a(_,C+32*S,h,8)}function zn(h,_){var C,S=8;for(C=0;8>C;++C)S+=h[_+C-32]+h[_-1+32*C];Zs(S>>4,h,_)}function vg(h,_){var C,S=4;for(C=0;8>C;++C)S+=h[_+C-32];Zs(S>>3,h,_)}function zs(h,_){var C,S=4;for(C=0;8>C;++C)S+=h[_-1+32*C];Zs(S>>3,h,_)}function kd(h,_){Zs(128,h,_)}function tl(h,_,C){var S=h[_-C],I=h[_+0],A=3*(I-S)+xg[1020+h[_-2*C]-h[_+C]],O=Fc[112+(A+4>>3)];h[_-C]=Rr[255+S+Fc[112+(A+3>>3)]],h[_+0]=Rr[255+I-O]}function Ac(h,_,C,S){return $r[255+h[_-2*C]-h[_-C]]>S||$r[255+h[_+C]-h[_+0]]>S}function Dc(h,_,C,S){return 4*$r[255+h[_-C]-h[_+0]]+$r[255+h[_-2*C]-h[_+C]]<=S}function Oc(h,_,C,S,I){var A=h[_-3*C],O=h[_-2*C],R=h[_-C],L=h[_+0],H=h[_+C],ie=h[_+2*C];return 4*$r[255+R-L]+$r[255+O-H]>S?0:$r[255+h[_-4*C]-A]<=I&&$r[255+A-O]<=I&&$r[255+O-R]<=I&&$r[255+h[_+3*C]-ie]<=I&&$r[255+ie-H]<=I&&$r[255+H-L]<=I}function Rc(h,_,C,S){var I=2*S+1;for(S=0;16>S;++S)Dc(h,_+S,C,I)&&tl(h,_+S,C)}function fn(h,_,C,S){var I=2*S+1;for(S=0;16>S;++S)Dc(h,_+S*C,1,I)&&tl(h,_+S*C,1)}function Wn(h,_,C,S){var I;for(I=3;0<I;--I)Rc(h,_+=4*C,C,S)}function gg(h,_,C,S){var I;for(I=3;0<I;--I)fn(h,_+=4,C,S)}function $n(h,_,C,S,I,A,O,R){for(A=2*A+1;0<I--;){if(Oc(h,_,C,A,O))if(Ac(h,_,C,R))tl(h,_,C);else{var L=h,H=_,ie=C,ve=L[H-2*ie],ge=L[H-ie],se=L[H+0],Pe=L[H+ie],Ee=L[H+2*ie],re=27*(Re=xg[1020+3*(se-ge)+xg[1020+ve-Pe]])+63>>7,ne=18*Re+63>>7,Re=9*Re+63>>7;L[H-3*ie]=Rr[255+L[H-3*ie]+Re],L[H-2*ie]=Rr[255+ve+ne],L[H-ie]=Rr[255+ge+re],L[H+0]=Rr[255+se-re],L[H+ie]=Rr[255+Pe-ne],L[H+2*ie]=Rr[255+Ee-Re]}_+=S}}function da(h,_,C,S,I,A,O,R){for(A=2*A+1;0<I--;){if(Oc(h,_,C,A,O))if(Ac(h,_,C,R))tl(h,_,C);else{var L=h,H=_,ie=C,ve=L[H-ie],ge=L[H+0],se=L[H+ie],Pe=Fc[112+(4+(Ee=3*(ge-ve))>>3)],Ee=Fc[112+(Ee+3>>3)],re=Pe+1>>1;L[H-2*ie]=Rr[255+L[H-2*ie]+re],L[H-ie]=Rr[255+ve+Ee],L[H+0]=Rr[255+ge-Pe],L[H+ie]=Rr[255+se-re]}_+=S}}function Md(h,_,C,S,I,A){$n(h,_,C,1,16,S,I,A)}function Ws(h,_,C,S,I,A){$n(h,_,1,C,16,S,I,A)}function mg(h,_,C,S,I,A){var O;for(O=3;0<O;--O)da(h,_+=4*C,C,1,16,S,I,A)}function il(h,_,C,S,I,A){var O;for(O=3;0<O;--O)da(h,_+=4,1,C,16,S,I,A)}function Cg(h,_,C,S,I,A,O,R){$n(h,_,I,1,8,A,O,R),$n(C,S,I,1,8,A,O,R)}function Hd(h,_,C,S,I,A,O,R){$n(h,_,1,I,8,A,O,R),$n(C,S,1,I,8,A,O,R)}function Zd(h,_,C,S,I,A,O,R){da(h,_+4*I,I,1,8,A,O,R),da(C,S+4*I,I,1,8,A,O,R)}function Lc(h,_,C,S,I,A,O,R){da(h,_+4,1,I,8,A,O,R),da(C,S+4,1,I,8,A,O,R)}function rl(){this.ba=new ra,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new gi,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function zd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Pc(){this.ua=0,this.Wa=new G,this.vb=new G,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new P}function bg(){this.xb=this.a=0,this.l=new Yo,this.ca=new ra,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Pc,this.ab=0,this.gc=s(4,Wd),this.Oc=0}function al(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Yo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function $s(h,_,C,S,I,A,O){for(h=null==h?0:h[_+0],_=0;_<O;++_)I[A+_]=h+C[S+_]&255,h=I[A+_]}function $d(h,_,C,S,I,A,O){var R;if(null==h)$s(null,null,C,S,I,A,O);else for(R=0;R<O;++R)I[A+R]=h[_+R]+C[S+R]&255}function Kn(h,_,C,S,I,A,O){if(null==h)$s(null,null,C,S,I,A,O);else{var R,L=h[_+0],H=L,ie=L;for(R=0;R<O;++R)H=ie+(L=h[_+R])-H,ie=C[S+R]+(-256&H?0>H?0:255:H)&255,H=L,I[A+R]=ie}}function Kd(h,_,C,S){var I=_.width,A=_.o;if(e(null!=h&&null!=_),0>C||0>=S||C+S>A)return null;if(!h.Cc){if(null==h.ga){var O;if(h.ga=new al,(O=null==h.ga)||(O=_.width*_.o,e(0==h.Gb.length),h.Gb=n(O),h.Uc=0,null==h.Gb?O=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,O=1),O=!O),!O){var R=h.Fa,L=h.P,H=h.qc,ie=h.mb,ve=h.nb,ge=L+1,se=H-1,Pe=(O=h.ga).l;if(e(null!=R&&null!=ie&&null!=_),Jn[0]=null,Jn[1]=$s,Jn[2]=$d,Jn[3]=Kn,O.ca=ie,O.tb=ve,O.c=_.width,O.i=_.height,e(0<O.c&&0<O.i),1>=H)_=0;else if(O.$a=R[L+0]>>0&3,O.Z=R[L+0]>>2&3,O.Lc=R[L+0]>>4&3,L=R[L+0]>>6&3,0>O.$a||1<O.$a||4<=O.Z||1<O.Lc||L)_=0;else if(Pe.put=Za,Pe.ac=Ui,Pe.bc=za,Pe.ma=O,Pe.width=_.width,Pe.height=_.height,Pe.Da=_.Da,Pe.v=_.v,Pe.va=_.va,Pe.j=_.j,Pe.o=_.o,O.$a)e:{e(1==O.$a),_=Zr();t:for(;;){if(null==_){_=0;break e}if(e(null!=O),O.mc=_,_.c=O.c,_.i=O.i,_.l=O.l,_.l.ma=O,_.l.width=O.c,_.l.height=O.i,_.a=0,_e(_.m,R,ge,se),!Ka(O.c,O.i,1,_,null)||(1==_.ab&&3==_.gc[0].hc&&cn(_.s)?(O.ic=1,R=_.c*_.i,_.Ta=null,_.Ua=0,_.V=n(R),_.Ba=0,null==_.V?(_.a=1,_=0):_=1):(O.ic=0,_=Hs(_,O.c)),!_))break t;_=1;break e}O.mc=null,_=0}else _=se>=O.c*O.i;O=!_}if(O)return null;1!=h.ga.Lc?h.Ga=0:S=A-C}e(null!=h.ga),e(C+S<=A);e:{if(_=(R=h.ga).c,A=R.l.o,0==R.$a){if(ge=h.rc,se=h.Vc,Pe=h.Fa,H=h.mb,ie=h.nb+C*_,e((L=h.P+1+C*_)<=h.P+h.qc),0!=R.Z)for(e(null!=Jn[R.Z]),O=0;O<S;++O)Jn[R.Z](ge,se,Pe,L,H,ie,_),ge=H,se=ie,ie+=_,L+=_;else for(O=0;O<S;++O)r(H,ie,Pe,L,_),ge=H,se=ie,ie+=_,L+=_;h.rc=ge,h.Vc=se}else{if(e(null!=R.mc),_=C+S,e(null!=(O=R.mc)),e(_<=O.i),O.C>=_)_=1;else if(R.ic||ue(),R.ic){R=O.V,ge=O.Ba;var Ee=O.i,re=(Pe=1,L=O.$/(se=O.c),H=O.$%se,ie=O.m,ve=O.s,O.$),ne=se*Ee,Re=se*_,Be=ve.wc,Le=re<Re?Ti(ve,H,L):null;e(re<=ne),e(_<=Ee),e(cn(ve));t:for(;;){for(;!ie.h&&re<Re;){if(H&Be||(Le=Ti(ve,H,L)),e(null!=Le),de(ie),256>(Ee=Cr(Le.G[0],Le.H[0],ie)))R[ge+re]=Ee,++re,++H>=se&&(H=0,++L<=_&&!(L%16)&&sa(O,L));else{if(!(280>Ee)){Pe=0;break t}Ee=aa(Ee-256,ie);var Xe,ze=Cr(Le.G[4],Le.H[4],ie);if(de(ie),!(re>=(ze=Wa(se,ze=aa(ze,ie)))&&ne-re>=Ee)){Pe=0;break t}for(Xe=0;Xe<Ee;++Xe)R[ge+re+Xe]=R[ge+re+Xe-ze];for(re+=Ee,H+=Ee;H>=se;)H-=se,++L<=_&&!(L%16)&&sa(O,L);re<Re&&H&Be&&(Le=Ti(ve,H,L))}e(ie.h==K(ie))}sa(O,L>_?_:L);break t}!Pe||ie.h&&re<ne?(Pe=0,O.a=ie.h?5:3):O.$=re,_=Pe}else _=oa(O,O.V,O.Ba,O.c,O.i,_,Ko);if(!_){S=0;break e}}C+S>=A&&(h.Cc=1),S=1}if(!S)return null;if(h.Cc&&(null!=(S=h.ga)&&(S.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+C*I}function v(h,_,C,S,I,A){for(;0<I--;){var O,R=h,L=_+(C?1:0),H=h,ie=_+(C?0:3);for(O=0;O<S;++O){var ve=H[ie+4*O];255!=ve&&(R[L+4*O+0]=R[L+4*O+0]*(ve*=32897)>>23,R[L+4*O+1]=R[L+4*O+1]*ve>>23,R[L+4*O+2]=R[L+4*O+2]*ve>>23)}_+=A}}function T(h,_,C,S,I){for(;0<S--;){var A;for(A=0;A<C;++A){var O=h[_+2*A+0],R=15&(H=h[_+2*A+1]),L=4369*R,H=(240&H|H>>4)*L>>16;h[_+2*A+0]=(240&O|O>>4)*L>>16&240|(15&O|O<<4)*L>>16>>4&15,h[_+2*A+1]=240&H|R}_+=I}}function W(h,_,C,S,I,A,O,R){var L,H,ie=255;for(H=0;H<I;++H){for(L=0;L<S;++L){var ve=h[_+L];A[O+4*L]=ve,ie&=ve}_+=C,O+=R}return 255!=ie}function Q(h,_,C,S,I){var A;for(A=0;A<I;++A)C[S+A]=h[_+A]>>8}function ue(){Yn=v,pl=T,Nc=W,z1=Q}function De(h,_,C){M[h]=function(S,I,A,O,R,L,H,ie,ve,ge,se,Pe,Ee,re,ne,Re,Be){var Le,Xe=Be-1>>1,ze=R[L+0]|H[ie+0]<<16,ot=ve[ge+0]|se[Pe+0]<<16;e(null!=S);var Ke=3*ze+ot+131074>>2;for(_(S[I+0],255&Ke,Ke>>16,Ee,re),null!=A&&_(A[O+0],255&(Ke=3*ot+ze+131074>>2),Ke>>16,ne,Re),Le=1;Le<=Xe;++Le){var Ht=R[L+Le]|H[ie+Le]<<16,$t=ve[ge+Le]|se[Pe+Le]<<16,kt=ze+Ht+ot+$t+524296,Lt=kt+2*(Ht+ot)>>3;Ke=Lt+ze>>1,ze=(kt=kt+2*(ze+$t)>>3)+Ht>>1,_(S[I+2*Le-1],255&Ke,Ke>>16,Ee,re+(2*Le-1)*C),_(S[I+2*Le-0],255&ze,ze>>16,Ee,re+(2*Le-0)*C),null!=A&&(ze=Lt+$t>>1,_(A[O+2*Le-1],255&(Ke=kt+ot>>1),Ke>>16,ne,Re+(2*Le-1)*C),_(A[O+2*Le+0],255&ze,ze>>16,ne,Re+(2*Le+0)*C)),ze=Ht,ot=$t}1&Be||(_(S[I+Be-1],255&(Ke=3*ze+ot+131074>>2),Ke>>16,Ee,re+(Be-1)*C),null!=A&&_(A[O+Be-1],255&(Ke=3*ot+ze+131074>>2),Ke>>16,ne,Re+(Be-1)*C))}}function Ve(){Kr[kc]=OG,Kr[Mc]=Q1,Kr[j1]=RG,Kr[Hc]=eT,Kr[Zc]=tT,Kr[Eg]=iT,Kr[q1]=LG,Kr[Ig]=Q1,Kr[Tg]=eT,Kr[zc]=tT,Kr[Ag]=iT}function Ye(h){return h&~PG?0>h?0:255:h>>rT}function st(h,_){return Ye((19077*h>>8)+(26149*_>>8)-14234)}function St(h,_,C){return Ye((19077*h>>8)-(6419*_>>8)-(13320*C>>8)+8708)}function Et(h,_){return Ye((19077*h>>8)+(33050*_>>8)-17685)}function Vt(h,_,C,S,I){S[I+0]=st(h,C),S[I+1]=St(h,_,C),S[I+2]=Et(h,_)}function ci(h,_,C,S,I){S[I+0]=Et(h,_),S[I+1]=St(h,_,C),S[I+2]=st(h,C)}function mi(h,_,C,S,I){var A=St(h,_,C);_=A<<3&224|Et(h,_)>>3,S[I+0]=248&st(h,C)|A>>5,S[I+1]=_}function Ai(h,_,C,S,I){var A=240&Et(h,_)|15;S[I+0]=240&st(h,C)|St(h,_,C)>>4,S[I+1]=A}function rr(h,_,C,S,I){S[I+0]=255,Vt(h,_,C,S,I+1)}function Zi(h,_,C,S,I){ci(h,_,C,S,I),S[I+3]=255}function ua(h,_,C,S,I){Vt(h,_,C,S,I),S[I+3]=255}function Or(h,_){return 0>h?0:h>_?_:h}function _n(h,_,C){M[h]=function(S,I,A,O,R,L,H,ie,ve){for(var ge=ie+(-2&ve)*C;ie!=ge;)_(S[I+0],A[O+0],R[L+0],H,ie),_(S[I+1],A[O+0],R[L+0],H,ie+C),I+=2,++O,++L,ie+=2*C;1&ve&&_(S[I+0],A[O+0],R[L+0],H,ie)}}function Bc(h,_,C){return 0==C?0==h?0==_?6:5:0==_?4:0:C}function Gd(h,_,C,S,I){switch(h>>>30){case 3:hl(_,C,S,I,0);break;case 2:Qd(_,C,S,I);break;case 1:fa(_,C,S,I)}}function Ud(h,_){var C,S,I=_.M,A=_.Nb,O=h.oc,R=h.pc+40,L=h.oc,H=h.pc+584,ie=h.oc,ve=h.pc+600;for(C=0;16>C;++C)O[R+32*C-1]=129;for(C=0;8>C;++C)L[H+32*C-1]=129,ie[ve+32*C-1]=129;for(0<I?O[R-1-32]=L[H-1-32]=ie[ve-1-32]=129:(a(O,R-32-1,127,21),a(L,H-32-1,127,9),a(ie,ve-32-1,127,9)),S=0;S<h.za;++S){var ge=_.ya[_.aa+S];if(0<S){for(C=-1;16>C;++C)r(O,R+32*C-4,O,R+32*C+12,4);for(C=-1;8>C;++C)r(L,H+32*C-4,L,H+32*C+4,4),r(ie,ve+32*C-4,ie,ve+32*C+4,4)}var se=h.Gd,Pe=h.Hd+S,Ee=ge.ad,re=ge.Hc;if(0<I&&(r(O,R-32,se[Pe].y,0,16),r(L,H-32,se[Pe].f,0,8),r(ie,ve-32,se[Pe].ea,0,8)),ge.Za){var ne=O,Re=R-32+16;for(0<I&&(S>=h.za-1?a(ne,Re,se[Pe].y[15],4):r(ne,Re,se[Pe+1].y,0,4)),C=0;4>C;C++)ne[Re+128+C]=ne[Re+256+C]=ne[Re+384+C]=ne[Re+0+C];for(C=0;16>C;++C,re<<=2)_a[ge.Ob[C]](ne=O,Re=R+nT[C]),Gd(re,Ee,16*+C,ne,Re)}else if(ne=Bc(S,I,ge.Ob[0]),Xn[ne](O,R),0!=re)for(C=0;16>C;++C,re<<=2)Gd(re,Ee,16*+C,O,R+nT[C]);for(C=ge.Gc,ne=Bc(S,I,ge.Dd),bn[ne](L,H),bn[ne](ie,ve),re=Ee,ne=L,Re=H,255&(ge=C>>0)&&(170&ge?jn(re,256,ne,Re):gn(re,256,ne,Re)),ge=ie,re=ve,255&(C>>=8)&&(170&C?jn(Ee,320,ge,re):gn(Ee,320,ge,re)),I<h.Ub-1&&(r(se[Pe].y,0,O,R+480,16),r(se[Pe].f,0,L,H+224,8),r(se[Pe].ea,0,ie,ve+224,8)),se=h.sa,Pe=h.ta+16*S+16*A*h.R,Ee=h.qa,ge=h.ra+8*S+(C=8*A*h.B),re=h.Ha,ne=h.Ia+8*S+C,C=0;16>C;++C)r(se,Pe+C*h.R,O,R+32*C,16);for(C=0;8>C;++C)r(Ee,ge+C*h.B,L,H+32*C,8),r(re,ne+C*h.B,ie,ve+32*C,8)}}function nl(h,_,C,S,I,A,O,R,L){var H=[0],ie=[0],ve=0,ge=null!=L?L.kd:0,se=L??new zd;if(null==h||12>C)return 7;se.data=h,se.w=_,se.ha=C,_=[_],C=[C],se.gb=[se.gb];e:{var Pe=_,Ee=C,re=se.gb;if(e(null!=h),e(null!=Ee),e(null!=re),re[0]=0,12<=Ee[0]&&!t(h,Pe[0],"RIFF")){if(t(h,Pe[0]+8,"WEBP")){re=3;break e}var ne=Je(h,Pe[0]+4);if(12>ne||4294967286<ne){re=3;break e}if(ge&&ne>Ee[0]-8){re=7;break e}re[0]=ne,Pe[0]+=12,Ee[0]-=12}re=0}if(0!=re)return re;for(ne=0<se.gb[0],C=C[0];;){e:{var Re=h;Ee=_,re=C;var Be=H,Le=ie,Xe=Pe=[0];if((Ke=ve=[ve])[0]=0,8>re[0])re=7;else{if(!t(Re,Ee[0],"VP8X")){if(10!=Je(Re,Ee[0]+4)){re=3;break e}if(18>re[0]){re=7;break e}var ze=Je(Re,Ee[0]+8),ot=1+qe(Re,Ee[0]+12);if(2147483648<=ot*(Re=1+qe(Re,Ee[0]+15))){re=3;break e}null!=Xe&&(Xe[0]=ze),null!=Be&&(Be[0]=ot),null!=Le&&(Le[0]=Re),Ee[0]+=18,re[0]-=18,Ke[0]=1}re=0}}if(ve=ve[0],0!=re)return re;if(Ee=!!(2&(Pe=Pe[0])),!ne&&ve)return 3;if(null!=A&&(A[0]=!!(16&Pe)),null!=O&&(O[0]=Ee),null!=R&&(R[0]=0),O=H[0],Pe=ie[0],ve&&Ee&&null==L){re=0;break}if(4>C){re=7;break}if(ne&&ve||!ne&&!ve&&!t(h,_[0],"ALPH")){C=[C],se.na=[se.na],se.P=[se.P],se.Sa=[se.Sa];e:{re=_,ne=C;var Ke=se.gb;Be=se.na,Le=se.P,Xe=se.Sa,ot=22,e(null!=(ze=h)),e(null!=ne),Re=re[0];var Ht=ne[0];for(e(null!=Be),e(null!=Xe),Be[0]=null,Le[0]=null,Xe[0]=0;;){if(re[0]=Re,ne[0]=Ht,8>Ht){re=7;break e}var $t=Je(ze,Re+4);if(4294967286<$t){re=3;break e}var kt=8+$t+1&-2;if(ot+=kt,0<Ke&&ot>Ke){re=3;break e}if(!t(ze,Re,"VP8 ")||!t(ze,Re,"VP8L")){re=0;break e}if(Ht[0]<kt){re=7;break e}t(ze,Re,"ALPH")||(Be[0]=ze,Le[0]=Re+8,Xe[0]=$t),Re+=kt,Ht-=kt}}if(C=C[0],se.na=se.na[0],se.P=se.P[0],se.Sa=se.Sa[0],0!=re)break}C=[C],se.Ja=[se.Ja],se.xa=[se.xa];e:if(Ke=h,re=_,ne=C,Be=se.gb[0],Le=se.Ja,Xe=se.xa,ze=re[0],Re=!t(Ke,ze,"VP8 "),ot=!t(Ke,ze,"VP8L"),e(null!=Ke),e(null!=ne),e(null!=Le),e(null!=Xe),8>ne[0])re=7;else{if(Re||ot){if(Ke=Je(Ke,ze+4),12<=Be&&Ke>Be-12){re=3;break e}if(ge&&Ke>ne[0]-8){re=7;break e}Le[0]=Ke,re[0]+=8,ne[0]-=8,Xe[0]=ot}else Xe[0]=5<=ne[0]&&47==Ke[ze+0]&&!(Ke[ze+4]>>5),Le[0]=ne[0];re=0}if(C=C[0],se.Ja=se.Ja[0],se.xa=se.xa[0],_=_[0],0!=re)break;if(4294967286<se.Ja)return 3;if(null==R||Ee||(R[0]=se.xa?2:1),O=[O],Pe=[Pe],se.xa){if(5>C){re=7;break}R=O,ge=Pe,Ee=A,null==h||5>C?h=0:5<=C&&47==h[_+0]&&!(h[_+4]>>5)?(ne=[0],Ke=[0],Be=[0],_e(Le=new D,h,_,C),dt(Le,ne,Ke,Be)?(null!=R&&(R[0]=ne[0]),null!=ge&&(ge[0]=Ke[0]),null!=Ee&&(Ee[0]=Be[0]),h=1):h=0):h=0}else{if(10>C){re=7;break}R=Pe,null==h||10>C||!mc(h,_+3,C-3)?h=0:(ge=h[_+0]|h[_+1]<<8|h[_+2]<<16,Ee=16383&(h[_+7]<<8|h[_+6]),h=16383&(h[_+9]<<8|h[_+8]),1&ge||3<(ge>>1&7)||!(ge>>4&1)||ge>>5>=se.Ja||!Ee||!h?h=0:(O&&(O[0]=Ee),R&&(R[0]=h),h=1))}if(!h||(O=O[0],Pe=Pe[0],ve&&(H[0]!=O||ie[0]!=Pe)))return 3;null!=L&&(L[0]=se,L.offset=_-L.w,e(4294967286>_-L.w),e(L.offset==L.ha-C));break}return 0==re||7==re&&ve&&null==L?(null!=A&&(A[0]|=null!=se.na&&0<se.na.length),null!=S&&(S[0]=O),null!=I&&(I[0]=Pe),0):re}function jd(h,_,C){var S=_.width,I=_.height,A=0,O=0,R=S,L=I;if(_.Da=null!=h&&0<h.Da,_.Da&&(R=h.cd,L=h.bd,A=h.v,O=h.j,11>C||(A&=-2,O&=-2),0>A||0>O||0>=R||0>=L||A+R>S||O+L>I))return 0;if(_.v=A,_.j=O,_.va=A+R,_.o=O+L,_.U=R,_.T=L,_.da=null!=h&&0<h.da,_.da){if(!wt(R,L,C=[h.ib],A=[h.hb]))return 0;_.ib=C[0],_.hb=A[0]}return _.ob=null!=h&&h.ob,_.Kb=null==h||!h.Sd,_.da&&(_.ob=_.ib<3*S/4&&_.hb<3*I/4,_.Kb=0),1}function qd(h){if(null==h)return 2;if(11>h.S){var _=h.f.RGBA;_.fb+=(h.height-1)*_.A,_.A=-_.A}else(_=h.f.kb).O+=((h=h.height)-1)*_.fa,_.fa=-_.fa,_.N+=(h-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(h-1>>1)*_.Db,_.Db=-_.Db,null!=_.F&&(_.J+=(h-1)*_.lb,_.lb=-_.lb);return 0}function sl(h,_,C,S){if(null==S||0>=h||0>=_)return 2;if(null!=C){if(C.Da){var I=C.cd,A=C.bd,O=-2&C.v,R=-2&C.j;if(0>O||0>R||0>=I||0>=A||O+I>h||R+A>_)return 2;h=I,_=A}if(C.da){if(!wt(h,_,I=[C.ib],A=[C.hb]))return 2;h=I[0],_=A[0]}}S.width=h,S.height=_;e:{var L=S.width,H=S.height;if(h=S.S,0>=L||0>=H||!(h>=kc&&13>h))h=2;else{if(0>=S.Rd&&null==S.sd){O=A=I=_=0;var ie=(R=L*sT[h])*H;if(11>h||(A=(H+1)/2*(_=(L+1)/2),12==h&&(O=(I=L)*H)),null==(H=n(ie+2*A+O))){h=1;break e}S.sd=H,11>h?((L=S.f.RGBA).eb=H,L.fb=0,L.A=R,L.size=ie):((L=S.f.kb).y=H,L.O=0,L.fa=R,L.Fd=ie,L.f=H,L.N=0+ie,L.Ab=_,L.Cd=A,L.ea=H,L.W=0+ie+A,L.Db=_,L.Ed=A,12==h&&(L.F=H,L.J=0+ie+2*A),L.Tc=O,L.lb=I)}if(_=1,A=S.width,O=S.height,(I=S.S)>=kc&&13>I)if(11>I)h=S.f.RGBA,_&=(R=Math.abs(h.A))*(O-1)+A<=h.size,_&=R>=A*sT[I],_&=null!=h.eb;else{h=S.f.kb,R=(A+1)/2,ie=(O+1)/2,L=Math.abs(h.fa),H=Math.abs(h.Ab);var ve=Math.abs(h.Db),ge=Math.abs(h.lb);_&=L*(O-1)+A<=h.Fd,_&=H*(ie-1)+R<=h.Cd,_=(_&=ve*(ie-1)+R<=h.Ed)&L>=A&H>=R&ve>=R,_&=null!=h.y,_&=null!=h.f,_&=null!=h.ea,12==I&&(_&=ge>=A,_&=ge*(O-1)+A<=h.Tc,_&=null!=h.F)}else _=0;h=_?0:2}}return 0!=h||null!=C&&C.fd&&(h=qd(S)),h}var wr=64,ol=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ll=24,dl=32,Yd=8,Sr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ze("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(h){return h},M.Predictor2=function(h,_,C){return _[C+0]},M.Predictor3=function(h,_,C){return _[C+1]},M.Predictor4=function(h,_,C){return _[C-1]},M.Predictor5=function(h,_,C){return Ge(Ge(h,_[C+1]),_[C+0])},M.Predictor6=function(h,_,C){return Ge(h,_[C-1])},M.Predictor7=function(h,_,C){return Ge(h,_[C+0])},M.Predictor8=function(h,_,C){return Ge(_[C-1],_[C+0])},M.Predictor9=function(h,_,C){return Ge(_[C+0],_[C+1])},M.Predictor10=function(h,_,C){return Ge(Ge(h,_[C-1]),Ge(_[C+0],_[C+1]))},M.Predictor11=function(h,_,C){var S=_[C+0];return 0>=xt(S>>24&255,h>>24&255,(_=_[C-1])>>24&255)+xt(S>>16&255,h>>16&255,_>>16&255)+xt(S>>8&255,h>>8&255,_>>8&255)+xt(255&S,255&h,255&_)?S:h},M.Predictor12=function(h,_,C){var S=_[C+0];return(nt((h>>24&255)+(S>>24&255)-((_=_[C-1])>>24&255))<<24|nt((h>>16&255)+(S>>16&255)-(_>>16&255))<<16|nt((h>>8&255)+(S>>8&255)-(_>>8&255))<<8|nt((255&h)+(255&S)-(255&_)))>>>0},M.Predictor13=function(h,_,C){var S=_[C-1];return(Ct((h=Ge(h,_[C+0]))>>24&255,S>>24&255)<<24|Ct(h>>16&255,S>>16&255)<<16|Ct(h>>8&255,S>>8&255)<<8|Ct(h>>0&255,S>>0&255))>>>0};var wg=M.PredictorAdd0;M.PredictorAdd1=At,Ze("Predictor2","PredictorAdd2"),Ze("Predictor3","PredictorAdd3"),Ze("Predictor4","PredictorAdd4"),Ze("Predictor5","PredictorAdd5"),Ze("Predictor6","PredictorAdd6"),Ze("Predictor7","PredictorAdd7"),Ze("Predictor8","PredictorAdd8"),Ze("Predictor9","PredictorAdd9"),Ze("Predictor10","PredictorAdd10"),Ze("Predictor11","PredictorAdd11"),Ze("Predictor12","PredictorAdd12"),Ze("Predictor13","PredictorAdd13");var Xd=M.PredictorAdd2;Ot("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Vc,ha=M.ColorIndexInverseTransform,Jd=M.MapARGB,Sg=M.VP8LColorIndexInverseTransformAlpha,yg=M.MapAlpha,Gn=M.VP8LPredictorsAdd=[];Gn.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var zr,ca,Un,Ua,vn,ul,pa,hl,Qd,jn,fa,gn,Ks,cl,Gs,qn,eu,Wr,mn,ni,si,Ii,Vi,Cn,Yn,pl,Nc,z1,W1=n(511),$1=n(2041),K1=n(225),G1=n(767),U1=0,xg=$1,Fc=K1,Rr=G1,$r=W1,kc=0,Mc=1,j1=2,Hc=3,Zc=4,Eg=5,q1=6,Ig=7,Tg=8,zc=9,Ag=10,vG=[2,3,7],gG=[3,3,11],Y1=[280,256,256,256,40],mG=[0,1,1,1,0],CG=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],bG=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],wG=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],SG=8,Dg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Og=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tu=null,yG=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],xG=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],X1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],EG=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],IG=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],TG=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],AG=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Xn=[],_a=[],bn=[],DG=1,J1=2,Jn=[],Kr=[];De("UpsampleRgbLinePair",Vt,3),De("UpsampleBgrLinePair",ci,3),De("UpsampleRgbaLinePair",ua,4),De("UpsampleBgraLinePair",Zi,4),De("UpsampleArgbLinePair",rr,4),De("UpsampleRgba4444LinePair",Ai,2),De("UpsampleRgb565LinePair",mi,2);var OG=M.UpsampleRgbLinePair,RG=M.UpsampleBgrLinePair,Q1=M.UpsampleRgbaLinePair,eT=M.UpsampleBgraLinePair,tT=M.UpsampleArgbLinePair,iT=M.UpsampleRgba4444LinePair,LG=M.UpsampleRgb565LinePair,Wc=16,$c=1<<Wc-1,iu=-227,Rg=482,rT=6,PG=(256<<rT)-1,aT=0,BG=n(256),VG=n(256),NG=n(256),FG=n(256),kG=n(Rg-iu),MG=n(Rg-iu);_n("YuvToRgbRow",Vt,3),_n("YuvToBgrRow",ci,3),_n("YuvToRgbaRow",ua,4),_n("YuvToBgraRow",Zi,4),_n("YuvToArgbRow",rr,4),_n("YuvToRgba4444Row",Ai,2),_n("YuvToRgb565Row",mi,2);var nT=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Kc=[0,2,8],HG=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(h,_,C,S,I){var A=Mc,O=new rl,R=new ra;O.ba=R,R.S=A,R.width=[R.width],R.height=[R.height];var L=R.width,H=R.height,ie=new hn;if(null==ie||null==h)var ve=2;else e(null!=ie),ve=nl(h,_,C,ie.width,ie.height,ie.Pd,ie.Qd,ie.format,null);if(0!=ve?L=0:(null!=L&&(L[0]=ie.width[0]),null!=H&&(H[0]=ie.height[0]),L=1),L){R.width=R.width[0],R.height=R.height[0],null!=S&&(S[0]=R.width),null!=I&&(I[0]=R.height);e:{if(S=new Yo,(I=new zd).data=h,I.w=_,I.ha=C,I.kd=1,_=[0],e(null!=I),(0==(h=nl(I.data,I.w,I.ha,null,null,null,_,null,I))||7==h)&&_[0]&&(h=4),0==(_=h)){if(e(null!=O),S.data=I.data,S.w=I.w+I.offset,S.ha=I.ha-I.offset,S.put=Za,S.ac=Ui,S.bc=za,S.ma=O,I.xa){if(null==(h=Zr())){O=1;break e}if(function(ge,se){var Pe=[0],Ee=[0],re=[0];t:for(;;){if(null==ge)return 0;if(null==se)return ge.a=2,0;if(ge.l=se,ge.a=0,_e(ge.m,se.data,se.w,se.ha),!dt(ge.m,Pe,Ee,re)){ge.a=3;break t}if(ge.xb=J1,se.width=Pe[0],se.height=Ee[0],!Ka(Pe[0],Ee[0],1,ge,null))break t;return 1}return e(0!=ge.a),0}(h,S)){if(S=0==(_=sl(S.width,S.height,O.Oa,O.ba))){t:{S=h;i:for(;;){if(null==S){S=0;break t}if(e(null!=S.s.yc),e(null!=S.s.Ya),e(0<S.s.Wb),e(null!=(C=S.l)),e(null!=(I=C.ma)),0!=S.xb){if(S.ca=I.ba,S.tb=I.tb,e(null!=S.ca),!jd(I.Oa,C,Hc)){S.a=2;break i}if(!Hs(S,C.width)||C.da)break i;if((C.da||Zt(S.ca.S))&&ue(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=S.ca.f.kb.F&&ue()),S.Pb&&0<S.s.ua&&null==S.s.vb.X&&!ht(S.s.vb,S.s.Wa.Xa)){S.a=1;break i}S.xb=0}if(!oa(S,S.V,S.Ba,S.c,S.i,C.o,$o))break i;I.Dc=S.Ma,S=1;break t}e(0!=S.a),S=0}S=!S}S&&(_=h.a)}else _=h.a}else{if(null==(h=new ig)){O=1;break e}if(h.Fa=I.na,h.P=I.P,h.qc=I.Sa,Cc(h,S)){if(0==(_=sl(S.width,S.height,O.Oa,O.ba))){if(h.Aa=0,C=O.Oa,e(null!=(I=h)),null!=C){if(0<(L=0>(L=C.Md)?0:100<L?255:255*L/100)){for(H=ie=0;4>H;++H)12>(ve=I.pb[H]).lc&&(ve.ia=L*HG[0>ve.lc?0:ve.lc]>>3),ie|=ve.ia;ie&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=C.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}(function rg(h,_){if(null==h)return 0;if(null==_)return Ei(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!Cc(h,_))return 0;if(e(h.cb),null==_.ac||_.ac(_)){_.ob&&(h.L=0);var C=Kc[h.L];if(2==h.L?(h.yb=0,h.zb=0):(h.yb=_.v-C>>4,h.zb=_.j-C>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=_.o+15+C>>4,h.Hb=_.va+15+C>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var S=h.ed;for(C=0;4>C;++C){var I;if(h.Qa.Cb){var A=h.Qa.Lb[C];h.Qa.Fb||(A+=S.Tb)}else A=S.Tb;for(I=0;1>=I;++I){var O=h.gd[C][I],R=A;if(S.Pc&&(R+=S.vd[0],I&&(R+=S.od[0])),0<(R=0>R?0:63<R?63:R)){var L=R;0<S.wb&&(L=4<S.wb?L>>2:L>>1)>9-S.wb&&(L=9-S.wb),1>L&&(L=1),O.dd=L,O.tc=2*R+L,O.ld=40<=R?2:15<=R?1:0}else O.tc=0;O.La=I}}}C=0}else Ei(h,6,"Frame setup failed"),C=h.a;if(C=0==C){if(C){h.$c=0,0<h.Aa||(h.Ic=1);e:{S=4*(L=h.za);var H=32*L,ie=L+1,ve=0<h.L?L*(0<h.Aa?2:1):0,ge=(2==h.Aa?2:1)*L;if((O=S+832+(I=3*(16*(C=h.Ic)+Kc[h.L])/2*H)+(A=null!=h.Fa&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=O)C=0;else{if(O>h.Vb){if(h.Vb=0,h.Ec=n(O),h.Fc=0,null==h.Ec){C=Ei(h,1,"no memory during frame initialization.");break e}h.Vb=O}R=h.Fc,h.Ac=O=h.Ec,h.Bc=R,R+=S,h.Gd=s(H,gc),h.Hd=0,h.rb=s(ie+1,vc),h.sb=1,h.wa=ve?s(ve,qo):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=L),e(!0),h.oc=O,h.pc=R,R+=832,h.ya=s(ge,Ld),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,2==h.Aa&&(h.D.aa+=L),h.R=16*L,h.B=8*L,L=(H=Kc[h.L])*h.R,H=H/2*h.B,h.sa=O,h.ta=R+L,h.qa=h.sa,h.ra=h.ta+16*C*h.R+H,h.Ha=h.qa,h.Ia=h.ra+8*C*h.B+H,h.$c=0,R+=I,h.mb=A?O:null,h.nb=A?R:null,e(R+A<=h.Fc+h.Vb),Pd(h),a(h.Ac,h.Bc,0,S),C=1}}if(C){if(_.ka=0,_.y=h.sa,_.O=h.ta,_.f=h.qa,_.N=h.ra,_.ea=h.Ha,_.Vd=h.Ia,_.fa=h.R,_.Rc=h.B,_.F=null,_.J=0,!U1){for(C=-255;255>=C;++C)W1[255+C]=0>C?-C:C;for(C=-1020;1020>=C;++C)$1[1020+C]=-128>C?-128:127<C?127:C;for(C=-112;112>=C;++C)K1[112+C]=-16>C?-16:15<C?15:C;for(C=-255;510>=C;++C)G1[255+C]=0>C?0:255<C?255:C;U1=1}pa=sg,hl=ag,jn=Sc,fa=ng,gn=yc,Qd=wc,Ks=Md,cl=Ws,Gs=Cg,qn=Hd,eu=mg,Wr=il,mn=Zd,ni=Lc,si=Rc,Ii=fn,Vi=Wn,Cn=gg,_a[0]=Ga,_a[1]=og,_a[2]=hg,_a[3]=cg,_a[4]=Ic,_a[5]=el,_a[6]=Tc,_a[7]=Nd,_a[8]=fg,_a[9]=pg,Xn[0]=xc,Xn[1]=dg,Xn[2]=pn,Xn[3]=Jo,Xn[4]=ir,Xn[5]=ug,Xn[6]=Ec,bn[0]=zn,bn[1]=lg,bn[2]=_g,bn[3]=Fd,bn[4]=zs,bn[5]=vg,bn[6]=kd,C=1}else C=0}C&&(C=function(se,Pe){for(se.M=0;se.M<se.Va;++se.M){var Ee,re=se.Jc[se.M&se.Xb],ne=se.m,Re=se;for(Ee=0;Ee<Re.za;++Ee){var Be=ne,Le=Re,Xe=Le.Ac,ze=Le.Bc+4*Ee,ot=Le.zc,Ke=Le.ya[Le.aa+Ee];if(Ke.$b=Le.Qa.Bb?Se(Be,Le.Pa.jb[0])?2+Se(Be,Le.Pa.jb[2]):Se(Be,Le.Pa.jb[1]):0,Le.kc&&(Ke.Ad=Se(Be,Le.Bd)),Ke.Za=!Se(Be,145)+0,Ke.Za){var Ht=Ke.Ob,$t=0;for(Le=0;4>Le;++Le){var kt,Lt=ot[0+Le];for(kt=0;4>kt;++kt){for(var ti=X1[Se(Be,(Lt=IG[Xe[ze+kt]][Lt])[0])];0<ti;)ti=X1[2*ti+Se(Be,Lt[ti])];Xe[ze+kt]=Lt=-ti}r(Ht,$t,Xe,ze,4),$t+=4,ot[0+Le]=Lt}}else Lt=Se(Be,156)?Se(Be,128)?1:3:Se(Be,163)?2:0,Ke.Ob[0]=Lt,a(Xe,ze,Lt,4),a(ot,0,Lt,4);Ke.Dd=Se(Be,142)?Se(Be,114)?Se(Be,183)?1:3:2:0}if(Re.m.Ka)return Ei(se,7,"Premature end-of-partition0 encountered.");for(;se.ja<se.za;++se.ja){if(Re=re,Be=(ne=se).rb[ne.sb-1],Xe=ne.rb[ne.sb+ne.ja],Ee=ne.ya[ne.aa+ne.ja],ze=ne.kc?Ee.Ad:0)Be.la=Xe.la=0,Ee.Za||(Be.Na=Xe.Na=0),Ee.Hc=0,Ee.Gc=0,Ee.ia=0;else{var jt,yt;if(Be=Xe,Xe=Re,ze=ne.Pa.Xc,Ke=ne.pb[(ot=ne.ya[ne.aa+ne.ja]).$b],$t=ne.rb[ne.sb-1],Lt=kt=0,a(Le=ot.ad,Ht=0,0,384),ot.Za)var Di=0,yr=ze[3];else{ti=n(16);var Oi=Be.Na+$t.Na;if(Oi=tu(Xe,ze[1],Oi,Ke.Eb,0,ti,0),Be.Na=$t.Na=(0<Oi)+0,1<Oi)pa(ti,0,Le,Ht);else{var xr=ti[0]+3>>3;for(ti=0;256>ti;ti+=16)Le[Ht+ti]=xr}Di=1,yr=ze[0]}var Kt=15&Be.la,Lr=15&$t.la;for(ti=0;4>ti;++ti){var Pr=1&Lr;for(xr=yt=0;4>xr;++xr)Kt=Kt>>1|(Pr=(Oi=tu(Xe,yr,Oi=Pr+(1&Kt),Ke.Sc,Di,Le,Ht))>Di)<<7,yt=yt<<2|(3<Oi?3:1<Oi?2:0!=Le[Ht+0]),Ht+=16;Kt>>=4,Lr=Lr>>1|Pr<<7,kt=(kt<<8|yt)>>>0}for(yr=Kt,Di=Lr>>4,jt=0;4>jt;jt+=2){for(yt=0,Kt=Be.la>>4+jt,Lr=$t.la>>4+jt,ti=0;2>ti;++ti){for(Pr=1&Lr,xr=0;2>xr;++xr)Kt=Kt>>1|(Pr=0<(Oi=tu(Xe,ze[2],Oi=Pr+(1&Kt),Ke.Qc,0,Le,Ht)))<<3,yt=yt<<2|(3<Oi?3:1<Oi?2:0!=Le[Ht+0]),Ht+=16;Kt>>=2,Lr=Lr>>1|Pr<<5}Lt|=yt<<4*jt,yr|=Kt<<4<<jt,Di|=(240&Lr)<<jt}Be.la=yr,$t.la=Di,ot.Hc=kt,ot.Gc=Lt,ot.ia=43690&Lt?0:Ke.ia,ze=!(kt|Lt)}if(0<ne.L&&(ne.wa[ne.Y+ne.ja]=ne.gd[Ee.$b][Ee.Za],ne.wa[ne.Y+ne.ja].La|=!ze),Re.Ka)return Ei(se,7,"Premature end-of-file encountered.")}if(Pd(se),ne=Pe,Re=1,Ee=(re=se).D,Be=0<re.L&&re.M>=re.zb&&re.M<=re.Va,0==re.Aa)e:{if(Ee.M=re.M,Ee.uc=Be,Ud(re,Ee),Re=1,Ee=(yt=re.D).Nb,Be=(Lt=Kc[re.L])*re.R,ze=re.sa,ot=re.ta-Be+(ti=16*Ee*re.R),Ke=re.qa,Le=re.ra-(Xe=Lt/2*re.B)+(xr=8*Ee*re.B),Ht=re.Ha,$t=re.Ia-Xe+xr,Lr=0==(Kt=yt.M),kt=Kt>=re.Va-1,2==re.Aa&&Ud(re,yt),yt.uc)for(Pr=(Oi=re).D.M,e(Oi.D.uc),yt=Oi.yb;yt<Oi.Hb;++yt){yr=Pr;var zi=(ji=(Ci=Oi).D).Nb,ji=ji.wa[ji.Y+(Di=yt)],or=Ci.sa,Gr=Ci.ta+16*zi*(jt=Ci.R)+16*Di,ja=ji.dd,Wi=ji.tc;if(0!=Wi)if(e(3<=Wi),1==Ci.L)0<Di&&Ii(or,Gr,jt,Wi+4),ji.La&&Cn(or,Gr,jt,Wi),0<yr&&si(or,Gr,jt,Wi+4),ji.La&&Vi(or,Gr,jt,Wi);else{var wn=Ci.B,Us=Ci.qa,fl=Ci.ra+8*zi*wn+8*Di,Qn=Ci.Ha,Ci=Ci.Ia+8*zi*wn+8*Di;zi=ji.ld,0<Di&&(cl(or,Gr,jt,Wi+4,ja,zi),qn(Us,fl,Qn,Ci,wn,Wi+4,ja,zi)),ji.La&&(Wr(or,Gr,jt,Wi,ja,zi),ni(Us,fl,Qn,Ci,wn,Wi,ja,zi)),0<yr&&(Ks(or,Gr,jt,Wi+4,ja,zi),Gs(Us,fl,Qn,Ci,wn,Wi+4,ja,zi)),ji.La&&(eu(or,Gr,jt,Wi,ja,zi),mn(Us,fl,Qn,Ci,wn,Wi,ja,zi))}}if(re.ia&&alert("todo:DitherRow"),null!=ne.put){if(yt=16*Kt,Kt=16*(Kt+1),Lr?(ne.y=re.sa,ne.O=re.ta+ti,ne.f=re.qa,ne.N=re.ra+xr,ne.ea=re.Ha,ne.W=re.Ia+xr):(yt-=Lt,ne.y=ze,ne.O=ot,ne.f=Ke,ne.N=Le,ne.ea=Ht,ne.W=$t),kt||(Kt-=Lt),Kt>ne.o&&(Kt=ne.o),ne.F=null,ne.J=null,null!=re.Fa&&0<re.Fa.length&&yt<Kt&&(ne.J=Kd(re,ne,yt,Kt-yt),ne.F=re.mb,null==ne.F&&0==ne.F.length)){Re=Ei(re,3,"Could not decode alpha data.");break e}yt<ne.j&&(Lt=ne.j-yt,yt=ne.j,e(!(1&Lt)),ne.O+=re.R*Lt,ne.N+=re.B*(Lt>>1),ne.W+=re.B*(Lt>>1),null!=ne.F&&(ne.J+=ne.width*Lt)),yt<Kt&&(ne.O+=ne.v,ne.N+=ne.v>>1,ne.W+=ne.v>>1,null!=ne.F&&(ne.J+=ne.v),ne.ka=yt-ne.j,ne.U=ne.va-ne.v,ne.T=Kt-yt,Re=ne.put(ne))}Ee+1!=re.Ic||kt||(r(re.sa,re.ta-Be,ze,ot+16*re.R,Be),r(re.qa,re.ra-Xe,Ke,Le+8*re.B,Xe),r(re.Ha,re.Ia-Xe,Ht,$t+8*re.B,Xe))}if(!Re)return Ei(se,6,"Output aborted.")}return 1}(h,_)),null!=_.bc&&_.bc(_),C&=1}return C?(h.cb=0,C):0})(h,S)||(_=h.a)}}else _=h.a}0==_&&null!=O.Oa&&O.Oa.fd&&(_=qd(O.ba))}O=_}A=0!=O?null:11>A?R.f.RGBA.eb:R.f.kb.y}else A=null;return A};var sT=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(M,le){for(var fe="",B=0;B<4;B++)fe+=String.fromCharCode(M[le++]);return fe}function u(M,le){return(M[le+0]<<0|M[le+1]<<8|M[le+2]<<16)>>>0}function c(M,le){return(M[le+0]<<0|M[le+1]<<8|M[le+2]<<16|M[le+3]<<24)>>>0}new l;var f=[0],p=[0],g=[],w=new l,x=i,y=function(M,le){var fe={},B=0,P=!1,U=0,$=0;if(fe.frames=[],!
/** @license
             * Copyright (c) 2017 Dominik Homberger
            Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
            The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
            https://webpjs.appspot.com
            WebPRiffParser dominikhlbg@gmail.com
            */
function(z,K,te,de){for(var Ce=0;Ce<4;Ce++)if(z[K+Ce]!="RIFF".charCodeAt(Ce))return!0;return!1}(M,le)){var me,pe;for(c(M,le+=4),le+=8;le<M.length;){var xe=d(M,le),_e=c(M,le+=4);le+=4;var Ae=_e+(1&_e);switch(xe){case"VP8 ":case"VP8L":void 0===fe.frames[B]&&(fe.frames[B]={}),(D=fe.frames[B]).src_off=P?$:le-8,D.src_size=U+_e+8,B++,P&&(P=!1,U=0,$=0);break;case"VP8X":(D=fe.header={}).feature_flags=M[le];var Ie=le+4;D.canvas_width=1+u(M,Ie),D.canvas_height=1+u(M,Ie+=3),Ie+=3;break;case"ALPH":P=!0,U=Ae+8,$=le-8;break;case"ANIM":(D=fe.header).bgcolor=c(M,le),D.loop_count=(me=M)[(pe=Ie=le+4)+0]<<0|me[pe+1]<<8,Ie+=2;break;case"ANMF":var Me,D;(D=fe.frames[B]={}).offset_x=2*u(M,le),D.offset_y=2*u(M,le+=3),D.width=1+u(M,le+=3),D.height=1+u(M,le+=3),D.duration=u(M,le+=3),le+=3,Me=M[le++],D.dispose=1&Me,D.blend=Me>>1&1}"ANMF"!=xe&&(le+=Ae)}return fe}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var E=y.header?y.header:null,V=y.frames?y.frames:null;if(E){E.loop_counter=E.loop_count,f=[E.canvas_height],p=[E.canvas_width];for(var F=0;F<V.length&&0!=V[F].blend;F++);}var q=V[0],ee=w.WebPDecodeRGBA(x,q.src_off,q.src_size,p,f);q.rgba=ee,q.imgwidth=p[0],q.imgheight=f[0];for(var X=0;X<p[0]*f[0]*4;X++)g[X]=ee[X];return this.width=p,this.height=f,this.data=g,this}(function(i){var t=function(f,p,g,w){var x=4,y=s;switch(w){case i.image_compression.FAST:x=1,y=n;break;case i.image_compression.MEDIUM:x=6,y=o;break;case i.image_compression.SLOW:x=9,y=l}var E=Od(f=r(f,p,g,y),{level:x});return i.__addimage__.arrayBufferToBinaryString(E)},r=function(f,p,g,w){for(var x,y,E,V=f.length/p,F=new Uint8Array(f.length+V),q=u(),ee=0;ee<V;ee+=1){if(x=f.subarray(E=ee*p,E+p),w)F.set(w(x,g,y),E+ee);else{for(var X,M=q.length,le=[];X<M;X+=1)le[X]=q[X](x,g,y);var fe=c(le.concat());F.set(le[fe],E+ee)}y=x}return F},a=function(f){var p=Array.apply([],f);return p.unshift(0),p},n=function(f,p){var w=[],x=f.length;w[0]=1;for(var y=0;y<x;y+=1)w[y+1]=f[y]-(f[y-p]||0)+256&255;return w},s=function(f,p,g){var x=[],y=f.length;x[0]=2;for(var E=0;E<y;E+=1)x[E+1]=f[E]-(g&&g[E]||0)+256&255;return x},o=function(f,p,g){var y=[],E=f.length;y[0]=3;for(var V=0;V<E;V+=1)y[V+1]=f[V]+256-((f[V-p]||0)+(g&&g[V]||0)>>>1)&255;return y},l=function(f,p,g){var E,V=[],F=f.length;V[0]=4;for(var q=0;q<F;q+=1)E=d(f[q-p]||0,g&&g[q]||0,g&&g[q-p]||0),V[q+1]=f[q]-E+256&255;return V},d=function(f,p,g){if(f===p&&p===g)return f;var w=Math.abs(p-g),x=Math.abs(f-g),y=Math.abs(f+p-g-g);return w<=x&&w<=y?f:x<=y?p:g},u=function(){return[a,n,s,o,l]},c=function(f){var p=f.map(function(g){return g.reduce(function(w,x){return w+Math.abs(x)},0)});return p.indexOf(Math.min.apply(null,p))};i.processPNG=function(f,p,g,w){var x,y,E,V,F,q,ee,X,M,le,fe,B,P,U,$,me=this.decode.FLATE_DECODE,pe="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(E=new PK(f)).imgData,y=E.bits,x=E.colorSpace,F=E.colors,-1!==[4,6].indexOf(E.colorType)){if(8===E.bits){M=(X=32==E.pixelBitlength?new Uint32Array(E.decodePixels().buffer):16==E.pixelBitlength?new Uint16Array(E.decodePixels().buffer):new Uint8Array(E.decodePixels().buffer)).length,fe=new Uint8Array(M*E.colors),le=new Uint8Array(M);var xe,_e=E.pixelBitlength-E.bits;for(U=0,$=0;U<M;U++){for(P=X[U],xe=0;xe<_e;)fe[$++]=P>>>xe&255,xe+=E.bits;le[U]=P>>>xe&255}}if(16===E.bits){M=(X=new Uint32Array(E.decodePixels().buffer)).length,fe=new Uint8Array(M*(32/E.pixelBitlength)*E.colors),le=new Uint8Array(M*(32/E.pixelBitlength)),B=E.colors>1,U=0,$=0;for(var Ae=0;U<M;)P=X[U++],fe[$++]=P>>>0&255,B&&(fe[$++]=P>>>16&255,P=X[U++],fe[$++]=P>>>0&255),le[Ae++]=P>>>16&255;y=8}w!==i.image_compression.NONE?(f=t(fe,E.width*E.colors,E.colors,w),ee=t(le,E.width,1,w)):(f=fe,ee=le,me=void 0)}if(3===E.colorType&&(x=this.color_spaces.INDEXED,q=E.palette,E.transparency.indexed)){var Ie=E.transparency.indexed,Me=0;for(U=0,M=Ie.length;U<M;++U)Me+=Ie[U];if((Me/=255)==M-1&&-1!==Ie.indexOf(0))V=[Ie.indexOf(0)];else if(Me!==M){for(X=E.decodePixels(),le=new Uint8Array(X.length),U=0,M=X.length;U<M;U++)le[U]=Ie[X[U]];ee=t(le,E.width,1)}}var D=function(z){var K;switch(z){case i.image_compression.FAST:K=11;break;case i.image_compression.MEDIUM:K=13;break;case i.image_compression.SLOW:K=14;break;default:K=12}return K}(w);return me===this.decode.FLATE_DECODE&&(pe="/Predictor "+D+" "),pe+="/Colors "+F+" /BitsPerComponent "+y+" /Columns "+E.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(ee&&this.__addimage__.isArrayBuffer(ee)||this.__addimage__.isArrayBufferView(ee))&&(ee=this.__addimage__.arrayBufferToBinaryString(ee)),{alias:g,data:f,index:p,filter:me,decodeParameters:pe,transparency:V,palette:q,sMask:ee,predictor:D,width:E.width,height:E.height,bitsPerComponent:y,colorSpace:x}}}})(lt.API),function(i){i.processGIF89A=function(e,t,r,a){var n=new BK(e),s=n.width,o=n.height,l=[];n.decodeAndBlitFrameRGBA(0,l);var d={data:l,width:s,height:o},u=new Yv(100).encode(d,100);return i.processJPEG.call(this,u,t,r,a)},i.processGIF87A=i.processGIF89A}(lt.API),ea.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var e=0;e<i;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:r,blue:t,quad:n}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ea.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[i]()}catch(t){Qt.log("bit decode error:"+t)}},ea.prototype.bit1=function(){var i,e=Math.ceil(this.width/8),t=e%4;for(i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,a=0;a<e;a++)for(var n=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[n>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}0!==t&&(this.pos+=4-t)}},ea.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),e=i%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<i;a++){var n=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*a*4,l=15&n,d=this.palette[n>>4];if(this.data[s]=d.blue,this.data[s+1]=d.green,this.data[s+2]=d.red,this.data[s+3]=255,2*a+1>=this.width)break;this.data[s+4]=(d=this.palette[l]).blue,this.data[s+4+1]=d.green,this.data[s+4+2]=d.red,this.data[s+4+3]=255}0!==e&&(this.pos+=4-e)}},ea.prototype.bit8=function(){for(var i=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=t*this.width*4+4*r;if(a<this.palette.length){var s=this.palette[a];this.data[n]=s.red,this.data[n+1]=s.green,this.data[n+2]=s.blue,this.data[n+3]=255}else this.data[n]=255,this.data[n+1]=255,this.data[n+2]=255,this.data[n+3]=255}0!==i&&(this.pos+=4-i)}},ea.prototype.bit15=function(){for(var i=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var n=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(n&e)/e*255|0,o=(n>>5&e)/e*255|0,d=n>>15?255:0,u=r*this.width*4+4*a;this.data[u]=(n>>10&e)/e*255|0,this.data[u+1]=o,this.data[u+2]=s,this.data[u+3]=d}this.pos+=i}},ea.prototype.bit16=function(){for(var i=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,u=a*this.width*4+4*n;this.data[u]=(s>>11)/e*255|0,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=i}},ea.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=n,this.data[s+1]=a,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},ea.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=n,this.data[o+1]=a,this.data[o+2]=r,this.data[o+3]=s}},ea.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2018 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){i.processBMP=function(e,t,r,a){var n=new ea(e,!1),s=n.width,o=n.height,l={data:n.getData(),width:s,height:o},d=new Yv(100).encode(l,100);return i.processJPEG.call(this,d,t,r,a)}}(lt.API),N1.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2019 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){i.processWEBP=function(e,t,r,a){var n=new N1(e,!1),s=n.width,o=n.height,l={data:n.getData(),width:s,height:o},d=new Yv(100).encode(l,100);return i.processJPEG.call(this,d,t,r,a)}}(lt.API),lt.API.processRGBA=function(i,e,t){for(var r=i.data,a=r.length,n=new Uint8Array(a/4*3),s=new Uint8Array(a/4),o=0,l=0,d=0;d<a;d+=4){var c=r[d+1],f=r[d+2],p=r[d+3];n[o++]=r[d],n[o++]=c,n[o++]=f,s[l++]=p}var g=this.__addimage__.arrayBufferToBinaryString(n);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:g,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},lt.API.setLanguage=function(i){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]&&(this.internal.languageSettings.languageCode=i,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},fc=(Wo=lt.API).getCharWidthsArray=function(i,e){var t,r,a=(e=e||{}).font||this.internal.getFont(),n=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,d=e.kerning?e.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,c=!1!==e.doKerning,f=0,p=i.length,g=0,w=o[0]||l,x=[];for(t=0;t<p;t++)r=i.charCodeAt(t),"function"==typeof a.metadata.widthOfString?x.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+s*(1e3/n)||0)/1e3):(f=c&&"object"===(0,Jt.Z)(d[r])&&!isNaN(parseInt(d[r][g],10))?d[r][g]/u:0,x.push((o[r]||w)/l+f)),g=r;return x},L1=Wo.getStringUnitWidth=function(i,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Wo.processArabic&&(i=Wo.processArabic(i)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(i,t,a)/t:fc.apply(this,arguments).reduce(function(n,s){return n+s},0)},P1=function(i,e,t,r){for(var a=[],n=0,s=i.length,o=0;n!==s&&o+e[n]<t;)o+=e[n],n++;a.push(i.slice(0,n));var l=n;for(o=0;n!==s;)o+e[n]>r&&(a.push(i.slice(l,n)),o=0,l=n),o+=e[n],n++;return l!==n&&a.push(i.slice(l,n)),a},B1=function(i,e,t){t||(t={});var r,a,n,s,o,l,u=[],c=[u],f=t.textIndent||0,p=0,g=0,w=i.split(" "),x=fc.apply(this,[" ",t])[0];if(l=-1===t.lineIndent?w[0].length+2:t.lineIndent||0){var y=Array(l).join(" "),E=[];w.map(function(F){(F=F.split(/\s*\n/)).length>1?E=E.concat(F.map(function(q,ee){return(ee&&q.length?"\n":"")+q})):E.push(F[0])}),w=E,l=L1.apply(this,[y,t])}for(n=0,s=w.length;n<s;n++){var V=0;if(r=w[n],l&&"\n"==r[0]&&(r=r.substr(1),V=1),f+p+(g=(a=fc.apply(this,[r,t])).reduce(function(F,q){return F+q},0))>e||V){if(g>e){for(o=P1.apply(this,[r,a,e-(f+p),e]),u.push(o.shift()),u=[o.pop()];o.length;)c.push([o.shift()]);g=a.slice(r.length-(u[0]?u[0].length:0)).reduce(function(F,q){return F+q},0)}else u=[r];c.push(u),f=g+l,p=x}else u.push(r),f+=p+g,p=x}return c.map(l?function(F,q){return(q?y:"")+F.join(" ")}:function(F){return F.join(" ")})},Wo.splitTextToSize=function(i,e,t){var r,a=(t=t||{}).fontSize||this.internal.getFontSize(),n=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var c=this.internal.getFont(u.fontName,u.fontStyle);return c.metadata.Unicode?{widths:c.metadata.Unicode.widths||{0:1},kerning:c.metadata.Unicode.kerning||{}}:{font:c.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(i)?i:String(i).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/a;n.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,n.lineIndent=t.lineIndent;var o,l,d=[];for(o=0,l=r.length;o<l;o++)d=d.concat(B1.apply(this,[r[o],s,n]));return d},function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},a=0;a<16;a++)t[e[a]]="0123456789abcdef"[a],r["0123456789abcdef"[a]]=e[a];var n=function(c){return"0x"+parseInt(c,10).toString(16)},s=i.__fontmetrics__.compress=function(c){var f,p,g,w,x=["{"];for(var y in c){if(f=c[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=n(y).slice(2)).slice(0,-1)+r[p.slice(-1)]),"number"==typeof f)f<0?(g=n(f).slice(3),w="-"):(g=n(f).slice(2),w=""),g=w+g.slice(0,-1)+r[g.slice(-1)];else{if("object"!==(0,Jt.Z)(f))throw new Error("Don't know what to do with value type "+(0,Jt.Z)(f)+".");g=s(f)}x.push(p+g)}return x.push("}"),x.join("")},o=i.__fontmetrics__.uncompress=function(c){if("string"!=typeof c)throw new Error("Invalid argument passed to uncompress.");for(var f,p,g,w,x={},y=1,E=x,V=[],F="",q="",ee=c.length-1,X=1;X<ee;X+=1)"'"==(w=c[X])?f?(g=f.join(""),f=void 0):f=[]:f?f.push(w):"{"==w?(V.push([E,g]),E={},g=void 0):"}"==w?((p=V.pop())[0][p[1]]=E,g=void 0,E=p[0]):"-"==w?y=-1:void 0===g?t.hasOwnProperty(w)?(F+=t[w],g=parseInt(F,16)*y,y=1,F=""):F+=w:t.hasOwnProperty(w)?(q+=t[w],E[g]=parseInt(q,16)*y,y=1,g=void 0,q=""):q+=w;return x},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(c){var f=c.font,p=u.Unicode[f.postScriptName];p&&(f.metadata.Unicode={},f.metadata.Unicode.widths=p.widths,f.metadata.Unicode.kerning=p.kerning);var g=d.Unicode[f.postScriptName];g&&(f.metadata.Unicode.encoding=g,f.encoding=g.codePages[0])}])}(lt.API),
/**
       * @license
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){var e=function(t){for(var r=t.length,a=new Uint8Array(r),n=0;n<r;n++)a[n]=t.charCodeAt(n);return a};i.API.events.push(["addFont",function(t){var s,o,r=void 0,a=t.font,n=t.instance;if(!a.isStandardFont){if(void 0===n)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(r=!1===n.existsFileInVFS(a.postScriptName)?n.loadFile(a.postScriptName):n.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");s=a,o=/^\x00\x01\x00\x00/.test(o=r)?e(o):e(Rd(o)),s.metadata=i.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]}}])}(lt),lt.API.addSvgAsImage=function(t,r,a,n,s,o,l,d){if(isNaN(r)||isNaN(a))throw Qt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw Qt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=n,u.height=s;var c=u.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return function e(){return(ut.canvg?Promise.resolve(ut.canvg):be.e(484).then(be.bind(be,9484))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}().then(function(g){return g.fromString(c,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(f)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),r,a,n,s,l,d)})},lt.API.putTotalPages=function(i){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(i,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(e,t);return this},lt.API.viewerPreferences=function(i,e){var t;i=i||{},e=e||!1;var r,a,n,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],d=0,u=0,c=0;function f(g,w){var x,y=!1;for(x=0;x<g.length;x+=1)g[x]===w&&(y=!0);return y}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,"reset"===i||!0===e){var p=o.length;for(c=0;c<p;c+=1)t[o[c]].value=t[o[c]].defaultValue,t[o[c]].explicitSet=!1}if("object"===(0,Jt.Z)(i))for(a in i)if(n=i[a],f(o,a)&&void 0!==n){if("boolean"===t[a].type&&"boolean"==typeof n)t[a].value=n;else if("name"===t[a].type&&f(t[a].valueSet,n))t[a].value=n;else if("integer"===t[a].type&&Number.isInteger(n))t[a].value=n;else if("array"===t[a].type){for(d=0;d<n.length;d+=1)if(r=!0,1===n[d].length&&"number"==typeof n[d][0])l.push(String(n[d]-1));else if(n[d].length>1){for(u=0;u<n[d].length;u+=1)"number"!=typeof n[d][u]&&(r=!1);!0===r&&l.push([n[d][0]-1,n[d][1]-1].join(" "))}t[a].value="["+l.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var g,w=[];for(g in t)!0===t[g].explicitSet&&w.push("name"===t[g].type?"/"+g+" /"+t[g].value:"/"+g+" "+t[g].value);0!==w.length&&this.internal.write("/ViewerPreferences\n<<\n"+w.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},
/** ====================================================================
       * @license
       * jsPDF XMP metadata plugin
       * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
       *
       * Permission is hereby granted, free of charge, to any person obtaining
       * a copy of this software and associated documentation files (the
       * "Software"), to deal in the Software without restriction, including
       * without limitation the rights to use, copy, modify, merge, publish,
       * distribute, sublicense, and/or sell copies of the Software, and to
       * permit persons to whom the Software is furnished to do so, subject to
       * the following conditions:
       *
       * The above copyright notice and this permission notice shall be
       * included in all copies or substantial portions of the Software.
       *
       * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
       * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
       * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
       * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
       * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
       * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
       * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
       * ====================================================================
       */
function(i){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),d=n.length+s.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+n+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(r,a){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(lt.API),function(i){var e=i.API,t=e.pdfEscape16=function(n,s){for(var o,l=s.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],c=0,f=n.length;c<f;++c){if(o=s.metadata.characterToGlyph(n.charCodeAt(c)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=n.charCodeAt(c),-1==l.indexOf(o)&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),"0"==o)return u.join("");o=o.toString(16),u.push(d[4-o.length],o)}return u.join("")},r=function(n){var s,o,l,d,u,c,f;for(u="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",l=[],c=0,f=(o=Object.keys(n).sort(function(p,g){return p-g})).length;c<f;c++)s=o[c],l.length>=100&&(u+="\n"+l.length+" beginbfchar\n"+l.join("\n")+"\nendbfchar",l=[]),null!=n[s]&&"function"==typeof n[s].toString&&(d=("0000"+n[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+d+">"));return l.length&&(u+="\n"+l.length+" beginbfchar\n"+l.join("\n")+"\nendbfchar\n"),u+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(n){!function(s){var o=s.font,l=s.out,d=s.newObject,u=s.putStream;if(o.metadata instanceof i.API.TTFFont&&"Identity-H"===o.encoding){for(var c=o.metadata.Unicode.widths,f=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",g=0;g<f.length;g++)p+=String.fromCharCode(f[g]);var w=d();u({data:p,addLength1:!0,objectId:w}),l("endobj");var x=d();u({data:r(o.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var y=d();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+No(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+i.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var E=d();l("<<"),l("/Type /Font"),l("/BaseFont /"+No(o.fontName)),l("/FontDescriptor "+y+" 0 R"),l("/W "+i.API.PDFObject.convert(c)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=d(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+x+" 0 R"),l("/BaseFont /"+No(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+E+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}}(n)}]),e.events.push(["putFont",function(n){!function(s){var o=s.font,l=s.out,d=s.newObject,u=s.putStream;if(o.metadata instanceof i.API.TTFFont&&"WinAnsiEncoding"===o.encoding){for(var c=o.metadata.rawData,f="",p=0;p<c.length;p++)f+=String.fromCharCode(c[p]);var g=d();u({data:f,addLength1:!0,objectId:g}),l("endobj");var w=d();u({data:r(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var x=d();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+g+" 0 R"),l("/Flags 96"),l("/FontBBox "+i.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+No(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=d();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+No(o.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}}(n)}]);var a=function(n){var s,o=n.text||"",l=n.x,d=n.y,u=n.options||{},c=n.mutex||{},f=c.pdfEscape,p=c.activeFontKey,g=c.fonts,w=p,x="",y=0,E="",V=g[w].encoding;if("Identity-H"!==g[w].encoding)return{text:o,x:l,y:d,options:u,mutex:c};for(E=o,w=p,Array.isArray(o)&&(E=o[0]),y=0;y<E.length;y+=1)g[w].metadata.hasOwnProperty("cmap")&&(s=g[w].metadata.cmap.unicode.codeMap[E[y].charCodeAt(0)]),s||E[y].charCodeAt(0)<256&&g[w].metadata.hasOwnProperty("Unicode")?x+=E[y]:x+="";var F="";return parseInt(w.slice(1))<14||"WinAnsiEncoding"===V?F=f(x,w).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):"Identity-H"===V&&(F=t(x,g[w])),c.isHex=!0,{text:F,x:l,y:d,options:u,mutex:c}};e.events.push(["postProcessText",function(n){var s=n.text||"",o=[],l={text:s,x:n.x,y:n.y,options:n.options,mutex:n.mutex};if(Array.isArray(s)){var d=0;for(d=0;d<s.length;d+=1)Array.isArray(s[d])&&3===s[d].length?o.push([a(Object.assign({},l,{text:s[d][0]})).text,s[d][1],s[d][2]]):o.push(a(Object.assign({},l,{text:s[d]})).text);n.text=o}else n.text=a(Object.assign({},l,{text:s})).text}])}(lt),
/**
       * @license
       * jsPDF virtual FileSystem functionality
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(i){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},i.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},i.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(lt.API),
/**
       * @license
       * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
       * MIT License
       */
function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(r){var a,n,s,o,l,d,u,c=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,V=0;this.__bidiEngine__={};var F=function(B){var P=B.charCodeAt(),U=P>>8,$=w[U];return void 0!==$?c[256*$+(255&P)]:252===U||253===U?"AL":y.test(U)?"L":8===U?"R":"N"},q=function(B){for(var P,U=0;U<B.length;U++){if("L"===(P=F(B.charAt(U))))return!1;if("R"===P)return!0}return!1},ee=function(B,P,U,$){var me,pe,xe,_e,Ae=P[$];switch(Ae){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(Ae="AN");break;case"AL":E=!0,Ae="R";break;case"WS":case"BN":Ae="N";break;case"CS":$<1||$+1>=P.length||"EN"!==(me=U[$-1])&&"AN"!==me||"EN"!==(pe=P[$+1])&&"AN"!==pe?Ae="N":E&&(pe="AN"),Ae=pe===me?pe:"N";break;case"ES":Ae="EN"===(me=$>0?U[$-1]:"B")&&$+1<P.length&&"EN"===P[$+1]?"EN":"N";break;case"ET":if($>0&&"EN"===U[$-1]){Ae="EN";break}if(E){Ae="N";break}for(xe=$+1,_e=P.length;xe<_e&&"ET"===P[xe];)xe++;Ae=xe<_e&&"EN"===P[xe]?"EN":"N";break;case"NSM":if(s&&!o){for(_e=P.length,xe=$+1;xe<_e&&"NSM"===P[xe];)xe++;if(xe<_e){var Ie=B[$];if(me=P[xe],(Ie>=1425&&Ie<=2303||64286===Ie)&&("R"===me||"AL"===me)){Ae="R";break}}}Ae=$<1||"B"===(me=P[$-1])?"N":U[$-1];break;case"B":E=!1,a=!0,Ae=V;break;case"S":n=!0,Ae="N"}return Ae},X=function(B,P,U){var $=B.split("");return U&&M($,U,{hiLevel:V}),$.reverse(),P&&P.reverse(),$.join("")},M=function(B,P,U){var $,me,pe,xe,_e,Ae=-1,Ie=B.length,Me=0,D=[],z=V?p:f,K=[];for(E=!1,a=!1,n=!1,me=0;me<Ie;me++)K[me]=F(B[me]);for(pe=0;pe<Ie;pe++){if(_e=Me,D[pe]=ee(B,K,D,pe),$=240&(Me=z[_e][g[D[pe]]]),P[pe]=xe=z[Me&=15][5],$>0)if(16===$){for(me=Ae;me<pe;me++)P[me]=1;Ae=-1}else Ae=-1;if(z[Me][6])-1===Ae&&(Ae=pe);else if(Ae>-1){for(me=Ae;me<pe;me++)P[me]=xe;Ae=-1}"B"===K[pe]&&(P[pe]=0),U.hiLevel|=xe}n&&function(te,de,Ce){for(var we=0;we<Ce;we++)if("S"===te[we]){de[we]=V;for(var Se=we-1;Se>=0&&"WS"===te[Se];Se--)de[Se]=V}}(K,P,Ie)},le=function(B,P,U,$,me){if(!(me.hiLevel<B)){if(1===B&&1===V&&!a)return P.reverse(),void(U&&U.reverse());for(var pe,xe,_e,Ae,Ie=P.length,Me=0;Me<Ie;){if($[Me]>=B){for(_e=Me+1;_e<Ie&&$[_e]>=B;)_e++;for(Ae=Me,xe=_e-1;Ae<xe;Ae++,xe--)pe=P[Ae],P[Ae]=P[xe],P[xe]=pe,U&&(pe=U[Ae],U[Ae]=U[xe],U[xe]=pe);Me=_e}Me++}}},fe=function(B,P,U){var $=B.split(""),me={hiLevel:V};return U||(U=[]),M($,U,me),function(pe,xe,_e){if(0!==_e.hiLevel&&u)for(var Ae,Ie=0;Ie<pe.length;Ie++)1===xe[Ie]&&(Ae=x.indexOf(pe[Ie]))>=0&&(pe[Ie]=x[Ae+1])}($,U,me),le(2,$,P,U,me),le(1,$,P,U,me),$.join("")};return this.__bidiEngine__.doBidiReorder=function(B,P,U){if(function(me,pe){if(pe)for(var xe=0;xe<me.length;xe++)pe[xe]=xe;void 0===o&&(o=q(me)),void 0===d&&(d=q(me))}(B,P),s||!l||d)if(s&&l&&o^d)V=o?1:0,B=X(B,P,U);else if(!s&&l&&d)V=o?1:0,B=fe(B,P,U),B=X(B,P);else if(!s||o||l||d){if(s&&!l&&o^d)B=X(B,P),o?(V=0,B=fe(B,P,U)):(V=1,B=fe(B,P,U),B=X(B,P));else if(s&&o&&!l&&d)V=1,B=fe(B,P,U),B=X(B,P);else if(!s&&!l&&o^d){var $=u;o?(V=1,B=fe(B,P,U),V=0,u=!1,B=fe(B,P,U),u=$):(V=0,B=fe(B,P,U),B=X(B,P),V=1,u=!1,B=fe(B,P,U),u=$,B=X(B,P))}}else V=0,B=fe(B,P,U);else V=o?1:0,B=fe(B,P,U);return B},this.__bidiEngine__.setOptions=function(B){B&&(s=B.isInputVisual,l=B.isOutputVisual,o=B.isInputRtl,d=B.isOutputRtl,u=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(r){var a=r.text,n=r.options||{},s=[];if(n.isInputVisual="boolean"!=typeof n.isInputVisual||n.isInputVisual,t.setOptions(n),"[object Array]"===Object.prototype.toString.call(a)){var o=0;for(s=[],o=0;o<a.length;o+=1)"[object Array]"===Object.prototype.toString.call(a[o])?s.push([t.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):s.push([t.doBidiReorder(a[o])]);r.text=s}else r.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])}(lt),lt.API.TTFFont=function(){function i(e){var t;if(this.rawData=e,t=this.contents=new Zn(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new qK(this),this.registerTTF()}return i.open=function(e){return new i(e)},i.prototype.parse=function(){return this.directory=new VK(this.contents),this.head=new FK(this),this.name=new zK(this),this.cmap=new k1(this),this.toUnicode={},this.hhea=new kK(this),this.maxp=new WK(this),this.hmtx=new $K(this),this.post=new HK(this),this.os2=new MK(this),this.loca=new jK(this),this.glyf=new KK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var t,r,a,n;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,o,l,d;for(d=[],s=0,o=(l=this.bbox).length;s<o;s++)d.push(Math.round(l[s]*this.scaleFactor));return d}.call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(n=this.familyClass)||2===n||3===n||4===n||5===n||7===n,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},i.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},i.prototype.widthOfString=function(e,t,r){var a,n,s,o;for(s=0,n=0,o=(e=""+e).length;0<=o?n<o:n>o;n=0<=o?++n:--n)a=e.charCodeAt(n),s+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/t)||0;return s*(t/1e3)},i.prototype.lineHeight=function(e,t){return null==t&&(t=!1),(this.ascender+(t?this.lineGap:0)-this.decender)/1e3*e},i}();var ta,Zn=function(){function i(e){this.data=e??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(e){return this.data[this.pos++]=e},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},i.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},i.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},i.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},i.prototype.writeString=function(e){var t,r,a;for(a=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(e){return this.writeInt16(e)},i.prototype.readLongLong=function(){var e,t,r,a,n,s,o,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),a=this.readByte(),n=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^n)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*a+16777216*n+65536*s+256*o+l},i.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(e){return this.writeInt32(e)},i.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},i.prototype.write=function(e){var r,a,n;for(n=[],r=0,a=e.length;r<a;r++)n.push(this.writeByte(e[r]));return n},i}(),VK=function(){var i;function e(t){var r,a,n;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,n=this.tableCount;0<=n?a<n:a>n;a=0<=n?++a:--a)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,a,s,o,l,d,u,c,f,p,g,w;for(w in p=Object.keys(t).length,l=Math.log(2),c=16*Math.floor(Math.log(p)/l),s=Math.floor(c/l),u=16*p-c,(a=new Zn).writeInt(this.scalarType),a.writeShort(p),a.writeShort(c),a.writeShort(s),a.writeShort(u),d=a.pos+16*p,o=null,g=[],t)for(f=t[w],a.writeString(w),a.writeInt(i(f)),a.writeInt(d),a.writeInt(f.length),g=g.concat(f),"head"===w&&(o=d),d+=f.length;d%4;)g.push(0),d++;return a.write(g),r=2981146554-i(a.data),a.pos=o+8,a.writeUInt32(r),a.data},i=function(t){var r,a,n,s;for(t=M1.call(t);t.length%4;)t.push(0);for(n=new Zn(t),a=0,r=0,s=t.length;r<s;r=r+=4)a+=n.readUInt32();return 4294967295&a},e}(),NK={}.hasOwnProperty,Ma=function(i,e){for(var t in e)NK.call(e,t)&&(i[t]=e[t]);function r(){this.constructor=i}return r.prototype=e.prototype,i.prototype=new r,i.__super__=e.prototype,i};ta=function(){function i(e){var t;this.file=e,this.exists=!!(t=this.file.directory.tables[this.tag]),t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i}();var FK=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ma(e,ta),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Zn).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),F1=function(){function i(e,t){var r,a,n,s,o,l,d,u,c,f,p,g,w,x,y,E,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),c=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),f=p/2,e.pos+=6,n=function(){var F,q;for(q=[],l=F=0;0<=f?F<f:F>f;l=0<=f?++F:--F)q.push(e.readUInt16());return q}(),e.pos+=2,w=function(){var F,q;for(q=[],l=F=0;0<=f?F<f:F>f;l=0<=f?++F:--F)q.push(e.readUInt16());return q}(),d=function(){var F,q;for(q=[],l=F=0;0<=f?F<f:F>f;l=0<=f?++F:--F)q.push(e.readUInt16());return q}(),u=function(){var F,q;for(q=[],l=F=0;0<=f?F<f:F>f;l=0<=f?++F:--F)q.push(e.readUInt16());return q}(),a=(this.length-e.pos+this.offset)/2,o=function(){var F,q;for(q=[],l=F=0;0<=a?F<a:F>a;l=0<=a?++F:--F)q.push(e.readUInt16());return q}(),l=y=0,V=n.length;y<V;l=++y)for(x=n[l],r=E=g=w[l];g<=x?E<=x:E>=x;r=g<=x?++E:--E)0===u[l]?s=r+d[l]:0!==(s=o[u[l]/2+(r-g)-(f-l)]||0)&&(s+=d[l]),this.codeMap[r]=65535&s}e.pos=c}return i.encode=function(e,t){var r,a,n,s,o,l,d,u,c,f,p,g,w,x,y,E,V,q,ee,X,M,le,fe,B,P,U,$,me,pe,xe,_e,Ae,Ie,Me,D,z,K,te,de,Ce,we,Se,ke,Fe,qe;switch($=new Zn,s=Object.keys(e).sort(function(Je,ht){return Je-ht}),t){case"macroman":for(w=0,x=function(){var Je=[];for(g=0;g<256;++g)Je.push(0);return Je}(),E={0:0},n={},me=0,Ae=s.length;me<Ae;me++)null==E[Se=e[a=s[me]]]&&(E[Se]=++w),n[a]={old:e[a],new:E[e[a]]},x[a]=E[e[a]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(x),{charMap:n,subtable:$.data,maxGlyphID:w+1};case"unicode":for(P=[],c=[],V=0,E={},r={},y=d=null,pe=0,Ie=s.length;pe<Ie;pe++)null==E[q=e[a=s[pe]]]&&(E[q]=++V),r[a]={old:q,new:E[q]},o=E[q]-a,null!=y&&o===d||(y&&c.push(y),P.push(a),d=o),y=a;for(y&&c.push(y),c.push(65535),P.push(65535),fe=2*(le=P.length),M=2*Math.pow(Math.log(le)/Math.LN2,2),f=Math.log(M/2)/Math.LN2,X=2*le-M,l=[],ee=[],p=[],g=xe=0,Me=P.length;xe<Me;g=++xe){if(u=c[g],65535===(B=P[g])){l.push(0),ee.push(0);break}if(B-(U=r[B].new)>=32768)for(l.push(0),ee.push(2*(p.length+le-g)),a=_e=B;B<=u?_e<=u:_e>=u;a=B<=u?++_e:--_e)p.push(r[a].new);else l.push(U-B),ee.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*le+2*p.length),$.writeUInt16(0),$.writeUInt16(fe),$.writeUInt16(M),$.writeUInt16(f),$.writeUInt16(X),Ce=0,D=c.length;Ce<D;Ce++)$.writeUInt16(a=c[Ce]);for($.writeUInt16(0),we=0,z=P.length;we<z;we++)$.writeUInt16(a=P[we]);for(ke=0,K=l.length;ke<K;ke++)$.writeUInt16(o=l[ke]);for(Fe=0,te=ee.length;Fe<te;Fe++)$.writeUInt16(ee[Fe]);for(qe=0,de=p.length;qe<de;qe++)$.writeUInt16(w=p[qe]);return{charMap:r,subtable:$.data,maxGlyphID:V+1}}},i}(),k1=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ma(e,ta),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,a,n;for(t.pos=this.offset,this.version=t.readUInt16(),n=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r=new F1(t,this.offset),this.tables.push(r),r.isUnicode&&null==this.unicode&&(this.unicode=r);return!0},e.encode=function(t,r){var a,n;return null==r&&(r="macroman"),a=F1.encode(t,r),(n=new Zn).writeUInt16(0),n.writeUInt16(1),a.table=n.data.concat(a.subtable),a},e}(),kK=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ma(e,ta),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),MK=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ma(e,ta),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,a;for(a=[],r=0;r<10;++r)a.push(t.readByte());return a}(),this.charRange=function(){var r,a;for(a=[],r=0;r<4;++r)a.push(t.readInt());return a}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(t.readInt());return a}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),HK=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ma(e,ta),e.prototype.tag="post",e.prototype.parse=function(t){var r,a,n;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(a=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],n=[];t.pos<this.offset+this.length;)r=t.readByte(),n.push(this.names.push(t.readString(r)));return n;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 262144:return this.map=function(){var o,l,d;for(d=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)d.push(t.readUInt32());return d}.call(this)}},e}(),ZK=function(i,e){this.raw=i,this.length=i.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zK=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ma(e,ta),e.prototype.tag="name",e.prototype.parse=function(t){var r,a,n,s,o,l,d,u,c,f,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),a=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(d={},s=c=0,f=a.length;c<f;s=++c)t.pos=(n=a[s]).offset,u=t.readString(n.length),o=new ZK(u,n),null==d[p=n.nameID]&&(d[p]=[]),d[n.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),WK=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ma(e,ta),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),$K=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ma(e,ta),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,a,n,o,l,d;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,c;for(c=[],r=u=0;0<=n?u<n:u>n;r=0<=n?++u:--u)c.push(t.readInt16());return c}(),this.widths=function(){var u,c,f,p;for(p=[],u=0,c=(f=this.metrics).length;u<c;u++)p.push(f[u].advance);return p}.call(this),a=this.widths[this.widths.length-1],d=[],r=o=0;0<=n?o<n:o>n;r=0<=n?++o:--o)d.push(this.widths.push(a));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),M1=[].slice,KK=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ma(e,ta),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,a,n,s,o,l,d,u,c,f;return t in this.cache?this.cache[t]:(r=this.file.contents,a=(s=this.file.loca).indexOf(t),0===(n=s.lengthOf(t))?this.cache[t]=null:(r.pos=this.offset+a,o=(l=new Zn(r.read(n))).readShort(),u=l.readShort(),f=l.readShort(),d=l.readShort(),c=l.readShort(),this.cache[t]=-1===o?new UK(l,u,f,d,c):new GK(l,o,u,f,d,c),this.cache[t]))},e.prototype.encode=function(t,r,a){var n,s,o,l,d;for(o=[],s=[],l=0,d=r.length;l<d;l++)n=t[r[l]],s.push(o.length),n&&(o=o.concat(n.encode(a)));return s.push(o.length),{table:o,offsets:s}},e}(),GK=function(){function i(e,t,r,a,n,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=a,this.xMax=n,this.yMax=s,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i}(),UK=function(){function i(e,t,r,a,n){var s,o;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=a,this.yMax=n,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return i.prototype.encode=function(){var e,t,r;for(t=new Zn(M1.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},i}(),jK=function(i){function e(){return e.__super__.constructor.apply(this,arguments)}return Ma(e,ta),e.prototype.tag="loca",e.prototype.parse=function(t){var a;return t.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?function(){var n,s;for(s=[],a=0,n=this.length;a<n;a+=2)s.push(2*t.readUInt16());return s}.call(this):function(){var n,s;for(s=[],a=0,n=this.length;a<n;a+=4)s.push(t.readUInt32());return s}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var a=new Uint32Array(this.offsets.length),n=0,s=0,o=0;o<a.length;++o)if(a[o]=n,s<r.length&&r[s]==o){++s,a[o]=n;var d=this.offsets[o+1]-this.offsets[o];d>0&&(n+=d)}for(var u=new Array(4*a.length),c=0;c<a.length;++c)u[4*c+3]=255&a[c],u[4*c+2]=(65280&a[c])>>8,u[4*c+1]=(16711680&a[c])>>16,u[4*c]=(4278190080&a[c])>>24;return u},e}(),qK=function(){function i(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var e,t,a,n;for(t in a=this.font.cmap.tables[0].codeMap,e={},n=this.subset)e[t]=a[n[t]];return e},i.prototype.glyphsFor=function(e){var t,r,a,n,s,o,l;for(a={},s=0,o=e.length;s<o;s++)a[n=e[s]]=this.font.glyf.glyphFor(n);for(n in t=[],a)null!=(r=a[n])&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(n in l=this.glyphsFor(t))a[n]=r=l[n];return a},i.prototype.encode=function(e,t){var r,a,n,s,l,d,u,c,f,p,g,w,x,y;for(a in r=k1.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),p={0:0},y=r.charMap)p[(l=y[a]).old]=l.new;for(g in f=r.maxGlyphID,s)g in p||(p[g]=f++);return u=function(E){var V,F;for(V in F={},E)F[E[V]]=V;return F}(p),c=Object.keys(u).sort(function(E,V){return E-V}),w=function(){var E,V,F;for(F=[],E=0,V=c.length;E<V;E++)F.push(u[c[E]]);return F}(),n=this.font.glyf.encode(s,w,p),d=this.font.loca.encode(n.offsets,w),x={cmap:this.font.cmap.raw(),glyf:n.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},i}();lt.API.PDFObject=function(){var i;function e(){}return i=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var a,n;if(Array.isArray(t))return"["+function(){var o,l,d;for(d=[],o=0,l=t.length;o<l;o++)d.push(e.convert(t[o]));return d}().join(" ")+"]";if("string"==typeof t)return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+i(t.getUTCFullYear(),4)+i(t.getUTCMonth(),2)+i(t.getUTCDate(),2)+i(t.getUTCHours(),2)+i(t.getUTCMinutes(),2)+i(t.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(t)){for(a in n=["<<"],t)n.push("/"+a+" "+e.convert(t[a]));return n.push(">>"),n.join("\n")}return""+t},e}();const YK=lt;var XK=be(8607),JK=be(1880);const QK=["projectsGrid"],eG=["usersGrid"];function tG(i,e){if(1&i&&(Z.TgZ(0,"div",31),Z._uU(1),Z.qZA()),2&i){const t=e.$implicit;Z.xp6(1),Z.hij(" ",t.value," ")}}function iG(i,e){if(1&i&&(Z.TgZ(0,"div"),Z._uU(1),Z.TgZ(2,"span",34),Z._uU(3),Z.qZA()()),2&i){const t=e.$implicit;Z.xp6(1),Z.hij(" ",t.technology," "),Z.xp6(2),Z.hij(" ",t.engineeringScore," ")}}function rG(i,e){if(1&i&&(Z.TgZ(0,"div")(1,"div",32),Z.YNc(2,iG,4,2,"div",33),Z.qZA()()),2&i){const t=e.$implicit;Z.xp6(2),Z.Q6J("ngForOf",t.data.skills)}}const aG=function(){return["pdf"]};function nG(i,e){if(1&i){const t=Z.EpF();Z.TgZ(0,"dx-data-grid",36,37),Z.NdJ("onExporting",function(a){Z.CHM(t);const n=Z.oxw(2);return Z.KtG(n.onExporting(a))}),Z._UZ(2,"dxi-column",38)(3,"dxi-column",39)(4,"dxi-column",40)(5,"dxo-export",41),Z.qZA()}if(2&i){const t=Z.oxw(2);Z.Q6J("dataSource",t.userHistory)("showBorders",!0),Z.xp6(5),Z.Q6J("enabled",!0)("formats",Z.DdM(4,aG))}}function sG(i,e){if(1&i&&(Z.TgZ(0,"div"),Z.YNc(1,nG,6,5,"dx-data-grid",35),Z.qZA()),2&i){const t=Z.oxw();Z.xp6(1),Z.Q6J("ngIf",t.selectedUser)}}function oG(i,e){if(1&i&&(Z.TgZ(0,"div"),Z._uU(1),Z.qZA()),2&i){const t=e.$implicit,r=Z.oxw().$implicit,a=Z.oxw();Z.xp6(1),Z.hij(" ",a.intersectedSkills(t.value,r.data.technologies)," ")}}function lG(i,e){if(1&i){const t=Z.EpF();Z.TgZ(0,"div")(1,"div",42)(2,"div"),Z._uU(3),Z.qZA(),Z.TgZ(4,"div"),Z._uU(5),Z.qZA()(),Z.TgZ(6,"dx-data-grid",43,44),Z.NdJ("onEditingStart",function(a){Z.CHM(t);const n=Z.oxw();return Z.KtG(n.onEditingStart(a))})("onRowUpdating",function(a){Z.CHM(t);const n=Z.oxw();return Z.KtG(n.onRowUpdating(a))})("onCellPrepared",function(a){Z.CHM(t);const n=Z.oxw();return Z.KtG(n.onCellPrepared(a))}),Z._UZ(8,"dxo-row-dragging",45)(9,"dxo-editing",46)(10,"dxi-column",47),Z.TgZ(11,"dxi-column",48),Z._UZ(12,"dxo-lookup",49),Z.qZA(),Z._UZ(13,"dxi-column",50),Z.YNc(14,oG,2,1,"div",13),Z.TgZ(15,"dxi-column",51),Z._UZ(16,"dxi-button",52),Z.qZA()()()}if(2&i){const t=e.$implicit,r=Z.oxw();Z.xp6(3),Z.AsE(" Aplicari pt. ",t.data.company," - ",t.data.project," "),Z.xp6(2),Z.AsE(" Open: ",r.calculateOpenAllocations(t.data.applications)," - Available: ",t.data.availablePositions," "),Z.xp6(1),Z.Q6J("dataSource",t.data.applications)("showBorders",!0)("columnAutoWidth",!0)("filterSyncEnabled",!0)("filterValue",r.dynamicFilterValue),Z.xp6(2),Z.MGl("data","applications-",t.data.id,""),Z.Q6J("showDragIcons",!1)("onDragStart",r.onProjectDragStart),Z.xp6(1),Z.Q6J("allowUpdating",!0)("allowDeleting",!0),Z.xp6(1),Z.Q6J("allowEditing",!1),Z.xp6(1),Z.Q6J("calculateCellValue",r.calculateStatus)("allowEditing",!0),Z.xp6(1),Z.Q6J("dataSource",r.statuses),Z.xp6(1),Z.Q6J("allowEditing",!1),Z.xp6(1),Z.Q6J("dxTemplateOf","skillsTemplate")}}const dG=function(){return{enabled:!0}},H1=function(i){return{dataSource:i}},uG=function(){return{mode:"virtual"}},hG=(i,e)=>e.engineeringScore-i.engineeringScore,Z1=i=>`${i.technology}(${i.engineeringScore})`,cG=[{path:"",component:(()=>{class i{onCellPrepared(t){"data"===t.rowType&&"statusArray"===t.column.dataField&&(t.cellElement.style.backgroundColor=this.getColorForStatus(t.data.statusArray))}onUserClick(t){this.selectedUser=t,this.getUserStatusHistory(this.selectedUser),this.popupVisible=!0}getUserStatusHistory(t){const r=[];for(const a of this.projects)for(const n of a.applications)if(n.user.id===t.id&&n.statusArray)for(const s of n.statusArray)r.push({project:`${a.company} - ${a.project}`,status:s.status,timestamp:s.timestamp});this.userHistory=r}constructor(t,r){this.projectService=t,this.userService=r,this.popupVisible=!1,this.style={},this.statuses=Object.values(gr.YG),this.statusArrayOnEditStart=[],this.users=this.userService.users(),this.projects=this.projectService.projects(),this.skillsSet=new Set(this.users.flatMap(a=>a.skills)),this.skills=[...this.skillsSet].map(Z1),this.technologiesSet=new Set(this.projects.flatMap(a=>a.technologies)),this.technologies=[...this.technologiesSet],this.dynamicFilterValue=null,this.isToggled=!1,this.isBindingToggled=!0,this.userHistory=[],this.selectedUser=null,this.onUserDragEnd=this.onUserDragEnd.bind(this)}toggleFilterAttributes(){this.dynamicFilterValue=this.isToggled?[]:["statusArray","noneof",[gr.YG.rejectedByCandidate,gr.YG.rejectedByClient,gr.YG.impossibleAllocation]],this.isToggled=!this.isToggled}toggleBindingProjects(){this.isBindingToggled?this.projectsGrid.instance.filter(["binding","=",!0]):this.projectsGrid.instance.clearFilter(),this.isBindingToggled=!this.isBindingToggled}isStatusActive(t){return[gr.YG.new,gr.YG.proposedToBl,gr.YG.proposedToClient,gr.YG.possibleAllocation].includes(t)}intersectedSkills(t,r){return t.map(a=>a.technology).filter(a=>r.includes(a))}calculateFilterExpression(t,r){return[this.calculateCellValue,"contains",t]}calculateCellValue(t){return function iK(i){return"id"in i&&"name"in i&&"cc"in i&&"skills"in i&&"type"in i}(t)?0===t.skills.length?"":t.skills.sort(hG).map(Z1).join(", "):(0,gr.W1)(t)?t.technologies.join(", "):t}calculateDisplayValue(t){return(0,gr.zQ)(t)?t.user.skills.join(", "):t}onProjectDragStart(t){t.cancel=!0}onUserDragEnd(t){var r=this;return(0,k8.Z)(function*(){if("users"!==t.fromData)return void(t.cancel=!0);if("projects"===t.toData&&!t.toData.startsWith("applications")&&!1===t.dropInsideItem)return t.cancel=!0,void Av("You cannot drop users here. Please drop the user inside a project.","error");let a;if("projects"===t.toData||t.toData.startsWith("applications")){if(a=0===t.toIndex?r.projects[0]?.id:r.projectsGrid.instance.getKeyByRowIndex(+t.toIndex),!a)return void console.error("Project ID not found.");r.projectsGrid.instance.expandRow(a)}const n=t.itemData,s=r.projects.find(o=>o.id===a);if(s){if(s.applications.find(u=>u.user.id===n.id))return void Av(`User ${n.name} is already allocated in project ${s.company} - ${s.project}`,"warning");(r.intersectedSkills(n.skills,s.technologies).length>0?yield Zf(`Are you sure you want to add ${n.name} to project ${s.company} - ${s.project}`,"Confirm"):yield Zf(`User ${n.name} does not have any relevant skills for project ${s.company} - ${s.project}. Are you sure you want to add him?`,"Skills mismatch"))&&(r.projectService.addUserToProject(n,s),Av(`User ${n.name} added to project ${s.company} - ${s.project}`,"success"))}})()}calculateStatus(t){return t.statusArray&&t.statusArray.length>0?t.statusArray[t.statusArray.length-1].status:gr.YG.new}onEditingStart(t){this.statusArrayOnEditStart=t.data.statusArray}onRowUpdating(t){t.newData.statusArray&&(t.oldData.statusArray.push({status:t.newData.statusArray,timestamp:new Date}),delete t.newData.statusArray)}calculateOpenAllocations(t){return t.filter(r=>{const a=this.calculateStatus(r);return a!==gr.YG.rejectedByCandidate&&a!==gr.YG.rejectedByClient&&a!==gr.YG.impossibleAllocation}).length}onExporting(t){const r=new YK;(function B7(i){return OI_export(function P7(i){if(!(0,m.$K)(i)||!(0,m.Kn)(i))throw Error('The "exportDataGrid" method requires a configuration object.');if(!(0,m.$K)(i.component)||!(0,m.Kn)(i.component)||"dxDataGrid"!==i.component.NAME)throw Error('The "component" field must contain a DataGrid instance.');if(!(0,m.$K)(i.jsPDFDocument)||!(0,m.Kn)(i.jsPDFDocument))throw Error('The "jsPDFDocument" field must contain a jsPDF instance.');return(0,m.$K)(i.autoTableOptions)&&bf.Z.log("W0001","Export","autoTableOptions","22.1","You can migrate from exporting to PDF with the AutoTable plugin to a new export system. See the following topic for more information: ".concat("https://supportcenter.devexpress.com/ticket/details/t1077554")),OI_getFullOptions(i)}(i))})({jsPDFDocument:r,component:t.component,indent:5}).then(()=>{r.save(`${this.selectedUser?.name}'s Profile.pdf`)})}getColorForStatus(t){switch(t[t.length-1]?.status){case"NEW":return"rgba(52, 152, 219, 0.2)";case"Propus BL":return"rgba(241, 196, 15, 0.2)";case"Propus Client":return"rgba(243, 156, 18, 0.2)";case"Alocare imposibila":case"Alocare respinsa client":case"Alocare respinsa candidat":return"rgba(231, 76, 60, 0.3)";case"Alocare posibila":case"Acceptat":return"rgba(46, 204, 113, 0.2)";default:return"rgba(211, 211, 211, 0.2)"}}static#e=this.\u0275fac=function(r){return new(r||i)(Z.Y36(XK.Y),Z.Y36(JK.K))};static#t=this.\u0275cmp=Z.Xpm({type:i,selectors:[["app-staffing-up"]],viewQuery:function(r,a){if(1&r&&(Z.Gf(QK,5),Z.Gf(eG,5)),2&r){let n;Z.iGM(n=Z.CRH())&&(a.projectsGrid=n.first),Z.iGM(n=Z.CRH())&&(a.usersGrid=n.first)}},decls:44,vars:57,consts:[[1,"overflow-hidden"],["id","wrapper",1,"flex","gap-1","p-3","h-[calc(100vh-60px)]","overflow-hidden"],["leftElement",""],["handles","right",1,"h-full","flex","flex-col","gap-1"],["height","100%","keyExpr","id",1,"border-b-2",3,"showBorders","showRowLines","dataSource","allowColumnReordering","hoverStateEnabled","onRowClick"],["usersGrid",""],["data","users","group","sameGroup",3,"allowReordering","allowDropInsideItem","onDragEnd"],[3,"visible","search"],["mode","select",3,"enabled"],["dataField","name","caption","Name","cellTemplate","nameTemplate"],["title","Display user history",4,"dxTemplate","dxTemplateOf"],["dataField","cc","caption","CC"],["dataField","skills","caption","Skills","cellTemplate","skillsCellTemplate",3,"lookup","calculateCellValue","calculateFilterExpression"],[4,"dxTemplate","dxTemplateOf"],["dataField","type","caption","Type","sortIndex","0","sortOrder","desc",1,"text-center",3,"width"],["location","after","name","columnChooserButton"],[3,"width","height","showTitle","title","dragEnabled","hideOnOutsideClick","visible","showCloseButton","visibleChange"],[1,"flex-2"],["rightElement",""],["height","100%","keyExpr","id",3,"dataSource","showBorders","scrolling","allowColumnReordering"],["projectsGrid",""],["data","projects","group","sameGroup",3,"allowDropInsideItem","allowReordering","showDragIcons","onDragStart"],[3,"visible"],["expandMode","rowClick",3,"autoExpandAll"],["dataField","company","sortOrder","asc",3,"groupIndex"],["dataField","project"],["dataField","technologies","caption","Technologies",3,"lookup","calculateCellValue","calculateFilterExpression"],["dataField","availablePositions"],["location","before","name","groupPanel"],["height","36px",3,"switchedOnText","switchedOffText","width","onValueChanged"],["template","detail",3,"enabled"],["title","Display user history"],[1,"skills-container"],[4,"ngFor","ngForOf"],[1,"skill-bubble"],[3,"dataSource","showBorders","onExporting",4,"ngIf"],[3,"dataSource","showBorders","onExporting"],["userHistoryGrid",""],["dataField","project","caption","Project"],["dataField","status","caption","Status"],["dataField","timestamp","caption","Timestamp","dataType","datetime"],[3,"enabled","formats"],[1,"mb-1","font-semibold","flex","justify-between"],["keyExpr","id",3,"dataSource","showBorders","columnAutoWidth","filterSyncEnabled","filterValue","onEditingStart","onRowUpdating","onCellPrepared"],["targetGrid",""],["group","sameGroup",3,"data","showDragIcons","onDragStart"],["mode","cell",3,"allowUpdating","allowDeleting"],["dataField","user.name","caption","Name",3,"allowEditing"],["dataField","statusArray","caption","Status",3,"calculateCellValue","allowEditing"],[3,"dataSource"],["dataField","user.skills","caption","Relevant skills","cellTemplate","skillsTemplate",3,"allowEditing"],["type","buttons"],["id","deleteBtn","name","delete","icon","trash"]],template:function(r,a){1&r&&(Z.TgZ(0,"div",0)(1,"div",1)(2,"div",null,2)(4,"dx-resizable",3)(5,"dx-data-grid",4,5),Z.NdJ("onRowClick",function(s){return a.onUserClick(s.data)}),Z._UZ(7,"dxo-row-dragging",6)(8,"dxo-header-filter",7)(9,"dxo-column-chooser",8)(10,"dxi-column",9),Z.YNc(11,tG,2,1,"div",10),Z._UZ(12,"dxi-column",11),Z.TgZ(13,"dxi-column",12),Z.YNc(14,rG,3,1,"div",13),Z.qZA(),Z._UZ(15,"dxi-column",14),Z.TgZ(16,"dxo-toolbar"),Z._UZ(17,"dxi-item",15)(18,"dxi-item",15),Z.qZA()(),Z.TgZ(19,"dx-popup",16),Z.NdJ("visibleChange",function(s){return a.popupVisible=s}),Z.YNc(20,sG,2,1,"div",13),Z.qZA()()(),Z.TgZ(21,"div",17,18)(23,"dx-data-grid",19,20),Z._UZ(25,"dxo-row-dragging",21)(26,"dxo-filter-row",22)(27,"dxo-header-filter",22)(28,"dxo-group-panel",22)(29,"dxo-grouping",23)(30,"dxo-column-chooser",8)(31,"dxi-column",24)(32,"dxi-column",25)(33,"dxi-column",26)(34,"dxi-column",27),Z.TgZ(35,"dxo-toolbar"),Z._UZ(36,"dxi-item",28),Z.TgZ(37,"dxi-item")(38,"dx-switch",29),Z.NdJ("onValueChanged",function(){return a.toggleBindingProjects()}),Z.qZA()(),Z.TgZ(39,"dxi-item")(40,"dx-switch",29),Z.NdJ("onValueChanged",function(){return a.toggleFilterAttributes()}),Z.qZA()(),Z._UZ(41,"dxi-item",15),Z.qZA(),Z._UZ(42,"dxo-master-detail",30),Z.YNc(43,lG,17,20,"div",13),Z.qZA()()()()),2&r&&(Z.xp6(5),Z.Q6J("showBorders",!0)("showRowLines",!0)("dataSource",a.users)("allowColumnReordering",!0)("hoverStateEnabled",!0),Z.xp6(2),Z.Q6J("allowReordering",!1)("allowDropInsideItem",!1)("onDragEnd",a.onUserDragEnd),Z.xp6(1),Z.Q6J("visible",!0)("search",Z.DdM(51,dG)),Z.xp6(1),Z.Q6J("enabled",!0),Z.xp6(2),Z.Q6J("dxTemplateOf","nameTemplate"),Z.xp6(2),Z.Q6J("lookup",Z.VKq(52,H1,a.skills))("calculateCellValue",a.calculateCellValue)("calculateFilterExpression",a.calculateFilterExpression),Z.xp6(1),Z.Q6J("dxTemplateOf","skillsCellTemplate"),Z.xp6(1),Z.Q6J("width",90),Z.xp6(4),Z.Q6J("width",660)("height",540)("showTitle",!0)("title",(null==a.selectedUser?null:a.selectedUser.name)+" - Allocation History")("dragEnabled",!1)("hideOnOutsideClick",!0)("visible",a.popupVisible)("showCloseButton",!0),Z.xp6(1),Z.Q6J("dxTemplateOf","content"),Z.xp6(3),Z.Q6J("dataSource",a.projects)("showBorders",!0)("scrolling",Z.DdM(54,uG))("allowColumnReordering",!0),Z.xp6(2),Z.Q6J("allowDropInsideItem",!0)("allowReordering",!1)("showDragIcons",!1)("onDragStart",a.onProjectDragStart),Z.xp6(1),Z.Q6J("visible",!0),Z.xp6(1),Z.Q6J("visible",!0),Z.xp6(1),Z.Q6J("visible",!0),Z.xp6(1),Z.Q6J("autoExpandAll",!1),Z.xp6(1),Z.Q6J("enabled",!0),Z.xp6(1),Z.Q6J("groupIndex",0),Z.xp6(2),Z.Q6J("lookup",Z.VKq(55,H1,a.technologies))("calculateCellValue",a.calculateCellValue)("calculateFilterExpression",a.calculateFilterExpression),Z.xp6(5),Z.Q6J("switchedOnText","Non-Binding")("switchedOffText","Binding")("width",140),Z.xp6(2),Z.Q6J("switchedOnText","Aplicari active")("switchedOffText","Toate aplicarile")("width",140),Z.xp6(2),Z.Q6J("enabled",!0),Z.xp6(1),Z.Q6J("dxTemplateOf","detail"))},dependencies:[as.sg,as.O5,m8,he.Auv,he.qvW,he.k4o,he.tZE,he.w3U,he.Uo8,he.ZT3,he.Ak0,he.I62,he.uCj,he.Een,he.N_X,he.CRh,he.y1f,ct.p6,gI,y8,I8],styles:[".dx-switch-container{height:36px}  .dx-switch-inner{height:36px}  .dx-switch-handle{height:30px}  .dx-switch-on,   .dx-switch-off{font-size:14px;line-height:36px}  .dx-datagrid .dx-link{color:#ef4444}  .dx-data-row.dx-state-hover{background-color:#96ceff33;cursor:pointer}.skills-container[_ngcontent-%COMP%]{white-space:normal}.skill-bubble[_ngcontent-%COMP%]{background-color:#007bff3f;color:#000;padding:1px 6px;border-radius:50%;margin:5px;font-size:12px}"]})}return i})()}];let pG=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=Z.oAB({type:i});static#i=this.\u0275inj=Z.cJS({imports:[mI.Bz.forChild(cG),mI.Bz]})}return i})();var fG=be(6208);let _G=(()=>{class i{static#e=this.\u0275fac=function(r){return new(r||i)};static#t=this.\u0275mod=Z.oAB({type:i});static#i=this.\u0275inj=Z.cJS({imports:[as.ez,pG,C8,b8.e,F8,x8,fG.m,T8,ct.ie]})}return i})()},1002:(ST,ou,be)=>{function as(js){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Z){return typeof Z}:function(Z){return Z&&"function"==typeof Symbol&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z})(js)}be.d(ou,{Z:()=>as})}}]);