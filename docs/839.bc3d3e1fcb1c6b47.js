"use strict";(self.webpackChunkfull_app=self.webpackChunkfull_app||[]).push([[839],{7839:(P1,Zd,ve)=>{ve.r(Zd),ve.d(Zd,{StaffingUpModule:()=>DW});var pn=ve(6814),nl=ve(6593),W=ve(4946),at=ve(3306),b=ve(498),B=ve(646),Y=ve(6673),we=ve(7825),C=ve(557),z=ve(9556),ae=ve(4459),Ee=ve(4823),le=ve(3391),Ec="dx-state-focused",F1="dx-cell-focus-disabled",Hg=".dx-datagrid-rowsview .dx-row",Zg="".concat(Hg," > td"),zg=".dx-treelist-rowsview .dx-row",Wg="".concat(zg," > td"),Kg={groupPanel:[".dx-datagrid-group-panel .dx-group-panel-item[tabindex]"],columnHeaders:[".dx-datagrid-headers .dx-header-row > td.dx-datagrid-action",".dx-treelist-headers .dx-header-row > td.dx-treelist-action"],filterRow:[".dx-datagrid-headers .dx-datagrid-filter-row .dx-editor-cell .dx-texteditor-input",".dx-treelist-headers .dx-treelist-filter-row .dx-editor-cell .dx-texteditor-input"],rowsView:["".concat(".dx-row-focused"),"".concat(Hg,"[tabindex]"),"".concat(Zg,"[tabindex]"),"".concat(Zg),"".concat(zg,"[tabindex]"),"".concat(Wg,"[tabindex]"),"".concat(Wg)],footer:[".dx-datagrid-total-footer .dx-datagrid-summary-item",".dx-treelist-total-footer .dx-treelist-summary-item"],filterPanel:[".dx-datagrid-filter-panel .dx-icon-filter",".dx-treelist-filter-panel .dx-icon-filter"],pager:[".dx-datagrid-pager [tabindex]",".dx-treelist-pager [tabindex]"]},Ic=!1,zd=!1,ks=null;function $g(r,e){var t=(0,b.Z)(r),i=t.attr("aria-label"),n=Gg(i,e.element()).index(t);ks=(0,B.l)({},{ariaLabel:i,index:n},{viewInstance:e})}function Gg(r,e){return(0,b.Z)(e).find(r?'[aria-label="'.concat(r,'"][tabindex]'):"[tabindex]")}function B1(r,e){var t=e?.getRootNode()||at.Z.getDocument();for(var i in r){var a=r[i],n=(0,b.Z)(t).find(a).first();if(n.length)return n}}function Ug(){zd="visible"===at.Z.getDocument().visibilityState}function jg(){z.Z.off(at.Z.getDocument(),"visibilitychange",Ug)}function qg(r,e,t,i,a,n){if(e.option("useLegacyKeyboardNavigation"))return le.ZT;var s=()=>(0,b.Z)(e.element()),o=u=>function N1(r,e,t,i,a,n){var s=function k1(r,e,t){var i={event:e,handled:!1};return t?t(i):r._createActionByOption("onKeyDown")(i),i.handled}(e,t.originalEvent,n);if(!s){var o=(0,Ee.EV)(t);"enter"===o||"space"===o?($g(t.target,e),i&&i({event:t})):"tab"===o?a.addClass(Ec):Tc(r,e,t)}}(r,e,u,a,s(),n),l=()=>{Ic=!0,s().removeClass(Ec)},d=()=>{!Ic&&!zd&&s().addClass(Ec),Ic=!1};return z.Z.on(t,"keydown",i,o),z.Z.on(t,"mousedown",i,l),z.Z.on(t,"focusin",i,d),()=>{z.Z.off(t,"keydown",i,o),z.Z.off(t,"mousedown",i,l),z.Z.off(t,"focusin",i,d)}}function Ac(r){if(!r.option("useLegacyKeyboardNavigation")&&ks){var e=ks.viewInstance;if(e){var i=Gg(ks.ariaLabel,e.element()).eq(ks.index);ks=null,z.Z.trigger(i,"focus")}}}function Tc(r,e,t){var i=(0,Ee.EV)(t);if(t.ctrlKey&&("upArrow"===i||"downArrow"===i))for(var a=Object.keys(Kg),n=a.indexOf(r);n>=0&&n<a.length;){n="upArrow"===i?--n:++n;var l=B1(Kg[a[n]],t.target);if(l&&l.length){l.attr("tabindex",e.option("tabindex")||0),z.Z.trigger(l,"focus"),l.removeClass(F1);break}}}var sl=function(r,e,t,i,a){var n=e.getController("keyboardNavigation");e.option("useLegacyKeyboardNavigation")||n&&!n.isKeyboardEnabled()||(e.createAction("onKeyDown"),qg(r,e,t,i,a,s=>{e.executeAction("onKeyDown",s)}))},lt=ve(7285),Ms=ve(692),Pi=ve(9846),ni=ve(120),X=ve(3687),li=ve(4813),nr=ve(8182),qn=ve(5386),Je=ve(6831),Ft=ve(344),Ba=ve(5874),ha=ve(1664),Hs="dxdblclick",Yg=(0,Ee.V4)(Ft.u,"dxDblClick"),W1=Ba.Z.inherit({ctor(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick(){this._firstClickTarget=null,this._lastClickTimeStamp=-300},add(){this._handlerCount<=0&&z.Z.on(at.Z.getDocument(),Yg,this._clickHandler.bind(this)),this._handlerCount+=1},_clickHandler(r){var e=r.timeStamp||Date.now(),t=e-this._lastClickTimeStamp;!(t<0)&&t<300?((0,Ee.BX)({type:Hs,target:(0,ha.Ls)(this._firstClickTarget,r.target),originalEvent:r}),this._forgetLastClick()):(this._firstClickTarget=r.target,this._lastClickTimeStamp=e)},remove(){this._handlerCount-=1,this._handlerCount<=0&&(this._forgetLastClick(),z.Z.off(at.Z.getDocument(),Yg,void 0),this._handlerCount=0)}}),K1=new W1;(0,ve(6078).Z)(Hs,K1);var kt=ve(9627),Yn=ve(8126),Jg="dx-column-indicators",U1=r=>class extends r{_applyColumnState(e){var t,i=this.option("rtlEnabled"),a=this._getColumnAlignment(e.column.alignment,i),n=(0,B.l)(!0,{columnAlignment:a},e),s=n.rootElement.hasClass("dx-group-panel-item"),o=this._createIndicatorContainer(n,s),l=(0,b.Z)("<span>").addClass(this._getIndicatorClassName(e.name)),d=null===(t=this.component)||void 0===t?void 0:t.getController("columns"),u=d?.getHeaderContentAlignment(a)||a;return n.container=o,n.indicator=l,this._renderIndicator(n),o[!s&&e.showColumnLines||"left"!==u?"prependTo":"appendTo"](e.rootElement),l}_getIndicatorClassName(e){}_getColumnAlignment(e,t){return t=t||this.option("rtlEnabled"),e&&"center"!==e?e:(0,li.q)(t)}_createIndicatorContainer(e,t){var i=this._getIndicatorContainer(e.rootElement),a="left"===e.columnAlignment?"right":"left";return i.length||(i=(0,b.Z)("<div>").addClass(Jg)),this.setAria("role","presentation",i),i.css("float",e.showColumnLines&&!t?a:null)}_getIndicatorContainer(e){return e&&e.find(".".concat(Jg))}_getIndicatorElements(e){var t=this._getIndicatorContainer(e);return t&&t.children()}_renderIndicator(e){var t=e.container,i=e.indicator;t&&i&&t.append(i)}_updateIndicators(e){var a,t=this.getColumns(),i=this.getColumnElements();if(i&&t.length===i.length)for(var n=0;n<t.length;n++){a=i.eq(n),this._updateIndicator(a,t[n],e);var s=a.parent().data("options");s&&s.cells&&(s.cells[a.index()].column=t[n])}}_updateIndicator(e,t,i){if(!t.command)return this._applyColumnState({name:i,rootElement:e,column:t,showColumnLines:this.option("showColumnLines")})}},ye=ve(7462),sr=ve(9343),At=ve(977),Qg=(r,e)=>{var t,i=Object.values(r).find(a=>{var n;return null===(n=a?.element())||void 0===n?void 0:n.hasClass(e)});return null!==(t=i?.element())&&void 0!==t?t:null};class e_{constructor(e){var t=this;t._updateLockCount=0,t.component=e,t._actions={},t._actionConfigs={},(0,Y.S6)(this.callbackNames()||[],function(i,a){var n=t.callbackFlags(a)||{};n.unique=!0,n.syncStrategy=!0,t[this]=(0,sr.Z)(n)})}_endUpdateCore(){}init(){}callbackNames(){}callbackFlags(e){}publicMethods(){return[]}beginUpdate(){this._updateLockCount++}endUpdate(){this._updateLockCount>0&&(this._updateLockCount--,this._updateLockCount||this._endUpdateCore())}option(e){var{component:t}=this,i=t._optionCache;return 1===arguments.length&&i?(e in i||(i[e]=t.option(e)),i[e]):t.option.apply(t,arguments)}_silentOption(e,t){var{component:i}=this,a=i._optionCache;return a&&(a[e]=t),i._setOptionWithoutOptionChange(e,t)}localize(e){var t=this.component._optionCache;return t?(e in t||(t[e]=ae.Z.format(e)),t[e]):ae.Z.format(e)}on(e,t){return this.component.on.apply(this.component,arguments)}off(){return this.component.off.apply(this.component,arguments)}optionChanged(e){e.name in this._actions&&(this.createAction(e.name,this._actionConfigs[e.name]),e.handled=!0)}getAction(e){return this._actions[e]}setAria(e,t,i){var a=i.get(0),n="role"!==e&&"id"!==e?"aria-":"";a.setAttribute?a.setAttribute(n+e,t):i.attr(n+e,t)}_createComponent(e,t,i){return this.component._createComponent(e,t,i)}getController(e){return this.component._controllers[e]}createAction(e,t){if((0,C.mf)(e)){var i=this.component._createAction(e.bind(this),t);return function(a){i({event:a})}}this._actions[e]=this.component._createActionByOption(e,t),this._actionConfigs[e]=t}executeAction(e,t){var i=this._actions[e];return i&&i(t)}dispose(){var e=this;(0,Y.S6)(e.callbackNames()||[],function(){e[this].empty()})}addWidgetPrefix(e){return"dx-".concat(this.component.NAME.slice(2).toLowerCase()).concat(e?"-".concat(e):"")}getWidgetContainerClass(){return this.addWidgetPrefix("dxDataGrid"===this.component.NAME?null:"container")}elementIsInsideGrid(e){return e.closest(".".concat(this.getWidgetContainerClass())).parent().is(this.component.$element())}}class Dc extends e_{}class t_ extends e_{constructor(e){super(e),this.renderCompleted=(0,sr.Z)(),this.resizeCompleted=(0,sr.Z)()}_isReady(){return this.component.isReady()}_endUpdateCore(){super._endUpdateCore(),!this._isReady()&&this._requireReady&&(this._requireRender=!1,this.component._requireResize=!1),this._requireRender&&(this._requireRender=!1,this.render(this._$parent))}_invalidate(e,t){this._requireRender=!0,this.component._requireResize=(0,Je.Ym)()&&(this.component._requireResize||e),this._requireReady=this._requireReady||t}_renderCore(e){}_resizeCore(){}_parentElement(){return this._$parent}element(){return this._$element}getElementHeight(){var e=this.element();if(!e)return 0;var t=parseFloat(e.css("marginTop"))||0,i=parseFloat(e.css("marginBottom"))||0,{offsetHeight:a}=e.get(0);return a+t+i}isVisible(){return!0}getTemplate(e){return this.component._getTemplate(e)}getView(e){return this.component._views[e]}_getBorderedViews(){return{columnHeadersView:this.component._views.columnHeadersView,rowsView:this.component._views.rowsView,filterPanelView:this.component._views.filterPanelView,footerView:this.component._views.footerView}}render(e,t){var i=this._$element,a=this.isVisible();if((i||e)&&(this._requireReady=!1,i||(i=this._$element=(0,b.Z)("<div>").appendTo(e),this._$parent=e),i.toggleClass("dx-hidden",!a),this.component._views&&((r,e)=>{if(((r,e)=>{var t;if(!Object.keys(e).includes(r))return!1;var{rowsView:i}=e,a=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(r);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(t[i[a]]=r[i[a]])}return t}(e,["rowsView"]);return!!(0,C.$K)(null===(t=i?.element)||void 0===t?void 0:t.call(i))&&Object.values(a).filter(n=>{var s;return null===(s=n?.isVisible)||void 0===s?void 0:s.call(n)}).every(n=>(0,C.$K)(n?.element()))})(r,e)){var t=Qg(e,"dx-bordered-top-view"),i=Qg(e,"dx-bordered-bottom-view"),a=(r=>{var{columnHeadersView:e,rowsView:t}=r;return e?.isVisible()?e.element():t.element()})(e),n=(r=>{var{filterPanelView:e,footerView:t,rowsView:i}=r;return e?.isVisible()?e.element():t?.isVisible()?t.element():i.element()})(e);t&&!t.is(a)&&t.removeClass("dx-bordered-top-view"),i&&!i.is(n)&&i.removeClass("dx-bordered-bottom-view"),a.hasClass("dx-bordered-top-view")||a.addClass("dx-bordered-top-view"),n.hasClass("dx-bordered-bottom-view")||n.addClass("dx-bordered-bottom-view")}})(this.name,this._getBorderedViews()),a)){this.component._optionCache={};var n=this._renderCore(t);this.component._optionCache=void 0,n?n.done(()=>{this.renderCompleted.fire(t)}):this.renderCompleted.fire(t)}}resize(){this.isResizing=!0,this._resizeCore(),this.resizeCompleted.fire(),this.isResizing=!1}focus(e){this.element().get(0).focus({preventScroll:e})}}function r_(r){var t={};return Object.entries(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).forEach(i=>{var[a,n]=i,s=r[a];s&&(t[a]=(0,C.mf)(n)?n(s):s.inherit(n))}),t}const Vt={modules:[],View:t_,ViewController:class eI extends Dc{getView(e){return this.component._views[e]}getViews(){return this.component._views}},Controller:Dc,registerModule(r,e){for(var{modules:t}=this,i=0;i<t.length;i++)if(t[i].name===r)return;e.name=r,t.push(e)},registerModulesOrder(r){this.modulesOrder=r},unregisterModule(r){this.modules=(0,le.h3)(this.modules,e=>e.name!==r)},processModules:function iI(r,e){var{modules:t}=e,{modulesOrder:i}=e;function a(u){var c={};return(0,Y.S6)(u,(f,p)=>{var _=new p(r);_.name=f,function tI(r,e,t){var i=t.publicMethods();i&&(0,Y.S6)(i,(a,n)=>{if(!t[n])throw At.Z.Error("E1006",e,n);if(r[n])throw At.Z.Error("E1005",n);r[n]=function(){return t[n](...arguments)}})}(r,f,_),c[f]=_}),c}i&&t.sort((u,c)=>{var f=i.indexOf(u.name),p=i.indexOf(c.name);return f<0&&(f=1e6),p<0&&(p=1e6),f-p});var n={},s={};t.forEach(u=>{var{name:c,controllers:f={},views:p={}}=u;Object.entries(f).forEach(_=>{var[w,S]=_;if(n[w])throw At.Z.Error("E1001",c,w);if(!(S?.prototype instanceof Dc))throw At.Z.Error("E1002",c,w);n[w]=S}),Object.entries(p).forEach(_=>{var[w,S]=_;if(s[w])throw At.Z.Error("E1003",c,w);if(!(S?.prototype instanceof t_))throw At.Z.Error("E1004",c,w);s[w]=S})});var o=t.filter(u=>{var{extenders:c}=u;return!!c}),l=o.reduce((u,c)=>{var{extenders:f}=c;return(0,ye.Z)((0,ye.Z)({},u),r_(u,f?.controllers))},n),d=o.reduce((u,c)=>{var{extenders:f}=c;return(0,ye.Z)((0,ye.Z)({},u),r_(u,f?.views))},s);r._controllers=a(l),r._views=a(d)},callModuleItemsMethod:function(r,e,t){t=t||[],r._controllers&&(0,Y.S6)(r._controllers,function(){this[e]&&this[e].apply(this,t)}),r._views&&(0,Y.S6)(r._views,function(){this[e]&&this[e].apply(this,t)})}};var Ot=ve(9754),ca=ve(265),zr=ve(8021),vn=ve(9024),ol=ve(9840),ka=ve(2649),a_=ve(1225),n_=ve(7885),aI=["year","month","day"],nI=["year","month","day","hour","minute"],Oc=function(r){return"date"===r||"datetime"===r},Rc=function(r){var e,t=[],i=["year","month","day","hour","minute","second"],a=r.headerFilter&&r.headerFilter.groupInterval,n="quarter"===a?"month":a;return Oc(r.dataType)&&null!==a?(t="datetime"===r.dataType?nI:aI,(e=i.indexOf(n))>=0&&(t=i.slice(0,e)).push(a),t):(0,C.$K)(a)?Array.isArray(a)?a:[a]:void 0};const Xn=(r=function(a,n){var s=a.dataField||a.selector;return"search"===n&&(s=a.displayField||a.calculateDisplayValue||s),s},e=function(a,n){var s,o,l,u,d=r(this,n);if(Array.isArray(a)&&(0,C.$K)(a[0])&&(0,C.$K)(a[1]))return o=[d,">=",a[0]],l=[d,"<=",a[1]],Oc(this.dataType)&&(u=a[1]).getHours()+u.getMinutes()+u.getSeconds()+u.getMilliseconds()<1&&(s=new Date(a[1].getTime()),"date"===this.dataType&&s.setDate(a[1].getDate()+1),l=[d,"<",s]),[o,"and",l]},t=function(a,n,s){var o,l,d,f,u=(0,C.J_)(f=a)?[f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()]:(0,Y.UI)((""+f).split("/"),function(p,_){return 1===_?Number(p)-1:Number(p)}),c=r(this,s);switch("headerFilter"===s?d=Rc(this)[u.length-1]:"datetime"===this.dataType&&(d="minute"),d){case"year":o=new Date(u[0],0,1),l=new Date(u[0]+1,0,1);break;case"month":o=new Date(u[0],u[1],1),l=new Date(u[0],u[1]+1,1);break;case"quarter":o=new Date(u[0],3*u[1],1),l=new Date(u[0],3*u[1]+3,1);break;case"hour":o=new Date(u[0],u[1],u[2],u[3]),l=new Date(u[0],u[1],u[2],u[3]+1);break;case"minute":o=new Date(u[0],u[1],u[2],u[3],u[4]),l=new Date(u[0],u[1],u[2],u[3],u[4]+1);break;case"second":o=new Date(u[0],u[1],u[2],u[3],u[4],u[5]),l=new Date(u[0],u[1],u[2],u[3],u[4],u[5]+1);break;default:o=new Date(u[0],u[1],u[2]),l=new Date(u[0],u[1],u[2]+1)}switch(n){case"<":return[c,"<",o];case"<=":return[c,"<",l];case">":return[c,">=",l];case">=":return[c,">=",o];case"<>":return[[c,"<",o],"or",[c,">=",l]];default:return[[c,">=",o],"and",[c,"<",l]]}},i=function(a,n,s){var o=r(this,s),l=Rc(this);if("headerFilter"===s&&l&&(0,C.$K)(a)){var d=(""+a).split("/"),u=Number(d[d.length-1]);return[[o,">=",u],"and",[o,"<",u+l[d.length-1]]]}return[o,n||"=",a]},{defaultCalculateFilterExpression:function(a,n,s){var o=this,l=r(o,s),d=o.calculateDisplayValue&&"search"===s,u=d&&o.lookup&&o.lookup.dataType||o.dataType,c=null;if("headerFilter"!==s&&"filterBuilder"!==s||null!==a)if("string"!==u||o.lookup&&!d){if("between"===n)return e.apply(o,[a,s]);if(Oc(u)&&(0,C.$K)(a))return t.apply(o,arguments);if("number"===u)return i.apply(o,arguments);c=[l,n||"=",a]}else c=[l,n||"contains",a];else c=[l,n||"=",null],"string"===u&&(c=[c,"="===n?"or":"and",[l,n||"=",""]]);return c},getGroupInterval:Rc});var r,e,t,i,s_="virtual",o_="scrolling.mode",fI={year:r=>r&&r.getFullYear(),month:r=>r&&r.getMonth()+1,day:r=>r&&r.getDate(),quarter:r=>r&&Math.floor(r.getMonth()/3)+1,hour:r=>r&&r.getHours(),minute:r=>r&&r.getMinutes(),second:r=>r&&r.getSeconds()},vI=function(){var e=this.calculateCellValue(arguments[1]);if(!(0,C.$K)(e))return null;if(l_(this.dataType))return fI[arguments[0]](e);if("number"===this.dataType){var i=arguments[0];return Math.floor(Number(e)/i)*i}},gI=function(r,e){return(0,C.mf)(r)&&(0,C.mf)(e)&&r.originalCallback&&e.originalCallback?r.originalCallback===e.originalCallback&&r.columnIndex===e.columnIndex:r===e};function l_(r){return"date"===r||"datetime"===r}var d_=function(r){r.get(0).textContent="\xa0"},Lc=function(r){for(var e=(0,ka.G5)(r=r||[]),t=0;t<r.length;t++)r&&r[t]&&void 0!==r[t].isExpanded&&(e[t].isExpanded=r[t].isExpanded),r&&r[t]&&void 0!==r[t].groupInterval&&(e[t].groupInterval=r[t].groupInterval);return e},u_=function(r,e){var t=a_.Z.format(r,e.format)||r&&r.toString()||"",i={value:r,valueText:e.getDisplayFormat?e.getDisplayFormat(t):t,target:e.target||"row",groupInterval:e.groupInterval};return e.customizeText?e.customizeText.call(e,i):i.valueText},h_=function(r,e){var t=r.displayFormat||r.columnCaption&&e["".concat(r.summaryType,"OtherColumn")]||e[r.summaryType];return u_(r.value,{format:r.valueFormat,getDisplayFormat:i=>t?(0,ca.WU)(t,i,r.columnCaption):i,customizeText:r.customizeText})},c_=function(r){var e=r.data&&r.data(),t=e&&e.dxComponents,i=t&&t[0];return i&&e[i]};const Ae={renderNoDataText(r){if(r=r||this.element()){var e=this.addWidgetPrefix("nodata"),t=r.find(".".concat(e)).last(),i=this._dataController.isEmpty(),a=this._dataController.isLoading();t.length||(t=(0,b.Z)("<span>").addClass(e)),t.parent().is(r)||t.appendTo(r),i&&!a?t.removeClass("dx-hidden").text(this._getNoDataText()):t.addClass("dx-hidden")}},renderLoadPanel(r,e,t){var i;this._loadPanel&&this._loadPanel.$element().remove(),(i=this.option("loadPanel"))&&("auto"===i.enabled?!t:i.enabled)?(i=(0,B.l)({shading:!1,message:i.text,container:e},i),this._loadPanel=this._createComponent((0,b.Z)("<div>").appendTo(e),n_.Z,i)):this._loadPanel=null},calculateLoadPanelPosition(r){var e=(0,b.Z)((0,Je.Jj)());return(0,we.Cr)(r)>(0,we.Cr)(e)?{of:e,boundary:r,collision:"fit"}:{of:r}},getIndexByKey(r,e,t){var i=-1;if(void 0!==r&&Array.isArray(e)){t=arguments.length<=2?"key":t;for(var a=0;a<e.length;a++){var n=(0,C.$K)(t)?e[a][t]:e[a];if((0,le.bY)(r,n)){i=a;break}}}return i},combineFilters(r,e){var t,i=[];e=e||"and";for(var a=0;a<r.length;a++)if(r[a]){if(1===(null===(t=r[a])||void 0===t?void 0:t.length)&&"!"===r[a][0]){if("and"===e)return["!"];if("or"===e)continue}i.length&&i.push(e),i.push(r[a])}if(1===i.length&&(i=i[0]),i.length)return i},checkChanges(r,e){for(var t=0,i=0;i<e.length;i++)r[e[i]]&&t++;return r.length&&r.length===t},equalFilterParameters:function r(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1;return!0}return(0,C.mf)(e)&&e.columnIndex>=0&&(0,C.mf)(t)&&t.columnIndex>=0?e.columnIndex===t.columnIndex&&(0,Ot.Ex)(e.filterValue)===(0,Ot.Ex)(t.filterValue)&&(0,Ot.Ex)(e.selectedFilterOperation)===(0,Ot.Ex)(t.selectedFilterOperation):(0,Ot.Ex)(e)==(0,Ot.Ex)(t)},proxyMethod(r,e,t){r[e]||(r[e]=function(){var i=this._dataSource;return i?i[e].apply(i,arguments):t})},formatValue:u_,getFormatOptionsByColumn:(r,e)=>({format:r.format,getDisplayFormat:r.getDisplayFormat,customizeText:r.customizeText,target:e,trueText:r.trueText,falseText:r.falseText}),getDisplayValue:(r,e,t,i)=>r.displayValueMap&&void 0!==r.displayValueMap[e]?r.displayValueMap[e]:r.calculateDisplayValue&&t&&"group"!==i?r.calculateDisplayValue(t):!r.lookup||"group"===i&&(r.calculateGroupValue||r.calculateDisplayValue)?e:r.lookup.calculateCellValue(e),getGroupRowSummaryText(r,e){for(var t="(",i=0;i<r.length;i++)t+=(i>0?", ":"")+h_(r[i],e);return t+")"},getSummaryText:h_,normalizeSortingInfo:Lc,getFormatByDataType(r){switch(r){case"date":return"shortDate";case"datetime":return"shortDateShortTime";default:return}},getHeaderFilterGroupParameters(r,e){var t=[],i=r.dataField||r.name,a=Xn.getGroupInterval(r);return a?((0,Y.S6)(a,(n,s)=>{t.push(e?{selector:i,groupInterval:s,isExpanded:n<a.length-1}:vI.bind(r,s))}),t):(e?t=[{selector:i,isExpanded:!1}]:(t=function(n){var s=r.calculateCellValue(n);return(void 0===s||""===s)&&(s=null),s},r.sortingMethod&&(t=[{selector:t,compare:r.sortingMethod.bind(r)}])),t)},equalSortParameters(r,e,t){if(r=Lc(r),e=Lc(e),Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;for(var i=0;i<r.length;i++)if(!gI(r[i].selector,e[i].selector)||r[i].desc!==e[i].desc||r[i].groupInterval!==e[i].groupInterval||!t&&!!r[i].isExpanded!=!!e[i].isExpanded)return!1;return!0}return(!r||!r.length)==(!e||!e.length)},getPointsByColumns(r,e,t,i){for(var s,o,u,a=r.length,n=!1,l=i||0,d=[],c=0;c<=a;c++){c<a&&(o=(s=r.eq(c)).offset(),u="rtl"===s.css("direction"));var f={index:l,x:o?o.left+(!t&&u^c===a?(0,li.l)(s[0]).width:0):0,y:o?o.top+(t&&c===a?(0,li.l)(s[0]).height:0):0,columnIndex:l};if(!t&&c>0){var p=r.eq(c-1).offset();p.top<f.y&&(f.y=p.top)}e&&(n=e(f)),n||d.push(f),l++}return d},getExpandCellTemplate:()=>({allowRenderToDetachedContainer:!0,render(r,e){var t=(0,b.Z)(r);if(!(0,C.$K)(e.value)||e.data&&e.data.isContinuation||e.row.isNewRow)d_(t);else{var i=e.component.getView("rowsView");t.addClass("dx-datagrid-expand").addClass("dx-selection-disabled"),(0,b.Z)("<div>").addClass(e.value?"dx-datagrid-group-opened":"dx-datagrid-group-closed").appendTo(t),i.setAria("label",i.localize(e.value?"dxDataGrid-ariaCollapse":"dxDataGrid-ariaExpand"),t)}}}),setEmptyText:d_,isDateType:l_,getSelectionRange(r){try{if(r)return{selectionStart:r.selectionStart,selectionEnd:r.selectionEnd}}catch{}return{}},setSelectionRange(r,e){try{r&&r.setSelectionRange&&r.setSelectionRange(e.selectionStart,e.selectionEnd)}catch{}},focusAndSelectElement(r,e){var t=e.is(":focus");z.Z.trigger(e,"focus");var i=r.option("editing.selectTextOnEditStart"),a=e.get(0);if(!t&&i&&e.is(".dx-texteditor-input")&&!e.is("[readonly]")){var n=c_(e.closest(".dx-texteditor"));(0,X.gx)(n&&n._loadItemDeferred).done(()=>{a.select()})}},getWidgetInstance:c_,getLastResizableColumnIndex(r,e){var i,t=r.some(o=>o&&!o.command&&!o.fixed&&!1!==o.allowResizing);for(i=r.length-1;r[i];i--){var a=r[i];if(!(a.command||a.fixed||"adaptiveHidden"===(e&&e[i])||t&&!1===a.allowResizing))break}return i},isElementInCurrentGrid:(r,e)=>!(!e||!e.length)&&e.closest(".".concat(r.getWidgetContainerClass())).parent().is(r.component.$element()),isVirtualRowRendering(r){var e=r.option("scrolling.rowRenderingMode"),t=r.option(o_)===s_,i="infinite"===r.option(o_);return!(!1!==r.option("scrolling.legacyMode")||!t&&!i)||e===s_},getPixelRatio:r=>r.devicePixelRatio||1,getContentHeightLimit(r){return r.mozilla?8e6:15e6/this.getPixelRatio((0,Je.Jj)())},normalizeLookupDataSource(r){var e;return r.items?e=r.items:(0,C.mf)(e=r.dataSource)&&!zr.default.isWrapped(e)&&(e=e({})),(0,ol.aN)(e)},getWrappedLookupDataSource(r,e,t){if(!e)return[];var i=this.normalizeLookupDataSource(r.lookup);if(r.calculateCellValue!==r.defaultCalculateCellValue)return i;var s,o,l,a=e.remoteOperations().groupPaging,n=r.displayField&&(0,C.HD)(r.displayField),d=(c,f)=>{var p,_=null!==(p=f.skip)&&void 0!==p?p:0;return c.slice(_,f.take?_+f.take:c.length)},u=(0,ye.Z)((0,ye.Z)({},i),{__dataGridSourceFilter:t,load:c=>{var p,_,w,f=new X.BH;return(p=c,_=function mI(r){return Array.isArray(r)||(r=[r]),r.map((e,t)=>(0,C.HD)(e)?{selector:e,isExpanded:t<r.length-1}:e)}(n?[r.dataField,r.displayField]:r.dataField),w=new X.BH,s&&(!a||p.skip===l&&p.take===o)?w.resolve(d(s,p)):(l=p.skip,o=p.take,e.load({filter:t,group:_,take:a?p.take:void 0,skip:a?p.skip:void 0}).done(x=>{s=x,w.resolve(a?x:d(x,p))}).fail(w.fail)),w).done(p=>{if(0!==p.length){var _=this.combineFilters(p.flatMap(S=>S.key).map(S=>[r.lookup.valueExpr,S]),"or");new vn.o((0,ye.Z)((0,ye.Z)((0,ye.Z)({},i),c),{filter:this.combineFilters([_,c.filter],"and"),paginate:!1})).load().done(f.resolve).fail(f.fail)}else f.resolve([])}).fail(f.fail),f},key:r.lookup.valueExpr,byKey(c){var f=(0,X.BH)();return this.load({filter:[r.lookup.valueExpr,"=",c]}).done(p=>{f.resolve(p[0])}),f.promise()}});return u},logHeaderFilterDeprecatedWarningIfNeed(r){var e=r._logDeprecatedOptionWarning.bind(r);(0,C.$K)(r.option("headerFilter.allowSearch"))&&e("headerFilter.allowSearch",{since:"23.1",alias:"headerFilter.search.enabled"}),(0,C.$K)(r.option("headerFilter.searchTimeout"))&&e("headerFilter.searchTimeout",{since:"23.1",alias:"headerFilter.search.timeout"});var t="dxPivotGrid"===r.NAME?"dataSource.fields":"columns",i=r.option(t);if(Array.isArray(i)){var a=n=>{n.forEach(s=>{var o,l=s.headerFilter||{};(0,C.$K)(l.allowSearch)&&e("".concat(t,"[].headerFilter.allowSearch"),{since:"23.1",alias:"".concat(t,"[].headerFilter.search.enabled")}),(0,C.$K)(l.searchMode)&&e("".concat(t,"[].headerFilter.searchMode"),{since:"23.1",alias:"".concat(t,"[].headerFilter.search.mode")}),null!==(o=s.columns)&&void 0!==o&&o.length&&a(s.columns)})};a(i)}}};var p_="scroll-container",ll="dx-row",Pc="dx-group-row",Fc="dx-master-detail-row",f_="0.0001px",Vc="dxCellHintVisible",OI={render(r){r.container.append(r.content)}},Wd=function(r){return"auto"===r?"":(0,C.kE)(r)?"".concat(r,"px"):r},v_=function(r,e,t){r.style.width=r.style.maxWidth="auto"===e.width?"":t},PI=function(r){r.resolve()},g_=r=>"number"==typeof r?"".concat(r.toFixed(3),"px"):"adaptiveHidden"===r?f_:r;class dl extends(U1(Vt.View)){init(){this._scrollLeft=-1,this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._columnChooserController=this.getController("columnChooser"),this._editorFactoryController=this.getController("editorFactory"),this._selectionController=this.getController("selection"),this._columnChooserView=this.getView("columnChooserView"),this._delayedTemplates=[],this._templateDeferreds=new Set,this._templatesCache={},this._templateTimeouts=new Set,this.createAction("onCellClick"),this.createAction("onRowClick"),this.createAction("onCellDblClick"),this.createAction("onRowDblClick"),this.createAction("onCellHoverChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onCellPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onRowPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering",afterExecute:e=>{this._afterRowPrepared(e)}}),this._columnsController.columnsChanged.add(this._columnOptionChanged.bind(this)),this._dataController&&this._dataController.changed.add(this._handleDataChanged.bind(this))}dispose(){var e,t;if((0,Je.Ym)()){var i=(0,Je.Jj)();null===(e=this._templateTimeouts)||void 0===e||e.forEach(a=>i.clearTimeout(a)),null===(t=this._templateTimeouts)||void 0===t||t.clear()}}optionChanged(e){switch(super.optionChanged(e),e.name){case"cellHintEnabled":case"onCellPrepared":case"onRowPrepared":case"onCellHoverChanged":this._invalidate(!0,!0),e.handled=!0;break;case"keyboardNavigation":"keyboardNavigation.enabled"===e.fullName&&this._invalidate(!0,!0),e.handled=!0}}_createScrollableOptions(){var e=this.option("scrolling"),t=this.option("scrolling.useNative"),i=(0,B.l)({},e,{direction:"both",bounceEnabled:!1,useKeyboard:!1});return void 0===t&&(t=!0),"auto"===t?(delete i.useNative,delete i.useSimulatedScrollbar):(i.useNative=!!t,i.useSimulatedScrollbar=!t),i}_updateCell(e,t){t.rowType&&this._cellPrepared(e,t)}_createCell(e){var{column:t}=e,i=t.alignment||(0,li.q)(this.option("rtlEnabled")),a=at.Z.createElement("td");a.style.textAlign=i;var n=(0,b.Z)(a);return"data"===e.rowType&&t.headerId&&!t.type&&this.component.option("showColumnHeaders")&&this.setAria("describedby",t.headerId,n),t.cssClass&&n.addClass(t.cssClass),Array.isArray(t.elementAttr)&&t.elementAttr.forEach(s=>{var{name:o,value:l}=s;n.attr(o,l)}),"expand"===t.command&&(n.addClass(t.cssClass),n.addClass(this.addWidgetPrefix("group-space"))),t.colspan>1?n.attr("colSpan",t.colspan):!t.isBand&&"auto"!==t.visibleWidth&&this.option("columnAutoWidth")&&((t.width||t.minWidth)&&(a.style.minWidth=Wd(t.minWidth||t.width)),t.width&&v_(a,t,Wd(t.width))),n}_createRow(e,t){var i=(0,b.Z)("<".concat(t=t||"tr",">")).addClass(ll);return"tr"===t&&this.setAria("role","row",i),i}_isAltRow(e){return e&&e.dataIndex%2==1}_createTable(e,t){var i=(0,b.Z)("<table>").addClass(this.addWidgetPrefix("table")).addClass(this.addWidgetPrefix("table-fixed"));if(e&&!t?(i.attr("id","dx-".concat(new Pi.Z)).append(this._createColGroup(e)),ni.Z.safari&&i.append((0,b.Z)("<thead>").append("<tr>")),this.setAria("role","presentation",i)):this.setAria("hidden",!0,i),this.setAria("role","presentation",(0,b.Z)("<tbody>").appendTo(i)),t)return i;ni.Z.mozilla&&z.Z.on(i,"mousedown","td",n=>{n.ctrlKey&&n.preventDefault()}),this.option("cellHintEnabled")&&z.Z.on(i,"mousemove",".dx-row > td",this.createAction(n=>{var s=n.event,o=(0,b.Z)(s.target),l=(0,b.Z)(s.currentTarget),d=l.parent(),u=this._columnsController.getVisibleColumns(),c=d.data("options"),f=l.index(),p=c&&c.cells&&c.cells[f],_=p?p.column:u[f],w=d.hasClass("dx-header-row"),S=d.hasClass("dx-data-row"),x=d.hasClass(Fc),E=d.hasClass(Pc),V=d.hasClass(this.addWidgetPrefix("filter-row")),N=S&&(!_||_.cellTemplate);x||V||S&&p&&(c.isEditing||p.isEditing||_?.showEditorAlways)||N||w&&(!_||_.headerCellTemplate)||E&&(!_||_.groupIndex&&_.groupCellTemplate)||(o.data(Vc)&&(o.removeAttr("title"),o.data(Vc,!1)),o[0].scrollWidth-o[0].clientWidth>0&&!(0,C.$K)(o.attr("title"))&&(o.attr("title",o.text()),o.data(Vc,!0)))}));var a=n=>{var s=(0,b.Z)(n.currentTarget),o=(0,b.Z)(n.target).closest(".".concat("dx-field-item-content")),l=s.parent(),d=l.data("options"),u=d&&d.cells&&d.cells[s.index()];if(s.closest("table").is(n.delegateTarget)){var c=(0,B.l)({},u,{cellElement:(0,lt.u)(s),event:n,eventType:n.type});if(c.rowIndex=this.getRowIndex(l),o.length){var f=o.data("dx-form-item");f.column&&(c.column=f.column,c.columnIndex=this._columnsController.getVisibleIndex(c.column.index))}return c}};return z.Z.on(i,"mouseover",".dx-row > td",n=>{var s=a(n);s&&this.executeAction("onCellHoverChanged",s)}),z.Z.on(i,"mouseout",".dx-row > td",n=>{var s=a(n);s&&this.executeAction("onCellHoverChanged",s)}),z.Z.on(i,Ft.u,".dx-row > td",n=>{var s=a(n);s&&this.executeAction("onCellClick",s)}),z.Z.on(i,Hs,".dx-row > td",n=>{var s=a(n);s&&this.executeAction("onCellDblClick",s)}),function(r,e){var t,i,a;function n(s){return setTimeout(()=>{t=i=null},s)}z.Z.on(e,"touchstart touchend",".dx-row",s=>{clearTimeout(a),"touchstart"===s.type?(t=s.target,i=s.currentTarget,a=n(1e3)):a=n()}),z.Z.on(e,[Ft.u,Hs,kt.Z.down].join(" "),".dx-row",r.createAction(s=>{var{event:o}=s;t&&(o.target=t,o.currentTarget=i),(0,b.Z)(o.target).closest("a").length||(s.rowIndex=r.getRowIndex(o.currentTarget),s.rowIndex>=0&&(s.rowElement=(0,lt.u)((0,b.Z)(o.currentTarget)),s.columns=r.getColumns(),o.type===kt.Z.down?r._rowPointerDown(s):o.type===Ft.u?r._rowClick(s):r._rowDblClick(s)))}))}(this,i),i}_rowPointerDown(e){}_rowClick(){}_rowDblClick(){}_createColGroup(e){for(var t=(0,b.Z)("<colgroup>"),i=0;i<e.length;i++)for(var a=e[i].colspan||1,n=0;n<a;n++)t.append(this._createCol(e[i]));return t}_createCol(e){var t=e.visibleWidth||e.width;"adaptiveHidden"===t&&(t=f_);var i=(0,b.Z)("<col>");return(0,nr.cl)(i,t),i}renderDelayedTemplates(e){var t=this._delayedTemplates,i=t.filter(n=>!n.async),a=t.filter(n=>n.async);this._delayedTemplates=[],this._renderDelayedTemplatesCore(i,!1,e),this._renderDelayedTemplatesCoreAsync(a)}_renderDelayedTemplatesCoreAsync(e){if(e.length){var t=(0,Je.Jj)().setTimeout(()=>{this._templateTimeouts.delete(t),this._renderDelayedTemplatesCore(e,!0)});this._templateTimeouts.add(t)}}_renderDelayedTemplatesCore(e,t,i){for(var a=new Date;e.length;){var n=e.shift(),{options:s}=n,o=at.Z.getRootNode((0,b.Z)(s.container).get(0)),l=this.needWaitAsyncTemplates();if((!t||(0,b.Z)(s.container).closest(o).length||l)&&(i&&(s.change=i),n.template.render(s)),t&&new Date-a>30){this._renderDelayedTemplatesCoreAsync(e);break}}!e.length&&this._delayedTemplates.length&&this.renderDelayedTemplates()}_processTemplate(e,t){var i;if(e&&e.render&&!(0,C.ZU)(e))i={allowRenderToDetachedContainer:e.allowRenderToDetachedContainer,render(n){e.render(n.container,n.model,n.change),n.deferred&&n.deferred.resolve()}};else if((0,C.mf)(e))i={render(n){var s=e((0,lt.u)(n.container),n.model,n.change);s&&(s.nodeType||(0,C.ZU)(s))&&n.container.append(s),n.deferred&&n.deferred.resolve()}};else{var a=(0,C.HD)(e)?e:(0,b.Z)(e).attr("id");a?(this._templatesCache[a]||(this._templatesCache[a]=this.getTemplate(e)),i=this._templatesCache[a]):i=this.getTemplate(e)}return i}renderTemplate(e,t,i,a,n){var s,o=this._processTemplate(t,i),{column:l}=i,d="data"===i.rowType,u=new X.BH,c={container:e,model:i,deferred:u,onRendered:()=>{this.isDisposed()?u.reject():u.resolve()}};if(o){i.component=this.component;var f=l&&(l.renderAsync&&d||this.option("renderAsync")&&(!1!==l.renderAsync&&(l.command||l.showEditorAlways)&&d||"filter"===i.rowType)),p=null!==(s=i.renderAsync)&&void 0!==s?s:f;!o.allowRenderToDetachedContainer&&!a||p?this._delayedTemplates.push({template:o,options:c,async:p}):o.render(c),this._templateDeferreds.add(u),z.Z.on(e,Yn.x,PI.bind(null,u))}else u.reject();return u.promise().always(()=>{this._templateDeferreds.delete(u)})}_getBodies(e){return(0,b.Z)(e).children("tbody").not(".dx-header").not(".dx-footer")}_needWrapRow(e){var t;return!!this.option().rowTemplate&&!(null===(t=this._getBodies(e))||void 0===t||!t.filter(".".concat(ll)).length)}_wrapRowIfNeed(e,t,i){if(this._needWrapRow(i?e||this._tableElement:this._tableElement||e)){var s=(0,b.Z)("<tbody>").addClass(t.attr("class"));return this.setAria("role","presentation",s),s.append(t)}return t}_appendRow(e,t,i){(i=i||OI).render({content:t,container:e})}_resizeCore(){var e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}_renderCore(e){var t=this.element().parent();(!t||t.parent().length)&&this.renderDelayedTemplates(e)}_renderTable(e){(e=e||{}).columns=this._columnsController.getVisibleColumns();var t=e.change&&e.change.changeType,i=this._createTable(e.columns,"append"===t||"prepend"===t||"update"===t);return this._renderRows(i,e),i}_renderRows(e,t){for(var i=this._getRows(t.change),a=t.change&&t.change.columnIndices||[],n=t.change&&t.change.changeTypes||[],s=0;s<i.length;s++)this._renderRow(e,(0,B.l)({row:i[s],columnIndices:a[s],changeType:n[s]},t))}_renderRow(e,t){t.columnIndices||(t.row.cells=[]);var i=this._createRow(t.row),a=this._wrapRowIfNeed(e,i);"remove"!==t.changeType&&this._renderCells(i,t),this._appendRow(e,a);var n=(0,B.l)({columns:t.columns},t.row);this._addWatchMethod(n,t.row),this._rowPrepared(a,n,t.row)}_needRenderCell(e,t){return!t||t.indexOf(e)>=0}_renderCells(e,t){for(var i=0,{row:a}=t,{columns:n}=t,s=0;s<n.length;s++)this._needRenderCell(s,t.columnIndices)&&this._renderCell(e,(0,B.l)({column:n[s],columnIndex:i,value:a.values&&a.values[i],oldValue:a.oldValues&&a.oldValues[i]},t)),n[s].colspan>1?i+=n[s].colspan:i++}_updateCells(e,t,i){var a=e.children(),n=t.children(),s=this.option("highlightChanges"),o=this.addWidgetPrefix("cell-updated-animation");i.forEach((l,d)=>{var u=a.eq(l),c=n.eq(d);u.replaceWith(c),s&&!c.hasClass("dx-command-expand")&&c.addClass(o)}),function(r,e){if(r&&e){var a,t=r.attributes,i=e.attributes;for(a=0;a<t.length;a++){var n=t[a].nodeName;e.hasAttribute(n)||r.removeAttribute(n)}for(a=0;a<i.length;a++)r.setAttribute(i[a].nodeName,i[a].nodeValue)}}(e.get(0),t.get(0))}_setCellAriaAttributes(e,t){if("freeSpace"!==t.rowType){this.setAria("role","gridcell",e);var i=this._columnsController.getColumnIndexOffset();this.setAria("colindex",t.columnIndex+i+1,e)}}_renderCell(e,t){var i=this._getCellOptions(t);if(t.columnIndices){if(t.row.cells){var a=t.row.cells.findIndex(s=>s.columnIndex===i.columnIndex);t.row.cells[a]=i}}else t.row.cells.push(i);var n=this._createCell(i);return this._setCellAriaAttributes(n,i),this._renderCellContent(n,i,t),e.get(0).appendChild(n.get(0)),n}_renderCellContent(e,t,i){var a=this._getCellTemplate(t);(0,X.gx)(!a||this.renderTemplate(e,a,t,void 0,i.change)).done(()=>{this._updateCell(e,t)})}_getCellTemplate(e){}_getRows(e){return[]}_getCellOptions(e){var t={column:e.column,columnIndex:e.columnIndex,rowType:e.row.rowType,isAltRow:this._isAltRow(e.row)};return this._addWatchMethod(t),t}_addWatchMethod(e,t){if(this.option("repaintChangesOnly")){var i=[];return(t=t||e).watch=t.watch||function(a,n,s){var o=a(t.data),l=function(d){d&&s&&s(d);var u=a(t.data);JSON.stringify(o)!==JSON.stringify(u)&&(d&&n(u),o=u)};return i.push(l),function(){var d=i.indexOf(l);d>=0&&i.splice(d,1)}},t.update=t.update||function(a,n){a&&(this.data=e.data=a.data,this.rowIndex=e.rowIndex=a.rowIndex,this.dataIndex=e.dataIndex=a.dataIndex,this.isExpanded=e.isExpanded=a.isExpanded,e.row&&!n&&(e.row=a)),i.forEach(s=>{s(a)})},t!==e&&(e.watch=t.watch.bind(t)),e}}_cellPrepared(e,t){t.cellElement=(0,lt.u)((0,b.Z)(e)),this.executeAction("onCellPrepared",t)}_rowPrepared(e,t,i){(0,Ms.aT)(e.get(0),"options",t),t.rowElement=(0,lt.u)(e),this.executeAction("onRowPrepared",t)}_columnOptionChanged(e){var{optionNames:t}=e;if(Ae.checkChanges(t,["width","visibleWidth"])){var a=this._columnsController.getVisibleColumns().map(n=>n.visibleWidth||n.width);this.setColumnWidths({widths:a,optionNames:t})}else this._requireReady||this.render()}getCellIndex(e,t){return e.length?e[0].cellIndex:-1}getTableElements(){return this._tableElement||(0,b.Z)()}getTableElement(e){return this._tableElement}setTableElement(e,t){this._tableElement=e}_afterRowPrepared(e){}_handleDataChanged(e){}callbackNames(){return["scrollChanged"]}_updateScrollLeftPosition(){var e=this._scrollLeft;e>=0&&(this._scrollLeft=0,this.scrollTo({left:e}))}scrollTo(e){var t=this.element(),i=t&&t.children(".".concat(this.addWidgetPrefix(p_))).not(".".concat(this.addWidgetPrefix("content-fixed")));(0,C.$K)(e)&&(0,C.$K)(e.left)&&this._scrollLeft!==e.left&&(this._scrollLeft=e.left,i&&i.scrollLeft(e.left))}_getContent(e){var t;return null===(t=this._tableElement)||void 0===t?void 0:t.parent()}_removeContent(e){var t=this._getContent(e);t?.length&&t.remove()}_wrapTableInScrollContainer(e,t){var i=(0,b.Z)("<div>"),a=this.option("scrolling.useNative");return(!1===a||"auto"===a&&!qn.nativeScrolling)&&i.addClass(this.addWidgetPrefix("scrollable-simulated")),z.Z.on(i,"scroll",()=>{var n=i.scrollLeft();n!==this._scrollLeft&&this.scrollChanged.fire({left:n},this.name)}),i.addClass(this.addWidgetPrefix("content")).addClass(this.addWidgetPrefix(p_)).append(e).appendTo(this.element()),this.setAria("role","presentation",i),i}needWaitAsyncTemplates(){return this.option("templatesRenderAsynchronously")&&!1===this.option("renderAsync")}waitAsyncTemplates(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new X.BH;if(!e&&!this.needWaitAsyncTemplates())return t.resolve();var a=()=>X.gx.apply(this,Array.from(this._templateDeferreds)).done(()=>{this.isDisposed()?t.reject():this._templateDeferreds.size>0?a():t.resolve()}).fail(t.reject);return a(),t.promise()}_updateContent(e,t,i){return this.waitAsyncTemplates().done(()=>{this._removeContent(i),this.setTableElement(e,i),this._wrapTableInScrollContainer(e,i)})}_findContentElement(e){}_getWidths(e){if(!e)return[];var t=[];return e.toArray().forEach(a=>{var n=a.offsetWidth;if(a.getBoundingClientRect){var s=(0,li.l)(a);s.width>a.offsetWidth-1&&(n=s.width)}t.push(n)}),t}getColumnWidths(e){if((this.option("forceApplyBindings")||le.ZT)(),e=e??this.getTableElement())for(var t=e.children("tbody:not(.dx-header)").children(),i=0;i<t.length;i++){var a=t.eq(i),n=a.hasClass(Pc),s=a.hasClass(Fc),o=a.hasClass("dx-error-row");if(!("none"===a.get(0).style.display||a.hasClass("dx-state-invisible")||n||s||o)){var u=a.children("td");return this._getWidths(u)}}return[]}getVisibleColumnIndex(e,t){return e}setColumnWidths(e){var{widths:t}=e,a=this.getTableElement();if(a?.length&&t){var n=this.getColumns(),s=this.option("columnAutoWidth"),o=a.children("colgroup").children("col");o.toArray().forEach(l=>l.removeAttribute("style")),n.forEach((l,d)=>{if(s&&l.width&&!l.command)for(var u=Wd(l.visibleWidth||l.width),c=Wd(l.minWidth||u),f=a.children().children(".dx-row").not(".".concat(Fc)),p=0;p<f.length;p++){var _=this.getVisibleColumnIndex(d,p);if(_>=0){var w=f.eq(p),S=w.hasClass(Pc)?w.find("td[aria-colindex='".concat(_+1,"']:not(.").concat("dx-group-cell",")")):w.find("td").eq(_);if(S.length){var x=S.get(0);v_(x,l,u),x.style.minWidth=c}}}var E=g_(t[d]);(0,C.$K)(E)&&(0,nr.cl)(o.eq(d),E)})}}getCellElements(e){return this._getCellElementsCore(e)}_getCellElementsCore(e){if(!(e<0))return this._getRowElements().eq(e).children()}_getCellElement(e,t){var i=this.getCellElements(e),a=this._getVisibleColumnIndex(i,e,t);if(i?.length&&!(a<0)){var n=i.eq(a);return n.length>0?n:void 0}}_getRowElement(e){var t=this,i=(0,b.Z)(),a=t.getTableElements();if(Y.S6(a,(n,s)=>{i=i.add(t._getRowElements((0,b.Z)(s)).eq(e))}),i.length)return i}getCellElement(e,t){var i=this._getCellElement(e,t);if(i)return(0,lt.u)(i)}getRowElement(e){var t=this._getRowElement(e),i=[];if(t&&!(0,lt.u)(t).get)for(var a=0;a<t.length;a++)i.push(t[a]);else i=t;return i}_getVisibleColumnIndex(e,t,i){if((0,C.HD)(i)){var a=this._columnsController.columnOption(i,"index");return this._columnsController.getVisibleIndex(a)}return i}getColumnElements(){}getColumns(e,t){return this._columnsController.getVisibleColumns(e)}getCell(e,t,i){var n,a=t||this._getRowElements();if(a.length>0&&e.rowIndex>=0&&("virtual"!==this.option("scrolling.mode")&&"virtual"!==this.option("scrolling.rowRenderingMode")&&(e.rowIndex=e.rowIndex<a.length?e.rowIndex:a.length-1),n=i||this.getCellElements(e.rowIndex),n?.length>0))return n.eq(n.length>e.columnIndex?e.columnIndex:n.length-1)}getRowsCount(){var e=this.getTableElement();return e&&1===e.length?e[0].rows.length:0}_getRowElementsCore(e){if(e=e||this.getTableElement()){var i=(this.option().rowTemplate||this.option("dataRowTemplate"))&&e.find("> tbody.".concat(ll));return i&&i.length?i:e.find("> tbody > "+".".concat(ll,", > .").concat(ll))}return(0,b.Z)()}_getRowElements(e){return this._getRowElementsCore(e)}getRowIndex(e){return this._getRowElements().index(e)}getBoundingRect(){}getName(){}setScrollerSpacing(e){var t=this.element(),i=this.option("rtlEnabled");t&&t.css({paddingLeft:i?e:"",paddingRight:i?"":e})}isScrollbarVisible(e){var t=this.element(),i=this._tableElement;return!(!t||!i)&&(e?(0,we.Y_)(i)-(0,we.dz)(t)>0:(0,we.zp)(i)-(0,we.Cr)(t)>0)}isDisposed(){var e;return null===(e=this.component)||void 0===e?void 0:e._disposed}}var Nc="text-content",__="dx-header-row",Bc="dx-visibility-hidden",m_="dx-text-content-alignment-",kc=function(r,e,t){var i=(0,b.Z)("<div>").addClass(r.addWidgetPrefix(Nc));r.setAria("role","presentation",i),C_(r,e,t.column,i);var a=r.option("showColumnLines"),n=r.getController("columns").getHeaderContentAlignment(t.column.alignment);return i[a||"right"===n?"appendTo":"prependTo"](e)};function C_(r,e,t,i){var a=r._getIndicatorElements(e,!0),n=r._getIndicatorElements(e),s=a&&a.length,o=r._getColumnAlignment(t.alignment),l=".".concat(r._getIndicatorClassName("sort")),d=".".concat(r._getIndicatorClassName("sortIndex")),u=n.filter(l),c=n.children().filter(d);(i=i||e.children(".".concat(r.addWidgetPrefix(Nc)))).toggleClass(m_+o,s>0).toggleClass(m_+("left"===o?"right":"left"),s>0&&"center"===t.alignment).toggleClass("dx-sort-indicator",!!u.length).toggleClass("dx-sort-index-indicator",!!c.length).toggleClass("dx-header-filter-indicator",!!n.filter(".".concat(r._getIndicatorClassName("headerFilter"))).length)}var w_={defaultOptions:()=>({showColumnHeaders:!0,cellHintEnabled:!0}),views:{columnHeadersView:class jI extends dl{init(){super.init(),this._headerPanelView=this.getView("headerPanel"),this._headerFilterController=this.getController("headerFilter"),this._dataController=this.getController("data")}_createTable(){var e=super._createTable.apply(this,arguments);return z.Z.on(e,"mousedown selectstart",this.createAction(t=>{var{event:i}=t;i.shiftKey&&i.preventDefault()})),e}_isLegacyKeyboardNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDefaultTemplate(e){var t=this;return function(i,a){var{caption:n}=e,s=!e.command||n&&"expand"!==e.command;"empty"===e.command?t._renderEmptyMessage(i,a):s?kc(t,i,a).text(n):e.command&&i.html("&nbsp;")}}_renderEmptyMessage(e,t){var i=this._getEmptyHeaderText();if(i){var a=kc(this,e,t);if(i.includes("{0}")){var[s,o]=i.split("{0}"),l=ae.Z.format("dxDataGrid-emptyHeaderColumnChooserText"),d=this._columnChooserView,u=(0,b.Z)("<a>").text(l).addClass("dx-link");z.Z.on(u,"click",this.createAction(()=>d.showColumnChooser())),a.append(at.Z.createTextNode(s)).append(u).append(at.Z.createTextNode(o))}else a.text(i)}else e.html("&nbsp;")}_getEmptyHeaderText(){var e=!!this._columnChooserView.hasHiddenColumns(),t=!!this._headerPanelView.hasGroupedColumns();switch(!0){case e&&t:return ae.Z.format("dxDataGrid-emptyHeaderWithColumnChooserAndGroupPanelText");case t:return ae.Z.format("dxDataGrid-emptyHeaderWithGroupPanelText");case e:return ae.Z.format("dxDataGrid-emptyHeaderWithColumnChooserText");default:return""}}_getHeaderTemplate(e){return e.headerCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(e)}}_processTemplate(e,t){var i=this,{column:n}=t,s=super._processTemplate(e);return"header"===t.rowType&&s&&n.headerCellTemplate&&!n.command?{render(o){var l=kc(i,o.container,o.model);s.render((0,B.l)({},o,{container:l}))}}:s}_handleDataChanged(e){"refresh"===e.changeType&&(this._isGroupingChanged||this._requireReady)&&(this._isGroupingChanged=!1,this.render())}_renderCell(e,t){var i=super._renderCell(e,t);return"header"===t.row.rowType&&(i.addClass("dx-cell-focus-disabled"),this._isLegacyKeyboardNavigation()||t.column&&!t.column.type&&i.attr("tabindex",this.option("tabindex")||0)),i}_setCellAriaAttributes(e,t){super._setCellAriaAttributes(e,t),"header"===t.rowType&&(t.column.type||this.setAria("role","columnheader",e),t.column&&!t.column.command&&!t.column.isBand&&(e.attr("id",t.column.headerId),this.setAria("label","".concat(ae.Z.format("dxDataGrid-ariaColumn")," ").concat(t.column.caption),e)))}_createRow(e){var t=super._createRow.apply(this,arguments);return t.toggleClass("dx-column-lines",this.option("showColumnLines")),"header"===e.rowType&&(t.addClass(__),this._isLegacyKeyboardNavigation()||sl("columnHeaders",this,t,"td",this._handleActionKeyDown.bind(this))),t}_processHeaderAction(e,t){}_handleActionKeyDown(e){var{event:t}=e,i=(0,b.Z)(t.target);if(this._lastActionElement=t.target,i.is(".dx-header-filter")){var a=this._headerFilterController,n=i.closest("td"),s=this.getColumnIndexByElement(n);s>=0&&a.showHeaderFilterMenu(s,!1)}else{var o=i.closest(".dx-row");this._processHeaderAction(t,o)}t.preventDefault()}_renderCore(){var e=this.element(),t={};if(!this._tableElement||this._dataController.isLoaded()||this._hasRowElements){e.addClass(this.addWidgetPrefix("headers")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")).empty(),this.setAria("role","presentation",e);var i=this._updateContent(this._renderTable({change:t}),t);return this.getRowCount()>1&&e.addClass("dx-header-multi-row"),super._renderCore.apply(this,arguments),i}}_renderRows(){(this._dataController.isLoaded()||this._hasRowElements)&&(super._renderRows.apply(this,arguments),this._hasRowElements=!0)}_renderRow(e,t){var i=1===this.getRowCount()?null:t.row.rowIndex;t.columns=this.getColumns(i),super._renderRow(e,t)}_createCell(e){var{column:t}=e,i=super._createCell.apply(this,arguments);return t.rowspan>1&&"header"===e.rowType&&i.attr("rowSpan",t.rowspan),i}_getRows(){var e=[],t=this.getRowCount();if(this.option("showColumnHeaders"))for(var i=0;i<t;i++)e.push({rowType:"header",rowIndex:i});return e}_getCellTemplate(e){if("header"===e.rowType)return this._getHeaderTemplate(e.column)}_columnOptionChanged(e){var{changeTypes:t}=e,{optionNames:i}=e;t.grouping||t.groupExpanding?t.grouping&&(this._isGroupingChanged=!0):(super._columnOptionChanged(e),(i.width||i.visible)&&this.resizeCompleted.fire())}_isElementVisible(e){return e&&e.visible}_alignCaptionByCenter(e){var t=this._getIndicatorContainer(e,!0);t&&t.length&&(t.filter(".".concat(Bc)).remove(),(t=this._getIndicatorContainer(e)).clone().addClass(Bc).css("float","").insertBefore(e.children(".".concat(this.addWidgetPrefix(Nc)))))}_updateCell(e,t){"header"===t.rowType&&"center"===t.column.alignment&&this._alignCaptionByCenter(e),super._updateCell.apply(this,arguments)}_updateIndicator(e,t,i){var a=super._updateIndicator.apply(this,arguments);return"center"===t.alignment&&this._alignCaptionByCenter(e),C_(this,e,t),a}_getIndicatorContainer(e,t){var i=super._getIndicatorContainer(e);return t?i:i.filter(":not(.".concat(Bc,")"))}_isSortableElement(e){return!0}getHeadersRowHeight(){var e=this.getTableElement(),t=e&&e.find(".".concat(__));return t&&t.toArray().reduce((i,a)=>i+(0,we.Cr)(a),0)||0}getHeaderElement(e){var t=this.getColumnElements();return t&&t.eq(e)}getColumnElements(e,t){var a,i=this,n=i._columnsController,s=i.getRowCount();if(i.option("showColumnHeaders")){if(s>1&&(!(0,C.$K)(e)||(0,C.$K)(t))){var o=[],l=(0,C.$K)(t)?n.getChildrenByBandColumn(t,!0):n.getVisibleColumns();return(0,Y.S6)(l,(d,u)=>{var c=(0,C.$K)(e)?e:n.getRowIndex(u.index);(a=i._getCellElement(c,n.getVisibleIndex(u.index,c)))&&o.push(a.get(0))}),(0,b.Z)(o)}if(!e||e<s)return i.getCellElements(e||0)}}getColumnIndexByElement(e){var t=this.getCellIndex(e),i=e.closest(".dx-row"),{rowIndex:a}=i[0],n=this.getColumns(a)[t];return n?n.index:-1}getVisibleColumnIndex(e,t){var i=this.getColumns()[e];return i?this._columnsController.getVisibleIndex(i.index,t):-1}getColumnWidths(){var e=this.getColumnElements();return e&&e.length?this._getWidths(e):super.getColumnWidths.apply(this,arguments)}allowDragging(e){var t,i=e&&this._columnsController.getRowIndex(e.index),a=this.getColumns(i);return(null!==(t=this.option("allowColumnReordering"))&&void 0!==t?t:this._columnsController.isColumnOptionUsed("allowReordering"))&&e.allowReordering&&a.length>1}getBoundingRect(){var e=this.getColumnElements();return e&&e.length?{top:this.getTableElement().offset().top}:null}getName(){return"headers"}getColumnCount(){var e=this.getColumnElements();return e?e.length:0}isVisible(){return this.option("showColumnHeaders")}optionChanged(e){switch(e.name){case"showColumnHeaders":case"wordWrapEnabled":case"showColumnLines":this._invalidate(!0,!0),e.handled=!0;break;default:super.optionChanged(e)}}getHeight(){return this.getElementHeight()}getContextMenuItems(e){var t=this,{column:i}=e;if(e.row&&("header"===e.row.rowType||"detailAdaptive"===e.row.rowType)){var a=t.option("sorting");if(a&&"none"!==a.mode&&i&&i.allowSorting){var n=function(s){setTimeout(()=>{t._columnsController.changeSortOrder(i.index,s.itemData.value)})};return[{text:a.ascendingText,value:"asc",disabled:"asc"===i.sortOrder,icon:"context-menu-sort-asc",onItemClick:n},{text:a.descendingText,value:"desc",disabled:"desc"===i.sortOrder,icon:"context-menu-sort-desc",onItemClick:n},{text:a.clearText,value:"none",disabled:!i.sortOrder,icon:"context-menu-sort-none",onItemClick:n}]}}}getRowCount(){return this._columnsController&&this._columnsController.getRowCount()}setRowsOpacity(e,t,i){var a,n,s=this.getRowCount(),o=this._columnsController.getColumns(),l=o&&o[e],d=l&&l.isBand&&l.index,u=(f,p)=>{f.ownerBand===d&&(n.eq(p).css({opacity:t}),f.isBand&&this.setRowsOpacity(f.index,t,a+1))};if((0,C.$K)(d))for(a=i=i||0;a<s;a++)(n=this.getCellElements(a))&&this.getColumns(a).forEach(u)}}}};const He=(0,ye.Z)((0,ye.Z)((0,ye.Z)({},Vt),Ae),{modules:[]});He.registerModule("columnHeaders",w_);var Kd=ve(3422),Ma=ve(9869),pa=ve(6340),qI=ve(3540),pt=ve(2064),b_=["filterValues","filterType","fixed","fixedPosition"],$d=["visibleIndex","dataField","name","dataType","width","visible","sortOrder","lastSortOrder","sortIndex","groupIndex","filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","added"].concat(b_),YI={visibleWidth:!0,bestFitWidth:!0,bufferedFilterValue:!0},y_=Number.MAX_SAFE_INTEGER||9007199254740991,gn="groupExpand",Mc=/columns\[(\d+)\]\.?/gi,QI={visible:!0,showInColumnChooser:!0},eA={number:["=","<>","<",">","<=",">=","between"],string:["contains","notcontains","startswith","endswith","=","<>"],date:["=","<>","<",">","<=",">=","between"],datetime:["=","<>","<",">","<=",">=","between"]},tA={visibleIndex:!0,groupIndex:!0,grouped:!0,sortIndex:!0,sortOrder:!0},Zs="group",zs="columnChooser",ul=ve(7921),di=ve(5789),qt=ve(1730),x_=function(r){r.filterOperations=r.defaultFilterOperations},iA=1,Gd=function(r,e,t,i){var a={};if(e){(0,C.HD)(e)&&(e={dataField:e}),r.setName(e);var n={};if(e.command)n=(0,pa.HR)(a,e);else{a=r.getCommonSettings(e),t&&t.name&&t.dataField&&(e=(0,B.l)({},e,{dataField:t.dataField}));var s=r._createCalculatedColumnOptions(e,i);e.type||(n={headerId:"dx-col-".concat(iA++)}),n=(0,pa.HR)(n,QI),(0,pa.HR)(n,a),(0,pa.HR)(n,s),(0,pa.HR)(n,e),(0,pa.HR)(n,{selector:null})}return e.filterOperations===e.defaultFilterOperations&&x_(n),n}},Ws=function r(e,t,i,a){var n=[];return t&&(0,Y.S6)(t,(s,o)=>{var l=(a??0)+n.length,d=e._columnsUserState&&zc(o,e._columnsUserState[l])&&e._columnsUserState[l],u=Gd(e,o,d,i);u&&(i&&(u.ownerBand=i),n.push(u),u.columns&&(n=n.concat(r(e,u.columns,u,n.length)),delete u.columns,u.hasColumns=!0))}),n},Jn=function(r,e){for(var t=[],i=e[r];i;)t.unshift(i),i=e[r=i.index];return t},rA=function r(e,t,i){var a=[],n=t[e];if(n)for(var s=0;s<n.length;s++){var o=n[s];(!(0,C.$K)(o.groupIndex)||o.showWhenGrouped)&&(a.push(o),i&&o.isBand&&(a=a.concat(r(o.index,t,i))))}return a},sA=function r(e,t){var i=0,a=e.getChildrenByBandColumn(t,!0);return(0,Y.S6)(a,(n,s)=>{s.isBand?(s.colspan=s.colspan||r(e,s.index),i+=s.colspan||1):i+=1}),i},Hc=function(r){var e=(0,C.dt)(r);return"string"!==e&&"boolean"!==e&&"number"!==e&&"date"!==e&&"object"!==e&&(e=void 0),e},S_=function(r,e){switch(r){case"date":case"datetime":return di.Z.getDateSerializationFormat(e);case"number":if((0,C.HD)(e))return"string";if((0,C.kE)(e))return null}},E_=function(r,e){r.deserializeValue||(Ae.isDateType(e)&&(r.deserializeValue=function(t){return di.Z.deserializeDate(t)},r.serializeValue=function(t){return(0,C.HD)(t)?t:di.Z.serializeDate(t,this.serializationFormat)}),"number"===e&&(r.deserializeValue=function(t){var i=parseFloat(t);return isNaN(i)?t:i},r.serializeValue=function(t,i){return"filter"===i?t:(0,C.$K)(t)&&"string"===this.serializationFormat?t.toString():t}))},dA=function(r){return!0===r.value?this.trueText||"true":!1===r.value?this.falseText||"false":r.valueText||""},I_=function(r){if("boolean"===r)return dA},A_=function(r){(0,Y.S6)(r._columns,(e,t)=>{t.index=e}),(0,Y.S6)(r._columns,(e,t)=>{(0,C.Kn)(t.ownerBand)&&(t.ownerBand=t.ownerBand.index)}),(0,Y.S6)(r._commandColumns,(e,t)=>{t.index=-(e+1)})},T_=function(r,e){(0,ul.Sq)(r._columns,"groupIndex",e,t=>{var{grouped:i}=t;return delete t.grouped,i})},Zc=function(r,e,t){var n,i=(0,C.Kn)(e)?e.rowIndex:null,a=t===Zs?r.getGroupColumns():t===zs?r.getChooserColumns():r.getVisibleColumns(i);return e=(0,C.Kn)(e)?e.columnIndex:e,(n=a[e])&&n.type===gn&&(n=r._columns.filter(s=>n.type===s.type)[0]||n),n&&(0,C.$K)(n.index)?n.index:-1};function zc(r,e){return r&&e&&e.name===(r.name||r.dataField)&&(e.dataField===r.dataField||r.name)}var D_=function(r){var l,d,u,e=r._columnsUserState,t=r._ignoreColumnOptionNames||[],i=r._columns,a={},n=[],s=!0,o=[];function c(w,S){if(S)for(var x=0;x<$d.length;x++){var E=$d[x];t.includes(E)||("dataType"===E?w[E]=w[E]||S[E]:b_.includes(E)?E in S&&(w[E]=S[E]):("selectedFilterOperation"===E&&S[E]&&(w.defaultSelectedFilterOperation=w[E]||null),w[E]=S[E]))}}function f(w,S){for(var x=S.name||S.dataField,E=a[x]||0,V=0;V<w.length;V++)if(zc(S,w[V])){if(!E)return a[x]=a[x]||0,a[x]++,V;E--}return-1}if(e){for(u=0;u<i.length;u++)d=f(e,i[u]),s=s&&d>=0,o.push(d);for(u=0;u<i.length;u++)l=i[u],d=o[u],(r._hasUserState||s)&&c(l,e[d]),d>=0&&(0,C.$K)(e[d].initialIndex)?n[d]=l:n.push(l);var p=!1;for(u=0;u<e.length;u++){var _=e[u];_.added&&f(i,_)<0&&(c(l=Gd(r,_.added),_),n.push(l),_.added.columns&&(p=!0))}p&&(A_(r),n=Ws(r,n)),Ks(r,n)}},Qn=function(r,e){A_(r),T_(r,e),function(r,e){(0,Y.S6)(r._columns,(t,i)=>{(0,C.$K)(i.sortIndex)&&!jd(i.sortOrder)&&delete i.sortIndex}),(0,ul.Sq)(r._columns,"sortIndex",e,t=>!(0,C.$K)(t.groupIndex)&&jd(t.sortOrder))}(r,e),V_(r),function(r,e){for(var t,i=[],a=r.getBandColumnsCache(),n=[],s=r._columns.filter(d=>!d.command),o=0;o<s.length;o++)t=s[o],Jn(o,a.columnParentByIndex).length?n.push(t):i.push(t);(0,ul.Sq)(n,"visibleIndex",e),(0,ul.Sq)(i,"visibleIndex",e)}(r,e)},Ud=function(r){r.resetColumnsCache()};function Ks(r,e){r._previousColumns=r._columns,r._columns=e,Ud(r),r.updateColumnDataTypes()}var fa=function(r,e,t,i){var a,n=r._columnChanges||{optionNames:{length:0},changeTypes:{length:0},columnIndex:i};t=(t=t||"all").split(".")[0];var{changeTypes:s}=n;e&&!s[e]&&(s[e]=!0,s.length++);var{optionNames:o}=n;t&&!o[t]&&(o[t]=!0,o.length++),(void 0===i||i!==n.columnIndex)&&((0,C.$K)(i)&&(null!==(a=n.columnIndices)&&void 0!==a||(n.columnIndices=[]),(0,C.$K)(n.columnIndex)&&n.columnIndices.push(n.columnIndex),n.columnIndices.push(i)),delete n.columnIndex),r._columnChanges=n,Ud(r)},hl=function(r){var a,e=r.option("onColumnsChanging"),t=r._columnChanges;r.isInitialized()&&!r._updateLockCount&&t&&(e&&(r._updateLockCount++,e((0,B.l)({component:r.component},t)),r._updateLockCount--),r._columnChanges=void 0,(a=t.optionNames)&&["dataField","lookup","dataType","columns"].some(n=>a[n])?(r._reinitAfterLookupChanges=t?.optionNames.lookup,r.reinit(),r._reinitAfterLookupChanges=void 0):r.columnsChanged.fire(t))},Wc=function(r,e,t,i,a){var o,l,d,n=(0,Ot.vb)(t),s=e.index;if(3===arguments.length)return n(e,{functionsAsIs:!0});var u=n(e,{functionsAsIs:!0});if(!(0,le.bY)(u,i,{maxDepth:5})){"groupIndex"===t||"calculateGroupValue"===t?(l="grouping",function(r,e,t,i){if(t>=0)i>=0||(e.lastSortOrder=e.sortOrder);else{var n=r.option("sorting.mode"),s=e.lastSortOrder;"single"===n&&r._columns.some(l=>l!==e&&(0,C.$K)(l.sortIndex))&&(s=void 0),e.sortOrder=s}}(r,e,i,u)):l="sortIndex"===t||"sortOrder"===t||"calculateSortValue"===t?"sorting":"columns";var c=(0,Ot.OM)(t);c(e,i,{functionsAsIs:!0});var f=function(r,e){var i,t=[],a=r.getBandColumnsCache(),n=function(o){return o.ownerBand===e.ownerBand};if(a.isPlain){var s=r._columns.indexOf(e);s>=0&&(t=["columns[".concat(s,"]")])}else for(i=r._columns.filter(n);i.length&&-1!==i.indexOf(e);)t.unshift("columns[".concat(i.indexOf(e),"]")),i=(e=a.columnParentByIndex[e.index])?r._columns.filter(n):[];return t.join(".")}(r,e);tA[t]&&(Qn(r,e),i=n(e)),("name"===t||"allowEditing"===t)&&r._checkColumns(),!(0,C.$K)(u)&&!(0,C.$K)(i)&&0!==t.indexOf("buffer")&&(a=!0),a?Ud(r):(!$d.includes(t)&&"visibleWidth"!==t&&(o=r.option("columns"),d=r.getColumnByPath(f,o),(0,C.HD)(d)&&(d=o[s]={dataField:d}),d&&zc(d,e)&&c(d,i,{functionsAsIs:!0})),fa(r,l,t,s)),f&&function(r,e){var{value:t}=e,{optionName:i}=e,{prevValue:a}=e,{fullOptionName:n}=e,s="".concat(n,".").concat(i);!YI[i]&&r._skipProcessingColumnsChange!==s&&(r._skipProcessingColumnsChange=s,r.component._notifyOptionChanged(s,t,a),r._skipProcessingColumnsChange=!1)}(r,{fullOptionName:f,optionName:t,value:i,prevValue:u})}};function jd(r){return"asc"===r||"desc"===r}var _A=function(r,e){if(this.dataField){var t=this.dataField.split("."),i=t.length-1;this.serializeValue&&(e=this.serializeValue(e));for(var a=0;a<i;a++){var n=t[a];r=r[n]=r[n]||{}}r[t[i]]=e}},mA=function r(e,t,i){var a=[];return e[t=t||0]&&(0,Y.S6)(e[t],(n,s)=>{(s.ownerBand===i||s.type===gn)&&(s.isBand&&s.colspan?a.push.apply(a,r(e,t+1,s.index)):(!s.command||t<1)&&a.push(s))}),a},Kc=(r,e)=>{var t=r._columns.filter(i=>i.type===e.type);return!!t.length},O_=function(r,e){var t=r.option("rtlEnabled");return e.command&&!Kc(r,e)||!e.fixedPosition?t?"right":"left":e.fixedPosition},R_=function(r,e,t,i){var a,n=this.getRowCount(),s=r[i]&&r[i].rowspan,o=e.filter(l=>l.type===t);return r.forEach((l,d)=>{l.type===t&&(a=d,s=r[d+1]?r[d+1].rowspan:n)}),s>1&&(o=(0,Y.UI)(o,l=>(0,B.l)({},l,{rowspan:s}))),o.unshift.apply(o,(0,C.$K)(a)?[a,1]:[i,0]),r.splice.apply(r,o),s||1},L_=function(r,e){for(var t=r?r.toString():"0";t.length<e;)t="0".concat(t);return t},P_=(r,e,t,i)=>{for(var a,n,s=e.slice().map(p=>(0,B.l)({},p)),o=r._isColumnFixing(),l=t.slice().map(p=>(0,B.l)({fixed:o},p)),d=p=>t.reduce((_,w,S)=>w.type===(i&&p.type===gn?"expand":p.type)||w.command===p.command?S:_,-1),u=p=>p.command!==t[n].command,c=0;c<e.length;c++)(n=(a=e[c])&&(a.type||a.command)?d(a):-1)>=0&&(i?(s[c]=(0,B.l)({fixed:o},t[n],a),a.type!==gn&&(l=l.filter(u))):s[c]=(0,B.l)({},a,t[n],a.type===gn&&{visibleIndex:a.visibleIndex,index:a.index,headerId:a.headerId,allowFixing:0===a.groupIndex,allowReordering:0===a.groupIndex,groupIndex:a.groupIndex}));return e.length&&i&&l.length&&(s=s.concat(l)),s},F_=(r,e)=>(0,C.$K)(e.fixed)||!e.type?e.fixed:r._isColumnFixing(),V_=r=>{r._bandColumnsCache=void 0},N_=(r,e)=>{var i,t=(0,C.HD)(e)&&e.substr(0,e.indexOf(":"));if(void 0!==e)return t&&(e=e.substr(t.length+1)),t?i=r.filter(a=>"".concat(a[t])===e)[0]:["index","name","dataField","caption"].some(a=>!!(i=r.filter(n=>n[a]===e)[0])),i},B_={defaultOptions:()=>({commonColumnSettings:{allowFiltering:!0,allowHiding:!0,allowSorting:!0,allowEditing:!0,encodeHtml:!0,trueText:ae.Z.format("dxDataGrid-trueText"),falseText:ae.Z.format("dxDataGrid-falseText")},allowColumnReordering:!1,allowColumnResizing:!1,columnResizingMode:"nextColumn",columnMinWidth:void 0,columnWidth:void 0,adaptColumnWidthByRatio:!0,columns:void 0,regenerateColumnsByVisibleItems:!1,customizeColumns:null,dateSerializationFormat:void 0}),controllers:{columns:class SA extends Vt.Controller{init(e){this._dataController=this.getController("data"),this._focusController=this.getController("focus"),this._stateStoringController=this.getController("stateStoring");var t=this.option("columns");this._commandColumns=this._commandColumns||[],this._columns=this._columns||[],this._isColumnsFromOptions=!!t,this._isColumnsFromOptions?(Ks(this,t?Ws(this,t):[]),D_(this)):Ks(this,this._columnsUserState?Ws(this,this._columnsUserState):this._columns),function(r){var e=r._getExpandColumnOptions();r.addCommandColumn(e)}(this),this._dataSourceApplied?this.applyDataSource(this._dataSource,!0,e):Qn(this),this._checkColumns()}_getExpandColumnOptions(){return{type:"expand",command:"expand",width:"auto",cssClass:"dx-command-expand",allowEditing:!1,allowGrouping:!1,allowSorting:!1,allowResizing:!1,allowReordering:!1,allowHiding:!1}}_getFirstItems(e){var t,i=[];return e&&e.items().length>0&&(t=Ae.normalizeSortingInfo(e.group()).length,i=function a(n,s){if(!n||!s)return n;for(var o=0;o<n.length;o++){var l=a(n[o].items||n[o].collapsedItems,s-1);if(l&&l.length)return l}}(e.items(),t)||[]),i}_endUpdateCore(){!this._skipProcessingColumnsChange&&hl(this)}callbackNames(){return["columnsChanged"]}getColumnByPath(e,t){var i,a=[];return e.replace(Mc,(n,s)=>(a.push(parseInt(s)),"")),a.length&&(i=t?a.reduce((n,s)=>n&&n.columns&&n.columns[s],{columns:t}):function(r,e){var t,i,n=function(o){return o.ownerBand===(t?t.index:void 0)};if(r.getBandColumnsCache().isPlain)t=r._columns[e[0]];else{i=r._columns.filter(n);for(var s=0;s<e.length;s++)(t=i[e[s]])&&(i=r._columns.filter(n))}return t}(this,a)),i}optionChanged(e){var t;switch(e.name){case"adaptColumnWidthByRatio":e.handled=!0;break;case"dataSource":e.value!==e.previousValue&&!this.option("columns")&&(!Array.isArray(e.value)||!Array.isArray(e.previousValue))&&(this._columns=[]);break;case"columns":t=this._skipProcessingColumnsChange,e.handled=!0,this._skipProcessingColumnsChange||(e.name===e.fullName?(this._columnsUserState=null,this._ignoreColumnOptionNames=null,this.init()):(this._columnOptionChanged(e),t=!0)),t&&this._updateRequireResize(e);break;case"commonColumnSettings":case"columnAutoWidth":case"allowColumnResizing":case"allowColumnReordering":case"columnFixing":case"grouping":case"groupPanel":case"regenerateColumnsByVisibleItems":case"customizeColumns":case"columnHidingEnabled":case"dateSerializationFormat":case"columnResizingMode":case"columnMinWidth":case"columnWidth":e.handled=!0,this.reinit("columnWidth"===e.fullName&&["width"]);break;case"rtlEnabled":this.reinit();break;default:super.optionChanged(e)}}_columnOptionChanged(e){var t={},i=this.getColumnByPath(e.fullName),a=e.fullName.replace(Mc,"");i&&(a?t[a]=e.value:t=e.value,this._skipProcessingColumnsChange=e.fullName,this.columnOption(i.index,t),this._skipProcessingColumnsChange=!1)}_updateRequireResize(e){var{component:t}=this;"width"===e.fullName.replace(Mc,"")&&t._updateLockCount&&(t._requireResize=!0)}publicMethods(){return["addColumn","deleteColumn","columnOption","columnCount","clearSorting","clearGrouping","getVisibleColumns","getVisibleColumnIndex"]}applyDataSource(e,t,i){var a=e&&e.isLoaded();if(this._dataSource=e,!this._dataSourceApplied||0===this._dataSourceColumnsCount||t||this.option("regenerateColumnsByVisibleItems")){if(a){if(!this._isColumnsFromOptions){var n=function(r,e){for(var i,t=r._getFirstItems(e),a={},n=[],s=0;s<t.length;s++)if(t[s])for(i in t[s])(!(0,C.mf)(t[s][i])||zr.default.isWrapped(t[s][i]))&&(a[i]=!0);for(i in a)if(0!==i.indexOf("__")){var o=Gd(r,i);n.push(o)}return n}(this,e);n.length&&(Ks(this,n),this._dataSourceColumnsCount=this._columns.length,D_(this))}return this.updateColumns(e,t,i)}this._dataSourceApplied=!1,Qn(this)}else if(a&&!this.isAllDataTypesDefined(!0)&&this.updateColumnDataTypes(e))return fa(this,"columns"),hl(this),(new X.BH).reject().promise()}reset(){this._dataSource=null,this._dataSourceApplied=!1,this._dataSourceColumnsCount=void 0,this.reinit()}resetColumnsCache(){this._visibleColumns=void 0,this._fixedColumns=void 0,this._rowCount=void 0,V_(this)}reinit(e){this._columnsUserState=this.getUserState(),this._ignoreColumnOptionNames=e||null,this.init(),e&&(this._ignoreColumnOptionNames=null)}isInitialized(){return!!this._columns.length||!!this.option("columns")}isDataSourceApplied(){return this._dataSourceApplied}getCommonSettings(e){var t,i,a=(!e||!e.type)&&this.option("commonColumnSettings")||{},n=null!==(t=this.option("grouping"))&&void 0!==t?t:{},s=null!==(i=this.option("groupPanel"))&&void 0!==i?i:{};return(0,B.l)({allowFixing:this.option("columnFixing.enabled"),allowResizing:this.option("allowColumnResizing")||void 0,allowReordering:this.option("allowColumnReordering"),minWidth:this.option("columnMinWidth"),width:this.option("columnWidth"),autoExpandGroup:n.autoExpandAll,allowCollapsing:n.allowCollapsing,allowGrouping:s.allowColumnDragging&&s.visible||n.contextMenuEnabled},a)}isColumnOptionUsed(e){for(var t=0;t<this._columns.length;t++)if(this._columns[t][e])return!0}isAllDataTypesDefined(e){var t=this._columns;if(!t.length)return!1;for(var i=0;i<t.length;i++)if((t[i].dataField||t[i].calculateCellValue!==t[i].defaultCalculateCellValue)&&(!t[i].dataType||e&&t[i].deserializeValue&&void 0===t[i].serializationFormat))return!1;return!0}getColumns(){return this._columns}isBandColumnsUsed(){return this.getColumns().some(e=>e.isBand)}getGroupColumns(){var e=[];return(0,Y.S6)(this._columns,function(){(0,C.$K)(this.groupIndex)&&(e[this.groupIndex]=this)}),e}_shouldReturnVisibleColumns(){return!0}_compileVisibleColumns(e){return this._visibleColumns=this._visibleColumns||this._compileVisibleColumnsCore(),e=(0,C.$K)(e)?e:this._visibleColumns.length-1,this._visibleColumns[e]||[]}getVisibleColumns(e,t){return this._shouldReturnVisibleColumns()?this._compileVisibleColumns.apply(this,arguments):[]}getFixedColumns(e){return this._fixedColumns=this._fixedColumns||this._getFixedColumnsCore(),e=(0,C.$K)(e)?e:this._fixedColumns.length-1,this._fixedColumns[e]||[]}getFilteringColumns(){return this.getColumns().filter(e=>(e.dataField||e.name)&&(e.allowFiltering||e.allowHeaderFiltering)).map(e=>{var t=(0,B.l)(!0,{},e);return(0,C.$K)(t.dataField)||(t.dataField=t.name),t.filterOperations=e.filterOperations!==e.defaultFilterOperations?t.filterOperations:null,t})}getColumnIndexOffset(){return 0}_getFixedColumnsCore(){var s,o,l,e=[],t=this.getRowCount(),a={command:"transparent"},n=0;if(this._isColumnFixing())for(var d=0;d<=t;d++){s=0,l=null,o=null;for(var u=this.getVisibleColumns(d,!0),c=0;c<u.length;c++){var f=u[c-1],p=u[c];p.fixed?f&&f.fixed&&O_(this,f)!==O_(this,p)?(0,C.$K)(o)||(o=c):l=p.fixedPosition:(0===d&&(p.isBand&&p.colspan?n+=p.colspan:n++),s++,(0,C.$K)(o)||(o=c))}if(0===d&&(0===s||s>=u.length))return[];(0,C.$K)(o)||(o="right"===l?0:u.length),e[d]=u.slice(0),a.colspan||(a.colspan=n),e[d].splice(o,s,a)}return e.map(_=>_.map(w=>{var S=(0,ye.Z)({},w);return S.headerId&&(S.headerId+="-fixed"),S}))}_isColumnFixing(){var e=this.option("columnFixing.enabled");return!e&&(0,Y.S6)(this._columns,(t,i)=>{if(i.fixed)return e=!0,!1}),e}_getExpandColumnsCore(){return this.getGroupColumns()}getExpandColumns(){var t,e=this._getExpandColumnsCore(),i=e.filter(o=>0===o.groupIndex)[0],a=i&&i.fixed,n=this._isColumnFixing(),s=this.option("rtlEnabled");return e.length&&(t=this.columnOption("command:expand")),(0,Y.UI)(e,o=>(0,B.l)({},o,{visibleWidth:null,minWidth:null,cellTemplate:(0,C.$K)(o.groupIndex)?null:o.cellTemplate,headerCellTemplate:null,fixed:!(!(0,C.$K)(o.groupIndex)||!a)||n,fixedPosition:s?"right":"left"},t,{index:o.index,type:o.type||gn}))}getBandColumnsCache(){if(!this._bandColumnsCache){var e=this._columns,t={},i={},a=!0;e.forEach(n=>{var{ownerBand:s}=n,o=(0,C.Kn)(s)?s.index:s,l=e[o];n.hasColumns&&(a=!1),n.colspan&&(n.colspan=void 0),n.rowspan&&(n.rowspan=void 0),l?i[n.index]=l:o=-1,t[o]=t[o]||[],t[o].push(n)}),this._bandColumnsCache={isPlain:a,columnChildrenByIndex:t,columnParentByIndex:i}}return this._bandColumnsCache}_isColumnVisible(e){return e.visible&&this.isParentColumnVisible(e.index)}_isColumnInGroupPanel(e){return(0,C.$K)(e.groupIndex)&&!e.showWhenGrouped}hasVisibleDataColumns(){return this._columns.some(t=>{var i=this._isColumnVisible(t),a=this._isColumnInGroupPanel(t);return i&&!a&&!t.command})}_compileVisibleColumnsCore(){var e=this.getBandColumnsCache(),t=P_(this,this._columns,this._commandColumns,!0);!function(r,e,t){for(var i,a=0;a<e.length;a++){var n=e[a];(n.visible||n.command)&&(n.isBand&&(n.colspan=n.colspan||sA(r,n.index)),(!n.isBand||!n.colspan)&&(i=r.getRowCount(),!n.command&&(!(0,C.$K)(n.groupIndex)||n.showWhenGrouped)&&(i-=Jn(n.index,t.columnParentByIndex).length),i>1&&(n.rowspan=i)))}}(this,t,e);var i=this._getIndexedColumns(t),a=this._getVisibleColumnsFromIndexed(i);return!this.hasVisibleDataColumns()&&this._columns.length&&a[a.length-1].push({command:"empty"}),a}_getIndexedColumns(e){for(var t=this.option("rtlEnabled"),i=this.getRowCount(),a=function(r){var e;for(e=0;r>1;e++)r/=10;return e}(e.length),n=this.getBandColumnsCache(),s=[],o=[],l=0;l<i;l+=1)o[l]=[{}],s[l]=[{},{},{}];return e.forEach(d=>{var u,c,f,p,w,{visibleIndex:_}=d,S=Jn(d.index,n.columnParentByIndex),x=this._isColumnVisible(d),E=this._isColumnInGroupPanel(d);if(x&&!E){var V=S.length;if(_<0)_=-_,w=o[V];else if(d.fixed=null!==(c=null===(u=S[0])||void 0===u?void 0:u.fixed)&&void 0!==c?c:d.fixed,d.fixedPosition=null!==(p=null===(f=S[0])||void 0===f?void 0:f.fixedPosition)&&void 0!==p?p:d.fixedPosition,d.fixed){var N=!!d.command&&!Kc(this,d),j="right"===d.fixedPosition;t&&!N&&(j=!j),w=j?s[V][2]:s[V][0]}else w=s[V][1];if(S.length){_=L_(_,a);for(var Q=S.length-1;Q>=0;Q-=1)_=L_(S[Q].visibleIndex,a)+_}w[_]=w[_]||[],w[_].push(d)}}),{positiveIndexedColumns:s,negativeIndexedColumns:o}}_getVisibleColumnsFromIndexed(e){for(var t=this,{positiveIndexedColumns:i,negativeIndexedColumns:a}=e,n=[],s=this.getRowCount(),o=P_(this,this.getExpandColumns(),this._columns),l=0,d=0,u=function(f){n.push([]),(0,pa.jS)(a[f],(w,S)=>{n[f].unshift.apply(n[f],S)});var p=n[f].length;i[f].forEach(w=>{(0,pa.jS)(w,(S,x)=>{n[f].push.apply(n[f],x)})}),d<=f&&(d+=R_.call(t,n[f],o,"detailExpand",p)),l<=f&&(l+=R_.call(t,n[f],o,gn,p))},c=0;c<s;c+=1)u(c);return n.push(mA(n)),n}getInvisibleColumns(e,t){var n,i=this,a=[];return(0,Y.S6)(e=e||i._columns,(s,o)=>{if(o.ownerBand===t){if(o.isBand)return void((n=o.visible?i.getInvisibleColumns(i.getChildrenByBandColumn(o.index),o.index):i.getChildrenByBandColumn(o.index)).length&&(a.push(o),a=a.concat(n)));o.visible||a.push(o)}}),a}getChooserColumns(e){return((r,e)=>{if("asc"!==e&&"desc"!==e)return r;var t="asc"===e?1:-1;return r.sort((i,a)=>t*(i.caption||"").localeCompare(a.caption||"")),r})((e?this.getColumns():this.getInvisibleColumns()).filter(n=>n.showInColumnChooser),this.option("columnChooser.sortOrder"))}allowMoveColumn(e,t,i,a){var n=Zc(this,e,i),s=this._columns[n];return!(!s||!(s.allowReordering||s.allowGrouping||s.allowHiding))&&(i===a?i!==zs&&(e=(0,C.Kn)(e)?e.columnIndex:e)!==(t=(0,C.Kn)(t)?t.columnIndex:t)&&e+1!==t:i===Zs&&a!==zs||a===Zs?s&&s.allowGrouping:i!==zs&&a!==zs||s&&s.allowHiding)}moveColumn(e,t,i,a){var s,d,n={},o=Zc(this,e,i),l=Zc(this,t,a);if(o>=0){var u=this._columns[o];if(t=(0,C.Kn)(t)?t.columnIndex:t,d=l>=0?this._columns[l].groupIndex:-1,(0,C.$K)(u.groupIndex)&&i===Zs&&(d>u.groupIndex&&d--,a!==Zs?n.groupIndex=void 0:(s=u.groupIndex,delete u.groupIndex,T_(this))),a===Zs)n.groupIndex=function(r,e,t){var a,i=r.getGroupColumns();if(t>=0)for(a=0;a<i.length;a++)i[a].groupIndex>=t&&i[a].groupIndex++;else for(t=0,a=0;a<i.length;a++)t=Math.max(t,i[a].groupIndex+1);return t}(this,0,d),u.groupIndex=s;else if(t>=0){var c=this._columns[l];n.visibleIndex=!c||u.ownerBand!==c.ownerBand||F_(this,u)^F_(this,c)?y_:c.visibleIndex}var f=a!==zs;u.visible!==f&&(n.visible=f),this.columnOption(u.index,n)}}changeSortOrder(e,t){var i={},a=this.option("sorting"),n=a&&a.mode,l=this._columns[e];("single"===n||"multiple"===n)&&l&&l.allowSorting&&(("single"===n||!t)&&!(0,C.$K)(l.groupIndex)&&(0,Y.S6)(this._columns,function(d){d!==e&&this.sortOrder&&((0,C.$K)(this.groupIndex)||delete this.sortOrder,delete this.sortIndex)}),jd(t)?l.sortOrder!==t&&(i.sortOrder=t):"none"===t?l.sortOrder&&(i.sortIndex=void 0,i.sortOrder=void 0):function(d){if("ctrl"===t){if(!("sortOrder"in d)||!("sortIndex"in d))return!1;i.sortOrder=void 0,i.sortIndex=void 0}else i.sortOrder=(0,C.$K)(d.groupIndex)||(0,C.$K)(d.sortIndex)?"desc"===d.sortOrder?"asc":"desc":"asc"}(l)),this.columnOption(l.index,i)}getSortDataSourceParameters(e){var t=[],i=[];return(0,Y.S6)(this._columns,function(){(this.dataField||this.selector||this.calculateCellValue)&&(0,C.$K)(this.sortIndex)&&!(0,C.$K)(this.groupIndex)&&(t[this.sortIndex]=this)}),(0,Y.S6)(t,function(){if(jd(this&&this.sortOrder)){var n={selector:this.calculateSortValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue,desc:"desc"===this.sortOrder};this.sortingMethod&&(n.compare=this.sortingMethod.bind(this)),i.push(n)}}),i.length>0?i:null}getGroupDataSourceParameters(e){var t=[];return(0,Y.S6)(this.getGroupColumns(),function(){var i=this.calculateGroupValue||this.displayField||this.calculateDisplayValue||e&&this.selector||this.dataField||this.calculateCellValue;if(i){var a={selector:i,desc:"desc"===this.sortOrder,isExpanded:!!this.autoExpandGroup};this.sortingMethod&&(a.compare=this.sortingMethod.bind(this)),t.push(a)}}),t.length>0?t:null}refresh(e){var t=[];return(0,Y.S6)(this._columns,function(){var{lookup:i}=this;if(i&&!this.calculateDisplayValue){if(e&&i.valueMap)return;i.update&&t.push(i.update())}}),X.gx.apply(b.Z,t).done(Ud.bind(null,this))}_updateColumnOptions(e,t){var i,a,n,s,o=this._reinitAfterLookupChanges&&(null===(i=this._previousColumns)||void 0===i?void 0:i[t]);e.selector=null!==(a=e.selector)&&void 0!==a?a:u=>e.calculateCellValue(u),e.selector.columnIndex=t,e.selector.originalCallback=o&&null!==(s=null===(n=this._previousColumns[t].selector)||void 0===n?void 0:n.originalCallback)&&void 0!==s?s:e.selector,(0,Y.S6)(["calculateSortValue","calculateGroupValue","calculateDisplayValue"],(u,c)=>{var f=e[c];if((0,C.mf)(f))if(f.originalCallback)e[c].context.column=e;else{var p={column:e};e[c]=function(_){return f.call(p.column,_)},e[c].originalCallback=f,e[c].columnIndex=t,e[c].context=p}}),(0,C.HD)(e.calculateDisplayValue)&&(e.displayField=e.calculateDisplayValue,e.calculateDisplayValue=(0,Ot.vb)(e.displayField)),e.calculateDisplayValue&&(e.displayValueMap=e.displayValueMap||{}),E_(e,e.dataType);var{lookup:l}=e;l&&E_(l,l.dataType);var d=l?l.dataType:e.dataType;d&&(e.alignment=e.alignment||function(r,e){switch(r){case"number":return"right";case"boolean":return"center";default:return(0,li.q)(e)}}(d,this.option("rtlEnabled")),e.format=e.format||Ae.getFormatByDataType(d),e.customizeText=e.customizeText||I_(d),e.defaultFilterOperations=e.defaultFilterOperations||!l&&eA[d]||[],(0,C.$K)(e.filterOperations)||x_(e),e.defaultFilterOperation=e.filterOperations&&e.filterOperations[0]||"=",e.showEditorAlways=(0,C.$K)(e.showEditorAlways)?e.showEditorAlways:"boolean"===d&&!e.cellTemplate&&!e.lookup)}updateColumnDataTypes(e){var t=this,i=t.option("dateSerializationFormat"),a=t._getFirstItems(e),n=!1;return(0,Y.S6)(t._columns,(s,o)=>{var l,d,u,c,f,{lookup:p}=o;if(Ae.isDateType(o.dataType)&&void 0===o.serializationFormat&&(o.serializationFormat=i),p&&Ae.isDateType(p.dataType)&&void 0===o.serializationFormat&&(p.serializationFormat=i),o.calculateCellValue&&a.length){if(!o.dataType||p&&!p.dataType){for(l=0;l<a.length;l++)d=o.calculateCellValue(a[l]),o.dataType||(f=Hc(d),(u=u||f)&&f&&u!==f&&(u="string")),p&&!p.dataType&&(f=Hc(Ae.getDisplayValue(o,d,a[l])),(c=c||f)&&f&&c!==f&&(c="string"));(u||c)&&(u&&(o.dataType=u),p&&c&&(p.dataType=c),n=!0)}if(void 0===o.serializationFormat||p&&void 0===p.serializationFormat)for(l=0;l<a.length;l++)d=o.calculateCellValue(a[l],!0),void 0===o.serializationFormat&&(o.serializationFormat=S_(o.dataType,d)),p&&void 0===p.serializationFormat&&(p.serializationFormat=S_(p.dataType,p.calculateCellValue(d,!0)))}t._updateColumnOptions(o,s)}),n}_customizeColumns(e){var t=this.option("customizeColumns");t&&(e.some(a=>(0,C.Kn)(a.ownerBand))&&Qn(this),t(e),Ks(this,Ws(this,e)))}updateColumns(e,t,i){if(t||this.updateSortingGrouping(e),!e||e.isLoaded()){var a=e?e.sort()||[]:this.getSortDataSourceParameters(),n=e?e.group()||[]:this.getGroupDataSourceParameters(),s=e?.lastLoadOptions().filter;i||this._customizeColumns(this._columns),Qn(this);var o=this._columns;return(0,X.gx)(this.refresh(!0)).always(()=>{this._columns===o&&(this._updateChanges(e,{sorting:a,grouping:n,filtering:s}),hl(this))})}}_updateChanges(e,t){e&&(this.updateColumnDataTypes(e),this._dataSourceApplied=!0),Ae.equalSortParameters(t.sorting,this.getSortDataSourceParameters())||fa(this,"sorting"),Ae.equalSortParameters(t.grouping,this.getGroupDataSourceParameters())||fa(this,"grouping"),this._dataController&&!Ae.equalFilterParameters(t.filtering,this._dataController.getCombinedFilter())&&fa(this,"filtering"),fa(this,"columns")}updateSortingGrouping(e,t){var a,n,i=this,s=function(f,p,_){(0,Y.S6)(f,(w,S)=>{if(delete S[_],p)for(var x=0;x<p.length;x++){var{selector:E}=p[x],{isExpanded:V}=p[x];if(E===S.dataField||E===S.name||E===S.selector||E===S.calculateCellValue||E===S.calculateGroupValue||E===S.calculateDisplayValue){S.sortOrder=t?"sortOrder"in S?S.sortOrder:p[x].desc?"desc":"asc":S.sortOrder||(p[x].desc?"desc":"asc"),void 0!==V&&(S.autoExpandGroup=V),S[_]=x;break}}})};if(e){a=Ae.normalizeSortingInfo(e.sort());var o=Ae.normalizeSortingInfo(e.group()),l=i.getGroupDataSourceParameters(),d=i.getSortDataSourceParameters(),u=!Ae.equalSortParameters(o,l,!0),c=!u&&!Ae.equalSortParameters(o,l);i._columns.length||((0,Y.S6)(o,(f,p)=>{i._columns.push(p.selector)}),(0,Y.S6)(a,(f,p)=>{(0,C.mf)(p.selector)||i._columns.push(p.selector)}),Ks(i,Ws(i,i._columns))),(t||!l&&!i._hasUserState)&&(u||c)&&(s(i._columns,o,"groupIndex"),t&&(u&&fa(i,"grouping"),c&&fa(i,"groupExpanding"),n=!0)),(t||!d&&!i._hasUserState)&&!Ae.equalSortParameters(a,d)&&(s(i._columns,a,"sortIndex"),t&&(fa(i,"sorting"),n=!0)),n&&hl(i)}}updateFilter(e,t,i,a){if(!Array.isArray(e))return e;if(i=void 0!==(e=(0,B.l)([],e)).columnIndex?e.columnIndex:i,a=void 0!==e.filterValue?e.filterValue:a,(0,C.HD)(e[0])&&"!"!==e[0]){var n=this.columnOption(e[0]);t?(0,Kd.Z)().forceIsoDateParsing&&n&&n.serializeValue&&e.length>1&&(e[e.length-1]=n.serializeValue(e[e.length-1],"filter")):n&&n.selector&&(e[0]=n.selector,e[0].columnIndex=n.index)}else(0,C.mf)(e[0])&&(e[0].columnIndex=i,e[0].filterValue=a,e[0].selectedFilterOperation=e.selectedFilterOperation);for(var s=0;s<e.length;s++)e[s]=this.updateFilter(e[s],t,i,a);return e}columnCount(){return this._columns?this._columns.length:0}columnOption(e,t,i,a){var n=this,s=n._columns.concat(n._commandColumns),o=N_(s,e);if(o){if(1===arguments.length)return(0,B.l)({},o);if((0,C.HD)(t)){if(2===arguments.length)return Wc(n,o,t);Wc(n,o,t,i,a)}else(0,C.Kn)(t)&&(0,Y.S6)(t,(l,d)=>{Wc(n,o,l,d,a)});hl(n)}}clearSorting(){var e=this.columnCount();this.beginUpdate();for(var t=0;t<e;t++)this.columnOption(t,"sortOrder",void 0),delete N_(this._columns,t).sortOrder;this.endUpdate()}clearGrouping(){var e=this.columnCount();this.beginUpdate();for(var t=0;t<e;t++)this.columnOption(t,"groupIndex",void 0);this.endUpdate()}getVisibleIndex(e,t){for(var i=this.getVisibleColumns(t),a=i.length-1;a>=0;a--)if(i[a].index===e)return a;return-1}getVisibleIndexByColumn(e,t){var i=this.getVisibleColumns(t),a=i.filter(n=>n.index===e.index&&n.command===e.command)[0];return i.indexOf(a)}getVisibleColumnIndex(e,t){var i=this.columnOption(e,"index");return this.getVisibleIndex(i,t)}addColumn(e){var t=Gd(this,e),i=this._columns.length;this._columns.push(t),t.isBand&&(this._columns=Ws(this,this._columns),t=this._columns[i]),t.added=e,Qn(this,t),this.updateColumns(this._dataSource),this._checkColumns()}deleteColumn(e){var t=this.columnOption(e);if(t&&t.index>=0){if((r=>{r.forEach(e=>{(0,C.$K)(e.ownerBand)&&(e.ownerBand=r[e.ownerBand])})})(this._columns),this._columns.splice(t.index,1),t.isBand){var i=this.getChildrenByBandColumn(t.index).map(a=>a.index);this._columns=this._columns.filter(a=>i.indexOf(a.index)<0)}Qn(this),this.updateColumns(this._dataSource)}}addCommandColumn(e){var t=this._commandColumns.filter(i=>i.command===e.command)[0];t||this._commandColumns.push(t=e)}getUserState(){var i,e=this._columns,t=[];function a(n,s){void 0!==e[i][s]&&(t[i][s]=e[i][s])}for(i=0;i<e.length;i++)t[i]={},(0,Y.S6)($d,a);return t}setName(e){e.name=e.name||e.dataField||e.type}setUserState(e){var t=this._dataSource,i=this.option("stateStoring.ignoreColumnOptionNames");if(e?.forEach(this.setName),!i){i=[];var a=this.getCommonSettings();this.option("columnChooser.enabled")||i.push("visible"),"none"===this.option("sorting.mode")&&i.push("sortIndex","sortOrder"),a.allowGrouping||i.push("groupIndex"),a.allowFixing||i.push("fixed","fixedPosition"),a.allowResizing||i.push("width","visibleWidth");var n=!this.option("filterPanel.visible");!this.option("filterRow.visible")&&n&&i.push("filterValue","selectedFilterOperation"),!this.option("headerFilter.visible")&&n&&i.push("filterValues","filterType")}this._columnsUserState=e,this._ignoreColumnOptionNames=i,this._hasUserState=!!e,fa(this,"filtering"),this.init(!0),t&&(t.sort(this.getSortDataSourceParameters()),t.group(this.getGroupDataSourceParameters()))}_checkColumns(){var e={},t=!1,i=[];this._columns.forEach(a=>{var n,{name:s}=a,o=null===(n=a.columns)||void 0===n?void 0:n.length,l=a.allowEditing&&(a.dataField||a.setCellValue)&&!o;s?(e[s]&&i.push('"'.concat(s,'"')),e[s]=!0):l&&(t=!0)}),i.length&&At.Z.log("E1059",i.join(", ")),t&&At.Z.log("E1060")}_createCalculatedColumnOptions(e,t){var i={},{dataField:a}=e;if((Array.isArray(e.columns)&&e.columns.length||e.isBand)&&(i.isBand=!0,a=null),a){if((0,C.HD)(a)){var n=(0,Ot.vb)(a);i={caption:(0,Ma.GK)(a),calculateCellValue(s,o){var l=n(s);return this.deserializeValue&&!o?this.deserializeValue(l):l},setCellValue:_A,parseValue(s){var o,l;return"number"===this.dataType?(0,C.HD)(s)&&this.format?o=function(r,e){var t=qt.Z.parse(r);if((0,C.kE)(t)){var i=qt.Z.format(t,e),a=qt.Z.format(t,"decimal");if(i===r||a===r)return t}}(s.trim(),this.format):(0,C.$K)(s)&&(0,C.kE)(s)&&(o=Number(s)):"boolean"===this.dataType?s===this.trueText?o=!0:s===this.falseText&&(o=!1):Ae.isDateType(this.dataType)?(l=pt.Z.parse(s,this.format))&&(o=l):o=s,o}}}i.allowFiltering=!0}else i.allowFiltering=!!e.calculateFilterExpression;return i.calculateFilterExpression=function(){return Xn.defaultCalculateFilterExpression.apply(this,arguments)},i.defaultFilterOperation="=",i.createFilterExpression=function(s,o){var l;return this.calculateFilterExpression&&(l=this.calculateFilterExpression.apply(this,arguments)),(0,C.mf)(l)&&(l=[l,"=",!0]),l&&(l.columnIndex=this.index,l.filterValue=s,l.selectedFilterOperation=o),l},(!a||!(0,C.HD)(a))&&(0,B.l)(!0,i,{allowSorting:!1,allowGrouping:!1,calculateCellValue:()=>null}),t&&(i.allowFixing=!1),e.dataType&&(i.userDataType=e.dataType),e.selectedFilterOperation&&!("defaultSelectedFilterOperation"in i)&&(i.defaultSelectedFilterOperation=e.selectedFilterOperation),e.lookup&&(i.lookup={calculateCellValue(s,o){return this.valueExpr&&(s=this.valueMap&&this.valueMap[s]),this.deserializeValue&&!o?this.deserializeValue(s):s},updateValueMap(){if(this.valueMap={},this.items)for(var s=(0,Ot.vb)(this.valueExpr),o=(0,Ot.vb)(this.displayExpr),l=0;l<this.items.length;l++){var d=this.items[l],u=o(d);this.valueMap[s(d)]=u,this.dataType=this.dataType||Hc(u)}},update(){var s=this,{dataSource:o}=s;if(o)if((0,C.mf)(o)&&!zr.default.isWrapped(o)&&(o=o({})),(0,C.PO)(o)||o instanceof qI.Z||Array.isArray(o)){if(s.valueExpr){var l=(0,ol.aN)(o);return l.paginate=!1,(o=new vn.o(l)).load().done(d=>{s.items=d,s.updateValueMap&&s.updateValueMap()})}}else At.Z.log("E1016");else s.updateValueMap&&s.updateValueMap()}}),i.resizedCallbacks=(0,sr.Z)(),e.resized&&i.resizedCallbacks.add(e.resized.bind(e)),(0,Y.S6)(i,s=>{if((0,C.mf)(i[s])&&0!==s.indexOf("default")){var o="default".concat(s.charAt(0).toUpperCase()).concat(s.substr(1));i[o]=i[s]}}),i}getRowCount(){return this._rowCount=this._rowCount||function(r){var e=1,t=r.getBandColumnsCache(),{columnParentByIndex:i}=t;return r._columns.forEach(a=>{var n=Jn(a.index,i),s=n.filter(o=>!o.visible);a.visible&&!s.length&&(e=Math.max(e,n.length+1))}),e}(this),this._rowCount}getRowIndex(e,t){var i=this._columns[e],a=this.getBandColumnsCache();return i&&(t||i.visible&&!i.command&&!(0,C.$K)(i.groupIndex))?Jn(e,a.columnParentByIndex).length:0}getChildrenByBandColumn(e,t){var i=this.getBandColumnsCache(),a=rA(e,i.columnChildrenByIndex,!t);return t?a.filter(n=>n.visible&&!n.command).sort((n,s)=>n.visibleIndex-s.visibleIndex):a}isParentBandColumn(e,t){var i=!1,a=this._columns[e],n=this.getBandColumnsCache(),s=a&&Jn(e,n.columnParentByIndex);return s&&(0,Y.S6)(s,(o,l)=>{if(l.index===t)return i=!0,!1}),i}isParentColumnVisible(e){var t=!0,i=this.getBandColumnsCache(),a=e>=0&&Jn(e,i.columnParentByIndex);return a&&(0,Y.S6)(a,(n,s)=>t=t&&s.visible),t}getColumnId(e){return e.command&&e.type===gn?Kc(this,e)?"type:".concat(e.type):"command:".concat(e.command):e.index}getCustomizeTextByDataType(e){return I_(e)}getHeaderContentAlignment(e){return this.option("rtlEnabled")?"left"===e?"right":"left":e}}}};He.registerModule("columns",{defaultOptions:()=>(0,B.l)(!0,{},B_.defaultOptions(),{commonColumnSettings:{allowExporting:!0}}),controllers:B_.controllers});var EA=ve(5578),qd=ve(3776),IA=ve(6659),AA=ve(3741),k_="_dataSourceOptions",M_="_dataSourceChangedHandler",H_="_dataSourceLoadErrorHandler",Z_="_dataSourceLoadingChangedHandler",z_="_dataSourceFromUrlLoadMode",W_="_getSpecificDataSourceOption",K_="_normalizeDataSource",TA=r=>class extends r{postCtor(){this.on("disposing",()=>{this._disposeDataSource()})}_refreshDataSource(){this._initDataSource(),this._loadDataSource()}_initDataSource(){var t,i,e=W_ in this?this[W_]():this.option("dataSource");this._disposeDataSource(),e&&(e instanceof vn.o?(this._isSharedDataSource=!0,this._dataSource=e):(t=k_ in this?this[k_]():{},i=this._dataSourceType?this._dataSourceType():vn.o,e=(0,ol.aN)(e,{fromUrlLoadMode:z_ in this&&this[z_]()}),this._dataSource=new i((0,B.l)(!0,{},t,e))),K_ in this&&(this._dataSource=this[K_](this._dataSource)),this._addDataSourceHandlers(),this._initDataController())}_initDataController(){var e,t=null===(e=this.option)||void 0===e?void 0:e.call(this,"_dataController");this._dataController=t||new AA.Z(this._dataSource)}_addDataSourceHandlers(){M_ in this&&this._addDataSourceChangeHandler(),H_ in this&&this._addDataSourceLoadErrorHandler(),Z_ in this&&this._addDataSourceLoadingChangedHandler(),this._addReadyWatcher()}_addReadyWatcher(){this.readyWatcher=function(e){this._ready&&this._ready(!e)}.bind(this),this._dataSource.on("loadingChanged",this.readyWatcher)}_addDataSourceChangeHandler(){var e=this._dataSource;this._proxiedDataSourceChangedHandler=function(t){this[M_](e.items(),t)}.bind(this),e.on("changed",this._proxiedDataSourceChangedHandler)}_addDataSourceLoadErrorHandler(){this._proxiedDataSourceLoadErrorHandler=this[H_].bind(this),this._dataSource.on("loadError",this._proxiedDataSourceLoadErrorHandler)}_addDataSourceLoadingChangedHandler(){this._proxiedDataSourceLoadingChangedHandler=this[Z_].bind(this),this._dataSource.on("loadingChanged",this._proxiedDataSourceLoadingChangedHandler)}_loadDataSource(){var e=this._dataSource;e&&(e.isLoaded()?this._proxiedDataSourceChangedHandler&&this._proxiedDataSourceChangedHandler():e.load())}_loadSingle(e,t){return e="this"===e?this._dataSource.key()||"this":e,this._dataSource.loadSingle(e,t)}_isLastPage(){return!this._dataSource||this._dataSource.isLastPage()||!this._dataSource._pageSize}_isDataSourceLoading(){return this._dataSource&&this._dataSource.isLoading()}_disposeDataSource(){this._dataSource&&(this._isSharedDataSource?(delete this._isSharedDataSource,this._proxiedDataSourceChangedHandler&&this._dataSource.off("changed",this._proxiedDataSourceChangedHandler),this._proxiedDataSourceLoadErrorHandler&&this._dataSource.off("loadError",this._proxiedDataSourceLoadErrorHandler),this._proxiedDataSourceLoadingChangedHandler&&this._dataSource.off("loadingChanged",this._proxiedDataSourceLoadingChangedHandler),this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher)):this._dataSource.dispose(),delete this._dataSource,delete this._proxiedDataSourceChangedHandler,delete this._proxiedDataSourceLoadErrorHandler,delete this._proxiedDataSourceLoadingChangedHandler)}getDataSource(){return this._dataSource||null}},$_=function(r,e,t){var i=r._dataSource;if(i){if(void 0!==t){if(r._getPagingOptionValue(e)!==t){"pageSize"===e&&i.pageIndex(0),i[e](t),r._skipProcessingPagingChange=!0,r.option("paging.".concat(e),t),r._skipProcessingPagingChange=!1;var n=i.pageIndex();return r._isPaging="pageIndex"===e,i["pageIndex"===e?"load":"reload"]().done(()=>{r._isPaging=!1,r.pageChanged.fire(n)})}return(0,X.BH)().resolve().promise()}return i[e]()}return 0};class G_ extends(TA(Vt.Controller)){init(){this._items=[],this._cachedProcessedItems=null,this._columnsController=this.getController("columns"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._editingController=this.getController("editing"),this._editorFactoryController=this.getController("editorFactory"),this._errorHandlingController=this.getController("errorHandling"),this._filterSyncController=this.getController("filterSync"),this._applyFilterController=this.getController("applyFilter"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._focusController=this.getController("focus"),this._headerFilterController=this.getController("headerFilter"),this._selectionController=this.getController("selection"),this._stateStoringController=this.getController("stateStoring"),this._validatingController=this.getController("validating"),this._adaptiveExpandedKey=void 0,this._isPaging=!1,this._currentOperationTypes=null,this._dataChangedHandler=e=>{this._currentOperationTypes=this._dataSource.operationTypes(),this._handleDataChanged(e),this._currentOperationTypes=null},this._columnsChangedHandler=this._handleColumnsChanged.bind(this),this._loadingChangedHandler=this._handleLoadingChanged.bind(this),this._loadErrorHandler=this._handleLoadError.bind(this),this._customizeStoreLoadOptionsHandler=this._handleCustomizeStoreLoadOptions.bind(this),this._changingHandler=this._handleChanging.bind(this),this._dataPushedHandler=this._handleDataPushed.bind(this),this._columnsController.columnsChanged.add(this._columnsChangedHandler),this._isLoading=!1,this._isCustomLoading=!1,this._repaintChangesOnly=void 0,this._changes=[],this.createAction("onDataErrorOccurred"),this.dataErrorOccurred.add(e=>this.executeAction("onDataErrorOccurred",{error:e})),this._refreshDataSource(),this.postCtor()}_getPagingOptionValue(e){return this._dataSource[e]()}callbackNames(){return["changed","loadingChanged","dataErrorOccurred","pageChanged","dataSourceChanged","pushed"]}callbackFlags(e){if("dataErrorOccurred"===e)return{stopOnFalse:!0}}publicMethods(){return["_disposeDataSource","beginCustomLoading","byKey","clearFilter","endCustomLoading","filter","getCombinedFilter","getDataByKeys","getDataSource","getKeyByRowIndex","getRowIndexByKey","getVisibleRows","keyOf","pageCount","pageIndex","pageSize","refresh","repaintRows","totalCount"]}reset(){this._columnsController.reset(),this._items=[],this._refreshDataSource()}_handleDataSourceChange(e){if(e.value===e.previousValue||this.option("columns")&&Array.isArray(e.value)&&Array.isArray(e.previousValue)){if(e.value!==e.previousValue){var i=this.store();i&&(i._array=e.value)}return this.needToRefreshOnDataSourceChange(e)&&this.refresh(this.option("repaintChangesOnly")),!0}return!1}needToRefreshOnDataSourceChange(e){return!0}optionChanged(e){var i,a,t=this;function n(){e.handled=!0}if("dataSource"===e.name&&e.name===e.fullName&&this._handleDataSourceChange(e))n();else switch(e.name){case"cacheEnabled":case"repaintChangesOnly":case"highlightChanges":case"loadingTimeout":n();break;case"remoteOperations":case"keyExpr":case"dataSource":case"scrolling":n(),t.reset();break;case"paging":if((i=t.dataSource())&&(a=t._setPagingOptions(i))){var s=i.pageIndex();this._isPaging=a.isPageIndexChanged,i.load().done(()=>{this._isPaging=!1,t.pageChanged.fire(s)})}n();break;case"rtlEnabled":t.reset();break;case"columns":(i=t.dataSource())&&i.isLoading()&&e.name===e.fullName&&(this._useSortingGroupingFromColumns=!0,i.load());break;default:super.optionChanged(e)}}isReady(){return!this._isLoading}getDataSource(){return this._dataSource&&this._dataSource._dataSource}getCombinedFilter(e){return this.combinedFilter(void 0,e)}combinedFilter(e,t){if(!this._dataSource)return e;var i=e??this._dataSource.filter();if(this._columnsController.isDataSourceApplied()||this._columnsController.isAllDataTypesDefined()){var n=this._calculateAdditionalFilter();i=n?Ae.combineFilters([n,i]):i}var s=this._dataSource.remoteOperations().filtering||t;return this._columnsController.updateFilter(i,s)}waitReady(){return this._updateLockCount?(this._readyDeferred=new X.BH,this._readyDeferred):(0,X.gx)()}_endUpdateCore(){var e=this._changes;if(e.length){this._changes=[];var t=e.every(i=>i.repaintChangesOnly);this.updateItems(1===e.length?e[0]:{repaintChangesOnly:t})}this._readyDeferred&&(this._readyDeferred.resolve(),this._readyDeferred=null)}_handleCustomizeStoreLoadOptions(e){var t,i=this._columnsController,a=this._dataSource,{storeLoadOptions:n}=e;e.isCustomLoading&&!n.isLoadingAll||(n.filter=this.combinedFilter(n.filter),1===(null===(t=n.filter)||void 0===t?void 0:t.length)&&"!"===n.filter[0]&&(e.data=[],e.extra=e.extra||{},e.extra.totalCount=0),i.isDataSourceApplied()||i.updateColumnDataTypes(a),this._columnsUpdating=!0,i.updateSortingGrouping(a,!this._useSortingGroupingFromColumns),this._columnsUpdating=!1,n.sort=i.getSortDataSourceParameters(),n.group=i.getGroupDataSourceParameters(),a.sort(n.sort),a.group(n.group),n.sort=i.getSortDataSourceParameters(!a.remoteOperations().sorting),e.group=i.getGroupDataSourceParameters(!a.remoteOperations().grouping))}_handleColumnsChanged(e){var n,s,o,t=this,{changeTypes:i}=e,{optionNames:a}=e;if(i.sorting||i.grouping)t._dataSource&&!t._columnsUpdating&&(t._dataSource.group(t._columnsController.getGroupDataSourceParameters()),t._dataSource.sort(t._columnsController.getSortDataSourceParameters()),t.reload());else if(i.columns&&(s=t._columnsController.columnOption(e.columnIndex,"filterValues"),(a.filterValues||a.filterType&&Array.isArray(s)||a.filterValue||a.selectedFilterOperation||a.allowFiltering)&&(n=t._columnsController.columnOption(e.columnIndex,"filterValue"),(Array.isArray(s)||void 0===e.columnIndex||(0,C.$K)(n)||!a.selectedFilterOperation||a.filterValue)&&(t._applyFilter(),o=!0)),!t._needApplyFilter&&!Ae.checkChanges(a,["width","visibleWidth","filterValue","bufferedFilterValue","selectedFilterOperation","filterValues","filterType"])&&t._columnsController.columnsChanged.add(function d(u){var c;t._columnsController.columnsChanged.remove(d),t.updateItems({repaintChangesOnly:!1,virtualColumnsScrolling:null===(c=u?.changeTypes)||void 0===c?void 0:c.virtualColumnsScrolling})}),(0,C.$K)(a.visible))){var l=t._columnsController.columnOption(e.columnIndex);l&&((0,C.$K)(l.filterValue)||(0,C.$K)(l.filterValues))&&(t._applyFilter(),o=!0)}!o&&i.filtering&&!this._needApplyFilter&&t.reload()}_handleDataChanged(e){var t=this,i=t._dataSource,a=t._columnsController,n=!1;this._useSortingGroupingFromColumns=!1,i&&!t._isDataSourceApplying&&(t._isDataSourceApplying=!0,(0,X.gx)(t._columnsController.applyDataSource(i)).done(()=>{t._isLoading&&t._handleLoadingChanged(!1),n&&e&&e.isDelayed&&(e.isDelayed=!1),t._isDataSourceApplying=!1;var o,s=t._needApplyFilter;t._needApplyFilter=!1,s&&!t._isAllDataTypesDefined&&(o=t._calculateAdditionalFilter())&&o.length?(At.Z.log("W1005",t.component.NAME),t._applyFilter()):t.updateItems(e,!0)}).fail(()=>{t._isDataSourceApplying=!1}),t._isDataSourceApplying&&(n=!0,t._handleLoadingChanged(!0)),t._needApplyFilter=!t._columnsController.isDataSourceApplied(),t._isAllDataTypesDefined=a.isAllDataTypesDefined())}_handleLoadingChanged(e){this._isLoading=e,this._fireLoadingChanged()}_handleLoadError(e){this.dataErrorOccurred.fire(e)}_handleDataPushed(e){this.pushed.fire(e)}fireError(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.dataErrorOccurred.fire(At.Z.Error.apply(At.Z,t))}_setPagingOptions(e){var t=this.option("paging.pageIndex"),i=this.option("paging.pageSize"),a=this.option("paging.enabled"),n=this.option("scrolling.mode"),s="infinite"===n,l=a||"virtual"===n||s,d=!1,u=!1,c=!1;return e.requireTotalCount(!s),void 0!==a&&e.paginate()!==l&&(e.paginate(l),d=!0),void 0!==i&&e.pageSize()!==i&&(e.pageSize(i),u=!0),void 0!==t&&e.pageIndex()!==t&&(e.pageIndex(t),c=!0),!!(d||u||c)&&{isPaginateChanged:d,isPageSizeChanged:u,isPageIndexChanged:c}}_getSpecificDataSourceOption(){var e=this.option("dataSource");return Array.isArray(e)?{store:{type:"array",data:e,key:this.option("keyExpr")}}:e}_initDataSource(){var e=this._dataSource;super._initDataSource();var t=this._dataSource;if(this._useSortingGroupingFromColumns=!0,this._cachedProcessedItems=null,t){var i=this._setPagingOptions(t);this._isPaging=i?.isPageIndexChanged,this.setDataSource(t)}else e&&this.updateItems()}_loadDataSource(){var e=this,t=e._dataSource,i=new X.BH;return(0,X.gx)(this._columnsController.refresh(!0)).always(()=>{t?t.load().done(function(){e._isPaging=!1,i.resolve.apply(i,arguments)}).fail(i.reject):i.resolve()}),i.promise()}_beforeProcessItems(e){return e.slice(0)}getRowIndexDelta(){return 0}getDataIndex(e){var t=this._items,i="append"===e.changeType&&t.length>0?t[t.length-1]:null;return(0,C.$K)(i?.dataIndex)?i.dataIndex+1:0}_processItems(e,t){var i=this,a=i.getRowIndexDelta(),{changeType:n}=t,l={visibleColumns:i._columnsController.getVisibleColumns(null,"loadingAll"===n),dataIndex:this.getDataIndex(t)},d=[];return(0,Y.S6)(e,(u,c)=>{(0,C.$K)(c)&&(l.rowIndex=u-a,c=i._processItem(c,l),d.push(c))}),d}_processItem(e,t){return e=this._generateDataItem(e,t),(e=this._processDataItem(e,t)).dataIndex=t.dataIndex++,e}_generateDataItem(e,t){return{rowType:"data",data:e,key:this.keyOf(e)}}_processDataItem(e,t){return e.values=this.generateDataValues(e.data,t.visibleColumns),e}generateDataValues(e,t,i){for(var n,a=[],s=0;s<t.length;s++){var o=t[s];n=i?void 0:null,o.command||(o.calculateCellValue?n=o.calculateCellValue(e):o.dataField&&(n=e[o.dataField])),a.push(n)}return a}_applyChange(e){"update"===e.changeType?this._applyChangeUpdate(e):this.items().length&&e.repaintChangesOnly&&"refresh"===e.changeType?this._applyChangesOnly(e):"refresh"===e.changeType&&this._applyChangeFull(e)}_applyChangeFull(e){this._items=e.items.slice(0)}_getRowIndices(e){var t=e.rowIndices.slice(0),i=this.getRowIndexDelta();t.sort((s,o)=>s-o);for(var a=0;a<t.length;a++){var n=t[a];e.allowInvisibleRowIndices&&(n+=i),n<0&&(t.splice(a,1),a--)}return t}_applyChangeUpdate(e){var d,t=this,{items:i}=e,a=t._getRowIndices(e),n=t.getRowIndexDelta(),s=t.option("repaintChangesOnly"),o=-1,l=0;e.items=[],e.rowIndices=[],e.columnIndices=[],e.changeTypes=[];var u=function(c,f,p){var _=c&&f&&(0,le.bY)(c.key,f.key);return _&&p&&(_=c.rowType===f.rowType&&("detail"!==f.rowType||c.isEditing===f.isEditing)),_};(0,Y.S6)(a,(c,f)=>{var p;if(o!==(f+=l+n)){o=f;var _=t._items[f],w=t._items[f+1],S=i[f],x=i[f+1],E=u(_,w)||u(S,x);if(S&&(S.rowIndex=f,e.items.push(S)),_&&S&&u(_,S,E))d="update",t._items[f]=S,_.visible!==S.visible?e.items.splice(-1,1,{visible:S.visible}):s&&!e.isFullUpdate&&(p=t._partialUpdateRow(_,S,f-n));else if(S&&!_||x&&u(_,x,E))d="insert",t._items.splice(f,0,S),l++;else if(_&&!S||w&&u(S,w,E))d="remove",t._items.splice(f,1),l--,o=-1;else{if(!S)return;d="update",t._items[f]=S}e.rowIndices.push(f-n),e.changeTypes.push(d),e.columnIndices.push(p)}})}_isCellChanged(e,t,i,a,n){if(JSON.stringify(e.values[a])!==JSON.stringify(t.values[a]))return!0;function s(o,l){return!!o.modifiedValues&&void 0!==o.modifiedValues[l]}return s(e,a)!==s(t,a)}_getChangedColumnIndices(e,t,i,a){var n;if(e.rowType===t.rowType){if("group"!==t.rowType&&"groupFooter"!==t.rowType&&(n=[],"detail"!==t.rowType))for(var s=0;s<e.values.length;s++)this._isCellChanged(e,t,i,s,a)&&n.push(s);"group"===t.rowType&&e.cells&&t.isExpanded===e.isExpanded&&t.data.isContinuation===e.data.isContinuation&&t.data.isContinuationOnNextPage===e.data.isContinuationOnNextPage&&(n=e.cells.map((l,d)=>{var u;return"groupExpand"!==(null===(u=l.column)||void 0===u?void 0:u.type)?d:-1}).filter(l=>l>=0))}return n}_partialUpdateRow(e,t,i,a){var n=this._getChangedColumnIndices(e,t,i,a);return n?.length&&this.option("dataRowTemplate")&&(n=void 0),n&&(e.cells&&e.cells.forEach((s,o)=>{!(n.indexOf(o)>=0)&&s&&s.update&&s.update(t)}),t.update=e.update,t.watch=e.watch,t.cells=e.cells,a&&(t.oldValues=e.values),e.update&&e.update(t)),n}_isItemEquals(e,t){var i,a,n,s;if(JSON.stringify(e.values)!==JSON.stringify(t.values)||["modified","isNewRow","removed","isEditing"].some(u=>e[u]!==t[u]))return!1;if("group"===e.rowType||"groupFooter"===e.rowType){var o=e.isExpanded===t.isExpanded,l=JSON.stringify(e.summaryCells)===JSON.stringify(t.summaryCells),d=(null===(i=e.data)||void 0===i?void 0:i.isContinuation)===(null===(a=t.data)||void 0===a?void 0:a.isContinuation)&&(null===(n=e.data)||void 0===n?void 0:n.isContinuationOnNextPage)===(null===(s=t.data)||void 0===s?void 0:s.isContinuationOnNextPage);if(!o||!l||!d)return!1}return!0}_applyChangesOnly(e){var t,i=[],a=[],n=[],s=[],o={},l=null===(t=e?.isLiveUpdate)||void 0===t||t;function d(p){if(p)return"".concat(p.rowType,",").concat(JSON.stringify(p.key))}var u=this._items,c=u.slice();e.items.forEach((p,_)=>{var w=d(p);o[w]=_,p.rowIndex=_});var f=(0,EA.h)(c,e.items,d,(p,_)=>!!this._isItemEquals(p,_)&&(p.cells&&(p.update&&p.update(_),p.cells.forEach(w=>{w&&w.update&&w.update(_,!0)})),!0));f?(f.forEach(p=>{switch(p.type){case"update":var{index:_}=p,w=p.data,{oldItem:S}=p,x=this._partialUpdateRow(S,w,_,l);i.push(_),n.push("update"),s.push(w),u[_]=w,a.push(x);break;case"insert":i.push(p.index),n.push("insert"),s.push(p.data),a.push(void 0),u.splice(p.index,0,p.data);break;case"remove":i.push(p.index),n.push("remove"),u.splice(p.index,1),s.push(p.oldItem),a.push(void 0)}}),e.repaintChangesOnly=!0,e.changeType="update",e.rowIndices=i,e.columnIndices=a,e.changeTypes=n,e.items=s,c.length&&(e.isLiveUpdate=!0),this._correctRowIndices(p=>{var _=this._rowIndexOffset||0,w=this.getRowIndexOffset(),x=d(c[p-_]),E=o[x];return E>=0?E+w-p:0})):this._applyChangeFull(e)}_correctRowIndices(e){}_afterProcessItems(e,t){return e}_updateItemsCore(e){var t,i=this._dataSource;if(e.changeType=e.changeType||"refresh",i){var n=this._cachedProcessedItems;e.useProcessedItemsCache&&n?t=n:(t=e.items||i.items(),t=this._beforeProcessItems(t),t=this._processItems(t,e),this._cachedProcessedItems=t),t=this._afterProcessItems(t,e),e.items=t;var s=this._items.length===t.length&&this._items;this._applyChange(e);var o=this.getRowIndexDelta();(0,Y.S6)(this._items,(l,d)=>{var u;d.rowIndex=l-o,s&&(d.cells=null!==(u=s[l].cells)&&void 0!==u?u:[]);var c=t[l];c&&(d.loadIndex=c.loadIndex)}),this._rowIndexOffset=this.getRowIndexOffset()}else this._items=[]}_handleChanging(e){var t=this.getVisibleRows();this.dataSource()&&e.changes.forEach(a=>{if("insert"===a.type&&a.index>=0){for(var n=0,s=0;s<a.index;s++){var o=t[s];o&&("data"===o.rowType||"group"===o.rowType)&&n++}a.index=n}})}updateItems(e,t){var i;if(e=e||{},void 0!==this._repaintChangesOnly)e.repaintChangesOnly=null!==(i=e.repaintChangesOnly)&&void 0!==i?i:this._repaintChangesOnly,e.needUpdateDimensions=e.needUpdateDimensions||this._needUpdateDimensions;else if(e.changes)e.repaintChangesOnly=this.option("repaintChangesOnly");else if(t){var a=this.dataSource().operationTypes();e.repaintChangesOnly=a&&!a.grouping&&!a.filtering&&this.option("repaintChangesOnly"),e.isDataChanged=!0,a&&(a.reload||a.paging||a.groupExpanding)&&(e.needUpdateDimensions=!0)}!this._updateLockCount||e.cancel?(this._updateItemsCore(e),!e.cancel&&this._fireChanged(e)):this._changes.push(e)}loadingOperationTypes(){var e=this.dataSource();return e&&e.loadingOperationTypes()||{}}_fireChanged(e){this._currentOperationTypes&&(e.operationTypes=this._currentOperationTypes,this._currentOperationTypes=null),(0,le.g0)(()=>{this.changed.fire(e)})}isLoading(){return this._isLoading||this._isCustomLoading}_fireLoadingChanged(){this.loadingChanged.fire(this.isLoading(),this._loadingText)}_calculateAdditionalFilter(){return null}_applyFilter(){var e=this._dataSource;return e?(e.pageIndex(0),this._isFilterApplying=!0,this.reload().done(()=>{this._isFilterApplying&&this.pageChanged.fire()})):(new X.BH).resolve()}resetFilterApplying(){this._isFilterApplying=!1}filter(e){var t=this._dataSource,i=t&&t.filter();if(0===arguments.length)return i;e=arguments.length>1?Array.prototype.slice.call(arguments,0):e,!Ae.equalFilterParameters(i,e)&&(t&&t.filter(e),this._applyFilter())}clearFilter(e){var t=this._columnsController,i=function(a){for(var n=t.columnCount(),s=0;s<n;s++)t.columnOption(s,a,void 0)};if(this.component.beginUpdate(),arguments.length>0)switch(e){case"dataSource":this.filter(null);break;case"search":this.searchByText("");break;case"header":i("filterValues");break;case"row":i("filterValue")}else this.filter(null),this.searchByText(""),i("filterValue"),i("bufferedFilterValue"),i("filterValues");this.component.endUpdate()}_fireDataSourceChanged(){var e=this;e.changed.add(function t(){e.changed.remove(t),e.dataSourceChanged.fire()})}_getDataSourceAdapter(){}_createDataSourceAdapterCore(e,t){var a=this._getDataSourceAdapter().create(this.component);return a.init(e,t),a}isLocalStore(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store())instanceof qd.Z}isCustomStore(e){return(e=e||this.store())instanceof IA.Z}_createDataSourceAdapter(e){var t=this.option("remoteOperations"),i=e.store(),a={filtering:!0,sorting:!0,paging:!0,grouping:!0,summary:!0};return(0,C.Kn)(t)&&t.groupPaging&&(t=(0,B.l)({},a,t)),"auto"===t&&(t=this.isLocalStore(i)||this.isCustomStore(i)?{}:{filtering:!0,sorting:!0,paging:!0}),!0===t&&(t=a),this._createDataSourceAdapterCore(e,t)}setDataSource(e){var t=this._dataSource;!e&&t&&(t.cancelAll(),t.changed.remove(this._dataChangedHandler),t.loadingChanged.remove(this._loadingChangedHandler),t.loadError.remove(this._loadErrorHandler),t.customizeStoreLoadOptions.remove(this._customizeStoreLoadOptionsHandler),t.changing.remove(this._changingHandler),t.pushed.remove(this._dataPushedHandler),t.dispose(this._isSharedDataSource)),e&&(e=this._createDataSourceAdapter(e)),this._dataSource=e,e&&(this._fireDataSourceChanged(),this._isLoading=!e.isLoaded(),this._needApplyFilter=!0,this._isAllDataTypesDefined=this._columnsController.isAllDataTypesDefined(),e.changed.add(this._dataChangedHandler),e.loadingChanged.add(this._loadingChangedHandler),e.loadError.add(this._loadErrorHandler),e.customizeStoreLoadOptions.add(this._customizeStoreLoadOptionsHandler),e.changing.add(this._changingHandler),e.pushed.add(this._dataPushedHandler))}items(e){return this._items}isEmpty(){return!this.items().length}pageCount(){return this._dataSource?this._dataSource.pageCount():1}dataSource(){return this._dataSource}store(){var e=this._dataSource;return e&&e.store()}loadAll(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this,a=new X.BH,n=i._dataSource;if(n)if(e){var s={data:e,isCustomLoading:!0,storeLoadOptions:{isLoadingAll:!0},loadOptions:{filter:t?null:i.getCombinedFilter(),group:n.group(),sort:n.sort()}};n._handleDataLoaded(s),(0,X.gx)(s.data).done(l=>{var d;l=i._beforeProcessItems(l),a.resolve(i._processItems(l,{changeType:"loadingAll"}),null===(d=s.extra)||void 0===d?void 0:d.summary)}).fail(a.reject)}else if(n.isLoading())a.reject();else{var o=(0,B.l)({},n.loadOptions(),{isLoadingAll:!0,requireTotalCount:!1});n.load(o).done((l,d)=>{l=i._beforeProcessItems(l),l=i._processItems(l,{changeType:"loadingAll"}),a.resolve(l,d&&d.summary)}).fail(a.reject)}else a.resolve([]);return a}getKeyByRowIndex(e,t){var i=this.items(t)[e];if(i)return i.key}getRowIndexByKey(e,t){return Ae.getIndexByKey(e,this.items(t))}keyOf(e){var t=this.store();if(t)return t.keyOf(e)}byKey(e){var a,t=this.store(),i=this.getRowIndexByKey(e);if(t)return i>=0&&(a=(new X.BH).resolve(this.items()[i].data)),a||t.byKey(e)}key(){var e=this.store();if(e)return e.key()}getRowIndexOffset(e){return 0}getDataByKeys(e){var t=this,i=new X.BH,a=[],n=[];return(0,Y.S6)(e,(s,o)=>{a.push(t.byKey(o).done(l=>{n[s]=l}))}),X.gx.apply(b.Z,a).always(()=>{i.resolve(n)}),i}pageIndex(e){return $_(this,"pageIndex",e)}pageSize(e){return $_(this,"pageSize",e)}beginCustomLoading(e){this._isCustomLoading=!0,this._loadingText=e||"",this._fireLoadingChanged()}endCustomLoading(){this._isCustomLoading=!1,this._loadingText=void 0,this._fireLoadingChanged()}refresh(e){!0===e?e={reload:!0,changesOnly:!0}:e||(e={lookup:!0,selection:!0,reload:!0});var t=this,i=t.getDataSource(),{changesOnly:a}=e,n=new X.BH,s=function(){t._repaintChangesOnly=!!a};return(0,X.gx)(!e.lookup||t._columnsController.refresh()).always(()=>{e.load||e.reload?(i&&i.on("customizeLoadResult",s),(0,X.gx)(t.reload(e.reload,a)).always(()=>{i&&i.off("customizeLoadResult",s),t._repaintChangesOnly=void 0}).done(n.resolve).fail(n.reject)):(t.updateItems({repaintChangesOnly:e.changesOnly}),n.resolve())}),n.promise()}getVisibleRows(){return this.items()}_disposeDataSource(){this._dataSource&&this._dataSource._eventsStrategy&&this._dataSource._eventsStrategy.off("loadingChanged",this.readyWatcher),this.setDataSource(null)}dispose(){this._disposeDataSource(),super.dispose()}repaintRows(e,t){((e=Array.isArray(e)?e:[e]).length>1||(0,C.$K)(e[0]))&&this.updateItems({changeType:"update",rowIndices:e,isFullUpdate:!t})}skipProcessingPagingChange(e){return this._skipProcessingPagingChange&&("paging.pageIndex"===e||"paging.pageSize"===e)}getUserState(){return{searchText:this.option("searchPanel.text"),pageIndex:this.pageIndex(),pageSize:this.pageSize()}}getCachedStoreData(){return this._dataSource&&this._dataSource.getCachedStoreData()}isLastPageLoaded(){return this.pageIndex()===this.pageCount()-1}load(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.load()}reload(e,t){var i;return null===(i=this._dataSource)||void 0===i?void 0:i.reload(e,t)}push(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.push(...arguments)}itemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.itemsCount():0}totalItemsCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalItemsCount():0}hasKnownLastPage(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.hasKnownLastPage())}isLoaded(){var e;return!this._dataSource||(null===(e=this._dataSource)||void 0===e?void 0:e.isLoaded())}totalCount(){var e;return this._dataSource?null===(e=this._dataSource)||void 0===e?void 0:e.totalCount():0}hasLoadOperation(){var e,t,i=null!==(t=null===(e=this._dataSource)||void 0===e?void 0:e.operationTypes())&&void 0!==t?t:{};return Object.keys(i).some(a=>i[a])}}var DA={defaultOptions:()=>({loadingTimeout:0,dataSource:null,cacheEnabled:!0,repaintChangesOnly:!1,highlightChanges:!1,onDataErrorOccurred:null,remoteOperations:"auto",paging:{enabled:!0,pageSize:void 0,pageIndex:void 0}}),controllers:{data:G_}},Wr=ve(5076),$c=function r(e,t){if(e&&(e=e.slice(0),t))for(var i=0;i<e.length;i++)e[i]=(0,B.l)({key:e[i].key},e[i]),e[i].items=r(e[i].items,t-1);return e},U_=function(r,e,t){var i={reload:!0,fullReload:!0};return e&&((i={sorting:!Ae.equalSortParameters(r.sort,e.sort),grouping:!Ae.equalSortParameters(r.group,e.group,!0),groupExpanding:!Ae.equalSortParameters(r.group,e.group)||e.groupExpand,filtering:!Ae.equalFilterParameters(r.filter,e.filter),pageIndex:r.pageIndex!==e.pageIndex,skip:r.skip!==e.skip,take:r.take!==e.take,pageSize:r.pageSize!==e.pageSize,fullReload:t,reload:!1,paging:!1}).reload=t||i.sorting||i.grouping||i.filtering,i.paging=i.pageIndex||i.pageSize||i.take),i},j_=function(r,e){var t=Ae.normalizeSortingInfo(r.group||r.storeLoadOptions.group||r.loadOptions.group).length,i=[];if(q_(i,r,t))return i;e&&PA(i,r,t)},q_=function(r,e,t,i){var a,n,s,o,l,{storeLoadOptions:d}=e,u=null!==(n=null!==(a=e.take)&&void 0!==a?a:d.take)&&void 0!==n?n:0,c=null===(s=e.cachedData)||void 0===s?void 0:s.items;if(u&&c){for(var f=null!==(l=null!==(o=e.skip)&&void 0!==o?o:d.skip)&&void 0!==l?l:0,p=0;p<u;p+=1){var _=i?u-1-p:p,w=_+f,S=c[w];if(void 0===S&&w in c)return!0;var x=RA(e,S,t,_,u);if(!x)return!1;r.push(x)}return!0}return!1},RA=function(r,e,t,i,a){return t&&e?LA(e,t,0===i&&r.skips||[],i===a-1&&r.takes||[]):e},LA=function r(e,t,i,a){if(t&&e){var n=(0,ye.Z)({},e),s=i[0]||0,o=a[0],{items:l}=e;if(l){if(void 0===o&&!l[s])return;n.items=[],i.length&&(n.isContinuation=!0),o&&(n.isContinuationOnNextPage=e.count>o);for(var d=0;void 0===o?l[d+s]:d<o;d+=1){var c=d+1===o,f=r(l[d+s],t-1,0===d?i.slice(1):[],c?a.slice(1):[]);if(void 0===f)return;n.items.push(f)}}return n}return e},PA=function(r,e,t){var i,a,n=r.length,{storeLoadOptions:s}=e;if(void 0!==s.skip&&s.take&&!t){var o=[];q_(o,e,t,!0);var l=o.length;(n||l)&&(e.skip=null!==(i=e.skip)&&void 0!==i?i:s.skip,e.take=null!==(a=e.take)&&void 0!==a?a:s.take),n&&(s.skip+=n,s.take-=n,e.cachedDataPartBegin=r),l&&(s.take-=l,e.cachedDataPartEnd=o.reverse())}},VA=function r(e,t,i,a){if(i&&t){var n=(0,ye.Z)({},t);delete n.isContinuation,delete n.isContinuationOnNextPage;var s=a[0]||0;return t.items&&(n.items=e?.items||{},t.items.forEach((o,l)=>{var d=l+s,u=0===l?a.slice(1):[];n.items[d]=r(n.items[d],o,i-1,u)})),n}return t},Gc=class NA extends Vt.Controller{init(e,t){var i=this;i._dataSource=e,i._remoteOperations=t||{},i._isLastPage=!e.isLastPage(),i._hasLastPage=!1,i._currentTotalCount=0,i._cachedData={items:{}},i._lastOperationTypes={},i._eventsStrategy=e._eventsStrategy,i._totalCountCorrection=0,i._isLoadingAll=!1,i.changed=(0,sr.Z)(),i.loadingChanged=(0,sr.Z)(),i.loadError=(0,sr.Z)(),i.customizeStoreLoadOptions=(0,sr.Z)(),i.changing=(0,sr.Z)(),i.pushed=(0,sr.Z)(),i._dataChangedHandler=i._handleDataChanged.bind(i),i._customizeStoreLoadOptionsHandler=i._handleCustomizeStoreLoadOptions.bind(i),i._dataLoadedHandler=i._handleDataLoaded.bind(i),i._loadingChangedHandler=i._handleLoadingChanged.bind(i),i._loadErrorHandler=i._handleLoadError.bind(i),i._pushHandler=i._handlePush.bind(i),i._changingHandler=i._handleChanging.bind(i),e.on("changed",i._dataChangedHandler),e.on("customizeStoreLoadOptions",i._customizeStoreLoadOptionsHandler),e.on("customizeLoadResult",i._dataLoadedHandler),e.on("loadingChanged",i._loadingChangedHandler),e.on("loadError",i._loadErrorHandler),e.on("changing",i._changingHandler),e.store().on("beforePush",i._pushHandler),(0,Y.S6)(e,(a,n)=>{!i[a]&&(0,C.mf)(n)&&(i[a]=function(){return this._dataSource[a].apply(this._dataSource,arguments)})})}dispose(e){var t=this._dataSource,i=t.store();t.off("changed",this._dataChangedHandler),t.off("customizeStoreLoadOptions",this._customizeStoreLoadOptionsHandler),t.off("customizeLoadResult",this._dataLoadedHandler),t.off("loadingChanged",this._loadingChangedHandler),t.off("loadError",this._loadErrorHandler),t.off("changing",this._changingHandler),i&&i.off("beforePush",this._pushHandler),e||t.dispose()}remoteOperations(){return this._remoteOperations}refresh(e,t){var i=this._dataSource;t.reload&&(this.resetCurrentTotalCount(),this._isLastPage=!i.paginate(),this._hasLastPage=this._isLastPage)}resetCurrentTotalCount(){this._currentTotalCount=0,this._totalCountCorrection=0}resetCache(){this._cachedStoreData=void 0,this._cachedPagingData=void 0}resetPagesCache(e){this._cachedData={items:{}}}_needClearStoreDataCache(){var e=this.remoteOperations(),t=U_(this._lastLoadOptions||{},{});return!Object.keys(e).every(a=>!t[a]||!e[a])}push(e,t){var i=this.store();this._needClearStoreDataCache()&&(this._cachedStoreData=void 0),this._cachedPagingData=void 0,this.resetPagesCache(!0),this._cachedStoreData&&(0,Wr.ii)({keyInfo:i,data:this._cachedStoreData,changes:e}),t||this._applyBatch(e),this.pushed.fire(e)}getDataIndexGetter(){if(!this._dataIndexGetter){var e,t,i=this.store();this._dataIndexGetter=a=>{if(!e||t&&t!==this._cachedStoreData){t=this._cachedStoreData||[],e={};for(var s=0;s<t.length;s++)e[(0,le.k3)(i.keyOf(t[s]))]=s}return e[(0,le.k3)(i.keyOf(a))]}}return this._dataIndexGetter}_getKeyInfo(){return this.store()}_needToCopyDataObject(){return!0}_applyBatch(e,t){var i=this._getKeyInfo(),a=this._dataSource,n=Ae.normalizeSortingInfo(this.group()).length,s="reshape"===this.option("editing.refreshMode"),o="virtual"===this.option("scrolling.mode");e=e.filter(c=>!a.paginate()||"insert"!==c.type||void 0!==c.index);var l=()=>n?this.itemsCount():this.items().length,d=l();(0,Wr.ii)({keyInfo:i,data:this._items,changes:e,groupCount:n,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(0,Wr.ii)({keyInfo:i,data:a.items(),changes:e,groupCount:n,useInsertIndex:!0,skipCopying:!this._needToCopyDataObject()}),(this._currentTotalCount>0||(t||!s)&&o)&&(this._totalCountCorrection+=l()-d),e.splice(0,e.length)}_handlePush(e){var{changes:t}=e;this.push(t,!0)}_handleChanging(e){this.changing.fire(e),this._applyBatch(e.changes,!0)}_needCleanCacheByOperation(e,t){var i=["filtering","sorting","paging"],a=i.indexOf(e);return(a>=0?i.slice(a):[e]).some(s=>t[s])}_customizeRemoteOperations(e,t){var i=this._cachedStoreData,a=this._cachedPagingData,n=this._cachedData;(e.storeLoadOptions.filter&&!e.remoteOperations.filtering||e.storeLoadOptions.sort&&!e.remoteOperations.sorting)&&(e.remoteOperations={filtering:e.remoteOperations.filtering,summary:e.remoteOperations.summary}),t.fullReload?(i=void 0,a=void 0,n={items:{}}):(t.reload?(a=void 0,n={items:{}}):t.groupExpanding&&(n={items:{}}),(0,Y.S6)(t,(s,o)=>{o&&this._needCleanCacheByOperation(s,e.remoteOperations)&&(i=void 0,a=void 0)})),a&&(e.remoteOperations.paging=!1),e.cachedStoreData=i,e.cachedPagingData=a,e.cachedData=n,e.isCustomLoading||(this._cachedStoreData=i,this._cachedPagingData=a,this._cachedData=n)}_handleCustomizeStoreLoadOptions(e){var t;this._handleDataLoading(e),0!==(null===(t=e.data)||void 0===t?void 0:t.length)&&(e.data=j_(e,!0)||e.cachedStoreData)}_handleDataLoading(e){var t=this._dataSource,i=this._lastLoadOptions;this.customizeStoreLoadOptions.fire(e),e.delay=this.option("loadingTimeout"),e.originalStoreLoadOptions=e.storeLoadOptions,e.remoteOperations=(0,B.l)({},this.remoteOperations());var a=!this.isLoaded()&&!this._isRefreshing;this.option("integrationOptions.renderedOnServer")&&!this.isLoaded()&&(e.delay=void 0);var n=(0,B.l)({pageIndex:this.pageIndex(),pageSize:this.pageSize()},e.storeLoadOptions),s=U_(n,i,a);if(this._customizeRemoteOperations(e,s),!e.isCustomLoading){var o=this._isRefreshing;e.pageIndex=t.pageIndex(),e.lastLoadOptions=n,e.operationTypes=s,this._loadingOperationTypes=s,this._isRefreshing=!0,(0,X.gx)(o||this._isRefreshed||this.refresh(e,s)).done(()=>{this._lastOperationId===e.operationId&&(this._isRefreshed=!0,this.load().always(()=>{this._isRefreshed=!1}))}).fail(()=>{t.cancel(e.operationId)}).always(()=>{this._isRefreshing=!1}),t.cancel(this._lastOperationId),this._lastOperationId=e.operationId,this._isRefreshing&&t.cancel(this._lastOperationId)}this._handleDataLoadingCore(e)}_handleDataLoadingCore(e){var{remoteOperations:t}=e;e.loadOptions={};var i=e.cachedData.extra,a={filter:!t.filtering,sort:!t.sorting,group:!t.grouping,summary:!t.summary,skip:!t.paging,take:!t.paging,requireTotalCount:i&&"totalCount"in i||!t.paging,langParams:!t.filtering||!t.sorting};(0,Y.S6)(e.storeLoadOptions,(n,s)=>{a[n]&&(e.loadOptions[n]=s,delete e.storeLoadOptions[n])}),i&&(e.extra=i)}_handleDataLoaded(e){var t,i,{loadOptions:a}=e,n=e.remoteOperations&&!e.remoteOperations.paging,{cachedData:s}=e,{storeLoadOptions:o}=e,l=!1!==this.option("cacheEnabled")&&o,d=l&&!e.isCustomLoading&&s&&(!n||o.group),u=l&&n,c=u&&!e.isCustomLoading;if(a){n&&(e.skip=a.skip,e.take=a.take,delete a.skip,delete a.take),a.group&&(a.group=e.group||a.group);var f=Ae.normalizeSortingInfo(e.group||o.group||a.group).length;e.cachedDataPartBegin&&(e.data=e.cachedDataPartBegin.concat(e.data)),e.cachedDataPartEnd&&(e.data=e.data.concat(e.cachedDataPartEnd)),(!d||!j_(e))&&(u&&e.cachedPagingData?e.data=$c(e.cachedPagingData,f):(c&&(this._cachedStoreData?e.mergeStoreLoadData&&(e.data=this._cachedStoreData=this._cachedStoreData.concat(e.data)):this._cachedStoreData=$c(e.data,Ae.normalizeSortingInfo(o.group).length)),new qd.Z(e.data).load(a).done(p=>{e.data=p,c&&(this._cachedPagingData=$c(e.data,f))}).fail(p=>{e.data=(new X.BH).reject(p)})),a.requireTotalCount&&n&&(e.extra=(0,C.PO)(e.extra)?e.extra:{},e.extra.totalCount=e.data.length),e.extra&&e.extra.totalCount>=0&&(!1===o.requireTotalCount||!1===a.requireTotalCount)&&(e.extra.totalCount=-1),!a.data&&(o.requireTotalCount||(null!==(i=null===(t=e.extra)||void 0===t?void 0:t.totalCount)&&void 0!==i?i:-1)>=0)&&(this._totalCountCorrection=0),this._handleDataLoadedCore(e),d&&(s.extra=s.extra||(0,B.l)({},e.extra),(0,X.gx)(e.data).done(p=>{!function(r,e,t){for(var i,a,n,s,{storeLoadOptions:o}=r,l=null!==(a=null!==(i=r.skip)&&void 0!==i?i:o.skip)&&void 0!==a?a:0,d=null!==(s=null!==(n=r.take)&&void 0!==n?n:o.take)&&void 0!==s?s:0,u=0;u<d;u+=1){var c=u+l,f=r.cachedData.items;f[c]=VA(f[c],e[u],t,0===u&&r.skips||[])}}(e,p,f)}))),(0,X.gx)(e.data).done(()=>{e.lastLoadOptions&&(this._lastLoadOptions=e.lastLoadOptions,Object.keys(e.operationTypes).forEach(p=>{this._lastOperationTypes[p]=this._lastOperationTypes[p]||e.operationTypes[p]}))}),e.storeLoadOptions=e.originalStoreLoadOptions}else this._dataSource.cancel(e.operationId)}_handleDataLoadedCore(e){e.remoteOperations&&!e.remoteOperations.paging&&Array.isArray(e.data)&&(void 0!==e.skip&&(e.data=e.data.slice(e.skip)),void 0!==e.take&&(e.data=e.data.slice(0,e.take)))}_handleLoadingChanged(e){this.loadingChanged.fire(e)}_handleLoadError(e){this.loadError.fire(e),this.changed.fire({changeType:"loadError",error:e})}_loadPageSize(){return this.pageSize()}_handleDataChanged(e){var t,i=this._dataSource,a=!1,n=!e||(0,C.$K)(e.changeType),s=this.itemsCount();n&&(this._isLastPage=!s||!this._loadPageSize()||s<this._loadPageSize(),this._isLastPage&&(this._hasLastPage=!0)),i.totalCount()>=0?i.pageIndex()>=this.pageCount()&&(i.pageIndex(this.pageCount()-1),this.pageIndex(i.pageIndex()),this.resetPagesCache(),i.load(),a=!0):n&&((t=i.pageIndex()*this.pageSize()+s)>this._currentTotalCount&&(this._currentTotalCount=t,(0===i.pageIndex()||!this.option("scrolling.legacyMode"))&&(this._totalCountCorrection=0)),0===s&&i.pageIndex()>=this.pageCount()&&(i.pageIndex(this.pageCount()-1),"infinite"!==this.option("scrolling.mode")&&(i.load(),a=!0))),a||(this._operationTypes=this._lastOperationTypes,this._lastOperationTypes={},this.component._optionCache={},this.changed.fire(e),this.component._optionCache=void 0)}_scheduleCustomLoadCallbacks(e){var t=this;t._isCustomLoading=!0,e.always(()=>{t._isCustomLoading=!1})}loadingOperationTypes(){return this._loadingOperationTypes}operationTypes(){return this._operationTypes}lastLoadOptions(){return this._lastLoadOptions||{}}isLastPage(){return this._isLastPage}_dataSourceTotalCount(){return this._dataSource.totalCount()}_changeRowExpandCore(e){}changeRowExpand(e){}totalCount(){return parseInt((this._currentTotalCount||this._dataSourceTotalCount())+this._totalCountCorrection)}totalCountCorrection(){return this._totalCountCorrection}items(){}itemsCount(){return this._dataSource.items().length}totalItemsCount(){return this.totalCount()}pageSize(){var e=this._dataSource;return arguments.length||e.paginate()?e.pageSize.apply(e,arguments):0}pageCount(){var e=this.totalItemsCount()-this._totalCountCorrection,t=this.pageSize();return t&&e>0?Math.max(1,Math.ceil(e/t)):1}hasKnownLastPage(){return this._hasLastPage||this._dataSource.totalCount()>=0}loadFromStore(e,t){var i=this._dataSource,a=new X.BH;if(i)return(t=t||i.store()).load(e).done((n,s)=>{n&&!Array.isArray(n)&&Array.isArray(n.data)&&(s=n,n=n.data),a.resolve(n,s)}).fail(a.reject),a}isCustomLoading(){return!!this._isCustomLoading}load(e){var t=this,i=t._dataSource,a=new X.BH;if(e){var n=i.store(),s=i.loadOptions(),o={storeLoadOptions:(0,B.l)({},e,{langParams:s?.langParams}),isCustomLoading:!0};return(0,Y.S6)(n._customLoadOptions()||[],(l,d)=>{d in o.storeLoadOptions||(o.storeLoadOptions[d]=s[d])}),this._isLoadingAll=e.isLoadingAll,t._scheduleCustomLoadCallbacks(a),i._scheduleLoadCallbacks(a),t._handleCustomizeStoreLoadOptions(o),function(r,e){(0,C.$K)(e)?(0,le.Wi)(r,e):r()}(()=>{if(!i.store())return a.reject("canceled");(0,X.gx)(o.data||t.loadFromStore(o.storeLoadOptions)).done((l,d)=>{o.data=l,o.extra=d||{},t._handleDataLoaded(o),e.requireTotalCount&&void 0===o.extra.totalCount&&(o.extra.totalCount=n.totalCount(o.storeLoadOptions)),(0,X.gx)(o.data,o.extra.totalCount).done((u,c)=>{o.extra.totalCount=c,a.resolve(u,o.extra)}).fail(a.reject)}).fail(a.reject)},t.option("loadingTimeout")),a.fail(function(){t._eventsStrategy.fireEvent("loadError",arguments)}).always(()=>{this._isLoadingAll=!1}).promise()}return i.load()}reload(e){return e?this._dataSource.reload():this._dataSource.load()}getCachedStoreData(){return this._cachedStoreData}isLoaded(){}pageIndex(e){}};const Yd={extend(r){Gc=r(Gc)},create:r=>new Gc(r)};He.registerModule("data",{defaultOptions:DA.defaultOptions,controllers:{data:class BA extends G_{_getDataSourceAdapter(){return Yd}_getSpecificDataSourceOption(){var e=this.option("dataSource");return e&&!Array.isArray(e)&&this.option("keyExpr")&&At.Z.log("W1011"),super._getSpecificDataSourceOption()}}}});var Y_="dx-sort",X_="dx-sort-none",J_="dx-sort-index-icon";const Q_=r=>class extends r{_applyColumnState(e){var t,i,a=this.option("sorting.mode"),{rootElement:n}=e,{column:s}=e,o=this._getIndicatorContainer(n);if("sort"===e.name){n.find(".".concat(Y_)).remove(),!o.children().length&&o.remove();var l="none"!==a&&s.allowSorting,d=this.getController&&!!this.getController("columns").columnOption("sortIndex:1");return!(0,C.$K)(s.groupIndex)&&(l||(0,C.$K)(s.sortOrder))&&(t="asc"===s.sortOrder?"ascending":"descending",i=super._applyColumnState(e).toggleClass("dx-sort-up","asc"===s.sortOrder).toggleClass("dx-sort-down","desc"===s.sortOrder),d&&this.option("sorting.showSortIndexes")&&s.sortIndex>=0&&((0,b.Z)("<span>").addClass(J_).text(s.sortIndex+1).appendTo(i),i.addClass("dx-sort-index")),l&&e.rootElement.addClass(this.addWidgetPrefix("action"))),this._setAriaSortAttribute(s,t,n,d),i}return super._applyColumnState(e)}_setAriaSortAttribute(e,t,i,a){if(i.removeAttr("aria-roledescription"),e.isGrouped){var n=this.localize("dxDataGrid-ariaNotSortedColumn");(0,C.$K)(e.sortOrder)&&(n=this.localize("asc"===e.sortOrder?"dxDataGrid-ariaSortedAscendingColumn":"dxDataGrid-ariaSortedDescendingColumn")),this.setAria("roledescription",n,i)}else if((0,C.$K)(e.sortOrder)){if(this.setAria("sort",t,i),a&&e.sortIndex>=0){var s=ae.Z.format("dxDataGrid-ariaColumnHeader"),o=ae.Z.format("dxDataGrid-ariaSortIndex",e.sortIndex+1),l="".concat(s,", ").concat(o);this.setAria("roledescription",l,i)}}else this.setAria("sort","none",i)}_getIndicatorClassName(e){return"sort"===e?Y_:"sortIndex"===e?J_:super._getIndicatorClassName(e)}_renderIndicator(e){var{column:t}=e,i=e.container,a=e.indicator;if("sort"===e.name){var n=this.option("rtlEnabled");if((0,C.$K)(t.sortOrder)||a&&a.addClass(X_),i.children().length&&(!n&&"left"===e.columnAlignment||n&&"right"===e.columnAlignment))return void i.prepend(a)}super._renderIndicator(e)}_updateIndicator(e,t,i){if("sort"!==i||!(0,C.$K)(t.groupIndex))return super._updateIndicator.apply(this,arguments)}_getIndicatorElements(e,t){var i=super._getIndicatorElements(e);return t?i:i&&i.not(".".concat(X_))}};var GA={defaultOptions:()=>({sorting:{mode:"single",ascendingText:ae.Z.format("dxDataGrid-sortingAscendingText"),descendingText:ae.Z.format("dxDataGrid-sortingDescendingText"),clearText:ae.Z.format("dxDataGrid-sortingClearText"),showSortIndexes:!0}}),extenders:{views:{columnHeadersView:r=>class extends(Q_(r)){optionChanged(e){"sorting"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_createRow(e){var t=super._createRow(e);return"header"===e.rowType&&z.Z.on(t,(0,Ee.V4)(Ft.u,"dxDataGridColumnHeadersView"),"td",this.createAction(i=>{this._processHeaderAction(i.event,t)})),t}_processHeaderAction(e,t){if((0,b.Z)(e.currentTarget).parent().get(0)===t.get(0)){var i=this,a=null,n=(0,b.Z)(e.currentTarget),s=n.parent().index(),o=-1;[].slice.call(i.getCellElements(s)).some((p,_)=>{if(p===n.get(0))return o=_,!0});var d=i._columnsController.getVisibleColumns(s)[o],u=i.getController("editing"),c=i.option("editing.mode");u&&u.isEditing()&&("batch"===c||"cell"===c)||!i._isSortableElement((0,b.Z)(e.target))||d&&!(0,C.$K)(d.groupIndex)&&!d.command&&(e.shiftKey?a="shift":(0,Ee.j1)(e)&&(a="ctrl"),setTimeout(()=>{i._columnsController.changeSortOrder(d.index,a)}))}}_renderCellContent(e,t){var{column:i}=t;!i.command&&"header"===t.rowType&&this._applyColumnState({name:"sort",rootElement:e,column:i,showColumnLines:this.option("showColumnLines")}),super._renderCellContent.apply(this,arguments)}_columnOptionChanged(e){var{changeTypes:t}=e;1===t.length&&t.sorting?this._updateIndicators("sort"):super._columnOptionChanged(e)}},headerPanel:r=>class extends(Q_(r)){optionChanged(e){"sorting"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_createGroupPanelItem(e,t){var i=this,a=super._createGroupPanelItem(...arguments);return z.Z.on(a,(0,Ee.V4)(Ft.u,"dxDataGridHeaderPanel"),i.createAction(()=>{i._processGroupItemAction(t.index)})),i._applyColumnState({name:"sort",rootElement:a,column:{alignment:i.option("rtlEnabled")?"right":"left",allowSorting:t.allowSorting,sortOrder:"desc"===t.sortOrder?"desc":"asc",isGrouped:!0},showColumnLines:!0}),a}_processGroupItemAction(e){setTimeout(()=>this.getController("columns").changeSortOrder(e))}}}}};He.registerModule("sorting",GA);var Ha=ve(9797),Uc="dx-group-row",em="dx-group-cell",Xd="dx-freespace-row",tm="dx-column-lines",im="dx-row-alt",rm="dx-last-row-border";function am(r){return r?Math.round(r.scrollWidth()-r.clientWidth()):0}function nm(r){var{rowType:e,column:t}=r;return"group"===e&&(0,C.$K)(t.groupIndex)&&!t.showWhenGrouped&&!t.command}function sm(r){var{element:e,watch:t,getter:i,callBack:a}=r;if(t){var n=t(i,a);z.Z.on(e,Yn.x,n)}}var t2=function(r,e){var t=(0,ca.xb)(e.text)&&"data"===e.rowType,{text:i}=e,a=r.get(0);t?Ae.setEmptyText(r):e.column.encodeHtml?a.textContent=i:a.innerHTML=i},om={defaultOptions:()=>({hoverStateEnabled:!1,scrolling:{useNative:"auto"},loadPanel:{enabled:"auto",text:ae.Z.format("Loading"),width:200,height:90,showIndicator:!0,indicatorSrc:"",showPane:!0},dataRowTemplate:null,columnAutoWidth:!1,noDataText:ae.Z.format("dxDataGrid-noDataText"),wordWrapEnabled:!1,showColumnLines:!0,showRowLines:!1,rowAlternationEnabled:!1,activeStateEnabled:!1,twoWayBindingEnabled:!0}),views:{rowsView:class r2 extends dl{init(){super.init(),this._editingController=this.getController("editing"),this._resizingController=this.getController("resizing"),this._columnsResizerController=this.getController("columnsResizer"),this._focusController=this.getController("focus"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._validatingController=this.getController("validating"),this._errorHandlingController=this.getController("errorHandling"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowHeight=0,this._scrollTop=0,this._scrollLeft=-1,this._scrollRight=0,this._hasHeight=void 0,this._contentChanges=[],this._dataController.loadingChanged.add((e,t)=>{this.setLoading(e,t)}),this._dataController.dataSourceChanged.add(()=>{this._scrollLeft>=0&&!this._dataController.isLoading()&&this._handleScroll({component:this.getScrollable(),forceUpdateScrollPosition:!0,scrollOffset:{top:this._scrollTop,left:this._scrollLeft}})})}_getDefaultTemplate(e){return"empty"===e.command?function(t){t.html("&nbsp;")}:t2}_getDefaultGroupTemplate(e){var t=this.option("summary.texts");return function(i,a){var{data:n}=a,s="".concat(a.column.caption,": ").concat(a.text),o=i.get(0);a.summaryItems&&a.summaryItems.length&&(s+=" ".concat(Ae.getGroupRowSummaryText(a.summaryItems,t))),n&&(a.groupContinuedMessage&&a.groupContinuesMessage?s+=" (".concat(a.groupContinuedMessage,". ").concat(a.groupContinuesMessage,")"):a.groupContinuesMessage?s+=" (".concat(a.groupContinuesMessage,")"):a.groupContinuedMessage&&(s+=" (".concat(a.groupContinuedMessage,")"))),e.encodeHtml?o.textContent=s:o.innerHTML=s}}_update(e){}_updateCell(e,t){nm(t)&&e.addClass(em),super._updateCell.apply(this,arguments)}_getCellTemplate(e){var{column:t}=e;return nm(e)?t.groupCellTemplate||{allowRenderToDetachedContainer:!0,render:this._getDefaultGroupTemplate(t)}:("data"===e.rowType||t.command)&&t.cellTemplate?t.cellTemplate:{allowRenderToDetachedContainer:!0,render:this._getDefaultTemplate(t)}}_createRow(e,t){var i=super._createRow.apply(this,arguments);if(e){var a="group"===e.rowType,n="data"===e.rowType;n&&i.addClass("dx-data-row"),n&&this.option("showRowLines")&&i.addClass("dx-row-lines"),this.option("showColumnLines")&&i.addClass(tm),!1===e.visible&&i.hide(),a&&(i.addClass(Uc),this.setAriaExpandedAttribute(i,e))}return i}_rowPrepared(e,t,i){"data"===t.rowType&&(this.option("rowAlternationEnabled")&&(this._isAltRow(i)&&e.addClass(im),sm({element:e.get(0),watch:t.watch,getter:()=>this._isAltRow(i),callBack:a=>{e.toggleClass(im,a)}})),this._setAriaRowIndex(t,e),sm({element:e.get(0),watch:t.watch,getter:()=>t.rowIndex,callBack:()=>this._setAriaRowIndex(t,e)})),super._rowPrepared.apply(this,arguments)}_setAriaRowIndex(e,t){if(t.is("tr")){var{component:i}=this,a="standard"===i.option("scrolling.mode")&&!Ae.isVirtualRowRendering(i),n=e.rowIndex+1;a?n=i.pageIndex()*i.pageSize()+n:n+=this._dataController.getRowIndexOffset(),this.setAria("rowindex",n,t)}}setAriaExpandedAttribute(e,t){var i=this.localize(t.isExpanded?"dxDataGrid-ariaExpandedRow":"dxDataGrid-ariaCollapsedRow");this.setAria("roledescription",i,e)}_afterRowPrepared(e){var t=e.args[0],i=this._dataController,a=i.getVisibleRows()[t.rowIndex],n=this.option("integrationOptions.watchMethod");if(t.data&&"data"===t.rowType&&!t.isNewRow&&this.option("twoWayBindingEnabled")&&n&&a){var s=n(()=>i.generateDataValues(t.data,t.columns),()=>{i.repaintRows([a.rowIndex],this.option("repaintChangesOnly"))},{deep:!0,skipImmediate:!0});z.Z.on(t.rowElement,Yn.x,s)}}_renderScrollable(e){var t=this.element();if(t.children().length||t.append("<div>"),(e||!this._loadPanel)&&this._renderLoadPanel(t,t.parent(),this._dataController.isLocalStore()),(e||!this.getScrollable())&&this._dataController.isLoaded()){for(var i=this.getColumns(),a=!0,n=0;n<i.length;n++)if(!i[n].width&&!i[n].minWidth){a=!1;break}(this.option("columnAutoWidth")||this._hasHeight||a||this._columnsController._isColumnFixing())&&this._renderScrollableCore(t)}}_handleScroll(e){var t=this.option("rtlEnabled"),i=e.component.option("useNative");this._scrollTop=e.scrollOffset.top,this._scrollLeft=e.scrollOffset.left;var a=e.scrollOffset.left;t&&(this._scrollRight=am(e.component)-this._scrollLeft,i&&(a=-this._scrollRight),this.isScrollbarVisible(!0)||(this._scrollLeft=-1)),this.scrollChanged.fire((0,ye.Z)((0,ye.Z)({},e.scrollOffset),{left:a}),this.name)}_renderScrollableCore(e){var t=this._createScrollableOptions(),i=this._handleScroll.bind(this);t.onScroll=i,this._scrollable=this._createComponent(e,Ha.Z,t),this._scrollableContainer=this._scrollable&&(0,b.Z)(this._scrollable.container())}_renderLoadPanel(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Ae.renderLoadPanel.apply(this,arguments)}_renderContent(e,t,i){return e.empty().append(t),this._findContentElement()}_updateContent(e,t,i){return this._contentChanges.push({newTableElement:e,change:t,isFixedTableRendering:i}),this.waitAsyncTemplates().done(()=>{var a=this._contentChanges;this._contentChanges=[],a.forEach(n=>{var{newTableElement:s,change:o,isFixedTableRendering:l}=n,d=this.getTableElement(l),u=this._findContentElement(l),c=o?.changeType,f=[],p=this.option("highlightChanges"),_=this.addWidgetPrefix("row-inserted-animation");"update"===c?((0,Y.S6)(o.rowIndices,(w,S)=>{var x,E=this._getRowElements(s).eq(w),V=null===(x=o.changeTypes)||void 0===x?void 0:x[w],N=o.items&&o.items[w];f.push(()=>{var j,Q=this._getRowElements(d),q=Q.eq(S);switch(V){case"update":if(N){var k=null===(j=o.columnIndices)||void 0===j?void 0:j[w];(0,C.$K)(N.visible)&&N.visible!==q.is(":visible")?q.toggle(N.visible):k?this._updateCells(q,E,k):q.replaceWith(E)}break;case"insert":if(Q.length)q.length?E.insertBefore(q):E.insertAfter(Q.last());else if(d){var se=E.is("tbody")?d:d.children("tbody");E.prependTo(se)}p&&o.isLiveUpdate&&E.addClass(_);break;case"remove":q.remove()}})}),(0,Y.S6)(f,function(){this()}),s.remove()):(this.setTableElement(s,l),u.addClass(this.addWidgetPrefix("content")),this._setGridRole(u),this._renderContent(u,s,l))})}).fail(()=>{this._contentChanges=[]})}_getGridRoleName(){return"grid"}_setGridRole(e){var t,i=!(null!==(t=this._dataController)&&void 0!==t&&t.isEmpty()),a=this._getGridRoleName();e?.length&&i&&this.setAria("role",a,e)}_createEmptyRow(e,t,i){var a,n=this._createRow(),s=t?this.getFixedColumns():this.getColumns();n.addClass(e).toggleClass(tm,this.option("showColumnLines"));for(var o=0;o<s.length;o++)a=this._createCell({column:s[o],rowType:"freeSpace",columnIndex:o,columns:s}),(0,C.kE)(i)&&a.css("height",i),n.append(a);return this.setAria("role","presentation",n),n}getFixedColumns(){throw new Error("Method not implemented.")}_appendEmptyRow(e,t,i){var a=this._getBodies(e),n=!a.length||t.is("tbody"),s=n?e:a;if("top"===i){if(s.first().prepend(t),n){var o=s.children("colgroup");s.prepend(o)}}else s.last().append(t)}_renderFreeSpaceRow(e,t){var i=this._createEmptyRow(Xd);i=this._wrapRowIfNeed(e,i,"refresh"===t?.changeType),this._appendEmptyRow(e,i)}_checkRowKeys(e){var t=this,i=t._getRows(e),a=t._dataController.store()&&t._dataController.store().key();a&&i.some(n=>{if("data"===n.rowType&&void 0===n.key)return t._dataController.fireError("E1046",a),!0})}_needUpdateRowHeight(e){return e>0&&!this._rowHeight}_getRowsHeight(e){return(e=e||this._tableElement).children("tbody").children().not(".dx-virtual-row").not(".".concat(Xd)).toArray().reduce((i,a)=>i+(0,li.l)(a).height,0)}_updateRowHeight(){var e=this.getTableElement(),t=this._dataController.items().length;if(e&&this._needUpdateRowHeight(t)){var i=this._getRowsHeight(e);this._rowHeight=i/t}}_findContentElement(e){var t=this.element(),i=this.getScrollable();if(t)return i&&(t=(0,b.Z)(i.content())),t.children().first()}_getRowElements(e){var t=super._getRowElements(e);return t&&t.not(".".concat(Xd))}_getFreeSpaceRowElements(e){var t=e||this.getTableElements();return t&&t.children("tbody").children(".".concat(Xd))}_getNoDataText(){return this.option("noDataText")}_rowClick(e){var t=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowClick",(0,B.l)({evaluate:i=>(0,Ot.vb)(i)(t.data)},e,t))}_rowDblClick(e){var t=this._dataController.items()[e.rowIndex]||{};this.executeAction("onRowDblClick",(0,B.l)({},e,t))}_getColumnsCountBeforeGroups(e){for(var t=0;t<e.length;t++)if("groupExpand"===e[t].type)return t;return 0}_getGroupCellOptions(e){var t=this._getColumnsCountBeforeGroups(e.columns),i=(e.row.groupIndex||0)+t;return{columnIndex:i,colspan:e.columns.length-i-1}}_needWrapRow(){return super._needWrapRow.apply(this,arguments)||!!this.option("dataRowTemplate")}_renderCells(e,t){"group"===t.row.rowType?this._renderGroupedCells(e,t):t.row.values&&super._renderCells(e,t)}_renderGroupedCells(e,t){for(var a,o,{row:i}=t,{columns:n}=t,{rowIndex:s}=i,l=this._getGroupCellOptions(t),d=0;d<=l.columnIndex;d++)d===l.columnIndex&&n[d].allowCollapsing&&"infinite"!==t.scrollingMode?(o=!!i.isExpanded,a=n[d]):(o=null,a={command:"expand",cssClass:n[d].cssClass}),this._needRenderCell(d,t.columnIndices)&&this._renderCell(e,{value:o,row:i,rowIndex:s,column:a,columnIndex:d,columnIndices:t.columnIndices,change:t.change});var u=(0,li.q)(this.option("rtlEnabled")),c=(0,B.l)({},n[l.columnIndex],{command:null,type:null,cssClass:null,width:null,showWhenGrouped:!1,alignment:u});l.colspan>1&&(c.colspan=l.colspan),this._needRenderCell(l.columnIndex+1,t.columnIndices)&&this._renderCell(e,{value:i.values[i.groupIndex],row:i,rowIndex:s,column:c,columnIndex:l.columnIndex+1,columnIndices:t.columnIndices,change:t.change})}_renderRows(e,t){var i=this.option("scrolling.mode");super._renderRows(e,(0,B.l)({scrollingMode:i},t)),this._checkRowKeys(t.change),this._renderFreeSpaceRow(e,t.change),this._hasHeight||this.updateFreeSpaceRowHeight(e)}_renderDataRowByTemplate(e,t,i){var{row:a}=t,n=(0,B.l)({columns:t.columns},a),s=this._createRow(a,"tbody");s.appendTo(e),this.renderTemplate(s,i,n,!0,t.change),this._rowPrepared(s,n,t.row)}_renderRow(e,t){var{row:i}=t,{rowTemplate:a}=this.option(),n=this.option("dataRowTemplate");"data"===i.rowType&&n?this._renderDataRowByTemplate(e,t,n):"data"!==i.rowType&&"group"!==i.rowType||(0,C.$K)(i.groupIndex)||!a?super._renderRow(e,t):this.renderTemplate(e,a,(0,B.l)({columns:t.columns},i),!0)}_renderTable(e){var t=this,i=super._renderTable(e);return(0,C.$K)(t.getTableElement())?t._renderScrollable():(t.setTableElement(i),t._renderScrollable(!0),t.resizeCompleted.add(function a(){var n=t.getScrollable();n&&t.element().closest((0,Je.Jj)().document).length&&(t.resizeCompleted.remove(a),n._visibilityChanged(!0))})),i}_createTable(){var e=super._createTable.apply(this,arguments);return(this.option().rowTemplate||this.option().dataRowTemplate)&&e.appendTo(this.component.$element()),e}_renderCore(e){var t=this.element();t.addClass(this.addWidgetPrefix("rowsview")).toggleClass(this.addWidgetPrefix("nowrap"),!this.option("wordWrapEnabled")),t.toggleClass("dx-empty",this._dataController.isEmpty()),this.setAria("role","presentation",t);var i=this._renderTable({change:e}),a=this._updateContent(i,e);return super._renderCore(e),this._lastColumnWidths=null,a}_getRows(e){return e&&e.items||this._dataController.items()}_getCellOptions(e){var{column:t}=e,{row:i}=e,{data:a}=i,n=i&&i.summaryCells,{value:s}=e,o=Ae.getDisplayValue(t,s,a,i.rowType),l=super._getCellOptions(e);if(l.value=s,l.oldValue=e.oldValue,l.displayValue=o,l.row=i,l.key=i.key,l.data=a,l.rowType=i.rowType,l.values=i.values,l.text=t.command?"":Ae.formatValue(o,t),l.rowIndex=i.rowIndex,l.summaryItems=n&&n[e.columnIndex],l.resized=t.resizedCallbacks,(0,C.$K)(t.groupIndex)&&!t.command){var d=this.option("grouping.texts"),u=this.option("scrolling.mode");"virtual"!==u&&"infinite"!==u&&(l.groupContinuesMessage=a&&a.isContinuationOnNextPage&&d&&d.groupContinuesMessage,l.groupContinuedMessage=a&&a.isContinuation&&d&&d.groupContinuedMessage)}return l}_setRowsOpacityCore(e,t,i,a){var n=this._columnsController,s=n.getColumns(),o=s&&s[i],l=o&&o.isBand&&o.index;(0,Y.S6)(e,(d,u)=>{if(!(0,b.Z)(u).hasClass(Uc))for(var c=0;c<t.length&&(!((0,C.kE)(l)&&n.isParentBandColumn(t[c].index,l)||t[c].index===i)||(e.eq(d).children().eq(c).css({opacity:a}),(0,C.kE)(l)));c++);})}_getDevicePixelRatio(){return(0,Je.Jj)().devicePixelRatio}renderNoDataText(){return Ae.renderNoDataText.apply(this,arguments)}getCellOptions(e,t){var a,n,i=this._dataController.items()[e];return i&&(n=(0,C.HD)(t)?this._columnsController.columnOption(t):this._columnsController.getVisibleColumns()[t])&&(a=this._getCellOptions({value:n.calculateCellValue(i.data),rowIndex:i.rowIndex,row:i,column:n})),a}getRow(e){if(e>=0){var t=this._getRowElements();if(t.length>e)return(0,b.Z)(t[e])}}updateFreeSpaceRowHeight(e){var t=this._dataController,i=t.items(!0).length,a=this._findContentElement(),n=this._getFreeSpaceRowElements(e);if(n&&a&&t.totalCount()>=0){var s=!1;if(i>0)if(this._hasHeight)n.hide(),(0,le.Su)(()=>{var d=this.getScrollbarWidth(!0),u=(0,we.Cr)(this.element())-d,f=u-(0,we.zp)(a)>0,p=this._getRowsHeight(a.children().first()),_=e||this.getTableElements(),x=u-p-Math.ceil(parseFloat(_.css("borderTopWidth")))-this._getHeightCorrection();f&&(0,le.g0)(()=>{n.css("height",x),s=!0,n.show()}),(0,le.g0)(()=>this._updateLastRowBorder(s))});else{var o=t.pageSize()-i,l=this.option("scrolling.mode");o>0&&t.pageCount()>1&&"virtual"!==l&&"infinite"!==l&&((0,nr.QQ)(n,o*this._rowHeight),s=!0),!s&&e?(0,nr.QQ)(n,0):n.toggle(s),this._updateLastRowBorder(s)}else n.css("height",0),n.show(),this._updateLastRowBorder(!0)}}_getHeightCorrection(){var e=ni.Z.webkit&&this._getDevicePixelRatio()>=2,t=ni.Z.chrome&&ni.Z.version>=91,i=ni.Z.mozilla&&ni.Z.version>=70&&!this.option("showRowLines");return e||i||t?1:0}_columnOptionChanged(e){var{optionNames:t}=e;e.changeTypes.grouping||(t.width||t.visibleWidth)&&(super._columnOptionChanged(e),this._fireColumnResizedCallbacks())}getScrollable(){return this._scrollable}_handleDataChanged(e){switch(e.changeType){case"refresh":case"prepend":case"append":case"update":this.render(null,e);break;default:this._update(e)}}publicMethods(){return["isScrollbarVisible","getTopVisibleRowData","getScrollbarWidth","getCellElement","getRowElement","getScrollable"]}contentWidth(){return(0,we.dz)(this.element())-this.getScrollbarWidth()}getScrollbarWidth(e){var t=this._scrollableContainer&&this._scrollableContainer.get(0),i=0;return t&&(e?(i=t.clientHeight?t.offsetHeight-t.clientHeight:0,i+=function(r){var e=r.getScrollable();return e?Math.ceil(parseFloat((0,b.Z)(e.content()).css("paddingBottom"))):0}(this)):i=t.clientWidth?t.offsetWidth-t.clientWidth:0),i>0?i:0}_fireColumnResizedCallbacks(){for(var e=this._lastColumnWidths||[],t=[],i=this.getColumns(),a=0;a<i.length;a++)t[a]=i[a].visibleWidth,i[a].resizedCallbacks&&!(0,C.$K)(i[a].groupIndex)&&e[a]!==t[a]&&i[a].resizedCallbacks.fire(t[a]);this._lastColumnWidths=t}_updateLastRowBorder(e){this.option("showBorders")&&!e?this.element().addClass(rm):this.element().removeClass(rm)}_updateScrollable(){var e=Ha.Z.getInstance(this.element());e&&(e.update(),(e.option("useNative")||!e?.isRenovated())&&this._updateHorizontalScrollPosition())}_updateHorizontalScrollPosition(){var e=this.getScrollable(),t=e&&e.scrollOffset().left;if(this.option("rtlEnabled")){var a=am(e);a-t!==this._scrollRight&&(this._scrollLeft=a-this._scrollRight)}this._scrollLeft>=0&&t!==this._scrollLeft&&e.scrollTo({x:this._scrollLeft})}_resizeCore(){var e=this;e._fireColumnResizedCallbacks(),e._updateRowHeight(),(0,le.g0)(()=>{e._renderScrollable(),e.renderNoDataText(),e.updateFreeSpaceRowHeight(),(0,le.Su)(()=>{e._updateScrollable()})})}scrollTo(e){var t=this.element(),i=t&&Ha.Z.getInstance(t);i&&i.scrollTo(e)}height(e){var t=this.element();if(0===arguments.length)return t?(0,we.zp)(t,!0):0;(0,C.$K)(e)&&t&&(this.hasHeight("auto"!==e),(0,nr.QQ)(t,e))}hasHeight(e){if(0===arguments.length)return!!this._hasHeight;this._hasHeight=e}setLoading(e,t){var i=this._loadPanel,a=this._dataController,n=this.option("loadPanel")||{},s=a.isLoaded()?n.animation:null,o=this.element();if((0,Je.Ym)()&&(!i&&void 0!==t&&a.isLocalStore()&&"auto"===n.enabled&&o&&(this._renderLoadPanel(o,o.parent()),i=this._loadPanel),i)){var l={message:t||n.text,animation:s,visible:e};e&&(l.position=Ae.calculateLoadPanelPosition(o)),clearTimeout(this._hideLoadingTimeoutID),i.option("visible")&&!e?this._hideLoadingTimeoutID=setTimeout(()=>{i.option(l)},200):i.option(l)}}setRowsOpacity(e,t){var i=this._getRowElements().not(".".concat(Uc))||[];this._setRowsOpacityCore(i,this.getColumns(),e,t)}_getCellElementsCore(e){var t=super._getCellElementsCore.apply(this,arguments);if(t){var i=t.filter(".".concat(em)).index();if(i>=0&&t.length>i+1)return t.slice(0,i+1)}return t}_getBoundaryVisibleItemIndex(e,t){var i=0,a=0,n=0,s=this._scrollTop,o=this._findContentElement(),l=o&&o.offset().top,d=this._dataController.items(),u=this.getTableElement();if(d.length&&u){var c=this._getRowElements(u).filter(":visible");for(e||(s+=(0,we.zp)(this._hasHeight?this.element():(0,Je.Jj)())),i=0;i<d.length;i++){a=n;var p=(0,b.Z)(c).eq(i);if(p.length&&(n=p.offset(),(n=(e?n.top:n.top+(0,we.zp)(p))-l)>s)){i&&(t||2*s<Math.round(n+a))&&i--;break}}i&&i===d.length&&i--}return i}getTopVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!0,e)}getBottomVisibleItemIndex(e){return this._getBoundaryVisibleItemIndex(!1,e)}getTopVisibleRowData(){var e=this.getTopVisibleItemIndex(),t=this._dataController.items();if(t[e])return t[e].data}_scrollToElement(e,t){var i=this.getScrollable();i&&i.scrollToElement(e,t)}optionChanged(e){switch(super.optionChanged(e),e.name){case"wordWrapEnabled":case"showColumnLines":case"showRowLines":case"rowAlternationEnabled":case"rowTemplate":case"dataRowTemplate":case"twoWayBindingEnabled":this._invalidate(!0,!0),e.handled=!0;break;case"scrolling":this._rowHeight=null,this._tableElement=null,e.handled=!0;break;case"rtlEnabled":this._rowHeight=null,this._tableElement=null;break;case"loadPanel":this._tableElement=null,this._invalidate(!0,"loadPanel.enabled"!==e.fullName),e.handled=!0;break;case"noDataText":this.renderNoDataText(),e.handled=!0}}setAriaOwns(e,t,i){var a,n=this._findContentElement(),s=this.getTableElement();s?.length&&this.setAria("owns","".concat(e??""," ").concat(null!==(a=s.attr("id"))&&void 0!==a?a:""," ").concat(t??"").trim(),n)}dispose(){super.dispose(),clearTimeout(this._hideLoadingTimeoutID),this._scrollable&&this._scrollable.dispose()}setScrollerSpacing(e,t){}_restoreErrorRow(e){}}}};He.registerModule("rows",om);var Rt=ve(5587),ti=ve(4383),_n=ve(1923),ft=ve(8936),$s=ve(9970),lm=ve(1120),Za=ve(1554),dm=function a2(r){return class{constructor(){throw new Error("Module '".concat(r,"' not found"))}static getInstance(){}}}("TextBox");const es={_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){var r=this.$element(),e=this.option("searchEnabled"),t=this._addWidgetPrefix("search"),i=this._addWidgetPrefix("with-search");if(!e)return r.removeClass(i),void this._removeSearchBox();var a=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(a):(r.addClass(i),this._$searchEditorElement=(0,b.Z)("<div>").addClass(t).prependTo(r),this._searchEditor=this._createComponent(this._$searchEditorElement,dm,a))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){var r=this,e=r.option("searchEditorOptions"),t=ae.Z.format("Search");return(0,B.l)({mode:"search",placeholder:t,tabIndex:r.option("tabIndex"),value:r.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":t},onValueChanged:function(i){var a=r.option("searchTimeout");r._valueChangeDeferred=new X.BH,clearTimeout(r._valueChangeTimeout),r._valueChangeDeferred.done(function(){this.option("searchValue",i.value)}.bind(r)),i.event&&"input"===i.event.type&&a?r._valueChangeTimeout=setTimeout(function(){r._valueChangeDeferred.resolve()},a):r._valueChangeDeferred.resolve()}},e)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(r,e){this.option("searchEnabled")&&this._toggleFocusClass(e,this.$element()),this.callBase(r,e)},getOperationBySearchMode:function(r){return"equals"===r?"=":r},_optionChanged:function(r){switch(r.name){case"searchEnabled":case"searchEditorOptions":this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource)return void At.Z.log("W1009");"searchMode"===r.name?this._dataSource.searchOperation(this.getOperationBySearchMode(r.value)):this._dataSource[r.name](r.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(r)}},focus:function(){this.option("focusedElement")||!this.option("searchEnabled")?this.callBase():this._searchEditor&&this._searchEditor.focus()},_cleanAria:function(){var r=this.$element();this.setAria({role:null,activedescendant:null},r),r.attr("tabIndex",null)},_clean(){this.callBase(),this._cleanAria()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(r){dm=r}};var Jd=ve(5710),va=ve(6056),Gs=ve(8287),n2=Ba.Z.inherit({ctor:function(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes:function(r,e){var t=this;(0,Y.S6)(r,function(i,a){var n=(0,C.$K)(e)?e:t._getParentId(a),s=t._convertItemToNode(a,n);t._dataStructure.push(s),t._checkForDuplicateId(s.internalFields.key),t._indexByKey[s.internalFields.key]=t._dataStructure.length-1,t._itemHasChildren(a)&&t._convertItemsToNodes(t._dataAccessors.getters.items(a),s.internalFields.key)})},_checkForDuplicateId:function(r){if((0,C.$K)(this._indexByKey[r]))throw At.Z.Error("E1040",r)},_getParentId:function(r){return"plain"===this._dataType?this._dataAccessors.getters.parentKey(r):void 0},_itemHasChildren:function(r){if("plain"!==this._dataType){var e=this._dataAccessors.getters.items(r);return e&&e.length}},_getUniqueKey:function(r){var e=this._dataAccessors.getters.key,t=e(r);return e&&(t||0===t)&&(0,C.pt)(t)?t:this.getItemsCount()},_convertItemToNode:function(r,e){this._itemsCount++,!1!==r.visible&&this._visibleItemsCount++;var t={internalFields:{disabled:this._dataAccessors.getters.disabled(r,{defaultValue:!1}),expanded:this._dataAccessors.getters.expanded(r,{defaultValue:!1}),selected:this._dataAccessors.getters.selected(r,{defaultValue:!1}),key:this._getUniqueKey(r),parentKey:(0,C.$K)(e)?e:this._rootValue,item:this._makeObjectFromPrimitive(r),childrenKeys:[]}};return(0,B.l)(t,r),delete t.items,t},setChildrenKeys:function(){var r=this;(0,Y.S6)(this._dataStructure,function(e,t){if(t.internalFields.parentKey!==r._rootValue){var i=r.getParentNode(t);i&&i.internalFields.childrenKeys.push(t.internalFields.key)}})},_makeObjectFromPrimitive:function(r){if((0,C.pt)(r)){var e=r;this._dataAccessors.setters.key(r={},e)}return r},_convertToPublicNode:function(r,e){if(!r)return null;var t={text:this._dataAccessors.getters.display(r),key:r.internalFields.key,selected:r.internalFields.selected,expanded:r.internalFields.expanded,disabled:r.internalFields.disabled,parent:e||null,itemData:r.internalFields.item,children:[],items:[]};return t.parent&&(t.parent.children.push(t),t.parent.items.push(t)),t},convertToPublicNodes:function(r,e){if(!r.length)return[];var t=this,i=[];return(0,Y.S6)(r,function(a,n){n=(0,C.pt)(n)?t._getByKey(n):n;var s=t._convertToPublicNode(n,e);s.children=t.convertToPublicNodes(n.internalFields.childrenKeys,s),i.push(s),n.internalFields.publicNode=s}),i},setDataAccessors:function(r){this._dataAccessors=r},_getByKey:function(r){return this._dataStructure[this.getIndexByKey(r)]||null},getParentNode:function(r){return this._getByKey(r.internalFields.parentKey)},getByKey:function(r,e){if(null==e)return null;var s,t=null,i=this;return s=e,(0,Y.S6)(r,function(o,l){if((l.internalFields&&l.internalFields.key||i._dataAccessors.getters.key(l)).toString()===s.toString())return t=l,!1}),t},getItemsCount:function(){return this._itemsCount},getVisibleItemsCount:function(){return this._visibleItemsCount},updateIndexByKey:function(){var r=this;this._indexByKey={},(0,Y.S6)(this._dataStructure,function(e,t){r._checkForDuplicateId(t.internalFields.key),r._indexByKey[t.internalFields.key]=e})},updateChildrenKeys:function(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys:function(){this._indexByKey={},(0,Y.S6)(this._dataStructure,function(r,e){e.internalFields.childrenKeys=[]})},getIndexByKey:function(r){return this._indexByKey[r]},createPlainStructure:function(r,e,t){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=e,this._dataType=t,this._indexByKey={},this._convertItemsToNodes(r),this.setChildrenKeys(),this._dataStructure}});const s2=n2;var Us="expanded",ts="selected";es.setEditorClass(Jd.Z);var l2=Ba.Z.inherit({ctor:function(r){this.options={},(0,B.l)(this.options,this._defaultOptions(),r),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption:function(r,e){this.options[r]=e,"recursiveSelection"===r&&this._updateSelection()},_defaultOptions:function(){return{dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new s2,onNodeChanged:le.ZT,sort:null}},_createInternalDataStructure:function(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection:function(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(ts)},_updateExpansion:function(r){this.options.recursiveExpansion&&(r?this._updateOneBranch(r):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray(Us)},_updateNodesKeysArray:function(r){var e=this,t=[];return(0,Y.S6)(e._getDataBySelectionMode(),function(i,a){e._isNodeVisible(a)&&a.internalFields[r]&&(r===Us||e.options.multipleSelection?t.push(a.internalFields.key):(t.length&&e.toggleSelection(t[0],!1,!0),t=[a.internalFields.key]))}),t},_getDataBySelectionMode:function(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:function(r){return!1!==r.internalFields.item.visible},_getByKey:function(r,e){return r===this._dataStructure?this.options.dataConverter._getByKey(e):this.options.dataConverter.getByKey(r,e)},_setChildrenSelection:function(){var r=this;(0,Y.S6)(this._dataStructure,function(e,t){if(t.internalFields.childrenKeys.length){var i=t.internalFields.selected;!0===i&&r._toggleChildrenSelection(t,i)}})},_setParentSelection:function(){var r=this;(0,Y.S6)(this._dataStructure,function(e,t){r.options.dataConverter.getParentNode(t)&&t.internalFields.parentKey!==r.options.rootValue&&r._iterateParents(t,function(a){var n=r._calculateSelectedState(a);r._setFieldState(a,ts,n)})})},_setParentExpansion:function(){var r=this;(0,Y.S6)(this._dataStructure,function(e,t){t.internalFields.expanded&&r._updateOneBranch(t.internalFields.key)})},_updateOneBranch:function(r){var e=this,t=this.getNodeByKey(r);e._iterateParents(t,function(i){e._setFieldState(i,Us,!0)})},_iterateChildren:function(r,e,t,i){if((0,C.mf)(t)){var a=this,n=r.internalFields.key;-1===(i=i||[]).indexOf(n)&&(i.push(n),(0,Y.S6)(r.internalFields.childrenKeys,function(s,o){var l=a.getNodeByKey(o);t(l),l.internalFields.childrenKeys.length&&e&&a._iterateChildren(l,e,t,i)}))}},_iterateParents:function(r,e,t){if(r.internalFields.parentKey!==this.options.rootValue&&(0,C.mf)(e)){var i=r.internalFields.key;if(-1===(t=t||[]).indexOf(i)){t.push(i);var a=this.options.dataConverter.getParentNode(r);a&&(e(a),a.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(a,e,t))}}},_calculateSelectedState:function(r){for(var e=r.internalFields.childrenKeys.length,t=0,i=0,a=!1,n=0;n<=e-1;n++){var s=this.getNodeByKey(r.internalFields.childrenKeys[n]),l=s.internalFields.selected;!1===s.internalFields.item.visible?i++:l?t++:void 0===l&&(t+=.5)}return t&&(a=t===e-i||void 0),a},_toggleChildrenSelection:function(r,e){var t=this;this._iterateChildren(r,!0,function(i){t._isNodeVisible(i)&&t._setFieldState(i,ts,e)})},_setFieldState:function(r,e,t){r.internalFields[e]!==t&&(r.internalFields[e]=t,r.internalFields.publicNode&&(r.internalFields.publicNode[e]=t),this.options.dataAccessors.setters[e](r.internalFields.item,t),this.options.onNodeChanged(r))},_markChildren:function(r){var e=this;(0,Y.S6)(r,function(t,i){var a=e.getIndexByKey(i),n=e.getNodeByKey(i);e._dataStructure[a]=0,n.internalFields.childrenKeys.length&&e._markChildren(n.internalFields.childrenKeys)})},_removeNode:function(r){var e=this.getNodeByKey(r);this._dataStructure[this.getIndexByKey(r)]=0,this._markChildren(e.internalFields.childrenKeys);var t=this,i=0,a=(0,B.l)([],this._dataStructure);(0,Y.S6)(a,function(n,s){s||(t._dataStructure.splice(n-i,1),i++)})},_addNode:function(r){var e=this.options.dataConverter,t=e._convertItemToNode(r,this.options.dataAccessors.getters.parentKey(r));this._dataStructure=this._dataStructure.concat(t),this._initialDataStructure=this._initialDataStructure.concat(t),e._dataStructure=e._dataStructure.concat(t)},_updateFields:function(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys:function(){return this._selectedNodesKeys},getExpandedNodesKeys:function(){return this._expandedNodesKeys},getData:function(){return this._dataStructure},getFullData:function(){return this._initialDataStructure},getNodeByItem:function(r){var e=null;return(0,Y.S6)(this._dataStructure,function(t,i){if(i.internalFields.item===r)return e=i,!1}),e},getNodesByItems:function(r){var e=this,t=[];return(0,Y.S6)(r,function(i,a){var n=e.getNodeByItem(a);n&&t.push(n)}),t},getNodeByKey:function(r,e){return this._getByKey(e||this._getDataBySelectionMode(),r)},getTreeNodes:function(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount:function(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount:function(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:function(r){return r.internalFields.publicNode},getRootNodes:function(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes:function(r){return(0,va.Z)(this._dataStructure,{langParams:this.options.langParams}).filter(["internalFields.parentKey",r]).toArray()},getIndexByKey:function(r){return this.options.dataConverter.getIndexByKey(r)},addItem:function(r){this._addNode(r),this._updateFields()},removeItem:function(r){this._removeNode(r),this._updateFields()},toggleSelection:function(r,e,t){var i=this._isSingleModeUnselect(e),a=this._getByKey(t||i?this._initialDataStructure:this._dataStructure,r);this._setFieldState(a,ts,e),this.options.recursiveSelection&&!t&&(e?this._setChildrenSelection():this._toggleChildrenSelection(a,e),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(ts)},_isSingleModeUnselect:function(r){return!this.options.multipleSelection&&!r},toggleNodeDisabledState:function(r,e){var t=this.getNodeByKey(r);this._setFieldState(t,"disabled",e)},toggleSelectAll:function(r){if((0,C.$K)(r)){var e=this,t=e._selectedNodesKeys[e._selectedNodesKeys.length-1],i=e._isSingleModeUnselect(r)?this._initialDataStructure:this._dataStructure;(0,Y.S6)(i,function(a,n){e._isNodeVisible(n)&&e._setFieldState(n,ts,r)}),e._selectedNodesKeys=e._updateNodesKeysArray(ts),!r&&e.options.selectionRequired&&e.toggleSelection(t,!0)}},isAllSelected:function(){return!!this.getSelectedNodesKeys().length&&(this.getSelectedNodesKeys().length===this.getVisibleItemsCount()||void 0)},toggleExpansion:function(r,e){var t=this.getNodeByKey(r);this._setFieldState(t,Us,e),e&&this._updateExpansion(r),this._expandedNodesKeys=this._updateNodesKeysArray(Us)},isFiltered:function(r){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[r]).length},_createCriteria:function(r,e,t){var i=[];return Array.isArray(r)?((0,Y.S6)(r,function(a,n){i.push([n,t,e],"or")}),i.pop(),i):[r,t,e]},_filterDataStructure:function(r,e){var t=this.options.searchExpr||this.options.dataAccessors.getters.display,i=es.getOperationBySearchMode(this.options.searchMode),a=this._createCriteria(t,r,i);return(0,va.Z)(e=e||this._initialDataStructure,{langParams:this.options.langParams}).filter(a).toArray()},search:function(r){var e=this,t=this._filterDataStructure(r),i=this.options.dataConverter;return function a(n,s){for(var o=n.length;s<o;){var l=n[s];if(l.internalFields.parentKey!==e.options.rootValue){var d=i.getParentNode(l);d?(d.internalFields.expanded||e._setFieldState(d,Us,!0),n.includes(d)?s++:(n.splice(s,0,d),a(n,s))):(At.Z.log("W1007",l.internalFields.parentKey,l.internalFields.key),s++)}else s++}}(t,0),this.options.sort&&(t=Gs.Z.queryByOptions((0,va.Z)(t),{sort:this.options.sort,langParams:this.options.langParams}).toArray()),i._indexByKey={},(0,Y.S6)(t,function(a,n){n.internalFields.childrenKeys=[],i._indexByKey[n.internalFields.key]=a}),i._dataStructure=t,i.setChildrenKeys(),i._dataStructure}});const d2=l2;var pl=ve(346),Qd=ve(5219),c2=pl.Z.inherit({_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===ft.Z.real().deviceType&&!ft.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource:function(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter:function(){var r=this._createDataAdapterAccessors();this._dataAdapter=new d2((0,B.l)({dataAccessors:{getters:r.getters,setters:r.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:le.ZT,_getItemExtraPropNames:le.ZT,_initDynamicTemplates:function(){var r=["text","html","items","icon"].concat(this._getItemExtraPropNames());this._templateManager.addDefaultTemplates({item:new Qd.c(this._addContent.bind(this),r,this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_addContent:function(r,e){r.html(e.html).append(this._getIconContainer(e)).append(this._getTextContainer(e))},_getLinkContainer:function(r,e,t){var{linkAttr:i,url:a}=t,n=(0,C.Kn)(i)?i:{};return(0,b.Z)("<a>").addClass("dx-item-url").attr((0,ye.Z)({},n,{href:a})).append(r).append(e)},_getIconContainer:function(r){if(r.icon){var e=(0,Za.H)(r.icon);return e.is("img")&&e.attr("alt","".concat(this.NAME," item icon")),e}},_getTextContainer:function(r){return(0,b.Z)("<span>").text(r.text)},_initAccessors:function(){var r=this;(0,Y.S6)(this._getAccessors(),function(e,t){r._compileAccessor(t)}),this._compileDisplayGetter()},_getAccessors:function(){return["key","selected","items","disabled","parentId","expanded"]},_getChildNodes:function(r){var e=this,t=[];return(0,Y.S6)(r.internalFields.childrenKeys,function(i,a){var n=e._dataAdapter.getNodeByKey(a);t.push(n)}),t},_hasChildren:function(r){return r&&r.internalFields.childrenKeys.length},_compileAccessor:function(r){var e="_"+r+"Getter",t="_"+r+"Setter",i=this.option(r+"Expr");return i?(0,C.mf)(i)?(this[t]=function(a,n){a[i()]=n},void(this[e]=function(a){return a[i()]})):(this[e]=(0,Ot.vb)(i),void(this[t]=(0,Ot.OM)(i))):(this[e]=le.ZT,void(this[t]=le.ZT))},_createDataAdapterAccessors:function(){var r=this,e={getters:{},setters:{}};return(0,Y.S6)(this._getAccessors(),function(t,i){var n="_"+i+"Setter",s="parentId"===i?"parentKey":i;e.getters[s]=r["_"+i+"Getter"],e.setters[s]=r[n]}),e.getters.display=this._displayGetter?this._displayGetter:t=>t.text,e},_initMarkup:function(){this.callBase(),this._addWidgetClass()},_addWidgetClass:function(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:le.ZT,_renderItemFrame:function(r,e){var t=this.callBase.apply(this,arguments);return t.toggleClass("dx-state-disabled",!!this._disabledGetter(e)),t},_optionChanged:function(r){switch(r.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(r);break;default:this.callBase(r)}}});const um=c2;var hm=ve(648);const f2=class p2 extends hm.Z{_getPlainItems(){return(0,Y.UI)(this._collectionWidget.option("items"),function e(t){return t.items?[t].concat((0,Y.UI)(t.items,e)):t})}_stringifyItem(e){return JSON.stringify(e,(t,i)=>"template"===t?this._getTemplateString(i):i)}_getTemplateString(e){return"object"==typeof e?(0,b.Z)(e).text():e.toString()}};var eu=ve(9216),fl="dx-menu",v2=fl+"-no-icons",Tr=fl+"-item",_2=Tr+"-content",jc=Tr+"-selected",cm=Tr+"-wrapper",m2=fl+"-items-container",C2=Tr+"-expanded",w2=fl+"-separator",b2=fl+"-last-group-item",y2=Tr+"-has-text",x2=Tr+"-has-icon",S2=Tr+"-has-submenu",pm=Tr+"-popout",E2=pm+"-container",fm=Tr+"-text",A2={show:50,hide:300},T2="".concat(fm,"-with-url");const vm=(()=>{class r extends um{_getDefaultOptions(){return(0,B.l)(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return Tr}_setAriaSelectionAttribute(){}_selectedItemClass(){return jc}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return(0,B.l)(super._supportedKeys(),{space:()=>{var t=(0,b.Z)(this.option("focusedElement"));!t.length||!this._isSelectionEnabled()||this.selectItem(t[0])},pageUp:le.ZT,pageDown:le.ZT})}_isSelectionEnabled(){return"single"===this.option("selectionMode")}_init(){this._activeStateUnit=".".concat(Tr),super._init(),this._renderSelectedItem(),this._initActions()}_getLinkContainer(t,i,a){var{linkAttr:n,url:s}=a;return t?.addClass("dx-icon-with-url"),i?.addClass(T2),super._getLinkContainer(t,i,{linkAttr:n,url:s})}_addContent(t,i){var{html:a,url:n}=i;if(n){t.html(a);var s=this._getLinkContainer(this._getIconContainer(i),this._getTextContainer(i),i);t.append(s)}else super._addContent(t,i);t.append(this._getPopoutContainer(i)),this._addContentClasses(i,t.parent())}_getTextContainer(t){var{text:i}=t;if(i){var a=(0,b.Z)("<span>").addClass(fm),n=(0,C.PO)(t)?i:String(t);return a.text(n)}}_getItemExtraPropNames(){return["url","linkAttr"]}_getPopoutContainer(t){var a,i=t.items;if(i&&i.length){var n=(0,b.Z)("<div>").addClass(pm);a=(0,b.Z)("<span>").addClass(E2).append(n)}return a}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(t){if(t){var i=this._dataAdapter.getNodeByItem(t);this._dataAdapter.toggleSelection(i.internalFields.key,!0)}}_renderSelectedItem(){var t=this._dataAdapter.getSelectedNodesKeys(),i=t.length&&t[0],a=this.option("selectedItem");if(i){var n=this._dataAdapter.getNodeByKey(i);if(!1!==n.selectable){if(!a)return void this.option("selectedItem",n.internalFields.item);a!==n.internalFields.item&&(this._dataAdapter.toggleSelection(i,!1),this._selectByItem(a))}}else this._selectByItem(a)}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=(0,lm.sY)()}_toggleActiveState(t,i,a){if(super._toggleActiveState.apply(this,arguments),this._inkRipple){var n={element:t,event:a};i?this._inkRipple.showWave(n):this._inkRipple.hideWave(n)}}_getShowSubmenuMode(){var t=this.option("showSubmenuMode");return t=(0,C.Kn)(t)?t.name:t,this._isDesktopDevice()?t:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return"desktop"===ft.Z.real().deviceType}_initEditStrategy(){this._editStrategy=new f2(this)}_addCustomCssClass(t){t.addClass(this.option("cssClass"))}_itemWrapperSelector(){return".".concat(cm)}_hoverStartHandler(t){var i=this._getItemElementByEventArgs(t);!i||this._isItemDisabled(i)||(t.stopPropagation(),"onHover"===this._getShowSubmenuMode()&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,i),this._getSubmenuDelay("show"))))}_getAvailableItems(t){return super._getAvailableItems(t).filter(function(){return"hidden"!==(0,b.Z)(this).css("visibility")})}_isItemDisabled(t){return this._disabledGetter(t.data(this._itemDataKey()))}_showSubmenu(t){this._addExpandedClass(t)}_addExpandedClass(t){(0,b.Z)(t).addClass(C2)}_getSubmenuDelay(t){var{delay:i}=this.option("showSubmenuMode");return(0,C.$K)(i)?(0,C.Kn)(i)?i[t]:i:A2[t]}_getItemElementByEventArgs(t){var i=(0,b.Z)(t.target);if(i.hasClass(this._itemClass())||i.get(0)===t.currentTarget)return i;for(;!i.hasClass(this._itemClass());)if((i=i.parent()).hasClass("dx-submenu"))return null;return i}_hoverEndHandler(){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(t){return t&&t.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(t,i){if(t.length){this.hasIcons=!1;var a=this._renderContainer(this.$element(),i),n=-1,s=-1;(0,Y.S6)(t,(o,l)=>{var d=!1!==l.visible;d&&n<0&&(n=o),n<o&&(l.beginGroup||o===s)&&(s=d?o:o+1),o===s&&n<o&&this._renderSeparator(a),this._renderItem(o,l,a)}),this.hasIcons||a.addClass(v2)}}_renderContainer(t){var i=(0,b.Z)("<ul>");return this.setAria("role","none",i),i.appendTo(t).addClass(m2)}_createDOMElement(t){var i=(0,b.Z)("<li>");return this.setAria("role","none",i),i.appendTo(t).addClass(cm)}_renderItem(t,i,a,n){var s=this.option("items"),o=n||this._createDOMElement(a);s[t+1]&&s[t+1].beginGroup&&o.addClass(b2);var l=super._renderItem(t,i.internalFields.item,o);i.internalFields.item===this.option("selectedItem")&&l.addClass(jc),l.attr("tabIndex",-1),this._hasSubmenu(i)&&this.setAria("haspopup","true",l)}_renderItemFrame(t,i,a){var n=a.children(".".concat(Tr));return n.length?n:super._renderItemFrame.apply(this,arguments)}_refreshItem(t,i){var a=this._dataAdapter.getNodeByItem(i),n=t.data(this._itemIndexKey()),s=t.closest("ul"),o=t.closest("li");this._renderItem(n,a,s,o)}_addContentClasses(t,i){var n=!!t.icon,s=!!t.items&&!!t.items.length;i.toggleClass(y2,!!t.text&&!!t.text.length),i.toggleClass(x2,n),this.hasIcons||(this.hasIcons=n),i.toggleClass(S2,s)}_getItemContent(t){var i=super._getItemContent(t);return i.length||(i=t.children(".".concat(_2))),i}_postprocessRenderItem(t){var i=(0,b.Z)(t.itemElement),a=this._dataAdapter.getSelectedNodesKeys();a.length&&this._selectedGetter(t.itemData)&&this._isItemSelectable(t.itemData)&&this._dataAdapter.getNodeByItem(t.itemData).internalFields.key===a[0]?(i.addClass(this._selectedItemClass()),this._setAriaSelectionAttribute(i,"true")):this._setAriaSelectionAttribute(i,"false")}_isItemSelectable(t){return!1!==t.selectable}_renderSeparator(t){(0,b.Z)("<li>").appendTo(t).addClass(w2)}_itemClickHandler(t){if(!t._skipHandling){var i=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(t,"onItemClick",{},{beforeExecute:this._itemClick,afterExecute:i.bind(this)}),t._skipHandling=!0}}_itemClick(t){var{event:i,itemData:a}=t.args[0],n=this._getItemElementByEventArgs(i),s=n&&n.find(".".concat("dx-item-url")).get(0);a.url&&s&&s.click()}_updateSubmenuVisibilityOnClick(t){this._updateSelectedItemOnClick(t),"onClick"===this._getShowSubmenuMode()&&this._addExpandedClass(t.args[0].itemElement)}_updateSelectedItemOnClick(t){var i=t.args?t.args[0]:t;if(this._isItemSelectAllowed(i.itemData)){var a=this._dataAdapter.getSelectedNodesKeys(),n=a.length&&this._dataAdapter.getNodeByKey(a[0]);n&&this._toggleItemSelection(n,!1),n&&n.internalFields.item===i.itemData?(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null)):this.selectItem(i.itemData)}}_isItemSelectAllowed(t){var i=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&i&&this._isItemSelectable(t)&&!this._itemsGetter(t)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return(0,le.C$)()}_optionChanged(t){switch(t.name){case"showSubmenuMode":break;case"selectedItem":var i=this._dataAdapter.getNodeByItem(t.value),a=this._dataAdapter.getSelectedNodesKeys()[0];if(i&&i.internalFields.key!==a){if(!1===i.selectable)break;a&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(a),!1),this._toggleItemSelection(i,!0),this._updateSelectedItems()}break;case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(t)}}_toggleItemSelection(t,i){var a=this._getElementByItem(t.internalFields.item);a&&(0,b.Z)(a).toggleClass(jc),this._dataAdapter.toggleSelection(t.internalFields.key,i)}_getElementByItem(t){var i;return(0,Y.S6)(this._itemElements(),(a,n)=>(0,b.Z)(n).data(this._itemDataKey())!==t||(i=n,!1)),i}_updateSelectedItems(t,i){(t||i)&&this._fireSelectionChangeEvent(i,t)}_fireSelectionChangeEvent(t,i){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[t],removedItems:[i]})}selectItem(t){var i=t.nodeType?this._getItemData(t):t,a=this._dataAdapter.getSelectedNodesKeys()[0],n=this.option("selectedItem"),s=this._dataAdapter.getNodeByItem(i);s.internalFields.key!==a&&(a&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(a),!1),this._toggleItemSelection(s,!0),this._updateSelectedItems(n,i),this._setOptionWithoutOptionChange("selectedItem",i))}unselectItem(t){var i=t.nodeType?this._getItemData(t):t,a=this._dataAdapter.getNodeByItem(i),n=this.option("selectedItem");a.internalFields.selected&&(this._toggleItemSelection(a,!1),this._updateSelectedItems(n,null),this._setOptionWithoutOptionChange("selectedItem",null))}}return r.ItemClass=eu.Z,r})();var R2=ve(4676),js=ve(1244),gm="dx-menu",vl=gm+"-item",qs=vl+"-expanded",tu=gm+"-items-container",_m=vl+"-wrapper",or="dx-submenu",mm="dx-state-hover",xm=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],H2=["up","down","first","last"],Sm="dxcontextmenu",Z2=(0,Je.Jj)();class Em extends vm{getShowEvent(e){var t=null;return(0,C.Kn)(e)?null!==e.name&&(t=e.name||Sm):t=e,t}getShowDelay(e){return(0,C.Kn)(e)&&e.delay}_getDefaultOptions(){return(0,B.l)(super._getDefaultOptions(),{showEvent:Sm,hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!(0,Je.Ym)(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),(0,B.l)(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},(0,Y.S6)(xm,(e,t)=>{this._actions[t]=this._createActionByOption(t)||le.ZT})}_setOptionsByReference(){super._setOptionsByReference(),(0,B.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():(0,b.Z)()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return(0,B.l)(super._supportedKeys(),{space:()=>{var e=(0,b.Z)(this.option("focusedElement"));this.hide(),e.length&&this._isSelectionEnabled()&&this.selectItem(e[0])},escape:this.hide})}_getActiveItem(){var e=this._getAvailableItems(),t=e.filter(".".concat("dx-state-focused")),i=e.filter(".".concat(mm));return i.closest(".".concat(tu)).find(".".concat(vl)).index(t)>=0?t:i.length?i:super._getActiveItem()}_moveFocus(e){var o,t=this._getItemsByLocation(e),i=this._getActiveItem(!0),a=this.itemsContainer().find(".".concat(mm)),s=!(!(0,b.Z)(this.option("focusedElement")).length&&!a.length);switch(e){case"up":o=s?this._prevItem(t):i,this._setFocusedElement(o),i.is(t.first())&&this._actions.onLeftFirstItem(i);break;case"down":o=s?this._nextItem(t):i,this._setFocusedElement(o),i.is(t.last())&&this._actions.onLeftLastItem(i);break;case"right":o=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler(t,e),this._setFocusedElement(o);break;case"left":o=this.option("rtlEnabled")?this._expandSubmenuHandler(t,e):this._hideSubmenuHandler(),this._setFocusedElement(o);break;case"first":o=t.first(),this._setFocusedElement(o);break;case"last":o=t.last(),this._setFocusedElement(o);break;default:return super._moveFocus(e)}}_setFocusedElement(e){e&&0!==e.length&&this.option("focusedElement",(0,lt.u)(e))}_getItemsByLocation(e){var i,t=this._getActiveItem(!0);return H2.includes(e)&&(i=t.closest(".".concat(tu)).children().children()),this._getAvailableItems(i)}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if((0,C.$K)(this._overlay)){var e=this._overlay.$content();super._refreshActiveDescendant(e)}}_hideSubmenuHandler(){var e=this._getActiveItem(!0),t=e.parents(".".concat(qs)).first();return t.length?(this._hideSubmenusOnSameLevel(t),this._hideSubmenu(e.closest(".".concat(or))),t):(this._actions.onCloseRootSubmenu(e),e)}_expandSubmenuHandler(e,t){var i=this._getActiveItem(!0),a=this._getItemData(i),n=this._dataAdapter.getNodeByItem(a),s=this._hasSubmenu(n),o=i.children(".".concat(or));if(s&&!i.hasClass("dx-state-disabled"))return(!o.length||"hidden"===o.css("visibility"))&&this._showSubmenu(i),this._nextItem(this._getItemsByLocation(t));this._actions.onExpandLastSubmenu(i)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(!this._overlay){var e=this._getOverlayOptions();this._overlay=this._createComponent((0,b.Z)("<div>").appendTo(this._$element),$s.Z,e);var t=this._overlay.$content();t.addClass("dx-context-menu"),this._addCustomCssClass(t),this._addPlatformDependentClass(t),this._attachContextMenuEvent()}}preventShowingDefaultContextMenuAboveOverlay(){var e=this._itemContainer(),t=(0,Ee.V4)(R2.u,this.NAME);z.Z.off(e,t,".".concat(or)),z.Z.on(e,t,".".concat(or),(i=>{i.stopPropagation(),i.preventDefault(),z.Z.off(e,t,".".concat(or))}).bind(this))}_itemContextMenuHandler(e){super._itemContextMenuHandler(e),e.stopPropagation()}_addPlatformDependentClass(e){ft.Z.current().phone&&e.addClass("dx-menu-phone-overlay")}_detachShowContextMenuEvents(e){var t=this.getShowEvent(this.option("showEvent"));if(t){var i=(0,Ee.V4)(t,this.NAME);this._showContextMenuEventHandler?z.Z.off(at.Z.getDocument(),i,e,this._showContextMenuEventHandler):z.Z.off((0,b.Z)(e),i)}}_attachShowContextMenuEvents(){var e=this._getTarget(),t=this.getShowEvent(this.option("showEvent"));if(t){var i=(0,Ee.V4)(t,this.NAME),a=this._createAction(s=>{var o=this.getShowDelay(this.option("showEvent"));o?setTimeout(()=>this._show(s.event),o):this._show(s.event)},{validatingTargetName:"target"}),n=s=>a({event:s,target:(0,b.Z)(s.currentTarget)});a=this._createAction(a),(0,C.ZU)(e)||e.nodeType||(0,C.FJ)(e)?(this._showContextMenuEventHandler=void 0,z.Z.on(e,i,n)):(this._showContextMenuEventHandler=n,z.Z.on(at.Z.getDocument(),i,e,this._showContextMenuEventHandler))}}_hoverEndHandler(e){super._hoverEndHandler(e),e.stopPropagation()}_renderDimensions(){}_renderContainer(e,t){var i=t||this._itemContainer();(e=(0,b.Z)("<div>")).appendTo(i).addClass(or).css("visibility",t?"hidden":"visible"),e.parent().hasClass("dx-overlay-content")||this._addCustomCssClass(e);var a=super._renderContainer(e);return t?a:this.option("width")?a.css("minWidth",this.option("width")):this.option("height")?a.css("minHeight",this.option("height")):a}_renderSubmenuItems(e,t){this._renderItems(this._getChildNodes(e),t),this._actions.onSubmenuCreated({itemElement:(0,lt.u)(t),itemData:e.internalFields.item,submenuElement:(0,lt.u)(t.children(".".concat(or)))})}_getOverlayOptions(){var e=this.option("position"),t={focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:i=>this._hideOnOutsideClickHandler(i),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:e.at,my:e.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:Z2};return t}_overlayShownActionHandler(e){this._actions.onShown(e)}_overlayHidingActionHandler(e){this._actions.onHiding(e),e.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(e){this._actions.onHidden(e)}_shouldHideOnOutsideClick(e){var{closeOnOutsideClick:t,hideOnOutsideClick:i}=this.option();return(0,C.mf)(i)?i(e):(0,C.mf)(t)?t(e):i||t}_hideOnOutsideClickHandler(e){if(!this._shouldHideOnOutsideClick(e))return!1;if(at.Z.isDocument(e.target))return!0;var t=this._getActiveItemsContainer(e.target),i=this._getItemsContainers(),a=this._searchActiveItem(e.target),n=this.$element().parents(".".concat(vl)),s=a[0]===n[0]&&a.length&&n.length;return!(this._isIncludeOverlay(t,i)&&a.length)&&!s||("onClick"===this._getShowSubmenuMode()&&this._hideAllShownChildSubmenus(a),!1)}_getActiveItemsContainer(e){return(0,b.Z)(e).closest(".".concat(tu))}_getItemsContainers(){return this._overlay.$content().find(".".concat(tu))}_searchActiveItem(e){return(0,b.Z)(e).closest(".".concat(vl)).eq(0)}_isIncludeOverlay(e,t){var i=!1;return(0,Y.S6)(t,(a,n)=>{e.is(n)&&!i&&(i=!0)}),i}_hideAllShownChildSubmenus(e){var t=e.find(".".concat(or)),i=(0,B.l)([],this._shownSubmenus);t.length>0&&(0,Y.S6)(i,(a,n)=>{var s=this._searchActiveItem(n.context).parent();s.parent().is(e.parent().parent())&&!s.is(e.parent())&&this._hideSubmenu(n)})}_showSubmenu(e){var t=this._dataAdapter.getNodeByItem(this._getItemData(e));if(this._hideSubmenusOnSameLevel(e),this._hasSubmenu(t)){var i=e.children(".".concat(or)),a=i.length;super._showSubmenu(e),a||this._renderSubmenuItems(t,e),this._isSubmenuVisible(i)||this._drawSubmenu(e)}}_hideSubmenusOnSameLevel(e){var t=e.parent(".".concat(_m)).siblings().find(".".concat(qs));t.length&&(t.removeClass(qs),this._hideSubmenu(t.find(".".concat(or))))}_hideSubmenuGroup(e){this._isSubmenuVisible(e)&&this._hideSubmenuCore(e)}_isSubmenuVisible(e){return"visible"===e.css("visibility")}_drawSubmenu(e){var t=this.option("animation")?this.option("animation").show:{},i=e.children(".".concat(or)),a=this._getSubmenuPosition(e);this._overlay&&this._overlay.option("visible")&&((0,C.$K)(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(i)||this._shownSubmenus.push(i),t&&ti.Z.stop(i),_n.Z.setup(i,a),t&&((0,C.PO)(t.to)&&(t.to.position=a),this._animate(i,t)),i.css("visibility","visible"))}_animate(e,t){ti.Z.animate(e,t)}_getSubmenuPosition(e){var t=this.option("submenuDirection").toLowerCase(),a={collision:"flip",of:e.parent(".".concat(_m)),offset:{h:0,v:-1}};switch(t){case"left":a.at="left top",a.my="right top";break;case"right":a.at="right top",a.my="left top";break;default:this.option("rtlEnabled")?(a.at="left top",a.my="right top"):(a.at="right top",a.my="left top")}return a}_updateSubmenuVisibilityOnClick(e){if(e.args.length){var t=e.args[0].itemData,i=this._dataAdapter.getNodeByItem(t);if(i){var a=(0,b.Z)(e.args[0].itemElement),n=a.find(".".concat(or));if(this._hasSubmenu(i)&&!n.length&&(this._renderSubmenuItems(i,a),n=a.find(".".concat(or))),(a.context!==n.context||"visible"!==n.css("visibility"))&&(this._updateSelectedItemOnClick(e),t&&!t.disabled&&(!t||!1!==t.closeMenuOnClick)))if(0===n.length){var l=(0,b.Z)(a.parents(".".concat(or))[0]);this._hideSubmenu(l),!e.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(n)&&this._hideSubmenu(n),this._showSubmenu(a)}}}_hideSubmenu(e){var t=(0,B.l)([],this._shownSubmenus);(0,Y.S6)(t,(i,a)=>{(e.is(a)||(0,ha.r3)(e[0],a[0]))&&(a.parent().removeClass(qs),this._hideSubmenuCore(a))})}_hideSubmenuCore(e){var t=this._shownSubmenus.indexOf(e),i=this.option("animation")?this.option("animation").hide:null;t>=0&&this._shownSubmenus.splice(t,1),this._stopAnimate(e),i&&this._animate(e,i),e.css("visibility","hidden")}_stopAnimate(e){ti.Z.stop(e,!0)}_hideAllShownSubmenus(){var e=(0,B.l)([],this._shownSubmenus);this._overlay.$content().find(".".concat(qs)).removeClass(qs),(0,Y.S6)(e,(i,a)=>{this._hideSubmenu(a)})}_visibilityChanged(e){e&&this._renderContentImpl()}_optionChanged(e){if(xm.includes(e.name))this._initActions();else switch(e.name){case"visible":this._renderVisibility(e.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":e.previousValue&&this._detachShowContextMenuEvents(e.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(e)}}_renderVisibility(e){return e?this._show():this._hide()}_toggleVisibility(){}_show(e){var t={jQEvent:e},i=(new X.BH).reject().promise();if(this._actions.onShowing(t),t.cancel)return i;var n,a=this._positionContextMenu(e);return a&&(this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes())),this._setOptionWithoutOptionChange("visible",!0),this._overlay.option("position",a),i=this._overlay.show(),e&&e.stopPropagation(),this._setAriaAttributes(),(null==e||null===(n=e.originalEvent)||void 0===n?void 0:n.type)===js.Z.name&&this.preventShowingDefaultContextMenuAboveOverlay()),i}_setAriaAttributes(){this._overlayContentId="dx-".concat(new Pi.Z),this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||(0,b.Z)(at.Z.getDocument())}_getContextMenuPosition(){return(0,B.l)({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(e){var t=this._getContextMenuPosition(),i=this._isInitialOptionValue("position"),a=this._createActionByOption("onPositioning");e&&e.preventDefault&&i&&(t.of=e);var n={position:t,event:e};return a(n),n.cancel?t=null:n.event&&(n.event.cancel=!0,e.preventDefault()),t}_refresh(){if((0,Je.Ym)())if(this._overlay){var e=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",e)}else super._refresh();else super._refresh()}_hide(){var e;return this._overlay&&(e=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),e||(new X.BH).reject().promise()}toggle(e){var t=this.option("visible");return this._renderVisibility(e=void 0===e?!t:e)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}(0,Rt.Z)("dxContextMenu",Em);const Im=Em;var W2={columnHeadersView:"header",rowsView:"content",footerView:"footer",headerPanel:"headerPanel"},K2=["columnHeadersView","rowsView","footerView","headerPanel"],U2={defaultOptions:()=>({onContextMenuPreparing:null}),controllers:{contextMenu:class $2 extends Vt.ViewController{init(){this.createAction("onContextMenuPreparing")}getContextMenuItems(e){if(!e)return!1;var a,n,s,o,t=this,i=(0,b.Z)(e.target);return(0,Y.S6)(K2,function(){var l,d,u=t.getView(this);if((a=u&&u.element())&&(a.is(i)||a.find(i).length)){s=i.closest(".dx-row > td, .dx-row > tr"),n=s.parent();var c=u.getRowIndex(n),f=s[0]&&s[0].cellIndex,p=n.data("options"),_={event:e,targetElement:(0,lt.u)(i),target:W2[this],rowIndex:c,row:u._getRows()[c],columnIndex:f,column:null===(d=null===(l=p?.cells)||void 0===l?void 0:l[f])||void 0===d?void 0:d.column};if(_.items=u.getContextMenuItems&&u.getContextMenuItems(_),t.executeAction("onContextMenuPreparing",_),t._contextMenuPrepared(_),o=_.items)return!1}}),o}_contextMenuPrepared(e){}}},views:{contextMenuView:class G2 extends Vt.View{init(){super.init(),this._contextMenuController=this.getController("contextMenu")}_renderCore(){var e=this.element().addClass("dx-context-menu");this.setAria("role","presentation",e),this._createComponent(e,Im,{onPositioning:t=>{var{event:i}=t,a=t.component,n=this._contextMenuController.getContextMenuItems(i);n?(a.option("items",n),i.stopPropagation()):t.cancel=!0},onItemClick(t){var i,a;null===(a=null===(i=t.itemData)||void 0===i?void 0:i.onItemClick)||void 0===a||a.call(i,t)},cssClass:this.getWidgetContainerClass(),target:this.component.$element()})}}}};He.registerModule("contextMenu",U2);var gl="dx-error-row",Am="dx-error-message",J2={defaultOptions:()=>({errorRowEnabled:!0}),controllers:{errorHandling:class Y2 extends Vt.ViewController{init(){this._resizingController=this.getController("resizing"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView")}_createErrorRow(e,t){var i,a,n=this._renderErrorMessage(e);return t?(i=(0,b.Z)("<tr>").attr("role","row").addClass(gl),a=(0,b.Z)("<div>").addClass("dx-closebutton").addClass(this.addWidgetPrefix("action")),z.Z.on(a,Ft.u,this.createAction(s=>{var o,l,u,d=s.event,c=(0,b.Z)(d.currentTarget).closest(".".concat(gl)).index();d.stopPropagation(),(0,Y.S6)(t,(f,p)=>{u=(0,b.Z)(p).children("tbody").children("tr").eq(c),this.removeErrorRow(u)}),null===(l=null===(o=this._resizingController)||void 0===o?void 0:o.fireContentReadyAction)||void 0===l||l.call(o)})),(0,b.Z)("<td>").attr({colSpan:this._columnsController.getVisibleColumns().length,role:"gridcell"}).prepend(a).append(n).appendTo(i),i):n}_renderErrorMessage(e){var t=e.url?e.message.replace(e.url,""):e.message||e,i=(0,b.Z)("<div>").attr("role","alert").attr("aria-roledescription",ae.Z.format("dxDataGrid-ariaError")).addClass(Am).text(t);return e.url&&(0,b.Z)("<a>").attr("href",e.url).text(e.url).appendTo(i),i}renderErrorRow(e,t,i){var a,n,o,l,s=this;if(i)return i.find(".".concat(Am)).remove(),o=s._createErrorRow(e),i.prepend(o),o;var d=t>=0||!s._columnHeadersView.isVisible()?s._rowsView:s._columnHeadersView,u=d.getTableElements();return(0,Y.S6)(u,(c,f)=>{if(o=s._createErrorRow(e,u),l=l||o,t>=0){var p=d._getRowElements((0,b.Z)(f)).eq(t);s.removeErrorRow(p.next()),o.insertAfter(p)}else{var _=(0,b.Z)(f).children("tbody"),w=_.children("tr");s._columnHeadersView.isVisible()?(s.removeErrorRow(w.last()),(0,b.Z)(f).append(o)):(s.removeErrorRow(w.first()),_.first().prepend(o))}}),null===(n=null===(a=this._resizingController)||void 0===a?void 0:a.fireContentReadyAction)||void 0===n||n.call(a),l}removeErrorRow(e){if(!e){var t=this._columnHeadersView&&this._columnHeadersView.element();if(!(e=t&&t.find(".".concat(gl)))||!e.length){var i=this._rowsView.element();e=i&&i.find(".".concat(gl))}}e&&e.hasClass(gl)&&e.remove()}optionChanged(e){"errorRowEnabled"===e.name?e.handled=!0:super.optionChanged(e)}}},extenders:{controllers:{data:r=>class extends r{init(){super.init(),this.dataErrorOccurred.add((e,t)=>{this.option("errorRowEnabled")&&this._errorHandlingController.renderErrorRow(e,void 0,t)}),this.changed.add(e=>{var t,i;e&&"loadError"===e.changeType||this._editingController&&!this._editingController.hasChanges()&&(null===(i=null===(t=this._errorHandlingController)||void 0===t?void 0:t.removeErrorRow)||void 0===i||i.call(t))})}}}}};He.registerModule("errorHandling",J2);var Tm="borders",Dm="dx-gridbase-container",iu="adaptiveHidden",qc=["columnsSeparatorView","blockSeparatorView","trackerView","headerPanel","columnHeadersView","rowsView","footerView","columnChooserView","filterPanelView","pagerView","draggingHeaderView","contextMenuView","errorView","headerFilterView","filterBuilderView"],_l=function(r){return(0,C.HD)(r)&&r.endsWith("%")},Om=function(r,e){var t=r._rowsView.contentWidth();return t-r._getTotalWidth(e,t)},lT={defaultOptions:()=>({showBorders:!1,renderAsync:!1}),controllers:{resizing:class nT extends Vt.ViewController{init(){this._prevContentMinHeight=null,this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._columnHeadersView=this.getView("columnHeadersView"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._editorFactoryController=this.getController("editorFactory"),this._footerView=this.getView("footerView"),this._rowsView=this.getView("rowsView")}_initPostRenderHandlers(){this._refreshSizesHandler||(this._refreshSizesHandler=e=>{var t=(new X.BH).resolve(null),i=e?.changeType,a=e?.isDelayed,n=i&&"updateSelection"!==i&&"updateFocusedRow"!==i&&"pageIndex"!==i&&!a;this._dataController.changed.remove(this._refreshSizesHandler),this._checkSize()&&(t=this._refreshSizes(e)),n&&(0,X.gx)(t).done(()=>{this._setAriaLabel(),this.fireContentReadyAction()})},this._dataController.changed.add(()=>{this._dataController.changed.add(this._refreshSizesHandler)}))}_refreshSizes(e){var t,i=(new X.BH).resolve(null),a=e?.changeType,n=e?.isDelayed,s=this._dataController.items();if(e&&"refresh"!==a&&"prepend"!==a&&"append"!==a){if("update"===a){if(0===(null===(t=e.changeTypes)||void 0===t?void 0:t.length))return i;!(s.length>1||"insert"!==e.changeTypes[0])||0===s.length&&"remove"===e.changeTypes[0]||e.needUpdateDimensions?i=this.resize():(i=new X.BH,this._waitAsyncTemplates().done(()=>{(0,le.Su)(()=>(0,le.g0)(()=>(0,le.Su)(()=>{this._setScrollerSpacing(),this._rowsView.resize(),i.resolve()})))}).fail(i.reject))}}else n||(i=this.resize());return i}fireContentReadyAction(){this.component._fireContentReadyAction()}_getWidgetAriaLabel(){return"dxDataGrid-ariaDataGrid"}_setAriaLabel(){var e=Math.max(0,this._dataController.totalItemsCount());this.component.setAria("label",ae.Z.format(this._getWidgetAriaLabel(),e,this.component.columnCount()),this.component.$element().children(".".concat(Dm)))}_getBestFitWidths(){var e,t=this._rowsView,i=this._columnHeadersView,a=t.getColumnWidths();if(!a?.length){var n=i.getTableElement();i.setTableElement(null===(e=t.getTableElement())||void 0===e?void 0:e.children(".dx-header")),a=i.getColumnWidths(),i.setTableElement(n)}return a}_setVisibleWidths(e,t){var i=this._columnsController;i.beginUpdate(),(0,Y.S6)(e,(a,n)=>{var s=i.getColumnId(n);i.columnOption(s,"visibleWidth",t[a])}),i.endUpdate()}_toggleBestFitModeForView(e,t,i){if(e&&e.isVisible()){var a=this._rowsView.getTableElements(),n=e.getTableElements();(0,Y.S6)(a,(s,o)=>{var l,d=(0,b.Z)(o),u=n.eq(s);u&&u.length&&((l=i?u.children("tbody").appendTo(d):d.children(".".concat(t)).appendTo(u)).toggleClass(t,i),l.toggleClass(this.addWidgetPrefix("best-fit"),i))})}}_toggleBestFitMode(e){var t=this._rowsView.getTableElement(),i=this._rowsView.getTableElements().eq(1);t&&(t.css("tableLayout",e?"auto":"fixed"),t.children("colgroup").css("display",e?"none":""),(0,Y.S6)(i.find("tr.dx-group-row"),(a,n)=>{(0,b.Z)(n).css("display",e?"none":"")}),i.toggleClass(this.addWidgetPrefix("table-fixed"),!e),this._toggleBestFitModeForView(this._columnHeadersView,"dx-header",e),this._toggleBestFitModeForView(this._footerView,"dx-footer",e),this._needStretch()&&(t.get(0).style.width=e?"auto":""))}_toggleContentMinHeight(e){var t=this._rowsView.getScrollable(),i=this._rowsView._findContentElement();!1===t?.option("useNative")&&(!0===e&&(this._prevContentMinHeight=i.get(0).style.minHeight),(0,C.$K)(this._prevContentMinHeight)&&i.css({minHeight:e?Ae.getContentHeightLimit(ni.Z):this._prevContentMinHeight}))}_synchronizeColumns(){var l,c,f,e=this._columnsController,t=e.getVisibleColumns(),i=this.option("columnAutoWidth"),a=this.option("wordWrapEnabled"),n=t.some(_=>!(0,C.$K)(_.width)),s=this._needBestFit(),o=!1,d=!1,u=[];!s&&(0,Y.S6)(t,(_,w)=>{if("auto"===w.width)return s=!0,!1}),(0,Y.S6)(t,(_,w)=>{if(w.minWidth)return o=!0,!1}),this._setVisibleWidths(t,[]);var p=this.component.$element();s&&(c=at.Z.getActiveElement(p.get(0)),f=Ae.getSelectionRange(c),this._toggleBestFitMode(!0),l=!0),this._toggleContentMinHeight(a),p&&p.get(0)&&this._maxWidth&&(delete this._maxWidth,p[0].style.maxWidth=""),(0,le.Su)(()=>{var w;s?(u=this._getBestFitWidths(),(0,Y.S6)(t,(w,S)=>{var x=e.getColumnId(S);e.columnOption(x,"bestFitWidth",u[w],!0)})):o&&(u=this._getBestFitWidths()),(0,Y.S6)(t,function(w){var{width:S}=this;"auto"!==S&&((0,C.$K)(S)?u[w]=(0,C.kE)(S)||function(r){return(0,C.HD)(r)&&r.endsWith("px")}(S)?parseFloat(S):S:i||(u[w]=void 0))}),l&&(this._toggleBestFitMode(!1),l=!1,c&&c!==at.Z.getActiveElement())&&((0,li.l)(c).bottom<0||function(r,e){(function H1(r,e){zd=!0,r.focus({preventScroll:e}),zd=!1})(r,!0),Ae.setSelectionRange(r,e)}(c,f)),d=this._correctColumnWidths(u,t),i&&((0,Y.S6)(t,(S,x)=>{"groupExpand"===x.type&&(w=u[S])}),(0,Y.S6)(t,(S,x)=>{"groupExpand"===x.type&&w&&(u[S]=w)}),this._needStretch()&&this._processStretch(u,t)),(0,le.g0)(()=>{(s||d||n)&&this._setVisibleWidths(t,u),a&&this._toggleContentMinHeight(!1)})})}_needBestFit(){return this.option("columnAutoWidth")}_needStretch(){return this._columnsController.getVisibleColumns().some(e=>"auto"===e.width&&!e.command)}_getAverageColumnsWidth(e){return Om(this,e)/e.filter(a=>void 0===a).length}_correctColumnWidths(e,t){var a,i=this,n=!1,s=!1,o=!1,l=i.component.$element(),d=i._hasWidth,u=function(){var x=a,E=t[x],V=e[x]===iu,N=e[x],{minWidth:j}=E;if(j)if(void 0===N){var Q=i._getAverageColumnsWidth(e);N=Q}else if(_l(N)){var q=function(r,e,t,i){return Om(r,i.map((a,n)=>n===e?t:a))}(i,x,j,e);q<0&&(N=-1)}var k=i._getRealColumnWidth(x,e.map((se,he)=>x===he?N:se));j&&!V&&k<j&&(e[x]=j,o=!0,a=-1),(0,C.$K)(E.width)||(s=!0),_l(E.width)&&(n=!0)};for(a=0;a<t.length;a++)u();if(!s&&e.length){var c=i._rowsView.element(),f=i._rowsView.contentWidth(),p=i._rowsView.getScrollbarWidth(),_=i._getTotalWidth(e,f);if(_<f){var w=Ae.getLastResizableColumnIndex(t,e);if(w>=0&&(e[w]="auto",o=!0,!1===d&&!n)){var S=i.option("showBorders")?Math.ceil((0,we.Y_)(c)-(0,we.Xt)(c)):0;i._maxWidth=_+p+S,l.css("maxWidth",i._maxWidth)}}}return o}_processStretch(e,t){var i=this._rowsView.contentWidth(),a=this._getTotalWidth(e,i),n={length:0};if(e.length){(0,Y.S6)(t,function(u){(this.width||e[u]===iu)&&(n[u]=!0,n.length++)});var s=i-a,o=Math.floor(s/(e.length-n.length)),l=s-o*(e.length-n.length);if(s>=0)for(var d=0;d<e.length;d++)n[d]||(e[d]+=o,l>0&&(l<1?(e[d]+=l,l=0):(e[d]++,l--)))}}_getRealColumnWidth(e,t,i){var a=1,n=t[e];if(!_l(n))return parseFloat(n);var s=t.reduce((u,c,f)=>_l(c)?u+parseFloat(c):u,0),o=t.reduce((u,c)=>!c||c===iu||_l(c)?u:u+parseFloat(c),0),l=(i=i||this._rowsView.contentWidth())-o,d=s*i/100;return o>0&&d+o>=i&&(a=d>l?l/d:1),parseFloat(n)*i*a/100}_getTotalWidth(e,t){for(var i=0,a=0;a<e.length;a++){var n=e[a];n&&n!==iu&&(i+=this._getRealColumnWidth(a,e,t))}return Math.ceil(i)}_getGroupElement(){return this.component.$element().children().get(0)}updateSize(e){var t=(0,b.Z)(e),i=this.addWidgetPrefix("important-margin");if(void 0===this._hasHeight&&t&&t.is(":visible")&&(0,we.dz)(t)){var a=t.children(".".concat(this.getWidgetContainerClass()));a.length&&a.detach(),this._hasHeight=!!(0,we.Cr)(t);var n=(0,we.dz)(t);t.addClass(i),this._hasWidth=(0,we.dz)(t)===n,t.removeClass(i),a.length&&a.appendTo(t)}}publicMethods(){return["resize","updateDimensions"]}_waitAsyncTemplates(){var e,t,i;return(0,X.gx)(null===(e=this._columnHeadersView)||void 0===e?void 0:e.waitAsyncTemplates(!0),null===(t=this._rowsView)||void 0===t?void 0:t.waitAsyncTemplates(!0),null===(i=this._footerView)||void 0===i?void 0:i.waitAsyncTemplates(!0))}resize(){if(!this.component._requireResize){var e=new X.BH;return this._waitAsyncTemplates().done(()=>{(0,X.gx)(this.updateDimensions()).done(e.resolve).fail(e.reject)}).fail(e.reject),e.promise()}}updateDimensions(e){var t=this;if(t._initPostRenderHandlers(),t._checkSize(e)){var i=t._resizeDeferred,a=t._resizeDeferred=new X.BH;return(0,X.gx)(i).always(()=>{(0,le.g0)(()=>{t._dataController.isLoaded()&&t._synchronizeColumns(),t._resetGroupElementHeight(),(0,le.Su)(()=>{(0,le.g0)(()=>{(0,le.Su)(()=>{t._updateDimensionsCore()})})})}).done(a.resolve).fail(a.reject)}),a.promise()}}_resetGroupElementHeight(){var e=this._getGroupElement(),t=this._rowsView.getScrollable();e&&e.style.height&&(!t||!t.scrollTop())&&(e.style.height="")}_checkSize(e){var t=this.component.$element(),i=t.is(":visible"),a=this._lastWidth!==(0,we.dz)(t)||this._lastHeight!==(0,we.Cr)(t)||this._devicePixelRatio!==(0,Je.Jj)().devicePixelRatio;return i&&(!e||a)}_setScrollerSpacingCore(){var e=this,t=e._rowsView.getScrollbarWidth(),i=e._rowsView.getScrollbarWidth(!0);(0,le.g0)(()=>{e._columnHeadersView&&e._columnHeadersView.setScrollerSpacing(t),e._footerView&&e._footerView.setScrollerSpacing(t),e._rowsView.setScrollerSpacing(t,i)})}_setScrollerSpacing(){var e=this._rowsView.getScrollable(),t=!0===this.option("scrolling.useNative");!e||t?(0,le.g0)(()=>{(0,le.Su)(()=>{this._setScrollerSpacingCore()})}):this._setScrollerSpacingCore()}_setAriaOwns(){var e,t,i,a=null===(e=this._columnHeadersView)||void 0===e?void 0:e.getTableElement(),n=null===(t=this._footerView)||void 0===t?void 0:t.getTableElement();null===(i=this._rowsView)||void 0===i||i.setAriaOwns(a?.attr("id"),n?.attr("id"))}_updateDimensionsCore(){var e,t=this,i=t._dataController,a=t._rowsView,n=t.component.$element(),s=this._getGroupElement(),o=(0,we.Cr)(n),l=null!==(e=t.option("height"))&&void 0!==e?e:n.get(0).style.height,d=!!l&&"auto"!==l,u=parseInt(n.css("maxHeight")),c=u&&o>=u,f=s&&s.scrollHeight===s.offsetHeight;t.updateSize(n),(0,le.g0)(()=>{a.hasHeight(t._hasHeight||!!u||d),this._setAriaOwns(),c&&!f&&(0,b.Z)(s).css("height",u),i.isLoaded()?(0,le.Su)(()=>{t._updateLastSizes(n),t._setScrollerSpacing(),(0,Y.S6)(qc,(_,w)=>{var S=t.getView(w);S&&S.resize()}),this._editorFactoryController&&this._editorFactoryController.resize()}):a.setLoading(i.isLoading())})}_updateLastSizes(e){this._lastWidth=(0,we.dz)(e),this._lastHeight=(0,we.Cr)(e),this._devicePixelRatio=(0,Je.Jj)().devicePixelRatio}optionChanged(e){switch(e.name){case"width":case"height":this.component._renderDimensions(),this.resize();case"renderAsync":return void(e.handled=!0);default:super.optionChanged(e)}}},synchronizeScrolling:class sT extends Vt.ViewController{_scrollChangedHandler(e,t,i){for(var a=0;a<e.length;a++)e[a]&&e[a].name!==i&&e[a].scrollTo({left:t.left,top:t.top})}init(){for(var e=[this.getView("columnHeadersView"),this.getView("footerView"),this.getView("rowsView")],t=0;t<e.length;t++){var i=e[t];i&&i.scrollChanged.add(this._scrollChangedHandler.bind(this,e))}}}},views:{gridView:class oT extends Vt.View{_endUpdateCore(){this.component._requireResize&&(this.component._requireResize=!1,this._resizingController.resize())}init(){this._resizingController=this.getController("resizing"),this._dataController=this.getController("data")}getView(e){return this.component._views[e]}element(){return this._groupElement}optionChanged(e){(0,C.$K)(this._groupElement)&&"showBorders"===e.name?(this._groupElement.toggleClass(this.addWidgetPrefix(Tm),!!e.value),e.handled=!0):super.optionChanged(e)}_renderViews(e){var t=this;(0,Y.S6)(qc,(i,a)=>{var n=t.getView(a);n&&n.render(e)})}_getTableRoleName(){return"group"}render(e){var t=!this._groupElement,i=this._groupElement||(0,b.Z)("<div>").addClass(this.getWidgetContainerClass());i.addClass(Dm),i.toggleClass(this.addWidgetPrefix(Tm),!!this.option("showBorders")),this.setAria("role","presentation",e),this.component.setAria("role",this._getTableRoleName(),i),this._rootElement=e||this._rootElement,t&&(this._groupElement=i,(0,Je.Ym)()&&this._resizingController.updateSize(e),i.appendTo(e)),this._renderViews(i)}update(){this._rootElement&&this._groupElement&&(this._resizingController.resize(),this._dataController.isLoaded()&&this._resizingController.fireContentReadyAction())}}},VIEW_NAMES:qc};He.registerModule("gridView",lT);var dT=ve(3502),Rm="toolbar-button",Lm=["addRowButton","applyFilterButton","columnChooserButton","exportButton","groupPanel","revertButton","saveButton","searchPanel"],Pm={defaultOptions:()=>({}),views:{headerPanel:class cT extends dl{init(){super.init(),this._editingController=this.getController("editing"),this._headerFilterController=this.getController("headerFilter"),this.createAction("onToolbarPreparing",{excludeValidators:["disabled","readOnly"]})}_getToolbarItems(){return[]}_getButtonContainer(){return(0,b.Z)("<div>").addClass(this.addWidgetPrefix(Rm))}_getToolbarButtonClass(e){var t=e?" ".concat(e):"";return this.addWidgetPrefix(Rm)+t}_getToolbarOptions(){var e=this.option("toolbar"),t={toolbarOptions:{items:this._getToolbarItems(),visible:e?.visible,disabled:e?.disabled,onItemRendered(n){var s=n.itemData.onItemRendered;s&&s(n)}}},i=e?.items;if(t.toolbarOptions.items=this._normalizeToolbarItems(t.toolbarOptions.items,i),this.executeAction("onToolbarPreparing",t),t.toolbarOptions&&!(0,C.$K)(t.toolbarOptions.visible)){var a=t.toolbarOptions.items;t.toolbarOptions.visible=!!a?.length}return t.toolbarOptions}_normalizeToolbarItems(e,t){e.forEach(o=>{if(!Lm.includes(o.name))throw new Error("Default toolbar item '".concat(o.name,"' is not added to DEFAULT_TOOLBAR_ITEM_NAMES"))});var i={location:"after"},a=Array.isArray(t);if(!(0,C.$K)(t))return e;a||(t=[t]);var n={};e.forEach(o=>{n[o.name]=o});var s=t.map(o=>((0,C.HD)(o)&&(o={name:o}),(0,C.$K)(o.name)&&((0,C.$K)(n[o.name])?o=(0,B.l)(!0,{},n[o.name],o):Lm.includes(o.name)&&(o=(0,ye.Z)((0,ye.Z)({},o),{visible:!1}))),(0,B.l)(!0,{},i,o)));return a?s:s[0]}_renderCore(){if(this._toolbar)this._toolbar.option(this._toolbarOptions);else{var e=this.element();e.addClass(this.addWidgetPrefix("header-panel"));var t=ae.Z.format(this.component.NAME+"-ariaToolbar"),i=(0,b.Z)("<div>").attr("aria-label",t).appendTo(e);this._toolbar=this._createComponent(i,dT.Z,this._toolbarOptions)}}_columnOptionChanged(){}_handleDataChanged(){this._requireReady&&this.render()}_isDisabledDefinedByUser(e){var t,i=null===(t=this.option("toolbar"))||void 0===t?void 0:t.items,a=i?.find(n=>n?.name===e);return(0,C.$K)(a?.disabled)}render(){this._toolbarOptions=this._getToolbarOptions(),super.render.apply(this,arguments)}setToolbarItemDisabled(e,t){var i,a=this._toolbar,n=this._isDisabledDefinedByUser(e);if(a&&!n){var o=(null!==(i=a.option("items"))&&void 0!==i?i:[]).findIndex(d=>d.name===e);if(!(o<0)){var l=a.option("items[".concat(o,"]"));a.option("items[".concat(o,"].disabled"),t),l.options&&a.option("items[".concat(o,"].options.disabled"),t)}}}updateToolbarDimensions(){var e;null===(e=this._toolbar)||void 0===e||e.updateDimensions()}getHeaderPanel(){return this.element()}getHeight(){return this.getElementHeight()}optionChanged(e){if("onToolbarPreparing"===e.name&&(this._invalidate(),e.handled=!0),"toolbar"===e.name&&(e.handled=!0,this._toolbar)){var t=(0,Ot.Zw)(e.fullName),i=e.fullName.replace(/^toolbar\./,"");if(1===t.length){var a=this._getToolbarOptions();this._toolbar.option(a)}else if("items"===t[1])if(2===t.length){var n=this._getToolbarOptions();this._toolbar.option("items",n.items)}else if(3===t.length){var s=this._normalizeToolbarItems(this._getToolbarItems(),e.value);this._toolbar.option(i,s)}else t.length>=4&&this._toolbar.option(i,e.value);else this._toolbar.option(i,e.value)}super.optionChanged(e)}isVisible(){return!(!this._toolbarOptions||!this._toolbarOptions.visible)}allowDragging(){}hasGroupedColumns(){}}},extenders:{controllers:{resizing:r=>class extends r{_updateDimensionsCore(){super._updateDimensionsCore.apply(this,arguments),this.getView("headerPanel").updateToolbarDimensions()}}}}};He.registerModule("headerPanel",Pm);var fT=ve(3657),Lt=ve(7484),Dr=ve(9386);He.registerModulesOrder(["stateStoring","columns","selection","editorFactory","columnChooser","grouping","editing","editingRowBased","editingFormBased","editingCellBased","masterDetail","validating","adaptivity","data","virtualScrolling","columnHeaders","filterRow","headerPanel","headerFilter","sorting","search","rows","pager","columnsResizingReordering","contextMenu","keyboardNavigation","errorHandling","summary","columnFixing","export","gridView"]);var Yc=Dr.default.inherit({_activeStateUnit:".dx-row",_getDefaultOptions(){var r=this.callBase();return(0,Y.S6)(He.modules,function(){(0,C.mf)(this.defaultOptions)&&(0,B.l)(!0,r,this.defaultOptions())}),r},_setDeprecatedOptions(){this.callBase(),(0,B.l)(this._deprecatedOptions,{useKeyboard:{since:"19.2",alias:"keyboardNavigation.enabled"},rowTemplate:{since:"21.2",message:'Use the "dataRowTemplate" option instead'},"columnChooser.allowSearch":{since:"23.1",message:'Use the "columnChooser.search.enabled" option instead'},"columnChooser.searchTimeout":{since:"23.1",message:'Use the "columnChooser.search.timeout" option instead'}})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{showRowLines:!0}},{device:()=>(0,Lt.yj)(),options:{showRowLines:!0,showColumnLines:!1,headerFilter:{height:315},editing:{useIcons:!0},selection:{showCheckBoxesMode:"always"}}},{device:()=>ni.Z.webkit,options:{loadingTimeout:30,loadPanel:{animation:{show:{easing:"cubic-bezier(1, 0, 1, 0)",duration:500,from:{opacity:0},to:{opacity:1}}}}}},{device:r=>"desktop"!==r.deviceType,options:{grouping:{expandMode:"rowClick"}}}])},_init(){this.callBase(),Ae.logHeaderFilterDeprecatedWarningIfNeed(this),He.processModules(this,He),He.callModuleItemsMethod(this,"init")},_clean:le.ZT,_optionChanged(r){He.callModuleItemsMethod(this,"optionChanged",[r]),r.handled||this.callBase(r)},_dimensionChanged(){this.updateDimensions(!0)},_visibilityChanged(r){r&&this.updateDimensions()},_initMarkup(){this.callBase.apply(this,arguments),this.getView("gridView").render(this.$element())},_renderContentImpl(){this.getView("gridView").update()},_renderContent(){var r=this;(0,le.g0)(()=>{r._renderContentImpl()})},_getTemplate(r){var e=r;return(0,C.HD)(e)&&e.startsWith("#")&&(e=(0,b.Z)(r),fT.k.warn("Specifying grid templates with the jQuery selector name is now deprecated. Use the DOM Node or the jQuery object that references this selector instead.")),this.callBase(e)},_dispose(){this.callBase(),He.callModuleItemsMethod(this,"dispose")},isReady(){return this.getController("data").isReady()},beginUpdate(){this.callBase(),He.callModuleItemsMethod(this,"beginUpdate")},endUpdate(){He.callModuleItemsMethod(this,"endUpdate"),this.callBase()},getController(r){return this._controllers[r]},getView(r){return this._views[r]},focus(r){this.getController("keyboardNavigation").focus(r)}});Yc.registerModule=He.registerModule.bind(He),(0,Rt.Z)("dxDataGrid",Yc);const _T=Yc;var mT=ve(8589),CT=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,wT=function r(e){e&&(0,Y.S6)(e,(t,i)=>{if((0,C.PO)(i)||Array.isArray(i))r(i);else if("string"==typeof i){var a=CT.exec(i);a&&(e[t]=new Date(Date.UTC(+a[1],+a[2]-1,+a[3],+a[4],+a[5],+a[6])))}})},Fm=function(r){var e="sessionStorage"===r.type?(0,mT.y)():(0,Je.Jj)().localStorage;if(!e)throw new Error("E1007");return e},Vm=function(r){return(0,C.$K)(r.storageKey)?r.storageKey:"storage"};var OT={defaultOptions:()=>({stateStoring:{enabled:!1,storageKey:null,type:"localStorage",customLoad:null,customSave:null,savingTimeout:2e3}}),controllers:{stateStoring:class Nm extends Vt.ViewController{get _dataController(){return this.getController("data")}get _exportController(){return this.getController("export")}get _columnsController(){return this.getController("columns")}init(){return this._state={},this._isLoaded=!1,this._isLoading=!1,this._windowUnloadHandler=()=>{void 0!==this._savingTimeoutID&&this._saveState(this.state())},z.Z.on((0,Je.Jj)(),"unload",this._windowUnloadHandler),this}optionChanged(e){"stateStoring"===e.name?(this.isEnabled()&&!this.isLoading()&&this.load(),e.handled=!0):super.optionChanged(e)}dispose(){clearTimeout(this._savingTimeoutID),z.Z.off((0,Je.Jj)(),"unload",this._windowUnloadHandler)}_loadState(){var e=this.option("stateStoring");if("custom"===e.type)return e.customLoad&&e.customLoad();try{return JSON.parse(Fm(e).getItem(Vm(e)))}catch(t){At.Z.log("W1022","State storing",t.message)}}_saveState(e){var t=this.option("stateStoring");if("custom"!==t.type)try{Fm(t).setItem(Vm(t),JSON.stringify(e))}catch(i){At.Z.log(i.message)}else t.customSave&&t.customSave(e)}publicMethods(){return["state"]}isEnabled(){return this.option("stateStoring.enabled")}isLoaded(){return this._isLoaded}isLoading(){return this._isLoading}load(){this._isLoading=!0;var e=(0,X.p4)(this._loadState());return e.always(()=>{this._isLoaded=!0,this._isLoading=!1}).done(t=>{null!==t&&!(0,C.Qr)(t)&&this.state(t)}),e}state(e){if(!arguments.length)return(0,B.l)(!0,{},this._state);this._state=(0,B.l)({},e),wT(this._state)}save(){var e=this;clearTimeout(e._savingTimeoutID),e._savingTimeoutID=setTimeout(()=>{e._saveState(e.state()),e._savingTimeoutID=void 0},e.option("stateStoring.savingTimeout"))}}},extenders:{views:{rowsView:r=>class extends r{init(){super.init(),this._dataController.stateLoaded.add(()=>{if(this._dataController.isLoaded()&&!this._dataController.getDataSource()){this.setLoading(!1),this.renderNoDataText();var e=this.component.getView("columnHeadersView");e&&e.render(),this.component._fireContentReadyAction()}})}}},controllers:{stateStoring:r=>class extends r{init(){return super.init.apply(this,arguments),(r=>{var e=r.getController("columns"),t=r.getController("selection"),i=r.getController("export"),a=r.getController("data");e&&e.columnsChanged.add(()=>{r.updateState({columns:e.getUserState()})}),t&&t.selectionChanged.add(n=>{r.updateState({selectedRowKeys:n.selectedRowKeys,selectionFilter:n.selectionFilter})}),a&&(r._initialPageSize=r.option("paging.pageSize"),r._initialFilterValue=r.option("filterValue"),a.changed.add(()=>{var n=(r=>{var e=r.getView("pagerView"),t=r.getController("data"),i={allowedPageSizes:e?e.getPageSizes():void 0,filterPanel:{filterEnabled:r.option("filterPanel.filterEnabled")},filterValue:r.option("filterValue"),focusedRowKey:r.option("focusedRowEnabled")?r.option("focusedRowKey"):void 0};return(0,B.l)(i,t.getUserState())})(r);r.updateState(n)})),i&&i.selectionOnlyChanged.add(()=>{r.updateState({exportSelectionOnly:i.selectionOnly()})})})(this),this}isLoading(){return super.isLoading()||this._dataController.isStateLoading()}state(e){var t=super.state.apply(this,arguments);return void 0!==e&&this.applyState((0,B.l)(!0,{},e)),t}updateState(e){if(this.isEnabled()){var t=this.state(),i=(0,B.l)({},t,e),a=(0,le.k3)(t),n=(0,le.k3)(i);(0,le.bY)(a,n)||(e=(0,B.l)(!0,{},e),(0,B.l)(this._state,e),this.save())}else(0,B.l)(this._state,e)}applyState(e){var t,{allowedPageSizes:i}=e,{searchText:a}=e,{selectedRowKeys:n}=e,{selectionFilter:s}=e,o=this.option("scrolling.mode"),l="virtual"===o||"infinite"===o,d=!0===this.option("pager.visible")&&this.option("pager.showPageSizeSelector"),u=null===(t=this.getView("rowsView"))||void 0===t?void 0:t.hasHeight();this.component.beginUpdate(),this._columnsController&&this._columnsController.setUserState(e.columns),this._exportController&&this._exportController.selectionOnly(e.exportSelectionOnly),this.option("selection.deferred")||this.option("selectedRowKeys",n||[]),this.option("selectionFilter",s),i&&"auto"===this.option("pager.allowedPageSizes")&&(this.option("pager").allowedPageSizes=i),this.option("focusedRowEnabled")&&(this.option("focusedRowIndex",-1),this.option("focusedRowKey",e.focusedRowKey||null)),this.component.endUpdate(),this.option("searchPanel.text",a||""),this.option("filterValue",((r,e)=>{var t=r.getController("filterSync"),i=r.getController("columns");return t?e.columns||void 0!==e.filterValue?e.filterValue||t.getFilterValueFromColumns(e.columns):r._initialFilterValue||t.getFilterValueFromColumns(i.getColumns()):null})(this,e)),this.option("filterPanel.filterEnabled",!e.filterPanel||e.filterPanel.filterEnabled),this.option("paging.pageIndex",(!l||u)&&e.pageIndex||0),this.option("paging.pageSize",l&&!d||!(0,C.$K)(e.pageSize)?this._initialPageSize:e.pageSize),this._dataController&&this._dataController.reset()}},columns:r=>class extends r{_shouldReturnVisibleColumns(){return super._shouldReturnVisibleColumns.apply(this,arguments)&&(!this._stateStoringController.isEnabled()||this._stateStoringController.isLoaded())}},data:r=>class extends r{dispose(){clearTimeout(this._restoreStateTimeoutID),super.dispose()}callbackNames(){return super.callbackNames().concat(["stateLoaded"])}_refreshDataSource(){if(this._stateStoringController.isEnabled()&&!this._stateStoringController.isLoaded()){clearTimeout(this._restoreStateTimeoutID);var e=new X.BH;return this._restoreStateTimeoutID=setTimeout(()=>{this._stateStoringController.load().always(()=>{this._restoreStateTimeoutID=null}).done(()=>{super._refreshDataSource(),this.stateLoaded.fire(),e.resolve()}).fail(t=>{this.stateLoaded.fire(),this._handleLoadError(t||"Unknown error"),e.reject()})}),e.promise()}this.isStateLoading()||super._refreshDataSource()}isLoading(){return super.isLoading()||this._stateStoringController.isLoading()}isStateLoading(){return(0,C.$K)(this._restoreStateTimeoutID)}isLoaded(){return super.isLoaded()&&!this.isStateLoading()}},selection:r=>class extends r{_fireSelectionChanged(e){var t=this.option("selection.deferred");this._stateStoringController.isLoading()&&t||super._fireSelectionChanged.apply(this,arguments)}}}}};He.registerModule("stateStoring",OT);var RT=ve(5162),Bm="dx-editor-cell",km="dx-selection",is="dx-select-checkbox",Mm="dx-command-select",Hm="dx-data-row",ga="selection.showCheckBoxesMode",ml="selection.mode",Zm=function(r,e){var t=r.getView("rowsView"),i=r.getController("selection"),a=(0,b.Z)(e.target).closest(".".concat(Hm)),n=t.getRowIndex(a);n<0||("onLongTap"===r.option(ga)?i.isSelectionWithCheckboxes()?i.stopSelectionWithCheckboxes():i.startSelectionWithCheckboxes():("onClick"===r.option(ga)&&i.startSelectionWithCheckboxes(),"always"!==r.option(ga)&&i.changeItemSelection(n,{control:!0})))},NT=(r,e)=>{var{component:t}=e,i=t.getView("rowsView");t.option("renderAsync")&&!t.option("selection.deferred")&&(e.value=t.isRowSelected(e.row.key)),i.renderSelectCheckBoxContainer((0,b.Z)(r),e)},BT=(r,e)=>{var{column:t}=e,i=(0,b.Z)(r),a=e.component.getView("columnHeadersView");i.addClass(Bm),a._renderSelectAllCheckBox(i,t),a._attachSelectAllCheckBoxClickEvent(i)},WT={defaultOptions:()=>({selection:{mode:"none",showCheckBoxesMode:"onClick",allowSelectAll:!0,selectAllMode:"allPages",deferred:!1,maxFilterLengthInRequest:1500,alwaysSelectByShift:!1},selectionFilter:[],selectedRowKeys:[]}),controllers:{selection:class kT extends Vt.Controller{init(){var e,{deferred:t,selectAllMode:i,mode:a}=null!==(e=this.option("selection"))&&void 0!==e?e:{};"infinite"===this.option("scrolling.mode")&&!t&&"multiple"===a&&"allPages"===i&&At.Z.log("W1018"),this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._stateStoringController=this.getController("stateStoring"),this._selectionMode=a,this._isSelectionWithCheckboxes=!1,this._selection=this._createSelection(),this._updateSelectColumn(),this.createAction("onSelectionChanged",{excludeValidators:["disabled","readOnly"]}),this._dataPushedHandler||(this._dataPushedHandler=this._handleDataPushed.bind(this),this._dataController.pushed.add(this._dataPushedHandler))}_handleDataPushed(e){this._deselectRemovedOnPush(e),this._updateSelectedOnPush(e)}_deselectRemovedOnPush(e){var t=this.option("selection.deferred"),i=e.filter(n=>"remove"===n.type).map(n=>n.key);if(t){var a=this._dataController.items().filter(n=>n.isSelected).map(n=>n.key);i=i.filter(n=>a.find(s=>(0,le.bY)(s,n)))}i.length&&this.deselectRows(i)}_updateSelectedOnPush(e){if(!this.option("selection.deferred")){var i=e.filter(n=>"update"===n.type),a=this.getSelectedRowsData();(0,Wr.ii)({keyInfo:this._selection.options,data:a,changes:i})}}_getSelectionConfig(){var e,t=this._dataController,i=this._columnsController,a=null!==(e=this.option("selection"))&&void 0!==e?e:{},{deferred:n}=a,s=this.option("scrolling.mode"),o="virtual"===s||"infinite"===s,l=this.option("selection.allowSelectAll"),d=this.option("scrolling.legacyMode");return{selectedKeys:this.option("selectedRowKeys"),mode:this._selectionMode,deferred:n,alwaysSelectByShift:a.alwaysSelectByShift,maxFilterLengthInRequest:a.maxFilterLengthInRequest,selectionFilter:this.option("selectionFilter"),ignoreDisabledItems:!0,isVirtualPaging:o,allowLoadByRange(){var u=i.getGroupColumns().length>0;return o&&!d&&!u&&l&&!n},key:()=>t?.key(),keyOf:u=>t?.keyOf(u),dataFields(){var u;return null===(u=t.dataSource())||void 0===u?void 0:u.select()},load(u){var c;return(null===(c=t.dataSource())||void 0===c?void 0:c.load(u))||(new X.BH).resolve([])},plainItems:u=>t.items(!0),isItemSelected:u=>u.selected,isSelectableItem:u=>"data"===u?.rowType&&!u.isNewRow,getItemData:u=>(0,C.$K)(u?.rowType)?u?.oldData||u?.data:u,filter:()=>t.getCombinedFilter(n),totalCount:()=>t.totalCount(),getLoadOptions(u,c,f){var p,_,{sort:w,filter:S}=null!==(_=null===(p=t.dataSource())||void 0===p?void 0:p.lastLoadOptions())&&void 0!==_?_:{},x=Math.min(u,c),E=Math.max(u,c);return(0,C.$K)(f)&&(x=Math.min(f,x),E=Math.max(f,E)),{skip:x,take:E-x+1,filter:S,sort:w}},onSelectionChanged:this._updateSelectedItems.bind(this)}}_updateSelectColumn(){var e=this._columnsController,t=this.isSelectColumnVisible();e.addCommandColumn({type:"selection",command:"select",visible:t,visibleIndex:-1,dataType:"boolean",alignment:"center",cssClass:Mm,width:"auto",cellTemplate:NT,headerCellTemplate:BT}),e.columnOption("command:select","visible",t)}_createSelection(){var e=this._getSelectionConfig();return new RT.Z(e)}_fireSelectionChanged(e){var t=this.option("selection.deferred")?{selectionFilter:this.option("selectionFilter")}:{selectedRowKeys:this.option("selectedRowKeys")};this.selectionChanged.fire(t),e&&this.executeAction("onSelectionChanged",e)}_updateCheckboxesState(e){var{isDeferredMode:t}=e,{selectionFilter:i}=e,{selectedItemKeys:a}=e,{removedItemKeys:n}=e;"onClick"===this.option(ga)&&((t?i&&function(r,e){var t=0,i=r._dataController.store(),a=i&&i.key(),n=Array.isArray(a);if(!e.length)return!1;if(n&&Array.isArray(e[0])&&"and"===e[1]){for(var s=0;s<e.length;s++)if(Array.isArray(e[s])){if(e[s][0]!==a[t]||"="!==e[s][1])return!0;t++}return!1}return a!==e[0]}(this,i):a.length>1)?this.startSelectionWithCheckboxes():(t?i&&!i.length:0===a.length&&n.length)&&this.stopSelectionWithCheckboxes())}_updateSelectedItems(e){var t,i=this.option("selection.deferred"),a=this._selection.selectionFilter(),n=this._dataController,s=n.items(!0),o=n.items();if(s){var l=this.isSelectionWithCheckboxes(),d=this.getChangedItemIndexes(s),u=this.getChangedItemIndexes(o);this._updateCheckboxesState({selectedItemKeys:e.selectedItemKeys,removedItemKeys:e.removedItemKeys,selectionFilter:a,isDeferredMode:i}),(d.length||l!==this.isSelectionWithCheckboxes())&&n.updateItems({changeType:"updateSelection",itemIndexes:u}),i?(this.option("selectionFilter",a),t={}):(e.addedItemKeys.length||e.removedItemKeys.length)&&(this._selectedItemsInternalChange=!0,this.option("selectedRowKeys",e.selectedItemKeys.slice(0)),this._selectedItemsInternalChange=!1,t={selectedRowsData:e.selectedItems.slice(0),selectedRowKeys:e.selectedItemKeys.slice(0),currentSelectedRowKeys:e.addedItemKeys.slice(0),currentDeselectedRowKeys:e.removedItemKeys.slice(0)}),this._fireSelectionChanged(t)}}getChangedItemIndexes(e){for(var t=[],i=this.option("selection.deferred"),a=0,{length:n}=e;a<n;a++){var s=e[a],o=this.isRowSelected(i?s.data:s.key);this._selection.isDataItem(s)&&s.isSelected!==o&&t.push(a)}return t}callbackNames(){return["selectionChanged"]}optionChanged(e){switch(super.optionChanged(e),e.name){case"selection":var t=this._selectionMode;if(this.init(),"selection.showCheckBoxesMode"!==e.fullName){var i=this._selectionMode,a=this.option("selectedRowKeys");t!==i&&("single"===i?a.length>1&&(a=[a[0]]):"multiple"!==i&&(a=[])),this.selectRows(a).always(()=>{this._fireSelectionChanged()})}this._columnsController.updateColumns(),e.handled=!0;break;case"selectionFilter":this._selection.selectionFilter(e.value),e.handled=!0;break;case"selectedRowKeys":var n=e.value||[];Array.isArray(n)&&!this._selectedItemsInternalChange&&(this.component.getDataSource()||!n.length)&&this.selectRows(n),e.handled=!0}}publicMethods(){return["selectRows","deselectRows","selectRowsByIndexes","getSelectedRowKeys","getSelectedRowsData","clearSelection","selectAll","deselectAll","startSelectionWithCheckboxes","stopSelectionWithCheckboxes","isRowSelected"]}isRowSelected(e){return this._selection.isItemSelected(e)}isSelectColumnVisible(){return"multiple"===this.option(ml)&&("always"===this.option(ga)||"onClick"===this.option(ga)||this._isSelectionWithCheckboxes)}_isOnePageSelectAll(){return"page"===this.option("selection.selectAllMode")}isSelectAll(){return this._selection.getSelectAllState(this._isOnePageSelectAll())}selectAll(){return"onClick"===this.option(ga)&&this.startSelectionWithCheckboxes(),this._selection.selectAll(this._isOnePageSelectAll())}deselectAll(){return this._selection.deselectAll(this._isOnePageSelectAll())}clearSelection(){return this.selectedItemKeys([])}refresh(){var e,t=null!==(e=this.option("selectedRowKeys"))&&void 0!==e?e:[];return!this.option("selection.deferred")&&t.length?this.selectedItemKeys(t):(new X.BH).resolve().promise()}selectedItemKeys(e,t,i,a){return this._selection.selectedItemKeys(e,t,i,a)}getSelectedRowKeys(e){return this._selection.getSelectedItemKeys()}selectRows(e,t){return this.selectedItemKeys(e,t)}deselectRows(e){return this.selectedItemKeys(e,!0,!0)}selectRowsByIndexes(e){var t=this._dataController.items(),i=[];return Array.isArray(e)||(e=Array.prototype.slice.call(arguments,0)),(0,Y.S6)(e,function(){var a=t[this];a&&"data"===a.rowType&&i.push(a.key)}),this.selectRows(i)}getSelectedRowsData(e){return this._selection.getSelectedItems()}loadSelectedItemsWithFilter(){return this._selection.loadSelectedItemsWithFilter()}changeItemSelection(e,t,i){t=t||{},this.isSelectionWithCheckboxes()&&(t.control=!0);var a=e+this._dataController.getRowIndexOffset()-this._dataController.getRowIndexOffset(!0);return this._selection.changeItemSelection(a,t,i)}focusedItemIndex(e){if(!(0,C.$K)(e))return this._selection._focusedItemIndex;this._selection._focusedItemIndex=e}isSelectionWithCheckboxes(){return"multiple"===this.option(ml)&&("always"===this.option(ga)||this._isSelectionWithCheckboxes)}startSelectionWithCheckboxes(){return"multiple"===this.option(ml)&&!this.isSelectionWithCheckboxes()&&(this._isSelectionWithCheckboxes=!0,this._updateSelectColumn(),!0)}stopSelectionWithCheckboxes(){return!!this._isSelectionWithCheckboxes&&(this._isSelectionWithCheckboxes=!1,this._updateSelectColumn(),!0)}}},extenders:{controllers:{data:r=>class extends r{init(){var e=this.option("selection.deferred");super.init.apply(this,arguments),e&&this._selectionController._updateCheckboxesState({isDeferredMode:!0,selectionFilter:this.option("selectionFilter")})}_loadDataSource(){var e=this;return super._loadDataSource().always(()=>{e._selectionController.refresh()})}_processDataItem(e,t){var i=this._selectionController.isSelectColumnVisible(),a=t.isDeferredSelection=void 0===t.isDeferredSelection?this.option("selection.deferred"):t.isDeferredSelection,n=super._processDataItem.apply(this,arguments);if(n.isSelected=this._selectionController.isRowSelected(a?n.data:n.key),i&&n.values)for(var s=0;s<t.visibleColumns.length;s++)if("select"===t.visibleColumns[s].command){n.values[s]=n.isSelected;break}return n}refresh(e){var t=this,i=new X.BH;return super.refresh.apply(this,arguments).done(()=>{!e||e.selection?t._selectionController.refresh().done(i.resolve).fail(i.reject):i.resolve()}).fail(i.reject),i.promise()}_handleDataChanged(e){var t=this.hasLoadOperation();super._handleDataChanged.apply(this,arguments),t&&!this._repaintChangesOnly&&this._selectionController.focusedItemIndex(-1)}_applyChange(e){if(!e||"updateSelection"!==e.changeType)return super._applyChange.apply(this,arguments);e.items.forEach((t,i)=>{var a=this._items[i];a&&(a.isSelected=t.isSelected,a.values=t.values)})}_endUpdateCore(){var e=this._changes;if(e.length>1&&e.every(a=>"updateSelection"===a.changeType)){var i=e.map(a=>a.itemIndexes||[]).reduce((a,n)=>a.concat(n));this._changes=[{changeType:"updateSelection",itemIndexes:i}]}super._endUpdateCore.apply(this,arguments)}},contextMenu:r=>class extends r{_contextMenuPrepared(e){var t=e.event;t.originalEvent&&"dxhold"!==t.originalEvent.type||e.items&&e.items.length>0||Zm(this,t)}}},views:{columnHeadersView:r=>class extends r{init(){super.init(),this._selectionController.selectionChanged.add(this._updateSelectAllValue.bind(this))}_updateSelectAllValue(){var e=this.element(),t=e&&e.find(".".concat(is));if(e&&t.length&&"multiple"===this.option("selection.mode")){var i=this._selectionController.isSelectAll(),a=!1!==i,n=this.option("selection.allowSelectAll")?!this._dataController.isEmpty():a;t.dxCheckBox("instance").option({visible:n,value:i})}}_handleDataChanged(e){super._handleDataChanged(e),(!e||"refresh"===e.changeType||e.repaintChangesOnly&&"update"===e.changeType)&&this.waitAsyncTemplates().done(()=>{this._updateSelectAllValue()})}_renderSelectAllCheckBox(e,t){var i=this,a=i._dataController.isEmpty(),n=(0,b.Z)("<div>").appendTo(e).addClass(is);return i.setAria("label",ae.Z.format("dxDataGrid-ariaSelectAll"),n),i._editorFactoryController.createEditor(n,(0,B.l)({},t,{parentType:"headerRow",dataType:"boolean",value:this._selectionController.isSelectAll(),editorOptions:{visible:!a&&(i.option("selection.allowSelectAll")||!1!==this._selectionController.isSelectAll())},tabIndex:i.option("useLegacyKeyboardNavigation")?-1:i.option("tabIndex")||0,setValue:(s,o)=>{var l=i.option("selection.allowSelectAll");o.component.option("visible",l||!1!==o.component.option("value")),o.event&&this._selectionController.isSelectAll()!==s&&(o.value&&!l?o.component.option("value",!1):o.value?this._selectionController.selectAll():this._selectionController.deselectAll(),o.event.preventDefault())}})),n}_attachSelectAllCheckBoxClickEvent(e){z.Z.on(e,Ft.u,this.createAction(t=>{var{event:i}=t;(0,b.Z)(i.target).closest(".".concat(is)).length||z.Z.trigger((0,b.Z)(i.currentTarget).children(".".concat(is)),Ft.u),i.preventDefault()}))}},rowsView:r=>class extends r{renderSelectCheckBoxContainer(e,t){"data"!==t.rowType||t.row.isNewRow?Ae.setEmptyText(e):(e.addClass(Bm),this._attachCheckBoxClickEvent(e),this._renderSelectCheckBox(e,t))}_renderSelectCheckBox(e,t){var i=(0,b.Z)("<div>").addClass(is).appendTo(e);return this.setAria("label",ae.Z.format("dxDataGrid-ariaSelectRow"),i),this._editorFactoryController.createEditor(i,(0,B.l)({},t.column,{parentType:"dataRow",dataType:"boolean",lookup:null,value:t.value,setValue(a,n){var s;"keydown"===(null===(s=n?.event)||void 0===s?void 0:s.type)&&z.Z.trigger(n.element,Ft.u,n)},row:t.row})),i}_attachCheckBoxClickEvent(e){z.Z.on(e,Ft.u,this.createAction(function(t){var{event:i}=t,a=this.getRowIndex((0,b.Z)(i.currentTarget).closest(".".concat("dx-row")));a>=0&&(this._selectionController.startSelectionWithCheckboxes(),this._selectionController.changeItemSelection(a,{shift:i.shiftKey}),(0,b.Z)(i.target).closest(".".concat(is)).length&&this._dataController.updateItems({changeType:"updateSelection",itemIndexes:[a]}))}))}_update(e){var t=this,i=t.getTableElements();"updateSelection"===e.changeType?i.length>0&&((0,Y.S6)(i,(a,n)=>{(0,Y.S6)(e.itemIndexes||[],(s,o)=>{var l;if(e.items[o]&&(l=t._getRowElements((0,b.Z)(n)).eq(o)).length){var{isSelected:d}=e.items[o];l.toggleClass(km,void 0!==d&&d).find(".".concat(is)).dxCheckBox("option","value",d),t.setAria("selected",d,l)}})}),t._updateCheckboxesClass()):super._update(e)}_createTable(){var e=this,t=e.option("selection.mode"),i=super._createTable.apply(e,arguments);return"none"!==t&&(("onLongTap"===e.option(ga)||!qn.touch)&&z.Z.on(i,(0,Ee.V4)(js.Z.name,"dxDataGridRowsView"),".".concat(Hm),e.createAction(a=>{Zm(e.component,a.event),a.event.stopPropagation()})),z.Z.on(i,"mousedown selectstart",e.createAction(a=>{var{event:n}=a;n.shiftKey&&n.preventDefault()}))),i}_createRow(e){var t=super._createRow.apply(this,arguments);if(e){var{isSelected:i}=e;i&&t.addClass(km),"none"!==this.option(ml)&&this.setAria("selected",i,t)}return t}_rowClickForTreeList(e){super._rowClick(e)}_rowClick(e){var t=e.event,i=(0,b.Z)(t.target).closest(".".concat("dx-selection-disabled")).length;this.isClickableElement((0,b.Z)(t.target))||(!i&&("multiple"!==this.option(ml)||"always"!==this.option(ga))&&this._selectionController.changeItemSelection(e.rowIndex,{control:(0,Ee.j1)(t),shift:t.shiftKey})&&(t.preventDefault(),e.handled=!0),super._rowClick(e))}isClickableElement(e){return!!e.closest(".".concat(Mm)).length}_renderCore(e){var t=super._renderCore(e);return this._updateCheckboxesClass(),t}_updateCheckboxesClass(){var e=this.getTableElements(),t=this._selectionController.isSelectColumnVisible()&&!this._selectionController.isSelectionWithCheckboxes();(0,Y.S6)(e,(i,a)=>{(0,b.Z)(a).toggleClass("dx-select-checkboxes-hidden",t)})}}}}};He.registerModule("selection",WT);var Or=ve(4490),rs=ve(187),zm=ve(295),Yt=ve(2557),za=ve(3720),Wm="dx-invalid-message-auto",Km="dx-validation-target";class Xc extends zm.Z{getProps(){var e=super.getProps();return e.onFocusIn=()=>{if("auto"===this.option("validationMessageMode")){var i=(0,b.Z)(function KT(r,e){var t,i;return(null!==(t=null===(i=r.getRootNode)||void 0===i?void 0:i.call(r))&&void 0!==t?t:document).querySelector(e)}(this.element(),".dx-invalid-message.dx-overlay-wrapper"));i?.removeClass(Wm),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>{i?.addClass(Wm)},150)}},e.saveValueChangeEvent=t=>{this._valueChangeEventInstance=t},e}_createElement(e){super._createElement(e),this.showValidationMessageTimeout=void 0,this.validationRequest=(0,sr.Z)(),(0,Ms.aT)(this.$element()[0],Km,this)}_render(){var e;null===(e=this.option("_onMarkupRendered"))||void 0===e||e()}_init(){super._init(),this._initialValue=this.option("value")}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(e){super._initOptions(e),this.option(Yt.Z.initValidationOptions(e))}_getDefaultOptions(){return(0,B.l)(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(e,t){var i=(0,B.l)({},e.option()),a=()=>this._silent(t,i);a(),e.on("optionChanged",a)}_raiseValidation(e,t){var i=!(0,C.$K)(e)&&!(0,C.$K)(t);e!==t&&!i&&this.validationRequest.fire({value:e,editor:this})}_raiseValueChangeAction(e,t){var i;null===(i=this._valueChangeAction)||void 0===i||i.call(this,{element:this.$element(),previousValue:t,value:e,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(e){var{name:t,previousValue:i,value:a}=e;switch(t&&void 0!==this._getActionConfigs()[t]&&this._addAction(t),t){case"value":this._raiseValidation(a,i),this.option("isDirty",this._initialValue!==a),this._raiseValueChangeAction(a,i);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(Yt.Z.synchronizeValidationOptions(e,this.option()))}super._optionChanged(e)}clear(){var{value:e}=this._getDefaultOptions();this.option({value:e})}reset(){arguments.length&&(this._initialValue=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0),this.option("value",this._initialValue),this.option("isDirty",!1),this.option("isValid",!0)}_dispose(){super._dispose(),(0,Ms.aT)(this.element(),Km,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}}var $T=za.Z.isEditor,$m=r=>$T(r)||r instanceof Xc;Xc.isEditor=$m,za.Z.isEditor=$m;class GT extends Xc{_useTemplates(){return!1}_isFocused(){return this.$element()[0].classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){var e=super.getProps();return null!==e.value&&(e.value=!!e.value),e}}var hi=ve(3366),Qe=ve(2492),St=ve(7379),Cl=ve(8794),Gm=ve(8877),Ys=ve(25),UT=ve(7392),Cr=ve(7143),jT=["dataSource","selectedRowKeys"],qT={integrationOptions:!0};function wl(r,e,t){return{path:r,value:e,previousValue:t}}function Um(r,e,t,i,a,n){if(!qT[i]){var s=(0,C.dt)(e),o=(0,C.dt)(t);if(e!==t)if(s!==o)r.push(wl(i,t,e));else if("object"===s)if((0,C.PO)(t)){var l=qm(e,t,a,n);r.push(...l.map(c=>(0,ye.Z)({},c,{path:"".concat(i,".").concat(c.path)})))}else r.push(wl(i,t,e));else if("array"===s)if(n.some(c=>a.includes(c))&&e!==t)r.push(wl(i,t,e));else if(e.length!==t.length)r.push(wl(i,t,e));else{var u=qm(e,t,a,n);[].push.apply(r,u.map(c=>(0,ye.Z)({},c,{path:"".concat(i).concat(c.path)})))}else r.push(wl(i,t,e))}}var jm=r=>(e,t,i,a)=>{var n=[],s=Array.isArray(e)?o=>{Um(n,e[o],t[o],"[".concat(o,"]"),"".concat(i,".").concat(o),a)}:o=>{Um(n,e[o],t[o],o,"".concat(i,".").concat(o),a)};return r(e).forEach(s),Object.keys(t).filter(o=>!Object.prototype.hasOwnProperty.call(e,o)&&e[o]!==t[o]).forEach(o=>{n.push({path:o,value:t[o],previousValue:e[o]})}),n},qm=jm(r=>Object.keys(r)),YT={key:!0,ref:!0,children:!0,style:!0},XT=jm(r=>Object.keys(r).filter(e=>!YT[e])),QT=["valueChange"],e5=["componentProps","componentType","templateNames"],Ym=r=>Object.keys(r).reduce((e,t)=>(void 0!==r[t]&&(e[t]=r[t]),e),{}),i5={};let Jc=(()=>{class r extends St.OS{constructor(t){super(t),this.state={},this.widgetRef=(0,Qe.Vf)(),this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.updateWidget=this.updateWidget.bind(this)}get config(){return this.context[Cr.E.id]?this.context[Cr.E.id]:Cr.E.defaultValue}createEffects(){return[new St.b0(this.setupWidget,[]),new St.b0(this.updateWidget,[this.props.componentProps,this.config,this.props.templateNames])]}updateEffects(){var t;null===(t=this._effects[1])||void 0===t||t.update([this.props.componentProps,this.config,this.props.templateNames])}setupWidget(){var t=new this.props.componentType(this.widgetRef.current,this.properties);return this.instance=t,()=>{t.dispose(),this.instance=null}}updateWidget(){var t=this.getInstance();if(t){var i=function JT(r,e){return XT(r,e,"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:jT)}(this.prevProps||{},this.properties);i.length&&(t.beginUpdate(),i.forEach(a=>{var{path:n,value:s}=a;t.option(n,s)}),t.endUpdate()),this.prevProps=this.properties}}get properties(){var t,i=Ym(this.props.componentProps),{valueChange:a}=i,n=(0,hi.Z)(i,QT),s=(0,ye.Z)({rtlEnabled:!(null===(t=this.config)||void 0===t||!t.rtlEnabled),isRenovated:!0},n);return a&&(s.onValueChanged=l=>{var{value:d}=l;return a(d)}),this.props.templateNames.forEach(l=>{(0,St._V)(l,s,this)&&(s[l]=(d,u,c)=>{(0,St.SM)(this.props.componentProps[l],{item:d,index:u,container:c},this)})}),s}get restAttributes(){return(0,hi.Z)(this.props,e5)}getInstance(){return this.instance}render(){return(r=>{var{props:{componentProps:{className:e}},restAttributes:t,widgetRef:i}=r;return Ym((0,Qe.Wm)(1,"div",e,null,1,(0,ye.Z)({},t),null,i))})({props:(0,ye.Z)({},this.props),widgetRef:this.widgetRef,config:this.config,properties:this.properties,restAttributes:this.restAttributes})}}return r.defaultProps=i5,r})();var r5=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionSide","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],n5=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(Gm.O),Object.getOwnPropertyDescriptors({mode:"auto",positionSide:"top",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0})));let s5=(()=>{class r extends St.Ul{constructor(t){super(t),this.state={}}get componentProps(){return this.props}get restAttributes(){return(0,hi.Z)(this.props,r5)}render(){return(r=>{var{componentProps:e,restAttributes:t}=r;return(0,Qe.vs)((0,Qe.Iz)(2,Jc,(0,ye.Z)({componentType:UT.Z,componentProps:e,templateNames:[]},t)))})({props:(0,ye.Z)({},this.props),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return r.defaultProps=n5,r})();var o5=ve(3188),l5=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],ci=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(Gm.O),Object.getOwnPropertyDescriptors({readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,isDirty:!1,inputAttr:Object.freeze({}),defaultValue:null,valueChange:()=>{}}))),h5={get readOnly(){return ci.readOnly},get name(){return ci.name},get validationError(){return ci.validationError},get validationErrors(){return ci.validationErrors},get validationMessageMode(){return ci.validationMessageMode},get validationMessagePosition(){return ci.validationMessagePosition},get validationStatus(){return ci.validationStatus},get isValid(){return ci.isValid},get isDirty(){return ci.isDirty},get inputAttr(){return ci.inputAttr},get defaultValue(){return ci.defaultValue},get valueChange(){return ci.valueChange},get className(){return ci.className},get activeStateEnabled(){return ci.activeStateEnabled},get disabled(){return ci.disabled},get focusStateEnabled(){return ci.focusStateEnabled},get hoverStateEnabled(){return ci.hoverStateEnabled},get tabIndex(){return ci.tabIndex},get visible(){return ci.visible},get aria(){return Cl.W6.aria},get classes(){return Cl.W6.classes}};class ru extends St.DZ{constructor(e){super(e),this.widgetRef=(0,Qe.Vf)(),this.rootElementRef=(0,Qe.Vf)(),this.__getterCache={},this.state={validationMessageGuid:"dx-".concat(new Pi.Z),isValidationMessageVisible:!1,value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new St.b0(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),(0,St.gt)()]}updateEffects(){var e;null===(e=this._effects[0])||void 0===e||e.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState(e=>({isValidationMessageVisible:this.shouldShowValidationMessage}))}onFocusIn(e){var{onFocusIn:t}=this.props;t?.(e)}get cssClasses(){return"".concat((r=>{var{classes:e,isValid:t,readOnly:i}=r,a={"dx-state-readonly":!!i,"dx-invalid":!t,["".concat(e)]:!!e};return(0,Ys.G)(a)})((0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})))}get shouldShowValidationMessage(){var e,{isValid:t,validationStatus:i}=this.props,a=null!==(e=this.validationErrors)&&void 0!==e?e:[];return!(t&&"invalid"!==i)&&a.length>0}get aria(){var{isValid:e,readOnly:t}=this.props,i={readonly:t?"true":"false",invalid:e?"false":"true"};return this.shouldShowValidationMessage&&(i.describedBy=this.state.validationMessageGuid),(0,ye.Z)({},i,this.props.aria)}get validationErrors(){return void 0!==this.__getterCache.validationErrors?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{var{validationError:e,validationErrors:t}=this.props,i=t&&[...t];return!i&&e&&(i=[(0,ye.Z)({},e)]),i})()}get validationMessageTarget(){var e;return null===(e=this.rootElementRef)||void 0===e?void 0:e.current}get restAttributes(){var e=(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,hi.Z)(e,l5)}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(e,t,i){super.componentWillUpdate(),(this.props.validationError!==e.validationError||this.props.validationErrors!==e.validationErrors)&&(this.__getterCache.validationErrors=void 0)}render(){return(r=>{var{aria:e,cssClasses:t,isValidationMessageVisible:i,onFocusIn:a,props:{accessKey:n,activeStateEnabled:s,children:o,className:l,disabled:d,focusStateEnabled:u,height:c,hint:f,hoverStateEnabled:p,onClick:_,onKeyDown:w,rtlEnabled:S,tabIndex:x,validationMessageMode:E,validationMessagePosition:V,visible:N,width:j},restAttributes:Q,rootElementRef:q,validationErrors:k,validationMessageGuid:se,validationMessageTarget:he,widgetRef:F}=r;return(0,Qe.vs)((0,Qe.Iz)(2,Cl.$L,(0,ye.Z)({rootElementRef:q,aria:e,classes:t,activeStateEnabled:s,focusStateEnabled:u,hoverStateEnabled:p,accessKey:n,className:l,rtlEnabled:S,hint:f,disabled:d,height:c,width:j,onFocusIn:a,onClick:_,onKeyDown:w,tabIndex:x,visible:N},Q,{children:(0,Qe.xJ)([o,i&&(0,Qe.Iz)(2,s5,{validationErrors:k,mode:E,positionSide:V,rtlEnabled:S,target:he,boundary:he,visualContainer:he,contentId:se})],0)}),null,F))})({props:(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),validationMessageGuid:this.state.validationMessageGuid,isValidationMessageVisible:this.state.isValidationMessageVisible,rootElementRef:this.rootElementRef,widgetRef:this.widgetRef,onFocusIn:this.onFocusIn,cssClasses:this.cssClasses,shouldShowValidationMessage:this.shouldShowValidationMessage,aria:this.aria,validationErrors:this.validationErrors,validationMessageTarget:this.validationMessageTarget,restAttributes:this.restAttributes})}}function Jm(r){var e,t=(0,Je.Jj)();return r?null===(e=t.getComputedStyle)||void 0===e?void 0:e.call(t,r):null}ru.defaultProps=h5;var p5=[[22,16],[18,16]],f5=[[[12,8],[20,18]],[[16,10],[16,14]]];function Qm(){var r=(0,Lt.Vk)();return{isMaterialTheme:(0,Lt.x2)(r),isCompactTheme:(0,Lt.f5)(r)}}var m5=["isChecked","size"],w5={isChecked:!1};let b5=(()=>{class r extends St.OS{constructor(t){super(t),this.state={},this.elementRef=(0,Qe.Vf)(),this.__getterCache={},this.updateFontSize=this.updateFontSize.bind(this),this.setIconFontSize=this.setIconFontSize.bind(this),this.getIconSize=this.getIconSize.bind(this),this.getComputedIconSize=this.getComputedIconSize.bind(this)}createEffects(){return[new St.b0(this.updateFontSize,[this.props.isChecked,this.props.size])]}updateEffects(){var t;null===(t=this._effects[0])||void 0===t||t.update([this.props.isChecked,this.props.size])}updateFontSize(){var{isChecked:t,size:i}=this.props;if((0,Je.Ym)()&&i){var n=function _5(r,e){var t=function g5(r){var{isCompactTheme:e,isMaterialTheme:t}=Qm();return f5[+r][+t][+e]}(e),i=function v5(){var{isCompactTheme:r,isMaterialTheme:e}=Qm();return p5[+e][+r]}();return Math.ceil(t/i*r)}(this.getIconSize(i),t);this.setIconFontSize(n)}}setIconFontSize(t){this.elementRef.current.style.fontSize="".concat(t,"px")}getIconSize(t){return(0,C.kE)(t)?t:t.endsWith("px")?parseInt(t,10):this.getComputedIconSize()}getComputedIconSize(){var i=Jm(this.elementRef.current);return parseInt(i?.width,10)}get cssStyles(){return void 0!==this.__getterCache.cssStyles?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{var{size:t}=this.props,i=(0,nr.bh)("width",t);return{height:(0,nr.bh)("height",t),width:i}})()}get restAttributes(){return(0,hi.Z)(this.props,m5)}componentWillUpdate(t,i,a){super.componentWillUpdate(),this.props.size!==t.size&&(this.__getterCache.cssStyles=void 0)}render(){return(r=>{var{cssStyles:e,elementRef:t}=r;return(0,Qe.Wm)(1,"span","dx-checkbox-icon",null,1,{style:(0,St.jk)(e)},null,t)})({props:(0,ye.Z)({},this.props),elementRef:this.elementRef,setIconFontSize:this.setIconFontSize,getIconSize:this.getIconSize,getComputedIconSize:this.getComputedIconSize,cssStyles:this.cssStyles,restAttributes:this.restAttributes})}}return r.defaultProps=w5,r})();var y5=["accessKey","activeStateEnabled","aria","className","defaultValue","disabled","enableThreeStateBehavior","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],mi=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(ci),Object.getOwnPropertyDescriptors({text:"",enableThreeStateBehavior:!1,activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return"desktop"===ft.Z.real().deviceType&&!ft.Z.isSimulator()},defaultValue:!1,valueChange:()=>{}}))),E5={get text(){return mi.text},get enableThreeStateBehavior(){return mi.enableThreeStateBehavior},get activeStateEnabled(){return mi.activeStateEnabled},get hoverStateEnabled(){return mi.hoverStateEnabled},get focusStateEnabled(){return mi.focusStateEnabled},get defaultValue(){return mi.defaultValue},get valueChange(){return mi.valueChange},get readOnly(){return mi.readOnly},get name(){return mi.name},get validationError(){return mi.validationError},get validationErrors(){return mi.validationErrors},get validationMessageMode(){return mi.validationMessageMode},get validationMessagePosition(){return mi.validationMessagePosition},get validationStatus(){return mi.validationStatus},get isValid(){return mi.isValid},get isDirty(){return mi.isDirty},get inputAttr(){return mi.inputAttr},get className(){return mi.className},get disabled(){return mi.disabled},get tabIndex(){return mi.tabIndex},get visible(){return mi.visible},get aria(){return Cl.W6.aria}};class au extends St.DZ{constructor(e){super(e),this.editorRef=(0,Qe.Vf)(),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[(0,St.gt)()]}onWidgetClick(e){var{enableThreeStateBehavior:t,readOnly:i,saveValueChangeEvent:a}=this.props;if(!i)if(a?.(e),t){var n;this.setState(o=>({value:n=null===(void 0!==this.props.value?this.props.value:o.value)||!(void 0!==this.props.value?this.props.value:o.value)&&null})),this.props.valueChange(n)}else{var s;this.setState(o=>{var l;return{value:s=!(null!==(l=void 0!==this.props.value?this.props.value:o.value)&&void 0!==l&&l)}}),this.props.valueChange(s)}}keyDown(e){var{onKeyDown:t}=this.props,{keyName:i,originalEvent:a,which:n}=e,s=t?.(e);if(null!=s&&s.cancel)return s;("space"===i||"space"===n)&&(a.preventDefault(),this.onWidgetClick(a))}get cssClasses(){return(r=>{var{text:e,value:t}=r;return(0,Ys.G)({"dx-checkbox":!0,"dx-checkbox-checked":!0===t,"dx-checkbox-has-text":!!e,"dx-checkbox-indeterminate":null===t})})((0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}))}get aria(){var i={role:"checkbox",checked:null===(void 0!==this.props.value?this.props.value:this.state.value)?"mixed":"".concat(!0===(void 0!==this.props.value?this.props.value:this.state.value))};return(0,ye.Z)({},i,this.props.aria)}get restAttributes(){var e=(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,hi.Z)(e,y5)}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){return(r=>{var{aria:e,cssClasses:t,editorRef:i,keyDown:a,onWidgetClick:n,props:{accessKey:s,activeStateEnabled:o,className:l,disabled:d,focusStateEnabled:u,height:c,hint:f,hoverStateEnabled:p,iconSize:_,isValid:w,name:S,onFocusIn:x,readOnly:E,rtlEnabled:V,tabIndex:N,text:j,validationError:Q,validationErrors:q,validationMessageMode:k,validationMessagePosition:se,validationStatus:he,value:F,visible:P,width:U},restAttributes:K}=r;return(0,Qe.vs)((0,Qe.Iz)(2,ru,(0,ye.Z)({aria:e,classes:t,onClick:n,onKeyDown:a,accessKey:s,activeStateEnabled:o,focusStateEnabled:u,hoverStateEnabled:p,className:l,disabled:d,readOnly:E,hint:f,height:c,width:U,rtlEnabled:V,tabIndex:N,visible:P,validationError:Q,validationErrors:q,validationMessageMode:k,validationMessagePosition:se,validationStatus:he,isValid:w,onFocusIn:x},K,{children:(0,Qe.xJ)([(0,Qe.vs)((0,Qe.Wm)(64,"input",null,null,1,(0,ye.Z)({type:"hidden",value:"".concat(F)},S&&{name:S}))),(0,Qe.Wm)(1,"div","dx-checkbox-container",[(0,Qe.Iz)(2,b5,{size:_,isChecked:!0===F}),j&&(0,Qe.Wm)(1,"span","dx-checkbox-text",j,0)],0)],4)}),null,i))})({props:(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),editorRef:this.editorRef,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,cssClasses:this.cssClasses,aria:this.aria,restAttributes:this.restAttributes})}}au.defaultProps=E5;var eC=[];class Qc extends GT{getProps(){var e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.focus(...arguments)}blur(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","enableThreeStateBehavior","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","isValid","isDirty","inputAttr","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return au}}(0,Rt.Z)("dxCheckBox",Qc),Qc.defaultOptions=function A5(r){eC.push(r),au.defaultProps=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(au.defaultProps),Object.getOwnPropertyDescriptors(function I5(r){var e=["value"];return Object.keys(r).reduce((t,i)=>{var a=r[i];return t[e.some(s=>s===i)?"default"+i.charAt(0).toUpperCase()+i.slice(1):i]=a,t},{})}((0,o5.wt)(eC)))))};const bl=Qc;var Xs=ve(5203),T5=ve(8118),Wa=ve(8582),wr="dx-treeview",ir="".concat(wr,"-node"),Ka="".concat(ir,"-container"),ep="".concat(ir,"-loadindicator"),mn="".concat(ir,"-container-opened"),yl="".concat(ir,"-is-leaf"),zi="".concat(wr,"-item"),D5="".concat(zi,"-with-checkbox"),O5="".concat(zi,"-with-custom-expander-icon"),R5="".concat(wr,"-custom-expander-icon-item-container"),L5="".concat(zi,"-without-checkbox"),P5="".concat(zi,"-data"),xl="".concat(wr,"-toggle-item-visibility"),tp="".concat(wr,"-custom-collapse-icon"),ip="".concat(wr,"-custom-expand-icon"),F5="".concat(wr,"-loadindicator"),V5="".concat(wr,"-loadindicator-wrapper"),tC="".concat(wr,"-toggle-item-visibility-opened"),nu="".concat(wr,"-select-all-item"),iC="dx-state-invisible",Sl="dx-state-disabled",rp="dxTreeView_expand",su="data-item-id",rC="dx-checkbox",M5="".concat(wr,"-root-node"),H5="".concat(wr,"-expander-icon-stub"),Z5=um.inherit({_supportedKeys:function(r){var e=a=>{var n=(0,b.Z)(this.option("focusedElement"));n.length&&(a.target=n,a.currentTarget=n,this._itemClickHandler(a,n.children("."+zi)),this._getEventNameByOption(this.option("expandEvent"))===(0,Ee.V4)(Ft.u,rp)&&this._expandEventHandler(a))},t=a=>{a.preventDefault();var n=(0,b.Z)(this.option("focusedElement")),s=this._getCheckBoxInstance(n);if(!s.option("disabled")){var o=s.option("value");this._updateItemSelection(!o,n.find("."+zi).get(0),!0)}},i=function(a,n){if(this.option("expandAllEnabled")){n.preventDefault();var s=(0,b.Z)(this.option("focusedElement"));if(s.length){var o=this._getItemData(s.find(".".concat(zi)));this._toggleExpandedNestedItems([o],a)}}};return(0,B.l)(this.callBase(),{enter:this._showCheckboxes()?t:e,space:this._showCheckboxes()?t:e,asterisk:i.bind(this,!0),minus:i.bind(this,!1)})},_toggleExpandedNestedItems:function(r,e){if(r)for(var t=0,i=r.length;t<i;t++){var a=r[t],n=this._dataAdapter.getNodeByItem(a);this._toggleExpandedState(n,e),this._toggleExpandedNestedItems(a.items,e)}},_getNodeElement:function(r,e){var t=this._encodeString(r.internalFields.key);if(e)return e.$nodeByKey||(e.$nodeByKey={},this.$element().find(".".concat(ir)).each(function(){var a=(0,b.Z)(this),n=a.attr(su);e.$nodeByKey[n]=a})),e.$nodeByKey[t]||(0,b.Z)();var i=this.$element().get(0).querySelector("[".concat(su,'="').concat(t,'"]'));return(0,b.Z)(i)},_activeStateUnit:"."+zi,_widgetClass:function(){return wr},_getDefaultOptions:function(){var r=(0,B.l)(this.callBase(),{animationEnabled:!0,dataStructure:"tree",deferRendering:!0,expandAllEnabled:!1,hasItemsExpr:"hasItems",selectNodesRecursive:!0,expandNodesRecursive:!0,showCheckBoxesMode:"none",expandIcon:null,collapseIcon:null,selectAllText:ae.Z.format("dxList-selectAll"),onItemSelectionChanged:null,onItemExpanded:null,onItemCollapsed:null,scrollDirection:"vertical",useNativeScrolling:!0,virtualModeEnabled:!1,rootValue:0,focusStateEnabled:!1,selectionMode:"multiple",expandEvent:"dblclick",selectByClick:!1,createChildren:null,onSelectAllValueChanged:null});return(0,B.l)(!0,r,{integrationOptions:{useDeferUpdateForTemplates:!1}})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return!qn.nativeScrolling},options:{useNativeScrolling:!1}}])},_initSelectedItems:le.ZT,_syncSelectionOptions:le.C$,_fireSelectionChanged:function(){(0,X.gx)(this._selectionChangePromise).done(function(){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})()}.bind(this))},_createSelectAllValueChangedAction:function(){this._selectAllValueChangedAction=this._createActionByOption("onSelectAllValueChanged",{excludeValidators:["disabled","readOnly"]})},_fireSelectAllValueChanged:function(r){this._selectAllValueChangedAction({value:r})},_checkBoxModeChange:function(r,e){var t=this.option("searchEnabled"),i=this._selectAllEnabled(e),a=this._itemContainer(t,i);if(this._detachClickEvent(a),this._detachExpandEvent(a),"none"!==e&&"none"!==r){var n=this._$selectAllItem&&this._$selectAllItem.length;switch(r){case"selectAll":n||(this._createSelectAllValueChangedAction(),this._renderSelectAllItem());break;case"normal":n&&(this._$selectAllItem.remove(),delete this._$selectAllItem)}}},_removeSelection:function(){var r=this;(0,Y.S6)(this._dataAdapter.getFullData(),function(e,t){r._hasChildren(t)&&r._dataAdapter.toggleSelection(t.internalFields.key,!1,!0)})},_optionChanged:function(r){var{name:e,value:t,previousValue:i}=r;switch(e){case"selectAllText":this._$selectAllItem&&this._$selectAllItem.dxCheckBox("instance").option("text",t);break;case"showCheckBoxesMode":this._checkBoxModeChange(t,i),this._invalidate();break;case"scrollDirection":this.getScrollable().option("direction",t);break;case"useNativeScrolling":this.getScrollable().option("useNative",t);break;case"items":delete this._$selectAllItem,this.callBase(r);break;case"dataSource":this.callBase(r),this._initDataAdapter(),this._filter={};break;case"hasItemsExpr":this._initAccessors(),this.repaint();break;case"expandEvent":this._attachExpandEvent();break;case"deferRendering":case"dataStructure":case"rootValue":case"createChildren":case"expandNodesRecursive":case"onItemSelectionChanged":case"onItemExpanded":case"onItemCollapsed":case"expandAllEnabled":case"animationEnabled":case"virtualModeEnabled":case"selectByClick":break;case"selectionMode":this._initDataAdapter(),this.callBase(r);break;case"onSelectAllValueChanged":this._createSelectAllValueChangedAction();break;case"selectNodesRecursive":this._dataAdapter.setOption("recursiveSelection",r.value),this.repaint();break;case"expandIcon":case"collapseIcon":this.repaint();break;default:this.callBase(r)}},_initDataSource:function(){this._useCustomChildrenLoader()?this._loadChildrenByCustomLoader(null).done(function(r){r&&r.length&&this.option("items",r)}.bind(this)):(this.callBase(),this._isVirtualMode()&&this._initVirtualMode())},_initVirtualMode:function(){var r=this._filter;r.custom||(r.custom=this._dataSource.filter()),r.internal||(r.internal=[this.option("parentIdExpr"),this.option("rootValue")])},_useCustomChildrenLoader:function(){return(0,C.mf)(this.option("createChildren"))&&this._isDataStructurePlain()},_loadChildrenByCustomLoader:function(r){var e=this.option("createChildren").call(this,r);return Array.isArray(e)?(new X.BH).resolve(e).promise():e&&(0,C.mf)(e.then)?(0,X.p4)(e):(new X.BH).resolve([]).promise()},_combineFilter:function(){return this._filter.custom&&this._filter.custom.length?[this._filter.custom,this._filter.internal]:this._filter.internal},_dataSourceLoadErrorHandler:function(){this._renderEmptyMessage()},_init:function(){this._filter={},this.callBase(),this._initStoreChangeHandlers()},_dataSourceChangedHandler:function(r){var e=this.option("items");this._initialized&&this._isVirtualMode()&&e.length||this.option("items",r)},_removeTreeViewLoadIndicator:function(){this._treeViewLoadIndicator&&(this._treeViewLoadIndicator.remove(),this._treeViewLoadIndicator=null)},_createTreeViewLoadIndicator:function(){return this._treeViewLoadIndicator=(0,b.Z)("<div>").addClass(F5),this._createComponent(this._treeViewLoadIndicator,Xs.Z,{}),this._treeViewLoadIndicator},_dataSourceLoadingChangedHandler:function(r){var e;if(this._isVirtualMode()&&(e=this._combineFilter(),this._dataSource.filter(e)),r&&!this._dataSource.isLoaded()){this.option("items",[]);var t=(0,b.Z)("<div>").addClass(V5);this._createTreeViewLoadIndicator().appendTo(t),this.itemsContainer().append(t),this._isVirtualMode()&&this._dataSource.filter()!==e&&this._dataSource.filter([])}else this._removeTreeViewLoadIndicator()},_initStoreChangeHandlers:function(){"plain"===this.option("dataStructure")&&this._dataSource&&this._dataSource.store().on("inserted",r=>{this.option().items=this.option("items").concat(r),this._dataAdapter.addItem(r),this._dataAdapter.isFiltered(r)&&this._updateLevel(this._parentIdGetter(r))}).on("removed",r=>{var e=this._dataAdapter.getNodeByKey(r);(0,C.$K)(e)&&(this.option("items")[this._dataAdapter.getIndexByKey(e.internalFields.key)]=0,this._markChildrenItemsToRemove(e),this._removeItems(),this._dataAdapter.removeItem(r),this._updateLevel(this._parentIdGetter(e)))})},_markChildrenItemsToRemove:function(r){(0,Y.S6)(r.internalFields.childrenKeys,(t,i)=>{this.option("items")[this._dataAdapter.getIndexByKey(i)]=0,this._markChildrenItemsToRemove(this._dataAdapter.getNodeByKey(i))})},_removeItems:function(){var r=(0,B.l)(!0,[],this.option("items")),e=0;(0,Y.S6)(r,(t,i)=>{i||(this.option("items").splice(t-e,1),e++)})},_updateLevel:function(r){var e=this._getContainerByParentKey(r);this._renderItems(e,this._dataAdapter.getChildrenNodes(r))},_getOldContainer:function(r){if(r.length)return r.children(".".concat(Ka));var e=this.getScrollable();return e?(0,b.Z)(e.content()).children():(0,b.Z)()},_getContainerByParentKey:function(r){var e=this._dataAdapter.getNodeByKey(r),t=e?this._getNodeElement(e):[];this._getOldContainer(t).remove();var i=this._renderNodeContainer(t);if(this._isRootLevel(r)){var a=this.getScrollable();a||this._renderScrollableContainer(),(0,b.Z)(a.content()).append(i)}return i},_isRootLevel:function(r){return r===this.option("rootValue")},_getAccessors:function(){var r=this.callBase();return r.push("hasItems"),r},_getDataAdapterOptions:function(){var r,e,t;return{rootValue:this.option("rootValue"),multipleSelection:!this._isSingleSelection(),recursiveSelection:this._isRecursiveSelection(),recursiveExpansion:this.option("expandNodesRecursive"),selectionRequired:this.option("selectionRequired"),dataType:this.option("dataStructure"),sort:this._dataSource&&this._dataSource.sort(),langParams:null===(r=this._dataSource)||void 0===r||null===(e=r.loadOptions)||void 0===e||null===(t=e.call(r))||void 0===t?void 0:t.langParams}},_initMarkup(){this._renderScrollableContainer(),this._renderEmptyMessage(this._dataAdapter.getRootNodes()),this.callBase(),this._setAriaRole()},_setAriaRole(){var{items:r}=this.option();null!=r&&r.length&&this.setAria({role:"tree"})},_renderContentImpl:function(){var r=this._renderNodeContainer();(0,b.Z)(this.getScrollable().content()).append(r),this.option("items")&&this.option("items").length&&(this._renderItems(r,this._dataAdapter.getRootNodes()),this._attachExpandEvent(),this._selectAllEnabled()&&(this._createSelectAllValueChangedAction(),this._renderSelectAllItem(r)))},_isVirtualMode:function(){return this.option("virtualModeEnabled")&&this._isDataStructurePlain()&&!!this.option("dataSource")},_isDataStructurePlain:function(){return"plain"===this.option("dataStructure")},_fireContentReadyAction:function(){var r=this.getDataSource(),e=r&&!r.isLoaded()||this._skipContentReadyAndItemExpanded,t=this.getScrollable();t&&(0,Je.Ym)()&&t.update(),e||this.callBase(),t&&(0,Je.Ym)()&&t.update()},_renderScrollableContainer:function(){this._scrollable=this._createComponent((0,b.Z)("<div>").appendTo(this.$element()),Ha.Z,{useNative:this.option("useNativeScrolling"),direction:this.option("scrollDirection"),useKeyboard:!1})},_renderNodeContainer:function(r){var e=(0,b.Z)("<ul>").addClass(Ka);if(this.setAria("role","group",e),r&&r.length){var t=this._getItemData(r.children("."+zi));this._expandedGetter(t)&&e.addClass(mn),e.appendTo(r)}return e},_createDOMElement:function(r,e){var t,i,a=(0,b.Z)("<li>").addClass(ir).attr(su,this._encodeString(e.internalFields.key)).prependTo(r),n={role:"treeitem",label:this._displayGetter(e.internalFields.item)||"",level:this._getLevel(r)};return!(null==e||null===(t=e.internalFields)||void 0===t||null===(i=t.childrenKeys)||void 0===i||!i.length)&&(n.expanded=e.internalFields.expanded||!1),this.setAria(n,a),a},_getLevel:function(r){var e=r.parent();return e.hasClass("dx-scrollable-content")?1:parseInt(e.attr("aria-level"))+1},_showCheckboxes:function(){return"none"!==this.option("showCheckBoxesMode")},_hasCustomExpanderIcons:function(){return this.option("expandIcon")||this.option("collapseIcon")},_selectAllEnabled:function(r){return"selectAll"===(r??this.option("showCheckBoxesMode"))&&!this._isSingleSelection()},_renderItems:function(r,e){for(var i=e.length-1;i>=0;i--)this._renderItem(i,e[i],r);this._renderedItemsCount+=e.length},_renderItem:function(r,e,t){var i=this._createDOMElement(t,e),a=e.internalFields,n=this._showCheckboxes();i.addClass(n?D5:L5),i.toggleClass(iC,!1===a.item.visible),this._hasCustomExpanderIcons()&&(i.addClass(O5),t.addClass(R5)),this.setAria("selected",a.selected,i),this._toggleSelectedClass(i,a.selected),a.disabled&&this.setAria("disabled",a.disabled,i),this.callBase(this._renderedItemsCount+r,a.item,i),this._getNode(e.internalFields.parentKey)||i.addClass(M5),!1!==a.item.visible&&this._renderChildren(i,e)},_setAriaSelectionAttribute:le.ZT,_renderChildren:function(r,e){if(!this._hasChildren(e))return this._addLeafClass(r),void(0,b.Z)("<div>").addClass(H5).appendTo(this._getItem(r));this._hasCustomExpanderIcons()?this._renderCustomExpanderIcons(r,e):this._renderDefaultExpanderIcons(r,e),this._shouldRenderSublevel(e.internalFields.expanded)&&this._loadSublevel(e).done(t=>{this._renderSublevel(r,this._getActualNode(e),t)})},_shouldRenderSublevel:function(r){return r||!this.option("deferRendering")},_getActualNode:function(r){return this._dataAdapter.getNodeByKey(r.internalFields.key)},_hasChildren:function(r){return this._isVirtualMode()||this._useCustomChildrenLoader()?!1!==this._hasItemsGetter(r.internalFields.item):this.callBase(r)},_loadSublevel:function(r){var e=new X.BH,t=this._getChildNodes(r);return t.length?e.resolve(t):this._loadNestedItems(r).done(i=>{e.resolve(this._dataAdapter.getNodesByItems(i))}),e.promise()},_getItemExtraPropNames:()=>["url","linkAttr"],_addContent:function(r,e){var{html:t,url:i}=e;if(i){r.html(t);var a=this._getLinkContainer(this._getIconContainer(e),this._getTextContainer(e),e);r.append(a)}else this.callBase(r,e)},_postprocessRenderItem(r){var{itemData:e,itemElement:t}=r;this._showCheckboxes()&&this._renderCheckBox(t,this._getNode(e)),this.callBase(r)},_renderSublevel:function(r,e,t){var i=this._renderNodeContainer(r,e),a=t.filter(s=>-1!==e.internalFields.childrenKeys.indexOf(s.internalFields.key));if(this._renderItems(i,a),a.length&&!e.internalFields.selected){var n=a[0];this._updateParentsState(n,this._getNodeElement(n))}this._normalizeIconState(r,a.length),e.internalFields.expanded&&i.addClass(mn)},_executeItemRenderAction:function(r,e,t){var i=this._getNode(t);this._getItemRenderAction()({itemElement:t,itemIndex:r,itemData:e,node:this._dataAdapter.getPublicNode(i)})},_addLeafClass:function(r){r.addClass(yl)},_expandEventHandler:function(r){(0,b.Z)(r.currentTarget.parentNode).hasClass(yl)||this._toggleExpandedState(r.currentTarget,void 0,r)},_attachExpandEvent:function(){var r=this._getEventNameByOption(this.option("expandEvent")),e=this._itemContainer();this._detachExpandEvent(e),z.Z.on(e,r,this._itemSelector(),this._expandEventHandler.bind(this))},_detachExpandEvent(r){z.Z.off(r,".".concat(rp),this._itemSelector())},_getEventNameByOption:function(r){return(0,Ee.V4)("click"===r?Ft.u:Hs,rp)},_getNode:function(r){if(!(0,C.$K)(r))return null;if(r.internalFields)return r;if((0,C.pt)(r))return this._dataAdapter.getNodeByKey(r);var e=(0,b.Z)(r).get(0);return e?at.Z.isElementNode(e)?this._getNodeByElement(e):this._dataAdapter.getNodeByItem(e):null},_getNodeByElement:function(r){var e=(0,b.Z)(r).closest("."+ir),t=this._decodeString(e.attr(su));return this._dataAdapter.getNodeByKey(t)},_toggleExpandedState:function(r,e,t){var i=this._getNode(r);if(!i)return(new X.BH).reject().promise();if(i.internalFields.disabled)return(new X.BH).reject().promise();var a=i.internalFields.expanded;if(a===e)return(new X.BH).resolve().promise();if(this._hasChildren(i)){var n=this._getNodeElement(i);if(n.find(".".concat(ep,":not(.").concat(iC,")")).length)return(new X.BH).reject().promise();!a&&!this._nodeHasRenderedChildren(n)&&this._createLoadIndicator(n)}return(0,C.$K)(e)||(e=!a),this._dataAdapter.toggleExpansion(i.internalFields.key,e),this._updateExpandedItemsUI(i,e,t)},_nodeHasRenderedChildren:r=>r.children(".".concat(Ka)).not(":empty").length,_getItem:function(r){return r.children(".".concat(zi)).eq(0)},_createLoadIndicator:function(r){var e=this._getItem(r);this._createComponent((0,b.Z)("<div>").addClass(ep),Xs.Z,{}).$element().appendTo(e),e.children(".".concat(xl,",.").concat(ip)).hide()},_renderExpanderIcon:function(r,e,t,i){t.appendTo(this._getItem(r)),t.addClass(i),e.internalFields.disabled&&t.addClass(Sl),this._renderToggleItemVisibilityIconClick(t,e)},_renderDefaultExpanderIcons:function(r,e){var t=this._getItem(r),i=(0,b.Z)("<div>").addClass(xl).appendTo(t);e.internalFields.expanded&&(i.addClass(tC),r.parent().addClass(mn)),e.internalFields.disabled&&i.addClass(Sl),this._renderToggleItemVisibilityIconClick(i,e)},_renderCustomExpanderIcons:function(r,e){var{expandIcon:t,collapseIcon:i}=this.option(),a=(0,Za.H)(t??i),n=(0,Za.H)(i??t);this._renderExpanderIcon(r,e,a,ip),this._renderExpanderIcon(r,e,n,tp);var s=e.internalFields.expanded;s&&r.parent().addClass(mn),this._toggleCustomExpanderIcons(a,n,s)},_renderToggleItemVisibilityIconClick:function(r,e){var t=(0,Ee.V4)(Ft.u,this.NAME);z.Z.off(r,t),z.Z.on(r,t,i=>(this._toggleExpandedState(e.internalFields.key,void 0,i),!1))},_toggleCustomExpanderIcons:function(r,e,t){e.toggle(t),r.toggle(!t)},_updateExpandedItemsUI:function(r,e,t){var i=this._getNodeElement(r),a=!i.length||e&&i.is(":hidden");if(this.option("expandNodesRecursive")&&a){var n=this._getNode(r.internalFields.parentKey);n&&this._updateExpandedItemsUI(n,e,t)}if(this._hasCustomExpanderIcons()){if(this._nodeHasRenderedChildren(i)){var o=this._getItem(i),l=o.children(".".concat(ip)),d=o.children(".".concat(tp));this._toggleCustomExpanderIcons(l,d,e)}}else this._getItem(i).children(".".concat(xl)).toggleClass(tC,e);var u=i.children(".".concat(Ka)),c=u.length>0,f=new X.BH;return!e||c&&!u.is(":empty")?(this._animateNodeContainer(r,e,t,f),f.promise()):0===r.internalFields.childrenKeys.length&&(this._isVirtualMode()||this._useCustomChildrenLoader())?(this._loadNestedItemsWithUpdate(r,e,t,f),f.promise()):(this._renderSublevel(i,r,this._getChildNodes(r)),this._fireContentReadyAction(),this._animateNodeContainer(r,e,t,f),f.promise())},_loadNestedItemsWithUpdate:function(r,e,t,i){var a=this._getNodeElement(r);this._loadNestedItems(r).done(n=>{var s=this._getActualNode(r);this._renderSublevel(a,s,this._dataAdapter.getNodesByItems(n)),n&&n.length?(this._fireContentReadyAction(),this._animateNodeContainer(s,e,t,i)):i.resolve()})},_loadNestedItems:function(r){if(this._useCustomChildrenLoader()){var e=this._dataAdapter.getPublicNode(r);return this._loadChildrenByCustomLoader(e).done(t=>{this._areNodesExists(t)||this._appendItems(t)})}return this._isVirtualMode()?(this._filter.internal=[this.option("parentIdExpr"),r.internalFields.key],this._dataSource.filter(this._combineFilter()),this._dataSource.load().done(t=>{this._areNodesExists(t)||this._appendItems(t)})):(new X.BH).resolve([]).promise()},_areNodesExists:function(r,e){var t=this.keyOf(r[0]),i=this._dataAdapter.getFullData();return!!this._dataAdapter.getNodeByKey(t,i)},_appendItems:function(r){this.option().items=this.option("items").concat(r),this._initDataAdapter()},_animateNodeContainer:function(r,e,t,i){var a=this._getNodeElement(r),n=a.children(".".concat(Ka));r&&i&&0===n.length&&i.resolve(),n.addClass(mn);var s=(0,we.Cr)(n);ti.Z.stop(n,!0),ti.Z.animate(n,{type:"custom",duration:this.option("animationEnabled")?400:0,from:{maxHeight:e?0:s},to:{maxHeight:e?s:0},complete:function(){n.css("maxHeight","none"),n.toggleClass(mn,e),this.setAria("expanded",e,a),this.getScrollable().update(),this._fireExpandedStateUpdatedEvent(e,r,t),i&&i.resolve()}.bind(this)})},_fireExpandedStateUpdatedEvent:function(r,e,t){if(this._hasChildren(e)&&!this._skipContentReadyAndItemExpanded){var i=r?"onItemExpanded":"onItemCollapsed";if((0,C.$K)(t))this._itemDXEventHandler(t,i,{node:this._dataAdapter.getPublicNode(e)});else{var a=this._getNodeElement(e);this._itemEventHandler(a,i,{event:t,node:this._dataAdapter.getPublicNode(e)})}}},_normalizeIconState:function(r,e){var i,t=r.find(".".concat(ep));t.length&&(null===(i=Xs.Z.getInstance(t))||void 0===i||i.option("visible",!1));var n=this._getItem(r).children(".".concat(tp,",.").concat(xl));e?n.show():(n.removeClass(xl),r.addClass(yl))},_emptyMessageContainer:function(){var r=this.getScrollable();return r?(0,b.Z)(r.content()):this.callBase()},_renderContent:function(){var r=this.option("items");r&&r.length&&(this._contentAlreadyRendered=!0),this.callBase()},_renderSelectAllItem:function(r){var{selectAllText:e,focusStateEnabled:t}=this.option();r=r||this.$element().find(".".concat(Ka)).first(),this._$selectAllItem=(0,b.Z)("<div>").addClass(nu);var i=this._dataAdapter.isAllSelected();this._createComponent(this._$selectAllItem,bl,{value:i,elementAttr:{"aria-label":"Select All"},text:e,focusStateEnabled:t,onValueChanged:this._onSelectAllCheckboxValueChanged.bind(this),onInitialized:a=>{var{component:n}=a;n.registerKeyHandler("enter",()=>{n.option("value",!n.option("value"))})}}),this._toggleSelectedClass(this._$selectAllItem,i),r.before(this._$selectAllItem)},_onSelectAllCheckboxValueChanged:function(r){this._toggleSelectAll(r),this._fireSelectAllValueChanged(r.value)},_toggleSelectAll:function(r){this._dataAdapter.toggleSelectAll(r.value),this._updateItemsUI(),this._fireSelectionChanged()},_renderCheckBox:function(r,e){var t=(0,b.Z)("<div>").appendTo(r);this._createComponent(t,bl,{value:e.internalFields.selected,onValueChanged:this._changeCheckboxValue.bind(this),focusStateEnabled:!1,elementAttr:{"aria-label":"Check State"},disabled:this._disabledGetter(e)})},_toggleSelectedClass:function(r,e){r.toggleClass("dx-state-selected",!!e)},_toggleNodeDisabledState:function(r,e){var t=this._getNodeElement(r),i=t.find("."+zi).eq(0);this._dataAdapter.toggleNodeDisabledState(r.internalFields.key,e),i.toggleClass(Sl,!!e),this._showCheckboxes()&&this._getCheckBoxInstance(t).option("disabled",!!e)},_itemOptionChanged:function(r,e,t){var i=this._dataAdapter.getNodeByItem(r);e===this.option("disabledExpr")&&this._toggleNodeDisabledState(i,t)},_changeCheckboxValue:function(r){var e=(0,b.Z)(r.element).closest(".".concat(ir)),t=this._getItem(e),i=this._getItemData(t),a=this._getNodeByElement(t),n=r.value;a&&a.internalFields.selected===n||this._updateItemSelection(n,i,r.event)},_isSingleSelection:function(){return"single"===this.option("selectionMode")},_isRecursiveSelection:function(){return this.option("selectNodesRecursive")&&"single"!==this.option("selectionMode")},_isLastSelectedBranch:function(r,e,t){var i=e.indexOf(r.key);return i>=0&&e.splice(i,1),t&&(0,Y.S6)(r.children,function(a,n){this._isLastSelectedBranch(n,e,!0)}.bind(this)),r.parent&&this._isLastSelectedBranch(r.parent,e),0===e.length},_isLastRequired:function(r){var e=this.option("selectionRequired"),t=this._isSingleSelection(),i=this.getSelectedNodeKeys();if(e)return t?1===i.length:this._isLastSelectedBranch(r.internalFields.publicNode,i.slice(),!0)},_updateItemSelection:function(r,e,t){var i=this._getNode(e);if(!i||!1===i.visible)return!1;if(i.internalFields.selected===r)return!0;if(!r&&this._isLastRequired(i)){if(this._showCheckboxes()){var a=this._getNodeElement(i);this._getCheckBoxInstance(a).option("value",!0)}return!1}if(r&&this._isSingleSelection()){var n=this.getSelectedNodeKeys();(0,Y.S6)(n,(l,d)=>{this._dataAdapter.toggleSelection(d,!1),this._updateItemsUI(),this._fireItemSelectionChanged(this._getNode(d))})}this._dataAdapter.toggleSelection(i.internalFields.key,r);var s=this._dataAdapter.isAllSelected(),o=this._selectAllEnabled()&&this._$selectAllItem.dxCheckBox("instance").option("value")!==s;return this._updateItemsUI(),this._fireItemSelectionChanged(i,t),this._fireSelectionChanged(),o&&this._fireSelectAllValueChanged(s),!0},_fireItemSelectionChanged:function(r,e){var t=e||this._findItemElementByItem(r.internalFields.item);(e?this._itemDXEventHandler:this._itemEventHandler).call(this,t,"onItemSelectionChanged",{node:this._dataAdapter.getPublicNode(r),itemData:r.internalFields.item})},_getCheckBoxInstance:function(r){return this._getItem(r).children(".".concat(rC)).dxCheckBox("instance")},_updateItemsUI:function(){var r={};if((0,Y.S6)(this._dataAdapter.getData(),(t,i)=>{var a=this._getNodeElement(i,r),n=i.internalFields.selected;a.length&&(this._toggleSelectedClass(a,n),this.setAria("selected",n,a),this._showCheckboxes()&&this._getCheckBoxInstance(a).option("value",n))}),this._selectAllEnabled()){var e=this._$selectAllItem.dxCheckBox("instance");e.option("onValueChanged",void 0),e.option("value",this._dataAdapter.isAllSelected()),e.option("onValueChanged",this._onSelectAllCheckboxValueChanged.bind(this))}},_updateParentsState:function(r,e){if(e){var t=this._dataAdapter.getNodeByKey(r.internalFields.parentKey),i=(0,b.Z)(e.parents("."+ir)[0]);if(this._showCheckboxes()){var a=t.internalFields.selected;this._getCheckBoxInstance(i).option("value",a),this._toggleSelectedClass(i,a)}t.internalFields.parentKey!==this.option("rootValue")&&this._updateParentsState(t,i)}},_itemEventHandlerImpl:function(r,e,t){var i=(0,b.Z)(r).closest("."+ir).children("."+zi);return e((0,B.l)(this._extendActionArgs(i),t))},_itemContextMenuHandler:function(r){this._createEventHandler("onItemContextMenu",r)},_itemHoldHandler:function(r){this._createEventHandler("onItemHold",r)},_createEventHandler:function(r,e){var t=this._getNodeByElement(e.currentTarget);this._itemDXEventHandler(e,r,{node:this._dataAdapter.getPublicNode(t)})},_itemClass:function(){return zi},_itemDataKey:function(){return P5},_attachClickEvent:function(){var r=this._itemContainer();this._detachClickEvent(r);var{clickEventNamespace:e,itemSelector:t,pointerDownEventNamespace:i,nodeSelector:a}=this._getItemClickEventData();z.Z.on(r,e,t,n=>{(0,b.Z)(n.target).hasClass("dx-checkbox-icon")||(0,b.Z)(n.target).hasClass(rC)||this._itemClickHandler(n,(0,b.Z)(n.currentTarget))}),z.Z.on(r,i,a,n=>{this._itemPointerDownHandler(n)})},_detachClickEvent:function(r){var{clickEventNamespace:e,itemSelector:t,pointerDownEventNamespace:i,nodeSelector:a}=this._getItemClickEventData();z.Z.off(r,e,t),z.Z.off(r,i,a)},_getItemClickEventData:function(){var r=".".concat(this._itemClass()),e=".".concat(ir,", .").concat(nu);return{clickEventNamespace:(0,Ee.V4)(Ft.u,this.NAME),itemSelector:r,pointerDownEventNamespace:(0,Ee.V4)(kt.Z.down,this.NAME),nodeSelector:e}},_itemClick:function(r){var e=r.args[0],i=(e.event.target[0]||e.event.target).getElementsByClassName("dx-item-url")[0];e.itemData.url&&i&&i.click()},_itemClickHandler:function(r,e){var t=this._getItemData(e),i=this._getNodeByElement(e);this._itemDXEventHandler(r,"onItemClick",{node:this._dataAdapter.getPublicNode(i)},{beforeExecute:this._itemClick}),this.option("selectByClick")&&!r.isDefaultPrevented()&&this._updateItemSelection(!i.internalFields.selected,t,r)},_updateSelectionToFirstItem:function(r,e){for(var t=e;t>=0;){var i=(0,b.Z)(r[t]);this._updateItemSelection(!0,i.find("."+zi).get(0)),t--}},_updateSelectionToLastItem:function(r,e){for(var t=r.length,i=e;i<t;){var a=(0,b.Z)(r[i]);this._updateItemSelection(!0,a.find("."+zi).get(0)),i++}},focus:function(){this._selectAllEnabled()?z.Z.trigger(this._$selectAllItem,"focus"):this.callBase()},_focusInHandler:function(r){this._updateFocusState(r,!0);var e=(0,b.Z)(r.target).hasClass(nu);if(e||this.option("focusedElement"))return clearTimeout(this._setFocusedItemTimeout),void(this._setFocusedItemTimeout=setTimeout(()=>{var i=e?(0,lt.u)(this._$selectAllItem):(0,b.Z)(this.option("focusedElement"));this._setFocusedItem(i)}));var t=this._getActiveItem();this.option("focusedElement",(0,lt.u)(t.closest("."+ir)))},_itemPointerDownHandler:function(r){if(this.option("focusStateEnabled")){var e=(0,b.Z)(r.target).closest("."+ir+", ."+nu);if(e.length){var t=e.hasClass(Sl)?null:e;this.option("focusedElement",(0,lt.u)(t))}}},_findNonDisabledNodes:function(r){return r.not(function(){return(0,b.Z)(this).children("."+zi).hasClass(Sl)})},_moveFocus:function(r,e){var s=this.option("rtlEnabled")?"right":"left",o=this.option("rtlEnabled")?"left":"right";this.$element().find(".".concat(Ka)).each(function(){ti.Z.stop(this,!0)});var l=this._nodeElements();if(l&&l.length)switch(r){case"up":var d=this._prevItem(l);this.option("focusedElement",(0,lt.u)(d));var u=this._getNodeItemElement(d);this.getScrollable().scrollToElement(u),e.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,u);break;case"down":var c=this._nextItem(l);this.option("focusedElement",(0,lt.u)(c));var f=this._getNodeItemElement(c);this.getScrollable().scrollToElement(f),e.shiftKey&&this._showCheckboxes()&&this._updateItemSelection(!0,f);break;case"first":var p=l.first();e.shiftKey&&this._showCheckboxes()&&this._updateSelectionToFirstItem(l,l.index(this._prevItem(l))),this.option("focusedElement",(0,lt.u)(p)),this.getScrollable().scrollToElement(this._getNodeItemElement(p));break;case"last":var _=l.last();e.shiftKey&&this._showCheckboxes()&&this._updateSelectionToLastItem(l,l.index(this._nextItem(l))),this.option("focusedElement",(0,lt.u)(_)),this.getScrollable().scrollToElement(this._getNodeItemElement(_));break;case o:this._expandFocusedContainer();break;case s:this._collapseFocusedContainer();break;default:return void this.callBase.apply(this,arguments)}},_getNodeItemElement:function(r){return r.find("."+zi).get(0)},_nodeElements:function(){return this.$element().find("."+ir).not(":hidden")},_expandFocusedContainer:function(){var r=(0,b.Z)(this.option("focusedElement"));if(r.length&&!r.hasClass(yl)){if(r.find(".".concat(Ka)).eq(0).hasClass(mn)){var t=this._nextItem(this._findNonDisabledNodes(this._nodeElements()));return this.option("focusedElement",(0,lt.u)(t)),void this.getScrollable().scrollToElement(this._getNodeItemElement(t))}var i=this._getNodeByElement(this._getItem(r));this._toggleExpandedState(i,!0)}},_getClosestNonDisabledNode:function(r){do{r=r.parent().closest("."+ir)}while(r.children(".dx-treeview-item.dx-state-disabled").length);return r},_collapseFocusedContainer:function(){var r=(0,b.Z)(this.option("focusedElement"));if(r.length){var e=r.find(".".concat(Ka)).eq(0);if(!r.hasClass(yl)&&e.hasClass(mn)){var t=this._getNodeByElement(this._getItem(r));this._toggleExpandedState(t,!1)}else{var i=this._getClosestNonDisabledNode(r);i.length&&this.option("focusedElement",(0,lt.u)(i)),this.getScrollable().scrollToElement(this._getNodeItemElement(i))}}},_encodeString:function(r){return(0,C.HD)(r)?encodeURI(r):r},_decodeString:function(r){return(0,C.HD)(r)?decodeURI(r):r},getScrollable:function(){return this._scrollable},updateDimensions:function(){var r=new X.BH,e=this.getScrollable();return e?e.update().done(()=>{r.resolveWith(this)}):r.resolveWith(this),r.promise()},selectItem:function(r){return this._updateItemSelection(!0,r)},unselectItem:function(r){return this._updateItemSelection(!1,r)},expandItem:function(r){return this._toggleExpandedState(r,!0)},collapseItem:function(r){return this._toggleExpandedState(r,!1)},getNodes:function(){return this._dataAdapter.getTreeNodes()},getSelectedNodes:function(){return this.getSelectedNodeKeys().map(r=>{var e=this._dataAdapter.getNodeByKey(r);return this._dataAdapter.getPublicNode(e)})},getSelectedNodeKeys:function(){return this._dataAdapter.getSelectedNodesKeys()},selectAll:function(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!0):this._toggleSelectAll({value:!0})},unselectAll:function(){this._selectAllEnabled()?this._$selectAllItem.dxCheckBox("instance").option("value",!1):this._toggleSelectAll({value:!1})},_allItemsExpandedHandler:function(){this._skipContentReadyAndItemExpanded=!1,this._fireContentReadyAction()},expandAll:function(){var r=this._dataAdapter.getData(),e=[];this._skipContentReadyAndItemExpanded=!0,r.forEach(t=>e.push(this._toggleExpandedState(t.internalFields.key,!0))),Promise.allSettled(e).then(()=>{var t;return null===(t=this._allItemsExpandedHandler)||void 0===t?void 0:t.call(this)})},collapseAll:function(){(0,Y.S6)(this._dataAdapter.getExpandedNodesKeys(),function(r,e){this._toggleExpandedState(e,!1)}.bind(this))},scrollToItem:function(r){var e=this._getNode(r);if(!e)return(new X.BH).reject().promise();for(var t=[],i=e.internalFields.publicNode.parent;null!=i;)i.expanded||t.push(i.key),i=i.parent;var a=new X.BH;return this._expandNodes(t.reverse()).always(()=>{var n=this._getNodeElement(e);n&&n.length?(this.scrollToElementTopLeft(n.get(0)),a.resolve()):a.reject()}),a.promise()},scrollToElementTopLeft:function(r){var e=this.getScrollable(),{scrollDirection:t,rtlEnabled:i}=this.option(),a={top:0,left:0},n=(0,T5.d)(Wa.hj,r);if(t!==Wa.Et){var s=(0,b.Z)(e.container()).get(0);a.left=i?n.left+r.offsetWidth-s.clientWidth:n.left}t!==Wa.Xv&&(a.top=n.top),e.scrollTo(a)},_expandNodes:function(r){if(!r||0===r.length)return(new X.BH).resolve().promise();var e=new X.BH,t=r.map(i=>this.expandItem(i));return X.gx.apply(b.Z,t).done(()=>e.resolve()).fail(()=>e.reject()),e.promise()},_dispose:function(){this.callBase(),clearTimeout(this._setFocusedItemTimeout),this._allItemsExpandedHandler=null}});const z5=Z5;es.setEditorClass(Jd.Z);var aC="dx-treeview",W5="".concat(aC,"-node-container"),nC=z5.inherit(es).inherit({_addWidgetPrefix:function(r){return"".concat(aC,"-").concat(r)},_optionChanged:function(r){switch(r.name){case"searchValue":this._showCheckboxes()&&this._isRecursiveSelection()&&this._removeSelection(),this._initDataAdapter(),this._updateSearch(),this._repaintContainer(),this.option("focusedElement",null);break;case"searchExpr":this._initDataAdapter(),this.repaint();break;case"searchMode":this.option("expandNodesRecursive")?this._updateDataAdapter():this._initDataAdapter(),this.repaint();break;default:this.callBase(r)}},_updateDataAdapter:function(){this._setOptionWithoutOptionChange("expandNodesRecursive",!1),this._initDataAdapter(),this._setOptionWithoutOptionChange("expandNodesRecursive",!0)},_getDataAdapterOptions:function(){return(0,B.l)(this.callBase(),{searchValue:this.option("searchValue"),searchMode:this.option("searchMode")||"contains",searchExpr:this.option("searchExpr")})},_getNodeContainer:function(){return this.$element().find(".".concat(W5)).first()},_updateSearch:function(){if(this._searchEditor){var r=this._getSearchEditorOptions();this._searchEditor.option(r)}},_repaintContainer:function(){var e,r=this._getNodeContainer();r.length&&(r.empty(),e=this._dataAdapter.getRootNodes(),this._renderEmptyMessage(e),this._renderItems(r,e),this._fireContentReadyAction())},_focusTarget:function(){return this._itemContainer(this.option("searchEnabled"))},_cleanItemContainer:function(){this.$element().empty()},_itemContainer:function(r,e){var t;return null!==(t=e)&&void 0!==t||(e=this._selectAllEnabled()),e?this._getNodeContainer():this._scrollable&&r?(0,b.Z)(this._scrollable.content()):this.callBase()},_addWidgetClass:function(){this.$element().addClass(this._widgetClass())},_clean:function(){this.callBase(),this._removeSearchBox()}});(0,Rt.Z)("dxTreeView",nC);const ou=nC;var sC="column-chooser-button",oC="notouch-action",lC="column-chooser",dC="dx-column-chooser-item",q5=["showInColumnChooser","caption","allowHiding","visible","cssClass","ownerBand"],ap={defaultOptions:()=>({columnChooser:{enabled:!1,search:{enabled:!1,timeout:500,editorOptions:{}},selection:{allowSelectAll:!1,selectByClick:!1,recursive:!1},position:void 0,mode:"dragAndDrop",width:250,height:260,title:ae.Z.format("dxDataGrid-columnChooserTitle"),emptyPanelText:ae.Z.format("dxDataGrid-columnChooserEmptyText"),container:void 0}}),controllers:{columnChooser:class X5 extends Vt.ViewController{init(){super.init(),this._rowsView=this.getView("rowsView")}renderShowColumnChooserButton(e){var s,t=this,i=t.addWidgetPrefix(sC),a=t.option("columnChooser.enabled"),n=e.find(".".concat(i));a?n.length?n.show():(s=(0,b.Z)("<div>").addClass(i).appendTo(e),t._createComponent(s,Or.Z,{icon:lC,onClick(){t.getView("columnChooserView").showColumnChooser()},hint:t.option("columnChooser.title"),integrationOptions:{}})):n.hide()}getPosition(){var e=this.option("columnChooser.position");return(0,C.$K)(e)?e:{my:"right bottom",at:"right bottom",of:this._rowsView&&this._rowsView.element(),collision:"fit",offset:"-2 -2",boundaryOffset:"2 2"}}}},views:{columnChooserView:class J5 extends dl{optionChanged(e){"columnChooser"===e.name?(this._initializePopupContainer(),this.render(null,"full")):super.optionChanged(e)}publicMethods(){return["showColumnChooser","hideColumnChooser"]}_resizeCore(){}_isWinDevice(){return!!ft.Z.real().win}_initializePopupContainer(){var e=this,t=e.addWidgetPrefix("column-chooser"),i=e.element().addClass(t),a=e.option("columnChooser"),n=this._columnChooserController.getPosition(),s=(0,Lt.Vk)(),o=(0,Lt.OD)(s),l=(0,Lt.x2)(s),d={visible:!1,shading:!1,showCloseButton:!1,dragEnabled:!0,resizeEnabled:!0,wrapperAttr:{class:t},toolbarItems:[{text:a.title,toolbar:"top",location:o||l?"before":"center"}],position:n,width:a.width,height:a.height,rtlEnabled:e.option("rtlEnabled"),onHidden(){e._isWinDevice()&&(0,b.Z)("body").removeClass(e.addWidgetPrefix(oC))},container:a.container};o||l?(0,B.l)(d,{showCloseButton:!0}):d.toolbarItems[d.toolbarItems.length]={shortcut:"cancel"},(0,C.$K)(this._popupContainer)?this._popupContainer.option(d):(e._popupContainer=e._createComponent(i,rs.Z,d),e._popupContainer.on("optionChanged",u=>{"visible"===u.name&&e.renderCompleted.fire()})),this.setPopupAttributes()}setPopupAttributes(){var e=this.isSelectMode(),t=this._columnsController.isBandColumnsUsed();this._popupContainer.setAria({role:"dialog",label:ae.Z.format("dxDataGrid-columnChooserTitle")}),this._popupContainer.$wrapper().toggleClass(this.addWidgetPrefix("column-chooser-mode-drag"),!e).toggleClass(this.addWidgetPrefix("column-chooser-mode-select"),e),this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-list")),e&&!t&&this._popupContainer.$content().addClass(this.addWidgetPrefix("column-chooser-plain"))}_renderCore(e){if(this._popupContainer){var t=!this.isSelectMode();this._columnChooserList&&"full"!==e?t&&this._updateItems():this._renderTreeView()}}_renderTreeView(){var e,t,i,a=this,n=this._popupContainer.$content(),s=this.option("columnChooser"),o=this.isSelectMode(),u={dataStructure:"plain",activeStateEnabled:!0,focusStateEnabled:!0,hoverStateEnabled:!0,itemTemplate:"item",showCheckBoxesMode:"none",rootValue:null,searchEnabled:(0,C.$K)(s.allowSearch)?s.allowSearch:null===(e=s.search)||void 0===e?void 0:e.enabled,searchTimeout:(0,C.$K)(s.searchTimeout)?s.searchTimeout:null===(t=s.search)||void 0===t?void 0:t.timeout,searchEditorOptions:null===(i=s.search)||void 0===i?void 0:i.editorOptions};if(this._isWinDevice()&&(u.useNativeScrolling=!1),(0,B.l)(u,o?this._prepareSelectModeConfig():this._prepareDragModeConfig()),this._columnChooserList)u.searchEnabled||(u.searchValue=""),this._columnChooserList.option(u),this._updateItems();else{this._columnChooserList=this._createComponent(n,ou,u),this._updateItems();var c=0;this._columnChooserList.on("optionChanged",f=>{var p=f.component.getScrollable();c=p.scrollTop()}),this._columnChooserList.on("contentReady",f=>{(0,le.Su)(()=>{f.component.getScrollable().scrollTo({y:c}),a.renderCompleted.fire()})})}}_prepareDragModeConfig(){return{noDataText:this.option("columnChooser").emptyPanelText,activeStateEnabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,itemTemplate(t,i,a){(0,b.Z)(a).text(t.text).parent().addClass(t.cssClass).addClass(dC)}}}_prepareSelectModeConfig(){var e,t=this,i=null!==(e=this.option("columnChooser.selection"))&&void 0!==e?e:{},a=!1;return{selectByClick:i.selectByClick,selectNodesRecursive:i.recursive,showCheckBoxesMode:i.allowSelectAll?"selectAll":"normal",onSelectionChanged:n=>{if(!a){var s=(o=n.component.getNodes(),(l=(d,u)=>d.reduce((c,f)=>(c.push(f),f.children.length&&l(f.children,c),c),u))(o,[]));n.component.beginUpdate(),a=!0,((o,l)=>{l.filter(d=>!1===d.itemData.allowHiding).forEach(d=>o.component.selectItem(d.key))})(n,s),n.component.endUpdate(),a=!1,t.component.beginUpdate(),this._isUpdatingColumnVisibility=!0,(o=>{o.forEach(l=>{t._columnsController.columnOption(l.itemData.id,"visible",!1!==l.selected)})})(s),t.component.endUpdate(),this._isUpdatingColumnVisibility=!1}var o,l}}}_updateItems(){var e=this.isSelectMode(),i=function(r,e){var t=[],i=r.isSelectMode(),a=r.option("columnChooser.selection.recursive");return e.length&&(0,Y.S6)(e,(n,s)=>{var o={text:s.caption,cssClass:s.cssClass,allowHiding:s.allowHiding,expanded:!0,id:s.index,disabled:!1===s.allowHiding,parentId:(0,C.$K)(s.ownerBand)?s.ownerBand:null};i&&!(a&&s.hasColumns)&&(o.selected=s.visible),t.push(o)}),t}(this,this._columnsController.getChooserColumns(e));this._columnChooserList.option("items",i)}_updateItemsSelection(e){var t=e?.map(i=>this._columnsController.columnOption(i));this._columnChooserList.beginUpdate(),t?.forEach(i=>{var{visible:a,index:n}=i;a?this._columnChooserList.selectItem(n):this._columnChooserList.unselectItem(n)}),this._columnChooserList.endUpdate()}_columnOptionChanged(e){if(super._columnOptionChanged(e),this.isSelectMode()&&this._columnChooserList&&!this._isUpdatingColumnVisibility){var{optionNames:i}=e,a=i.visible&&1===i.length,n=(0,C.$K)(e.columnIndex)?[e.columnIndex]:e.columnIndices;(q5.some(o=>i[o])||e.changeTypes.columns&&i.all)&&(this._updateItemsSelection(n),a||this._updateItems())}}getColumnElements(){var e=[],t=this.isSelectMode(),i=this._columnsController.getChooserColumns(t),a=this._popupContainer&&this._popupContainer.$content(),n=a&&a.find(".dx-treeview-node");return n&&i.forEach(s=>{var o=n.filter("[data-item-id = '".concat(s.index,"']")),l=o.length?o.children(".".concat(dC)).get(0):null;e.push(l)}),(0,b.Z)(e)}getName(){return"columnChooser"}getColumns(){return this._columnsController.getChooserColumns()}allowDragging(e){var t=this._columnsController.isParentColumnVisible(e.index),i=!e.visible&&e.allowHiding;return this.isColumnChooserVisible()&&t&&i}allowColumnHeaderDragging(e){return!this.isSelectMode()&&this.isColumnChooserVisible()&&e.allowHiding}getBoundingRect(){var e=this._popupContainer&&this._popupContainer.$overlayContent();if(e&&e.is(":visible")){var t=e.offset();return{left:t.left,top:t.top,right:t.left+(0,we.Y_)(e),bottom:t.top+(0,we.zp)(e)}}return null}showColumnChooser(){this._popupContainer||(this._initializePopupContainer(),this.render()),this._popupContainer.show(),this._isWinDevice()&&(0,b.Z)("body").addClass(this.addWidgetPrefix(oC))}hideColumnChooser(){this._popupContainer&&this._popupContainer.hide()}isColumnChooserVisible(){var e=this._popupContainer;return e&&e.option("visible")}isSelectMode(){return"select"===this.option("columnChooser.mode")}hasHiddenColumns(){var e=this.option("columnChooser.enabled"),t=this.getColumns().filter(i=>!i.visible);return e&&t.length}}},extenders:{views:{headerPanel:r=>class extends r{_getToolbarItems(){var e=super._getToolbarItems();return this._appendColumnChooserItem(e)}_appendColumnChooserItem(e){var t=this;if(t.option("columnChooser.enabled")){var a=t.option("columnChooser.title");e.push({widget:"dxButton",options:{icon:lC,onClick:function(){t.component.getView("columnChooserView").showColumnChooser()},hint:a,text:a,onInitialized:function(s){(0,b.Z)(s.element).addClass(t._getToolbarButtonClass(t.addWidgetPrefix(sC)))},elementAttr:{"aria-haspopup":"dialog"}},showText:"inMenu",location:"after",name:"columnChooserButton",locateInMenu:"auto",sortIndex:40})}return e}optionChanged(e){"columnChooser"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}isVisible(){var e=this.option("columnChooser.enabled");return super.isVisible()||e}},columnHeadersView:r=>class extends r{allowDragging(e){var t=!this._columnChooserView.isSelectMode(),i=this._columnChooserView.isColumnChooserVisible();return t&&i&&e.allowHiding||super.allowDragging(e)}}},controllers:{columns:r=>class extends r{allowMoveColumn(e,t,i,a){return!("select"===this.option("columnChooser.mode")&&"columnChooser"===a)&&super.allowMoveColumn(e,t,i,a)}}}}};He.registerModule("columnChooser",ap);var lu=ve(8772);function as(r,e){for(var t=(0,ka.G5)(e.group),i=[],a=0;a<r.length;a++)i.push([t[a].selector,"=",r[a]]);return e.filter&&i.push(e.filter),Ae.combineFilters(i)}function uC(r,e,t){for(var i=(0,ka.G5)(e.group),a=[],n=t?r.length-1:0;n<r.length;n++){for(var s=[],o=0;o<=n;o++){var{selector:l}=i[o];if(n!==o||null!==r[o]&&!1!==r[o]&&!0!==r[o]){var d=[l,n===o?i[o].desc?">":"<":"=",r[o]];s.push("<"===d[1]?[d,"or",[l,"=",null]]:d)}else!1===r[o]?s.push([l,"=",!!i[o].desc||null]):(r[o]?!i[o].desc:i[o].desc)?s.push([l,"<>",r[o]]):(s.push([l,"<>",null]),s.push([l,"=",null]))}a.push(He.combineFilters(s))}return a=He.combineFilters(a,"or"),He.combineFilters([a,e.filter])}var hC=function(r,e){var{hash:t}=r;return t&&t[JSON.stringify(e)]},iD=function(r,e){var n,t=0,i=r.length-1;if(!r.length)return 0;do{var a=i+t>>1;r[a].offset>e?i=a:t=a}while(i-t>1);for(n=t;n<=i&&!(r[n].offset>e);n++);return n},rD=function r(e,t,i){for(var a=0;a<e.length;a++)t+1>=i?e[a].children=[]:r(e[a].children,t+1,i)},aD=function r(e,t,i){var a=0;if(t)if(i)for(var n=0;n<t.length;n++)e.isGroupItemCountable(t[n])&&a++,a+=r(e,t[n].items,i-1);else a=t.length;return a};class cC{constructor(e){this._dataSource=e,this.reset()}reset(){this._groupsInfo=[],this._totalCountCorrection=0}totalCountCorrection(){return this._totalCountCorrection}updateTotalItemsCount(e){this._totalCountCorrection=e||0}isGroupItemCountable(e){return!this._isVirtualPaging()||!e.isContinuation}_isVirtualPaging(){var e=this._dataSource.option("scrolling.mode");return"virtual"===e||"infinite"===e}itemsCount(){var t=this._dataSource._dataSource,i=He.normalizeSortingInfo(t.group()||[]).length;return aD(this,t.items(),i)}foreachGroups(e,t,i,a,n){var s=this;return function o(l,d,u,c){var f=[];function p(E,V,N,j){var Q=V&&E(V,N);return Q&&j.push(Q),Q}for(var _=0;_<l.length;_++){if(c.push(l[_].data),!u&&!1===p(d,l[_].data,c,f))return!1;if(!l[_].data||l[_].data.isExpanded||i){var{children:w}=l[_],S=w.length&&o(w,d,u,c);if(S&&f.push(S),!1===S)return!1}if(u&&!1===p(d,l[_].data,c,f))return!1;(!l[_].data||l[_].data.offset!==l[_].offset)&&(a=!0),c.pop()}var x=n&&c.slice(0);return a&&X.gx.apply(b.Z,f).always(()=>{s._updateGroupInfoOffsets(l,x)})}(s._groupsInfo,e,t,[])}_updateGroupInfoOffsets(e,t){t=t||[];for(var i=0;i<e.length;i++){var a=e[i];if(a.data&&a.data.offset!==a.offset){a.offset=a.data.offset;for(var n=0;n<t.length;n++)t[n].offset=a.offset}}e.sort((s,o)=>s.offset-o.offset)}findGroupInfo(e){for(var t,i=this._groupsInfo,a=0;i&&a<e.length;a++)i=(t=hC(i,e[a]))&&t.children;return t&&t.data}addGroupInfo(e){for(var t,{path:i}=e,a=this._groupsInfo,n=0;n<i.length;n++){if(!(t=hC(a,i[n]))){t={key:i[n],offset:e.offset,data:{offset:e.offset,isExpanded:!0,path:i.slice(0,n+1)},children:[]};var s=iD(a,e.offset);a.splice(s,0,t),a.hash=a.hash||{},a.hash[JSON.stringify(t.key)]=t}n===i.length-1&&(t.data=e,t.offset!==e.offset&&this._updateGroupInfoOffsets(a)),a=t.children}}allowCollapseAll(){return!0}refresh(e){var{storeLoadOptions:t}=e,i=(0,ka.G5)(t.group||[]),a="_group"in this?(0,ka.G5)(this._group||[]):i,n=Math.min(a.length,i.length);this._group=t.group;for(var s=0;s<n;s++)if(a[s].selector!==i[s].selector){n=s;break}n?rD(this._groupsInfo,0,n):this.reset()}handleDataLoading(){}handleDataLoaded(e,t){t(e)}handleDataLoadedCore(e,t){t(e)}}function np(r,e,t,i){if(i=i||0,e>1&&t>0){var a=r-Math.floor(r/e)*e||e;return(a+=t-i-2)<0&&(a+=e),Math.floor(a/(e-i-1))}return 0}var El=function(r,e,t){return r.foreachGroups((i,a)=>{if(i.isExpanded)return e(i,a)},!0,!1,t,t)},pC=function r(e,t,i,a,n,s,o){var l;if(a.items=a.items||[],a.paths=a.paths||[],a.count=a.count||0,a.lastCount=a.lastCount||0,i)for(var d=0;d<t.length;d++){var u=t[d];if(void 0!==u.items){if(n.push(u.key),s)l=!0;else{var c=e.findGroupInfo(n);l=c&&c.isExpanded}l?u.items?r(e,u.items,i-1,a,n,s,o):1===i&&u.count&&(!s||o)&&(a.items.push(u),a.paths.push(n.slice(0)),a.count+=a.lastCount,a.lastCount=u.count):(u.collapsedItems=u.items,u.items=null),n.pop()}}},nD=function(r,e,t,i,a){var s,n=r.findGroupInfo(i);n?(t?n.count=e.count>0?e.count:e.items&&e.items.length||0:e.count=n.count||e.count,n.offset=a):(t&&(s=e.count>0?e.count:e.items.length),r.addGroupInfo({isExpanded:r._isGroupExpanded(i.length-1),path:i.slice(0),offset:a,count:s||0}))},fC=function r(e,t,i,a,n,s,o){var p,d=(t.group?t.group.length:0)===a,c=0,f=0;if(n=n||0,s=s||[],t.remoteOperations.paging&&!o&&(c=0===n?t.skip||0:t.skips[n-1]||0),n>=a)return i.length;for(var _=0;_<i.length;_++){var w=i[_];if(w){if(s.push(w.key),!w.count&&!w.items||void 0===w.items||(nD(e,w,d,s,c+_),(p=w.items?r(e,t,w.items,a,n+1,s,_):w.count||-1)<0))return-1;f+=p,s.pop()}}return f},sp=function(r,e){return r&&r.length&&r[e]&&!!r[e].isExpanded},vC=function(r,e,t){for(var i,a=t,n=0;n<r.length;n++)i=r[n].offset+1,n>0&&(i+=r[n-1].childrenTotalCount,e&&(i+=np(a,e,i,n-1)*n)),a+=i;return a};function gC(r,e,t,i){var a=e.items[i],n=r.skips&&r.skips[t],s=r.takes&&r.takes[t],o=i===e.items.length-1,l=0===i,u=a.count>s+(l&&n||0);l&&void 0!==n&&(a.isContinuation=!0),o&&void 0!==s&&u&&(a.isContinuationOnNextPage=!0)}function _C(r){return!Array.isArray(r)}function mC(r){_C(r.data)||(r.data=new X.BH)}function CC(r,e,t,i,a,n){e.isCustomLoading||(pC(r,n,t,i={},[]),function sD(r,e,t){var i=t-1,a=r.group?r.group.length:0;e.skip=r.skips&&r.skips[i],r.takes&&void 0!==r.takes[i]&&(e.take=a===t&&e.count?e.count-(e.skip||0):0,e.take+=r.takes[i])}(e,i,t)),i.paths.length&&(e.group?e.group.length:0)-t>0?(mC(e),function oD(r,e,t,i,a,n){var s=e.group||[],o=s[a+1],l=[];(0,Y.S6)(t.paths,d=>{var u,c={requireTotalCount:!1,requireGroupCount:!0,group:[o],groupSummary:e.storeLoadOptions.groupSummary,filter:as(t.paths[d],{filter:e.storeLoadOptions.filter,group:s}),select:e.storeLoadOptions.select,langParams:null===(u=e.storeLoadOptions)||void 0===u?void 0:u.langParams};0===d&&(c.skip=t.skip||0),d===t.paths.length-1&&(c.take=t.take);var f=0===c.take?[]:r._dataSource.loadFromStore(c);(0,X.gx)(f).done(p=>{var _=t.items[d];gC(e,t,a,d),_.items=p}),l.push(f)}),X.gx.apply(null,l).done(()=>{fC(r,e,n,i+1),CC(r,e,i+1,t,a+1,n)})}(r,e,i,t,a,n)):i.paths.length&&e.storeLoadOptions.group?(mC(e),function lD(r,e,t,i){var a=[],n=e.group||[];(0,Y.S6)(t.paths,(d,u)=>{a.push(as(u,{group:e.isCustomLoading?e.storeLoadOptions.group:n}))});var{filter:s}=e.storeLoadOptions;e.storeLoadOptions.isLoadingAll||(s=He.combineFilters([s,He.combineFilters(a,"or")]));var o=(0,B.l)({},e.storeLoadOptions,{requireTotalCount:!1,requireGroupCount:!1,group:null,sort:n.concat(He.normalizeSortingInfo(e.storeLoadOptions.sort||[])),filter:s}),l=r._dataSource.isLastLevelGroupItemsPagingLocal();l||(o.skip=t.skip,o.take=t.take),(0,X.gx)(0===t.take?[]:r._dataSource.loadFromStore(o)).done(d=>{l&&(d=r._dataSource.sortLastLevelGroupItems(d,n,t.paths),d=t.skip?d.slice(t.skip):d,d=t.take?d.slice(0,t.take):d),(0,Y.S6)(t.items,(u,c)=>{var p=d.splice(0,c.count-(0===u&&t.skip||0));gC(e,t,n.length-1,u),c.items=p}),e.data.resolve(i)}).fail(e.data.reject)}(r,e,i,n)):_C(e.data)&&e.data.resolve(n)}var op=function(r,e){var t=new X.BH,i=!(!e.group||!e.group.length),a=(0,B.l)({skip:0,take:1,requireGroupCount:i,requireTotalCount:!i},e,{group:i?e.group:null});return r.load(a).done((n,s)=>{var o=s&&(i?s.groupCount:s.totalCount);isFinite(o)?t.resolve(o):t.reject(lu.R0.Error(i?"E4022":"E4021"))}).fail(t.reject.bind(t)),t};class wC extends cC{updateTotalItemsCount(e){var t=0,i=e.extra&&e.extra.totalCount||0,a=e.extra&&e.extra.groupCount||0,n=this._dataSource.pageSize(),s=this._isVirtualPaging();El(this,o=>{o.childrenTotalCount=0}),El(this,(o,l)=>{var d=vC(l,s?0:n,t),u=o.count+o.childrenTotalCount;s||(u+=np(d,n,u,l.length-1)),l[l.length-2]?l[l.length-2].childrenTotalCount+=u:t+=u}),super.updateTotalItemsCount(t-i+a)}_isGroupExpanded(e){var t=this._dataSource.group();return sp(t,e)}_updatePagingOptions(e,t){var i=this._isVirtualPaging(),a=this._dataSource.pageSize(),n=[],s=[],o=0,l=0;e.take&&(El(this,d=>{d.childrenTotalCount=0,d.skipChildrenTotalCount=0}),El(this,(d,u)=>{var c,f=0,p=0,_=vC(u,i?0:a,l),w=0,S=0,x=d.count+d.childrenTotalCount,E=x;t&&t(d,_);var V=e.skip-_;_<=e.skip+e.take&&x&&(c=e.take,i||(x+=(w=np(_,a,x,u.length-1))*u.length,E+=w,a&&V>=0&&(f=u.length,p=u.length-1,S=Math.floor(V/a))),V>=0?(_+x>e.skip&&n.unshift(V-S*f-d.skipChildrenTotalCount),_+x>=e.skip+c&&s.unshift(c-f-d.childrenTotalCount+d.skipChildrenTotalCount)):_+x>=e.skip+c&&s.unshift(c+V-d.childrenTotalCount)),_<=e.skip&&(u[u.length-2]?u[u.length-2].skipChildrenTotalCount+=Math.min(E,V+1-S*p):o+=Math.min(E,V+1)),_<=e.skip+c&&(x=Math.min(E,V+c-(S+1)*p),u[u.length-2]?u[u.length-2].childrenTotalCount+=x:l+=x)}),e.skip-=o,e.take-=l-o),e.skips=n,e.takes=s}changeRowExpand(e){var t=this.findGroupInfo(e),i=this._dataSource,a=i.remoteOperations().groupPaging,n=He.normalizeSortingInfo(i.group());return t?(t.isExpanded=!t.isExpanded,a&&t.isExpanded&&e.length<n.length?op(i,{filter:as(e,{filter:i.lastLoadOptions().filter,group:i.group()}),group:[n[e.length]],select:i.select()}).done(s=>{t.count=s}):(new X.BH).resolve()):(new X.BH).reject()}handleDataLoading(e){var{storeLoadOptions:t}=e,i=He.normalizeSortingInfo(t.group||e.loadOptions.group);if(!e.isCustomLoading&&i.length){if(e.remoteOperations.grouping){var a=this._dataSource.remoteOperations().paging;t.group=He.normalizeSortingInfo(t.group),t.group.forEach((n,s)=>{n.isExpanded=!(a&&s===t.group.length-1)})}e.group=e.group||i,e.remoteOperations.paging?(e.skip=t.skip,e.take=t.take,t.requireGroupCount=!0,t.group=i.slice(0,1),this._updatePagingOptions(e),t.skip=e.skip,t.take=e.take):(e.skip=e.loadOptions.skip,e.take=e.loadOptions.take,this._updatePagingOptions(e))}}handleDataLoadedCore(e,t){var n,i=He.normalizeSortingInfo(e.storeLoadOptions.group||e.loadOptions.group).length,a=e.group?e.group.length:0,s={};if(e.isCustomLoading)t(e),pC(this,e.data,i,s,[],e.isCustomLoading,e.storeLoadOptions.isLoadingAll);else{if(e.remoteOperations.paging||this.foreachGroups(o=>{o.count=0}),(n=fC(this,e,e.data,i))<0)return void(e.data=(new X.BH).reject(At.Z.Error("E1037")));if(e.remoteOperations.paging||i&&e.extra&&e.loadOptions.requireTotalCount&&(e.extra.totalCount=n,e.extra.groupCount=e.data.length),a&&e.storeLoadOptions.requireGroupCount&&!isFinite(e.extra.groupCount))return void(e.data=(new X.BH).reject(lu.R0.Error("E4022")));this.updateTotalItemsCount(e),e.remoteOperations.paging||(this._updatePagingOptions(e),e.lastLoadOptions.skips=e.skips,e.lastLoadOptions.takes=e.takes),t(e),e.remoteOperations.paging||this._processPaging(e,i)}CC(this,e,i,s,0,e.data)}_processSkips(e,t,i){if(i){var a=e[0],n=t[0],s=a&&a.items;void 0!==n&&(a.isContinuation=!0,s&&(a.items=s.slice(n),this._processSkips(a.items,t.slice(1),i-1)))}}_processTakes(e,t,i,a,n){if(a&&e){n=n||[];var s=e[e.length-1],o=s&&s.items,l=i[0];s&&(void 0!==l&&(s.count-(s.isContinuation&&t[0]||0)||o.length)>l&&(s.isContinuationOnNextPage=!0,n.forEach(c=>{c.isContinuationOnNextPage=!0}),o&&(o=o.slice(0,l),s.items=o)),n.push(s),this._processTakes(o,t.slice(1),i.slice(1),a-1,n))}}_processPaging(e,t){this._processSkips(e.data,e.skips,t),this._processTakes(e.data,e.skips,e.takes,t)}isLastLevelGroupItemsPagingLocal(){return!1}sortLastLevelGroupItems(e){return e}refresh(e,t){var l,d,i=this,a=i._dataSource,{storeLoadOptions:n}=e,s=e.group||e.storeLoadOptions.group,o=He.normalizeSortingInfo(i._group);function u(c,f){f.length===d+1&&(c.isExpanded=l)}for(d=0;d<o.length;d++)l=sp(s,d),sp(i._group,d)!==l&&i.foreachGroups(u);if(super.refresh.apply(this,arguments),s&&e.remoteOperations.paging&&t.reload)return El(i,c=>{var f=op(a,{filter:as(c.path,{filter:n.filter,group:s}),group:s.slice(c.path.length),select:n.select}),p=op(a,{filter:uC(c.path,{filter:n.filter,group:s},!0),group:s.slice(c.path.length-1,c.path.length),select:n.select});return(0,X.gx)(p,f).done((_,w)=>{_=parseInt(_.length?_[0]:_),w=parseInt(w.length?w[0]:w),c.offset=_,c.count!==w&&(c.count=w,i.updateTotalItemsCount(e))})},!0)}}var lp=function(r,e){var t=new X.BH,i=(0,B.l)({skip:0,take:1,requireTotalCount:!0},e);return r.load(i).done((a,n)=>{t.resolve(n&&n.totalCount)}).fail(t.reject.bind(t)),t},du=function(r,e,t){return r.foreachGroups(i=>{if(!i.isExpanded)return e(i)},!1,!1,t,!0)},bC=function(r,e){var t=0,i=e||0;return e&&(du(r,a=>{if(a.offset-t>=e)return!1;t+=a.count-1}),i+=t),i},dD=function r(e,t,i,a,n,s){for(var o=0,l=!1,d=0;d<t.length;d++){var u=t[d];if(void 0!==u.items){i.push(u.key);var c=e.findGroupInfo(i);if(c&&!c.isExpanded)u.collapsedItems=u.items,u.items=null,a+=c.count,--s<0&&o++,n&&(l=!0);else if(u.items){var f=r(e,u.items,i,a,n,s);n&&(f.offset-a>1?u.isContinuation=!0:l=!0),a=f.offset,(s=f.take)<0&&(u.items.length?u.isContinuationOnNextPage=!0:o++)}i.pop()}else n&&(l=!0),a++,--s<0&&o++;n=!1}return l&&t.splice(0,1),o&&t.splice(-o,o),{offset:a,take:s}},uD=function(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(!(0,ka.OI)(null,r[t],e[t]))return!1;return!0},yC=function r(e,t,i,a,n){if(t){for(var s=0;s<t.length;s++){var o=t[s];if("key"in o&&void 0!==o.items){i.push(o.key),n&&uD(n.path,i)&&!o.isContinuation&&(n.offset=a);var l=e.findGroupInfo(i);l&&!o.isContinuation&&(l.offset=a),l&&!l.isExpanded?a+=l.count:a=r(e,o.items,i,a,n),i.pop()}else a++}return a}},pD=function r(e,t){var i=e.count||e.items.length;if(!e.count&&t>1){i=0;for(var a=0;a<e.items.length;a++)i+=r(e.items[a],t-1)}return i};class xC extends cC{handleDataLoading(e){var s,{storeLoadOptions:t}=e,i=[],a=0,n=!1,{group:o}=e.loadOptions,l=0;if(function(r,e){if(e.group){var t=He.normalizeSortingInfo(e.group),i=He.normalizeSortingInfo(r.sort);r.sort=Gs.Z.arrangeSortingInfo(t,i),delete e.group}}(t,e.loadOptions),e.group=e.group||o,!e.isCustomLoading){var d=(0,B.l)({},t);d.skip=bC(this,t.skip),d.skip&&d.take&&o&&(d.skip--,d.take++,n=!0),d.take&&o&&(s=d.take,d.take++),du(this,u=>{if(u.offset>=d.skip+d.take+l)return!1;u.offset>=d.skip+l&&u.count&&(l+=u.count-1,i.push(u),a+=u.count)}),(0,Y.S6)(i,function(){d.filter=function(r,e,t){for(var i=He.normalizeSortingInfo(t||e.group),a=[],n=0;n<r.length;n++){for(var s=[],o=0;o<=n;o++)s.push([i[o].selector,n===o?"<>":"=",r[o]]);a.push(He.combineFilters(s))}return a=He.combineFilters(a,"or"),He.combineFilters([a,e.filter])}(this.path,d,o)}),e.storeLoadOptions=d,e.collapsedGroups=i,e.collapsedItemsCount=a,e.skip=d.skip||0,e.skipFirstItem=n,e.take=s}}handleDataLoaded(e,t){var{collapsedGroups:i}=e,a=He.normalizeSortingInfo(e.group),n=a.length;function s(u,c,f,p,_){if(u&&c.length&&f.length){var w,S,x=(0,Ot.Ex)(c[0],!0);for(S=0;S<u.length&&(w=(0,Ot.Ex)(u[S].key,!0),!(_>=p.offset||x===w));S++)_+=pD(u[S],f.length);(!u.length||x!==w)&&u.splice(S,0,{key:c[0],items:[],count:1===c.length?p.count:void 0}),s(u[S].items,c.slice(1),f.slice(1),p,_)}}if(e.collapsedItemsCount&&e.extra&&e.extra.totalCount>=0&&(e.extra._totalCountWasIncreasedByCollapsedItems||(e.extra.totalCount+=e.collapsedItemsCount,e.extra._totalCountWasIncreasedByCollapsedItems=!0)),t(e),n){var{data:o}=e,l=(0,va.Z)(o);if(Gs.Z.multiLevelGroup(l,a).enumerate().done(u=>{o=u}),i)for(var d=0;d<i.length;d++)s(o,i[d].path,a,i[d],e.skip);e.isCustomLoading||dD(this,o,[],e.skip,e.skipFirstItem,e.take),e.data=o}}isGroupItemCountable(e){return null===e.items}updateTotalItemsCount(){var e=0;du(this,t=>{t.count&&(e-=t.count-1)}),super.updateTotalItemsCount(e)}changeRowExpand(e){var l,t=this,i=t._dataSource,a=i.beginPageIndex?i.beginPageIndex():i.pageIndex(),n=i.items(),s=bC(t,a*i.pageSize()),o=t.findGroupInfo(e);return l=o&&!o.isExpanded?(new X.BH).resolve(o.count):lp(i,{filter:as(e,{filter:i.filter(),group:i.group()})}),(0,X.gx)(l).done(d=>{d=parseInt(d.length?d[0]:d),o?(yC(t,n,[],s),o.isExpanded=!o.isExpanded,o.count=d):(yC(t,n,[],s,o={offset:-1,count:d,path:e,isExpanded:!1}),o.offset>=0&&t.addGroupInfo(o)),t.updateTotalItemsCount()}).fail(function(){i._eventsStrategy.fireEvent("loadError",arguments)})}allowCollapseAll(){return!1}refresh(e,t){var i=this,{storeLoadOptions:a}=e,n=i._dataSource;if(super.refresh.apply(this,arguments),t.reload)return du(i,s=>{var o=lp(n,{filter:as(s.path,a)}),l=lp(n,{filter:uC(s.path,a)});return(0,X.gx)(l,o).done((d,u)=>{d=parseInt(d.length?d[0]:d),u=parseInt(u.length?u[0]:u),s.offset=d,s.count!==u&&(s.count=u,i.updateTotalItemsCount())})},!0)}}var dp="dx-datagrid-group-panel",uu="dx-group-panel-item",SC="dx-toolbar-label";Yd.extend(r=>class extends r{init(){super.init.apply(this,arguments),this._initGroupingHelper()}_initGroupingHelper(e){var t=this._grouping,i=this.option("grouping.autoExpandAll"),a=this.option("focusedRowEnabled"),n=e?e.remoteOperations:this.remoteOperations();!(n.filtering&&n.sorting&&n.paging)||n.grouping||!i&&a?(!t||t instanceof xC)&&(this._grouping=new wC(this)):(!t||t instanceof wC)&&(this._grouping=new xC(this))}totalItemsCount(){var e=super.totalItemsCount();return e>0&&this._dataSource.group()&&this._dataSource.requireTotalCount()?e+this._grouping.totalCountCorrection():e}itemsCount(){return this._dataSource.group()?this._grouping.itemsCount()||0:super.itemsCount.apply(this,arguments)}allowCollapseAll(){return this._grouping.allowCollapseAll()}isGroupItemCountable(e){return this._grouping.isGroupItemCountable(e)}isRowExpanded(e){var t=this._grouping.findGroupInfo(e);return t?t.isExpanded:!this._grouping.allowCollapseAll()}collapseAll(e){return this._collapseExpandAll(e,!1)}expandAll(e){return this._collapseExpandAll(e,!0)}_collapseExpandAll(e,t){var i=this._dataSource,a=i.group(),n=He.normalizeSortingInfo(a||[]);if(n.length){for(var s=0;s<n.length;s++)void 0===e||e===s?n[s].isExpanded=t:a&&a[s]&&(n[s].isExpanded=a[s].isExpanded);i.group(n),this._grouping.foreachGroups((o,l)=>{(void 0===e||e===l.length-1)&&(o.isExpanded=t)},!1,!0),this.resetPagesCache()}return!0}refresh(){return super.refresh.apply(this,arguments),this._grouping.refresh.apply(this._grouping,arguments)}changeRowExpand(e){var t=this._dataSource;if(t.group())return t.beginLoading(),this._lastLoadOptions&&(this._lastLoadOptions.groupExpand=!0),this._changeRowExpandCore(e).always(()=>{t.endLoading()})}_changeRowExpandCore(e){return this._grouping.changeRowExpand(e)}_hasGroupLevelsExpandState(e,t){if(e&&Array.isArray(e))for(var i=0;i<e.length;i++)if(e[i].isExpanded===t)return!0}_customizeRemoteOperations(e,t){var{remoteOperations:i}=e;e.storeLoadOptions.group?(i.grouping&&!e.isCustomLoading&&(!i.groupPaging||this._hasGroupLevelsExpandState(e.storeLoadOptions.group,!0))&&(i.paging=!1),!i.grouping&&(!i.sorting||!i.filtering||e.isCustomLoading||this._hasGroupLevelsExpandState(e.storeLoadOptions.group,!1))&&(i.paging=!1)):!e.isCustomLoading&&i.paging&&t.grouping&&this.resetCache(),super._customizeRemoteOperations.apply(this,arguments)}_handleDataLoading(e){return super._handleDataLoading(e),this._initGroupingHelper(e),this._grouping.handleDataLoading(e)}_handleDataLoaded(e){return this._grouping.handleDataLoaded(e,super._handleDataLoaded.bind(this))}_handleDataLoadedCore(e){return this._grouping.handleDataLoadedCore(e,super._handleDataLoadedCore.bind(this))}});var up=function(r,e){var t=this._columnsController;switch(e.itemData.value){case"group":var i=t._dataSource.group()||[];t.columnOption(r.dataField,"groupIndex",i.length);break;case"ungroup":t.columnOption(r.dataField,"groupIndex",-1);break;case"ungroupAll":this.component.clearGrouping()}},EC=r=>{var e=r?.visible;return"auto"===e?"desktop"===ft.Z.current().deviceType:!!e},IC=(r,e)=>EC(r)&&!(!r?.allowColumnDragging||!e.allowGrouping);He.registerModule("grouping",{defaultOptions:()=>({grouping:{autoExpandAll:!0,allowCollapsing:!0,contextMenuEnabled:!1,expandMode:"buttonClick",texts:{groupContinuesMessage:ae.Z.format("dxDataGrid-groupContinuesMessage"),groupContinuedMessage:ae.Z.format("dxDataGrid-groupContinuedMessage"),groupByThisColumn:ae.Z.format("dxDataGrid-groupHeaderText"),ungroup:ae.Z.format("dxDataGrid-ungroupHeaderText"),ungroupAll:ae.Z.format("dxDataGrid-ungroupAllText")}},groupPanel:{visible:!1,emptyPanelText:ae.Z.format("dxDataGrid-groupPanelEmptyText"),allowColumnDragging:!0}}),extenders:{controllers:{data:r=>class extends r{init(){super.init(),this.createAction("onRowExpanding"),this.createAction("onRowExpanded"),this.createAction("onRowCollapsing"),this.createAction("onRowCollapsed")}_beforeProcessItems(e){var t=this._columnsController.getGroupColumns();return(e=super._beforeProcessItems(e)).length&&t.length&&(e=this._processGroupItems(e,t.length)),e}_processItem(e,t){return(0,C.$K)(e.groupIndex)&&(0,C.HD)(e.rowType)&&0===e.rowType.indexOf("group")?(e=this._processGroupItem(e,t),t.dataIndex=0):e=super._processItem.apply(this,arguments),e}_processGroupItem(e,t){return e}_processGroupItems(e,t,i){var a=this._columnsController.getGroupColumns(),n=a[a.length-t];if(!i){var s=this.option("scrolling.mode");i={collectContinuationItems:"virtual"!==s&&"infinite"!==s,resultItems:[],path:[],values:[]}}var{resultItems:o}=i;if(i.data&&(i.collectContinuationItems||!i.data.isContinuation)&&o.push({rowType:"group",data:i.data,groupIndex:i.path.length-1,isExpanded:!!i.data.items,key:i.path.slice(0),values:i.values.slice(0)}),e)if(0===t)o.push.apply(o,e);else for(var l=0;l<e.length;l++){var d=e[l];d&&"items"in d?(i.data=d,i.path.push(d.key),i.values.push(n&&n.deserializeValue&&!n.calculateDisplayValue?n.deserializeValue(d.key):d.key),this._processGroupItems(d.items,t-1,i),i.data=void 0,i.path.pop(),i.values.pop()):o.push(d)}return o}publicMethods(){return super.publicMethods().concat(["collapseAll","expandAll","isRowExpanded","expandRow","collapseRow"])}collapseAll(e){var t=this._dataSource;t&&t.collapseAll(e)&&(t.pageIndex(0),t.reload())}expandAll(e){var t=this._dataSource;t&&t.expandAll(e)&&(t.pageIndex(0),t.reload())}changeRowExpand(e){var t=this,i=t.isRowExpanded(e),a={key:e,expanded:i};return t.executeAction(i?"onRowCollapsing":"onRowExpanding",a),a.cancel?(new X.BH).resolve():(0,X.gx)(t._changeRowExpandCore(e)).done(()=>{a.expanded=!i,t.executeAction(i?"onRowCollapsed":"onRowExpanded",a)})}_changeRowExpandCore(e){var t=this,i=this._dataSource,a=new X.BH;return i?(0,X.gx)(i.changeRowExpand(e)).done(()=>{t.load().done(a.resolve).fail(a.reject)}).fail(a.reject):a.resolve(),a}isRowExpanded(e){var t=this._dataSource;return t&&t.isRowExpanded(e)}expandRow(e){return this.isRowExpanded(e)?(new X.BH).resolve():this.changeRowExpand(e)}collapseRow(e){return this.isRowExpanded(e)?this.changeRowExpand(e):(new X.BH).resolve()}optionChanged(e){"grouping"===e.name&&(e.name="dataSource"),super.optionChanged(e)}},columns:r=>class extends r{_getExpandColumnOptions(){var e=super._getExpandColumnOptions.apply(this,arguments);return e.cellTemplate=He.getExpandCellTemplate(),e}},editing:r=>class extends r{_isProcessedItem(e){return(0,C.$K)(e.groupIndex)&&(0,C.HD)(e.rowType)&&0===e.rowType.indexOf("group")}}},views:{headerPanel:r=>class extends r{_getToolbarItems(){var e=super._getToolbarItems();return this._appendGroupingItem(e)}_appendGroupingItem(e){if(this._isGroupPanelVisible()){var t=!1;e.push({template:()=>{var a=(0,b.Z)("<div>").addClass(dp);return this._updateGroupPanelContent(a),sl("groupPanel",this,a,void 0,this._handleActionKeyDown.bind(this)),a},name:"groupPanel",onItemRendered:()=>{t&&this.renderCompleted.fire(),t=!0},location:"before",locateInMenu:"never",sortIndex:1}),this.updateToolbarDimensions()}return e}_handleActionKeyDown(e){var{event:t}=e,i=(0,b.Z)(t.target),a=i.closest(".".concat(uu)).index(),n=this._columnsController.getGroupColumns()[a],s=n&&n.index;i.is(".dx-header-filter")?this.getController("headerFilter").showHeaderFilterMenu(s,!0):this._processGroupItemAction(s),t.preventDefault()}_isGroupPanelVisible(){return EC(this.option("groupPanel"))}_renderGroupPanelItems(e,t){var i=this;e.empty(),(0,Y.S6)(t,(a,n)=>{i._createGroupPanelItem(e,n)}),Ac(this)}_createGroupPanelItem(e,t){var i=(0,b.Z)("<div>").addClass(t.cssClass).addClass(uu).data("columnData",t).appendTo(e).text(t.caption);return function Z1(r,e){r.option("useLegacyKeyboardnavigation")||e.attr("tabindex",r.option("tabindex")||0)}(this,i),i}_columnOptionChanged(e){if(!this._requireReady&&!He.checkChanges(e.optionNames,["width","visibleWidth"])){var t=this.element(),i=t&&t.find(".".concat(dp));i&&i.length&&(this._updateGroupPanelContent(i),this.updateToolbarDimensions(),this.renderCompleted.fire())}super._columnOptionChanged()}_updateGroupPanelContent(e){var t=this.getController("columns").getGroupColumns(),i=this.option("groupPanel");this._renderGroupPanelItems(e,t),i.allowColumnDragging&&!t.length&&((0,b.Z)("<div>").addClass("dx-group-panel-message").text(i.emptyPanelText).appendTo(e),e.closest(".".concat("dx-toolbar-item")).addClass(SC),e.closest(".".concat(SC)).css("maxWidth","none"))}allowDragging(e){var t=this.option("groupPanel");return IC(t,e)}getColumnElements(){var e=this.element();return e&&e.find(".".concat(uu))}getColumns(){return this.getController("columns").getGroupColumns()}getBoundingRect(){var e=this.element();if(e&&e.find(".".concat(dp)).length){var t=e.offset();return{top:t.top,bottom:t.top+(0,we.Cr)(e)}}return null}getName(){return"group"}getContextMenuItems(e){var a,t=this.option("grouping.contextMenuEnabled"),i=(0,b.Z)(e.targetElement).closest(".".concat(uu));if(i.length&&(e.column=i.data("columnData")),t&&e.column){var{column:n}=e;if(!(0,C.$K)(n.allowGrouping)||n.allowGrouping){var o=(0,C.$K)(n.groupIndex)&&n.groupIndex>-1,l=this.option("grouping.texts"),d=up.bind(this,n);a=[{text:l.ungroup,value:"ungroup",disabled:!o,onItemClick:d},{text:l.ungroupAll,value:"ungroupAll",onItemClick:d}]}}return a}isVisible(){return super.isVisible()||this._isGroupPanelVisible()}hasGroupedColumns(){return this._isGroupPanelVisible()&&!!this.getColumns().length}optionChanged(e){"groupPanel"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}},rowsView:r=>class extends r{getContextMenuItems(e){var i;if(this.option("grouping.contextMenuEnabled")&&e.row&&"group"===e.row.rowType){var n=this._columnsController.columnOption("groupIndex:".concat(e.row.groupIndex));if(n&&n.allowGrouping){var s=this.option("grouping.texts"),o=up.bind(this,n);(i=[]).push({text:s.ungroup,value:"ungroup",onItemClick:o},{text:s.ungroupAll,value:"ungroupAll",onItemClick:o})}}return i}_rowClick(e){var t=this.option("grouping.expandMode"),a="infinite"!==this.option("scrolling.mode")&&"rowClick"===t&&(0,b.Z)(e.event.target).closest(".".concat("dx-group-row")).length,n=(0,b.Z)(e.event.target).closest(".".concat("dx-datagrid-expand")).length;(a||n)&&this._changeGroupRowState(e),super._rowClick(e)}_changeGroupRowState(e){var t=this.getController("data"),i=t.items()[e.rowIndex],a=this._columnsController.columnOption("groupIndex:".concat(i.groupIndex),"allowCollapsing");("data"===i.rowType||"group"===i.rowType&&!1!==a)&&(t.changeRowExpand(i.key,!0),e.event.preventDefault(),e.handled=!0)}},columnHeadersView:r=>class extends r{getContextMenuItems(e){var t=this.option("grouping.contextMenuEnabled"),i=super.getContextMenuItems(e);if(t&&e.row&&("header"===e.row.rowType||"detailAdaptive"===e.row.rowType)){var{column:a}=e;if(!a.command&&(!(0,C.$K)(a.allowGrouping)||a.allowGrouping)){var n=this.option("grouping.texts"),s=(0,C.$K)(a.groupIndex)&&a.groupIndex>-1,o=up.bind(this,a);(i=i||[]).push({text:n.groupByThisColumn,value:"group",beginGroup:!0,disabled:s,onItemClick:o}),a.showWhenGrouped&&i.push({text:n.ungroup,value:"ungroup",disabled:!s,onItemClick:o}),i.push({text:n.ungroupAll,value:"ungroupAll",onItemClick:o})}}return i}allowDragging(e){var t=this.option("groupPanel");return IC(t,e)||super.allowDragging(e)}}}}});var AC="dx-master-detail-row",hp=function(r){r._expandedItems=[],r._isExpandAll=r.option("masterDetail.autoExpandAll")},RD={defaultOptions:()=>({masterDetail:{enabled:!1,autoExpandAll:!1,template:null}}),extenders:{controllers:{columns:r=>class extends r{_getExpandColumnsCore(){var e=super._getExpandColumnsCore();return this.option("masterDetail.enabled")&&e.push({type:"detailExpand",cellTemplate:Ae.getExpandCellTemplate()}),e}},data:r=>class extends r{init(){hp(this),super.init()}expandAll(e){e<0?(this._isExpandAll=!0,this._expandedItems=[],this.updateItems()):super.expandAll.apply(this,arguments)}collapseAll(e){e<0?(this._isExpandAll=!1,this._expandedItems=[],this.updateItems()):super.collapseAll.apply(this,arguments)}isRowExpandedHack(){return super.isRowExpanded.apply(this,arguments)}isRowExpanded(e){var t=Ae.getIndexByKey(e,this._expandedItems);return Array.isArray(e)?super.isRowExpanded.apply(this,arguments):!!(this._isExpandAll^(t>=0&&this._expandedItems[t].visible))}_getRowIndicesForExpand(e){var t=this.getRowIndexByKey(e);return[t,t+1]}_changeRowExpandCore(e){var t;if(Array.isArray(e))t=super._changeRowExpandCore.apply(this,arguments);else{var i=Ae.getIndexByKey(e,this._expandedItems);if(i>=0){var{visible:a}=this._expandedItems[i];this._expandedItems[i].visible=!a}else this._expandedItems.push({key:e,visible:!0});this.updateItems({changeType:"update",rowIndices:this._getRowIndicesForExpand(e)}),t=(new X.BH).resolve()}return t}_processDataItemHack(){return super._processDataItem.apply(this,arguments)}_processDataItem(e,t){var i=super._processDataItem.apply(this,arguments);return i.isExpanded=this.isRowExpanded(i.key),void 0===t.detailColumnIndex&&(t.detailColumnIndex=-1,(0,Y.S6)(t.visibleColumns,(a,n)=>{if("expand"===n.command&&!(0,C.$K)(n.groupIndex))return t.detailColumnIndex=a,!1})),t.detailColumnIndex>=0&&(i.values[t.detailColumnIndex]=i.isExpanded),i}_processItemsHack(){return super._processItems.apply(this,arguments)}_processItems(e,t){var i=this,{changeType:a}=t,n=[];return e=super._processItems.apply(i,arguments),"loadingAll"===a?e:("refresh"===a&&(i._expandedItems=(0,le.h3)(i._expandedItems,s=>s.visible)),(0,Y.S6)(e,(s,o)=>{n.push(o);var l=Ae.getIndexByKey(o.key,i._expandedItems);"data"===o.rowType&&(o.isExpanded||l>=0)&&!o.isNewRow&&n.push({visible:o.isExpanded,rowType:"detail",key:o.key,data:o.data,values:[]})}),n)}optionChanged(e){var t,i;if("masterDetail"===e.name){switch(e.name="dataSource",e.fullName){case"masterDetail":var a=e.value||{},n=e.previousValue||{};t=a.enabled!==n.enabled,i=a.autoExpandAll!==n.autoExpandAll;break;case"masterDetail.template":hp(this);break;case"masterDetail.enabled":t=!0;break;case"masterDetail.autoExpandAll":i=!0}(t||i)&&hp(this)}super.optionChanged(e)}},resizing:r=>class extends r{fireContentReadyAction(){super.fireContentReadyAction.apply(this,arguments),this._updateParentDataGrids(this.component.$element())}_updateParentDataGrids(e){var t=e.closest(".".concat(AC));t.length&&(0,X.gx)(this._updateMasterDataGrid(t,e)).done(()=>{this._updateParentDataGrids(t.parent())})}_updateMasterDataGrid(e,t){var i=(0,b.Z)(e).data("options"),a=(0,b.Z)(e).closest(".".concat(this.getWidgetContainerClass())).parent().data("dxDataGrid");if(i&&a)return this._updateMasterDataGridCore(a,i)}_updateMasterDataGridCore(e,t){var i=(0,X.BH)();if(e.getView("rowsView").isFixedColumns())this._updateFixedMasterDetailGrids(e,t.rowIndex,(0,b.Z)(t.rowElement)).done(i.resolve);else{if(!0===e.option("scrolling.useNative"))return void e.updateDimensions().done(()=>i.resolve(!0));var a=e.getScrollable();a?a?.update().done(()=>i.resolve()):i.resolve()}return i.promise()}_updateFixedMasterDetailGrids(e,t,i){var a=(0,X.BH)(),n=(0,b.Z)(e.getRowElement(t)),s=(0,b.Z)(e.getView("rowsView").getTableElements()),o=2===n?.length&&(0,we.Cr)(n.eq(0))!==(0,we.Cr)(n.eq(1)),l=2===s?.length&&(0,we.Cr)(s.eq(0))!==(0,we.Cr)(s.eq(1));if(o||l){var d=(0,we.dz)(i);return e.updateDimensions().done(()=>{var u=this.option("columnAutoWidth")&&!0===e.option("scrolling.useNative"),c=u&&d!==(0,we.dz)(i);u&&c?this.updateDimensions().done(()=>a.resolve(!0)):a.resolve(!0)}),a.promise()}return(0,X.BH)().resolve()}_toggleBestFitMode(e){if(super._toggleBestFitMode.apply(this,arguments),this.option("masterDetail.template")){var t=this._rowsView.getTableElement();t&&t.find(".dx-master-detail-cell").css("maxWidth",e?0:"")}}}},views:{rowsView:r=>class extends r{_getCellTemplate(e){var{column:t}=e,i=this._editingController,a=i&&i.isEditRow(e.rowIndex);return"detail"!==t.command||a?super._getCellTemplate.apply(this,arguments):this.option("masterDetail.template")||{allowRenderToDetachedContainer:!1,render:this._getDefaultTemplate(t)}}_isDetailRow(e){return e&&e.rowType&&0===e.rowType.indexOf("detail")}_createRow(e){var t=super._createRow.apply(this,arguments);return e&&this._isDetailRow(e)&&(this.option("showRowLines")&&t.addClass("dx-row-lines"),t.addClass(AC),(0,C.$K)(e.visible)&&t.toggle(e.visible)),t}_renderCells(e,t){var{row:i}=t,n=this._columnsController.getVisibleColumns();i.rowType&&this._isDetailRow(i)?this._needRenderCell(0,t.columnIndices)&&this._renderCell(e,{value:null,row:i,rowIndex:i.rowIndex,column:{command:"detail"},columnIndex:0,change:t.change}).addClass("dx-cell-focus-disabled").addClass("dx-master-detail-cell").attr("colSpan",n.length):super._renderCells.apply(this,arguments)}}}}};He.registerModule("masterDetail",RD);var Di=ve(2063),hu=function(r){for(var e=0,t=0,i=0;i<r.length;++i)if("'"===r[i]&&e++,"."===r[i]&&(++t,e%2==0))return{occurrence:t,index:i};return{occurrence:1,index:-1}},cp=function(r,e,t){for(var i=-1;t--&&i++<r.length;)i=r.indexOf(e,i);return i},pp=function(r,e){return-1===e?[r]:[r.slice(0,e),r.slice(e+1)]},cu=function(r,e){if("string"==typeof e){var t=e.split(";"),i=qt.Z.getSign(r,e);t[1]=t[1]||"-"+t[0],e=(e=t[i<0?1:0]).replace(/'([^']*)'/g,o=>o.split("").map(()=>" ").join("").substr(2));var a=/^[^#0.,]*/.exec(e)[0].length,n=/[^#0.,]*$/.exec(e)[0].length;return{start:a,end:r.length-n}}return{start:0,end:r.length}},TC=function(r,e){var t=qt.Z.getDecimalSeparator(),i=new RegExp("[^0-9"+(0,le.hr)(t)+"]","g");return e.slice(0,r).replace(i,"").length},DC=function(r){return r.split("").reverse().join("")},OC=function(r,e){if(!r)return-1;for(var t=/[0-9]/g,i=1,a=null,n=t.exec(e);n;){if(a=n.index,i>=r)return a;i++,n=t.exec(e)}return null===a?e.length:a},ns=function(r,e){return void 0===r.start&&(r={start:r,end:r}),{start:r.start+e,end:r.end+e}};function Cn(r,e,t){r=ns(r,0);var i=cu(e,t);return{start:(0,Di.n$)(r.start,i.start,i.end),end:(0,Di.n$)(r.end,i.start,i.end)}}var kD=ve(8541),MD=ve(3599),RC=ve(216),LC=ve(8740),PC="dxNumberBox",FC=(0,Ee.V4)(kt.Z.up,PC),VC=(0,Ee.V4)(kt.Z.cancel,PC),WD=Dr.default.inherit({_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup:function(){this.callBase();var r="dx-numberbox-spin-"+this.option("direction");this.$element().addClass("dx-numberbox-spin-button").addClass(r),this._spinIcon=(0,b.Z)("<div>").addClass(r+"-icon").appendTo(this.$element())},_render:function(){this.callBase();var r=(0,Ee.V4)(kt.Z.down,this.NAME),e=this.$element();z.Z.off(e,r),z.Z.on(e,r,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler:function(r){r.preventDefault(),this._clearTimer(),z.Z.on(this.$element(),js.Z.name,function(){this._feedBackDeferred=new X.BH,(0,LC.dR)(this._feedBackDeferred),this._spinChangeHandler({event:r}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:r})}.bind(this));var e=at.Z.getDocument();z.Z.on(e,FC,this._clearTimer.bind(this)),z.Z.on(e,VC,this._clearTimer.bind(this)),this._spinChangeHandler({event:r})},_dispose:function(){this._clearTimer(),this.callBase()},_clearTimer:function(){z.Z.off(this.$element(),js.Z.name);var r=at.Z.getDocument();z.Z.off(r,FC),z.Z.off(r,VC),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged:function(r){switch(r.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(r)}}});const Js=WD;class UD extends RC.Z{_attachEvents(e,t){var{editor:i}=this,a=(0,Ee.V4)(kt.Z.down,i.NAME),n=t.children(),s=i._createAction(o=>i._spinButtonsPointerDownHandler(o));z.Z.off(t,a),z.Z.on(t,a,o=>s({event:o})),Js.getInstance(n.eq(0)).option("onChange",o=>i._spinUpChangeHandler(o)),Js.getInstance(n.eq(1)).option("onChange",o=>i._spinDownChangeHandler(o))}_create(){var{editor:e}=this,t=(0,b.Z)("<div>").addClass("dx-numberbox-spin-container"),i=(0,b.Z)("<div>").appendTo(t),a=(0,b.Z)("<div>").appendTo(t),n=this._getOptions();return this._addToContainer(t),e._createComponent(i,Js,(0,B.l)({direction:"up"},n)),e._createComponent(a,Js,(0,B.l)({direction:"down"},n)),this._legacyRender(e.$element(),this._isTouchFriendly(),n.visible),{instance:t,$element:t}}_getOptions(){var{editor:e}=this;return{visible:this._isVisible(),disabled:e.option("disabled")}}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showSpinButtons")}_isTouchFriendly(){var{editor:e}=this;return e.option("showSpinButtons")&&e.option("useLargeSpinButtons")}_legacyRender(e,t,i){e.toggleClass("dx-numberbox-spin-touch-friendly",t),e.toggleClass("dx-numberbox-spin",i)}update(){if(super.update()){var{editor:t,instance:i}=this,a=t.$element(),n=this._isVisible(),s=this._isTouchFriendly(),o=i.children(),l=Js.getInstance(o.eq(0)),d=Js.getInstance(o.eq(1)),u=this._getOptions();l.option(u),d.option(u),this._legacyRender(a,s,n)}}}var jD=Math,YD=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],JD=MD.Z.inherit({_supportedKeys:function(){return(0,B.l)(this.callBase(),{upArrow:function(r){(0,Ee.j1)(r)||(r.preventDefault(),r.stopPropagation(),this._spinUpChangeHandler(r))},downArrow:function(r){(0,Ee.j1)(r)||(r.preventDefault(),r.stopPropagation(),this._spinDownChangeHandler(r))},enter:function(){}})},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:ae.Z.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:function(){return!1},_getDefaultButtons:function(){return this.callBase().concat([{name:"spins",Ctor:UD}])},_isSupportInputMode:function(){var r=parseFloat(ni.Z.version);return ni.Z.chrome&&r>=66||ni.Z.safari&&r>=12},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return ft.Z.real().generic&&!ft.Z.isSimulator()},options:{useLargeSpinButtons:!1}},{device:function(){return"desktop"!==ft.Z.real().deviceType&&!this._isSupportInputMode()}.bind(this),options:{mode:"number"}}])},_initMarkup:function(){this._renderSubmitElement(),this.$element().addClass("dx-numberbox"),this.callBase()},_getDefaultAttributes:function(){var r=this.callBase();return r.inputmode="decimal",r},_renderContentImpl:function(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement:function(){this._$submitElement=(0,b.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(r){this._getSubmitElement().val((0,le.FH)(r))},_getSubmitElement:function(){return this._$submitElement},_keyPressHandler:function(r){this.callBase(r);var e=(0,Ee.qK)(r);if(!/[\d.,eE\-+]/.test(e)){var i=(0,Ee.EV)(r);return(0,Ee.j1)(r)||i&&YD.includes(i)?void 0:(r.preventDefault(),!1)}this._keyPressed=!0},_onMouseWheel:function(r){this._spinValueChange(r.delta>0?1:-1,r)},_renderValue:function(){var r=this._input().val(),e=this.option("value");(!r.length||Number(r)!==e)&&(this._forceValueRender(),this._toggleEmptinessEventHandler());var t=(0,C.$K)(e)?null:ae.Z.format("dxNumberBox-noDataText");return this.setAria({valuenow:(0,le.IS)(e,""),valuetext:t}),this.option("text",this._input().val()),this._updateButtons(),(new X.BH).resolve()},_forceValueRender:function(){var r=this.option("value"),e=Number(r),t=isNaN(e)?"":this._applyDisplayValueFormatter(r);this._renderDisplayText(t)},_applyDisplayValueFormatter:function(r){return this.option("displayValueFormatter")(r)},_renderProps:function(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:(0,le.IS)(this.option("min"),""),valuemax:(0,le.IS)(this.option("max"),"")})},_spinButtonsPointerDownHandler:function(){var r=this._input();!this.option("useLargeSpinButtons")&&at.Z.getActiveElement()!==r[0]&&z.Z.trigger(r,"focus")},_spinUpChangeHandler:function(r){this.option("readOnly")||this._spinValueChange(1,r.event||r)},_spinDownChangeHandler:function(r){this.option("readOnly")||this._spinValueChange(-1,r.event||r)},_spinValueChange:function(r,e){var t=parseFloat(this.option("step"));if(0!==t){var i=parseFloat(this._normalizeInputValue())||0;i=this._correctRounding(i,t*r);var a=this.option("min"),n=this.option("max");(0,C.$K)(a)&&(i=Math.max(a,i)),(0,C.$K)(n)&&(i=Math.min(n,i)),this._saveValueChangeEvent(e),this.option("value",i)}},_correctRounding:function(r,e){var t=/[,.](.*)/,i=t.test(r),a=t.test(e);if(i||a){var n=i?t.exec(r)[0].length:0,s=a?t.exec(e)[0].length:0,o=jD.max(n,s);return this._round(r+e,o)}return r+e},_round:function(r,e){e=e||0;var t=Math.pow(10,e);return r*=t,Math.round(r)/t},_renderValueChangeEvent:function(){this.callBase();var r=(0,Ee.V4)("focusout","NumberBoxForceValueChange");z.Z.off(this.element(),r),z.Z.on(this.element(),r,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue:function(){if("number"!==this.option("mode")){var r=this._input(),e=this._applyDisplayValueFormatter(this.option("value"));r.val(null),r.val(e)}},_valueChangeEventHandler:function(r){var e=this._input(),t=this._normalizeText(),i=this._parseValue(t),a="."!==t&&"-"!==t;!this._isValueValid()||this._validateValue(i)?(a&&this.callBase(r,isNaN(i)?null:i),this._applyValueBoundaries(t,i),this.validationRequest.fire({value:i,editor:this})):e.val(this._applyDisplayValueFormatter(i))},_applyValueBoundaries:function(r,e){var t=this._isValueIncomplete(r),i=this._isValueInRange(r);!t&&!i&&null!==e&&Number(r)!==e&&this._input().val(this._applyDisplayValueFormatter(e))},_replaceCommaWithPoint:function(r){return r.replace(",",".")},_inputIsInvalid:function(){var r="number"===this.option("mode"),e=this._input().get(0).validity;return r&&e&&e.badInput},_renderDisplayText:function(r){this._inputIsInvalid()||this.callBase(r)},_isValueIncomplete:function(r){return/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(r)},_isValueInRange:function(r){return(0,Di.Z2)(r,this.option("min"),this.option("max"))},_isNumber:function(r){return null!==this._parseValue(r)},_validateValue:function(r){var e=this._normalizeText(),t=this._isValueValid(),i=!0,a=this._isNumber(e);return isNaN(Number(r))&&(i=!1),!r&&t?i=!0:!a&&!t&&(i=!1),this.option({isValid:i,validationError:i?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),i},_normalizeInputValue:function(){return this._parseValue(this._normalizeText())},_normalizeText:function(){var r=this._input().val().trim();return this._replaceCommaWithPoint(r)},_parseValue:function(r){var e=parseFloat(r);return isNaN(e)?null:(0,Di.n$)(e,this.option("min"),this.option("max"))},_clearValue:function(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},clear:function(){null===this.option("value")?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged:function(r){switch(r.name){case"value":this._validateValue(r.value),this._setSubmitValue(r.value),this.callBase(r),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(r)}}}),fp="dxNumberFormatter",Il="minus",iO=JD.inherit({_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:function(r){return"del"===r},_supportedKeys:function(){return this._useMaskBehavior()?(0,B.l)(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex:function(r){var e=qt.Z.getDecimalSeparator(),t=hu(this.option("format")).occurrence;return cp(r,e,t)},_focusInHandler:function(r){this._preventNestedFocusEvent(r)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0;var e=this._caret();if(e.start===e.end&&this._useMaskBehavior()){var t=this._getInputVal(),i=this._getTextSeparatorIndex(t);i>=0?this._caret({start:i,end:i}):this._moveCaretToBoundaryEventHandler(-1,r)}}.bind(this),0)),this.callBase(r)},_focusOutHandler:function(r){var e=!this._preventNestedFocusEvent(r);e&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(r),e&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(r){var e=this._getFormatPattern(),t=this.option("value");return(this._format(t,e)||"")!==r},_updateFormattedValue:function(){var r=this._getInputVal();this._hasValueBeenChanged(r)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&z.Z.trigger(this._input(),"change"))},_arrowHandler:function(r,e){if(this._useMaskBehavior()){var t=this._getInputVal(),i=this._getFormatPattern(),a=ns(this._caret(),r);(function(r,e,t){var i=Cn(r=ns(r,0),e,t);return r.start>=i.start&&r.end<=i.end})(a,t,i)||(a=1===r?a.end:a.start,e.preventDefault(),this._caret(Cn(a,t,i)))}},_moveCaretToBoundary:function(r){var e=cu(this._getInputVal(),this._getFormatPattern()),t=ns(1===r?e.start:e.end,0);this._caret(t)},_moveCaretToBoundaryEventHandler:function(r,e){!this._useMaskBehavior()||e&&e.shiftKey||(this._moveCaretToBoundary(r),e&&e.preventDefault())},_shouldMoveCaret:function(r,e){var t=qt.Z.getDecimalSeparator(),i=r.charAt(e.end)===t;return(this._lastKey===t||"."===this._lastKey||","===this._lastKey)&&i},_getInputVal:function(){return qt.Z.convertDigits(this._input().val(),!0)},_keyboardHandler:function(r){if(this.clearCaretTimeout(),this._lastKey=qt.Z.convertDigits((0,Ee.qK)(r),!0),this._lastKeyName=(0,Ee.EV)(r),!this._shouldHandleKey(r.originalEvent))return this.callBase(r);var i,e=this._getInputVal(),t=this._caret();i=this._lastKeyName===Il?"":110===r.which?qt.Z.getDecimalSeparator():this._lastKey;var a=this._tryParse(e,t,i);return this._shouldMoveCaret(e,t)&&(this._moveCaret(1),r.originalEvent.preventDefault()),void 0===a?this._lastKeyName!==Il&&r.originalEvent.preventDefault():this._parsedValue=a,this.callBase(r)},_keyPressHandler:function(r){this._useMaskBehavior()||this.callBase(r)},_removeHandler:function(r){var e=this._caret(),t=this._getInputVal(),i=e.start,a=e.end;this._lastKey=(0,Ee.qK)(r),this._lastKeyName=(0,Ee.EV)(r);var n=this._isDeleteKey(this._lastKeyName),s=!n;if(i===a){if(!(s&&i>0||n&&i<t.length))return void r.preventDefault();n&&a++,s&&i--}var d=t.slice(i,a);if(this._isStub(d))this._moveCaret(n?1:-1),(this._parsedValue<0||1/this._parsedValue==-1/0)&&(this._revertSign(r),this._setTextByParsedValue(),this.option("valueChangeEvent").split(" ").includes("input")&&z.Z.trigger(this._input(),"input")),r.preventDefault();else{var c=qt.Z.getDecimalSeparator();if(d!==c){if(a-i<t.length&&this._replaceSelectedText(t,{start:i,end:a},"").search(/[0-9]/)<0&&this._isValueInRange(0))return void(this._parsedValue=this._parsedValue<0||1/this._parsedValue==-1/0?-0:0);var w=this._tryParse(t,{start:i,end:a},"");void 0===w?r.preventDefault():this._parsedValue=w}else{var f=t.indexOf(c);this._isNonStubAfter(f+1)&&(this._moveCaret(n?1:-1),r.preventDefault())}}},_isPercentFormat:function(){return-1!==this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")},_parse:function(r,e){var t=this.option("format"),i=(0,C.mf)(t.parser),a=i?t.parser:qt.Z.parse,n=0;if(!i){var s=hu(e).index,o=this._getTextSeparatorIndex(r),l=-1!==s?s:e.length,d=-1!==o?o:r.length;d>l&&-1===e.indexOf("#")&&(n=d-l)}return a(r=r.substr(n),e)},_format:function(r,e){var t=this.option("format"),i=t?.formatter||t,a=(0,C.mf)(i)?i:qt.Z.format;return null===r?"":a(r,e)},_getFormatPattern:function(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat:function(){var r=this.option("format"),e=(0,C.mf)(r?.parser),t=(0,C.HD)(r)&&(r.indexOf("0")>=0||r.indexOf("#")>=0);this._currentFormat=e||t||"exponential"===r||"exponential"===r?.type?r:(0,kD.y)(n=>{var s=this._format(n,r);return qt.Z.convertDigits(s,!0)})},_getFormatForSign:function(r){var e=this._getFormatPattern();if((0,C.HD)(e)){var t=e.split(";"),i=qt.Z.getSign(r,e);return t[1]=t[1]||"-"+t[0],i<0?t[1]:t[0]}return qt.Z.getSign(r)<0?"-":""},_removeStubs:function(r,e){var t=this._getFormatForSign(r),i=qt.Z.getThousandsSeparator(),a=this._getStubs(t),n=r;if(a.length){var s=a[0],o=new RegExp("("+(0,le.hr)(a[1]||"")+")$","g"),l=new RegExp("[-"+(0,le.hr)(e?"":i)+"]","g");n=n.replace(s,"").replace(o,"").replace(l,"")}return n},_getStubs:function(r){var e=/[^']([#0.,]+)/g.exec(r),t=e&&e[0].trim();return r.split(t).map(function(i){return i.replace(/'/g,"")})},_truncateToPrecision:function(r,e){if((0,C.$K)(r)){var t=r.toString(),i=t.indexOf(".");if(t&&i>-1){var a=parseFloat(t.substr(0,i+e+1));return isNaN(a)?r:a}}return r},_tryParse:function(r,e,t){var i=e.start!==e.end,a=i&&0===e.start&&e.end===r.length,n=qt.Z.getDecimalSeparator();if(a&&t===n)return 0;var s=this._replaceSelectedText(r,e,t),o=this._getFormatPattern(),l=this._getParsedValue(s,o),d=!o.parser&&this._getPrecisionLimits(s).max,c=t===n&&0===d,f=!i&&!(l!==this._parsedValue)&&"-"!==t&&this._isStub(t);return c||f||(""===this._removeStubs(s)&&(l=Math.abs(0*this._parsedValue)),isNaN(l))?void 0:(l=d?this._truncateToPrecision(null===l?this._parsedValue:l,d):l,!o.parser&&this._isPercentFormat()?function(r,e){return r&&(0,Di.zB)(r/100,e)}(l,d):l)},_getParsedValue:function(r,e){var t=qt.Z.getSign(r,e?.formatter||e),i=this._removeStubs(r,!0),a=this._parse(i,e),n=a<0?-1:1;return(0,C.kE)(a)&&t!==n?t*a:a},_isValueIncomplete:function(r){if(!this._useMaskBehavior())return this.callBase(r);var e=this._caret(),t=qt.Z.getDecimalSeparator(),i=this._getTextSeparatorIndex(r),a=i>=0&&i<e.start,n=this._removeStubs(r,!0).split(t);if(!a||2!==n.length)return!1;var s=n[1].length,l=!!this._getFormatPattern().parser,d=!l&&this._getPrecisionLimits(this._getFormatPattern(),r),u=!!l||(0,Di.Z2)(s,d.min,d.max),c="0"===n[1].charAt(s-1);return u&&(c||!s)},_isValueInRange:function(r){var e=(0,le.IS)(this.option("min"),-1/0),t=(0,le.IS)(this.option("max"),1/0);return(0,Di.Z2)(r,e,t)},_setInputText:function(r){var e=qt.Z.convertDigits(r,!0),t=function(r,e,t,i){t=ns(t,0);var a=qt.Z.getDecimalSeparator(),n=function VD(r){return 1===r.length&&!!r.match(/^[,.][0-9]*$/g)}(r),s=hu(i).occurrence,o=n?0:cp(r,a,s),l=cp(e,a,s),d=pp(r,o),u=pp(e,l);if(-1!==o&&t.start>o){var p=TC(t.start-o-1,d[1]);return Cn(u[1]?l+1+OC(p,u[1])+1:e.length,e,i)}var w=function(r){return r.replace(/[^0-9e]+$/,"")}(u[0]),x=TC(d[0].length-t.start,DC(d[0])),E=OC(x,DC(w));return Cn(w.length-(E+1),e,i)}(this._getInputVal(),e,this._caret(),this._getFormatPattern());this._input().val(r),this._toggleEmptinessEventHandler(),this._formattedValue=r,this._focusOutOccurs||this._caret(t)},_useMaskBehavior:function(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType:function(){var r="number"===this.option("mode"),e="desktop"===ft.Z.real().deviceType;this._useMaskBehavior()&&r?this._setInputType(e||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:function(r){return(0,C.HD)(r)&&1===r.length},_moveCaret:function(r){if(r){var t=Cn(ns(this._caret(),r),this._getInputVal(),this._getFormatPattern());this._caret(t)}},_shouldHandleKey:function(r){var e=(0,Ee.EV)(r),t=(0,Ee.j1)(r)||r.altKey||r.shiftKey||!this._isChar(e),i=e===Il;return this._useMaskBehavior()&&!t&&!i},_renderInput:function(){this.callBase(),this._renderFormatter()},_renderFormatter:function(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents:function(){z.Z.off(this._input(),"."+fp)},_isInputFromPaste:function(r){var e=r.originalEvent&&r.originalEvent.inputType;return(0,C.$K)(e)?"insertFromPaste"===e:this._isValuePasted},_attachFormatterEvents:function(){var r=this._input();z.Z.on(r,(0,Ee.V4)("input",fp),function(e){this._formatValue(e),this._isValuePasted=!1}.bind(this)),z.Z.on(r,(0,Ee.V4)("dxclick",fp),function(){this._caretTimeout||(this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0,this._caret(Cn(this._caret(),this._getInputVal(),this._getFormatPattern()))}.bind(this),0))}.bind(this)),z.Z.on(r,Hs,function(){this.clearCaretTimeout()}.bind(this))},clearCaretTimeout:function(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue:function(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter:function(r){var e=this._getInputVal().slice(r);return e&&!this._isStub(e,!0)},_isStub:function(r,e){var t=(0,le.hr)(qt.Z.getDecimalSeparator());return new RegExp("^[^0-9"+t+"]+$","g").test(r)&&(e||this._isChar(r))},_parseValue:function(r){return this._useMaskBehavior()?this._parsedValue:this.callBase(r)},_getPrecisionLimits:function(r){var e=this._getFormatForSign(r),t=hu(e).index,i=(pp(e,t)[1]||"").replace(/[^#0]/g,"");return{min:i.replace(/^(0*)#*/,"$1").length,max:i.length}},_revertSign:function(r){if(this._useMaskBehavior()){var e=this._caret();if(e.start!==e.end){if((0,Ee.EV)(r)===Il)return void this._applyRevertedSign(r,e,!0);this._caret(Cn(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(r,e)}},_applyRevertedSign:function(r,e,t){var i=-1*(0,le.IS)(this._parsedValue,null);if((this._isValueInRange(i)||0===i)&&(this._parsedValue=i,t)){var a=this._getFormatPattern(),n=this._getInputVal();this._setTextByParsedValue(),r.preventDefault();var s=this._getInputVal(),o=function(r,e,t){var i=cu(r,t);return cu(e,t).start-i.start}(n,s,a),l=Cn(e=ns(e,o),s,a);this._caret(l)}},_removeMinusFromText:function(r,e){return this._lastKeyName===Il&&"-"===r.charAt(e.start-1)?this._replaceSelectedText(r,{start:e.start-1,end:e.start},""):r},_setTextByParsedValue:function(){var r=this._getFormatPattern(),e=this._parseValue(),t=this._format(e,r)||"";this._setInputText(t)},_formatValue:function(r){var e=this._getInputVal(),t=this._caret(),i=this._removeMinusFromText(e,t),a=i!==e;if(e=i,!this._isInputFromPaste(r)&&this._isValueIncomplete(i))return this._formattedValue=e,void(a&&this._setTextByParsedValue());if(qt.Z.convertDigits(this._formattedValue,!0)!==e){var s=this._tryParse(e,t,"");(0,C.$K)(s)&&(this._parsedValue=s)}this._setTextByParsedValue()},_renderDisplayText:function(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue:function(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue:function(){var r=this._getInputVal();this._parsedValue=this._tryParse(r,this._caret())},_adjustParsedValue:function(){if(this._useMaskBehavior()){var e=this._removeStubs(this._getInputVal())?this._parseValue():null;if(!(0,C.kE)(e))return void(this._parsedValue=e);this._parsedValue=(0,Di.n$)(e,this.option("min"),this.option("max"))}},_valueChangeEventHandler:function(r){if(!this._useMaskBehavior())return this.callBase(r);var e=this._caret();this._saveValueChangeEvent(r),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),e&&this._caret(e)},_optionChanged:function(r){switch(r.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(r);break;default:this.callBase(r)}},_clearCache:function(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean:function(){this._clearCache(),this.callBase()}});const kC=iO;(0,Rt.Z)("dxNumberBox",kC);const gp=kC;var MC="dx-radiobutton-icon",HC=za.Z.inherit({_supportedKeys:function(){return(0,B.l)(this.callBase(),{space:function(r){r.preventDefault(),this._clickAction({event:r})}})},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:function(){return!0},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===ft.Z.real().deviceType&&!ft.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this.$element().addClass("dx-radiobutton")},_initMarkup:function(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon:function(){this._$icon=(0,b.Z)("<div>").addClass(MC),(0,b.Z)("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState:function(r){this.$element().toggleClass("dx-radiobutton-checked",r).find("."+MC).toggleClass("dx-radiobutton-icon-checked",r),this.setAria("checked",r)},_renderClick:function(){var r=(0,Ee.V4)(Ft.u,this.NAME);this._clickAction=this._createAction(function(e){this._clickHandler(e.event)}.bind(this)),z.Z.off(this.$element(),r),z.Z.on(this.$element(),r,function(e){this._clickAction({event:e})}.bind(this))},_clickHandler:function(r){this._saveValueChangeEvent(r),this.option("value",!0)},_optionChanged:function(r){"value"===r.name?(this._renderCheckedState(r.value),this.callBase(r)):this.callBase(r)}});(0,Rt.Z)("dxRadioButton",HC);const oO=HC;var ZC={},Qs=ve(1447),_p="dxListEditDecorator",dO=(0,Ee.V4)(Qs.BL,_p),uO=(0,Ee.V4)(Qs.aq,_p),hO=(0,Ee.V4)(Qs.ut,_p),cO=Ba.Z.inherit({ctor:function(r){this._list=r,this._init()},_init:le.ZT,_shouldHandleSwipe:!1,_attachSwipeEvent:function(r){var e={itemSizeFunc:function(){return this._clearSwipeCache&&(this._itemWidthCache=(0,we.dz)(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}.bind(this)};z.Z.on(r.$itemElement,dO,e,this._itemSwipeStartHandler.bind(this)),z.Z.on(r.$itemElement,uO,this._itemSwipeUpdateHandler.bind(this)),z.Z.on(r.$itemElement,hO,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler:function(r){var e=(0,b.Z)(r.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")?r.cancel=!0:(clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(e,r))},_itemSwipeUpdateHandler:function(r){var e=(0,b.Z)(r.currentTarget);this._swipeUpdateHandler(e,r)},_itemSwipeEndHandler:function(r){var e=(0,b.Z)(r.currentTarget);this._swipeEndHandler(e,r),this._clearSwipeCache=!0},beforeBag:le.ZT,afterBag:le.ZT,_commonOptions:function(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement:function(r){this._shouldHandleSwipe&&(this._attachSwipeEvent(r),this._clearSwipeCache=!0)},afterRender:le.ZT,handleClick:le.ZT,handleKeyboardEvents:le.ZT,handleEnterPressing:le.ZT,handleContextMenu:le.ZT,_swipeStartHandler:le.ZT,_swipeUpdateHandler:le.ZT,_swipeEndHandler:le.ZT,visibilityChange:le.ZT,getExcludedSelectors:le.ZT,dispose:le.ZT});const pO=cO;var zC="dx-list-select-decorator-enabled",WC=(0,Ee.V4)(Ft.u,"dxListEditDecorator");!function lO(r,e,t){var i=ZC,a={};a[r]=i[r]?i[r]:{},a[r][e]=t,(0,B.l)(i,a)}("selection","default",pO.inherit({_init:function(){this.callBase.apply(this,arguments);var r=this._list.option("selectionMode");this._singleStrategy="single"===r,this._containerClass=this._singleStrategy?"dx-list-select-radiobutton-container":"dx-list-select-checkbox-container",this._controlClass=this._singleStrategy?"dx-list-select-radiobutton":"dx-list-select-checkbox",this._controlWidget=this._singleStrategy?oO:bl,this._list.$element().addClass(zC)},beforeBag:function(r){var e=r.$itemElement,t=r.$container.addClass(this._containerClass),i=(0,b.Z)("<div>").addClass(this._controlClass).appendTo(t);new this._controlWidget(i,(0,B.l)(this._commonOptions(),{value:this._isSelected(e),elementAttr:{"aria-label":"Check State"},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:function(a){a.event&&this._list._saveSelectionChangeEvent(a.event),this._processCheckedState(e,a.value),a.event&&a.event.stopPropagation()}.bind(this)}))},modifyElement:function(r){this.callBase.apply(this,arguments);var e=r.$itemElement,t=this._controlWidget.getInstance(e.find("."+this._controlClass));z.Z.on(e,"stateChanged",function(i,a){t.option("value",a)}.bind(this))},_updateSelectAllState:function(){this._$selectAll&&this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender:function(){"all"===this._list.option("selectionMode")&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents:function(r,e){var t=!e,i=this._list,a=this._$selectAll,n=i._getLastItemIndex();return!(!a||!(e&&0===r||t&&r===n)||(i.option("focusedElement",a),i.scrollToItem(i.option("focusedElement")),0))},handleEnterPressing:function(r){if(this._$selectAll&&this._$selectAll.hasClass("dx-state-focused"))return r.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(r),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll:function(){var r=this._$selectAll=(0,b.Z)("<div>").addClass("dx-list-select-all"),e=this._list,t=e._supportedKeys().downArrow.bind(e);this._selectAllCheckBox=e._createComponent((0,b.Z)("<div>").addClass("dx-list-select-all-checkbox").appendTo(r),bl,{elementAttr:{"aria-label":"Select All"},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",t),(0,b.Z)("<div>").addClass("dx-list-select-all-label").text(this._list.option("selectAllText")).appendTo(r),this._list.itemsContainer().prepend(r),this._updateSelectAllState(),this._attachSelectAllHandler()},_attachSelectAllHandler:function(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),z.Z.off(this._$selectAll,WC),z.Z.on(this._$selectAll,WC,this._selectAllClickHandler.bind(this))},_selectAllHandler:function(r){r.event&&r.event.stopPropagation();var e=this._selectAllCheckBox.option("value");r.event&&this._list._saveSelectionChangeEvent(r.event),!0===e?this._selectAllItems():!1===e&&this._unselectAllItems(),this._list._createActionByOption("onSelectAllValueChanged")({value:e})},_checkSelectAllCapability:function(){var r=this._list,e=r._dataController;return!("allPages"===r.option("selectAllMode")&&r.option("grouped")&&!e.group()&&(At.Z.log("W1010"),1))},_selectAllItems:function(){this._checkSelectAllCapability()&&this._list._selection.selectAll("page"===this._list.option("selectAllMode"))},_unselectAllItems:function(){this._checkSelectAllCapability()&&this._list._selection.deselectAll("page"===this._list.option("selectAllMode"))},_selectAllClickHandler:function(r){this._list._saveSelectionChangeEvent(r),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected:function(r){return this._list.isItemSelected(r)},_processCheckedState:function(r,e){e?this._list.selectItem(r):this._list.unselectItem(r)},dispose:function(){this._disposeSelectAll(),this._list.$element().removeClass(zC),this.callBase.apply(this,arguments)},_disposeSelectAll:function(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));var mp=ve(7694),fu=ve(7767);class EO extends RC.Z{constructor(e,t,i){super(e,t,i),this.currentTemplate=null}_attachEvents(e){var{editor:t}=this;e.option("onClick",i=>{var a;(null!==(a=t._shouldCallOpenHandler)&&void 0!==a&&a.call(t)||!t.option("openOnFieldClick"))&&t._openHandler(i)}),z.Z.on(e.$element(),"mousedown",i=>{t.$element().is(".dx-state-focused")&&i.preventDefault()})}_create(){var{editor:e}=this,t=(0,b.Z)("<div>"),i=this._getOptions();this._addToContainer(t);var a=e._createComponent(t,Or.Z,(0,B.l)({},i,{elementAttr:{"aria-label":ae.Z.format("dxDropDownEditor-selectLabel")}}));return this._legacyRender(e.$element(),t,i.visible),{$element:t,instance:a}}_getOptions(){var{editor:e}=this,t=this._isVisible(),a={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:e.option("readOnly"),visible:t};return this._addTemplate(a),a}_isVisible(){var{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,t,i){e.toggleClass("dx-dropdowneditor-button-visible",i),t&&t.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){var{editor:t,instance:i}=this,a=t.$element(),n=this._getOptions();i?.option(n),this._legacyRender(a,i?.$element(),n.visible)}}}var Cp=ve(5270),vu=function(r){if((0,Je.Ym)())return(0,we.Y_)(r)},wp=function(r){return null===r&&(r=void 0),"function"==typeof r&&(r=r()),r},Gi=ve(6395),KC="dx-dropdowneditor-input-wrapper",gu="dx-dropdowneditor-overlay",$C="ios"===ft.Z.current().platform,GC=Jd.Z.inherit({_supportedKeys:function(){return(0,B.l)({},this.callBase(),{tab:function(r){if(this.option("opened")){if(!this._popup.getFocusableElements().length)return void this.close();var e=r.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();e&&(z.Z.trigger(e,"focus"),e.select()),r.preventDefault()}},escape:function(r){return this.option("opened")&&r.preventDefault(),this.close(),!0},upArrow:function(r){return!(!(0,Ee.j1)(r)&&(r.preventDefault(),r.stopPropagation(),r.altKey)&&(this.close(),1))},downArrow:function(r){return!(!(0,Ee.j1)(r)&&(r.preventDefault(),r.stopPropagation(),r.altKey)&&(this._validatedOpening(),1))},enter:function(r){return this.option("opened")&&(r.preventDefault(),this._valueChangeEventHandler(r)),!0}})},_getDefaultButtons:function(){return this.callBase().concat([{name:"dropDown",Ctor:EO}])},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:ae.Z.format("OK"),cancelButtonText:ae.Z.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:function(){return!0},_getDefaultPopupPosition:function(r){var e=(0,li.q)(r);return{offset:{h:0,v:-1},my:e+" top",at:e+" bottom",collision:"flip flip"}},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(r){return"generic"===r.platform},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper:function(){return this.$element().find("."+KC).first()},_init:function(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition:function(r){var{my:e,at:t}=this._getDefaultPopupPosition(r),i=this.option("popupPosition");this.option("popupPosition",(0,B.l)({},i,{my:e,at:t}))},_initVisibilityActions:function(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction:function(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup:function(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role","combobox")},_render:function(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl:function(){this.option("deferRendering")||this._createPopup()},_renderInput:function(){this.callBase(),this._wrapInput(),this._setDefaultAria()},_wrapInput:function(){this._$container=this.$element().wrapInner((0,b.Z)("<div>").addClass(KC)).children().eq(0)},_setDefaultAria:function(){this.setAria({haspopup:"true",autocomplete:"list"})},_readOnlyPropValue:function(){return!this._isEditable()||this.callBase()},_cleanFocusState:function(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate:function(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask:function(){this.option("fieldTemplate")||this.callBase()},_renderField:function(){var r=this._getFieldTemplate();r&&this._renderTemplatedField(r,this._fieldRenderData())},_renderPlaceholder:function(){this._getFieldTemplate()||this.callBase()},_renderValue:function(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_renderTemplatedField:function(r,e){var t=(0,fu.si)(this._input()),i=this._$container;this._detachKeyboardEvents(),this._refreshButtonsContainer(),this._detachWrapperContent(),this._detachFocusEvents(),i.empty();var a=(0,b.Z)("<div>").addClass("dx-dropdowneditor-field-template-wrapper").appendTo(i);r.render({model:e,container:(0,lt.u)(a),onRendered:()=>{if(this.$element().find(a).length){var s=this._input();if(!s.length)throw At.Z.Error("E1010");this._integrateInput(),t&&z.Z.trigger(s,"focus")}}}),this._attachWrapperContent(i)},_detachWrapperContent(){var r,e,t;this.option("useHiddenSubmitElement")&&(null===(r=this._$submitElement)||void 0===r||r.detach());var a=null===(e=this._$beforeButtonsContainer)||void 0===e?void 0:e[0].parentNode,n=null===(t=this._$afterButtonsContainer)||void 0===t?void 0:t[0].parentNode;a?.removeChild(this._$beforeButtonsContainer[0]),n?.removeChild(this._$afterButtonsContainer[0])},_attachWrapperContent(r){var e,t=this.option("useHiddenSubmitElement");r.prepend(this._$beforeButtonsContainer),t&&(null===(e=this._$submitElement)||void 0===e||e.appendTo(r)),r.append(this._$afterButtonsContainer)},_refreshButtonsContainer(){this._$buttonsContainer=this.$element().children().eq(0)},_integrateInput:function(){this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent()},_refreshEmptinessEvent:function(){z.Z.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData:function(){return this.option("value")},_initTemplates:function(){this._templateManager.addDefaultTemplates({dropDownButton:new Cp.k(function(r){var e=(0,b.Z)("<div>").addClass("dx-dropdowneditor-icon");(0,b.Z)(r.container).append(e)})}),this.callBase()},_renderOpenHandler:function(){var r=this._inputWrapper(),e=(0,Ee.V4)(Ft.u,this.NAME),t=this.option("openOnFieldClick");z.Z.off(r,e),z.Z.on(r,e,this._getInputClickHandler(t)),this.$element().toggleClass("dx-dropdowneditor-field-clickable",t),t&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler:function(){$C&&(this._detachFocusOutEvents(),z.Z.on(this._inputWrapper(),(0,Ee.V4)("focusout",this.NAME),r=>{var e=r.relatedTarget;e&&this.option("opened")&&this._isTargetOutOfComponent(e)&&this.close()}))},_isTargetOutOfComponent:function(r){var e=this.content?(0,b.Z)(this.content()).closest(".".concat(gu)):this._$popup;return 0===(0,b.Z)(r).closest(".".concat(gu),e).length},_detachFocusOutEvents:function(){$C&&z.Z.off(this._inputWrapper(),(0,Ee.V4)("focusout",this.NAME))},_getInputClickHandler:function(r){return r?e=>{this._executeOpenAction(e)}:e=>{this._focusInput()}},_openHandler:function(){this._toggleOpenState()},_executeOpenAction:function(r){this._openOnFieldClickAction({event:r})},_keyboardEventBindingTarget:function(){return this._input()},_focusInput:function(){return!this.option("disabled")&&(this.option("focusStateEnabled")&&!(0,fu.si)(this._input())&&(this._resetCaretPosition(),z.Z.trigger(this._input(),"focus")),!0)},_resetCaretPosition:function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._input().get(0);if(e){var{value:t}=e,i=(0,C.$K)(t)&&(r||this._isEditable())?t.length:0;this._caret({start:i,end:i},!0)}},_isEditable:function(){return this.option("acceptCustomValue")},_toggleOpenState:function(r){this._focusInput()&&(this.option("readOnly")||(r=arguments.length?r:!this.option("opened"),this.option("opened",r)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState:function(){var r=this.option("opened");r&&this._createPopup(),this.$element().toggleClass("dx-dropdowneditor-active",r),this._setPopupOption("visible",r);var e={expanded:r,controls:this._getControlsAria()};this.setAria(e),this.setAria("owns",r?this._popupContentId:void 0,this.$element())},_createPopup:function(){this._$popup||(this._$popup=(0,b.Z)("<div>").addClass(gu).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent())},_renderPopupContent:le.ZT,_renderPopup:function(){var r=(0,B.l)(this._popupConfig(),this._options.cache("dropDownOptions"));delete r.closeOnOutsideClick,r.elementAttr&&!Object.keys(r.elementAttr).length&&delete r.elementAttr,this._popup=this._createComponent(this._$popup,rs.Z,r),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_attachPopupKeyHandler(){z.Z.on(this._popup.$overlayContent(),(0,Ee.V4)("keydown",this.NAME),r=>this._popupKeyHandler(r))},_popupKeyHandler(r){switch((0,Ee.EV)(r)){case"tab":this._popupTabHandler(r);break;case"escape":this._popupEscHandler(r)}},_popupTabHandler(r){var e=(0,b.Z)(r.target),t=r.shiftKey&&e.is(this._getFirstPopupElement());(!r.shiftKey&&e.is(this._getLastPopupElement())||t)&&(z.Z.trigger(this.field(),"focus"),r.preventDefault())},_popupEscHandler(){z.Z.trigger(this._input(),"focus"),this.close()},_setPopupContentId(r){this._popupContentId="dx-"+new Pi.Z,this.setAria("id",this._popupContentId,r)},_contentReadyHandler:le.ZT,_popupConfig:function(){return{onInitialized:this._getPopupInitializedHandler(),position:(0,B.l)(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>vu(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:r=>this._closeOutsideDropDownHandler(r),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:gu,_ignorePreventScrollEventsDeprecation:!0}},_popupInitializedHandler:le.ZT,_getPopupInitializedHandler:function(){var r=this.option("onPopupInitialized");return e=>{this._popupInitializedHandler(e),r&&this._popupInitializedAction({popup:e.component})}},_dimensionChanged:function(){!(0,Je.Ym)()||this.$element().is(":visible")?this._updatePopupWidth():this.close()},_updatePopupWidth:function(){void 0===wp(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>vu(this.$element()))},_popupPositionedHandler:function(r){var e,t,{labelMode:i,stylingMode:a}=this.option();if(this._popup){var n=this._popup.$overlayContent(),s=null===(e=r.position)||void 0===e||null===(t=e.v)||void 0===t?void 0:t.flip,o="hidden"!==i&&"outside"!==i&&"outlined"===a;if(r.position&&n.toggleClass("dx-dropdowneditor-overlay-flipped",s),s&&o&&this._label.isVisible()){var l=this._label.$element();(0,Gi.pB)(n,{top:(0,Gi.jt)(n).top-parseInt(l.css("fontSize"))})}}},_popupShowingHandler:le.ZT,_popupHidingHandler:function(){this.option("opened",!1)},_popupShownHandler:function(){var r;this._openAction(),null===(r=this._validationMessage)||void 0===r||r.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler:function(){var r;this._closeAction(),null===(r=this._validationMessage)||void 0===r||r.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide:function(){var r=this.option("validationMessagePosition");if("auto"!==r)return r;var e="bottom";if(this._popup&&this._popup.option("visible")){var{top:t}=_n.Z.setup(this.$element()),{top:i}=_n.Z.setup(this._popup.$content());e=t+this.option("popupPosition").offset.v>i?"bottom":"top"}return e},_closeOutsideDropDownHandler:function(r){var{target:e}=r,t=(0,b.Z)(e),i=this.getButton("dropDown"),a=i&&i.$element(),n=!!t.closest(this.$element()).length,s=!!t.closest(a).length;return!n&&!s},_clean:function(){delete this._openOnFieldClickAction,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption:function(r,e){this._setWidgetOption("_popup",arguments)},_validatedOpening:function(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems:function(){return"useButtons"===this.option("applyValueMode")?this._popupToolbarItemsConfig():[]},_getFirstPopupElement:function(){return(0,b.Z)(this._popup.getFocusableElements()).first()},_getLastPopupElement:function(){return(0,b.Z)(this._popup.getFocusableElements()).last()},_popupToolbarItemsConfig:function(){var r=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(r)},_applyButtonsLocation:function(r){var e=this.option("buttonsLocation"),t=r;if("default"!==e){var i=(0,le.Um)(e);(0,Y.S6)(t,function(a,n){(0,B.l)(n,{toolbar:i[0],location:i[1]})})}return t},_applyButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged:function(r){var e=Dr.default.getOptionsFromContainer(r);this._setPopupOption(e);var t=Object.keys(e);(-1!==t.indexOf("width")||-1!==t.indexOf("height"))&&this._dimensionChanged()},_renderSubmitElement:function(){this.option("useHiddenSubmitElement")&&(this._$submitElement=(0,b.Z)("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue:function(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement:function(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose:function(){this._detachFocusOutEvents(),this.callBase()},_optionChanged:function(r){var e;switch(r.name){case"width":case"height":this.callBase(r),null===(e=this._popup)||void 0===e||e.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":(0,C.$K)(r.value)?this._renderField():this._invalidate();break;case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(r),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":(0,Je.Ym)()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(r.value),this.callBase(r);break;default:this.callBase(r)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)},field:function(){return(0,lt.u)(this._input())},content:function(){return this._popup?this._popup.content():null}});(0,Rt.Z)("dxDropDownEditor",GC);const UC=GC;var jC="dx-list-group",qC=function(r){return(r.group<<20)+r.item},ss=function(r){return{group:r>>20,item:1048575&r}},FO=hm.Z.inherit({_groupElements:function(){return this._collectionWidget._itemContainer().find("."+jC)},_groupItemElements:function(r){return r.find(".dx-list-item")},getIndexByItemData:function(r){var e=this._collectionWidget.option("items"),t=!1;return!!r&&(r.items&&r.items.length&&(r=r.items[0]),(0,Y.S6)(e,function(i,a){if(!a.items||((0,Y.S6)(a.items,function(n,s){return s!==r||(t={group:i,item:n},!1)}),t))return!1}),t)},getItemDataByIndex:function(r){var e=this._collectionWidget.option("items");return(0,C.kE)(r)?this.itemsGetter()[r]:r&&e[r.group]&&e[r.group].items[r.item]||null},itemsGetter:function(){for(var r=[],e=this._collectionWidget.option("items"),t=0;t<e.length;t++)e[t]&&e[t].items?r=r.concat(e[t].items):r.push(e[t]);return r},deleteItemAtIndex:function(r){var e=ss(r);this._collectionWidget.option("items")[e.group].items.splice(e.item,1)},getKeysByItems:function(r){var t,e=[];for(t=0;t<r.length;t++)r[t]&&r[t].items?e=e.concat(r[t].items):e.push(r[t]);var i=[];for(t=0;t<e.length;t++)i.push(this._collectionWidget.keyOf(e[t]));return i},getIndexByKey:function(r,e){var t=e||this._collectionWidget.option("items"),i=-1,a=this;return(0,Y.S6)(t,function(n,s){if(s.items&&((0,Y.S6)(s.items,function(o,l){var d=a._collectionWidget.keyOf(l);if(a._equalKeys(d,r))return i={group:n,item:o},!1}),-1!==i))return!1}),i},_getGroups:function(r){var t=this._collectionWidget._dataController.group();return t?Gs.Z.queryByOptions((0,va.Z)(r),{group:t}).toArray():this._collectionWidget.option("items")},getItemsByKeys:function(r,e){var t=[],i=this._getGroups(e),a={},n=s=>{var o=this.getIndexByKey(s,i),l=o&&i[o.group];if(l)return{groupKey:l.key,item:l.items[o.item]}};return(0,Y.S6)(r,function(s,o){var l=n(o);if(l){var d=l.groupKey,u=l.item,c=a[d];c||(a[d]=c={key:d,items:[]},t.push(c)),c.items.push(u)}}),t},moveItemAtIndexToIndex:function(r,e){var t=this._collectionWidget.option("items"),i=ss(r),a=ss(e),n=t[i.group].items,s=t[a.group].items,o=n[i.item];n.splice(i.item,1),s.splice(a.item,0,o)},_isItemIndex:function(r){return r&&(0,C.kE)(r.group)&&(0,C.kE)(r.item)},_getNormalizedItemIndex:function(r){var e=(0,b.Z)(r),t=e.closest("."+jC);return t.length?qC({group:this._groupElements().index(t),item:this._groupItemElements(t).index(e)}):-1},_normalizeItemIndex:function(r){return qC(r)},_denormalizeItemIndex:function(r){return ss(r)},_getItemByNormalizedIndex:function(r){var e=ss(r),t=this._groupElements().eq(e.group);return this._groupItemElements(t).eq(e.item)},_itemsFromSameParent:function(r,e){return ss(r).group===ss(e).group}});const VO=FO;var YC=[],_u=function(r,e,t){YC.push({enabled:r,decoratorType:e,decoratorSubType:t})};_u(function(){return this.option("menuItems").length},function(){return"menu"},function(){return this.option("menuMode")}),_u(function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")},function(){var r=this.option("itemDeleteMode");return"toggle"===r||"slideButton"===r||"swipe"===r||"static"===r?"delete":"menu"},function(){var r=this.option("itemDeleteMode");return"slideItem"===r&&(r="slide"),r}),_u(function(){return"none"!==this.option("selectionMode")&&this.option("showSelectionControls")},function(){return"selection"},function(){return"default"}),_u(function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")},function(){return"reorder"},function(){return"default"});var WO=Ba.Z.inherit({ctor:function(r){this._list=r,this._fetchRequiredDecorators()},dispose:function(){this._decorators&&this._decorators.length&&(0,Y.S6)(this._decorators,function(r,e){e.dispose()})},_fetchRequiredDecorators:function(){this._decorators=[],(0,Y.S6)(YC,function(r,e){if(e.enabled.call(this._list)){var i=e.decoratorType.call(this._list),a=e.decoratorSubType.call(this._list),n=this._createDecorator(i,a);this._decorators.push(n)}}.bind(this))},_createDecorator:function(r,e){return new(this._findDecorator(r,e))(this._list)},_findDecorator:function(r,e){var t,i=null===(t=ZC[r])||void 0===t?void 0:t[e];if(!i)throw At.Z.Error("E1012",r,e);return i},modifyItemElement:function(r){var e=(0,b.Z)(r.itemElement),t={$itemElement:e};this._prependBeforeBags(e,t),this._appendAfterBags(e,t),this._applyDecorators("modifyElement",t)},afterItemsRendered:function(){this._applyDecorators("afterRender")},_prependBeforeBags:function(r,e){var t=this._collectDecoratorsMarkup("beforeBag",e,"dx-list-item-before-bag");r.prepend(t)},_appendAfterBags:function(r,e){var t=this._collectDecoratorsMarkup("afterBag",e,"dx-list-item-after-bag");r.append(t)},_collectDecoratorsMarkup:function(r,e,t){var i=(0,b.Z)("<div>");return(0,Y.S6)(this._decorators,function(){var a=(0,b.Z)("<div>").addClass(t);this[r]((0,B.l)({$container:a},e)),a.children().length&&i.append(a)}),i.children()},_applyDecorators:function(r,e){(0,Y.S6)(this._decorators,function(){this[r](e)})},_handlerExists:function(r){if(!this._decorators)return!1;for(var e=this._decorators,t=e.length,i=0;i<t;i++)if(e[i][r]!==le.ZT)return!0;return!1},_eventHandler:function(r,e,t){if(!this._decorators)return!1;for(var i=!1,a=this._decorators,n=a.length,s=0;s<n&&!(i=a[s][r](e,t));s++);return i},handleClick:function(r,e){return this._eventHandler("handleClick",r,e)},handleKeyboardEvents:function(r,e){return this._eventHandler("handleKeyboardEvents",r,e)},handleEnterPressing:function(r){return this._eventHandler("handleEnterPressing",r)},contextMenuHandlerExists:function(){return this._handlerExists("handleContextMenu")},handleContextMenu:function(r,e){return this._eventHandler("handleContextMenu",r,e)},getExcludedItemSelectors:function(){var r=[];return this._applyDecorators("getExcludedSelectors",r),r.join(",")}});const KO=WO;var jO=ve(6360).K.inherit({_supportedKeys(){var r=this,e=this.callBase(),t=(i,a)=>{var n=this._editStrategy,s=this.option("focusedElement"),o=n.getNormalizedIndex(s);if(o!==this._getLastItemIndex()||!this._dataController.isLoading())if(i.shiftKey&&r.option("itemDragging.allowReordering")){var u=n.getItemElement(o+(a?-1:1));this.reorderItem(s,u),this.scrollToItem(s),i.preventDefault()}else this._editProvider.handleKeyboardEvents(o,a)||(a?e.upArrow(i):e.downArrow(i))};return(0,B.l)({},e,{del:i=>{r.option("allowItemDeleting")&&(i.preventDefault(),r.deleteItem(r.option("focusedElement")))},upArrow:i=>t(i,!0),downArrow:i=>t(i),enter:function(i){this._editProvider.handleEnterPressing(i)||e.enter.apply(this,arguments)},space:function(i){this._editProvider.handleEnterPressing(i)||e.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();var r=this._editProvider.getExcludedItemSelectors();r.length&&(this._itemElementsCache=this._itemElementsCache.not(r))},_isItemStrictEquals:function(r,e){var t=r&&r.__dx_key__;return!(t&&!this.key()&&this._selection.isItemSelected(t))&&this.callBase(r,e)},_getDefaultOptions(){return(0,B.l)(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:ae.Z.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:r=>"ios"===r.platform,options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return"page"===this.option("selectAllMode")},_initEditProvider(){this._editProvider=new KO(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new VO(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>"dx-list-item-selected",_itemResponseWaitClass:()=>"dx-list-item-response-wait",_itemClickHandler(r){var e=(0,b.Z)(r.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(e,r)||(this._saveSelectionChangeEvent(r),this.callBase(...arguments))},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(r){var e=(0,b.Z)(r.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){if((0,Ee.z6)(r)&&this._editProvider.handleContextMenu(e,r))return void(r.handledByEditProvider=!0);this.callBase(...arguments)}},_getItemContainer:function(r){if(this.option("grouped")){var e,t=null===(e=this._editStrategy.getIndexByItemData(r))||void 0===e?void 0:e.group;return this._getGroupContainerByIndex(t)}return this.callBase(r)},_itemContextMenuHandler(r){var e=(0,b.Z)(r.currentTarget);if(!e.is(".dx-state-disabled, .dx-state-disabled *")){if(!r.handledByEditProvider&&this._editProvider.handleContextMenu(e,r))return void r.preventDefault();this.callBase(...arguments)}},_postprocessRenderItem(r){this.callBase(...arguments),this._editProvider.modifyItemElement(r)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(r){var e=this._editStrategy.getItemElement(r);this.option("focusedElement",e),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(r){switch(r.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(r);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(r)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(r){return this._itemElements().index(r)},getItemElementByFlatIndex(r){var e=this._itemElements();return r<0||r>=e.length?(0,b.Z)():e.eq(r)},getItemByIndex(r){return this._editStrategy.getItemDataByIndex(r)},deleteItem(r){var e=this._editStrategy,t=e.getNormalizedIndex(r),i=this.option("focusedElement"),a=i?e.getNormalizedIndex(i):t,s=a===this._getLastItemIndex()||t<a?a-1:a;return this.callBase(r).done(function(){return this.focusListItem(s)})}}),qO=jO.inherit(es).inherit({_addWidgetPrefix:function(r){return"dx-list-"+r},_getCombinedFilter:function(){var r=this._dataController,e={filter:r.filter()};return r.addSearchFilter(e),e.filter},_initDataSource:function(){var r=this.option("searchValue"),e=this.option("searchExpr"),t=this.option("searchMode");this.callBase();var i=this._dataController;r&&r.length&&i.searchValue(r),t.length&&i.searchOperation(es.getOperationBySearchMode(t)),e&&i.searchExpr(e)}});const XC=qO;(0,Rt.Z)("dxList",XC);const Al=XC;var JC=ve(6151),YO=(0,B.l)({},JC.Z,{_dataExpressionDefaultOptions:function(){return{items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}},_initDataExpressions:function(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource:function(){this.option("dataSource")||(this._dataSource=new vn.o({store:new qd.Z(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter:function(){this._displayGetter=(0,Ot.vb)(this._displayGetterExpr())},_displayGetterExpr:function(){return this.option("displayExpr")},_compileValueGetter:function(){this._valueGetter=(0,Ot.vb)(this._valueGetterExpr())},_valueGetterExpr:function(){return this.option("valueExpr")||"this"},_loadValue:function(r){var e=new X.BH;return r=this._unwrappedValue(r),(0,C.$K)(r)?(this._loadSingle(this._valueGetterExpr(),r).done(function(t){this._isValueEquals(this._valueGetter(t),r)?e.resolve(t):e.reject()}.bind(this)).fail(function(){e.reject()}),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading:function(){var r;null===(r=this._loadValueDeferred)||void 0===r||r.reject({shouldSkipCallback:!0})},_getCurrentValue:function(){return this.option("value")},_unwrappedValue:function(r){var e;return(r=null!==(e=r)&&void 0!==e?e:this._getCurrentValue())&&this._dataSource&&"this"===this._valueGetterExpr()&&(r=this._getItemKey(r)),zr.default.unwrap(r)},_getItemKey:function(r){var e=this._dataSource.key();if(Array.isArray(e)){for(var t={},i=0,a=e.length;i<a;i++)t[e[i]]=r[e[i]];return t}return e&&"object"==typeof r&&(r=r[e]),r},_isValueEquals:function(r,e){var t=this._dataSource&&this._dataSource.key(),i=this._compareValues(r,e);return!i&&t&&(0,C.$K)(r)&&(0,C.$K)(e)&&(i=Array.isArray(t)?this._compareByCompositeKey(r,e,t):this._compareByKey(r,e,t)),i},_compareByCompositeKey:function(r,e,t){var i=C.Kn;if(!i(r)||!i(e))return!1;for(var a=0,n=t.length;a<n;a++)if(r[t[a]]!==e[t[a]])return!1;return!0},_compareByKey:function(r,e,t){var i=zr.default.unwrap,a=(0,le.IS)(i(r[t]),r),n=(0,le.IS)(i(e[t]),e);return this._compareValues(a,n)},_compareValues:function(r,e){return(0,Ot.Ex)(r,!0)===(0,Ot.Ex)(e,!0)},_initDynamicTemplates:le.ZT,_setCollectionWidgetItemTemplate:function(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr:function(){var r=this.option("valueExpr");return(0,C.HD)(r)&&"this"!==r||(0,C.mf)(r)?r:null},_dataExpressionOptionChanged:function(r){switch(r.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}});const QC=YO;var XO=ve(9431),JO=ve(2138),e0=(0,Je.Jj)(),rR=["startswith","contains","endwith","notcontains"],t0="android"!==ft.Z.real().platform,i0=UC.inherit({_supportedKeys:function(){var r=this.callBase();return(0,B.l)({},r,{tab:function(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);var t=(0,b.Z)(this._list.option("focusedElement"));t.length&&this._setSelectedElement(t)}r.tab.apply(this,arguments)},space:le.ZT,home:le.ZT,end:le.ZT})},_allowSelectItemByTab:function(){return this.option("opened")&&"instantly"===this.option("applyValueMode")},_setSelectedElement:function(r){var e=this._valueGetter(this._list._getItemData(r));this._setValue(e)},_setValue:function(r){this.option("value",r)},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),(0,B.l)(QC._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:ae.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:le.ZT,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference:function(){this.callBase(),(0,B.l)(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init:function(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange:function(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems:function(){var r=this.option().items;r&&!r.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions:function(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction:function(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction:function(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new XO.s("item")})},_isEditable:function(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget:function(r){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:function(r,e,t){return r>t?e:r<e?t:r},_items:function(){var r=this._getPlainItems(!this._list&&this._dataSource.items());return new va.Z(r).filter("disabled","<>",!0).toArray()},_calcNextItem:function(r){var e=this._items();return e[this._fitIntoRange(this._getSelectedIndex()+r,0,e.length-1)]},_getSelectedIndex:function(){var r=this._items(),e=this.option("selectedItem"),t=-1;return(0,Y.S6)(r,function(i,a){if(this._isValueEquals(a,e))return t=i,!1}.bind(this)),t},_createPopup:function(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());var r=this._popup.$content();z.Z.off(r,"mouseup"),z.Z.on(r,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer:function(){var r=this.option("dropDownOptions.container"),e=r&&(0,b.Z)(r);if(e&&e.length&&!(0,C.FJ)(e.get(0))){var t=[].slice.call(e.parents());t.unshift(e.get(0)),(0,Y.S6)(t,function(i,a){return a!==(0,b.Z)("body").get(0)&&("hidden"===e0.getComputedStyle(a).overflowY?(this._$customBoundaryContainer=(0,b.Z)(a),!1):void 0)}.bind(this))}},_popupWrapperClass:function(){return"dx-dropdownlist-popup-wrapper"},_renderInputValue:function(){var r=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(r,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,r))},_loadInputValue:function(r,e){return this._loadItem(r).always(e)},_getItemFromPlain:function(r,e){var t,i;return e&&"object"!=typeof r&&(e.itemByValue||(e.itemByValue={},(t=this._getPlainItems()).forEach(function(a){e.itemByValue[this._valueGetter(a)]=a},this)),i=e.itemByValue[r]),i||(t=this._getPlainItems(),i=(0,le.h3)(t,function(a){return this._isValueEquals(this._valueGetter(a),r)}.bind(this))[0]),i},_loadItem:function(r,e){var t=this._getItemFromPlain(r,e);return void 0!==t?(new X.BH).resolve(t).promise():this._loadValue(r)},_getPlainItems:function(r){var e=[];r=r||this.option("items")||this._dataSource.items()||[];for(var t=0;t<r.length;t++)r[t]&&r[t].items?e=e.concat(r[t].items):e.push(r[t]);return e},_updateActiveDescendant(r){var e,t=this.option("opened"),i=null===(e=this._list)||void 0===e?void 0:e.getFocusedItemId(),a=(0,b.Z)("#".concat(i)).length>0;this.setAria({activedescendant:t&&a&&i||null},r)},_setSelectedItem:function(r){var e=this._displayValue(r);this.option("selectedItem",(0,le.IS)(r,null)),this.option("displayValue",e)},_displayValue:function(r){return this._displayGetter(r)},_refreshSelected:function(){var r={};this._listItemElements().each(function(e,t){var i=(0,b.Z)(t),a=this._valueGetter(i.data("dxListItemData"));this._isSelectedValue(a,r)?this._list.selectItem(i):this._list.unselectItem(i)}.bind(this))},_popupShownHandler:function(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy:function(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue:function(r){return this._isValueEquals(r,this.option("value"))},_validateSearchMode:function(){var r=this.option("searchMode"),e=r.toLowerCase();if(!rR.includes(e))throw At.Z.Error("E1019",r)},_clearSelectedItem:function(){this.option("selectedItem",null)},_processDataSourceChanging:function(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(function(){this._isCustomValueAllowed()||this._clearSelectedItem()}.bind(this))},_isCustomValueAllowed:function(){return this.option("displayCustomValue")},clear:function(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements:function(){return this._$list?this._$list.find(".dx-list-item"):(0,b.Z)()},_popupConfig:function(){return(0,B.l)(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent:function(){this.callBase(),this._renderList()},_getKeyboardListeners(){var r=this._canListHaveFocus();return this.callBase().concat([!r&&this._list])},_renderList:function(){this._listId="dx-"+(new Pi.Z)._value;var r=(0,b.Z)("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=r,this._list=this._createComponent(r,Al,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick:function(){var r=(0,Ee.V4)("mousedown","dxDropDownList");z.Z.off(this._$list,r),z.Z.on(this._$list,r,e=>e.preventDefault())},_getControlsAria(){return this._list&&this._listId},_renderOpenedState:function(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_setDefaultAria:function(){this.setAria({haspopup:"listbox",autocomplete:"list"})},_refreshList:function(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource:function(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:function(){return"desktop"===ft.Z.real().deviceType},_listConfig:function(){var r={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:!!this._isDesktopDevice()&&this.option("hoverStateEnabled"),focusStateEnabled:!!this._isDesktopDevice()&&this.option("focusStateEnabled")};return this._canListHaveFocus()||(r.tabIndex=null),r},_canListHaveFocus:()=>!1,_getDataSource:function(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:function(){return{paginate:!1}},_getGroupedOption:function(){return this.option("grouped")},_dataSourceFromUrlLoadMode:function(){return"raw"},_listContentReadyHandler:function(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption:function(r,e){this._setWidgetOption("_list",arguments)},_listItemClickAction:function(r){this._listItemClickHandler(r),this._itemClickAction(r)},_listItemClickHandler:le.ZT,_setListDataSource:function(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList:function(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded:function(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter:function(){return!this._canKeepDataSource()&&this._needPassDataSourceToList()},_canKeepDataSource:function(){var r=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!r&&!this._isLastMinSearchLengthExceeded},_searchValue:function(){return this._input().val()||""},_getSearchEvent:function(){return(0,Ee.V4)("input",this.NAME+"Search")},_getCompositionStartEvent:function(){return(0,Ee.V4)("compositionstart",this.NAME+"CompositionStart")},_getCompositionEndEvent:function(){return(0,Ee.V4)("compositionend",this.NAME+"CompositionEnd")},_getSetFocusPolicyEvent:function(){return(0,Ee.V4)("input",this.NAME+"FocusPolicy")},_renderEvents:function(){this.callBase(),z.Z.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(z.Z.on(this._input(),this._getSearchEvent(),r=>{this._searchHandler(r)}),t0&&(z.Z.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),z.Z.on(this._input(),this._getCompositionEndEvent(),r=>{this._isTextCompositionInProgress(void 0),this._searchHandler(r,this._searchValue())})))},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")},_refreshEvents:function(){z.Z.off(this._input(),this._getSearchEvent()),z.Z.off(this._input(),this._getSetFocusPolicyEvent()),t0&&(z.Z.off(this._input(),this._getCompositionStartEvent()),z.Z.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress:function(r){if(!arguments.length)return this._isTextComposition;this._isTextComposition=r},_searchHandler:function(r,e){if(!this._isTextCompositionInProgress()){if(!this._isMinSearchLengthExceeded())return void this._searchCanceled();var t=this.option("searchTimeout");t?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(e)},t)):this._searchDataSource(e)}},_searchCanceled:function(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._searchValue();this._filterDataSource(r)},_filterDataSource:function(r){this._clearSearchTimer();var e=this._dataController;e.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),e.searchOperation(this.option("searchMode")),e.searchValue(r),e.load().done(this._dataSourceFiltered.bind(this,r))},_clearFilter:function(){var r=this._dataController;r.searchValue()&&r.searchValue(null)},_dataSourceFiltered:function(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup:function(){return this._hasItemsToShow()},_refreshPopupVisibility:function(){if(!this.option("readOnly")&&this._searchValue()){var r=this._shouldOpenPopup();r&&!this._isFocused()||(this.option("opened",r),r&&(this._updatePopupWidth(),this._updateListDimensions()))}},_dataSourceChangedHandler:function(r){0===this._dataController.pageIndex()?this.option().items=r:this.option().items=this.option().items.concat(r)},_hasItemsToShow:function(){var t=(this._dataController.items()||[]).length;return!(!this._needPassDataSourceToList()||!t)},_clearSearchTimer:function(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler:function(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged:function(){this.callBase(),this._updateListDimensions()},_needPopupRepaint:function(){var r=this._dataController,e=r.pageIndex(),t=(0,C.$K)(this._pageIndex)&&e<=this._pageIndex||r.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,t},_updateListDimensions:function(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight:function(){var r=this.$element(),e=this._$customBoundaryContainer,t=r.offset().top-(e?e.offset().top:0),i=(0,we.zp)(e0),a=e?Math.min((0,we.zp)(e),i):i,n=Math.max(t,a-t-(0,we.zp)(r));return Math.min(.5*a,n)},_clean:function(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose:function(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption:function(){this._setListOption.apply(this,arguments)},_setSubmitValue:function(){var r=this.option("value"),e=this._shouldUseDisplayValue(r)?this._displayGetter(r):r;this._getSubmitElement().val(e)},_shouldUseDisplayValue:function(r){return"this"===this.option("valueExpr")&&(0,C.Kn)(r)},_optionChanged:function(r){switch(this._dataExpressionOptionChanged(r),r.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(r.name,r.value),this.callBase(r);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(r.name);break;case"displayValue":this.option("text",r.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":r.previousValue!==r.value&&this._selectionChangedAction({selectedItem:r.value});break;default:this.callBase(r)}}}).include(QC,JO.Z);(0,Rt.Z)("dxDropDownList",i0);var r0="dx-selectbox-popup-wrapper",a0=i0.inherit({_supportedKeys(){var r=this,e=this.callBase(),t=function(a){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(a.preventDefault(),this.clear()),this._savedTextRemoveEvent=a,this._preventSubstitution=!0},i=function(){r.option("searchEnabled")&&r._valueSubstituted()&&r._searchHandler()};return(0,B.l)({},e,{tab(){this.option("opened")&&!this._popup.getFocusableElements().length&&this._resetCaretPosition(!0),e.tab&&e.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow(a){if(e.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(a),!0},downArrow(a){if(e.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(a),!0},leftArrow(){var a;i(),null===(a=e.leftArrow)||void 0===a||a.apply(this,arguments)},rightArrow(){i(),e.rightArrow&&e.rightArrow.apply(this,arguments)},home(){i(),e.home&&e.home.apply(this,arguments)},end(){i(),e.end&&e.end.apply(this,arguments)},escape(){var a=e.escape&&e.escape.apply(this,arguments);return this._cancelEditing(),a??!0},enter(a){var n=this.option("opened"),s=this._input().val().trim(),o=s&&this._list&&!this._list.option("focusedElement");if(!s&&(0,C.$K)(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(a),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return a.preventDefault(),o&&(n&&this._toggleOpenState(),this._valueChangeEventHandler(a)),n;if(e.enter&&e.enter.apply(this,arguments))return n}},space(a){var n=this.option("opened"),s=this.option("searchEnabled"),o=this.option("acceptCustomValue");if(n&&!s&&!o)return a.preventDefault(),this._valueChangeEventHandler(a),!0},backspace:t,del:t})},_getDefaultOptions(){return(0,B.l)(this.callBase(),{placeholder:ae.Z.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating(r){(0,C.$K)(r.customItem)||(r.customItem=r.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass(){return"".concat(this.callBase()," ").concat(r0)},_setDeprecatedOptions(){this.callBase(),(0,B.l)(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement(){var r;if(this._searchValue()){var{items:t,selectedItem:i}=this.option(),a=this._list._itemElements(),n=null!==(r=t?.indexOf(i))&&void 0!==r?r:-1,s=-1===n||this._isCustomItemSelected()?null:a.eq(n);this._focusListElement(s)}else this._focusListElement(null)},_renderFocusedElement(){if(this._list){if(!this._searchValue()||this.option("acceptCustomValue"))return void this._focusListElement(null);var t=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(t)}},_focusListElement(r){this._preventInputValueRender=!0,this._list.option("focusedElement",(0,lt.u)(r)),delete this._preventInputValueRender},_scrollToSelectedItem(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler(){this.callBase(),this._dataController.paginate()&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue(){return this._renderInputValue(),this._setSubmitValue(),(new X.BH).resolve()},_renderInputValue(){return this.callBase().always(()=>{this._renderInputValueAsync()})},_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always(()=>{this._refreshSelected()})},_renderInputValueImpl(){return this._renderField(),(new X.BH).resolve()},_setNextItem(r){var e=this._calcNextItem(r),t=this._valueGetter(e);this._setValue(t)},_setNextValue(r){(this._dataController.isLoaded()?(new X.BH).resolve():this._dataController.load()).done(()=>{var t=this._getSelectedIndex(),i=this._dataController.pageSize(),a=this._dataController.isLastPage(),n=t===this._items().length-1;this._saveValueChangeEvent(r);var s="downArrow"===(0,Ee.EV)(r)?1:-1;i&&!a&&n&&s>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,s))):this._setNextItem(s)})},_setSelectedItem(r){var e=!this._isCustomValueAllowed()&&void 0===r;this.callBase(e?null:r),!e&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed(){return this.option("acceptCustomValue")||this.callBase()},_displayValue(r){return r=!(0,C.$K)(r)&&this._isCustomValueAllowed()?this.option("value"):r,this.callBase(r)},_listConfig(){var r=(0,B.l)(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&(0,B.l)(r,{showSelectionControls:!0,selectByClick:!0}),r},_listFocusedItemChangeHandler(r){if(!this._preventInputValueRender){var e=r.component,t=(0,b.Z)(e.option("focusedElement")),i=e._getItemData(t);this._updateField(i)}},_updateField(r){if(!this._getTemplateByOption("fieldTemplate")||!this.option("fieldTemplate")){var t=this._displayGetter(r);return this.option("text",t),void this._renderDisplayText(t)}this._renderField()},_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):le.ZT},_selectionChangeHandler(r){(0,Y.S6)(r.addedItems||[],(e,t)=>{this._setValue(this._valueGetter(t))})},_getActualSearchValue(){return this._dataController.searchValue()},_toggleOpenState(r){if(!this.option("disabled")){if(!(r=arguments.length?r:!this.option("opened"))&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&r)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;var t=this._getActualSearchValue();t&&this._wasSearch(!0),this._filterDataSource(t||null)}else this._setListOption("items",[]);r&&this._scrollToSelectedItem(),this.callBase(r)}},_renderTooltip(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText(){var r=this.option("selectedItem");if(null===r)return!1;var e=this._displayGetter(r);return(e?String(e):"")===this._searchValue()},_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText(r){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(()=>{var{acceptCustomValue:e,text:t,selectedItem:i}=this.option();e?!r&&!this._isValueChanging&&(this._updateField(i??this._createCustomItem(t)),this._clearFilter()):this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")?this._clearTextValue():this._isValueEqualInputText()||this._renderInputValue().always(a=>{var n=(0,le.IS)(a,i);this._setSelectedItem(n),this._updateField(n),this._clearFilter()})})},_valueChangeEventIncludesBlur(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent(r){return this._preventNestedFocusEvent(r)||this._valueChangeEventIncludesBlur()},_focusOutHandler(r){this._isPreventedFocusOutEvent(r)||(this._isOverlayNestedTarget(r.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(r)),r.target=this._input().get(0),this.callBase(r)},_cancelSearchIfNeed(r){var e,{searchEnabled:t}=this.option(),i=this._isOverlayNestedTarget(r?.relatedTarget);if(this._wasSearch()&&t&&!i){var n=null===(e=this._popup)||void 0===e?void 0:e._hideAnimationProcessing;this._clearSearchTimer(),n?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch(r){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=r},_isOverlayNestedTarget:r=>!!(0,b.Z)(r).closest(".".concat(r0)).length,_clearTextValue(){var r=this.option("selectedItem"),e=this._displayGetter(r);r&&""!==e&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused(){var r=at.Z.getActiveElement(this.element());return this.callBase()&&(0,b.Z)(r).closest(this._input()).length>0},_getValueChangeEventOptionName:()=>"customItemCreateEvent",_renderValueChangeEvent(){this._isEditable()&&this.callBase()},_fieldRenderData(){var r=this._list&&this.option("opened")&&(0,b.Z)(this._list.option("focusedElement"));return r&&r.length?this._list._getItemData(r):this.option("selectedItem")},_isSelectedValue(r){return this._isValueEquals(r,this.option("value"))},_shouldCloseOnItemClick(){return!(this.option("showSelectionControls")&&"single"!==this.option("selectionMode"))},_listItemClickHandler(r){var e=this._getCurrentValue();this._focusListElement((0,b.Z)(r.itemElement)),this._saveValueChangeEvent(r.event),this._completeSelection(this._valueGetter(r.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&e===this._valueGetter(r.itemData)&&this._updateField(r.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter(){return this._wasSearch()},_completeSelection(r){this._setValue(r)},_loadItem(r,e){var t=this,i=new X.BH;return this.callBase(r,e).done(a=>{i.resolve(a)}).fail(a=>{if(!a?.shouldSkipCallback){var n=t.option("selectedItem");t.option("acceptCustomValue")&&r===t._valueGetter(n)?i.resolve(n):i.reject()}}),i.promise()},_loadInputValue(r,e){return this._loadItemDeferred=this._loadItem(r).always(e),this._loadItemDeferred},_isCustomItemSelected(){var r=this.option("selectedItem"),e=this._searchValue(),t=this._displayGetter(r);return!t||e!==t.toString()},_valueChangeEventHandler(r){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(r))},_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem(r){var e={text:r},t=this._customItemCreatingAction(e),i=(0,le.IS)(t,e.customItem);return(0,C.$K)(t)&&mp.Z.log("W0015","onCustomItemCreating","customItem"),i},_customItemAddedHandler(r){var e=this._searchValue(),t=this._createCustomItem(e);if(this._saveValueChangeEvent(r),void 0===t)throw this._renderValue(),mp.Z.Error("E0121");(0,C.tI)(t)?(0,X.p4)(t).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(t)},_setCustomItem(r){this._disposed||(this.option("selectedItem",r=r||null),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(r)),this._renderDisplayText(this._displayGetter(r)),this._isValueChanging=!1)},_clearValueHandler(r){return this._preventFiltering=!0,this.callBase(r),this._searchCanceled(),!1},_wasSearch(r){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=r},_searchHandler(){this._preventFiltering?delete this._preventFiltering:(this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments))},_dataSourceFiltered(r){this.callBase(),null!==r&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted(){var r=this._input().get(0),e=this._searchValue().length,t=0===r.selectionStart&&r.selectionEnd===e,i=r.selectionStart!==r.selectionEnd,a=e===r.selectionEnd;return this._wasSearch()&&i&&!t&&a&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this.option("searchEnabled")&&!this.option("acceptCustomValue")&&"startswith"===this.option("searchMode")},_renderInputSubstitution(){if(this._shouldSubstitutionBeRendered()){var r=this._list&&this._getPlainItems(this._list.option("items"))[0];if(r){var e=this._input(),t=e.val().length;if(0!==t){var i=e.get(0),a=this._displayGetter(r).toString();i.value=a,this._caret({start:t,end:a.length})}}}else delete this._preventSubstitution},_dispose(){this._renderInputValueAsync=le.ZT,delete this._loadItemDeferred,this.callBase()},_optionChanged(r){switch(r.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(r)}}});(0,Rt.Z)("dxSelectBox",a0);const n0=a0;var s0=ve(8749),o0=r=>r.getMonth()+1,l0=(r,e)=>{var t=r.getDate(),i=Tl("M",r),a=(0,Di.n$)(parseInt(e),i.min,i.max);r.setMonth(a-1,1);var{min:n,max:s}=Tl("dM",r),o=(0,Di.n$)(t,n,s);r.setDate(o)},dR={a:r=>r.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:o0,L:o0,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds"},uR=(0,B.l)({},(0,s0.xe)(),{a:(r,e)=>{var t=r.getHours();t>=12!=!!parseInt(e)&&r.setHours((t+12)%24)},d:(r,e)=>{e>Tl("dM",r).max&&r.setMonth(r.getMonth()+1),r.setDate(e)},h:(r,e)=>{var t=r.getHours()>=12;r.setHours(+e%12+(t?12:0))},M:l0,L:l0,E:(r,e)=>{e<0||r.setDate(r.getDate()-r.getDay()+parseInt(e))},y:(r,e)=>{var t=r.getFullYear(),i=String(e).length,a=String(Tl("y",r).max).length,n=parseInt(String(t).substr(0,a-i)+e);r.setFullYear(n)}}),Tl=(r,e,t)=>{var i={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:1,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1}};return i[t||r]||i.getAmPm},fR=ve(1933),We=ve(22),yp=["year","day","month","day"],d0=["hours","minutes","seconds","milliseconds"],_a={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:864e5,ONE_YEAR:31536e6,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){var r=new Date;return new Date(r.getFullYear()+50,r.getMonth(),r.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:function(){return"yyyy-MM-dd"},components:yp},time:{getStandardPattern:function(){return"HH:mm"},components:d0},datetime:{getStandardPattern:function(){var r;return function(){var e=(0,b.Z)("<input>").attr("type","datetime");e.val("2000-01-01T01:01Z"),e.val()&&(r="yyyy-MM-ddTHH:mmZ")}(),r||(r="yyyy-MM-ddTHH:mm:ssZ"),_a.FORMATS_INFO.datetime.getStandardPattern=function(){return r},r},components:[...yp,...d0]},"datetime-local":{getStandardPattern:function(){return"yyyy-MM-ddTHH:mm:ss"},components:[...yp,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat:function(r,e){var t=_a.FORMATS_INFO[e].getStandardPattern();return di.Z.serializeDate(r,t)},fromStandardDateFormat:function(r){var e=di.Z.dateParser(r);return(0,C.J_)(e)?e:void 0},getMaxMonthDay:function(r,e){return new Date(r,e+1,0).getDate()},mergeDates:function(r,e,t){if(!e)return e||null;if(!r||isNaN(r.getTime())){var i=new Date(null);r=new Date(i.getFullYear(),i.getMonth(),i.getDate())}var a=new Date(r.valueOf());return(0,Y.S6)(_a.FORMATS_INFO[t].components,function(){var s=_a.DATE_COMPONENTS_INFO[this];a[s.setter](e[s.getter]())}),a},getLongestCaptionIndex:function(r){var i,e=0,t=0;for(i=0;i<r.length;++i)r[i].length>t&&(e=i,t=r[i].length);return e},formatUsesMonthName:function(r){return pt.Z.formatUsesMonthName(r)},formatUsesDayName:function(r){return pt.Z.formatUsesDayName(r)},getLongestDate:function(r,e,t){var i=function(r){var e=typeof r;return"string"===e?"format":"object"===e&&void 0!==r.type?r.type:null}(r),a=9;(!i||_a.formatUsesMonthName(i))&&(a=_a.getLongestCaptionIndex(e));var n=new Date(1888,a,21,23,59,59,999);if(!i||_a.formatUsesDayName(i)){var s=n.getDate()-n.getDay()+_a.getLongestCaptionIndex(t);n.setDate(s)}return n},normalizeTime:function(r){r.setSeconds(0),r.setMilliseconds(0)}};_a.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter:function(r,e){var t=new Date(e.getTime());return t.setFullYear(r),pt.Z.format(t,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter:function(r,e){var t=new Date(e.getTime());return t.setDate(r),pt.Z.format(t,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:function(r){return pt.Z.getMonthNames()[r]},startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:function(r){return pt.Z.format(new Date(0,0,0,r),"hour")},startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:function(r){return pt.Z.format(new Date(0,0,0,0,r),"minute")},startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:function(r){return pt.Z.format(new Date(0,0,0,0,0,r),"second")},startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:function(r){return pt.Z.format(new Date(0,0,0,0,0,0,r),"millisecond")},startValue:0,endValue:999}};const Wt=_a;var mu=ve(3151),_R=ve(9756),c0="dxSwipeable",CR={onStart:Qs.BL,onUpdated:Qs.aq,onEnd:Qs.ut,onCancel:"dxswipecancel"},p0=mu.Z.inherit({_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{elastic:!0,immediate:!1,immediateTimeout:180,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass("dx-swipeable"),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),!this.option("disabled")){var r=this.NAME;this._createEventData(),(0,Y.S6)(CR,function(e,t){var i=this._createActionByOption(e,{context:this});t=(0,Ee.V4)(t,r),z.Z.on(this.$element(),t,this._eventData,function(a){return i({event:a})})}.bind(this))}},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}},_detachEventHandlers:function(){z.Z.off(this.$element(),"."+c0)},_optionChanged:function(r){switch(r.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(r)}},_useTemplates:function(){return!1}});(0,_R.u2)(p0,c0);const Cu=p0,OR=class DR extends Dr.default{_getDefaultOptions(){return(0,B.l)(super._getDefaultOptions(),{onClick:null,onCaptionClick:null,type:"normal",stylingMode:"outlined",text:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return(0,Lt.x2)()},options:{type:"default",stylingMode:"text"}},{device:function(){return(0,Lt.dC)()},options:{type:"normal",stylingMode:"text"}}])}_init(){super._init(),this._initActions()}_initActions(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")}_initMarkup(){super._initMarkup(),this.$element().addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()}_renderButtons(){var{rtlEnabled:e,type:t,stylingMode:i,focusStateEnabled:a}=this.option();this._prevButton=this._createComponent((0,b.Z)("<div>"),Or.Z,{focusStateEnabled:a,icon:e?"chevronright":"chevronleft",onClick:l=>{this._clickAction({direction:-1,event:l})},type:t,stylingMode:i,integrationOptions:{}});var n=this._prevButton.$element().addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent((0,b.Z)("<div>"),Or.Z,{focusStateEnabled:a,icon:e?"chevronleft":"chevronright",onClick:l=>{this._clickAction({direction:1,event:l})},type:t,stylingMode:i,integrationOptions:{}});var s=this._nextButton.$element().addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent((0,b.Z)("<div>").addClass("dx-calendar-caption-button"),Or.Z,{focusStateEnabled:a,onClick:l=>{this._captionClickAction({event:l})},type:t,stylingMode:i,template:(l,d)=>{var{text:u}=this.option();u.split(" - ").forEach(f=>{(0,b.Z)(d).append((0,b.Z)("<span>").addClass("dx-button-text").text(f))})},integrationOptions:{}});var o=this._caption.$element();this.$element().append(n,o,s)}_renderCaption(){this._caption.option("text",this.option("text"))}toggleButton(e,t){var a=this["_"+e+"Button"];a&&(a.option("disabled",t),a.$element().toggleClass("dx-calendar-disabled-navigator-link",t))}_optionChanged(e){"text"===e.name?this._renderCaption():super._optionChanged(e)}};var xp=ve(6513),{abstract:ma}=Dr.default,Sp="dx-calendar-cell",f0="dx-calendar-week-number-cell",Ep="dx-calendar-empty-cell",v0="dx-calendar-selected-date",g0="dx-calendar-cell-in-range",Ip="dx-calendar-cell-range-hover",Ap="dx-calendar-cell-range-hover-start",Tp="dx-calendar-cell-range-hover-end",_0="dx-calendar-range-start-date",m0="dx-calendar-range-end-date",Dp="dx-calendar-contoured-date",C0="td:not(.".concat(f0,")"),Op=(0,Ee.V4)(Ft.u,"dxCalendar"),w0=(0,Ee.V4)(xp.B,"dxCalendar"),Dl="dxDateValueKey",kR=Dr.default.inherit({_getViewName:function(){return"base"},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,onCellHover:null,onWeekNumberClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup:function(){this.callBase(),this._renderImpl()},_renderImpl:function(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderRange(),this._renderEvents()},_createTable:function(){this._$table=(0,b.Z)("<table>");var r=ae.Z.format("dxCalendar-ariaWidgetName");return this.setAria({label:r,role:"grid"},this._$table),this._$table},_renderBody:function(){this.$body=(0,b.Z)("<tbody>").appendTo(this._$table);for(var r={cellDate:this._getFirstCellData(),prevCellDate:null},e=0,t=this.option("rowCount");e<t;e++){r.row=this._createRow();for(var i=0,a=this.option("colCount");i<a;i++)this._renderCell(r,i);this._renderWeekNumberCell(r)}},_createRow:function(){var r=at.Z.createElement("tr");return this.setAria("role","row",(0,b.Z)(r)),this.$body.get(0).appendChild(r),r},_createCell:function(r,e){var t=at.Z.createElement("td"),i=(0,b.Z)(t);return t.className=this._getClassNameByDate(r,e),t.setAttribute("data-value",di.Z.serializeDate(r,We.Z.getShortDateFormat())),(0,Ms.aT)(t,Dl,r),this.setAria({role:"gridcell",label:this.getCellAriaLabel(r)},i),{cell:t,$cell:i}},_renderCell:function(r,e){var{cellDate:t,prevCellDate:i,row:a}=r;i&&We.Z.fixTimezoneGap(i,t),r.prevCellDate=t;var{cell:n,$cell:s}=this._createCell(t,e),o=this.option("cellTemplate");(0,b.Z)(a).append(n),o?o.render(this._prepareCellTemplateData(t,e,s)):n.innerHTML=this._getCellText(t),r.cellDate=this._getNextCellData(t)},_getClassNameByDate:function(r,e){var t=Sp;return this._isTodayCell(r)&&(t+=" ".concat("dx-calendar-today")),(this._isDateOutOfRange(r)||this.isDateDisabled(r))&&(t+=" ".concat(Ep)),this._isOtherView(r)&&(t+=" ".concat("dx-calendar-other-view")),"range"===this.option("selectionMode")&&(0===e&&(t+=" ".concat("dx-calendar-cell-start-in-row")),e===this.option("colCount")-1&&(t+=" ".concat("dx-calendar-cell-end-in-row")),this._isStartDayOfMonth(r)&&(t+=" ".concat("dx-calendar-cell-start")),this._isEndDayOfMonth(r)&&(t+=" ".concat("dx-calendar-cell-end"))),t},_prepareCellTemplateData:function(r,e,t){var i=r instanceof Date;return{model:{text:i?this._getCellText(r):r,date:i?r:void 0,view:this._getViewName()},container:(0,lt.u)(t),index:e}},_renderEvents:function(){this._createCellClickAction(),z.Z.off(this._$table,Op),z.Z.on(this._$table,Op,C0,e=>{(0,b.Z)(e.currentTarget).hasClass(Ep)||this._cellClickAction({event:e,value:(0,b.Z)(e.currentTarget).data(Dl)})});var{selectionMode:r}=this.option();z.Z.off(this._$table,w0),"range"===r&&(this._createCellHoverAction(),z.Z.on(this._$table,w0,C0,e=>{(0,b.Z)(e.currentTarget).hasClass(Ep)||this._cellHoverAction({event:e,value:(0,b.Z)(e.currentTarget).data(Dl)})})),"single"!==r&&(this._createWeekNumberCellClickAction(),z.Z.on(this._$table,Op,".".concat(f0),e=>{var t=(0,b.Z)(e.currentTarget).closest("tr"),i=t.find(".".concat(Sp)).first().data(Dl),a=t.find(".".concat(Sp)).last().data(Dl),n=[...We.Z.getDatesOfInterval(i,a,864e5),a];this._weekNumberCellClickAction({event:e,rowDates:n})}))},_createCellClickAction:function(){this._cellClickAction=this._createActionByOption("onCellClick")},_createCellHoverAction:function(){this._cellHoverAction=this._createActionByOption("onCellHover")},_createWeekNumberCellClickAction:function(){this._weekNumberCellClickAction=this._createActionByOption("onWeekNumberClick")},_createDisabledDatesHandler:function(){var r=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(r)?this._getDefaultDisabledDatesHandler(r):r||le.ZT},_getDefaultDisabledDatesHandler:function(r){return le.ZT},_isTodayCell:ma,_isDateOutOfRange:ma,isDateDisabled:function(r){var e={date:r,view:this._getViewName()};return this._disabledDatesHandler(e)},_isOtherView:ma,_isStartDayOfMonth:ma,_isEndDayOfMonth:ma,_getCellText:ma,_getFirstCellData:ma,_getNextCellData:ma,_renderContouredDate:function(r){if(this.option("focusStateEnabled")){r=r||this.option("contouredDate");var e=this._getContouredCell(),t=this._getCellByDate(r);e.removeClass(Dp),r&&t.addClass(Dp)}},_getContouredCell:function(){return this._$table.find(".".concat(Dp))},_renderValue:function(){if(this.option("allowValueSelection")){var r=this.option("value");Array.isArray(r)||(r=[r]),this._updateSelectedClass(r)}},_updateSelectedClass:function(r){var e;this._isRangeMode()&&!this._isMonthView()||(null===(e=this._$selectedCells)||void 0===e||e.forEach(t=>{t.removeClass(v0)}),this._$selectedCells=r.map(t=>this._getCellByDate(t)),this._$selectedCells.forEach(t=>{t.addClass(v0)}))},_renderRange:function(){var r,e,t,i,a,n,s,o,{allowValueSelection:l,value:d,range:u}=this.option();!l||!this._isRangeMode()||!this._isMonthView()||(null===(r=this._$rangeCells)||void 0===r||r.forEach(c=>{c.removeClass(g0)}),null===(e=this._$hoveredRangeCells)||void 0===e||e.forEach(c=>{c.removeClass(Ip)}),null===(t=this._$rangeStartHoverCell)||void 0===t||t.removeClass(Ap),null===(i=this._$rangeEndHoverCell)||void 0===i||i.removeClass(Tp),null===(a=this._$rangeStartDateCell)||void 0===a||a.removeClass(_0),null===(n=this._$rangeEndDateCell)||void 0===n||n.removeClass(m0),this._$rangeCells=u.map(c=>this._getCellByDate(c)),this._$rangeStartDateCell=this._getCellByDate(d[0]),this._$rangeEndDateCell=this._getCellByDate(d[1]),this._$rangeCells.forEach(c=>{c.addClass(g0)}),null===(s=this._$rangeStartDateCell)||void 0===s||s.addClass(_0),null===(o=this._$rangeEndDateCell)||void 0===o||o.addClass(m0))},_renderHoveredRange(){var r,e,t,i,a,{allowValueSelection:n,hoveredRange:s}=this.option();!n||!this._isRangeMode()||!this._isMonthView()||(null===(r=this._$hoveredRangeCells)||void 0===r||r.forEach(o=>{o.removeClass(Ip)}),null===(e=this._$rangeStartHoverCell)||void 0===e||e.removeClass(Ap),null===(t=this._$rangeEndHoverCell)||void 0===t||t.removeClass(Tp),this._$hoveredRangeCells=s.map(o=>this._getCellByDate(o)),this._$rangeStartHoverCell=this._getCellByDate(s[0]),this._$rangeEndHoverCell=this._getCellByDate(s[s.length-1]),this._$hoveredRangeCells.forEach(o=>{o.addClass(Ip)}),null===(i=this._$rangeStartHoverCell)||void 0===i||i.addClass(Ap),null===(a=this._$rangeEndHoverCell)||void 0===a||a.addClass(Tp))},_isMonthView:function(){return"month"===this.option("zoomLevel")},_isRangeMode:function(){return"range"===this.option("selectionMode")},getCellAriaLabel:function(r){return this._getCellText(r)},_getFirstAvailableDate:function(){var r=this.option("date"),e=this.option("min");return r=We.Z.getViewFirstCellDate(this._getViewName(),r),new Date(e&&r<e?e:r)},_getCellByDate:ma,isBoundary:ma,_optionChanged:function(r){var{name:e,value:t}=r;switch(e){case"value":this._renderValue();break;case"range":this._renderRange();break;case"hoveredRange":this._renderHoveredRange();break;case"contouredDate":this._renderContouredDate(t);break;case"onCellClick":this._createCellClickAction();break;case"onCellHover":this._createCellHoverAction();break;case"min":case"max":case"disabledDates":case"cellTemplate":case"selectionMode":this._invalidate();break;case"_todayDate":this._renderBody();break;default:this.callBase(r)}}});const wu=kR;var WR={month:wu.inherit({_getViewName:function(){return"month"},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl:function(){this.callBase(),this._renderHeader()},_renderBody:function(){this.callBase(),this._$table.find(".".concat("dx-calendar-other-view")).addClass("dx-calendar-other-month")},_renderFocusTarget:le.ZT,getCellAriaLabel:function(r){return pt.Z.format(r,"longdate")},_renderHeader:function(){var r=(0,b.Z)("<tr>"),e=(0,b.Z)("<thead>").append(r);this._$table.prepend(e);for(var t=0,i=this.option("colCount");t<i;t++)this._renderHeaderCell(t,r);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(r)},_renderHeaderCell:function(r,e){var{firstDayOfWeek:t}=this.option(),{full:i,abbreviated:a}=this._getDayCaption(t+r),n=(0,b.Z)("<th>").attr({scope:"col",abbr:i}).text(a);e.append(n)},_renderWeekHeaderCell:function(r){var e=(0,b.Z)("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"});r.prepend(e)},_renderWeekNumberCell:function(r){var{showWeekNumbers:e,cellTemplate:t,selectionMode:i,selectWeekOnClick:a}=this.option();if(e){var n=this._getWeekNumber(r.prevCellDate),s=at.Z.createElement("td"),o=(0,b.Z)(s);s.className="dx-calendar-week-number-cell","single"!==i&&a&&o.addClass("dx-calendar-week-selection"),t?t.render(this._prepareCellTemplateData(n,-1,o)):s.innerHTML=n,r.row.prepend(s),this.setAria({role:"gridcell",label:"Week ".concat(n)},o)}},_getWeekNumber:function(r){var{weekNumberRule:e,firstDayOfWeek:t}=this.option();return We.Z.getWeekNumber(r,t,"auto"===e?1===t?"firstFourDays":"firstDay":e)},getNavigatorCaption:function(){return pt.Z.format(this.option("date"),"monthandyear")},_isTodayCell:function(r){var e=this.option("_todayDate")();return We.Z.sameDate(r,e)},_isDateOutOfRange:function(r){var e=this.option("min"),t=this.option("max");return!We.Z.dateInRange(r,e,t,"date")},_isOtherView:function(r){return r.getMonth()!==this.option("date").getMonth()},_isStartDayOfMonth:function(r){return We.Z.sameDate(r,We.Z.getFirstMonthDate(this.option("date")))},_isEndDayOfMonth:function(r){return We.Z.sameDate(r,We.Z.getLastMonthDate(this.option("date")))},_getCellText:function(r){return pt.Z.format(r,"d")},_getDayCaption:function(r){var t=r%this.option("colCount");return{full:pt.Z.getDayNames()[t],abbreviated:pt.Z.getDayNames("abbreviated")[t]}},_getFirstCellData:function(){var{firstDayOfWeek:r}=this.option(),e=We.Z.getFirstMonthDate(this.option("date")),t=r-e.getDay(),i=this.option("colCount");return t>=0&&(t-=i),e.setDate(e.getDate()+t),e},_getNextCellData:function(r){return(r=new Date(r)).setDate(r.getDate()+1),r},_getCellByDate:function(r){return this._$table.find("td[data-value='".concat(di.Z.serializeDate(r,We.Z.getShortDateFormat()),"']"))},isBoundary:function(r){return We.Z.sameMonthAndYear(r,this.option("min"))||We.Z.sameMonthAndYear(r,this.option("max"))},_getDefaultDisabledDatesHandler:function(r){return function(e){var t=r.some(function(i){return We.Z.sameDate(i,e.date)});if(t)return!0}}}),year:wu.inherit({_getViewName:function(){return"year"},_isTodayCell:function(r){var e=this.option("_todayDate")();return We.Z.sameMonthAndYear(r,e)},_isDateOutOfRange:function(r){return!We.Z.dateInRange(r,We.Z.getFirstMonthDate(this.option("min")),We.Z.getLastMonthDate(this.option("max")))},_isOtherView:function(){return!1},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(r){return pt.Z.getMonthNames("abbreviated")[r.getMonth()]},_getFirstCellData:function(){var r=this.option("date"),e=new Date(r);return e.setDate(1),e.setMonth(0),e},_getNextCellData:function(r){return(r=new Date(r)).setMonth(r.getMonth()+1),r},_getCellByDate:function(r){var e=new Date(r);return e.setDate(1),this._$table.find("td[data-value='".concat(di.Z.serializeDate(e,We.Z.getShortDateFormat()),"']"))},getCellAriaLabel:function(r){return pt.Z.format(r,"monthandyear")},getNavigatorCaption:function(){return pt.Z.format(this.option("date"),"yyyy")},isBoundary:function(r){return We.Z.sameYear(r,this.option("min"))||We.Z.sameYear(r,this.option("max"))},_renderWeekNumberCell:le.ZT}),decade:wu.inherit({_getViewName:function(){return"decade"},_isTodayCell:function(r){var e=this.option("_todayDate")();return We.Z.sameYear(r,e)},_isDateOutOfRange:function(r){var e=this.option("min"),t=this.option("max");return!We.Z.dateInRange(r.getFullYear(),e&&e.getFullYear(),t&&t.getFullYear())},_isOtherView:function(r){var e=new Date(r);return e.setMonth(1),!We.Z.sameDecade(e,this.option("date"))},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(r){return pt.Z.format(r,"yyyy")},_getFirstCellData:function(){var r=We.Z.getFirstYearInDecade(this.option("date"))-1;return We.Z.createDateWithFullYear(r,0,1)},_getNextCellData:function(r){return(r=new Date(r)).setFullYear(r.getFullYear()+1),r},getNavigatorCaption:function(){var r=this.option("date"),e=We.Z.getFirstYearInDecade(r),t=new Date(r),i=new Date(r);return t.setFullYear(e),i.setFullYear(e+9),pt.Z.format(t,"yyyy")+"-"+pt.Z.format(i,"yyyy")},_isValueOnCurrentView:function(r,e){return We.Z.sameDecade(r,e)},_getCellByDate:function(r){var e=new Date(r);return e.setDate(1),e.setMonth(0),this._$table.find("td[data-value='".concat(di.Z.serializeDate(e,We.Z.getShortDateFormat()),"']"))},isBoundary:function(r){return We.Z.sameDecade(r,this.option("min"))||We.Z.sameDecade(r,this.option("max"))},_renderWeekNumberCell:le.ZT}),century:wu.inherit({_getViewName:function(){return"century"},_isTodayCell:function(r){var e=this.option("_todayDate")();return We.Z.sameDecade(r,e)},_isDateOutOfRange:function(r){var e=We.Z.getFirstYearInDecade(r),t=We.Z.getFirstYearInDecade(this.option("min")),i=We.Z.getFirstYearInDecade(this.option("max"));return!We.Z.dateInRange(e,t,i)},_isOtherView:function(r){var e=new Date(r);return e.setMonth(1),!We.Z.sameCentury(e,this.option("date"))},_isStartDayOfMonth:function(){return!1},_isEndDayOfMonth:function(){return!1},_getCellText:function(r){var e=pt.Z.format(r,"yyyy"),t=new Date(r);return t.setFullYear(t.getFullYear()+9),e+" - "+pt.Z.format(t,"yyyy")},_getFirstCellData:function(){var r=We.Z.getFirstDecadeInCentury(this.option("date"))-10;return We.Z.createDateWithFullYear(r,0,1)},_getNextCellData:function(r){return(r=new Date(r)).setFullYear(r.getFullYear()+10),r},_getCellByDate:function(r){var e=new Date(r);return e.setDate(1),e.setMonth(0),e.setFullYear(We.Z.getFirstYearInDecade(e)),this._$table.find("td[data-value='".concat(di.Z.serializeDate(e,We.Z.getShortDateFormat()),"']"))},getNavigatorCaption:function(){var r=this.option("date"),e=We.Z.getFirstDecadeInCentury(r),t=new Date(r),i=new Date(r);return t.setFullYear(e),i.setFullYear(e+99),pt.Z.format(t,"yyyy")+"-"+pt.Z.format(i,"yyyy")},isBoundary:function(r){return We.Z.sameCentury(r,this.option("min"))||We.Z.sameCentury(r,this.option("max"))},_renderWeekNumberCell:le.ZT})};const KR=WR,Rp=class $R{constructor(e){this.calendar=e}dateOption(e){return this.calendar._dateOption(e)}dateValue(e,t){this.calendar._dateValue(e,t)}skipNavigate(){this.calendar._skipNavigate=!0}updateAriaSelected(e,t){this.calendar._updateAriaSelected(e,t),e[0]&&this.calendar.option("currentDate").getTime()===e[0].getTime()&&this.calendar._updateAriaId(e[0])}processValueChanged(e,t){var i,a;(0,C.$K)(e)&&!Array.isArray(e)&&(e=[e]),(0,C.$K)(t)&&!Array.isArray(t)&&(t=[t]),e=(null===(i=e)||void 0===i?void 0:i.map(n=>this._convertToDate(n)))||[],t=(null===(a=t)||void 0===a?void 0:a.map(n=>this._convertToDate(n)))||[],this._updateViewsValue(e),this.updateAriaSelected(e,t),this._currentDateChanged||this.calendar._initCurrentDate(),this._currentDateChanged=!1}_isDateDisabled(e){var t=this.calendar._dateOption("min"),i=this.calendar._dateOption("max"),a=(0,C.$K)(t)&&e<t&&!We.Z.sameDate(t,e),n=(0,C.$K)(i)&&e>i&&!We.Z.sameDate(i,e);return this.calendar._view.isDateDisabled(e)||a||n}_getLowestDateInArray(e){if(e.length)return new Date(Math.min(...e))}_convertToDate(e){return this.calendar._convertToDate(e)}_isMaxZoomLevel(){return this.calendar._isMaxZoomLevel()}_updateViewsOption(e,t){this.calendar._updateViewsOption(e,t)}_updateViewsValue(e){this._updateViewsOption("value",e)}_updateCurrentDate(e){this.calendar.option("currentDate",e??new Date)}_shouldHandleWeekNumberClick(){var{selectionMode:e,selectWeekOnClick:t}=this.calendar.option();return t&&"single"!==e}};var Lp="dx-calendar",b0="dx-calendar-view",S0=(0,Ee.V4)(xp.u,"dxCalendar"),eo={month:3,year:2,decade:1,century:0},uL={SingleSelection:class GR extends Rp{constructor(e){super(e),this.NAME="SingleSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"single"}}selectValue(e,t){this.skipNavigate(),this.dateValue(e,t)}updateAriaSelected(e,t){var i,a;null!==(i=e)&&void 0!==i||(e=[this.dateOption("value")]),null!==(a=t)&&void 0!==a||(t=[]),super.updateAriaSelected(e,t)}getDefaultCurrentDate(){return this.dateOption("value")}restoreValue(){this.calendar.option("value",null)}_updateViewsValue(e){this._updateViewsOption("value",e[0])}},MultipleSelection:class jR extends Rp{constructor(e){super(e),this.NAME="MultiSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"multi",onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){var i=[...this.dateOption("value")],a=i.findIndex(n=>n?.toDateString()===e.toDateString());a>-1?i.splice(a,1):i.push(e),this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,this.dateValue(i,t)}updateAriaSelected(e,t){var i,a;null!==(i=e)&&void 0!==i||(e=this.dateOption("value")),null!==(a=t)&&void 0!==a||(t=[]),super.updateAriaSelected(e,t)}getDefaultCurrentDate(){var e=this.dateOption("value").filter(t=>t);return this._getLowestDateInArray(e)}restoreValue(){this.calendar.option("value",[])}_weekNumberClickHandler(e){var{rowDates:t,event:i}=e,a=t.filter(n=>!this._isDateDisabled(n));this.dateValue(a,i)}},RangeSelection:class XR extends Rp{constructor(e){super(e),this.NAME="RangeSelection"}getViewOptions(){var e=this._getValue();return{value:e,range:this._getDaysInRange(e[0],e[1]),selectionMode:"range",onCellHover:this._cellHoverHandler.bind(this),onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){var[i,a]=this._getValue();this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,!0===this.calendar.option("_allowChangeSelectionOrder")?(this.calendar._valueSelected=!0,"startDate"===this.calendar.option("_currentSelection")?this.calendar._convertToDate(e)>this.calendar._convertToDate(a)?this.dateValue([e,null],t):this.dateValue([e,a],t):this.calendar._convertToDate(e)>=this.calendar._convertToDate(i)?this.dateValue([i,e],t):this.dateValue([e,null],t)):this.dateValue(!i||a?[e,null]:i<e?[i,e]:[e,i],t)}updateAriaSelected(e,t){var i,a;null!==(i=e)&&void 0!==i||(e=this._getValue()),null!==(a=t)&&void 0!==a||(t=[]),super.updateAriaSelected(e,t)}processValueChanged(e,t){super.processValueChanged(e,t);var i=this._getRange();this._updateViewsOption("range",i)}getDefaultCurrentDate(){var{_allowChangeSelectionOrder:e,_currentSelection:t}=this.calendar.option(),i=this.dateOption("value");if(e){if("startDate"===t&&i[0])return i[0];if("endDate"===t&&i[1])return i[1]}var a=i.filter(n=>n);return this._getLowestDateInArray(a)}restoreValue(){this.calendar.option("value",[null,null])}_getValue(){var e=this.dateOption("value");if(!e.length)return e;var[t,i]=e;return t&&i&&t>i&&([t,i]=[i,t]),[t,i]}_getRange(){var[e,t]=this._getValue();return this._getDaysInRange(e,t)}_getDaysInRange(e,t){if(!e||!t)return[];var{currentDate:i,viewsCount:a}=this.calendar.option(),n=this.calendar._isAdditionalViewDate(i),s=We.Z.getFirstMonthDate(We.Z.addDateInterval(i,"month",n?-2:-1)),o=We.Z.getLastMonthDate(We.Z.addDateInterval(i,"month",n?1:a)),l=new Date(Math.max(s,e)),d=new Date(Math.min(o,t));return[...We.Z.getDatesOfInterval(l,d,864e5),d]}_cellHoverHandler(e){var t=this._isMaxZoomLevel(),[i,a]=this._getValue(),{_allowChangeSelectionOrder:n,_currentSelection:s}=this.calendar.option();if(t){if(!i||a||n&&"startDate"===s){if(i||!a||n&&"endDate"===s){if(i&&a){if("startDate"===s&&e.value<i)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,i));if("endDate"===s&&e.value>a)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(a,e.value))}}else if(e.value<a)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,a))}else if(e.value>i)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(i,e.value));this._updateViewsOption("hoveredRange",[])}}_weekNumberClickHandler(e){var{rowDates:t,event:i}=e,a=t.filter(s=>!this._isDateDisabled(s));this.dateValue(a.length?[a[0],a[a.length-1]]:[null,null],i)}}},E0=za.Z.inherit({_activeStateUnit:".dx-calendar-cell",_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,viewsCount:1,zoomLevel:"month",maxZoomLevel:"month",minZoomLevel:"century",selectionMode:"single",selectWeekOnClick:!0,showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===ft.Z.real().deviceType&&!ft.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_supportedKeys:function(){return(0,B.l)(this.callBase(),{rightArrow:function(r){r.preventDefault(),(0,Ee.j1)(r)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow:function(r){r.preventDefault(),(0,Ee.j1)(r)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow:function(r){if(r.preventDefault(),(0,Ee.j1)(r))this._navigateUp();else{if(ti.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow:function(r){if(r.preventDefault(),(0,Ee.j1)(r))this._navigateDown();else{if(ti.Z.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home:function(r){r.preventDefault();var e=this.option("zoomLevel"),t=this.option("currentDate"),i=this._dateOption("min");if(!this._view.isDateDisabled(t)){var a=We.Z.sameView(e,t,i)?i:We.Z.getViewFirstCellDate(e,t);this._moveToClosestAvailableDate(a)}},end:function(r){r.preventDefault();var e=this.option("zoomLevel"),t=this.option("currentDate"),i=this._dateOption("max");if(!this._view.isDateDisabled(t)){var a=We.Z.sameView(e,t,i)?i:We.Z.getViewLastCellDate(e,t);this._moveToClosestAvailableDate(a)}},pageUp:function(r){r.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown:function(r){r.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:le.ZT,enter:this._enterKeyHandler})},_enterKeyHandler:function(r){if(this._isMaxZoomLevel()){if(!this._view.isDateDisabled(this.option("currentDate"))){var e=this._updateTimeComponent(this.option("currentDate"));this._selectionStrategy.selectValue(e,r)}}else this._navigateDown()},_getSerializationFormat:function(r){var e=this.option(r||"value");return this.option("dateSerializationFormat")?this.option("dateSerializationFormat"):(0,C.kE)(e)?"number":(0,C.HD)(e)?di.Z.getDateSerializationFormat(e):void 0},_convertToDate:function(r){return di.Z.deserializeDate(r)},_dateValue:function(r,e){if(e){if("keydown"===e.type){var t=this._view._getContouredCell().get(0);e.target=t}this._saveValueChangeEvent(e)}this._dateOption("value",r)},_dateOption:function(r,e){var t="value"===r&&!this._isSingleMode(),i=this.option("value");if(1===arguments.length)return t?(i??[]).map(s=>this._convertToDate(s)):this._convertToDate(this.option(r));var a=this._getSerializationFormat(r),n=t?e?.map(s=>di.Z.serializeDate(s,a))||[]:di.Z.serializeDate(e,a);this.option(r,n)},_isSingleMode:function(){return"single"===this.option("selectionMode")},_shiftDate:function(r,e,t,i){switch(r){case"month":e.setDate(e.getDate()+t*i);break;case"year":e.setMonth(e.getMonth()+t*i);break;case"decade":e.setFullYear(e.getFullYear()+t*i);break;case"century":e.setFullYear(e.getFullYear()+10*t*i)}},_moveCurrentDateByOffset:function(r){var e=this.option("currentDate"),t=new Date(e),i=this.option("zoomLevel");this._shiftDate(i,t,r,1);for(var a=this._getMaxDate(),n=this._getMinDate(),s=this._areDatesInNeighborView(i,t,e),o=(0,Di.Z2)(t,n,a)&&s,l=new Date(t);o;){if(!this._view.isDateDisabled(l)){t=l;break}this._shiftDate(i,l,r,1),s=this._areDatesInNeighborView(i,l,e),o=(0,Di.Z2)(l,n,a)&&s}if(this._view.isDateDisabled(e)||this._view.isDateDisabled(t)){var d=r>0?1:-1;(1===d?this._isNextViewDisabled():this._isPrevViewDisabled())?this._moveToClosestAvailableDate(t):this._waitRenderView(d)}else this._skipNavigate=!0,this.option("currentDate",t)},_isNextViewDisabled(){return this._navigator._nextButton.option("disabled")},_isPrevViewDisabled(){return this._navigator._prevButton.option("disabled")},_areDatesInSameView(r,e,t){switch(r){case"month":return e.getMonth()===t.getMonth();case"year":return e.getYear()===t.getYear();case"decade":return parseInt(e.getYear()/10)===parseInt(t.getYear()/10);case"century":return parseInt(e.getYear()/100)===parseInt(t.getYear()/100)}},_areDatesInNeighborView(r,e,t){switch(r){case"month":return i=e.getMonth(),a=t.getMonth(),n=Math.abs(i-a),Math.min(n,12-n)<=1;case"year":return Math.abs(e.getYear()-t.getYear())<=1;case"decade":return Math.abs(e.getYear()-t.getYear())<=10;case"century":return Math.abs(e.getYear()-t.getYear())<=100}var i,a,n},_moveToClosestAvailableDate:function(){var s,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("currentDate"),e=new Date(r),t=this.option("zoomLevel"),i=!this._isDateNotAvailable(e),a=i,n=i,l=new Date(e),d=new Date(e);do{if(a){e=l;break}if(n){e=d;break}this._shiftDate(t,l,1,1),this._shiftDate(t,d,1,-1),s=this._areDatesInSameView(t,l,r),o=this._areDatesInSameView(t,d,r),a=s&&!this._isDateNotAvailable(l),n=o&&!this._isDateNotAvailable(d)}while(s||o);this.option("currentDate",e)},_isDateNotAvailable:function(r){var e=this._getMaxDate(),t=this._getMinDate();return!(0,Di.Z2)(r,t,e)||this._view.isDateDisabled(r)},_init:function(){this.callBase(),this._initSelectionStrategy(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_initSelectionStrategy:function(){var r=this._getSelectionStrategyName();(!this._selectionStrategy||this._selectionStrategy.NAME!==r)&&(this._selectionStrategy=new(0,uL[r])(this))},_refreshSelectionStrategy:function(){this._initSelectionStrategy(),this._selectionStrategy.restoreValue(),this._refresh()},_getSelectionStrategyName:function(){switch(this.option("selectionMode")){case"multiple":return"MultipleSelection";case"range":return"RangeSelection";default:return"SingleSelection"}},_correctZoomLevel:function(){var r=this.option("minZoomLevel"),e=this.option("maxZoomLevel"),t=this.option("zoomLevel");eo[e]<eo[r]||(eo[t]>eo[e]?this.option("zoomLevel",e):eo[t]<eo[r]&&this.option("zoomLevel",r))},_initCurrentDate:function(){var r,e=null!==(r=this._getNormalizedDate(this._selectionStrategy.getDefaultCurrentDate()))&&void 0!==r?r:this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",e)},_getNormalizedDate:function(r){return r=We.Z.normalizeDate(r,this._getMinDate(),this._getMaxDate()),(0,C.$K)(r)?this._getDate(r):r},_initActions:function(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates:function(){this._templateManager.addDefaultTemplates({cell:new Cp.k(function(r){var e=r.model;(0,b.Z)(r.container).append((0,b.Z)("<span>").text(e&&e.text||String(e)))})}),this.callBase()},_updateCurrentDate:function(r){if(ti.Z.isAnimating(this._$viewsWrapper)&&ti.Z.stop(this._$viewsWrapper,!0),this._getMinDate()>this._getMaxDate())this.option("currentDate",new Date);else{var i=this._getNormalizedDate(r);if(r.getTime()===i.getTime()){var a=this._getViewsOffset(this._view.option("date"),i);0!==a&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(a=0),this._view&&0!==a&&!this._suppressNavigation?this._additionalView?a>2||a<-1?(this._refreshViews(),this._setViewContoured(i),this._updateAriaId(i),this._renderNavigator()):1===a&&this._skipNavigate?(this._setViewContoured(i),this._updateAriaId(i)):this._navigate(a,i):this._navigate(a,i):(this._renderNavigator(),this._setViewContoured(i),this._updateAriaId(i)),this._skipNavigate=!1}else this.option("currentDate",new Date(i))}},_isAdditionalViewDate(r){return!!this._additionalView&&r>=this._additionalView._getFirstAvailableDate()},_getActiveView:function(r){return this._isAdditionalViewDate(r)?this._additionalView:this._view},_setViewContoured:function(r){var e;(this.option("skipFocusCheck")||(0,b.Z)(this._$viewsWrapper).is(":focus"))&&(this._view.option("contouredDate",null),null===(e=this._additionalView)||void 0===e||e.option("contouredDate",null),(this._isAdditionalViewDate(r)?this._additionalView:this._view).option("contouredDate",r))},_getMinDate:function(){return this.option("_rangeMin")||(this.min||(this.min=this._dateOption("min")||new Date(1e3,0)),this.min)},_getMaxDate:function(){return this.option("_rangeMax")||(this.max||(this.max=this._dateOption("max")||new Date(3e3,0)),this.max)},_getViewsOffset:function(r,e){var i,t=this.option("zoomLevel");if("month"===t)return this._getMonthsOffset(r,e);switch(t){case"century":i=100;break;case"decade":i=10;break;default:i=1}return parseInt(e.getFullYear()/i)-parseInt(r.getFullYear()/i)},_getMonthsOffset:function(r,e){return 12*(e.getFullYear()-r.getFullYear())+(e.getMonth()-r.getMonth())},_waitRenderView:function(r){if(!this._alreadyViewRender){this._alreadyViewRender=!0;var e=this._getDateByOffset(r*this._getRtlCorrection());this._moveToClosestAvailableDate(e),this._waitRenderViewTimeout=setTimeout(()=>{this._alreadyViewRender=!1})}},_getRtlCorrection:function(){return this.option("rtlEnabled")?-1:1},_getDateByOffset:function(r,e){var t,i=(e=this._getDate(null!==(t=e)&&void 0!==t?t:this.option("currentDate"))).getDate(),a=We.Z.getDifferenceInMonth(this.option("zoomLevel"))*r;e.setDate(1),e.setMonth(e.getMonth()+a);var n=We.Z.getLastMonthDate(e).getDate();return e.setDate(i>n?n:i),e},_focusTarget:function(){return this._$viewsWrapper},_focusEventTarget(){return this.$element()},_initMarkup:function(){this._renderSubmitElement();var r=this.$element();r.addClass(Lp),r.toggleClass("dx-calendar-range","range"===this.option("selectionMode")),this._renderBody(),r.append(this.$body),this._renderViews(),this._renderNavigator(),this.callBase(),this._renderEvents(),r.prepend(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._selectionStrategy.updateAriaSelected(),this._updateAriaId(),this._updateNavigatorLabels(),this.setAria("role","application"),this._moveToClosestAvailableDate()},_render:function(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody:function(){this._$viewsWrapper||(this.$body=(0,b.Z)("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=(0,b.Z)("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))},_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews:function(){this.$element().addClass(b0+"-"+this.option("zoomLevel"));var{currentDate:r,viewsCount:e}=this.option();if(this.$element().toggleClass("dx-calendar-multiview",e>1),this._view=this._renderSpecificView(r),(0,Je.Ym)()){var t=this._getDateByOffset(-1,r);this._beforeView=this._isViewAvailable(t)?this._renderSpecificView(t):null;var i=this._getDateByOffset(e,r);i.setDate(1),this._afterView=this._isViewAvailable(i)?this._renderSpecificView(i):null}e>1&&(this._additionalView=this._renderSpecificView(this._getDateByOffset(1,r))),this._translateViews()},_renderSpecificView:function(r){var{zoomLevel:e}=this.option(),t=KR[e],i=(0,b.Z)("<div>").appendTo(this._$viewsWrapper),a=this._viewConfig(r);return this._createComponent(i,t,a)},_viewConfig:function(r){var e,t=this.option("disabledDates");return t=(0,C.mf)(t)?this._injectComponent(t.bind(this)):t,(0,ye.Z)({},this._selectionStrategy.getViewOptions(),{date:r,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:null!==(e=this.option("firstDayOfWeek"))&&void 0!==e?e:pt.Z.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),selectWeekOnClick:this.option("selectWeekOnClick"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:t,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")})},_renderEvents(){z.Z.off(this._$viewsWrapper,S0),"range"===this.option("selectionMode")&&z.Z.on(this._$viewsWrapper,S0,null,r=>{this._updateViewsOption("hoveredRange",[])})},_injectComponent:function(r){var e=this;return function(t){return(0,B.l)(t,{component:e}),r(t)}},_isViewAvailable:function(r){var e=this.option("zoomLevel"),t=We.Z.getViewMinBoundaryDate(e,this._getMinDate()),i=We.Z.getViewMaxBoundaryDate(e,this._getMaxDate());return We.Z.dateInRange(r,t,i)},_translateViews:function(){var{viewsCount:r}=this.option();(0,Gi.pB)(this._view.$element(),{left:0,top:0}),this._moveViewElement(this._beforeView,-1),this._moveViewElement(this._afterView,r),this._moveViewElement(this._additionalView,1)},_moveViewElement(r,e){r&&(0,Gi.pB)(r.$element(),{left:this._getViewPosition(e),top:0})},_getViewPosition:function(r){return 100*r*(this.option("rtlEnabled")?-1:1)+"%"},_cellClickHandler:function(r){var e=this.option("zoomLevel"),t=We.Z.getViewDown(e),i=this._isMaxZoomLevel();if(t&&!i)this._navigateDown(r.event.currentTarget);else{var a=this._updateTimeComponent(r.value);this._selectionStrategy.selectValue(a,r.event),this._cellClickAction(r)}},_updateTimeComponent:function(r){var e=new Date(r),t=this._dateOption("value");return t&&this._isSingleMode()&&(e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds())),e},_isMaxZoomLevel:function(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown:function(r){var e=this.option("zoomLevel");if(!this._isMaxZoomLevel()){var t=We.Z.getViewDown(e);if(t){var i=this._view.option("contouredDate")||this._view.option("date");r&&(i=(0,b.Z)(r).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",i),this.option("zoomLevel",t),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))}}},_renderNavigator:function(){this._navigator||(this._navigator=new OR((0,b.Z)("<div>"),this._navigatorConfig())),this._navigator.option("text",this._getViewsCaption(this._view,this._additionalView)),this._updateButtonsVisibility()},_navigatorConfig:function(){var{focusStateEnabled:r,rtlEnabled:e}=this.option();return{text:this._getViewsCaption(this._view,this._additionalView),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),focusStateEnabled:r,rtlEnabled:e,tabIndex:void 0}},_navigatorClickHandler:function(r){var{currentDate:e,viewsCount:t}=this.option(),i=r.direction;if(t>1){var a=this._isAdditionalViewDate(e);(a&&i<0||!a&&i>0)&&(i*=2)}var s=this._getDateByOffset(i,e);this._moveToClosestAvailableDate(s)},_navigateUp:function(){var r=this.option("zoomLevel"),e=We.Z.getViewUp(r);!e||this._isMinZoomLevel(r)||(this.option("zoomLevel",e),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel:function(r){var e=this._getMinDate(),t=this._getMaxDate();return We.Z.sameView(r,e,t)||this.option("minZoomLevel")===r},_updateButtonsVisibility:function(){this._navigator.toggleButton("next",!(0,C.$K)(this._afterView)),this._navigator.toggleButton("prev",!(0,C.$K)(this._beforeView))},_renderSwipeable:function(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),Cu,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler:function(r){ti.Z.stop(this._$viewsWrapper,!0);var{viewsCount:e}=this.option();this._toggleGestureCoverCursor("grabbing"),r.event.maxLeftOffset=this._getRequiredView("next")?1/e:0,r.event.maxRightOffset=this._getRequiredView("prev")?1/e:0},_toggleGestureCoverCursor:function(r){(0,b.Z)(".".concat("dx-gesture-cover")).css("cursor",r)},_getRequiredView:function(r){var e,t=this.option("rtlEnabled");return"next"===r?e=t?this._beforeView:this._afterView:"prev"===r&&(e=t?this._afterView:this._beforeView),e},_swipeUpdateHandler:function(r){var e=r.event.offset;(0,Gi.pB)(this._$viewsWrapper,{left:e*this._viewWidth(),top:0}),this._updateNavigatorCaption(e)},_swipeEndHandler:function(r){this._toggleGestureCoverCursor("auto");var{currentDate:e,rtlEnabled:t}=this.option(),i=r.event.targetOffset,a=i?i/Math.abs(i):0,s=this._isAdditionalViewDate(e)&&(t?-1===a:1===a);if(0!==a){var o=-a*this._getRtlCorrection()*(s?2:1),l=this._getDateByOffset(o);this._isDateInInvalidRange(l)&&(l=a>=0?new Date(this._getMinDate()):new Date(this._getMaxDate())),this.option("currentDate",l)}else this._animateWrapper(0,250)},_viewWidth:function(){return this._viewWidthValue||(this._viewWidthValue=(0,we.dz)(this.$element())/this.option("viewsCount")),this._viewWidthValue},_updateNavigatorCaption:function(r){r*=this._getRtlCorrection();var t,i,e=this.option("viewsCount")>1;r>.5&&this._beforeView?(t=this._beforeView,i=e&&this._view):r<-.5&&this._afterView?(t=e?this._additionalView:this._afterView,i=e?this._afterView:null):(t=this._view,i=e?this._additionalView:null),this._navigator.option("text",this._getViewsCaption(t,i))},_getViewsCaption:function(r,e){var t=r.getNavigatorCaption(),{viewsCount:i}=this.option();if(i>1&&e){var a=e.getNavigatorCaption();t="".concat(t," - ").concat(a)}return t},_isDateInInvalidRange:function(r){if(!this._view.isBoundary(r)){var e=this._getMinDate(),t=this._getMaxDate(),i=We.Z.normalizeDate(r,e,t);return i===e||i===t}},_renderFooter:function(){var r=this.option("showTodayButton");if(r){var e=this._createComponent((0,b.Z)("<div>"),Or.Z,{focusStateEnabled:this.option("focusStateEnabled"),text:ae.Z.format("dxCalendar-todayButtonText"),onClick:t=>{this._toTodayView(t)},type:(0,Lt.dC)()?"normal":"default",stylingMode:(0,Lt.dC)()?"outlined":"text",integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=(0,b.Z)("<div>").addClass("dx-calendar-footer").append(e),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",r)},_renderSubmitElement:function(){this._$submitElement=(0,b.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(r){var e=this._convertToDate(r);this._getSubmitElement().val(di.Z.serializeDate(e,"yyyy-MM-dd"))},_getSubmitElement:function(){return this._$submitElement},_animateShowView:function(){ti.Z.stop(this._view.$element(),!0),this._popAnimationView(this._view,.6,1,250),this.option("viewsCount")>1&&(ti.Z.stop(this._additionalView.$element(),!0),this._popAnimationView(this._additionalView,.6,1,250))},_popAnimationView:function(r,e,t,i){return ti.Z.animate(r.$element(),{type:"pop",from:{scale:e,opacity:e},to:{scale:t,opacity:t},duration:i})},_navigate:function(r,e){if(0!==r&&1!==Math.abs(r)&&this._isViewAvailable(e)){var t=this._renderSpecificView(e);r>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=t):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=t),this._translateViews()}var n=-this._getRtlCorrection()*(r>0?1:r<0?-1:0)*this._viewWidth();this._$viewsWrapper.position().left!==n&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(r,e):this._animateWrapper(n,250).done(this._wrapperAnimationEndHandler.bind(this,r,e)))},_animateWrapper:function(r,e){return ti.Z.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:r},duration:e})},_getDate:r=>new Date(r),_toTodayView:function(r){var e=new Date;this._isMaxZoomLevel()?this._selectionStrategy.selectValue(e,r.event):(this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._selectionStrategy.selectValue(e,r.event),this._animateShowView(),this._preventViewChangeAnimation=!1)},_wrapperAnimationEndHandler:function(r,e){this._rearrangeViews(r),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(e),this._updateAriaId(e),this._selectionStrategy.updateAriaSelected()},_rearrangeViews:function(r){var e;if(0!==r){var i,a,n,s,o,{viewsCount:t}=this.option();if(r<0?(i=1,a="_beforeView",n="_afterView",s="_view",o=1===t?"_view":"_additionalView"):(i=-1,a="_afterView",n="_beforeView",s=1===t?"_view":"_additionalView",o="_view"),this[a]){var l=this[a].option("date");null===(e=this[n])||void 0===e||e.$element().remove(),this[n]=this._renderSpecificView(this._getDateByOffset(i*t,l)),this[o].$element().remove(),1===t?this[o]=this[a]:(this[o]=this[s],this[s]=this[a]);var d=this._getDateByOffset(-i,l);this[a]=this._isViewAvailable(d)?this._renderSpecificView(d):null}}},_resetLocation:function(){(0,Gi.pB)(this._$viewsWrapper,{left:0,top:0})},_clean:function(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache:function(){delete this._viewWidthValue},_disposeViews:function(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._additionalView&&this._additionalView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._additionalView,delete this._beforeView,delete this._afterView,delete this._skipNavigate},_dispose:function(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews:function(){this._resetActiveState(),this._disposeViews(),this._renderViews()},_visibilityChanged:function(){this._translateViews()},_shouldSkipFocusEvent(r){var{target:e,relatedTarget:t}=r;return(0,b.Z)(e).parents(".".concat(Lp)).length&&(0,b.Z)(t).parents(".".concat(Lp)).length},_focusInHandler:function(r){(0,b.Z)(r.target).is(this._$viewsWrapper)&&this._setViewContoured(this.option("currentDate")),!this._shouldSkipFocusEvent(r)&&(this.callBase.apply(this,arguments),this._toggleFocusClass(!0,this.$element()))},_focusOutHandler:function(r){var e;(0,b.Z)(r.target).is(this._$viewsWrapper)&&(this._view.option("contouredDate",null),null===(e=this._additionalView)||void 0===e||e.option("contouredDate",null)),this._shouldSkipFocusEvent(r)||(this.callBase.apply(this,arguments),this._toggleFocusClass(!1,this.$element()))},_updateViewsOption:function(r,e){var t,i,a;this._view.option(r,e),null===(t=this._additionalView)||void 0===t||t.option(r,e),null===(i=this._beforeView)||void 0===i||i.option(r,e),null===(a=this._afterView)||void 0===a||a.option(r,e)},_setViewsMinOption:function(r){this._restoreViewsMinMaxOptions(),this.option("_rangeMin",this._convertToDate(r)),this._updateViewsOption("min",this._getMinDate())},_setViewsMaxOption:function(r){this._restoreViewsMinMaxOptions(),this.option("_rangeMax",this._convertToDate(r)),this._updateViewsOption("max",this._getMaxDate())},_restoreViewsMinMaxOptions:function(){this._resetActiveState(),this.option({_rangeMin:null,_rangeMax:null}),this._updateViewsOption("min",this._getMinDate()),this._updateViewsOption("max",this._getMaxDate())},_updateNavigatorLabels:function(){var r=this.option("zoomLevel");r=r.charAt(0).toUpperCase()+r.slice(1);var e=this._navigator._caption.option("text"),t=ae.Z.format("dxCalendar-previous".concat(r,"ButtonLabel")),i=ae.Z.format("dxCalendar-caption".concat(r,"Label")),a=ae.Z.format("dxCalendar-next".concat(r,"ButtonLabel"));this.setAria("label",t,this._navigator._prevButton.$element()),this.setAria("label","".concat(e,". ").concat(i),this._navigator._caption.$element()),this.setAria("label",a,this._navigator._nextButton.$element())},_updateAriaSelected:function(r,e){e.forEach(t=>{this.setAria("selected",void 0,this._view._getCellByDate(t))}),r.forEach(t=>{this.setAria("selected",!0,this._view._getCellByDate(t))}),this.option("viewsCount")>1&&(e.forEach(t=>{this.setAria("selected",void 0,this._additionalView._getCellByDate(t))}),r.forEach(t=>{this.setAria("selected",!0,this._additionalView._getCellByDate(t))}))},_updateAriaId:function(r){var e;r=null!==(e=r)&&void 0!==e?e:this.option("currentDate");var t="dx-"+new Pi.Z,a=this._getActiveView(r)._getCellByDate(r);this.setAria("id",t,a),this.setAria("activedescendant",t),this._onContouredChanged(t)},_suppressingNavigation:function(r,e){this._suppressNavigation=!0,r.apply(this,e),delete this._suppressNavigation},_optionChanged:function(r){var{value:e,previousValue:t}=r;switch(r.name){case"width":this.callBase(r),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"selectionMode":this._refreshSelectionStrategy(),this._initCurrentDate();break;case"selectWeekOnClick":case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"focusStateEnabled":case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(t)),this._updateCurrentDate(e);break;case"zoomLevel":this.$element().removeClass(b0+"-"+t),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId(),this._updateNavigatorLabels();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":this._selectionStrategy.processValueChanged(e,t),this._setSubmitValue(e),this.callBase(r);break;case"viewsCount":this._refreshViews(),this._renderNavigator();break;case"onCellClick":this._view.option("onCellClick",e);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"skipFocusCheck":break;default:this.callBase(r)}},getContouredDate:function(){return this._view.option("contouredDate")}});(0,Rt.Z)("dxCalendar",E0);const hL=E0;var yu=Ba.Z.abstract,cL=Ba.Z.inherit({ctor:function(r){this.dateBox=r},widgetOption:function(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget:function(r){r=r||(0,b.Z)("<div>"),this._widget=this._createWidget(r),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget:function(r){var e=this._getWidgetName(),t=this._getWidgetOptions();return this.dateBox._createComponent(r,e,t)},_getWidgetOptions:yu,_getWidgetName:yu,getDefaultOptions:function(){return{mode:"text"}},getDisplayFormat:yu,supportedKeys:le.ZT,getKeyboardListener:le.ZT,customizeButtons:le.ZT,getParsedText:function(r,e){return pt.Z.parse(r,e)||pt.Z.parse(r)},renderInputMinMax:le.ZT,renderOpenedState:function(){this._updateValue()},popupConfig:yu,_dimensionChanged:function(){var r;null===(r=this._getPopup())||void 0===r||r.repaint()},renderPopupContent:function(){var r=this._getPopup();this._renderWidget();var e=r.$content().parent();z.Z.off(e,"mousedown"),z.Z.on(e,"mousedown",this._preventFocusOnPopup.bind(this))},_preventFocusOnPopup:function(r){r.preventDefault()},_getWidgetContainer:function(){return this._getPopup().$content()},_getPopup:function(){return this.dateBox._popup},popupShowingHandler:le.ZT,popupHiddenHandler:le.ZT,_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:le.ZT,getDefaultDate:function(){return new Date},textChangedHandler:le.ZT,renderValue:function(){this.dateBox.option("opened")&&this._updateValue()},getValue:function(){return this._widget.option("value")},isAdaptivityChanged:function(){return!1},dispose:function(){var r=this._getPopup();r&&r.$content().empty()},dateBoxValue:function(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}});const xu=cL;var fL=xu.inherit({NAME:"Calendar",getDefaultOptions:function(){return(0,B.l)(this.callBase(),{todayButtonText:ae.Z.format("dxCalendar-todayButtonText")})},supportedKeys:function(){var r=function(e){return!!this.option("opened")&&(e.preventDefault(),!0)};return{rightArrow:function(){if(this.option("opened"))return!0},leftArrow:function(){if(this.option("opened"))return!0},enter:function(e){if(this.dateBox.option("opened")){if(e.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){var t=this._getContouredValue(),i=this._lastActionElement,a=this._closeDropDownByEnter();return a&&t&&"calendar"===i&&this.dateBoxValue(t,e),a&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(e),!a}return!0}this.dateBox._valueChangeEventHandler(e)}.bind(this),home:r,end:r}},getDisplayFormat:function(r){return r||"shortdate"},_closeDropDownByEnter:()=>!0,_getWidgetName:function(){return hL},_getContouredValue:function(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions:function(){var r=this.dateBox.option("disabledDates");return(0,B.l)(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,selectionMode:"single",dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),disabledDates:(0,C.mf)(r)?this._injectComponent(r.bind(this.dateBox)):r,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent:function(r){var e=this;return function(t){return(0,B.l)(t,{component:e.dateBox}),r(t)}},_refreshActiveDescendant:function(r){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",r.actionValue)},_getTodayButtonConfig(){var r=this.dateBox.option("buttonsLocation"),t="default"===r?["bottom","center"]:(0,le.Um)(r),i=(0,Lt.x2)()?"text":"outlined";return{widget:"dxButton",toolbar:t[0],location:"after"===t[1]?"before":t[1],options:{onClick:a=>{this._widget._toTodayView(a)},text:this.dateBox.option("todayButtonText"),elementAttr:{class:"dx-button-today"},stylingMode:i}}},_isCalendarVisible:function(){var{calendarOptions:r}=this.dateBox.option();return(0,C.Qr)(r)||!1!==r.visible},_getPopupToolbarItems(r){return"useButtons"===this.dateBox.option("applyValueMode")&&this._isCalendarVisible()?[this._getTodayButtonConfig(),...r]:r},popupConfig:function(r){return(0,B.l)(!0,r,{position:{collision:"flipfit flip"},width:"auto"})},_valueChangedHandler:function(r){var e=r.value,t=r.previousValue;We.Z.sameDate(e,t)&&We.Z.sameHoursAndMinutes(e,t)||"instantly"===this.dateBox.option("applyValueMode")&&this.dateBoxValue(this.getValue(),r.event)},_updateValue:function(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler:function(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler:function(r){var e=this.dateBox;"instantly"===e.option("applyValueMode")&&(e.option("opened",!1),this.dateBoxValue(this.getValue(),r.event))}});const I0=fL;var vL=ve(4672);class gL{constructor(e){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=e??Wa.Et}get isHorizontal(){return this.direction===Wa.Xv||this.direction===Wa.b$}get isVertical(){return this.direction===Wa.Et||this.direction===Wa.b$}get isBoth(){return this.direction===Wa.b$}}var A0="dx-dateview-item";class T0 extends vL.Z{_getDefaultOptions(){return(0,B.l)(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){z.Z.on((0,b.Z)(this.container()),"dxmousewheel",e=>{this._isWheelScrolled=!0})}_renderContainerClick(){if(this.option("showOnClick")){var e=(0,Ee.V4)(Ft.u,this.NAME),t=this._createActionByOption("onClick");z.Z.off((0,b.Z)(this.container()),e),z.Z.on((0,b.Z)(this.container()),e,function(i){t({event:i})})}}_renderItems(){var e=this.option("items")||[],t=(0,b.Z)();(0,b.Z)(this.content()).empty(),e.forEach(function(i){t=t.add((0,b.Z)("<div>").addClass(A0).append(i))}),(0,b.Z)(this.content()).append(t),this._$items=t,this.update()}_renderSelectedItemFrame(){(0,b.Z)("<div>").addClass("dx-dateview-item-selected-frame").append((0,b.Z)("<div>").addClass("dx-dateview-item-selected-border")).appendTo((0,b.Z)(this.container()))}_renderSelectedValue(e){var t=this._fitIndex(e??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(t)}),this._renderActiveStateItem()}_fitIndex(e){var i=(this.option("items")||[]).length;return e>=i?i-1:e<0?0:e}_getItemPosition(e){return Math.round(this._itemHeight()*e)}_renderItemsClick(){var e=this._getItemSelector(),t=(0,Ee.V4)(Ft.u,this.NAME);z.Z.off(this.$element(),t,e),z.Z.on(this.$element(),t,e,this._itemClickHandler.bind(this))}_getItemSelector(){return"."+A0}_itemClickHandler(e){this.option("selectedIndex",this._itemElementIndex(e.currentTarget))}_itemElementIndex(e){return this._itemElements().index(e)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){var e=this.option("selectedIndex");(0,Y.S6)(this._$items,function(t){(0,b.Z)(this).toggleClass("dx-dateview-item-selected",e===t)})}_shouldScrollToNeighborItem(){return"desktop"===ft.Z.real().deviceType&&this._isWheelScrolled}_moveTo(e){var{top:t,left:i}=function _L(r,e){if((0,C.PO)(r)){var t=(0,le.IS)(r.left,r.x),i=(0,le.IS)(r.top,r.y);return{left:(0,C.$K)(t)?t:void 0,top:(0,C.$K)(i)?i:void 0}}var{isHorizontal:a,isVertical:n}=new gL(e);return{left:a&&(0,C.$K)(r)?r:void 0,top:n&&(0,C.$K)(r)?r:void 0}}(e),a=this.scrollOffset(),n={x:a.left-i,y:a.top-t};if(this._isVisible()&&(n.x||n.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){var s=this;ti.Z.stop((0,b.Z)(this.content())),ti.Z.animate((0,b.Z)(this.content()),{duration:200,type:"slide",to:{top:Math.floor(n.y)},complete(){(0,Gi.Kx)((0,b.Z)(s.content())),s.handleMove({delta:n})}}),delete this._animation}else this.handleMove({delta:n})}_validate(e){return this._moveIsAllowed(e)}_fitSelectedIndexInRange(e){var t=this.option("items").length;return Math.max(Math.min(e,t-1),0)}_isInNullNeighborhood(e){return-.1<=e&&e<=.1}_getSelectedIndexAfterScroll(e){var a=this.scrollOffset().top-e*this._itemHeight();return this._isInNullNeighborhood(a)?e:this._fitSelectedIndexInRange(e+(a>0?1:-1))}_getNewSelectedIndex(e){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(e);this._animation=!0;var t=this.scrollOffset().top/this._itemHeight();return Math.round(t)}_endActionHandler(){var e=this.option("selectedIndex"),t=this._getNewSelectedIndex(e);t===e?this._renderSelectedValue(t):this.option("selectedIndex",t),this._isWheelScrolled=!1}_itemHeight(){var e=this._$items.first();return(0,we.Cr)(e)}_toggleActive(e){this.$element().toggleClass("dx-state-active",e)}_isVisible(){return(0,b.Z)(this.container()).is(":visible")}_fireSelectedIndexChanged(e,t){this._selectedIndexChanged({value:e,previousValue:t,event:void 0})}_visibilityChanged(e){super._visibilityChanged(e),this._visibilityChangedHandler(e)}_visibilityChangedHandler(e){e&&(this._visibilityTimer=setTimeout(()=>{this._renderSelectedValue(this.option("selectedIndex"))})),this.toggleActiveState(!1)}toggleActiveState(e){this.$element().toggleClass("dx-dateviewroller-current",e)}_refreshSelectedIndex(){var e=this.option("selectedIndex"),t=this._fitIndex(e);t===e?this._renderActiveStateItem():this.option("selectedIndex",t)}_optionChanged(e){switch(e.name){case"selectedIndex":this._fireSelectedIndexChanged(e.value,e.previousValue),this._renderSelectedValue(e.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(e)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}(0,Rt.Z)("dxDateViewRoller",T0);const SL=T0;var Pp="dx-dateview",O0=za.Z.inherit({_valueOption:function(){var r=this.option("value"),e=new Date(r);return!r||isNaN(e)?this._getDefaultDate():e},_getDefaultDate:function(){var r=new Date;return"date"===this.option("type")?new Date(r.getFullYear(),r.getMonth(),r.getDate()):r},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{minDate:Wt.MIN_DATEVIEW_DEFAULT_DATE,maxDate:Wt.MAX_DATEVIEW_DEFAULT_DATE,type:"date",value:new Date,applyCompactClass:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(r){return"desktop"!==r.deviceType},options:{applyCompactClass:!0}}])},_render:function(){this.callBase(),this.$element().addClass(Pp),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses:function(r,e){this.$element().addClass(Pp+"-"+r),e&&this.$element().removeClass(Pp+"-"+e)},_toggleCompactClass:function(){this.$element().toggleClass("dx-dateview-compact",this.option("applyCompactClass"))},_wrapper:function(){return this._$wrapper},_renderContentImpl:function(){this._$wrapper=(0,b.Z)("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers:function(){this._$rollersContainer||(this._$rollersContainer=(0,b.Z)("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};var r=this;(0,Y.S6)(r._rollerConfigs,function(e){var t=(0,b.Z)("<div>").appendTo(r._$rollersContainer).addClass("dx-dateviewroller-"+r._rollerConfigs[e].type);r._rollers[r._rollerConfigs[e].type]=r._createComponent(t,SL,{items:r._rollerConfigs[e].displayItems,selectedIndex:r._rollerConfigs[e].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart:function(i){var a=i.component;a._toggleActive(!0),r._setActiveRoller(r._rollerConfigs[e],a.option("selectedIndex"))},onEnd:function(i){i.component._toggleActive(!1)},onClick:function(i){var a=i.component;a._toggleActive(!0),r._setActiveRoller(r._rollerConfigs[e],a.option("selectedIndex")),r._setRollerState(r._rollerConfigs[e],a.option("selectedIndex")),a._toggleActive(!1)},onSelectedIndexChanged:function(i){r._setRollerState(r._rollerConfigs[e],i.component.option("selectedIndex"))}})}),r._$rollersContainer.appendTo(r._wrapper())},_createRollerConfigs:function(r){var e=this;r=r||e.option("type"),e._rollerConfigs={},pt.Z.getFormatParts(Wt.FORMATS_MAP[r]).forEach(function(t){e._createRollerConfig(t)})},_createRollerConfig:function(r){for(var e=Wt.DATE_COMPONENTS_INFO[r],t=this._calculateRollerConfigValueRange(r),i=t.startValue,a=t.endValue,n=e.formatter,s=this._getCurrentDate(),o={type:r,setValue:e.setter,valueItems:[],displayItems:[],getIndex:function(d){return d[e.getter]()-i}},l=i;l<=a;l++)o.valueItems.push(l),o.displayItems.push(n(l,s));o.selectedIndex=o.getIndex(s),this._rollerConfigs[r]=o},_setActiveRoller:function(r){var e=r&&this._rollers[r.type];(0,Y.S6)(this._rollers,function(){this.toggleActiveState(this===e)})},_updateRollersPosition:function(){var r=this;(0,Y.S6)(this._rollers,function(e){var t=r._rollerConfigs[e].getIndex(r._getCurrentDate());this.option("selectedIndex",t)})},_setRollerState:function(r,e){if(e!==r.selectedIndex){var t=r.valueItems[e],i=r.setValue,a=new Date(this._getCurrentDate()),n=a.getDate(),s=this.option("minDate"),o=this.option("maxDate");"month"===r.type?n=Math.min(n,Wt.getMaxMonthDay(a.getFullYear(),t)):"year"===r.type&&(n=Math.min(n,Wt.getMaxMonthDay(t,a.getMonth()))),a.setDate(n),a[i](t);var l=We.Z.normalizeDate(a,s,o);a=Wt.mergeDates(l,a,"time"),a=We.Z.normalizeDate(a,s,o),this.option("value",a),r.selectedIndex=e}"year"===r.type&&this._refreshRollers(),"month"===r.type&&(this._refreshRoller("day"),this._refreshRoller("hours"))},_refreshRoller:function(r){var e=this._rollers[r];if(e){this._createRollerConfig(r);var t=this._rollerConfigs[r];("day"===r||t.displayItems.toString()!==e.option("items").toString())&&e.option({items:t.displayItems,selectedIndex:t.selectedIndex})}},_getCurrentDate:function(){var r=this._valueOption(),e=this.option("minDate"),t=this.option("maxDate");return We.Z.normalizeDate(r,e,t)},_calculateRollerConfigValueRange:function(r){var e=this._getCurrentDate(),t=this.option("minDate"),i=this.option("maxDate"),a=We.Z.sameYear(e,t),n=a&&e.getMonth()===t.getMonth(),s=We.Z.sameYear(e,i),o=s&&e.getMonth()===i.getMonth(),l=n&&e.getDate()===t.getDate(),d=o&&e.getDate()===i.getDate(),u=Wt.DATE_COMPONENTS_INFO[r],c=u.startValue,f=u.endValue;return"year"===r&&(c=t.getFullYear(),f=i.getFullYear()),"month"===r&&(a&&(c=t.getMonth()),s&&(f=i.getMonth())),"day"===r&&(f=Wt.getMaxMonthDay(e.getFullYear(),e.getMonth()),a&&n&&(c=t.getDate()),s&&o&&(f=i.getDate())),"hours"===r&&(c=l?t.getHours():c,f=d?i.getHours():f),{startValue:c,endValue:f}},_refreshRollers:function(){this._refreshRoller("month"),this._refreshRoller("day"),this._refreshRoller("hours")},_optionChanged:function(r){switch(r.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(r.value,r.previousValue);break;case"visible":this.callBase(r),r.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(r)}},_clean:function(){this.callBase(),delete this._$rollersContainer}});(0,Rt.Z)("dxDateView",O0);const DL=O0;var OL=(0,Je.Jj)(),RL=xu.inherit({NAME:"DateView",getDefaultOptions:function(){return(0,B.l)(this.callBase(),{openOnFieldClick:!0,applyButtonText:ae.Z.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat:function(r){return r||Wt.FORMATS_MAP[this.dateBox.option("type")]},popupConfig:function(r){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:r.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device:function(e){var t=e.platform;return"generic"===t||"ios"===t},options:{width:"auto",height:"auto"}},{device:function(e){return"generic"===e.platform&&e.phone},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:OL}}}]}},_renderWidget:function(){if((0,qn.inputType)(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly"))this._widget&&(this._widget.$element().remove(),this._widget=null);else{var r=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{var e=(0,b.Z)("<div>").appendTo(r.$content());this._widget=this._createWidget(e)}this._widget.$element().appendTo(this._getWidgetContainer())}},_getWidgetName:function(){return DL},renderOpenedState:function(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions:function(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*Wt.ONE_YEAR),onDisposing:function(){this._widget=null}.bind(this)}}});const LL=RL;var PL=xu.inherit({NAME:"Native",popupConfig:function(r){return(0,B.l)({},r,{width:"auto"})},getParsedText:function(r){return r?"datetime"===this.dateBox.option("type")?new Date(r.replace(/-/g,"/").replace("T"," ").split(".")[0]):Wt.fromStandardDateFormat(r):null},renderPopupContent:le.ZT,_getWidgetName:le.ZT,_getWidgetOptions:le.ZT,_getDateBoxType:function(){var r=this.dateBox.option("type");return Wt.SUPPORTED_FORMATS.includes(r)?"datetime"===r&&!(0,qn.inputType)(r)&&(r="datetime-local"):r="date",r},customizeButtons:function(){var r=this.dateBox.getButton("dropDown");ft.Z.real().android&&r&&r.on("click",function(){this.dateBox._input().get(0).click()}.bind(this))},getDefaultOptions:function(){return{mode:this._getDateBoxType()}},getDisplayFormat:function(r){var e=this._getDateBoxType();return r||Wt.FORMATS_MAP[e]},renderInputMinMax:function(r){r.attr({min:di.Z.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:di.Z.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}});const FL=PL;var R0="dxBoxItemData",ML={row:"minWidth",col:"minHeight"},HL={row:"maxWidth",col:"maxHeight"},L0={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},P0={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},ZL={row:"row",col:"column"},to=(r,e,t)=>{if(t=(0,nr.bh)(e,t),r.style[(0,nr.Hj)(e)]=t,!(0,Je.Ym)()){if(""===t||!(0,C.$K)(t))return;var i=(0,Ma.H0)(e),a="".concat(i,": ").concat(t,";");(0,nr.A_)(r,a,!1)}};class zL extends eu.Z{_renderVisible(e,t){super._renderVisible(e),(0,C.$K)(t)&&this._options.fireItemStateChangedAction({name:"visible",state:e,oldState:t})}}class WL{constructor(e,t){this._$element=e,this._option=t}renderBox(){this._$element.css({display:"".concat((0,nr.gC)("flexDirection"),"flex")}),to(this._$element.get(0),"flexDirection",ZL[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){var e=this._option("align");return e in L0?L0[e]:e}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){var e=this._option("crossAlign");return e in P0?P0[e]:e}renderItems(e){var t=(0,nr.gC)("flexDirection"),i=this._option("direction");(0,Y.S6)(e,function(){var a=(0,b.Z)(this),n=a.data(R0);a.css({display:"".concat(t,"flex")}).css(HL[i],n.maxSize||"none").css(ML[i],n.minSize||"0"),to(a.get(0),"flexBasis",n.baseSize||0),to(a.get(0),"flexGrow",n.ratio),to(a.get(0),"flexShrink",(0,C.$K)(n.shrink)?n.shrink:1),a.children().each((s,o)=>{(0,b.Z)(o).css({width:"auto",height:"auto",display:"".concat((0,nr.gC)("flexDirection"),"flex"),flexBasis:0}),to(o,"flexGrow",1),to(o,"flexDirection",(0,b.Z)(o)[0].style.flexDirection||"column")})})}}let F0=(()=>{class r extends pl.Z{_getDefaultOptions(){return(0,B.l)(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return"dx-box-item"}_itemDataKey(){return R0}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new WL(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return!this.option("_queue")&&!!this._queue.length}_pushItemToQueue(t,i){this._queue.push({$item:t,config:i})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(t){for(super._renderItems(t);this._queueIsNotEmpty();){var i=this._shiftItemFromQueue();this._createComponent(i.$item,r,(0,B.l)({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},i.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(t){var i=t.itemData&&t.itemData.node;return i?this._renderItemContentByNode(t,i):super._renderItemContent(t)}_postprocessRenderItem(t){var i=t.itemData.box;i&&this._pushItemToQueue(t.itemContent,i)}_createItemByTemplate(t,i){return i.itemData.box?t.source?t.source():(0,b.Z)():super._createItemByTemplate(t,i)}_itemOptionChanged(t,i,a,n){"visible"===i&&this._onItemStateChanged({name:i,state:a,oldState:!1!==n}),super._itemOptionChanged(t,i,a)}_optionChanged(t){switch(t.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(t)}}_itemOptions(){var t=super._itemOptions();return t.fireItemStateChangedAction=i=>{this._onItemStateChanged(i)},t}}return r.ItemClass=zL,r})();(0,Rt.Z)("dxBox",F0);const Su=F0;var V0=function(r,e,t){XL(r,e,t)},XL=function(r,e,t){r.css("transform","rotate("+e+"deg) translate(0,"+t+"px)")},N0=za.Z.inherit({_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue:function(){return this.option("value")||new Date},_init:function(){this.callBase(),this.$element().addClass("dx-timeview")},_render:function(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox:function(){var r=(0,b.Z)("<div>").appendTo(this.$element()),e=[];this.option("_showClock")&&e.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),e.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(r,Su,{height:"100%",width:"100%",direction:"col",items:e})},_renderClock:function(r,e,t){this._$hourArrow=(0,b.Z)("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=(0,b.Z)("<div>").addClass("dx-timeview-minutearrow");var i=(0,b.Z)(t);i.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",i)},_updateClock:function(){var r=this._getValue(),e=r.getHours()/12*360+r.getMinutes()/60*30,t=r.getMinutes()/60*360;V0(this._$hourArrow,e,this.option("_arrowOffset")),V0(this._$minuteArrow,t,this.option("_arrowOffset"))},_getBoxItems:function(r){var e=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:(0,b.Z)("<div>").addClass("dx-timeview-time-separator").text(pt.Z.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return r&&e.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),e},_renderField:function(){var r=!this.option("use24HourFormat");return this._createHourBox(r),this._createMinuteBox(),r&&this._createFormat12Box(),this._createComponent((0,b.Z)("<div>").addClass("dx-timeview-field"),Su,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(r)}).$element()},_createHourBox:function(r){var e=this._hourBox=this._createComponent((0,b.Z)("<div>"),gp,(0,B.l)({min:-1,max:r?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:t=>this._keyboardHandler(t)},this._getNumberBoxConfig()));e.setAria("label","hours")},_isPM:function(){return!this.option("use24HourFormat")&&1===this._format12.option("value")},_onHourBoxValueChanged:function(r){var{value:e,component:t}=r,i=this._getValue(),a=new Date(i),n=this._convertMaxHourToMin(e);t.option("value",n),this._isPM()&&(n+=12),a.setHours(n),Wt.normalizeTime(a),this.option("value",a)},_convertMaxHourToMin:function(r){var e=this.option("use24HourFormat")?24:12;return(e+r)%e},_createMinuteBox:function(){var r=this._minuteBox=this._createComponent((0,b.Z)("<div>"),gp,(0,B.l)({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{var{value:t,component:i}=e,a=(60+t)%60;i.option("value",a);var n=new Date(this._getValue());n.setMinutes(a),Wt.normalizeTime(n),this.option("value",n)}},this._getNumberBoxConfig()));r.setAria("label","minutes")},_createFormat12Box:function(){var r=pt.Z.getPeriodNames(),e=this._format12=this._createComponent((0,b.Z)("<div>").addClass("dx-timeview-format12"),n0,{items:[{value:-1,text:r[0]},{value:1,text:r[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:t=>this._keyboardHandler(t),onValueChanged:t=>{var{value:i}=t,a=this._getValue().getHours(),n=new Date(this._getValue());n.setHours((a+12*i)%24),this.option("value",n)},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")});e.setAria("label","type")},_refreshFormat12:function(){if(!this.option("use24HourFormat")){var e=this._getValue().getHours();this._silentEditorValueUpdate(this._format12,e>=12?1:-1)}},_silentEditorValueUpdate:function(r,e){r&&(r._suppressValueChangeAction(),r.option("value",e),r._resumeValueChangeAction())},_getNumberBoxConfig:function(){return{showSpinButtons:!0,displayValueFormatter:function(r){return(r<10?"0":"")+r},stylingMode:this.option("stylingMode")}},_normalizeHours:function(r){return this.option("use24HourFormat")?r:r%12||12},_updateField:function(){var r=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,r),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime:function(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged:function(r){r&&this._updateTime()},_optionChanged:function(r){switch(r.name){case"value":this._updateTime(),this.callBase(r);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(r)}}});(0,Rt.Z)("dxTimeView",N0);const JL=N0;var QL=(0,Je.Jj)(),B0="dx-datebox-datetime-time-side",iP=I0.inherit({NAME:"CalendarWithTime",getDefaultOptions:function(){return(0,B.l)(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter:function(){return We.Z.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:function(r){return r||"shortdateshorttime"},_is24HourFormat:function(){return pt.Z.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue:function(){var r=this.callBase();return this._updateDateTime(r)},_renderWidget:function(){this.callBase(),this._timeView=this.dateBox._createComponent((0,b.Z)("<div>"),JL,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")})},renderOpenedState:function(){this.callBase();var r=this._getPopup();r&&r.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout(function(){this._getPopup()&&this._getPopup().repaint()}.bind(this),0)},isAdaptivityChanged:function(){var r=this._isShrinkView(),e=this._currentAdaptiveMode;return r!==e?(this._currentAdaptiveMode=r,void 0!==e):this.callBase()},_updateValue:function(r){var e=this.dateBoxValue();!e&&!r&&Wt.normalizeTime(e=new Date),this.callBase(),this._timeView&&(e&&this._timeView.option("value",e),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:function(){return(0,we.dz)(QL)<=573},_isShrinkView:function(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems:function(){var r=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||r.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),r},renderPopupContent:function(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();var r=this._getPopup().$content();this._box=this.dateBox._createComponent((0,b.Z)("<div>").appendTo(r),Su,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:function(e,t,i){var a=(0,b.Z)("<div>");switch(e.name){case"calendar":a.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(B0),a.append(this._timeView.$element()));break;case"time":a.append(this._timeView.$element()),(0,b.Z)(i).addClass(B0)}return a}.bind(this)})},popupConfig:function(r){var e=this.callBase(r);return(0,B.l)(e,{width:"auto"})},_preventFocusOnPopup:function(r){(0,b.Z)(r.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime:function(r){var e=this._timeView.option("value");return r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r},getValue:function(){var r,e=null!==(r=this._widget.option("value"))&&void 0!==r?r:this._widget.getContouredDate();return e=e?new Date(e):new Date,this._updateDateTime(e)},dispose:function(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}});const rP=iP;var aP=(0,Je.Jj)(),sP={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},oP=xu.inherit({NAME:"List",supportedKeys:function(){return{space:le.ZT,home:le.ZT,end:le.ZT}},getDefaultOptions:function(){return(0,B.l)(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:function(r){return r||"shorttime"},popupConfig:function(r){return r},getValue:function(){var r=this._widget.option("selectedIndex");return-1===r?this.dateBox.option("value"):this._getDateByItemData(this._widgetItems[r])},useCurrentDateByDefault:function(){return!0},getDefaultDate:function(){return new Date(null)},popupShowingHandler:function(){this.dateBox._dimensionChanged()},_renderWidget:function(){this.callBase(),this._refreshItems()},_getWidgetName:function(){return Al},_getWidgetOptions:function(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant:function(r){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",r.actionValue)},_refreshItems:function(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState:function(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose:function(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue:function(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue:function(){var r=this.dateBoxValue(),e=this._getDateIndex(r);-1===e?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",e)},_scrollToSelectedItem:function(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex:function(r){for(var e=-1,t=0,i=this._widgetItems.length;t<i;t++)if(this._areDatesEqual(r,this._widgetItems[t])){e=t;break}return e},_areDatesEqual:function(r,e){return(0,C.J_)(r)&&(0,C.J_)(e)&&r.getHours()===e.getHours()&&r.getMinutes()===e.getMinutes()},_getTimeListItems:function(){var r=this.dateBox.dateOption("min")||this._getBoundaryDate("min"),e=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),t=this.dateBox.dateOption("value")||null,i=e-r,a=r.getMinutes()%this.dateBox.option("interval");return i<0?[]:(i>Wt.ONE_DAY&&(i=Wt.ONE_DAY),t-r<Wt.ONE_DAY||((r=this._getBoundaryDate("min")).setMinutes(a),t&&Math.abs(t-e)<Wt.ONE_DAY&&(i=(60*e.getHours()+Math.abs(e.getMinutes()-a))*Wt.ONE_MINUTE)),this._getRangeItems(r,new Date(r),i))},_getRangeItems:function(r,e,t){for(var i=[],a=this.dateBox.option("interval");e-r<=t;)i.push(new Date(e)),e.setMinutes(e.getMinutes()+a);return i},_getBoundaryDate:function(r){var e=sP[r],t=new Date((0,le.IS)(this.dateBox.dateOption("value"),0));return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e.getHours(),e.getMinutes())},_timeListItemTemplate:function(r){var e=this.dateBox.option("displayFormat");return pt.Z.format(r,this.getDisplayFormat(e))},_listItemClickHandler:function(r){if("useButtons"!==this.dateBox.option("applyValueMode")){var e=this._getDateByItemData(r.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(e,r.event)}},_getDateByItemData:function(r){var e=this.dateBox.option("value"),t=r.getHours(),i=r.getMinutes(),a=r.getSeconds(),n=r.getFullYear(),s=r.getMonth(),o=r.getDate();return e?((e=this.dateBox.option("dateSerializationFormat")?di.Z.deserializeDate(e):new Date(e)).setHours(t),e.setMinutes(i),e.setSeconds(a),e.setFullYear(n),e.setMonth(s),e.setDate(o)):e=new Date(n,s,o,t,i,0,0),e},getKeyboardListener:function(){return this._widget},_updatePopupHeight:function(){var r=wp(this.dateBox.option("dropDownOptions.height"));if(void 0===r||"auto"===r){this.dateBox._setPopupOption("height","auto");var e=(0,we.zp)(this._widget.$element()),t=.45*(0,we.Cr)(aP);this.dateBox._setPopupOption("height",Math.min(e,t))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText:function(r,e){var t=this.callBase(r,e);return t&&(t=Wt.mergeDates(t,new Date(null),"date")),t}});const lP=oP;var Ol=(0,Je.Jj)(),Rl="dx-datebox",Eu="dx-datebox-wrapper",Rr={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},Lr={date:"date",datetime:"datetime",time:"time"},pP={Calendar:I0,DateView:LL,Native:FL,CalendarWithTime:rP,List:lP},fP=UC.inherit({_supportedKeys:function(){return(0,B.l)(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers:function(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:Rr.calendar,invalidDateMessage:ae.Z.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:ae.Z.format("validation-range"),applyButtonText:ae.Z.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0,_showValidationIcon:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device:function(){var e=ft.Z.real().platform;return"ios"===e||"android"===e},options:{pickerType:Rr.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions:function(r){this._userOptions=(0,B.l)({},r),this.callBase(r),this._updatePickerOptions()},_updatePickerOptions:function(){var r=this.option("pickerType"),e=this.option("type");r===Rr.list&&(e===Lr.datetime||e===Lr.date)&&(r=Rr.calendar),e===Lr.time&&r===Rr.calendar&&(r=Rr.list),this._pickerType=r,this._setShowDropDownButtonOption()},_setShowDropDownButtonOption(){var r=ft.Z.real().platform,e="android"===r&&ni.Z.mozilla,t=this._isNativeType(),i="generic"!==r||!t;t&&e&&(i=!1),this.option({showDropDownButton:i})},_init:function(){this._initStrategy(),this.option((0,B.l)({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:function(r){return r.charAt(0).toLowerCase()+r.substr(1)},_initStrategy:function(){var r=this._getStrategyName(this._getFormatType());this._strategy&&this._strategy.NAME===r||(this._strategy=new(0,pP[r])(this))},_getFormatType:function(){var r=this.option("type"),e=/h|m|s/g.test(r),i="";return/d|M|Y/g.test(r)&&(i+=Lr.date),e&&(i+=Lr.time),i},_getStrategyName:function(r){var e=this._pickerType;return e===Rr.rollers?"DateView":e===Rr.native?"Native":r===Lr.date?"Calendar":r===Lr.datetime?"CalendarWithTime":"List"},_initMarkup:function(){this.$element().addClass(Rl),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render:function(){this.callBase(),this._formatValidationIcon()},_renderDimensions:function(){this.callBase(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged:function(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight:function(){var r,e;this._popup&&(null===(r=(e=this._strategy)._updatePopupHeight)||void 0===r||r.call(e))},_refreshFormatClass:function(){var r=this.$element();(0,Y.S6)(Lr,function(e,t){r.removeClass(Rl+"-"+t)}),r.addClass(Rl+"-"+this.option("type"))},_refreshPickerTypeClass:function(){var r=this.$element();(0,Y.S6)(Rr,function(e,t){r.removeClass(Rl+"-"+t)}),r.addClass(Rl+"-"+this._pickerType)},_formatValidationIcon:function(){if((0,Je.Ym)()){var r=this._input().get(0),e=this.option("rtlEnabled"),t=this._getClearButtonWidth(),i=this._getLongestElementDimensions(),a=parseFloat(Ol.getComputedStyle(r).width)-t,n=i.width>a,s=r.style;this.$element().toggleClass("dx-show-invalid-badge",!n&&this.option("_showValidationIcon")),n?(void 0===this._storedPadding&&(this._storedPadding=e?i.leftPadding:i.rightPadding),e?s.paddingLeft=0:s.paddingRight=0):e?s.paddingLeft=this._storedPadding+"px":s.paddingRight=this._storedPadding+"px"}},_getClearButtonWidth:function(){var r=0;if(this._isClearButtonVisible()&&""===this._input().val()){var e=this.$element().find(".dx-clear-button-area").get(0);r=parseFloat(Ol.getComputedStyle(e).width)}return r},_getLongestElementDimensions:function(){var r=this._strategy.getDisplayFormat(this.option("displayFormat")),e=pt.Z.format(Wt.getLongestDate(r,pt.Z.getMonthNames(),pt.Z.getDayNames()),r),t=this._input(),i=t.get(0),a=(0,ha.l5)(t,e),s=void 0!==this._storedPadding?this._storedPadding:0;a.appendTo(this.$element());var o=parseFloat(Ol.getComputedStyle(a.get(0)).width),l=parseFloat(Ol.getComputedStyle(i).paddingRight),d=parseFloat(Ol.getComputedStyle(i).paddingLeft),u=o+d+l+s;return a.remove(),{width:u,leftPadding:d,rightPadding:l}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup:function(){this.callBase(),this._popup.$wrapper().addClass(Eu),this._renderPopupWrapper()},_getPopupToolbarItems(){var r,e,t,i=this.callBase();return null!==(r=null===(e=(t=this._strategy)._getPopupToolbarItems)||void 0===e?void 0:e.call(t,i))&&void 0!==r?r:i},_popupConfig:function(){var r=this.callBase();return(0,B.l)(this._strategy.popupConfig(r),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper:function(){if(this._popup){var r=this.$element(),e=(0,B.l)({},Lr,Rr);(0,Y.S6)(e,function(t,i){r.removeClass(Eu+"-"+i)}.bind(this)),this._popup.$wrapper().addClass(Eu+"-"+this.option("type")).addClass(Eu+"-"+this._pickerType).addClass("dx-dropdowneditor-overlay")}},_renderPopupContent:function(){this.callBase(),this._strategy.renderPopupContent()},_popupShowingHandler:function(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler:function(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler:function(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged:function(r){r&&this._formatValidationIcon()},_clearValueHandler:function(r){this.option("text",""),this.callBase(r)},_readOnlyPropValue:function(){if(this._pickerType===Rr.rollers)return!0;var r=ft.Z.real().platform;return!this._isNativeType()||"ios"!==r&&"android"!==r?this.callBase():this.option("readOnly")},_isClearButtonVisible:function(){return this.callBase()&&!this._isNativeType()},_renderValue:function(){var r=this.dateOption("value");return this.option("text",this._getDisplayedText(r)),this._strategy.renderValue(),this.callBase()},_setSubmitValue:function(){var r=this.dateOption("value"),e=this.option("dateSerializationFormat"),t=Wt.SUBMIT_FORMATS_MAP[this.option("type")],i=e?di.Z.serializeDate(r,e):Wt.toStandardDateFormat(r,t);this._getSubmitElement().val(i)},_getDisplayedText:function(r){var t,e=this.option("mode");if("text"===e){var i=this._strategy.getDisplayFormat(this.option("displayFormat"));t=pt.Z.format(r,i)}else{var a=this._getFormatByMode(e);t=a?pt.Z.format(r,a):Wt.toStandardDateFormat(r,e)}return t},_getFormatByMode:function(r){return(0,qn.inputType)(r)?null:Wt.FORMATS_MAP[r]},_valueChangeEventHandler:function(r){var{text:e,type:t,validationError:i}=this.option(),a=this.dateOption("value");if(e!==this._getDisplayedText(a)){var n=this._getParsedDate(e),s=a??this._getDateByDefault(),o=Wt.mergeDates(s,n,t);if(this._applyInternalValidation(n&&"time"===t?o:n).isValid){var d=this._getDisplayedText(o);s&&o&&s.getTime()===o.getTime()&&d!==e?this._renderValue():this.dateValue(o,r)}}else this._recallInternalValidation(a,i)},_recallInternalValidation(r,e){(!e||e.editorSpecific)&&(this._applyInternalValidation(r),this._applyCustomValidation(r))},_getDateByDefault:function(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate:function(r){var e=this._strategy.getDisplayFormat(this.option("displayFormat"));return this._strategy.getParsedText(r,e)??void 0},_applyInternalValidation(r){var t=!!this.option("text")&&null!==r,i=!!r&&(0,C.J_)(r)&&!isNaN(r.getTime()),a=i&&We.Z.dateInRange(r,this.dateOption("min"),this.dateOption("max"),this.option("type")),n=!t&&!r||a,s="";return i?a||(s=this.option("dateOutOfRangeMessage")):s=this.option("invalidDateMessage"),this._updateInternalValidationState(n,s),{isValid:n,isDate:i}},_updateInternalValidationState(r,e){this.option({isValid:r,validationError:r?null:{editorSpecific:!0,message:e}})},_applyCustomValidation:function(r){this.validationRequest.fire({editor:this,value:this._serializeDate(r)})},_isValueChanged:function(r){var e=this.dateOption("value");return(e&&e.getTime())!==(r&&r.getTime())},_isTextChanged:function(r){return this.option("text")!==(r&&this._getDisplayedText(r)||"")},_renderProps:function(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState:function(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle:function(){var r=this.option("placeholder");if(r)return r;var e=this.option("type");return e===Lr.time?ae.Z.format("dxDateBox-simulatedDataPickerTitleTime"):e===Lr.date||e===Lr.datetime?ae.Z.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy:function(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler:function(r){var e=this._strategy.getValue();this.dateValue(e,r.event),this.callBase()},_dispose:function(){var r;this.callBase(),null===(r=this._strategy)||void 0===r||r.dispose()},_isNativeType:function(){return this._pickerType===Rr.native},_updatePopupTitle:function(){var r;null===(r=this._popup)||void 0===r||r.option("title",this._getPopupTitle())},_optionChanged:function(r){switch(r.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:r.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:r.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":var e=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),e||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break;case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(r.value),this.callBase.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":case"_showValidationIcon":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat:function(){var r=this.option("value");return this.option("dateSerializationFormat")&&(0,Kd.Z)().forceIsoDateParsing?this.option("dateSerializationFormat"):(0,C.kE)(r)?"number":(0,C.HD)(r)?di.Z.getDateSerializationFormat(r):void 0},_updateValue:function(r){this.callBase(),this._applyInternalValidation(r??this.dateOption("value"))},dateValue:function(r,e){var t=this._isValueChanged(r);return t&&e&&this._saveValueChangeEvent(e),t||(this._isTextChanged(r)?this._updateValue(r):""===this.option("text")&&this._applyCustomValidation(r)),this.dateOption("value",r)},dateOption:function(r,e){if(1===arguments.length)return di.Z.deserializeDate(this.option(r));this.option(r,this._serializeDate(e))},_serializeDate:function(r){var e=this._getSerializationFormat();return di.Z.serializeDate(r,e)},_clearValue:function(){var r=this.option("value");this.callBase(),null===r&&this._applyCustomValidation(null)},clear:function(){var r=this.option("value");this.callBase(),null===r&&this._applyInternalValidation(null)}});const vP=fP;var gP=ve(5672),io="dateBoxMask",_P=vP.inherit({_supportedKeys(r){var e=this.callBase(r),t=a=>{var n=e[(0,Ee.EV)(a)];return n&&n.apply(this,[a])},i=(a,n)=>this._shouldUseOriginalHandler(a)?t.apply(this,[a]):n.apply(this,[a]);return(0,B.l)({},e,{del:a=>i(a,n=>{this._revertPart(1),this._isAllSelected()||n.preventDefault()}),backspace:a=>i(a,n=>{this._revertPart(-1),this._isAllSelected()||n.preventDefault()}),home:a=>i(a,n=>{this._selectFirstPart(),n.preventDefault()}),end:a=>i(a,n=>{this._selectLastPart(),n.preventDefault()}),escape:a=>i(a,n=>{this._revertChanges(n)}),enter:a=>i(a,()=>{this._enterHandler()}),leftArrow:a=>i(a,n=>{this._selectNextPart(-1),n.preventDefault()}),rightArrow:a=>i(a,n=>{this._selectNextPart(1),n.preventDefault()}),upArrow:a=>i(a,n=>{this._upDownArrowHandler(1),n.preventDefault()}),downArrow:a=>i(a,n=>{this._upDownArrowHandler(-1),n.preventDefault()})})},_shouldUseOriginalHandler(r){var e=this.option("opened")&&r&&-1===["backspace","del"].indexOf((0,Ee.EV)(r));return!this._useMaskBehavior()||e||r&&r.altKey},_upDownArrowHandler(r){this._setNewDateIfEmpty();var e=this._getActivePartValue(this._initialMaskValue),i=this._getActivePartValue()-e;this._loadMaskValue(this._initialMaskValue),this._changePartValue(i+r,!0)},_changePartValue(r,e){"a"===this._getActivePartProp("pattern")?this._toggleAmPm():this._partIncrease(r,e)},_toggleAmPm(){var r=this._getActivePartProp("text"),e=gP.Z.getPeriodNames().indexOf(r);this._setActivePartValue(1^e)},_getDefaultOptions(){return(0,B.l)(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(r){var{originalEvent:e,alt:t}=r,i=e.data||e.key;return"string"==typeof i&&1===i.length&&!t&&!(0,Ee.j1)(e)},_isSingleDigitKey(r){var e,t=null===(e=r.originalEvent)||void 0===e?void 0:e.data;return 1===t?.length&&parseInt(t,10)},_useBeforeInputEvent:function(){return ft.Z.real().android},_keyInputHandler(r,e){var t=this._input().val();this._processInputKey(e),r.preventDefault(),t!==this._input().val()&&z.Z.trigger(this._input(),"input")},_keyboardHandler(r){var e=r.originalEvent.key,t=this.callBase(r);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(ni.Z.chrome&&"Process"===r.key&&0===r.code.indexOf("Digit")?(e=r.code.replace("Digit",""),this._processInputKey(e),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(r)&&this._keyInputHandler(r.originalEvent,e)),t},_maskBeforeInputHandler(r){this._maskInputHandler=null;var{inputType:e}=r.originalEvent;"insertCompositionText"===e&&(this._maskInputHandler=()=>{this._renderSelectedPart()});var t="deleteContentBackward"===e;if(t||"deleteContentForward"===e){var a=t?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(a)}}if(this._useMaskBehavior()&&this._isSingleCharKey(r))return this._keyInputHandler(r,r.originalEvent.data),!0},_keyPressHandler(r){var{originalEvent:e}=r;"insertCompositionText"===e?.inputType&&this._isSingleDigitKey(r)&&(this._processInputKey(e.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(r),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(r){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(r))?this._searchString(r):this._searchNumber(r)},_isAllSelected(){var r=this._caret();return r.end-r.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;var r=this._strategy.getDisplayFormat(this.option("displayFormat")),e=(0,C.HD)(r)&&!pt.Z._getPatternByFormat(r);return this._formatPattern=e?r:(0,fR.y)(function(t){return pt.Z.format(t,r)}),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){var r="time"===this.option("type")?new Date(null):new Date;this._maskValue=r,this._initialMaskValue=r,this._renderDateParts()}},_partLimitsReached(r){var e=String(r).length,t=this._getActivePartProp("pattern").length,a=1===t?e:Math.min(t,e),n=this._searchValue.length===a,s=parseInt(this._searchValue+"0")>r;return n||s},_searchNumber(r){var{max:e}=this._getActivePartLimits(),t=String(e).length;this._searchValue=(this._searchValue+r).substr(-t),isNaN(this._searchValue)&&(this._searchValue=r),this._setActivePartValue(this._searchValue),this._partLimitsReached(e)&&this._selectNextPart(1)},_searchString(r){if(isNaN(parseInt(this._getActivePartProp("text")))){for(var e=this._getActivePartProp("limits")(this._maskValue),t=this._searchValue+r.toLowerCase(),i=e.max-e.min,a=0;a<=i;a++)if(this._loadMaskValue(this._initialMaskValue),this._changePartValue(a+1),0===this._getActivePartProp("text").toLowerCase().indexOf(t))return void(this._searchValue=t);this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(r))}},_clearSearchValue(){this._searchValue=""},_revertPart:function(r){if(!this._isAllSelected()){var e=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(e),this._selectNextPart(r)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&"text"===this.option("mode")},_prepareRegExpInfo(){this._regExpInfo=(0,s0.oo)(this._getFormatPattern(),pt.Z);var r=this._regExpInfo.regexp,e=r.source,t=r.flags,i=new RegExp(/(\{[0-9]+,?[0-9]*\})/),a=e.split(i).map(n=>i.test(n)?n:qt.Z.convertDigits(n,!1)).join("");this._regExpInfo.regexp=new RegExp(a,t)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(this._useMaskBehavior()){var r=this.option("text")||this._getDisplayedText(this._maskValue);r&&(this._dateParts=((r,e)=>{for(var t=e.regexp.exec(r),i=0,a=0,n=[],s=function(){a=(i=a)+t[o].length;var l=e.patterns[o-1].replace(/^'|'$/g,""),d=(r=>dR[r]||(()=>r))(l[0]);n.push({index:o-1,isStub:l===t[o],caret:{start:i,end:a},pattern:l,text:t[o],limits:function(){for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];return Tl(l[0],...c)},setter:uR[l[0]]||le.ZT,getter:d})},o=1;o<t.length;o++)s();return n})(r,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())}},_detachMaskEvents(){z.Z.off(this._input(),"."+io)},_attachMaskEvents(){z.Z.on(this._input(),(0,Ee.V4)("dxclick",io),this._maskClickHandler.bind(this)),z.Z.on(this._input(),(0,Ee.V4)("paste",io),this._maskPasteHandler.bind(this)),z.Z.on(this._input(),(0,Ee.V4)("drop",io),()=>{this._renderSelectedPart()}),z.Z.on(this._input(),(0,Ee.V4)("compositionend",io),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&z.Z.on(this._input(),(0,Ee.V4)("beforeinput",io),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(1))},_onMouseWheel(r){this._useMaskBehavior()&&this._partIncrease(r.delta>0?1:-1,r)},_selectNextPart(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.option("text")&&!this._disposed){r&&(this._initialMaskValue=new Date(this._maskValue));var e=(0,Di.n$)(this._activePartIndex+r,0,this._dateParts.length-1);if(this._dateParts[e].isStub){if(!(0===e&&r<0||e===this._dateParts.length-1&&r>0))return void this._selectNextPart(r>=0?r+1:r-1);e=this._activePartIndex}this._activePartIndex!==e&&this._clearSearchValue(),this._activePartIndex=e,this._caret(this._getActivePartProp("caret"))}},_getRealLimitsPattern(){if("d"===this._getActivePartProp("pattern")[0])return"dM"},_getActivePartLimits(r){return this._getActivePartProp("limits")(this._maskValue,r&&this._getRealLimitsPattern())},_getActivePartValue(r){r=r||this._maskValue;var e=this._getActivePartProp("getter");return(0,C.mf)(e)?e(r):r[e]()},_addLeadingZeroes(r){var e=this._searchValue.match(/^0+/),t=this._getActivePartLimits(),i=String(t.max).length;return((e&&e[0]||"")+String(r)).substr(-i)},_setActivePartValue(r,e){e=e||this._maskValue;var t=this._getActivePartProp("setter"),i=this._getActivePartLimits();r=(0,Di.Z2)(r,i.min,i.max)?r:r%10,r=this._addLeadingZeroes((0,Di.n$)(r,i.min,i.max)),(0,C.mf)(t)?t(e,r):e[t](r),this._renderDisplayText(this._getDisplayedText(e)),this._renderDateParts()},_getActivePartProp(r){if(this._dateParts&&this._dateParts[this._activePartIndex])return this._dateParts[this._activePartIndex][r]},_loadMaskValue(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dateOption("value");this._maskValue=r&&new Date(r),this._initialMaskValue=r&&new Date(r)},_saveMaskValue(){var r=this._maskValue&&new Date(this._maskValue);r&&"date"===this.option("type")&&r.setHours(0,0,0,0),this._initialMaskValue=new Date(r),this.dateOption("value",r)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(r){this.callBase(r),this._useMaskBehavior()&&this.option("text",r)},_partIncrease(r,e){this._setNewDateIfEmpty();var{max:t,min:i}=this._getActivePartLimits(e),a=r+this._getActivePartValue();a>t?a=this._applyLimits(a,{limitBase:i,limitClosest:t,max:t}):a<i&&(a=this._applyLimits(a,{limitBase:t,limitClosest:i,max:t})),this._setActivePartValue(a)},_applyLimits(r,e){var{limitBase:t,limitClosest:i,max:a}=e,n=(r-i)%a;return n?t+n-1*(0,Di.Xx)(n):i},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=((r,e)=>{for(var t=0;t<r.length;t++)if(!r[t].isStub&&r[t].caret.end>=e)return t;return null})(this._dateParts,this._caret().start),this._isAllSelected()||((0,C.$K)(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(r){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(r){var e=this._replaceSelectedText(this.option("text"),this._caret(),(0,ha.Zx)(r)),t=pt.Z.parse(e,this._getFormatPattern());t&&this._isDateValid(t)&&(this._maskValue=t,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),r.preventDefault()},_isDateValid:r=>(0,C.J_)(r)&&!isNaN(r),_isValueDirty(){var r=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(r&&r.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&z.Z.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)},_focusOutHandler(r){this._useMaskBehavior()&&!r.isDefaultPrevented()?(this._fireChangeEvent(),this.callBase(r),this._selectFirstPart(r)):this.callBase(r)},_valueChangeEventHandler(r){var e=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(r),e?null===this._maskValue&&this._loadMaskValue(e):this._maskValue=null,this._saveMaskValue()):this.callBase(r)},_optionChanged(r){switch(r.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(r),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(r),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(r)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},clear(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}});(0,Rt.Z)("dxDateBox",_P);var{isWrapped:CP}=zr.default,Pl=function(r,e){return(0,B.l)(r,{readOnly:e.readOnly,placeholder:e.placeholder,inputAttr:{id:e.id,"aria-labelledby":e["aria-labelledby"]},tabIndex:e.tabIndex},e.editorOptions)},k0=function(){return ni.Z.mozilla||ft.Z.real().ios},M0=function(r){var e={},t=k0(),i=r.sharedData||e;return Pl({placeholder:r.placeholder,width:r.width,value:r.value,onValueChanged:function(a){var n="filterRow"===r.parentType||"searchPanel"===r.parentType,s=a.event&&("input"===a.event.type||"keyup"===a.event.type),o=function(l,d){r&&r.setValue(l.value,d)};clearTimeout(e.valueChangeTimeout),s&&n?i.valueChangeTimeout=e.valueChangeTimeout=setTimeout(function(){o(a,e.valueChangeTimeout!==i.valueChangeTimeout)},(0,C.$K)(r.updateValueTimeout)?r.updateValueTimeout:0):o(a)},onKeyDown:function(a){t&&"enter"===(0,Ee.EV)(a.event)&&z.Z.trigger((0,b.Z)(a.component._input()),"change")},valueChangeEvent:"change"+("filterRow"===r.parentType?" keyup input":"")},r)},H0=function(r){r.editorName="dxDateBox",r.editorOptions=Pl({value:r.value,onValueChanged:function(e){r.setValue(e.value)},onKeyDown:function(e){var{component:t,event:i}=e,a=t.option("useMaskBehavior");(k0()||a)&&"enter"===(0,Ee.EV)(i)&&(t.blur(),t.focus())},displayFormat:r.format,type:r.dataType,dateSerializationFormat:null,width:"filterBuilder"===r.parentType?void 0:"auto"},r)},Z0=function(r){var i,e=M0(r),t="searchPanel"===r.parentType;e.value=r.editorType&&"dxTextBox"!==r.editorType?r.value:(0,C.$K)(i=r.value)?i.toString():"",e.valueChangeEvent+=t?" keyup input search":"",e.mode=e.mode||(t?"search":"text"),r.editorName="dxTextBox",r.editorOptions=e},z0=function(r){var e=M0(r);e.value=(0,C.$K)(r.value)?r.value:null,r.editorName="dxNumberBox",r.editorOptions=e};function W0(r){var t,i,a,e=r.lookup,n="filterRow"===r.parentType;if(e){var s;t=(0,Ot.vb)(e.displayExpr),(0,C.mf)(i=e.dataSource)&&!CP(i)&&(i=i(r.row||{}),function xP(r){if(r.row&&r.row.watch&&"dataRow"===r.parentType){var e=r.editorOptions||{};r.editorOptions=e;var t,i=e.onInitialized;e.onInitialized=function(s){i&&i.apply(this,arguments),(t=s.component).on("disposing",n)};var a,n=r.row.watch(()=>(a=r.lookup.dataSource(r.row))&&a.filter,()=>{t.option("dataSource",a)},s=>{r.row=s})}}(r)),((0,C.Kn)(i)||Array.isArray(i))&&(i=(0,ol.aN)(i),n&&(a=i.postProcess,i.postProcess=function(l){return 0===this.pageIndex()&&(l=l.slice(0)).unshift(null),a?a.call(this,l):l}));var o=!(!e.allowClearing||n);r.editorName=null!==(s=r.editorType)&&void 0!==s?s:"dxSelectBox",r.editorOptions=Pl({searchEnabled:!0,value:r.value,valueExpr:r.lookup.valueExpr,searchExpr:r.lookup.searchExpr||r.lookup.displayExpr,allowClearing:o,showClearButton:o,displayExpr:function(l){return null===l?r.showAllText:t(l)},dataSource:i,onValueChanged:function(l){var d=[l.value];!n&&d.push(l.component.option("text")),r.setValue.apply(this,d)}},r)}}function K0(r){r.editorName="dxCheckBox",r.editorOptions=Pl({elementAttr:{id:r.id},value:(0,C.$K)(r.value)?r.value:void 0,hoverStateEnabled:!r.readOnly,focusStateEnabled:!r.readOnly,activeStateEnabled:!1,onValueChanged:function(e){r.setValue&&r.setValue(e.value,e)}},r)}var EP=r=>{r.editorName=r.editorType,r.editorOptions=Pl({value:r.value,onValueChanged:function(e){r.setValue(e.value)}},r)},IP=r=>{var e={dxDateBox:H0,dxCheckBox:K0,dxNumberBox:z0,dxTextBox:Z0};if(r.lookup)W0(r);else if(r.editorType){var t;(null!==(t=e[r.editorType])&&void 0!==t?t:EP)(r)}else switch(r.dataType){case"date":case"datetime":H0(r);break;case"boolean":!function(r){"filterRow"===r.parentType||"filterBuilder"===r.parentType?W0((0,B.l)(r,{lookup:{displayExpr:function(e){return!0===e?r.trueText||"true":!1===e?r.falseText||"false":void 0},dataSource:[!0,!1]}})):K0(r)}(r);break;case"number":z0(r);break;default:Z0(r)}};const $0=r=>class extends r{createEditor(e,t){t.cancel=!1,t.editorElement=(0,lt.u)(e),(0,C.$K)(t.tabIndex)||(t.tabIndex=this.option("tabIndex")),IP(t),this.executeAction("onEditorPreparing",t),!t.cancel&&("dataRow"===t.parentType&&!t.isOnForm&&!(0,C.$K)(t.editorOptions.showValidationMark)&&(t.editorOptions.showValidationMark=!1),function(r,e){var t=(0,b.Z)(e.editorElement);if(e.editorName&&e.editorOptions&&t[e.editorName]){if(("dxCheckBox"===e.editorName||"dxSwitch"===e.editorName)&&(e.isOnForm||(t.addClass(r.addWidgetPrefix("checkbox-size")),t.parent().addClass("dx-editor-inline-block"))),r._createComponent(t,e.editorName,e.editorOptions),"dxDateBox"===e.editorName){var i=t.dxDateBox("instance"),a=i._supportedKeys().enter;i.registerKeyHandler("enter",n=>(i.option("opened")&&a(n),!0))}"dxTextArea"===e.editorName&&t.dxTextArea("instance").registerKeyHandler("enter",function(n){"enter"===(0,Ee.EV)(n)&&!n.ctrlKey&&!n.shiftKey&&n.stopPropagation()})}}(this,t),this.executeAction("onEditorPrepared",t))}};var Np="dx-cell-focus-disabled",G0="focus-overlay",Bp="dx-focused",U0="dxDataGridEditorFactory",j0=(0,Ee.V4)([kt.Z.down,"focusin",Ft.u].join(" "),U0),kp="dx-hidden",VP=$0(Vt.ViewController),BP={defaultOptions:()=>({}),controllers:{editorFactory:class NP extends VP{init(){this.createAction("onEditorPreparing",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this.createAction("onEditorPrepared",{excludeValidators:["disabled","readOnly"],category:"rendering"}),this._columnsResizerController=this.getController("columnsResizer"),this._editingController=this.getController("editing"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._columnsController=this.getController("columns"),this._validatingController=this.getController("validating"),this._rowsView=this.getView("rowsView"),this._updateFocusHandler=this._updateFocusHandler||this.createAction(this._updateFocus.bind(this)),this._subscribedContainerRoot=this._getContainerRoot(),z.Z.on(this._subscribedContainerRoot,j0,this._updateFocusHandler),this._attachContainerEventHandlers()}dispose(){clearTimeout(this._focusTimeoutID),clearTimeout(this._updateFocusTimeoutID),z.Z.off(this._subscribedContainerRoot,j0,this._updateFocusHandler)}_getFocusedElement(e){var t=this.option("focusedRowEnabled")?"tr[tabindex]:focus":"tr[tabindex]:not(.dx-data-row):focus",i=["td[tabindex]:focus","".concat(t),"input:focus","button:focus","textarea:focus","div[tabindex]:focus",".dx-lookup-field:focus",".dx-checkbox:focus",".dx-switch:focus",".dx-dropdownbutton",".dx-buttongroup:focus",".dx-adaptive-item-text:focus"].join(","),a=e.find(i);return this.elementIsInsideGrid(a)&&a}_getFocusCellSelector(){return".dx-row > td"}_updateFocusCore(){var e=this.component&&this.component.$element();if(e){var t=this._getFocusedElement(e);if(t&&t.length){var i;if(!t.hasClass(Np)&&!t.hasClass("dx-row")){var a=t.closest("".concat(this._getFocusCellSelector(),", .").concat(Np));a.get(0)!==t.get(0)&&(i=this._needHideBorder(a),t=a)}if(t.length&&!t.hasClass(Np))return void this.focus(t,i)}}this.loseFocus()}_needHideBorder(e){var t=this._rowsView.element(),i=e.closest(t).length>0,a=this._editingController.isEditing();return e.hasClass("dx-editor-inline-block")||i&&!a}_updateFocus(e){var t=this,i=e&&e.event&&(0,b.Z)(e.event.target).hasClass(t.addWidgetPrefix(G0));t._isFocusOverlay=t._isFocusOverlay||i,clearTimeout(t._updateFocusTimeoutID),t._updateFocusTimeoutID=setTimeout(()=>{delete t._updateFocusTimeoutID,t._isFocusOverlay||t._updateFocusCore(),t._isFocusOverlay=!1})}_updateFocusOverlaySize(e,t){e.hide();var i=_n.Z.calculate(e,(0,B.l)({collision:"fit"},t));i.h.oversize>0&&(0,we.Ns)(e,(0,we.Y_)(e)-i.h.oversize),i.v.oversize>0&&(0,we.qt)(e,(0,we.zp)(e)-i.v.oversize),e.show()}callbackNames(){return["focused"]}focus(e,t){var i=this;if(void 0===e)return i._$focusedElement;e&&(e.is(i._$focusedElement)||i._$focusedElement&&i._$focusedElement.removeClass(Bp),i._$focusedElement=e,clearTimeout(i._focusTimeoutID),i._focusTimeoutID=setTimeout(()=>{delete i._focusTimeoutID,i.renderFocusOverlay(e,t),e.addClass(Bp),i.focused.fire(e)}))}refocus(){var e=this.focus();this.focus(e)}renderFocusOverlay(e,t){if(Ae.isElementInCurrentGrid(this,e))if(this._$focusOverlay||(this._$focusOverlay=(0,b.Z)("<div>").addClass(this.addWidgetPrefix(G0))),t)this._$focusOverlay.addClass(kp);else if(e.length){var i=ni.Z.mozilla?"right bottom":"left top",a=e.closest(".".concat(this.addWidgetPrefix("content"))),n=(0,li.l)(e.get(0)),s=e.hasClass(this.addWidgetPrefix("invalid")),o=e.hasClass("dx-cell-modified")&&!s;this._$focusOverlay.removeClass(kp).toggleClass("dx-focused-cell-invalid",s).toggleClass("dx-focused-cell-modified",o).appendTo(a),(0,we.qt)(this._$focusOverlay,n.bottom-n.top+1),(0,we.Ns)(this._$focusOverlay,n.right-n.left+1);var l={precise:!0,my:i,at:i,of:e,boundary:a.length&&a};this._updateFocusOverlaySize(this._$focusOverlay,l),_n.Z.setup(this._$focusOverlay,l),this._$focusOverlay.css("visibility","visible")}}resize(){var e=this._$focusedElement;e&&this.focus(e)}loseFocus(e){this._$focusedElement&&this._$focusedElement.removeClass(Bp),this._$focusedElement=null,this._$focusOverlay&&this._$focusOverlay.addClass(kp)}_getContainerRoot(){var e,t=null===(e=this.component)||void 0===e?void 0:e.$element(),i=at.Z.getRootNode(t?.get(0));return i.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||i.host?i:at.Z.getDocument()}_attachContainerEventHandlers(){var e=this,t=e.component&&e.component.$element();t&&z.Z.on(t,(0,Ee.V4)("keydown",U0),i=>{"tab"===(0,Ee.EV)(i)&&e._updateFocusHandler(i)})}}}};He.registerModule("editorFactory",BP);var kP=ve(4394),Iu=ve(1078),Au=(0,Je.Jj)(),q0={text:"OK",onClick:function(){return!0}},os="dx-dialog",MP="".concat(os,"-wrapper"),HP="".concat(os,"-root"),ZP="".concat(os,"-content"),zP="".concat(os,"-message"),WP="".concat(os,"-buttons"),KP="".concat(os,"-button"),Y0="dx-button",Mp=function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0;return function(r){var e,t=new X.BH;r=r||{};var i=(0,b.Z)("<div>").addClass(os).appendTo((0,Iu.S3)()),n="messageHtml"in r;"message"in r&&At.Z.log("W1013");var s=String(n?r.messageHtml:r.message),o=r.title?null:new Pi.Z,l=(0,b.Z)("<div>").addClass(zP).html(s).attr("id",o),d=[],u=new rs.Z(i,(0,B.l)({title:null!==(e=r.title)&&void 0!==e?e:"",showTitle:(0,le.IS)(r.showTitle,!0),dragEnabled:(0,le.IS)(r.dragEnabled,!0),height:"auto",width:r.width,showCloseButton:r.showCloseButton||!1,ignoreChildEvents:!1,container:i,visualContainer:Au,dragAndResizeArea:Au,onContentReady:function(p){p.component.$content().addClass(ZP).append(l),o&&p.component.$overlayContent().attr("aria-labelledby",o)},onShowing:function(p){p.component.bottomToolbar().addClass(WP).find(".".concat(Y0)).addClass(KP),(0,ha.M3)()},onShown:function(p){var _=p.component.bottomToolbar().find(".".concat(Y0)).first();z.Z.trigger(_,"focus")},onHiding:function(){t.reject()},onHidden:function(p){var{element:_}=p;(0,b.Z)(_).remove()},animation:{show:{type:"pop",duration:400},hide:{type:"pop",duration:400,to:{opacity:0,scale:0},from:{opacity:1,scale:1}}},rtlEnabled:(0,Kd.Z)().rtlEnabled,position:{boundaryOffset:{h:10,v:0}}},r.popupOptions));function f(p){t.resolve(p),u.hide()}return(r.buttons||[q0]).forEach(p=>{var _=new kP.Z(p.onClick,{context:u});d.push({toolbar:"bottom",location:ft.Z.current().android?"after":"center",widget:"dxButton",options:(0,ye.Z)({},p,{onClick:function(){f(_.execute(...arguments))}})})}),u.option("toolbarItems",d),u.$wrapper().addClass(MP),r.position&&u.option("position",r.position),u.$wrapper().addClass(HP),{show:function(){if("phone"===ft.Z.real().deviceType){var p=(0,we.Cr)(Au)>(0,we.dz)(Au);u.option({width:p?"90%":"60%"})}return u.show(),t.promise()},hide:f}}((0,C.PO)(r)?r:{title:e,messageHtml:r,showTitle:t,buttons:[(0,ye.Z)({text:ae.Z.format("Yes"),onClick:function(){return!0}},(0,Lt.dC)()?{stylingMode:"contained",type:"default"}:{}),(0,ye.Z)({text:ae.Z.format("No"),onClick:function(){return!1}},(0,Lt.dC)()?{stylingMode:"outlined",type:"default"}:{})],dragEnabled:t}).show()},Tu="dx-editor-cell",bn="dx-row",Q0="dx-selection",Du="edit-form",Ca="insert",$a="remove",Ou="editing.popup",Hp="editing.form",br="editing.editRowKey",ls="editing.editColumnName",ew="targetComponent",Zp="input:not([type='hidden'])",zp="[tabindex]:not([disabled]), ".concat(Zp,":not([disabled])"),ds="batch",Ga="row",ao="cell",no="form",Wp="popup",Ru="last",iw="pageBottom",Kp="pageTop",rw="viewportBottom",aw="viewportTop",UP=[ds,Ga,ao,no,Wp],jP=[Ga,no,Wp],qP=[ds,ao],YP=[ds,Ga,ao],XP=[Ga,no],nw="dx-command-edit",sw="".concat(nw,"-with-icons"),yn="__DX_INSERT_INDEX__",ow="dx-cell-modified",Fl="update",lF={save:"dx-link-save",cancel:"dx-link-cancel",edit:"dx-link-edit",undelete:"dx-link-undelete",delete:"dx-link-delete",add:"dx-link-add"},dF={save:"save",cancel:"revert",edit:"edit",undelete:"revert",delete:"trash",add:"add"},uF={edit:"editRow",delete:"deleteRow",undelete:"undeleteRow",save:"saveEditData",cancel:"cancelEditData",add:"addRowByRowIndex"},hF={add:"allowAdding",edit:"allowUpdating",delete:"allowDeleting"},cF=["edit","save","cancel","delete","undelete"],Ua="editing.changes",lw="edit-form-item",bF=Ha.Z.IS_RENOVATED_WIDGET?"dx-scrollable":"dx-scrollable-container",dw="dx-edit-row",$p="_DX_KEY_",Vl=function(r){return function(e){var t=e instanceof Error?e:new Error(e&&String(e)||"Unknown error");r.reject(t)}},uw=function(r,e){return e.isEditing||r&&e.column.allowEditing},hw=function(r,e){var t=!!e.column.command,i=uw(r,e);return"data"===e.rowType&&!t&&(i||e.column.showEditorAlways)},so=(r,e)=>{var t=-1;return r.some((i,a)=>{if(cw(i)===e)return t=a,!0}),t};function cw(r){return(0,C.Kn)(r)?r.name:r}var pw=(r,e)=>{r.forEach(t=>{t.items||t.tabs?pw(t.items||t.tabs,e):e(t)})},fw=r=>class extends r{reload(e,t){return!t&&this._editingController.refresh(),super.reload.apply(this,arguments)}repaintRows(){if(!this._editingController.isSaving())return super.repaintRows.apply(this,arguments)}_updateEditRow(e){var t,i=this.option(br),n=e[Ae.getIndexByKey(i,e)];n&&(n.isEditing=!0,null===(t=this._updateEditItem)||void 0===t||t.call(this,n))}_updateItemsCore(e){super._updateItemsCore(e),this._updateEditRow(this.items(!0))}_applyChangeUpdate(e){this._updateEditRow(e.items),super._applyChangeUpdate(e)}_applyChangesOnly(e){this._updateEditRow(e.items),super._applyChangesOnly(e)}_processItems(e,t){return e=this._editingController.processItems(e,t),super._processItems(e,t)}_processDataItem(e,t){return this._editingController.processDataItem(e,t,this.generateDataValues),super._processDataItem(e,t)}_processItem(e,t){return(e=super._processItem(e,t)).isNewRow&&(t.dataIndex--,delete e.dataIndex),e}_getChangedColumnIndices(e,t,i,a){if(e.isNewRow===t.isNewRow&&e.removed===t.removed)return super._getChangedColumnIndices.apply(this,arguments)}_isCellChanged(e,t,i,a,n){var s=e.cells&&e.cells[a],o=this._editingController&&this._editingController.isEditCell(i,a);return(!n||!o)&&(!(!s||!s.column||s.column.showEditorAlways||s.isEditing===o)||super._isCellChanged.apply(this,arguments))}needToRefreshOnDataSourceChange(e){return!(Array.isArray(e.value)&&e.value===e.previousValue&&this._editingController.isSaving())}_handleDataSourceChange(e){var t=super._handleDataSourceChange(e),i=this.option("editing.changes"),a=e.value;if(Array.isArray(a)&&i.length){var n=a.map(d=>this.keyOf(d)),s=i.filter(d=>"insert"===d.type||n.some(u=>(0,le.bY)(d.key,u)));s.length!==i.length&&this.option("editing.changes",s);var o=this.option("editing.editRowKey");!s.some(d=>"insert"===d.type&&(0,le.bY)(o,d.key))&&n.every(d=>!(0,le.bY)(o,d))&&this.option("editing.editRowKey",null)}return t}},Gp={defaultOptions:()=>({editing:{mode:"row",refreshMode:"full",newRowPosition:aw,allowAdding:!1,allowUpdating:!1,allowDeleting:!1,useIcons:!1,selectTextOnEditStart:!1,confirmDelete:!0,texts:{editRow:ae.Z.format("dxDataGrid-editingEditRow"),saveAllChanges:ae.Z.format("dxDataGrid-editingSaveAllChanges"),saveRowChanges:ae.Z.format("dxDataGrid-editingSaveRowChanges"),cancelAllChanges:ae.Z.format("dxDataGrid-editingCancelAllChanges"),cancelRowChanges:ae.Z.format("dxDataGrid-editingCancelRowChanges"),addRow:ae.Z.format("dxDataGrid-editingAddRow"),deleteRow:ae.Z.format("dxDataGrid-editingDeleteRow"),undeleteRow:ae.Z.format("dxDataGrid-editingUndeleteRow"),confirmDeleteMessage:ae.Z.format("dxDataGrid-editingConfirmDeleteMessage"),confirmDeleteTitle:""},form:{colCount:2},popup:{},startEditAction:"click",editRowKey:null,editColumnName:null,changes:[]},useLegacyColumnButtonTemplate:!1}),controllers:{editing:class OF extends Vt.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._validatingController=this.getController("validating"),this._editorFactoryController=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._columnsResizerController=this.getController("columnsResizer"),this._errorHandlingController=this.getController("errorHandling"),this._rowsView=this.getView("rowsView"),this._headerPanelView=this.getView("headerPanel"),this._lastOperation=null,this._changes=[],this._deferreds&&this._deferreds.forEach(e=>{e.reject("cancel")}),this._deferreds=[],this._dataChangedHandler||(this._dataChangedHandler=this._handleDataChanged.bind(this),this._dataController.changed.add(this._dataChangedHandler)),this._saveEditorHandler||(this.createAction("onInitNewRow",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserting",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowInserted",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditingStart",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdating",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowUpdated",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onRowRemoved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaved",{excludeValidators:["disabled","readOnly"]}),this.createAction("onSaving",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceling",{excludeValidators:["disabled","readOnly"]}),this.createAction("onEditCanceled",{excludeValidators:["disabled","readOnly"]})),this._updateEditColumn(),this._updateEditButtons(),this._internalState||(this._internalState=[]),this.component._optionsByReference[br]=!0,this.component._optionsByReference[Ua]=!0}getEditMode(){var e,t=null!==(e=this.option("editing.mode"))&&void 0!==e?e:Ga;return UP.includes(t)?t:Ga}isCellBasedEditMode(){var e=this.getEditMode();return qP.includes(e)}_getDefaultEditorTemplate(){return(e,t)=>{var i=(0,b.Z)("<div>").appendTo(e),a=(0,B.l)({},t.column,{value:t.value,setValue:t.setValue,row:t.row,parentType:"dataRow",width:null,readOnly:!t.setValue,isOnForm:t.isOnForm,id:t.id});YP.includes(this.getEditMode())&&(a["aria-labelledby"]=t.column.headerId),this._editorFactoryController.createEditor(i,a)}}_getNewRowPosition(){var e=this.option("editing.newRowPosition");if("virtual"===this.option("scrolling.mode"))switch(e){case Kp:return aw;case iw:return rw;default:return e}return e}getChanges(){return this.option(Ua)}getInsertRowCount(){return this.option(Ua).filter(t=>"insert"===t.type).length}resetChanges(){var e=this.getChanges(),t=e?.length;t&&this._silentOption(Ua,[])}_getInternalData(e){return this._internalState.filter(t=>(0,le.bY)(t.key,e))[0]}_addInternalData(e){var t=this._getInternalData(e.key);return t?(0,B.l)(t,e):(this._internalState.push(e),e)}_getOldData(e){var t;return null===(t=this._getInternalData(e))||void 0===t?void 0:t.oldData}getUpdatedData(e){var t=this._dataController.keyOf(e),i=this.getChanges(),a=Ae.getIndexByKey(t,i);return i[a]?(0,Wr.FL)(e,i[a].data):e}getInsertedData(){return this.getChanges().filter(e=>e.data&&e.type===Ca).map(e=>e.data)}getRemovedData(){return this.getChanges().filter(e=>this._getOldData(e.key)&&e.type===$a).map(e=>this._getOldData(e.key))}_fireDataErrorOccurred(e){if("cancel"!==e){var t=this.getPopupContent();this._dataController.dataErrorOccurred.fire(e,t)}}_needToCloseEditableCell(e){}_closeEditItem(e){}_handleDataChanged(e){}_isDefaultButtonVisible(e,t){var i=!0;switch(e.name){case"delete":i=this.allowDeleting(t);break;case"undelete":i=!1}return i}_isButtonVisible(e,t){var{visible:i}=e;return(0,C.$K)(i)?(0,C.mf)(i)?i.call(e,{component:t.component,row:t.row,column:t.column}):i:this._isDefaultButtonVisible(e,t)}_isButtonDisabled(e,t){var{disabled:i}=e;return(0,C.mf)(i)?i.call(e,{component:t.component,row:t.row,column:t.column}):!!i}_getButtonConfig(e,t){var i=(0,C.Kn)(e)?e:{},a=cw(e),n=(r=>{var e=r.component.option("editing.texts")||{};return{save:e.saveRowChanges,cancel:e.cancelRowChanges,edit:e.editRow,undelete:e.undeleteRow,delete:e.deleteRow,add:e.addRowToNode}})(t),s=uF[a],o=this.option("editing"),l=hF[a],d=!l||o[l];return(0,B.l)({name:a,text:n[a],cssClass:lF[a]},{onClick:s&&(u=>{var{event:c}=u;c.stopPropagation(),c.preventDefault(),setTimeout(()=>{t.row&&d&&this[s]&&this[s](t.row.rowIndex)})})},i)}_getEditingButtons(e){var t,i=!!e.column.buttons,a=(e.column.buttons||[]).slice();return i?((t=so(a,"edit"))>=0&&(so(a,"save")<0&&a.splice(t+1,0,"save"),so(a,"cancel")<0&&a.splice(so(a,"save")+1,0,"cancel")),(t=so(a,"delete"))>=0&&so(a,"undelete")<0&&a.splice(t+1,0,"undelete")):a=cF.slice(),a.map(n=>this._getButtonConfig(n,e))}_renderEditingButtons(e,t,i,a){t.forEach(n=>{this._isButtonVisible(n,i)&&this._createButton(e,n,i,a)})}_getEditCommandCellTemplate(){return(e,t,i)=>{var a=(0,b.Z)(e);if("data"===t.rowType){var n=this._getEditingButtons(t);if(this._renderEditingButtons(a,n,t,i),t.watch){var s=t.watch(()=>n.map(o=>({visible:this._isButtonVisible(o,t),disabled:this._isButtonDisabled(o,t)})),()=>{a.empty(),this._renderEditingButtons(a,n,t)});z.Z.on(a,Yn.x,s)}}else Ae.setEmptyText(a)}}isRowBasedEditMode(){var e=this.getEditMode();return jP.includes(e)}getFirstEditableColumnIndex(){var e,t=this._columnsController.getVisibleColumns();return(0,Y.S6)(t,(i,a)=>{if(a.allowEditing)return e=i,!1}),e}getFirstEditableCellInRow(e){var t,i=this.getFirstEditableColumnIndex();return null===(t=this._rowsView)||void 0===t?void 0:t._getCellElement(e||0,i)}getFocusedCellInRow(e){return this.getFirstEditableCellInRow(e)}getIndexByKey(e,t){return Ae.getIndexByKey(e,t)}hasChanges(e){for(var t=this.getChanges(),i=!1,a=0;a<t?.length;a++)if(t[a].type&&(!(0,C.$K)(e)||this._dataController.getRowIndexByKey(t[a].key)===e)){i=!0;break}return i}dispose(){super.dispose(),clearTimeout(this._inputFocusTimeoutID),z.Z.off(at.Z.getDocument(),kt.Z.up,this._pointerUpEditorHandler),z.Z.off(at.Z.getDocument(),kt.Z.down,this._pointerDownEditorHandler),z.Z.off(at.Z.getDocument(),Ft.u,this._saveEditorHandler)}_silentOption(e,t){"editing.changes"===e&&(this._changes=(0,pa.HR)([],t)),super._silentOption(e,t)}optionChanged(e){if("editing"===e.name){var{fullName:t}=e;t===br?this._handleEditRowKeyChange(e):t===Ua?(0,le.bY)(e.value,this._changes,{maxDepth:4})||(this._changes=(0,pa.HR)([],e.value),this._handleChangesChange(e)):e.handled||(this._columnsController.reinit(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey()),e.handled=!0}else super.optionChanged(e)}_handleEditRowKeyChange(e){var t=this._dataController.getRowIndexByKey(e.value),i=this._getEditRowIndexCorrection(),a=this._dataController.getRowIndexByKey(e.previousValue)+i;(0,C.$K)(e.value)?e.value!==e.previousValue&&this._editRowFromOptionChanged(t,a):this.cancelEditData()}_handleChangesChange(e){var t=this._dataController;!e.value.length&&!e.previousValue.length||(e.value.forEach(a=>{var n;if("insert"===a.type)this._addInsertInfo(a);else{var s=t.getCachedStoreData()||(null===(n=t.items())||void 0===n?void 0:n.map(l=>l.data)),o=Ae.getIndexByKey(a.key,s,t.key());this._addInternalData({key:a.key,oldData:s[o]})}}),t.updateItems({repaintChangesOnly:!0,isLiveUpdate:!1,isOptionChanged:!0}))}publicMethods(){return["addRow","deleteRow","undeleteRow","editRow","saveEditData","cancelEditData","hasEditData"]}refresh(){(0,C.$K)(this._pageIndex)&&this._refreshCore.apply(this,arguments)}_refreshCore(e){}isEditing(){return(0,C.$K)(this.option(br))}isEditRow(e){return!1}_setEditRowKey(e,t){t?this._silentOption(br,e):this.option(br,e),this._refocusEditCell&&(this._refocusEditCell=!1,this._focusEditingCell())}_setEditRowKeyByIndex(e,t){var i=this._dataController.getKeyByRowIndex(e);void 0!==i?this._setEditRowKey(i,t):this._dataController.fireError("E1043")}getEditRowIndex(){return this._getVisibleEditRowIndex()}getEditFormRowIndex(){return-1}isEditRowByIndex(e){var t=this._dataController.getKeyByRowIndex(e);return(0,C.$K)(t)&&(0,le.bY)(this.option(br),t)&&this._getVisibleEditRowIndex()===e}isEditCell(e,t){return this.isEditRowByIndex(e)&&this._getVisibleEditColumnIndex()===t}getPopupContent(){}_isProcessedItem(e){return!1}_getInsertRowIndex(e,t,i){var a=-1,n=this._dataController,s=this._getInsertAfterOrBeforeKey(t);return(0,C.$K)(s)||0!==e.length?(0,C.$K)(s)&&e.some((o,l)=>{var d=i||this._isProcessedItem(o);if((0,C.Kn)(o)&&(d||(0,C.$K)(o[yn])?(0,le.bY)(o.key,s)&&(a=l):(0,le.bY)(n.keyOf(o),s)&&(a=l)),a>=0){var u=e[a+1];return u&&("detail"===u.rowType||"detailAdaptive"===u.rowType)&&(0,C.$K)(t.insertAfterKey)?void 0:((0,C.$K)(t.insertAfterKey)&&(a+=1),!0)}}):a=0,a}_generateNewItem(e){var t,i={key:e},a=null===(t=this._getInternalData(e))||void 0===t?void 0:t.insertInfo;return a?.[yn]&&(i[yn]=a[yn]),i}_getLoadedRowIndex(e,t,i){var a=this._getInsertRowIndex(e,t,i),n=this._dataController;if(a<0){var s=this._getNewRowPosition(),o=n.pageIndex(),l=this._getInsertAfterOrBeforeKey(t);s===Ru||0!==o||(0,C.$K)(l)?s===Ru&&n.isLastPageLoaded()&&(a=e.length):a=0}return a}processItems(e,t){var{changeType:i}=t;return this.update(i),this.getChanges().forEach(n=>{var s;if(n.type===Ca){var{key:l}=n,d=null===(s=this._getInternalData(l))||void 0===s?void 0:s.insertInfo;(!(0,C.$K)(l)||!(0,C.$K)(d))&&(l=(d=this._addInsertInfo(n)).key);var u=this._getLoadedRowIndex(e,n),c=this._generateNewItem(l);u>=0&&e.splice(u,0,c)}}),e}processDataItem(e,t,i){var a=t.visibleColumns,n=e.data[yn]?e.data.key:e.key,s=this.getChanges(),o=Ae.getIndexByKey(n,s);e.isEditing=!1,o>=0&&this._processDataItemCore(e,s[o],n,a,i)}_processDataItemCore(e,t,i,a,n){var{data:s,type:o}=t;switch(o){case Ca:e.isNewRow=!0,e.key=i,e.data=s;break;case Fl:e.modified=!0,e.oldData=e.data,e.data=(0,Wr.FL)(e.data,s),e.modifiedValues=n(s,a,!0);break;case $a:e.removed=!0}}_initNewRow(e){if(this.executeAction("onInitNewRow",e),e.promise){var t=new X.BH;return(0,X.gx)((0,X.p4)(e.promise)).done(t.resolve).fail(Vl(t)).fail(i=>this._fireDataErrorOccurred(i)),t}}_createInsertInfo(){var e={};return e[yn]=this._getInsertIndex(),e}_addInsertInfo(e,t){var i,a;console.log("add insert info"),e.key=this.getChangeKeyValue(e);var{key:n}=e;if(a=null===(i=this._getInternalData(n))||void 0===i?void 0:i.insertInfo,!(0,C.$K)(a)){var s=this._getInsertAfterOrBeforeKey(e);a=this._createInsertInfo(),(0,C.$K)(s)||this._setInsertAfterOrBeforeKey(e,t)}return this._addInternalData({insertInfo:a,key:n}),{insertInfo:a,key:n}}getChangeKeyValue(e){if((0,C.$K)(e.key))return e.key;var i,t=this._dataController.key();return e.data&&t&&!Array.isArray(t)&&(i=e.data[t]),(0,C.$K)(i)||(i="".concat($p).concat(new Pi.Z)),i}_setInsertAfterOrBeforeKey(e,t){var i=this.getView("rowsView"),a=this._dataController,n=a.items(!0),s=this._getNewRowPosition();switch(s){case"first":case Ru:break;case Kp:case iw:if(n.length){var o=s===Kp?0:n.length-1;e[0===o?"insertBeforeKey":"insertAfterKey"]=n[o].key}break;default:var d=s===rw?i?.getBottomVisibleItemIndex():i?.getTopVisibleItemIndex(),u=a.getVisibleRows()[d];u&&(!u.isEditing&&"detail"===u.rowType||"detailAdaptive"===u.rowType)&&d++;var c=a.getKeyByRowIndex(d);(0,C.$K)(c)&&(e.insertBeforeKey=c)}}_getInsertIndex(){var e=0;return this.getChanges().forEach(t=>{var i,a=null===(i=this._getInternalData(t.key))||void 0===i?void 0:i.insertInfo;(0,C.$K)(a)&&t.type===Ca&&a[yn]>e&&(e=a[yn])}),e+1}_getInsertAfterOrBeforeKey(e){var t;return null!==(t=e.insertAfterKey)&&void 0!==t?t:e.insertBeforeKey}_getPageIndexToInsertRow(){var e=this._getNewRowPosition(),t=this._dataController,i=t.pageIndex(),a=t.pageCount()-1;return"first"===e&&0!==i?0:e===Ru&&i!==a?a:-1}addRow(e){var t=this._dataController;return t.store()?this._addRow(e):(t.fireError("E1052",this.component.NAME),(new X.BH).reject())}_addRow(e){var i=this._dataController.store(),a=i&&i.key(),n={data:{}},s=this._getVisibleEditRowIndex(),o=new X.BH;return this.refresh({allowCancelEditing:!0}),this._allowRowAdding()?(a||(n.data.__KEY__=String(new Pi.Z)),(0,X.gx)(this._initNewRow(n,e)).done(()=>{this._allowRowAdding()?(0,X.gx)(this._addRowCore(n.data,e,s)).done(o.resolve).fail(o.reject):o.reject("cancel")}).fail(o.reject),o.promise()):((0,X.gx)(this._navigateToNewRow(s)).done(o.resolve).fail(o.reject),o.promise())}_allowRowAdding(e){return!(this._getInsertIndex()>1)}_addRowCore(e,t,i){var a={data:e,type:Ca},n=this._getVisibleEditRowIndex(),s=this._addInsertInfo(a,t),{key:o}=s;return this._setEditRowKey(o,!0),this._addChange(a),this._navigateToNewRow(i,a,n)}_navigateToNewRow(e,t,i){var a=new X.BH,n=this._dataController;if(i=i??-1,!(t=t??this.getChanges().filter(u=>u.type===Ca)[0]))return a.reject("cancel").promise();var s=this._getPageIndexToInsertRow(),o=this._getLoadedRowIndex(n.items(),t,!0),l=u=>{var c;(0,X.gx)(null===(c=this._focusController)||void 0===c?void 0:c.navigateToRow(u)).done(()=>{o=n.getRowIndexByKey(t.key),a.resolve()})},d=this._getInsertAfterOrBeforeKey(t);return s>=0?n.pageIndex(s).done(()=>{l(t.key)}).fail(a.reject):o<0&&(0,C.$K)(d)?l(d):(n.updateItems({changeType:"update",rowIndices:[e,i,o]}),(o=n.getRowIndexByKey(t.key))<0?l(t.key):a.resolve()),a.done(()=>{var u;null===(u=this._rowsView)||void 0===u||u.waitAsyncTemplates(!0).done(()=>{this._showAddedRow(o),this._afterInsertRow(t.key)})}),a.promise()}_showAddedRow(e){this._focusFirstEditableCellInRow(e)}_beforeFocusElementInRow(e){}_focusFirstEditableCellInRow(e){var t,i=this._dataController,a=i.getKeyByRowIndex(e),n=this.getFirstEditableCellInRow(e);null===(t=this._keyboardNavigationController)||void 0===t||t.focus(n),this.option("focusedRowKey",a),this._editCellInProgress=!0,this._delayedInputFocus(n,()=>{e=i.getRowIndexByKey(a),this._editCellInProgress=!1,this._beforeFocusElementInRow(e)})}_isEditingStart(e){return this.executeAction("onEditingStart",e),e.cancel}_beforeUpdateItems(e,t){}_getVisibleEditColumnIndex(){var e=this.option(ls);return(0,C.$K)(e)?this._columnsController.getVisibleColumnIndex(e):-1}_setEditColumnNameByIndex(e,t){var i,a=this._columnsController.getVisibleColumns();this._setEditColumnName(null===(i=a[e])||void 0===i?void 0:i.name,t)}_setEditColumnName(e,t){t?this._silentOption(ls,e):this.option(ls,e)}_resetEditColumnName(){this._setEditColumnName(null,!0)}_getEditColumn(){var e=this.option(ls);return this._getColumnByName(e)}_getColumnByName(e){var i,t=this._columnsController.getVisibleColumns();return(0,C.$K)(e)&&t.some(a=>{if(a.name===e)return i=a,!0}),i}_getVisibleEditRowIndex(e){var t=this._dataController,i=this.option(br),a=t.getRowIndexByKey(i);return-1===a?a:a+this._getEditRowIndexCorrection(e)}_getEditRowIndexCorrection(e){var t=e?this._getColumnByName(e):this._getEditColumn();return"adaptiveHidden"===t?.visibleWidth?1:0}_resetEditRowKey(){this._refocusEditCell=!1,this._setEditRowKey(null,!0)}_resetEditIndices(){this._resetEditColumnName(),this._resetEditRowKey()}editRow(e){var t,i=this._dataController,n=i.items()[e],s={data:n&&n.data,cancel:!1},o=this._getVisibleEditRowIndex();if(n){if(e===o)return!0;if(void 0===n.key)return void this._dataController.fireError("E1043");n.isNewRow||(s.key=n.key),!this._isEditingStart(s)&&(this.resetChanges(),this.init(),this._resetEditColumnName(),this._pageIndex=i.pageIndex(),this._addInternalData({key:n.key,oldData:null!==(t=n.oldData)&&void 0!==t?t:n.data}),this._setEditRowKey(n.key))}}_editRowFromOptionChanged(e,t){var i=[t,e];this._beforeUpdateItems(i,e,t),this._editRowFromOptionChangedCore(i,e)}_editRowFromOptionChangedCore(e,t,i){this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:e,cancel:i})}_focusEditorIfNeed(){}_showEditPopup(e,t){}_repaintEditPopup(){}_getEditPopupHiddenHandler(){return e=>{this.isEditing()&&this.cancelEditData()}}_getPopupEditFormTemplate(e){}_getSaveButtonConfig(){var e={text:this.option("editing.texts.saveRowChanges"),onClick:this.saveEditData.bind(this)};return(0,Lt.dC)((0,Lt.Vk)())&&(e.stylingMode="contained",e.type="default"),e}_getCancelButtonConfig(){var e={text:this.option("editing.texts.cancelRowChanges"),onClick:this.cancelEditData.bind(this)};return(0,Lt.dC)((0,Lt.Vk)())&&(e.stylingMode="outlined"),e}_removeInternalData(e){var t=this._getInternalData(e),i=this._internalState.indexOf(t);i>-1&&this._internalState.splice(i,1)}_updateInsertAfterOrBeforeKeys(e,t){var i=e[t];e.forEach(a=>{var n=this._getInsertAfterOrBeforeKey(a);(0,le.bY)(n,i.key)&&(a[(0,C.$K)(a.insertAfterKey)?"insertAfterKey":"insertBeforeKey"]=this._getInsertAfterOrBeforeKey(i))})}_removeChange(e){if(e>=0){var t=[...this.getChanges()],{key:i}=t[e];this._removeInternalData(i),this._updateInsertAfterOrBeforeKeys(t,e),t.splice(e,1),this._silentOption(Ua,t),(0,le.bY)(this.option(br),i)&&this._resetEditIndices()}}executeOperation(e,t){this._lastOperation&&this._lastOperation.reject(),this._lastOperation=e,this.waitForDeferredOperations().done(()=>{"rejected"!==e.state()&&(t(),this._lastOperation=null)}).fail(()=>{e.reject(),this._lastOperation=null})}waitForDeferredOperations(){return(0,X.gx)(...this._deferreds)}_processCanceledEditingCell(){}_repaintEditCell(e,t,i){!e||!e.showEditorAlways||t&&!t.showEditorAlways?(this._editCellInProgress=!0,this._needFocusEditor=!0,this._editorFactoryController.loseFocus(),this._dataController.updateItems({changeType:"update",rowIndices:[i,this._getVisibleEditRowIndex()]})):e!==t&&(this._needFocusEditor=!0,this._dataController.updateItems({changeType:"update",rowIndices:[]}))}_delayedInputFocus(e,t,i){var a=()=>{if(t&&t(),e){var n=e.find(zp).first();Ae.focusAndSelectElement(this,n)}this._beforeFocusCallback=null};ft.Z.real().ios||ft.Z.real().android?a():(this._beforeFocusCallback&&this._beforeFocusCallback(),clearTimeout(this._inputFocusTimeoutID),i&&(this._beforeFocusCallback=t),this._inputFocusTimeoutID=setTimeout(a))}_focusEditingCell(e,t,i){var a=this._getVisibleEditColumnIndex();(t=t||this._rowsView&&this._rowsView._getCellElement(this._getVisibleEditRowIndex(),a))&&this._delayedInputFocus(t,e,i)}deleteRow(e){this._checkAndDeleteRow(e)}_checkAndDeleteRow(e){var t=this.option("editing"),i=t?.texts,a=t?.confirmDelete,n=i?.confirmDeleteMessage,s=this._dataController.items()[e],o=!this.isEditing()||s.isNewRow;if(s&&o)if(a&&n){var l=i&&i.confirmDeleteTitle,d=(0,C.$K)(l)&&l.length>0;Mp(n,l,d).done(u=>{u&&this._deleteRowCore(e)})}else this._deleteRowCore(e)}_deleteRowCore(e){var i=this._dataController.items()[e],a=i&&i.key,n=this._getVisibleEditRowIndex();this.refresh();var s=this.getChanges(),o=Ae.getIndexByKey(a,s);return o>=0?s[o].type===Ca?this._removeChange(o):this._addChange({key:a,type:$a}):this._addChange({key:a,oldData:i.data,type:$a}),this._afterDeleteRow(e,n)}_afterDeleteRow(e,t){return this.saveEditData()}undeleteRow(e){var t=this._dataController,i=t.items()[e],a=this._getVisibleEditRowIndex(),n=i&&i.key,s=this.getChanges();if(i){var o=Ae.getIndexByKey(n,s);if(o>=0){var{data:l}=s[o];(0,C.Qr)(l)?this._removeChange(o):this._addChange({key:n,type:Fl}),t.updateItems({changeType:"update",rowIndices:[a,e]})}}}_fireOnSaving(){var e={cancel:!1,promise:null,changes:[...this.getChanges()]};this.executeAction("onSaving",e);var t=new X.BH;return(0,X.gx)((0,X.p4)(e.promise)).done(()=>{t.resolve(e)}).fail(i=>{Vl(t),this._fireDataErrorOccurred(i),t.resolve({cancel:!0})}),t}_executeEditingAction(e,t,i){if(this.component._disposed)return null;var a=new X.BH;return this.executeAction(e,t),(0,X.gx)((0,X.p4)(t.cancel)).done(n=>{n?setTimeout(()=>{a.resolve("cancel")}):i(t).done(a.resolve).fail(Vl(a))}).fail(Vl(a)),a}_processChanges(e,t,i,a){var n=this._dataController.store();(0,Y.S6)(a,(s,o)=>{var f,p,l=this._getOldData(o.key),{data:d,type:u}=o,c=(0,ye.Z)({},o);if(!this._beforeSaveEditData(o,s)){switch(u){case $a:f=this._executeEditingAction("onRowRemoving",p={data:l,key:o.key,cancel:!1},()=>n.remove(o.key).done(w=>{i.push({type:"remove",key:w})}));break;case Ca:f=this._executeEditingAction("onRowInserting",p={data:d,cancel:!1},()=>n.insert(p.data).done((w,S)=>{(0,C.$K)(S)&&(c.key=S),w&&(0,C.Kn)(w)&&w!==p.data&&(c.data=w),i.push({type:"insert",data:w,index:0})}));break;case Fl:f=this._executeEditingAction("onRowUpdating",p={newData:d,oldData:l,key:o.key,cancel:!1},()=>n.update(o.key,p.newData).done((w,S)=>{w&&(0,C.Kn)(w)&&w!==p.newData&&(c.data=w),i.push({type:"update",key:S,data:w})}))}if(a[s]=c,f){var _=new X.BH;f.always(w=>{t.push({key:o.key,result:w})}).always(_.resolve),e.push(_.promise())}}})}_processRemoveIfError(e,t){var i=e[t];return i?.type===$a&&t>=0&&e.splice(t,1),!0}_processRemove(e,t,i){var a=e[t];if(!i||!a||a.type===$a)return this._processRemoveCore(e,t,!i||!a)}_processRemoveCore(e,t,i){return t>=0&&e.splice(t,1),!0}_processSaveEditDataResult(e){for(var t=!1,i=[...this.getChanges()],a=i.length,n=0;n<e.length;n++){var s=e[n].result,o="cancel"===s,l=Ae.getIndexByKey(e[n].key,i),d=i[l];if(s&&s instanceof Error){if(d&&this._addInternalData({key:d.key,error:s}),this._fireDataErrorOccurred(s),this._processRemoveIfError(i,l))break}else this._processRemove(i,l,o)&&(t=!o)}return i.length<a&&this._silentOption(Ua,i),t}_fireSaveEditDataEvents(e){(0,Y.S6)(e,(t,i)=>{var{data:a,key:n,type:s}=i,o=this._addInternalData({key:n}),l={key:n,data:a};switch(o.error&&(l.error=o.error),s){case $a:this.executeAction("onRowRemoved",(0,B.l)({},l,{data:o.oldData}));break;case Ca:this.executeAction("onRowInserted",l);break;case Fl:this.executeAction("onRowUpdated",l)}}),this.executeAction("onSaved",{changes:e})}saveEditData(){var e=new X.BH;return this.waitForDeferredOperations().done(()=>{this.isSaving()?this._resolveAfterSave(e):(0,X.gx)(this._beforeSaveEditData()).done(t=>{t?this._resolveAfterSave(e,{cancel:t}):(this._saving=!0,this._saveEditDataInner().always(()=>{this._saving=!1,this._refocusEditCell&&this._focusEditingCell()}).done(e.resolve).fail(e.reject))}).fail(e.reject)}).fail(e.reject),e.promise()}_resolveAfterSave(e){var{cancel:t,error:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,X.gx)(this._afterSaveEditData(t)).done(()=>{e.resolve(i)}).fail(e.reject)}_saveEditDataInner(){var e=new X.BH,t=[],i=[],a=[],n=this._dataController.dataSource();return(0,X.gx)(this._fireOnSaving()).done(s=>{var{cancel:o,changes:l}=s;return o?e.resolve().promise():(this._processChanges(i,t,a,l),i.length?(this._refocusEditCell=!0,n?.beginLoading(),(0,X.gx)(...i).done(()=>{this._processSaveEditDataResult(t)?this._endSaving(a,l,e):(n?.endLoading(),e.resolve())}).fail(d=>{n?.endLoading(),e.resolve(d)}),e.always(()=>{this._refocusEditCell=!0}).promise()):void this._cancelSaving(e))}).fail(e.reject),e.promise()}_beforeEndSaving(e){this._resetEditIndices()}_endSaving(e,t,i){var a=this._dataController.dataSource();this._beforeEndSaving(t),a?.endLoading(),this._refreshDataAfterSave(e,t,i)}_cancelSaving(e){this.executeAction("onSaved",{changes:[]}),this._resolveAfterSave(e)}_refreshDataAfterSave(e,t,i){var a=this._dataController,n=this.option("editing.refreshMode"),s="reshape"!==n&&"repaint"!==n;s||a.push(e),(0,X.gx)(a.refresh({selection:s,reload:s,load:"reshape"===n,changesOnly:this.option("repaintChangesOnly")})).always(()=>{this._fireSaveEditDataEvents(t)}).done(()=>{this._resolveAfterSave(i)}).fail(o=>{this._resolveAfterSave(i,{error:o})})}isSaving(){return this._saving}_updateEditColumn(){var e=this._isEditColumnVisible(),t=this.option("editing.useIcons"),i=nw+(t?" ".concat(sw):"");this._columnsController.addCommandColumn({type:"buttons",command:"edit",visible:e,cssClass:i,width:"auto",alignment:"center",cellTemplate:this._getEditCommandCellTemplate(),fixedPosition:"right"}),this._columnsController.columnOption("command:edit",{visible:e,cssClass:i})}_isEditColumnVisible(){return this.option("editing").allowDeleting}_isEditButtonDisabled(){var e=this.hasChanges();return!((0,C.$K)(this.option("editing.editRowKey"))||e)}_updateEditButtons(){var e=this._isEditButtonDisabled();this._headerPanelView&&(this._headerPanelView.setToolbarItemDisabled("saveButton",e),this._headerPanelView.setToolbarItemDisabled("revertButton",e))}_applyModified(e,t){e&&e.addClass(ow)}_beforeCloseEditCellInBatchMode(e){}cancelEditData(){var e=this.getChanges(),t={cancel:!1,changes:e};this.executeAction("onEditCanceling",t),t.cancel||(this._cancelEditDataCore(),this.executeAction("onEditCanceled",{changes:e}))}_cancelEditDataCore(){var e=this._getVisibleEditRowIndex();this._beforeCancelEditData(),this.init(),this.resetChanges(),this._resetEditColumnName(),this._resetEditRowKey(),this._afterCancelEditData(e)}_afterCancelEditData(e){this._dataController.updateItems({repaintChangesOnly:this.option("repaintChangesOnly")})}_hideEditPopup(){}hasEditData(){return this.hasChanges()}update(e){var t=this._dataController;t&&this._pageIndex!==t.pageIndex()&&("refresh"===e&&this.refresh({isPageChanged:!0}),this._pageIndex=t.pageIndex()),this._updateEditButtons()}_getRowIndicesForCascadeUpdating(e,t){return t?[]:[e.rowIndex]}addDeferred(e){this._deferreds.includes(e)||(this._deferreds.push(e),e.always(()=>{var t=this._deferreds.indexOf(e);t>=0&&this._deferreds.splice(t,1)}))}_prepareChange(e,t,i){var a,n={},s=null===(a=e.row)||void 0===a?void 0:a.data,o=e.key,l=new X.BH;return void 0!==o&&(e.value=t,(0,X.p4)(e.column.setCellValue(n,t,(0,B.l)(!0,{},s),i)).done(()=>{l.resolve({data:n,key:o,oldData:s,type:Fl})}).fail(Vl(l)).fail(u=>this._fireDataErrorOccurred(u)),(0,C.$K)(i)&&e.column.displayValueMap&&(e.column.displayValueMap[t]=i),this._updateRowValues(e),this.addDeferred(l)),l}_updateRowValues(e){if(e.values){var t=this._dataController,i=t.getRowIndexByKey(e.key),a=t.getVisibleRows()[i];a&&(e.row.values=a.values,e.values=a.values),e.values[e.columnIndex]=e.value}}updateFieldValue(e,t,i,a){var n=e.key,s=new X.BH;return void 0===n&&this._dataController.fireError("E1043"),e.column.setCellValue?this._prepareChange(e,t,i).done(o=>{(0,X.gx)(this._applyChange(e,o,a)).always(()=>{s.resolve()})}):s.resolve(),s.promise()}_focusPreviousEditingCellIfNeed(e){if(this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex))return this._focusEditingCell(),this._updateEditRow(e.row,!0),!0}_needUpdateRow(e){var t=this._columnsController.getVisibleColumns();e||(e=this._getEditColumn());var i=e&&e.setCellValue!==e.defaultSetCellValue,a=t.some(n=>n.calculateCellValue!==n.defaultCalculateCellValue);return i||a}_applyChange(e,t,i){var a=(0,ye.Z)((0,ye.Z)({},e),{forceUpdateRow:i});return this._addChange(t,a),this._updateEditButtons(),this._applyChangeCore(e,a.forceUpdateRow)}_applyChangeCore(e,t){var i=e.column.setCellValue!==e.column.defaultSetCellValue,{row:a}=e;a&&(t||i?this._updateEditRow(a,t,i):a.update&&a.update())}_updateEditRowCore(e,t,i){this._dataController.updateItems({changeType:"update",rowIndices:this._getRowIndicesForCascadeUpdating(e,t)})}_updateEditRow(e,t,i){t?this._updateRowImmediately(e,t,i):this._updateRowWithDelay(e,i)}_updateRowImmediately(e,t,i){this._updateEditRowCore(e,!t,i),this._validateEditFormAfterUpdate(e,i),t||this._focusEditingCell()}_updateRowWithDelay(e,t){var i=new X.BH;this.addDeferred(i),setTimeout(()=>{var a,n=(null===(a=this._editForm)||void 0===a?void 0:a.element())||this.component.$element().get(0),s=(0,b.Z)(at.Z.getActiveElement(n)),o=this._rowsView.getCellIndex(s,e.rowIndex),l=s.get(0),d=Ae.getSelectionRange(l);if(this._updateEditRowCore(e,!1,t),this._validateEditFormAfterUpdate(e,t),o>=0){var u=this._rowsView._getCellElement(e.rowIndex,o);this._delayedInputFocus(u,()=>{setTimeout(()=>{var c;l=at.Z.getActiveElement(null===(c=this.component.$element())||void 0===c?void 0:c.get(0)),d.selectionStart>=0&&Ae.setSelectionRange(l,d)})})}i.resolve()})}_validateEditFormAfterUpdate(){}_addChange(e,t){var i,a=t?.row,n=[...this.getChanges()],s=Ae.getIndexByKey(e.key,n);s<0&&(s=n.length,this._addInternalData({key:e.key,oldData:e.oldData}),delete e.oldData,n.push(e));var o=(0,ye.Z)({},n[s]);return o&&(e.data&&(o.data=(0,Wr.FL)(o.data,e.data)),(!o.type||!e.data)&&e.type&&(o.type=e.type),a&&(a.oldData=this._getOldData(a.key),a.data=(0,Wr.FL)(a.data,e.data))),n[s]=o,this._silentOption(Ua,n),t&&o!==(null===(i=this.getChanges())||void 0===i?void 0:i[s])&&(t.forceUpdateRow=!0),o}_getFormEditItemTemplate(e,t){return t.editCellTemplate||this._getDefaultEditorTemplate()}getColumnTemplate(e){var a,l,{column:t}=e,i=e.row&&e.row.rowIndex,n=this.isRowBasedEditMode(),s=this.isEditRow(i),o=this.isEditCell(i,e.columnIndex);return!(t.showEditorAlways||t.setCellValue&&(s&&t.allowEditing||o))||"data"!==e.rowType&&"detailAdaptive"!==e.rowType||t.command?"detail"===t.command&&"detail"===e.rowType&&s&&(a=null==this?void 0:this.getEditFormTemplate(e)):(((this.allowUpdating(e)||s)&&t.allowEditing||o)&&(s||!n)&&(t.showEditorAlways&&!n&&this._isEditingStart(l={cancel:!1,key:e.row.isNewRow?void 0:e.row.key,data:e.row.data,column:t}),(!l||!l.cancel)&&(e.setValue=(u,c)=>{this.updateFieldValue(e,u,c)})),a=t.editCellTemplate||this._getDefaultEditorTemplate()),a}_createButton(e,t,i,a){var n=dF[t.name],s=this.option("editing.useIcons"),o=this.option("useLegacyColumnButtonTemplate"),l=(0,b.Z)("<a>").attr("href","#").addClass("dx-link").addClass(t.cssClass);if(t.template&&o)this._rowsView.renderTemplate(e,t.template,i,!0);else{if(t.template)l=(0,b.Z)("<span>").addClass(t.cssClass);else if(s&&n||t.icon){var d=Za.P(n=t.icon||n);"image"===d||"svg"===d?l=Za.H(n).addClass(t.cssClass):l.addClass("dx-icon".concat("dxIcon"===d?"-":" ").concat(n)).attr("title",t.text),l.addClass("dx-link-icon"),e.addClass(sw);var u=this.getButtonLocalizationNames()[t.name];u&&l.attr("aria-label",ae.Z.format(u))}else l.text(t.text);(0,C.$K)(t.hint)&&l.attr("title",t.hint),this._isButtonDisabled(t,i)?l.addClass("dx-state-disabled"):(!t.template||t.onClick)&&z.Z.on(l,(0,Ee.V4)("click","dxDataGridEditing"),this.createAction(c=>{var f;null===(f=t.onClick)||void 0===f||f.call(t,(0,B.l)({},c,{row:i.row,column:i.column})),c.event.preventDefault(),c.event.stopPropagation()})),e.append(l,"&nbsp;"),t.template&&(i.renderAsync=!1,this._rowsView.renderTemplate(l,t.template,i,!0,a))}}getButtonLocalizationNames(){return{edit:"dxDataGrid-editingEditRow",save:"dxDataGrid-editingSaveRowChanges",delete:"dxDataGrid-editingDeleteRow",undelete:"dxDataGrid-editingUndeleteRow",cancel:"dxDataGrid-editingCancelRowChanges"}}prepareButtonItem(e,t,i,a){var n,s=null!==(n=this.option("editing.texts"))&&void 0!==n?n:{},l={revert:"cancel",save:"save",addRow:"addrow"}[t],d={revert:s.cancelAllChanges,save:s.saveAllChanges,addRow:s.addRow}[t],u=("save"===l||"cancel"===l)&&this._isEditButtonDisabled();return{widget:"dxButton",options:{onInitialized:c=>{(0,b.Z)(c.element).addClass(e._getToolbarButtonClass("".concat("dx-edit-button"," ").concat(this.addWidgetPrefix(l),"-button")))},icon:"edit-button-".concat(l),disabled:u,onClick:()=>{setTimeout(()=>{this[i]()})},text:d,hint:d},showText:"inMenu",name:"".concat(t,"Button"),location:"after",locateInMenu:"auto",sortIndex:a}}prepareEditButtons(e){var t,a=[];return(null!==(t=this.option("editing"))&&void 0!==t?t:{}).allowAdding&&a.push(this.prepareButtonItem(e,"addRow","addRow",20)),a}highlightDataCell(e,t){this.shouldHighlightCell(t)&&e.addClass(ow)}_afterInsertRow(e){}_beforeSaveEditData(e){if(e&&!(0,C.$K)(e.key)&&(0,C.$K)(e.type))return!0}_afterSaveEditData(){}_beforeCancelEditData(){}_allowEditAction(e,t){var i=this.option("editing.".concat(e));return(0,C.mf)(i)&&(i=i({component:this.component,row:t.row})),i}allowUpdating(e,t){var i,a=null!==(i=this.option("editing.startEditAction"))&&void 0!==i?i:"click";return(!(arguments.length>1)||a===t||"down"===t)&&this._allowEditAction("allowUpdating",e)}allowDeleting(e){return this._allowEditAction("allowDeleting",e)}isCellModified(e){var t,i,a,{columnIndex:n}=e,s=null===(i=null===(t=e?.row)||void 0===t?void 0:t.modifiedValues)||void 0===i?void 0:i[n];return!(null===(a=e?.row)||void 0===a)&&a.isNewRow&&(s=e.value),void 0!==s}isNewRowInEditMode(){var e=this._getVisibleEditRowIndex(),t=this._dataController.items();return e>=0&&t[e].isNewRow}_isRowDeleteAllowed(){}shouldHighlightCell(e){return this.isCellModified(e)&&e.column.setCellValue&&(this.getEditMode()!==Ga||!e.row.isEditing)}}},extenders:{controllers:{data:fw},views:{rowsView:r=>class extends r{getCellIndex(e,t){if(!e.is("td")&&t>=0){var i=this.getCellElements(t),a=-1;return(0,Y.S6)(i,(n,s)=>{(0,b.Z)(s).find(e).length&&(a=n)}),a}return super.getCellIndex.apply(this,arguments)}publicMethods(){return super.publicMethods().concat(["cellValue"])}_getCellTemplate(e){return this._editingController.getColumnTemplate(e)||super._getCellTemplate(e)}_createRow(e){var t=super._createRow.apply(this,arguments);if(e){var i=!!e.removed,a=!!e.isNewRow,n=!!e.modified;a&&t.addClass("dx-row-inserted"),n&&t.addClass("dx-row-modified"),(a||i)&&t.removeClass("dx-selection")}return t}_getColumnIndexByElement(e){for(var t=e.closest("table"),i=this.getTableElements();t.length&&!i.filter(t).length;)e=t.closest("td"),t=e.closest("table");return this._getColumnIndexByElementCore(e)}_getColumnIndexByElementCore(e){var t=e.closest(".".concat(bn,"> td:not(.dx-master-detail-cell)"));return this.getCellIndex(t)}_editCellByClick(e,t){var i=this._editingController,a=(0,b.Z)(e.event.target),n=this._getColumnIndexByElement(a),s=this._dataController.items()[e.rowIndex],o=i.allowUpdating({row:s},t)||s&&s.isNewRow,l=this._columnsController.getVisibleColumns()[n],d=i.isEditCell(e.rowIndex,n),u=o&&l&&(l.allowEditing||d),c=this.option("editing.startEditAction")||"click",f=l&&l.showEditorAlways;if(d)return!0;if("down"===t)return(ft.Z.real().ios||ft.Z.real().android)&&(0,ha.M3)(),f&&u&&i.editCell(e.rowIndex,n);if("click"===t&&"dblClick"===c&&this._pointerDownTarget===a.get(0)){var p=s?.isNewRow;i.closeEditCell(!1,p)}return u&&t===c?i.editCell(e.rowIndex,n)||i.isEditRow(e.rowIndex):void 0}_rowPointerDown(e){this._pointerDownTarget=e.event.target,this._pointerDownTimeout=setTimeout(()=>{this._editCellByClick(e,"down")})}_rowClickTreeListHack(e){super._rowClick.apply(this,arguments)}_rowClick(e){var t=(0,b.Z)(e.rowElement).hasClass(this.addWidgetPrefix(Du));e.event[ew]=this.component,!this._editCellByClick(e,"click")&&!t&&super._rowClick.apply(this,arguments)}_rowDblClickTreeListHack(e){super._rowDblClick.apply(this,arguments)}_rowDblClick(e){this._editCellByClick(e,"dblClick")||super._rowDblClick.apply(this,arguments)}_cellPrepared(e,t){var i,a=this._editingController,n=!!t.column.command,s=t.setValue,o=a.isEditRow(t.rowIndex),l=uw(o,t);if(hw(o,t)){var{alignment:d}=t.column;e.toggleClass(this.addWidgetPrefix("readonly"),!s).toggleClass("dx-cell-focus-disabled",!s),d&&e.find(Zp).first().css("textAlign",d)}l&&this._editCellPrepared(e);var u=!(null===(i=t.column)||void 0===i||!i.cellTemplate);t.column&&!n&&(!u||a.shouldHighlightCell(t))&&a.highlightDataCell(e,t),super._cellPrepared.apply(this,arguments)}_getCellOptions(e){var t=super._getCellOptions(e),{columnIndex:i,row:a}=e;return t.isEditing=this._editingController.isEditCell(t.rowIndex,t.columnIndex),t.removed=a.removed,a.modified&&(t.modified=void 0!==a.modifiedValues[i]),t}_setCellAriaAttributes(e,t){super._setCellAriaAttributes(e,t),t.removed&&this.setAria("roledescription",ae.Z.format("dxDataGrid-ariaDeletedCell"),e),t.modified&&this.setAria("roledescription",ae.Z.format("dxDataGrid-ariaModifiedCell"),e),t.column.allowEditing&&!t.removed&&!t.modified&&"data"===t.rowType&&t.column.calculateCellValue===t.column.defaultCalculateCellValue&&this._editingController.isCellBasedEditMode()&&this.setAria("roledescription",ae.Z.format("dxDataGrid-ariaEditableCell"),e)}_createCell(e){var t=super._createCell(e),i=this._editingController.isEditRow(e.rowIndex);return hw(i,e)&&t.addClass(Tu),t}cellValue(e,t,i,a){var n=this.getCellOptions(e,t);if(n){if(void 0===i)return n.value;this._editingController.updateFieldValue(n,i,a,!0)}}dispose(){super.dispose.apply(this,arguments),clearTimeout(this._pointerDownTimeout)}_renderCore(){return super._renderCore.apply(this,arguments),this.waitAsyncTemplates(!0).done(()=>{this._editingController._focusEditorIfNeed()})}_editCellPrepared(){}_formItemPrepared(){}},headerPanel:r=>class extends r{optionChanged(e){var{fullName:t}=e;switch(e.name){case"editing":t&&![Ou,Ua,ls,br].some(n=>n===t)&&this._invalidate(),super.optionChanged(e);break;case"useLegacyColumnButtonTemplate":e.handled=!0;break;default:super.optionChanged(e)}}_getToolbarItems(){var e=super._getToolbarItems();return this._editingController.prepareEditButtons(this).concat(e)}isVisible(){var e=this._editingController.option("editing");return super.isVisible()||e?.allowAdding}}}}};He.registerModule("editing",(0,ye.Z)((0,ye.Z)({},Gp),{extenders:(0,ye.Z)((0,ye.Z)({},Gp.extenders),{controllers:(0,ye.Z)((0,ye.Z)({},Gp.extenders.controllers),{data:r=>class extends(fw(r)){_changeRowExpandCore(e){var t=this._editingController;return Array.isArray(e)&&t&&t.refresh(),super._changeRowExpandCore.apply(this,arguments)}}})})}));var BF={extenders:{controllers:{editing:r=>class extends r{isRowEditMode(){return this.getEditMode()===Ga}_afterCancelEditData(e){var t=this._dataController;this.isRowBasedEditMode()&&e>=0?t.updateItems({changeType:"update",rowIndices:[e,e+1]}):super._afterCancelEditData(e)}_isDefaultButtonVisible(e,t){var i=this.isRowBasedEditMode(),a=t.row&&(0,le.bY)(t.row.key,this.option(br));if(i)switch(e.name){case"edit":return!a&&this.allowUpdating(t);case"delete":return super._isDefaultButtonVisible(e,t)&&!a;case"save":case"cancel":return a;default:return super._isDefaultButtonVisible(e,t)}return super._isDefaultButtonVisible(e,t)}isEditRow(e){return this.isRowBasedEditMode()&&this.isEditRowByIndex(e)}_cancelSaving(e){this.isRowBasedEditMode()&&(this.hasChanges()||this._cancelEditDataCore()),super._cancelSaving(e)}_refreshCore(e){var{allowCancelEditing:t}=e??{};if(this.isRowBasedEditMode()){var i=this.getChanges().filter(a=>"update"===a.type).length>0;this.init(),t&&i&&this._cancelEditDataCore()}super._refreshCore(e)}_isEditColumnVisible(){var e=super._isEditColumnVisible(),t=this.option("editing"),i=this.isRowEditMode();return e||i&&(t.allowUpdating||t.allowAdding)}_focusEditorIfNeed(){var e=this.getEditMode();if(this._needFocusEditor){if(XP.includes(e)){var t=this.getFocusedCellInRow(this._getVisibleEditRowIndex());this._delayedInputFocus(t,()=>{t&&this.component.focus(t)})}this._needFocusEditor=!1}}},data:r=>class extends r{_getChangedColumnIndices(e,t,i,a){if(!this._editingController.isRowBasedEditMode()||e.isEditing===t.isEditing)return super._getChangedColumnIndices.apply(this,arguments)}}},views:{rowsView:r=>class extends r{_createRow(e){var t=super._createRow.apply(this,arguments);return e&&this._editingController.isEditRow(e.rowIndex)&&(t.addClass(dw),t.removeClass(Q0),"detail"===e.rowType&&t.addClass(this.addWidgetPrefix(Du))),t}_update(e){super._update(e),"updateSelection"===e.changeType&&this.getTableElements().children("tbody").children(".".concat(dw)).removeClass(Q0)}}}}};He.registerModule("editingRowBased",BF);var Up=ve(340);class vw{constructor(){this._map={}}_findWidgetInstance(e){var t;return(0,Y.S6)(this._map,function(i,a){var{widgetInstance:n,item:s}=a;if(e(s))return t=n,!1}),t}_findFieldByCondition(e,t){var i;return(0,Y.S6)(this._map,function(a,n){if(e(n))return i="guid"===t?a:n[t],!1}),i}clear(){this._map={}}removeItemsByItems(e){(0,Y.S6)(e.getItems(),t=>this.removeItemByKey(t))}removeItemByKey(e){delete this._map[e]}add(e){var t=e.guid||new Pi.Z;return this._map[t]=e,t}addItemsOrExtendFrom(e){e.each((t,i)=>{this._map[t]?(i.widgetInstance&&(this._map[t].widgetInstance=i.widgetInstance),this._map[t].$itemContainer=i.$itemContainer):this.add({item:i.item,widgetInstance:i.widgetInstance,guid:t,$itemContainer:i.$itemContainer})})}extendRunTimeItemInfoByKey(e,t){this._map[e]&&(this._map[e]=(0,B.l)(this._map[e],t))}findWidgetInstanceByItem(e){return this._findWidgetInstance(t=>t===e)}findGroupOrTabLayoutManagerByPath(e){return this._findFieldByCondition(t=>{var{path:i}=t;return i===e},"layoutManager")}findKeyByPath(e){return this._findFieldByCondition(t=>{var{path:i}=t;return i===e},"guid")}findWidgetInstanceByName(e){return this._findWidgetInstance(t=>e===t.name)}findWidgetInstanceByDataField(e){return this._findWidgetInstance(t=>e===((0,C.HD)(t)?t:t.dataField))}findItemContainerByItem(e){for(var t in this._map)if(this._map[t].item===e)return this._map[t].$itemContainer;return null}findItemIndexByItem(e){return this._findFieldByCondition(t=>{var{item:i}=t;return i===e},"itemIndex")}findPreparedItemByItem(e){return this._findFieldByCondition(t=>{var{item:i}=t;return i===e},"preparedItem")}getItems(){return this._map}each(e){(0,Y.S6)(this._map,function(t,i){e(t,i)})}removeItemsByPathStartWith(e){Object.keys(this._map).filter(a=>!!this._map[a].path&&this._map[a].path.indexOf(e,0)>-1).forEach(a=>this.removeItemByKey(a))}}var Lu={move(r,e){(0,Gi.pB)(r,{left:e})}},jp={moveTo(r,e,t,i){ti.Z.animate(r,{type:"slide",to:{left:e},duration:t,complete:i})},complete(r){ti.Z.stop(r,!0)}},gw=ve(1021),_w="dx-multiview-item",mw=r=>+r,Cw=gw.Z.inherit({_activeStateUnit:"."+_w,_supportedKeys:function(){return(0,B.l)(this.callBase(),{pageUp:le.ZT,pageDown:le.ZT})},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===ft.Z.real().deviceType&&!ft.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_itemClass:function(){return _w},_itemDataKey:function(){return"dxMultiViewItemData"},_itemContainer:function(){return this._$itemContainer},_itemElements:function(){return this._itemContainer().children(this._itemSelector())},_itemWidth:function(){return this._itemWidthValue||(this._itemWidthValue=(0,we.dz)(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache:function(){delete this._itemWidthValue},_itemsCount:function(){return this.option("items").length},_normalizeIndex:function(r){var e=this._itemsCount();return r<0&&(r+=e),r>=e&&(r-=e),r},_getRTLSignCorrection:function(){return this.option("rtlEnabled")?-1:1},_init:function(){this.callBase.apply(this,arguments);var r=this.$element();r.addClass("dx-multiview"),this._$wrapper=(0,b.Z)("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo(r),this._$itemContainer=(0,b.Z)("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._findBoundaryIndices(),this._initSwipeable()},_initMarkup:function(){this._deferredItems=[],this.callBase();var r=this._getSelectedItemIndices();this._updateItemsVisibility(r[0]),this._setElementAria(),this._setItemsAria()},_afterItemElementDeleted:function(r,e){this.callBase(r,e),this._deferredItems&&this._deferredItems.splice(e.itemIndex,1)},_beforeItemElementInserted:function(r){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(r.index,0,null)},_executeItemRenderAction:function(r,e,t){r=(this.option("items")||[]).indexOf(e),this.callBase(r,e,t)},_renderItemContent:function(r){var e=new X.BH,t=this,i=this.callBase,a=new X.BH;return a.done(function(){var n=i.call(t,r);e.resolve(n)}),this._deferredItems[r.index]=a,this.option("deferRendering")||a.resolve(),e.promise()},_render:function(){this.callBase(),(0,le.g0)(()=>{var r=this._getSelectedItemIndices();this._updateItems(r[0])})},_getElementAria:()=>({role:"group",roledescription:ae.Z.format("dxMultiView-elementAriaRoleDescription"),label:ae.Z.format("dxMultiView-elementAriaLabel")}),_setElementAria(){var r=this._getElementAria();this.setAria(r,this.$element())},_setItemsAria(){var r=this._itemElements(),e=this._itemsCount();r.each((t,i)=>{var a=this._getItemAria({itemIndex:t,itemsCount:e});this.setAria(a,(0,b.Z)(i))})},_getItemAria(r){var{itemIndex:e,itemsCount:t}=r;return{role:"group",roledescription:ae.Z.format("dxMultiView-itemAriaRoleDescription"),label:ae.Z.format("dxMultiView-itemAriaLabel",e+1,t)}},_updateItems:function(r,e){this._updateItemsPosition(r,e),this._updateItemsVisibility(r,e)},_modifyByChanges:function(){this.callBase.apply(this,arguments);var r=this._getSelectedItemIndices();this._updateItemsVisibility(r[0])},_updateItemsPosition:function(r,e){var t=this._itemElements(),i=(0,C.$K)(e)?-this._animationDirection(e,r):void 0,a=t.eq(r);Lu.move(a,0),(0,C.$K)(e)&&Lu.move(t.eq(e),100*i+"%")},_updateItemsVisibility(r,e){this._itemElements().each((i,a)=>{var n=(0,b.Z)(a),s=i!==r&&i!==e;s||this._renderSpecificItem(i),n.toggleClass("dx-multiview-item-hidden",s),this.setAria("hidden",s||void 0,n)})},_renderSpecificItem:function(r){var e=this._itemElements().eq(r),t=e.find(this._itemContentClass()).length>0;(0,C.$K)(r)&&!t&&(this._deferredItems[r].resolve(),(0,Up.U_)(e))},_refreshItem:function(r,e){this.callBase(r,e),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelectionAttribute:le.ZT,_updateSelection:function(r,e){var t=r[0],i=e[0];jp.complete(this._$itemContainer),this._updateItems(i,t);var a=this._animationDirection(t,i);this._animateItemContainer(a*this._itemWidth(),function(){Lu.move(this._$itemContainer,0),this._updateItems(t),(0,we.dz)(this._$itemContainer)}.bind(this))},_animateItemContainer:function(r,e){var t=this.option("animationEnabled")?200:0;jp.moveTo(this._$itemContainer,r,t,e)},_animationDirection:function(r,e){var t=(r=>(0,Gi.jt)(this._$itemContainer).left)(),i=(e-r)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection();return(0,Di.Xx)(0!==t?t:i)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),Cu,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:r=>this._swipeStartHandler(r.event),onUpdated:r=>this._swipeUpdateHandler(r.event),onEnd:r=>this._swipeEndHandler(r.event)})},_findBoundaryIndices(){var r,e,i,a,t=this.option("items");t.forEach((n,s)=>{var l;n?.disabled||(null!==(l=i)&&void 0!==l||(i=s),a=s)}),this._boundaryIndices={firstAvailableIndex:null!==(r=i)&&void 0!==r?r:0,lastAvailableIndex:null!==(e=a)&&void 0!==e?e:t.length-1,firstTrueIndex:0,lastTrueIndex:t.length-1}},_swipeStartHandler:function(r){jp.complete(this._$itemContainer);var e=this.option("selectedIndex"),t=this.option("loop"),{firstAvailableIndex:i,lastAvailableIndex:a}=this._boundaryIndices,n=this.option("rtlEnabled");r.maxLeftOffset=mw(t||(n?e>i:e<a)),r.maxRightOffset=mw(t||(n?e<a:e>i)),this._swipeDirection=null},_swipeUpdateHandler:function(r){var e=r.offset,t=(0,Di.Xx)(e)*this._getRTLSignCorrection();if(Lu.move(this._$itemContainer,e*this._itemWidth()),t!==this._swipeDirection){this._swipeDirection=t;var i=this.option("selectedIndex"),a=this._normalizeIndex(i-t);this._updateItems(i,a)}},_findNextAvailableIndex(r,e){var{items:t,loop:i}=this.option(),{firstAvailableIndex:a,lastAvailableIndex:n,firstTrueIndex:s,lastTrueIndex:o}=this._boundaryIndices,l=[s,a].includes(r),d=[o,n].includes(r);if(i){if(l&&e<0)return n;if(d&&e>0)return a}for(var u=r+e;u>=a&&u<=n;u+=e)if(!t[u].disabled)return u;return r},_swipeEndHandler:function(r){var e=r.targetOffset*this._getRTLSignCorrection();if(e){var t=this._findNextAvailableIndex(this.option("selectedIndex"),-e);this.option("selectedIndex",t);var i=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",(0,lt.u)(i))}else this._animateItemContainer(0,le.ZT)},_getItemFocusLoopSignCorrection:function(){return this._itemFocusLooped?-1:1},_moveFocus:function(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem:function(r){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(r.last()),e},_nextItem:function(r){var e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(r.first()),e},_dimensionChanged:function(){this._clearItemWidthCache()},_visibilityChanged:function(r){r&&this._dimensionChanged()},_updateSwipeDisabledState(){var r=this._getSwipeDisabledState();Cu.getInstance(this.$element()).option("disabled",r)},_dispose:function(){delete this._boundaryIndices,this.callBase()},_optionChanged:function(r){var e=r.value;switch(r.name){case"loop":this.option("loopItemFocus",e);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),this.callBase(r);break;default:this.callBase(r)}}});(0,Rt.Z)("dxMultiView",Cw);const $F=Cw;var ww="dx-badge",UF=eu.Z.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge:function(r){if(this._$element.children("."+ww).remove(),r){var e=(0,b.Z)("<div>").addClass("dx-tabs-item-badge").addClass(ww).text(r);this._$element.append(e)}}});const jF=UF;var bw="dx-tabs-expanded";function yw(r){return r.scrollWidth-r.clientWidth}var Aw="dx-tabs-stretched",Tw="dx-tabs-nav-buttons",Dw="dx-overflow-hidden",Rw="dx-state-disabled",Lw="dx-focused-disabled-next-tab",Pw="dx-focused-disabled-prev-tab",Vw={top:"dx-tab-indicator-position-top",right:"dx-tab-indicator-position-right",bottom:"dx-tab-indicator-position-bottom",left:"dx-tab-indicator-position-left"},Nl={top:"dx-tabs-icon-position-top",end:"dx-tabs-icon-position-end",bottom:"dx-tabs-icon-position-bottom",start:"dx-tabs-icon-position-start"},qp={primary:"dx-tabs-styling-mode-primary",secondary:"dx-tabs-styling-mode-secondary"},Nw="chevronnext",Bw="chevronprev",Xp=gw.Z.inherit({_activeStateUnit:".dx-tab",_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",orientation:"horizontal",iconPosition:"start",stylingMode:"primary",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:function(r){return r?r.badge:void 0},_itemAttributes:{role:"tab"},_indicatorPosition:null})},_defaultOptionsRules:function(){var r=(0,Lt.Vk)();return this.callBase().concat([{device:()=>"desktop"!==ft.Z.real().deviceType,options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:()=>"desktop"===ft.Z.real().deviceType&&!ft.Z.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,Lt.dC)(r),options:{iconPosition:"top",stylingMode:"secondary"}},{device:()=>(0,Lt.x2)(r),options:{useInkRipple:!0,selectOnFocus:!1,iconPosition:"top"}}])},_init(){var{orientation:r,stylingMode:e,scrollingEnabled:t}=this.option(),i=this._getIndicatorPosition();this.callBase(),this.$element().addClass("dx-tabs"),this._toggleScrollingEnabledClass(t),this._toggleOrientationClass(r),this._toggleIndicatorPositionClass(i),this._toggleIconPositionClass(),this._toggleStylingModeClass(e),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_prepareDefaultItemTemplate(r,e){var t=(0,C.PO)(r)?r?.text:r;if((0,C.$K)(t)){var i=(0,b.Z)("<span>").addClass("dx-tab-text-span");i.text(t);var a=(0,b.Z)("<span>").addClass("dx-tab-text-span-pseudo");a.text(t),a.appendTo(i),i.appendTo(e)}(0,C.$K)(r.html)&&e.html(r.html)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Qd.c(((r,e)=>{this._prepareDefaultItemTemplate(e,r);var t=(0,Za.H)(e.icon);t&&t.prependTo(r);var i=(0,b.Z)("<div>").addClass("dx-tab-text");r.wrapInner(i)}).bind(this),["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(r,e){var{itemData:t,container:i,index:a}=e;return this._deferredTemplates[a]=new X.BH,r.render({model:t,container:i,index:a,onRendered:()=>this._deferredTemplates[a].resolve()})},_itemClass:function(){return"dx-tab"},_selectedItemClass:function(){return"dx-tab-selected"},_itemDataKey:function(){return"dxTabData"},_initMarkup:function(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass(Dw)},_render:function(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){X.gx.apply(this,this._deferredTemplates).done(()=>this._renderScrolling())},_renderScrolling(){var r=[Aw,bw,Dw];if(this.$element().removeClass(r.join(" ")),this.option("scrollingEnabled")&&this._isItemsSizeExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());var e=this.getScrollable();if(e.update(),this.option("rtlEnabled")){var t=yw((0,b.Z)(this.getScrollable().container()).get(0));e.scrollTo({left:t})}this._updateNavButtonsState(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsSizeExceeded()||(this._cleanScrolling(),this._needStretchItems()&&this.$element().addClass(Aw),this.$element().removeClass(Tw).addClass(bw))},_isVertical(){return"vertical"===this.option("orientation")},_isItemsSizeExceeded(){return this._isVertical()?this._isItemsHeightExceeded():this._isItemsWidthExceeded()},_isItemsWidthExceeded(){var r=this._getVisibleItems(),e=this._getSummaryItemsSize("width",r,!0),t=(0,we.dz)(this.$element());return![e,t].includes(0)&&e>t-1},_isItemsHeightExceeded(){var r=this._getVisibleItems();return this._getSummaryItemsSize("height",r,!0)-1>(0,we.Cr)(this.$element())},_needStretchItems(){var r=this._getVisibleItems(),e=(0,we.dz)(this.$element()),t=[];return(0,Y.S6)(r,(s,o)=>{t.push((0,we.Y_)(o,!0))}),Math.max.apply(null,t)>e/r.length+1},_cleanNavButtons:function(){!this._leftButton||!this._rightButton||(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling:function(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple:function(){this._inkRipple=(0,lm.sY)()},_getPointerEvent:()=>kt.Z.up,_toggleActiveState:function(r,e,t){if(this.callBase.apply(this,arguments),this._inkRipple){var i={element:r,event:t};e?this._inkRipple.showWave(i):this._inkRipple.hideWave(i)}},_renderMultiple:function(){"multiple"===this.option("selectionMode")&&this.option("selectOnFocus",!1)},_renderWrapper:function(){this._$wrapper=(0,b.Z)("<div>").addClass("dx-tabs-wrapper"),this.setAria("role","tablist",this._$wrapper),this.$element().append(this._$wrapper)},_itemContainer:function(){return this._$wrapper},_getScrollableDirection(){return this._isVertical()?"vertical":"horizontal"},_updateScrollable(){this.getScrollable()&&this._cleanScrolling(),this._renderScrolling()},_renderScrollable(){var r=this.$element().wrapInner((0,b.Z)("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent(r,Ha.Z,{direction:this._getScrollableDirection(),showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsState()}}),this.$element().append(this._scrollable.$element())},_scrollToItem:function(r){if(this._scrollable){var e=this._editStrategy.getItemElement(r);this._scrollable.scrollToElement(e)}},_renderNavButtons:function(){if(this.$element().toggleClass(Tw,this.option("showNavButtons")),this.option("showNavButtons")){var r=this.option("rtlEnabled");this._leftButton=this._createNavButton(-30,r?Nw:Bw);var e=this._leftButton.$element();e.addClass("dx-tabs-nav-button-left"),this.$element().prepend(e),this._rightButton=this._createNavButton(30,r?Bw:Nw);var t=this._rightButton.$element();t.addClass("dx-tabs-nav-button-right"),this.$element().append(t)}},_updateNavButtonsState(){var t,i,a,n,r=this._isVertical(),e=this.getScrollable();r?(null===(t=this._leftButton)||void 0===t||t.option("disabled",function Ew(r,e){return Math.round(r)<=e}(e.scrollTop(),1)),null===(i=this._rightButton)||void 0===i||i.option("disabled",function Iw(r,e,t,i){return Math.round(function qF(r){return r.scrollHeight-r.clientHeight}(r)-e-t)<=i}((0,b.Z)(e.container()).get(0),e.scrollTop(),0,1))):(null===(a=this._leftButton)||void 0===a||a.option("disabled",function xw(r,e){return Math.round(r)<=e}(e.scrollLeft(),1)),null===(n=this._rightButton)||void 0===n||n.option("disabled",function Sw(r,e,t){return Math.round(yw(r)-e)<=t}((0,b.Z)(e.container()).get(0),e.scrollLeft(),1)))},_updateScrollPosition:function(r,e){this._scrollable.update(),this._scrollable.scrollBy(r/e)},_createNavButton:function(r,e){var t=this,i=t._createAction(function(){t._holdInterval=setInterval(function(){t._updateScrollPosition(r,5)},5)}),a=(0,Ee.V4)(js.Z.name,"dxNavButton"),n=(0,Ee.V4)(kt.Z.up,"dxNavButton"),s=(0,Ee.V4)(kt.Z.out,"dxNavButton"),o=this._createComponent((0,b.Z)("<div>").addClass("dx-tabs-nav-button"),Or.Z,{focusStateEnabled:!1,icon:e,onClick:function(){t._updateScrollPosition(r,1)},integrationOptions:{}}),l=o.$element();return z.Z.on(l,a,{timeout:300},function(d){i({event:d})}.bind(this)),z.Z.on(l,n,function(){t._clearInterval()}),z.Z.on(l,s,function(){t._clearInterval()}),o},_clearInterval:function(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection:function(r){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(r[0]))},_visibilityChanged:function(r){r&&this._dimensionChanged()},_dimensionChanged:function(){this._renderScrolling()},_itemSelectHandler:function(r){"single"===this.option("selectionMode")&&this.isItemSelected(r.currentTarget)||this.callBase(r)},_refreshActiveDescendant:function(){this.callBase(this._$wrapper)},_clean:function(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_toggleTabsVerticalClass(r){this.$element().toggleClass("dx-tabs-vertical",r)},_toggleTabsHorizontalClass(r){this.$element().toggleClass("dx-tabs-horizontal",r)},_getIndicatorPositionClass:r=>Vw[r],_getIndicatorPosition(){var{_indicatorPosition:r,rtlEnabled:e}=this.option();if(r)return r;var t=this._isVertical();return e?t?"left":"bottom":t?"right":"bottom"},_toggleIndicatorPositionClass(r){var e=this._getIndicatorPositionClass(r);this._toggleElementClasses(Vw,e)},_toggleScrollingEnabledClass(r){this.$element().toggleClass("dx-tabs-scrolling-enabled",!!r)},_toggleOrientationClass(r){var e="vertical"===r;this._toggleTabsVerticalClass(e),this._toggleTabsHorizontalClass(!e)},_getTabsIconPositionClass(){switch(this.option("iconPosition")){case"top":return Nl.top;case"end":return Nl.end;case"bottom":return Nl.bottom;default:return Nl.start}},_toggleIconPositionClass(){var r=this._getTabsIconPositionClass();this._toggleElementClasses(Nl,r)},_toggleStylingModeClass(r){var e,t=null!==(e=qp[r])&&void 0!==e?e:qp.primary;this._toggleElementClasses(qp,t)},_toggleElementClasses(r,e){for(var t in r)this.$element().removeClass(r[t]);this.$element().addClass(e)},_toggleFocusedDisabledNextClass(r,e){this._itemElements().eq(r).toggleClass(Lw,e)},_toggleFocusedDisabledPrevClass(r,e){this._itemElements().eq(r).toggleClass(Pw,e)},_toggleFocusedDisabledClasses(r){var{selectedIndex:e}=this.option();this._itemElements().removeClass(Lw).removeClass(Pw);var t=e-1,i=e+1,a=(0,b.Z)(r).index(),n=this._itemElements().eq(i).hasClass(Rw),l=this._itemElements().eq(t).hasClass(Rw)&&a===t;this._toggleFocusedDisabledNextClass(e,n&&a===i),this._toggleFocusedDisabledPrevClass(e,l)},_updateFocusedElement(){var{focusStateEnabled:r,selectedIndex:e}=this.option(),t=this._itemElements();if(r&&t.length){var i=t.get(e);this.option({focusedElement:i})}},_optionChanged:function(r){switch(r.name){case"useInkRipple":case"scrollingEnabled":this._toggleScrollingEnabledClass(r.value),this._invalidate();break;case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(r.name,r.value);break;case"width":case"height":this.callBase(r),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(r);break;case"focusedElement":this._toggleFocusedDisabledClasses(r.value),this.callBase(r),this._scrollToItem(r.value);break;case"rtlEnabled":this.callBase(r);var e=this._getIndicatorPosition();this._toggleIndicatorPositionClass(e);break;case"orientation":this._toggleOrientationClass(r.value);var t=this._getIndicatorPosition();this._toggleIndicatorPositionClass(t),(0,Je.Ym)()&&this._updateScrollable();break;case"iconPosition":this._toggleIconPositionClass(),(0,Je.Ym)()&&this._dimensionChanged();break;case"stylingMode":this._toggleStylingModeClass(r.value),(0,Je.Ym)()&&this._dimensionChanged();break;case"_indicatorPosition":this._toggleIndicatorPositionClass(r.value);break;case"selectedIndex":case"selectedItem":case"selectedItems":this.callBase(r),this._updateFocusedElement();break;default:this.callBase(r)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(r,e){this.callBase(r,e),this._renderScrolling()},getScrollable(){return this._scrollable}});Xp.ItemClass=jF,(0,Rt.Z)("dxTabs",Xp);const uV=Xp;var oo={top:"dx-tabpanel-tabs-position-top",right:"dx-tabpanel-tabs-position-right",bottom:"dx-tabpanel-tabs-position-bottom",left:"dx-tabpanel-tabs-position-left"},hs={top:"top",right:"right",bottom:"bottom",left:"left"},wV={top:"bottom",right:"left",bottom:"top",left:"right"},Jp=$F.inherit({_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,tabsPosition:hs.top,iconPosition:"start",stylingMode:"primary",onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:function(r){return r?r.badge:void 0},_tabsIndicatorPosition:null})},_defaultOptionsRules:function(){var r=(0,Lt.Vk)();return this.callBase().concat([{device:function(){return"desktop"===ft.Z.real().deviceType&&!ft.Z.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return!qn.touch},options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}},{device:()=>(0,Lt.dC)(r),options:{stylingMode:"secondary"}},{device:()=>(0,Lt.yj)(r),options:{iconPosition:"top"}}])},_init:function(){this.callBase(),this.$element().addClass("dx-tabpanel"),this._toggleTabPanelTabsPositionClass()},_getElementAria:()=>({role:"tabpanel"}),_getItemAria:()=>({role:"tabpanel"}),_initMarkup:function(){this.callBase(),this._createTitleActions(),this._renderLayout()},_prepareTabsItemTemplate(r,e){var t=(0,Za.H)(r?.icon);t&&e.append(t);var i=(0,C.PO)(r)?r?.title:r;if((0,C.$K)(i)&&!(0,C.PO)(i)){var a=(0,b.Z)("<span>").addClass("dx-tab-text-span");a.append(at.Z.createTextNode(i));var n=(0,b.Z)("<span>").addClass("dx-tab-text-span-pseudo");n.append(at.Z.createTextNode(i)),n.appendTo(a),a.appendTo(e)}},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new Qd.c((r,e)=>{this._prepareTabsItemTemplate(e,r);var t=(0,b.Z)("<div>").addClass("dx-tab-text");r.wrapInner(t)},["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions:function(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction:function(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction:function(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction:function(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderLayout:function(){if(!this._tabs){var r=this.$element();this._$tabContainer=(0,b.Z)("<div>").addClass("dx-tabpanel-tabs").appendTo(r);var e=(0,b.Z)("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(e,uV,this._tabConfig()),this._$container=(0,b.Z)("<div>").addClass("dx-tabpanel-container").appendTo(r),this._$container.append(this._$wrapper)}},_refreshActiveDescendant:function(){if(this._tabs){var r=this._tabs,e=r.itemElements(),t=(0,b.Z)(e[r.option("selectedIndex")]),i=this.getFocusedItemId();this.setAria("controls",void 0,(0,b.Z)(e)),this.setAria("controls",i,t)}},_getTabsIndicatorPosition(){var{_tabsIndicatorPosition:r,tabsPosition:e}=this.option();return r??wV[e]},_tabConfig(){var r=this._getTabsIndicatorPosition();return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:function(e){this.option("selectedIndex",e.component.option("selectedIndex")),this._refreshActiveDescendant()}.bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:function(e){if("focusedElement"===e.name)if(e.value){var t=(0,b.Z)(e.value),i=this._itemElements().eq(t.index());this.option("focusedElement",(0,lt.u)(i))}else this.option("focusedElement",e.value)}.bind(this),onFocusIn:function(e){this._focusInHandler(e.event)}.bind(this),onFocusOut:function(e){this._isFocusOutHandlerExecuting||this._focusOutHandler(e.event)}.bind(this),orientation:this._getTabsOrientation(),iconPosition:this.option("iconPosition"),stylingMode:this.option("stylingMode"),_itemAttributes:{class:"dx-tabpanel-tab"},_indicatorPosition:r}},_renderFocusTarget:function(){this._focusTarget().attr("tabIndex",-1)},_getTabsOrientation(){var{tabsPosition:r}=this.option();return[hs.right,hs.left].includes(r)?"vertical":"horizontal"},_getTabPanelTabsPositionClass(){switch(this.option("tabsPosition")){case hs.right:return oo.right;case hs.bottom:return oo.bottom;case hs.left:return oo.left;default:return oo.top}},_toggleTabPanelTabsPositionClass(){for(var r in oo)this.$element().removeClass(oo[r]);var e=this._getTabPanelTabsPositionClass();this.$element().addClass(e)},_updateTabsOrientation(){var r=this._getTabsOrientation();this._setTabsOption("orientation",r)},_toggleWrapperFocusedClass(r){this._toggleFocusClass(r,this._$wrapper)},_toggleDisabledFocusedClass(r){this._focusTarget().toggleClass("dx-disabled-focused-tab",r)},_updateFocusState:function(r,e){this.callBase(r,e);var t=r.target===this._tabs._focusTarget().get(0),i=r.target===this._focusTarget().get(0);if(t&&this._toggleFocusClass(e,this._focusTarget()),t||i){var a=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(e&&!a),this._toggleDisabledFocusedClass(e&&a)}i&&this._toggleFocusClass(e,this._tabs.option("focusedElement"))},_focusOutHandler:function(r){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(r),this._isFocusOutHandlerExecuting=!1},_setTabsOption(r,e){this._tabs&&this._tabs.option(r,e)},_visibilityChanged:function(r){r&&this._tabs._dimensionChanged()},registerKeyHandler:function(r,e){this.callBase(r,e),this._tabs&&this._tabs.registerKeyHandler(r,e)},repaint:function(){this.callBase(),this._tabs.repaint()},_updateTabsIndicatorPosition(){var r=this._getTabsIndicatorPosition();this._setTabsOption("_indicatorPosition",r)},_optionChanged:function(r){var{name:e,value:t,fullName:i}=r;switch(e){case"dataSource":default:this.callBase(r);break;case"items":this._setTabsOption(e,this.option(e)),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(r);break;case"width":this.callBase(r),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(i,t),this.callBase(r),!0===this.option("focusStateEnabled")){var a=this.option("selectedIndex"),n=this._itemElements().eq(a);this.option("focusedElement",(0,lt.u)(n))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(i,t),this.callBase(r);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(i,t);break;case"focusedElement":var s=t&&(0,b.Z)(t).index(),o=t&&this._tabs._itemElements().eq(s);if(this._setTabsOption("focusedElement",(0,lt.u)(o)),t){var l=this._isDisabled(t);this._toggleWrapperFocusedClass(!l),this._toggleDisabledFocusedClass(l)}this.callBase(r);break;case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",t);break;case"badgeExpr":this._invalidate();break;case"tabsPosition":this._toggleTabPanelTabsPositionClass(),this._updateTabsIndicatorPosition(),this._updateTabsOrientation();break;case"iconPosition":this._setTabsOption("iconPosition",t);break;case"stylingMode":this._setTabsOption("stylingMode",t);break;case"_tabsIndicatorPosition":this._setTabsOption("_indicatorPosition",t)}}});Jp.ItemClass=class hV extends eu.Z{_renderWatchers(){return this._startWatcher("badge",le.ZT),super._renderWatchers()}},(0,Rt.Z)("dxTabPanel",Jp);const bV=Jp;class cs{constructor(e){this._options=e,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){Ba.Z.abstract()}}var Qp=(r,e)=>"".concat(e?"tabs":"items","[").concat(r,"]"),$w=(r,e)=>(0,C.$K)(r)&&(0,C.$K)(e)?"".concat(r,".").concat(e):r||e,ef=r=>r?r.replace(/\s/g,""):void 0,Bl=(r,e)=>"".concat(r,".").concat(e),Gw=r=>{var e=r.split(".");return e[e.length-1].replace(/\[\d+]/,"")},Uw=r=>r.indexOf("tabs")>-1,jw=(r,e,t)=>{var i=r.indexOf(e);if(i>-1)return Qp(i,t);for(var a=0;a<r.length;a++){var n=r[a],s=n.tabs||n.items;if(s){var o=jw(s,e,n.tabs);if(o)return $w(Qp(a,t),o)}}};class EV extends cs{tryExecute(){var{value:e}=this._options,t=this.findInstance();return!!t&&(t.option(e),!0)}}class qw extends cs{tryExecute(){var e=this.findInstance();if(e){var{optionName:t,item:i,value:a}=this._options,n=this._itemsRunTimeInfo.findItemIndexByItem(i);if(n>=0)return e.option(Bl("items[".concat(n,"]"),t),a),!0}return!1}}class IV extends cs{tryExecute(){return!1}}class AV extends cs{tryExecute(){var e=this.findPreparedItem();return!(null==e||!e._prepareGroupItemTemplate||!e._renderGroupContentTemplate||(e._prepareGroupItemTemplate(this._options.item.template),e._renderGroupContentTemplate(),0))}}class TV extends cs{tryExecute(){var e=this.findInstance();if(e){var{value:t}=this._options;return e.option("dataSource",t),!0}return!1}}class DV extends cs{tryExecute(){var{item:e}=this._options,t=this.findInstance(),i=t&&(0,Ms.aT)(t.$element()[0],"dxValidator");if(i&&e){var a=o=>"required"===o.type,n=(i.option("validationRules")||[]).some(a),s=(e.validationRules||[]).some(a);if(!n&&!s||n&&s)return i.option("validationRules",e.validationRules),!0}return!1}}class OV extends cs{tryExecute(){var e=this.findItemContainer(),{previousValue:t,value:i}=this._options;return!!e&&(e.removeClass(t).addClass(i),!0)}}var tf=ve(4826),Yw="dx-responsivebox",Xw=Yw+"-screen-",Jw="dxBoxItemData",Qw=pl.Z.inherit({_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init:function(){this.option("screenByWidth")||this._options.silent("screenByWidth",Je.$n),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction:function(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:function(){return"dx-box-item"},_itemDataKey:function(){return Jw},_initMarkup:function(){this.callBase(),this.$element().addClass(Yw)},_renderItems:function(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged:function(r){var e=this._findItemElementByItem(r);e.length&&(this._refreshItem(e,r),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize:function(){var r=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(Xw+r),this.option("currentScreenFactor",r)},_removeScreenSizeClass:function(){var r=this.option("currentScreenFactor");r&&this.$element().removeClass(Xw+r)},_prepareGrid:function(){var r=this._grid=[];this._prepareRowsAndCols(),(0,Y.S6)(this._rows,function(){var e=[];r.push(e),(0,Y.S6)(this._cols,function(){e.push(this._createEmptyCell())}.bind(this))}.bind(this))},getSingleColumnRows:function(){var r=this.option("rows"),e=this._screenItems.length;if(r.length){for(var t=this._filterByScreen(r),i=[],a=0;a<e;a++){var n=this._defaultSizeConfig();a<t.length&&(0,C.$K)(t[a].shrink)&&(n.shrink=t[a].shrink),i.push(n)}return i}return this._defaultSizeConfig(e)},_prepareRowsAndCols:function(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen:function(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems:function(){this._screenItems.sort(function(r,e){return r.location.row-e.location.row||r.location.col-e.location.col}),(0,Y.S6)(this._screenItems,function(r,e){(0,B.l)(e.location,{row:r,col:0,rowspan:1,colspan:1})})},_sizesByScreen:function(r){return(0,Y.UI)(this._filterByScreen(r),function(e){return(0,B.l)(this._defaultSizeConfig(),e)}.bind(this))},_createDefaultSizeConfig:function(){return{ratio:1,baseSize:0,minSize:0,maxSize:0}},_defaultSizeConfig:function(r){var e=this._createDefaultSizeConfig();if(!arguments.length)return e;for(var t=[],i=0;i<r;i++)t.push(e);return t},_filterByScreen:function(r){var e=this._screenRegExp();return(0,le.h3)(r,function(t){return!t.screen||e.test(t.screen)})},_screenRegExp:function(){var r=this._getCurrentScreen();return new RegExp("(^|\\s)"+r+"($|\\s)","i")},_getCurrentScreen:function(){var r=this._screenWidth();return this.option("screenByWidth")(r)},_screenWidth:function(){return(0,Je.Ym)()?(0,we.dz)((0,Je.Jj)()):1920},_createEmptyCell:function(){return{item:{},location:{colspan:1,rowspan:1}}},_spreadItems:function(){(0,Y.S6)(this._screenItems,function(r,e){var t=e.location||{},n=this._grid[t.row];this._occupyCells(n&&n[t.col],e)}.bind(this))},_itemsByScreen:function(){return this.option("items").reduce((r,e)=>{var t=e.location||{};return t=(0,C.PO)(t)?[t]:t,this._filterByScreen(t).forEach(i=>{r.push({item:e,location:(0,B.l)({rowspan:1,colspan:1},i)})}),r},[])},_occupyCells:function(r,e){!r||this._isItemCellOccupied(r,e)||((0,B.l)(r,e),this._markSpanningCell(r))},_isItemCellOccupied:function(r,e){if(!(0,C.Qr)(r.item))return!0;var t=!1;return this._loopOverSpanning(e.location,function(i){t=t||!(0,C.Qr)(i.item)}),t},_loopOverSpanning:function(r,e){var t=r.row+r.rowspan-1,i=r.col+r.colspan-1,a=Math.min(t,this._rows.length-1),n=Math.min(i,this._cols.length-1);r.rowspan-=t-a,r.colspan-=i-n;for(var s=r.row;s<=a;s++)for(var o=r.col;o<=n;o++)(s!==r.row||o!==r.col)&&e(this._grid[s][o])},_markSpanningCell:function(r){this._loopOverSpanning(r.location,function(e){(0,B.l)(e,{item:r.item,spanningCell:r})})},_linkNodeToItem:function(){(0,Y.S6)(this._itemElements(),function(r,e){var t=(0,b.Z)(e),i=t.data(Jw);i.box||(i.node=t.children())})},_layoutItems:function(){var r=this._grid.length,e=r&&this._grid[0].length;if(r||e){var t=this._layoutBlock({direction:"col",row:{start:0,end:r-1},col:{start:0,end:e-1}}),i=this._prepareBoxConfig(t.box||{direction:"row",items:[(0,B.l)(t,{ratio:1})]});(0,B.l)(i,this._rootBoxConfig(i.items)),this._$root=(0,b.Z)("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,Su,i)}},_rootBoxConfig:function(r){var e=(0,Y.S6)(r,function(t,i){this._needApplyAutoBaseSize(i)&&(0,B.l)(i,{baseSize:"auto"})}.bind(this));return{width:"100%",height:"100%",items:e,itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:function(r){return!(r.baseSize||r.minSize&&"auto"!==r.minSize||r.maxSize&&"auto"!==r.maxSize)},_prepareBoxConfig:function(r){return(0,B.l)(r||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock:function(r){return this._isSingleItem(r)?this._itemByCell(r.row.start,r.col.start):this._layoutDirection(r)},_isSingleItem:function(r){var e=this._grid[r.row.start][r.col.start].location;return r.row.end-r.row.start==e.rowspan-1&&r.col.end-r.col.start==e.colspan-1},_itemByCell:function(r,e){var t=this._grid[r][e];return t.spanningCell?null:t.item},_layoutDirection:function(r){for(var a,e=[],t=r.direction,i=this._crossDirection(t);a=this._nextBlock(r);){if(this._isBlockIndivisible(r.prevBlockOptions,a))throw At.Z.Error("E1025");var n=this._layoutBlock({direction:i,row:a.row,col:a.col,prevBlockOptions:r});n&&((0,B.l)(n,this._blockSize(a,i)),e.push(n)),r[i].start=a[i].end+1}return{box:this._prepareBoxConfig({direction:t,items:e})}},_isBlockIndivisible:function(r,e){return r&&r.col.start===e.col.start&&r.col.end===e.col.end&&r.row.start===e.row.start&&r.row.end===e.row.end},_crossDirection:function(r){return"col"===r?"row":"col"},_nextBlock:function(r){var e=r.direction,t=this._crossDirection(e),i=r[e].start,a=r[e].end,n=r[t].start;if(n>r[t].end)return null;for(var s=1,o=n;o<n+s;o++){for(var l=1,d=i;d<=a;d++){var u=this._cellByDirection(e,d,o);l=Math.max(l,u.location[t+"span"])}var c=o+l,f=n+s;c>f&&(s+=c-f)}var p={};return p[e]={start:i,end:a},p[t]={start:n,end:n+s-1},p},_cellByDirection:function(r,e,t){return"col"===r?this._grid[t][e]:this._grid[e][t]},_blockSize:function(r,e){for(var t="row"===e?"auto":0,i="row"===e?this._rows:this._cols,a=(0,B.l)(this._createDefaultSizeConfig(),{ratio:0}),n=r[e].start;n<=r[e].end;n++){var s=i[n];a.ratio+=s.ratio,a.baseSize+=s.baseSize,a.minSize+=s.minSize,a.maxSize+=s.maxSize,(0,C.$K)(s.shrink)&&(a.shrink=s.shrink)}return a.minSize=a.minSize?a.minSize:t,a.maxSize=a.maxSize?a.maxSize:"auto",this._isSingleColumnScreen()&&(a.baseSize="auto"),a},_update:function(r){var e=this._$root;this._renderItems(),e&&(r?e.remove():(e.detach(),this._saveAssistantRoot(e))),this._layoutChangedAction()},_saveAssistantRoot:function(r){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(r)},_dispose:function(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots:function(){this._assistantRoots&&(0,Y.S6)(this._assistantRoots,function(r,e){(0,b.Z)(e).remove()})},_clearItemNodeTemplates:function(){(0,Y.S6)(this.option("items"),function(){delete this.node})},_attachClickEvent:le.ZT,_optionChanged:function(r){switch(r.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(r),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(r);break;case"currentScreenFactor":break;default:this.callBase(r)}},_dimensionChanged:function(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint:function(){this._update()}});(0,Rt.Z)("dxResponsiveBox",Qw);const VV=Qw;var rf="dx-form-group",eb="dx-col-",tb="dx-field-item",ib="dx-layout-manager-one-col",rb="dx-field-item-label-content",ab="dx-field-item-label",af="dx-field-item-content",nb="dx-root-simple-item",sb="dx-field-item-tab",ob="dx-group-colcount-",lb="group-col-count",nf="simple",GV=Ba.Z.inherit({ctor(r,e){this.editor=r,this.validator=e,this.validationRequestsCallbacks=[];var t=i=>{this.validationRequestsCallbacks.forEach(a=>a(i))};r.validationRequest.add(t),r.on("disposing",function(){r.validationRequest.remove(t)})},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(r){this.editor.option({validationErrors:r.brokenRules,validationStatus:r.status})},reset(){this.editor.clear()},focus(){this.editor.focus()}});const UV=GV;var sf="pending",ub=mu.Z.inherit({_initOptions:function(r){this.callBase.apply(this,arguments),this.option(Yt.Z.initValidationOptions(r))},_getDefaultOptions(){return(0,B.l)(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=(0,sr.Z)(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){var r=this._findGroup();this._groupWasInit||this.on("disposing",function(e){Yt.Z.removeRegisteredValidator(e.component._validationGroup,e.component)}),(!this._groupWasInit||this._validationGroup!==r)&&(Yt.Z.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=r,Yt.Z.registerValidatorInGroup(r,this))},_setOptionsByReference(){this.callBase(),(0,B.l)(this._optionsByReference,{validationGroup:!0})},_getEditor(){var r=this.$element()[0];return(0,Ms.aT)(r,"dx-validation-target")},_initAdapter(){var r=this._getEditor(),e=this.option("adapter");if(!e){if(r)return(e=new UV(r,this)).validationRequestsCallbacks.push(i=>{this._validationInfo.skipValidation||this.validate(i)}),void this.option("adapter",e);throw At.Z.Error("E0120")}var t=e.validationRequestsCallbacks;t&&t.push(i=>{this.validate(i)})},_toggleRTLDirection(r){var e,t,i,a=null!==(e=null===(t=this.option("adapter"))||void 0===t||null===(i=t.editor)||void 0===i?void 0:i.option("rtlEnabled"))&&void 0!==e?e:r;this.callBase(a)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){var r=this._getEditor();if(r){var t=(this.option("validationRules")||[]).some(i=>{var{type:a}=i;return"required"===a})||null;r.isInitialized()&&r.setAria("required",t),r.option("_onMarkupRendered",()=>{r.setAria("required",t)})}},_visibilityChanged(r){r&&this._initGroupRegistration()},_optionChanged(r){switch(r.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),this._toggleAccessibilityAttributes(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(Yt.Z.synchronizeValidationOptions(r,this.option()));break;default:this.callBase(r)}},_getValidationRules(){return this._validationRules||(this._validationRules=(0,Y.UI)(this.option("validationRules"),(r,e)=>(0,B.l)({},r,{validator:this,index:e}))),this._validationRules},_findGroup(){var r=this.$element();return this.option("validationGroup")||Yt.Z.findGroup(r,this._modelByElement(r))},_resetValidationRules(){delete this._validationRules},validate(r){var l,e=this.option("adapter"),t=this.option("name"),i=e.bypass&&e.bypass(),a=r&&void 0!==r.value?r.value:e.getValue(),n=e.getCurrentValidationError&&e.getCurrentValidationError(),s=this._getValidationRules(),o=this._validationInfo&&this._validationInfo.result;return o&&o.status===sf&&o.value===a?(0,B.l)({},o):(i?l={isValid:!0,status:"valid"}:n&&n.editorSpecific?(n.validator=this,l={isValid:!1,status:"invalid",brokenRule:n,brokenRules:[n]}):l=Yt.Z.validate(a,s,t),l.id=(new Pi.Z).toString(),this._applyValidationResult(l,e),l.complete&&l.complete.then(d=>{d.id===this._validationInfo.result.id&&this._applyValidationResult(d,e)}),(0,B.l)({},this._validationInfo.result))},reset(){var r=this.option("adapter");this._validationInfo.skipValidation=!0,r.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult({id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null},r)},_updateValidationResult(r){if(this._validationInfo.result&&this._validationInfo.result.id===r.id)for(var t in r)"id"!==t&&"complete"!==t&&(this._validationInfo.result[t]=r[t]);else this._validationInfo.result=(0,B.l)({},r,{complete:this._validationInfo.deferred&&this._validationInfo.result.complete})},_applyValidationResult(r,e){var t=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(r.validator=this,this._updateValidationResult(r),e.applyValidationResults&&e.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),this._validationInfo.result.status===sf)return this._validationInfo.deferred||(this._validationInfo.deferred=new X.BH,this._validationInfo.result.complete=this._validationInfo.deferred.promise()),void this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);this._validationInfo.result.status!==sf&&(t(r),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(r),this._validationInfo.deferred=null))},focus(){var r=this.option("adapter");r&&r.focus&&r.focus()},_useTemplates:function(){return!1}});(0,Rt.Z)("dxValidator",ub);const of=ub;var YV=["dxTagBox","dxRangeSlider","dxDateRangeBox"],XV=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function hb(r,e){var{showRequiredMark:t,requiredMark:i,showOptionalMark:a,optionalMark:n}=r;return{showRequiredMark:t&&e,requiredMark:i,showOptionalMark:a&&!e,optionalMark:n}}var rN="dx-field-item-required-mark",cb="dx-field-item-label-location-",aN="dx-field-item-optional-mark",nN="dx-field-item-label-text";function dN(r){for(var e=0,t=r.children.length,i=0;i<t;i++)e+=r.children[i].offsetWidth;return e}var pb="dx-field-item-content-wrapper",CN="dx-template-wrapper",lf="dx-validation-target",wN="dx-invalid";function bN(r){var{$parent:e,rootElementCssClassList:t,formOrLayoutManager:i,createComponentCallback:a,labelOptions:n,labelNeedBaselineAlign:s,labelLocation:o,needRenderLabel:l,formLabelLocation:d,item:u,editorOptions:c,isSimpleItem:f,isRequired:p,template:_,helpID:w,labelID:S,name:x,helpText:E,requiredMessageTemplate:V,validationGroup:N}=r,j=(0,b.Z)("<div>").addClass(t.join(" ")).appendTo(e);j.addClass(p?"dx-field-item-required":"dx-field-item-optional"),f&&j.addClass("dx-flex-layout"),f&&s&&j.addClass("dx-field-item-label-align");var Q=(0,b.Z)("<div>");Q.data("dx-form-item",u),Q.addClass(af).addClass("dx-field-item-content-location-"+{right:"left",left:"right",top:"bottom"}[d]);var K,q=null;if(l&&(n.labelTemplate&&(n.labelTemplateData=gb(u,c,i)),q=function sN(r){var{text:e,id:t,location:i,alignment:a,labelID:n=null,markOptions:s={},labelTemplate:o,labelTemplateData:l,onLabelTemplateRendered:d}=r;if((!(0,C.$K)(e)||e.length<=0)&&!(0,C.$K)(o))return null;var u=(0,b.Z)("<label>").addClass(ab+" "+cb+i).attr("for",t).attr("id",n).css("textAlign",a),c=(0,b.Z)("<span>").addClass(rb),f=(0,b.Z)("<span>").addClass(nN).text(e);return o&&(f=(0,b.Z)("<div>").addClass("dx-field-item-custom-label-content"),l.text=e,o.render({container:(0,lt.u)(f),model:l,onRendered(){d?.()}})),u.append(c.append(f,function oN(r){var e=function QV(r){var{showRequiredMark:e,requiredMark:t,showOptionalMark:i,optionalMark:a}=r;return e||i?String.fromCharCode(160)+(e?t:a):""}(r);return""===e?null:(0,b.Z)("<span>").addClass(r.showRequiredMark?rN:aN).text(e)}(s)))}(n)),q){var{editorType:k}=u;j.append(q),("top"===o||"left"===o)&&j.append(Q),"right"===o&&j.prepend(Q),j.addClass("top"===o?"dx-label-v-align":"dx-label-h-align"),("dxCheckBox"===k||"dxSwitch"===k)&&z.Z.on(q,Ft.u,function(){z.Z.trigger(Q.children(),Ft.u)});var se=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(k),he=n.alignment;!_&&se&&"top"===o&&("left"===he||!he)&&Q.addClass("dx-toggle-controls-paddings")}else j.append(Q);if(_)_.render({container:(0,lt.u)(Q),model:gb(u,c,i),onRendered(){var ee=function yN(r){var e,t;return r?.data(lf)||(null==r||null===(e=r.parent)||void 0===e||null===(t=e.call(r))||void 0===t?void 0:t.data(lf))}(fb(Q));vb(ee)}});else{var ge=(0,b.Z)("<div>").appendTo(Q);try{(K=a(ge,u.editorType,c)).setAria("describedby",w),S&&K.setAria("labelledby",S),K.setAria("required",p)}catch($){At.Z.log("E1035",$.message)}}var ue=fb(Q),xe=ue&&ue.data(lf);if(xe){var Me,ce=u.label&&u.label.text,Te=ce?null:x,Ie=ce?u.label.text:Te&&(0,Ma.GK)(Te);if(f)if(u.validationRules)Me=u.validationRules;else{var D=(0,ca.WU)(V,Ie||"");Me=u.isRequired?[{type:"required",message:D}]:null}Array.isArray(Me)&&Me.length&&a(ue,of,{validationRules:Me,validationGroup:N,dataGetter:function(){return{formItem:u}}}),vb(xe)}return E&&f&&Q.parent().append((0,b.Z)("<div>").addClass(pb).append(Q).append((0,b.Z)("<div>").addClass("dx-field-item-help-text").attr("id",w).text(E))),{$fieldEditorContainer:Q,$rootElement:j,widgetInstance:K}}function fb(r){var e=r.children().first();return e.hasClass(CN)?e.children().first():e}function vb(r){if(r&&(0,Lt.yj)()){var e=".".concat(pb),t=i=>{var{element:a,component:n}=i,{isValid:s,validationMessageMode:o}=n.option();(0,b.Z)(a).parents(e).toggleClass(wN,!1===s&&(n._isFocused()||"always"===o))};r.on("optionChanged",i=>{"isValid"===i.name&&t(i)}),r.on("focusIn",t).on("focusOut",t).on("enterKey",t)}}function gb(r,e,t){return{dataField:r.dataField,editorType:r.editorType,editorOptions:e,component:t,name:r.name}}function _b(r){var{$parent:e,rootElementCssClassList:t}=r;return(0,b.Z)("<div>").addClass("dx-field-empty-item").html("&nbsp;").addClass(t.join(" ")).appendTo(e)}var PN=Dr.default.inherit({_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:ae.Z.format("dxForm-optionalMark"),requiredMessage:ae.Z.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference:function(){this.callBase(),(0,B.l)(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init:function(){var r=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new vw,this._updateReferencedOptions(r),this._initDataAndItems(r)},_dispose:function(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems:function(r){this._syncDataWithItems(),this._updateItems(r)},_syncDataWithItems:function(){var r=this.option("layoutData"),e=this.option("items");(0,C.$K)(e)&&e.forEach(t=>{var i;t.dataField&&void 0===this._getDataByField(t.dataField)&&(t.editorOptions&&(i=t.editorOptions.value),((0,C.$K)(i)||t.dataField in r)&&this._updateFieldValue(t.dataField,i))})},_getDataByField:function(r){return r?this.option("layoutData."+r):null},_isCheckboxUndefinedStateEnabled:function(r){var{allowIndeterminateState:e,editorType:t,dataField:i}=r;if(!0===e&&"dxCheckBox"===t){var a=["layoutData",...i.split(".")],n=a.pop(),s=this.option(a.join("."));return s&&n in s}return!1},_updateFieldValue:function(r,e){var t=this.option("layoutData"),i=e;!zr.default.isWrapped(t[r])&&(0,C.$K)(r)?this.option("layoutData."+r,i):zr.default.isWritableWrapped(t[r])&&(i=(0,C.mf)(i)?i():i,t[r](i)),this._triggerOnFieldDataChanged({dataField:r,value:i})},_triggerOnFieldDataChanged:function(r){this._createActionByOption("onFieldDataChanged")(r)},_updateItems:function(r){var e=this,t=this.option("items"),i=(0,C.$K)(t),a=e.option("customizeItem"),n=i?t:this._generateItemsByData(r);if((0,C.$K)(n)){var s=[];(0,Y.S6)(n,function(o,l){e._isAcceptableItem(l)&&(l=e._processItem(l),a&&a(l),(0,C.Kn)(l)&&!1!==zr.default.unwrap(l.visible)&&s.push(l))}),(!e._itemWatchers.length||!i)&&e._updateItemWatchers(n),this._setItems(s),this._sortItems()}},_cleanItemWatchers:function(){this._itemWatchers.forEach(function(r){r()}),this._itemWatchers=[]},_updateItemWatchers:function(r){var e=this,t=e._getWatch();r.forEach(function(i){(0,C.Kn)(i)&&(0,C.$K)(i.visible)&&(0,C.mf)(t)&&e._itemWatchers.push(t(function(){return zr.default.unwrap(i.visible)},function(){e._updateItems(e.option("layoutData")),e.repaint()},{skipImmediate:!0}))})},_generateItemsByData:function(r){var e=[];return(0,C.$K)(r)&&(0,Y.S6)(r,function(t){e.push({dataField:t})}),e},_isAcceptableItem:function(r){var t=this._getDataByField(r.dataField||r);return!((0,C.mf)(t)&&!zr.default.isWrapped(t))},_processItem:function(r){if("string"==typeof r&&(r={dataField:r}),"object"==typeof r&&!r.itemType&&(r.itemType=nf),!(0,C.$K)(r.editorType)&&(0,C.$K)(r.dataField)){var e=this._getDataByField(r.dataField);r.editorType=(0,C.$K)(e)?this._getEditorTypeByDataType((0,C.dt)(e)):"dxTextBox"}var t;return"dxCheckBox"===r.editorType&&(r.allowIndeterminateState=null===(t=r.allowIndeterminateState)||void 0===t||t),r},_getEditorTypeByDataType:function(r){switch(r){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems:function(){(0,ul.Sq)(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes:function(){this._items.sort(function(r,e){var t=r.visibleIndex,i=e.visibleIndex;return t>i?1:t<i?-1:0})},_initMarkup:function(){this._itemsRunTimeInfo.clear(),this.$element().addClass("dx-layout-manager"),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox:function(){var r=[];if(this._items&&this._items.length){var e=this._getColCount(),t=(0,b.Z)("<div>").appendTo(this.$element());this._prepareItemsWithMerging(e);var i=this._generateLayoutItems();this._responsiveBox=this._createComponent(t,VV,this._getResponsiveBoxConfig(i,e,r)),(0,Je.Ym)()||this._renderTemplates(r)}},_itemStateChangedHandler:function(r){this._refresh()},_renderTemplates:function(r){var e=this,t=0;r.forEach(i=>{var a,{item:n}=i;null!=n&&null!==(a=n.label)&&void 0!==a&&a.template&&t++}),(0,Y.S6)(r,function(i,a){switch(a.itemType){case"empty":_b(a);break;case"button":e._renderButtonItem(a);break;default:e._renderFieldItem(a,t)}})},_getResponsiveBoxConfig:function(r,e,t){var i=this,a=i.option("colCountByScreen"),n=a&&a.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged:function(){var s=i.option("onLayoutChanged"),o=i.isSingleColumnMode();s&&(i.$element().toggleClass(ib,o),s(o))},onContentReady:function(s){(0,Je.Ym)()&&i._renderTemplates(t),i.option("onLayoutChanged")&&i.$element().toggleClass(ib,i.isSingleColumnMode(s.component))},itemTemplate:function(s,o,l){if(s.location){var d=(0,b.Z)(l),c=i._items[s.location.col+s.location.row*e];if(c){var f=[c.cssClass];d.toggleClass("dx-single-column-item-content",i.isSingleColumnMode(this)),0===s.location.row&&f.push("dx-first-row"),0===s.location.col&&f.push("dx-first-col"),c.itemType===nf&&i.option("isRoot")&&d.addClass(nb);var p=s.location.col===e-1||s.location.col+s.location.colspan===e,_=i._getRowsCount(),w=s.location.row===_-1;p&&f.push("dx-last-col"),w&&f.push("dx-last-row"),"empty"!==c.itemType&&(f.push(tb),f.push(i.option("cssItemClass")),(0,C.$K)(c.col)&&f.push("dx-col-"+c.col)),t.push({itemType:c.itemType,item:c,$parent:d,rootElementCssClassList:f})}}},cols:i._generateRatio(e),rows:i._generateRatio(i._getRowsCount(),!0),dataSource:r,screenByWidth:i.option("screenByWidth"),singleColumnScreen:!n&&"xs"}},_getColCount:function(){var r=this.option("colCount"),e=this.option("colCountByScreen");if(e){var t=this.option("form").getTargetScreenFactor();t||(t=(0,Je.Ym)()?(0,Je.Wf)(this.option("screenByWidth")):"lg"),r=e[t]||r}if("auto"===r){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=r=this._getMaxColCount()}return r<1?1:r},_getMaxColCount:function(){if(!(0,Je.Ym)())return 1;var r=this.option("minColWidth"),e=(0,we.dz)(this.$element()),t=this._items.length,i=Math.floor(e/r)||1;return t<i?t:i},isCachedColCountObsolete:function(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging:function(r){var t,i,n,s,e=this._items.slice(0),a=[];for(s=0;s<e.length;s++)if(a.push(t=e[s]),(this.option("alignItemLabels")||t.alignItemLabels||t.colSpan)&&(t.col=this._getColByIndex(a.length-1,r)),t.colSpan>1&&t.col+t.colSpan<=r){for(i=[],n=0;n<t.colSpan-1;n++)i.push({merged:!0});a=a.concat(i)}else delete t.colSpan;this._setItems(a)},_getColByIndex:function(r,e){return r%e},_setItems:function(r){this._items=r,this._cashedColCount=null},_generateLayoutItems:function(){var i,a,r=this._items,e=this._getColCount(),t=[];for(a=0;a<r.length;a++)if(!(i=r[a]).merged){var n={location:{row:parseInt(a/e),col:this._getColByIndex(a,e)}};(0,C.$K)(i.disabled)&&(n.disabled=i.disabled),(0,C.$K)(i.visible)&&(n.visible=i.visible),(0,C.$K)(i.colSpan)&&(n.location.colspan=i.colSpan),(0,C.$K)(i.rowSpan)&&(n.location.rowspan=i.rowSpan),t.push(n)}return t},_renderEmptyItem:function(r){_b({$container:r})},_renderButtonItem:function(r){var{item:e,$parent:t,rootElementCssClassList:i}=r,{$rootElement:a,buttonInstance:n}=function SN(r){var{item:e,$parent:t,rootElementCssClassList:i,validationGroup:a,createComponentCallback:n}=r,s=(0,b.Z)("<div>").appendTo(t).addClass(i.join(" ")).addClass("dx-field-button-item").css("textAlign",function EN(r){return(0,C.$K)(r)?r:"right"}(e.horizontalAlignment));return t.css("justifyContent",function IN(r){switch(r){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}(e.verticalAlignment)),{$rootElement:s,buttonInstance:n((0,b.Z)("<div>").appendTo(s),"dxButton",(0,B.l)({validationGroup:a},e.buttonOptions))}}({item:e,$parent:t,rootElementCssClassList:i,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:e,widgetInstance:n,guid:e.guid,$itemContainer:a})},_renderFieldItem:function(r,e){var t,i,{item:a,$parent:n,rootElementCssClassList:s}=r,o=this._getDataByField(a.dataField),l=!1;if(void 0===o){var{allowIndeterminateState:d,editorType:u,dataField:c}=a;l=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:d,editorType:u,dataField:c})}var f=a.dataField||a.name,p=this._getFormOrThis(),{$fieldEditorContainer:_,widgetInstance:w,$rootElement:S}=bN(function JV(r){var{$parent:e,rootElementCssClassList:t,formOrLayoutManager:i,createComponentCallback:a,item:n,template:s,labelTemplate:o,name:l,formLabelLocation:d,requiredMessageTemplate:u,validationGroup:c,editorValue:f,canAssignUndefinedValueToEditor:p,editorValidationBoundary:_,editorStylingMode:w,showColonAfterLabel:S,managerLabelLocation:x,itemId:E,managerMarkOptions:V,labelMode:N,onLabelTemplateRendered:j}=r,Q=(0,C.$K)(n.isRequired)?n.isRequired:!!function tN(r){var e;return r&&r.length&&(0,Y.S6)(r,function(t,i){if("required"===i.type)return e=!0,!1}),e}(n.validationRules),q=n.itemType===nf,k=n.helpText?"dx-"+new Pi.Z:null,se=function iN(r){var{item:e,id:t,isRequired:i,managerMarkOptions:a,showColonAfterLabel:n,labelLocation:s,labelTemplate:o,formLabelMode:l,onLabelTemplateRendered:d}=r,u=XV.includes(e.editorType),c=(0,B.l)({showColon:n,location:s,id:t,visible:"outside"===l||u&&"hidden"!==l,isRequired:i},e?e.label:{},{markOptions:hb(a,i),labelTemplate:o,onLabelTemplateRendered:d});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor","dxDateRangeBox"].includes(e.editorType)&&(c.labelID="dx-label-".concat(new Pi.Z)),!c.text&&e.dataField&&(c.text=(0,Ma.GK)(e.dataField)),c.text&&(c.textWithoutColon=c.text,c.text+=c.showColon?":":""),c}({item:n,id:E,isRequired:Q,managerMarkOptions:V,showColonAfterLabel:S,labelLocation:x,formLabelMode:N,labelTemplate:o,onLabelTemplateRendered:j}),he=se.visible&&(se.text||se.labelTemplate&&q),{location:F,labelID:P}=se,U="top"!==F&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(n.editorType),K=function eN(r){var{editorType:e,defaultEditorName:t,editorValue:i,canAssignUndefinedValueToEditor:a,externalEditorOptions:n,editorInputId:s,editorValidationBoundary:o,editorStylingMode:l,formLabelMode:d,labelText:u,labelMark:c}=r,f={};(void 0!==i||a)&&(f.value=i),-1!==YV.indexOf(e)&&(f.value=f.value||[]);var p=n?.labelMode;(0,C.$K)(p)||(p="outside"===d?"hidden":d);var w=(0,B.l)(!0,f,n,{inputAttr:{id:s},validationBoundary:o,stylingMode:n?.stylingMode||l,label:u,labelMode:p,labelMark:c});return n&&(w.dataSource&&(w.dataSource=n.dataSource),w.items&&(w.items=n.items)),t&&!w.name&&(w.name=t),w}({editorType:n.editorType,editorValue:f,defaultEditorName:n.dataField,canAssignUndefinedValueToEditor:p,externalEditorOptions:n.editorOptions,editorInputId:E,editorValidationBoundary:_,editorStylingMode:w,formLabelMode:N,labelText:se.textWithoutColon,labelMark:se.markOptions.showRequiredMark?String.fromCharCode(160)+se.markOptions.requiredMark:""});return{$parent:e,rootElementCssClassList:t,formOrLayoutManager:i,createComponentCallback:a,labelOptions:se,labelNeedBaselineAlign:U,labelLocation:F,needRenderLabel:he,item:n,isSimpleItem:q,isRequired:Q,template:s,helpID:k,labelID:P,name:l,helpText:!se.markOptions.showOptionalMark||se.visible||"hidden"===K.labelMode||(0,C.$K)(n.helpText)?n.helpText:se.markOptions.optionalMark,formLabelLocation:d,requiredMessageTemplate:u,validationGroup:c,editorOptions:K}}({$parent:n,rootElementCssClassList:s,item:a,name:f,editorValue:o,canAssignUndefinedValueToEditor:l,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:a.template?this._getTemplate(a.template):null,labelTemplate:null!==(t=a.label)&&void 0!==t&&t.template?this._getTemplate(a.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(f),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(p,e)&&p._alignLabels(this,this.isSingleColumnMode(p))}}));null===(i=this.option("onFieldItemRendered"))||void 0===i||i(),w&&a.dataField&&this._bindDataField(w,a.dataField,a.editorType,_),this._itemsRunTimeInfo.add({item:a,widgetInstance:w,guid:a.guid,$itemContainer:S})},_incTemplateRenderedCallCount(){var r;this._labelTemplateRenderedCallCount=(null!==(r=this._labelTemplateRenderedCallCount)&&void 0!==r?r:0)+1},_shouldAlignLabelsOnTemplateRendered(r,e){return r.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===e},_getMarkOptions:function(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis:function(){return this.option("form")||this},_bindDataField:function(r,e,t,i){var a=this._getFormOrThis();r.on("enterKey",function(n){a._createActionByOption("onEditorEnterKey")((0,B.l)(n,{dataField:e}))}),this._createWatcher(r,i,e),this.linkEditorToDataField(r,e,t)},_createWatcher:function(r,e,t){var i=this,a=i._getWatch();if((0,C.mf)(a)){var n=a(function(){return i._getDataByField(t)},function(){var s=i._getDataByField(t);if("dxTagBox"===r.NAME){var o=r.option("value");if(s!==o&&function(l,d){if(!Array.isArray(l)||!Array.isArray(d)||l.length!==d.length)return!1;for(var u=0;u<l.length;u++)if(l[u]!==d[u])return!1;return!0}(s,o))return}r.option("value",s)},{deep:!0,skipImmediate:!0});z.Z.on(e,Yn.x,n)}},_getWatch:function(){if(!(0,C.$K)(this._watch)){var r=this.option("form");this._watch=r&&r.option("integrationOptions.watchMethod")}return this._watch},_createComponent:function(r,e,t){var i=this.option("readOnly"),a=Object.hasOwn(t,"readOnly"),n=this.callBase(r,e,(0,ye.Z)({},t,{readOnly:a?t.readOnly:i})),s=!1;return n.on("optionChanged",o=>{"readOnly"===o.name&&!s&&(a=!0)}),this.on("optionChanged",function(o){"readOnly"===o.name&&!a&&(s=!0,n.option(o.name,o.value),s=!1)}),n},_generateRatio:function(r,e){var i,a,t=[];for(a=0;a<r;a++)i={ratio:1},e&&(i.baseSize="auto"),t.push(i);return t},_getRowsCount:function(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions:function(r){var e=this.option("layoutData");(0,C.Kn)(e)&&Object.getOwnPropertyNames(e).forEach(t=>delete this._optionsByReference["layoutData."+t]),(0,C.Kn)(r)&&Object.getOwnPropertyNames(r).forEach(t=>this._optionsByReference["layoutData."+t]=!0)},_clearWidget(r){this._disableEditorValueChangedHandler=!0,r.clear(),this._disableEditorValueChangedHandler=!1,r.option("isValid",!0)},_optionChanged(r){if(0!==r.fullName.search("layoutData."))switch(r.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(r.value),this.option("items")?(0,C.Qr)(r.value)||this._itemsRunTimeInfo.each((e,t)=>{if((0,C.$K)(t.item)){var i=t.item.dataField;if(i&&(0,C.$K)(t.widgetInstance)){var n=(0,Ot.vb)(i)(r.value),{allowIndeterminateState:s,editorType:o}=t.item;void 0!==n||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:s,editorType:o,dataField:i})?t.widgetInstance.option("value",n):this._clearWidget(t.widgetInstance)}}}):(this._initDataAndItems(r.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(r.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":"auto"===this.option("colCount")&&this._resetColCount();break;case"readOnly":case"onFieldDataChanged":break;case"width":this.callBase(r),"auto"===this.option("colCount")&&this._resetColCount();break;default:this.callBase(r)}},_resetColCount:function(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(r,e){this.on("optionChanged",t=>{t.fullName==="layoutData.".concat(e)&&r._setOptionWithoutOptionChange("value",t.value)}),r.on("valueChanged",t=>{var i=(0,C.Kn)(t.value)||Array.isArray(t.value);!this._disableEditorValueChangedHandler&&(!i||t.value!==t.previousValue)&&this._updateFieldValue(e,t.value)})},_dimensionChanged:function(){"auto"===this.option("colCount")&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData:function(r,e){var t=this;(0,C.Kn)(r)?(0,Y.S6)(r,function(i,a){t._updateFieldValue(i,a)}):"string"==typeof r&&t._updateFieldValue(r,e)},getEditor:function(r){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(r)||this._itemsRunTimeInfo.findWidgetInstanceByName(r)},isSingleColumnMode:function(r){var e=this._responsiveBox||r;if(e)return e.option("currentScreenFactor")===e.option("singleColumnScreen")},getItemsRunTimeInfo:function(){return this._itemsRunTimeInfo}});(0,Rt.Z)("dxLayoutManager",PN);var df="dx-validationsummary",FN=df+"-item",VN=df+"-item-data",mb=pl.Z.inherit({_getDefaultOptions(){return(0,B.l)(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),(0,B.l)(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){var r=this.$element(),e=this.option("validationGroup")||Yt.Z.findGroup(r,this._modelByElement(r)),t=Yt.Z.addGroup(e);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=e,this.groupSubscription=this._groupValidationHandler.bind(this),t.on("validated",this.groupSubscription)},_unsubscribeGroup(){var r=Yt.Z.getGroupConfig(this._validationGroup);r&&r.off("validated",this.groupSubscription)},_getOrderedItems(r,e){var t=[];return(0,Y.S6)(r,function(i,a){var n=(0,le.h3)(e,function(s){if(s.validator===a)return!0});n.length&&(t=t.concat(n))}),t},_groupValidationHandler(r){var e=this._getOrderedItems(r.validators,(0,Y.UI)(r.brokenRules,function(t){return{text:t.message,validator:t.validator,index:t.index}}));this.validators=r.validators,(0,Y.S6)(this.validators,(t,i)=>{if(i._validationSummary!==this){var a=this._itemValidationHandler.bind(this);i.on("validated",a),i.on("disposing",function(){i.off("validated",a),i._validationSummary=null,a=null}),i._validationSummary=this}}),this.option("items",e)},_itemValidationHandler(r){for(var{isValid:e,validator:t,brokenRules:i}=r,a=this.option("items"),n=!1,s=0,o=function(){var l=a[s];if(l.validator===t){var d=(0,le.h3)(i||[],function(u){return u.index===l.index})[0];if(e||!d)return a.splice(s,1),n=!0,1;d.message!==l.text&&(l.text=d.message,n=!0)}s++};s<a.length;)o();(0,Y.S6)(i,function(l,d){(0,le.h3)(a,function(c){return c.validator===t&&c.index===d.index})[0]||(a.push({text:d.message,validator:t,index:d.index}),n=!0)}),n&&(a=this._getOrderedItems(this.validators,a),this.option("items",a))},_initMarkup(){this.$element().addClass(df),this.callBase()},_optionChanged(r){"validationGroup"===r.name?this._initGroupRegistration():this.callBase(r)},_itemClass:()=>FN,_itemDataKey:()=>VN,_postprocessRenderItem(r){z.Z.on(r.itemElement,"click",function(){r.itemData.validator&&r.itemData.validator.focus&&r.itemData.validator.focus()})},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});(0,Rt.Z)("dxValidationSummary",mb);const NN=mb;var Cb="dx-validationgroup";(0,Rt.Z)("dxValidationGroup",class MN extends mu.Z{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),Yt.Z.addGroup(this)}_initMarkup(){var e=this.$element();e.addClass(Cb),e.find(".".concat("dx-validator")).each(function(t,i){of.getInstance((0,b.Z)(i))._initGroupRegistration()}),e.find(".".concat("dx-validationsummary")).each(function(t,i){NN.getInstance((0,b.Z)(i)).refreshValidationGroup()}),super._initMarkup()}validate(){return Yt.Z.validateGroup(this)}reset(){return Yt.Z.resetGroup(this)}_dispose(){Yt.Z.removeGroup(this),this.$element().removeClass(Cb),super._dispose()}_useTemplates(){return!1}});var HN=ve(4977),wb="dx-state-focused",ZN=["items","isRequired","validationRules","visible"],bb=Dr.default.inherit({_init:function(){this.callBase(),this._dirtyFields=new Set,this._cachedColCountOptions=[],this._itemsRunTimeInfo=new vw,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{formID:"dx-"+new Pi.Z,formData:{},colCount:1,screenByWidth:Je.$n,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:ae.Z.format("dxForm-optionalMark"),requiredMessage:ae.Z.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:(0,Kd.Z)().editorStylingMode,labelMode:"outside",isDirty:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return(0,Lt.yj)()},options:{labelLocation:"top"}},{device:function(){return(0,Lt.x2)()},options:{showColonAfterLabel:!1}}])},_setOptionsByReference:function(){this.callBase(),(0,B.l)(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:function(r){return parseInt(r.attr(lb))},_applyLabelsWidthByCol:function(r,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.inOneColumn?tb:eb+e,n=t.excludeTabbed?":not(.".concat(sb,")"):"";!function lN(r,e,t){var s,o,i="".concat(e," > .").concat(ab,":not(.").concat(cb,"top) > .").concat(rb),a=r.find(i),n=a.length,l=0;for(o=0;o<n;o++)(s=dN(a[o]))>l&&(l=s);for(o=0;o<n;o++)a[o].style.width=l+"px"}(r,".".concat(a).concat(n))},_applyLabelsWidth:function(r,e,t,i,a){i=t?1:i||this._getGroupColCount(r);var s,n={excludeTabbed:e,inOneColumn:t};for(s=0;s<i;s++)this._applyLabelsWidthByCol(r,s,n,a)},_getGroupElementsInColumn:function(r,e,t){var i=(0,C.$K)(t)?"."+ob+t:"";return r.find("."+eb+e+" > ."+af+" > ."+rf+i)},_applyLabelsWidthWithGroups:function(r,e,t,i){if(!0===this.option("alignRootItemLabels"))for(var a=r.find(".".concat(nb)),n=0;n<e;n++)this._applyLabelsWidthByCol(a,n,t,i);if(this.option("alignItemLabelsInAllGroups"))this._applyLabelsWidthWithNestedGroups(r,e,t,i);else{var l,o=this.$element().find("."+rf);for(l=0;l<o.length;l++)this._applyLabelsWidth(o.eq(l),t,void 0,void 0,i)}},_applyLabelsWidthWithNestedGroups:function(r,e,t,i){var n,s,o,l,a={excludeTabbed:t};for(n=0;n<e;n++)for(l=this._getGroupElementsInColumn(r,n),this._applyLabelsWidthByCol(l,0,a,i),s=0;s<this._groupsColCount.length;s++){l=this._getGroupElementsInColumn(r,n,this._groupsColCount[s]);var d=this._getGroupColCount(l);for(o=1;o<d;o++)this._applyLabelsWidthByCol(l,o,a,i)}},_labelLocation:function(){return this.option("labelLocation")},_alignLabelsInColumn:function(r){var{layoutManager:e,inOneColumn:t,$container:i,excludeTabbed:a,items:n}=r;if((0,Je.Ym)()&&"top"!==this._labelLocation()){var s=hb(e._getMarkOptions());t?this._applyLabelsWidth(i,a,!0,void 0,s):this._checkGrouping(n)?this._applyLabelsWidthWithGroups(i,e._getColCount(),a,s):this._applyLabelsWidth(i,a,!1,e._getColCount(),s)}},_prepareFormData:function(){(0,C.$K)(this.option("formData"))||this.option("formData",{})},_setStylingModeClass:function(){"underlined"===this.option("stylingMode")&&this.$element().addClass("dx-form-styling-mode-underlined")},_initMarkup:function(){Yt.Z.addGroup(this._getValidationGroup()),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass("dx-form"),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription:function(){if((0,Je.Ym)()){var r=this.$element().get(0);tf.Z.unobserve(r),tf.Z.observe(r,()=>{this._resizeHandler()})}},_resizeHandler:function(){this._cachedLayoutManagers.length&&(0,Y.S6)(this._cachedLayoutManagers,(r,e)=>{var t;null===(t=e.option("onLayoutChanged"))||void 0===t||t(e.isSingleColumnMode())})},_getCurrentScreenFactor:function(){return(0,Je.Ym)()?(0,Je.Wf)(this.option("screenByWidth")):"lg"},_clearCachedInstances:function(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels:function(r,e){this._alignLabelsInColumn({$container:this.$element(),layoutManager:r,excludeTabbed:!0,items:this.option("items"),inOneColumn:e}),(0,Up.U_)(this.$element().find(".".concat(HN.z)))},_clean:function(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,tf.Z.unobserve(this.$element().get(0))},_renderScrollable:function(){var r=this.option("useNativeScrolling");this._scrollable=new Ha.Z(this.$element(),{useNative:!!r,useSimulatedScrollbar:!r,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent:function(){return this.option("scrollingEnabled")?(0,b.Z)(this._scrollable.content()):this.$element()},_clearValidationSummary:function(){var r;null===(r=this._$validationSummary)||void 0===r||r.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary:function(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=(0,b.Z)("<div>").addClass("dx-form-validation-summary").appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(r,e,t,i){if(r){for(var a=[],n=0;n<r.length;n++){var s=r[n],o=$w(t,Qp(n,i)),l={item:s,itemIndex:n,path:o},d=this._itemsRunTimeInfo.add(l);if((0,C.HD)(s)&&(s={dataField:s}),(0,C.Kn)(s)){var u=(0,ye.Z)({},s);l.preparedItem=u,u.guid=d,this._tryPrepareGroupItem(u),this._tryPrepareTabbedItem(u,o),this._tryPrepareItemTemplate(u),e&&(u.cssItemClass=sb),u.items&&(u.items=this._prepareItems(u.items,e,o)),a.push(u)}else a.push(s)}return a}},_tryPrepareGroupItem:function(r){"group"===r.itemType&&(r.alignItemLabels=(0,le.IS)(r.alignItemLabels,!0),r._prepareGroupItemTemplate=e=>{r.template&&(r.groupContentTemplate=this._getTemplate(e)),r.template=this._itemGroupTemplate.bind(this,r)},r._prepareGroupItemTemplate(r.template))},_tryPrepareTabbedItem:function(r,e){"tabbed"===r.itemType&&(r.template=this._itemTabbedTemplate.bind(this,r),r.tabs=this._prepareItems(r.tabs,!0,e,!0))},_tryPrepareItemTemplate:function(r){r.template&&(r.template=this._getTemplate(r.template))},_checkGrouping:function(r){if(r)for(var e=0;e<r.length;e++)if("group"===r[e].itemType)return!0},_renderLayout:function(){var r=this,e=r.option("items"),t=r._getContent();e=r._prepareItems(e),r._rootLayoutManager=r._renderLayoutManager(t,this._createLayoutManagerOptions(e,{isRoot:!0,colCount:r.option("colCount"),alignItemLabels:r.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged:function(i){r._alignLabels.bind(r)(r._rootLayoutManager,i)},onContentReady:function(i){r._alignLabels(i.component,i.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:function(r){return r.items||[]},_itemTabbedTemplate:function(r,e,t){var i,a=(0,b.Z)("<div>").appendTo(t),n=(0,B.l)({},r.tabPanelOptions,{dataSource:r.tabs,onItemRendered:l=>{var d,u;null===(d=r.tabPanelOptions)||void 0===d||null===(u=d.onItemRendered)||void 0===u||u.call(d,l),(0,Up.Uo)(l.itemElement)},itemTemplate:(l,d,u)=>{var c=(0,b.Z)(u),f=(0,le.IS)(l.alignItemLabels,!0),p=this._renderLayoutManager(c,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(l),{colCount:l.colCount,alignItemLabels:f,screenByWidth:this.option("screenByWidth"),colCountByScreen:l.colCountByScreen,cssItemClass:l.cssItemClass,onLayoutChanged:_=>{this._alignLabelsInColumn({$container:c,layoutManager:p,items:l.items,inOneColumn:_})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(l.guid,{layoutManager:p}),f&&this._alignLabelsInColumn({$container:c,layoutManager:p,items:l.items,inOneColumn:p.isSingleColumnMode()})}}),s=(l,d)=>{Array.isArray(l)&&l.forEach(u=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(u.guid,{widgetInstance:d}))},o=this._createComponent(a,bV,n);(0,b.Z)(t).parent().addClass("dx-field-item-has-tabs"),o.on("optionChanged",l=>{"dataSource"===l.fullName&&s(l.value,l.component)}),s([{guid:r.guid},...null!==(i=r.tabs)&&void 0!==i?i:[]],o)},_itemGroupTemplate:function(r,e,t){var i=e.editorOptions.inputAttr.id,a=(0,b.Z)("<div>").toggleClass("dx-form-group-with-caption",(0,C.$K)(r.caption)&&r.caption.length).addClass(rf).appendTo(t);this.setAria({role:"group",labelledby:i},a),(0,b.Z)(t).parent().addClass("dx-field-item-has-group"),r.caption&&(0,b.Z)("<span>").addClass("dx-form-group-caption").text(r.caption).attr("id",i).appendTo(a);var s=(0,b.Z)("<div>").addClass("dx-form-group-content").appendTo(a);if(r.groupContentTemplate)r._renderGroupContentTemplate=()=>{s.empty();var d={formData:this.option("formData"),component:this};r.groupContentTemplate.render({model:d,container:(0,lt.u)(s)})},r._renderGroupContentTemplate();else{var o=this._renderLayoutManager(s,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(r),{colCount:r.colCount,colCountByScreen:r.colCountByScreen,alignItemLabels:r.alignItemLabels,cssItemClass:r.cssItemClass}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(r.guid,{layoutManager:o});var l=o._getColCount();this._groupsColCount.includes(l)||this._groupsColCount.push(l),a.addClass(ob+l),a.attr(lb,l)}},_createLayoutManagerOptions:function(r,e){return function SV(r){var{form:e,$formElement:t,formOptions:i,items:a,validationGroup:n,extendedLayoutManagerOptions:s,onFieldDataChanged:o,onContentReady:l,onDisposing:d,onFieldItemRendered:u}=r;return(0,B.l)({form:e,items:a,$formElement:t,validationGroup:n,onFieldDataChanged:o,onContentReady:l,onDisposing:d,onFieldItemRendered:u,validationBoundary:i.scrollingEnabled?t:void 0,scrollingEnabled:i.scrollingEnabled,showRequiredMark:i.showRequiredMark,showOptionalMark:i.showOptionalMark,requiredMark:i.requiredMark,optionalMark:i.optionalMark,requiredMessage:i.requiredMessage,screenByWidth:i.screenByWidth,layoutData:i.formData,labelLocation:i.labelLocation,customizeItem:i.customizeItem,minColWidth:i.minColWidth,showColonAfterLabel:i.showColonAfterLabel,onEditorEnterKey:i.onEditorEnterKey,labelMode:i.labelMode},{isRoot:s.isRoot,colCount:s.colCount,alignItemLabels:s.alignItemLabels,cssItemClass:s.cssItemClass,colCountByScreen:s.colCountByScreen,onLayoutChanged:s.onLayoutChanged,width:s.width})}({form:this,formOptions:this.option(),$formElement:this.$element(),items:r,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:e,onFieldDataChanged:t=>{this._isDataUpdating||this._triggerOnFieldDataChanged(t)},onContentReady:t=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(t.component._itemsRunTimeInfo),e.onContentReady&&e.onContentReady(t)},onDisposing:t=>{var{component:i}=t,a=i.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(a)},onFieldItemRendered:()=>{var t;null===(t=this._validationSummary)||void 0===t||t.refreshValidationGroup()}})},_renderLayoutManager:function(r,e){this._cachedColCountOptions.push({colCountByScreen:(0,B.l)({lg:e.colCount,md:e.colCount,sm:e.colCount,xs:1},e.colCountByScreen)});var i=(0,b.Z)("<div>");i.appendTo(r);var a=this._createComponent(i,"dxLayoutManager",e);return a.on("autoColCountChanged",()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout(()=>!this._disposed&&this._refresh(),0)}),this._cachedLayoutManagers.push(a),a},_getValidationGroup:function(){return this.option("validationGroup")||this},_createComponent:function(r,e,t){return this._extendConfig(t=t||{},{readOnly:this.option("readOnly")}),this.callBase(r,e,t)},_attachSyncSubscriptions:function(){var r=this;r.on("optionChanged",function(e){var t=e.fullName;"formData"===t&&((0,C.$K)(e.value)||r._options.silent("formData",e.value={}),r._triggerOnFieldDataChangedByDataSet(e.value)),r._cachedLayoutManagers.length&&(0,Y.S6)(r._cachedLayoutManagers,function(i,a){"formData"===t&&(r._isDataUpdating=!0,a.option("layoutData",e.value),r._isDataUpdating=!1),("readOnly"===e.name||"disabled"===e.name)&&a.option(t,e.value)})})},_optionChanged:function(r){var e=r.fullName.split(".");e.length>1&&-1!==e[0].search("items")&&this._itemsOptionChangedHandler(r)||e.length>1&&-1!==e[0].search("formData")&&this._formDataOptionChangedHandler(r)||this._defaultOptionChangedHandler(r)},_defaultOptionChangedHandler:function(r){switch(r.name){case"formData":this.option("items")?(0,C.Qr)(r.value)&&this._clear():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":case"isDirty":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":"auto"===this.option("colCount")&&this._invalidate();break;case"width":this.callBase(r),this._rootLayoutManager.option(r.name,r.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":Yt.Z.removeGroup(r.previousValue||this),this._invalidate();break;default:this.callBase(r)}},_itemsOptionChangedHandler:function(r){var e=r.fullName.split("."),t=r.value,i=this._getItemPath(e),a=this.option(i),n=r.fullName.replace(i+".",""),s=n.split(".")[0].replace(/\[\d+]/,""),o=this._tryCreateItemOptionAction(s,a,a[s],r.previousValue,i),l=this._tryExecuteItemOptionAction(o)||this._tryChangeLayoutManagerItemOption(r.fullName,t);if(!l&&a){this._changeItemOption(a,n,t);var d=this._generateItemsFromData(this.option("items"));this.option("items",d),l=!0}return l},_formDataOptionChangedHandler:function(r){var e=r.fullName.split("."),t=r.value,i=e.slice(1).join("."),a=this.getEditor(i);return a?a.option("value",t):this._triggerOnFieldDataChanged({dataField:i,value:t}),!0},_tryCreateItemOptionAction:function(r,e,t,i,a){return"tabs"===r&&(this._itemsRunTimeInfo.removeItemsByPathStartWith("".concat(a,".tabs")),t=this._prepareItems(t,!0,a,!0)),((r,e)=>{switch(r){case"editorOptions":case"buttonOptions":return new EV(e);case"validationRules":return new DV(e);case"cssClass":return new OV(e);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new qw((0,B.l)(e,{optionName:r}));case"tabs":return new TV(e);case"template":var t,i,a,n=null!==(t=null==e||null===(i=e.item)||void 0===i?void 0:i.itemType)&&void 0!==t?t:null===(a=e.itemsRunTimeInfo.findPreparedItemByItem(e?.item))||void 0===a?void 0:a.itemType;return"simple"===n?new IV(e):"group"===n?new AV(e):new qw((0,B.l)(e,{optionName:r}));default:return null}})(r,{item:e,value:t,previousValue:i,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:function(r){return r&&r.tryExecute()},_updateValidationGroupAndSummaryIfNeeded:function(r){var t,e=Gw(r);ZN.indexOf(e)>-1&&(Yt.Z.addGroup(this._getValidationGroup()),this.option("showValidationSummary"))&&(null===(t=this._validationSummary)||void 0===t||t.refreshValidationGroup())},_setLayoutManagerItemOption(r,e,t,i){if(this._updateLockCount>0){!r._updateLockCount&&r.beginUpdate();var a=this._itemsRunTimeInfo.findKeyByPath(i);this.postponedOperations.add(a,()=>(!r._disposed&&r.endUpdate(),(new X.BH).resolve()))}var n=s=>{if(s.component.off("contentReady",n),Uw(i)){var o=(r=>{for(var e=r.split("."),t=[...e],i=e.length-1;i>=0;i--){if(Uw(e[i]))return t.join(".");t.splice(i,1)}return""})(i),l=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(o);l&&this._alignLabelsInColumn({items:l.option("items"),layoutManager:l,$container:l.$element(),inOneColumn:l.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};r.on("contentReady",n),r.option(e,t),this._updateValidationGroupAndSummaryIfNeeded(e)},_tryChangeLayoutManagerItemOption(r,e){var t=r.split("."),i=Gw(r);if("items"===i&&t.length>1){var a=this._getItemPath(t),n=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(a);if(n){this._itemsRunTimeInfo.removeItemsByItems(n.getItemsRunTimeInfo());var s=this._prepareItems(e,!1,a);return this._setLayoutManagerItemOption(n,i,s,a),!0}}else if(t.length>2){var o=t.length-2,l=this._getItemPath(t.slice(0,o)),d=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(l);if(d){var u=Bl(t[o],i);if("editorType"===i&&d.option(u)!==e)return!1;if("visible"===i){var c=this.option(Bl(l,"items"));if(c&&c.length){var f=d.option("items");c.forEach((p,_)=>{f[_].visibleIndex=p.visibleIndex})}}return this._setLayoutManagerItemOption(d,u,e,l),!0}}return!1},_tryChangeLayoutManagerItemOptions(r,e){var t;return this.beginUpdate(),(0,Y.S6)(e,(i,a)=>{if(!(t=this._tryChangeLayoutManagerItemOption(Bl(r,i),a)))return!1}),this.endUpdate(),t},_getItemPath:function(r){var t,e=r[0];for(t=1;t<r.length&&-1!==r[t].search(/items\[\d+]|tabs\[\d+]/);t++)e+="."+r[t];return e},_triggerOnFieldDataChanged:function(r){this._updateIsDirty(r.dataField),this._createActionByOption("onFieldDataChanged")(r)},_triggerOnFieldDataChangedByDataSet(r){r&&(0,C.Kn)(r)&&Object.keys(r).forEach(e=>{this._triggerOnFieldDataChanged({dataField:e,value:r[e]})})},_updateFieldValue:function(r,e){if((0,C.$K)(this.option("formData"))){var t=this.getEditor(r);this.option("formData."+r,e),t&&t.option("value")!==e&&t.option("value",e)}},_generateItemsFromData:function(r){var e=this.option("formData"),t=[];return!r&&(0,C.$K)(e)&&(0,Y.S6)(e,function(i){t.push({dataField:i})}),r&&(0,Y.S6)(r,function(i,a){(0,C.Kn)(a)?t.push(a):t.push({dataField:a})}),t},_getItemByField:function(r,e){var s,t=this,i=(0,C.Kn)(r)?r:t._getFieldParts(r),a=i.fieldName,n=i.fieldPath;return e.length&&(0,Y.S6)(e,function(o,l){var d=l.itemType;if(n.length){var u=n.slice();l=t._getItemByFieldPath(u,a,l)}else if("group"===d&&!l.caption&&!l.name||"tabbed"===d&&!l.name){var c=t._getSubItemField(d);l.items=t._generateItemsFromData(l.items),l=t._getItemByField({fieldName:a,fieldPath:n},l[c])}if(((r,e)=>!!r&&(r.dataField===e||r.name===e||ef(r.title)===e||"group"===r.itemType&&ef(r.caption)===e))(l,a))return s=l,!1}),s},_getFieldParts:function(r){for(var e=r,t=e.indexOf("."),i=[];-1!==t;)i.push(e.substr(0,t)),t=(e=e.substr(t+1)).indexOf(".");return{fieldName:e,fieldPath:i.reverse()}},_getItemByFieldPath:function(r,e,t){var s,i=t.itemType,a=this._getSubItemField(i),n="group"===i||"tabbed"===i||t.title;do{if(!n)break;var o=t.name||t.caption||t.title,l=(0,C.$K)(o),d=ef(o),u=void 0;if(t[a]=this._generateItemsFromData(t[a]),l&&(u=r.pop()),!r.length&&(s=this._getItemByField(e,t[a])))break;(!l||l&&d===u)&&r.length&&(s=this._searchItemInEverySubItem(r,e,t[a]))}while(r.length&&!(0,C.$K)(s));return s},_getSubItemField:function(r){return"tabbed"===r?"tabs":"items"},_searchItemInEverySubItem:function(r,e,t){var a,i=this;return(0,Y.S6)(t,function(n,s){if(a=i._getItemByFieldPath(r.slice(),e,s))return!1}),a||(a=!1),a},_changeItemOption:function(r,e,t){(0,C.Kn)(r)&&(r[e]=t)},_dimensionChanged:function(){var r=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==r&&(this._isColCountChanged(this._lastMarkupScreenFactor,r)&&(this._targetScreenFactor=r,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=r)},_isColCountChanged:function(r,e){var t=!1;return(0,Y.S6)(this._cachedColCountOptions,function(i,a){if(a.colCountByScreen[r]!==a.colCountByScreen[e])return t=!0,!1}),t},_refresh:function(){var r=".".concat(wb," > :not(.dx-dropdowneditor-input-wrapper) input,")+" .".concat(wb," textarea");z.Z.trigger(this.$element().find(r),"change"),this.callBase()},_updateIsDirty:function(r){var e=this.getEditor(r);e&&(e.option("isDirty")?this._dirtyFields.add(r):this._dirtyFields.delete(r),this.option("isDirty",!!this._dirtyFields.size))},updateRunTimeInfoForEachEditor:function(r){this._itemsRunTimeInfo.each(function(e,t){var i=t.widgetInstance;(0,C.$K)(i)&&za.Z.isEditor(i)&&r(i)})},_clear:function(){this.updateRunTimeInfoForEachEditor(r=>{r.clear(),r.option("isValid",!0)}),Yt.Z.resetGroup(this._getValidationGroup())},_updateData:function(r,e,t){var i=this,a=t?e:r;(0,C.Kn)(a)?(0,Y.S6)(a,function(n,s){i._updateData(t?r+"."+n:n,s,(0,C.Kn)(s))}):(0,C.HD)(r)&&i._updateFieldValue(r,e)},registerKeyHandler:function(r,e){this.callBase(r,e),this._itemsRunTimeInfo.each(function(t,i){(0,C.$K)(i.widgetInstance)&&i.widgetInstance.registerKeyHandler(r,e)})},_focusTarget:function(){return this.$element().find("."+af+" [tabindex]").first()},_visibilityChanged:function(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout:function(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose:function(){this._clearAutoColCountChangedTimeout(),Yt.Z.removeGroup(this._getValidationGroup()),this.callBase()},clear:function(){this._clear()},resetValues:function(){this._clear()},reset:function(r){this.updateRunTimeInfoForEachEditor(e=>{var t=e.option("name");r&&t in r?e.reset(r[t]):e.reset()}),this._renderValidationSummary()},updateData:function(r,e){this._updateData(r,e)},getEditor:function(r){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(r)||this._itemsRunTimeInfo.findWidgetInstanceByName(r)},getButton:function(r){return this._itemsRunTimeInfo.findWidgetInstanceByName(r)},updateDimensions:function(){var r=this,e=new X.BH;return r._scrollable?r._scrollable.update().done(function(){e.resolveWith(r)}):e.resolveWith(r),e.promise()},itemOption:function(r,e,t){var i=this._generateItemsFromData(this.option("items")),a=this._getItemByField(r,i),n=jw(i,a);if(a)switch(arguments.length){case 1:return a;case 3:var s=this._tryCreateItemOptionAction(e,a,t,a[e],n);this._changeItemOption(a,e,t);var o=Bl(n,e);!this._tryExecuteItemOptionAction(s)&&!this._tryChangeLayoutManagerItemOption(o,t)&&this.option("items",i);break;default:var l;(0,C.Kn)(e)&&!this._tryChangeLayoutManagerItemOptions(n,e)&&((0,Y.S6)(e,(d,u)=>{var c=this._tryCreateItemOptionAction(d,a,u,a[d],n);this._changeItemOption(a,d,u),!l&&!this._tryExecuteItemOptionAction(c)&&(l=!0)}),l&&this.option("items",i))}},validate:function(){return Yt.Z.validateGroup(this._getValidationGroup())},getItemID:function(r){return"dx_"+this.option("formID")+"_"+(r||new Pi.Z)},getTargetScreenFactor:function(){return this._targetScreenFactor}});(0,Rt.Z)("dxForm",bb);const yb=bb;var $N={extenders:{controllers:{editing:r=>class extends r{init(){this._editForm=null,this._updateEditFormDeferred=null,super.init()}isFormOrPopupEditMode(){return this.isPopupEditMode()||this.isFormEditMode()}isPopupEditMode(){return this.option("editing.mode")===Wp}isFormEditMode(){return this.option("editing.mode")===no}getFirstEditableColumnIndex(){var e=this._firstFormItem;if(this.isFormEditMode()&&e){var t=this.option(br),i=this._dataController.getRowIndexByKey(t),a=this._rowsView.getCellElements(i);return this._rowsView._getEditFormEditorVisibleIndex(a,e.column)}return super.getFirstEditableColumnIndex()}getEditFormRowIndex(){return this.isFormOrPopupEditMode()?this._getVisibleEditRowIndex():super.getEditFormRowIndex()}_isEditColumnVisible(){var e=super._isEditColumnVisible(),t=this.option("editing");return this.isFormOrPopupEditMode()&&t.allowUpdating||e}_handleDataChanged(e){var t,i;if(this.isPopupEditMode()){var a=this.option("editing.editRowKey"),n=null===(t=e?.items)||void 0===t?void 0:t.some(o=>(0,le.bY)(o.key,a)),s=(null===(i=e.changeTypes)||void 0===i?void 0:i.length)&&e.changeTypes.every(o=>"insert"===o);("refresh"===e.changeType||n&&e.isOptionChanged)&&!s&&this._repaintEditPopup()}super._handleDataChanged(e)}getPopupContent(){var e,t=null===(e=this._editPopup)||void 0===e?void 0:e.option("visible");if(this.isPopupEditMode()&&t)return this._$popupContent}_showAddedRow(e){this.isPopupEditMode()?this._showEditPopup(e):super._showAddedRow(e)}_cancelEditDataCore(){super._cancelEditDataCore(),this.isPopupEditMode()&&this._hideEditPopup()}_updateEditRowCore(e,t,i){var a,n=this._editForm;this.isPopupEditMode()?this.option("repaintChangesOnly")?(null===(a=e.update)||void 0===a||a.call(e,e),this._rowsView.renderDelayedTemplates()):n&&(this._updateEditFormDeferred=(new X.BH).done(()=>n.repaint()),this._updateLockCount||this._updateEditFormDeferred.resolve()):super._updateEditRowCore(e,t,i)}_showEditPopup(e,t){var i="desktop"!==ft.Z.current().deviceType,a=this.addWidgetPrefix("edit-popup"),n=(0,B.l)({showTitle:!1,fullScreen:i,wrapperAttr:{class:a},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getSaveButtonConfig()},{toolbar:"bottom",location:"after",widget:"dxButton",options:this._getCancelButtonConfig()}],contentTemplate:this._getPopupEditFormTemplate(e)},this.option(Ou));if(!this._editPopup){var s=(0,b.Z)("<div>").appendTo(this.component.$element()).addClass(a);this._editPopup=this._createComponent(s,rs.Z),this._editPopup.on("hiding",this._getEditPopupHiddenHandler()),this._editPopup.on("shown",o=>{var l;z.Z.trigger(o.component.$content().find(zp).not(".".concat(bF)).first(),"focus"),t&&(null===(l=this._editForm)||void 0===l||l.repaint())})}this._editPopup.option(n),this._editPopup.show(),super._showEditPopup(e,t)}_getPopupEditFormTemplate(e){var t=this.component.getVisibleRows()[e],i={row:t,values:t.values,rowType:t.rowType,key:t.key,rowIndex:e};return this._rowsView._addWatchMethod(i,t),a=>{var n=this.getEditFormTemplate(),s=this._createComponent((0,b.Z)("<div>").appendTo(a),Ha.Z);this._$popupContent=(0,b.Z)(s.content()),n(this._$popupContent,i,{isPopupForm:!0}),this._rowsView.renderDelayedTemplates(),(0,b.Z)(a).parent().attr("aria-label",this.localize("dxDataGrid-ariaEditForm"))}}_repaintEditPopup(){var e,t,i=this._getVisibleEditRowIndex();if(i>=0){var a=null===(e=this._editPopup)||void 0===e?void 0:e.option("animation");null===(t=this._editPopup)||void 0===t||t.option("animation",null),this._showEditPopup(i,!0),void 0!==a&&this._editPopup.option("animation",a)}}_hideEditPopup(){var e;null===(e=this._editPopup)||void 0===e||e.option("visible",!1)}optionChanged(e){if("editing"===e.name&&this.isFormOrPopupEditMode()){var{fullName:t}=e;0===t.indexOf(Hp)?(this._handleFormOptionChange(e),e.handled=!0):0===t.indexOf(Ou)&&(this._handlePopupOptionChange(e),e.handled=!0)}super.optionChanged(e)}_handleFormOptionChange(e){var t;if(this.isFormEditMode()){var i=this._getVisibleEditRowIndex();i>=0&&this._dataController.updateItems({changeType:"update",rowIndices:[i]})}else null!==(t=this._editPopup)&&void 0!==t&&t.option("visible")&&0===e.fullName.indexOf(Hp)&&this._repaintEditPopup()}_handlePopupOptionChange(e){var t=this._editPopup;if(t){var i=e.fullName.slice(14);i?t.option(i,e.value):t.option(e.value)}}renderFormEditorTemplate(e,t,i,a,n){var s=this,o=(0,b.Z)(a),{column:l}=t,d=(r=>{var e,{column:t}=r;return r.isCustomEditorType?r.editorType:null===(e=t.formItem)||void 0===e?void 0:e.editorType})(t),u=e?.row.data,c=i.component,{label:f,labelMark:p,labelMode:_}=i.editorOptions||{},w=(0,B.l)({},e,{data:u,cellElement:null,isOnForm:!0,item:t,id:c.getItemID(t.name||t.dataField),column:(0,B.l)({},l,{editorType:d,editorOptions:(0,B.l)({label:f,labelMark:p,labelMode:_},l.editorOptions,t.editorOptions)}),columnIndex:l.index,setValue:!n&&l.allowEditing&&function(x,E){s.updateFieldValue(w,x,E)}});w.value=l.calculateCellValue(u);var S=this._getFormEditItemTemplate.bind(this)(w,l);return this._rowsView.renderTemplate(o,S,w,!!(0,ha.al)(o)).done(()=>{this._rowsView._updateCell(o,w)}),w}getFormEditorTemplate(e,t){var i=this.component.columnOption(t.name||t.dataField);return(a,n)=>{var s=(0,b.Z)(n),{row:o}=e;if(o?.watch){var l=o.watch(()=>i.selector(o.data),()=>{var d=s.find(".dx-widget").first(),u=d.data("dxValidator"),c=u?.option();s.contents().remove(),e=this.renderFormEditorTemplate.bind(this)(e,t,a,s),u=(d=s.find(".dx-widget").first()).data("dxValidator"),c&&!u&&d.dxValidator({validationRules:c.validationRules,validationGroup:c.validationGroup,dataGetter:c.dataGetter})});z.Z.on(s,Yn.x,l)}e=this.renderFormEditorTemplate.bind(this)(e,t,a,s)}}getEditFormOptions(e){var t,i=null===(t=this._getValidationGroupsInForm)||void 0===t?void 0:t.call(this,e),a=this.option("editing.form.customizeItem"),n=this.addWidgetPrefix(lw),s=this.option("editing.form.items"),o={};if(s)pw(s,d=>{var u=d?.name||d?.dataField;u&&(o[u]=!!d.editorType)});else{var l=this._columnsController.getColumns();s=[],(0,Y.S6)(l,(d,u)=>{!u.isBand&&!u.type&&s.push({column:u,name:u.name,dataField:u.dataField})})}return(0,B.l)({},i,{items:s,formID:"dx-".concat(new Pi.Z),customizeItem:d=>{var u,c=d.name||d.dataField;if((d.column||c)&&(u=d.column||this._columnsController.columnOption(d.name?"name:".concat(d.name):"dataField:".concat(d.dataField))),u){if(d.label=d.label||{},d.label.text=d.label.text||u.caption,"boolean"===u.dataType&&void 0===d.label.visible){var f=this.option("editing.form.labelMode");("floating"===f||"static"===f)&&(d.label.visible=!0)}d.template=d.template||this.getFormEditorTemplate(e,d),d.column=u,d.isCustomEditorType=o[c],u.formItem&&(0,B.l)(d,u.formItem),void 0===d.isRequired&&u.validationRules&&(d.isRequired=u.validationRules.some(_=>"required"===_.type),d.validationRules=[]);var p=!(0,C.$K)(d.visible)||d.visible;!this._firstFormItem&&p&&(this._firstFormItem=d)}a?.call(this,d),d.cssClass=(0,C.HD)(d.cssClass)?"".concat(d.cssClass," ").concat(n):n}})}getEditFormTemplate(){return(e,t,i)=>{var a=this.option(Hp),n=this.getEditFormOptions(t),s=(0,b.Z)("<div>").appendTo(e),o=i?.isPopupForm;if(this._firstFormItem=void 0,o&&s.addClass(this.addWidgetPrefix("edit-popup-form")),this._editForm=this._createComponent(s,yb,(0,B.l)({},a,n)),!o){var l=(0,b.Z)("<div>").addClass(this.addWidgetPrefix("form-buttons-container")).appendTo(e);this._createComponent((0,b.Z)("<div>").appendTo(l),Or.Z,this._getSaveButtonConfig()),this._createComponent((0,b.Z)("<div>").appendTo(l),Or.Z,this._getCancelButtonConfig())}this._editForm.on("contentReady",()=>{var d;this._rowsView.renderDelayedTemplates(),null===(d=this._editPopup)||void 0===d||d.repaint()})}}getEditForm(){return this._editForm}_endUpdateCore(){var e;null===(e=this._updateEditFormDeferred)||void 0===e||e.resolve()}_beforeEndSaving(e){var t;super._beforeEndSaving(e),this.isPopupEditMode()&&(null===(t=this._editPopup)||void 0===t||t.hide())}_processDataItemCore(e,t,i,a,n){var{type:s}=t;this.isPopupEditMode()&&s===Ca&&(e.visible=!1),super._processDataItemCore(e,t,i,a,n)}_editRowFromOptionChangedCore(e,t){var i=this.isPopupEditMode();super._editRowFromOptionChangedCore(e,t,i),i&&this._showEditPopup(t)}},data:r=>class extends r{_updateEditItem(e){this._editingController.isFormEditMode()&&(e.rowType="detail")}_getChangedColumnIndices(e,t,i,a){if(!1!==a||!t.isEditing||!this._editingController.isFormEditMode())return super._getChangedColumnIndices.apply(this,arguments)}}},views:{rowsView:r=>class extends r{_renderCellContent(e,t){"data"===t.rowType&&this._editingController.isPopupEditMode()&&!1===t.row.visible||super._renderCellContent.apply(this,arguments)}getCellElements(e){var t=super.getCellElements(e),i=this._editingController,a=i.getEditForm();return i.getEditFormRowIndex()===e&&t&&a?a.$element().find(".".concat(this.addWidgetPrefix(lw),", .").concat("dx-button")):t}_getVisibleColumnIndex(e,t,i){if(this._editingController.getEditFormRowIndex()===t&&(0,C.HD)(i)){var n=this._columnsController.columnOption(i);return this._getEditFormEditorVisibleIndex(e,n)}return super._getVisibleColumnIndex.apply(this,arguments)}_getEditFormEditorVisibleIndex(e,t){var i=-1;return(0,Y.S6)(e,(a,n)=>{var s=(0,b.Z)(n).find(".dx-field-item-content").data("dx-form-item");if(s?.column&&t&&s.column.index===t.index)return i=a,!1}),i}_isFormItem(e){var t="detail"===e.rowType||"detailAdaptive"===e.rowType,i="data"===e.rowType&&this._editingController.isPopupEditMode();return(t||i)&&e.item}_updateCell(e,t){this._isFormItem(t)?this._formItemPrepared(t,e):super._updateCell(e,t)}_updateContent(){var e=this._editingController,t=e.getEditForm(),i=t?.option("validationGroup");return super._updateContent.apply(this,arguments).done(()=>{var n=e.getEditForm();i&&n&&n!==t&&n.option("validationGroup",i)})}}}}};He.registerModule("editingFormBased",$N);var qN={extenders:{controllers:{editing:r=>class extends r{init(){var t,i,e=!this._saveEditorHandler;super.init(),e&&(this._pointerUpEditorHandler=()=>{var a;i=null===(a=this._columnsResizerController)||void 0===a?void 0:a.isResizing()},this._pointerDownEditorHandler=a=>t=(0,b.Z)(a.target),this._saveEditorHandler=this.createAction(function(a){var{event:n}=a,s=(0,b.Z)(n.target),o=n[ew],{component:l}=this;if((!function TF(r){return r&&(r.is("input")||r.is("textarea"))}(t)||t.is(s))&&this.isCellOrBatchEditMode()&&!this._editCellInProgress){var u=d(s)||d(o?.$element()),c=o&&!o._disposed&&o!==this.component,f=!!s.closest(".".concat(this.addWidgetPrefix("addrow-button"))).length,p=s.hasClass(this.addWidgetPrefix("focus-overlay")),_=this.isCellEditMode();!i&&!u&&!p&&!(f&&_&&this.isEditing())&&((0,ha.al)(s)||c)&&this._closeEditItem.bind(this)(s)}function d(w){if(!w)return!1;var S=w.closest(".".concat("dx-dropdowneditor-overlay")),x=l.$element();return S.length>0&&0===x.closest(S).length}}),z.Z.on(at.Z.getDocument(),kt.Z.up,this._pointerUpEditorHandler),z.Z.on(at.Z.getDocument(),kt.Z.down,this._pointerDownEditorHandler),z.Z.on(at.Z.getDocument(),Ft.u,this._saveEditorHandler))}isCellEditMode(){return this.option("editing.mode")===ao}isBatchEditMode(){return this.option("editing.mode")===ds}isCellOrBatchEditMode(){return this.isCellEditMode()||this.isBatchEditMode()}_needToCloseEditableCell(e){var t,i=this.component.$element(),a=this.isEditing();if((!i||e.closest(i).length)&&e.closest(".".concat("dx-data-row")).length){var o=e.closest(".".concat(bn,"> td")),l=this._rowsView.getRowIndex(o.parent()),d=this._rowsView.getCellElements(l);if(d?.length){var u=d.index(o),f=null===(t=this._columnsController.getVisibleColumns()[u])||void 0===t?void 0:t.allowEditing,p=this.isEditCell(l,u);a=a&&!f&&!p}}return a||super._needToCloseEditableCell(e)}_closeEditItem(e){this._needToCloseEditableCell(e)&&this.closeEditCell()}_focusEditorIfNeed(){var e;if(this._needFocusEditor&&this.isCellOrBatchEditMode()){var t=this._getVisibleEditColumnIndex(),i=null===(e=this._rowsView)||void 0===e?void 0:e._getCellElement(this._getVisibleEditRowIndex(),t);i&&!i.find(":focus").length?this._focusEditingCell(()=>{this._editCellInProgress=!1},i,!0):this._editCellInProgress=!1,this._needFocusEditor=!1}else super._focusEditorIfNeed()}isEditing(){if(this.isCellOrBatchEditMode()){var e=(0,C.$K)(this.option(br)),t=(0,C.$K)(this.option(ls));return e&&t}return super.isEditing()}_handleEditColumnNameChange(e){var t=this._getVisibleEditRowIndex(e.previousValue);if(this.isCellOrBatchEditMode()&&-1!==t&&(0,C.$K)(e.value)&&e.value!==e.previousValue){var i=this._columnsController.getVisibleColumnIndex(e.value),a=this._columnsController.getVisibleColumnIndex(e.previousValue);this._editCellFromOptionChanged(i,a,t)}}_addRow(e){if(this.isCellEditMode()&&this.hasChanges()){var t=new X.BH;return this.saveEditData().done(()=>{this.hasChanges()?t.reject("cancel"):this.addRow(e).done(t.resolve).fail(t.reject)}),t.promise()}return super._addRow(e)}editCell(e,t){return this._editCell({rowIndex:e,columnIndex:t})}_editCell(e){var i,t=new X.BH;return this.executeOperation(t,()=>{i=this._editCellCore(e),(0,X.gx)(i).done(t.resolve).fail(t.reject)}),void 0!==i?i:t.promise()}_editCellCore(e){var t=this._dataController,i=(0,C.$K)(e.oldColumnIndex)||(0,C.$K)(e.oldRowIndex),{columnIndex:a,rowIndex:n,column:s,item:o}=this._getNormalizedEditCellOptions(e),l={data:o?.data,cancel:!1,column:s};if(void 0!==o.key){if(s&&("data"===o.rowType||"detailAdaptive"===o.rowType)&&!o.removed&&this.isCellOrBatchEditMode()){if(!i&&this.isEditCell(n,a))return!0;var d=n+t.getRowIndexOffset();return(0,X.gx)(this._beforeEditCell(n,a,o)).done(u=>{u||this._prepareEditCell(l,o,a,d)||this._processCanceledEditingCell()})}return!1}this._dataController.fireError("E1043")}_beforeEditCell(e,t,i){if(this.isCellEditMode()&&!i.isNewRow&&this.hasChanges()){var a=new X.BH;return this.saveEditData().always(()=>{a.resolve(this.hasChanges())}),this.addDeferred(a),a}return!1}publicMethods(){return super.publicMethods().concat(["editCell","closeEditCell"])}_getNormalizedEditCellOptions(e){var u,{oldColumnIndex:t,oldRowIndex:i,columnIndex:a,rowIndex:n}=e,s=this._columnsController,o=s.getVisibleColumns(),d=this._dataController.items()[n];return u=(0,C.$K)(t)?o[t]:this._getEditColumn(),(0,C.$K)(i)||(i=this._getVisibleEditRowIndex()),(0,C.HD)(a)&&(a=s.columnOption(a,"index"),a=s.getVisibleIndex(a)),{oldColumn:u,columnIndex:a,oldRowIndex:i,rowIndex:n,column:o[a],item:d}}_prepareEditCell(e,t,i,a){var n;return t.isNewRow||(e.key=t.key),!this._isEditingStart(e)&&(this._pageIndex=this._dataController.pageIndex(),this._setEditRowKey(t.key),this._setEditColumnNameByIndex(i),e.column.showEditorAlways||this._addInternalData({key:t.key,oldData:null!==(n=t.oldData)&&void 0!==n?n:t.data}),!0)}closeEditCell(e,t){var i=(0,X.gx)(),a=this._getVisibleEditRowIndex();if(this.isCellOrBatchEditMode()){var n=new X.BH;i=new X.BH,this.executeOperation(n,()=>{this._closeEditCellCore(e,a,t).always(i.resolve)})}return i.promise()}_closeEditCellCore(e,t,i){var a=this._dataController,n=new X.BH,s=n.promise();if(this.isCellEditMode()&&this.hasChanges()){if(!i)return this.saveEditData().done(l=>{this.hasChanges()?n.resolve():this.closeEditCell(!!l).always(n.resolve)}),s}else if(this._resetEditRowKey(),this._resetEditColumnName(),t>=0){var o=[t];this._beforeCloseEditCellInBatchMode(o),e||a.updateItems({changeType:"update",rowIndices:o})}return n.resolve(),s}_resetModifiedClassCells(e){if(this.isBatchEditMode()){var t=this._columnsController.getVisibleColumns().length;e.forEach(i=>{for(var{key:a}=i,n=this._dataController.getRowIndexByKey(a),s=0;s<t;s++){var o=this._rowsView._getCellElement(n,s);o?.removeClass("dx-cell-modified")}})}}_prepareChange(e,t,i){var a=(0,b.Z)(e.cellElement);return this.isBatchEditMode()&&void 0!==e.key&&this._applyModified(a,e),super._prepareChange(e,t,i)}_cancelSaving(e){var t=this._dataController;this.isCellOrBatchEditMode()&&(this.isBatchEditMode()&&this._resetEditIndices(),t.updateItems()),super._cancelSaving(e)}optionChanged(e){var{fullName:t}=e;"editing"===e.name&&t===ls?(this._handleEditColumnNameChange(e),e.handled=!0):super.optionChanged(e)}_editCellFromOptionChanged(e,t,i){var a=this._columnsController.getVisibleColumns();e>-1&&(0,le.g0)(()=>{this._repaintEditCell(a[e],a[t],i)})}_handleEditRowKeyChange(e){var t;if(this.isCellOrBatchEditMode()){var i=this._getVisibleEditColumnIndex(),a=this._getEditRowIndexCorrection(),n=this._dataController.getRowIndexByKey(e.previousValue)+a;(0,C.$K)(e.value)&&e.value!==e.previousValue&&(null===(t=this._editCellFromOptionChanged)||void 0===t||t.call(this,i,i,n))}else super._handleEditRowKeyChange(e)}deleteRow(e){if(this.isCellEditMode()&&this.isEditing()){var{isNewRow:t}=this._dataController.items()[e],i=this._dataController.getKeyByRowIndex(e);this.closeEditCell(null,t).always(()=>{e=this._dataController.getRowIndexByKey(i),this._checkAndDeleteRow(e)})}else super.deleteRow(e)}_checkAndDeleteRow(e){this.isBatchEditMode()?this._deleteRowCore(e):super._checkAndDeleteRow(e)}_refreshCore(e){var{isPageChanged:t}=e??{},i=this.isBatchEditMode()||t&&"virtual"!==this.option("scrolling.mode");this.isCellOrBatchEditMode()?i&&(this._resetEditColumnName(),this._resetEditRowKey()):super._refreshCore(e)}_allowRowAdding(e){return!!this.isBatchEditMode()||super._allowRowAdding(e)}_afterDeleteRow(e,t){var i=this._dataController;return this.isBatchEditMode()?(i.updateItems({changeType:"update",rowIndices:[t,e]}),(new X.BH).resolve()):super._afterDeleteRow(e,t)}_updateEditRow(e,t,i){this.isCellOrBatchEditMode()?this._updateRowImmediately(e,t,i):super._updateEditRow(e,t,i)}_isDefaultButtonVisible(e,t){if(this.isCellOrBatchEditMode()){var i=this.isBatchEditMode();switch(e.name){case"save":case"cancel":case"edit":return!1;case"delete":return super._isDefaultButtonVisible(e,t)&&(!i||!t.row.removed);case"undelete":return i&&this.allowDeleting(t)&&t.row.removed;default:return super._isDefaultButtonVisible(e,t)}}return super._isDefaultButtonVisible(e,t)}_isRowDeleteAllowed(){return super._isRowDeleteAllowed()||this.isBatchEditMode()}_beforeEndSaving(e){var t;this.isCellEditMode()?"update"!==(null===(t=e[0])||void 0===t?void 0:t.type)&&super._beforeEndSaving(e):(this.isBatchEditMode()&&this._resetModifiedClassCells(e),super._beforeEndSaving(e))}prepareEditButtons(e){var t,i=null!==(t=this.option("editing"))&&void 0!==t?t:{},a=super.prepareEditButtons(e);return(i.allowUpdating||i.allowAdding||i.allowDeleting)&&this.isBatchEditMode()&&(a.push(this.prepareButtonItem(e,"save","saveEditData",21)),a.push(this.prepareButtonItem(e,"revert","cancelEditData",22))),a}_saveEditDataInner(){var n,e=this._dataController.getVisibleRows()[this.getEditRowIndex()],t=this._getEditColumn(),i=t?.showEditorAlways;return this.isCellEditMode()&&!e?.isNewRow&&i&&(n=new X.BH,this.addDeferred(n)),super._saveEditDataInner().always(n?.resolve)}_applyChange(e,t,i){var a=this.isCellEditMode()&&e.row&&!e.row.isNewRow,{showEditorAlways:n}=e.column,s=e.column.setCellValue!==e.column.defaultSetCellValue;return n&&!i&&a&&this.hasEditData()&&!this.isEditCell(e.rowIndex,e.columnIndex)?(this._focusEditingCell(),void this._updateEditRow(e.row,!0,s)):super._applyChange(e,t,i)}_applyChangeCore(e,t){var{showEditorAlways:i}=e.column,a=this.isCellEditMode()&&e.row&&!e.row.isNewRow;if(i&&!t){if(a)return this._setEditRowKey(e.row.key,!0),this._setEditColumnNameByIndex(e.columnIndex,!0),this.saveEditData();if(this.isBatchEditMode())return t=this._needUpdateRow(e.column),super._applyChangeCore(e,t)}return super._applyChangeCore(e,t)}_processDataItemCore(e,t,i,a,n){var{data:s,type:o}=t;this.isBatchEditMode()&&o===$a&&(e.data=(0,Wr.FL)(e.data,s)),super._processDataItemCore(e,t,i,a,n)}_processRemoveCore(e,t,i){if(!this.isBatchEditMode()||i)return super._processRemoveCore(e,t,i)}_processRemoveIfError(e,t){if(!this.isBatchEditMode())return super._processRemoveIfError(e,t)}_beforeFocusElementInRow(e){super._beforeFocusElementInRow(e);var t=e>=0?e:0,i=this.getFirstEditableColumnIndex();i>=0&&this.editCell(t,i)}}},views:{rowsView:r=>class extends r{_createTable(){var e=super._createTable.apply(this,arguments),t=this._editingController;return t.isCellOrBatchEditMode()&&this.option("editing.allowUpdating")&&z.Z.on(e,(0,Ee.V4)(js.Z.name,"dxDataGridRowsView"),"td:not(.".concat(Tu,")"),this.createAction(()=>{t.isEditing()&&t.closeEditCell()})),e}_createRow(e){var t=super._createRow.apply(this,arguments);if(e){var a=!!e.removed;this._editingController.isBatchEditMode()&&a&&t.addClass("dx-row-removed")}return t}},headerPanel:r=>class extends r{isVisible(){var e=this._editingController.option("editing");return super.isVisible()||e&&(e.allowUpdating||e.allowDeleting)&&e.mode===ds}}}}};He.registerModule("editingCellBased",qN);var xb="invalid",uf="revert-tooltip",Sb="dx-invalid-message",Eb="dxInvalidMessage",hf="invalid-message",Ib="dx-invalid-message-always",Ab="dxRevertButton",Tb="validator",cf="dx-pending-indicator",Db="dx-validation-pending",Ob="content",Rb="__DX_INSERT_INDEX__",Lb="row",Fu="batch",lo="cell",Pb=["popup","form"],kl="insert",Ml="cancel",Hl=function(r){return(0,C.$K)(r)&&r!==Ml},Fb=function(r,e){return void 0!==r||void 0===r&&e&&!e.isNewRow},uB={defaultOptions:()=>({editing:{texts:{validationCancelChanges:ae.Z.format("dxDataGrid-validationCancelChanges")}}}),controllers:{validating:class rB extends Vt.Controller{constructor(){super(...arguments),this._isValidationInProgress=!1,this._disableApplyValidationResults=!1}init(){this._editingController=this.getController("editing"),this._editorFactoryController=this.getController("editorFactory"),this._columnsController=this.getController("columns"),this.createAction("onRowValidating"),this._validationState||this.initValidationState()}initValidationState(){this._validationState=[],this._validationStateCache={}}_rowIsValidated(e){var t=this._getValidationData(e?.key);return!!t&&!!t.validated}_getValidationData(e,t){var n,i=(0,le.k3)(e),a=(0,C.Kn)(i);return!(n=a?this._validationState.filter(s=>(0,le.bY)(s.key,e))[0]:this._validationStateCache[i])&&t&&(this._validationState.push(n={key:e,isValid:!0}),a||(this._validationStateCache[i]=n)),n}_getBrokenRules(e,t){return t?t.brokenRules||t.brokenRule&&[t.brokenRule]:e.brokenRules||[]}_rowValidating(e,t){var i=new X.BH,a=this._editingController.getChangeByKey(e?.key),n=this._getBrokenRules(e,t),o={brokenRules:n,isValid:t?t.isValid:e.isValid,key:a.key,newData:a.data,oldData:this._editingController._getOldData(a.key),promise:null,errorText:this.getHiddenValidatorsErrorText(n)};return this.executeAction("onRowValidating",o),(0,X.gx)((0,X.p4)(o.promise)).always(()=>{e.isValid=o.isValid,e.errorText=o.errorText,i.resolve(o)}),i.promise()}getHiddenValidatorsErrorText(e){var t=[];return(0,Y.S6)(e,(i,a)=>{var{column:n}=a,s=n&&void 0!==n.groupIndex&&!n.showWhenGrouped,o=n&&n.visible;!a.validator.$element().parent().length&&(!o||s)&&t.push(a.message)}),t.join(", ")}validate(e){var t=!0,i=this._editingController,a=new X.BH,n=[],s=i.getEditMode();if(e=e||s===Lb,this._isValidationInProgress)return a.resolve(!1).promise();if(this._isValidationInProgress=!0,e){i.addDeferred(a);var o=i.getChanges();(0,Y.S6)(o,(d,u)=>{var{type:c,key:f}=u;if("remove"!==c){var p=this._getValidationData(f,!0),_=this.validateGroup(p);n.push(_),_.done(w=>{p.validated=!0,t=t&&w.isValid})}})}else if(this._currentCellValidator){var l=this.validateGroup(this._currentCellValidator._findGroup());n.push(l),l.done(d=>{t=d.isValid})}return(0,X.gx)(...n).done(()=>{this._isValidationInProgress=!1,a.resolve(t)}),a.promise()}validateGroup(e){var a,t=new X.BH,i=e&&Yt.Z.getGroupConfig(e);return i?.validators.length&&(this.resetRowValidationResults(e),a=Yt.Z.validateGroup(e)),(0,X.gx)(a?.complete||a).done(n=>{(0,X.gx)(this._rowValidating(e,n)).done(t.resolve)}),t.promise()}isRowDataModified(e){return!(0,C.Qr)(e.data)}updateValidationState(e){var t=this._editingController.getEditMode(),{key:i}=e,a=this._getValidationData(i,!0);if(Pb.includes(t))a.isValid=!0;else{if(e.type===kl&&!this.isRowDataModified(e))return void(a.isValid=!0);if(this.setDisableApplyValidationResults(!0),Yt.Z.getGroupConfig(a)){var s=Yt.Z.validateGroup(a);(0,X.gx)(s.complete||s).done(o=>{a.isValid=o.isValid,a.brokenRules=o.brokenRules})}else(!a.brokenRules||!a.brokenRules.length)&&(a.isValid=!0);this.setDisableApplyValidationResults(!1)}}setValidator(e){this._currentCellValidator=e}renderCellPendingIndicator(e){var t=e.find(".".concat(cf));if(!t.length){var i=e;t=(0,b.Z)("<div>").appendTo(i).addClass(cf),this._createComponent(t,Xs.Z),e.addClass(Db)}}disposeCellPendingIndicator(e){var t=e.find(".".concat(cf));if(t.length){var i=Xs.Z.getInstance(t);i&&(i.dispose(),i.$element().remove()),e.removeClass(Db)}}validationStatusChanged(e){var{validator:t}=e,i=t.option("validationGroup"),{column:a}=t.option("dataGetter")();this.updateCellValidationResult({rowKey:i.key,columnIndex:a.index,validationResult:e})}validatorInitialized(e){e.component.on("validating",this.validationStatusChanged.bind(this)),e.component.on("validated",this.validationStatusChanged.bind(this))}validatorDisposing(e){var t=e.component,i=t.option("validationGroup"),{column:a}=t.option("dataGetter")(),n=this.getCellValidationResult({rowKey:i?.key,columnIndex:a.index});Hl(n)&&"pending"===n.status&&this.cancelCellValidationResult({change:i,columnIndex:a.index})}applyValidationResult(e,t){var{validator:i}=t,a=i.option("validationGroup"),{column:n}=i.option("dataGetter")();if(t.brokenRules&&t.brokenRules.forEach(u=>{u.columnIndex=n.index,u.column=n}),e){var s=this.getCellValidationResult({rowKey:a.key,columnIndex:n.index}),o=Hl(s)&&s.disabledPendingId===t.id;if(this._disableApplyValidationResults||o)return;if("invalid"===t.status){var l=e.find(":focus");(0,fu.si)(l)||(z.Z.trigger(l,"focus"),z.Z.trigger(l,kt.Z.down))}var d=!n.editCellTemplate&&this._editorFactoryController.getEditorInstance(e);"pending"===t.status?d?d.option("validationStatus","pending"):this.renderCellPendingIndicator(e):d?d.option("validationStatus","valid"):this.disposeCellPendingIndicator(e),e.toggleClass(this.addWidgetPrefix(xb),"invalid"===t.status)}}_syncInternalEditingData(e){var t,i=this._editingController,a=i.getChangeByKey(e.key),n=i._getOldData(e.key),s=null===(t=e.row)||void 0===t?void 0:t.oldData;a&&s&&!n&&i._addInternalData({key:e.key,oldData:s})}createValidator(e,t){var i,a,n,s=this._editingController,{column:o}=e,{showEditorAlways:l}=o;if(!(0,C.$K)(o.command)&&o.validationRules&&Array.isArray(o.validationRules)&&o.validationRules.length){var u=s.getIndexByKey(e.key,s.getChanges())>-1;if(!u){l||(l=((null===(i=this._columnsController)||void 0===i?void 0:i.getVisibleColumns())||[]).some(j=>j.showEditorAlways));var f=(0,le.bY)(this.option("editing.editRowKey"),e.key),p=s.isCellOrBatchEditMode()&&s.allowUpdating({row:e.row});u=f||p&&l,p&&l&&s._addInternalData({key:e.key,oldData:null!==(n=null===(a=e.row)||void 0===a?void 0:a.oldData)&&void 0!==n?n:e.data})}if(u){if(t&&!t.length)return void At.Z.log("E1050");this._syncInternalEditingData(e);var _=this._getValidationData(e.key,!0),w=()=>{var j=s.getChangeByKey(_?.key),Q=o.calculateCellValue(j?.data||{});return void 0!==Q?Q:e.value},S=t&&t.hasClass("dx-widget");t&&t.addClass(this.addWidgetPrefix(Tb));var x=new of(t||(0,b.Z)("<div>"),{name:o.caption,validationRules:(0,B.l)(!0,[],o.validationRules),validationGroup:_,adapter:S?null:{getValue:w,applyValidationResults:j=>{this.applyValidationResult(t,j)}},dataGetter(){var j=_?.key,Q=s.getChangeByKey(j),q=s._getOldData(j);return{data:(0,Wr.FL)(q,Q?.data),column:o}},onInitialized:this.validatorInitialized.bind(this),onDisposing:this.validatorDisposing.bind(this)});if(S){var E=x.option("adapter");if(E){var V=E.bypass,N=()=>e.row.isNewRow&&!this._isValidationInProgress&&!s.isCellModified(e);E.getValue=w,E.validationRequestsCallbacks=[],E.bypass=()=>V.call(E)||N()}}return x}}}setDisableApplyValidationResults(e){this._disableApplyValidationResults=e}getDisableApplyValidationResults(){return this._disableApplyValidationResults}isCurrentValidatorProcessing(e){var{rowKey:t,columnIndex:i}=e;return this._currentCellValidator&&(0,le.bY)(this._currentCellValidator.option("validationGroup").key,t)&&this._currentCellValidator.option("dataGetter")().column.index===i}validateCell(e){var t={rowKey:e.option("validationGroup").key,columnIndex:e.option("dataGetter")().column.index,validationResult:null},i=this.getCellValidationResult(t),a=Hl(i),n=e.option("adapter");if(a){var s=n.getValue();(0,le.bY)(s,i.value)||(i=e.validate())}else i=e.validate();var o=new X.BH;return a&&"pending"===i.status&&(this.updateCellValidationResult(t),n.applyValidationResults(i)),(0,X.gx)(i.complete||i).done(l=>{a&&n.applyValidationResults(l),o.resolve(l)}),o.promise()}updateCellValidationResult(e){var{rowKey:t,columnIndex:i,validationResult:a}=e,n=this._getValidationData(t);if(n){var s;if(n.validationResults||(n.validationResults={}),a){if(s=(0,B.l)({},a),n.validationResults[i]=s,"pending"===a.status&&(this._editingController.getEditMode()===lo&&(s.deferred=new X.BH,s.complete.always(()=>{s.deferred.resolve()}),this._editingController.addDeferred(s.deferred)),this._disableApplyValidationResults))return void(s.disabledPendingId=a.id)}else s=n.validationResults[i];s&&s.disabledPendingId&&delete s.disabledPendingId}}getCellValidationResult(e){var a,{rowKey:t,columnIndex:i}=e,n=this._getValidationData(t,!0);return null===(a=n?.validationResults)||void 0===a?void 0:a[i]}removeCellValidationResult(e){var{change:t,columnIndex:i}=e,a=this._getValidationData(t?.key);a&&a.validationResults&&(this.cancelCellValidationResult({change:t,columnIndex:i}),delete a.validationResults[i])}cancelCellValidationResult(e){var{change:t,columnIndex:i}=e,a=this._getValidationData(t.key);if(t&&a.validationResults){var n=a.validationResults[i];n&&(n.deferred&&n.deferred.reject(Ml),a.validationResults[i]=Ml)}}resetRowValidationResults(e){e&&(e.validationResults&&delete e.validationResults,delete e.validated)}isInvalidCell(e){var{rowKey:t,columnIndex:i}=e,a=this.getCellValidationResult({rowKey:t,columnIndex:i});return Hl(a)&&"invalid"===a.status}getCellValidator(e){var{rowKey:t,columnIndex:i}=e,a=this._getValidationData(t),n=a&&Yt.Z.getGroupConfig(a),s=n&&n.validators;return s&&s.filter(o=>{var{column:l}=o.option("dataGetter")();return!!l&&l.index===i})[0]}setCellValidationStatus(e){var t=this.getCellValidationResult({rowKey:e.key,columnIndex:e.column.index});(0,C.$K)(t)?e.validationStatus=t!==Ml?t.status:Ml:delete e.validationStatus}}},extenders:{controllers:{editing:r=>class extends r{processDataItemTreeListHack(e){super.processDataItem.apply(this,arguments)}processItemsTreeListHack(e,t){return super.processItems.apply(this,arguments)}_addChange(e){var t=super._addChange.apply(this,arguments);return t&&"remove"!==e.type&&this._validatingController.updateValidationState(t),t}_handleChangesChange(e){super._handleChangesChange.apply(this,arguments),e.value.forEach(t=>{void 0===this._validatingController._getValidationData(t.key)&&this._validatingController.updateValidationState(t)})}_updateRowAndPageIndices(){var e=this,t=e.getView("rowsView").getTopVisibleItemIndex(),i=t;(0,Y.S6)(e.getChanges(),(a,n)=>{var{key:s,type:o}=n,l=this._validatingController._getValidationData(s);l&&!l.isValid&&l.pageIndex!==e._pageIndex&&(l.pageIndex=e._pageIndex,l.rowIndex=o===kl?t:i,i++)})}_getValidationGroupsInForm(e){return{validationGroup:this._validatingController._getValidationData(e.key,!0)}}_validateEditFormAfterUpdate(e,t){t&&this._editForm&&this._editForm.validate(),super._validateEditFormAfterUpdate.apply(this,arguments)}_prepareEditCell(e){var t=super._prepareEditCell.apply(this,arguments);return t&&e.column.showEditorAlways&&this._validatingController.updateValidationState({key:e.key}),t}processItems(e,t){var i=this.getChanges(),a=(s,o)=>{var l=-1,d=s.type===kl,{key:u}=s;return(0,Y.S6)(o,(c,f)=>{if((0,le.bY)(u,d?f.key:this._dataController.keyOf(f)))return l=c,!1}),l},n=(e=super.processItems(e,t)).length;return this.getEditMode()===Fu&&"prepend"!==t&&"append"!==t&&i.forEach(s=>{var{key:o}=s,l=this._validatingController._getValidationData(o);l&&s.type&&l.pageIndex===this._pageIndex&&s?.pageIndex!==this._pageIndex&&function(d,u){var c={key:d.key};if(!(a(d,e)>=0)){u.rowIndex=u.rowIndex>n?u.rowIndex%n:u.rowIndex;var{rowIndex:p}=u;c[Rb]=1,e.splice(p,0,c)}}(s,l)}),e}processDataItem(e){var t=e.data[Rb],i=t?e.data.key:e.key;if(this.getEditMode()===Fu&&t&&i){var n=this.getChanges(),s=Ae.getIndexByKey(i,n);if(s>=0){var o=n[s];if(o.type!==kl){var l=this._getOldData(o.key);e.data=(0,B.l)(!0,{},l,o.data),e.key=i}}}super.processDataItem.apply(this,arguments)}_createInvisibleColumnValidators(e){var t=this,i=this._columnsController.getColumns(),a=this._columnsController.getInvisibleColumns().filter(l=>!l.isBand),n=this._columnsController.getGroupColumns().filter(l=>!l.showWhenGrouped&&-1===a.indexOf(l)),s=[],o=(l,d)=>this._dataController.getRowIndexByKey(d)>=0&&a.indexOf(l)<0;return a.push(...n),Pb.includes(this.getEditMode())||(0,Y.S6)(i,(l,d)=>{e.forEach(u=>{var c;if(!o(d,u.key)){if(u.type===kl)c=u.data;else if("update"===u.type){var f=t._getOldData(u.key);if(!(0,C.$K)(f))return;c=(0,Wr.FL)(f,u.data)}if(c){var p=this._validatingController.createValidator({column:d,key:u.key,value:d.calculateCellValue(c)});p&&s.push(p)}}})}),function(){s.forEach(l=>{l.dispose()})}}_beforeSaveEditData(e,t){var i=super._beforeSaveEditData.apply(this,arguments),a=this._validatingController._getValidationData(e?.key);if(e)i=i||!("remove"===e.type||a.isValid);else{var s=this._createInvisibleColumnValidators(this.getChanges());i=new X.BH,this.executeOperation(i,()=>{this._validatingController.validate(!0).done(o=>{switch(s(),this._updateRowAndPageIndices(),this.getEditMode()){case lo:o||this._focusEditingCell();break;case Fu:o||(this._resetEditRowKey(),this._resetEditColumnName(),this._dataController.updateItems())}i.resolve(!o)})})}return i.promise?i.promise():i}_beforeEditCell(e,t,i){var a=super._beforeEditCell(e,t,i);if(this.getEditMode()===lo){var n=this._rowsView._getCellElement(e,t),s=n&&n.data("dxValidator"),o=n&&n.closest(".dx-row").data("options"),l=s&&s.option("adapter").getValue();if(s&&Fb(l,o)){var d=new X.BH;return(0,X.gx)(this._validatingController.validateCell(s),a).done((u,c)=>{d.resolve("valid"===u.status&&c)}),d.promise()}if(!s)return a}return!1}_afterSaveEditData(e){var t,i=this.getEditMode()===lo;if((0,Y.S6)(this.getChanges(),(d,u)=>{var c=this._showErrorRow(u);t=t||c}),t){var a=this._rowsView.getScrollable();a&&(a.update(),a.scrollToElement(t))}if(e&&i&&this._needUpdateRow()){var n=this.getEditRowIndex();this._dataController.updateItems({changeType:"update",rowIndices:[n]}),this._focusEditingCell()}else if(!e){var s=!0;i&&(s=!(this._columnsController.getColumns().filter(d=>{var u;return d.showEditorAlways&&(null===(u=d.validationRules)||void 0===u?void 0:u.length)>0}).length>0)),s&&this._validatingController.initValidationState()}}_handleDataChanged(e){var t=this._validatingController._validationState;"standard"===this.option("scrolling.mode")&&this.resetRowAndPageIndices(),"prepend"===e.changeType&&(0,Y.S6)(t,(i,a)=>{a.rowIndex+=e.items.length}),super._handleDataChanged(e)}resetRowAndPageIndices(){(0,Y.S6)(this._validatingController._validationState,(t,i)=>{i.pageIndex!==this._pageIndex&&(delete i.pageIndex,delete i.rowIndex)})}_beforeCancelEditData(){this._validatingController.initValidationState(),super._beforeCancelEditData()}_showErrorRow(e){var t,i=this._dataController.items(),a=this.getIndexByKey(e.key,i),n=this._validatingController._getValidationData(e.key);if(!n?.isValid&&n?.errorText&&a>=0)return t=this.getPopupContent(),this._errorHandlingController&&this._errorHandlingController.renderErrorRow(n?.errorText,a,t)}updateFieldValue(e){var t=new X.BH;return this._validatingController.removeCellValidationResult({change:this.getChangeByKey(e.key),columnIndex:e.column.index}),super.updateFieldValue.apply(this,arguments).done(()=>{var i=this._validatingController.getCellValidator({rowKey:e.key,columnIndex:e.column.index});(0,X.gx)(i&&this._validatingController.validateCell(i)).done(a=>{this._editorFactoryController.refocus(),t.resolve(a)})}),t.promise()}highlightDataCell(e,t){super.highlightDataCell.apply(this,arguments),this._validatingController.setCellValidationStatus(t);var i=!!t.setValue,a=this.isCellModified(t),n=(0,C.$K)(t.validationStatus);if(a&&t.column.setCellValue||i&&!a&&!t.row.isNewRow&&n){var o=e.data("dxValidator");o&&(0,X.gx)(this._validatingController.validateCell(o)).done(()=>{this._validatingController.setCellValidationStatus(t)})}}getChangeByKey(e){var t=this.getChanges();return t[Ae.getIndexByKey(e,t)]}isCellModified(e){var t=super.isCellModified(e),i=this.getChangeByKey(e.key),a=!!e.row&&this._validatingController.isInvalidCell({rowKey:e.key,columnIndex:e.column.index});return t||this._validatingController._rowIsValidated(i)&&a}},editorFactory:r=>class extends r{_showRevertButton(e){var t,i=null===(t=this._revertTooltip)||void 0===t?void 0:t.$element();if(!e||!e.length)return i?.remove(),void(this._revertTooltip=void 0);if(!e.find(i).length){var a=e.closest(".".concat(this.addWidgetPrefix(Ob))).parent(),n=this.addWidgetPrefix(uf);i?.remove(),i=(0,b.Z)("<div>").addClass(n).appendTo(e);var s={animation:null,visible:!0,width:"auto",height:"auto",shading:!1,container:a,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{class:n},contentTemplate:()=>{var o=(0,b.Z)("<div>").addClass("dx-revert-button"),l={icon:"revert",hint:this.option("editing.texts.validationCancelChanges"),elementAttr:{id:Ab,"aria-label":ae.Z.format("dxDataGrid-ariaRevertButton")},onClick:()=>{this._editingController.cancelEditData()}};return new Or.Z(o,l).$element()},position:{my:"left top",at:"right top",offset:"1 0",collision:"flip",boundaryOffset:"0 0",boundary:this._rowsView.element(),of:e},onPositioned:this._positionedHandler.bind(this)};this._revertTooltip=new $s.Z(i,s)}}_hideFixedGroupCell(e,t){var i,a,n=this._rowsView.isFixedColumns(),s=this._editingController.isFormOrPopupEditMode();if(n&&!s){var o=e.closest(".dx-row").next().data("options");o&&"group"===o.rowType&&(i=(0,b.Z)(this._rowsView.getRowElement(o.rowIndex)).last(),(a=i.find(".".concat("dx-group-cell"))).length&&"hidden"!==a.get(0).style.visibility&&(a.css("visibility","hidden"),t.onDisposing=function(){a.css("visibility","")}))}}_positionedHandler(e,t){if(!e.component.__skipPositionProcessing){var i=(0,b.Z)(e.element).hasClass(this.addWidgetPrefix(uf)),a=!i&&this._rowsView.updateFreeSpaceRowHeight(),n=this._normalizeValidationMessagePositionAndMaxWidth(e,i,t);e.component.__skipPositionProcessing=!(!a&&!n),n?e.component.option(n):a&&e.component.repaint()}}_showValidationMessage(e,t,i){var a,n=e.find(".dx-dropdowneditor-overlay").data("dxPopup"),s=n&&n.option("visible"),o=s?"top right":"top ".concat(i),l=s?"top left":"bottom ".concat(i),u=(null===(a=this._columnsController.getFixedColumns())||void 0===a?void 0:a.length)>0?this.getView("rowsView").element():e.closest(".".concat(this.addWidgetPrefix(Ob))),c="";t&&t.forEach(w=>{c+=(c.length?"<br/>":"")+(0,ca.HZ)(w)});var f=this.addWidgetPrefix(hf);this._rowsView.element().find(".".concat(f)).remove();var p=(0,b.Z)("<div>").addClass(Sb).addClass(Ib).addClass(f).html(c).appendTo(e),_={container:u,shading:!1,width:"auto",height:"auto",visible:!0,animation:!1,propagateOutsideClick:!0,hideOnOutsideClick:!1,wrapperAttr:{id:Eb,class:"".concat(Sb," ").concat(Ib," ").concat(f)},position:{collision:"flip",boundary:this._rowsView.element(),boundaryOffset:"0 0",offset:{x:0,y:!s&&ni.Z.mozilla?-1:0},my:o,at:l,of:e},onPositioned:w=>{this._positionedHandler(w,s),this._shiftValidationMessageIfNeed(w.component.$content(),e)}};this._hideFixedGroupCell(e,_),new $s.Z(p,_)}_hideValidationMessage(){var e,t=null===(e=this._rowsView.element())||void 0===e?void 0:e.find(this._getValidationMessagesSelector());t?.remove()}_normalizeValidationMessagePositionAndMaxWidth(e,t,i){var a=this._columnsController.getFixedColumns();if(a&&a.length){var n,s=!t&&function(r,e){var t=(0,b.Z)(e).closest("tr").index(),i=(0,b.Z)(r._rowsView.getRowElement(t)).first().children().filter(":not(.dx-hidden-cell)");return r._rowsView._getWidths(i).reduce((a,n)=>a+n,0)}(this,e.element),o=e.component.$content(),l=(0,we.Y_)(o,!0),d=!t&&l>s,u=this._rowsView.getCellIndex((0,b.Z)(e.element).closest("td")),c=function(r){var e,t;return r.some((i,a)=>{if("transparent"===i.command)return e=0===a?-1:a,t=a===r.length-1?-1:a+i.colspan-1,!0}),{startColumnIndex:e,endColumnIndex:t}}(a);return t||u!==c.startColumnIndex&&!d?u===c.endColumnIndex&&(n={collision:"none flip",my:"top right",at:t||i?"top left":"bottom right"},t&&(n.offset="-1 0")):n={collision:"none flip",my:"top left",at:i?"top right":"bottom left"},n&&{position:n,maxWidth:d?s-2:void 0}}}_shiftValidationMessageIfNeed(e,t){var i=this._revertTooltip&&this._revertTooltip.$content();if(i){var a=e.offset(),n=i.offset();if(a.top===n.top&&a.left+(0,we.dz)(e)>n.left){var s=(0,we.dz)(i)+2;e.css("left",n.left<t.offset().left?-s:s)}}}_getRevertTooltipsSelector(){var e=this.addWidgetPrefix(uf);return".dx-editor-cell .".concat(e)}_getValidationMessagesSelector(){var e=this.addWidgetPrefix(hf);return".dx-editor-cell .".concat(e,", .dx-cell-modified .").concat(e)}loseFocus(e){e||this._validatingController.setValidator(null),super.loseFocus()}updateCellState(e,t,i){var a,n=e?.closest(this._getFocusCellSelector()),s=n?.is("td")?n:null,o=n?.closest(".dx-row").data("options"),l=o?this._editingController.getChangeByKey(o.key):null,d=s&&this._columnsController.getVisibleColumns()[s.index()],u=void 0!==(null===(a=l?.data)||void 0===a?void 0:a[d?.name])&&!this._editingController.isSaving(),c=[];if(this._editingController.getEditMode()===lo&&("invalid"===t?.status||u?(this._showRevertButton(n),c.push(Ab)):this._revertTooltip&&this._revertTooltip.$element().remove()),t&&"invalid"===t.status&&s&&d&&t&&t.brokenRules){var p=[];t.brokenRules.forEach(_=>{_.message&&p.push(_.message)}),p.length&&(this._showValidationMessage(n,p,d.alignment||"left"),c.push(Eb))}this._updateAriaValidationAttributes(n,c),!i&&this._rowsView.element()&&this._rowsView.updateFreeSpaceRowHeight()}_updateAriaValidationAttributes(e,t){if(0!==t.length){var i=this._editingController.getEditMode();if([lo,Fu,Lb].includes(i)){var n=this._getCurrentFocusElement(e);n.attr("aria-labelledby",t.join(" ")),n.attr("aria-invalid",!0)}}}_getCurrentFocusElement(e){return this._editingController.isEditing()?e.find(Zp).first():e}focus(e,t){if(!arguments.length)return super.focus();if(this._hideValidationMessage(),e?.hasClass("dx-row")||e?.hasClass("dx-master-detail-cell"))return super.focus(e,t);var o,i=e?.closest(this._getFocusCellSelector()),a=i&&(i.data("dxValidator")||e.find(".".concat(this.addWidgetPrefix(Tb))).eq(0).data("dxValidator")),n=i&&i.closest(".dx-row").data("options"),s=n?this._editingController.getChangeByKey(n.key):null;if(a){this._validatingController.setValidator(a);var l=a.option("adapter").getValue();if(Fb(l,n)||this._validatingController._rowIsValidated(s))return this._editingController.waitForDeferredOperations().done(()=>{0===e.closest("tr").length||(0,X.gx)(this._validatingController.validateCell(a)).done(u=>{o=u;var{column:c}=o.validator.option("dataGetter")();s&&c&&!this._validatingController.isCurrentValidatorProcessing({rowKey:s.key,columnIndex:c.index})||(!(0,Lt.dC)((0,Lt.Vk)())&&"invalid"===o.status&&(t=!0),this.updateCellState(e,o,t),super.focus.call(this,e,t))})}),super.focus(e,t)}return this.updateCellState(e,o,t),super.focus(e,t)}getEditorInstance(e){var t=e.find(".dx-texteditor").eq(0);return Ae.getWidgetInstance(t)}},data:r=>class extends r{_getValidationStatus(e){return(Hl(e)?e.status:e)||"valid"}_isCellChanged(e,t,i,a,n){var s,o,l=null===(s=e.cells)||void 0===s?void 0:s[a],d=this._getValidationStatus({status:l?.validationStatus}),u=this._validatingController.getCellValidationResult({rowKey:e.key,columnIndex:a}),c=this._validatingController._getValidationData(e.key),f=this._getValidationStatus(u),p=JSON.stringify(t.modifiedValues)!==JSON.stringify(e.modifiedValues),_=d!==f&&p,w=(0,b.Z)(l?.cellElement).hasClass(this.addWidgetPrefix(xb)),S=null===(o=l?.column.validationRules)||void 0===o?void 0:o.length;return!!(e.isEditing!==t.isEditing&&S||_||c.isValid&&w)||super._isCellChanged.apply(this,arguments)}}},views:{rowsView:r=>class extends r{updateFreeSpaceRowHeight(e){var t,i,a,n=this.element(),s=n&&n.find(".".concat(this.addWidgetPrefix(hf)," .dx-overlay-content"));if(super.updateFreeSpaceRowHeight(e),s&&s.length&&(t=this._getRowElements(),(i=(a=this._getFreeSpaceRowElements(e)).first())&&1===t.length&&(!i.is(":visible")||(0,we.zp)(s)>(0,we.zp)(i))))return a.show(),(0,we.QQ)(a,(0,we.zp)(s)),!0}_formItemPrepared(e,t){super._formItemPrepared.apply(this,arguments),(0,le.Su)(()=>{var i=t.find(".dx-widget").first();i.length&&!i.children().length||this._validatingController.createValidator(e,i)})}_cellPrepared(e,t){this._editingController.isFormOrPopupEditMode()||this._validatingController.createValidator(t,e),super._cellPrepared.apply(this,arguments)}_restoreErrorRow(e){this._editingController&&this._editingController.hasChanges()&&this._getRowElements(e).each((t,i)=>{var a=(0,b.Z)(i).data("options");if(a){var n=this._editingController.getChangeByKey(a.key);n&&this._editingController._showErrorRow(n)}})}}}}};He.registerModule("validating",uB);var pf="scrolling.legacyMode",Vb=r=>r.option("scrolling.loadTwoPagesOnStart")||r._controller.isVirtual()||r._controller.getViewportItemIndex()>0,Vu=r=>r._cache.length?r._cache[0].pageIndex:-1,ff=r=>r._cache.length?r._cache[r._cache.length-1].pageIndex:-1,Nu=(r,e,t)=>{r._isChangedFiring=!0,e(t),r._isChangedFiring=!1},Nb=(r,e,t)=>{if(r._isDelayChanged)return r._isDelayChanged=!1,Nu(r,e,t),!0},Bu=(r,e)=>{var t=r.option("scrolling.preloadEnabled"),i=(r=>{var e=r._dataOptions.pageSize();if(r.option("scrolling.preventPreload"))return 0;var i=r._controller.viewportSize();if(r._controller.isVirtualMode()&&r.option("scrolling.removeInvisiblePages")){i=0;for(var a=r._controller.viewportSize()*r._controller.viewportItemSize(),n=r._controller.getContentOffset(),s=r._controller.getViewportPosition(),o=r._controller.virtualItemsCount(),l=r._dataOptions.totalItemsCount(),d=o.begin;d<l&&!(n>=s+a);d++)(n+=r._controller.getItemSizes()[d]||r._controller.viewportItemSize())>=s&&i++}return e&&i>0?Math.ceil(i/e):1})(r),a=r._controller.isAppendMode();return i&&(e?i=t?1:0:(t&&i++,(a||!Vb(r))&&i--)),i},Bb=(r,e,t,i,a)=>{var n=r._dataOptions,s=n.items().slice(),o=(0,C.Kn)(t)?t:void 0,l="prepend"===t,d=n.viewportItems();t&&(0,C.HD)(t)&&!r._isDelayChanged&&(o={changeType:t,items:s},a&&(o.removeCount=a.itemsCount,o.removeCount&&n.correctCount&&(o.removeCount=n.correctCount(d,o.removeCount,l))));var u=a?a.itemsLength:0;u&&n.correctCount&&(u=n.correctCount(d,u,l)),"append"===t?(d.push.apply(d,s),a&&d.splice(0,u)):l?(d.unshift.apply(d,s),a&&d.splice(-u)):r._dataOptions.viewportItems(s),n.updateLoading(),r._lastPageIndex=r.pageIndex(),r._isDelayChanged=i,i||Nu(r,e,o)};class fB{constructor(e,t){this._dataOptions=t,this._controller=e,this._pageIndex=this._lastPageIndex=t.pageIndex(),this._cache=[],this._loadingPageIndexes={}}option(){return this._controller.option.apply(this._controller,arguments)}viewportItemIndexChanged(e){var o,t=this._dataOptions.pageSize(),i=this._dataOptions.pageCount(),a=this._controller.isVirtualMode(),n=this._controller.isAppendMode(),s=this._dataOptions.totalItemsCount();if(t&&(a||n)&&s>=0){var l=this._controller.viewportSize();if(l&&e+l>=s&&!this._controller.isVirtual())if(this._dataOptions.hasKnownLastPage()){var d=s%t;(o=i-1)>0&&d>0&&d<l&&o--}else o=i;else{o=Math.floor(e/t);var u=i-1;o=Math.max(o,0),o=Math.min(o,u)}return this.pageIndex(o),this.load()}}pageIndex(e){var t=this._controller.isVirtualMode(),i=this._controller.isAppendMode();return!1!==this.option(pf)&&(t||i)?(void 0!==e&&(this._pageIndex=e),this._pageIndex):this._dataOptions.pageIndex(e)}beginPageIndex(e){var t=Vu(this);return t<0&&(t=void 0!==e?e:this.pageIndex()),t}endPageIndex(){var e=ff(this);return e>0?e:this._lastPageIndex}pageSize(){return this._dataOptions.pageSize()}load(){var t,e=this._dataOptions,i=this._controller.isVirtualMode(),a=this._controller.isAppendMode();if(!1!==this.option(pf)&&(i||a)){var n=(r=>{var e=-1,t=Vu(r),i=r._dataOptions;return t<0?e=r._pageIndex:r._cache[r._pageIndex-t]?t>=0&&r._controller.viewportSize()>=0&&(t>0&&(ff(r)+1===i.pageCount()&&r._cache.length<Bu(r)+1||r._pageIndex===t&&Bu(r,!0))&&(e=t-1),e<0&&t+r._cache.length<=r._pageIndex+Bu(r)&&(e=t+r._cache.length)):e=r._pageIndex,r._loadingPageIndexes[e]&&(e=-1),e})(this);if(n>=0){var s=((r,e)=>{var t=r._dataOptions;if(e===r.pageIndex()||!t.isLoading()&&e<t.pageCount()||!t.hasKnownLastPage()&&e===t.pageCount())return t.pageIndex(e),r._loadingPageIndexes[e]=!0,(0,X.gx)(t.load()).always(()=>{r._loadingPageIndexes[e]=!1})})(this,n);s&&(t=new X.BH,s.done(()=>{var o=this._delayDeferred;o?o.done(t.resolve).fail(t.reject):t.resolve()}).fail(t.reject),e.updateLoading())}}else t=e.load();return!t&&this._lastPageIndex!==this.pageIndex()&&this._dataOptions.onChanged({changeType:"pageIndex"}),t||(new X.BH).resolve()}loadIfNeed(){var e=this._controller.isVirtualMode(),t=this._controller.isAppendMode();if((e||t)&&!this._dataOptions.isLoading()&&(!this._isChangedFiring||this._controller.isVirtual())){var i=this._controller.getViewportPosition();i>0?this._controller._setViewportPositionCore(i):this.load()}}handleDataChanged(e,t){var n,s,i=this._dataOptions,a=this._cache.length,o=this._controller.isVirtualMode(),l=this._controller.isAppendMode();if(t&&t.changes)Nu(this,e,t);else if(!1!==this.option(pf)&&(o||l)){var d=Vu(this);if(d>=0&&(o&&d+this._cache.length!==i.pageIndex()&&d-1!==i.pageIndex()&&(a=0,this._cache=[]),l))if(0===i.pageIndex())this._cache=[];else if(i.pageIndex()<ff(this))return void Nu(this,e,{changeType:"append",items:[]});var c,u={pageIndex:i.pageIndex(),itemsLength:i.items(!0).length,itemsCount:this.itemsCount(!0)};this.option("scrolling.removeInvisiblePages")&&o?s=this._cache.length>Math.max(Bu(this)+(this.option("scrolling.preloadEnabled")?1:0),2):Nb(this,e,{isDelayed:!0}),d===i.pageIndex()+1?(s&&(c=this._cache.pop()),n="prepend",this._cache.unshift(u)):(s&&(c=this._cache.shift()),n="append",this._cache.push(u));var f=o&&0===a&&Vb(this);Bb(this,e,this._cache.length>1?n:void 0,f,c),this._delayDeferred=this.load().done(()=>{Nb(this,e)&&this.load()})}else Bb(this,e,t)}getDelayDeferred(){return this._delayDeferred}itemsCount(e){var t=0,i=this._controller.isVirtualMode();return!e&&i?this._cache.forEach(a=>{t+=a.itemsCount}):t=this._dataOptions.itemsCount(),t}virtualItemsCount(){var e=Vu(this);e<0&&(e=this._dataOptions.pageIndex());var t=e*this._dataOptions.pageSize(),i=this._cache.length*this._dataOptions.pageSize();return{begin:t,end:Math.max(0,this._dataOptions.totalItemsCount()-i-t)}}reset(){this._loadingPageIndexes={},this._cache=[]}}var kb="virtual",ku="scrolling.legacyMode",Mb=r=>r.option("scrolling.mode")===kb||r._isVirtual;function Hb(r,e,t){var i,a=[],n=[],s=[];function o(c){var f=c.element?c.$element():c,p=_n.Z.offset(f);return p?c.scrollTop()-(p.top-r.offset().top):r.offset().top}var c,f,l={on(c,f,p){c.on("scroll",p)},off(c,f,p){c.off("scroll",p)}};function d(c){var x,f="#document"===c.get(0).nodeName,p=c.get(0).nodeType===(0,Je.Jj)().Node.ELEMENT_NODE,_=c.data("dxScrollable"),w=l;if(_||(_=f&&(0,b.Z)((0,Je.Jj)())||p&&"auto"===c.css("overflowY")&&c,w=z.Z,_)){var S=(x=_,function(){var E=x.scrollTop()-o(x);e(E=E>0?E:0)});w.on(_,"scroll",S),n.push(x=>{var E=o(_);x-E>=0&&_[_.scrollTo?"scrollTo":"scrollTop"](x+E)}),a.push(_),s.push(()=>{w.off(_,"scroll",S)})}}for(i=(t=t||r).parent();i.length;void 0,i=(0,b.Z)(null!==(f=(c=i).get(0).parentNode)&&void 0!==f?f:c.get(0).host))d(i);return{scrollTo(c){(0,Y.S6)(n,(f,p)=>{p(c)})},dispose(){(0,Y.S6)(s,(c,f)=>{f()})}}}class vf{constructor(e,t,i){this._dataOptions=t,this.component=e,this._viewportSize=!1===e.option(ku)?15:0,this._viewportItemSize=20,this._viewportItemIndex=0,this._position=0,this._isScrollingBack=!1,this._contentSize=0,this._itemSizes={},this._sizeRatio=1,this._isVirtual=i,this.positionChanged=(0,sr.Z)(),this._dataLoader=new fB(this,this._dataOptions)}getItemSizes(){return this._itemSizes}option(e,t){return this.component.option.apply(this.component,arguments)}isVirtual(){return this._isVirtual}virtualItemsCount(){if(Mb(this)){var e=this._dataOptions,t=e.totalItemsCount();if(!1===this.option(ku)&&-1!==t){var i=this.getViewportParams(),a=e.loadedOffset(),n=e.loadedItemCount(),s=Math.max(i.skip,a),o=Math.min(i.take,n);return{begin:s,end:Math.max(t-(s+o),0)}}return this._dataLoader.virtualItemsCount.apply(this._dataLoader,arguments)}}getScrollingTimeout(){var e,t=this.option("scrolling.renderAsync"),i=0;return(0,C.$K)(t)?t&&(i=null!==(e=this.option("scrolling.timeout"))&&void 0!==e?e:0):(i=Math.min(this.option("scrolling.timeout")||0,this._dataOptions.changingDuration()))<this.option("scrolling.renderingThreshold")&&(i=this.option("scrolling.minTimeout")||0),i}setViewportPosition(e){var t=new X.BH,i=this.getScrollingTimeout();return clearTimeout(this._scrollTimeoutID),i>0?this._scrollTimeoutID=setTimeout(()=>{this._setViewportPositionCore(e),t.resolve()},i):(this._setViewportPositionCore(e),t.resolve()),t.promise()}getViewportPosition(){return this._position}getItemIndexByPosition(e,t,i){e=e??this._position;for(var a=this.getItemSize(),n=0,s=0,o=Object.keys(this._itemSizes).concat(-1),l=0;l<o.length&&n<e;l++){var d=parseInt(o[l]),u=(e-n)/a;if(d<0||s+u<d){s+=u,this._sizeRatio<1&&(0,C.$K)(t)&&(s=t+i/this._viewportItemSize);break}n+=(u=d-s)*a,s+=u;var c=this._itemSizes[d];s+=(n+=c)<e?1:(e-n+c)/c}return Math.round(50*s)/50}isScrollingBack(){return this._isScrollingBack}_setViewportPositionCore(e){var t=this._position||0;this._position=e,t!==this._position&&(this._isScrollingBack=this._position<t);var i=this.getItemIndexByPosition(),a=this.setViewportItemIndex(i);return this.positionChanged.fire(),a}setContentItemSizes(e){var t=this.virtualItemsCount();if(this._contentSize=e.reduce((n,s)=>n+s,0),t){e.forEach((n,s)=>{this._itemSizes[t.begin+s]=n});var i=(t.begin+t.end+this.itemsCount())*this._viewportItemSize,a=Ae.getContentHeightLimit(ni.Z);this._sizeRatio=i>a?a/i:1}}getItemSize(){return this._viewportItemSize*this._sizeRatio}getItemOffset(e,t){var i=this.virtualItemsCount(),a=e;if(!i)return 0;var n=0,s=this._dataOptions.totalItemsCount();return Object.keys(this._itemSizes).forEach(o=>{a&&(t?o>=s-e:o<e)&&(n+=this._itemSizes[o],a--)}),Math.floor(n+a*this._viewportItemSize*this._sizeRatio)}getContentOffset(e){var t="end"===e,i=this.virtualItemsCount();return i?this.getItemOffset(t?i.end:i.begin,t):0}getVirtualContentSize(){return this.virtualItemsCount()?this.getContentOffset("begin")+this.getContentOffset("end")+this._contentSize:0}getViewportItemIndex(){return this._viewportItemIndex}setViewportItemIndex(e){if(this._viewportItemIndex=e,!1!==this.option(ku))return this._dataLoader.viewportItemIndexChanged.apply(this._dataLoader,arguments)}viewportItemSize(e){return void 0!==e&&(this._viewportItemSize=e),this._viewportItemSize}viewportSize(e){return void 0!==e&&(this._viewportSize=e),this._viewportSize}viewportHeight(e,t){var i=t??this._position,a=this.getItemIndexByPosition(i),n=this.getItemIndexByPosition(i+e,a,e);this.viewportSize(Math.ceil(n-a)),!(0,C.$K)(t)&&this._viewportItemIndex!==a&&this._setViewportPositionCore(i)}reset(e){this._dataLoader.reset(),e||(this._itemSizes={})}subscribeToWindowScrollEvents(e){this._windowScroll=this._windowScroll||Hb(e,t=>{this.viewportItemSize()&&this.setViewportPosition(t)})}dispose(){clearTimeout(this._scrollTimeoutID),this._windowScroll&&this._windowScroll.dispose(),this._windowScroll=null}scrollTo(e){this._windowScroll&&this._windowScroll.scrollTo(e)}isVirtualMode(){return Mb(this)}isAppendMode(){return(r=>"infinite"===r.option("scrolling.mode")&&!r._isVirtual)(this)}getViewportParams(){var e,t=this.option("scrolling.mode")===kb,i=this._dataOptions.totalItemsCount(),n=this._dataOptions.hasKnownLastPage()&&this._viewportItemIndex>i?i:this._viewportItemIndex,s=this._viewportSize+n,o=this.option("scrolling.prerenderedRowChunkSize")||1,l=this.isScrollingBack(),d=null!==(e=this.option("scrolling.prerenderedRowCount"))&&void 0!==e?e:1,c=l?0:d,f=Math.floor(Math.max(0,n-(l?d:0))/o)*o,p=Math.ceil((s+c-f)/o)*o;if(t){var _=Math.max(0,i-f);p=Math.min(p,_)}return{skip:f,take:p}}itemsCount(){return this.option(ku)?this._dataLoader.itemsCount.apply(this._dataLoader,arguments):this._dataOptions.itemsCount()}pageIndex(){return this._dataLoader.pageIndex(...arguments)}beginPageIndex(){return this._dataLoader.beginPageIndex(...arguments)}endPageIndex(){return this._dataLoader.endPageIndex(...arguments)}pageSize(){return this._dataLoader.pageSize(...arguments)}load(){return this._dataLoader.load(...arguments)}loadIfNeed(){return this._dataLoader.loadIfNeed(...arguments)}handleDataChanged(){return this._dataLoader.handleDataChanged(...arguments)}getDelayDeferred(){return this._dataLoader.getDelayDeferred()}}var Zb="bottom-load-panel",zb="dx-freespace-row",Mu="dx-virtual-row",ht="scrolling.legacyMode",gf="paging.pageIndex",yB=["beginPageIndex","endPageIndex","pageIndex"],Ui=function(r){return"virtual"===r.option("scrolling.mode")},wa=function(r){return"infinite"===r.option("scrolling.mode")},Kr=function(r){return Ui(r)||wa(r)},Kb=function(r,e,t,i){for(var a=0;a<e+1;a++){var n=r[t?r.length-1-a:a];n&&!i(n,a===e,t)&&e++}return e},Hu=function(r,e){return"data"===r.rowType&&!r.isNewRow||"group"===r.rowType&&e.isGroupItemCountable(r.data)},_f=function(r){var e=r._virtualScrollController.beginPageIndex(-1);Ui(r)&&(e<0||r.viewportSize()>=0&&r.getViewportItemIndex()>=0&&(e*r.pageSize()>r.getViewportItemIndex()||e*r.pageSize()+r.itemsCount()<r.getViewportItemIndex()+r.viewportSize())&&r._dataSource.isLoading()?r._isLoading||(r._isLoading=!0,r.loadingChanged.fire(!0)):r._isLoading&&(r._isLoading=!1,r.loadingChanged.fire(!1)))},ji=function(r,e,t){if(!1===r.option(ht)&&yB.includes(e)){var i=r._dataSource;return i.pageIndex.apply(i,t)}var a=r._virtualScrollController;return a[e].apply(a,t)},$b=function(r,e){var t=r.toArray().map(n=>(0,b.Z)(n).parent(".".concat(e)).get(0)).filter(n=>n);t.length&&(r=(0,b.Z)(t));for(var i=e===zb?r.length-1:r.length,a=0;a<i;a++)r.eq(a).remove()},TB={defaultOptions:()=>({scrolling:{timeout:300,updateTimeout:300,minTimeout:0,renderingThreshold:100,removeInvisiblePages:!0,rowPageSize:5,prerenderedRowChunkSize:1,mode:"standard",preloadEnabled:!1,rowRenderingMode:"standard",loadTwoPagesOnStart:!1,legacyMode:!1,prerenderedRowCount:1}}),extenders:{controllers:{data:r=>class extends r{dispose(){var e=this._rowsScrollController;e&&e.dispose(),super.dispose.apply(this,arguments)}_refreshDataSource(){var e=super._refreshDataSource.apply(this,arguments)||(new X.BH).resolve().promise();return e.done(this.initVirtualRows.bind(this)),e}_loadDataSource(){var e;if(this._rowsScrollController&&Kr(this)){var{loadPageCount:t}=(0,C.$K)(this._loadViewportParams)?this.getLoadPageParams():{loadPageCount:0};t>=1&&(null===(e=this._dataSource)||void 0===e||e.loadPageCount(t))}return super._loadDataSource.apply(this,arguments)}getRowPageSize(){var e=this.option("scrolling.rowPageSize"),t=this.pageSize();return t&&t<e?t:e}reload(){var e=this._rowsScrollController||this._dataSource,t=e&&e.getItemIndexByPosition(),i=super.reload.apply(this,arguments);return i&&i.done(()=>{var a,n;if(Ui(this)||Ae.isVirtualRowRendering(this)){var s=this.getRowIndexOffset(),o=Math.floor(t)-s,{component:l}=this,d=l.getScrollable&&l.getScrollable(),u=this.dataSource().operationTypes().sorting;if(d&&!u&&o>=0){var c=l.getRowElement(o),f=c&&c[0]&&(0,b.Z)(c[0]),p=f&&(null===(a=f.position())||void 0===a?void 0:a.top),_=ni.Z.chrome&&Number(null!==(n=ni.Z.version)&&void 0!==n?n:0)>=91;p&&p>(ni.Z.mozilla||_?1:0)&&(p=Math.round(p+(0,we.zp)(f)*(t%1)),d.scrollTo({y:p}))}}})}initVirtualRows(){var e=Ae.isVirtualRowRendering(this);if(this._allItems=null,this._loadViewportParams=null,"virtual"!==this.option("scrolling.mode")&&!e||!e||!1!==this.option(ht)&&!this.option("scrolling.rowPageSize"))return this._visibleItems=null,void(this._rowsScrollController=null);var t=!Ui(this)&&this.pageIndex()>=this.pageCount()?this.pageCount()-1:this.pageIndex();this._rowPageIndex=Math.ceil(t*this.pageSize()/this.getRowPageSize()),this._visibleItems=!1===this.option(ht)?null:[],this._viewportChanging=!1,this._needUpdateViewportAfterLoading=!1,this._rowsScrollController||(this._rowsScrollController=new vf(this.component,this._getRowsScrollDataOptions(),!0),this._rowsScrollController.positionChanged.add(()=>{var i;if(!1===this.option(ht))return this._viewportChanging=!0,this.loadViewport(),void(this._viewportChanging=!1);null===(i=this._dataSource)||void 0===i||i.setViewportItemIndex(this._rowsScrollController.getViewportItemIndex())})),!1===this.option(ht)&&this._updateLoadViewportParams(),this.isLoaded()&&!1!==this.option(ht)&&this._rowsScrollController.load()}isViewportChanging(){return this._viewportChanging}_getRowsScrollDataOptions(){var e=this,t=function(i){return Hu(i,e._dataSource)};return{pageSize:()=>e.getRowPageSize(),loadedOffset(){var i;return Ui(e)&&(null===(i=e._dataSource)||void 0===i?void 0:i.lastLoadOptions().skip)||0},loadedItemCount:()=>e._itemCount,totalItemsCount:()=>Kr(e)?e.totalItemsCount():!1===e.option(ht)?e._itemCount:e._items.filter(t).length,hasKnownLastPage:()=>!1!==e.option(ht)||e.hasKnownLastPage(),pageIndex:i=>(void 0!==i&&(e._rowPageIndex=i),e._rowPageIndex),isLoading:()=>e.isLoading(),pageCount(){return Math.ceil(this.totalItemsCount()/this.pageSize())||1},load(){e._rowsScrollController.pageIndex()>=this.pageCount()&&(e._rowPageIndex=this.pageCount()-1,e._rowsScrollController.pageIndex(e._rowPageIndex)),(this.items().length||!this.totalItemsCount())&&e._rowsScrollController.handleDataChanged(i=>{(i=i||{}).changeType=i.changeType||"refresh",i.items=i.items||e._visibleItems,e._visibleItems.forEach((a,n)=>{a.rowIndex=n}),e._fireChanged(i)})},updateLoading(){},itemsCount(){return this.items(!0).length},correctCount:(i,a,n)=>Kb(i,a,n,(s,o,l)=>s.isNewRow?o&&!l:o&&l?!s.isNewRow:t(s)),items(i){var a=e._items;if(e.option(ht)){var n=e.dataSource(),s=n?.virtualItemsCount(),o=s?s.begin:0,l=e.getRowPageSize(),d=e._rowPageIndex*l-o,u=l;if(d<0)return[];d&&(d=this.correctCount(a,d),a=a.slice(d)),u&&(u=this.correctCount(a,u),a=a.slice(0,u))}return i?a.filter(t):a},viewportItems:i=>(i&&!1!==e.option(ht)&&(e._visibleItems=i),e._visibleItems),onChanged(){},changingDuration(){var i=e.dataSource();return i?.isLoading()&&!1!==e.option(ht)?300:i?._renderTime||0}}}_updateItemsCore(e){var t=this.getRowIndexDelta();if(super._updateItemsCore.apply(this,arguments),!1===this.option(ht)&&Ae.isVirtualRowRendering(this))"update"===e.changeType&&0===e.rowIndices.length&&e.cancelEmptyChanges&&(e.cancel=!0);else{var i=this._rowsScrollController;if(i){var a=this._visibleItems,n="refresh"===e.changeType||e.isLiveUpdate;if("append"===e.changeType&&e.items&&!e.items.length)return;n||"append"===e.changeType||"prepend"===e.changeType?(e.cancel=!0,n&&i.reset(!0),i.load()):("update"===e.changeType?e.rowIndices.forEach((s,o)=>{var l=e.changeTypes[o],d=e.items[o];"update"===l?a[s]=d:"insert"===l?a.splice(s,0,d):"remove"===l&&a.splice(s,1)}):(a.forEach((s,o)=>{a[o]=this._items[o+t]||a[o]}),e.items=a),function(r){r.forEach((e,t)=>{e.rowIndex=t})}(a))}}}_updateLoadViewportParams(){var e=this._rowsScrollController.getViewportParams(),t=this.pageSize();if(e&&!Kr(this)&&t>0){var i=this.pageIndex()*t;e.skip+=i}this._loadViewportParams=e}_processItems(){var e,t=super._processItems.apply(this,arguments);if(!1===this.option(ht)){var n,s,o,i=this._dataSource,a=null!==(e=i?.lastLoadOptions().skip)&&void 0!==e?e:0,l=!1,d=[];t.forEach(u=>{var{rowType:c}=u,f=Hu(u,i),p="group"===c&&(n||f||"group"!==s&&a>0),_="data"===c&&f&&(n||"group"!==s);!u.isNewRow&&(0,C.$K)(n)&&(p||_)&&(!o||l)&&a++,(p||_)&&(l=!0),u.isNewRow?d.push(u):(d.forEach(S=>{S.loadIndex=a}),d=[]),u.loadIndex=a,n=f,s=c,o=u.isNewRow}),d.forEach(u=>{u.loadIndex=a})}return t}_afterProcessItems(e){if(this._itemCount=e.filter(s=>Hu(s,this._dataSource)).length,(0,C.$K)(this._loadViewportParams)){this._updateLoadViewportParams();var t=e;if(this._allItems=e,e.length){var{skipForCurrentPage:i}=this.getLoadPageParams(!0),a=e[0].loadIndex+i,{take:n}=this._loadViewportParams;t=e.filter(s=>s.loadIndex>=a&&(s.loadIndex<a+n||s.isNewRow&&s.loadIndex===a&&0===n))}return t}return super._afterProcessItems.apply(this,arguments)}_applyChange(e){var t=this,{items:i}=e,{changeType:a}=e,{removeCount:n}=e;switch(n&&(n=Kb(t._items,n,"prepend"===a,(o,l)=>"data"===o.rowType&&!o.isNewRow||"group"===o.rowType&&(t._dataSource.isGroupItemCountable(o.data)||l)),e.removeCount=n),a){case"prepend":t._items.unshift.apply(t._items,i),n&&t._items.splice(-n);break;case"append":t._items.push.apply(t._items,i),n&&t._items.splice(0,n);break;default:super._applyChange(e)}}items(e){return e?this._allItems||this._items:this._visibleItems||this._items}getRowIndexDelta(){var e=0;if(this.option(ht)){var t=this._visibleItems;t&&t[0]&&(e=this._items.indexOf(t[0]))}return e<0?0:e}getRowIndexOffset(e,t){var i,a,n=0,s=this.dataSource(),o=this._rowsScrollController,l=!1===this.option(ht),d=Kr(this);if(o&&!e)if(l&&(0,C.$K)(this._loadViewportParams)){var{skipForCurrentPage:u,pageIndex:c}=this.getLoadPageParams(!0),f=this.items(!0);if(n=d?c*this.pageSize():0,f.length){var p=f[0].loadIndex;n+=f.filter(w=>w.loadIndex<p+u).length}}else n=o.beginPageIndex()*o.pageSize();else if(d&&l&&s){var _=s.lastLoadOptions();n=t&&null!==(i=_.skips)&&void 0!==i&&i.length?_.skips.reduce((w,S)=>w+S,0):null!==(a=_.skip)&&void 0!==a?a:0}else Ui(this)&&s&&(n=s.beginPageIndex()*s.pageSize());return n}getDataIndex(){return!1===this.option(ht)?this.getRowIndexOffset(!0,!0):super.getDataIndex.apply(this,arguments)}viewportSize(){var e=this._rowsScrollController,t=this._dataSource,i=e?.viewportSize.apply(e,arguments);return!1===this.option(ht)?i:t?.viewportSize.apply(t,arguments)}viewportHeight(e,t){var i;null===(i=this._rowsScrollController)||void 0===i||i.viewportHeight(e,t)}viewportItemSize(){var e=this._rowsScrollController,t=this._dataSource,i=e?.viewportItemSize.apply(e,arguments);return!1===this.option(ht)?i:t?.viewportItemSize.apply(t,arguments)}setViewportPosition(){var e=this._rowsScrollController,t=this._dataSource;this._isPaging=!1,e?e.setViewportPosition.apply(e,arguments):t?.setViewportPosition.apply(t,arguments)}setContentItemSizes(e){var t=this._rowsScrollController,i=this._dataSource,a=t?.setContentItemSizes(e);return!1===this.option(ht)?a:i?.setContentItemSizes(e)}getPreloadedRowCount(){var e=this.option("scrolling.preloadedRowCount"),t=this.option("scrolling.preloadEnabled");if((0,C.$K)(e))return e;var i=this.viewportSize();return t?2*i:i}getLoadPageParams(e){var t,i,a=this.pageSize(),n=this._loadViewportParams,s=null===(t=this._dataSource)||void 0===t?void 0:t.lastLoadOptions(),o=s?.pageIndex||0,l=s?.take||0,d=this._rowsScrollController.isScrollingBack(),u=d?this.getPreloadedRowCount():0,c=d?0:this.getPreloadedRowCount(),f=(null===(i=this._dataSource)||void 0===i?void 0:i.totalCountCorrection())||0,p=Math.max(0,n.skip-u),_=e?o:Math.floor(a?p/a:0),S=n.skip-_*a,V=Math.ceil(a?(e?l:n.take+S+c-f)/a:0);return{pageIndex:_,loadPageCount:Math.max(1,V),skipForCurrentPage:Math.max(0,S)}}_updateVisiblePageIndex(e){if(this._rowsScrollController){if((0,C.$K)(e))return this._silentOption(gf,e),void this.pageChanged.fire();var t=this._rowsScrollController.getViewportItemIndex(),i=Math.floor(t/this.pageSize());this.pageIndex()!==i&&(this._silentOption(gf,i),this.updateItems({changeType:"pageIndex"}))}}_getChangedLoadParams(){var e=this.getLoadPageParams(!0),{pageIndex:t,loadPageCount:i}=this.getLoadPageParams(),a=this._pageIndexIsValid(t),n=null;return!this._isLoading&&a&&(t!==e.pageIndex||i!==e.loadPageCount)&&(n={pageIndex:t,loadPageCount:i}),n}_pageIndexIsValid(e){var t=!0;return(wa(this)&&this.hasKnownLastPage()||Ui(this))&&(t=e*this.pageSize()<this.totalItemsCount()),t}_loadItems(e,t){var i,a,n=Kr(this),s=this._dataSource,o=this._getChangedLoadParams(),l=null!==(i=s?.loadPageCount())&&void 0!==i?i:0,d=this.pageSize()*l,u=null!==(a=s?.pageIndex())&&void 0!==a?a:0,c=o?.pageIndex===u,f=wa(this)&&this.totalItemsCount()<d,p="repaint"===this.option("editing.refreshMode"),w=!1;if(!s||n&&e&&(p&&t||o?.pageIndex>u||c&&f))return w;if(n&&this._isLoading&&(this._needUpdateViewportAfterLoading=!0),n&&o){w=!0,s.pageIndex(o.pageIndex),s.loadPageCount(o.loadPageCount),this._repaintChangesOnly=!0,this._needUpdateDimensions=!0;var S=this._viewportChanging;this.load().always(()=>{this._repaintChangesOnly=void 0,this._needUpdateDimensions=void 0}).done(()=>{var x=this.pageCount()>0&&this.pageIndex()===this.pageCount()-1;(S||x)&&this._updateVisiblePageIndex(),this._needUpdateViewportAfterLoading&&(this._needUpdateViewportAfterLoading=!1,this.loadViewport({checkLoadedParamsOnly:!0}))})}return w}loadViewport(e){var t,i,a,{checkLoadedParamsOnly:n,checkLoading:s,viewportIsNotFilled:o}=e??{};if(Kr(this)||Ae.isVirtualRowRendering(this)){this._updateLoadViewportParams();var d=this._loadItems(s,!o),u=null===(t=this._dataSource)||void 0===t?void 0:t.isCustomLoading();if(!(d||s&&!u&&this._isLoading||n)){var p=!(null!==(a=null===(i=this._editingController)||void 0===i?void 0:i.getChanges())&&void 0!==a&&a.length);this.updateItems({repaintChangesOnly:!0,needUpdateDimensions:!0,useProcessedItemsCache:p,cancelEmptyChanges:!0})}}}updateViewport(){var e,t,i=this.viewportSize(),a=this.items().length,n=i>a,s=null!==(t=null===(e=this._loadViewportParams)||void 0===e?void 0:e.take)&&void 0!==t?t:0,o=this._rowsScrollController,l=o?.getViewportParams().take;(n||s<l)&&!this._isPaging&&a&&this.loadViewport({checkLoading:!0,viewportIsNotFilled:n})}loadIfNeed(){if(!1!==this.option(ht)){var e=this._rowsScrollController;e&&e.loadIfNeed();var t=this._dataSource;return t&&t.loadIfNeed()}}getItemSize(){var e=this._rowsScrollController;if(e)return e.getItemSize.apply(e,arguments);var t=this._dataSource;return t&&t.getItemSize.apply(t,arguments)}getItemSizes(){var e=this._rowsScrollController;if(e)return e.getItemSizes.apply(e,arguments);var t=this._dataSource;return t&&t.getItemSizes.apply(t,arguments)}getContentOffset(){var e=this._rowsScrollController;if(e)return e.getContentOffset.apply(e,arguments);var t=this._dataSource;return t&&t.getContentOffset.apply(t,arguments)}refresh(e){var t=this._dataSource;return t&&e&&e.load&&wa(this)&&t.resetCurrentTotalCount(),super.refresh.apply(this,arguments)}topItemIndex(){var e;return null===(e=this._loadViewportParams)||void 0===e?void 0:e.skip}bottomItemIndex(){var e=this._loadViewportParams;return e&&e.skip+e.take}virtualItemsCount(){var e=this._rowsScrollController;if(e)return e.virtualItemsCount.apply(e,arguments);var t=this._dataSource;return t?.virtualItemsCount.apply(t,arguments)}pageIndex(e){var t,i=Kr(this),a=this._rowsScrollController;return!1===this.option(ht)&&i&&a&&void 0===e?null!==(t=this.option(gf))&&void 0!==t?t:0:super.pageIndex.apply(this,arguments)}_fireChanged(e){super._fireChanged.apply(this,arguments);var{operationTypes:t}=e;if(!1===this.option(ht)&&Kr(this)&&t){var{fullReload:i,pageIndex:a}=t;e.isDataChanged&&!i&&a&&this._updateVisiblePageIndex(this._dataSource.pageIndex())}}_getPagingOptionValue(e){var t=super._getPagingOptionValue.apply(this,arguments);return!1===this.option(ht)&&Kr(this)&&(t=this[e]()),t}isEmpty(){return!1===this.option(ht)?!this.items(!0).length:super.isEmpty.apply(this,arguments)}isLastPageLoaded(){var e=!1;if(!1===this.option(ht)&&Kr(this)){var{pageIndex:t,loadPageCount:i}=this.getLoadPageParams(!0);e=t+i>=this.pageCount()}else e=super.isLastPageLoaded.apply(this,arguments);return e}reset(){this._itemCount=0,this._allItems=null,super.reset.apply(this,arguments)}_applyFilter(){var e;return null===(e=this._dataSource)||void 0===e||e.loadPageCount(1),super._applyFilter.apply(this,arguments)}getVirtualContentSize(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.getVirtualContentSize.apply(this._dataSource,arguments)}setViewportItemIndex(){var e;return null===(e=this._dataSource)||void 0===e?void 0:e.setViewportItemIndex.apply(this._dataSource,arguments)}},resizing:r=>class extends r{dispose(){super.dispose.apply(this,arguments),clearTimeout(this._resizeTimeout)}_updateMasterDataGridCore(e){return(0,X.gx)(super._updateMasterDataGridCore.apply(this,arguments)).done(t=>{var i=Ui(e)&&!1===e.option(ht);!t&&i&&e.getScrollable()&&e.updateDimensions()})}hasResizeTimeout(){return!!this._resizeTimeout}resize(){var e;if(Ui(this)||Ae.isVirtualRowRendering(this)){clearTimeout(this._resizeTimeout),this._resizeTimeout=null;var t=new Date-this._lastTime,i=this.option("scrolling.updateTimeout");this._lastTime&&t<i?(e=new X.BH,this._resizeTimeout=setTimeout(()=>{this._resizeTimeout=null,super.resize.apply(this).done(e.resolve).fail(e.reject),this._lastTime=new Date},i),this._lastTime=new Date):(e=super.resize.apply(this),this._dataController.isLoaded()&&(this._lastTime=new Date))}else e=super.resize.apply(this);return e}}},views:{rowsView:r=>class extends r{init(){var e;super.init(),this._dataController.pageChanged.add(t=>{var i=this._scrollTop;this.scrollToPage(t??this._dataController.pageIndex()),!1===this.option(ht)&&this._scrollTop===i&&this._dataController.updateViewport()}),this._dataController.dataSourceChanged.add(()=>{!this._scrollTop&&this._scrollToCurrentPageOnResize()}),null===(e=this._dataController.stateLoaded)||void 0===e||e.add(()=>{this._scrollToCurrentPageOnResize()}),this._scrollToCurrentPageOnResize()}dispose(){clearTimeout(this._scrollTimeoutID),super.dispose()}_scrollToCurrentPageOnResize(){if(this._dataController.pageIndex()>0){var e=()=>{this.resizeCompleted.remove(e),this.scrollToPage(this._dataController.pageIndex())};this.resizeCompleted.add(e)}}scrollToPage(e){var i,t=this._dataController?this._dataController.pageSize():0;if(Ui(this)||wa(this)){var a=this._dataController.getItemSize(),n=this._dataController.getItemSizes(),s=e*t;for(var o in i=s*a,n)parseInt(o)<s&&(i+=n[o]-a)}else i=0;this.scrollTo({y:i,x:this._scrollLeft})}renderDelayedTemplates(){this.waitAsyncTemplates().done(()=>{this._updateContentPosition(!0)}),super.renderDelayedTemplates.apply(this,arguments)}_renderCore(e){var t=new Date,i=super._renderCore.apply(this,arguments),a=this._dataController._dataSource;if(a&&e){var n=e.items?e.items.length:20,s=this._dataController.viewportSize()||20;a._renderTime=Ae.isVirtualRowRendering(this)&&n>0&&!1!==this.option(ht)?(new Date-t)*s/n:new Date-t}return i}_getRowElements(e){var t=super._getRowElements(e);return t&&t.not(".".concat(Mu))}_removeRowsElements(e,t,i){var a=this._getRowElements(e).toArray();(a="append"===i?a.slice(0,t):a.slice(-t)).map(n=>{var s=(0,b.Z)(n);this._errorHandlingController&&this._errorHandlingController.removeErrorRow(s.next()),s.remove()})}_updateContent(e,t){var i,a=this._findContentElement(),n=t&&t.changeType,s=(0,X.BH)(),o=a.children().first();return"append"===n||"prepend"===n?this.waitAsyncTemplates().done(()=>{var l=this._getBodies(e);1===l.length?this._getBodies(o)["append"===n?"append":"prepend"](l.children()):l["append"===n?"appendTo":"prependTo"](o),e.remove(),i=this._getFreeSpaceRowElements(o),$b(i,zb),t.removeCount&&this._removeRowsElements(o,t.removeCount,n),this._restoreErrorRow(o),s.resolve()}).fail(s.reject):super._updateContent.apply(this,arguments).done(()=>{"update"===n&&this._restoreErrorRow(o),s.resolve()}).fail(s.reject),s.promise().done(()=>{this._updateBottomLoading()})}_addVirtualRow(e,t,i,a){if(a){var n=this._createEmptyRow(Mu,t,a);n=this._wrapRowIfNeed(e,n),this._appendEmptyRow(e,n,i)}}_updateContentItemSizes(){var e=this._getRowHeights(),t=this._correctRowHeights(e);this._dataController.setContentItemSizes(t)}_updateViewportSize(e,t){(0,C.$K)(e)||(e=(0,we.zp)(this._hasHeight?this.element():(0,Je.Jj)())),this._dataController.viewportHeight(e,t)}_getRowHeights(){var e,t,i=null===(t=null===(e=this._editingController)||void 0===e?void 0:e.isPopupEditMode)||void 0===t?void 0:t.call(e),a=this._getRowElements(this._tableElement).toArray();return i&&(a=a.filter(n=>!(0,b.Z)(n).hasClass("dx-row-inserted"))),a.map(n=>(0,li.l)(n).height)}_correctRowHeights(e){for(var t=this._dataController,i=t._dataSource,a=[],n=t.getVisibleRows(),s=0,o=!0,l=-1,d=0;d<e.length;d++){var u=n[d];(0,C.$K)(u)&&(!1===this.option(ht)?(l>=0&&l!==u.loadIndex&&(a.push(s),s=0),l=u.loadIndex):Hu(u,i)&&(o?o=!1:(a.push(s),s=0)),s+=e[d])}return s>0&&a.push(s),a}_updateContentPosition(e){if(this._dataController.viewportItemSize(this._rowHeight||20),Ui(this)||Ae.isVirtualRowRendering(this)){e||this._updateContentItemSizes();var i=this._dataController.getContentOffset("begin"),a=this._dataController.getContentOffset("end"),n=this.getTableElements(),s=n.children("tbody").children(".".concat(Mu));$b(s,Mu),n.each((o,l)=>{var d=o>0,u=this._isFixedTableRendering;this._isFixedTableRendering=d,this._addVirtualRow((0,b.Z)(l),d,"top",i),this._addVirtualRow((0,b.Z)(l),d,"bottom",a),this._isFixedTableRendering=u})}}_isTableLinesDisplaysCorrect(e){return e.find(".".concat("dx-column-lines")).length>0===this.option("showColumnLines")}_isColumnElementsEqual(e,t){var i=e.length===t.length;return i&&(0,Y.S6)(e,(a,n)=>{if(n.style.width!==t[a].style.width)return i=!1}),i}_getCellClasses(e){var t=[],{cssClass:i}=e,a="expand"===e.command;return i&&t.push(i),a&&t.push(this.addWidgetPrefix("group-space")),t}_findBottomLoadPanel(e){var t=e||this.element(),i=t&&t.find(".".concat(this.addWidgetPrefix(Zb)));if(i&&i.length)return i}_updateBottomLoading(){var e=Ui(this),t=wa(this),i=!this._dataController.hasKnownLastPage()&&this._dataController.isLoaded()&&(e||t),a=this._findContentElement(),n=this._findBottomLoadPanel(a);i?n||(0,b.Z)("<div>").addClass(this.addWidgetPrefix(Zb)).append(this._createComponent((0,b.Z)("<div>"),Xs.Z).$element()).appendTo(a):n&&n.remove()}_handleScroll(e){var t=!0===this.option(ht);(this._scrollTop!==e.scrollOffset.top||e.forceUpdateScrollPosition)&&(this._hasHeight||!t&&0===e.scrollOffset.top)&&this._rowHeight&&(this._scrollTop=e.scrollOffset.top,(Ui(this)||"standard"!==this.option("scrolling.rowRenderingMode"))&&!1===this.option(ht)&&(this._updateContentItemSizes(),this._updateViewportSize(null,this._scrollTop)),this._dataController.setViewportPosition(e.scrollOffset.top)),super._handleScroll.apply(this,arguments)}_needUpdateRowHeight(e){return super._needUpdateRowHeight.apply(this,arguments)||e>0&&wa(this)&&!Ae.isVirtualRowRendering(this)}_updateRowHeight(){if(super._updateRowHeight.apply(this,arguments),this._rowHeight){this._updateContentPosition();var e=(0,we.zp)(this._hasHeight?this.element():(0,Je.Jj)());!1===this.option(ht)?(this._updateViewportSize(e),this._dataController.updateViewport()):this._dataController.viewportSize(Math.ceil(e/this._rowHeight))}}updateFreeSpaceRowHeight(){var e=super.updateFreeSpaceRowHeight.apply(this,arguments);return e&&this._updateContentPosition(),e}setLoading(e,t){var i=this._dataController,a=i.pageIndex()>0&&i.isLoaded()&&!!this._findBottomLoadPanel();!1===this.option(ht)&&e&&i.isViewportChanging()||(a&&(e=!1),super.setLoading.call(this,e,t))}throwHeightWarningIfNeed(){void 0!==this._hasHeight&&!this._hasHeight&&Kr(this)&&!this._heightWarningIsThrown&&(this._heightWarningIsThrown=!0,At.Z.log("W1025"))}_resizeCore(){var e=this,t=e.element();super._resizeCore(),this.throwHeightWarningIfNeed(),e.component.$element()&&!e._windowScroll&&(0,ha.al)(t)&&(e._windowScroll=Hb(t,i=>{!e._hasHeight&&e._rowHeight&&e._dataController.setViewportPosition(i)},e.component.$element()),e.on("disposing",()=>{e._windowScroll.dispose()})),!1!==this.option(ht)&&e.loadIfNeed()}loadIfNeed(){var e,t;null===(t=null===(e=this._dataController)||void 0===e?void 0:e.loadIfNeed)||void 0===t||t.call(e)}_restoreErrorRow(e){var t;!1===this.option(ht)&&(null===(t=this._errorHandlingController)||void 0===t||t.removeErrorRow()),super._restoreErrorRow.apply(this,arguments)}}}}};He.registerModule("virtualScrolling",TB),Yd.extend(r=>class extends r{init(){super.init.apply(this,arguments),this._items=[],this._totalCount=-1,this._isLoaded=!0,this._loadPageCount=1,this._virtualScrollController=new vf(this.component,this._getVirtualScrollDataOptions())}dispose(){this._virtualScrollController.dispose(),super.dispose.apply(this,arguments)}_getVirtualScrollDataOptions(){var e=this;return{pageSize:()=>e.pageSize(),totalItemsCount:()=>e.totalItemsCount(),hasKnownLastPage:()=>e.hasKnownLastPage(),pageIndex:t=>e._dataSource.pageIndex(t),isLoading:()=>e._dataSource.isLoading()&&!e.isCustomLoading(),pageCount:()=>e.pageCount(),load:()=>e._dataSource.load(),updateLoading(){_f(e)},itemsCount:()=>e.itemsCount(!0),items:()=>e._dataSource.items(),viewportItems:t=>(t&&(e._items=t),e._items),onChanged(t){e.changed.fire(t)},changingDuration:()=>e.isLoading()?300:e._renderTime||0}}_handleLoadingChanged(e){!1!==this.option(ht)?((!Ui(this)||this._isLoadingAll)&&(this._isLoading=e,super._handleLoadingChanged.apply(this,arguments)),this._startLoadTime=e?new Date:void 0):super._handleLoadingChanged.apply(this,arguments)}_handleLoadError(){!1!==this.option(ht)&&(this._isLoading=!1,this.loadingChanged.fire(!1)),super._handleLoadError.apply(this,arguments)}_handleDataChanged(e){if(!1===this.option(ht))return this._items=this._dataSource.items().slice(),this._totalCount=this._dataSourceTotalCount(!0),void super._handleDataChanged.apply(this,arguments);var t=super._handleDataChanged.bind(this);this._virtualScrollController.handleDataChanged(t,e)}_customizeRemoteOperations(e,t){var i=!1===this.option(ht),a=this.option("scrolling.renderAsync");(0,C.$K)(a)||(a=this._renderTime>=this.option("scrolling.renderingThreshold")),(Ui(this)||wa(this)&&i)&&!t.reload&&(t.skip||i)&&!a&&(e.delay=void 0),super._customizeRemoteOperations.apply(this,arguments)}items(){return this._items}_dataSourceTotalCount(e){return!1===this.option(ht)&&Ui(this)&&!e?this._totalCount:super._dataSourceTotalCount()}itemsCount(e){return e||!1===this.option(ht)?super.itemsCount():this._virtualScrollController.itemsCount()}load(e){return!1===this.option(ht)||e?super.load(e):this._virtualScrollController.load()}isLoading(){return!1===this.option(ht)?this._dataSource.isLoading():this._isLoading}isLoaded(){return this._dataSource.isLoaded()&&this._isLoaded}resetPagesCache(e){e||this._virtualScrollController.reset(!0),super.resetPagesCache.apply(this,arguments)}_changeRowExpandCore(){var e=super._changeRowExpandCore.apply(this,arguments);return!1===this.option(ht)||(this.resetPagesCache(),_f(this)),e}reload(){this._dataSource.pageIndex(this.pageIndex());var e=this._virtualScrollController;if(!1!==this.option(ht)&&e){var t=new X.BH;return super.reload.apply(this,arguments).done(i=>{var a=e.getDelayDeferred();a?a.done(t.resolve).fail(t.reject):t.resolve(i)}).fail(t.reject),t}return super.reload.apply(this,arguments)}refresh(e,t){if(!1!==this.option(ht)){var{storeLoadOptions:i}=e,a=this._dataSource;t.reload?(this._virtualScrollController.reset(),a.items().length=0,this._isLoaded=!1,_f(this),this._isLoaded=!0,wa(this)?(this.pageIndex(0),a.pageIndex(0),i.pageIndex=0,e.pageIndex=0,i.skip=0):(a.pageIndex(this.pageIndex()),a.paginate()&&(e.pageIndex=this.pageIndex(),i.skip=this.pageIndex()*this.pageSize()))):wa(this)&&i.skip&&this._totalCountCorrection<0&&(i.skip+=this._totalCountCorrection)}return super.refresh.apply(this,arguments)}loadPageCount(e){if(!(0,C.$K)(e))return this._loadPageCount;this._loadPageCount=e}_handleDataLoading(e){var t=this.loadPageCount(),i=this.pageSize(),a=!1===this.option(ht),{storeLoadOptions:n}=e,s=(0,C.$K)(n.take);e.loadPageCount=t,!e.isCustomLoading&&a&&s&&t>1&&i>0&&(n.take=t*i),super._handleDataLoading.apply(this,arguments)}_loadPageSize(){return super._loadPageSize.apply(this,arguments)*this.loadPageCount()}beginPageIndex(){return ji(this,"beginPageIndex",[...arguments])}endPageIndex(){return ji(this,"endPageIndex",[...arguments])}pageIndex(e){return ji(this,"pageIndex",[...arguments])}virtualItemsCount(){return ji(this,"virtualItemsCount",[...arguments])}getContentOffset(){return ji(this,"getContentOffset",[...arguments])}getVirtualContentSize(){return ji(this,"getVirtualContentSize",[...arguments])}setContentItemSizes(){return ji(this,"setContentItemSizes",[...arguments])}setViewportPosition(){return ji(this,"setViewportPosition",[...arguments])}getViewportItemIndex(){return ji(this,"getViewportItemIndex",[...arguments])}setViewportItemIndex(e){return ji(this,"setViewportItemIndex",[...arguments])}getItemIndexByPosition(){return ji(this,"getItemIndexByPosition",[...arguments])}viewportSize(){return ji(this,"viewportSize",[...arguments])}viewportItemSize(){return ji(this,"viewportItemSize",[...arguments])}getItemSize(){return ji(this,"getItemSize",[...arguments])}getItemSizes(){return ji(this,"getItemSizes",[...arguments])}loadIfNeed(){return ji(this,"loadIfNeed",[...arguments])}});var Gb=(r,e)=>{var a,t=(0,b.Z)((0,Je.Jj)()),{top:i}=r.offset();if((0,C.kE)(e)){if(e<i)return i-e;a=(0,we.fA)(t)-e+t.scrollTop()}else{var n=i-t.scrollTop(),s=(0,we.fA)(t)-n-(0,we.zp)(r);a=Math.max(n,s)}return.9*a};const mf=class LB extends Im{_getDefaultOptions(){return(0,B.l)(super._getDefaultOptions(),{orientation:"horizontal",tabIndex:null,onHoverStart:le.ZT})}_initDataAdapter(){this._dataAdapter=this.option("_dataAdapter"),this._dataAdapter||super._initDataAdapter()}_renderContentImpl(){this._renderContextMenuOverlay(),super._renderContentImpl();var e=this._dataAdapter.getNodeByKey(this.option("_parentKey"));e&&this._renderItems(this._getChildNodes(e)),this._renderDelimiter()}_renderDelimiter(){this.$contentDelimiter=(0,b.Z)("<div>").appendTo(this._itemContainer()).addClass("dx-context-menu-content-delimiter")}_getOverlayOptions(){return(0,B.l)(!0,super._getOverlayOptions(),{onPositioned:this._overlayPositionedActionHandler.bind(this),position:{precise:!0}})}_overlayPositionedActionHandler(e){this._showDelimiter(e)}_hoverEndHandler(e){super._hoverEndHandler(e),this._toggleFocusClass(!1,e.currentTarget)}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_hoverStartHandler(e){this.option("onHoverStart")(e),super._hoverStartHandler(e),this._toggleFocusClass(!0,e.currentTarget)}_drawSubmenu(e){this._actions.onShowing({rootItem:(0,lt.u)(e),submenu:this}),super._drawSubmenu(e),this._actions.onShown({rootItem:(0,lt.u)(e),submenu:this})}_hideSubmenu(e){this._actions.onHiding({cancel:!0,rootItem:(0,lt.u)(e),submenu:this}),super._hideSubmenu(e),this._actions.onHidden({rootItem:(0,lt.u)(e),submenu:this})}_showDelimiter(e){if(this.$contentDelimiter){var t=this._itemContainer().children(".".concat("dx-submenu")).eq(0),i=this.option("position").of.find(".dx-context-menu-container-border"),a={of:t,precise:!0},n=e.position,s=n.v.location,o=n.h.location,l=i.offset(),d=Math.round(l.left),u=Math.round(l.top),c=(0,we.dz)(i),f=(0,we.Cr)(i),p=(0,we.dz)(t),_=(0,we.Cr)(t);this.$contentDelimiter.css("display","block"),(0,we.cl)(this.$contentDelimiter,this._isMenuHorizontal()?c<p?c:p:3),(0,we.QQ)(this.$contentDelimiter,this._isMenuHorizontal()?3:f<_?f:_),this._isMenuHorizontal()?s>u?Math.round(o)===d?(a.offset="0 -2.5",a.at=a.my="left top"):(a.offset="0 -2.5",a.at=a.my="right top"):((0,we.QQ)(this.$contentDelimiter,5),Math.round(o)===d?(a.offset="0 5",a.at=a.my="left bottom"):(a.offset="0 5",a.at=a.my="right bottom")):o>d?Math.round(s)===u?(a.offset="-2.5 0",a.at=a.my="left top"):(a.offset="-2.5 0",a.at=a.my="left bottom"):Math.round(s)===u?(a.offset="2.5 0",a.at=a.my="right top"):(a.offset="2.5 0",a.at=a.my="right bottom"),_n.Z.setup(this.$contentDelimiter,a)}}_getContextMenuPosition(){return this.option("position")}isOverlayVisible(){return this._overlay.option("visible")}getOverlayContent(){return this._overlay.$content()}};var ps="dx-menu",PB=ps+"-vertical",Ub=ps+"-horizontal",Cf=ps+"-item",jb=ps+"-items-container",wf=Cf+"-expanded",Zu="dx-context-menu",bf=Zu+"-container-border",qb="dx-state-hover",zu=ps+"-adaptive-mode",Yb=ps+"-hamburger-button",kB=zu+"-overlay-wrapper",Zl="showSubmenu",uo="nextItem",xn="prevItem",WB={show:50,hide:300},Xb=["onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","onItemContextMenu","onItemClick","onSelectionChanged","onItemRendered"];class Jb extends vm{_getDefaultOptions(){return(0,B.l)(super._getDefaultOptions(),{orientation:"horizontal",submenuDirection:"auto",showFirstSubmenuMode:{name:"onClick",delay:{show:50,hide:300}},hideSubmenuOnMouseLeave:!1,onSubmenuShowing:null,onSubmenuShown:null,onSubmenuHiding:null,onSubmenuHidden:null,adaptivityEnabled:!1})}_setOptionsByReference(){super._setOptionsByReference(),(0,B.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_itemElements(){var e=super._itemElements(),t=this._submenuItemElements();return e.add(t)}_submenuItemElements(){var e=[],t=".".concat(Cf),i=this._submenus.length&&this._submenus[0];return i&&i.itemsContainer()&&(e=i.itemsContainer().find(t)),e}_focusTarget(){return this.$element()}_isMenuHorizontal(){return"horizontal"===this.option("orientation")}_moveFocus(e){var s,l,t=this._getAvailableItems(),i=this._isMenuHorizontal(),a=this._getActiveItem(!0);switch(e){case"up":s=i?Zl:this._getItemsNavigationOperation(xn),l=this._getKeyboardNavigationAction(s,i?a:t)();break;case"down":s=i?Zl:this._getItemsNavigationOperation(uo),l=this._getKeyboardNavigationAction(s,i?a:t)();break;case"right":s=i?this._getItemsNavigationOperation(uo):Zl,l=this._getKeyboardNavigationAction(s,i?t:a)();break;case"left":s=i?this._getItemsNavigationOperation(xn):Zl,l=this._getKeyboardNavigationAction(s,i?t:a)();break;default:return super._moveFocus(e)}l&&0!==l.length&&this.option("focusedElement",(0,lt.u)(l))}_getItemsNavigationOperation(e){var t=e;return this.option("rtlEnabled")&&(t=e===xn?uo:xn),t}_getKeyboardNavigationAction(e,t){var i=le.ZT;switch(e){case Zl:t.hasClass("dx-state-disabled")||(i=this._showSubmenu.bind(this,t));break;case uo:i=this._nextItem.bind(this,t);break;case xn:i=this._prevItem.bind(this,t)}return i}_clean(){super._clean(),this.option("templatesRenderAsynchronously")&&clearTimeout(this._resizeEventTimer)}_visibilityChanged(e){e&&(this._menuItemsWidth||this._updateItemsWidthCache(),this._dimensionChanged())}_isAdaptivityEnabled(){return this.option("adaptivityEnabled")&&"horizontal"===this.option("orientation")}_updateItemsWidthCache(){var e=this.$element().find("ul").first().children("li").children(".".concat(Cf));this._menuItemsWidth=this._getSummaryItemsSize("width",e,!0)}_dimensionChanged(){if(this._isAdaptivityEnabled()){var e=(0,we.Y_)(this.$element());this._toggleAdaptiveMode(this._menuItemsWidth>e)}}_init(){super._init(),this._submenus=[]}_initActions(){this._actions={},(0,Y.S6)(Xb,(e,t)=>{this._actions[t]=this._createActionByOption(t)})}_initMarkup(){this._visibleSubmenu=null,this.$element().addClass(ps),super._initMarkup(),this._addCustomCssClass(this.$element()),this.setAria("role","menubar")}_render(){super._render(),this._initAdaptivity()}_renderHamburgerButton(){return this._hamburger=new Or.Z((0,b.Z)("<div>").addClass(Yb),{icon:"menu",activeStateEnabled:!1,onClick:this._toggleTreeView.bind(this)}),this._hamburger.$element()}_toggleTreeView(e){(0,C.PO)(e)&&(e=!this._overlay.option("visible")),this._overlay.option("visible",e),e&&this._treeView.focus(),this._toggleHamburgerActiveState(e)}_toggleHamburgerActiveState(e){this._hamburger&&this._hamburger.$element().toggleClass("dx-state-active",e)}_toggleAdaptiveMode(e){var t=this.$element().find(".".concat(Ub)),i=this.$element().find(".".concat(zu));e?this._hideVisibleSubmenu():(this._treeView&&this._treeView.collapseAll(),this._overlay&&this._toggleTreeView(e)),t.toggle(!e),i.toggle(e)}_removeAdaptivity(){this._$adaptiveContainer&&(this._toggleAdaptiveMode(!1),this._$adaptiveContainer.remove(),this._$adaptiveContainer=null,this._treeView=null,this._hamburger=null,this._overlay=null)}_treeviewItemClickHandler(e){this._actions.onItemClick(e),e.node.children.length||this._toggleTreeView(!1)}_getAdaptiveOverlayOptions(){var t=this.option("rtlEnabled")?"right":"left";return{_ignoreFunctionValueDeprecation:!0,maxHeight:()=>Gb(this.$element()),deferRendering:!1,shading:!1,animation:!1,hideOnParentScroll:!0,onHidden:()=>{this._toggleHamburgerActiveState(!1)},height:"auto",hideOnOutsideClick:i=>!(0,b.Z)(i.target).closest(".".concat(Yb)).length,position:{collision:"flipfit",at:"bottom "+t,my:"top "+t,of:this._hamburger.$element()}}}_getTreeViewOptions(){var e={};return(0,Y.S6)(["rtlEnabled","width","accessKey","activeStateEnabled","animation","dataSource","disabled","displayExpr","displayExpr","focusStateEnabled","hint","hoverStateEnabled","itemsExpr","items","itemTemplate","selectedExpr","selectionMode","tabIndex","visible"],(t,i)=>{e[i]=this.option(i)}),(0,Y.S6)(["onItemContextMenu","onSelectionChanged","onItemRendered"],(t,i)=>{e[i]=a=>{this._actions[i](a)}}),(0,B.l)(e,{dataSource:this.getDataSource(),animationEnabled:!!this.option("animation"),onItemClick:this._treeviewItemClickHandler.bind(this),onItemExpanded:t=>{this._overlay.repaint(),this._actions.onSubmenuShown(t)},onItemCollapsed:t=>{this._overlay.repaint(),this._actions.onSubmenuHidden(t)},selectNodesRecursive:!1,selectByClick:this.option("selectByClick"),expandEvent:"click"})}_initAdaptivity(){if(this._isAdaptivityEnabled()){this._$adaptiveContainer=(0,b.Z)("<div>").addClass(zu);var e=this._renderHamburgerButton();this._treeView=this._createComponent((0,b.Z)("<div>"),ou,this._getTreeViewOptions()),this._overlay=this._createComponent((0,b.Z)("<div>"),$s.Z,this._getAdaptiveOverlayOptions()),this._overlay.$content().append(this._treeView.$element()).addClass(zu).addClass(this.option("cssClass")),this._overlay.$wrapper().addClass(kB),this._$adaptiveContainer.append(e),this._$adaptiveContainer.append(this._overlay.$element()),this.$element().append(this._$adaptiveContainer),this._updateItemsWidthCache(),this._dimensionChanged()}}_getDelay(e){var t=this.option("showFirstSubmenuMode").delay;return(0,C.$K)(t)?(0,C.Kn)(t)?t[e]:t:WB[e]}_keyboardHandler(e){return super._keyboardHandler(e,!!this._visibleSubmenu)}_renderContainer(){var e=(0,b.Z)("<div>");return e.appendTo(this.$element()).addClass(this._isMenuHorizontal()?Ub:PB),super._renderContainer(e)}_renderSubmenuItems(e,t){var i=this._createSubmenu(e,t);return this._submenus.push(i),this._renderBorderElement(t),i}_getKeyboardListeners(){return super._getKeyboardListeners().concat(this._visibleSubmenu)}_createSubmenu(e,t){var i=(0,b.Z)("<div>").addClass(Zu).appendTo(t),a=this._getChildNodes(e),n=this._createComponent(i,mf,(0,B.l)(this._getSubmenuOptions(),{_dataAdapter:this._dataAdapter,_parentKey:e.internalFields.key,items:a,onHoverStart:this._clearTimeouts.bind(this),position:this.getSubmenuPosition(t)}));return this._attachSubmenuHandlers(t,n),n}_getSubmenuOptions(){var e=(0,b.Z)("<div>"),t=this._isMenuHorizontal();return{itemTemplate:this.option("itemTemplate"),target:e,orientation:this.option("orientation"),selectionMode:this.option("selectionMode"),cssClass:this.option("cssClass"),selectByClick:this.option("selectByClick"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),showSubmenuMode:this.option("showSubmenuMode"),displayExpr:this.option("displayExpr"),disabledExpr:this.option("disabledExpr"),selectedExpr:this.option("selectedExpr"),itemsExpr:this.option("itemsExpr"),onFocusedItemChanged:i=>{i.component.option("visible")&&this.option("focusedElement",i.component.option("focusedElement"))},onSelectionChanged:this._nestedItemOnSelectionChangedHandler.bind(this),onItemClick:this._nestedItemOnItemClickHandler.bind(this),onItemRendered:this._nestedItemOnItemRenderedHandler.bind(this),onLeftFirstItem:t?null:this._moveMainMenuFocus.bind(this,xn),onLeftLastItem:t?null:this._moveMainMenuFocus.bind(this,uo),onCloseRootSubmenu:this._moveMainMenuFocus.bind(this,t?xn:null),onExpandLastSubmenu:t?this._moveMainMenuFocus.bind(this,uo):null}}_getShowFirstSubmenuMode(){if(!this._isDesktopDevice())return"onClick";var e=this.option("showFirstSubmenuMode");return(0,C.Kn)(e)?e.name:e}_moveMainMenuFocus(e){var t=this._getAvailableItems(),i=t.length,a=t.filter(".".concat(wf)).eq(0),n=t.index(a);this._hideSubmenu(this._visibleSubmenu),(n+=e===xn?-1:1)>=i?n=0:n<0&&(n=i-1);var s=t.eq(n);this.option("focusedElement",(0,lt.u)(s))}_nestedItemOnSelectionChangedHandler(e){var t=e.addedItems.length&&e.addedItems[0],i=mf.getInstance(e.element);(0,this._actions.onSelectionChanged)(e),t&&this._clearSelectionInSubmenus(t[0],i),this._clearRootSelection(),this._setOptionWithoutOptionChange("selectedItem",t)}_clearSelectionInSubmenus(e,t){var i=!arguments.length;(0,Y.S6)(this._submenus,(a,n)=>{var s=n._itemContainer(),o=!s.is(t&&t._itemContainer()),l=s.find(".".concat(this._selectedItemClass()));if(o&&l.length||i){l.removeClass(this._selectedItemClass());var d=this._getItemData(l);d&&(d.selected=!1),n._clearSelectedItems()}})}_clearRootSelection(){var e=this.$element().find(".".concat(jb)).first().children().children().filter(".".concat(this._selectedItemClass()));e.length&&(this._getItemData(e).selected=!1,e.removeClass(this._selectedItemClass()))}_nestedItemOnItemClickHandler(e){this._actions.onItemClick(e)}_nestedItemOnItemRenderedHandler(e){this._actions.onItemRendered(e)}_attachSubmenuHandlers(e,t){var a=t.getOverlayContent().find(".".concat("dx-submenu")),n=(0,Ee.V4)(xp.u,this.NAME+"_submenu");t.option({onShowing:this._submenuOnShowingHandler.bind(this,e,t),onShown:this._submenuOnShownHandler.bind(this,e,t),onHiding:this._submenuOnHidingHandler.bind(this,e,t),onHidden:this._submenuOnHiddenHandler.bind(this,e,t)}),(0,Y.S6)(a,(s,o)=>{z.Z.off(o,n),z.Z.on(o,n,null,this._submenuMouseLeaveHandler.bind(this,e))})}_submenuOnShowingHandler(e,t){var i=e.children(".".concat(bf));this._actions.onSubmenuShowing({rootItem:(0,lt.u)(e),submenu:t}),i.show(),e.addClass(wf)}_submenuOnShownHandler(e,t){this._actions.onSubmenuShown({rootItem:(0,lt.u)(e),submenu:t})}_submenuOnHidingHandler(e,t,i){var a=e.children(".".concat(bf)),n=i;n.rootItem=(0,lt.u)(e),n.submenu=t,this._actions.onSubmenuHiding(n),(i=n).cancel||(this._visibleSubmenu===t&&(this._visibleSubmenu=null),a.hide(),e.removeClass(wf))}_submenuOnHiddenHandler(e,t){this._actions.onSubmenuHidden({rootItem:(0,lt.u)(e),submenu:t})}_submenuMouseLeaveHandler(e,t){var i=(0,b.Z)(t.relatedTarget).parents(".".concat(Zu))[0],a=this._getSubmenuByRootElement(e).getOverlayContent()[0];this.option("hideSubmenuOnMouseLeave")&&i!==a&&(this._clearTimeouts(),setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")))}_hideSubmenuAfterTimeout(){if(this._visibleSubmenu){var e=(0,b.Z)(this._visibleSubmenu.$element().context).hasClass(qb),t=this._visibleSubmenu.getOverlayContent().find(".".concat(qb)).length;!this._visibleSubmenu.getOverlayContent().get(0).querySelector(":hover")&&!t&&!e&&this._visibleSubmenu.hide()}}_getSubmenuByRootElement(e){if(!e)return!1;var t=e.children(".".concat(Zu));return t.length&&mf.getInstance(t)}getSubmenuPosition(e){var t=this._isMenuHorizontal(),i=this.option("submenuDirection").toLowerCase(),a=this.option("rtlEnabled"),n={collision:"flip",of:e,precise:!0};switch(i){case"leftortop":n.at="left top",n.my=t?"left bottom":"right top";break;case"rightorbottom":n.at=t?"left bottom":"right top",n.my="left top";break;default:t?(n.at=a?"right bottom":"left bottom",n.my=a?"right top":"left top"):(n.at=a?"left top":"right top",n.my=a?"right top":"left top")}return n}_renderBorderElement(e){(0,b.Z)("<div>").appendTo(e).addClass(bf).hide()}_itemPointerDownHandler(e){(0,b.Z)(e.target).closest(this._itemElements()).hasClass("dx-menu-item-has-submenu")?this.option("focusedElement",null):super._itemPointerDownHandler(e)}_hoverStartHandler(e){var t=(0,Ee.V4)(kt.Z.move,this.NAME),i=this._getItemElementByEventArgs(e),a=this._dataAdapter.getNodeByItem(this._getItemData(i)),n=(0,C.$K)(e.buttons)&&1===e.buttons||!(0,C.$K)(e.buttons)&&1===e.which;if(!this._isItemDisabled(i)){if(z.Z.off(i,t),!this._hasChildren(a))return void(this._showSubmenuTimer=setTimeout(this._hideSubmenuAfterTimeout.bind(this),this._getDelay("hide")));if("onHover"===this._getShowFirstSubmenuMode()&&!n){var s=this._getSubmenuByElement(i);this._clearTimeouts(),s.isOverlayVisible()||(z.Z.on(i,t,this._itemMouseMoveHandler.bind(this)),this._showSubmenuTimer=this._getDelay("hide"))}}}_hoverEndHandler(e){var t=this._getItemElementByEventArgs(e),i=(0,b.Z)(e.relatedTarget);super._hoverEndHandler(e),this._clearTimeouts(),!this._isItemDisabled(t)&&(i.hasClass("dx-context-menu-content-delimiter")||this.option("hideSubmenuOnMouseLeave")&&!i.hasClass(jb)&&(this._hideSubmenuTimer=setTimeout(()=>{this._hideSubmenuAfterTimeout()},this._getDelay("hide"))))}_hideVisibleSubmenu(){return!!this._visibleSubmenu&&(this._hideSubmenu(this._visibleSubmenu),!0)}_showSubmenu(e){var t=this._getSubmenuByElement(e);this._visibleSubmenu!==t&&this._hideVisibleSubmenu(),t&&(this._clearTimeouts(),this.focus(),t.show(),this.option("focusedElement",t.option("focusedElement"))),this._visibleSubmenu=t,this._hoveredRootItem=e}_hideSubmenu(e){e&&e.hide(),this._visibleSubmenu===e&&(this._visibleSubmenu=null),this._hoveredRootItem=null}_itemMouseMoveHandler(e){if(!e.pointers||!e.pointers.length){var t=(0,b.Z)(e.currentTarget);(0,C.$K)(this._showSubmenuTimer)&&(this._clearTimeouts(),this._showSubmenuTimer=setTimeout(()=>{var i=this._getSubmenuByElement(t);i&&!i.isOverlayVisible()&&this._showSubmenu(t)},this._getDelay("show")))}}_clearTimeouts(){clearTimeout(this._hideSubmenuTimer),clearTimeout(this._showSubmenuTimer)}_getSubmenuByElement(e,t){var i=this._getSubmenuByRootElement(e);if(i)return i;t=t||this._getItemData(e);var a=this._dataAdapter.getNodeByItem(t);return this._hasChildren(a)&&this._renderSubmenuItems(a,e)}_updateSubmenuVisibilityOnClick(e){var t=e.args.length&&e.args[0];if(t&&!this._disabledGetter(t.itemData)){var i=(0,b.Z)(t.itemElement),a=this._getSubmenuByElement(i,t.itemData);if(this._updateSelectedItemOnClick(e),this._visibleSubmenu){if(this._visibleSubmenu===a)return void("onClick"===this.option("showFirstSubmenuMode")&&this._hideSubmenu(this._visibleSubmenu));this._hideSubmenu(this._visibleSubmenu)}if(a&&!a.isOverlayVisible())return void this._showSubmenu(i)}}_optionChanged(e){if(Xb.indexOf(e.name)>=0)this._initActions();else switch(e.name){case"orientation":case"submenuDirection":this._invalidate();break;case"showFirstSubmenuMode":case"hideSubmenuOnMouseLeave":break;case"showSubmenuMode":this._changeSubmenusOption(e.name,e.value);break;case"adaptivityEnabled":e.value?this._initAdaptivity():this._removeAdaptivity();break;case"width":this._isAdaptivityEnabled()&&(this._treeView.option(e.name,e.value),this._overlay.option(e.name,e.value)),super._optionChanged(e),this._dimensionChanged();break;case"animation":this._isAdaptivityEnabled()&&this._treeView.option("animationEnabled",!!e.value),super._optionChanged(e);break;default:this._isAdaptivityEnabled()&&(e.name===e.fullName||"items"===e.name)&&this._treeView.option(e.fullName,e.value),super._optionChanged(e)}}_changeSubmenusOption(e,t){(0,Y.S6)(this._submenus,(i,a)=>{a.option(e,t)})}selectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}unselectItem(e){this._hideSubmenu(this._visibleSubmenu),super.selectItem(e)}}(0,Rt.Z)("dxMenu",Jb);const Qb=Jb;var yf={"=":"filter-operation-equals","<>":"filter-operation-not-equals","<":"filter-operation-less","<=":"filter-operation-less-equal",">":"filter-operation-greater",">=":"filter-operation-greater-equal",default:"filter-operation-default",notcontains:"filter-operation-not-contains",contains:"filter-operation-contains",startswith:"filter-operation-starts-with",endswith:"filter-operation-ends-with",between:"filter-operation-between"},ey={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",between:"between"},zl="filter-row",Wu="filter-range-overlay",Ku="filter-range-start",iy="dx-menu",ry="dx-editor-with-menu",fs="dx-editor-container",xf="dx-editor-cell",Sf="dx-highlight-outline",ay="dx-focused",Ef="dx-filter-range-content",If="dx-filter-modified",Wl="input:not([type='hidden'])",qB=["date","datetime","number"],YB=ae.Z.format("dxDataGrid-ariaSearchBox");function ho(r){return"onClick"===r.option("filterRow.applyFilter")}var Af=function(r){var e=r&&r.children(),t=e&&e.data("dxComponents"),i=t&&t.length&&e.data(t[0]);return i instanceof za.Z?i:null},Tf=function(r,e){var t="",i="",a=Df(r,e),n=Ae.getFormatOptionsByColumn(e,"filterRow");return Array.isArray(a)?(t=Ae.formatValue(a[0],n),""!==(i=Ae.formatValue(a[1],n))&&(t+=" - ".concat(i))):(0,C.$K)(a)&&(t=Ae.formatValue(a,n)),t};function Df(r,e){if(e)return ho(r)&&void 0!==e.bufferedFilterValue?e.bufferedFilterValue:e.filterValue}var ba=function(r,e){if(e)return ho(r)&&void 0!==e.bufferedSelectedFilterOperation?e.bufferedSelectedFilterOperation:e.selectedFilterOperation},Of=function(r,e,t){var i=r._columnsController.columnOption(e),a=Df(r,i),n=t.closest(".".concat(r.addWidgetPrefix(Wu))).length,s=t.hasClass(r.addWidgetPrefix(Ku));return a&&Array.isArray(a)&&"between"===ba(r,i)?s?a[0]:a[1]:!n&&function(r,e){return!(e&&qB.includes(e.dataType)&&Array.isArray(r))&&void 0!==r}(a,i)?a:null},sk={defaultOptions:()=>({syncLookupFilterValues:!0,filterRow:{visible:!1,showOperationChooser:!0,showAllText:ae.Z.format("dxDataGrid-filterRowShowAllText"),resetOperationText:ae.Z.format("dxDataGrid-filterRowResetOperationText"),applyFilter:"auto",applyFilterText:ae.Z.format("dxDataGrid-applyFilterText"),operationDescriptions:{equal:ae.Z.format("dxDataGrid-filterRowOperationEquals"),notEqual:ae.Z.format("dxDataGrid-filterRowOperationNotEquals"),lessThan:ae.Z.format("dxDataGrid-filterRowOperationLess"),lessThanOrEqual:ae.Z.format("dxDataGrid-filterRowOperationLessOrEquals"),greaterThan:ae.Z.format("dxDataGrid-filterRowOperationGreater"),greaterThanOrEqual:ae.Z.format("dxDataGrid-filterRowOperationGreaterOrEquals"),startsWith:ae.Z.format("dxDataGrid-filterRowOperationStartsWith"),contains:ae.Z.format("dxDataGrid-filterRowOperationContains"),notContains:ae.Z.format("dxDataGrid-filterRowOperationNotContains"),endsWith:ae.Z.format("dxDataGrid-filterRowOperationEndsWith"),between:ae.Z.format("dxDataGrid-filterRowOperationBetween"),isBlank:ae.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:ae.Z.format("dxFilterBuilder-filterOperationIsNotBlank")},betweenStartText:ae.Z.format("dxDataGrid-filterRowOperationBetweenStartText"),betweenEndText:ae.Z.format("dxDataGrid-filterRowOperationBetweenEndText")}}),controllers:{applyFilter:class ik extends Vt.ViewController{init(){this._columnsController=this.getController("columns")}_getHeaderPanel(){return this._headerPanel||(this._headerPanel=this.getView("headerPanel")),this._headerPanel}setHighLight(e,t){ho(this)&&(e&&e.toggleClass(Sf,t)&&e.closest(".".concat(xf)).toggleClass(If,t),this._getHeaderPanel().enableApplyButton(t))}applyFilter(){var e=this._columnsController.getColumns();this._columnsController.beginUpdate();for(var t=0;t<e.length;t++){var i=e[t];void 0!==i.bufferedFilterValue&&(this._columnsController.columnOption(t,"filterValue",i.bufferedFilterValue),i.bufferedFilterValue=void 0),void 0!==i.bufferedSelectedFilterOperation&&(this._columnsController.columnOption(t,"selectedFilterOperation",i.bufferedSelectedFilterOperation),i.bufferedSelectedFilterOperation=void 0)}this._columnsController.endUpdate(),this.removeHighLights()}removeHighLights(){if(ho(this)){var e=this.getView("columnHeadersView").element();e.find(".".concat(this.addWidgetPrefix(zl)," .").concat(Sf)).removeClass(Sf),e.find(".".concat(this.addWidgetPrefix(zl)," .").concat(If)).removeClass(If),this._getHeaderPanel().enableApplyButton(!1)}}setCurrentColumnForFiltering(e){this._currentColumn=e}getCurrentColumnForFiltering(){return this._currentColumn}}},extenders:{controllers:{data:r=>class extends r{skipCalculateColumnFilters(){return!1}_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return super._calculateAdditionalFilter();var e=[super._calculateAdditionalFilter()],t=this._columnsController.getVisibleColumns(null,!0),i=this._applyFilterController;return(0,Y.S6)(t,function(){var a,n=(null===(a=i.getCurrentColumnForFiltering())||void 0===a?void 0:a.index)===this.index;if(this.allowFiltering&&this.calculateFilterExpression&&(0,C.$K)(this.filterValue)&&!n){var s=this.createFilterExpression(this.filterValue,this.selectedFilterOperation||this.defaultFilterOperation,"filterRow");e.push(s)}}),Ae.combineFilters(e)}},columnsResizer:r=>class extends r{_startResizing(){if(super._startResizing.apply(this,arguments),this.isResizing()){var e=this._columnHeadersView.getFilterRangeOverlayInstance();if(e){var t=e.$element().closest("td").index();(t===this._targetPoint.columnIndex||t===this._targetPoint.columnIndex+1)&&e.$content().hide()}}}_endResizing(){var e;if(this.isResizing()){var t=this._columnHeadersView.getFilterRangeOverlayInstance();t&&(e=t.$element().closest("td"),this._columnHeadersView._updateFilterRangeOverlay({width:(0,we.Y_)(e,!0)+1}),t.$content().show())}super._endResizing.apply(this,arguments)}},editing:r=>class extends r{updateFieldValue(e){return e.column.lookup&&(this._needUpdateLookupDataSource=!0),super.updateFieldValue.apply(this,arguments)}_afterSaveEditData(e){var t;return this._needUpdateLookupDataSource&&!e&&(null===(t=this.getView("columnHeadersView"))||void 0===t||t.updateLookupDataSource()),this._needUpdateLookupDataSource=!1,super._afterSaveEditData.apply(this,arguments)}_afterCancelEditData(){return this._needUpdateLookupDataSource=!1,super._afterCancelEditData.apply(this,arguments)}}},views:{columnHeadersView:r=>class extends r{init(){super.init(),this._applyFilterViewController=this.getController("applyFilter")}optionChanged(e){switch(e.name){case"filterRow":case"showColumnLines":this._invalidate(!0,!0),e.handled=!0;break;case"syncLookupFilterValues":e.value?this.updateLookupDataSource():this.render(),e.handled=!0;break;default:super.optionChanged(e)}}_updateEditorValue(e,t){var i=Af(t);i&&i.option("value",Of(this,e.index,t))}_columnOptionChanged(e){var t,a,n,s,o,{optionNames:i}=e;if(Ae.checkChanges(i,["filterValue","bufferedFilterValue","selectedFilterOperation","bufferedSelectedFilterOperation","filterValues","filterType"])&&void 0!==e.columnIndex){var l=this._columnsController.getVisibleIndex(e.columnIndex),d=this._columnsController.columnOption(e.columnIndex);if(n=(a=null!==(t=this._getCellElement(this.element().find(".".concat(this.addWidgetPrefix(zl))).index(),l))&&void 0!==t?t:(0,b.Z)()).find(".".concat(fs)).first(),i.filterValue||i.bufferedFilterValue){this._updateEditorValue(d,n);var u=a.find(".".concat(this.addWidgetPrefix(Wu))).data("dxOverlay");u&&(s=u.$content().find(".".concat(fs)),this._updateEditorValue(d,s.first()),this._updateEditorValue(d,s.last())),(!u||!u.option("visible"))&&this._updateFilterRangeContent(a,Tf(this,d))}(i.selectedFilterOperation||i.bufferedSelectedFilterOperation)&&l>=0&&d&&(o=a.find(".".concat(iy))).length&&(this._updateFilterOperationChooser(o,d,n),"between"===ba(this,d)?this._renderFilterRangeContent(a,d):n.find(".".concat(Ef)).length&&(this._renderEditor(n,this._getEditorOptions(n,d)),this._hideFilterRange()))}else super._columnOptionChanged(e)}_renderCore(){return this._filterRangeOverlayInstance=null,super._renderCore.apply(this,arguments)}_resizeCore(){var e;super._resizeCore.apply(this,arguments),null===(e=this._filterRangeOverlayInstance)||void 0===e||e.repaint()}isFilterRowVisible(){return this._isElementVisible(this.option("filterRow"))}isVisible(){return super.isVisible()||this.isFilterRowVisible()}_initFilterRangeOverlay(e,t){var i=this,a={},n=e.find(".dx-editor-container"),s=i.addWidgetPrefix(Wu),o=(0,b.Z)("<div>").addClass(s).appendTo(e);return i._createComponent(o,$s.Z,{height:"auto",shading:!1,showTitle:!1,focusStateEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:s},animation:!1,position:{my:"top",at:"top",of:n.length&&n||e,offset:"0 -1"},contentTemplate(l){var d,u=(0,b.Z)("<div>").addClass("".concat(fs," ").concat(i.addWidgetPrefix(Ku))).appendTo(l);return t=i._columnsController.columnOption(t.index),(d=i._getEditorOptions(u,t)).sharedData=a,i._renderEditor(u,d),z.Z.on(u.find(Wl),"keydown",c=>{var f=e.find("[tabindex]").not(c.target).first();"tab"===(0,Ee.EV)(c)&&c.shiftKey&&(c.preventDefault(),i._hideFilterRange(),f.length||(f=e.prev().find("[tabindex]").last()),z.Z.trigger(f,"focus"))}),u=(0,b.Z)("<div>").addClass("".concat(fs," ").concat(i.addWidgetPrefix("filter-range-end"))).appendTo(l),(d=i._getEditorOptions(u,t)).sharedData=a,i._renderEditor(u,d),z.Z.on(u.find(Wl),"keydown",c=>{"tab"===(0,Ee.EV)(c)&&!c.shiftKey&&(c.preventDefault(),i._hideFilterRange(),z.Z.trigger(e.next().find("[tabindex]").first(),"focus"))}),(0,b.Z)(l).addClass(i.getWidgetContainerClass())},onShown(l){var d=l.component.$content().find(".".concat(fs)).first();z.Z.trigger(d.find(Wl),"focus")},onHidden(){t=i._columnsController.columnOption(t.index),e.find(".".concat(iy)).parent().addClass(ry),"between"===ba(i,t)&&(i._updateFilterRangeContent(e,Tf(i,t)),i.component.updateDimensions())}})}_updateFilterRangeOverlay(e){var t=this._filterRangeOverlayInstance;t&&t.option(e)}_showFilterRange(e,t){var i=e.children(".".concat(this.addWidgetPrefix(Wu))),a=i.length&&i.data("dxOverlay");!a&&t&&(a=this._initFilterRangeOverlay(e,t)),a.option("visible")||(this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.hide(),this._filterRangeOverlayInstance=a,this._updateFilterRangeOverlay({width:(0,we.Y_)(e,!0)+1}),this._filterRangeOverlayInstance&&this._filterRangeOverlayInstance.show())}_hideFilterRange(){var e=this._filterRangeOverlayInstance;e&&e.hide()}getFilterRangeOverlayInstance(){return this._filterRangeOverlayInstance}_createRow(e){var t=super._createRow(e);return"filter"===e.rowType&&(t.addClass(this.addWidgetPrefix(zl)),this.option("useLegacyKeyboardNavigation")||z.Z.on(t,"keydown",i=>Tc("filterRow",this,i))),t}_getRows(){var e=super._getRows();return this.isFilterRowVisible()&&e.push({rowType:"filter"}),e}_renderFilterCell(e,t){var{column:i}=t,a=(0,b.Z)(e);this.component.option("showColumnHeaders")&&this.setAria("describedby",i.headerId,a),this.setAria("label",ae.Z.format("dxDataGrid-ariaFilterCell"),a),a.addClass(xf);var n=(0,b.Z)("<div>").appendTo(a),s=(0,b.Z)("<div>").addClass(fs).appendTo(n);if("between"===ba(this,i))this._renderFilterRangeContent(a,i);else{var o=this._getEditorOptions(s,i);this._renderEditor(s,o)}var{alignment:l}=i;l&&"center"!==l&&a.find(Wl).first().css("textAlign",i.alignment),i.filterOperations&&i.filterOperations.length&&this._renderFilterOperationChooser(n,i,s)}_renderCellContent(e,t){var i=this,{column:a}=t;if("filter"===t.rowType)if(a.command)e.html("&nbsp;");else if(a.allowFiltering)return void i.renderTemplate(e,i._renderFilterCell.bind(i),t).done(()=>{i._updateCell(e,t)});super._renderCellContent.apply(this,arguments)}_getEditorOptions(e,t){var i=this,a={editorOptions:{inputAttr:i._getFilterInputAccessibilityAttributes(t)}},n=(0,B.l)(a,t,{value:Of(i,t.index,e),parentType:"filterRow",showAllText:i.option("filterRow.showAllText"),updateValueTimeout:"onClick"===i.option("filterRow.applyFilter")?0:700,width:null,setValue(s,o){!function(r,e){var t=""===e.value?null:e.value,i=e.container,a=r._columnsController.columnOption(e.column.index),n=Of(r,a.index,i);if((0,C.$K)(n)||(0,C.$K)(t)){r._applyFilterViewController.setHighLight(i,n!==t);var s=ho(r)?"bufferedFilterValue":"filterValue",o=function(r,e,t,i){if("between"===ba(r,t)){var a=Df(r,t);return i.hasClass(r.addWidgetPrefix(Ku))?[e,Array.isArray(a)?a[1]:void 0]:[Array.isArray(a)?a[0]:a,e]}return e}(r,t,a,i),l="between"===ba(r,a),d=e.notFireEvent||l&&Array.isArray(o)&&o.includes(void 0);r._columnsController.columnOption(a.index,s,o,d)}}(i,{column:t,value:s,container:e,notFireEvent:o})}});return"between"===ba(i,t)&&(n.placeholder=e.hasClass(i.addWidgetPrefix(Ku))?i.option("filterRow.betweenStartText"):i.option("filterRow.betweenEndText")),n}_getFilterInputAccessibilityAttributes(e){var t=ae.Z.format("dxDataGrid-ariaFilterCell");return this.component.option("showColumnHeaders")?{"aria-label":t,"aria-describedby":e.headerId}:{"aria-label":t}}_renderEditor(e,t){e.empty();var i=(0,b.Z)("<div>").appendTo(e),a=this._dataController.dataSource();if(t.lookup&&this.option("syncLookupFilterValues")){this._applyFilterViewController.setCurrentColumnForFiltering(t);var n=this._dataController.getCombinedFilter();this._applyFilterViewController.setCurrentColumnForFiltering(null);var s=Ae.getWrappedLookupDataSource(t,a,n),o=(0,ye.Z)((0,ye.Z)({},t),{lookup:(0,ye.Z)((0,ye.Z)({},t.lookup),{dataSource:s})});return this._editorFactoryController.createEditor(i,o)}return this._editorFactoryController.createEditor(i,t)}_renderFilterRangeContent(e,t){var i=this,a=e.find(".".concat(fs)).first();a.empty();var n=(0,b.Z)("<div>").addClass(Ef).attr("tabindex",this.option("tabIndex"));z.Z.on(n,"focusin",()=>{i._showFilterRange(e,t)}),n.appendTo(a),i._updateFilterRangeContent(e,Tf(i,t))}_updateFilterRangeContent(e,t){var i=e.find(".".concat(Ef));i.length&&(""===t?i.html("&nbsp;"):i.text(t))}_updateFilterOperationChooser(e,t,i){var n,a=this,s=function(){var l=Qb.getInstance(e);l&&l.option("focusedElement",null),n&&a._focusEditor(i)},o=this._editorFactoryController;a._createComponent(e,Qb,{integrationOptions:{},activeStateEnabled:!1,selectionMode:"single",cssClass:"".concat(a.getWidgetContainerClass()," ").concat("dx-cell-focus-disabled"," ").concat("dx-filter-menu"),showFirstSubmenuMode:"onHover",hideSubmenuOnMouseLeave:!0,items:[{disabled:!(t.filterOperations&&t.filterOperations.length),icon:yf[ba(a,t)||"default"],selectable:!1,items:a._getFilterOperationMenuItems(t)}],onItemRendered:l=>{var{itemElement:d}=l;this.setAria("label",YB,(0,b.Z)(d))},onItemClick(l){var d=l.itemData.name,u=ba(a,t),c=!1,f=ho(a),p={};if(!(l.itemData.items||d&&d===u)){if(d?(p[f?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=d,("between"===d||"between"===u)&&(c="between"===d,p[f?"bufferedFilterValue":"filterValue"]=null)):(p[f?"bufferedFilterValue":"filterValue"]=null,p[f?"bufferedSelectedFilterOperation":"selectedFilterOperation"]=t.defaultSelectedFilterOperation||null),a._columnsController.columnOption(t.index,p),a._applyFilterViewController.setHighLight(i,!0),!d){var _=Af(i);_&&"dxDateBox"===_.NAME&&!_.option("isValid")&&(_.clear(),_.option("isValid",!0))}c?a._showFilterRange(i.closest(".".concat(xf)),t):a._focusEditor(i)}},onSubmenuShowing(){n=a._isEditorFocused(i),o.loseFocus()},onSubmenuHiding(){z.Z.trigger(e,"blur"),s()},onContentReady(l){z.Z.on(e,"blur",()=>{l.component._hideSubmenuAfterTimeout(),s()})},rtlEnabled:a.option("rtlEnabled")})}_isEditorFocused(e){return e.hasClass(ay)||e.parents(".".concat(ay)).length}_focusEditor(e){this._editorFactoryController.focus(e),z.Z.trigger(e.find(Wl),"focus")}_renderFilterOperationChooser(e,t,i){var a;this.option("filterRow.showOperationChooser")&&(e.addClass(ry),a=(0,b.Z)("<div>").prependTo(e),this._updateFilterOperationChooser(a,t,i))}_getFilterOperationMenuItems(e){var t=this,i=[{}],a=t.option("filterRow"),n=a&&a.operationDescriptions||{};if(e.filterOperations&&e.filterOperations.length){var s=e.filterOperations.filter(o=>(0,C.$K)(ey[o]));(i=(0,Y.UI)(s,o=>{var l=ey[o];return{name:o,selected:(ba(t,e)||e.defaultFilterOperation)===o,text:n[l],icon:yf[o]}})).push({name:null,text:a&&a.resetOperationText,icon:yf.default})}return i}_handleDataChanged(e){var t,i,a,n,s,o,l=null===(i=null===(t=this._dataController)||void 0===t?void 0:t.dataSource)||void 0===i?void 0:i.call(t),d=null===(a=l?.lastLoadOptions)||void 0===a?void 0:a.call(l);super._handleDataChanged.apply(this,arguments),(null!==(n=e.operationTypes)&&void 0!==n&&n.filtering||null!==(s=e.operationTypes)&&void 0!==s&&s.fullReload)&&this.updateLookupDataSource((null===(o=e.operationTypes)||void 0===o?void 0:o.filtering)||d?.filter)}updateLookupDataSource(e){if(this.option("syncLookupFilterValues")&&this.element()){var t=this._columnsController.getVisibleColumns(),i=this._dataController.dataSource(),a=this._applyFilterViewController,n=this.element().find(".".concat(this.addWidgetPrefix(zl))).index();-1!==n&&t.forEach((s,o)=>{if(s.lookup&&s.calculateCellValue===s.defaultCalculateCellValue){var l=this._getCellElement(n,o),d=Af(l?.find(".dx-editor-container"));if(d){a.setCurrentColumnForFiltering(s);var u=this._dataController.getCombinedFilter()||null;a.setCurrentColumnForFiltering(null);var c=d.option("dataSource");if(!e||!(0,le.bY)(c.__dataGridSourceFilter||null,u)){var p=Ae.getWrappedLookupDataSource(s,i,u);d.option("dataSource",p)}}}})}}},headerPanel:r=>class extends r{init(){super.init(),this._dataController=this.getController("data"),this._applyFilterViewController=this.getController("applyFilter")}optionChanged(e){"filterRow"===e.name?(this._invalidate(),e.handled=!0):super.optionChanged(e)}_getToolbarItems(){var e=super._getToolbarItems();return this._prepareFilterItem().concat(e)}_prepareFilterItem(){var e=this,t=[];if(e._isShowApplyFilterButton()){var i=e.option("filterRow.applyFilterText"),n=!e._columnsController.getColumns().filter(o=>void 0!==o.bufferedFilterValue).length;t.push({widget:"dxButton",options:{icon:"apply-filter",disabled:n,onClick:function(){e._applyFilterViewController.applyFilter()},hint:i,text:i,onInitialized:function(o){(0,b.Z)(o.element).addClass(e._getToolbarButtonClass("dx-apply-button"))}},showText:"inMenu",name:"applyFilterButton",location:"after",locateInMenu:"auto",sortIndex:10})}return t}_isShowApplyFilterButton(){var e=this.option("filterRow");return!!e?.visible&&"onClick"===e.applyFilter}enableApplyButton(e){this.setToolbarItemDisabled("applyFilterButton",!e)}isVisible(){return super.isVisible()||this._isShowApplyFilterButton()}}}}};He.registerModule("filterRow",sk),es.setEditorClass(Jd.Z);var ny="dx-header-filter",sy="dx-header-filter-menu";function oy(r){r=r||[];for(var e=0;e<r.length;e++)r[e].selected=!1,oy(r[e].items)}function ly(r){var e="dxTreeView"===r.NAME?".dx-treeview-select-all-item":".dx-list-select-all-checkbox";return r.$element().find(e).dxCheckBox("instance")}function dy(r,e){if(!r.component.option("searchValue")){var t=ly(r.component);t&&e&&e.length&&t.option("value",void 0)}}function lk(r,e,t){if(e^t){if(r.selected=!0,t&&r.items)for(var i=0;i<r.items.length;i++)if(!r.items[i].selected){r.selected=void 0;break}}else(t||r.selected)&&(r.selected=!1,oy(r.items))}var $u=function(r){return(0,C.$K)(r.allowHeaderFiltering)?r.allowHeaderFiltering:r.allowFiltering},uy=r=>class extends r{optionChanged(e){if("headerFilter"===e.name){var t="columnHeadersView"===this.name;this._invalidate(t,t),e.handled=!0}else super.optionChanged(e)}_applyColumnState(e){var t,{rootElement:i}=e,{column:a}=e;if("headerFilter"===e.name){if(i.find(".".concat(ny)).remove(),$u(a)){t=super._applyColumnState(e).toggleClass("dx-header-filter-empty",this._isHeaderFilterEmpty(a)),this.option("useLegacyKeyboardNavigation")||t.attr("tabindex",this.option("tabindex")||0);var n=ae.Z.format("dxDataGrid-headerFilterIndicatorLabel",a.caption);t.attr("aria-label",n),t.attr("aria-haspopup","dialog"),t.attr("role","button")}return t}return super._applyColumnState(e)}_isHeaderFilterEmpty(e){return!e.filterValues||!e.filterValues.length}_getIndicatorClassName(e){return"headerFilter"===e?ny:super._getIndicatorClassName(e)}_renderIndicator(e){var t=e.container,i=e.indicator;if("headerFilter"===e.name){var a=this.option("rtlEnabled");if(t.children().length&&(!a&&"right"===e.columnAlignment||a&&"left"===e.columnAlignment))return void t.prepend(i)}super._renderIndicator(e)}},uk={month:r=>pt.Z.getMonthNames()[r-1],quarter:r=>pt.Z.format(new Date(2e3,3*r-1),"quarter")};function hy(r,e,t){return e=e||[],t=t||[],r.forEach(i=>{if((0,C.$K)(i.key)){if(e.push(1===e.length?i.key-1:i.key),i.items)hy(i.items,e,t);else{var n=new Date(Date.UTC.apply(Date,e));t.push(n)}e.pop()}else t.push(null)}),t}function hk(r,e){var t=hy(r),i=(0,va.Z)(t),a=Ae.getHeaderFilterGroupParameters((0,ye.Z)((0,ye.Z)({},e),{calculateCellValue:n=>n}));return Gs.Z.queryByOptions(i,{group:a}).toArray()}var mk={defaultOptions:()=>({syncLookupFilterValues:!0,headerFilter:{visible:!1,width:252,height:325,allowSelectAll:!0,search:{enabled:!1,timeout:500,mode:"contains",editorOptions:{}},texts:{emptyValue:ae.Z.format("dxDataGrid-headerFilterEmptyValue"),ok:ae.Z.format("dxDataGrid-headerFilterOK"),cancel:ae.Z.format("dxDataGrid-headerFilterCancel")}}}),controllers:{headerFilter:class fk extends Vt.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._headerFilterView=this.getView("headerFilterView")}_updateSelectedState(e,t){for(var i=e.length,a="exclude"===t.filterType;i--;){var n=e[i];"items"in e[i]&&this._updateSelectedState(e[i].items,t),lk(n,Ae.getIndexByKey(e[i].value,t.filterValues,null)>-1,a)}}_normalizeGroupItem(e,t,i){var a,n,{path:s}=i,{valueSelector:o}=i,{displaySelector:l}=i,{column:d}=i;return o&&l?(a=o(e),n=l(e)):n=a=e.key,e=(0,C.Kn)(e)?(0,B.l)({},e):{},s.push(a),e.value=1===s.length?s[0]:s.join("/"),e.text=this.getHeaderItemText(n,d,t,i.headerFilterOptions),e}getHeaderItemText(e,t,i,a){var n=Ae.formatValue(e,function(r,e,t){var i=Xn.getGroupInterval(e),a=Ae.getFormatOptionsByColumn(e,"headerFilter");return i&&(a.groupInterval=i[t],Ae.isDateType(e.dataType)?a.format=uk[i[t]]:"number"===e.dataType&&(a.getDisplayFormat=function(){var n={format:e.format,target:"headerFilter"},s=Ae.formatValue(r,n),l=Ae.formatValue(r+i[t],n);return s&&l?"".concat(s," - ").concat(l):""})),a}(e,t,i));return n||(n=a.texts.emptyValue),n}_processGroupItems(e,t,i,a){var n,s,{column:o}=a,{lookup:l}=o,{level:d}=a;i=i||[],t=t||0,l&&(n=(0,Ot.vb)(l.displayExpr),s=(0,Ot.vb)(l.valueExpr));for(var u=0;u<e.length;u++)e[u]=this._normalizeGroupItem(e[u],t,{column:a.column,headerFilterOptions:a.headerFilterOptions,displaySelector:n,valueSelector:s,path:i}),"items"in e[u]&&(t!==d&&(0,C.$K)(e[u].value)?this._processGroupItems(e[u].items,t+1,i,a):delete e[u].items),i.pop()}getDataSource(e){var t,i=this._dataController.dataSource(),a=i?.remoteOperations().grouping,n=Ae.getHeaderFilterGroupParameters(e,a),s=null===(t=e.headerFilter)||void 0===t?void 0:t.dataSource,o=this.option("headerFilter"),l=!1,d={component:this.component};if(i){if((0,C.$K)(s)&&!(0,C.mf)(s))d.dataSource=(0,ol.aN)(s);else if(e.lookup)if(l=!0,this.option("syncLookupFilterValues")){this._currentColumn=e;var u=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource=Ae.getWrappedLookupDataSource(e,i,u)}else d.dataSource=Ae.normalizeLookupDataSource(e.lookup);else{var c=Array.isArray(n)?n.length-1:0;this._currentColumn=e;var f=this._dataController.getCombinedFilter();this._currentColumn=null,d.dataSource={filter:f,group:n,useDefaultSearch:!0,load:w=>{var S=new X.BH;return w.dataField=e.dataField||e.name,i.load(w).done(x=>{var E=a&&function ck(r){return"Z"===r?.slice(-1)||"'Z'"===r?.slice(-3)}(e.serializationFormat)&&c>3;E&&(x=hk(x,e)),_._processGroupItems(x,null,null,{level:c,column:e,headerFilterOptions:o}),S.resolve(x)}).fail(S.reject),S}}}(0,C.mf)(s)&&s.call(e,d);var p=d.dataSource.postProcess,_=this;return d.dataSource.postProcess=function(w){var S=w;return l&&(S=S.filter(x=>null!==x[e.lookup.valueExpr]),0===this.pageIndex()&&!this.searchValue()&&(S=S.slice(0)).unshift(null),_._processGroupItems(S,null,null,{level:0,column:e,headerFilterOptions:o})),S=p&&p.call(this,S)||S,_._updateSelectedState(S,e),S},d.dataSource}}getCurrentColumn(){return this._currentColumn}showHeaderFilterMenu(e,t){var i=this._columnsController,a=(0,B.l)(!0,{},this._columnsController.getColumns()[e]);if(a){var n=i.getVisibleIndex(e),o=this.getView(t?"headerPanel":"columnHeadersView").getColumnElements().eq(t?a.groupIndex:n);this.showHeaderFilterMenuBase({columnElement:o,column:a,applyFilter:!0,apply(){i.columnOption(e,{filterValues:this.filterValues,filterType:this.filterType})}})}}showHeaderFilterMenuBase(e){var{column:t}=e;if(t){var i=Xn.getGroupInterval(t),a=this._dataController.dataSource(),n=a&&a.remoteOperations().filtering,s=e.onHidden;(0,B.l)(e,t,{type:i&&i.length>1?"tree":"list",remoteFiltering:n,onShowing:o=>{var l=o.component.$overlayContent().dxResizable("instance");l&&l.option("onResizeEnd",d=>{var u=this._columnsController.columnOption(e.dataField,"headerFilter");(u=u||{}).width=d.width,u.height=d.height,this._columnsController.columnOption(e.dataField,"headerFilter",u,!0)})},onHidden:()=>{s?.(),Ac(this)}}),e.dataSource=this.getDataSource(e),e.isFilterBuilder&&(e.dataSource.filter=null,e.alignment="right"),this._headerFilterView.showHeaderFilterMenu(e.columnElement,e)}}hideHeaderFilterMenu(){this._headerFilterView.hideHeaderFilterMenu()}}},views:{headerFilterView:class dk extends Vt.View{getPopupContainer(){return this._popupContainer}getListComponent(){return this._listComponent}applyHeaderFilter(e){var t=this.getListComponent(),i=t.option("searchValue"),a=ly(t),s=[];i||e.isFilterBuilder||!a?.option("value")?"tree"===e.type&&(e.filterType&&(e.filterType="include"),function o(l,d,u){(0,Y.S6)(d,(c,f)=>{if(void 0!==f.selected&&!!f.selected^u){var p=t._getNode(f),w=t._hasChildren(p)&&f.items&&f.items.some(S=>S.selected);if(!i||!w)return void l.push(f.value)}f.items&&f.items.length&&o(l,f.items,u)})}(s,t.option("items"),!1),e.filterValues=s):("tree"===e.type&&(e.filterType="exclude"),Array.isArray(e.filterValues)&&(e.filterValues=[])),e.filterValues&&!e.filterValues.length&&(e.filterValues=null),e.apply(),this.hideHeaderFilterMenu()}showHeaderFilterMenu(e,t){if(t){this._initializePopupContainer(t);var i=this.getPopupContainer();this.hideHeaderFilterMenu(),this.updatePopup(e,t),i.show()}}hideHeaderFilterMenu(){var e=this.getPopupContainer();e&&e.hide()}updatePopup(e,t){var i=this.option("showColumnLines"),a="right"===t.alignment^!i?"left":"right";this._popupContainer.setAria({role:"dialog",label:ae.Z.format("dxDataGrid-headerFilterLabel")}),this._popupContainer&&(this._cleanPopupContent(),this._popupContainer.option("position",{my:"".concat(a," top"),at:"".concat(a," bottom"),of:e,collision:"fit fit"}))}_getSearchExpr(e,t){var{lookup:i}=e,{useDefaultSearchExpr:a}=e,n=t.dataSource,s=t.search.searchExpr;if(s)return s;if(a||(0,C.$K)(n)&&!(0,C.mf)(n))return"text";if(i)return i.displayExpr||"this";if(e.dataSource){var{group:o}=e.dataSource;if(Array.isArray(o)&&o.length>0)return o[0].selector;if((0,C.mf)(o)&&!e.remoteFiltering)return o}return e.dataField||e.selector}_cleanPopupContent(){this._popupContainer&&this._popupContainer.$content().empty()}_initializePopupContainer(e){var t=this,i=t.element(),a=this._normalizeHeaderFilterOptions(e),{height:n,width:s}=a,o={width:s,height:n,visible:!1,shading:!1,showTitle:!1,showCloseButton:!1,hideOnParentScroll:!1,dragEnabled:!1,hideOnOutsideClick:!0,wrapperAttr:{class:sy},focusStateEnabled:!1,toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:a.texts.ok,onClick(){t.applyHeaderFilter(e)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:a.texts.cancel,onClick(){t.hideHeaderFilterMenu()}}}],resizeEnabled:!0,onShowing(l){l.component.$content().parent().addClass("dx-dropdowneditor-overlay"),t._initializeListContainer(e,a),e.onShowing&&e.onShowing(l)},onShown(){t.getListComponent().focus()},onHidden:e.onHidden,onInitialized(l){var{component:d}=l;d.option("animation",d._getDefaultOptions().animation)}};(0,C.$K)(t._popupContainer)?t._popupContainer.option(o):t._popupContainer=t._createComponent(i,rs.Z,o)}_initializeListContainer(e,t){var i=this,a=i._popupContainer.$content(),n=!e.isFilterBuilder&&t.allowSelectAll,s={searchEnabled:t.search.enabled,searchTimeout:t.search.timeout,searchEditorOptions:t.search.editorOptions,searchMode:t.search.mode||"",dataSource:e.dataSource,onContentReady(){i.renderCompleted.fire()},itemTemplate(l,d,u){var c=(0,b.Z)(u);return e.encodeHtml?c.text(l.text):c.html(l.text)}};function o(l){"searchValue"===l.fullName&&n&&!1!==i.option("headerFilter.hideSelectAllOnSearch")&&("tree"===e.type?l.component.option("showCheckBoxesMode",l.value?"normal":"selectAll"):l.component.option("selectionMode",l.value?"multiple":"all"))}i._listComponent="tree"===e.type?i._createComponent((0,b.Z)("<div>").appendTo(a),ou,(0,B.l)(s,{showCheckBoxesMode:n?"selectAll":"normal",onOptionChanged:o,keyExpr:"id"})):i._createComponent((0,b.Z)("<div>").appendTo(a),Al,(0,B.l)(s,{searchExpr:i._getSearchExpr(e,t),pageLoadMode:"scrollBottom",showSelectionControls:!0,selectionMode:n?"all":"multiple",onOptionChanged:o,onSelectionChanged(l){var d=l.component.option("items"),u=l.component.option("selectedItems");if(!l.component._selectedItemsUpdating&&!l.component.option("searchValue")&&!e.isFilterBuilder){var c=e.filterValues||[];0===u.length&&d.length&&(c.length<=1||"exclude"===e.filterType&&c.length===d.length-1)?(e.filterType="include",e.filterValues=[]):u.length===d.length&&(e.filterType="exclude",e.filterValues=[])}(0,Y.S6)(d,(p,_)=>{var w=Ae.getIndexByKey(_,u,null)>=0;if(!!_.selected!==w){_.selected=w,e.filterValues=e.filterValues||[];var x=Ae.getIndexByKey(_.value,e.filterValues,null);x>=0&&e.filterValues.splice(x,1),w^"exclude"===e.filterType&&e.filterValues.push(_.value)}}),dy(l,e.filterValues)},onContentReady(l){var{component:d}=l,u=d.option("items"),c=[];(0,Y.S6)(u,function(){this.selected&&c.push(this)}),d._selectedItemsUpdating=!0,d.option("selectedItems",c),d._selectedItemsUpdating=!1,dy(l,e.filterValues)}}))}_normalizeHeaderFilterOptions(e){var t=this.option("headerFilter")||{},i=e.headerFilter||{};return(0,B.l)(!0,{},t,{search:{enabled:t.allowSearch,timeout:t.searchTimeout}},i,{search:{enabled:i.allowSearch,mode:i.searchMode,timeout:i.searchTimeout}})}_renderCore(){this.element().addClass(sy)}}},extenders:{controllers:{data:r=>class extends r{skipCalculateColumnFilters(){return!1}_calculateAdditionalFilter(){if(this.skipCalculateColumnFilters())return super._calculateAdditionalFilter();var e=[super._calculateAdditionalFilter()],t=this._columnsController.getVisibleColumns(null,!0),a=this._headerFilterController.getCurrentColumn();return(0,Y.S6)(t,(n,s)=>{var o;if((!a||a.index!==s.index)&&$u(s)&&s.calculateFilterExpression&&Array.isArray(s.filterValues)&&s.filterValues.length){var l=[];(0,Y.S6)(s.filterValues,(d,u)=>{Array.isArray(u)?o=u:(s.deserializeValue&&!Ae.isDateType(s.dataType)&&"number"!==s.dataType&&(u=s.deserializeValue(u)),o=s.createFilterExpression(u,"=","headerFilter")),o&&(o.columnIndex=s.index),l.push(o)}),l=Ae.combineFilters(l,"or"),e.push("exclude"===s.filterType?["!",l]:l)}}),Ae.combineFilters(e)}}},views:{columnHeadersView:r=>class extends(uy(r)){_renderCellContent(e,t){var i,{column:a}=t;!a.command&&$u(a)&&this.option("headerFilter.visible")&&"header"===t.rowType&&(i=this._applyColumnState({name:"headerFilter",rootElement:e,column:a,showColumnLines:this.option("showColumnLines")}))&&this._subscribeToIndicatorEvent(i,a,"headerFilter"),super._renderCellContent.apply(this,arguments)}_subscribeToIndicatorEvent(e,t,i){"headerFilter"===i&&z.Z.on(e,Ft.u,this.createAction(a=>{a.event.stopPropagation(),$g(e,this),this._headerFilterController.showHeaderFilterMenu(t.index,!1)}))}_updateIndicator(e,t,i){var a=super._updateIndicator(e,t,i);a&&this._subscribeToIndicatorEvent(a,t,i)}_updateHeaderFilterIndicators(){this.option("headerFilter.visible")&&this._updateIndicators("headerFilter")}_needUpdateFilterIndicators(){return!0}_columnOptionChanged(e){var{optionNames:t}=e,i=Ae.checkChanges(t,["filterValues","filterValue"]),a=Ae.checkChanges(t,["filterValues","filterType"]);(i||a)&&this._needUpdateFilterIndicators()&&this._updateHeaderFilterIndicators(),a||super._columnOptionChanged(e)}},headerPanel:r=>class extends(uy(r)){_createGroupPanelItem(e,t){var a,i=super._createGroupPanelItem.apply(this,arguments);return!t.command&&$u(t)&&this.option("headerFilter.visible")&&(a=this._applyColumnState({name:"headerFilter",rootElement:i,column:{alignment:(0,li.q)(this.option("rtlEnabled")),filterValues:t.filterValues,allowHeaderFiltering:!0,caption:t.caption},showColumnLines:!0}))&&z.Z.on(a,Ft.u,this.createAction(n=>{var{event:s}=n;s.stopPropagation(),this._headerFilterController.showHeaderFilterMenu(t.index,!0)})),i}}}}};He.registerModule("headerFilter",mk);var Gu="dx-filterbuilder-range",Ck="".concat(Gu,"-start"),wk="".concat(Gu,"-end"),bk="".concat(Gu,"-separator"),cy="\u2013";function yk(r,e){var t=(0,b.Z)("<div>").addClass(Ck),i=(0,b.Z)("<div>").addClass(wk),a=r.value||[],n=function(o){return o&&o.length>0?o[0]:null},s=function(o){return o&&2===o.length?o[1]:null};e.append(t),e.append((0,b.Z)("<span>").addClass(bk).text(cy)),e.append(i),e.addClass(Gu),this._editorFactory.createEditor.call(this,t,(0,B.l)({},r.field,r,{value:n(a),parentType:"filterBuilder",setValue(o){a=[o,s(a)],r.setValue(a)}})),this._editorFactory.createEditor.call(this,i,(0,B.l)({},r.field,r,{value:s(a),parentType:"filterBuilder",setValue(o){a=[n(a),o],r.setValue(a)}}))}function py(r,e){return{name:"between",caption:r,icon:"range",valueSeparator:cy,dataTypes:["number","date","datetime"],editorTemplate:yk.bind(e),notForLookup:!0}}var xk={"=":"equal","<>":"notequal","<":"less","<=":"lessorequal",">":"greater",">=":"greaterorequal",notcontains:"doesnotcontain",contains:"contains",startswith:"startswith",endswith:"endswith",isblank:"isblank",isnotblank:"isnotblank"},Sk={"=":"equal","<>":"notEqual","<":"lessThan","<=":"lessThanOrEqual",">":"greaterThan",">=":"greaterThanOrEqual",startswith:"startsWith",contains:"contains",notcontains:"notContains",endswith:"endsWith",isblank:"isBlank",isnotblank:"isNotBlank",between:"between"};const fy_getIconByFilterOperation=r=>xk[r],fy_getNameByFilterOperation=r=>Sk[r];var Rf="string",vy="icon-none",Sn="and",Lf="=",Ik={number:["=","<>","<",">","<=",">=","isblank","isnotblank"],string:["contains","notcontains","startswith","endswith","=","<>","isblank","isnotblank"],date:["=","<>","<",">","<=",">=","isblank","isnotblank"],datetime:["=","<>","<",">","<=",">=","isblank","isnotblank"],boolean:["=","<>","isblank","isnotblank"],object:["isblank","isnotblank"]},Ak={date:"shortDate",datetime:"shortDateShortTime"},Tk=["=","<>","isblank","isnotblank"],Dk=["caption","customizeText","dataField","dataType","editorTemplate","falseText","editorOptions","filterOperations","format","lookup","trueText","calculateFilterExpression","name"],gy="".concat("dx-filterbuilder","-text"),Rk="".concat(gy,"-part"),_y="".concat(gy,"-separator"),Lk="".concat(_y,"-empty");function vs(r){return r&&r.length>1&&"!"===r[0]&&!Ci(r)}function ja(r){return vs(r)?r[1]:r}function my(r){if(Ci(r))return Sn;for(var e="",t=0;t<r.length;t++){var i=r[t];if(!Array.isArray(i)){if(e&&e!==i)throw new lu.R0.Error("E4019");"!"!==i&&(e=i)}}return e}function gs(r){var e=ja(r),t=my(e);return t||(t=Sn),e!==r&&(t="!".concat(t)),t}function Cy(r){var e=function Mk(r){return Array.isArray(r)&&r.length}(r.filterOperations)?r.filterOperations:function kk(r){return r.lookup&&Tk||Ik[r.dataType||Rf]}(r);return(0,B.l)([],e)}function Pf(r,e){var t=fy_getNameByFilterOperation(r);return e&&e[t]?e[t]:t}function qa(r,e){var t=r.filter(i=>i.name===e);return t.length?t[0]:null}function Ff(r){return r.defaultFilterOperation||Cy(r)[0]}function Vf(r,e){var t=ja(r),i=t.indexOf(e);return t.splice(i,1),1!==t.length&&t.splice(i,1),r}function wy(r){var e=Nf(r),t=e?Bf(r):r;return e?["!",[t]]:[t]}function Uu(r,e){var t=ja(e),i=gs(t);return 1===t.length?t.unshift(r):t.push(r,i),e}function ju(r,e){for(var t=0;t<e.length;t++)if(e[t].name===r||e[t].dataField.toLowerCase()===r.toLowerCase())return e[t];var i=Dy(e,!0).filter(a=>a.dataField.toLowerCase()===r.toLowerCase());if(i.length>0)return i[0];throw new At.Z.Error("E1047",r)}function En(r){return!!Array.isArray(r)&&(r.length<2||Array.isArray(r[0])||Array.isArray(r[1]))}function Ci(r){return!!Array.isArray(r)&&r.length>1&&!Array.isArray(r[0])&&!Array.isArray(r[1])}function by(r,e,t){t=t||Sn;for(var i=my(r).toLowerCase()||t,a=[],n=0;n<r.length;n++)En(r[n])?(a.push(Hf(r[n],e,t)),a=Mf(a,i)):Ci(r[n])&&(a.push(qu(r[n],e)),a=Mf(a,i));return 0===a.length&&(a=Mf(a,i)),a}function qu(r,e){return function Wk(r,e){var t=qa(e,r[1]);return t&&t.name===r[1]}(r,e)||r.length<3&&(r[2]=r[1],r[1]=Lf),r}function Nf(r){return-1!==r.indexOf("not")}function Bf(r){return r.substring(3).toLowerCase()}function kf(r,e){var t=Nf(e);return e=t?Bf(e):e,t?["!",r,e]:[r,e]}function Mf(r,e){var t=Nf(e);e=t?Bf(e):e,r.push(e);var i=r;return t&&(i=["!",i]),i}function Hf(r,e,t){return t=t||Sn,r?Ci(r=(0,B.l)(!0,[],r))?kf(qu(r,e),t):vs(r)?["!",Ci(r[1])?kf(qu(r[1],e),t):vs(r[1])?kf(Hf(r[1],e),t):by(r[1],e,t)]:by(r,e,t):wy(t)}function yy(r,e,t,i){var a=ju(r[0],e),n=qu(r,t),s=t.length&&qa(t,n[1]);return s&&s.calculateFilterExpression?s.calculateFilterExpression.apply(s,[n[2],a,e]):a.createFilterExpression?a.createFilterExpression.apply(a,[n[2],n[1],i]):a.calculateFilterExpression?a.calculateFilterExpression.apply(a,[n[2],n[1],i]):a.defaultCalculateFilterExpression.apply(a,[n[2],n[1],i])}function co(r,e,t,i){if(!(0,C.$K)(r))return null;if(vs(r))return["!",co(r[1],e,t,i)];var n=ja(r);if(Ci(n))return yy(n,e,t,i)||null;for(var o,s=[],l=gs(n),d=0;d<n.length;d++)En(n[d])?(o=co(n[d],e,t,i))&&(d&&s.push(l),s.push(o)):Ci(n[d])&&(o=yy(n[d],e,t,i))&&(s.length&&s.push(l),s.push(o));return 1===s.length&&(s=s[0]),s.length?s:null}function Kl(r){var t,e=ja(r);if(0===e.length)return null;var i=[];for(t=0;t<e.length;t++)if(En(e[t])){var a=Kl(e[t]);a?e[t]=a:i.push(e[t])}else Ci(e[t])&&(Gk(e[t])||i.push(e[t]));for(t=0;t<i.length;t++)Vf(e,i[t]);return 1===e.length||(e.splice(e.length-1,1),1===e.length&&(r=function Fk(r,e){return vs(r)?r[1]=e:r=e,r}(r,e[0])),0===r.length)?null:r}function xy(r,e,t){if(""!==e){var{lookup:i}=r;if(i.items)t(i.calculateCellValue(e)||"");else{var a=(0,C.mf)(i.dataSource)?i.dataSource({}):i.dataSource;new vn.o(a).loadSingle(i.valueExpr,e).done(s=>{var o="";s&&(o=i.displayExpr?(0,Ot.vb)(i.displayExpr)(s):s),r.customizeText&&(o=r.customizeText({value:e,valueText:o})),t(o)}).fail(()=>{t("")})}}else t("")}function Sy(r,e,t,i,a){var n;return n=!0===e?r.trueText||ae.Z.format("dxDataGrid-trueText"):!1===e?r.falseText||ae.Z.format("dxDataGrid-falseText"):function Pk(r,e){return a_.Z.format(e,r.format||Ak[r.dataType])}(r,e),r.customizeText&&(n=r.customizeText.call(r,{value:e,valueText:n,target:i})),t&&t.customizeText&&(n=t.customizeText.call(t,{value:e,valueText:n,field:r,target:i},a)),n}function Zf(r){return""===r||null===r}function Ey(r,e,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"filterBuilder";if(Zf(e))return"";if(Array.isArray(e)){var a=new X.BH;return X.gx.apply(this,function $k(r,e,t,i){var a={values:e};return e.map(n=>Sy(r,n,t,i,a))}(r,e,t,i)).done(function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var l=s.some(d=>!Zf(d))?s.map(d=>Zf(d)?"?":d):"";a.resolve(l)}),a}return Sy(r,e,t,i)}function Iy(r,e){return r.some(t=>t.dataField===e)}function Ay(r,e,t){var{dataField:i}=t;zf(i)&&(t.parentId=Oy(i),!Iy(e,t.parentId)&&!Iy(r,t.parentId)&&Ay(r,e,{id:t.parentId,dataType:"object",dataField:t.parentId,caption:Ty(t.parentId,!0),filterOperations:["isblank","isnotblank"],defaultCalculateFilterExpression:Xn.defaultCalculateFilterExpression})),e.push(t)}function Ty(r,e){var t="";if(e)r=r.substring(r.lastIndexOf(".")+1);else if(zf(r))return r.split(".").forEach((i,a,n)=>{t+=(0,Ma.GK)(i),a!==n.length-1&&(t+=".")}),t;return(0,Ma.GK)(r)}function Dy(r,e){for(var t=[],i=0;i<r.length;i++){var a=(0,B.l)(!0,{caption:Ty(r[i].dataField,e)},r[i]);a.id=a.name||a.dataField,e?Ay(r,t,a):t.push(a)}return t}function zf(r){return-1!==r.lastIndexOf(".")}function Oy(r){return r.substring(0,r.lastIndexOf("."))}function Ry(r,e){if(zf(r.dataField))for(var t=Oy(r.dataField),i=0;i<e.length;i++)if(e[i].dataField===t)return"".concat(Ry(e[i],e),".").concat(r.caption);return r.caption}function Wf(r,e,t){var i=qa(t,e);return i?(!1===i.hasValue?(r[1]=e,r.length=2):(r[1]=e,r[2]=""),r):("isblank"===e?(r[1]=Lf,r[2]=null):"isnotblank"===e?(r[1]="<>",r[2]=null):(((i=qa(t,r[1]))||2===r.length||null===r[2])&&(r[2]=""),r[1]=e),r)}function Ly(r){return null===r[2]?r[1]===Lf?"isblank":"isnotblank":r[1]}function Gk(r){return""!==r[2]}function $l(r,e){return r[0]===e}function Kf(r,e){return r&&0!==r.length?Ci(r)?$l(r,e)?null:r:Py(r,[e],!1):null}function Py(r,e,t){var i=[];return r.forEach(a=>{Ci(a)?$l(a,e[0])?t?(i.push(e),t=!1):i.splice(i.length-1,1):i.push(a):(i.length||En(a))&&i.push(a)}),0===i.length?null:(t&&(i.push(Sn),i.push(e)),1===i.length?i[0]:i)}function Fy(r,e){return null===r||0===r.length?e:Ci(r)?$l(r,e[0])?e:[r,Sn,e]:gs(r)!==Sn?[e,"and",r]:Py(r,e,!0)}function Vy(r,e){return null!==r&&0!==r.length&&(Ci(r)?r[0]===e:r.some(t=>(Ci(t)||En(t))&&Vy(t,e)))}var $f=function(r,e,t){if(Array.isArray(e)){var i=e.length-1;r.empty(),e.forEach((a,n)=>{(0,b.Z)("<span>").addClass(Rk).text(a).appendTo(r),n!==i&&(0,b.Z)("<span>").addClass(_y).text(t&&t.valueSeparator?t.valueSeparator:"|").addClass(Lk).appendTo(r)})}else r.text(e||ae.Z.format("dxFilterBuilder-enterValueText"))};function Ny(r){var e=function(i,a){return a?"".concat(a,"/").concat(i):i},t=r&&r.getController("headerFilter");return{dataTypes:["string","date","datetime","number","boolean","object"],calculateFilterExpression:function(i,a,n){var s=[],o=i.length-1;return i&&i.forEach((l,d)=>{if(Ci(l)||En(l)){var u=co(l,n,[],"headerFilter");s.push(u)}else{var c=co([a.dataField,"=",l],n,[],"headerFilter");s.push(c)}d!==o&&s.push("or")}),1===s.length?s[0]:s},editorTemplate(i,a){var n=(0,b.Z)("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(a),s=(0,B.l)(!0,{},r.columnOption(i.field.dataField));return $f(n,i.text&&i.text.split("|")),s.filterType="include",s.filterValues=i.value?i.value.slice():[],t.showHeaderFilterMenuBase({columnElement:n,column:s,apply(){i.setValue(this.filterValues),t.hideHeaderFilterMenu(),i.closeEditor()},onHidden(){i.closeEditor()},isFilterBuilder:!0}),a},customizeText:function(i,a){a=a||{};var{value:n}=i,s=r.columnOption(i.field.dataField),o=s&&s.headerFilter,l=s&&s.lookup,d=a.values||[n];if(o&&o.dataSource||l&&l.dataSource){var u=new X.BH,c=a.items||new X.BH;if(!a.items){s=(0,B.l)({},s,{filterType:"include",filterValues:d});var f=t.getDataSource(s);f.paginate=!1;var p=new vn.o(f),_=p.store().key();if(_){var{values:w}=a;if(w&&w.length>1){var S=w.reduce((E,V)=>(E.length&&E.push("or"),E.push([_,"=",V]),E),[]);p.filter(S)}else p.filter([_,"=",i.value])}else i.field.calculateDisplayValue&&At.Z.log("W1017");a.items=c,p.load().done(c.resolve)}return c.done(E=>{var V=d.indexOf(i.value);u.resolve(function N(j,Q){var q=[];return j.forEach(k=>{if(k.items){var se=N(k.items,e(k.text,Q));q=q.concat(se)}k.selected&&q.push(e(k.text,Q))}),q}(E,null)[V])}),u}return t.getHeaderItemText(n,s,0,r.option("headerFilter"))}}}function qk(r){return(0,B.l)(Ny(r),{name:"anyof",icon:"selectall",caption:ae.Z.format("dxFilterBuilder-filterOperationAnyOf")})}function Yk(r){var e=Ny(r);return(0,B.l)({},e,{calculateFilterExpression(t,i,a){var n=e.calculateFilterExpression(t,i,a);return n&&0!==n.length?"!"===n[0]?n:["!",n]:null},name:"noneof",icon:"unselectall",caption:ae.Z.format("dxFilterBuilder-filterOperationNoneOf")})}var Xk=["=","<>","<","<=",">",">=","notcontains","contains","startswith","endswith","between"],By="include",Gl="exclude";function ya(r){return r.name||r.dataField}var Gf=function(){return{filterType:By,filterValues:void 0}},ky=function(r){var e=r.filterValues||[];return!Xn.getGroupInterval(r)&&!(r.headerFilter&&r.headerFilter.dataSource)||1===e.length&&null===e[0]},My=function(r){if((0,C.$K)(r.filterValue)){var t=r.selectedFilterOperation||r.defaultFilterOperation||Ff(r);return[ya(r),t,r.filterValue]}return null},Hy=function(r){var e,t,{filterValues:i}=r;return i?(1===i.length&&ky(r)&&!Array.isArray(i[0])?(e=r.filterType===Gl?"<>":"=",t=i[0]):(e=r.filterType===Gl?"noneof":"anyof",t=i),[ya(r),e,t]):null},Zy=function(r,e,t){var i=function(r,e){if(!r)return Gf();var t,i=r[1],a=r[2],n=Array.isArray(a);if(!n&&!ky(e))return Gf();switch(i){case"anyof":case"=":t=By;break;case"noneof":case"<>":t=Gl;break;default:return Gf()}return{filterType:t,filterValues:n?a:[a]}}(t,e);r.columnOption(ya(e),i)},zy=function(r,e,t){var i,a=t?.[1],n=t?.[2],s=e.filterOperations||e.defaultFilterOperations;(!s||s.indexOf(a)>=0||a===e.defaultFilterOperation)&&Xk.includes(a)&&null!==n?(a===e.defaultFilterOperation&&!(0,C.$K)(e.selectedFilterOperation)&&(a=e.selectedFilterOperation),i={filterValue:n,selectedFilterOperation:a}):i={filterValue:void 0,selectedFilterOperation:void 0},r.columnOption(ya(e),i)},rM={defaultOptions:()=>({filterValue:null,filterSyncEnabled:"auto"}),controllers:{filterSync:class eM extends Vt.Controller{init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._dataController.isFilterSyncActive()&&(this._columnsController.isAllDataTypesDefined()?this._initSync():this._dataController.dataSourceChanged.add(()=>this._initSync()))}publicMethods(){return["getCustomFilterOperations"]}syncFilterValue(){var e=this,t=this._columnsController.getFilteringColumns();this._skipSyncColumnOptions=!0,t.forEach(i=>{var a=function jk(r,e){return null===r||0===r.length?[]:Ci(r)?$l(r,e)?[r]:[]:gs(r)!==Sn?[]:r.filter(a=>Ci(a)&&$l(a,e))}(e.option("filterValue"),ya(i));if(1===a.length){var n=a[0];Zy(this._columnsController,i,n),zy(this._columnsController,i,n)}else(0,C.$K)(i.filterValues)&&Zy(this._columnsController,i,null),(0,C.$K)(i.filterValue)&&zy(this._columnsController,i,null)}),this._skipSyncColumnOptions=!1}_initSync(){var e=this._columnsController.getColumns(),t=this._dataController.pageIndex();if(function Jk(r){r.forEach(e=>{var t=ya(e);if(!(0,C.$K)(t)&&e.allowFiltering)throw new At.Z.Error("E1049",e.caption)})}(e),!this.option("filterValue")){var i=this._columnsController.getFilteringColumns(),a=this.getFilterValueFromColumns(i);this._silentOption("filterValue",a)}this.syncFilterValue(),this._dataController.pageIndex(t)}_getSyncFilterRow(e,t){var i=My(t);return(0,C.$K)(i)?Fy(e,i):Kf(e,ya(t))}_getSyncHeaderFilter(e,t){var i=Hy(t);return i?Fy(e,i):Kf(e,ya(t))}getFilterValueFromColumns(e){if(!this._dataController.isFilterSyncActive())return null;var t=["and"];return e&&e.forEach(i=>{var a=Hy(i),n=My(i);a&&Uu(a,t),n&&Uu(n,t)}),Kl(t)}syncFilterRow(e,t){this.option("filterValue",this._getSyncFilterRow(this.option("filterValue"),e))}syncHeaderFilter(e){this.option("filterValue",this._getSyncHeaderFilter(this.option("filterValue"),e))}getCustomFilterOperations(){var e,t=null!==(e=this.option("filterBuilder.customOperations"))&&void 0!==e?e:[];return[qk(this.component),Yk(this.component)].concat(t)}}},extenders:{controllers:{data:r=>class extends r{optionChanged(e){switch(e.name){case"filterValue":this._applyFilter(),this.isFilterSyncActive()&&this._filterSyncController.syncFilterValue(),e.handled=!0;break;case"filterSyncEnabled":e.handled=!0;break;case"columns":if(this.isFilterSyncActive()){var t=this._columnsController.getColumnByPath(e.fullName);if(t&&!this._filterSyncController._skipSyncColumnOptions){var i=this._parseColumnPropertyName(e.fullName);this._filterSyncController._skipSyncColumnOptions=!0,"filterType"===i?(Gl===e.value||Gl===e.previousValue)&&this._filterSyncController.syncHeaderFilter(t):"filterValues"===i?this._filterSyncController.syncHeaderFilter(t):["filterValue","selectedFilterOperation"].includes(i)&&this._filterSyncController.syncFilterRow(t,t.filterValue),this._filterSyncController._skipSyncColumnOptions=!1}}super.optionChanged(e);break;default:super.optionChanged(e)}}isFilterSyncActive(){var e=this.option("filterSyncEnabled");return"auto"===e?this.option("filterPanel.visible"):e}skipCalculateColumnFilters(){return((0,C.$K)(this.option("filterValue"))||this._filterSyncController._skipSyncColumnOptions)&&this.isFilterSyncActive()}_calculateAdditionalFilter(){if(!1===this.option("filterPanel.filterEnabled"))return super._calculateAdditionalFilter();var e=[super._calculateAdditionalFilter()],t=this._columnsController.getFilteringColumns(),i=this.option("filterValue");if(this.isFilterSyncActive()){var a=this._headerFilterController.getCurrentColumn(),n=this._applyFilterController.getCurrentColumnForFiltering(),s=a||n;(a||(0,C.$K)(n?.filterValue))&&i&&(i=Kf(i,ya(s)))}var d=co(i,t,this._filterSyncController.getCustomFilterOperations(),"filterBuilder");return d&&e.push(d),Ae.combineFilters(e)}_parseColumnPropertyName(e){var t=e.match(/.*\.(.*)/);return t?t[1]:null}clearFilter(e){this.component.beginUpdate(),arguments.length>0?("filterValue"===e&&this.option("filterValue",null),super.clearFilter(e)):(this.option("filterValue",null),super.clearFilter()),this.component.endUpdate()}_applyFilter(){return this._filterSyncController._skipSyncColumnOptions?(new X.BH).resolve():super._applyFilter.apply(this,arguments)}}},views:{columnHeadersView:r=>class extends r{optionChanged(e){"filterValue"===e.name?this._updateHeaderFilterIndicators():super.optionChanged(e)}_isHeaderFilterEmpty(e){return this._dataController.isFilterSyncActive()?!Vy(this.option("filterValue"),ya(e)):super._isHeaderFilterEmpty(e)}_needUpdateFilterIndicators(){return!this._dataController.isFilterSyncActive()}}}}};He.registerModule("filterSync",rM);var aM=ve(636),yr="dx-filterbuilder",po="".concat(yr,"-group"),Wy="".concat(po,"-item"),Ky="".concat(po,"-content"),nM="".concat(po,"-operations"),sM="".concat(po,"-operation"),Uf="".concat(yr,"-action"),$y="".concat(Uf,"-icon"),Ul="".concat(yr,"-text"),dM="".concat(yr,"-item-field"),uM="".concat(yr,"-item-operation"),Gy="".concat(yr,"-item-value"),hM="".concat(yr,"-item-value-text"),cM="".concat(yr,"-overlay"),pM="".concat(yr,"-operations"),fM="".concat(yr,"-fields"),vM="".concat(yr,"-add-condition"),Yu="dx-state-active",gM="".concat(yr,"-menu-custom-operation"),Uy="filterBuilder",jf="enter",mM=[{name:"onEditorPreparing",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onEditorPrepared",config:{excludeValidators:["disabled","readOnly"],category:"rendering"}},{name:"onValueChanged",config:{excludeValidators:["disabled","readOnly"]}}],Yy={and:"and",or:"or",notAnd:"!and",notOr:"!or"},CM=$0(class{});class Xy extends Dr.default{_getDefaultOptions(){return(0,B.l)(super._getDefaultOptions(),{onEditorPreparing:null,onEditorPrepared:null,onValueChanged:null,fields:[],groupOperations:["and","or","notAnd","notOr"],maxGroupLevel:void 0,value:null,allowHierarchicalFields:!1,groupOperationDescriptions:{and:ae.Z.format("dxFilterBuilder-and"),or:ae.Z.format("dxFilterBuilder-or"),notAnd:ae.Z.format("dxFilterBuilder-notAnd"),notOr:ae.Z.format("dxFilterBuilder-notOr")},customOperations:[],closePopupOnTargetScroll:!0,filterOperationDescriptions:{between:ae.Z.format("dxFilterBuilder-filterOperationBetween"),equal:ae.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:ae.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:ae.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:ae.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:ae.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:ae.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:ae.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:ae.Z.format("dxFilterBuilder-filterOperationContains"),notContains:ae.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:ae.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:ae.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:ae.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}})}_optionChanged(e){switch(e.name){case"closePopupOnTargetScroll":break;case"onEditorPreparing":case"onEditorPrepared":case"onValueChanged":this._initActions();break;case"customOperations":this._initCustomOperations(),this._invalidate();break;case"fields":case"maxGroupLevel":case"groupOperations":case"allowHierarchicalFields":case"groupOperationDescriptions":case"filterOperationDescriptions":this._invalidate();break;case"value":if(e.value!==e.previousValue){var t=this._disableInvalidateForValue;t||(this._initModel(),this._invalidate()),this._disableInvalidateForValue=!1,this.executeAction("onValueChanged",{value:e.value,previousValue:e.previousValue}),this._disableInvalidateForValue=t}break;default:super._optionChanged(e)}}getFilterExpression(){var e=this._getNormalizedFields();return co(Kl((0,B.l)(!0,[],this._model)),e,this._customOperations,Uy)}_getNormalizedFields(){return function Kk(r){return r.reduce((e,t)=>{if((0,C.$K)(t.dataField)){var i={};for(var a in t)t[a]&&Dk.includes(a)&&(i[a]=t[a]);i.defaultCalculateFilterExpression=Xn.defaultCalculateFilterExpression,(0,C.$K)(i.dataType)||(i.dataType=Rf),(0,C.$K)(i.trueText)||(i.trueText=ae.Z.format("dxDataGrid-trueText")),(0,C.$K)(i.falseText)||(i.falseText=ae.Z.format("dxDataGrid-falseText")),e.push(i)}return e},[])}(this.option("fields"))}_updateFilter(){this._disableInvalidateForValue=!0;var t=Kl((0,B.l)(!0,[],this._model)),i=Kl(this._getModel(this.option("value")));JSON.stringify(i)!==JSON.stringify(t)&&this.option("value",t),this._disableInvalidateForValue=!1,this._fireContentReadyAction()}_init(){this._initCustomOperations(),this._initModel(),this._initEditorFactory(),this._initActions(),super._init()}_initEditorFactory(){this._editorFactory=new CM}_initCustomOperations(){this._customOperations=function Uk(r,e,t){var i=(0,B.l)(!0,[],r),a=-1;return i.some((n,s)=>{if("between"===n.name)return a=s,!0}),-1!==a?i[a]=(0,B.l)(py(e,t),i[a]):i.unshift(py(e,t)),i}(this.option("customOperations"),this.option("filterOperationDescriptions.between"),this)}_getDefaultGroupOperation(){var e,t;return null!==(t=null===(e=this.option("groupOperations"))||void 0===e?void 0:e[0])&&void 0!==t?t:Yy.and}_getModel(e){return Hf(e,this._customOperations,this._getDefaultGroupOperation())}_initModel(){this._model=this._getModel(this.option("value"))}_initActions(){var e=this;e._actions={},mM.forEach(t=>{var i=(0,B.l)({},t.config);e._actions[t.name]=e._createActionByOption(t.name,i)})}executeAction(e,t){var i=this._actions[e];return i&&i(t)}_initMarkup(){this.$element().addClass(yr),super._initMarkup(),this._createGroupElementByCriteria(this._model).appendTo(this.$element())}_createConditionElement(e,t){return(0,b.Z)("<div>").addClass(po).append(this._createConditionItem(e,t))}_createGroupElementByCriteria(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=this._createGroupElement(e,t,i),n=a.find(".".concat(Ky)),s=ja(e),o=0;o<s.length;o++){var l=s[o];En(l)?this._createGroupElementByCriteria(l,e,i+1).appendTo(n):Ci(l)&&this._createConditionElement(l,e).appendTo(n)}return a}_createGroupElement(e,t,i){var a=(0,b.Z)("<div>").addClass(Wy),n=(0,b.Z)("<div>").addClass(Ky),s=(0,b.Z)("<div>").addClass(po).append(a).append(n);return null!=t&&this._createRemoveButton(()=>{Vf(t,e),s.remove(),this._updateFilter()}).appendTo(a),this._createGroupOperationButton(e).appendTo(a),this._createAddButton(()=>{var o=wy(this._getDefaultGroupOperation());Uu(o,e),this._createGroupElement(o,e,i+1).appendTo(n),this._updateFilter()},()=>{var l=function zk(r,e){var t=[r.dataField,"",""];return Wf(t,Ff(r),e),t}(this.option("fields")[0],this._customOperations);Uu(l,e),this._createConditionElement(l,e).appendTo(n),this._updateFilter()},i).appendTo(a),s}_createButton(e){return(0,b.Z)("<div>").text(e)}_createGroupOperationButton(e){var t=this._getGroupOperations(e),i=function Bk(r,e){var t=gs(r);return e.filter(i=>i.value===t)[0]}(e,t),a=i.text,n=t&&t.length<2?this._createButton(a).addClass("dx-state-disabled"):this._createButtonWithMenu({caption:a,menu:{items:t,displayExpr:"text",keyExpr:"value",onItemClick:s=>{i!==s.itemData&&(function Nk(r,e){var i,a;return function Vk(r,e){!function(t){return-1!==t.indexOf("!")}(e)?vs(r)&&function(t){var i=ja(t);t.length=0,[].push.apply(t,i)}(r):vs(r)||function(t){var i=t.slice(0);t.length=0,t.push("!",i)}(r)}(r,e),function(a,n){for(i=0;i<a.length;i++)Array.isArray(a[i])||(a[i]=n)}(ja(r),e=-1===(a=e).indexOf("!")?a:a.substring(1)),r}(e,s.itemData.value),n.text(s.itemData.text),i=s.itemData,this._updateFilter())},onContentReady(s){s.component.selectItem(i)},cssClass:nM}});return n.addClass(Ul).addClass(sM).attr("tabindex",0)}_createButtonWithMenu(e){var o,t=this,i=function(){t.$element().find(".".concat(Yu)).removeClass(Yu),t.$element().find(".dx-overlay .dx-treeview").remove(),t.$element().find(".dx-overlay").remove()},a=this.option("rtlEnabled"),n=a?"right":"left",s=this._createButton(e.caption);return(0,B.l)(e.menu,{focusStateEnabled:!0,selectionMode:"single",onItemClick:(o=e.menu.onItemClick,function(l){o(l),"dxclick"===l.event.type&&i()}),onHiding(){s.removeClass(Yu)},position:{my:"".concat(n," top"),at:"".concat(n," bottom"),offset:"0 1",of:s,collision:"flip"},animation:null,onHidden(){i()},cssClass:"".concat(cM," ").concat(e.menu.cssClass),rtlEnabled:a}),e.popup={onShown(l){var d=(0,b.Z)(l.component.content()).find(".dx-treeview"),u=d.dxTreeView("instance");z.Z.on(d,"keyup keydown",c=>{var f=(0,Ee.EV)(c);("keydown"===c.type&&"tab"===f||"keyup"===c.type&&("escape"===f||f===jf))&&(l.component.hide(),z.Z.trigger(e.menu.position.of,"focus"))}),u.focus(),u.option("focusedElement",null)}},this._subscribeOnClickAndEnterKey(s,()=>{i(),t._createPopupWithTreeView(e,t.$element()),s.addClass(Yu)}),s}_hasValueButton(e){var t=qa(this._customOperations,e[1]);return t?!1!==t.hasValue:null!==e[2]}_createOperationButtonWithMenu(e,t){var i=this,a=function Zk(r,e,t){var i=Cy(r),a=!!r.lookup;return t.forEach(n=>{if(!r.filterOperations&&-1===i.indexOf(n.name)){var s=n&&n.dataTypes;(!a||!n.notForLookup)&&s&&s.indexOf(r.dataType||Rf)>=0&&i.push(n.name)}}),i.map(n=>{var s=qa(t,n);return s?{icon:s.icon||vy,text:s.caption||(0,Ma.GK)(s.name),value:s.name,isCustom:!0}:{icon:fy_getIconByFilterOperation(n)||vy,text:Pf(n,e),value:n}})}(t,this.option("filterOperationDescriptions"),this._customOperations),n=function Hk(r,e){for(var t=0;t<e.length;t++)if(e[t].value===r)return e[t];throw new At.Z.Error("E1048",r)}(Ly(e),a),s=this._createButtonWithMenu({caption:n.text,menu:{items:a,displayExpr:"text",onItemRendered(o){o.itemData.isCustom&&(0,b.Z)(o.itemElement).addClass(gM)},onContentReady(o){o.component.selectItem(n)},onItemClick:o=>{if(n!==o.itemData){Wf(e,(n=o.itemData).value,i._customOperations);var l=s.siblings().filter(".".concat(Gy));i._hasValueButton(e)?(0!==l.length&&l.remove(),i._createValueButton(e,t).appendTo(s.parent())):l.remove(),s.text(n.text),this._updateFilter()}},cssClass:pM}}).addClass(Ul).addClass(uM).attr("tabindex",0);return s}_createOperationAndValueButtons(e,t,i){this._createOperationButtonWithMenu(e,t).appendTo(i),this._hasValueButton(e)&&this._createValueButton(e,t).appendTo(i)}_createFieldButtonWithMenu(e,t,i){var a=this,n=this.option("allowHierarchicalFields"),s=Dy(e,n),o=ju(i.name||i.dataField,s),l=function(u,c){return n?Ry(u,c):u.caption},d=this._createButtonWithMenu({caption:l(o,s),menu:{items:s,dataStructure:"plain",keyExpr:"id",parentId:"parentId",displayExpr:"caption",onItemClick:u=>{if(o!==u.itemData){t[0]=(o=u.itemData).name||o.dataField,t[2]="object"===o.dataType?null:"",Wf(t,Ff(o),a._customOperations),d.siblings().filter(".".concat(Ul)).remove(),a._createOperationAndValueButtons(t,o,d.parent());var c=l(o,u.component.option("items"));d.text(c),this._updateFilter()}},onContentReady(u){u.component.selectItem(o)},cssClass:fM}}).addClass(Ul).addClass(dM).attr("tabindex",0);return d}_createConditionItem(e,t){var i=(0,b.Z)("<div>").addClass(Wy),a=this._getNormalizedFields(),n=ju(e[0],a);return this._createRemoveButton(()=>{Vf(t,e),1===i.parent().children().length?i.parent().remove():i.remove(),this._updateFilter()}).appendTo(i),this._createFieldButtonWithMenu(a,e,n).appendTo(i),this._createOperationAndValueButtons(e,n,i),i}_getGroupOperations(e){var t=this.option("groupOperations"),i=this.option("groupOperationDescriptions");return(!t||!t.length)&&(t=[gs(e).replace("!","not")]),t.map(a=>({text:i[a],value:Yy[a]}))}_createRemoveButton(e){var t=(0,b.Z)("<div>").addClass($y).addClass("dx-icon-remove").addClass(Uf).attr("tabindex",0);return this._subscribeOnClickAndEnterKey(t,e),t}_createAddButton(e,t,i){var a,n=this.option("maxGroupLevel");return(0,C.$K)(n)&&i>=n?(a=this._createButton(),this._subscribeOnClickAndEnterKey(a,t)):a=this._createButtonWithMenu({menu:{items:[{caption:ae.Z.format("dxFilterBuilder-addCondition"),click:t},{caption:ae.Z.format("dxFilterBuilder-addGroup"),click:e}],displayExpr:"caption",onItemClick(s){s.itemData.click()},cssClass:vM}}),a.addClass($y).addClass("dx-icon-plus").addClass(Uf).attr("tabindex",0)}_createValueText(e,t,i){var a=this,n=(0,b.Z)("<div>").html("&nbsp;").addClass(hM).attr("tabindex",0).appendTo(i),s=e[2],o=qa(a._customOperations,e[1]);return!o&&t.lookup?xy(t,s,l=>{$f(n,l)}):(0,X.gx)(Ey(t,s,o)).done(l=>{$f(n,l,o)}),a._subscribeOnClickAndEnterKey(n,l=>{"keyup"===l.type&&l.stopPropagation(),a._createValueEditorWithEvents(e,t,i)}),n}_updateConditionValue(e,t,i){e[2]!==t&&(e[2]=t),i(),this._updateFilter()}_addDocumentKeyUp(e,t){var i=!1,a=!1,n=at.Z.getDocument(),s=l=>{i||a?a=!1:t(l)};z.Z.on(n,"keyup",s);var o=e.find("input");z.Z.on(o,"compositionstart",()=>{i=!0}),z.Z.on(o,"compositionend",()=>{i=!1,a=!0}),z.Z.on(o,"keydown",l=>{229!==l.which&&(a=!1)}),this._documentKeyUpHandler=s}_addDocumentClick(e,t){var i=at.Z.getDocument(),a=n=>{this._isFocusOnEditorParts(e,n.target)||(z.Z.trigger(e.find("input"),"change"),t())};z.Z.on(i,"dxpointerdown",a),this._documentClickHandler=a}_isFocusOnEditorParts(e,t){var i=t||at.Z.getActiveElement();return(0,b.Z)(i).closest(e.children()).length||(0,b.Z)(i).closest(".dx-dropdowneditor-overlay").length}_removeEvents(){var e=at.Z.getDocument();(0,C.$K)(this._documentKeyUpHandler)&&z.Z.off(e,"keyup",this._documentKeyUpHandler),(0,C.$K)(this._documentClickHandler)&&z.Z.off(e,"dxpointerdown",this._documentClickHandler)}_dispose(){this._removeEvents(),super._dispose()}_createValueEditorWithEvents(e,t,i){var a=e[2],n=()=>(i.empty(),this._removeEvents(),this._createValueText(e,t,i)),s=()=>{this._updateConditionValue(e,a,()=>{n()})},o={value:""===a?null:a,filterOperation:Ly(e),setValue(d){a=null===d?"":d},closeEditor:s,text:i.text()};i.empty();var l=this._createValueEditor(i,t,o);z.Z.trigger(l.find("input").not(":hidden").eq(0),"focus"),this._removeEvents(),this._addDocumentClick(l,s),this._addDocumentKeyUp(l,d=>{var u=(0,Ee.EV)(d);if("tab"===u){if(this._isFocusOnEditorParts(l))return;this._updateConditionValue(e,a,()=>{n(),d.shiftKey&&z.Z.trigger(i.prev(),"focus")})}"escape"===u&&z.Z.trigger(n(),"focus"),u===jf&&this._updateConditionValue(e,a,()=>{z.Z.trigger(n(),"focus")})}),this._fireContentReadyAction()}_createValueButton(e,t){var i=(0,b.Z)("<div>").addClass(Ul).addClass(Gy);return this._createValueText(e,t,i),i}_createValueEditor(e,t,i){var a=(0,b.Z)("<div>").attr("tabindex",0).appendTo(e),n=qa(this._customOperations,i.filterOperation),s=n&&n.editorTemplate?n.editorTemplate:t.editorTemplate;return s?this._getTemplate(s).render({model:(0,B.l)({field:t},i),container:a}):this._editorFactory.createEditor.call(this,a,(0,B.l)({},t,i,{parentType:Uy})),a}_createPopupWithTreeView(e,t){var i=this,a=(0,b.Z)("<div>").addClass(e.menu.cssClass).appendTo(t);this._createComponent(a,aM.Z,{onHiding:e.menu.onHiding,onHidden:e.menu.onHidden,rtlEnabled:e.menu.rtlEnabled,position:e.menu.position,animation:e.menu.animation,contentTemplate(n){var s=(0,b.Z)("<div>").appendTo(n);i._createComponent(s,ou,e.menu),this.repaint()},_ignoreFunctionValueDeprecation:!0,maxHeight:()=>Gb(e.menu.position.of),visible:!0,focusStateEnabled:!1,hideOnParentScroll:this.option("closePopupOnTargetScroll"),hideOnOutsideClick:!0,onShown:e.popup.onShown,shading:!1,width:"auto",height:"auto",showTitle:!1,_wrapperClassExternal:e.menu.cssClass})}_subscribeOnClickAndEnterKey(e,t){z.Z.on(e,"dxclick",t),z.Z.on(e,"keyup",i=>{(0,Ee.EV)(i)===jf&&t(i)})}}(0,Rt.Z)("dxFilterBuilder",Xy);const wM=Xy;var bM=ve(4404),xM={defaultOptions:()=>({filterBuilder:{groupOperationDescriptions:{and:ae.Z.format("dxFilterBuilder-and"),or:ae.Z.format("dxFilterBuilder-or"),notAnd:ae.Z.format("dxFilterBuilder-notAnd"),notOr:ae.Z.format("dxFilterBuilder-notOr")},filterOperationDescriptions:{between:ae.Z.format("dxFilterBuilder-filterOperationBetween"),equal:ae.Z.format("dxFilterBuilder-filterOperationEquals"),notEqual:ae.Z.format("dxFilterBuilder-filterOperationNotEquals"),lessThan:ae.Z.format("dxFilterBuilder-filterOperationLess"),lessThanOrEqual:ae.Z.format("dxFilterBuilder-filterOperationLessOrEquals"),greaterThan:ae.Z.format("dxFilterBuilder-filterOperationGreater"),greaterThanOrEqual:ae.Z.format("dxFilterBuilder-filterOperationGreaterOrEquals"),startsWith:ae.Z.format("dxFilterBuilder-filterOperationStartsWith"),contains:ae.Z.format("dxFilterBuilder-filterOperationContains"),notContains:ae.Z.format("dxFilterBuilder-filterOperationNotContains"),endsWith:ae.Z.format("dxFilterBuilder-filterOperationEndsWith"),isBlank:ae.Z.format("dxFilterBuilder-filterOperationIsBlank"),isNotBlank:ae.Z.format("dxFilterBuilder-filterOperationIsNotBlank")}},filterBuilderPopup:{}}),views:{filterBuilderView:class yM extends Vt.View{init(){super.init(),this._columnsController=this.getController("columns"),this._filterSyncController=this.getController("filterSync")}optionChanged(e){switch(e.name){case"filterBuilder":case"filterBuilderPopup":this._invalidate(),e.handled=!0;break;default:super.optionChanged(e)}}_renderCore(){this._updatePopupOptions()}_updatePopupOptions(){this.option("filterBuilderPopup.visible")?this._initPopup():this._filterBuilderPopup&&this._filterBuilderPopup.hide()}_disposePopup(){this._filterBuilderPopup&&(this._filterBuilderPopup.dispose(),this._filterBuilderPopup=void 0),this._filterBuilder&&(this._filterBuilder.dispose(),this._filterBuilder=void 0)}_initPopup(){var e=this;e._disposePopup(),e._filterBuilderPopup=e._createComponent(e.element(),rs.Z,(0,B.l)({title:ae.Z.format("dxDataGrid-filterBuilderPopupTitle"),contentTemplate:t=>e._getPopupContentTemplate(t),onOptionChanged(t){"visible"===t.name&&e.option("filterBuilderPopup.visible",t.value)},toolbarItems:e._getPopupToolbarItems()},e.option("filterBuilderPopup"),{onHidden(){Ac(e),e._disposePopup()}}))}_getPopupContentTemplate(e){var t=(0,b.Z)(e),i=(0,b.Z)("<div>").appendTo((0,b.Z)(e));this._filterBuilder=this._createComponent(i,wM,(0,B.l)({value:this.option("filterValue"),fields:this._columnsController.getFilteringColumns()},this.option("filterBuilder"),{customOperations:this._filterSyncController.getCustomFilterOperations()})),this._createComponent(t,bM.Z,{direction:"both"})}_getPopupToolbarItems(){var e=this;return[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:ae.Z.format("OK"),onClick(){var t=e._filterBuilder.option("value");e.option("filterValue",t),e._filterBuilderPopup.hide()}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:ae.Z.format("Cancel"),onClick(){e._filterBuilderPopup.hide()}}}]}}}};He.registerModule("filterBuilder",xM);var jl="filter-panel",SM="".concat(jl,"-text"),EM="".concat(jl,"-checkbox"),IM="".concat(jl,"-clear-filter"),AM="".concat(jl,"-left"),RM={defaultOptions:()=>({filterPanel:{visible:!1,filterEnabled:!0,texts:{createFilter:ae.Z.format("dxDataGrid-filterPanelCreateFilter"),clearFilter:ae.Z.format("dxDataGrid-filterPanelClearFilter"),filterEnabledHint:ae.Z.format("dxDataGrid-filterPanelFilterEnabledHint")}}}),views:{filterPanelView:class DM extends Vt.View{init(){this._dataController=this.getController("data"),this._columnsController=this.getController("columns"),this._filterSyncController=this.getController("filterSync"),this._dataController.dataSourceChanged.add(()=>this.render())}isVisible(){return this.option("filterPanel.visible")&&this._dataController.dataSource()}_renderCore(){var e=this.element();if(e.empty(),this._columnsController.getColumns().length){e.addClass(this.addWidgetPrefix(jl));var i=(0,b.Z)("<div>").addClass(this.addWidgetPrefix(AM)).appendTo(e);this._renderFilterBuilderText(e,i)}}_renderFilterBuilderText(e,t){var i=this._getFilterElement(),a=this._getTextElement();if(this.option("filterValue")||this._filterValueBuffer){var n=this._getCheckElement(),s=this._getRemoveButtonElement();return t.append(n).append(i).append(a),void e.append(s)}t.append(i).append(a)}_getCheckElement(){var e=this,t=(0,b.Z)("<div>").addClass(this.addWidgetPrefix(EM));return e._createComponent(t,bl,{value:e.option("filterPanel.filterEnabled"),onValueChanged(i){e.option("filterPanel.filterEnabled",i.value)}}),t.attr("title",this.option("filterPanel.texts.filterEnabledHint")),t}_getFilterElement(){var e=this,t=(0,b.Z)("<div>").addClass("dx-icon-filter");return z.Z.on(t,"click",()=>e._showFilterBuilder()),sl("filterPanel",e,t,void 0,()=>e._showFilterBuilder()),e._addTabIndexToElement(t),t}_getTextElement(){var i,e=this,t=(0,b.Z)("<div>").addClass(e.addWidgetPrefix(SM)),a=e.option("filterValue");return a?(0,X.gx)(e.getFilterText(a,this._filterSyncController.getCustomFilterOperations())).done(n=>{var s=e.option("filterPanel.customizeText");if(s){var o=s({component:e.component,filterValue:a,text:n});"string"==typeof o&&(n=o)}t.text(n)}):(i=e.option("filterPanel.texts.createFilter"),t.text(i)),z.Z.on(t,"click",()=>e._showFilterBuilder()),sl("filterPanel",e,t,void 0,()=>e._showFilterBuilder()),e._addTabIndexToElement(t),t}_showFilterBuilder(){this.option("filterBuilderPopup.visible",!0)}_getRemoveButtonElement(){var e=this,t=()=>e.option("filterValue",null),i=(0,b.Z)("<div>").addClass(e.addWidgetPrefix(IM)).text(e.option("filterPanel.texts.clearFilter"));return z.Z.on(i,"click",t),sl("filterPanel",this,i,void 0,t),e._addTabIndexToElement(i),i}_addTabIndexToElement(e){if(!this.option("useLegacyKeyboardNavigation")){var t=this.option("tabindex")||0;e.attr("tabindex",t)}}optionChanged(e){switch(e.name){case"filterValue":this._invalidate(),this.option("filterPanel.filterEnabled",!0),e.handled=!0;break;case"filterPanel":this._invalidate(),e.handled=!0;break;default:super.optionChanged(e)}}_getConditionText(e,t,i){var a="[".concat(e,"] ").concat(t);return(0,C.$K)(i)&&(a+=i),a}_getValueMaskedText(e){return Array.isArray(e)?"('".concat(e.join("', '"),"')"):" '".concat(e,"'")}_getValueText(e,t,i){var a=new X.BH,n=t&&t.customizeText;if((0,C.$K)(i)||n)if(!n&&e.lookup)xy(e,i,o=>{a.resolve(this._getValueMaskedText(o))});else{var s=Array.isArray(i)?i:Ae.getDisplayValue(e,i,null);(0,X.gx)(Ey(e,s,t,"filterPanel")).done(o=>{a.resolve(this._getValueMaskedText(o))})}else a.resolve("");return a.promise()}getConditionText(e,t){var o,i=this,a=e[1],n=new X.BH,s=qa(t.customOperations,a),l=ju(e[0],t.columns),d=l.caption||"",u=e[2];return o=s?s.caption||(0,Ma.GK)(s.name):Pf(null===u?"="===a?"isblank":"isnotblank":a,t.filterOperationDescriptions),this._getValueText(l,s,u).done(c=>{n.resolve(i._getConditionText(d,o,c))}),n}getGroupText(e,t,i){var a=this,n=new X.BH,s=[],o=gs(e);return e.forEach(l=>{Ci(l)?s.push(a.getConditionText(l,t)):En(l)&&s.push(a.getGroupText(l,t,!0))}),X.gx.apply(this,s).done(function(){for(var l,d=arguments.length,u=new Array(d),c=0;c<d;c++)u[c]=arguments[c];if(o.startsWith("!")){var f=t.groupOperationDescriptions["not".concat(o.substring(1,2).toUpperCase()).concat(o.substring(2))].split(" ");l="".concat(f[0]," ").concat(u[0])}else l=u.join(" ".concat(t.groupOperationDescriptions[o]," "));i&&(l="(".concat(l,")")),n.resolve(l)}),n}getFilterText(e,t){var i={customOperations:t,columns:this._columnsController.getFilteringColumns(),filterOperationDescriptions:this.option("filterBuilder.filterOperationDescriptions"),groupOperationDescriptions:this.option("filterBuilder.groupOperationDescriptions")};return Ci(e)?this.getConditionText(e,i):this.getGroupText(e,i)}}},extenders:{controllers:{data:r=>class extends r{optionChanged(e){"filterPanel"===e.name?(this._applyFilter(),e.handled=!0):super.optionChanged(e)}}}}};He.registerModule("filterPanel",RM);var Jy="search-panel",Qy="search-text";function ex(r){var e;return!!(null!==(e=r.allowSearch)&&void 0!==e?e:r.allowFiltering)}function tx(r,e){var{lookup:t}=r;return r.parseValue?t?r.parseValue.call(t,e):r.parseValue(e):e}var BM={defaultOptions:()=>({searchPanel:{visible:!1,width:160,placeholder:ae.Z.format("dxDataGrid-searchPanelPlaceholder"),highlightSearchText:!0,highlightCaseSensitive:!1,text:"",searchVisibleColumnsOnly:!1}}),extenders:{controllers:{data:r=>class extends r{optionChanged(e){switch(e.fullName){case"searchPanel.text":case"searchPanel":this._applyFilter(),e.handled=!0;break;default:super.optionChanged(e)}}publicMethods(){return super.publicMethods().concat(["searchByText"])}_calculateAdditionalFilter(){var e=super._calculateAdditionalFilter(),t=this.calculateSearchFilter(this.option("searchPanel.text"));return Ae.combineFilters([e,t])}searchByText(e){this.option("searchPanel.text",e)}calculateSearchFilter(e){var t,i,s,a=this._columnsController.getColumns(),n=this.option("searchPanel.searchVisibleColumnsOnly"),o=[];if(!e)return null;function l(u){for(var c=(0,Ot.vb)(s.valueExpr),f=0;f<u.length;f++){var p=c(u[f]);o.push(i.createFilterExpression(p,null,"search"))}}for(t=0;t<a.length;t++)if(i=a[t],(!n||i.visible)&&ex(i)&&i.calculateFilterExpression){s=i.lookup;var d=tx(i,e);s&&s.items?(0,va.Z)(s.items).filter(i.createFilterExpression.call({dataField:s.displayExpr,dataType:s.dataType,calculateFilterExpression:i.calculateFilterExpression},d,null,"search")).enumerate().done(l):void 0!==d&&o.push(i.createFilterExpression(d,null,"search"))}return 0===o.length?["!"]:Ae.combineFilters(o,"or")}}},views:{headerPanel:r=>class extends r{optionChanged(e){if("searchPanel"===e.name){if("searchPanel.text"===e.fullName){var t=this.getSearchTextEditor();t&&t.option("value",e.value)}else this._invalidate();e.handled=!0}else super.optionChanged(e)}_getToolbarItems(){var e=super._getToolbarItems();return this._prepareSearchItem(e)}_prepareSearchItem(e){var t=this,i=this._dataController,a=this.option("searchPanel");return a&&a.visible&&e.push({template(s,o,l){var d=(0,b.Z)("<div>").addClass(t.addWidgetPrefix(Jy)).appendTo(l);t._editorFactoryController.createEditor(d,{width:a.width,placeholder:a.placeholder,parentType:"searchPanel",value:t.option("searchPanel.text"),updateValueTimeout:700,setValue(u){i.searchByText(u)},editorOptions:{inputAttr:{"aria-label":ae.Z.format("".concat(t.component.NAME,"-ariaSearchInGrid"))}}}),t.resize()},name:"searchPanel",location:"after",locateInMenu:"never",sortIndex:40}),e}getSearchTextEditor(){var e=this,t=e.element(),i=t.find(".".concat(e.addWidgetPrefix(Jy))).filter(function(){return(0,b.Z)(this).closest(".".concat(e.addWidgetPrefix("header-panel"))).is(t)});return i.length?i.dxTextBox("instance"):null}isVisible(){var e=this.option("searchPanel");return super.isVisible()||!!e?.visible}},rowsView:r=>class extends r{init(){super.init.apply(this,arguments),this._searchParams=[],this._dataController=this.getController("data")}dispose(){clearTimeout(this._highlightTimer),super.dispose()}_getFormattedSearchText(e,t){var i=tx(e,t),a=Ae.getFormatOptionsByColumn(e,"search");return Ae.formatValue(i,a)}_getStringNormalizer(){var e,t,i,a,n=this.option("searchPanel.highlightCaseSensitive"),s=null===(t=null===(e=this._dataController)||void 0===e?void 0:e.getDataSource)||void 0===t?void 0:t.call(e),o=null===(a=null===(i=s?.loadOptions)||void 0===i?void 0:i.call(s))||void 0===a?void 0:a.langParams;return l=>(0,Ot.Ex)(l,n,o)}_findHighlightingTextNodes(e,t,i){var n,a=t.parent(),s=this._getStringNormalizer(),o=s(i),l=[];if(a.length){if(e)if(e.groupIndex>=0&&!e.showWhenGrouped)n=t;else{var d=this._columnsController.getVisibleIndex(e.index);n=a.children("td").eq(d).find("*")}}else a=(0,b.Z)("<div>").append(t);return(n=n?.length?n:a.find("*")).each((u,c)=>{for(var f,p,_=(0,b.Z)(c).contents(),w=0;w<_.length;w++){var S=_.get(w);3===S.nodeType&&s(null!==(p=null!==(f=S.textContent)&&void 0!==f?f:S.nodeValue)&&void 0!==p?p:"").includes(o)&&l.push(S)}}),l}_highlightSearchTextCore(e,t){var i=(0,b.Z)("<span>").addClass(this.addWidgetPrefix(Qy)),a=e.text(),n=e[0],s=this._getStringNormalizer(),o=s(a).indexOf(s(t));if(o>=0)return n.textContent?n.textContent=a.substr(0,o):n.nodeValue=a.substr(0,o),e.after(i.text(a.substr(o,t.length))),e=(0,b.Z)(at.Z.createTextNode(a.substr(o+t.length))).insertAfter(i),this._highlightSearchTextCore(e,t)}_highlightSearchText(e,t,i){var a=this,n=this._getStringNormalizer(),s=a.option("searchPanel.text");t&&i&&(s=s&&a._getFormattedSearchText(i,s)),s&&a.option("searchPanel.highlightSearchText")&&a._findHighlightingTextNodes(i,e,s).forEach(l=>{t?n((0,b.Z)(l).text())===n(s??"")&&(0,b.Z)(l).replaceWith((0,b.Z)("<span>").addClass(a.addWidgetPrefix(Qy)).text((0,b.Z)(l).text())):a._highlightSearchTextCore((0,b.Z)(l),s)})}_renderCore(){var e=super._renderCore.apply(this,arguments);return(this.option().rowTemplate||this.option("dataRowTemplate"))&&(this.option("templatesRenderAsynchronously")?(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._highlightSearchText(this.getTableElement())})):this._highlightSearchText(this.getTableElement())),e}_updateCell(e,t){var{column:i}=t,n="string"!==(i.lookup&&i.lookup.dataType||i.dataType);ex(i)&&!t.isOnForm&&(this.option("templatesRenderAsynchronously")?(this._searchParams.length||(clearTimeout(this._highlightTimer),this._highlightTimer=setTimeout(()=>{this._searchParams.forEach(s=>{this._highlightSearchText.apply(this,s)}),this._searchParams=[]})),this._searchParams.push([e,n,i])):this._highlightSearchText(e,n,i)),super._updateCell(e,t)}}}}};He.registerModule("search",BM);class kM extends zm.Z{_optionChanged(e){switch(e.name){case"pageIndex":var t=this.option("pageIndexChanged");t&&t(e.value);break;case"pageSize":var i=this.option("pageSizeChanged");i&&i(e.value)}super._optionChanged(e)}}var ix=ve(5871),MM=ve(8956);function Ya(r,e){var t,i=null!==(t=Jm(e))&&void 0!==t?t:{};return(0,MM.H)(i[r])}function Xu(r){return Ya("marginLeft",r)+Ya("marginRight",r)+Ya("width",r)}function rx(r){return Ya("minWidth",r)}var ZM=["contentTemplate","pagerProps"];var GM={},UM=r=>r&&(r.defaultProps?e=>(0,Qe.vs)((0,Qe.Iz)(2,r,(0,ye.Z)({},e))):r);let jM=(()=>{class r extends St.OS{constructor(t){super(t),this.parentRef=(0,Qe.Vf)(),this.pageSizesRef=(0,Qe.Vf)(),this.infoTextRef=(0,Qe.Vf)(),this.pagesRef=(0,Qe.Vf)(),this.actualIsLargeDisplayMode=!0,this.actualInfoTextVisible=!0,this.state={infoTextVisible:!0,isLargeDisplayMode:!0},this.subscribeToResize=this.subscribeToResize.bind(this),this.effectUpdateChildProps=this.effectUpdateChildProps.bind(this),this.updateAdaptivityProps=this.updateAdaptivityProps.bind(this)}createEffects(){return[new St.b0(this.subscribeToResize,[this.state.infoTextVisible,this.state.isLargeDisplayMode]),new St.b0(this.effectUpdateChildProps,[this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])]}updateEffects(){var t,i;null===(t=this._effects[0])||void 0===t||t.update([this.state.infoTextVisible,this.state.isLargeDisplayMode]),null===(i=this._effects[1])||void 0===i||i.update([this.props,this.state.infoTextVisible,this.state.isLargeDisplayMode,this.props.pagerProps,this.props.contentTemplate])}subscribeToResize(){var t=()=>{this.parentWidth>0&&this.updateAdaptivityProps()};return ix.Z.add(t),()=>{ix.Z.remove(t)}}effectUpdateChildProps(){this.parentWidth>0&&this.updateAdaptivityProps()}get contentAttributes(){var{className:t,displayMode:i,gridCompatibility:a,hasKnownLastPage:n,infoText:s,label:o,lightModeEnabled:l,maxPagesCount:d,onKeyDown:u,pageCount:c,pageIndex:f,pageIndexChange:p,pageSize:_,pageSizeChange:w,pageSizes:S,pagesCountText:x,pagesNavigatorVisible:E,rtlEnabled:V,showInfo:N,showNavigationButtons:j,showPageSizes:Q,totalCount:q,visible:k}=this.props.pagerProps;return(0,ye.Z)({},this.restAttributes,{pageSize:_,pageIndex:f,pageIndexChange:p,pageSizeChange:w,gridCompatibility:a,className:t,showInfo:N,infoText:s,lightModeEnabled:l,displayMode:i,maxPagesCount:d,pageCount:c,pagesCountText:x,visible:k,hasKnownLastPage:n,pagesNavigatorVisible:E,showPageSizes:Q,pageSizes:S,rtlEnabled:V,showNavigationButtons:j,totalCount:q,onKeyDown:u,label:o})}get parentWidth(){return this.parentRef.current?Xu(this.parentRef.current):0}updateAdaptivityProps(){var t=function $M(r){var{info:e,pageSizes:t,pages:i,parent:a}=r,n=function HM(r){var e=Ya("paddingLeft",r)+Ya("paddingRight",r);return Ya("width",r)-e}(a),s=Xu(t),o=Xu(e),l=Xu(i);return{parent:n,pageSizes:s,info:o+Ya("marginLeft",e)+Ya("marginRight",e),pages:l}}({parent:this.parentRef.current,pageSizes:this.pageSizesRef.current,info:this.infoTextRef.current,pages:this.pagesRef.current});if(this.actualInfoTextVisible===this.state.infoTextVisible&&this.actualIsLargeDisplayMode===this.state.isLargeDisplayMode){var i=!(0,C.$K)(this.elementsWidth);i&&(this.elementsWidth={}),(i||this.state.isLargeDisplayMode)&&(this.elementsWidth.pageSizes=t.pageSizes,this.elementsWidth.pages=t.pages),(i||this.state.infoTextVisible)&&(this.elementsWidth.info=t.info),this.actualIsLargeDisplayMode=function WM(r){var{pageSizes:e,pages:t,parent:i}=r;return i-(e+t)>0}((0,ye.Z)({parent:t.parent},{pageSizes:this.elementsWidth.pageSizes,pages:this.elementsWidth.pages})),this.actualInfoTextVisible=function KM(r){var{info:e,pageSizes:t,pages:i,parent:a}=r;return a-(t+i+e)>0}((0,ye.Z)({},t,{info:this.elementsWidth.info})),this.setState(a=>({infoTextVisible:this.actualInfoTextVisible})),this.setState(a=>({isLargeDisplayMode:this.actualIsLargeDisplayMode}))}}get restAttributes(){return(0,hi.Z)(this.props,ZM)}render(){var t=this.props;return(r=>{var{contentAttributes:e,infoTextRef:t,infoTextVisible:i,isLargeDisplayMode:a,pageSizesRef:n,pagesRef:s,parentRef:o,props:{contentTemplate:l}}=r;return l((0,ye.Z)({rootElementRef:o,pageSizesRef:n,infoTextRef:t,pagesRef:s,infoTextVisible:i,isLargeDisplayMode:a},e))})({props:(0,ye.Z)({},t,{contentTemplate:UM(t.contentTemplate)}),infoTextVisible:this.state.infoTextVisible,isLargeDisplayMode:this.state.isLargeDisplayMode,parentRef:this.parentRef,pageSizesRef:this.pageSizesRef,infoTextRef:this.infoTextRef,pagesRef:this.pagesRef,contentAttributes:this.contentAttributes,parentWidth:this.parentWidth,updateAdaptivityProps:this.updateAdaptivityProps,restAttributes:this.restAttributes})}}return r.defaultProps=GM,r})();var ax={gridCompatibility:!0,showInfo:!1,displayMode:"adaptive",maxPagesCount:10,pageCount:10,visible:!0,hasKnownLastPage:!0,pagesNavigatorVisible:"auto",showPageSizes:!0,pageSizes:Object.freeze([5,10]),showNavigationButtons:!1,totalCount:0,get label(){return ae.Z.format("dxPager-ariaLabel")}},qM=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(ax),Object.getOwnPropertyDescriptors({defaultPageSize:5,pageSizeChange:()=>{},defaultPageIndex:1,pageIndexChange:()=>{}}))),Oi=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(ax),Object.getOwnPropertyDescriptors({pageSize:5,pageIndex:1}))),YM=["infoText","pageCount","pageIndex","rootElementRef","totalCount"],nx="dx-info",JM={get pageIndex(){return Oi.pageIndex},get pageCount(){return Oi.pageCount},get totalCount(){return Oi.totalCount}};let QM=(()=>{class r extends St.Ul{constructor(t){super(t),this.state={}}get infoText(){var t;return(null!==(t=this.props.infoText)&&void 0!==t?t:"")||ae.Z.getFormatter("dxPager-infoText")()}get text(){var{pageCount:t,pageIndex:i,totalCount:a}=this.props;return(0,ca.WU)(this.infoText,(i+1).toString(),t.toString(),a.toString())}get restAttributes(){return(0,hi.Z)(this.props,YM)}render(){return(r=>{var{props:{rootElementRef:e},text:t}=r;return(0,Qe.Wm)(1,"div",nx,t,0,null,null,e)})({props:(0,ye.Z)({},this.props),infoText:this.infoText,text:this.text,restAttributes:this.restAttributes})}}return r.defaultProps=JM,r})();var e3=ve(28),ql=(0,St.kr)(void 0),t3=["children","className","label","onClick","selected","tabIndex"],r3={className:"",label:"",tabIndex:0,selected:!1};let Ju=(()=>{class r extends St.OS{constructor(t){super(t),this.state={},this.widgetRef=(0,Qe.Vf)(),this.keyboardEffect=this.keyboardEffect.bind(this),this.subscribeToClick=this.subscribeToClick.bind(this)}get keyboardContext(){return this.context[ql.id]?this.context[ql.id]:ql.defaultValue}createEffects(){return[new St.b0(this.keyboardEffect,[this.keyboardContext,this.props.onClick]),new St.b0(this.subscribeToClick,[this.props.onClick])]}updateEffects(){var t,i;null===(t=this._effects[0])||void 0===t||t.update([this.keyboardContext,this.props.onClick]),null===(i=this._effects[1])||void 0===i||i.update([this.props.onClick])}keyboardEffect(){return this.keyboardContext.registerKeyboardAction(this.widgetRef.current,this.props.onClick)}subscribeToClick(){return(0,e3.OZ)(this.widgetRef.current,this.props.onClick)}get restAttributes(){return(0,hi.Z)(this.props,t3)}render(){return(r=>{var{props:{children:e,className:t,label:i,selected:a,tabIndex:n},widgetRef:s}=r;return(0,Qe.Wm)(1,"div",t,e,0,{tabIndex:n,role:"button","aria-label":i,"aria-current":a?"page":void 0},null,s)})({props:(0,ye.Z)({},this.props),widgetRef:this.widgetRef,keyboardContext:this.keyboardContext,restAttributes:this.restAttributes})}}return r.defaultProps=r3,r})();var sx="dx-selection",ox="dx-page-size",u3="".concat(ox," ").concat(sx),c3=["className","index","onClick","selected"],f3={index:0,selected:!1,className:"dx-page"};let lx=(()=>{class r extends St.Ul{constructor(t){super(t),this.state={}}get label(){return(0,ca.WU)(ae.Z.getFormatter("dxPager-page"),this.value)}get value(){return this.props.index+1}get className(){var{selected:t}=this.props;return(0,Ys.G)({["".concat(this.props.className)]:!!this.props.className,[sx]:!!t})}get restAttributes(){return(0,hi.Z)(this.props,c3)}render(){return(r=>{var{className:e,label:t,props:{onClick:i,selected:a},value:n}=r;return(0,Qe.Iz)(2,Ju,{className:e,label:t,onClick:i,selected:a,children:n})})({props:(0,ye.Z)({},this.props),label:this.label,value:this.value,className:this.className,restAttributes:this.restAttributes})}}return r.defaultProps=f3,r})();var v3=["pageIndexes"],g3=["maxPagesCount","pageCount","pageIndex","pageIndexChange"];function dx(r,e,t){return 1===r?"high":r+e===t-1?"low":"both"}function ux(r,e,t){var i=[],a=[];switch(t){case"none":i=[...r];break;case"both":i=[0,"low",...r,"high",e-1],a=r.slice(1,-1);break;case"high":i=[0,...r,"high",e-1],a=r.slice(0,-1);break;case"low":i=[0,"low",...r,e-1],a=r.slice(1)}return{slidingWindowIndexes:r,indexesForReuse:a,pageIndexes:i}}function hx(r,e,t,i){for(var a=[],n=0;n<e;n+=1)a.push(n+r);return ux(a,t,i)}var C3={get pageIndex(){return Oi.pageIndex},get maxPagesCount(){return Oi.maxPagesCount},get pageCount(){return Oi.pageCount}};let w3=(()=>{class r extends St.Ul{constructor(t){super(t),this.state={},this.canReuseSlidingWindow=this.canReuseSlidingWindow.bind(this),this.generatePageIndexes=this.generatePageIndexes.bind(this),this.isSlidingWindowMode=this.isSlidingWindowMode.bind(this),this.onPageClick=this.onPageClick.bind(this)}get config(){return this.context[Cr.E.id]?this.context[Cr.E.id]:Cr.E.defaultValue}get slidingWindowState(){return this.slidingWindowStateHolder||{indexesForReuse:[],slidingWindowIndexes:[]}}canReuseSlidingWindow(t,i){var{indexesForReuse:a}=this.slidingWindowState,n=a.slice(-1)[0]<t-1,s=a.includes(i);return n&&s}generatePageIndexes(){var a,{pageCount:t,pageIndex:i}=this.props,{slidingWindowIndexes:n}=this.slidingWindowState,l=hx(a=i===n[0]?i-1:i===n[n.length-1]?i+2-4:i<4?1:i>=t-4?t-4-1:i-1,4,t,dx(a,4,t)),{pageIndexes:d}=l,u=(0,hi.Z)(l,v3);return this.slidingWindowStateHolder=u,d}isSlidingWindowMode(){var{maxPagesCount:t,pageCount:i}=this.props;return i<=4||i<=t}onPageClick(t){this.props.pageIndexChange(t)}get pageIndexes(){var{pageCount:t}=this.props;if(this.isSlidingWindowMode())return hx(0,t,t,"none").pageIndexes;if(this.canReuseSlidingWindow(t,this.props.pageIndex)){var{slidingWindowIndexes:i}=this.slidingWindowState;return ux(i,t,dx(i[0],4,t)).pageIndexes}return this.generatePageIndexes()}get pages(){var t,{pageIndex:i}=this.props,a=s=>{var o="low"===s||"high"===s?null:{index:s,onClick:()=>this.onPageClick(s),selected:i===s};return{key:s.toString(),pageProps:o}};return(null!==(t=this.config)&&void 0!==t&&t.rtlEnabled?[...this.pageIndexes].reverse():this.pageIndexes).map(s=>a(s))}get restAttributes(){return(0,hi.Z)(this.props,g3)}render(){return(r=>{var{pages:e}=r,t=e.map(i=>{var{key:a,pageProps:n}=i;return n?(0,Qe.Iz)(2,lx,{index:n.index,selected:n.selected,onClick:n.onClick},a):(0,Qe.Wm)(1,"div","dx-separator",". . .",16,null,a)});return(0,Qe.xJ)(t,0)})({props:(0,ye.Z)({},this.props),config:this.config,pageIndexes:this.pageIndexes,pages:this.pages,restAttributes:this.restAttributes})}}return r.defaultProps=C3,r})();var fo={hoverStateEnabled:!0,activeStateEnabled:!0,get focusStateEnabled(){return"desktop"===ft.Z.real().deviceType&&!ft.Z.isSimulator()}},Qu={label:"",get labelMode(){return(0,Lt.x2)((0,Lt.Vk)())?"floating":"static"}},b3=["accessKey","activeStateEnabled","className","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","invalidValueMessage","isDirty","isValid","label","labelMode","max","min","mode","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","showSpinButtons","step","tabIndex","useLargeSpinButtons","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],rr=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(ci),Object.getOwnPropertyDescriptors({defaultValue:0,isReactComponentWrapper:!0}))),S3={get defaultValue(){return rr.defaultValue},get readOnly(){return rr.readOnly},get name(){return rr.name},get validationError(){return rr.validationError},get validationErrors(){return rr.validationErrors},get validationMessageMode(){return rr.validationMessageMode},get validationMessagePosition(){return rr.validationMessagePosition},get validationStatus(){return rr.validationStatus},get isValid(){return rr.isValid},get isDirty(){return rr.isDirty},get inputAttr(){return rr.inputAttr},get className(){return rr.className},get activeStateEnabled(){return fo.activeStateEnabled},get disabled(){return rr.disabled},get focusStateEnabled(){return fo.focusStateEnabled},get hoverStateEnabled(){return fo.hoverStateEnabled},get tabIndex(){return rr.tabIndex},get visible(){return rr.visible},get label(){return Qu.label},get labelMode(){return Qu.labelMode},isReactComponentWrapper:!0};let E3=(()=>{class r extends St.Ul{constructor(t){super(t),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var t=(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,hi.Z)(t,b3)}render(){return(r=>{var{componentProps:e,restAttributes:t}=r;return(0,Qe.vs)((0,Qe.Iz)(2,Jc,(0,ye.Z)({componentType:gp,componentProps:e,templateNames:[]},t)))})({props:(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return r.defaultProps=S3,r})();function cx(r,e){return r+10*Math.max(...e).toString().length}var A3=["inputAttr","pageCount","pageIndex","pageIndexChange","pagesCountText"],T3="".concat(nx,"  dx-info-text"),px="dx-page-index",L3={inputAttr:Object.freeze({"aria-label":ae.Z.format("dxPager-ariaPageNumber")})},P3={get pageIndex(){return Oi.pageIndex},get pageCount(){return Oi.pageCount},get inputAttr(){return L3.inputAttr}};let F3=(()=>{class r extends St.OS{constructor(t){super(t),this.pageIndexRef=(0,Qe.Vf)(),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this),this.selectLastPageIndex=this.selectLastPageIndex.bind(this),this.valueChange=this.valueChange.bind(this)}createEffects(){return[new St.b0(this.updateWidth,[this.state.minWidth])]}updateEffects(){var t;null===(t=this._effects[0])||void 0===t||t.update([this.state.minWidth])}updateWidth(){var t,i=null===(t=this.pageIndexRef.current)||void 0===t?void 0:t.querySelector(".".concat(px));this.setState(a=>({minWidth:i&&rx(i)||a.minWidth}))}get value(){return this.props.pageIndex+1}get width(){var{pageCount:t}=this.props;return cx(this.state.minWidth,[t])}get pagesCountText(){var t;return(null!==(t=this.props.pagesCountText)&&void 0!==t?t:"")||ae.Z.getFormatter("dxPager-pagesCountText")()}selectLastPageIndex(){this.props.pageIndexChange(this.props.pageCount-1)}valueChange(t){this.props.pageIndexChange(t-1)}get restAttributes(){return(0,hi.Z)(this.props,A3)}render(){return(r=>{var{pageIndexRef:e,pagesCountText:t,props:{inputAttr:i,pageCount:a},selectLastPageIndex:n,value:s,valueChange:o,width:l}=r;return(0,Qe.Wm)(1,"div","dx-light-pages",[(0,Qe.Iz)(2,E3,{className:px,min:1,max:Math.max(a,s),width:l,value:s,valueChange:o,inputAttr:i}),(0,Qe.Wm)(1,"span",T3,t,0),(0,Qe.Iz)(2,lx,{className:"dx-pages-count",selected:!1,index:a-1,onClick:n})],4,null,null,e)})({props:(0,ye.Z)({},this.props),pageIndexRef:this.pageIndexRef,value:this.value,width:this.width,pagesCountText:this.pagesCountText,selectLastPageIndex:this.selectLastPageIndex,valueChange:this.valueChange,restAttributes:this.restAttributes})}}return r.defaultProps=P3,r})();var V3=["hasKnownLastPage","isLargeDisplayMode","maxPagesCount","pageCount","pageIndex","pageIndexChange","pagesCountText","showNavigationButtons","totalCount"],eh="dx-navigate-button",fx="dx-prev-button",vx="dx-next-button",gx="dx-button-disable",k3={nextEnabledClass:"".concat(eh," ").concat(vx),prevEnabledClass:"".concat(eh," ").concat(fx),nextDisabledClass:"".concat(gx," ").concat(eh," ").concat(vx),prevDisabledClass:"".concat(gx," ").concat(eh," ").concat(fx)},M3={next:"prev",prev:"next"},W3={get pageIndex(){return Oi.pageIndex},get maxPagesCount(){return Oi.maxPagesCount},get pageCount(){return Oi.pageCount},get hasKnownLastPage(){return Oi.hasKnownLastPage},get showNavigationButtons(){return Oi.showNavigationButtons},get totalCount(){return Oi.totalCount},get isLargeDisplayMode(){return true}};let K3=(()=>{class r extends St.Ul{constructor(t){super(t),this.state={},this.__getterCache={},this.pageIndexChange=this.pageIndexChange.bind(this),this.getButtonProps=this.getButtonProps.bind(this),this.canNavigateToPage=this.canNavigateToPage.bind(this),this.getNextPageIndex=this.getNextPageIndex.bind(this),this.canNavigateTo=this.canNavigateTo.bind(this),this.navigateToPage=this.navigateToPage.bind(this)}get config(){return this.context[Cr.E.id]?this.context[Cr.E.id]:Cr.E.defaultValue}pageIndexChange(t){this.canNavigateToPage(t)&&this.props.pageIndexChange(t)}getButtonProps(t){var i,a=null!==(i=this.config)&&void 0!==i&&i.rtlEnabled?M3[t]:t,n=this.canNavigateTo(a);return{className:k3["".concat(t).concat(n?"Enabled":"Disabled","Class")],tabIndex:n?0:-1,navigate:()=>this.navigateToPage(a)}}canNavigateToPage(t){return this.props.hasKnownLastPage?t>=0&&t<=this.props.pageCount-1:t>=0}getNextPageIndex(t){return this.props.pageIndex+function Z3(r){return"next"===r?1:-1}(t)}canNavigateTo(t){return this.canNavigateToPage(this.getNextPageIndex(t))}navigateToPage(t){this.pageIndexChange(this.getNextPageIndex(t))}get renderPrevButton(){var{isLargeDisplayMode:t,showNavigationButtons:i}=this.props;return!t||i}get renderNextButton(){return this.renderPrevButton||!this.props.hasKnownLastPage}get prevButtonProps(){return void 0!==this.__getterCache.prevButtonProps?this.__getterCache.prevButtonProps:this.__getterCache.prevButtonProps=(()=>this.getButtonProps("prev"))()}get nextButtonProps(){return void 0!==this.__getterCache.nextButtonProps?this.__getterCache.nextButtonProps:this.__getterCache.nextButtonProps=(()=>this.getButtonProps("next"))()}get restAttributes(){return(0,hi.Z)(this.props,V3)}componentWillUpdate(t,i,a){(this.context[Cr.E.id]!==a[Cr.E.id]||this.props.hasKnownLastPage!==t.hasKnownLastPage||this.props.pageCount!==t.pageCount||this.props.pageIndex!==t.pageIndex||this.props.pageIndexChange!==t.pageIndexChange)&&(this.__getterCache.prevButtonProps=void 0),(this.context[Cr.E.id]!==a[Cr.E.id]||this.props.hasKnownLastPage!==t.hasKnownLastPage||this.props.pageCount!==t.pageCount||this.props.pageIndex!==t.pageIndex||this.props.pageIndexChange!==t.pageIndexChange)&&(this.__getterCache.nextButtonProps=void 0)}render(){return(r=>{var{nextButtonProps:e,pageIndexChange:t,prevButtonProps:i,props:{isLargeDisplayMode:a,maxPagesCount:n,pageCount:s,pageIndex:o,pagesCountText:l},renderNextButton:d,renderPrevButton:u}=r;return(0,Qe.xJ)([u&&(0,Qe.Iz)(2,Ju,{label:ae.Z.getFormatter("dxPager-prevPage")(),className:i.className,tabIndex:i.tabIndex,onClick:i.navigate}),a&&(0,Qe.Iz)(2,w3,{maxPagesCount:n,pageCount:s,pageIndex:o,pageIndexChange:t}),!a&&(0,Qe.Iz)(2,F3,{pageCount:s,pageIndex:o,pageIndexChange:t,pagesCountText:l}),d&&(0,Qe.Iz)(2,Ju,{label:ae.Z.getFormatter("dxPager-nextPage")(),className:e.className,tabIndex:e.tabIndex,onClick:e.navigate})],0)})({props:(0,ye.Z)({},this.props),config:this.config,pageIndexChange:this.pageIndexChange,renderPrevButton:this.renderPrevButton,renderNextButton:this.renderNextButton,prevButtonProps:this.prevButtonProps,nextButtonProps:this.nextButtonProps,restAttributes:this.restAttributes})}}return r.defaultProps=W3,r})();var $3=["accessKey","activeStateEnabled","className","dataSource","defaultValue","disabled","displayExpr","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","label","labelMode","name","onClick","onFocusIn","onKeyDown","placeholder","readOnly","rtlEnabled","searchEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","valueExpr","visible","width"],Wi=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(ci),Object.getOwnPropertyDescriptors({placeholder:"",hoverStateEnabled:!0,searchEnabled:!1,defaultValue:null,isReactComponentWrapper:!0}))),U3={get placeholder(){return Wi.placeholder},get hoverStateEnabled(){return fo.hoverStateEnabled},get searchEnabled(){return Wi.searchEnabled},get defaultValue(){return Wi.defaultValue},get readOnly(){return Wi.readOnly},get name(){return Wi.name},get validationError(){return Wi.validationError},get validationErrors(){return Wi.validationErrors},get validationMessageMode(){return Wi.validationMessageMode},get validationMessagePosition(){return Wi.validationMessagePosition},get validationStatus(){return Wi.validationStatus},get isValid(){return Wi.isValid},get isDirty(){return Wi.isDirty},get inputAttr(){return Wi.inputAttr},get className(){return Wi.className},get activeStateEnabled(){return fo.activeStateEnabled},get disabled(){return Wi.disabled},get focusStateEnabled(){return fo.focusStateEnabled},get tabIndex(){return Wi.tabIndex},get visible(){return Wi.visible},get label(){return Qu.label},get labelMode(){return Qu.labelMode},isReactComponentWrapper:!0};let j3=(()=>{class r extends St.Ul{constructor(t){super(t),this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue}}get componentProps(){return(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value})}get restAttributes(){var t=(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,hi.Z)(t,$3)}render(){return(r=>{var{componentProps:e,restAttributes:t}=r;return(0,Qe.vs)((0,Qe.Iz)(2,Jc,(0,ye.Z)({componentType:n0,componentProps:e,templateNames:["dropDownButtonTemplate","groupTemplate","itemTemplate"]},t)))})({props:(0,ye.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}),componentProps:this.componentProps,restAttributes:this.restAttributes})}}return r.defaultProps=U3,r})();var q3=["inputAttr","pageSize","pageSizeChange","pageSizes","parentRef"],X3={inputAttr:Object.freeze({"aria-label":ae.Z.format("dxPager-ariaPageSize")})},J3={get pageSize(){return Oi.pageSize},get inputAttr(){return X3.inputAttr}};let Q3=(()=>{class r extends St.OS{constructor(t){super(t),this.state={minWidth:10},this.updateWidth=this.updateWidth.bind(this)}createEffects(){return[new St.b0(this.updateWidth,[this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])]}updateEffects(){var t;null===(t=this._effects[0])||void 0===t||t.update([this.props,this.state.minWidth,this.props.pageSize,this.props.pageSizeChange,this.props.pageSizes,this.props.inputAttr])}updateWidth(){this.setState(t=>({minWidth:rx(this.props.parentRef.current)||t.minWidth}))}get width(){return cx(this.state.minWidth,this.props.pageSizes.map(t=>t.value))}get restAttributes(){return(0,hi.Z)(this.props,q3)}render(){return(r=>{var{props:{inputAttr:e,pageSize:t,pageSizeChange:i,pageSizes:a},width:n}=r;return(0,Qe.Iz)(2,j3,{displayExpr:"text",valueExpr:"value",dataSource:a,value:t,valueChange:i,width:n,inputAttr:e})})({props:(0,ye.Z)({},this.props),width:this.width,restAttributes:this.restAttributes})}}return r.defaultProps=J3,r})();var e4=["pageSize","pageSizeChange","pageSizes"],i4={get pageSize(){return Oi.pageSize}};let r4=(()=>{class r extends St.Ul{constructor(t){super(t),this.state={},this.__getterCache={},this.onPageSizeChange=this.onPageSizeChange.bind(this)}get pageSizesText(){return void 0!==this.__getterCache.pageSizesText?this.__getterCache.pageSizesText:this.__getterCache.pageSizesText=(()=>{var{pageSize:t,pageSizes:i}=this.props;return i.map((a,n)=>{var{text:s,value:o}=a;return{className:(0,Ys.G)({[o===t?u3:ox]:!0,"dx-first-child":0===n}),click:this.onPageSizeChange(o),label:(0,ca.WU)(ae.Z.getFormatter("dxPager-pageSize"),o||ae.Z.getFormatter("dxPager-pageSizesAllText")),text:s}})})()}onPageSizeChange(t){return()=>(this.props.pageSizeChange(t),this.props.pageSize)}get restAttributes(){return(0,hi.Z)(this.props,e4)}componentWillUpdate(t,i,a){(this.props.pageSize!==t.pageSize||this.props.pageSizes!==t.pageSizes||this.props.pageSizeChange!==t.pageSizeChange)&&(this.__getterCache.pageSizesText=void 0)}render(){return(r=>{var{pageSizesText:e}=r;return(0,Qe.xJ)(e.map(t=>{var{className:i,click:a,label:n,text:s}=t;return(0,Qe.Iz)(2,Ju,{className:i,label:n,onClick:a,children:s},s)}),0)})({props:(0,ye.Z)({},this.props),pageSizesText:this.pageSizesText,restAttributes:this.restAttributes})}}return r.defaultProps=i4,r})();var a4=["isLargeDisplayMode","pageSize","pageSizeChange","pageSizes","rootElementRef"],l4={get pageSize(){return Oi.pageSize},get pageSizes(){return Oi.pageSizes},get isLargeDisplayMode(){return true}};let d4=(()=>{class r extends St.OS{constructor(t){super(t),this.state={},this.htmlRef=(0,Qe.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this)}createEffects(){return[new St.b0(this.setRootElementRef,[])]}setRootElementRef(){var{rootElementRef:t}=this.props;t&&(t.current=this.htmlRef.current)}get normalizedPageSizes(){return void 0!==this.__getterCache.normalizedPageSizes?this.__getterCache.normalizedPageSizes:this.__getterCache.normalizedPageSizes=(()=>{var{pageSizes:t}=this.props;return t.map(i=>"all"===i||0===i?{text:ae.Z.getFormatter("dxPager-pageSizesAllText")(),value:0}:{text:String(i),value:i})})()}get restAttributes(){return(0,hi.Z)(this.props,a4)}componentWillUpdate(t,i,a){super.componentWillUpdate(),this.props.pageSizes!==t.pageSizes&&(this.__getterCache.normalizedPageSizes=void 0)}render(){return(r=>{var{htmlRef:e,normalizedPageSizes:t,props:{isLargeDisplayMode:i,pageSize:a,pageSizeChange:n}}=r;return(0,Qe.Wm)(1,"div","dx-page-sizes",[i&&(0,Qe.Iz)(2,r4,{pageSizes:t,pageSize:a,pageSizeChange:n}),!i&&(0,Qe.Iz)(2,Q3,{parentRef:e,pageSizes:t,pageSize:a,pageSizeChange:n})],0,null,null,e)})({props:(0,ye.Z)({},this.props),htmlRef:this.htmlRef,normalizedPageSizes:this.normalizedPageSizes,restAttributes:this.restAttributes})}}return r.defaultProps=l4,r})();var u4=["className","displayMode","gridCompatibility","hasKnownLastPage","infoText","infoTextRef","infoTextVisible","isLargeDisplayMode","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pageSizesRef","pagesCountText","pagesNavigatorVisible","pagesRef","rootElementRef","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"],c4=Object.create(Object.prototype,(0,ye.Z)(Object.getOwnPropertyDescriptors(Oi),Object.getOwnPropertyDescriptors({infoTextVisible:!0,isLargeDisplayMode:!0})));let p4=(()=>{class r extends St.OS{constructor(t){super(t),this.state={},this.widgetRootElementRef=(0,Qe.Vf)(),this.__getterCache={},this.setRootElementRef=this.setRootElementRef.bind(this),this.createFakeInstance=this.createFakeInstance.bind(this)}createEffects(){return[new St.b0(this.setRootElementRef,[])]}getChildContext(){return(0,ye.Z)({},this.context,{[ql.id]:this.keyboardAction||ql.defaultValue})}setRootElementRef(){var{rootElementRef:t}=this.props;t&&(t.current=this.widgetRootElementRef.current)}createFakeInstance(){return{option:()=>!1,element:()=>this.widgetRootElementRef.current,_createActionByOption:()=>t=>{var i,a;null===(i=(a=this.props).onKeyDown)||void 0===i||i.call(a,t)}}}get keyboardAction(){return void 0!==this.__getterCache.keyboardAction?this.__getterCache.keyboardAction:this.__getterCache.keyboardAction=(()=>({registerKeyboardAction:(t,i)=>qg("pager",this.createFakeInstance(),t,void 0,i)}))()}get infoVisible(){var{infoTextVisible:t,showInfo:i}=this.props;return i&&t}get pageIndexSelectorVisible(){return 0!==this.props.pageSize}get normalizedDisplayMode(){var{displayMode:t,lightModeEnabled:i}=this.props;return"adaptive"===t&&void 0!==i?i?"compact":"full":t}get pagesContainerVisible(){return!!this.props.pagesNavigatorVisible&&this.props.pageCount>0}get pagesContainerVisibility(){if("auto"===this.props.pagesNavigatorVisible&&1===this.props.pageCount&&this.props.hasKnownLastPage)return"hidden"}get isLargeDisplayMode(){var t=this.normalizedDisplayMode;return"adaptive"===t?this.props.isLargeDisplayMode:"full"===t}get classes(){var t={["".concat(this.props.className)]:!!this.props.className,"dx-pager":!0,"dx-light-mode":!this.isLargeDisplayMode};return(0,Ys.G)(t)}get aria(){return{role:"navigation",label:this.props.label}}get restAttributes(){return(0,hi.Z)(this.props,u4)}componentWillUpdate(t,i,a){super.componentWillUpdate(),this.props.onKeyDown!==t.onKeyDown&&(this.__getterCache.keyboardAction=void 0)}render(){return(r=>{var{aria:e,classes:t,infoVisible:i,isLargeDisplayMode:a,pageIndexSelectorVisible:n,pagesContainerVisibility:s,pagesContainerVisible:o,props:{hasKnownLastPage:l,infoText:d,infoTextRef:u,maxPagesCount:c,pageCount:f,pageIndex:p,pageIndexChange:_,pageSize:w,pageSizeChange:S,pageSizes:x,pageSizesRef:E,pagesCountText:V,pagesRef:N,rtlEnabled:j,showNavigationButtons:Q,showPageSizes:q,totalCount:k,visible:se},restAttributes:he,widgetRootElementRef:F}=r;return(0,Qe.vs)((0,Qe.Iz)(2,Cl.$L,(0,ye.Z)({rootElementRef:F,rtlEnabled:j,classes:t,visible:se,aria:e},he,{children:[q&&(0,Qe.Iz)(2,d4,{rootElementRef:E,isLargeDisplayMode:a,pageSize:w,pageSizeChange:S,pageSizes:x}),o&&(0,Qe.Wm)(1,"div","dx-pages",[i&&(0,Qe.Iz)(2,QM,{rootElementRef:u,infoText:d,pageCount:f,pageIndex:p,totalCount:k}),n&&(0,Qe.Wm)(1,"div","dx-page-indexes",(0,Qe.Iz)(2,K3,{hasKnownLastPage:l,isLargeDisplayMode:a,maxPagesCount:c,pageCount:f,pageIndex:p,pageIndexChange:_,pagesCountText:V,showNavigationButtons:Q,totalCount:k}),2,null,null,N)],0,{style:(0,St.jk)({visibility:s})})]})))})({props:(0,ye.Z)({},this.props),widgetRootElementRef:this.widgetRootElementRef,keyboardAction:this.keyboardAction,infoVisible:this.infoVisible,pageIndexSelectorVisible:this.pageIndexSelectorVisible,pagesContainerVisible:this.pagesContainerVisible,pagesContainerVisibility:this.pagesContainerVisibility,isLargeDisplayMode:this.isLargeDisplayMode,classes:this.classes,aria:this.aria,restAttributes:this.restAttributes})}}return r.defaultProps=c4,r})();var f4=["className","defaultPageIndex","defaultPageSize","displayMode","gridCompatibility","hasKnownLastPage","infoText","label","lightModeEnabled","maxPagesCount","onKeyDown","pageCount","pageIndex","pageIndexChange","pageSize","pageSizeChange","pageSizes","pagesCountText","pagesNavigatorVisible","rtlEnabled","showInfo","showNavigationButtons","showPageSizes","totalCount","visible"];let g4=(()=>{class r extends St.DZ{constructor(t){super(t),this.__getterCache={},this.state={pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.props.defaultPageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.props.defaultPageIndex},this.pageIndexChange=this.pageIndexChange.bind(this),this.pageSizeChange=this.pageSizeChange.bind(this)}createEffects(){return[(0,St.gt)()]}pageIndexChange(t){var i,a;this.props.gridCompatibility?(this.setState(n=>({pageIndex:i=t+1})),this.props.pageIndexChange(i)):(this.setState(n=>({pageIndex:a=t})),this.props.pageIndexChange(a))}get pageIndex(){return this.props.gridCompatibility?(void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex)-1:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}pageSizeChange(t){var i;this.setState(a=>({pageSize:i=t})),this.props.pageSizeChange(i)}get className(){return this.props.gridCompatibility?(0,Ys.G)({"dx-datagrid-pager":!0,["".concat(this.props.className)]:!!this.props.className}):this.props.className}get pagerProps(){return void 0!==this.__getterCache.pagerProps?this.__getterCache.pagerProps:this.__getterCache.pagerProps=(()=>(0,ye.Z)({},(0,ye.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),{className:this.className,pageIndex:this.pageIndex,pageIndexChange:t=>this.pageIndexChange(t),pageSizeChange:t=>this.pageSizeChange(t)}))()}get restAttributes(){var t=(0,ye.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex});return(0,hi.Z)(t,f4)}componentWillUpdate(t,i,a){super.componentWillUpdate(),(this.props!==t||this.props.gridCompatibility!==t.gridCompatibility||this.props.className!==t.className||this.state.pageIndex!==i.pageIndex||this.props.pageIndex!==t.pageIndex||this.props.pageIndexChange!==t.pageIndexChange||this.props.pageSizeChange!==t.pageSizeChange)&&(this.__getterCache.pagerProps=void 0)}render(){return(r=>{var{pagerProps:e,restAttributes:t}=r;return(0,Qe.vs)((0,Qe.Iz)(2,jM,(0,ye.Z)({contentTemplate:p4,pagerProps:e},t)))})({props:(0,ye.Z)({},this.props,{pageSize:void 0!==this.props.pageSize?this.props.pageSize:this.state.pageSize,pageIndex:void 0!==this.props.pageIndex?this.props.pageIndex:this.state.pageIndex}),pageIndexChange:this.pageIndexChange,pageIndex:this.pageIndex,pageSizeChange:this.pageSizeChange,className:this.className,pagerProps:this.pagerProps,restAttributes:this.restAttributes})}}return r.defaultProps=qM,r})();class _x extends kM{getProps(){var e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}get _propsInfo(){return{twoWay:[["pageSize","defaultPageSize","pageSizeChange"],["pageIndex","defaultPageIndex","pageIndexChange"]],allowNull:[],elements:[],templates:[],props:["defaultPageSize","pageSizeChange","defaultPageIndex","pageIndexChange","gridCompatibility","className","showInfo","infoText","lightModeEnabled","displayMode","maxPagesCount","pageCount","pagesCountText","visible","hasKnownLastPage","pagesNavigatorVisible","showPageSizes","pageSizes","rtlEnabled","showNavigationButtons","totalCount","label","onKeyDown","pageSize","pageIndex"]}}get _viewComponent(){return g4}}(0,Rt.Z)("dxPager",_x);const _4=_x;var mx=function(r){return 1+(parseInt(r.pageIndex())||0)},b4={defaultOptions:()=>({pager:{visible:"auto",showPageSizeSelector:!1,allowedPageSizes:"auto",label:ae.Z.format("dxPager-ariaLabel")}}),views:{pagerView:class w4 extends Vt.View{init(){var e=this.getController("data");e.changed.add(t=>{if(t&&t.repaintChangesOnly){var i=this._pager;i?i.option({pageIndex:mx(e),pageSize:e.pageSize(),pageCount:e.pageCount(),totalCount:e.totalCount(),hasKnownLastPage:e.hasKnownLastPage()}):this.render()}else(!t||"update"!==t.changeType&&"updateSelection"!==t.changeType&&"updateFocusedRow"!==t.changeType)&&(this._pager=null,this.render())})}dispose(){this._pager=null}optionChanged(e){var{name:t}=e,i="pager"===t,a="paging"===t,n="dataSource"===t,s="scrolling"===t,o=this.getController("data");if(i||a||s||n){if(e.handled=!0,o.skipProcessingPagingChange(e.fullName))return;(i||a)&&(this._pageSizes=null),n||(this._pager=null,this._invalidate(),(0,Je.Ym)()&&i&&this.component&&this.component.resize())}}_renderCore(){var e,t=this.element().addClass(this.addWidgetPrefix("pager")),i=null!==(e=this.option("pager"))&&void 0!==e?e:{},a=this.getController("data"),n=this.getController("keyboardNavigation"),s={maxPagesCount:10,pageIndex:mx(a),pageCount:a.pageCount(),pageSize:a.pageSize(),showPageSizes:i.showPageSizeSelector,showInfo:i.showInfo,displayMode:i.displayMode,pagesNavigatorVisible:i.visible,showNavigationButtons:i.showNavigationButtons,label:i.label,pageSizes:this.getPageSizes(),totalCount:a.totalCount(),hasKnownLastPage:a.hasKnownLastPage(),pageIndexChanged(o){a.pageIndex()!==o-1&&a.pageIndex(o-1)},pageSizeChanged(o){a.pageSize(o)},onKeyDown:o=>n&&n.executeAction("onKeyDown",o),useLegacyKeyboardNavigation:this.option("useLegacyKeyboardNavigation"),useKeyboard:this.option("keyboardNavigation.enabled")};(0,C.$K)(i.infoText)&&(s.infoText=i.infoText),this._pager?this._pager.repaint():(0,Je.Ym)()?this._pager=this._createComponent(t,_4,s):t.addClass("dx-pager").html('<div class="dx-pages"><div class="dx-page"></div></div>')}getPager(){return this._pager}getPageSizes(){var e=this.getController("data"),t=this.option("pager"),i=t&&t.allowedPageSizes,a=e.pageSize();return(!(0,C.$K)(this._pageSizes)||!this._pageSizes.includes(a))&&(this._pageSizes=[],t&&(Array.isArray(i)?this._pageSizes=i:i&&a>1&&(this._pageSizes=[Math.floor(a/2),a,2*a]))),this._pageSizes}isVisible(){var e=this.getController("data"),t=this.option("pager"),i=t&&t.visible,a=this.option("scrolling");return"auto"===i&&(i=(!a||"virtual"!==a.mode&&"infinite"!==a.mode)&&(e.pageCount()>1||e.isLoaded()&&!e.hasKnownLastPage())),!!i}getHeight(){return this.getElementHeight()}}}};He.registerModule("pager",b4);var $r=ve(6050),y4=ve(5328),Cx="columns-separator-transparent",wx="drag-header",qf="drag-action",bx="tracker",yx="drop-highlight",xx="dx-block-separator",Sx="dx-header-row",ur="dxDataGridResizingReordering",Yl=function(r){return r.option("allowColumnResizing")||r.getController("columns").isColumnOptionUsed("allowResizing")},Ix=function(r){return r.option("allowColumnReordering")||r.getController("columns").isColumnOptionUsed("allowReordering")};class Ax extends Vt.View{_renderSeparator(){}_renderCore(e){var t=super._renderCore(e);return this._isShown=!0,this._renderSeparator(),this.hide(),t}show(){this._isShown=!0}hide(){this._isShown=!1}height(e){var t=this.element();if(t){if(!(0,C.$K)(e))return(0,we.Cr)(t);(0,we.QQ)(t,e)}}width(e){var t=this.element();if(t){if(!(0,C.$K)(e))return(0,we.dz)(t);(0,we.cl)(t,e)}}}var Xf=function(r){return"widget"!==r.option("columnResizingMode")},ms={views:{columnsSeparatorView:class D4 extends Ax{init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._init()}dispose(){this._unsubscribeFromCallback(),super.dispose()}optionChanged(e){"allowColumnResizing"===e.name&&(e.value?(this._init(),this._invalidate(),this.hide(!0)):(this._unsubscribeFromCallback(),this._isTransparent=Yl(this),this.hide(!0))),super.optionChanged(e)}_renderSeparator(){super._renderSeparator(),this.element().addClass(this.addWidgetPrefix("columns-separator"))}_subscribeToCallback(){var t,e=this;e._positionChanged=function(i){(t=e.element())&&(t.css({top:i.top}),(0,we.QQ)(t,i.height))},e._tablePositionController.positionChanged.add(e._positionChanged)}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_init(){this._isTransparent=Yl(this),this.isVisible()&&this._subscribeToCallback()}isVisible(){return this.option("showColumnHeaders")&&(Ix(this)||Yl(this))}show(){var e=this.element();e&&!this._isShown&&(this._isTransparent?e.removeClass(this.addWidgetPrefix(Cx)):e.show()),super.show()}hide(e){var t=this.element(),i=this.addWidgetPrefix(Cx);t&&(this._isShown||e)&&(this._isTransparent?(t.addClass(i),t.css("left",""),t.show()):(t.hasClass(i)&&t.removeClass(i),t.hide())),super.hide()}moveByX(e){var t=this.element();t&&t.css("left",null===e?0:e-this._parentElement().offset().left)}changeCursor(e){e=(0,C.$K)(e)?e:"";var t=this.element();t&&t.css("cursor",e)}},blockSeparatorView:class O4 extends Ax{init(){super.init(),this.getController("data").loadingChanged.add(t=>{t||this.hide()})}_renderSeparator(){super._renderSeparator(),this.element().addClass(xx).html("&nbsp;")}hide(){var e=this._parentElement(),t=this.element();t&&this._isShown&&t.css("display","none"),e&&!e.children(".".concat(xx)).length&&e.prepend(this.element()),super.hide()}isVisible(){var e=this.option("groupPanel"),t=this.option("columnChooser");return e&&e.visible||t&&t.enabled}show(e){var t=this.element();if(t&&!this._isShown)switch(e){case"group":this.element().css("display","block");break;case"columnChooser":!function(i){ti.Z.stop(t,!0),ti.Z.animate(t,{type:"slide",from:{width:0,display:i.display},to:i,duration:300,easing:"swing"})}({width:"100%",display:"block"});break;default:t.css("display","")}super.show()}},draggingHeaderView:class R4 extends Vt.View{init(){super.init();var e=this.getController("data");this._controller=this.getController("draggingHeader"),this._columnsResizerViewController=this.getController("columnsResizer"),this._columnsController=this.getController("columns"),this._isDragging=!1,e.loadingChanged.add(t=>{var i=this.element();!t&&i&&i.hide()})}isDragging(){return this._isDragging}_getDraggingPanelByPos(e){var t;return(0,Y.S6)(this._dragOptions.draggingPanels,(i,a)=>{if(a){var n=a.getBoundingRect();if(n&&(void 0===n.bottom||e.y<n.bottom)&&(void 0===n.top||e.y>n.top)&&(void 0===n.left||e.x>n.left)&&(void 0===n.right||e.x<n.right))return t=a,!1}}),t}_renderCore(){this.element().addClass("".concat(this.addWidgetPrefix(wx)," ").concat(this.addWidgetPrefix("text-content")," ").concat("dx-widget")).hide()}_resetTargetColumnOptions(){var e=this._dropOptions;e.targetColumnIndex=-1,delete e.targetColumnElement,delete e.isLast,delete e.posX,delete e.posY}_getVisibleIndexObject(e,t){return(0,C.$K)(e)?{columnIndex:t,rowIndex:e}:t}dispose(){var e=this.element();this._dragOptions=null,e&&e.parent().find(".".concat(this.addWidgetPrefix(wx))).remove()}isVisible(){var e=this._columnsController.getCommonSettings();return this.option("showColumnHeaders")&&(Ix(this)||e.allowGrouping||e.allowHiding)}dragHeader(e){var{columnElement:t}=e,i=!!e.sourceColumn.type;this._isDragging=!0,this._dragOptions=e,this._dropOptions={sourceIndex:e.index,sourceColumnIndex:this._getVisibleIndexObject(e.rowIndex,e.columnIndex),sourceColumnElement:e.columnElement,sourceLocation:e.sourceLocation};var a=at.Z.getDocument();this._onSelectStart=a.onselectstart,a.onselectstart=function(){return!1},this._controller.drag(this._dropOptions),this.element().css({textAlign:t&&t.css("textAlign"),height:t&&(i&&t.get(0).clientHeight||(0,we.Cr)(t)),width:t&&(i&&t.get(0).clientWidth||(0,we.dz)(t)),whiteSpace:t&&t.css("whiteSpace")}).addClass(this.addWidgetPrefix(qf)).toggleClass("dx-drag-command-cell",i).text(i?"":e.sourceColumn.caption),this.element().appendTo(y4.Z.getSwatchContainer(t))}moveHeader(e){var t=e.event,{that:i}=t.data,a=(0,Ee.a0)(t),n=!!i._columnsResizerViewController&&i._columnsResizerViewController.isResizing(),s=i._dragOptions;if(i._isDragging&&!n){var o=i.element(),l=Math.abs(a.x-s.columnElement.offset().left-s.deltaX),d=Math.abs(a.y-s.columnElement.offset().top-s.deltaY);(o.is(":visible")||l>5||d>5)&&(o.show(),o.css({left:a.x-s.deltaX,top:a.y-s.deltaY}),i.dockHeader(a)),t.preventDefault()}}dockHeader(e){var t=this._getDraggingPanelByPos(e),i=this._controller,a=this._dropOptions,n=this._dragOptions;if(t){var s=this.option("rtlEnabled"),o="columnChooser"===t.getName(),l=o?"y":"x",d=t.getName(),u="headers"===d?n.rowIndex:void 0,{sourceColumn:c}=n,f=t.getColumnElements(u,c?.ownerBand)||[],p=n.pointsByTarget=n.pointsByTarget||{},_="columnChooser"===d?[]:p[d]||i._generatePointsByColumns((0,B.l)({},n,{targetDraggingPanel:t,columns:t.getColumns(u),columnElements:f,isVerticalOrientation:o,startColumnIndex:"headers"===d&&(0,b.Z)(f[0]).index()}));if(p[d]=_,a.targetLocation=d,_.length>0)for(var w=0;w<_.length;w++){var S=_[w+1]&&(_[w][l]+_[w+1][l])/2;if(void 0===S||(s&&"x"===l?e[l]>S:e[l]<S)){a.targetColumnIndex=this._getVisibleIndexObject(u,_[w].columnIndex),f[w]?(a.targetColumnElement=f.eq(w),a.isLast=!1):(a.targetColumnElement=f.last(),a.isLast=!0),a.posX=_[w].x,a.posY=_[w].y,i.dock(a);break}}else this._resetTargetColumnOptions(),i.dock(a)}}dropHeader(e){var t=e.event,{that:i}=t.data,a=i._controller;i.element().hide(),a&&i._isDragging&&a.drop(i._dropOptions),i.element().appendTo(i._parentElement()),i._dragOptions=null,i._dropOptions=null,i._isDragging=!1,at.Z.getDocument().onselectstart=i._onSelectStart||null}},trackerView:class T4 extends Vt.View{init(){super.init(),this._tablePositionController=this.getController("tablePosition"),this._subscribeToCallback()}dispose(){this._unsubscribeFromCallback(),super.dispose()}optionChanged(e){"allowColumnResizing"===e.name&&(this._unsubscribeFromCallback(),e.value&&(this._subscribeToCallback(),this._invalidate())),super.optionChanged(e)}_renderCore(){var e=super._renderCore();return this.element().addClass(this.addWidgetPrefix(bx)),this.hide(),e}_unsubscribeFromCallback(){this._positionChanged&&this._tablePositionController.positionChanged.remove(this._positionChanged)}_subscribeToCallback(){var e=this;e._positionChanged=function(t){var i=e.element();i&&i.hasClass(e.addWidgetPrefix(bx))&&(i.css({top:t.top}),(0,we.QQ)(i,t.height))},this._tablePositionController.positionChanged.add(e._positionChanged)}isVisible(){return Yl(this)}show(){this.element().show()}hide(){this.element()&&this.element().hide()}setHeight(e){(0,we.QQ)(this.element(),e)}}},controllers:{draggingHeader:class F4 extends Vt.ViewController{init(){super.init(),this._columnsController=this.getController("columns"),this._tablePositionController=this.getController("tablePosition"),this._columnHeadersView=this.getView("columnHeadersView"),this._columnsSeparatorView=this.getView("columnsSeparatorView"),this._draggingHeaderView=this.getView("draggingHeaderView"),this._rowsView=this.getView("rowsView"),this._blockSeparatorView=this.getView("blockSeparatorView"),this._headerPanelView=this.getView("headerPanel"),this._columnChooserView=this.getView("columnChooserView");var e=()=>{if(this._draggingHeaderView){var t=[this._columnChooserView,this._columnHeadersView,this._headerPanelView];this._unsubscribeFromEvents(this._draggingHeaderView,t),this._subscribeToEvents(this._draggingHeaderView,t)}};this._columnHeadersView.renderCompleted.add(e),this._headerPanelView&&this._headerPanelView.renderCompleted.add(e),this._columnChooserView&&this._columnChooserView.renderCompleted.add(e)}dispose(){this._draggingHeaderView&&this._unsubscribeFromEvents(this._draggingHeaderView,[this._columnChooserView,this._columnHeadersView,this._headerPanelView])}_generatePointsByColumns(e){var t=this;return this.isCustomGroupColumnPosition=this.checkIsCustomGroupColumnPosition(e),Ae.getPointsByColumns(e.columnElements,a=>t._pointCreated(a,e.columns,e.targetDraggingPanel.getName(),e.sourceColumn),e.isVerticalOrientation,e.startColumnIndex)}checkIsCustomGroupColumnPosition(e){for(var t=!0,i=0;i<e.columns.length;i+=1){var a=e.columns[i];if("expand"===a.command&&!t)return!0;a.command||(t=!1)}return!1}_pointCreated(e,t,i,a){var n,s=t[e.columnIndex],o=t[e.columnIndex-1],l="expand"===o?.command,d="expand"===s?.command&&"expand"!==o?.command,u=a&&!a.allowReordering,c=!s?.allowReordering&&!o?.allowReordering;switch(i){case"columnChooser":return!0;case"headers":if(u)return!0;if(!d)return l||c;if(this.isCustomGroupColumnPosition)return!1;for(;"expand"===(null===(n=t[e.columnIndex])||void 0===n?void 0:n.command);)e.columnIndex+=1;return!1;default:return 0===t.length}}_subscribeToEvents(e,t){var i=this;(0,Y.S6)(t,(a,n)=>{if(n)for(var s,o=n.getRowCount?n.getRowCount():1,l=n.getName(),d=function(f,p){if(p){var _=(0,b.Z)(p),w=s[f];w&&n.allowDragging(w)&&(_.addClass(i.addWidgetPrefix(qf)),z.Z.on(_,(0,Ee.V4)($r.BL,ur),i.createAction(S=>{var x=S.event,E=(0,Ee.a0)(x);e.dragHeader({deltaX:E.x-(0,b.Z)(x.currentTarget).offset().left,deltaY:E.y-(0,b.Z)(x.currentTarget).offset().top,sourceColumn:w,index:w.index,columnIndex:f,columnElement:_,sourceLocation:l,draggingPanels:t,rowIndex:i._columnsController.getRowIndex(w.index,!0)})})),z.Z.on(_,(0,Ee.V4)($r.pB,ur),{that:e},i.createAction(e.moveHeader)),z.Z.on(_,(0,Ee.V4)($r.ut,ur),{that:e},i.createAction(e.dropHeader)))}},u=0;u<o;u++){var c=n.getColumnElements(u)||[];c.length&&(s=n.getColumns(u)||[],(0,Y.S6)(c,d))}})}_unsubscribeFromEvents(e,t){var i=this;(0,Y.S6)(t,(a,n)=>{if(n){var s=n.getColumnElements()||[];(0,Y.S6)(s,(o,l)=>{var d=(0,b.Z)(l);z.Z.off(d,(0,Ee.V4)($r.BL,ur)),z.Z.off(d,(0,Ee.V4)($r.pB,ur)),z.Z.off(d,(0,Ee.V4)($r.ut,ur)),d.removeClass(i.addWidgetPrefix(qf))})}})}_getSeparator(e){return"headers"===e?this._columnsSeparatorView:this._blockSeparatorView}hideSeparators(e){var t=this._blockSeparatorView,i=this._columnsSeparatorView;this._animationColumnIndex=void 0,t&&t.hide(),"block"!==e&&i&&i.hide()}allowDrop(e){return this._columnsController.allowMoveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}drag(e){var{sourceIndex:t}=e,{sourceLocation:i}=e,{sourceColumnElement:a}=e,n=this._columnHeadersView,s=this._rowsView;a&&(a.css({opacity:.5}),"headers"===i&&(n&&n.setRowsOpacity(t,.5),s&&s.setRowsOpacity(t,.5)))}dock(e){var t=this,i=(0,C.Kn)(e.targetColumnIndex)?e.targetColumnIndex.columnIndex:e.targetColumnIndex,{sourceLocation:a}=e,{targetLocation:n}=e,s=t._getSeparator(n),o=i>=0;t._columnHeadersView.element().find(".".concat(Sx)).toggleClass(t.addWidgetPrefix(yx),"headers"!==a&&"headers"===n&&!o),s&&(t.allowDrop(e)&&o?"group"===n||"columnChooser"===n?t._animationColumnIndex!==i&&(t.hideSeparators(),s.element()[e.isLast?"insertAfter":"insertBefore"](e.targetColumnElement),t._animationColumnIndex=i,s.show(n)):(t.hideSeparators("block"),t._tablePositionController.update(e.posY),s.moveByX(e.posX-s.width()),s.show()):t.hideSeparators())}drop(e){var{sourceColumnElement:t}=e;if(t&&(t.css({opacity:""}),this._columnHeadersView.setRowsOpacity(e.sourceIndex,""),this._rowsView.setRowsOpacity(e.sourceIndex,""),this._columnHeadersView.element().find(".".concat(Sx)).removeClass(this.addWidgetPrefix(yx))),this.allowDrop(e)){var i=this._getSeparator(e.targetLocation);i&&i.hide(),this._columnsController.moveColumn(e.sourceColumnIndex,e.targetColumnIndex,e.sourceLocation,e.targetLocation)}}},tablePosition:class P4 extends Vt.ViewController{constructor(e){super(e),this.positionChanged=(0,sr.Z)()}init(){super.init(),this._columnsResizerController=this.getController("columnsResizer"),this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView"),this._pagerView=this.getView("pagerView"),this._rowsView.resizeCompleted.add(()=>{if(this.option("allowColumnResizing")){var e=this._columnsResizerController._targetPoint;this.update(e?e.y:null)}})}update(e){var t={},i=this._columnHeadersView.element(),a=i&&i.offset(),n=a&&a.top||0,s=(0,C.$K)(e)?Math.abs(e-n):0,o=this._columnHeadersView?this._columnHeadersView.getHeight():0,l=this._rowsView.getScrollbarWidth(!0),d=this._rowsView?this._rowsView.height()-l:0,u=this.component.getView("draggingHeaderView");t.height=o,(this._columnsResizerController.isResizing()||u.isDragging())&&(t.height+=d-s),null!==e&&i&&i.length&&(t.top=i[0].offsetTop+s),this.positionChanged.fire(t)}},columnsResizer:class L4 extends Vt.ViewController{init(){this._subscribesToCallbacks=[],Yl(this)&&this._init()}dispose(){this._unsubscribes(),super.dispose()}optionChanged(e){super.optionChanged(e),"allowColumnResizing"===e.name&&(e.value?(this._init(),this._subscribeToEvents()):this._unsubscribes())}_isHeadersRowArea(e){if(this._columnHeadersView){var t=this._columnHeadersView.element();if(t){var i=t.offset().top,a=this._columnHeadersView.getHeadersRowHeight();return e>=i&&e<=i+a}}return!1}_isRtlParentStyle(){var e;return this.option("rtlEnabled")&&"rtl"===(null===(e=this._$parentContainer)||void 0===e?void 0:e.parent().css("direction"))}_pointCreated(e,t,i){var a=Xf(this),n=this.option("rtlEnabled"),s=this._isRtlParentStyle(),o=a||!n||s?1:0;if(e.index>=o&&e.index<t+(a||n&&!s?0:1)){e.columnIndex-=o;var l=i[e.columnIndex]||{};return!(a?l.allowResizing&&(i[e.columnIndex+1]||{}).allowResizing:l.allowResizing)}return!0}_getTargetPoint(e,t,i){if(e)for(var a=0;a<e.length;a++)if((e[a].x!==e[0].x||!e[a+1]||e[a].x!==e[a+1].x)&&e[a].x-i<=t&&t<=e[a].x+i)return e[a];return null}_moveSeparator(e){var t,i=e.event,a=i.data,n=a._columnsSeparatorView.width(),s=Xf(a),o=n/2,l=a._$parentContainer.offset(),d=l.left,u=(0,Ee.a0)(i),c=a.option("rtlEnabled"),f=this._isRtlParentStyle(),p=null===(t=a._draggingHeaderView)||void 0===t?void 0:t.isDragging();if(a._isResizing&&a._resizingInfo){if((d<=u.x||!s&&f)&&(!s||u.x<=d+(0,we.dz)(a._$parentContainer))&&a._updateColumnsWidthIfNeeded(u.x)){var _=a._columnHeadersView.getColumnElements().eq(a._resizingInfo.currentColumnIndex),w=_[0];if(w){var S=w.getBoundingClientRect().width;a._columnsSeparatorView.moveByX(_.offset().left+((s||f)&&c?0:S)),a._tablePositionController.update(a._targetPoint.y),i.preventDefault()}}}else p||(a._isHeadersRowArea(u.y)?(a._previousParentOffset&&(a._previousParentOffset.left!==l.left||a._previousParentOffset.top!==l.top)&&a.pointsByColumns(null),a._targetPoint=a._getTargetPoint(a.pointsByColumns(),u.x,n),a._previousParentOffset=l,a._isReadyResizing=!1,a._targetPoint?(a._columnsSeparatorView.changeCursor("col-resize"),a._columnsSeparatorView.moveByX(a._targetPoint.x-o),a._tablePositionController.update(a._targetPoint.y),a._isReadyResizing=!0,i.preventDefault()):(a._columnsSeparatorView.changeCursor(),a._columnsSeparatorView.moveByX(null))):(a.pointsByColumns(null),a._isReadyResizing=!1,a._columnsSeparatorView.changeCursor(),a._columnsSeparatorView.moveByX(null)))}_endResizing(e){var i=e.event.data;i._isResizing&&(i.pointsByColumns(null),i._resizingInfo=null,i._columnsSeparatorView.hide(),i._columnsSeparatorView.changeCursor(),i._trackerView.hide(),i._isReadyResizing=!1,i._isResizing=!1)}_getNextColumnIndex(e){return e+1}_setupResizingInfo(e){var t=this._targetPoint.columnIndex,i=this._getNextColumnIndex(t),a=this._columnHeadersView.getHeaderElement(t),n=this._columnHeadersView.getHeaderElement(i);this._resizingInfo={startPosX:e,currentColumnIndex:t,currentColumnWidth:a&&a.length>0?(0,li.l)(a[0]).width:0,nextColumnIndex:i,nextColumnWidth:n&&n.length>0?(0,li.l)(n[0]).width:0}}_startResizing(e){var t=e.event,i=t.data,a=(0,Ee.a0)(t);if((0,Ee.z6)(t)&&(i._isHeadersRowArea(a.y)?(i._targetPoint=i._getTargetPoint(i.pointsByColumns(),a.x,10),i._targetPoint&&(i._columnsSeparatorView.moveByX(i._targetPoint.x-i._columnsSeparatorView.width()/2),i._isReadyResizing=!0)):i._isReadyResizing=!1),i._isReadyResizing){i._setupResizingInfo(a.x),i._isResizing=!0,i._tablePositionController.update(i._targetPoint.y),i._columnsSeparatorView.show(),i._trackerView.show();var n=i.component.getScrollable();n&&i._isRtlParentStyle()&&(i._scrollRight=(0,we.dz)(n.$content())-(0,we.dz)(n.container())-n.scrollLeft()),t.preventDefault(),t.stopPropagation()}this.isResizing()&&this._editorFactoryController.loseFocus()}_generatePointsByColumns(){var e=this,t=e._columnsController?e._columnsController.getVisibleColumns():[],i=e._columnHeadersView.getColumnElements(),a=[];i&&i.length>0&&(a=Ae.getPointsByColumns(i,n=>e._pointCreated(n,i.length,t))),e._pointsByColumns=a}_unsubscribeFromEvents(){this._moveSeparatorHandler&&z.Z.off(at.Z.getDocument(),(0,Ee.V4)(kt.Z.move,ur),this._moveSeparatorHandler),this._startResizingHandler&&z.Z.off(this._$parentContainer,(0,Ee.V4)(kt.Z.down,ur),this._startResizingHandler),this._endResizingHandler&&(z.Z.off(this._columnsSeparatorView.element(),(0,Ee.V4)(kt.Z.up,ur),this._endResizingHandler),z.Z.off(at.Z.getDocument(),(0,Ee.V4)(kt.Z.up,ur),this._endResizingHandler))}_subscribeToEvents(){this._moveSeparatorHandler=this.createAction(this._moveSeparator),this._startResizingHandler=this.createAction(this._startResizing),this._endResizingHandler=this.createAction(this._endResizing),z.Z.on(at.Z.getDocument(),(0,Ee.V4)(kt.Z.move,ur),this,this._moveSeparatorHandler),z.Z.on(this._$parentContainer,(0,Ee.V4)(kt.Z.down,ur),this,this._startResizingHandler),z.Z.on(this._columnsSeparatorView.element(),(0,Ee.V4)(kt.Z.up,ur),this,this._endResizingHandler),z.Z.on(at.Z.getDocument(),(0,Ee.V4)(kt.Z.up,ur),this,this._endResizingHandler)}_updateColumnsWidthIfNeeded(e){var t,i,a=this._rowsView.contentWidth(),n=this._resizingInfo,s=this._columnsController,o=s.getVisibleColumns(),l=this._columnsSeparatorView.width(),d=Xf(this),u=d&&this.option("adaptColumnWidthByRatio")&&!this.option("columnAutoWidth"),c=this.option("rtlEnabled"),f=this._isRtlParentStyle(),p=o[n.currentColumnIndex],_=o[n.nextColumnIndex];function w(se){return(0,C.HD)(se)&&se.endsWith("%")}function S(se,he,F,P){if(se){var U=se.width;U&&(P=w(U)),P?(s.columnOption(se.index,"visibleWidth",he),s.columnOption(se.index,"width","".concat((he/F*100).toFixed(3),"%"))):(s.columnOption(se.index,"visibleWidth",null),s.columnOption(se.index,"width",he))}}t=e-n.startPosX,(d||f)&&c&&(t=-t);var se,he,F,P,U,K,ge,{cellWidth:x,nextCellWidth:E}=(ge={},(U=n.currentColumnWidth+(se=t))>=(K=p&&p.minWidth||l)?ge.cellWidth=U:(ge.cellWidth=K,P=!0),d&&((F=n.nextColumnWidth-se)>=(he=_&&_.minWidth||l)?ge.nextCellWidth=P?n.nextColumnWidth-(se+K-U):F:(ge.nextCellWidth=he,ge.cellWidth=n.currentColumnWidth+(se-he+F))),ge);if(i=p.width!==x){if(s.beginUpdate(),x=Math.floor(x),a=function(se,he){var F=he.every(U=>U.width);if(F){var P=he.reduce((U,K)=>(w(K.width)&&(U+=parseFloat(K.width)),U),0);P>100&&(se=se/P*100)}return se}(a,o),S(p,x,a,u),d)S(_,E=Math.floor(E),a,u);else{var V=this._columnHeadersView.getColumnWidths();V[n.currentColumnIndex]=x;var N=V.reduce((se,he)=>se+he,0)>this._rowsView.contentWidth();if(!N){var j=Ae.getLastResizableColumnIndex(o);j>=0&&s.columnOption(o[j].index,"visibleWidth","auto")}for(var Q=0;Q<V.length;Q++)o[Q]&&o[Q]!==p&&void 0===o[Q].width&&s.columnOption(o[Q].index,"width",V[Q])}if(s.endUpdate(),!d){this.component.updateDimensions();var q=this.component.getScrollable();if(q&&f){var k=(0,we.dz)(q.$content())-(0,we.dz)(q.container())-this._scrollRight;q.scrollTo({left:k})}}}return i}_subscribeToCallback(e,t){e.add(t),this._subscribesToCallbacks.push({callback:e,handler:t})}_unsubscribeFromCallbacks(){for(var e=0;e<this._subscribesToCallbacks.length;e++){var t=this._subscribesToCallbacks[e];t.callback.remove(t.handler)}this._subscribesToCallbacks=[]}_unsubscribes(){this._unsubscribeFromEvents(),this._unsubscribeFromCallbacks()}_init(){var e=()=>{this._isResizing||this.pointsByColumns(null)},t=n=>{this._scrollLeft!==n.left&&(this._scrollLeft=n.left,this.pointsByColumns(null))};this._columnsSeparatorView=this.getView("columnsSeparatorView"),this._columnHeadersView=this.getView("columnHeadersView"),this._trackerView=this.getView("trackerView"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._tablePositionController=this.getController("tablePosition"),this._editorFactoryController=this.getController("editorFactory"),this._draggingHeaderView=this.component.getView("draggingHeaderView"),this._$parentContainer=this.component.$element(),this._subscribeToCallback(this._columnHeadersView.renderCompleted,e),this._subscribeToCallback(this._columnHeadersView.resizeCompleted,e),this._subscribeToCallback(this._columnsSeparatorView.renderCompleted,()=>{this._unsubscribeFromEvents(),this._subscribeToEvents()}),this._subscribeToCallback(this._rowsView.renderCompleted,()=>{this._rowsView.scrollChanged.remove(t),this._rowsView.scrollChanged.add(t)});var i=0!==this._rowsView.getScrollbarWidth(),a=0;this._subscribeToCallback(this._tablePositionController.positionChanged,n=>{if(this._isResizing&&!this._rowsView.isResizing){var s=0!==this._rowsView.getScrollbarWidth();i!==s||a&&a!==n.height?(i=s,a=n.height,this.component.updateDimensions()):this._rowsView.updateFreeSpaceRowHeight()}a=n.height})}isResizing(){return this._isResizing}pointsByColumns(e){if(void 0===e)return this._pointsByColumns||this._generatePointsByColumns(),this._pointsByColumns;this._pointsByColumns=e}}},extenders:{views:{rowsView:r=>class extends r{_needUpdateRowHeight(e){var t=this.option("wordWrapEnabled"),i=this._columnsResizerController.isResizing();return super._needUpdateRowHeight.apply(this,arguments)||e>0&&t&&i}}},controllers:{editorFactory:r=>class extends r{renderFocusOverlay(){if(!this._columnsResizerController.isResizing())return super.renderFocusOverlay.apply(this,arguments)}}}}};He.registerModule("columnsResizingReordering",ms);var Jf=ve(2346),B4=(r,e)=>r.length===e.length&&!Object.keys(r).some(t=>r[t]!==e[t]),k4=(r,e)=>(0,le.bY)(r,e,{maxDepth:4}),H4={compareType:"reference"},Tx=function(r){var{compareType:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H4,t=null;return function(){for(var i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];if(!t){var s=r(...a);return t=((r,e,t,i)=>{var a=r,n=e;return function(){for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return i(o,a)||(a=o,n=t(...a)),n}})(a,s,r,"reference"===e?B4:k4),s}return t(...a)}},ev="rowsview",Dx="dx-data-row",Ox="dx-freespace-row",Rx="dx-master-detail-cell",th="dx-command-expand",Lx="dx-command-select",Px="dx-command-edit",Fx="[class^=dx-command]",ih="dx-cell-focus-disabled",Vx="dx-state-focused",Nx="dx-focused",tv="delete",rh='\n  input:not([type="hidden"]):not([disabled]),\n  textarea:not([disabled]),\n  a:not([disabled]),\n  select:not([disabled]),\n  button:not([disabled]),\n  [tabindex]:not([disabled]),\n  .dx-checkbox:not([disabled],.dx-state-readonly)\n',Bx="".concat(rh,", .dx-dropdowneditor-icon"),Hx="columnHeadersView",X4=["shift","control","alt"];function Xl(r){return r&&r.hasClass("dx-group-row")}function iv(r){return r&&r.hasClass("dx-master-detail-row")}function Jl(r){return r&&r.hasClass(Dx)}function zx(r,e){return!r._isRowEditMode()&&e&&!e.hasClass(Lx)&&e.hasClass(Tu)}function Pr(r){return(0,C.$K)(r)&&r.length>0}function rv(){return"desktop"!==ft.Z.current().deviceType}function Wx(r){return!!r.parent(".".concat("dx-header-row")).length}var h6={defaultOptions:()=>({useLegacyKeyboardNavigation:!1,keyboardNavigation:{enabled:!0,enterKeyAction:"startEdit",enterKeyDirection:"none",editOnKeyPress:!1}}),controllers:{keyboardNavigation:class s6 extends Vt.ViewController{init(){var e,t;this._dataController=this.getController("data"),this._selectionController=this.getController("selection"),this._editingController=this.getController("editing"),this._headerPanel=this.getView("headerPanel"),this._rowsView=this.getView("rowsView"),this._columnsController=this.getController("columns"),this._editorFactory=this.getController("editorFactory"),this._focusController=this.getController("focus"),this._adaptiveColumnsController=this.getController("adaptiveColumns"),this._columnResizerController=this.getController("columnsResizer"),this._memoFireFocusedCellChanged=Tx(this._memoFireFocusedCellChanged.bind(this),{compareType:"value"}),this._memoFireFocusedRowChanged=Tx(this._memoFireFocusedRowChanged.bind(this),{compareType:"value"}),this.focusedHandlerWithContext=this.focusedHandlerWithContext||this.focusedHandler.bind(this),this.renderCompletedWithContext=this.renderCompletedWithContext||this.renderCompleted.bind(this),this.rowsViewFocusHandlerContext=this.rowsViewFocusHandlerContext||this.rowsViewFocusHandler.bind(this),this._updateFocusTimeout=null,this._fastEditingStarted=!1,this._focusedCellPosition={},this._canceledCellPosition=null,this.isKeyboardEnabled()?(function M1(){z.Z.on(at.Z.getDocument(),"visibilitychange",Ug)}(),null===(e=this._editorFactory)||void 0===e||e.focused.add(this.focusedHandlerWithContext),this.createAction("onKeyDown")):(jg(),null===(t=this._editorFactory)||void 0===t||t.focused.remove(this.focusedHandlerWithContext)),this.initViewHandlers(),this.initDocumentHandlers()}dispose(){super.dispose(),this._resetFocusedView(),Jf.dG.off(this._keyDownListener),z.Z.off(at.Z.getDocument(),(0,Ee.V4)(kt.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),clearTimeout(this._updateFocusTimeout),jg()}focusedHandler(e){this.setupFocusedView(),this._isNeedScroll&&e.is(":visible")&&this._focusedView&&this._focusedView.getScrollable()&&(this._focusedView._scrollToElement(e),this._isNeedScroll=!1)}rowsViewFocusHandler(e){var t,i=(0,b.Z)(e.target),a=(0,b.Z)(e.relatedTarget).closest(this._rowsView.element()).length,n=i.is("a");if(e.relatedTarget&&n&&!a&&this._isEventInCurrentGrid(e)){var s=this._getFocusedCell();s=Pr(s)?s:this._rowsView.getCellElements(0).filter("[tabindex]").eq(0),i.closest(s).length||(e.preventDefault(),z.Z.trigger(s,"focus"))}var o=i.is("td"),l=(null!==(t=this.option("focusedRowIndex"))&&void 0!==t?t:-1)<0;o&&l&&this._updateFocusedCellPosition(i)}subscribeToRowsViewFocusEvent(){var e,t=null===(e=this._rowsView)||void 0===e?void 0:e.element();z.Z.on(t,"focusin",this.rowsViewFocusHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var e,t=null===(e=this._rowsView)||void 0===e?void 0:e.element();z.Z.off(t,"focusin",this.rowsViewFocusHandlerContext)}renderCompleted(e){var t=this._rowsView.element(),i=!e||"refresh"===e.changeType,a=this._focusedView&&this._focusedView.name===this._rowsView.name,s=e&&("append"===e.changeType||"prepend"===e.changeType),l=(0,b.Z)(at.Z.getRootNode(t.get&&t.get(0))).find(":focus"),d=!l.length||l.closest(t).length;this.unsubscribeFromRowsViewFocusEvent(),this.subscribeToRowsViewFocusEvent(),this.initPointerEventHandler(),this.initKeyDownHandler(),this._setRowsViewAttributes(),a&&d&&(this._isNeedFocus?!s:this._isHiddenFocus&&i&&!e?.virtualColumnsScrolling)&&this._updateFocus(!0)}initViewHandlers(){var e,t;this.unsubscribeFromRowsViewFocusEvent(),this.unsubscribeFromPointerEvent(),this.unsubscribeFromKeyDownEvent(),null===(t=null===(e=this._rowsView)||void 0===e?void 0:e.renderCompleted)||void 0===t||t.remove(this.renderCompletedWithContext),this.isKeyboardEnabled()&&this._rowsView.renderCompleted.add(this.renderCompletedWithContext)}initDocumentHandlers(){var e=at.Z.getDocument();this._documentClickHandler=this._documentClickHandler||this.createAction(t=>{var i=(0,b.Z)(t.event.target),a=this._isEventInCurrentGrid(t.event)&&i.closest(".".concat(this.addWidgetPrefix(ev))).length,n=i.closest(".".concat("dx-dropdowneditor-overlay")).length,s=!!this._columnResizerController&&this._columnResizerController.isResizing();a||n||s||(!(this._focusedView&&i.parents().filter(this._focusedView.element()).length>0)&&this._resetFocusedCell(!0),this._resetFocusedView())}),z.Z.off(e,(0,Ee.V4)(kt.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler),this.isKeyboardEnabled()&&z.Z.on(e,(0,Ee.V4)(kt.Z.down,"dxDataGridKeyboardNavigation"),this._documentClickHandler)}_setRowsViewAttributes(){var e=this._getRowsViewElement();!this._dataController.getVisibleRows().length&&this._applyTabIndexToElement(e)}unsubscribeFromPointerEvent(){var e=rv()?Ft.u:kt.Z.down,t=this._getRowsViewElement();this._pointerEventAction&&z.Z.off(t,(0,Ee.V4)(e,"dxDataGridKeyboardNavigation"),this._pointerEventAction)}subscribeToPointerEvent(){var e=rv()?Ft.u:kt.Z.down,t=this._getRowsViewElement(),i=".".concat(bn," > td, .").concat(bn);z.Z.on(t,(0,Ee.V4)(e,"dxDataGridKeyboardNavigation"),i,this._pointerEventAction)}initPointerEventHandler(){this._pointerEventAction=this._pointerEventAction||this.createAction(this._pointerEventHandler),this.unsubscribeFromPointerEvent(),this.subscribeToPointerEvent()}unsubscribeFromKeyDownEvent(){Jf.dG.off(this._keyDownListener)}subscribeToKeyDownEvent(){var e=this._getRowsViewElement();this._keyDownListener=Jf.dG.on(e,null,t=>this._keyDownHandler(t))}initKeyDownHandler(){this._keyDownListener&&this.unsubscribeFromKeyDownEvent(),this.subscribeToKeyDownEvent()}optionChanged(e){switch(e.name){case"keyboardNavigation":"keyboardNavigation.enabled"===e.fullName&&this.init(),e.handled=!0;break;case"useLegacyKeyboardNavigation":this.init(),e.handled=!0;break;default:super.optionChanged(e)}}isRowFocusType(){return"row"===this.focusType}isCellFocusType(){return"cell"===this.focusType}setRowFocusType(){this.option("focusedRowEnabled")&&(this.focusType="row")}setCellFocusType(){this.focusType="cell"}_keyDownHandler(e){var t,i=!0;this._isNeedFocus=!0,this._isNeedScroll=!0;var a=this._processOnKeyDown(e),n=null===(t=this._editingController)||void 0===t?void 0:t.isEditing(),{originalEvent:s}=e;if(s.isDefaultPrevented())return this._isNeedFocus=!1,void(this._isNeedScroll=!1);if(!X4.includes(e.keyName)&&this._updateFocusedCellPositionByTarget(s.target),!a){switch(e.keyName){case"leftArrow":case"rightArrow":this._leftRightKeysHandler(e,n),a=!0;break;case"upArrow":case"downArrow":e.ctrl?Tc("rowsView",this,s):this._upDownKeysHandler(e,n),a=!0;break;case"pageUp":case"pageDown":this._pageUpDownKeyHandler(e),a=!0;break;case"space":a=this._spaceKeyHandler(e,n);break;case"A":(0,Ee.j1)(e.originalEvent)?(this._ctrlAKeyHandler(e,n),a=!0):a=this._beginFastEditing(e.originalEvent);break;case"tab":this._tabKeyHandler(e,n),a=!0;break;case"enter":this._enterKeyHandler(e,n),a=!0;break;case"escape":a=this._escapeKeyHandler(e,n);break;case"F":(0,Ee.j1)(e.originalEvent)?(this._ctrlFKeyHandler(e),a=!0):a=this._beginFastEditing(e.originalEvent);break;case"F2":this._f2KeyHandler(),a=!0;break;case"del":case"backspace":this._isFastEditingAllowed()&&!this._isFastEditingStarted()&&(a=this._beginFastEditing(s,!0))}!a&&!this._beginFastEditing(s)&&(this._isNeedFocus=!1,this._isNeedScroll=!1,i=!1),i&&s.stopPropagation()}}_processOnKeyDown(e){var{originalEvent:t}=e,i={handled:!1,event:t};return this.executeAction("onKeyDown",i),e.ctrl=t.ctrlKey,e.alt=t.altKey,e.shift=t.shiftKey,!!i.handled}_closeEditCell(){setTimeout(()=>{this._editingController.closeEditCell()})}_leftRightKeysHandler(e,t){var i=this.getVisibleRowIndex(),a=e.originalEvent,n=this._focusedView&&this._focusedView.getRow(i),s=this._getDirectionCodeByKey(e.keyName),o=this._isFastEditingStarted();if((!t||o)&&Jl(n)){this.setCellFocusType(),o&&this._closeEditCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(s);var d=this._getNextCell(s);Pr(d)&&this._arrowKeysHandlerFocusCell(a,d,s),a&&a.preventDefault()}}_upDownKeysHandler(e,t){var i,a,n=this.getVisibleRowIndex(),s=this._focusedView&&this._focusedView.getRow(n),o=e.originalEvent,l="upArrow"===e.keyName,d=this._dataController.dataSource(),u=null===(a=null===(i=this._editingController)||void 0===i?void 0:i.isEditRowByIndex)||void 0===a?void 0:a.call(i,n),c=this._isFastEditingStarted();if((!u||!t||c)&&s&&!iv(s)){if(c&&this._closeEditCell(),!this._navigateNextCell(o,e.keyName)&&this._isVirtualRowRender()&&l&&d&&!d.isLoading()){var p=(0,we.zp)(s);this._scrollBy(0,-p,this._focusedCellPosition.rowIndex-1,o)}o&&o.preventDefault()}}_pageUpDownKeyHandler(e){var t=this._dataController.pageIndex(),i=this._dataController.pageCount(),a=this.option("paging.enabled"),n="pageUp"===e.keyName,s=n?-1:1,o=this._rowsView.getScrollable();a&&!this._isVirtualScrolling()?(n?t>0:t<i-1)&&!this._isVirtualScrolling()&&(this._dataController.pageIndex(t+s),e.originalEvent.preventDefault()):o&&(0,we.Cr)(o.container())<(0,we.Cr)(o.$content())&&(this._scrollBy(0,(0,we.Cr)(o.container())*s),e.originalEvent.preventDefault())}_spaceKeyHandler(e,t){var i=this.getVisibleRowIndex(),a=(0,b.Z)(e.originalEvent&&e.originalEvent.target);if(this.option("selection")&&"none"!==this.option("selection").mode&&!t){var n="row"===this._getElementType(a)&&this.isRowFocusType()&&Jl(a);return a.hasClass(Lx)&&"onClick"===this.option("selection.showCheckBoxesMode")&&this._selectionController.startSelectionWithCheckboxes(),!!(n||a.parent().hasClass(Dx)||a.hasClass(this.addWidgetPrefix(ev)))&&(this._selectionController.changeItemSelection(i,{shift:e.shift,control:e.ctrl}),e.originalEvent.preventDefault(),!0)}return this._beginFastEditing(e.originalEvent)}_ctrlAKeyHandler(e,t){!t&&!e.alt&&"multiple"===this.option("selection.mode")&&this.option("selection.allowSelectAll")&&(this._selectionController.selectAll(),e.originalEvent.preventDefault())}_tabKeyHandler(e,t){var i=this.option("editing"),a=e.shift?"previous":"next",s=!((0,C.$K)(this._focusedCellPosition)&&!(0,C.Qr)(this._focusedCellPosition))||!e.shift&&this._isLastValidCell(this._focusedCellPosition)||e.shift&&this._isFirstValidCell(this._focusedCellPosition),o=e.originalEvent.target,l=this._focusedView&&this._focusedView.element();if(!this._handleTabKeyOnMasterDetailCell(o,a)){if((0,b.Z)(l).addClass(Vx),i&&o&&!s)if((0,b.Z)(o).hasClass(this.addWidgetPrefix(ev))&&this._resetFocusedCell(),this._isVirtualColumnRender()&&this._processVirtualHorizontalPosition(a),t){if(!this._editingCellTabHandler(e,a))return}else this._targetCellTabHandler(e,a)&&(s=!0);s?(this._editorFactory.loseFocus(),this._editingController.isEditing()&&!this._isRowEditMode()&&(this._resetFocusedCell(!0),this._resetFocusedView(),this._closeEditCell())):e.originalEvent.preventDefault()}}_getMaxHorizontalOffset(){var e=this.component.getScrollable();return e?e.scrollWidth()-(0,we.dz)(this._rowsView.element()):0}_isColumnRendered(e){var t=this._columnsController.getVisibleColumns(null,!0),i=this._columnsController.getVisibleColumns(),a=t[e],n=!1;return a&&(n=i.indexOf(a)>=0),n}_isFixedColumn(e){var i=this._columnsController.getVisibleColumns(null,!0)[e];return!!i&&!!i.fixed}_isColumnVirtual(e){var t=e-this._columnsController.getColumnIndexOffset(),a=this._columnsController.getVisibleColumns()[t];return!!a&&"virtual"===a.command}_processVirtualHorizontalPosition(e){var a,t=this.component.getScrollable(),i=this.getColumnIndex(),n=0,s=!1;switch(e){case"next":case"nextInRow":var o=this._getVisibleColumnCount();a=i+1,n=this.option("rtlEnabled")?this._getMaxHorizontalOffset():0,s="next"===e?o===a||this._isFixedColumn(i)&&!this._isColumnRendered(a):o>a&&this._isFixedColumn(i)&&!this._isColumnRendered(a);break;case"previous":case"previousInRow":if(a=i-1,n=this.option("rtlEnabled")?0:this._getMaxHorizontalOffset(),"previous"===e){var l=this._columnsController.getColumnIndexOffset();s=a<0&&0===l||this._isFixedColumn(i)&&!this._isColumnRendered(a)}else s=a>=0&&this._isFixedColumn(i)&&!this._isColumnRendered(a)}s?t.scrollTo({left:n}):(0,C.$K)(a)&&(0,C.$K)(e)&&this._isColumnVirtual(a)&&0!==(n=this._getHorizontalScrollPositionOffset(e))&&t.scrollBy({left:n,top:0})}_getHorizontalScrollPositionOffset(e){var t=0,i=this._getCell(this._focusedCellPosition),a=i&&(0,we.Y_)(i);if(a>0){var n=this.option("rtlEnabled")?-1:1;t="nextInRow"===e||"next"===e?a*n:a*n*-1}return t}_editingCellTabHandler(e,t){var n,i=e.originalEvent.target,a=this._getCellElementFromTarget(i),s=e.originalEvent,o=this._getElementType(i);if(a.is(Fx))return!this._targetCellTabHandler(e,t);this._updateFocusedCellPosition(a);var l=this._getNextCellByTabKey(s,t,o);if(!(a=l.$cell)||this._handleTabKeyOnMasterDetailCell(a,t))return!1;var d=this._getColumnByCellElement(a),u=a.parent(),c=this._getRowIndex(u),f=this._dataController.items()[c];if(d&&d.allowEditing){var _=!f||"data"===f.rowType;n=this._editingController.allowUpdating({row:f})?_:f&&f.isNewRow}return n||this._closeEditCell(),this._focusCell(a,!l.isHighlighted)&&(!this._isRowEditMode()&&n?this._editFocusedCell():this._focusInteractiveElement(a,e.shift)),!0}_targetCellTabHandler(e,t){var i=e.originalEvent,a=i.target,n=this._getElementType(a),s=this._getCellElementFromTarget(a),o="cell"===n&&this._getInteractiveElement(s,!e.shift),l=!1;if(!zx(this,s)&&o?.length&&a!==o.get(0))l=!0;else{void 0===this._focusedCellPosition.rowIndex&&(0,b.Z)(a).hasClass(bn)&&this._updateFocusedCellPosition(s),n=this._getElementType(a),this.isRowFocusType()&&(this.setCellFocusType(),"row"===n&&Jl((0,b.Z)(a))&&(a=this.getFirstValidCellInRow((0,b.Z)(a)),n=this._getElementType(a)));var d=this._getNextCellByTabKey(i,t,n);if(!(s=d.$cell)||!(s=this._checkNewLineTransition(i,s)))return!1;this._focusCell(s,!d.isHighlighted),zx(this,s)||this._focusInteractiveElement(s,e.shift)}return l}_getNextCellByTabKey(e,t,i){var a=this._getNextCell(t,i),n=a&&this._fireFocusedCellChanging(e,a,!0);return!n||n.cancel?{}:(n.$newCellElement&&(a=n.$newCellElement),{$cell:a,isHighlighted:n.isHighlighted})}_checkNewLineTransition(e,t){var i=this.getVisibleRowIndex(),a=t.parent();if(i!==this._getRowIndex(a)){var n=this._getCellPosition(t),s=this._fireFocusedRowChanging(e,a);if(s.cancel)return;s.rowIndexChanged&&n&&(this.setFocusedColumnIndex(n.columnIndex),t=this._getFocusedCell())}return t}_enterKeyHandler(e,t){var i,a=this.getVisibleRowIndex(),n=this._dataController.getKeyByRowIndex(a),s=null===(i=this._focusedView)||void 0===i?void 0:i.getRow(a),o=this._getFocusedCell(),l=this.option("grouping.allowCollapsing")&&Xl(s),d=this.option("masterDetail.enabled")&&o?.hasClass(th),u=o?.hasClass("dx-command-adaptive");if(l||d){var c=this._dataController.items()[a],f=c?.data&&!c.data.isContinuation;(0,C.$K)(n)&&f&&this._dataController.changeRowExpand(n)}else u?(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(n),this._updateFocusedCellPosition(o)):o?.hasClass(Px)||this._processEnterKeyForDataCell(e,t)}_processEnterKeyForDataCell(e,t){var i=this._getEnterKeyDirection(e),a=this._allowEditingOnEnterKey();t||!a&&i?(this._handleEnterKeyEditingCell(e.originalEvent),"next"===i||"previous"===i?this._targetCellTabHandler(e,i):("upArrow"===i||"downArrow"===i)&&this._navigateNextCell(e.originalEvent,i)):a&&this._startEditing(e)}_getEnterKeyDirection(e){var t=this.option("keyboardNavigation.enterKeyDirection"),i=e.shift;return"column"===t?i?"upArrow":"downArrow":"row"===t?i?"previous":"next":void 0}_handleEnterKeyEditingCell(e){var{target:t}=e,i=this._getCellElementFromTarget(t),a=this._isRowEditMode();this._updateFocusedCellPosition(i),a?(this._focusEditFormCell(i),setTimeout(this._editingController.saveEditData.bind(this._editingController))):(z.Z.trigger((0,b.Z)(t),"change"),this._closeEditCell(),e.preventDefault())}_escapeKeyHandler(e,t){var i=this._getCellElementFromTarget(e.originalEvent.target);return!!t&&(this._updateFocusedCellPosition(i),this._isRowEditMode()?(this._focusEditFormCell(i),this._editingController.cancelEditData(),0===this._dataController.items().length&&(this._resetFocusedCell(),this._editorFactory.loseFocus())):"cell"===this._editingController.getEditMode()?this._editingController.cancelEditData():this._closeEditCell(),e.originalEvent.preventDefault(),!0)}_ctrlFKeyHandler(e){if(this.option("searchPanel.visible")){var t=this._headerPanel.getSearchTextEditor();t&&(t.focus(),e.originalEvent.preventDefault())}}_f2KeyHandler(){var e=this._editingController.isEditing(),t=this.getVisibleRowIndex(),i=this._focusedView&&this._focusedView.getRow(t);!e&&Jl(i)&&this._startEditing()}_navigateNextCell(e,t){var i=this._getNextCell(t),a=this._getDirectionCodeByKey(t);return!(!i||!this._isCellValid(i))&&this._arrowKeysHandlerFocusCell(e,i,a)}_arrowKeysHandlerFocusCell(e,t,i){var n=this._fireFocusChangingEvents(e,t,"prevRow"===i||"nextRow"===i,!0);return t=n.$newCellElement,!(n.cancel||!this._isCellValid(t)||(this._focus(t,!n.isHighlighted),0))}_beginFastEditing(e,t){if(!this._isFastEditingAllowed()||e.altKey||e.ctrlKey||this._editingController.isEditing())return!1;if(t)this._startEditing(e,tv);else{var{key:i}=e,a=e.keyCode||e.which,n=i||a&&String.fromCharCode(a);n&&(1===n.length||n===tv)&&this._startEditing(e,n)}return!0}_pointerEventHandler(e){var t,i=e.event||e,a=(0,b.Z)(i.currentTarget),n=null===(t=this._rowsView)||void 0===t?void 0:t.element(),s=a.parent(),o=(0,b.Z)(i.target).is(rh),l=!!(0,b.Z)(i.target).closest(".".concat("dx-revert-button")).length,d=a.hasClass(th);this._isEventInCurrentGrid(i)&&(l||!this._isCellValid(a,!o)&&!d?a.is("td")&&this._resetFocusedCell():(a=this._isInsideEditForm(a)?(0,b.Z)(i.target):a,this._focusView(),(0,b.Z)(n).removeClass(Vx),s.hasClass(Ox)?(this._updateFocusedCellPosition(a),this._applyTabIndexToElement(this._focusedView.element()),this._focusedView.focus(!0)):this._isMasterDetailCell(a)?this._updateFocusedCellPosition(a):this._clickTargetCellHandler(i,a)))}_clickTargetCellHandler(e,t){var i=this._getColumnByCellElement(t),a=this._isCellEditMode();this.setCellFocusType();var n=this._fireFocusChangingEvents(e,t,!0);if(t=n.$newCellElement,n.cancel)this.setRowFocusType(),this.setFocusedRowIndex(n.prevRowIndex),this._editingController.isEditing()&&a&&this._closeEditCell();else{if(n.resetFocusedRow)return void this._focusController._resetFocusedRow();if(n.rowIndexChanged&&(t=this._getFocusedCell()),!n.isHighlighted&&!a&&this.setRowFocusType(),this._updateFocusedCellPosition(t),this._allowRowUpdating()&&a&&i&&i.allowEditing)this._isNeedFocus=!1,this._isHiddenFocus=!1;else{t=this._getFocusedCell();var s=e&&(0,b.Z)(e.target).closest("".concat(Bx,", td")),o=s&&s.not(t).is(Bx),l=!!i&&!i.command&&t.hasClass(Tu);this._focus(t,!l&&(!n.isHighlighted||o),o)}}}_allowRowUpdating(){var e=this.getVisibleRowIndex(),t=this._dataController.items()[e];return this._editingController.allowUpdating({row:t},"click")}focus(e){var t,i=this.option("focusedRowEnabled"),a=this._isCellElement((0,b.Z)(e));e||(t=".dx-datagrid-rowsview .dx-row[tabindex]",i||(t+=", .dx-datagrid-rowsview .dx-row > td[tabindex]"),e=this.component.$element().find(t).first()),e&&this._focusElement((0,b.Z)(e),a)}getFocusedView(){return this._focusedView}setupFocusedView(){this.isKeyboardEnabled()&&!(0,C.$K)(this._focusedView)&&this._focusView()}_focusElement(e,t){var i=(0,b.Z)(this._getRowsViewElement()),a=e.closest(i),n=this.isRowFocusType(),s={};!a.length||this._isCellElement(e)&&!this._isCellValid(e)||(this._focusView(),this._isNeedFocus=!0,this._isNeedScroll=!0,(this._isCellElement(e)||Xl(e))&&(this.setCellFocusType(),e=(s=this._fireFocusChangingEvents(null,e,!0,t)).$newCellElement,n&&!s.isHighlighted&&this.setRowFocusType()),s.cancel||(this._focus(e,!s.isHighlighted),this._focusInteractiveElement(e)))}_getFocusedViewByElement(e){var t=this.getFocusedView(),i=t&&(0,b.Z)(t.element());return e&&0!==e.closest(i).length}_focusView(){this._focusedView=this._rowsView}_resetFocusedView(){this.setRowFocusType(),this._focusedView=null}_focusInteractiveElement(e,t){if(e){var i=this._getInteractiveElement(e,t);Ae.focusAndSelectElement(this,i)}}_focus(e,t,i){var a=e&&!e.hasClass(bn)?e.closest(".".concat(bn)):e;if(!a||!function i6(r){return!r||r.hasClass(Ox)||r.hasClass("dx-virtual-row")}(a)){var o,n=this._focusedView,s=n&&n.element();this._isHiddenFocus=t;var l=Xl(a)||function t6(r){return r&&r.hasClass("dx-datagrid-group-footer")}(a)||this.isRowFocusType();l?(o=a,n&&this.setFocusedRowIndex(this._getRowIndex(a))):this._isCellElement(e)&&(o=e,this._updateFocusedCellPosition(e)),o&&(s&&s.find(".dx-row[tabindex], .dx-row > td[tabindex]").not(o).removeClass(ih).removeClass(Nx).removeAttr("tabindex"),z.Z.one(o,"blur",d=>{d.relatedTarget&&o.removeClass(ih).removeClass(Nx)}),i||(this._applyTabIndexToElement(o),z.Z.trigger(o,"focus")),t?(o.addClass(ih),l&&e.addClass(ih)):this._editorFactory.focus(o))}}_updateFocus(e){this._updateFocusTimeout=setTimeout(()=>{if(this._needFocusEditingCell())this._editingController._focusEditingCell();else{var t=this._getFocusedCell(),i=this._editingController.isEditing();if((!this._isMasterDetailCell(t)||this._isRowEditMode())&&(this._hasSkipRow(t.parent())&&(t=this._getNextCell(this._focusedCellPosition&&this._focusedCellPosition.rowIndex>0?"upArrow":"downArrow")),Pr(t)))if(t.is("td")||t.hasClass(this.addWidgetPrefix("edit-form-item"))){var n=t.is(Fx),s=t.find(":focus"),o=Pr(s),l=this._getColumnByCellElement(t);if(!e&&n||!this._editorFactory.focus())!o&&(this._isNeedFocus||this._isHiddenFocus)&&this._focus(t,this._isHiddenFocus);else{if(n&&o)return void Ae.focusAndSelectElement(this,s);!o&&this._focus(t)}i&&!l?.showEditorAlways&&this._focusInteractiveElement.bind(this)(t)}else z.Z.trigger(t,"focus")}})}_getColumnByCellElement(e){var i=this._rowsView.getCellIndex(e)+this._columnsController.getColumnIndexOffset();return this._columnsController.getVisibleColumns(null,!0)[i]}_needFocusEditingCell(){var e=this._editingController.getEditMode()===ao,t=this._editingController.getEditMode()===ds,i=e&&this._editingController.hasChanges(),a=t&&this._editingController.isNewRowInEditMode(),n=this._getFocusedCell();return(0===n.children().length||n.find(zp).length>0)&&(i||a)}_getFocusedCell(){return(0,b.Z)(this._getCell(this._focusedCellPosition))}_updateFocusedCellPositionByTarget(e){var t;if("row"===this._getElementType(e)&&(0,C.$K)(null===(t=this._focusedCellPosition)||void 0===t?void 0:t.columnIndex)){var a=(0,b.Z)(e);this._focusedView&&Xl(a)&&this.setFocusedRowIndex(this._getRowIndex(a))}else this._updateFocusedCellPosition(this._getCellElementFromTarget(e))}_updateFocusedCellPosition(e,t){var i=this._getCellPosition(e,t);return i&&(!e.length||i.rowIndex>=0&&i.columnIndex>=0)&&this.setFocusedCellPosition(i.rowIndex,i.columnIndex),i}_getFocusedColumnIndexOffset(e){var t=0,i=this._columnsController.getVisibleColumns()[e];return i&&i.fixed?t=this._getFixedColumnIndexOffset(i):e>=0&&(t=this._columnsController.getColumnIndexOffset()),t}_getFixedColumnIndexOffset(e){var t=function r6(r,e){return r.option("rtlEnabled")?!("right"===e.fixedPosition||(0,C.$K)(e.command)&&!(0,C.$K)(e.fixedPosition)):!(!(0,C.$K)(e.fixedPosition)||"left"===e.fixedPosition)}(this,e)?this._getVisibleColumnCount()-this._columnsController.getVisibleColumns().length:0;return t}_getCellPosition(e,t){var i,a=Pr(e)&&e.closest("tr");if(Pr(a)){var n=this._getRowIndex(a);return i=this._rowsView.getCellIndex(e,n),i+=this._getFocusedColumnIndexOffset(i),t&&(i=this._applyColumnIndexBoundaries(i="previous"===t?i-1:i+1)),{rowIndex:n,columnIndex:i}}}_focusCell(e,t){if(this._isCellValid(e))return this._focus(e,t),!0}_focusEditFormCell(e){e.hasClass(Rx)&&this._editorFactory.focus(e,!0)}_resetFocusedCell(e){var t,i=this._getFocusedCell();Pr(i)&&i.removeAttr("tabindex"),this._isNeedFocus=!1,this._isNeedScroll=!1,this._focusedCellPosition={},clearTimeout(this._updateFocusTimeout),null===(t=this._focusedView)||void 0===t||t.renderFocusState({preventScroll:e})}restoreFocusableElement(e,t){var i,a,n=(0,C.$K)(e),s=this._rowsView.element(),{columnIndex:o}=this._focusedCellPosition,l=this._dataController.getRowIndexOffset();e=n?e:this._rowsView.getTopVisibleItemIndex()+l,n?(a=this._rowsView.getRow(e-l),!(i=this._fireFocusedRowChanging(t,a)).cancel&&i.rowIndexChanged&&(e=i.newRowIndex)):(this._editorFactory.loseFocus(),this._applyTabIndexToElement(s),z.Z.trigger(s,"focus")),(!n||!i.cancel)&&this.setFocusedCellPosition(e,o),n&&this._updateFocus()}_getNewPositionByCode(e,t,i){var{columnIndex:a}=e,{rowIndex:n}=e;if(void 0===e.rowIndex&&"next"===i)return{columnIndex:0,rowIndex:0};switch(i){case"nextInRow":case"next":a<this._getVisibleColumnCount()-1&&"row"!==t&&this._hasValidCellAfterPosition({columnIndex:a,rowIndex:n})?a++:!this._isLastRow(n)&&"next"===i&&(a=0,n++);break;case"previousInRow":case"previous":a>0&&"row"!==t&&this._hasValidCellBeforePosition({columnIndex:a,rowIndex:n})?a--:n>0&&"previous"===i&&(n--,a=this._getVisibleColumnCount()-1);break;case"upArrow":n=n>0?n-1:n;break;case"downArrow":n=this._isLastRow(n)?n:n+1}return{columnIndex:a,rowIndex:n}}setFocusedCellPosition(e,t){this.setFocusedRowIndex(e),this.setFocusedColumnIndex(t)}setFocusedRowIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.rowIndex=e}setFocusedColumnIndex(e){this._focusedCellPosition||(this._focusedCellPosition={}),this._focusedCellPosition.columnIndex=e}getRowIndex(){return this._focusedCellPosition?this._focusedCellPosition.rowIndex:-1}getColumnIndex(){return this._focusedCellPosition?this._focusedCellPosition.columnIndex:-1}getVisibleRowIndex(){var e,t=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.rowIndex;return!(0,C.$K)(t)||t<0?-1:t-this._dataController.getRowIndexOffset()}getVisibleColumnIndex(){var e,t=null===(e=this._focusedCellPosition)||void 0===e?void 0:e.columnIndex;return(0,C.$K)(t)?t-this._columnsController.getColumnIndexOffset():-1}_applyColumnIndexBoundaries(e){var t=this._getVisibleColumnCount();return e<0?e=0:e>=t&&(e=t-1),e}_isCellByPositionValid(e){var t=(0,b.Z)(this._getCell(e));return this._isCellValid(t)}_isLastRow(e){var t=this._dataController;return this._isVirtualRowRender()?e>=t.getMaxRowIndex():e===Math.max(...t.items().map((a,n)=>!1!==a.visible?n:-1))}_isFirstValidCell(e){var t=!1;return 0===e.rowIndex&&e.columnIndex>=0&&(t=t||!this._hasValidCellBeforePosition(e)),t}_hasValidCellBeforePosition(e){for(var{columnIndex:t}=e,i=!1;t>0&&!i;){var a={columnIndex:--t,rowIndex:e.rowIndex};i=this._isCellByPositionValid(a)}return i}_hasValidCellAfterPosition(e){for(var{columnIndex:t}=e,i=!1,a=this._getVisibleColumnCount();t<a-1&&!i;){var n={columnIndex:++t,rowIndex:e.rowIndex};i=this._isCellByPositionValid(n)}return i}_isLastValidCell(e){var t=e.columnIndex>=0?e.columnIndex+1:0,{rowIndex:i}=e,a={columnIndex:t,rowIndex:i},n=this._dataController.getVisibleRows(),s=n&&n[i];return!!this._isLastRow(i)&&(!!(("group"===s?.rowType||"groupFooter"===s?.rowType)&&e.columnIndex>0||e.columnIndex===this._getVisibleColumnCount()-1)||!this._isCellByPositionValid(a)&&this._isLastValidCell(a))}_isCellValid(e,t){if(Pr(e)){var i=e.parent(),a=this._rowsView.getCellIndex(e)+this._columnsController.getColumnIndexOffset(),n=this._getColumnByCellElement(e),s=this._getVisibleColumnCount(),o=this._editingController,l=iv(i),d=n&&n.showWhenGrouped,u=n&&!e.hasClass(th)&&Jl(i);if((r=>void 0!==r.attr("dx-drag-cell"))(e))return!1;if(this._isMasterDetailCell(e))return!0;if(s>a&&(!l&&n&&(!(0,C.$K)(n.groupIndex)||d&&u)||parseInt(e.attr("colspan"),10)>1)){var f=this._dataController.items(),p=this._rowsView.getRowIndex(i),_=f[p],w=o&&this._isCellEditMode()&&o.isEditing(),S=o&&o.isEditRow(p),x=S||w;return n.command?this._isLegacyNavigation()?!x&&"expand"===n.command:!w&&(S?"select"!==n.command:!x):(!w||!_||"data"===_.rowType)&&(!x||n.allowEditing||t)}}}getFirstValidCellInRow(e,t){for(var a,n,i=e.find("> td"),s=t=t||0;s<i.length;++s)if(a=i.eq(s),this._isCellValid(a)){n=a;break}return n}_getNextCell(e,t,i){var o,l,a=i||this._focusedCellPosition,n=this.isRowFocusType(),s=n||["next","previous"].includes(e);if(this._focusedView&&a){var d=this._getNewPositionByCode(a,t,e);o=(0,b.Z)(this._getCell(d));var u="previous"===e?this._isFirstValidCell(d):this._isLastValidCell(d);if(Pr(o)&&!this._isCellValid(o)&&this._isCellInRow(d,s)&&!u&&(o=n?this.getFirstValidCellInRow(o.parent(),d.columnIndex):this._getNextCell(e,"cell",d)),l=Pr(o)&&o.parent(),this._hasSkipRow(l)){var c=this._getRowIndex(l);if(this._isLastRow(c))return null;o=this._getNextCell(e,"row",{columnIndex:a.columnIndex,rowIndex:c})}return Pr(o)?o:null}return null}_startEditing(e,t){var i=this._focusedCellPosition,a=this.getVisibleRowIndex(),n=this.getVisibleColumnIndex(),s=this._dataController.items()[a],o=this._columnsController.getVisibleColumns()[n];this._isAllowEditing(s,o)&&(this._isRowEditMode()?this._editingController.editRow(a):i&&this._startEditCell(e,t))}_isAllowEditing(e,t){return this._editingController.allowUpdating({row:e})&&t&&t.allowEditing}_editFocusedCell(){var e=this.getVisibleRowIndex(),t=this.getVisibleColumnIndex();return this._editingController.editCell(e,t)}_startEditCell(e,t){this._fastEditingStarted=(0,C.$K)(t);var i=this._editFocusedCell(),a=(0,C.EY)(i);if(this._isFastEditingStarted()&&(a||i)){var s=a&&t===tv?"":t,o=a?i:(0,X.BH)().resolve(),l=this._rowsView.waitAsyncTemplates(!0);(0,X.gx)(o,l).done(()=>{this._editingCellHandler(e,s)})}}_editingCellHandler(e,t){var i,a,n=this._getFocusedCell().find(rh).eq(0),s=n.get(0);if(s){var o=(0,Ee.yM)(e,{type:"keydown",target:s}),l=(0,Ee.yM)(e,{type:"keypress",target:s}),d=(0,Ee.yM)(e,{type:"input",target:s});d.originalEvent&&(d.originalEvent=(0,Ee.yM)(d.originalEvent,{data:t})),null===(a=(i=s).select)||void 0===a||a.call(i),z.Z.trigger(n,o),o.isDefaultPrevented()||(z.Z.trigger(n,l),l.isDefaultPrevented())||setTimeout(()=>{var c=this._getKeyPressInputValue(n,t);n.val(c);var f=n.closest(".".concat("dx-widget"));z.Z.off(f,"focusout"),z.Z.one(f,"focusout",()=>{z.Z.trigger(n,"change")}),z.Z.trigger(n,d)},ni.Z.mozilla?25:0)}}_getKeyPressInputValue(e,t){var i=e.val();return"-"===t&&"-0"===i?"-0":t}_fireFocusChangingEvents(e,t,i,a){var n,s={},o=null!==(n=this._getCellPosition(t))&&void 0!==n?n:{};return this.isCellFocusType()&&((s=this._fireFocusedCellChanging(e,t,a)).cancel||(o.columnIndex=s.newColumnIndex,o.rowIndex=s.newRowIndex,a=s.isHighlighted,t=(0,b.Z)(this._getCell(o)))),!s.cancel&&i&&t&&((s=this._fireFocusedRowChanging(e,t.parent())).cancel||(o.rowIndex=s.newRowIndex,s.isHighlighted=a)),s.$newCellElement=(0,b.Z)(this._getCell(o)),s.$newCellElement.length||(s.$newCellElement=t),s}_fireFocusedCellChanging(e,t,i){var a=this.option("focusedColumnIndex"),n=this.option("focusedRowIndex"),s=this._getCellPosition(t),o=s?s.columnIndex:-1,l=s?s.rowIndex:-1,c={cellElement:t,prevColumnIndex:a,prevRowIndex:n,newColumnIndex:o,newRowIndex:l,rows:this._dataController.getVisibleRows(),columns:this._columnsController.getVisibleColumns(),event:e,isHighlighted:i||!1,cancel:!1};return this._canceledCellPosition=null,this.executeAction("onFocusedCellChanging",c),(c.newColumnIndex!==o||c.newRowIndex!==l)&&(c.$newCellElement=(0,b.Z)(this._getCell({columnIndex:c.newColumnIndex,rowIndex:c.newRowIndex}))),c.cancel&&(this._canceledCellPosition={rowIndex:l,columnIndex:o}),c}_fireFocusedCellChanged(e){var t=this._rowsView.getCellIndex(e),i=e?.parent().data("options"),a=i?.key;this._memoFireFocusedCellChanged(a,t)}_memoFireFocusedCellChanged(e,t){var i=this._getFocusedCell(),a=this._getRowIndex(i?.parent()),n=Math.min(a-this._dataController.getRowIndexOffset(),this._dataController.items().length-1);if(!this._editingController.isEditCell(n,t)){var o=this._dataController.items()[n],l=this._columnsController.getVisibleColumns()[t];this.executeAction("onFocusedCellChanged",{cellElement:i?(0,lt.u)(i):void 0,columnIndex:t,rowIndex:a,row:o,column:l})}}_fireFocusedRowChanging(e,t){var i=this._getRowIndex(t),a=this.option("focusedRowIndex"),n=this._dataController.loadingOperationTypes(),s={rowElement:t,prevRowIndex:a,newRowIndex:i,event:e,rows:this._dataController.getVisibleRows(),cancel:!1},o=n.sorting||n.grouping||n.filtering||n.paging;return!this._dataController||this._dataController.isLoading()&&o?(s.cancel=!0,s):(this.option("focusedRowEnabled")&&(this.executeAction("onFocusedRowChanging",s),!s.cancel&&s.newRowIndex!==i&&(s.resetFocusedRow=s.newRowIndex<0,s.resetFocusedRow||this.setFocusedRowIndex(s.newRowIndex),s.rowIndexChanged=!0)),s)}_fireFocusedRowChanged(){var e,t=this.option("focusedRowEnabled"),i=this.option("focusedRowKey"),a=null===(e=this._focusController)||void 0===e?void 0:e.getFocusedRowIndexByKey(i);!t||(0,C.$K)(i)&&a<0||this._memoFireFocusedRowChanged(i,a)}_memoFireFocusedRowChanged(e,t){var i=t-this._dataController.getRowIndexOffset();this.executeAction("onFocusedRowChanged",{rowElement:t<0?void 0:this._rowsView.getRowElement(i),rowIndex:t,row:t<0?void 0:this._dataController.getVisibleRows()[i]})}_isEventInCurrentGrid(e){return Ae.isElementInCurrentGrid(this,(0,b.Z)(e.target))}_isRowEditMode(){var e=this._editingController.getEditMode();return e===Ga||e===no}_isCellEditMode(){var e=this._editingController.getEditMode();return e===ao||e===ds}_isFastEditingAllowed(){return this._isCellEditMode()&&this.option("keyboardNavigation.editOnKeyPress")}_getInteractiveElement(e,t){var i=e.find(rh).filter(":visible");return t?i.last():i.first()}_applyTabIndexToElement(e){var t,i=null!==(t=this.option("tabIndex"))&&void 0!==t?t:0;e.attr("tabindex",i)}_getCell(e){if(this._focusedView&&e){var t=this._dataController.getRowIndexOffset(),i=this._columnsController.getVisibleColumns(null,!0)[e.columnIndex],a=i&&i.fixed?this._getFixedColumnIndexOffset(i):this._columnsController.getColumnIndexOffset();return this._focusedView.getCell({rowIndex:e.rowIndex>=0?e.rowIndex-t:-1,columnIndex:e.columnIndex>=0?e.columnIndex-a:-1})}}_getRowIndex(e){var t=this._rowsView.getRowIndex(e);return t>=0&&(t+=this._dataController.getRowIndexOffset()),t}_hasSkipRow(e){var t=e&&e.get(0);return t&&("none"===t.style.display||iv(e)&&!e.hasClass(this.addWidgetPrefix(Du)))}_allowEditingOnEnterKey(){return"startEdit"===this.option("keyboardNavigation.enterKeyAction")}_isLegacyNavigation(){return this.option("useLegacyKeyboardNavigation")}_getDirectionCodeByKey(e){var t;switch(e){case"upArrow":t="prevRow";break;case"downArrow":t="nextRow";break;case"leftArrow":t=this.option("rtlEnabled")?"nextInRow":"previousInRow";break;case"rightArrow":t=this.option("rtlEnabled")?"previousInRow":"nextInRow"}return t}_isVirtualScrolling(){var e=this.option("scrolling.mode");return"virtual"===e||"infinite"===e}_isVirtualRowRender(){return this._isVirtualScrolling()||Ae.isVirtualRowRendering(this)}_isVirtualColumnRender(){return"virtual"===this.option("scrolling.columnRenderingMode")}_scrollBy(e,t,i,a){var n=this,s=this._rowsView.getScrollable();return n._focusedCellPosition&&s.on("scroll",function o(){s.off("scroll",o),setTimeout(n.restoreFocusableElement.bind(n,i,a))}),s.scrollBy({left:e,top:t})}_isInsideEditForm(e){var t=(0,b.Z)(e).closest(".".concat(this.addWidgetPrefix(Du)));return t.length&&this.elementIsInsideGrid(t)}_isMasterDetailCell(e){var t=(0,b.Z)(e).closest(".".concat(Rx));return t.length&&this.elementIsInsideGrid(t)}_processNextCellInMasterDetail(e,t){!this._isInsideEditForm(e)&&e&&this._applyTabIndexToElement(e)}_handleTabKeyOnMasterDetailCell(e,t){if(this._isMasterDetailCell(e)){this._updateFocusedCellPosition((0,b.Z)(e),t);var i=this._getNextCell(t,"row");return this._processNextCellInMasterDetail(i,(0,b.Z)(e)),!0}return!1}_getElementType(e){return(0,b.Z)(e).is("tr")?"row":"cell"}_isFastEditingStarted(){return this._isFastEditingAllowed()&&this._fastEditingStarted}_getVisibleColumnCount(){return this._columnsController.getVisibleColumns(null,!0).length}_isCellInRow(e,t){var{columnIndex:i}=e,a=this._getVisibleColumnCount();return t?i>=0&&i<=a-1:i>0&&i<a-1}_isCellElement(e){return e.length&&"TD"===e[0].tagName}_getCellElementFromTarget(e){var t=this._getElementType(e),i=(0,b.Z)(e);return"cell"===t?i.closest(".".concat(bn," > td")):i.children().not(".".concat(th)).first()}_getRowsViewElement(){var e;return null===(e=this._rowsView)||void 0===e?void 0:e.element()}isKeyboardEnabled(){return this.option("keyboardNavigation.enabled")}_processCanceledEditCellPosition(e,t){if(this._canceledCellPosition){var i=this._canceledCellPosition.rowIndex===e&&this._canceledCellPosition.columnIndex===t;return this._canceledCellPosition=null,i}}updateFocusedRowIndex(){var e=this._dataController,t=this.getVisibleRowIndex(),i=e.items(),a=i.length?i.length-1:-1,n=e.getRowIndexOffset();a>=0&&t>a&&this.setFocusedRowIndex(a+n)}}},extenders:{views:{rowsView:r=>class extends r{_rowClick(e){var t=this._editingController.getEditRowIndex(),i=this._keyboardNavigationController.isKeyboardEnabled();t===e.rowIndex&&this._keyboardNavigationController.setCellFocusType(),(rv()||!i)&&this.option("focusedRowEnabled")&&this._triggerPointerDownEventHandler(e,!i),super._rowClick.apply(this,arguments)}_triggerPointerDownEventHandler(e,t){var{originalEvent:i}=e.event;if(i){var a=(0,b.Z)(i.target),n=this.getCellIndex(a),s=this._columnsController.getVisibleColumns()[n],o=this._dataController.items()[e.rowIndex];if(this._keyboardNavigationController._isAllowEditing(o,s)||t){var l=(0,Ee.yM)(i,{currentTarget:i.target});this._keyboardNavigationController._pointerEventHandler(l)}}}renderFocusState(e){var{preventScroll:t,pageSizeChanged:i}=e??{},a=this.element();a&&!(0,fu.si)(a)&&a.attr("tabindex",null),i&&this._keyboardNavigationController.updateFocusedRowIndex();var n=this._keyboardNavigationController.getVisibleRowIndex();(!(0,C.$K)(n)||n<0)&&(n=0);var s=this.getCellElements(n);this._keyboardNavigationController.isKeyboardEnabled()&&s?.length&&this.updateFocusElementTabIndex(s,t)}updateFocusElementTabIndex(e,t){var i=e.eq(0).parent();if(Xl(i))this._keyboardNavigationController._applyTabIndexToElement(i);else{var a=this._keyboardNavigationController.getColumnIndex();(!(0,C.$K)(a)||a<0)&&(a=0),this._updateFocusedCellTabIndex(e,a)}}_updateFocusedCellTabIndex(e,t){var i=this._keyboardNavigationController,a=e?e.length:-1,n=function(l){var d=i._isMasterDetailCell(l),u=i._isCellValid(l);if(!d&&u&&i._isCellElement(l))return i._applyTabIndexToElement(l),i.setCellFocusType(),!0},s=((r,e)=>r.filter("[".concat("aria-colindex",'="').concat(e+1,'"]:not([').concat("dx-drag-cell","])")).first())(e,t);if(s.length)n(s);else{a<=t&&(t=a-1);for(var o=t;o<a&&!n((0,b.Z)(e[o]));++o);}}renderDelayedTemplates(e){super.renderDelayedTemplates.apply(this,arguments),this.waitAsyncTemplates().done(()=>{this._renderFocusByChange(e)})}_renderFocusByChange(e){var t,{operationTypes:i,repaintChangesOnly:a}=e??{},{fullReload:n,pageSize:s}=i??{},o=!(null===(t=e?.changeTypes)||void 0===t||!t.find(d=>"insert"===d||"remove"===d));if(!e||!a||n||s||o){var l=function a6(r){var e=r.getController("keyboardNavigation");return!!e._isVirtualScrolling()&&r.option("focusedRowIndex")===e.getRowIndex()}(this);this.renderFocusState({preventScroll:l,pageSizeChanged:s})}}_renderCore(e){var t=super._renderCore.apply(this,arguments);return this._renderFocusByChange(e),t}_editCellPrepared(e){var t,i=this._getEditorInstance(e),a=null===(t=this._keyboardNavigationController)||void 0===t?void 0:t._isFastEditingStarted();i&&a&&this._handleEditingNavigationMode(i),super._editCellPrepared.apply(this,arguments)}_handleEditingNavigationMode(e){["downArrow","upArrow"].forEach(i=>{var a=e._supportedKeys()[i];e.registerKeyHandler(i,n=>{if("true"===e._input().attr("aria-expanded"))return a&&a.call(e,n)})}),e.registerKeyHandler("leftArrow",le.ZT),e.registerKeyHandler("rightArrow",le.ZT),"dxDateBox"===e.NAME&&e.option("useMaskBehavior")&&e.registerKeyHandler("enter",le.ZT)}_getEditorInstance(e){var t=e.find(".dx-texteditor").eq(0);return Ae.getWidgetInstance(t)}}},controllers:{editing:r=>class extends r{editCell(e,t){if(this._keyboardNavigationController._processCanceledEditCellPosition(e,t))return!1;var i=super.editCell(e,t);return i&&this._keyboardNavigationController.setupFocusedView(),i}editRow(e){var t=this._keyboardNavigationController.getVisibleColumnIndex(),i=this._columnsController.getVisibleColumns()[t];(i&&i.type||this.option("editing.mode")===no)&&this._keyboardNavigationController._resetFocusedCell(),super.editRow(e)}addRow(e){return this._keyboardNavigationController.setupFocusedView(),this._keyboardNavigationController.setCellFocusType(),super.addRow.apply(this,arguments)}getFocusedCellInRow(e){var t=super.getFocusedCellInRow(e),i=this._dataController.getRowIndexOffset(),a=this._keyboardNavigationController._focusedCellPosition.rowIndex-i;if(this._keyboardNavigationController.isKeyboardEnabled()&&a===e){var n=this._keyboardNavigationController._getFocusedCell();Pr(n)&&!n.hasClass(Px)&&(t=n)}return t}_processCanceledEditingCell(){this.closeEditCell().done(()=>{this._keyboardNavigationController._updateFocus()})}closeEditCell(){var e=this._keyboardNavigationController;e._fastEditingStarted=!1;var t=super.closeEditCell.apply(this,arguments);return e._updateFocus(),t}_delayedInputFocus(){this._keyboardNavigationController._isNeedScroll=!0,super._delayedInputFocus.apply(this,arguments)}_isEditingStart(){var e=super._isEditingStart.apply(this,arguments);if(e&&!this._keyboardNavigationController._isNeedFocus){var t=this._keyboardNavigationController._getFocusedCell();this._keyboardNavigationController._focus(t,!0)}return e}},data:r=>class extends r{_correctRowIndices(e){var t=this._keyboardNavigationController._focusedCellPosition;if(super._correctRowIndices.apply(this,arguments),t&&t.rowIndex>=0){var i=e(t.rowIndex);i&&(t.rowIndex+=i,this._editorFactoryController.refocus())}}getMaxRowIndex(){var e=this.items().length-1,t=this.virtualItemsCount();return t&&(e+=this.getRowIndexOffset()+t.end),e}},adaptiveColumns:r=>class extends r{_showHiddenCellsInView(e){var{viewName:t,$cells:i,isCommandColumn:a}=e;super._showHiddenCellsInView.apply(this,arguments),t===Hx&&!a&&i.each((n,s)=>{var o=(0,b.Z)(s);Wx(o)&&o.attr("tabindex",0)})}_hideVisibleCellInView(e){var{viewName:t,$cell:i,isCommandColumn:a}=e;super._hideVisibleCellInView.apply(this,arguments),t===Hx&&!a&&Wx(i)&&i.removeAttr("tabindex")}},keyboardNavigation:r=>class extends r{init(){var e;super.init(),this.rowsViewFocusOutHandlerContext=null!==(e=this.rowsViewFocusOutHandlerContext)&&void 0!==e?e:this.rowsViewFocusOutHandler.bind(this)}subscribeToRowsViewFocusEvent(){var e;super.subscribeToRowsViewFocusEvent();var t=null===(e=this._rowsView)||void 0===e?void 0:e.element();z.Z.on(t,"focusout",this.rowsViewFocusOutHandlerContext)}unsubscribeFromRowsViewFocusEvent(){var e;super.unsubscribeFromRowsViewFocusEvent();var t=null===(e=this._rowsView)||void 0===e?void 0:e.element();z.Z.off(t,"focusout",this.rowsViewFocusOutHandlerContext)}rowsViewFocusHandler(e){var t=(0,b.Z)(e.target);this.translateFocusIfNeed(e,t),super.rowsViewFocusHandler(e)}rowsViewFocusOutHandler(){this.makeScrollableFocusableIfNeed()}translateFocusIfNeed(e,t){var i=this.isScrollableNeedFocusable(),a=this._isFixedColumn(0);if(i&&a){var n=this._rowsView.getCell({rowIndex:0,columnIndex:0}),s=!!n.attr("tabindex"),o=t.is(this._$firstNotFixedCell);s&&o&&(e.preventDefault(),this._focus(n))}}renderCompleted(e){this._$firstNotFixedCell=this.getFirstNotFixedCell(),this.makeScrollableFocusableIfNeed(),super.renderCompleted(e)}_focus(e,t,i){super._focus(e,t,i),this.makeScrollableFocusableIfNeed()}_tabKeyHandler(e,t){var i,n=!((0,C.$K)(this._focusedCellPosition)&&!(0,C.Qr)(this._focusedCellPosition))||!e.shift&&this._isLastValidCell(this._focusedCellPosition)||e.shift&&this._isFirstValidCell(this._focusedCellPosition),s=this.isScrollableNeedFocusable();n&&s&&(null===(i=this._$firstNotFixedCell)||void 0===i||i.removeAttr("tabIndex")),super._tabKeyHandler(e,t)}getFirstNotFixedCell(){var t=this._columnsController.getVisibleColumns().findIndex(i=>{var{fixed:a}=i;return!a});return-1===t?void 0:this._rowsView._getCellElement(0,t)}isScrollableNeedFocusable(){var e,t,i=!!this._rowsView.getScrollable(),a=!(null===(e=this._rowsView._fixedTableElement)||void 0===e||!e.length),n=!(null===(t=this._rowsView.getCellElements(0))||void 0===t||!t.length);return i&&a&&n}makeScrollableFocusableIfNeed(){!this.isScrollableNeedFocusable()||!this._$firstNotFixedCell||this._applyTabIndexToElement(this._$firstNotFixedCell)}}}}};function av(r,e,t,i){var a=0;if(r<e)for(;a<t.items.length;a++)av(r+1,e,t.items[a],i);r===e&&i(t)}function ah(r,e){var t;if("map"in r)return r.map(e);var i=new Array(r.length);for(t in r)i[t]=e(r[t],t);return i}function p6(r){return r===ka.bG.count}function Kx(r){var e=(0,Ot.vb)(r.selector),t=!("skipEmptyValues"in r)||r.skipEmptyValues,{aggregator:i}=r;if("string"==typeof i&&!(i=ka.bG[i]))throw lu.R0.Error("E4001",r.aggregator);return{selector:e,aggregator:i,skipEmptyValues:t}}He.registerModule("keyboardNavigation",h6);class f6{constructor(e){this._data=e.data,this._groupLevel=e.groupLevel||0,this._totalAggregates=ah(e.totalAggregates||[],Kx),this._groupAggregates=ah(e.groupAggregates||[],Kx),this._totals=[]}calculate(){this._totalAggregates.length&&this._calculateTotals(0,{items:this._data}),this._groupAggregates.length&&this._groupLevel>0&&this._calculateGroups({items:this._data})}totalAggregates(){return this._totals}_aggregate(e,t,i){for(var a=t.items?t.items.length:0,n=0;n<e.length;n++)if(p6(e[n].aggregator))i[n]=(i[n]||0)+a;else for(var s=0;s<a;s++)this._accumulate(n,e[n],i,t.items[s])}_calculateTotals(e,t){if(0===e&&(this._totals=this._seed(this._totalAggregates)),e===this._groupLevel)this._aggregate(this._totalAggregates,t,this._totals);else for(var i=0;i<t.items.length;i++)this._calculateTotals(e+1,t.items[i]);0===e&&(this._totals=this._finalize(this._totalAggregates,this._totals))}_calculateGroups(e){var t=this._groupLevel,i=t+1,a=this._seed.bind(this,this._groupAggregates),n=this._aggregate.bind(this,this._groupAggregates),s=this._finalize.bind(this,this._groupAggregates);function o(l){l.aggregates=a(i-1),i===t?n(l,l.aggregates):av(i,t,l,d=>{n(d,l.aggregates)}),l.aggregates=s(l.aggregates)}for(;--i>0;)av(0,i,e,o)}_seed(e,t){return ah(e,i=>{var{aggregator:a}=i;return"seed"in a?(0,C.mf)(a.seed)?a.seed(t):a.seed:NaN})}_accumulate(e,t,i,a){var n=t.selector(a),{aggregator:s}=t,{skipEmptyValues:o}=t;o&&function c6(r){return r!=r||""===r||null==r}(n)||(i[e]=i[e]!=i[e]?n:s.step(i[e],n))}_finalize(e,t){return ah(e,(i,a)=>{var n=i.aggregator.finalize;return n?n(t[a]):t[a]})}}var nv="groupFooter",$x="totalFooter",Gx=function(r,e){var t=(0,b.Z)(r),{column:i}=e,{summaryItems:a}=e,n=[];if(!i.command&&a){for(var s=0;s<a.length;s++){var o=a[s],l=He.getSummaryText(o,e.summaryTexts);n.push((0,b.Z)("<div>").css("textAlign",o.alignment||i.alignment).addClass("dx-datagrid-summary-item").addClass("dx-datagrid-text-content").addClass(o.cssClass).toggleClass("dx-datagrid-group-text-content","group"===e.rowType).text(l).attr("aria-label","".concat(i.caption," ").concat(l)))}t.append(n)}},Ux=function(r,e){var t=r.option("summary.texts")||{};return{totalItem:e.row,summaryItems:e.row.summaryCells[e.columnIndex],summaryTexts:t}},sv=function(r){return r.summary||r.aggregates||[]},ov=function(r){return r.option("summary.recalculateWhileEditing")},x6=function r(e,t,i,a){a=a||[];for(var n=0;n<e.length;n++)a.push(e[n].key),1===t?i(a,e[n].items):r(e[n].items,t-1,i,a),a.pop()},S6=function r(e,t,i){return i?r(e,t.map(a=>({items:[a]}),i-1)):e.concat(t)},E6=function r(e,t,i){return i?e.map(a=>{var n={},s=r(a.items||[],t,i-1);return Object.defineProperty(n,"aggregates",{get:()=>a.aggregates,set:o=>{a.aggregates=o}}),(0,B.l)(n,a,{items:s})}):e.filter(a=>t.indexOf(a)<0)},I6=function r(e,t,i){if(!e||!t.length)return e;var s,n=i[0];return t[0]&&n&&n.length&&(s=(0,va.Z)(e),(0,Y.S6)(n,function(o){s=0===o?s.sortBy(this.selector,this.desc):s.thenBy(this.selector,this.desc)}),s.enumerate().done(o=>{e=o})),t=t.slice(1),i=i.slice(1),t.length&&i.length&&(0,Y.S6)(e,function(){this.items=r(this.items,t,i)}),e},jx=function(r,e,t){var i=t&&t.sortByGroups&&t.sortByGroups();return i&&i.length?I6(r,e,i):r},qx=function(r,e,t,i){var a;if(ov(r)){var n=r.getController("editing");if(n){var s=n.getInsertedData();s.length&&(t=S6(t,s,i));var o=n.getRemovedData();o.length&&(t=E6(t,o,i))}}return e&&(a=new f6({totalAggregates:e.totalAggregates,groupAggregates:e.groupAggregates,data:t,groupLevel:i})).calculate(),a?a.totalAggregates():[]};Yd.extend(r=>class extends r{init(){super.init.apply(this,arguments),this._totalAggregates=[],this._summaryGetter=le.ZT}summaryGetter(e){if(!arguments.length)return this._summaryGetter;(0,C.mf)(e)&&(this._summaryGetter=e)}summary(e){if(!arguments.length)return this._summaryGetter();this._summaryGetter=function(){return e}}totalAggregates(){return this._totalAggregates}isLastLevelGroupItemsPagingLocal(){var e=this.summary(),t=e?.sortByGroups();return t?.length}sortLastLevelGroupItems(e,t,i){var a=Gs.Z.multiLevelGroup((0,va.Z)(e),t).toArray(),n=[];return i.forEach(s=>{x6(a,t.length,(o,l)=>{s.toString()===o.toString()&&(n=n.concat(l))})}),n}_customizeRemoteOperations(e){var t=this.summary();t&&(e.remoteOperations.summary?(!e.isCustomLoading||e.storeLoadOptions.isLoadingAll)&&(e.storeLoadOptions.group&&(e.remoteOperations.grouping?e.storeLoadOptions.groupSummary=t.groupAggregates:t.groupAggregates.length&&(e.remoteOperations.paging=!1)),e.storeLoadOptions.totalSummary=t.totalAggregates):(t.totalAggregates.length||t.groupAggregates.length&&e.storeLoadOptions.group)&&(e.remoteOperations.paging=!1)),super._customizeRemoteOperations.apply(this,arguments);var i=e.cachedData.extra;i?.summary&&!e.isCustomLoading&&(e.storeLoadOptions.totalSummary=void 0)}_handleDataLoadedCore(e){var t,i,a=(0,ka.G5)(e.storeLoadOptions.group||e.loadOptions.group||[]),n=e.remoteOperations||{},s=this.summaryGetter()(n);if(!e.isCustomLoading||e.storeLoadOptions.isLoadingAll)if(n.summary)!n.paging&&a.length&&s&&(n.grouping||qx(this,{groupAggregates:s.groupAggregates},e.data,a.length),e.data=jx(e.data,a,s));else if(!n.paging&&s){var o=e.operationTypes||{};if(!Object.keys(o).some(u=>o[u])||null===(i=null===(t=e.cachedData)||void 0===t?void 0:t.extra)||void 0===i||!i.summary||a.length&&s.groupAggregates.length){var d=qx(this,s,e.data,a.length);e.extra=(0,C.PO)(e.extra)?e.extra:{},e.extra.summary=d,e.cachedData&&(e.cachedData.extra=e.extra)}e.data=jx(e.data,a,s)}e.isCustomLoading||(this._totalAggregates=e.extra&&e.extra.summary||this._totalAggregates),super._handleDataLoadedCore(e)}}),He.registerModule("summary",{defaultOptions:()=>({summary:{groupItems:void 0,totalItems:void 0,calculateCustomSummary:void 0,skipEmptyValues:!0,recalculateWhileEditing:!1,texts:{sum:ae.Z.format("dxDataGrid-summarySum"),sumOtherColumn:ae.Z.format("dxDataGrid-summarySumOtherColumn"),min:ae.Z.format("dxDataGrid-summaryMin"),minOtherColumn:ae.Z.format("dxDataGrid-summaryMinOtherColumn"),max:ae.Z.format("dxDataGrid-summaryMax"),maxOtherColumn:ae.Z.format("dxDataGrid-summaryMaxOtherColumn"),avg:ae.Z.format("dxDataGrid-summaryAvg"),avgOtherColumn:ae.Z.format("dxDataGrid-summaryAvgOtherColumn"),count:ae.Z.format("dxDataGrid-summaryCount")}},sortByGroupSummaryInfo:void 0}),views:{footerView:class A6 extends dl{_getRows(){return this._dataController.footerItems()}_getCellOptions(e){return(0,B.l)(super._getCellOptions(e),Ux(this,e))}_renderCellContent(e,t){Gx(e,t),super._renderCellContent.apply(this,arguments)}_renderCore(e){var t=!1,i=this._dataController.footerItems()[0];(!e||!e.columnIndices)&&(this.element().empty().addClass("dx-datagrid-total-footer").toggleClass("dx-datagrid-nowrap",!this.option("wordWrapEnabled")),t=!0),i&&i.summaryCells&&i.summaryCells.length&&(this._updateContent(this._renderTable({change:e}),e),t&&this._updateScrollLeftPosition())}_updateContent(e,t){return t&&"update"===t.changeType&&t.columnIndices?this.waitAsyncTemplates().done(()=>{var i=this.getTableElement().find(".dx-row"),a=e.find(".dx-row");this._updateCells(i,a,t.columnIndices[0])}):super._updateContent.apply(this,arguments)}_rowClick(e){var t=this._dataController.footerItems()[e.rowIndex]||{};this.executeAction("onRowClick",(0,B.l)({},e,t))}_columnOptionChanged(e){var{optionNames:t}=e;e.changeTypes.grouping||(t.width||t.visibleWidth)&&super._columnOptionChanged(e)}_handleDataChanged(e){var{changeType:t}=e;"update"===e.changeType&&e.repaintChangesOnly?e.totalColumnIndices?e.totalColumnIndices.length&&this.render(null,{changeType:"update",columnIndices:[e.totalColumnIndices]}):this.render():("refresh"===t||"append"===t||"prepend"===t)&&this.render()}_createRow(e){var t=super._createRow.apply(this,arguments);return e.rowType===$x&&(t.addClass("dx-footer-row"),t.addClass("dx-cell-focus-disabled"),t.attr("tabindex",0)),t}getHeight(){return this.getElementHeight()}isVisible(){return!!this._dataController.footerItems().length}}},extenders:{controllers:{data:r=>class extends r{_isDataColumn(e){return e&&(!(0,C.$K)(e.groupIndex)||e.showWhenGrouped)}_isGroupFooterVisible(){for(var e=this.option("summary.groupItems")||[],t=0;t<e.length;t++){var i=e[t],a=this._columnsController.columnOption(i.showInColumn||i.column);if(i.showInGroupFooter&&this._isDataColumn(a))return!0}return!1}_processGroupItems(e,t,i){var a=i&&i.data,n=super._processGroupItems.apply(this,arguments);return i&&(void 0===i.isGroupFooterVisible&&(i.isGroupFooterVisible=this._isGroupFooterVisible()),a&&a.items&&i.isGroupFooterVisible&&(i.collectContinuationItems||!a.isContinuationOnNextPage)&&n.push({rowType:nv,key:i.path.slice(),data:a,groupIndex:i.path.length-1,values:[]})),n}_processGroupItem(e,t){var i=this;if(t.summaryGroupItems||(t.summaryGroupItems=i.option("summary.groupItems")||[]),"group"===e.rowType){var a=-1,n=-1;(0,Y.S6)(t.visibleColumns,function(s){e.groupIndex===this.groupIndex&&(a=this.index),s>0&&"expand"===t.visibleColumns[s-1].command&&"expand"!==this.command&&(n=this.index)}),e.summaryCells=this._calculateSummaryCells(t.summaryGroupItems,sv(e.data),t.visibleColumns,(s,o)=>s.showInGroupFooter?-1:s.alignByColumn&&o&&!(0,C.$K)(o.groupIndex)&&o.index!==n?o.index:a,!0)}return e.rowType===nv&&(e.summaryCells=this._calculateSummaryCells(t.summaryGroupItems,sv(e.data),t.visibleColumns,(s,o)=>s.showInGroupFooter&&i._isDataColumn(o)?o.index:-1)),e}_calculateSummaryCells(e,t,i,a,n){var s=this,o=[],l={};return(0,Y.S6)(e,(d,u)=>{var c=s._columnsController.columnOption(u.column),f=u.showInColumn&&s._columnsController.columnOption(u.showInColumn)||c,p=a(u,f);if(p>=0){l[p]||(l[p]=[]);var w,_=t[d];_==_&&((0,C.$K)(u.valueFormat)?w=u.valueFormat:"count"!==u.summaryType&&(w=He.getFormatByDataType(c&&c.dataType)),l[p].push((0,B.l)({},u,{value:(0,C.HD)(_)&&c&&c.deserializeValue?c.deserializeValue(_):_,valueFormat:w,columnCaption:c&&c.index!==p?c.caption:void 0})))}}),(0,C.Qr)(l)||i.forEach((d,u)=>{var c=i[u-1];o.push(l[!n||"expand"!==c?.command&&"expand"!==d.command?d.index:c?.index]||[])}),o}_getSummaryCells(e,t){var i=this;return i._calculateSummaryCells(e,t,i._columnsController.getVisibleColumns(),(n,s)=>i._isDataColumn(s)?s.index:-1)}_updateItemsCore(e){var t,i=this._dataSource,a=this._footerItems,n=a&&a[0]&&a[0].summaryCells,s=this.option("summary.totalItems");if(this._footerItems=[],i&&s&&s.length){var o=i.totalAggregates();t=this._getSummaryCells(s,o),e&&e.repaintChangesOnly&&n&&(e.totalColumnIndices=t.map((l,d)=>JSON.stringify(l)!==JSON.stringify(n[d])?d:-1).filter(l=>l>=0)),t.length&&this._footerItems.push({rowType:$x,summaryCells:t})}super._updateItemsCore(e)}_prepareUnsavedDataSelector(e){if(ov(this)){var t=this.getController("editing");if(t)return function(i){return i=t.getUpdatedData(i),e(i)}}return e}_prepareAggregateSelector(e,t){return e=this._prepareUnsavedDataSelector(e),"avg"===t||"sum"===t?function(i){var a=e(i);return(0,C.$K)(a)?Number(a):a}:e}_getAggregates(e,t){var i=this,a=i.getController("columns"),n=i.option("summary.calculateCustomSummary"),s=i.option("summary.skipEmptyValues");return(0,Y.UI)(e||[],o=>{var l=a.columnOption(o.column),d=l&&l.calculateCellValue?l.calculateCellValue.bind(l):(0,Ot.vb)(l?l.dataField:o.column),u=o.summaryType||"count",c=(0,C.$K)(o.skipEmptyValues)?o.skipEmptyValues:s;if(t)return{selector:o.column,summaryType:u};var f=i._prepareAggregateSelector(d,u);if("custom"===u){n||(At.Z.log("E1026"),n=function(){});var p={component:i.component,name:o.name};n(p),p.summaryProcess="calculate",u={seed:_=>(p.summaryProcess="start",p.totalValue=void 0,p.groupIndex=_,delete p.value,n(p),p.totalValue),step:(_,w)=>(p.summaryProcess="calculate",p.totalValue=_,p.value=w,n(p),p.totalValue),finalize:_=>(p.summaryProcess="finalize",p.totalValue=_,delete p.value,n(p),p.totalValue)}}return{selector:f,aggregator:u,skipEmptyValues:c}})}_addSortInfo(e,t,i,a){if(t){var{groupIndex:n}=t;a=a||t.sortOrder,(0,C.$K)(n)&&(e[n]=e[n]||[],e[n].push({selector:i,desc:"desc"===a}))}}_findSummaryItem(e,t){var i=-1;return(0,C.$K)(t)&&(0,Y.S6)(e||[],function(a){if(this.name===t||a===t||this.summaryType===t||this.column===t||function(n){var{summaryType:s}=n,{column:o}=n;return s&&o&&"".concat(s,"_").concat(o)}(this)===t)return i=a,!1}),i}_getSummarySortByGroups(e,t){var i=this,a=i._columnsController,n=a.getGroupColumns(),s=[];if(t&&t.length)return(0,Y.S6)(e||[],function(){var{sortOrder:o}=this,{groupColumn:l}=this,d=i._findSummaryItem(t,this.summaryItem);if(!(d<0)){var u=function(c){return sv(c)[d]};(0,C.$K)(l)?(l=a.columnOption(l),i._addSortInfo(s,l,u,o)):(0,Y.S6)(n,(c,f)=>{i._addSortInfo(s,f,u,o)})}}),s}_createDataSourceAdapterCore(e,t){var i=this,a=super._createDataSourceAdapterCore(e,t);return a.summaryGetter(n=>i._getSummaryOptions(n||t)),a}_getSummaryOptions(e){var t=this,i=t.option("summary.groupItems"),a=t.option("summary.totalItems"),n=t.option("sortByGroupSummaryInfo"),s=t._getAggregates(i,e&&e.grouping&&e.summary),o=t._getAggregates(a,e&&e.summary);if(s.length||o.length)return{groupAggregates:s,totalAggregates:o,sortByGroups:function(){return t._getSummarySortByGroups(n,i)}}}publicMethods(){var e=super.publicMethods();return e.push("getTotalSummaryValue"),e}getTotalSummaryValue(e){var t=this._findSummaryItem(this.option("summary.totalItems"),e),i=this._dataSource.totalAggregates();if(i.length&&t>-1)return i[t]}optionChanged(e){("summary"===e.name||"sortByGroupSummaryInfo"===e.name)&&(e.name="dataSource"),super.optionChanged(e)}init(){this._footerItems=[],super.init()}footerItems(){return this._footerItems}},editing:r=>class extends r{_refreshSummary(){ov(this)&&!this.isSaving()&&this._dataController.refresh({load:!0,changesOnly:!0})}_addChange(e){var t=super._addChange.apply(this,arguments);return e.type&&this._refreshSummary(),t}_removeChange(){var e=super._removeChange.apply(this,arguments);return this._refreshSummary(),e}cancelEditData(){var e=super.cancelEditData.apply(this,arguments);return this._refreshSummary(),e}}},views:{rowsView:r=>class extends r{_createRow(e){var t=super._createRow.apply(this,arguments);return e&&t.addClass(e.rowType===nv?"dx-datagrid-group-footer":""),t}_renderCells(e,t){super._renderCells.apply(this,arguments),"group"===t.row.rowType&&t.row.summaryCells&&t.row.summaryCells.length&&this._renderGroupSummaryCells(e,t)}_hasAlignByColumnSummaryItems(e,t){return!(0,C.$K)(t.columns[e].groupIndex)&&t.row.summaryCells[e].length}_getAlignByColumnCellCount(e,t){for(var i=0,a=1;a<e;a++)i=this._hasAlignByColumnSummaryItems(t.row.summaryCells.length-a,t)?a:i;return i}_renderGroupSummaryCells(e,t){var i=e.children().last(),a=Number(i.attr("colSpan"))||1,n=this._getAlignByColumnCellCount(a,t);this._renderGroupSummaryCellsCore(i,t,a,n)}_renderGroupSummaryCellsCore(e,t,i,a){if(a>0){e.attr("colSpan",i-a);for(var n=0;n<a;n++){var s=t.columns.length-a+n;this._renderCell(e.parent(),(0,B.l)({column:t.columns[s],columnIndex:this._getSummaryCellIndex(s,t.columns)},t))}}}_getSummaryCellIndex(e,t){return e}_getCellTemplate(e){return!e.column.command&&!(0,C.$K)(e.column.groupIndex)&&e.summaryItems&&e.summaryItems.length?Gx:super._getCellTemplate(e)}_getCellOptions(e){var t=super._getCellOptions(e);return e.row.summaryCells?(0,B.l)(t,Ux(this,e)):t}}}}});var L6=ve(8047),Yx="content",Ql="content-fixed",Xx="dx-first-cell",Jx="dx-state-hover",Qx="dx-col-fixed",lv="dx-pointer-events-none",Cs="transparent",eS="dx-group-row",Xa=function(r){var e=-1;return(0,Y.S6)(r,(t,i)=>{if(i.command===Cs)return e=t,!1}),e},tS=function(r,e,t){var i=0;if(r&&e&&t)for(var a=0;a<r.length;a++)r[a].command===Cs?i+=r[a].colspan:(e[i]<t[a]&&(e[i]=t[a]),i++);return e},dv=r=>class extends r{init(){super.init(),this._isFixedTableRendering=!1,this._isFixedColumns=!1}_createCol(e){return super._createCol(e).toggleClass(Qx,!(!this._isFixedTableRendering||!(e.fixed||e.command&&e.command!==Cs)))}_correctColumnIndicesForFixedColumns(e,t){var i=Xa(e),a=e[i].colspan,n=t&&t.columnIndices;n&&(t.columnIndices=n.map(s=>{if(s)return s.map(o=>o<i?o:o>=i+a?o-a+1:-1).filter(o=>o>=0)}))}_partialUpdateFixedTable(e){var t=this._fixedTableElement,i=this._getRowElementsCore(t);t.children("colgroup").replaceWith(this._createColGroup(e));for(var n=0;n<i.length;n++)this._partialUpdateFixedRow((0,b.Z)(i[n]),e)}_partialUpdateFixedRow(e,t){var i,l,a=e.get(0).childNodes,n=Xa(t),s=t[n],d=this._columnsController.getColumnIndexOffset()+1,{colspan:u}=s;if(e.hasClass("dx-master-detail-row"))a[0].setAttribute("colspan",null===(i=this._columnsController.getVisibleColumns())||void 0===i?void 0:i.length);else{e.hasClass(eS)&&(u=(l=this._getGroupCellOptions({row:e.data("options"),columns:this._columnsController.getVisibleColumns()})).colspan-Math.max(0,a.length-(l.columnIndex+2)));for(var c=0;c<a.length;c++){var f=l?c===l.columnIndex+1:c===n;a[c].setAttribute("aria-colindex",d),f?(a[c].setAttribute("colspan",u),d+=u):d++}}}_renderTable(e){var t,i,a=this.getFixedColumns();this._isFixedColumns=!!a.length;var n=super._renderTable(e);if(this._isFixedColumns){var s=e?.change,o=this._getRowElements(this._fixedTableElement),l=s?.virtualColumnsScrolling&&o.length===(null===(t=s?.items)||void 0===t?void 0:t.length);if(this._isFixedTableRendering=!0,l&&!0!==this.option("scrolling.legacyMode"))this._partialUpdateFixedTable(a),this._isFixedTableRendering=!1;else{var d=s?.columnIndices;this._correctColumnIndicesForFixedColumns(a,s),i=this._createTable(a),this._renderRows(i,(0,B.l)({},e,{columns:a})),this._updateContent(i,s,!0),d&&(s.columnIndices=d),this._isFixedTableRendering=!1}}else this._fixedTableElement&&this._fixedTableElement.parent().remove(),this._fixedTableElement=null;return n}_renderRow(e,t){var i,{cells:a}=t.row;if(super._renderRow.apply(this,arguments),this._isFixedTableRendering&&a&&a.length){i=0;var n=t.row.cells||[];a=a.slice(),t.row.cells=a;for(var s=0;s<n.length;s++)n[s].column&&n[s].column.command===Cs?i=(n[s].column.colspan||1)-1:a[s+i]=n[s]}}_createCell(e){var s,o,l,{column:t}=e,i=t&&t.command,{rowType:a}=e,n=super._createCell.apply(this,arguments);(this._isFixedTableRendering||"filter"===a)&&(o=(s=this.getFixedColumns())[(l=Xa(s))-1]),this._isFixedTableRendering?i===Cs&&(n.addClass(lv).toggleClass(Xx,0===l||o&&"expand"===o.command).toggleClass("dx-last-cell",s.length&&l===s.length-1),"freeSpace"!==a&&Ae.setEmptyText(n)):"filter"===a&&n.toggleClass(Xx,e.columnIndex===l);var d=this.option("rowAlternationEnabled")&&e.isAltRow,u="multiple"===this.option("selection.mode")&&0===e.columnIndex&&"header"===e.rowType;return ni.Z.mozilla&&e.column.fixed&&"group"!==e.rowType&&!d&&!u&&n.addClass(Qx),n}_getContent(e){var t;return e?null===(t=this._fixedTableElement)||void 0===t?void 0:t.parent():super._getContent.apply(this,arguments)}_wrapTableInScrollContainer(e,t){var i=super._wrapTableInScrollContainer.apply(this,arguments);return(this._isFixedTableRendering||t)&&i.addClass(this.addWidgetPrefix(Ql)),i}_renderCellContent(e,t){var i,{column:a}=t,n=this._isFixedTableRendering,s="group"===t.rowType&&(0,C.$K)(a.groupIndex);if(n&&s&&!a.command&&!a.groupCellTemplate&&e.css("pointerEvents","none"),!n&&this._isFixedColumns){if(i=a.fixed||a.command&&!1!==a.fixed,s&&(i=!1,t.row.summaryCells&&t.row.summaryCells.length)){var o=this._columnsController.getVisibleColumns(),l=this._getAlignByColumnCellCount?this._getAlignByColumnCellCount(a.colspan,{columns:o,row:t.row,isFixed:!0}):0;if(l>0){var d=Xa(this._columnsController.getFixedColumns());i=o.length-l<d}}if(i){if(a.command&&"buttons"!==a.type||"group"===t.rowType)return void e.html("&nbsp;").addClass(a.cssClass);e.addClass("dx-hidden-cell")}}a.command!==Cs&&super._renderCellContent.apply(this,arguments)}_getCellElementsCore(e){var t=super._getCellElementsCore.apply(this,arguments),i=t?.parent().hasClass(eS),a="columnHeadersView"===this.name?e:void 0;if(this._fixedTableElement&&t){var n=this.getFixedColumns(a),s=this._getRowElements(this._fixedTableElement).eq(e).children("td");(0,Y.S6)(s,(o,l)=>{if(i)t[o]&&"hidden"!==l.style.visibility&&(t[o]=l);else{var d=n[o];if(d)if(d.command===Cs)s.eq(o).hasClass("dx-master-detail-cell")&&(t[o]=l||t[o]);else{var u=this._columnsController.getVisibleIndexByColumn(d,a);t[u]=l||t[u]}}})}return t}getColumnWidths(e){var t=super.getColumnWidths(),i=this.getFixedColumns(),a=this._fixedTableElement&&t.length?super.getColumnWidths(this._fixedTableElement):void 0;return tS(i,t,a)}getTableElement(e){return(e=this._isFixedTableRendering||e)?this._fixedTableElement:super.getTableElement()}setTableElement(e,t){this._isFixedTableRendering||t?this._fixedTableElement=e.addClass(lv):super.setTableElement(e)}getColumns(e){var t=this.getTableElement();return this._isFixedTableRendering?this.getFixedColumns(e):super.getColumns(e,t)}getRowIndex(e){var t=this._fixedTableElement;return t&&t.find(e).length?this._getRowElements(t).index(e):super.getRowIndex(e)}getTableElements(){var e=super.getTableElements.apply(this,arguments);return this._fixedTableElement&&(e=(0,b.Z)([e.get(0),this._fixedTableElement.get(0)])),e}getFixedColumns(e){return this._columnsController.getFixedColumns(e)}getFixedColumnsOffset(){var t,e={left:0,right:0};if(this._fixedTableElement){var i=(t=this.getTransparentColumnElement()).position();e={left:i.left,right:(0,we.Y_)(this.element(),!0)-((0,we.Y_)(t,!0)+i.left)}}return e}getTransparentColumnElement(){return this._fixedTableElement&&this._fixedTableElement.find(".".concat(lv)).first()}getFixedTableElement(){return this._fixedTableElement}isFixedColumns(){return this._isFixedColumns}_resizeCore(){super._resizeCore(),this.synchronizeRows()}setColumnWidths(e){var t,{widths:i}=e,a=this._columnsController.getVisibleColumns(),n=i?.length&&a.some(f=>(0,C.$K)(f.visibleWidth)),s=null===(t=e.optionNames)||void 0===t?void 0:t.width;if(super.setColumnWidths(e),this._fixedTableElement){var o=i?.some(f=>"auto"===f||!(0,C.$K)(f)),d=!o||n&&this.isScrollbarVisible(!0)?this.getFixedColumns():a;this.setFixedTableColumnWidths(d,i)}var u=this.option("wordWrapEnabled");(n||s&&u)&&this.synchronizeRows()}setFixedTableColumnWidths(e,t){if(this._fixedTableElement&&t){var i=this._fixedTableElement.children("colgroup").children("col");i.toArray().forEach(n=>n.removeAttribute("style"));var a=0;e.forEach(n=>{if(n.colspan)a+=n.colspan;else{var s=g_(t[a]);(0,C.$K)(s)&&(0,nr.cl)(i.eq(a),s),a+=1}})}}_getClientHeight(e){var t=e.getBoundingClientRect&&(0,li.l)(e);return t&&t.height?t.height:e.clientHeight}synchronizeRows(){var i,a,n,s,e=[],t=[];this.waitAsyncTemplates(!0).done(()=>{if(this._isFixedColumns&&this._tableElement&&this._fixedTableElement){var o=this._getClientHeight(this._tableElement.get(0)),l=this._getClientHeight(this._fixedTableElement.get(0));if(a=this._getRowElements(this._tableElement),n=this._getRowElements(this._fixedTableElement),s=this._findContentElement(),o!==l){for(s&&s.css("height",o),a.css("height",""),n.css("height",""),i=0;i<a.length;i++)e.push(this._getClientHeight(a.get(i))),t.push(this._getClientHeight(n.get(i)));for(i=0;i<a.length;i++){var d=e[i],u=t[i];d>u?n.eq(i).css("height",d):d<u&&a.eq(i).css("height",u)}s&&s.css("height","")}}})}setScrollerSpacing(e,t){var i=this.option("rtlEnabled");super.setScrollerSpacing(e),this.element().children(".".concat(this.addWidgetPrefix(Ql))).css({paddingLeft:i?e:"",paddingRight:i?"":e})}},K6={defaultOptions:()=>({columnFixing:{enabled:!1,texts:{fix:ae.Z.format("dxDataGrid-columnFixingFix"),unfix:ae.Z.format("dxDataGrid-columnFixingUnfix"),leftPosition:ae.Z.format("dxDataGrid-columnFixingLeftPosition"),rightPosition:ae.Z.format("dxDataGrid-columnFixingRightPosition")}}}),extenders:{views:{columnHeadersView:r=>class extends(dv(r)){_getRowVisibleColumns(e){return this._isFixedTableRendering?this.getFixedColumns(e):super._getRowVisibleColumns(e)}getContextMenuItems(e){var{column:t}=e,i=this.option("columnFixing"),a=super.getContextMenuItems(e);if(e.row&&"header"===e.row.rowType&&!0===i.enabled&&t&&t.allowFixing){var n=s=>{switch(s.itemData.value){case"none":this._columnsController.columnOption(t.index,"fixed",!1);break;case"left":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"left"});break;case"right":this._columnsController.columnOption(t.index,{fixed:!0,fixedPosition:"right"})}};(a=a||[]).push({text:i.texts.fix,beginGroup:!0,items:[{text:i.texts.leftPosition,value:"left",disabled:t.fixed&&(!t.fixedPosition||"left"===t.fixedPosition),onItemClick:n},{text:i.texts.rightPosition,value:"right",disabled:t.fixed&&"right"===t.fixedPosition,onItemClick:n}]},{text:i.texts.unfix,value:"none",disabled:!t.fixed,onItemClick:n})}return a}getFixedColumnElements(e){if((0,C.$K)(e))return this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(e).children();var t=this.getColumnElements(),i=this.getTransparentColumnElement();if(t&&i&&i.length){var a=Xa(this.getFixedColumns());t.splice(a,i.get(0).colSpan,i.get(0))}return t}getColumnWidths(){var e,t=super.getColumnWidths(),i=this.getFixedColumnElements(),a=this.getFixedColumns();return this._fixedTableElement&&(e=i&&i.length?this._getWidths(i):super.getColumnWidths(this._fixedTableElement)),tS(a,t,e)}},rowsView:r=>class extends(dv(r)){dispose(){super.dispose.apply(this,arguments),clearTimeout(this._fixedScrollTimeout)}optionChanged(e){super.optionChanged(e),"hoverStateEnabled"===e.name&&this._isFixedColumns&&(e.value?this._attachHoverEvents():this._detachHoverEvents())}_detachHoverEvents(){var e=this.element();this._fixedTableElement&&this._tableElement&&z.Z.off(e,"mouseover mouseout",".dx-data-row")}_attachHoverEvents(){this._fixedTableElement&&this._tableElement&&z.Z.on(this.element(),"mouseover mouseout",".dx-data-row",this.createAction(e=>{var{event:t}=e,i=this.getRowIndex((0,b.Z)(t.target).closest(".dx-row")),a="mouseover"===t.type;i>=0&&(this._tableElement&&this._getRowElements(this._tableElement).eq(i).toggleClass(Jx,a),this._fixedTableElement&&this._getRowElements(this._fixedTableElement).eq(i).toggleClass(Jx,a))}))}_getScrollDelay(){var e;return(null===(e=this._resizingController)||void 0===e?void 0:e.hasResizeTimeout())?this.option("scrolling.updateTimeout"):ni.Z.mozilla?60:0}_findContentElement(e){var t,i,a=this.addWidgetPrefix(Yx),n=this.element();if(e=this._isFixedTableRendering||e,n&&e){t=n.children(".".concat(a));var s=this.getScrollable();return!t.length&&s&&(t=(0,b.Z)("<div>").addClass(a),z.Z.on(t,"scroll",o=>{var{target:l}=o,d=this._getScrollDelay();clearTimeout(this._fixedScrollTimeout),this._fixedScrollTimeout=setTimeout(()=>{i=(0,b.Z)(l).scrollTop(),s.scrollTo({y:i})},d)}),z.Z.on(t,L6.u,o=>{var l=(0,b.Z)(o.target).closest(".dx-scrollable"),d=!1;if(s&&s.$element().is(l))d=!0;else{var u=l.length&&Ha.Z.getInstance(l.get(0)),c=u&&u.scrollHeight()-u.clientHeight()>0;d=u&&!c}if(d){i=s.scrollTop(),s.scrollTo({y:i-o.delta});var f=s.scrollTop()+s.clientHeight(),p=s.scrollHeight()+this.getScrollbarWidth();if(s.scrollTop()>0&&f<p)return!1}}),t.appendTo(n)),t}return super._findContentElement()}_updateScrollable(){super._updateScrollable();var e=this.getScrollable();if(!e?._disposed){var t=e&&e.scrollOffset().top;this._updateFixedTablePosition(t)}}_renderContent(e,t,i){return this._isFixedTableRendering||i?e.empty().addClass("".concat(this.addWidgetPrefix(Yx)," ").concat(this.addWidgetPrefix(Ql))).append(t):super._renderContent(e,t)}_getGroupCellOptions(e){return super._getGroupCellOptions(this._isFixedTableRendering?(0,B.l)({},e,{columns:this._columnsController.getVisibleColumns()}):e)}_renderGroupedCells(e,t){return super._renderGroupedCells(e,(0,B.l)({},t,{columns:this._columnsController.getVisibleColumns()}))}_renderGroupSummaryCells(e,t){super._renderGroupSummaryCells(e,this._isFixedTableRendering?(0,B.l)({},t,{columns:this._columnsController.getVisibleColumns()}):t)}_hasAlignByColumnSummaryItems(e,t){var i=super._hasAlignByColumnSummaryItems.apply(this,arguments),a=t.columns[e];return t.isFixed?a.fixed&&(i||"right"===a.fixedPosition):i&&(!this._isFixedColumns||!a.fixed)}_renderGroupSummaryCellsCore(e,t,i,a){var n;if(this._isFixedTableRendering){t.isFixed=!0,n=this._getAlignByColumnCellCount(i,t),t.isFixed=!1;var s=t.columns.length-n;t=(0,B.l)({},t,{columns:this.getFixedColumns()});var o=Xa(t.columns);s<o?(n-=t.columns[o].colspan-1||0,i-=t.columns[o].colspan-1||0):a>0&&e.css("visibility","hidden"),a=n}super._renderGroupSummaryCellsCore(e,t,i,a)}_getSummaryCellIndex(e,t){if(this._isFixedTableRendering){var i=Xa(t);return e>i&&(e+=t[i].colspan-1),e}return super._getSummaryCellIndex.apply(this,arguments)}_renderCore(e){this._detachHoverEvents();var t=super._renderCore(e),i=this._isFixedColumns;return this.element().toggleClass("dx-fixed-columns",i),this.option("hoverStateEnabled")&&i&&this._attachHoverEvents(),t}setAriaOwns(e,t,i){var a,n;if(i){var s=this.addWidgetPrefix(Ql),o=null===(a=this.element())||void 0===a?void 0:a.children(".".concat(s)),l=this.getFixedTableElement();o.length&&l?.length&&this.setAria("owns","".concat(e??""," ").concat(null!==(n=l.attr("id"))&&void 0!==n?n:""," ").concat(t??"").trim(),o)}else super.setAriaOwns.apply(this,arguments)}setRowsOpacity(e,t){super.setRowsOpacity(e,t);var i=this._getRowElements(this._fixedTableElement);this._setRowsOpacityCore(i,this.getFixedColumns(),e,t)}getCellIndex(e){var t=this._fixedTableElement,i=0;if(t&&e.is("td")&&e.closest(t).length){var a=this.getFixedColumns();return(0,Y.S6)(a,(n,s)=>{if(n===e[0].cellIndex)return!1;s.colspan?i+=s.colspan:i++}),i}return super.getCellIndex.apply(this,arguments)}_updateFixedTablePosition(e,t){var i;this._fixedTableElement&&this._tableElement&&(this._fixedTableElement.parent().scrollTop(e),t&&this._editorFactoryController&&(i=this._editorFactoryController.focus())&&this._editorFactoryController.focus(i))}setScrollerSpacing(e,t){var i={marginBottom:0},a=this.element().children(".".concat(this.addWidgetPrefix(Ql)));a.length&&this._fixedTableElement&&(a.css(i),this._fixedTableElement.css(i),i[this.option("rtlEnabled")?"marginLeft":"marginRight"]=e,i.marginBottom=t,(this._scrollable&&this._scrollable.option("useNative")?a:this._fixedTableElement).css(i))}_getElasticScrollTop(e){var t=0;if(e.scrollOffset.top<0)t=-e.scrollOffset.top;else if(e.reachedBottom){var i=(0,b.Z)(e.component.content()),a=(0,b.Z)(e.component.container()),n=Math.max(i.get(0).clientHeight-a.get(0).clientHeight,0);t=Math.min(n-e.scrollOffset.top,0)}return Math.floor(t)}_applyElasticScrolling(e){if(this._fixedTableElement){var t=this._getElasticScrollTop(e);0!==Math.ceil(t)?(0,Gi.pB)(this._fixedTableElement,{top:t}):this._fixedTableElement.css("transform","")}}_handleScroll(e){this._updateFixedTablePosition(e.scrollOffset.top,!0),this._applyElasticScrolling(e),super._handleScroll(e)}_updateContentPosition(e){super._updateContentPosition.apply(this,arguments),e||this._updateFixedTablePosition(this._scrollTop)}_afterRowPrepared(e){this._isFixedTableRendering||super._afterRowPrepared(e)}_scrollToElement(e){super._scrollToElement(e,this.getFixedColumnsOffset())}},footerView:r=>class extends(dv(r)){}},controllers:{draggingHeader:r=>class extends r{_generatePointsByColumns(e){var t=e.columns,{targetDraggingPanel:i}=e;if(i&&"headers"===i.getName()&&i.isFixedColumns()&&e.sourceColumn.fixed){e.rowIndex||(e.columnElements=i.getFixedColumnElements(0)),e.columns=i.getFixedColumns(e.rowIndex);var a=super._generatePointsByColumns(e);return function(r,e,t){var i=Xa(e),a=r.length-e.length;(0,Y.S6)(t,(n,s)=>{s.index>i&&(s.columnIndex+=a,s.index+=a)})}(t,e.columns,a),a}return super._generatePointsByColumns(e)}_pointCreated(e,t,i,a){var n=super._pointCreated.apply(this,arguments),s=t[e.columnIndex],o=this._columnHeadersView.getTransparentColumnElement();if(!n&&"headers"===i&&o&&o.length){var l=(0,li.l)(o.get(0));return a&&a.fixed?"right"===a.fixedPosition?e.x<l.right:e.x>l.left:!(!s||!s.fixed||"right"===s.fixedPosition)||e.x<l.left||e.x>l.right}return n}},columnsResizer:r=>class extends r{_generatePointsByColumns(){var e=this,t=e._columnsController,i=t&&e._columnsController.getVisibleColumns(),a=t&&e._columnsController.getFixedColumns(),n=Xa(a),s=i.length-a.length,o=e._columnHeadersView.getFixedColumnElements();super._generatePointsByColumns(),o&&o.length>0&&(e._pointsByFixedColumns=Ae.getPointsByColumns(o,l=>(l.index>n&&(l.columnIndex+=s,l.index+=s),e._pointCreated(l,i.length,i))))}_getTargetPoint(e,t,i){var a=this._columnHeadersView.getTransparentColumnElement();if(a&&a.length){var n=(0,li.l)(a.get(0));if(t<=n.left||t>=n.right)return super._getTargetPoint(this._pointsByFixedColumns,t,i)}return super._getTargetPoint(e,t,i)}},resizing:r=>class extends r{_setAriaOwns(){var e,t,i;super._setAriaOwns.apply(this,arguments);var a=null===(e=this._columnHeadersView)||void 0===e?void 0:e.getFixedTableElement(),n=null===(t=this._footerView)||void 0===t?void 0:t.getFixedTableElement();null===(i=this._rowsView)||void 0===i||i.setAriaOwns(a?.attr("id"),n?.attr("id"),!0)}}}}};He.registerModule("columnFixing",K6);var iS="columnHeadersView",rS="rowsView",uv=[iS,rS,"footerView"],Ja="adaptiveHidden",ws="detailAdaptive",hv="dx-field-item-content",ed="hidden-column",aS="dx-command-adaptive",nh="dx-command-adaptive-hidden",cv="dx-adaptive-item-text",sh="adaptive",nS="dx-group-cell",sS="dxDataGrid-ariaAdaptiveExpand";function oh(r,e){return r._columnsController.getColumnId(e)}function sH(r,e){var t,i=(0,b.Z)(r),a=e.component.getController("adaptiveColumns");"data"===e.rowType?(t=(0,b.Z)("<span>").addClass(a.addWidgetPrefix("adaptive-more")),z.Z.on(t,(0,Ee.V4)(Ft.u,"dxDataGridAdaptivity"),a.createAction(()=>{a.toggleExpandAdaptiveDetailRow(e.key)})),t.appendTo(i)):Ae.setEmptyText(i)}function fv(r){var e,t=null===(e=r.data)||void 0===e?void 0:e.$nextCell;z.Z.off(t,"focus",fv),z.Z.trigger(t,"dxclick")}var mH={defaultOptions:()=>({columnHidingEnabled:!1,onAdaptiveDetailRowPreparing:null}),controllers:{adaptiveColumns:class oH extends Vt.ViewController{init(){this._columnsController=this.getController("columns"),this._dataController=this.getController("data"),this._editingController=this.getController("editing"),this._keyboardNavigationController=this.getController("keyboardNavigation"),this._rowsView=this.getView("rowsView"),this._columnsController.addCommandColumn({type:sh,command:sh,visible:!0,adaptiveHidden:!0,cssClass:aS,alignment:"center",width:"auto",cellTemplate:sH,fixedPosition:"right"}),this._columnsController.columnsChanged.add(()=>{var e=!!this.updateHidingQueue(this._columnsController.getColumns()).length;this._columnsController.columnOption("command:adaptive","adaptiveHidden",!e,!0)}),this._hidingColumnsQueue=[],this._hiddenColumns=[],this.createAction("onAdaptiveDetailRowPreparing"),super.init()}optionChanged(e){"columnHidingEnabled"===e.name&&this._columnsController.columnOption("command:adaptive","adaptiveHidden",!e.value),super.optionChanged(e)}publicMethods(){return["isAdaptiveDetailRowExpanded","expandAdaptiveDetailRow","collapseAdaptiveDetailRow"]}_isRowEditMode(){return"row"===this._getEditMode()}_isItemModified(e,t){var i=this._columnsController.getVisibleIndex(e.column.index),a=this._dataController.getRowIndexByKey(t.key),n=this._dataController.items()[a+1];return n&&n.modifiedValues&&(0,C.$K)(n.modifiedValues[i])}_renderFormViewTemplate(e,t,i){var a=this,{column:n}=e,s=a.createAction(()=>{a._editingController.isEditing()&&z.Z.trigger(i,Ft.u)}),o=t.row.data,l=n.calculateCellValue(o),d=Ae.getDisplayValue(n,l,o,t.rowType),u=Ae.formatValue(d,n),c=this._editingController.isCellOrBatchEditMode(),f=a._rowsView;if(n.allowEditing&&this._keyboardNavigationController.isKeyboardEnabled()&&(i.attr("tabIndex",a.option("tabIndex")),c&&(z.Z.off(i,"focus",s),z.Z.on(i,"focus",s))),n.cellTemplate){var p=(0,B.l)({},t,{value:l,displayValue:d,text:u,column:n});f.renderTemplate(i,n.cellTemplate,p,(0,ha.al)(i)).done(()=>{f._cellPrepared(i,t)})}else{var _=i.get(0);n.encodeHtml?_.textContent=u:_.innerHTML=u,i.addClass(cv),(!(0,C.$K)(u)||""===u)&&i.html("&nbsp;"),a._isRowEditMode()||a._isItemModified(e,t)&&i.addClass("dx-item-modified"),f._cellPrepared(i,t)}}_getTemplate(e,t,i){var a=this,{column:n}=e,s=this._editingController;return function(o,l){var d=(0,b.Z)(l),u=a._columnsController.getVisibleIndex(n.index),c=(0,B.l)({},t),f=function(){var _=a._isItemEdited(e);c.value=t.row.values[u],_||n.showEditorAlways?s.renderFormEditorTemplate(c,e,o,d,!_):(c.column=n,c.columnIndex=u,a._renderFormViewTemplate(e,c,d))};if(f(),c.watch){var p=c.watch(()=>({isItemEdited:a._isItemEdited(e),value:t.row.values[u]}),()=>{d.contents().remove(),d.removeClass(cv),f()});z.Z.on(d,Yn.x,p)}}}_isVisibleColumnsValid(e){return!(e<2||e.length-function(){for(var t=0,i=0;i<e.length;i++)e[i].command&&t++;return t}()<=1)}_calculatePercentWidths(e,t){var i=this,a=0;return t.forEach((n,s)=>{e[s]!==Ja&&(a+=i._getItemPercentWidth(n))}),a}_isPercentWidth(e){return(0,C.HD)(e)&&e.endsWith("%")}_isColumnHidden(e){return this._hiddenColumns.filter(t=>t.index===e.index).length>0}_getAverageColumnsWidth(e,t,i){var a=this,n=0,s=0;return t.forEach(o=>{if(!a._isColumnHidden(o)){var{width:l}=o;(0,C.$K)(l)&&!isNaN(parseFloat(l))?n+=a._isPercentWidth(l)?a._calculatePercentWidth({visibleIndex:o.visibleIndex,columnsCount:t.length,columnsCanFit:i,bestFitWidth:o.bestFitWidth,columnWidth:l,containerWidth:e}):parseFloat(l):s++}}),(e-n)/s}_calculateColumnWidth(e,t,i,a){var d,n=oh(this,e),s=this._columnsController.columnOption(n,"width"),o=this._columnsController.columnOption(n,"bestFitWidth"),l=i.length;if(s&&"auto"!==s){if(!this._isPercentWidth(s))return parseFloat(s);d=this._calculatePercentWidth({visibleIndex:e.visibleIndex,columnsCount:l,columnsCanFit:a,bestFitWidth:o,columnWidth:s,containerWidth:t})}else d=this.option("columnAutoWidth")||e.command?o:this._getAverageColumnsWidth(t,i,a);return d}_calculatePercentWidth(e){var t=e.visibleIndex<e.columnsCount-1&&e.columnsCanFit,i=e.containerWidth*parseFloat(e.columnWidth)/100,a=e.columnsCanFit&&i<e.bestFitWidth?e.bestFitWidth:i;return t?e.containerWidth*parseFloat(e.columnWidth)/100:a}_getNotTruncatedColumnWidth(e,t,i,a){var n=oh(this,e),s=this._columnsController.columnOption(n,"width"),o=this._columnsController.columnOption(n,"bestFitWidth");if(s&&"auto"!==s&&!this._isPercentWidth(s))return parseFloat(s);var l=this._calculateColumnWidth(e,t,i,a);return l<o?null:l}_getItemPercentWidth(e){var t=0;return e.width&&this._isPercentWidth(e.width)&&(t=parseFloat(e.width)),t}_getCommandColumnsWidth(){var e=this,t=e._columnsController.getVisibleColumns(),i=0;return(0,Y.S6)(t,(a,n)=>{(n.index<0||n.command)&&(i+=e._columnsController.columnOption(oh(e,n),"bestFitWidth")||0)}),i}_isItemEdited(e){if(this.isFormOrPopupEditMode())return!1;if(!this._isRowEditMode()){var i=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,a=this._columnsController.getVisibleIndex(e.column.index);return this._editingController.isEditCell(i,a)}var t=this.option("editing.editRowKey");return!!(0,le.bY)(t,this._dataController.adaptiveExpandedKey())||void 0}_getFormItemsByHiddenColumns(e){var t=[];return(0,Y.S6)(e,(i,a)=>{t.push({column:a,name:a.name,dataField:a.dataField,visibleIndex:a.visibleIndex})}),t}_getAdaptiveColumnVisibleIndex(e){for(var t=0;t<e.length;t++)if(e[t].command===sh)return t}_hideAdaptiveColumn(e,t){var i=this._getAdaptiveColumnVisibleIndex(t);(0,C.$K)(i)&&(e[i]=Ja,this._hideVisibleColumn({isCommandColumn:!0,visibleIndex:i}))}_showHiddenCellsInView(e){var{$cells:t,isCommandColumn:i}=e,a=this.addWidgetPrefix(ed);i?(a=nh,t.attr({tabIndex:0,"aria-hidden":null}).removeClass(a)):t.removeClass(a)}_showHiddenColumns(){for(var e=0;e<uv.length;e++){var t=this.getView(uv[e]);if(t&&t.isVisible()&&t.element()){var i=t.name,a=t.element().find(".".concat(nh));this._showHiddenCellsInView({viewName:i,$cells:a,isCommandColumn:!0});var n=t.element().find(".".concat(this.addWidgetPrefix(ed)));this._showHiddenCellsInView({viewName:i,$cells:n})}}}_isCellValid(e){return e&&e.length&&!e.hasClass("dx-master-detail-cell")&&!e.hasClass(nS)}_hideVisibleColumn(e){var{isCommandColumn:t,visibleIndex:i}=e,a=this;uv.forEach(n=>{var s=a.getView(n);s&&a._hideVisibleColumnInView({view:s,isCommandColumn:t,visibleIndex:i})})}_hideVisibleColumnInView(e){var s,{view:t,isCommandColumn:i,visibleIndex:a}=e,n=t.name,o=this._columnsController.getVisibleColumns()[a],l=this._editingController&&this._editingController.getEditFormRowIndex();if(t&&t.isVisible()&&o)for(var d=t.getRowsCount(),u=t._getRowElements(),c=0;c<d;c++)if(c!==l||n!==rS||"popup"===this.option("editing.mode")){var p=n===iS?this._columnsController.getVisibleIndex(o.index,c):a;if(p>=0){var _=u.eq(c);s=this._findCellElementInRow(_,p),this._isCellValid(s)&&this._hideVisibleCellInView({viewName:n,isCommandColumn:i,$cell:s})}}}_findCellElementInRow(e,t){var i=e.children(),a=t,n=!1;if(e.hasClass("dx-group-row")){var s=e.find(".".concat(nS)),o=s.attr("colspan");if(s.length&&(0,C.$K)(o)){var l=parseInt(o);t>s.index()+l-1?a=t-l+1:n=!0}}return n?void 0:i.eq(a)}_hideVisibleCellInView(e){var{$cell:t,isCommandColumn:i}=e,a=i?nh:this.addWidgetPrefix(ed);t.attr({tabIndex:-1,"aria-hidden":!0}).addClass(a)}_getEditMode(){return this._editingController.getEditMode()}isFormOrPopupEditMode(){var e=this._getEditMode();return"form"===e||"popup"===e}hideRedundantColumns(e,t,i){if(this._hiddenColumns=[],this._isVisibleColumnsValid(t)&&i.length){var u,c,f,a=0,n=this.component.$element(),s=(0,we.dz)(n)-this._getCommandColumnsWidth(),o=function(){return t.filter(q=>!q.command&&0===this._hiddenColumns.filter(k=>k.index===q.index).length)}.bind(this),l=o(),d=l.length;do{f=!1,a=0;var p=this._calculatePercentWidths(e,t),_=p<100&&0!==p;for(u=0;u<t.length;u++){var w=t[u],S=this._getNotTruncatedColumnWidth(w,s,l,_),x=oh(this,w),E=this._columnsController.columnOption(x,"width"),V=this._columnsController.columnOption(x,"minWidth"),N=this._columnsController.columnOption(x,"bestFitWidth");if(e[u]!==Ja){if(!S&&!w.command&&!w.fixed){f=!0;break}(!E||"auto"===E)&&(S=Math.max(N||0,V||0)),(w.command!==sh||c)&&(a+=S)}else c=!0}if(f=f||a>(0,we.dz)(n)){var j=i.pop(),Q=this._columnsController.getVisibleIndex(j.index);s+=this._calculateColumnWidth(j,s,l,_),this._hideVisibleColumn({visibleIndex:Q}),e[Q]=Ja,this._hiddenColumns.push(j),l=o()}}while(f&&l.length>1&&i.length);d===l.length&&this._hideAdaptiveColumn(e,t)}else this._hideAdaptiveColumn(e,t)}getAdaptiveDetailItems(){return this._$itemContents}getItemContentByColumnIndex(e){for(var t,i=0;i<this._$itemContents.length;i++){var a=(t=this._$itemContents.eq(i)).data("dx-form-item");if(a&&a.column&&this._columnsController.getVisibleIndex(a.column.index)===e)return t}}toggleExpandAdaptiveDetailRow(e,t){this.isFormOrPopupEditMode()&&this._editingController.isEditing()||this._dataController.toggleExpandAdaptiveDetailRow(e,t)}createFormByHiddenColumns(e,t){var i=this,a=(0,b.Z)(e),n={items:i._getFormItemsByHiddenColumns(i._hiddenColumns),formID:"dx-".concat(new Pi.Z)},s=(0,Lt.x2)()?{colCount:2}:{};this.executeAction("onAdaptiveDetailRowPreparing",{formOptions:n}),i._$itemContents=null,i._form=i._createComponent((0,b.Z)("<div>").appendTo(a),yb,(0,B.l)(s,n,{customizeItem(o){var l=o.column||i._columnsController.columnOption(o.name||o.dataField);l&&(o.label=o.label||{},o.label.text=o.label.text||l.caption,o.column=l,o.template=i._getTemplate(o,t,i.updateForm.bind(i))),n.customizeItem&&n.customizeItem.call(this,o)},onContentReady(o){n.onContentReady&&n.onContentReady.call(this,o),i._$itemContents=a.find(".".concat(hv))}}))}hasAdaptiveDetailRowExpanded(){return(0,C.$K)(this._dataController.adaptiveExpandedKey())}updateForm(e){this.hasAdaptiveDetailRowExpanded()&&this._form&&(0,C.$K)(this._form._contentReadyAction)&&(e&&e.length?this._form.option("items",this._getFormItemsByHiddenColumns(e)):this._form.repaint())}updateHidingQueue(e){var i,a,t=e.filter(s=>s.visible&&!s.type&&!s.fixed&&!((0,C.$K)(s.groupIndex)&&s.groupIndex>=0));if(this._hidingColumnsQueue=[],this.option("allowColumnResizing")&&"widget"===this.option("columnResizingMode"))return this._hidingColumnsQueue;for(a=0;a<t.length;a++)(0,C.$K)(t[a].hidingPriority)&&t[a].hidingPriority>=0&&(i=!0,this._hidingColumnsQueue[t[a].hidingPriority]=t[a]);if(i)this._hidingColumnsQueue.reverse();else if(this.option("columnHidingEnabled"))for(a=0;a<t.length;a++){var n=this._columnsController.getVisibleIndex(t[a].index);this._hidingColumnsQueue[n]=t[a]}return this._hidingColumnsQueue=this._hidingColumnsQueue.filter(Object),this._hidingColumnsQueue}getHiddenColumns(){return this._hiddenColumns}hasHiddenColumns(){return this._hiddenColumns.length>0}getHidingColumnsQueue(){return this._hidingColumnsQueue}isAdaptiveDetailRowExpanded(e){var t=this._dataController;return t.adaptiveExpandedKey()&&(0,le.bY)(t.adaptiveExpandedKey(),e)}expandAdaptiveDetailRow(e){this.hasAdaptiveDetailRowExpanded()||this.toggleExpandAdaptiveDetailRow(e)}collapseAdaptiveDetailRow(){this.hasAdaptiveDetailRowExpanded()&&this.toggleExpandAdaptiveDetailRow()}updateCommandAdaptiveAriaLabel(e,t){var i=this._dataController.getRowIndexByKey(e);if(-1!==i){var a=(0,b.Z)(this.component.getRowElement(i));this.setCommandAdaptiveAriaLabel(a,t)}}setCommandAdaptiveAriaLabel(e,t){e.find(".dx-command-adaptive").attr("aria-label",ae.Z.format(t))}}},extenders:{views:{rowsView:r=>class extends r{_getCellTemplate(e){var t=this,{column:i}=e;return e.rowType===ws&&"detail"===i.command?function(a,n){t._adaptiveColumnsController.createFormByHiddenColumns((0,b.Z)(a),n)}:super._getCellTemplate(e)}_createRow(e){var t=super._createRow.apply(this,arguments);return e&&e.rowType===ws&&e.key===this._dataController.adaptiveExpandedKey()&&t.addClass("dx-adaptive-detail-row"),t}_renderCells(e,t){super._renderCells(e,t);var i=this._adaptiveColumnsController,a=i.getHidingColumnsQueue().length,n=i.getHiddenColumns().length;a&&!n&&function nH(r){return r.find("td:not(.dx-datagrid-hidden-column):not([class*='dx-command-'])")}(e).last().addClass("dx-last-data-cell"),"data"===t.row.rowType&&i.setCommandAdaptiveAriaLabel(e,sS)}_getColumnIndexByElementCore(e){var t=e.closest(".".concat(hv));if(t.length&&t.closest(this.component.$element()).length){var i=t.length?t.first().data("dx-form-item"):null;return i&&i.column&&this._columnsController.getVisibleIndex(i.column.index)}return super._getColumnIndexByElementCore(e)}_cellPrepared(e,t){super._cellPrepared.apply(this,arguments),t.row.rowType!==ws&&t.column.visibleWidth===Ja&&e.addClass(this.addWidgetPrefix(ed))}getCell(e,t){var i=this._dataController.items()[e?.rowIndex];if(i?.rowType===ws){var a=this._adaptiveColumnsController.getAdaptiveDetailItems();return super.getCell(e,t,a)}return super.getCell.apply(this,arguments)}_getCellElement(e,t){var i=this._dataController.items()[e];return i&&i.rowType===ws?this._adaptiveColumnsController.getItemContentByColumnIndex(t):super._getCellElement.apply(this,arguments)}getContextMenuItems(e){var t;if(e.row&&"detailAdaptive"===e.row.rowType){var i=this._columnHeadersView,a=(0,b.Z)(e.targetElement).closest(".dx-field-item-label").next().data("dx-form-item");return e.column=a?a.column:e.column,i.getContextMenuItems&&i.getContextMenuItems(e)}return null===(t=super.getContextMenuItems)||void 0===t?void 0:t.call(this,e)}isClickableElement(e){var t,i;return null!==(i=null===(t=super.isClickableElement)||void 0===t?void 0:t.call(this,e))&&void 0!==i&&i||!!e.closest(".".concat(aS)).length}}},controllers:{export:r=>class extends r{_updateColumnWidth(e,t){super._updateColumnWidth(e,e.visibleWidth===Ja?e.bestFitWidth:t)}},columnsResizer:r=>class extends r{_pointCreated(e,t,i){var a=super._pointCreated(e,t,i),n=i[e.columnIndex]||{},s=this._getNextColumnIndex(e.columnIndex);return a||n.visibleWidth===Ja||s!==e.columnIndex+1&&(i[s]||{}).command}_getNextColumnIndex(e){for(var t=this._columnsController.getVisibleColumns(),i=super._getNextColumnIndex(e);t[i]&&t[i].visibleWidth===Ja;)i++;return i}},draggingHeader:r=>class extends r{_pointCreated(e,t,i,a){return super._pointCreated(e,t,i,a)||(t[e.columnIndex-1]||{}).visibleWidth===Ja}},editing:r=>class extends r{_isRowEditMode(){return"row"===this.getEditMode()}_getFormEditItemTemplate(e,t){return"row"!==this.getEditMode()&&"detailAdaptive"===e.rowType?(e.columnIndex=this._columnsController.getVisibleIndex(t.index),this.getColumnTemplate(e)):super._getFormEditItemTemplate(e,t)}_closeEditItem(e){var t=e.closest(".".concat(hv)),i=this._dataController.getRowIndexByKey(this._dataController.adaptiveExpandedKey())+1,a=t.length?t.first().data("dx-form-item"):null,n=a&&a.column&&this._columnsController.getVisibleIndex(a.column.index);this.isEditCell(i,n)||super._closeEditItem(e)}_beforeUpdateItems(e,t){if(!this._adaptiveColumnsController.isFormOrPopupEditMode()&&this._adaptiveColumnsController.hasHiddenColumns()){var i=this._dataController.items(),a=i[t],n=Ae.getIndexByKey(this._dataController.adaptiveExpandedKey(),i);this._isForceRowAdaptiveExpand=!this._adaptiveColumnsController.hasAdaptiveDetailRowExpanded(),n>=0&&e.push(n+1),e.push(t+1),this._dataController.adaptiveExpandedKey(a.key)}}_afterInsertRow(e){super._afterInsertRow.apply(this,arguments),this._adaptiveColumnsController.hasHiddenColumns()&&(this._adaptiveColumnsController.toggleExpandAdaptiveDetailRow(e,this.isRowEditMode()),this._isForceRowAdaptiveExpand=!0)}_collapseAdaptiveDetailRow(){this._isRowEditMode()&&this._isForceRowAdaptiveExpand&&(this._adaptiveColumnsController.collapseAdaptiveDetailRow(),this._isForceRowAdaptiveExpand=!1)}_cancelEditAdaptiveDetailRow(){this._adaptiveColumnsController.hasHiddenColumns()&&this._collapseAdaptiveDetailRow()}_afterSaveEditData(){super._afterSaveEditData.apply(this,arguments);var e=new X.BH;return this._isRowEditMode()&&this._adaptiveColumnsController.hasHiddenColumns()?(0,X.gx)(this._validatingController.validate(!0)).done(t=>{t&&this._cancelEditAdaptiveDetailRow(),e.resolve()}):e.resolve(),e.promise()}_beforeCancelEditData(){super._beforeCancelEditData(),this._cancelEditAdaptiveDetailRow()}_getRowIndicesForCascadeUpdating(e){var t=super._getRowIndicesForCascadeUpdating.apply(this,arguments);return this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(e.key)&&t.push(e.rowType===ws?e.rowIndex-1:e.rowIndex+1),t}_beforeCloseEditCellInBatchMode(e){var t=this._dataController._adaptiveExpandedKey;if(t){var i=Ae.getIndexByKey(t,this._dataController.items());i>-1&&e.unshift(i)}}editRow(e){return this._adaptiveColumnsController.isFormOrPopupEditMode()&&this._adaptiveColumnsController.collapseAdaptiveDetailRow(),super.editRow(e)}deleteRow(e){var t=this._dataController.getKeyByRowIndex(e);"batch"===this.getEditMode()&&this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(t)&&this._adaptiveColumnsController.collapseAdaptiveDetailRow(),super.deleteRow(e)}},resizing:r=>class extends r{dispose(){super.dispose.apply(this,arguments),clearTimeout(this._updateScrollableTimeoutID)}_needBestFit(){return super._needBestFit()||!!this._adaptiveColumnsController.getHidingColumnsQueue().length}_correctColumnWidths(e,t){var i=this._adaptiveColumnsController,a=i.getHiddenColumns(),n=i.updateHidingQueue(this._columnsController.getColumns());i.hideRedundantColumns(e,t,n);var s=i.getHiddenColumns();return i.hasAdaptiveDetailRowExpanded()&&a.length!==s.length&&i.updateForm(s),!s.length&&i.collapseAdaptiveDetailRow(),super._correctColumnWidths.apply(this,arguments)}_toggleBestFitMode(e){e&&this._adaptiveColumnsController._showHiddenColumns(),super._toggleBestFitMode(e)}_needStretch(){var e=this._adaptiveColumnsController;return super._needStretch.apply(this,arguments)||e.getHidingColumnsQueue().length||e.hasHiddenColumns()}},data:r=>class extends r{_processItems(e,t){var{changeType:i}=t;if(e=super._processItems.apply(this,arguments),"loadingAll"===i||!(0,C.$K)(this._adaptiveExpandedKey))return e;var a=Ae.getIndexByKey(this._adaptiveExpandedKey,e),n=!1===this.option("scrolling.legacyMode");if(a>=0){var s=e[a];e.splice(a+1,0,{visible:!0,rowType:ws,key:s.key,data:s.data,node:s.node,modifiedValues:s.modifiedValues,isNewRow:s.isNewRow,values:s.values})}else"refresh"===i&&(!n||!t.repaintChangesOnly)&&(this._adaptiveExpandedKey=void 0);return e}_getRowIndicesForExpand(e){var t=super._getRowIndicesForExpand.apply(this,arguments);return this._adaptiveColumnsController.isAdaptiveDetailRowExpanded(e)&&t.push(t[t.length-1]+1),t}adaptiveExpandedKey(e){if(!(0,C.$K)(e))return this._adaptiveExpandedKey;this._adaptiveExpandedKey=e}toggleExpandAdaptiveDetailRow(e,t){var i=Ae.getIndexByKey(this._adaptiveExpandedKey,this._items),a=Ae.getIndexByKey(e,this._items);i>=0&&i===a&&!t&&(e=void 0,a=-1);var n=this._adaptiveExpandedKey;this._adaptiveExpandedKey=e,i>=0&&i++,a>=0&&a++;var s=this.getRowIndexDelta();this.updateItems({allowInvisibleRowIndices:!0,changeType:"update",rowIndices:[i-s,a-s]}),this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(e,"dxDataGrid-ariaAdaptiveCollapse"),this._adaptiveColumnsController.updateCommandAdaptiveAriaLabel(n,sS)}},editorFactory:r=>class extends r{_needHideBorder(e){return super._needHideBorder(e)||e?.hasClass("dx-field-item-content")&&e?.find(".dx-checkbox").length}_getFocusCellSelector(){return"".concat(super._getFocusCellSelector(),", .dx-adaptive-detail-row .dx-field-item > .dx-field-item-content")}_getRevertTooltipsSelector(){return"".concat(super._getRevertTooltipsSelector(),", .dx-field-item-content .").concat(this.addWidgetPrefix("revert-tooltip"))}},columns:r=>class extends r{_isColumnVisible(e){return super._isColumnVisible(e)&&!e.adaptiveHidden}},keyboardNavigation:r=>class extends r{_isCellValid(e,t){return super._isCellValid(e,t)&&!e.hasClass(this.addWidgetPrefix(ed))&&!e.hasClass(nh)}_processNextCellInMasterDetail(e,t){super._processNextCellInMasterDetail(e,t);var i=this._editingController.isCellOrBatchEditMode();this._editingController.isEditing()&&e&&i&&!this._isInsideEditForm(e)&&(z.Z.off(e,"focus",fv),z.Z.on(e,"focus",{$nextCell:e},fv),z.Z.trigger(t,"focus"))}_isCellElement(e){return super._isCellElement(e)||e.hasClass(cv)}}}}};function oS(r,e,t,i,a,n){n=n||[],(i=i||[])[t=t||0]=i[t]||0;var d,s=r[t],l=0;if(s){for(d=n[t]+1||0;d<s.length;d++){var u=s[d],c=d+i[t],f=u.colspan||1;if(oS(r,e,t+(u.rowspan||1),i,f,n),i[t]+=f-1,l+=f,u.rowspan)for(var p=t+1;p<t+u.rowspan;p++)i[p]=i[p]||0,i[p]+=u.colspan||1;if(!1===e(u,c,t,d)||void 0!==a&&l>=a)break}n[t]=d}}function vv(r,e,t){var i=[];oS(r,(n,s,o)=>{var d,l=n,u=l.colspan||1,c=s+u-1>=e&&s<t;if(i[o]=i[o]||[],c)s<e?(d=u-(e-s),s=e):d=u,s+d>t&&(d=t-s),d!==u&&(l=(0,B.l)({},l,{colspan:d})),i[o].push(l);else if(s>t)return!1});for(var a=0;a<i.length;a++)i[a]=i[a]||[];return i}He.registerModule("adaptivity",mH);var lh=function(r){return r.map(e=>e.visibleWidth||parseFloat(e.width)||50)},xH={defaultOptions:()=>({scrolling:{columnRenderingMode:"standard",columnPageSize:5,columnRenderingThreshold:300}}),extenders:{controllers:{columns:r=>class extends r{init(){super.init.apply(this,arguments),this._resizingController=this.getController("resizing"),this._beginPageIndex=null,this._endPageIndex=null,this._position=0,this._virtualVisibleColumns={}}dispose(){clearTimeout(this._changedTimeout),super.dispose.apply(this,arguments)}resetColumnsCache(){super.resetColumnsCache(),this._virtualVisibleColumns={}}getBeginPageIndex(e){for(var t=this.getVisibleColumns(void 0,!0),i=lh(t),a=0,n=0;n<i.length;n++){if(a>=e)return Math.floor(n/this.getColumnPageSize());a+=i[n]}return 0}getTotalWidth(){var e=this.option("width");return"number"==typeof e?e:this._resizingController._lastWidth||(0,we.Y_)(this.component.$element())}getEndPageIndex(e){var t=this.getVisibleColumns(void 0,!0),i=lh(t),a=0;e+=this.getTotalWidth();for(var n=0;n<i.length;n++){if(a>=e)return Math.ceil(n/this.getColumnPageSize());a+=i[n]}return Math.ceil(i.length/this.getColumnPageSize())}getColumnPageSize(){return this.option("scrolling.columnPageSize")}_fireColumnsChanged(){var e=new Date;this.columnsChanged.fire({optionNames:{all:!0,length:1},changeTypes:{columns:!0,virtualColumnsScrolling:!0,length:2}}),this._renderTime=new Date-e}getScrollingTimeout(){var e=this.option("scrolling.columnRenderingThreshold"),t=this.option("scrolling.renderAsync"),i=0;return(!(0,C.$K)(t)&&this._renderTime>e||t)&&(i=this.option("scrolling.timeout")),i}setScrollPosition(e){var t=this.getScrollingTimeout();t>0?(clearTimeout(this._changedTimeout),this._changedTimeout=setTimeout(()=>{this._setScrollPositionCore(e)},t)):this._setScrollPositionCore(e)}isVirtualMode(){return(0,Je.Ym)()&&"virtual"===this.option("scrolling.columnRenderingMode")}resize(){this._setScrollPositionCore(this._position)}_setScrollPositionCore(e){if(this.isVirtualMode()){var t=this.getBeginPageIndex(e),i=this.getEndPageIndex(e),a=e<this._position?this._beginPageIndex>t:this._endPageIndex<i;this._position=e,a&&(this._beginPageIndex=t,this._endPageIndex=i,this._fireColumnsChanged())}}getFixedColumns(e,t){var i=super.getFixedColumns(e);if(this.isVirtualMode()&&!t&&i.length){var a=i.map(n=>n.command).indexOf("transparent");return i[a].colspan=this.getVisibleColumns().length-super.getFixedColumns().length+1,i}return i}_compileVisibleColumns(e,t){var i;if(t||!this.isVirtualMode()||!this._shouldReturnVisibleColumns())return super._compileVisibleColumns(e);null!==(i=this._columns)&&void 0!==i&&i.length&&!(0,C.$K)(this._beginPageIndex)&&!(0,C.$K)(this._endPageIndex)&&(this._beginPageIndex=this.getBeginPageIndex(this._position),this._endPageIndex=this.getEndPageIndex(this._position));var a=this._beginPageIndex,n=this._endPageIndex,s="".concat(e,"-").concat(a,"-").concat(n);if(this._virtualVisibleColumns[s])return this._virtualVisibleColumns[s];var o=super._compileVisibleColumns(),l=this.getRowCount(),d=this.getColumnPageSize(),u=a*d,c=n*d,f=this.getFixedColumns(void 0,!0),p=f.map(k=>k.command).indexOf("transparent"),_=f.length?p:0,w=o.slice(0,_),S=o.slice(_,u),x=lh(S).reduce((k,se)=>k+se,0);x||(u=0);var E=f.length?f.length-p-1:0,V=o.slice(o.length-E),N=o.slice(c,o.length-E),j=lh(N).reduce((k,se)=>k+se,0);if(j||(c=o.length),l>1&&"number"==typeof e){for(var Q=[],q=0;q<=l;q++)Q.push(super._compileVisibleColumns(q));w=vv(Q,0,w.length)[e]||[],V=vv(Q,o.length-V.length,o.length)[e]||[],o=vv(Q,u,c)[e]||[]}else o=o.slice(u,c);return x&&(o.unshift({command:"virtual",width:x}),o=w.concat(o)),j&&(o.push({command:"virtual",width:j}),o=o.concat(V)),this._virtualVisibleColumns[s]=o,o}getColumnIndexOffset(){var e=0;if(this._beginPageIndex>0){var i=this.getFixedColumns().map(n=>n.command).indexOf("transparent"),a=i>=0?i:0;e=this._beginPageIndex*this.getColumnPageSize()-a-1}return e>0?e:0}}},views:{columnHeadersView:r=>class extends r{_renderCore(){var e=super._renderCore.apply(this,arguments);return this._columnsController.isVirtualMode()&&this._updateScrollLeftPosition(),e}},rowsView:r=>class extends r{_resizeCore(){super._resizeCore.apply(this,arguments),this._columnsController.resize()}_handleScroll(e){var t=this.getScrollable(),{left:i}=e.scrollOffset;super._handleScroll.apply(this,arguments),this.option("rtlEnabled")&&t&&(i=(0,we.dz)(t.$content())-(0,we.dz)(t.$element())-i),this._columnsController.setScrollPosition(i)}_renderCore(e){var t,i;if(e?.virtualColumnsScrolling){var a=this._findContentElement(),n=null===(t=this._columnsController)||void 0===t?void 0:t.getFixedColumns(),s=null===(i=this._scrollable)||void 0===i?void 0:i.option("useNative");if(n?.length){a.css({minHeight:s?(0,we.Cr)(a):Ae.getContentHeightLimit(ni.Z)});var o=()=>{this.resizeCompleted.remove(o),a.css({minHeight:""})};this.resizeCompleted.add(o)}}return super._renderCore.apply(this,arguments)}}}}};He.registerModule("virtualColumns",xH);var td="dx-buttongroup",SH="".concat(td,"-wrapper"),lS="".concat(td,"-item"),EH="".concat(td,"-first-item"),IH="".concat(td,"-last-item"),dS="".concat(lS,"-has-width"),dh={contained:"dx-buttongroup-mode-contained",outlined:"dx-buttongroup-mode-outlined",text:"dx-buttongroup-mode-text"},TH=pl.Z.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Qd.c((r,e,t)=>{this._prepareItemStyles(r);var i=this.option("buttonTemplate");this._createComponent(r,Or.Z,(0,B.l)({},t,e,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(i)?t:{},template:t.template||i}))},["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions(){return(0,B.l)(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(r){return(0,C.mf)(r)||this.option("integrationOptions.templates")[r]},_selectedItemClass:()=>"dx-item-selected dx-state-selected",_prepareItemStyles(r){var e=r.data("dxItemIndex");0===e&&r.addClass(EH);var t=this.option("items");t&&e===t.length-1&&r.addClass(IH),r.addClass("dx-shape-standard")},_renderItemContent(r){return r.container=(0,b.Z)(r.container).parent(),this.callBase(r)},_setAriaSelectionAttribute(r,e){this.setAria("pressed",e,r)},_renderItemContentByNode(r,e){return r.container=(0,b.Z)(r.container.children().first()),this.callBase(r,e)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>lS,_itemSelectHandler(r){"single"===this.option("selectionMode")&&this.isItemSelected(r.currentTarget)||this.callBase(r)}}),uS=Dr.default.inherit({_getDefaultOptions(){return(0,B.l)(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass(td),this._renderStylingMode(),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_renderStylingMode(){var r,{stylingMode:e}=this.option();for(var t in dh)this.$element().removeClass(dh[t]);this.$element().addClass(null!==(r=dh[e])&&void 0!==r?r:dh.contained)},_fireSelectionChangeEvent(r,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:r,removedItems:e})},_renderButtons(){var r=(0,b.Z)("<div>").addClass(SH).appendTo(this.$element()),e=this.option("selectedItems"),t={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:i=>{var a=this.option("width");(0,C.$K)(a)&&(0,b.Z)(i.itemElement).addClass(dS)},onSelectionChanged:i=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(i.addedItems,i.removedItems)},onItemClick:i=>{this._itemClickAction(i)}};(0,C.$K)(e)&&e.length&&(t.selectedItems=e),this._buttonsCollection=this._createComponent(r,TH,t)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(r){switch(r.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(r.name,r.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(r),this._buttonsCollection.itemElements().toggleClass(dS,!!r.value);break;default:this.callBase(r)}}});(0,Rt.Z)("dxButtonGroup",uS);const DH=uS;var hS="dx-dropdownbutton",cS="dx-dropdownbutton-action",pS="dx-dropdownbutton-toggle",BH=Dr.default.inherit({_getDefaultOptions(){return(0,B.l)(this.callBase(),{itemTemplate:"item",keyExpr:"this",displayExpr:void 0,selectedItem:null,selectedItemKey:null,stylingMode:"outlined",deferRendering:!0,noDataText:ae.Z.format("dxCollectionWidget-noDataText"),useSelectMode:!1,splitButton:!1,showArrowIcon:!0,text:"",type:"normal",icon:void 0,onButtonClick:null,onSelectionChanged:null,onItemClick:null,opened:!1,items:null,dataSource:null,focusStateEnabled:!0,hoverStateEnabled:!0,dropDownOptions:{},dropDownContentTemplate:"content",wrapItemText:!1,useItemTextAsTitle:!0,grouped:!1,groupTemplate:"group",buttonGroupOptions:{}})},_setOptionsByReference(){this.callBase(),(0,B.l)(this._optionsByReference,{selectedItem:!0})},_init(){this.callBase(),this._createItemClickAction(),this._createActionClickAction(),this._createSelectionChangedAction(),this._initDataSource(),this._compileKeyGetter(),this._compileDisplayGetter(),this._itemsToDataSource(this.option("items")),this._options.cache("buttonGroupOptions",this.option("buttonGroupOptions")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_initTemplates(){this._templateManager.addDefaultTemplates({content:new Cp.k(r=>{var e=(0,b.Z)(r.container),t=(0,b.Z)("<div>").appendTo(e);this._list=this._createComponent(t,Al,this._listOptions()),this._list.registerKeyHandler("escape",this._escHandler.bind(this)),this._list.registerKeyHandler("tab",this._escHandler.bind(this)),this._list.registerKeyHandler("leftArrow",this._escHandler.bind(this)),this._list.registerKeyHandler("rightArrow",this._escHandler.bind(this))})}),this.callBase()},_itemsToDataSource:function(r){this._dataSource||(this._dataSource=new vn.o({store:new qd.Z({key:this._getKey(),data:r}),pageSize:0}))},_getKey:function(){var r,e=this.option("keyExpr"),t=null===(r=this._dataSource)||void 0===r?void 0:r.key();return!(0,C.$K)(t)||(0,C.$K)(e)&&"this"!==e?e:t},_compileKeyGetter(){this._keyGetter=(0,Ot.vb)(this._getKey())},_compileDisplayGetter(){this._displayGetter=(0,Ot.vb)(this.option("displayExpr"))},_initMarkup(){this.callBase(),this.$element().addClass(hS),this._renderButtonGroup(),this._updateArrowClass(),(0,C.$K)(this.option("selectedItemKey"))&&this._loadSelectedItem().done(this._updateActionButton.bind(this))},_renderFocusTarget:le.ZT,_render(){(!this.option("deferRendering")||this.option("opened"))&&this._renderPopup(),this.callBase()},_renderContentImpl(){return this._popup&&this._renderPopupContent(),this.callBase()},_loadSelectedItem(){var r;null===(r=this._loadSingleDeferred)||void 0===r||r.reject();var e=new X.BH;if(this._list&&void 0!==this._lastSelectedItemData){var t=this.option("useSelectMode")?this._list.option("selectedItem"):this._lastSelectedItemData;return e.resolve(t)}this._lastSelectedItemData=void 0;var i=this.option("selectedItemKey");return this._loadSingle(this._getKey(),i).done(e.resolve).fail(()=>{e.resolve(null)}),this._loadSingleDeferred=e,e.promise()},_createActionClickAction(){this._actionClickAction=this._createActionByOption("onButtonClick")},_createSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged")},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_fireSelectionChangedAction(r){var{previousValue:e,value:t}=r;this._selectionChangedAction({item:t,previousItem:e})},_fireItemClickAction(r){var{event:e,itemElement:t,itemData:i}=r;return this._itemClickAction({event:e,itemElement:t,itemData:this._actionItem||i})},_actionButtonConfig(){var{icon:r,text:e,type:t}=this.option();return{text:e,icon:r,type:t,elementAttr:{class:cS}}},_getButtonGroupItems(){var{splitButton:r,type:e}=this.option(),t=[];return t.push(this._actionButtonConfig()),r&&t.push({icon:"spindown",type:e,elementAttr:{class:pS}}),t},_buttonGroupItemClick(r){var{event:e,itemData:t}=r,i=t.elementAttr.class===cS;t.elementAttr.class===pS?this.toggle():i&&(this._actionClickAction({event:e,selectedItem:this.option("selectedItem")}),this.option("splitButton")||this.toggle())},_buttonGroupOptions(){var{splitButton:r,showArrowIcon:e,focusStateEnabled:t,hoverStateEnabled:i,stylingMode:a,accessKey:n,tabIndex:s}=this.option(),o=r||!e?"content":(l,d)=>{var{text:u,icon:c}=l,f=(0,Za.H)(c),p=u?(0,b.Z)("<span>").text(u).addClass("dx-button-text"):void 0,_=(0,Za.H)("spindown").addClass("dx-icon-right");(0,b.Z)(d).append(f,p,_)};return(0,B.l)({items:this._getButtonGroupItems(),onItemClick:this._buttonGroupItemClick.bind(this),width:"100%",height:"100%",selectionMode:"none",onKeyboardHandled:l=>this._keyboardHandler(l),buttonTemplate:o,focusStateEnabled:t,hoverStateEnabled:i,stylingMode:a,accessKey:n,tabIndex:s},this._options.cache("buttonGroupOptions"))},_renderPopupContent(){var r=this._popup.$content(),e=this._getTemplateByOption("dropDownContentTemplate");return r.empty(),this._popupContentId="dx-"+new Pi.Z,this.setAria("id",this._popupContentId,r),e.render({container:(0,lt.u)(r),model:this.option("items")||this._dataSource})},_popupOptions(){var r=this.option("rtlEnabled")?"right":"left";return(0,B.l)({dragEnabled:!1,focusStateEnabled:!1,deferRendering:this.option("deferRendering"),hideOnOutsideClick:e=>{var t=this.$element();return!(0,b.Z)(e.target).closest(".".concat(hS)).is(t)},showTitle:!1,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},_ignoreFunctionValueDeprecation:!0,width:()=>vu(this.$element()),height:"auto",shading:!1,position:{of:this.$element(),collision:"flipfit",my:r+" top",at:r+" bottom"},_wrapperClassExternal:"dx-dropdowneditor-overlay"},this._options.cache("dropDownOptions"),{visible:this.option("opened")})},_listOptions(){var r=this.option("selectedItemKey"),e=this.option("useSelectMode");return{selectionMode:e?"single":"none",wrapItemText:this.option("wrapItemText"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:()=>this._fireContentReadyAction(),selectedItemKeys:(0,C.$K)(r)&&e?[r]:[],grouped:this.option("grouped"),groupTemplate:this.option("groupTemplate"),keyExpr:this._getKey(),noDataText:this.option("noDataText"),displayExpr:this.option("displayExpr"),itemTemplate:this.option("itemTemplate"),items:this.option("items"),dataSource:this._dataSource,onItemClick:t=>{this.option("useSelectMode")||(this._lastSelectedItemData=t.itemData),this.option("selectedItemKey",this._keyGetter(t.itemData)),!1!==this._fireItemClickAction(t)&&(this.toggle(!1),this._buttonGroup.focus())}}},_upDownKeyHandler(){return this._popup&&this._popup.option("visible")&&this._list?this._list.focus():this.open(),!0},_escHandler(){return this.close(),this._buttonGroup.focus(),!0},_tabHandler(){return this.close(),!0},_renderPopup(){var r=(0,b.Z)("<div>");this.$element().append(r),this._popup=this._createComponent(r,rs.Z,this._popupOptions()),this._popup.$content().addClass("dx-dropdownbutton-content"),this._popup.$wrapper().addClass("dx-dropdownbutton-popup-wrapper"),this._popup.on("hiding",this._popupHidingHandler.bind(this)),this._popup.on("showing",this._popupShowingHandler.bind(this)),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_popupHidingHandler(){this.option("opened",!1),this._updateAriaAttributes(!1)},_popupOptionChanged:function(r){var e=Dr.default.getOptionsFromContainer(r);this._setPopupOption(e);var t=Object.keys(e);(-1!==t.indexOf("width")||-1!==t.indexOf("height"))&&this._dimensionChanged()},_dimensionChanged:function(){void 0===wp(this.option("dropDownOptions.width"))&&this._setPopupOption("width",()=>vu(this.$element()))},_setPopupOption:function(r,e){this._setWidgetOption("_popup",arguments)},_popupShowingHandler(){this.option("opened",!0),this._updateAriaAttributes(!0)},_setElementAria(r){this.setAria({owns:r?this._popupContentId:void 0},this.$element())},_setButtonsAria(r){var e={expanded:r,haspopup:"listbox"},t={};this.option("text")||(t.label="dropdownbutton"),this._getButtons().each((i,a)=>{this.setAria(0===i?(0,ye.Z)({},t,e):e,(0,b.Z)(a))})},_updateAriaAttributes(r){this._setElementAria(r),this._setButtonsAria(r)},_getButtons(){return this._buttonGroup.$element().find(".".concat("dx-button"))},_renderButtonGroup(){var r=this._buttonGroup&&this._buttonGroup.$element()||(0,b.Z)("<div>");this._buttonGroup||this.$element().append(r),this._buttonGroup=this._createComponent(r,DH,this._buttonGroupOptions()),this._buttonGroup.registerKeyHandler("downArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("tab",this._tabHandler.bind(this)),this._buttonGroup.registerKeyHandler("upArrow",this._upDownKeyHandler.bind(this)),this._buttonGroup.registerKeyHandler("escape",this._escHandler.bind(this)),this._bindInnerWidgetOptions(this._buttonGroup,"buttonGroupOptions"),this._updateAriaAttributes(this.option("opened"))},_updateArrowClass(){var r=this.option("splitButton")||this.option("showArrowIcon");this.$element().toggleClass("dx-dropdownbutton-has-arrow",r)},toggle(r){return this._popup||(this._renderPopup(),this._renderContent()),this._popup.toggle(r)},open(){return this.toggle(!0)},close(){return this.toggle(!1)},_setListOption(r,e){this._list&&this._list.option(r,e)},_getDisplayValue(r){var t=(0,C.PO)(r)?this._displayGetter(r):r;return(0,C.PO)(t)?"":String((0,le.IS)(t,""))},_updateActionButton(r){this.option("useSelectMode")&&this.option({text:this._getDisplayValue(r),icon:(0,C.PO)(r)?r.icon:void 0}),this._setOptionWithoutOptionChange("selectedItem",r),this._setOptionWithoutOptionChange("selectedItemKey",this._keyGetter(r))},_clean(){this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove()},_selectedItemKeyChanged(r){this._setListOption("selectedItemKeys",this.option("useSelectMode")&&(0,C.$K)(r)?[r]:[]);var e=this.option("selectedItem");this._loadSelectedItem().done(t=>{this._updateActionButton(t),this._displayGetter(e)!==this._displayGetter(t)&&this._fireSelectionChangedAction({previousValue:e,value:t})})},_updateButtonGroup(r,e){this._buttonGroup.option(r,e),this._updateAriaAttributes(this.option("opened"))},_actionButtonOptionChanged(r){var{name:e,value:t}=r,i={};i[e]=t,this._updateButtonGroup("items[0]",(0,B.l)({},this._actionButtonConfig(),i)),this._popup&&this._popup.repaint()},_selectModeChanged(r){if(r){this._setListOption("selectionMode","single");var e=this.option("selectedItemKey");this._setListOption("selectedItemKeys",(0,C.$K)(e)?[e]:[]),this._selectedItemKeyChanged(this.option("selectedItemKey"))}else this._setListOption("selectionMode","none"),this.option({selectedItemKey:void 0,selectedItem:void 0}),this._actionButtonOptionChanged({text:this.option("text")})},_updateItemCollection(r){var e=this.option("selectedItemKey");this._setListOption("selectedItem",null),this._setWidgetOption("_list",[r]),(0,C.$K)(e)&&this._loadSelectedItem().done(t=>{this._setListOption("selectedItemKeys",[e]),this._setListOption("selectedItem",t)}).fail(t=>{this._setListOption("selectedItemKeys",[])}).always(this._updateActionButton.bind(this))},_updateDataSource:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._dataSource.items();this._dataSource=void 0,this._itemsToDataSource(r),this._updateKeyExpr()},_updateKeyExpr:function(){this._compileKeyGetter(),this._setListOption("keyExpr",this._getKey())},focus:function(){this._buttonGroup.focus()},_optionChanged(r){var e,{name:t,value:i}=r;switch(t){case"useSelectMode":this._selectModeChanged(i);break;case"splitButton":this._updateArrowClass(),this._renderButtonGroup();break;case"displayExpr":this._compileDisplayGetter(),this._setListOption(t,i),this._updateActionButton(this.option("selectedItem"));break;case"keyExpr":this._updateDataSource();break;case"buttonGroupOptions":this._innerWidgetOptionChanged(this._buttonGroup,r);break;case"dropDownOptions":if("dropDownOptions.visible"===r.fullName)break;void 0!==r.value.visible&&delete r.value.visible,this._popupOptionChanged(r),this._innerWidgetOptionChanged(this._popup,r);break;case"opened":this.toggle(i);break;case"focusStateEnabled":case"hoverStateEnabled":this._setListOption(t,i),this._updateButtonGroup(t,i),this.callBase(r);break;case"items":this._updateDataSource(this.option("items")),this._updateItemCollection(t);break;case"dataSource":Array.isArray(i)?this._updateDataSource(this.option("dataSource")):(this._initDataSource(),this._updateKeyExpr()),this._updateItemCollection(t);break;case"icon":case"text":this._actionButtonOptionChanged(r);break;case"showArrowIcon":this._updateArrowClass(),this._renderButtonGroup(),this._popup&&this._popup.repaint();break;case"width":case"height":this.callBase(r),null===(e=this._popup)||void 0===e||e.repaint();break;case"stylingMode":case"tabIndex":this._updateButtonGroup(t,i);break;case"type":this._updateButtonGroup("items",this._getButtonGroupItems());break;case"itemTemplate":case"grouped":case"noDataText":case"groupTemplate":case"wrapItemText":case"useItemTextAsTitle":this._setListOption(t,i);break;case"dropDownContentTemplate":this._renderContent();break;case"selectedItemKey":this._selectedItemKeyChanged(i);break;case"selectedItem":break;case"onItemClick":this._createItemClickAction();break;case"onButtonClick":this._createActionClickAction();break;case"onSelectionChanged":this._createSelectionChangedAction();break;case"deferRendering":this.toggle(this.option("opened"));break;default:this.callBase(r)}}}).include(JC.Z);(0,Rt.Z)("dxDropDownButton",BH);var fS="dx-datagrid-export-button";class KH{constructor(e,t,i){this._exportController=e,this._initialColumnWidthsByColumnIndex=t,this._selectedRowsOnly=i}_getGroupValue(e){var{key:t,data:i,rowType:a,groupIndex:n,summaryCells:s}=e,o=this._options.groupColumns[n],l=He.getDisplayValue(o,o.deserializeValue?o.deserializeValue(t[n]):t[n],i,a),d="".concat(o.caption,": ").concat(He.formatValue(l,o));return s&&s[0]&&s[0].length&&(d+=" ".concat(He.getGroupRowSummaryText(s[0],this._options.summaryTexts))),d}_correctCellIndex(e){return e}_initOptions(){var e=this._exportController,t=e._columnsController.getGroupColumns();this._options={columns:e._getColumns(this._initialColumnWidthsByColumnIndex),groupColumns:t,items:this._selectedRowsOnly||e._selectionOnly?e._getSelectedItems():e._getAllItems(),isHeadersVisible:e.option("showColumnHeaders"),summaryTexts:e.option("summary.texts"),rtlEnabled:e.option("rtlEnabled")}}getHeaderStyles(){return[{bold:!0,alignment:"center"},{bold:!0,alignment:"left"},{bold:!0,alignment:"right"}]}getGroupRowStyle(){return{bold:!0,alignment:(0,li.q)(this._options.rtlEnabled)}}getColumnStyles(){var e=[];return this.getColumns().forEach(t=>{e.push({alignment:t.alignment||"left",format:t.format,dataType:t.dataType})}),e}getStyles(){return[...this.getHeaderStyles(),...this.getColumnStyles(),this.getGroupRowStyle()]}_getTotalCellStyleId(e){var t,i=(null===(t=this.getColumns()[e])||void 0===t?void 0:t.alignment)||"right";return this.getHeaderStyles().map(a=>a.alignment).indexOf(i)}getStyleId(e,t){return e<this.getHeaderRowCount()?0:this.isTotalCell(e-this.getHeaderRowCount(),t)?this._getTotalCellStyleId(t):this.isGroupRow(e-this.getHeaderRowCount())?this.getHeaderStyles().length+this.getColumns().length:t+this.getHeaderStyles().length}getColumns(e){var{columns:t}=this._options;return e?t:t[t.length-1]}getColumnsWidths(){var e=this.getColumns();return(0,C.$K)(e)?e.map(t=>t.width):void 0}getRowsCount(){return this._options.items.length+this.getHeaderRowCount()}getHeaderRowCount(){return this.isHeadersVisible()?this._options.columns.length-1:0}isGroupRow(e){return e<this._options.items.length&&"group"===this._options.items[e].rowType}getGroupLevel(e){var t=this._options.items[e-this.getHeaderRowCount()],i=t&&t.groupIndex;return t&&"totalFooter"===t.rowType?0:(0,C.$K)(i)?i:this._options.groupColumns.length}getCellType(e,t){var i=this.getColumns();if(e<this.getHeaderRowCount())return"string";if(e-=this.getHeaderRowCount(),t<i.length){var a=this._options.items.length&&this._options.items[e],n=i[t];return a&&"data"===a.rowType&&isFinite(a.values[this._correctCellIndex(t)])&&!(0,C.$K)(n.customizeText)?(0,C.$K)(n.lookup)?n.lookup.dataType:n.dataType:"string"}}ready(){this._initOptions();var e=this._options;return(0,X.gx)(e.items).done(t=>{e.items=t}).fail(()=>{e.items=[]})}_convertFromGridGroupSummaryItems(e){if((0,C.$K)(e)&&e.length>0)return e.map(t=>({value:t.value,name:t.name}))}getCellData(e,t,i){var a,n,s={cellSourceData:{},value:a},o=this.getColumns(),l=this._correctCellIndex(t);if(e<this.getHeaderRowCount())n=this.getColumns(!0)[e][t],s.cellSourceData.rowType="header",s.cellSourceData.column=n&&n.gridColumn,s.value=n&&n.caption;else{e-=this.getHeaderRowCount();var u=this._options.items.length&&this._options.items[e];if(u){var c=u.values;switch(s.cellSourceData.rowType=u.rowType,s.cellSourceData.column=o[t]&&o[t].gridColumn,u.rowType){case"groupFooter":case"totalFooter":l<c.length&&((0,C.$K)(a=c[l])?(s.cellSourceData.value=a.value,s.cellSourceData.totalSummaryItemName=a.name,s.value=He.getSummaryText(a,this._options.summaryTexts)):s.cellSourceData.value=void 0);break;case"group":if(s.cellSourceData.groupIndex=u.groupIndex,t<1)s.cellSourceData.column=this._options.groupColumns[u.groupIndex],s.cellSourceData.value=u.key[u.groupIndex],s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(u.summaryCells[0]),s.value=this._getGroupValue(u);else{var f=u.values[l];if(Array.isArray(f)){s.cellSourceData.groupSummaryItems=this._convertFromGridGroupSummaryItems(f),a="";for(var p=0;p<f.length;p++)a+=(p>0?i?"\n":" \n ":"")+He.getSummaryText(f[p],this._options.summaryTexts);s.value=a}else s.cellSourceData.value=void 0}break;default:if(n=o[t]){var _=c[l],w=He.getDisplayValue(n,_,u.data,u.rowType);s.value=!isFinite(w)||(0,C.$K)(n.customizeText)?i&&(0,C.$K)(n.customizeText)&&n.customizeText===this._exportController._columnsController.getCustomizeTextByDataType("boolean")?w:He.formatValue(w,n):w,s.cellSourceData.value=_}s.cellSourceData.data=u.data}}}return s}isHeadersVisible(){return this._options.isHeadersVisible}isTotalCell(e,t){var{items:i}=this._options,a=i[e],n=this._correctCellIndex(t);return a&&"groupFooter"===a.rowType||"totalFooter"===a.rowType||a.summaryCells&&a.summaryCells[n]&&a.summaryCells[n].length>0&&a.summaryCells[n][0].alignByColumn}getCellMerging(e,t){var{columns:i}=this._options,a=i[e]&&i[e][t];return a?{colspan:(a.exportColspan||1)-1,rowspan:(a.rowspan||1)-1}:{colspan:0,rowspan:0}}getFrozenArea(){return{x:0,y:this.getHeaderRowCount()}}}He.registerModule("export",{defaultOptions:()=>({export:{enabled:!1,fileName:"DataGrid",formats:["xlsx"],allowExportSelectedData:!1,texts:{exportTo:ae.Z.format("dxDataGrid-exportTo"),exportAll:ae.Z.format("dxDataGrid-exportAll"),exportSelectedRows:ae.Z.format("dxDataGrid-exportSelectedRows")}}}),controllers:{export:class $H extends He.ViewController{_getEmptyCell(){return{caption:"",colspan:1,rowspan:1}}_updateColumnWidth(e,t){e.width=t}_getColumns(e){var i,a,t=[],n=this._columnsController,s=n.getRowCount();for(i=0;i<=s;i++){var o=[];a=n.getVisibleColumns(i,!0);var l=void 0;if(i===s)if(this._updateLockCount)l=e;else{var d=this._getColumnWidths(this._headersView,this._rowsView);if(d&&d.length){l={};for(var u=0;u<a.length;u++)l[a[u].index]=d[u]}}for(var c=0;c<a.length;c++){var f=(0,B.l)({},a[c],{dataType:"datetime"===a[c].dataType?"date":a[c].dataType,gridColumn:a[c]});if(this._needColumnExporting(f)){var p=this._calculateExportColspan(f);(0,C.$K)(p)&&(f.exportColspan=p),l&&this._updateColumnWidth(f,l[f.index]),o.push(f)}}t.push(o)}return a=t[s],t=function kH(r,e){for(var t=u=>u||1,i=[],a=(r[0]||[]).reduce((u,c)=>u+t(c.colspan),0),n=(u=>{var c=0,f=0;return()=>{var p=u[c]||[],_=p[f++];return f>=p.length&&(c++,f=0),_&&(_.colspan=t(_.colspan),_.rowspan=t(_.rowspan)),_}})(r),s=(u,c,f)=>{if((i[u]=i[u]||[])[c]=f,f.colspan>1||f.rowspan>1){for(var _=(0,B.l)({},f,e),w=1;w<f.colspan;w++)s(u,c+w,_);for(var S=1;S<f.rowspan;S++)for(var x=0;x<f.colspan;x++)s(u+S,c+x,_)}},o=n(),l=0;o;){for(var d=0;d<a&&o;d++)i[l]&&i[l][d]||(s(l,d,o),d+=o.colspan-1,o=n());l++}return i}(t.slice(0,-1),this._getEmptyCell()),t.push(a),t}_calculateExportColspan(e){if(e.isBand){var t=this._columnsController.getChildrenByBandColumn(e.index,!0);if((0,C.$K)(t))return t.reduce((i,a)=>this._needColumnExporting(a)?i+(this._calculateExportColspan(a)||1):i,0)}}_needColumnExporting(e){return!e.command&&(e.allowExporting||void 0===e.allowExporting)}_getFooterSummaryItems(e,t){var i=[],a=1,n=0;do{for(var s=[],o=0;o<e.length;o++){var l=e[o],d=l.length;a<d&&(a=d),s.push(l[n])}i.push({values:s,rowType:t?"totalFooter":"groupFooter"})}while(n++<a-1);return i}_hasSummaryGroupFooters(){var e=this.option("summary.groupItems");if((0,C.$K)(e))for(var t=0;t<e.length;t++)if(e[t].showInGroupFooter)return!0;return!1}_getItemsWithSummaryGroupFooters(e){for(var t=[],i=[],a=[],n=0;n<e.length;n++){var s=e[n];"groupFooter"===s.rowType?(a=this._getFooterSummaryItems(s.summaryCells),t=t.concat(i,a),i=[]):i.push(s)}return t.length?t:i}_updateGroupValuesWithSummaryByColumn(e){for(var t=[],i=0;i<e.length;i++){var a=e[i],{summaryCells:n}=a;if("group"===a.rowType&&n&&n.length>1){for(var s=a.values.length,o=1;o<n.length;o++)for(var l=0;l<n[o].length;l++){var d=n[o][l];d&&d.alignByColumn&&(Array.isArray(t[o-s])||(t[o-s]=[]),t[o-s].push(d))}t.length>0&&(a.values.push(...t),t=[])}}}_processUnExportedItems(e){for(var a,n,t=this._columnsController.getVisibleColumns(null,!0),i=this._columnsController.getGroupColumns(),s=0;s<e.length;s++){var o=e[s],l=!1;a=[],n=[];for(var d=0;d<t.length;d++){var u=t[d];if(l||(l=["detailExpand","buttons"].includes(u.type)),this._needColumnExporting(u)&&(o.values&&a.push("group"!==o.rowType||a.length?o.values[d]:o.key[o.groupIndex]),o.summaryCells))if("group"!==o.rowType||n.length)n.push(o.summaryCells[d]);else{var c=d-i.length+o.groupIndex;n.push(o.summaryCells[l?c:c+1])}}a.length&&(o.values=a),n.length&&(o.summaryCells=n)}}_getAllItems(e){var d,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this,a=new X.BH,n=this.getController("data"),s=n.footerItems(),o=s.length&&s[0],l=i.option("summary.totalItems");return(0,X.gx)(e).done(u=>{n.loadAll(u,t).done((c,f)=>{i._updateGroupValuesWithSummaryByColumn(c),i._hasSummaryGroupFooters()&&(c=i._getItemsWithSummaryGroupFooters(c)),d=o&&o.summaryCells,(0,C.$K)(f)&&l&&(d=i._getSummaryCells(l,f));var p=o&&i._getFooterSummaryItems(d,!0);p&&(c=c.concat(p)),i._processUnExportedItems(c),a.resolve(c)}).fail(a.reject)}).fail(a.reject),a}_getSummaryCells(e,t){var i=this.getController("data");return i._calculateSummaryCells(e,t,i._columnsController.getVisibleColumns(null,!0),(n,s)=>i._isDataColumn(s)?s.index:-1)}_getSelectedItems(){var e=this.getController("selection");return this.needLoadItemsOnExportingSelectedItems()?this._getAllItems(e.loadSelectedItemsWithFilter(),!0):this._getAllItems(e.getSelectedRowsData())}_getColumnWidths(e,t){return e&&e.isVisible()?e.getColumnWidths():t.getColumnWidths()}throwWarningIfNoOnExportingEvent(){var e,t,i=null===(t=(e=this.component).hasActionSubscription)||void 0===t?void 0:t.call(e,"onExporting");this.option("export.enabled")&&!i&&At.Z.log("W1024")}init(){this.throwWarningIfNoOnExportingEvent(),this._columnsController=this.getController("columns"),this._rowsView=this.getView("rowsView"),this._headersView=this.getView("columnHeadersView"),this.createAction("onExporting",{excludeValidators:["disabled","readOnly"]})}callbackNames(){return["selectionOnlyChanged"]}getDataProvider(e){var i,t=this._getColumnWidths(this._headersView,this._rowsView);if(t&&t.length){i={};for(var a=this._columnsController.getVisibleColumns(this._columnsController.getRowCount(),!0),n=0;n<a.length;n++)i[a[n].index]=t[n]}return new KH(this,i,e)}exportTo(e,t){this._selectionOnly=e;var i=this.getAction("onExporting"),a={rtlEnabled:this.option("rtlEnabled"),selectedRowsOnly:!!e,format:t,fileName:"DataGrid",cancel:!1};(0,C.mf)(i)&&i(a)}publicMethods(){return["getDataProvider"]}selectionOnly(e){if(!(0,C.$K)(e))return this._isSelectedRows;this._isSelectedRows=e,this.selectionOnlyChanged.fire()}optionChanged(e){super.optionChanged(e),"export"===e.name&&this.throwWarningIfNoOnExportingEvent()}needLoadItemsOnExportingSelectedItems(){var e;return null!==(e=this.option("loadItemsOnExportingSelectedItems"))&&void 0!==e?e:this.getController("data")._dataSource.remoteOperations().filtering}}},extenders:{controllers:{editing:r=>class extends r{callbackNames(){var e=super.callbackNames();return(0,C.$K)(e)?e.push("editingButtonsUpdated"):["editingButtonsUpdated"]}_updateEditButtons(){super._updateEditButtons(),this.editingButtonsUpdated.fire()}}},views:{headerPanel:r=>class extends r{_getToolbarItems(){var e=super._getToolbarItems(),t=this._getExportToolbarButton();return t&&(e.push(t),this._correctItemsPosition(e)),e}_getExportToolbarButton(){var e=this._getExportToolbarItems();if(0===e.length)return null;var t=this._needDisableExportButton(),i={name:"exportButton",location:"after",locateInMenu:"auto",sortIndex:30,options:{items:e},disabled:t};if(1===e.length){var a=(0,ye.Z)((0,ye.Z)({},e[0]),{hint:e[0].text,elementAttr:{class:fS}});i.widget="dxButton",i.showText="inMenu",i.options=a}else{var n={icon:"export",displayExpr:"text",items:e,hint:this.option("export.texts.exportTo"),elementAttr:{class:fS},dropDownOptions:{width:"auto",_wrapperClassExternal:"dx-datagrid-export-menu"}};i.options=n,i.widget="dxDropDownButton",i.menuItemTemplate=(s,o,l)=>{this._createComponent((0,b.Z)(l),Al,{items:e})}}return i}_getExportToolbarItems(){var e,t=this.option("export"),i=this.option("export.texts"),a=null!==(e=this.option("export.formats"))&&void 0!==e?e:[];if(!t.enabled)return[];var n=[];return a.forEach(s=>{var o=s.toUpperCase(),l="export";"xlsx"===s&&(o="Excel",l="xlsxfile"),"pdf"===s&&(l="pdffile"),n.push({text:(0,ca.WU)(i.exportAll,o),icon:l,onClick:()=>{this._exportController.exportTo(!1,s)}}),t.allowExportSelectedData&&n.push({text:(0,ca.WU)(i.exportSelectedRows,o),icon:"exportselected",onClick:()=>{this._exportController.exportTo(!0,s)}})}),n}_correctItemsPosition(e){e.sort((t,i)=>t.sortIndex-i.sortIndex)}_isExportButtonVisible(){return this.option("export.enabled")}optionChanged(e){super.optionChanged(e),"export"===e.name&&(e.handled=!0,this._invalidate())}_needDisableExportButton(){var e=!this._columnsController.hasVisibleDataColumns(),t=this._editingController.hasChanges();return e||t}_columnOptionChanged(e){if(super._columnOptionChanged(e),He.checkChanges(e.optionNames,["groupIndex","visible","all"])){var i=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",i)}}init(){super.init(),this._exportController=this.getController("export"),this._editingController=this.getController("editing"),this._editingController.editingButtonsUpdated.add(()=>{var e=this._needDisableExportButton();this.setToolbarItemDisabled("exportButton",e)})}isVisible(){return super.isVisible()||this._isExportButtonVisible()}}}}});var id="dx-row-focused",YH=".dx-row.".concat(id),gS="dx-cell-focus-disabled",uh={defaultOptions:()=>({focusedRowEnabled:!1,autoNavigateToFocusedRow:!0,focusedRowKey:null,focusedRowIndex:-1,focusedColumnIndex:-1}),controllers:{focus:class JH extends Vt.ViewController{get _keyboardController(){return this.getController("keyboardNavigation")}get _dataController(){return this.getController("data")}init(){this.component._optionsByReference.focusedRowKey=!0}optionChanged(e){var{name:t,value:i,previousValue:a}=e;switch(t){case"focusedRowIndex":this._focusRowByIndex(i),this._keyboardController._fireFocusedRowChanged(),e.handled=!0;break;case"focusedRowKey":if(Array.isArray(i)&&JSON.stringify(i)===JSON.stringify(a))return;this._focusRowByKey(i),this._keyboardController._fireFocusedRowChanged(),e.handled=!0;break;case"focusedColumnIndex":case"focusedRowEnabled":case"autoNavigateToFocusedRow":e.handled=!0;break;default:super.optionChanged(e)}}publicMethods(){return["navigateToRow","isRowFocused"]}isAutoNavigateToFocusedRow(){return"infinite"!==this.option("scrolling.mode")&&this.option("autoNavigateToFocusedRow")}_focusRowByIndex(e,t){this.option("focusedRowEnabled")&&((e=void 0!==e?e:this.option("focusedRowIndex"))<0?this.isAutoNavigateToFocusedRow()&&this._resetFocusedRow():this._focusRowByIndexCore(e,t))}_focusRowByIndexCore(e,t){var i=this._dataController.pageSize(),a=()=>{if(this._isValidFocusedRowIndex(e)){var s=e-this._dataController.getRowIndexOffset(!0);if(!t||t.paging&&!t.filtering){var o=this._dataController._getLastItemIndex();s=Math.min(s,o)}var l=this._dataController.getKeyByRowIndex(s,!0);(0,C.$K)(l)&&!this.isRowFocused(l)&&this.option("focusedRowKey",l)}};if(i>=0)if(this._isLocalRowIndex(e))a();else{var n=Math.floor(e/this._dataController.pageSize());(0,X.gx)(this._dataController.pageIndex(n),this._dataController.waitReady()).done(()=>{a()})}}_isLocalRowIndex(e){if(this._keyboardController._isVirtualScrolling()){var i=Math.floor(e/this._dataController.pageSize()),a=this._dataController.virtualItemsCount(),n=a?a.begin:-1,s=this._dataController.getVisibleRows().length+this._dataController.getRowIndexOffset(),o=Math.ceil(s/this._dataController.pageSize());return n<=e&&o>i}return!0}_setFocusedRowKeyByIndex(e){if(this._isValidFocusedRowIndex(e)){var t=Math.min(e-this._dataController.getRowIndexOffset(),this._dataController.items().length-1),i=this._dataController.getKeyByRowIndex(t);(0,C.$K)(i)&&!this.isRowFocused(i)&&this.option("focusedRowKey",i)}}_focusRowByKey(e){(0,C.$K)(e)?this._navigateToRow(e,!0):this._resetFocusedRow()}_resetFocusedRow(){var e=this.option("focusedRowKey"),t=(0,C.$K)(e);!t&&this.option("focusedRowIndex")<0||(t&&this.option("focusedRowKey",null),this._keyboardController.setFocusedRowIndex(-1),this.option("focusedRowIndex",-1),this._dataController.updateItems({changeType:"updateFocusedRow",focusedRowKey:null}),this._keyboardController._fireFocusedRowChanged())}_isValidFocusedRowIndex(e){var t=this._dataController.getVisibleRows()[e];return!t||"data"===t.rowType||"group"===t.rowType}navigateToRow(e){return this.isAutoNavigateToFocusedRow()||this.option("focusedRowIndex",-1),this._navigateToRow(e)}_navigateToRow(e,t){var i=this,a=i.isAutoNavigateToFocusedRow(),n=new X.BH;if(void 0===e||!this._dataController.dataSource())return n.reject().promise();var s=i.getFocusedRowIndexByKey(e);return!a&&t||s>=0?i._navigateTo(e,n,t):this._dataController.getPageIndexByKey(e).done(o=>{o<0?n.resolve(-1):o===this._dataController.pageIndex()?this._dataController.reload().done(()=>{i.isRowFocused(e)&&this._dataController.getRowIndexByKey(e)>=0?n.resolve(i.getFocusedRowIndexByKey(e)):i._navigateTo(e,n,t)}).fail(n.reject):this._dataController.pageIndex(o).done(()=>{i._navigateTo(e,n,t)}).fail(n.reject)}).fail(n.reject),n.promise()}_navigateTo(e,t,i){var a=this._dataController.getRowIndexByKey(e),n=Ae.isVirtualRowRendering(this);this.isAutoNavigateToFocusedRow()&&n&&a<0?this._navigateToVirtualRow(e,t,i):this._navigateToVisibleRow(e,t,i)}_navigateToVisibleRow(e,t,i){if(i)this._triggerUpdateFocusedRow(e,t);else{var a=this.getFocusedRowIndexByKey(e);this.getView("rowsView").scrollToRowElement(e,t).done(()=>{t.resolve(a)})}}_navigateToVirtualRow(e,t,i){var a=this._dataController._rowsScrollController,n=Ae.getIndexByKey(e,this._dataController.items(!0)),s=this.getView("rowsView").getScrollable();if(a&&s&&n>=0){var o=n+this._dataController.getRowIndexOffset(!0),l=a.getItemOffset(o),d=()=>{this._dataController.totalCount()&&!this._dataController.items().length||(this.component.off("contentReady",d),i?this._triggerUpdateFocusedRow(e,t):t.resolve(o))};this.component.on("contentReady",d),this.getView("rowsView").scrollTopPosition(l)}else t.resolve(-1)}_triggerUpdateFocusedRow(e,t){var a,i=this.getFocusedRowIndexByKey(e);this._isValidFocusedRowIndex(i)?(this.option("focusedRowEnabled")?this._dataController.updateItems({changeType:"updateFocusedRow",focusedRowKey:e}):a=this.getView("rowsView").scrollToRowElement(e),(0,X.gx)(a).done(()=>{this._keyboardController.setFocusedRowIndex(i),t&&t.resolve(i)})):t&&t.resolve(-1)}getFocusedRowIndexByKey(e){var t=this._dataController.getRowIndexByKey(e,!0);return t>=0?t+this._dataController.getRowIndexOffset(!0):-1}_focusRowByKeyOrIndex(){var e=this.option("focusedRowKey"),t=this.option("focusedRowIndex");if((0,C.$K)(e)){var i=this._dataController.getRowIndexByKey(e);i>=0?(this._keyboardController._isVirtualScrolling()&&(t=i+this._dataController.getRowIndexOffset()),this._keyboardController.setFocusedRowIndex(t),this._triggerUpdateFocusedRow(e)):this._navigateToRow(e,!0).done(a=>{t>=0&&a<0?this._focusRowByIndex():t<0&&a>=0&&this._keyboardController.setFocusedRowIndex(a)})}else t>=0&&this._focusRowByIndex(t)}isRowFocused(e){var t=this.option("focusedRowKey");if((0,C.$K)(t))return(0,le.bY)(e,this.option("focusedRowKey"))}updateFocusedRow(e){var s,o,{focusedRowKey:t}=e,i=this,a=i._dataController.getRowIndexByKey(t),n=i.getView("rowsView");(0,Y.S6)(n.getTableElements(),(l,d)=>{var u=0===l;s=(0,b.Z)(d),i._clearPreviousFocusedRow(s,a);var c=i._prepareFocusedRow({changedItem:i._dataController.getVisibleRows()[a],$tableElement:s,focusedRowIndex:a});u&&(o=c)}),o&&n.scrollToElementVertically(o)}_clearPreviousFocusedRow(e,t){var i=e.find(YH).filter((n,s)=>{var o=(0,b.Z)(s).closest(".".concat(this.addWidgetPrefix("table")));return e.is(o)});i.removeClass(id).removeClass(gS).removeAttr("tabindex"),i.children("td").removeAttr("tabindex"),0!==t&&(0,b.Z)(this.getView("rowsView").getRowElement(0)).removeClass(gS).removeAttr("tabIndex")}_prepareFocusedRow(e){var t,{changedItem:i}=e;if(i&&("data"===i.rowType||"group"===i.rowType)){var{focusedRowIndex:a}=e,{$tableElement:n}=e,s=this.option("tabindex")||0,o=this.getView("rowsView");(t=(0,b.Z)(o._getRowElements(n).eq(a))).addClass(id).attr("tabindex",s)}return t}}},extenders:{controllers:{keyboardNavigation:r=>class extends r{init(){var e=this.option("focusedRowIndex"),t=this.option("focusedColumnIndex");this.createAction("onFocusedRowChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedRowChanged",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanging",{excludeValidators:["disabled","readOnly"]}),this.createAction("onFocusedCellChanged",{excludeValidators:["disabled","readOnly"]}),super.init(),this.setRowFocusType(),this._focusedCellPosition={},(0,C.$K)(e)&&e>=0&&(this._focusedCellPosition.rowIndex=e),(0,C.$K)(t)&&t>=0&&(this._focusedCellPosition.columnIndex=t)}setFocusedRowIndex(e){super.setFocusedRowIndex(e),this.option("focusedRowIndex",e)}setFocusedColumnIndex(e){super.setFocusedColumnIndex(e),this.option("focusedColumnIndex",e)}_escapeKeyHandler(e,t){return t||!this.option("focusedRowEnabled")?super._escapeKeyHandler(e,t):!!this.isCellFocusType()&&(this.setRowFocusType(),this._focus(this._getCellElementFromTarget(e.originalEvent.target),!0),!0)}_updateFocusedCellPosition(e,t){var i=super._updateFocusedCellPosition(e,t);return i&&i.columnIndex>=0&&this._fireFocusedCellChanged(e),i}},editorFactory:r=>class extends r{renderFocusOverlay(e,t){var i,n,a=this.option("focusedRowEnabled");a&&null!==(i=this._keyboardNavigationController)&&void 0!==i&&i.isRowFocusType()&&!this._editingController.isEditing()?a&&"row"===this._keyboardNavigationController._getElementType(e)&&!e.hasClass(id)&&(n=this._keyboardNavigationController.getFirstValidCellInRow(e),this._keyboardNavigationController.focus(n)):super.renderFocusOverlay(e,t)}},columns:r=>class extends r{getSortDataSourceParameters(e,t){var i=super.getSortDataSourceParameters.apply(this,arguments),a=this._dataController._dataSource,n=this._dataController.store(),s=n&&n.key(),o=a&&a.remoteOperations()||{},l=Object.keys(o).every(u=>!o[u]);if(s&&(this.option("focusedRowEnabled")&&!1!==this._focusController.isAutoNavigateToFocusedRow()||t)){var d=(s=Array.isArray(s)?s:[s]).filter(u=>!this.columnOption(u,"sortOrder"));d.length&&(i=i||[],l?i.push({selector:a.getDataIndexGetter(),desc:!1}):d.forEach(u=>i.push({selector:u,desc:!1})))}return i}},data:r=>class extends r{_applyChange(e){if(!e||"updateFocusedRow"!==e.changeType)return super._applyChange.apply(this,arguments)}_fireChanged(e){if(super._fireChanged(e),this.option("focusedRowEnabled")&&this._dataSource){var i="update"===e.changeType&&e.repaintChangesOnly&&e.changeTypes&&e.changeTypes.indexOf("remove")>=0;"refresh"===e.changeType&&e.items.length||i?(this._updatePageIndexes(),this._updateFocusedRow(e)):"append"===e.changeType||"prepend"===e.changeType?this._updatePageIndexes():"update"===e.changeType&&e.repaintChangesOnly&&this._updateFocusedRow(e)}}_updatePageIndexes(){var e=this._lastRenderingPageIndex||0,t=this._rowsScrollController?this._rowsScrollController.pageIndex():0;this._lastRenderingPageIndex=t,this._isPagingByRendering=t!==e}isPagingByRendering(){return this._isPagingByRendering}_updateFocusedRow(e){var t=e.operationTypes||{},{reload:i,fullReload:a,pageIndex:n,paging:s}=t,o=this._keyboardNavigationController._isVirtualScrolling(),l=s&&!o,d=this.option("focusedRowKey"),u=this._focusController.isAutoNavigateToFocusedRow();if(i&&!1===n&&!a&&(0,C.$K)(d))this._focusController._navigateToRow(d,!0).done(x=>{x<0&&this._focusController._focusRowByIndex(void 0,t)});else if(l&&u){var f=this.getRowIndexByKey(d),p=this.option("focusedRowIndex");p>=0&&(p===f||!(f>=0))&&this._focusController._focusRowByIndex(p,t)}else l&&!u&&this.getRowIndexByKey(d)<0?this.option("focusedRowIndex",-1):t.fullReload&&this._focusController._focusRowByKeyOrIndex()}getPageIndexByKey(e){var t=this,i=new X.BH;return t.getGlobalRowIndexByKey(e).done(a=>{i.resolve(a>=0?Math.floor(a/t.pageSize()):-1)}).fail(i.reject),i.promise()}getGlobalRowIndexByKey(e){return this._dataSource.group()?this._calculateGlobalRowIndexByGroupedData(e):this._calculateGlobalRowIndexByFlatData(e)}_calculateGlobalRowIndexByFlatData(e,t,i){var a=this,n=new X.BH,s=a._dataSource;if(Array.isArray(e)||(r=>"string"==typeof r&&r.startsWith($p)&&44===r.length)(e))return n.resolve(-1).promise();var o=a._generateFilterByKey(e);return s.load({filter:a._concatWithCombinedFilter(o),skip:0,take:1}).done(l=>{l.length>0?(o=a._generateOperationFilterByKey(e,l[0],i),s.load({filter:a._concatWithCombinedFilter(o,t),skip:0,take:1,requireTotalCount:!0}).done((d,u)=>{n.resolve(u.totalCount)})):n.resolve(-1)}),n.promise()}_concatWithCombinedFilter(e,t){var i=this.getCombinedFilter();return Ae.combineFilters([e,i,t])}_generateBooleanFilter(e,t,i){var{desc:a}=i;switch(!0){case!1===t&&a:return[e,"=",!0];case!1===t&&!a:return[e,"=",null];case!0===t&&!a:case!(0,C.jn)(t)&&a:return[e,"<>",t];default:return}}_generateOperationFilterByKey(e,t,i){var a=this,n=a.option("dateSerializationFormat"),s=a._dataSource.remoteOperations().filtering,o=a._dataSource.remoteOperations().sorting,l=a._generateFilterByKey(e,"<"),d=a._columnsController.getSortDataSourceParameters(!s,!0);if(i){var u=a._columnsController.getGroupDataSourceParameters(!s);u&&(d=d?u.concat(d):u)}return d&&d.slice().reverse().forEach(c=>{var{selector:f,desc:p,compare:_}=c,{getter:w,rawValue:S,safeValue:x}=((r,e,t)=>{var{isRemoteFiltering:i,dateSerializationFormat:a,getSelector:n}=t,{selector:s}=r,o=(0,C.mf)(s)?s:n(s),l=o?o(e):e[s];return{getter:o,rawValue:l,safeValue:i&&(0,C.J_)(l)?di.Z.serializeDate(l,a):l}})(c,t,{isRemoteFiltering:s,dateSerializationFormat:n,getSelector:j=>a._columnsController.columnOption(j,"selector")});if(l=[[f,"=",x],"and",l],null===S||(0,C.jn)(S)){var E=a._generateBooleanFilter(f,x,p);E&&(l=[E,"or",l])}else{var N,V=p?">":"<";_&&!o?N=j=>"<"===V?_(S,w(j))>=1:_(S,w(j))<=-1:(N=[f,V,x],p||(N=[N,"or",[f,"=",null]])),l=[N,"or",l]}}),l}_generateFilterByKey(e,t){var i=this._dataSource.key(),a=[];if(t||(t="="),Array.isArray(i))for(var n=0;n<i.length;++n){var s=e[i[n]];s&&(a.length>0&&a.push("and"),a.push([i[n],t,s]))}else a=[i,t,e];return a}_getLastItemIndex(){return this.items(!0).length-1}},editing:r=>class extends r{_deleteRowCore(e){var t=super._deleteRowCore.apply(this,arguments),i=this._dataController.getKeyByRowIndex(e);t.done(()=>{var a=this._dataController.getRowIndexByKey(i),n=this._dataController.getVisibleRows();-1===a&&!n.length&&this._focusController._resetFocusedRow()})}}},views:{rowsView:r=>class extends r{_createRow(e){var t=super._createRow.apply(this,arguments);return this.option("focusedRowEnabled")&&e&&this._focusController.isRowFocused(e.key)&&t.addClass(id),t}_checkRowKeys(e){if(super._checkRowKeys.apply(this,arguments),this.option("focusedRowEnabled")&&this.option("dataSource")){var t=this._dataController.store();t&&!t.key()&&this._dataController.fireError("E1042","Row focusing")}}_update(e){"updateFocusedRow"===e.changeType?this.option("focusedRowEnabled")&&this._focusController.updateFocusedRow(e):super._update(e)}updateFocusElementTabIndex(e,t){this.option("focusedRowEnabled")?this._setFocusedRowElementTabIndex(t):super.updateFocusElementTabIndex(e)}_setFocusedRowElementTabIndex(e){var t,i=this.option("focusedRowKey"),a=null!==(t=this.option("tabIndex"))&&void 0!==t?t:0,n=this._columnsController,s=this._dataController.getRowIndexByKey(i),o=this.option("focusedColumnIndex"),l=this._findRowElementForTabIndex();if((0,C.$K)(this._scrollToFocusOnResize)||(this._scrollToFocusOnResize=()=>{this.scrollToElementVertically(this._findRowElementForTabIndex()),this.resizeCompleted.remove(this._scrollToFocusOnResize)}),l.attr("tabIndex",a),s>=0&&!e&&(o<0&&(o=0),s+=this._dataController.getRowIndexOffset(),o+=n.getColumnIndexOffset(),this._keyboardNavigationController.setFocusedCellPosition(s,o),this._focusController.isAutoNavigateToFocusedRow())){var d=this._dataController.dataSource(),u=d&&d.operationTypes();u&&!u.paging&&!this._dataController.isPagingByRendering()&&(this.resizeCompleted.remove(this._scrollToFocusOnResize),this.resizeCompleted.add(this._scrollToFocusOnResize))}}_findRowElementForTabIndex(){var e=this.option("focusedRowKey"),t=this._dataController.getRowIndexByKey(e);return(0,b.Z)(this.getRowElement(t>=0?t:0))}scrollToRowElement(e){var t=this._dataController.getRowIndexByKey(e),i=(0,b.Z)(this.getRow(t));return this.scrollToElementVertically(i)}scrollToElementVertically(e){var t=this.getScrollable();if(t&&e.length){var i=t.getScrollElementPosition(e,"vertical");return this.scrollTopPosition(i)}return(new X.BH).resolve()}scrollTopPosition(e){var t=new X.BH,i=this.getScrollable();if(i){var a=i.scrollTop(),n=()=>{i.off("scroll",n),t.resolve()};if(e!==a)return i.on("scroll",n),this._dataController.resetFilterApplying(),i.scrollTo({top:e}),t.promise()}return t.resolve()}}}}},nZ=Number.MAX_SAFE_INTEGER||9007199254740991;He.registerModule("focus",(0,ye.Z)((0,ye.Z)({},uh),{extenders:(0,ye.Z)((0,ye.Z)({},uh.extenders),{controllers:(0,ye.Z)((0,ye.Z)({},uh.extenders.controllers),{data:r=>class extends(uh.extenders.controllers.data(r)){changeRowExpand(e,t){if(this.option("focusedRowEnabled")&&Array.isArray(e)&&this.isRowExpanded(e)){var i=this.getController("keyboardNavigation");(!t||!i.isKeyboardEnabled())&&this._isFocusedRowInsideGroup(e)&&this.option("focusedRowKey",e)}return super.changeRowExpand(e,t)}_isFocusedRowInsideGroup(e){var t=this.getController("columns"),i=this.option("focusedRowKey"),a=this.getRowIndexByKey(i),n=a>=0&&this.getVisibleRows()[a],s=t.getGroupDataSourceParameters(!0);if(n)for(var o=0;o<e.length;++o)if((0,Ot.vb)(s[o]&&s[o].selector)(n.data)!==e[o])return!1;return!0}_getGroupPath(e,t){for(var i=[],a=[e];a&&a[0]&&t;){var n=a[0];void 0!==n.key&&i.push(n.key),a=n.items,t--}return i}_expandGroupByPath(e,t,i){var a=new X.BH;return i++,e.expandRow(t.slice(0,i)).done(()=>{i===t.length?a.resolve():e._expandGroupByPath(e,t,i).done(a.resolve).fail(a.reject)}).fail(a.reject),a.promise()}_calculateGlobalRowIndexByGroupedData(e){var t=this,i=t._dataSource,a=t._generateFilterByKey(e),n=new X.BH,s=Array.isArray(e),o=i.group();return s?n.resolve(-1).promise():i._grouping._updatePagingOptions?(i.load({filter:t._concatWithCombinedFilter(a),group:o}).done(l=>{if(!l||0===l.length||!(0,C.$K)(l[0].key)||-1===l[0].key)return n.resolve(-1).promise();var d=t._getGroupPath(l[0],o.length);t._expandGroupByPath(t,d,0).done(()=>{t._calculateExpandedRowGlobalIndex(n,e,d,o)}).fail(n.reject)}).fail(n.reject),n.promise()):(t._calculateGlobalRowIndexByFlatData(e,null,!0).done(n.resolve).fail(n.reject),n)}_calculateExpandedRowGlobalIndex(e,t,i,a){var u,n=as(i,{group:a}),s=this._dataSource,o=this.option("scrolling.mode"),l="virtual"===o||"infinite"===o,d=s.pageSize();s._grouping._updatePagingOptions({skip:0,take:nZ},(c,f)=>{(0,le.bY)(c.path,i)&&(u=f)}),this._calculateGlobalRowIndexByFlatData(t,n).done(c=>{var f,p;c<0?e.resolve(-1):(f=(u%d||d)+c-i.length,p=l?0:Math.floor(f/(d-i.length))*i.length,e.resolve(f=u+c+p))}).fail(e.reject)}}})})}));var gv,vo,oZ=ve(5582),lZ=ve(8816),_S=(0,Je.Jj)(),xa="dxDraggable",uZ=(0,Ee.V4)($r.BL,xa),hZ=(0,Ee.V4)($r.pB,xa),cZ=(0,Ee.V4)($r.ut,xa),pZ=(0,Ee.V4)($r.IO,xa),fZ=(0,Ee.V4)($r.Zu,xa),vZ=(0,Ee.V4)(kt.Z.down,xa),gZ=(0,Ee.V4)("keydown",xa),_v=r=>({x:r.pageX-(0,b.Z)(_S).scrollLeft(),y:r.pageY-(0,b.Z)(_S).scrollTop()});class CS{constructor(e,t){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=t,"vertical"===e?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(e,t){var i=!1;e.some(a=>{var n=(0,b.Z)(a),s=n.hasClass("dx-overlay-wrapper"),o=n.hasClass("dx-overlay-content");return!(!s&&!o)||(i=this._trySetScrollable(a,t))}),i||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(e){return("auto"===e.css(this._overFlowAttr)||e.hasClass("dx-scrollable-container"))&&e.prop(this._scrollSizeProp)>Math.ceil("width"===this._sizeAttr?(0,we.dz)(e):(0,we.Cr)(e))}_trySetScrollable(e,t){var a,i=(0,b.Z)(e),n=this._component.option("scrollSensitivity"),s=this.isScrollable(i);return s&&(n>(a=this._calculateDistanceToBorders(i,t))[this._limitProps.start]?this._preventScroll||(this._scrollSpeed=-this._calculateScrollSpeed(a[this._limitProps.start]),this._$scrollableAtPointer=i):n>a[this._limitProps.end]?this._preventScroll||(this._scrollSpeed=this._calculateScrollSpeed(a[this._limitProps.end]),this._$scrollableAtPointer=i):(s=!1,this._preventScroll=!1)),s}_calculateDistanceToBorders(e,t){var a,i=e.get(0);return i?(a=(0,li.l)(i),{left:t.x-a.left,top:t.y-a.top,right:a.right-t.x,bottom:a.bottom-t.y}):{}}_calculateScrollSpeed(e){var t=this._component,i=t.option("scrollSensitivity"),a=t.option("scrollSpeed");return Math.ceil(((i-e)/i)**2*a)}scrollByStep(){if(this._$scrollableAtPointer&&this._scrollSpeed){if(this._$scrollableAtPointer.hasClass("dx-scrollable-container")){var e=this._$scrollableAtPointer.closest(".dx-scrollable"),t=e.data("dxScrollable")||e.data("dxScrollView");if(t){var i=t.scrollOffset()[this._limitProps.start]+this._scrollSpeed;t.scrollTo({[this._limitProps.start]:i})}}else{var a=this._$scrollableAtPointer[this._scrollValue]()+this._scrollSpeed;this._$scrollableAtPointer[this._scrollValue](a)}var n=this._component._dragMoveArgs;n&&this._component._dragMoveHandler(n)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(e,t){if(!e)return!1;var i=(0,li.l)(e.get(0)),a=i[this._limitProps.start],n=i[this._sizeAttr],s=_v(t),o="width"===this._sizeAttr?s.x:s.y;return o<a||o>a+n}}var bZ=lZ.Z.inherit({ctor(r){this.callBase(),this._strategy=r},_step(){var r=this._strategy._horizontalScrollHelper,e=this._strategy._verticalScrollHelper;r&&r.scrollByStep(),e&&e.scrollByStep()}}),wS=mu.Z.inherit({reset:le.ZT,dragMove:le.ZT,dragEnter:le.ZT,dragLeave:le.ZT,dragEnd(r){return this._getSourceDraggable()._fireRemoveEvent(r),(0,X.BH)().resolve()},_fireRemoveEvent:le.ZT,_getDefaultOptions(){return(0,B.l)(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),(0,B.l)(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new bZ(this),this._horizontalScrollHelper=new CS("horizontal",this),this._verticalScrollHelper=new CS("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset:r=>((0,C.Kn)(r)&&(r={h:r.x,v:r.y}),r=(0,le.Um)(r).map(e=>parseFloat(e)),{left:r[0],top:1===r.length?r[0]:r[1]}),_getNormalizedCursorOffset(r,e){return(0,C.mf)(r)&&(r=r.call(this,e)),this._normalizeCursorOffset(r)},_calculateElementOffset(r){var e,t,{event:i}=r,a=(0,b.Z)(r.itemElement),n=(0,b.Z)(r.dragElement),s=this._dragElementIsCloned(),o=this.option("cursorOffset"),l={left:0,top:0},d=this._initialLocate=(0,Gi.jt)(n);return(s||r.initialOffset||o)&&(e=r.initialOffset||a.offset(),o&&(l=this._getNormalizedCursorOffset(o,r),isFinite(l.left)&&(e.left=i.pageX),isFinite(l.top)&&(e.top=i.pageY)),t=n.offset(),e.top-=t.top+(l.top||0)-d.top,e.left-=t.left+(l.left||0)-d.left),e},_initPosition(r){var e=(0,b.Z)(r.dragElement),t=this._calculateElementOffset(r);t&&this._move(t,e),this._startPosition=(0,Gi.jt)(e)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(r){return(0,Ma.H0)(this.NAME)+(r?"-".concat(r):"")},_getItemsSelector(){return this.option("filter")||""},_$content(){var r=this.$element(),e=r.children(".dx-template-wrapper");return e.length?e:r},_attachEventHandlers(){if(!this.option("disabled")){var r=this._$content(),e=this._getItemsSelector(),t=this.option("allowMoveByClick"),i={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(a,n)=>{var s=this.option("group"),o=this._getSourceDraggable().option("group"),l=this._getScrollable(a);return!this._verticalScrollHelper.isOutsideScrollable(l,n)&&!this._horizontalScrollHelper.isOutsideScrollable(l,n)&&o&&o===s}};t&&(r=this._getArea(),z.Z.on(r,vZ,i,this._pointerDownHandler.bind(this))),">"===e[0]&&(e=e.slice(1)),z.Z.on(r,uZ,e,i,this._dragStartHandler.bind(this)),z.Z.on(r,hZ,i,this._dragMoveHandler.bind(this)),z.Z.on(r,cZ,i,this._dragEndHandler.bind(this)),z.Z.on(r,pZ,i,this._dragEnterHandler.bind(this)),z.Z.on(r,fZ,i,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&z.Z.on(r,gZ,this._keydownHandler.bind(this))}},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(r,e){return{container:(0,lt.u)(e),model:{itemData:this.option("itemData"),itemElement:(0,lt.u)(r)}}},_createDragElement(r){var e=r,t=this.option("clone"),i=this._getContainer(),a=this.option("dragTemplate");return a?(a=this._getTemplate(a),e=(0,b.Z)("<div>").appendTo(i),a.render(this._getDragTemplateArgs(r,e))):t&&(e=(0,b.Z)("<div>").appendTo(i),r.clone().css({width:r.css("width"),height:r.css("height")}).appendTo(e)),e.toggleClass(this._addWidgetPrefix("clone"),e.get(0)!==r.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){z.Z.off(this._$content(),".".concat(xa)),z.Z.off(this._getArea(),".".concat(xa))},_move(r,e){(0,Gi.pB)(e||this._$dragElement,r)},_getDraggableElement(r){var e=this._getSourceElement();if(e)return e;if(this.option("allowMoveByClick"))return this.$element();var i=(0,b.Z)(r&&r.target),a=this._getItemsSelector();if(">"===a[0]){var n=this._$content().find(a);n.is(i)||(i=i.closest(n))}return i},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(r){if(!(0,Ee.r1)(r)){var e={},t=this.$element(),i=this.option("dragDirection");("horizontal"===i||"both"===i)&&(e.left=r.pageX-t.offset().left+(0,Gi.jt)(t).left-(0,we.dz)(t)/2),("vertical"===i||"both"===i)&&(e.top=r.pageY-t.offset().top+(0,Gi.jt)(t).top-(0,we.Cr)(t)/2),this._move(e,t),this._getAction("onDragMove")(this._getEventArgs(r))}},_isValidElement(r,e){var t=this.option("handle"),i=(0,b.Z)(r.originalEvent&&r.originalEvent.target);return!(t&&!i.closest(t).length||!e.length||e.is(".dx-state-disabled, .dx-state-disabled *"))},_dragStartHandler(r){var e=this._getDraggableElement(r);if(this.dragInProgress=!0,this._isValidElement(r,e)){if(!this._$sourceElement){var t=this._getDragStartArgs(r,e);if(this._getAction("onDragStart")(t),t.cancel)return void(r.cancel=!0);this.option("itemData",t.itemData),this._setSourceDraggable(),this._$sourceElement=e;var i=e.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),i=this._getDraggableElementOffset(i.left,i.top));var a=this._$dragElement=this._createDragElement(e);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(a.children());var n="fixed"===a.css("position");this._initPosition((0,B.l)({},t,{dragElement:a.get(0),initialOffset:n&&i})),this._getAction("onDraggableElementShown")((0,ye.Z)((0,ye.Z)({},t),{dragElement:a}));var s=this._getArea(),o=this._getAreaOffset(s),l=this._getBoundOffset(),d=(0,we.Y_)(s),u=(0,we.zp)(s),c=(0,we.dz)(a),f=(0,we.Cr)(a),p=a.offset().left-o.left,_=a.offset().top-o.top;s.length&&(r.maxLeftOffset=p-l.left,r.maxRightOffset=d-p-c-l.right,r.maxTopOffset=_-l.top,r.maxBottomOffset=u-_-f-l.bottom),this.option("autoScroll")&&this._startAnimator()}}else r.cancel=!0},_getAreaOffset:r=>r&&_n.Z.offset(r)||{left:0,top:0},_toggleDraggingClass(r){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),r)},_toggleDragSourceClass(r,e){var t=e||this._$sourceElement;t&&t.toggleClass(this._addWidgetPrefix("source"),r)},_setGestureCoverCursor(r){(0,b.Z)(".".concat("dx-gesture-cover")).css("cursor",r.css("cursor"))},_getBoundOffset(){var r=this.option("boundOffset");return(0,C.mf)(r)&&(r=r.call(this)),(0,ca.$b)(r)},_getArea(){var r=this.option("boundary");return(0,C.mf)(r)&&(r=r.call(this)),(0,b.Z)(r)},_getContainer(){var r=this.option("container");return void 0===r&&(r=(0,Iu.S3)()),(0,b.Z)(r)},_getDraggableElementOffset(r,e){var t,i,a,n,s=this._initScrollTop,o=this._initScrollLeft,l=this._getScrollableScrollTop(),d=this._getScrollableScrollLeft(),u=(0,b.Z)(this.element()).css("position"),f={left:(null!==(i=null===(t=this._startPosition)||void 0===t?void 0:t.left)&&void 0!==i?i:0)+r,top:(null!==(n=null===(a=this._startPosition)||void 0===a?void 0:a.top)&&void 0!==n?n:0)+e};return"fixed"===u||this._hasClonedDraggable()?f:{left:(0,C.kE)(d)?f.left+d-o:f.left,top:(0,C.kE)(l)?f.top+l-s:f.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(r){if(this._dragMoveArgs=r,this._$dragElement){var e=this._getDraggableElementOffset(r.offset.x,r.offset.y);this._move(e),this._updateScrollable(r);var t=this._getEventArgs(r);this._getAction("onDragMove")(t),!0!==t.cancel&&this._getTargetDraggable().dragMove(r,scrollBy)}else r.cancel=!0},_updateScrollable(r){if(this.option("autoScroll")){var e=_v(r),t=at.Z.elementsFromPoint(e.x,e.y,this.$element().get(0));this._verticalScrollHelper.updateScrollable(t,e),this._horizontalScrollHelper.updateScrollable(t,e)}},_getScrollable(r){var e;return r.parents().toArray().some(t=>{var i=(0,b.Z)(t);return!(!this._horizontalScrollHelper.isScrollable(i)&&!this._verticalScrollHelper.isScrollable(i)||(e=i,0))}),e},_getScrollableScrollTop(){var r,e;return null!==(e=null===(r=this._getScrollable((0,b.Z)(this.element())))||void 0===r?void 0:r.scrollTop())&&void 0!==e?e:0},_getScrollableScrollLeft(){var r,e;return null!==(e=null===(r=this._getScrollable((0,b.Z)(this.element())))||void 0===r?void 0:r.scrollLeft())&&void 0!==e?e:0},_defaultActionArgs(){var r=this.callBase.apply(this,arguments),e=this.option("component");return e&&(r.component=e,r.element=e.element()),r},_getEventArgs(r){var e=this._getSourceDraggable(),t=this._getTargetDraggable();return{event:r,itemData:e.option("itemData"),itemElement:(0,lt.u)(e._$sourceElement),fromComponent:e.option("component")||e,toComponent:t.option("component")||t,fromData:e.option("data"),toData:t.option("data")}},_getDragStartArgs(r,e){var t=this._getEventArgs(r);return{event:t.event,itemData:t.itemData,itemElement:e,fromData:t.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(r){var e=(0,X.BH)(),t=this._getEventArgs(r),i=this._getEventArgs(r),a=this._getTargetDraggable(),n=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(t)}finally{(0,X.gx)((0,X.p4)(t.cancel)).done(s=>{if(!s&&(a!==this&&a._getAction("onDrop")(i),!i.cancel))return n=!1,void(0,X.gx)((0,X.p4)(a.dragEnd(t))).always(e.resolve);e.resolve()}).fail(e.resolve),e.done(()=>{n&&this._revertItemToInitialPosition(),this._resetDragOptions(a)})}},_isTargetOverAnotherDraggable(r){var e=this._getSourceDraggable();if(this===e)return!1;var t=e._$dragElement,i=e.$element(),a=this.$element(),n=_v(r),o=at.Z.elementsFromPoint(n.x,n.y,this.element()).filter(c=>{var f=(0,b.Z)(c);return!!f.hasClass(this._addWidgetPrefix())&&!f.closest(t).length})[0],l=this._getSourceElement(),d=o===i.get(0),u=(0,b.Z)(o).closest(l).length;return!o||o===a.get(0)&&!d&&!u},_dragEnterHandler(r){this._fireDragEnterEvent(r),this._isTargetOverAnotherDraggable(r)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(r)},_dragLeaveHandler(r){this._fireDragLeaveEvent(r),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(r)},_keydownHandler(r){this.dragInProgress&&"Escape"===r.key&&this._keydownEscapeHandler(r)},_keydownEscapeHandler(r){if(this._getSourceElement()){var t=this._getEventArgs(r);if(this._getAction("onDragCancel")(t),!t.cancel){this.dragInProgress=!1,vo?._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();var i=this._getTargetDraggable();this._resetDragOptions(i),this._attachEventHandlers()}}},_getAction(r){return this["_".concat(r,"Action")]||this._createActionByOption(r)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new oZ.s}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());var r=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),e=this._getTemplateByOption("contentTemplate");e&&(0,b.Z)(e.render({container:this.element(),transclude:r}))},_optionChanged(r){var{name:e}=r;switch(e){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this["_".concat(e,"Action")]=this._createActionByOption(e);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(r)}},_getTargetDraggable(){return gv||this},_getSourceDraggable(){return vo||this},_setTargetDraggable(){var r=this.option("group"),e=this._getSourceDraggable();r&&r===e.option("group")&&(gv=this)},_setSourceDraggable(){vo=this},_resetSourceDraggable(){vo=null},_resetTargetDraggable(){gv=null},_resetDragOptions(r){this.reset(),r.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(r){var e=this._getEventArgs(r);this._getAction("onDragEnter")(e)},_fireDragLeaveEvent(r){var e=this._getEventArgs(r);this._getAction("onDragLeave")(e)}});(0,Rt.Z)(xa,wS);const yZ=wS;var bS=(0,Je.Jj)(),yS="placeholder",xS=r=>(0,b.Z)(r).is(":visible"),EZ=(r,e)=>{var t,i;if(r){var a=(null===(t=e.to)||void 0===t?void 0:t.left)||0,n=(null===(i=e.to)||void 0===i?void 0:i.top)||0;r.style.transform="translate(".concat(a,"px,").concat(n,"px)"),r.style.transition=ti.Z.off?"":"transform ".concat(e.duration,"ms ").concat(e.easing)}},IZ=r=>{r&&(r.style.transform="",r.style.transition="")},SS=yZ.inherit({_init(){this.callBase(),this._sourceScrollHandler=this._handleSourceScroll.bind(this),this._sourceScrollableInfo=null},_getDefaultOptions(){return(0,B.l)(this.callBase(),{clone:!0,filter:"> *",itemOrientation:"vertical",dropFeedbackMode:"push",allowDropInsideItem:!1,allowReordering:!0,moveItemOnDrop:!1,onDragChange:null,onAdd:null,onRemove:null,onReorder:null,onPlaceholderPrepared:null,animation:{type:"slide",duration:300,easing:"ease"},fromIndex:null,toIndex:null,dropInsideItem:!1,itemPoints:null,fromIndexOffset:0,offset:0,autoUpdate:!1,draggableElementSize:0})},reset(){this.option({dropInsideItem:!1,toIndex:null,fromIndex:null,itemPoints:null,fromIndexOffset:0,draggableElementSize:0}),this._$placeholderElement&&this._$placeholderElement.remove(),this._$placeholderElement=null,!this._isIndicateMode()&&this._$modifiedItem&&(this._$modifiedItem.css("marginBottom",this._modifiedItemMargin),this._$modifiedItem=null)},_getPrevVisibleItem:(r,e)=>r.slice(0,e).reverse().filter(xS)[0],_dragStartHandler(r){if(this.callBase.apply(this,arguments),!0!==r.cancel){var e=this._getSourceElement();this._updateItemPoints(),this._subscribeToSourceScroll(r),this.option("fromIndex",this._getElementIndex(e)),this.option("fromIndexOffset",this.option("offset"))}},_subscribeToSourceScroll(r){var e=this._getScrollable((0,b.Z)(r.target));e&&(this._sourceScrollableInfo={element:e,scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop()},z.Z.off(e,"scroll",this._sourceScrollHandler),z.Z.on(e,"scroll",this._sourceScrollHandler))},_unsubscribeFromSourceScroll(){this._sourceScrollableInfo&&(z.Z.off(this._sourceScrollableInfo.element,"scroll",this._sourceScrollHandler),this._sourceScrollableInfo=null)},_handleSourceScroll(r){var e=this._sourceScrollableInfo;e&&["scrollLeft","scrollTop"].forEach(t=>{r.target[t]!==e[t]&&(this._correctItemPoints(r.target[t]-e[t]),this._movePlaceholder(),e[t]=r.target[t])})},_dragEnterHandler(r){if(this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&(this._subscribeToSourceScroll(r),this._updateItemPoints(),this.option("fromIndex",-1),!this._isIndicateMode())){var e=this.option("itemPoints"),t=e[e.length-1];if(t){var i=this.$element(),a=this._getSourceElement(),n=this._isVerticalOrientation(),s=n?(0,we.zp)(a,!0):(0,we.Y_)(a,!0),o=i.get(0)[n?"scrollHeight":"scrollWidth"],l=i.get(0)[n?"scrollTop":"scrollLeft"],d=n?"top":"left",u=t[d],f=i.offset()[d]+o-l-u;if(f<s&&n){var p=this._getItems(),_=(0,b.Z)(this._getPrevVisibleItem(p));this._$modifiedItem=_,this._modifiedItemMargin=_.get(0).style.marginBottom,_.css("marginBottom",s-f);var w=_.closest(".dx-sortable"),S=w.data("dxScrollable")||w.data("dxScrollView");S&&S.update()}}}},_dragLeaveHandler(){this.callBase.apply(this,arguments),this!==this._getSourceDraggable()&&this._unsubscribeFromSourceScroll()},dragEnter(){this!==this._getTargetDraggable()&&this.option("toIndex",-1)},dragLeave(){this!==this._getTargetDraggable()&&this.option("toIndex",this.option("fromIndex"))},_allowDrop(r){var t=this._getTargetDraggable().$element(),i=this._getScrollable(t);if(i){var{left:a,right:n,top:s,bottom:o}=function AZ(r){var e=r.offset(),{style:t}=r[0],i=parseFloat(t.paddingLeft)||0,a=parseFloat(t.paddingRight)||0,n=parseFloat(t.paddingTop)||0,s=r[0].clientWidth-(i+a),o=(0,we.Cr)(r),l=e.left+i,d=e.top+n;return{left:l,right:l+s,top:d,bottom:d+o}}(i),l=this.option("toIndex"),d=this.option("itemPoints"),u=d?.filter(f=>f.index===l)[0];if(u&&void 0!==u.top)return this._isVerticalOrientation()?s<=Math.ceil(u.top)&&Math.floor(u.top)<=o:a<=Math.ceil(u.left)&&Math.floor(u.left)<=n}return!0},dragEnd(r){this._unsubscribeFromSourceScroll();var o,l,e=this._getSourceElement(),t=this._getSourceDraggable(),i=t.NAME!==this.NAME,a=this.option("toIndex"),{event:n}=r,s=this._allowDrop(n);return null!==a&&a>=0&&s&&(t!==this&&((o=this._fireAddEvent(n))||(l=this._fireRemoveEvent(n))),i&&(0,Gi.Kx)(e),this.option("moveItemOnDrop")&&!o&&this._moveItem(e,a,l),t===this)?this._fireReorderEvent(n):(0,X.BH)().resolve()},dragMove(r){var e=this.option("itemPoints");if(e){for(var s,t=this._isVerticalOrientation(),i=t?"top":"left",a=t?r.pageY:r.pageX,n=this.option("rtlEnabled"),o=e.length-1;o>=0;o--){var l=e[o+1]&&(e[o][i]+e[o+1][i])/2;if(!(!t&&n?a>l:l>a)&&void 0!==l)break;s=e[o]}s&&(this._updatePlaceholderPosition(r,s),this._verticalScrollHelper.isScrolling()&&this._isIndicateMode()&&this._movePlaceholder())}},_isIndicateMode(){return"indicate"===this.option("dropFeedbackMode")||this.option("allowDropInsideItem")},_createPlaceholder(){var r;return this._isIndicateMode()&&(r=(0,b.Z)("<div>").addClass(this._addWidgetPrefix(yS)).insertBefore(this._getSourceDraggable()._$dragElement)),this._$placeholderElement=r,r},_getItems(){var r=this._getItemsSelector();return this._$content().find(r).not(".".concat(this._addWidgetPrefix(yS))).not(".".concat(this._addWidgetPrefix("clone"))).toArray()},_allowReordering(){return this._getSourceDraggable()!==this._getTargetDraggable()||this.option("allowReordering")},_isValidPoint(r,e,t){var i=this.option("allowDropInsideItem");return!!(t||this._allowReordering()||0===r&&i)&&(!this._isIndicateMode()||-1===e||r!==e&&(t||r!==e+1))},_getItemPoints(){var e,t,i,r=[],a=this.option("rtlEnabled"),n=this._isVerticalOrientation(),s=this._getItems(),o=s.filter(xS),l=o.length,d=this._getDraggableElement(),u=o.indexOf(d.get(0));if(l){for(var c=0;c<=l;c++){var f=!n&&a^c===l,p=n&&c===l;c<l&&(t=(e=(0,b.Z)(o[c])).offset(),i=(0,we.Y_)(e)),r.push({dropInsideItem:!1,left:t.left+(f?i:0),top:t.top+(p?r[c-1].height:0),index:c===l?s.length:s.indexOf(e.get(0)),$item:e,width:(0,we.Y_)(e),height:(0,we.zp)(e),isValid:this._isValidPoint(c,u)})}if(this.option("allowDropInsideItem")){var _=r;r=[];for(var w=0;w<_.length;w++)r.push(_[w]),_[w+1]&&r.push((0,B.l)({},_[w],{dropInsideItem:!0,top:Math.floor((_[w].top+_[w+1].top)/2),left:Math.floor((_[w].left+_[w+1].left)/2),isValid:this._isValidPoint(w,u,!0)}))}}else r.push({dropInsideItem:!1,index:0,isValid:!0});return r},_updateItemPoints(r){(r||this.option("autoUpdate")||!this.option("itemPoints"))&&this.option("itemPoints",this._getItemPoints())},_correctItemPoints(r){var e=this.option("itemPoints");if(r&&e&&!this.option("autoUpdate")){var i=this._isVerticalOrientation()?"top":"left";e.forEach(a=>{a[i]-=r})}},_getElementIndex(r){return this._getItems().indexOf(r.get(0))},_getDragTemplateArgs(r){var e=this.callBase.apply(this,arguments);return e.model.fromIndex=this._getElementIndex(r),e},_togglePlaceholder(r){this._$placeholderElement&&this._$placeholderElement.toggle(r)},_isVerticalOrientation(){return"vertical"===this.option("itemOrientation")},_normalizeToIndex(r,e){var t=this._getSourceDraggable()!==this._getTargetDraggable(),i=this._getActualFromIndex();return null===r?i:Math.max(t||i>=r||e?r:r-1,0)},_updatePlaceholderPosition(r,e){var t=this._getSourceDraggable(),i=this._normalizeToIndex(e.index,e.dropInsideItem),a=(0,B.l)(this._getEventArgs(r),{toIndex:i,dropInsideItem:e.dropInsideItem});e.isValid&&this._getAction("onDragChange")(a),!a.cancel&&e.isValid?(this.option({dropInsideItem:e.dropInsideItem,toIndex:e.index}),this._getAction("onPlaceholderPrepared")((0,B.l)(this._getEventArgs(r),{placeholderElement:(0,lt.u)(this._$placeholderElement),dragElement:(0,lt.u)(t._$dragElement)})),this._updateItemPoints()):e.isValid||this.option({dropInsideItem:!1,toIndex:null})},_makeWidthCorrection(r,e){if(this._$scrollable=this._getScrollable(r),this._$scrollable){var t=(0,we.dz)(this._$scrollable),i=this._$scrollable.offset().left-r.offset().left,a=(0,we.Y_)(r)-i-t;i>0&&(e-=i),a>0&&(e-=a)}return e},_updatePlaceholderSizes(r,e){var t=this.option("dropInsideItem"),i=(0,b.Z)(e),a=this._isVerticalOrientation(),n="",s="";r.toggleClass(this._addWidgetPrefix("placeholder-inside"),t),(a||t)&&(n=(0,we.Y_)(i)),(!a||t)&&(s=(0,we.zp)(i)),n=this._makeWidthCorrection(i,n),r.css({width:n,height:s})},_moveItem(r,e,t){var i,a=this._getItems(),n=a[e],s=this._getSourceDraggable();t&&(r=r.clone(),s._toggleDragSourceClass(!1,r)),n||(i=a[e-1]),this._moveItemCore(r,n,i)},_moveItemCore(r,e,t){e||t?t?r.insertAfter((0,b.Z)(t)):r.insertBefore((0,b.Z)(e)):r.appendTo(this.$element())},_getDragStartArgs(r,e){return(0,B.l)(this.callBase.apply(this,arguments),{fromIndex:this._getElementIndex(e)})},_getEventArgs(r){var e=this._getSourceDraggable(),t=this._getTargetDraggable(),i=t.option("dropInsideItem");return(0,B.l)(this.callBase.apply(this,arguments),{fromIndex:e.option("fromIndex"),toIndex:this._normalizeToIndex(t.option("toIndex"),i),dropInsideItem:i})},_optionChanged(r){var{name:e}=r;switch(e){case"onDragChange":case"onPlaceholderPrepared":case"onAdd":case"onRemove":case"onReorder":this["_".concat(e,"Action")]=this._createActionByOption(e);break;case"itemOrientation":case"allowDropInsideItem":case"moveItemOnDrop":case"dropFeedbackMode":case"itemPoints":case"animation":case"allowReordering":case"fromIndexOffset":case"offset":case"draggableElementSize":case"autoUpdate":break;case"fromIndex":[!1,!0].forEach(t=>{var i=t?r.value:r.previousValue;if(null!==i){var a=(0,b.Z)(this._getItems()[i]);this._toggleDragSourceClass(t,a)}});break;case"dropInsideItem":this._optionChangedDropInsideItem(r);break;case"toIndex":this._optionChangedToIndex(r);break;default:this.callBase(r)}},_optionChangedDropInsideItem(){this._isIndicateMode()&&this._$placeholderElement&&this._movePlaceholder()},_isPositionVisible(r){var t,e=this.$element();if("hidden"!==e.css("overflow")?t=e.get(0):e.parents().each(function(){if("visible"!==(0,b.Z)(this).css("overflow"))return t=this,!1}),t){var i=(0,li.l)(t),a=this._isVerticalOrientation(),n=a?"top":"left",o=a?bS.pageYOffset:bS.pageXOffset;if(r[n]<i[n]+o||r[n]>i[a?"bottom":"right"]+o)return!1}return!0},_optionChangedToIndex(r){var e=r.value;if(this._isIndicateMode()){var t=null!==e&&e>=0;this._togglePlaceholder(t),t&&this._movePlaceholder()}else this._moveItems(r.previousValue,r.value,r.fullUpdate)},update(){if(null!==this.option("fromIndex")||null!==this.option("toIndex")){this._updateItemPoints(!0),this._updateDragSourceClass();var r=this.option("toIndex");this._optionChangedToIndex({value:r,fullUpdate:!0})}},_updateDragSourceClass(){var r=this._getActualFromIndex(),e=(0,b.Z)(this._getItems()[r]);e.length&&(this._$sourceElement=e,this._toggleDragSourceClass(!0,e))},_makeLeftCorrection(r){var e=this._$scrollable;if(e&&this._isVerticalOrientation()){var t=e.offset().left-r;t>0&&(r+=t)}return r},_movePlaceholder(){var r=this._$placeholderElement||this._createPlaceholder();if(r){var e=this._getItems(),t=this.option("toIndex"),i=this._isVerticalOrientation(),a=this.option("rtlEnabled"),n=this.option("dropInsideItem"),s=null,o=e[t];if(o){var l=(0,b.Z)(o);s=l.offset(),!i&&a&&!n&&(s.left+=(0,we.Y_)(l,!0))}else{var d=o=this._getPrevVisibleItem(e,t);d&&(s=(0,b.Z)(d).offset(),i?s.top+=(0,we.zp)(d,!0):a||(s.left+=(0,we.Y_)(d,!0)))}if(this._updatePlaceholderSizes(r,o),s&&!this._isPositionVisible(s)&&(s=null),s){var u=i&&t===e.length,c=(0,we.zp)(r);s.left=this._makeLeftCorrection(s.left),s.top=u&&s.top>=c?s.top-c:s.top,this._move(s,r)}r.toggle(!!s)}},_getPositions(r,e,t,i){for(var a=[],n=0;n<r.length;n++){var s=0;null!==i&&null!==t?(-1===t?n>=i&&(s=e):-1===i?n>t&&(s=-e):t<i?n>t&&n<i&&(s=-e):t>i&&n>=i&&n<t&&(s=e),a.push(s)):a.push(s)}return a},_getDraggableElementSize(r){var e=this._getDraggableElement(),t=this.option("draggableElementSize");return t||(t=r?((0,we.zp)(e)+(0,we.zp)(e,!0))/2:((0,we.Y_)(e)+(0,we.Y_)(e,!0))/2,this.option("autoUpdate")||this.option("draggableElementSize",t)),t},_getActualFromIndex(){var{fromIndex:r,fromIndexOffset:e,offset:t}=this.option();return null==r?null:r+e-t},_moveItems(r,e,t){for(var i=this._getActualFromIndex(),a=this._isVerticalOrientation(),n=a?"top":"left",s=this._getDraggableElementSize(a),o=this._getItems(),l=this._getPositions(o,s,i,r),d=this._getPositions(o,s,i,e),u=this.option("animation"),c=this.option("rtlEnabled"),f=0;f<o.length;f++){var p=o[f],_=l[f],w=d[f];null===e||null===i?IZ(p):(_!==w||t&&w)&&EZ(p,(0,B.l)({},u,{to:{[n]:!a&&c?-w:w}}))}},_toggleDragSourceClass(r,e){var t=e||this._$sourceElement;this.callBase.apply(this,arguments),this._isIndicateMode()||t&&t.toggleClass(this._addWidgetPrefix("source-hidden"),r)},_dispose(){this.reset(),this.callBase()},_fireAddEvent(r){var e=this._getEventArgs(r);return this._getAction("onAdd")(e),e.cancel},_fireRemoveEvent(r){var e=this._getSourceDraggable(),t=this._getEventArgs(r);return e._getAction("onRemove")(t),t.cancel},_fireReorderEvent(r){var e=this._getEventArgs(r);return this._getAction("onReorder")(e),e.promise||(0,X.BH)().resolve()}});(0,Rt.Z)("dxSortable",SS);const TZ=SS;var PZ={defaultOptions:()=>({rowDragging:{showDragIcons:!0,dropFeedbackMode:"indicate",allowReordering:!1,allowDropInsideItem:!1}}),extenders:{views:{rowsView:r=>class extends r{init(){super.init.apply(this,arguments),this._updateHandleColumn()}optionChanged(e){"rowDragging"===e.name&&(this._updateHandleColumn(),this._invalidate(!0,!0),e.handled=!0),super.optionChanged.apply(this,arguments)}_allowReordering(){var e=this.option("rowDragging");return!(!e||!(e.allowReordering||e.allowDropInsideItem||e.group))}_updateHandleColumn(){var e=this.option("rowDragging"),t=this._allowReordering(),i=this._columnsController,a=t&&e.showDragIcons;i?.addCommandColumn({type:"drag",command:"drag",visibleIndex:-2,alignment:"center",elementAttr:[{name:"dx-drag-cell",value:""}],cssClass:"dx-command-drag",width:"auto",cellTemplate:this._getHandleTemplate(),visible:a}),i?.columnOption("type:drag","visible",a)}_renderContent(){var e=this.option("rowDragging"),t=this._allowReordering(),i=super._renderContent.apply(this,arguments),a=this._isFixedTableRendering,n=a?"_sortableFixed":"_sortable",s=a?"_sortable":"_sortableFixed",o=u=>{var c;null===(c=this._sortableFixed)||void 0===c||c.$element().css("pointerEvents",u?"auto":"")},l=".dx-row:not(.dx-freespace-row):not(.dx-virtual-row):not(.dx-header-row):not(.dx-footer-row)",d=this.option("dataRowTemplate")?"> table > tbody".concat(l):"> table > tbody > ".concat(l);return(t||this[n])&&i.length&&(this[n]=this._createComponent(i,TZ,(0,B.l)({component:this.component,contentTemplate:null,filter:d,cursorOffset:u=>{var{event:c}=u,f=(0,b.Z)(this.element()).offset();return{x:c.pageX-f.left}},onDraggableElementShown:u=>{if(!e.dragTemplate){var f=(0,b.Z)(u.dragElement).children(".dx-widget").data(this.component.NAME);this._synchronizeScrollLeftPosition(f)}},dragTemplate:this._getDraggableRowTemplate(),handle:e.showDragIcons&&".".concat("dx-command-drag"),dropFeedbackMode:"indicate"},e,{onDragStart:u=>{var c,f;null===(c=this.getController("keyboardNavigation"))||void 0===c||c._resetFocusedCell();var p=u.component.getVisibleRows()[u.fromIndex];u.itemData=p&&p.data,u.cancel=!t||!(p&&"data"===p.rowType),null===(f=e.onDragStart)||void 0===f||f.call(e,u)},onDragEnter:()=>{o(!0)},onDragLeave:()=>{o(!1)},onDragEnd:u=>{var c;o(!1),null===(c=e.onDragEnd)||void 0===c||c.call(e,u)},onAdd:u=>{var c;o(!1),null===(c=e.onAdd)||void 0===c||c.call(e,u)},dropFeedbackMode:e.dropFeedbackMode,onOptionChanged:u=>{this._sortableFixed&&("fromIndex"===u.name||"toIndex"===u.name)&&this[s].option(u.name,u.value)}})),i.toggleClass("dx-scrollable-container",a),i.toggleClass("dx-sortable-without-handle",t&&!e.showDragIcons)),i}_renderCore(e){super._renderCore.apply(this,arguments),e&&"update"===e.changeType&&e.repaintChangesOnly&&Ae.isVirtualRowRendering(this)&&(0,le.Su)(()=>{this._updateSortable()})}_updateSortable(){var e=this._dataController.getRowIndexOffset(),t=e-this._previousOffset;[this._sortable,this._sortableFixed].forEach(i=>{var a=i?.option("toIndex");(0,C.$K)(a)&&(0,C.$K)(this._previousOffset)&&i?.option("toIndex",a-t),i?.option("offset",e),i?.update()}),this._previousOffset=e}_resizeCore(){super._resizeCore.apply(this,arguments),this._updateSortable()}_getDraggableGridOptions(e){var t=this.option(),i=this.getColumns(),a=(0,b.Z)(this.getRowElement(e.rowIndex));return{dataSource:[{id:1,parentId:0}],showBorders:!0,showColumnHeaders:!1,scrolling:{useNative:!1,showScrollbar:"never"},pager:{visible:!1},loadingTimeout:null,columnFixing:t.columnFixing,columnAutoWidth:t.columnAutoWidth,showColumnLines:t.showColumnLines,columns:i.map(n=>({width:n.width||n.visibleWidth,fixed:n.fixed,fixedPosition:n.fixedPosition})),onRowPrepared:n=>{var s=n.component.getView("rowsView");(0,b.Z)(n.rowElement).replaceWith(a.eq(s._isFixedTableRendering?1:0).clone())}}}_synchronizeScrollLeftPosition(e){var t=e?.getScrollable();t?.scrollTo({x:this._scrollLeft})}_getDraggableRowTemplate(){return e=>{var t=this.component.$element(),i=(0,b.Z)("<div>");(0,we.cl)(i,(0,we.dz)(t));var a=this._dataController.items(),s=this._getDraggableGridOptions(a&&a[e.fromIndex]);return this._createComponent(i,this.component.NAME,s),i.find(".dx-gridbase-container").children(":not(.".concat(this.addWidgetPrefix("rowsview"),")")).hide(),i.addClass(this.addWidgetPrefix("dragview")),i}}_getHandleTemplate(){return(r=>(e,t)=>{var i=(0,b.Z)(e);if("data"===t.rowType)return i.addClass("dx-cell-focus-disabled"),(0,b.Z)("<span>").addClass(r("drag-icon"));Ae.setEmptyText(i)})(e=>this.addWidgetPrefix(e))}}}}};He.registerModule("rowDragging",PZ);const FZ=_T;var Tt=ve(9784),Ce=ve(2173);let VZ=(()=>{class r extends Tt.Ay{constructor(t,i,a,n,s,o,l,d){super(t,i,a,n,l,d),this._watcherHelper=n,this._idh=s,this._createEventEmitters([{subscribe:"adaptiveDetailRowPreparing",emit:"onAdaptiveDetailRowPreparing"},{subscribe:"cellClick",emit:"onCellClick"},{subscribe:"cellDblClick",emit:"onCellDblClick"},{subscribe:"cellHoverChanged",emit:"onCellHoverChanged"},{subscribe:"cellPrepared",emit:"onCellPrepared"},{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"contextMenuPreparing",emit:"onContextMenuPreparing"},{subscribe:"dataErrorOccurred",emit:"onDataErrorOccurred"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"editCanceled",emit:"onEditCanceled"},{subscribe:"editCanceling",emit:"onEditCanceling"},{subscribe:"editingStart",emit:"onEditingStart"},{subscribe:"editorPrepared",emit:"onEditorPrepared"},{subscribe:"editorPreparing",emit:"onEditorPreparing"},{subscribe:"exporting",emit:"onExporting"},{subscribe:"focusedCellChanged",emit:"onFocusedCellChanged"},{subscribe:"focusedCellChanging",emit:"onFocusedCellChanging"},{subscribe:"focusedRowChanged",emit:"onFocusedRowChanged"},{subscribe:"focusedRowChanging",emit:"onFocusedRowChanging"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"initNewRow",emit:"onInitNewRow"},{subscribe:"keyDown",emit:"onKeyDown"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"rowClick",emit:"onRowClick"},{subscribe:"rowCollapsed",emit:"onRowCollapsed"},{subscribe:"rowCollapsing",emit:"onRowCollapsing"},{subscribe:"rowDblClick",emit:"onRowDblClick"},{subscribe:"rowExpanded",emit:"onRowExpanded"},{subscribe:"rowExpanding",emit:"onRowExpanding"},{subscribe:"rowInserted",emit:"onRowInserted"},{subscribe:"rowInserting",emit:"onRowInserting"},{subscribe:"rowPrepared",emit:"onRowPrepared"},{subscribe:"rowRemoved",emit:"onRowRemoved"},{subscribe:"rowRemoving",emit:"onRowRemoving"},{subscribe:"rowUpdated",emit:"onRowUpdated"},{subscribe:"rowUpdating",emit:"onRowUpdating"},{subscribe:"rowValidating",emit:"onRowValidating"},{subscribe:"saved",emit:"onSaved"},{subscribe:"saving",emit:"onSaving"},{subscribe:"selectionChanged",emit:"onSelectionChanged"},{subscribe:"toolbarPreparing",emit:"onToolbarPreparing"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"allowColumnReorderingChange"},{emit:"allowColumnResizingChange"},{emit:"autoNavigateToFocusedRowChange"},{emit:"cacheEnabledChange"},{emit:"cellHintEnabledChange"},{emit:"columnAutoWidthChange"},{emit:"columnChooserChange"},{emit:"columnFixingChange"},{emit:"columnHidingEnabledChange"},{emit:"columnMinWidthChange"},{emit:"columnResizingModeChange"},{emit:"columnsChange"},{emit:"columnWidthChange"},{emit:"customizeColumnsChange"},{emit:"dataRowTemplateChange"},{emit:"dataSourceChange"},{emit:"dateSerializationFormatChange"},{emit:"disabledChange"},{emit:"editingChange"},{emit:"elementAttrChange"},{emit:"errorRowEnabledChange"},{emit:"exportChange"},{emit:"filterBuilderChange"},{emit:"filterBuilderPopupChange"},{emit:"filterPanelChange"},{emit:"filterRowChange"},{emit:"filterSyncEnabledChange"},{emit:"filterValueChange"},{emit:"focusedColumnIndexChange"},{emit:"focusedRowEnabledChange"},{emit:"focusedRowIndexChange"},{emit:"focusedRowKeyChange"},{emit:"groupingChange"},{emit:"groupPanelChange"},{emit:"headerFilterChange"},{emit:"heightChange"},{emit:"highlightChangesChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"keyboardNavigationChange"},{emit:"keyExprChange"},{emit:"loadPanelChange"},{emit:"masterDetailChange"},{emit:"noDataTextChange"},{emit:"pagerChange"},{emit:"pagingChange"},{emit:"remoteOperationsChange"},{emit:"renderAsyncChange"},{emit:"repaintChangesOnlyChange"},{emit:"rowAlternationEnabledChange"},{emit:"rowDraggingChange"},{emit:"rowTemplateChange"},{emit:"rtlEnabledChange"},{emit:"scrollingChange"},{emit:"searchPanelChange"},{emit:"selectedRowKeysChange"},{emit:"selectionChange"},{emit:"selectionFilterChange"},{emit:"showBordersChange"},{emit:"showColumnHeadersChange"},{emit:"showColumnLinesChange"},{emit:"showRowLinesChange"},{emit:"sortByGroupSummaryInfoChange"},{emit:"sortingChange"},{emit:"stateStoringChange"},{emit:"summaryChange"},{emit:"syncLookupFilterValuesChange"},{emit:"tabIndexChange"},{emit:"toolbarChange"},{emit:"twoWayBindingEnabledChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"wordWrapEnabledChange"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(t){this._setOption("accessKey",t)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(t){this._setOption("activeStateEnabled",t)}get allowColumnReordering(){return this._getOption("allowColumnReordering")}set allowColumnReordering(t){this._setOption("allowColumnReordering",t)}get allowColumnResizing(){return this._getOption("allowColumnResizing")}set allowColumnResizing(t){this._setOption("allowColumnResizing",t)}get autoNavigateToFocusedRow(){return this._getOption("autoNavigateToFocusedRow")}set autoNavigateToFocusedRow(t){this._setOption("autoNavigateToFocusedRow",t)}get cacheEnabled(){return this._getOption("cacheEnabled")}set cacheEnabled(t){this._setOption("cacheEnabled",t)}get cellHintEnabled(){return this._getOption("cellHintEnabled")}set cellHintEnabled(t){this._setOption("cellHintEnabled",t)}get columnAutoWidth(){return this._getOption("columnAutoWidth")}set columnAutoWidth(t){this._setOption("columnAutoWidth",t)}get columnChooser(){return this._getOption("columnChooser")}set columnChooser(t){this._setOption("columnChooser",t)}get columnFixing(){return this._getOption("columnFixing")}set columnFixing(t){this._setOption("columnFixing",t)}get columnHidingEnabled(){return this._getOption("columnHidingEnabled")}set columnHidingEnabled(t){this._setOption("columnHidingEnabled",t)}get columnMinWidth(){return this._getOption("columnMinWidth")}set columnMinWidth(t){this._setOption("columnMinWidth",t)}get columnResizingMode(){return this._getOption("columnResizingMode")}set columnResizingMode(t){this._setOption("columnResizingMode",t)}get columns(){return this._getOption("columns")}set columns(t){this._setOption("columns",t)}get columnWidth(){return this._getOption("columnWidth")}set columnWidth(t){this._setOption("columnWidth",t)}get customizeColumns(){return this._getOption("customizeColumns")}set customizeColumns(t){this._setOption("customizeColumns",t)}get dataRowTemplate(){return this._getOption("dataRowTemplate")}set dataRowTemplate(t){this._setOption("dataRowTemplate",t)}get dataSource(){return this._getOption("dataSource")}set dataSource(t){this._setOption("dataSource",t)}get dateSerializationFormat(){return this._getOption("dateSerializationFormat")}set dateSerializationFormat(t){this._setOption("dateSerializationFormat",t)}get disabled(){return this._getOption("disabled")}set disabled(t){this._setOption("disabled",t)}get editing(){return this._getOption("editing")}set editing(t){this._setOption("editing",t)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(t){this._setOption("elementAttr",t)}get errorRowEnabled(){return this._getOption("errorRowEnabled")}set errorRowEnabled(t){this._setOption("errorRowEnabled",t)}get export(){return this._getOption("export")}set export(t){this._setOption("export",t)}get filterBuilder(){return this._getOption("filterBuilder")}set filterBuilder(t){this._setOption("filterBuilder",t)}get filterBuilderPopup(){return this._getOption("filterBuilderPopup")}set filterBuilderPopup(t){this._setOption("filterBuilderPopup",t)}get filterPanel(){return this._getOption("filterPanel")}set filterPanel(t){this._setOption("filterPanel",t)}get filterRow(){return this._getOption("filterRow")}set filterRow(t){this._setOption("filterRow",t)}get filterSyncEnabled(){return this._getOption("filterSyncEnabled")}set filterSyncEnabled(t){this._setOption("filterSyncEnabled",t)}get filterValue(){return this._getOption("filterValue")}set filterValue(t){this._setOption("filterValue",t)}get focusedColumnIndex(){return this._getOption("focusedColumnIndex")}set focusedColumnIndex(t){this._setOption("focusedColumnIndex",t)}get focusedRowEnabled(){return this._getOption("focusedRowEnabled")}set focusedRowEnabled(t){this._setOption("focusedRowEnabled",t)}get focusedRowIndex(){return this._getOption("focusedRowIndex")}set focusedRowIndex(t){this._setOption("focusedRowIndex",t)}get focusedRowKey(){return this._getOption("focusedRowKey")}set focusedRowKey(t){this._setOption("focusedRowKey",t)}get grouping(){return this._getOption("grouping")}set grouping(t){this._setOption("grouping",t)}get groupPanel(){return this._getOption("groupPanel")}set groupPanel(t){this._setOption("groupPanel",t)}get headerFilter(){return this._getOption("headerFilter")}set headerFilter(t){this._setOption("headerFilter",t)}get height(){return this._getOption("height")}set height(t){this._setOption("height",t)}get highlightChanges(){return this._getOption("highlightChanges")}set highlightChanges(t){this._setOption("highlightChanges",t)}get hint(){return this._getOption("hint")}set hint(t){this._setOption("hint",t)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(t){this._setOption("hoverStateEnabled",t)}get keyboardNavigation(){return this._getOption("keyboardNavigation")}set keyboardNavigation(t){this._setOption("keyboardNavigation",t)}get keyExpr(){return this._getOption("keyExpr")}set keyExpr(t){this._setOption("keyExpr",t)}get loadPanel(){return this._getOption("loadPanel")}set loadPanel(t){this._setOption("loadPanel",t)}get masterDetail(){return this._getOption("masterDetail")}set masterDetail(t){this._setOption("masterDetail",t)}get noDataText(){return this._getOption("noDataText")}set noDataText(t){this._setOption("noDataText",t)}get pager(){return this._getOption("pager")}set pager(t){this._setOption("pager",t)}get paging(){return this._getOption("paging")}set paging(t){this._setOption("paging",t)}get remoteOperations(){return this._getOption("remoteOperations")}set remoteOperations(t){this._setOption("remoteOperations",t)}get renderAsync(){return this._getOption("renderAsync")}set renderAsync(t){this._setOption("renderAsync",t)}get repaintChangesOnly(){return this._getOption("repaintChangesOnly")}set repaintChangesOnly(t){this._setOption("repaintChangesOnly",t)}get rowAlternationEnabled(){return this._getOption("rowAlternationEnabled")}set rowAlternationEnabled(t){this._setOption("rowAlternationEnabled",t)}get rowDragging(){return this._getOption("rowDragging")}set rowDragging(t){this._setOption("rowDragging",t)}get rowTemplate(){return this._getOption("rowTemplate")}set rowTemplate(t){this._setOption("rowTemplate",t)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(t){this._setOption("rtlEnabled",t)}get scrolling(){return this._getOption("scrolling")}set scrolling(t){this._setOption("scrolling",t)}get searchPanel(){return this._getOption("searchPanel")}set searchPanel(t){this._setOption("searchPanel",t)}get selectedRowKeys(){return this._getOption("selectedRowKeys")}set selectedRowKeys(t){this._setOption("selectedRowKeys",t)}get selection(){return this._getOption("selection")}set selection(t){this._setOption("selection",t)}get selectionFilter(){return this._getOption("selectionFilter")}set selectionFilter(t){this._setOption("selectionFilter",t)}get showBorders(){return this._getOption("showBorders")}set showBorders(t){this._setOption("showBorders",t)}get showColumnHeaders(){return this._getOption("showColumnHeaders")}set showColumnHeaders(t){this._setOption("showColumnHeaders",t)}get showColumnLines(){return this._getOption("showColumnLines")}set showColumnLines(t){this._setOption("showColumnLines",t)}get showRowLines(){return this._getOption("showRowLines")}set showRowLines(t){this._setOption("showRowLines",t)}get sortByGroupSummaryInfo(){return this._getOption("sortByGroupSummaryInfo")}set sortByGroupSummaryInfo(t){this._setOption("sortByGroupSummaryInfo",t)}get sorting(){return this._getOption("sorting")}set sorting(t){this._setOption("sorting",t)}get stateStoring(){return this._getOption("stateStoring")}set stateStoring(t){this._setOption("stateStoring",t)}get summary(){return this._getOption("summary")}set summary(t){this._setOption("summary",t)}get syncLookupFilterValues(){return this._getOption("syncLookupFilterValues")}set syncLookupFilterValues(t){this._setOption("syncLookupFilterValues",t)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(t){this._setOption("tabIndex",t)}get toolbar(){return this._getOption("toolbar")}set toolbar(t){this._setOption("toolbar",t)}get twoWayBindingEnabled(){return this._getOption("twoWayBindingEnabled")}set twoWayBindingEnabled(t){this._setOption("twoWayBindingEnabled",t)}get visible(){return this._getOption("visible")}set visible(t){this._setOption("visible",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}get wordWrapEnabled(){return this._getOption("wordWrapEnabled")}set wordWrapEnabled(t){this._setOption("wordWrapEnabled",t)}get columnsChildren(){return this._getOption("columns")}set columnsChildren(t){this.setChildren("columns",t)}get sortByGroupSummaryInfoChildren(){return this._getOption("sortByGroupSummaryInfo")}set sortByGroupSummaryInfoChildren(t){this.setChildren("sortByGroupSummaryInfo",t)}_createInstance(t,i){return new FZ(t,i)}ngOnDestroy(){this._destroyWidget()}ngOnChanges(t){super.ngOnChanges(t),this.setupChanges("columns",t),this.setupChanges("dataSource",t),this.setupChanges("keyExpr",t),this.setupChanges("selectedRowKeys",t),this.setupChanges("sortByGroupSummaryInfo",t)}setupChanges(t,i){t in this._optionsToUpdate||this._idh.setup(t,i)}ngDoCheck(){this._idh.doCheck("columns"),this._idh.doCheck("dataSource"),this._idh.doCheck("keyExpr"),this._idh.doCheck("selectedRowKeys"),this._idh.doCheck("sortByGroupSummaryInfo"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(t,i){let a=this._idh.setupSingle(t,i),n=null!==this._idh.getChanges(t,i);(a||n)&&super._setOption(t,i)}}return r.\u0275fac=function(t){return new(t||r)(W.Y36(W.SBq),W.Y36(W.R0b),W.Y36(Tt._5),W.Y36(Tt._h),W.Y36(Tt.i9),W.Y36(Tt.al),W.Y36(nl.ki),W.Y36(W.Lbi))},r.\u0275cmp=W.Xpm({type:r,selectors:[["dx-data-grid"]],contentQueries:function(t,i,a){if(1&t&&(W.Suo(a,Ce.qvW,4),W.Suo(a,Ce.KkC,4)),2&t){let n;W.iGM(n=W.CRH())&&(i.columnsChildren=n),W.iGM(n=W.CRH())&&(i.sortByGroupSummaryInfoChildren=n)}},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",allowColumnReordering:"allowColumnReordering",allowColumnResizing:"allowColumnResizing",autoNavigateToFocusedRow:"autoNavigateToFocusedRow",cacheEnabled:"cacheEnabled",cellHintEnabled:"cellHintEnabled",columnAutoWidth:"columnAutoWidth",columnChooser:"columnChooser",columnFixing:"columnFixing",columnHidingEnabled:"columnHidingEnabled",columnMinWidth:"columnMinWidth",columnResizingMode:"columnResizingMode",columns:"columns",columnWidth:"columnWidth",customizeColumns:"customizeColumns",dataRowTemplate:"dataRowTemplate",dataSource:"dataSource",dateSerializationFormat:"dateSerializationFormat",disabled:"disabled",editing:"editing",elementAttr:"elementAttr",errorRowEnabled:"errorRowEnabled",export:"export",filterBuilder:"filterBuilder",filterBuilderPopup:"filterBuilderPopup",filterPanel:"filterPanel",filterRow:"filterRow",filterSyncEnabled:"filterSyncEnabled",filterValue:"filterValue",focusedColumnIndex:"focusedColumnIndex",focusedRowEnabled:"focusedRowEnabled",focusedRowIndex:"focusedRowIndex",focusedRowKey:"focusedRowKey",grouping:"grouping",groupPanel:"groupPanel",headerFilter:"headerFilter",height:"height",highlightChanges:"highlightChanges",hint:"hint",hoverStateEnabled:"hoverStateEnabled",keyboardNavigation:"keyboardNavigation",keyExpr:"keyExpr",loadPanel:"loadPanel",masterDetail:"masterDetail",noDataText:"noDataText",pager:"pager",paging:"paging",remoteOperations:"remoteOperations",renderAsync:"renderAsync",repaintChangesOnly:"repaintChangesOnly",rowAlternationEnabled:"rowAlternationEnabled",rowDragging:"rowDragging",rowTemplate:"rowTemplate",rtlEnabled:"rtlEnabled",scrolling:"scrolling",searchPanel:"searchPanel",selectedRowKeys:"selectedRowKeys",selection:"selection",selectionFilter:"selectionFilter",showBorders:"showBorders",showColumnHeaders:"showColumnHeaders",showColumnLines:"showColumnLines",showRowLines:"showRowLines",sortByGroupSummaryInfo:"sortByGroupSummaryInfo",sorting:"sorting",stateStoring:"stateStoring",summary:"summary",syncLookupFilterValues:"syncLookupFilterValues",tabIndex:"tabIndex",toolbar:"toolbar",twoWayBindingEnabled:"twoWayBindingEnabled",visible:"visible",width:"width",wordWrapEnabled:"wordWrapEnabled"},outputs:{onAdaptiveDetailRowPreparing:"onAdaptiveDetailRowPreparing",onCellClick:"onCellClick",onCellDblClick:"onCellDblClick",onCellHoverChanged:"onCellHoverChanged",onCellPrepared:"onCellPrepared",onContentReady:"onContentReady",onContextMenuPreparing:"onContextMenuPreparing",onDataErrorOccurred:"onDataErrorOccurred",onDisposing:"onDisposing",onEditCanceled:"onEditCanceled",onEditCanceling:"onEditCanceling",onEditingStart:"onEditingStart",onEditorPrepared:"onEditorPrepared",onEditorPreparing:"onEditorPreparing",onExporting:"onExporting",onFocusedCellChanged:"onFocusedCellChanged",onFocusedCellChanging:"onFocusedCellChanging",onFocusedRowChanged:"onFocusedRowChanged",onFocusedRowChanging:"onFocusedRowChanging",onInitialized:"onInitialized",onInitNewRow:"onInitNewRow",onKeyDown:"onKeyDown",onOptionChanged:"onOptionChanged",onRowClick:"onRowClick",onRowCollapsed:"onRowCollapsed",onRowCollapsing:"onRowCollapsing",onRowDblClick:"onRowDblClick",onRowExpanded:"onRowExpanded",onRowExpanding:"onRowExpanding",onRowInserted:"onRowInserted",onRowInserting:"onRowInserting",onRowPrepared:"onRowPrepared",onRowRemoved:"onRowRemoved",onRowRemoving:"onRowRemoving",onRowUpdated:"onRowUpdated",onRowUpdating:"onRowUpdating",onRowValidating:"onRowValidating",onSaved:"onSaved",onSaving:"onSaving",onSelectionChanged:"onSelectionChanged",onToolbarPreparing:"onToolbarPreparing",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",allowColumnReorderingChange:"allowColumnReorderingChange",allowColumnResizingChange:"allowColumnResizingChange",autoNavigateToFocusedRowChange:"autoNavigateToFocusedRowChange",cacheEnabledChange:"cacheEnabledChange",cellHintEnabledChange:"cellHintEnabledChange",columnAutoWidthChange:"columnAutoWidthChange",columnChooserChange:"columnChooserChange",columnFixingChange:"columnFixingChange",columnHidingEnabledChange:"columnHidingEnabledChange",columnMinWidthChange:"columnMinWidthChange",columnResizingModeChange:"columnResizingModeChange",columnsChange:"columnsChange",columnWidthChange:"columnWidthChange",customizeColumnsChange:"customizeColumnsChange",dataRowTemplateChange:"dataRowTemplateChange",dataSourceChange:"dataSourceChange",dateSerializationFormatChange:"dateSerializationFormatChange",disabledChange:"disabledChange",editingChange:"editingChange",elementAttrChange:"elementAttrChange",errorRowEnabledChange:"errorRowEnabledChange",exportChange:"exportChange",filterBuilderChange:"filterBuilderChange",filterBuilderPopupChange:"filterBuilderPopupChange",filterPanelChange:"filterPanelChange",filterRowChange:"filterRowChange",filterSyncEnabledChange:"filterSyncEnabledChange",filterValueChange:"filterValueChange",focusedColumnIndexChange:"focusedColumnIndexChange",focusedRowEnabledChange:"focusedRowEnabledChange",focusedRowIndexChange:"focusedRowIndexChange",focusedRowKeyChange:"focusedRowKeyChange",groupingChange:"groupingChange",groupPanelChange:"groupPanelChange",headerFilterChange:"headerFilterChange",heightChange:"heightChange",highlightChangesChange:"highlightChangesChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",keyboardNavigationChange:"keyboardNavigationChange",keyExprChange:"keyExprChange",loadPanelChange:"loadPanelChange",masterDetailChange:"masterDetailChange",noDataTextChange:"noDataTextChange",pagerChange:"pagerChange",pagingChange:"pagingChange",remoteOperationsChange:"remoteOperationsChange",renderAsyncChange:"renderAsyncChange",repaintChangesOnlyChange:"repaintChangesOnlyChange",rowAlternationEnabledChange:"rowAlternationEnabledChange",rowDraggingChange:"rowDraggingChange",rowTemplateChange:"rowTemplateChange",rtlEnabledChange:"rtlEnabledChange",scrollingChange:"scrollingChange",searchPanelChange:"searchPanelChange",selectedRowKeysChange:"selectedRowKeysChange",selectionChange:"selectionChange",selectionFilterChange:"selectionFilterChange",showBordersChange:"showBordersChange",showColumnHeadersChange:"showColumnHeadersChange",showColumnLinesChange:"showColumnLinesChange",showRowLinesChange:"showRowLinesChange",sortByGroupSummaryInfoChange:"sortByGroupSummaryInfoChange",sortingChange:"sortingChange",stateStoringChange:"stateStoringChange",summaryChange:"summaryChange",syncLookupFilterValuesChange:"syncLookupFilterValuesChange",tabIndexChange:"tabIndexChange",toolbarChange:"toolbarChange",twoWayBindingEnabledChange:"twoWayBindingEnabledChange",visibleChange:"visibleChange",widthChange:"widthChange",wordWrapEnabledChange:"wordWrapEnabledChange"},features:[W._Bn([Tt._5,Tt._h,Tt.al,Tt.i9]),W.qOj,W.TTD],decls:0,vars:0,template:function(t,i){},encapsulation:2}),r})(),NZ=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=W.oAB({type:r}),r.\u0275inj=W.cJS({imports:[[Ce.Uz5,Ce.D_l,Ce.JxK,Ce.zZW,Ce.ynY,Ce.lgR,Ce.sni,Ce.FcQ,Ce.kEo,Ce.LNK,Ce.mtS,Ce.tRk,Ce.idP,Ce.HaS,Ce.CxW,Ce.FZZ,Ce.Inm,Ce.e1H,Ce.$D5,Ce.SCM,Ce.DTR,Ce.ZCX,Ce.Oll,Ce.Q8p,Ce.Jiy,Ce._9O,Ce.kSd,Ce.fOF,Ce.IOm,Ce.kOw,Ce.weU,Ce.waX,Ce.pxS,Ce.pGy,Ce.lj9,Ce.SH1,Ce.FJZ,Ce.RbS,Ce.$wd,Ce.xHg,Ce.p6x,Ce.vLN,Ce.rH1,Ce.lUW,Ce.kIp,Ce.yFA,Ce.$9q,Ce.nD3,Ce.Pj6,Ce.Upd,Ce.WSE,Ce.LHj,Ce._PP,Ce.ywL,Ce.WyY,Ce.$YR,Ce.aLr,Ce.uKt,Ce.YOZ,Ce.Axk,Ce.Zjs,Ce.GaT,Ce.zLN,Ce.azD,Tt.Lz,Tt.ie],Ce.Uz5,Ce.D_l,Ce.JxK,Ce.zZW,Ce.ynY,Ce.lgR,Ce.sni,Ce.FcQ,Ce.kEo,Ce.LNK,Ce.mtS,Ce.tRk,Ce.idP,Ce.HaS,Ce.CxW,Ce.FZZ,Ce.Inm,Ce.e1H,Ce.$D5,Ce.SCM,Ce.DTR,Ce.ZCX,Ce.Oll,Ce.Q8p,Ce.Jiy,Ce._9O,Ce.kSd,Ce.fOF,Ce.IOm,Ce.kOw,Ce.weU,Ce.waX,Ce.pxS,Ce.pGy,Ce.lj9,Ce.SH1,Ce.FJZ,Ce.RbS,Ce.$wd,Ce.xHg,Ce.p6x,Ce.vLN,Ce.rH1,Ce.lUW,Ce.kIp,Ce.yFA,Ce.$9q,Ce.nD3,Ce.Pj6,Ce.Upd,Ce.WSE,Ce.LHj,Ce._PP,Ce.ywL,Ce.WyY,Ce.$YR,Ce.aLr,Ce.uKt,Ce.YOZ,Ce.Axk,Ce.Zjs,Ce.GaT,Ce.zLN,Ce.azD,Tt.ie]}),r})();var BZ=ve(6358),kZ=ve(7533);const MZ=["*"];let HZ=(()=>{class r extends Tt.Ay{constructor(t,i,a,n,s,o,l){super(t,i,a,n,o,l),this._createEventEmitters([{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"resize",emit:"onResize"},{subscribe:"resizeEnd",emit:"onResizeEnd"},{subscribe:"resizeStart",emit:"onResizeStart"},{emit:"areaChange"},{emit:"elementAttrChange"},{emit:"handlesChange"},{emit:"heightChange"},{emit:"keepAspectRatioChange"},{emit:"maxHeightChange"},{emit:"maxWidthChange"},{emit:"minHeightChange"},{emit:"minWidthChange"},{emit:"rtlEnabledChange"},{emit:"widthChange"}]),s.setHost(this)}get area(){return this._getOption("area")}set area(t){this._setOption("area",t)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(t){this._setOption("elementAttr",t)}get handles(){return this._getOption("handles")}set handles(t){this._setOption("handles",t)}get height(){return this._getOption("height")}set height(t){this._setOption("height",t)}get keepAspectRatio(){return this._getOption("keepAspectRatio")}set keepAspectRatio(t){this._setOption("keepAspectRatio",t)}get maxHeight(){return this._getOption("maxHeight")}set maxHeight(t){this._setOption("maxHeight",t)}get maxWidth(){return this._getOption("maxWidth")}set maxWidth(t){this._setOption("maxWidth",t)}get minHeight(){return this._getOption("minHeight")}set minHeight(t){this._setOption("minHeight",t)}get minWidth(){return this._getOption("minWidth")}set minWidth(t){this._setOption("minWidth",t)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(t){this._setOption("rtlEnabled",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}_createInstance(t,i){return new kZ.Z(t,i)}ngOnDestroy(){this._destroyWidget()}}return r.\u0275fac=function(t){return new(t||r)(W.Y36(W.SBq),W.Y36(W.R0b),W.Y36(Tt._5),W.Y36(Tt._h),W.Y36(Tt.al),W.Y36(nl.ki),W.Y36(W.Lbi))},r.\u0275cmp=W.Xpm({type:r,selectors:[["dx-resizable"]],inputs:{area:"area",elementAttr:"elementAttr",handles:"handles",height:"height",keepAspectRatio:"keepAspectRatio",maxHeight:"maxHeight",maxWidth:"maxWidth",minHeight:"minHeight",minWidth:"minWidth",rtlEnabled:"rtlEnabled",width:"width"},outputs:{onDisposing:"onDisposing",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",onResize:"onResize",onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart",areaChange:"areaChange",elementAttrChange:"elementAttrChange",handlesChange:"handlesChange",heightChange:"heightChange",keepAspectRatioChange:"keepAspectRatioChange",maxHeightChange:"maxHeightChange",maxWidthChange:"maxWidthChange",minHeightChange:"minHeightChange",minWidthChange:"minWidthChange",rtlEnabledChange:"rtlEnabledChange",widthChange:"widthChange"},features:[W._Bn([Tt._5,Tt._h,Tt.al]),W.qOj],ngContentSelectors:MZ,decls:1,vars:0,template:function(t,i){1&t&&(W.F$t(),W.Hsn(0))},encapsulation:2}),r})(),ZZ=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=W.oAB({type:r}),r.\u0275inj=W.cJS({imports:[[Tt.Lz,Tt.ie],Tt.ie]}),r})();var ES=ve(8179),In="dx-switch",zZ=In+"-wrapper",WZ=In+"-container",KZ=In+"-inner",$Z=In+"-handle",IS=In+"-on-value",GZ=In+"-on",UZ=In+"-off",AS=za.Z.inherit({_supportedKeys:function(){var r=this.option("rtlEnabled"),e=function(i){i.preventDefault(),this._clickAction({event:i})},t=function(i,a){a.preventDefault(),a.stopPropagation(),this._saveValueChangeEvent(a),this._animateValue(i)};return(0,B.l)(this.callBase(),{space:e,enter:e,leftArrow:t.bind(this,!!r),rightArrow:t.bind(this,!r)})},_useTemplates:function(){return!1},_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,switchedOnText:ae.Z.format("dxSwitch-switchedOnText"),switchedOffText:ae.Z.format("dxSwitch-switchedOffText"),value:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===ft.Z.real().deviceType&&!ft.Z.isSimulator()},options:{focusStateEnabled:!0}}])},_feedbackHideTimeout:0,_animating:!1,_initMarkup:function(){this._renderContainers(),this.$element().addClass(In).append(this._$switchWrapper),this._renderSubmitElement(),this._renderClick(),this.setAria("role","button"),this._renderSwipeable(),this.callBase(),this._renderSwitchInner(),this._renderLabels(),this._renderValue()},_getInnerOffset:function(r,e){return(e-this._offsetDirection()*+!r)/2*100+"%"},_getHandleOffset:function(r,e){return this.option("rtlEnabled")&&(r=!r),r?100*-e-100+"%":100*-e+"%"},_renderSwitchInner:function(){this._$switchInner=(0,b.Z)("<div>").addClass(KZ).appendTo(this._$switchContainer),this._$handle=(0,b.Z)("<div>").addClass($Z).appendTo(this._$switchInner)},_renderLabels:function(){this._$labelOn=(0,b.Z)("<div>").addClass(GZ).prependTo(this._$switchInner),this._$labelOff=(0,b.Z)("<div>").addClass(UZ).appendTo(this._$switchInner),this._setLabelsText()},_renderContainers:function(){this._$switchContainer=(0,b.Z)("<div>").addClass(WZ),this._$switchWrapper=(0,b.Z)("<div>").addClass(zZ).append(this._$switchContainer)},_renderSwipeable:function(){this._createComponent(this.$element(),Cu,{elastic:!1,immediate:!0,onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._getItemSizeFunc.bind(this)})},_getItemSizeFunc:function(){return(0,we.Y_)(this._$switchContainer,!0)-(0,li.l)(this._$handle.get(0)).width},_renderSubmitElement:function(){this._$submitElement=(0,b.Z)("<input>").attr("type","hidden").appendTo(this.$element())},_getSubmitElement:function(){return this._$submitElement},_offsetDirection:function(){return this.option("rtlEnabled")?-1:1},_renderPosition:function(r,e){var t=this._getInnerOffset(r,e),i=this._getHandleOffset(r,e);this._$switchInner.css("transform"," translateX("+t+")"),this._$handle.css("transform"," translateX("+i+")")},_validateValue:function(){var r=this.option("value");"boolean"!=typeof r&&this._options.silent("value",!!r)},_renderClick:function(){var r=(0,Ee.V4)(Ft.u,this.NAME),e=this.$element();this._clickAction=this._createAction(this._clickHandler.bind(this)),z.Z.off(e,r),z.Z.on(e,r,function(t){this._clickAction({event:t})}.bind(this))},_clickHandler:function(r){this._saveValueChangeEvent(r.event),!this._animating&&!this._swiping&&this._animateValue(!this.option("value"))},_animateValue:function(r){var e=this.option("value"),t=r;if(e!==t){this._animating=!0;var i=this._getInnerOffset(e,0),a=this._getInnerOffset(t,0),n=this._getHandleOffset(e,0),s=this._getHandleOffset(t,0),o=this,l={},d={},u={},c={};l.transform=" translateX("+i+")",d.transform=" translateX("+a+")",u.transform=" translateX("+n+")",c.transform=" translateX("+s+")",this.$element().toggleClass(IS,t),ti.Z.animate(this._$handle,{from:u,to:c,duration:100}),ti.Z.animate(this._$switchInner,{from:l,to:d,duration:100,complete:function(){o._animating=!1,o.option("value",t)}})}},_swipeStartHandler:function(r){var e=this.option("value"),t=this.option("rtlEnabled"),i=t?0:1,a=t?1:0;r.event.maxLeftOffset=e?i:a,r.event.maxRightOffset=e?a:i,this._swiping=!0,this._feedbackDeferred=new X.BH,(0,LC.dR)(this._feedbackDeferred),this._toggleActiveState(this.$element(),this.option("activeStateEnabled"))},_swipeUpdateHandler:function(r){this._renderPosition(this.option("value"),r.event.offset)},_swipeEndHandler:function(r){var e=this,t=this._offsetDirection(),i={},a={},n=this._getInnerOffset(e.option("value"),r.event.targetOffset),s=this._getHandleOffset(e.option("value"),r.event.targetOffset);i.transform=" translateX("+n+")",a.transform=" translateX("+s+")",ti.Z.animate(this._$handle,{to:a,duration:100}),ti.Z.animate(this._$switchInner,{to:i,duration:100,complete:function(){e._swiping=!1;var o=e.option("value")+t*r.event.targetOffset;e._saveValueChangeEvent(r.event),e.option("value",!!o),e._feedbackDeferred.resolve(),e._toggleActiveState(e.$element(),!1)}})},_renderValue:function(){this._validateValue();var r=this.option("value");this._renderPosition(r,0),this.$element().toggleClass(IS,r),this._getSubmitElement().val(r),this.setAria({pressed:r,label:this.option(r?"switchedOnText":"switchedOffText")})},_setLabelsText:function(){this._$labelOn&&this._$labelOn.text(this.option("switchedOnText")),this._$labelOff&&this._$labelOff.text(this.option("switchedOffText"))},_visibilityChanged:function(r){r&&this.repaint()},_optionChanged:function(r){switch(r.name){case"width":delete this._marginBound,this._refresh();break;case"switchedOnText":case"switchedOffText":this._setLabelsText();break;case"value":this._renderValue(),this.callBase(r);break;default:this.callBase(r)}}});(0,Rt.Z)("dxSwitch",AS);const jZ=AS,YZ={provide:ve(95).JU,useExisting:(0,W.Gpc)(()=>TS),multi:!0};let TS=(()=>{class r extends Tt.Ay{constructor(t,i,a,n,s,o,l,d){super(t,i,a,n,l,d),this._watcherHelper=n,this._idh=s,this.touched=u=>{},this._createEventEmitters([{subscribe:"contentReady",emit:"onContentReady"},{subscribe:"disposing",emit:"onDisposing"},{subscribe:"initialized",emit:"onInitialized"},{subscribe:"optionChanged",emit:"onOptionChanged"},{subscribe:"valueChanged",emit:"onValueChanged"},{emit:"accessKeyChange"},{emit:"activeStateEnabledChange"},{emit:"disabledChange"},{emit:"elementAttrChange"},{emit:"focusStateEnabledChange"},{emit:"heightChange"},{emit:"hintChange"},{emit:"hoverStateEnabledChange"},{emit:"isDirtyChange"},{emit:"isValidChange"},{emit:"nameChange"},{emit:"readOnlyChange"},{emit:"rtlEnabledChange"},{emit:"switchedOffTextChange"},{emit:"switchedOnTextChange"},{emit:"tabIndexChange"},{emit:"validationErrorChange"},{emit:"validationErrorsChange"},{emit:"validationMessageModeChange"},{emit:"validationMessagePositionChange"},{emit:"validationStatusChange"},{emit:"valueChange"},{emit:"visibleChange"},{emit:"widthChange"},{emit:"onBlur"}]),this._idh.setHost(this),o.setHost(this)}get accessKey(){return this._getOption("accessKey")}set accessKey(t){this._setOption("accessKey",t)}get activeStateEnabled(){return this._getOption("activeStateEnabled")}set activeStateEnabled(t){this._setOption("activeStateEnabled",t)}get disabled(){return this._getOption("disabled")}set disabled(t){this._setOption("disabled",t)}get elementAttr(){return this._getOption("elementAttr")}set elementAttr(t){this._setOption("elementAttr",t)}get focusStateEnabled(){return this._getOption("focusStateEnabled")}set focusStateEnabled(t){this._setOption("focusStateEnabled",t)}get height(){return this._getOption("height")}set height(t){this._setOption("height",t)}get hint(){return this._getOption("hint")}set hint(t){this._setOption("hint",t)}get hoverStateEnabled(){return this._getOption("hoverStateEnabled")}set hoverStateEnabled(t){this._setOption("hoverStateEnabled",t)}get isDirty(){return this._getOption("isDirty")}set isDirty(t){this._setOption("isDirty",t)}get isValid(){return this._getOption("isValid")}set isValid(t){this._setOption("isValid",t)}get name(){return this._getOption("name")}set name(t){this._setOption("name",t)}get readOnly(){return this._getOption("readOnly")}set readOnly(t){this._setOption("readOnly",t)}get rtlEnabled(){return this._getOption("rtlEnabled")}set rtlEnabled(t){this._setOption("rtlEnabled",t)}get switchedOffText(){return this._getOption("switchedOffText")}set switchedOffText(t){this._setOption("switchedOffText",t)}get switchedOnText(){return this._getOption("switchedOnText")}set switchedOnText(t){this._setOption("switchedOnText",t)}get tabIndex(){return this._getOption("tabIndex")}set tabIndex(t){this._setOption("tabIndex",t)}get validationError(){return this._getOption("validationError")}set validationError(t){this._setOption("validationError",t)}get validationErrors(){return this._getOption("validationErrors")}set validationErrors(t){this._setOption("validationErrors",t)}get validationMessageMode(){return this._getOption("validationMessageMode")}set validationMessageMode(t){this._setOption("validationMessageMode",t)}get validationMessagePosition(){return this._getOption("validationMessagePosition")}set validationMessagePosition(t){this._setOption("validationMessagePosition",t)}get validationStatus(){return this._getOption("validationStatus")}set validationStatus(t){this._setOption("validationStatus",t)}get value(){return this._getOption("value")}set value(t){this._setOption("value",t)}get visible(){return this._getOption("visible")}set visible(t){this._setOption("visible",t)}get width(){return this._getOption("width")}set width(t){this._setOption("width",t)}change(t){}_createInstance(t,i){return new jZ(t,i)}writeValue(t){this.eventHelper.lockedValueChangeEvent=!0,this.value=t,this.eventHelper.lockedValueChangeEvent=!1}setDisabledState(t){this.disabled=t}registerOnChange(t){this.change=t}registerOnTouched(t){this.touched=t}_createWidget(t){super._createWidget(t),this.instance.on("focusOut",i=>{this.eventHelper.fireNgEvent("onBlur",[i])})}ngOnDestroy(){this._destroyWidget()}ngOnChanges(t){super.ngOnChanges(t),this.setupChanges("validationErrors",t)}setupChanges(t,i){t in this._optionsToUpdate||this._idh.setup(t,i)}ngDoCheck(){this._idh.doCheck("validationErrors"),this._watcherHelper.checkWatchers(),super.ngDoCheck(),super.clearChangedOptions()}_setOption(t,i){let a=this._idh.setupSingle(t,i),n=null!==this._idh.getChanges(t,i);(a||n)&&super._setOption(t,i)}}return r.\u0275fac=function(t){return new(t||r)(W.Y36(W.SBq),W.Y36(W.R0b),W.Y36(Tt._5),W.Y36(Tt._h),W.Y36(Tt.i9),W.Y36(Tt.al),W.Y36(nl.ki),W.Y36(W.Lbi))},r.\u0275cmp=W.Xpm({type:r,selectors:[["dx-switch"]],hostBindings:function(t,i){1&t&&W.NdJ("valueChange",function(n){return i.change(n)})("onBlur",function(n){return i.touched(n)})},inputs:{accessKey:"accessKey",activeStateEnabled:"activeStateEnabled",disabled:"disabled",elementAttr:"elementAttr",focusStateEnabled:"focusStateEnabled",height:"height",hint:"hint",hoverStateEnabled:"hoverStateEnabled",isDirty:"isDirty",isValid:"isValid",name:"name",readOnly:"readOnly",rtlEnabled:"rtlEnabled",switchedOffText:"switchedOffText",switchedOnText:"switchedOnText",tabIndex:"tabIndex",validationError:"validationError",validationErrors:"validationErrors",validationMessageMode:"validationMessageMode",validationMessagePosition:"validationMessagePosition",validationStatus:"validationStatus",value:"value",visible:"visible",width:"width"},outputs:{onContentReady:"onContentReady",onDisposing:"onDisposing",onInitialized:"onInitialized",onOptionChanged:"onOptionChanged",onValueChanged:"onValueChanged",accessKeyChange:"accessKeyChange",activeStateEnabledChange:"activeStateEnabledChange",disabledChange:"disabledChange",elementAttrChange:"elementAttrChange",focusStateEnabledChange:"focusStateEnabledChange",heightChange:"heightChange",hintChange:"hintChange",hoverStateEnabledChange:"hoverStateEnabledChange",isDirtyChange:"isDirtyChange",isValidChange:"isValidChange",nameChange:"nameChange",readOnlyChange:"readOnlyChange",rtlEnabledChange:"rtlEnabledChange",switchedOffTextChange:"switchedOffTextChange",switchedOnTextChange:"switchedOnTextChange",tabIndexChange:"tabIndexChange",validationErrorChange:"validationErrorChange",validationErrorsChange:"validationErrorsChange",validationMessageModeChange:"validationMessageModeChange",validationMessagePositionChange:"validationMessagePositionChange",validationStatusChange:"validationStatusChange",valueChange:"valueChange",visibleChange:"visibleChange",widthChange:"widthChange",onBlur:"onBlur"},features:[W._Bn([Tt._5,Tt._h,YZ,Tt.al,Tt.i9]),W.qOj,W.TTD],decls:0,vars:0,template:function(t,i){},encapsulation:2}),r})(),XZ=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=W.oAB({type:r}),r.\u0275inj=W.cJS({imports:[[Tt.Lz,Tt.ie],Tt.ie]}),r})();var DS=ve(167),JZ=ve(5861);function OS(r){var e,t,i,a;return(0,C.kE)(r)?{top:r,right:r,bottom:r,left:r}:{top:null!==(e=r?.top)&&void 0!==e?e:0,right:null!==(t=r?.right)&&void 0!==t?t:0,bottom:null!==(i=r?.bottom)&&void 0!==i?i:0,left:null!==(a=r?.left)&&void 0!==a?a:0}}var mv="...";function ch(r,e){return e*(1/r.internal.scaleFactor)}function Cv(r){return r.internal.pageSize.getWidth()}function ez(r){return r.internal.pageSize.getHeight()}function wv(r,e,t,i){var{wordWrapEnabled:a,targetRectWidth:n}=i;if(a){var s=r.getFont(t?.name,t?.style);return r.splitTextToSize(e,n,{fontSize:t?.size||r.getFontSize(),fontName:s.fontName,fontStyle:s.fontStyle})}var o=e.split("\n").filter(u=>""!==u).join(" ");if(rd(r,o,t).w<=n)return[o];for(var l=rd(r,o+mv,t).w;o.length>0&&l>n;){var d=0;l>=2*n&&(d=o.length/2),d<1&&(d=1),l=rd(r,(o=o.substring(0,o.length-d))+mv,t).w}return[o+mv]}function bv(r,e){var t=r-(e.left+e.right);return t>=0?t:0}function rd(r,e,t){return r.getTextDimensions(e,{font:r.getFont(t?.name,t?.style),fontSize:t?.size||r.getFontSize()})}function ad(r,e,t,i){var{wordWrapEnabled:a,targetRectWidth:n}=i;return rd(r,e,t).h*wv(r,e,t,{wordWrapEnabled:a,targetRectWidth:n}).length*r.getLineHeightFactor()}var RS=(r,e)=>r+e;var yv={base:{font:{size:10},borderWidth:.5,borderColor:"#979797"},header:{textColor:"#979797"},group:{},data:{},groupFooter:{},totalFooter:{}};function mz(r){for(var{doc:e,dataProvider:t,rowIndex:i,wordWrapEnabled:a,columns:n,styles:s,rowType:o,backgroundColor:l,rtlEnabled:d}=r,u=[],c=0;c<n.length;c++){var f,p=t.getCellData(i,c,!0),_=s[t.getStyleId(i,c)],w=wz(n[c],o,_),S=d?"right":"left",x=ch(e,5),E={text:bz(p.value,_.format),verticalAlign:"middle",horizontalAlign:null!==(f=w.alignment)&&void 0!==f?f:S,wordWrapEnabled:a,backgroundColor:l,padding:{top:x,right:x,bottom:x,left:x},_rect:{},_internalTextOptions:{}};d&&(E._internalTextOptions.isInputVisual=!1,E._internalTextOptions.isOutputVisual=!0,E._internalTextOptions.isInputRtl=!0,E._internalTextOptions.isOutputRtl=!1);var V={gridCell:p.cellSourceData,pdfCell:(0,ye.Z)({},E,w)};if("header"===o){var N=t.getCellMerging(i,c);N&&N.rowspan>0&&(V.rowSpan=N.rowspan),N&&N.colspan>0&&(V.colSpan=N.colspan)}else if("group"===o){var Q=d?"drawLeftBorder":"drawRightBorder";if(V.pdfCell[d?"drawRightBorder":"drawLeftBorder"]=0===c,V.pdfCell[Q]=c===n.length-1,c>0){var q=u.slice(1).reduce((se,he)=>se&&!(0,C.$K)(he.pdfCell.text),!0);if(!(0,C.$K)(V.pdfCell.text)&&q){u[0].pdfCell[Q]=!0;for(var k=0;k<u.length;k++)u[k].colSpan=u.length;V.colSpan=u.length}}}u.push(V)}return u}function wz(r,e,t){var i=(0,ye.Z)({},yv.base,yv[e]),a="header"===e?r.alignment:t.alignment;return a&&(i.alignment=a),t.bold&&"header"!==e&&(i.font=(0,ye.Z)({},i.font,{style:"bold"})),i}function bz(r,e){if((0,C.$K)(e)){if((0,C.J_)(r))return pt.Z.format(r,e);if((0,C.kE)(r))return qt.Z.format(r,e)}return r?.toString()}var yz=["_rect","gridCell"];function LS(r){return r.charAt(0).toUpperCase()+r.slice(1)}function ii(r){return Math.round(1e3*r)/1e3}function ph(r,e,t,i,a){r.line(ii(e),ii(t),ii(i),ii(a))}function PS(r,e,t,i,a,n){(0,C.$K)(n)?r.rect(ii(e),ii(t),ii(i),ii(a),n):r.rect(ii(e),ii(t),ii(i),ii(a))}function xv(r,e,t,i){var{borderWidth:a,borderColor:n,drawLeftBorder:s=!0,drawRightBorder:o=!0,drawTopBorder:l=!0,drawBottomBorder:d=!0}=t;if(!(0,C.$K)(e))throw"rect is required";!s&&!o&&!l&&!d||(s&&o&&l&&d?(FS(r,{borderWidth:a,borderColor:n},i),PS(r,e.x,e.y,e.w,e.h)):(FS(r,{borderWidth:a,borderColor:n},i),l&&ph(r,e.x,e.y,e.x+e.w,e.y),s&&ph(r,e.x,e.y,e.x,e.y+e.h),o&&ph(r,e.x+e.w,e.y,e.x+e.w,e.y+e.h),d&&ph(r,e.x,e.y+e.h,e.x+e.w,e.y+e.h)))}function FS(r,e,t){var{borderWidth:i,borderColor:a}=e,n=(0,C.$K)(i)?i:t.borderWidth;n!==Ev(r)&&VS(r,ch(r,n)),Sv(r,"draw",(0,C.$K)(a)?a:t.borderColor)}function Sv(r,e,t){var i="get".concat(LS(e),"Color"),a="set".concat(LS(e),"Color"),{ch1:n=t,ch2:s,ch3:o,ch4:l}=t;(r.__private__.decodeColorString(r.__private__.encodeColorString({ch1:n,ch2:s,ch3:o,ch4:l,precision:"text"===e?3:2}))!==r[i]()||"fill"===e)&&r[a].apply(r,[n,s,o,l].filter(u=>void 0!==u))}function Ev(r){var e;return(0,C.$K)(r.getLineWidth)?r.getLineWidth():null!==(e=r.__borderWidth)&&void 0!==e?e:.200025}function VS(r,e){r.setLineWidth(e),(0,C.$K)(r.getLineWidth)||(r.__borderWidth=e)}var NS=r=>"header"===r?.sourceCellInfo.gridCell.rowType;function fh(r,e,t){return(0,ye.Z)({},r,{sourceCellInfo:(0,ye.Z)({},r.sourceCellInfo,{text:e}),y:t})}function kS(r){return[].concat.apply([],r.map(e=>e.cells.filter(t=>!(0,C.$K)(t.pdfCell.isMerged)).map(t=>(0,ye.Z)({},t.pdfCell._rect,{sourceCellInfo:(0,ye.Z)({},t.pdfCell,{gridCell:t.gridCell})}))))}function MS(r,e,t,i,a,n,s){for(var o=[],l=[...r],d=(c,f)=>a(c,f+e),u=function(){var c=0,f=l.filter(V=>{var N=V[t]+V[i];return!!a(0===o.length,N)&&(c<=N&&(c=N),!0)}),p=((r,e)=>e&&NS(r[r.length-1]))(f,0===o.length),_=((r,e,t,i,a)=>{if(!i)return[];var n=r[r.length-1],s=e[r.length];if(!s||NS(s))return[];if(a(t,s.h)&&!t)return[];var l=e.filter(f=>{var{y:p}=f;return p===s.y}),d=n.y+n.h,[u,c]=((r,e,t,i,a)=>{for(var[n,s]=i(e,r),o=[e?n.map(l=>(0,ye.Z)({},l,{y:t})):n];!a(!1,s[0].h);)[n,s]=i(!1,s),o.push(n);return[o,s]})(l,t,d,i,a);return((r,e,t)=>{e.forEach((s,o)=>{s.sourceCellInfo.text=t[o].sourceCellInfo.text,s.h=t[o].h});var i=r.indexOf(e[e.length-1])+1;if(!(i>=r.length))for(var a=r[i].y-(e[0].y+t[0].h),n=i;n<r.length;n++)r[n].y=r[n].y-a})(e,l,c),u})(f,l,p,s,d);if(l.filter(V=>c-V[t]>.001&&V[t]+V[i]-c>.001).forEach(V=>{n(V,c,f,l);var N=l.indexOf(V);-1!==N&&l.splice(N,1)}),f.forEach(V=>{var N=l.indexOf(V);-1!==N&&l.splice(N,1)}),l.forEach(V=>{V[t]=(0,C.$K)(c)?V[t]-c+e:V[t]}),p&&_.length>0){var[x,...E]=_;o.push([...f,...x]),o.push(...E)}else if(f.length>0)o.push(f),o.push(..._);else{if(!(_.length>0))return o.push(l),1;o.push(..._),o.push(l)}};l.length>0&&!u(););return o}const zz=Ae;class HS{constructor(e,t,i,a){this._$targetElement=t,this._$container=i,this._loadPanel=e._createComponent((0,b.Z)("<div>").addClass("dx-export-loadpanel").appendTo(this._$container),n_.Z,this.getOptions(a))}getDefaultOptions(){return{animation:null,shading:!1,height:90,width:200,container:this._$container}}getOptions(e){return e.message=(0,C.$K)(e.text)?e.text:ae.Z.format("dxDataGrid-exporting"),(0,B.l)(this.getDefaultOptions(),e)}show(){this._loadPanel.option("position",zz.calculateLoadPanelPosition(this._$targetElement)),this._loadPanel.show()}dispose(){(0,b.Z)(this._loadPanel.element()).remove(),delete this._loadPanel}}var ZS_getFullOptions=function Kz(r){var{jsPDFDocument:e}=r,t=(0,B.l)({},r);return(0,C.$K)(t.topLeft)||(t.topLeft={x:0,y:0}),(0,C.$K)(t.indent)||(t.indent=0),(0,C.$K)(t.repeatHeaders)||(t.repeatHeaders=!0),(0,C.$K)(t.margin)||(t.margin=ch(e,40)),t.margin=OS(t.margin),Array.isArray(t.columnWidths)||(t.columnWidths=[]),(0,C.$K)(t.loadPanel)||(t.loadPanel={}),(0,C.$K)(t.loadPanel.enabled)||(t.loadPanel.enabled=!0),(0,C.$K)(t.loadPanel.text)||(t.loadPanel.text=ae.Z.format("dxDataGrid-exporting")),t},ZS_export=function $z(r){var e,l,{jsPDFDocument:t,component:i,selectedRowsOnly:a,loadPanel:n}=r,s=(null===(e=i._getInternalInstance)||void 0===e?void 0:e.call(i))||i,o=s.option("loadPanel")&&s.option("loadPanel").enabled;if(o&&i.option("loadPanel.enabled",!1),n.enabled&&(0,Je.Ym)()){var d=i.getView("rowsView");(l=new HS(i,d.element(),d.element().parent(),n)).show()}var u=i.getDataProvider(a);return new Promise(c=>{u.ready().done(()=>{var f,p,_=function _z(r,e,t,i){for(var a=[],n=e.getRowsCount(),s=!!t.option("wordWrapEnabled"),o=!!t.option("rtlEnabled"),l=e.getColumns(),d=e.getStyles(),u=0;u<n;u++){var c=e.getCellData(u,0,!0).cellSourceData.rowType,f="header"!==c?e.getGroupLevel(u):0,p=a[u-1];"groupFooter"===c&&"groupFooter"===p?.rowType&&(f=p.indentLevel-1),a.push({rowType:c,indentLevel:f,cells:mz({doc:r,dataProvider:e,rowIndex:u,wordWrapEnabled:s,columns:l,styles:d,rowType:c,backgroundColor:"header"===c?i:void 0,rtlEnabled:o}),rowIndex:u})}return a}(t,u,i,null===(f=r.rowOptions)||void 0===f||null===(p=f.headerStyles)||void 0===p?void 0:p.backgroundColor);r.customizeCell&&_.forEach(E=>E.cells.forEach(V=>r.customizeCell(V))),function QZ(r){r.forEach(e=>{e.cells.forEach(t=>{var{pdfCell:i}=t;i.padding=OS(i.padding)})})}(_),function sz(r,e,t,i){var a=function az(r,e,t,i,a){var n=e.getColumnsWidths().map(u=>ch(r,u??150)),s=n.filter((u,c)=>!(0,C.$K)(a[c])).reduce(RS,0),o=a.filter(u=>(0,C.kE)(u)).reduce(RS,0),l=function nz(r,e,t){return Cv(r)-e-t.left-t.right}(r,t,i),d=o<l?(l-o)/s:1;return n.map((u,c)=>{var f;return null!==(f=a[c])&&void 0!==f?f:u*d})}(r,e,i.topLeft.x,i.margin,i.columnWidths);t.forEach(n=>{n.cells.forEach((s,o)=>{var{pdfCell:d}=s;d._rect.w=a[o]})})}(t,u,_,r),function uz(r,e){r.forEach(t=>{t.cells[0].pdfCell._rect.w-=t.indentLevel*e.indent})}(_,r),function lz(r){for(var e=0;e<r.length;e++)for(var t=r[e],i=0;i<t.cells.length;i++){var a=t.cells[i];if((0,C.$K)(a.colSpan)&&!(0,C.$K)(a.pdfCell.isMerged))for(var n=1;n<=a.colSpan;n++){var s=r[e].cells[i+n];a.pdfCell._rect.w+=s.pdfCell._rect.w,s.pdfCell._rect.w=0,s.pdfCell.isMerged=!0}}}(_),function oz(r,e,t){e.forEach(i=>{var n,a=i.cells.map(o=>o.pdfCell);if(t.onRowExporting){var s={rowCells:a};t.onRowExporting(s),(0,C.$K)(s.rowHeight)&&(n=s.rowHeight)}i.height=(0,C.$K)(n)?n:function tz(r,e,t){if(e.length!==t.length)throw"the cells count must be equal to the count of the columns";for(var i=0,a=0;a<e.length;a++)if(!(0,C.$K)(e[a].rowSpan)){var n=e[a].pdfCell.text,s=e[a].pdfCell.padding,o=e[a].pdfCell.font,l=e[a].pdfCell.wordWrapEnabled,u=bv(t[a],s);if((0,C.$K)(n)){var f=(""!==n?ad(r,n,o,{wordWrapEnabled:l,targetRectWidth:u}):0)+s.top+s.bottom;i<f&&(i=f)}}return i}(r,i.cells,a.map(o=>o._rect.w)),a.forEach(o=>{o._rect.h=i.height})})}(t,_,r),function dz(r){for(var e=0;e<r.length;e++)for(var t=r[e],i=0;i<t.cells.length;i++){var a=t.cells[i];if((0,C.$K)(a.rowSpan)&&!(0,C.$K)(a.pdfCell.isMerged))for(var n=1;n<=a.rowSpan;n++){var s=r[e+n].cells[i];a.pdfCell._rect.h+=s.pdfCell._rect.h,s.pdfCell._rect.h=0,s.pdfCell.isMerged=!0}}}(_),function fz(r,e){var t=function vz(r,e){var t=Array.from({length:e.length},()=>0),i=function gz(r){var e=t=>{var i=t.cells.map(a=>{var n;return null!==(n=a.rowSpan)&&void 0!==n?n:0});return Math.max(...i)};return[...r].sort((t,i)=>{var a=e(t),n=e(i);return a>n?1:n>a?-1:0})}(e);return i.forEach(a=>{a.cells.filter(s=>(0,C.$K)(s.rowSpan)).forEach(s=>{var o=bv(s.pdfCell._rect.w,s.pdfCell.padding),d=ad(r,s.pdfCell.text,s.pdfCell.font,{wordWrapEnabled:s.pdfCell.wordWrapEnabled,targetRectWidth:o})+s.pdfCell.padding.top+s.pdfCell.padding.bottom,u=s.rowSpan+1,c=e.slice(a.rowIndex,a.rowIndex+u).reduce((_,w)=>_+w.height+t[w.rowIndex],0);if(d>c)for(var f=(d-c)/u,p=a.rowIndex;p<a.rowIndex+u;p++)t[p]+=f})}),t}(r,e);e.forEach(i=>{i.height+=t[i.rowIndex]}),e.forEach(i=>{i.cells.forEach(a=>{var n,s=(null!==(n=a.rowSpan)&&void 0!==n?n:0)+1;a.pdfCell._rect.h=e.slice(i.rowIndex,i.rowIndex+s).reduce((o,l)=>o+l.height,0)})})}(t,_),function cz(r,e,t){var i,a=t?.topLeft,n=t?.margin,s=(null!==(i=a?.y)&&void 0!==i?i:0)+n.top;e.forEach(o=>{var l,d=(null!==(l=a?.x)&&void 0!==l?l:0)+n.left,u=o.indentLevel*t.indent;o.cells.forEach(c=>{c.pdfCell._rect.x=d+u,c.pdfCell._rect.y=s,d+=c.pdfCell._rect.w}),s+=o.height})}(0,_,r),function hz(r){for(var e=0;e<r.length;e++)for(var t=r[e].cells,i=0;i<t.length;i++){var a=t[i].pdfCell,n=i>=1?t[i-1].pdfCell:null,s=e>=1?r[e-1].cells[i].pdfCell:null;!1!==a.drawLeftBorder||(0,C.$K)(t[i].colSpan)?(0,C.$K)(a.drawLeftBorder)||(0,C.$K)(n)&&!1===n.drawRightBorder&&(a.drawLeftBorder=!1):(0,C.$K)(n)&&(n.drawRightBorder=!1),!1===a.drawTopBorder?(0,C.$K)(s)&&(s.drawBottomBorder=!1):(0,C.$K)(a.drawTopBorder)||(0,C.$K)(s)&&!1===s.drawBottomBorder&&(a.drawTopBorder=!1)}}(_),function iz(r,e){e.forEach(t=>{t.cells.forEach(i=>{var{pdfCell:a}=i;if((0,C.$K)(a.text)){var n=wv(r,a.text,a.font,{wordWrapEnabled:a.wordWrapEnabled,targetRectWidth:bv(a._rect.w,a.padding)});a.text=n.join("\n")}})})}(t,_);var w=function Rz(r){var e=r.getFont();return{borderWidth:Ev(r),borderColor:r.getDrawColor(),font:{name:e.fontName,style:e.fontStyle,size:r.getFontSize()},textColor:r.getTextColor()}}(t),S=!!i.option("rtlEnabled"),x=function Zz(r,e,t,i,a){if(0===e.length)return[[]];var n={x:Cv(r)-t.margin.right,y:ez(r)-t.margin.bottom},s=e.filter(p=>"header"===p.rowType),o=s.reduce((p,_)=>p+_.height,0),l=MS(kS(e),t.margin.top,"y","h",(p,_)=>ii(_+(!p&&t.repeatHeaders?o:0))<=ii(n.y),(p,_,w,S)=>{var x={sourceRect:p,topRect:{x:p.x,y:p.y,w:p.w,h:_-p.y},bottomRect:{x:p.x,y:_,w:p.w,h:p.h-(_-p.y)}};a(x),w.push(x.topRect),S.push(x.bottomRect)},((r,e,t,i)=>(a,n)=>{var s=[],o=[],l=0,d=0;return n.forEach(u=>{var{w:c,sourceCellInfo:f}=u,p=!a&&e.repeatHeaders?t:t+e.topLeft.y,_=rd(r,f.text,f.font).h,w=f.padding.top+f.padding.bottom,x=Math.floor((i.y-p-w-e.margin.top)/(_*r.getLineHeightFactor())),E=wv(r,f.text,f.font,{wordWrapEnabled:f.wordWrapEnabled,targetRectWidth:c});if(x<E.length){var V=E.slice(0,x).join("\n"),N=ad(r,V,f.font,{wordWrapEnabled:f.wordWrapEnabled,targetRectWidth:c});l=Math.max(l,N+w),d=u.h-N,s.push(fh(u,V,e.margin.top)),o.push(fh(u,E.slice(x).join("\n"),e.margin.top))}else{var j=ad(r,f.text,f.font,{wordWrapEnabled:f.wordWrapEnabled,targetRectWidth:c});l=Math.max(l,j+w),d=Math.max(d,j+w),s.push(fh(u,f.text,e.margin.top)),o.push(fh(u,"",e.margin.top))}}),s.forEach(u=>u.h=l),o.forEach(u=>u.h=d),[s,o]})(r,t,o,n));if(t.repeatHeaders)for(var d=1;d<l.length;d++){l[d].forEach(p=>p.y+=o);var u=kS(s);u.forEach(p=>{p.y-=t.topLeft.y}),l[d]=[...u,...l[d]]}for(var c=0;c<l.length;){var f=MS(l[c],t.margin.left,"x","w",(p,_)=>ii(_)<=ii(n.x),(p,_,w,S)=>{var x={sourceRect:p,leftRect:{x:p.x,y:p.y,w:_-p.x,h:p.h},rightRect:{x:_,y:p.y,w:p.w-(_-p.x),h:p.h}};i(x),w.push(x.leftRect),S.push(x.rightRect)});f.length>1?(l.splice(c,1,...f),c+=f.length):c+=1}return l.map(p=>p.map(_=>(0,ye.Z)({},_.sourceCellInfo,{_rect:_})))}(t,_,r,E=>{var V,{sourceRect:N,leftRect:j,rightRect:Q}=E,q={},k={};if((null===(V=N.sourceCellInfo.text)||void 0===V?void 0:V.length)>0)if(S){var P,U,K,ge,ue,xe,he=t.getTextWidth(N.sourceCellInfo.text)>j.w,F=!(0,C.$K)(N.sourceCellInfo.horizontalAlign)||"right"===N.sourceCellInfo.horizontalAlign;if(he||!F)"right"===(null===(P=N.sourceCellInfo)||void 0===P?void 0:P.horizontalAlign)?ue=(ge=null!==(xe=N.sourceCellInfo._textLeftOffset)&&void 0!==xe?xe:0)+j.w:"center"===(null===(U=N.sourceCellInfo)||void 0===U?void 0:U.horizontalAlign)?ge=(ue=N.x+N.w-(Q.x+Q.w)+N.sourceCellInfo._rect.w/2-j.w/2)-Q.w:"left"===(null===(K=N.sourceCellInfo)||void 0===K?void 0:K.horizontalAlign)&&(ge=(ue=N.x+N.w-(Q.x+Q.w))-Q.w),q=(0,ye.Z)({},{_textLeftOffset:ge}),k=(0,ye.Z)({},{_textLeftOffset:ue});else k=(0,ye.Z)({},{text:""})}else{var ce=t.getTextWidth(N.sourceCellInfo.text)>j.w,Te=!(0,C.$K)(N.sourceCellInfo.horizontalAlign)||"left"===N.sourceCellInfo.horizontalAlign;if(ce||!Te){var Ie,Me,D,H,$,ee;if("left"===(null===(Ie=N.sourceCellInfo)||void 0===Ie?void 0:Ie.horizontalAlign))$=(H=null!==(ee=N.sourceCellInfo._textLeftOffset)&&void 0!==ee?ee:0)-j.w;else if("center"===(null===(Me=N.sourceCellInfo)||void 0===Me?void 0:Me.horizontalAlign)){var oe,_e=null!==(oe=N.sourceCellInfo._textLeftOffset)&&void 0!==oe?oe:0;H=_e+(N.x+N.w/2)-(j.x+j.w/2),$=_e+(N.x+N.w/2)-(Q.x+Q.w/2)}else"right"===(null===(D=N.sourceCellInfo)||void 0===D?void 0:D.horizontalAlign)&&(H=N.x+N.w-(j.x+j.w),$=N.x+N.w-(Q.x+Q.w));q=(0,ye.Z)({},{_textLeftOffset:H}),k=(0,ye.Z)({},{_textLeftOffset:$})}else k=(0,ye.Z)({},{text:""})}j.sourceCellInfo=(0,ye.Z)({},N.sourceCellInfo,{debugSourceCellInfo:N.sourceCellInfo},q),Q.sourceCellInfo=(0,ye.Z)({},N.sourceCellInfo,{debugSourceCellInfo:N.sourceCellInfo},k)},E=>{var V,{sourceRect:N,topRect:j,bottomRect:Q}=E,q={},k={};if((null===(V=N.sourceCellInfo.text)||void 0===V?void 0:V.length)>0){var he,F=t.getTextDimensions(N.sourceCellInfo.text).h>j.h,P="top"===(null===(he=N.sourceCellInfo)||void 0===he?void 0:he.verticalAlign);if(F||!P){var U,K,ge,ue,xe,ce;if("top"===(null===(U=N.sourceCellInfo)||void 0===U?void 0:U.verticalAlign))xe=(ue=null!==(ce=N.sourceCellInfo._textTopOffset)&&void 0!==ce?ce:0)-j.h;else if("middle"===(null===(K=N.sourceCellInfo)||void 0===K?void 0:K.verticalAlign)){var Te,Ie=null!==(Te=N.sourceCellInfo._textTopOffset)&&void 0!==Te?Te:0;ue=Ie+(N.y+N.h/2)-(j.y+j.h/2),xe=Ie+(N.y+N.h/2)-(Q.y+Q.h/2)}else"bottom"===(null===(ge=N.sourceCellInfo)||void 0===ge?void 0:ge.verticalAlign)&&(ue=N.y+N.h-(j.y+j.h),xe=N.y+N.h-(Q.y+Q.h));q=(0,ye.Z)({},{_textTopOffset:ue}),k=(0,ye.Z)({},{_textTopOffset:xe})}else k=(0,ye.Z)({},{text:""})}j.sourceCellInfo=(0,ye.Z)({},N.sourceCellInfo,{debugSourceCellInfo:N.sourceCellInfo},q),Q.sourceCellInfo=(0,ye.Z)({},N.sourceCellInfo,{debugSourceCellInfo:N.sourceCellInfo},k)});S&&function rz(r,e,t){e.forEach(i=>{i.forEach(a=>{var n=Cv(r)-(a._rect.x+a._rect.w);a._rect.x=n+(t.margin.left-t.margin.right)})})}(t,x,r),x.forEach((E,V)=>{if(V>0&&function Pz(r){r.addPage(),function Fz(r){(0,C.$K)(r.getLineWidth)||(r.__borderWidth=null)}(r)}(t),function xz(r,e,t,i){t.forEach(a=>{var{_rect:n,gridCell:s}=a,o=(0,hi.Z)(a,yz),{x:l,y:d,w:u,h:c}=n,p={doc:r,rect:{x:l,y:d,w:u,h:c},pdfCell:o,gridCell:s,cancel:!1};e?.(p),p.cancel||(function Iz(r,e){(0,C.$K)(e.backgroundColor)&&(Sv(r,"fill",e.backgroundColor),PS(r,e._rect.x,e._rect.y,e._rect.w,e._rect.h,"F"))}(r,a),function Az(r,e,t){if((0,C.$K)(e.text)&&""!==e.text){var{textColor:i,font:a,_rect:n,padding:s}=e;!function Oz(r,e,t){var{textColor:i,font:a}=e;Sv(r,"text",(0,C.$K)(i)?i:t.textColor);var n=(0,C.$K)(a)?(0,B.l)({},t.font,a):t.font,s=r.getFont();(n.name!==s.fontName||n.style!==s.fontStyle||(0,C.$K)(n.weight))&&r.setFont(n.name,n.style,n.weight),n.size!==r.getFontSize()&&r.setFontSize(n.size)}(r,{textColor:i,font:a},t);var l,d,o={x:n.x+s.left,y:n.y+s.top,w:n.w-(s.left+s.right),h:n.h-(s.top+s.bottom)};((0,C.$K)(e._textLeftOffset)||(0,C.$K)(e._textTopOffset))&&(o.x=o.x+(null!==(l=e._textLeftOffset)&&void 0!==l?l:0),o.y=o.y+(null!==(d=e._textTopOffset)&&void 0!==d?d:0),r.saveGraphicsState(),function Vz(r,e,t,i,a){r.moveTo(ii(e),ii(t)),r.lineTo(ii(e+i),ii(t)),r.lineTo(ii(e+i),ii(t+a)),r.lineTo(ii(e),ii(t+a)),r.clip(),r.discardPath()}(r,e._rect.x,e._rect.y,e._rect.w,e._rect.h)),function Ez(r,e,t,i,a,n){var s=e.split("\n"),o=s.length,l=ad(r,s[0],r.getFont(),{wordWrapEnabled:!1,targetRectWidth:1e9}),d=i??"middle",u=a??"left",c={top:0,middle:.5,bottom:1},f=t.y+t.h*c[d]-l*(o-1)*c[d]+function Sz(r){return(r.getLineHeightFactor()-1.15)*r.getFontSize()}(r),p=t.x+t.w*{left:0,center:.5,right:1}[u],_=(0,B.l)({baseline:d,align:u},n);r.text(s.join("\n"),ii(p),ii(f),_)}(r,e.text,o,e.verticalAlign,e.horizontalAlign,e._internalTextOptions),((0,C.$K)(e._textLeftOffset)||(0,C.$K)(e._textTopOffset))&&r.restoreGraphicsState()}}(r,a,i))})}(t,r.customDrawCell,E,w),function Tz(r,e,t){e.filter(i=>!(0,C.$K)(i.borderColor)).forEach(i=>{xv(r,i._rect,i,t)}),e.filter(i=>(0,C.$K)(i.borderColor)).forEach(i=>{xv(r,i._rect,i,t)})}(t,E,w),(0,C.$K)(E)&&0===E.length){var j=function pz(r,e,t){var i,a,n,s,o,l,d,u,c,f;e.forEach(x=>{(!(0,C.$K)(d)||d>x._rect.x)&&(d=x._rect.x),(!(0,C.$K)(u)||u>x._rect.y)&&(u=x._rect.y),(!(0,C.$K)(c)||c<x._rect.x+x._rect.w)&&(c=x._rect.x+x._rect.w),(!(0,C.$K)(f)||f<x._rect.y+x._rect.h)&&(f=x._rect.y+x._rect.h)});var p=null!==(i=null!==(a=d)&&void 0!==a?a:null==t||null===(n=t.topLeft)||void 0===n?void 0:n.x)&&void 0!==i?i:0,_=null!==(s=null!==(o=u)&&void 0!==o?o:null==t||null===(l=t.topLeft)||void 0===l?void 0:l.y)&&void 0!==s?s:0;return{x:p,y:_,w:(0,C.$K)(c)?c-p:0,h:(0,C.$K)(f)?f-_:0}}(0,E,r),Q=function Cz(){return yv.base}();!function Dz(r,e,t,i){xv(r,e,t,i)}(t,j,Q,w)}}),function Lz(r,e){var{borderWidth:t,borderColor:i,font:a,textColor:n}=e,s=r.getFont();(s.fontName!==a.name||s.fontStyle!==a.style)&&r.setFont(a.name,a.style,void 0),r.getFontSize()!==a.size&&r.setFontSize(a.size),Ev(r)!==t&&VS(r,t),r.getDrawColor()!==i&&r.setDrawColor(i),r.getTextColor()!==n&&r.setTextColor(n)}(t,w),c()}).always(()=>{o&&i.option("loadPanel.enabled",o),n.enabled&&(0,Je.Ym)()&&l.dispose()})})};var hr=ve(6443),Yz=ve(1243),zS="dx-toast",ys=zS+"-",Jz=ys+"wrapper",Qz=ys+"content",e8=ys+"message",t8=ys+"icon",r8=["info","warning","error","success"],Iv=[],n8={top:{my:"top",at:"top",of:null,offset:"0 0"},bottom:{my:"bottom",at:"bottom",of:null,offset:"0 -20"},center:{my:"center",at:"center",of:null,offset:"0 0"},right:{my:"center right",at:"center right",of:null,offset:"0 0"},left:{my:"center left",at:"center left",of:null,offset:"0 0"}},s8={h:0,v:0};(0,Yz.Z.add)(function(){z.Z.subscribeGlobal(at.Z.getDocument(),kt.Z.down,function(r){for(var e=Iv.length-1;e>=0;e--)if(!Iv[e]._proxiedDocumentDownHandler(r))return})});var WS=$s.Z.inherit({_getDefaultOptions:function(){return(0,B.l)(this.callBase(),{message:"",type:"info",displayTime:2e3,position:"bottom center",animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},shading:!1,height:"auto",hideTopOverlayHandler:null,preventScrollEvents:!1,closeOnSwipe:!0,closeOnClick:!1})},_defaultOptionsRules:function(){var r={displayTime:(0,Lt.yj)()?4e3:2e3,hideOnOutsideClick:!0,animation:{show:{type:"fade",duration:200,from:0,to:1},hide:{type:"fade",duration:200,from:1,to:0}}};return this.callBase().concat([{device:e=>"phone"===e.deviceType,options:(0,ye.Z)({width:"calc(100vw - ".concat(40,"px)")},r)},{device:e=>"tablet"===e.deviceType,options:(0,ye.Z)({width:"auto",maxWidth:"80vw"},r)},{device:e=>(0,Lt.yj)()&&"desktop"===e.deviceType,options:{minWidth:344,maxWidth:568,displayTime:4e3}}])},_init:function(){this.callBase(),this._posStringToObject()},_renderContentImpl:function(){this._message=(0,b.Z)("<div>").addClass(e8).text(this.option("message")).appendTo(this.$content()),this.setAria("role","alert",this._message),r8.includes(this.option("type").toLowerCase())&&this.$content().prepend((0,b.Z)("<div>").addClass(t8)),this.callBase()},_render:function(){this.callBase(),this.$element().addClass(zS),this.$wrapper().addClass(Jz),this.$content().addClass(ys+String(this.option("type")).toLowerCase()),this.$content().addClass(Qz),this._toggleCloseEvents("Swipe"),this._toggleCloseEvents("Click")},_toggleCloseEvents:function(r){var e="dx"+r.toLowerCase();z.Z.off(this.$content(),e),this.option("closeOn"+r)&&z.Z.on(this.$content(),e,this.hide.bind(this))},_posStringToObject:function(){if((0,C.HD)(this.option("position"))){var r=this.option("position").split(" ")[0],e=this.option("position").split(" ")[1];switch(this.option("position",(0,B.l)({boundaryOffset:s8},n8[r])),e){case"center":case"left":case"right":this.option("position").at+=" "+e,this.option("position").my+=" "+e}}},_show:function(){return this.callBase.apply(this,arguments).always(function(){clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(this.hide.bind(this),this.option("displayTime"))}.bind(this))},_overlayStack:function(){return Iv},_zIndexInitValue:function(){return this.callBase()+8e3},_dispose:function(){clearTimeout(this._hideTimeout),this.callBase()},_optionChanged:function(r){switch(r.name){case"type":this.$content().removeClass(ys+r.previousValue),this.$content().addClass(ys+String(r.value).toLowerCase());break;case"message":this._message&&this._message.text(r.value);break;case"closeOnSwipe":this._toggleCloseEvents("Swipe");break;case"closeOnClick":this._toggleCloseEvents("Click");break;case"displayTime":break;default:this.callBase(r)}}});(0,Rt.Z)("dxToast",WS);const l8=WS;var KS=(0,Je.Jj)(),$S=null,GS={},v8=(r,e)=>{var{toastWidth:t,toastHeight:i,windowHeight:a,windowWidth:n}=e;switch(r){case"top left":return{top:10,left:10};case"top right":return{top:10,right:10};case"bottom left":return{bottom:10,left:10};case"bottom right":return{bottom:10,right:10};case"top center":return{top:10,left:Math.round(n/2-t/2)};case"left center":return{top:Math.round(a/2-i/2),left:10};case"right center":return{top:Math.round(a/2-i/2),right:10};case"center":return{top:Math.round(a/2-i/2),left:Math.round(n/2-t/2)};default:return{bottom:10,left:Math.round(n/2-t/2)}}},g8=(r,e,t)=>{var i,a,n,s,o,l,d,u,c,f,p,_,{toastWidth:w,toastHeight:S,windowHeight:x,windowWidth:E}=t;switch(r.replace(/-push|-stack/g,"")){case"up":return{bottom:null!==(i=e.bottom)&&void 0!==i?i:x-S-e.top,top:"",left:null!==(a=e.left)&&void 0!==a?a:"",right:null!==(n=e.right)&&void 0!==n?n:""};case"down":return{top:null!==(s=e.top)&&void 0!==s?s:x-S-e.bottom,bottom:"",left:null!==(o=e.left)&&void 0!==o?o:"",right:null!==(l=e.right)&&void 0!==l?l:""};case"left":return{right:null!==(d=e.right)&&void 0!==d?d:E-w-e.left,left:"",top:null!==(u=e.top)&&void 0!==u?u:"",bottom:null!==(c=e.bottom)&&void 0!==c?c:""};case"right":return{left:null!==(f=e.left)&&void 0!==f?f:E-w-e.right,right:"",top:null!==(p=e.top)&&void 0!==p?p:"",bottom:null!==(_=e.bottom)&&void 0!==_?_:""}}};const Av=function d8(r,e,t){var i=(0,C.PO)(r)?r:{message:r},a=(0,C.PO)(e)?e:void 0,n=(0,C.PO)(e)?void 0:e,{onHidden:s}=i;if(null!=a&&a.position){var{position:o}=a,l=a.direction||(r=>(0,C.HD)(r)&&r.includes("top")?"down-push":"up-push")(o),d=(0,C.HD)(o)?o:"".concat(o.top,"-").concat(o.left,"-").concat(o.bottom,"-").concat(o.right),{onShowing:u}=i,c=(r=>GS[r]||(r=>{var e=(0,b.Z)("<div>").appendTo((0,Iu.S3)());return GS[r]=e,e})(r))(d);((r,e)=>{var t="dx-toast-stack dx-toast-stack-".concat(e,"-direction");r.removeAttr("class").addClass(t)})(c,l),(0,B.l)(i,{container:c,_skipContentPositioning:!0,onShowing:function(f){((r,e,t)=>{var{offsetWidth:i,offsetHeight:a}=r.children().first().get(0),n={toastWidth:i,toastHeight:a,windowHeight:KS.innerHeight,windowWidth:KS.innerWidth},s=(0,C.HD)(t)?v8(t,n):t,o=g8(e,s,n);r.css(o)})(c,l,o),u?.(f)}})}(0,B.l)(i,{type:n,displayTime:t,onHidden:function(f){(0,b.Z)(f.element).remove(),s?.(f)}}),$S=(0,b.Z)("<div>").appendTo((0,Iu.S3)()),new l8($S,i).show()};var Xt=ve(1002),Gt=Uint8Array,Vi=Uint16Array,An=Uint32Array,go=new Gt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_o=new Gt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),nd=new Gt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jS=function(r,e){for(var t=new Vi(31),i=0;i<31;++i)t[i]=e+=1<<r[i-1];var a=new An(t[30]);for(i=1;i<30;++i)for(var n=t[i];n<t[i+1];++n)a[n]=n-t[i]<<5|i;return[t,a]},qS=jS(go,2),Tv=qS[0],vh=qS[1];Tv[28]=258,vh[258]=28;for(var YS=jS(_o,0),XS=YS[0],Dv=YS[1],sd=new Vi(32768),si=0;si<32768;++si){var Tn=(43690&si)>>>1|(21845&si)<<1;sd[si]=((65280&(Tn=(61680&(Tn=(52428&Tn)>>>2|(13107&Tn)<<2))>>>4|(3855&Tn)<<4))>>>8|(255&Tn)<<8)>>>1}var Fr=function(r,e,t){for(var i=r.length,a=0,n=new Vi(e);a<i;++a)++n[r[a]-1];var o,s=new Vi(e);for(a=0;a<e;++a)s[a]=s[a-1]+n[a-1]<<1;if(t){o=new Vi(1<<e);var l=15-e;for(a=0;a<i;++a)if(r[a])for(var d=a<<4|r[a],u=e-r[a],c=s[r[a]-1]++<<u,f=c|(1<<u)-1;c<=f;++c)o[sd[c]>>>l]=d}else for(o=new Vi(i),a=0;a<i;++a)o[a]=sd[s[r[a]-1]++]>>>15-r[a];return o},Qa=new Gt(288);for(si=0;si<144;++si)Qa[si]=8;for(si=144;si<256;++si)Qa[si]=9;for(si=256;si<280;++si)Qa[si]=7;for(si=280;si<288;++si)Qa[si]=8;var mo=new Gt(32);for(si=0;si<32;++si)mo[si]=5;var JS=Fr(Qa,9,0),QS=Fr(Qa,9,1),eE=Fr(mo,5,0),tE=Fr(mo,5,1),gh=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},Vr=function(r,e,t){var i=e/8>>0;return(r[i]|r[i+1]<<8)>>>(7&e)&t},_h=function(r,e){var t=e/8>>0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>>(7&e)},od=function(r){return(r/8>>0)+(7&r&&1)},xs=function(r,e,t){(null==e||e<0)&&(e=0),(null==t||t>r.length)&&(t=r.length);var i=new(r instanceof Vi?Vi:r instanceof An?An:Gt)(t-e);return i.set(r.subarray(e,t)),i},Sa=function(r,e,t){var i=e/8>>0;r[i]|=t<<=7&e,r[i+1]|=t>>>8},Co=function(r,e,t){var i=e/8>>0;r[i]|=t<<=7&e,r[i+1]|=t>>>8,r[i+2]|=t>>>16},Ch=function(r,e){for(var t=[],i=0;i<r.length;++i)r[i]&&t.push({s:i,f:r[i]});var a=t.length,n=t.slice();if(!a)return[new Gt(0),0];if(1==a){var s=new Gt(t[0].s+1);return s[t[0].s]=1,[s,1]}t.sort(function(j,Q){return j.f-Q.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],d=0,u=1,c=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=a-1;)o=t[t[d].f<t[c].f?d++:c++],l=t[d!=u&&t[d].f<t[c].f?d++:c++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};var f=n[0].s;for(i=1;i<a;++i)n[i].s>f&&(f=n[i].s);var p=new Vi(f+1),_=wh(t[u-1],p,0);if(_>e){i=0;var w=0,S=_-e,x=1<<S;for(n.sort(function(Q,q){return p[q.s]-p[Q.s]||Q.f-q.f});i<a;++i){var E=n[i].s;if(!(p[E]>e))break;w+=x-(1<<_-p[E]),p[E]=e}for(w>>>=S;w>0;){var V=n[i].s;p[V]<e?w-=1<<e-p[V]++-1:++i}for(;i>=0&&w;--i){var N=n[i].s;p[N]==e&&(--p[N],++w)}_=e}return[new Gt(p),_]},wh=function(r,e,t){return-1==r.s?Math.max(wh(r.l,e,t+1),wh(r.r,e,t+1)):e[r.s]=t},Ov=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Vi(++e),i=0,a=r[0],n=1,s=function(l){t[i++]=l},o=1;o<=e;++o)if(r[o]==a&&o!=e)++n;else{if(!a&&n>2){for(;n>138;n-=138)s(32754);n>2&&(s(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(s(a),--n;n>6;n-=6)s(8304);n>2&&(s(n-3<<5|8208),n=0)}for(;n--;)s(a);n=1,a=r[o]}return[t.subarray(0,i),e]},wo=function(r,e){for(var t=0,i=0;i<e.length;++i)t+=r[i]*e[i];return t},ld=function(r,e,t){var i=t.length,a=od(e+2);r[a]=255&i,r[a+1]=i>>>8,r[a+2]=255^r[a],r[a+3]=255^r[a+1];for(var n=0;n<i;++n)r[a+n+4]=t[n];return 8*(a+4+i)},Rv=function(r,e,t,i,a,n,s,o,l,d,u){Sa(e,u++,t),++a[256];for(var c=Ch(a,15),f=c[0],p=c[1],_=Ch(n,15),w=_[0],S=_[1],x=Ov(f),E=x[0],V=x[1],N=Ov(w),j=N[0],Q=N[1],q=new Vi(19),k=0;k<E.length;++k)q[31&E[k]]++;for(k=0;k<j.length;++k)q[31&j[k]]++;for(var se=Ch(q,7),he=se[0],F=se[1],P=19;P>4&&!he[nd[P-1]];--P);var ue,xe,ce,Te,U=d+5<<3,K=wo(a,Qa)+wo(n,mo)+s,ge=wo(a,f)+wo(n,w)+s+14+3*P+wo(q,he)+(2*q[16]+3*q[17]+7*q[18]);if(U<=K&&U<=ge)return ld(e,u,r.subarray(l,l+d));if(Sa(e,u,1+(ge<K)),u+=2,ge<K){ue=Fr(f,p,0),xe=f,ce=Fr(w,S,0),Te=w;var Ie=Fr(he,F,0);for(Sa(e,u,V-257),Sa(e,u+5,Q-1),Sa(e,u+10,P-4),u+=14,k=0;k<P;++k)Sa(e,u+3*k,he[nd[k]]);u+=3*P;for(var Me=[E,j],D=0;D<2;++D){var H=Me[D];for(k=0;k<H.length;++k)Sa(e,u,Ie[$=31&H[k]]),u+=he[$],$>15&&(Sa(e,u,H[k]>>>5&127),u+=H[k]>>>12)}}else ue=JS,xe=Qa,ce=eE,Te=mo;for(k=0;k<o;++k)if(i[k]>255){var $;Co(e,u,ue[257+($=i[k]>>>18&31)]),u+=xe[$+257],$>7&&(Sa(e,u,i[k]>>>23&31),u+=go[$]);var ee=31&i[k];Co(e,u,ce[ee]),u+=Te[ee],ee>3&&(Co(e,u,i[k]>>>5&8191),u+=_o[ee])}else Co(e,u,ue[i[k]]),u+=xe[i[k]];return Co(e,u,ue[256]),u+xe[256]},iE=new An([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rE=new Gt(0),yh=function(r,e,t,i,a){return function(r,e,t,i,a,n){var s=r.length,o=new Gt(i+s+5*(1+Math.floor(s/7e3))+a),l=o.subarray(i,o.length-a),d=0;if(!e||s<8)for(var u=0;u<=s;u+=65535){var c=u+65535;c<s?d=ld(l,d,r.subarray(u,c)):(l[u]=n,d=ld(l,d,r.subarray(u,s)))}else{for(var f=iE[e-1],p=f>>>13,_=8191&f,w=(1<<t)-1,S=new Vi(32768),x=new Vi(w+1),E=Math.ceil(t/3),V=2*E,N=function(ut){return(r[ut]^r[ut+1]<<E^r[ut+2]<<V)&w},j=new An(25e3),Q=new Vi(288),q=new Vi(32),k=0,se=0,he=(u=0,0),F=0,P=0;u<s;++u){var U=N(u),K=32767&u,ge=x[U];if(S[K]=ge,x[U]=K,F<=u){var ue=s-u;if((k>7e3||he>24576)&&ue>423){d=Rv(r,l,0,j,Q,q,se,he,P,u-P,d),he=k=se=0,P=u;for(var xe=0;xe<286;++xe)Q[xe]=0;for(xe=0;xe<30;++xe)q[xe]=0}var ce=2,Te=0,Ie=_,Me=K-ge&32767;if(ue>2&&U==N(u-Me))for(var D=Math.min(p,ue)-1,H=Math.min(32767,u),$=Math.min(258,ue);Me<=H&&--Ie&&K!=ge;){if(r[u+ce]==r[u+ce-Me]){for(var ee=0;ee<$&&r[u+ee]==r[u+ee-Me];++ee);if(ee>ce){if(ce=ee,Te=Me,ee>D)break;var oe=Math.min(Me,ee-2),_e=0;for(xe=0;xe<oe;++xe){var me=u-Me+xe+32768&32767,ke=me-S[me]+32768&32767;ke>_e&&(_e=ke,ge=me)}}}Me+=(K=ge)-(ge=S[K])+32768&32767}if(Te){j[he++]=268435456|vh[ce]<<18|Dv[Te];var Be=31&vh[ce],je=31&Dv[Te];se+=go[Be]+_o[je],++Q[257+Be],++q[je],F=u+ce,++k}else j[he++]=r[u],++Q[r[u]]}}d=Rv(r,l,n,j,Q,q,se,he,P,u-P,d),n||(d=ld(l,d,rE))}return xs(o,0,i+od(d)+a)}(r,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(r.length)))):12+e.mem,t,i,!a)};function ud(r,e){void 0===e&&(e={});var t=function(){var r=1,e=0;return{p:function(t){for(var i=r,a=e,n=t.length,s=0;s!=n;){for(var o=Math.min(s+5552,n);s<o;++s)a+=i+=t[s];i%=65521,a%=65521}r=i,e=a},d:function(){return(r>>>8<<16|(255&e)<<8|e>>>8)+2*((255&r)<<23)}}}();t.p(r);var i=yh(r,e,2,4);return function(r,e){var t=e.level,i=0==t?0:t<6?1:9==t?3:2;r[0]=120,r[1]=i<<6|(i?32-2*i:1)}(i,e),function(r,e,t){for(;t;++e)r[e]=t,t>>>=8}(i,i.length-4,t.d()),i}function Eh(r,e){return function(r,e,t){var i=r.length,a=!e||t,n=!t||t.i;t||(t={}),e||(e=new Gt(3*i));var s=function(oe){var _e=e.length;if(oe>_e){var me=new Gt(Math.max(2*_e,oe));me.set(e),e=me}},o=t.f||0,l=t.p||0,d=t.b||0,u=t.l,c=t.d,f=t.m,p=t.n,_=8*i;do{if(!u){t.f=o=Vr(r,l,1);var w=Vr(r,l+1,3);if(l+=3,!w){var x=r[(S=od(l)+4)-4]|r[S-3]<<8,E=S+x;if(E>i){if(n)throw"unexpected EOF";break}a&&s(d+x),e.set(r.subarray(S,E),d),t.b=d+=x,t.p=l=8*E;continue}if(1==w)u=QS,c=tE,f=9,p=5;else{if(2!=w)throw"invalid block type";var V=Vr(r,l,31)+257,N=Vr(r,l+10,15)+4,j=V+Vr(r,l+5,31)+1;l+=14;for(var Q=new Gt(j),q=new Gt(19),k=0;k<N;++k)q[nd[k]]=Vr(r,l+3*k,7);l+=3*N;var se=gh(q),he=(1<<se)-1;if(!n&&l+j*(se+7)>_)break;var F=Fr(q,se,1);for(k=0;k<j;){var S,P=F[Vr(r,l,he)];if(l+=15&P,(S=P>>>4)<16)Q[k++]=S;else{var U=0,K=0;for(16==S?(K=3+Vr(r,l,3),l+=2,U=Q[k-1]):17==S?(K=3+Vr(r,l,7),l+=3):18==S&&(K=11+Vr(r,l,127),l+=7);K--;)Q[k++]=U}}var ge=Q.subarray(0,V),ue=Q.subarray(V);f=gh(ge),p=gh(ue),u=Fr(ge,f,1),c=Fr(ue,p,1)}if(l>_)throw"unexpected EOF"}a&&s(d+131072);for(var xe=(1<<f)-1,ce=(1<<p)-1,Te=f+p+18;n||l+Te<_;){var Ie=(U=u[_h(r,l)&xe])>>>4;if((l+=15&U)>_)throw"unexpected EOF";if(!U)throw"invalid length/literal";if(Ie<256)e[d++]=Ie;else{if(256==Ie){u=null;break}var Me=Ie-254;Ie>264&&(Me=Vr(r,l,(1<<(D=go[k=Ie-257]))-1)+Tv[k],l+=D);var H=c[_h(r,l)&ce],$=H>>>4;if(!H)throw"invalid distance";if(l+=15&H,ue=XS[$],$>3){var D=_o[$];ue+=_h(r,l)&(1<<D)-1,l+=D}if(l>_)throw"unexpected EOF";a&&s(d+131072);for(var ee=d+Me;d<ee;d+=4)e[d]=e[d-ue],e[d+1]=e[d+1-ue],e[d+2]=e[d+2-ue],e[d+3]=e[d+3-ue];d=ee}}t.l=u,t.p=l,t.b=d,u&&(o=1,t.m=f,t.d=c,t.n=p)}while(!o);return d==e.length?e:xs(e,0,d)}((function(r){if(8!=(15&r[0])||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(32&r[1])throw"invalid zlib data: preset dictionaries not supported"}(r),r.subarray(2,-4)),e)}var dt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Bv(){dt.console&&"function"==typeof dt.console.log&&dt.console.log.apply(dt.console,arguments)}var Jt={log:Bv,warn:function(r){dt.console&&("function"==typeof dt.console.warn?dt.console.warn.apply(dt.console,arguments):Bv.call(null,arguments))},error:function(r){dt.console&&("function"==typeof dt.console.error?dt.console.error.apply(dt.console,arguments):Bv(r))}};function kv(r,e,t){var i=new XMLHttpRequest;i.open("GET",r),i.responseType="blob",i.onload=function(){Ss(i.response,e,t)},i.onerror=function(){Jt.error("could not download file")},i.send()}function yE(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ah(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var hd,Mv,Ss=dt.saveAs||("object"!==(typeof window>"u"?"undefined":(0,Xt.Z)(window))||window!==dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var i=dt.URL||dt.webkitURL,a=document.createElement("a");a.download=e=e||r.name||"download",a.rel="noopener","string"==typeof r?(a.href=r,a.origin!==location.origin?yE(a.href)?kv(r,e,t):Ah(a,a.target="_blank"):Ah(a)):(a.href=i.createObjectURL(r),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){Ah(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download","string"==typeof r)if(yE(r))kv(r,e,t);else{var i=document.createElement("a");i.href=r,i.target="_blank",setTimeout(function(){Ah(i)})}else navigator.msSaveOrOpenBlob((a=r,void 0===(n=t)?n={autoBom:!1}:"object"!==(0,Xt.Z)(n)&&(Jt.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a),e);var a,n}:function(r,e,t,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof r)return kv(r,e,t);var a="application/octet-stream"===r.type,n=/constructor/i.test(dt.HTMLElement)||dt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&n)&&"object"===(typeof FileReader>"u"?"undefined":(0,Xt.Z)(FileReader))){var o=new FileReader;o.onloadend=function(){var u=o.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=u:location=u,i=null},o.readAsDataURL(r)}else{var l=dt.URL||dt.webkitURL,d=l.createObjectURL(r);i?i.location=d:location.href=d,i=null,setTimeout(function(){l.revokeObjectURL(d)},4e4)}});function xE(r){var e;r=r||"",this.ok=!1,"#"==r.charAt(0)&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],i=0;i<t.length;i++){var n=t[i].process,s=t[i].re.exec(r);s&&(e=n(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),d=this.b.toString(16);return 1==o.length&&(o="0"+o),1==l.length&&(l="0"+l),1==d.length&&(d="0"+d),"#"+o+l+d}}function Hv(r,e){var t=r[0],i=r[1],a=r[2],n=r[3];t=qi(t,i,a,n,e[0],7,-680876936),n=qi(n,t,i,a,e[1],12,-389564586),a=qi(a,n,t,i,e[2],17,606105819),i=qi(i,a,n,t,e[3],22,-1044525330),t=qi(t,i,a,n,e[4],7,-176418897),n=qi(n,t,i,a,e[5],12,1200080426),a=qi(a,n,t,i,e[6],17,-1473231341),i=qi(i,a,n,t,e[7],22,-45705983),t=qi(t,i,a,n,e[8],7,1770035416),n=qi(n,t,i,a,e[9],12,-1958414417),a=qi(a,n,t,i,e[10],17,-42063),i=qi(i,a,n,t,e[11],22,-1990404162),t=qi(t,i,a,n,e[12],7,1804603682),n=qi(n,t,i,a,e[13],12,-40341101),a=qi(a,n,t,i,e[14],17,-1502002290),t=Yi(t,i=qi(i,a,n,t,e[15],22,1236535329),a,n,e[1],5,-165796510),n=Yi(n,t,i,a,e[6],9,-1069501632),a=Yi(a,n,t,i,e[11],14,643717713),i=Yi(i,a,n,t,e[0],20,-373897302),t=Yi(t,i,a,n,e[5],5,-701558691),n=Yi(n,t,i,a,e[10],9,38016083),a=Yi(a,n,t,i,e[15],14,-660478335),i=Yi(i,a,n,t,e[4],20,-405537848),t=Yi(t,i,a,n,e[9],5,568446438),n=Yi(n,t,i,a,e[14],9,-1019803690),a=Yi(a,n,t,i,e[3],14,-187363961),i=Yi(i,a,n,t,e[8],20,1163531501),t=Yi(t,i,a,n,e[13],5,-1444681467),n=Yi(n,t,i,a,e[2],9,-51403784),a=Yi(a,n,t,i,e[7],14,1735328473),t=Xi(t,i=Yi(i,a,n,t,e[12],20,-1926607734),a,n,e[5],4,-378558),n=Xi(n,t,i,a,e[8],11,-2022574463),a=Xi(a,n,t,i,e[11],16,1839030562),i=Xi(i,a,n,t,e[14],23,-35309556),t=Xi(t,i,a,n,e[1],4,-1530992060),n=Xi(n,t,i,a,e[4],11,1272893353),a=Xi(a,n,t,i,e[7],16,-155497632),i=Xi(i,a,n,t,e[10],23,-1094730640),t=Xi(t,i,a,n,e[13],4,681279174),n=Xi(n,t,i,a,e[0],11,-358537222),a=Xi(a,n,t,i,e[3],16,-722521979),i=Xi(i,a,n,t,e[6],23,76029189),t=Xi(t,i,a,n,e[9],4,-640364487),n=Xi(n,t,i,a,e[12],11,-421815835),a=Xi(a,n,t,i,e[15],16,530742520),t=Ji(t,i=Xi(i,a,n,t,e[2],23,-995338651),a,n,e[0],6,-198630844),n=Ji(n,t,i,a,e[7],10,1126891415),a=Ji(a,n,t,i,e[14],15,-1416354905),i=Ji(i,a,n,t,e[5],21,-57434055),t=Ji(t,i,a,n,e[12],6,1700485571),n=Ji(n,t,i,a,e[3],10,-1894986606),a=Ji(a,n,t,i,e[10],15,-1051523),i=Ji(i,a,n,t,e[1],21,-2054922799),t=Ji(t,i,a,n,e[8],6,1873313359),n=Ji(n,t,i,a,e[15],10,-30611744),a=Ji(a,n,t,i,e[6],15,-1560198380),i=Ji(i,a,n,t,e[13],21,1309151649),t=Ji(t,i,a,n,e[4],6,-145523070),n=Ji(n,t,i,a,e[11],10,-1120210379),a=Ji(a,n,t,i,e[2],15,718787259),i=Ji(i,a,n,t,e[9],21,-343485551),r[0]=On(t,r[0]),r[1]=On(i,r[1]),r[2]=On(a,r[2]),r[3]=On(n,r[3])}function Th(r,e,t,i,a,n){return e=On(On(e,r),On(i,n)),On(e<<a|e>>>32-a,t)}function qi(r,e,t,i,a,n,s){return Th(e&t|~e&i,r,e,a,n,s)}function Yi(r,e,t,i,a,n,s){return Th(e&i|t&~i,r,e,a,n,s)}function Xi(r,e,t,i,a,n,s){return Th(e^t^i,r,e,a,n,s)}function Ji(r,e,t,i,a,n,s){return Th(t^(e|~i),r,e,a,n,s)}function SE(r){var e,t=r.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Hv(i,D8(r.substring(e-64,e)));r=r.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)a[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(Hv(i,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,Hv(i,a),i}function D8(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}hd=dt.atob.bind(dt),Mv=dt.btoa.bind(dt);var EE="0123456789abcdef".split("");function O8(r){for(var e="",t=0;t<4;t++)e+=EE[r>>8*t+4&15]+EE[r>>8*t&15];return e}function R8(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function Zv(r){return SE(r).map(R8).join("")}var L8="5d41402abc4b2a76b9719d911017c592"!=function(r){for(var e=0;e<r.length;e++)r[e]=O8(r[e]);return r.join("")}(SE("hello"));function On(r,e){if(L8){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}function zv(r,e){var t,i,a;if(r!==t){for(var s=(a=r,new Array(1+(256/r.length>>0)+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var d=0;for(l=0;l<256;l++){var u=o[l];d=(d+u+s.charCodeAt(l))%256,o[l]=o[d],o[d]=u}t=r,i=o}else o=i;var c=e.length,f=0,p=0,_="";for(l=0;l<c;l++)p=(p+(u=o[f=(f+1)%256]))%256,o[f]=o[p],o[p]=u,s=o[(o[f]+o[p])%256],_+=String.fromCharCode(e.charCodeAt(l)^s);return _}var IE={print:4,modify:8,copy:16,"annot-forms":32};function yo(r,e,t,i){this.v=1,this.r=2;var a=192;r.forEach(function(o){if(void 0!==IE.perm)throw new Error("Invalid permission: "+o);a+=IE[o]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var n=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(n,s),this.P=-(1+(255^a)),this.encryptionKey=Zv(n+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=zv(this.encryptionKey,this.padding)}function xo(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,i=0;i<t;i++){var a=r.charCodeAt(i);e+=a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?"#"+("0"+a.toString(16)).slice(-2):r[i]}return e}function AE(r){if("object"!==(0,Xt.Z)(r))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,i,a){if(a=a||!1,"string"!=typeof t||"function"!=typeof i||"boolean"!=typeof a)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var n=Math.random().toString(35);return e[t][n]=[i,!!a],n},this.unsubscribe=function(t){for(var i in e)if(e[i][t])return delete e[i][t],0===Object.keys(e[i]).length&&delete e[i],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var n in e[t]){var s=e[t][n];try{s[0].apply(r,i)}catch(o){dt.console&&Jt.error("jsPDF PubSub Error",o.message,o)}s[1]&&a.push(n)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Dh(r){if(!(this instanceof Dh))return new Dh(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function TE(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Es(r,e,t,i,a){if(!(this instanceof Es))return new Es(r,e,t,i,a);this.type="axial"===r?2:3,this.coords=e,this.colors=t,TE.call(this,i,a)}function So(r,e,t,i,a){if(!(this instanceof So))return new So(r,e,t,i,a);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,TE.call(this,i,a)}function st(r){var e,t="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],a=arguments[2],n=arguments[3],s=[],o=1,l=16,d="S",u=null;"object"===(0,Xt.Z)(r=r||{})&&(t=r.orientation,i=r.unit||i,a=r.format||a,n=r.compress||r.compressPdf||n,null!==(u=r.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o="number"==typeof r.userUnit?Math.abs(r.userUnit):1,void 0!==r.precision&&(e=r.precision),void 0!==r.floatPrecision&&(l=r.floatPrecision),d=r.defaultPathOperation||"S"),s=r.filters||(!0===n?["FlateEncode"]:s),i=i||"mm",t=(""+(t||"P")).toLowerCase();var c=r.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=AE;var _="1.3",w=p.__private__.getPdfVersion=function(){return _};p.__private__.setPdfVersion=function(g){_=g};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return S};var x=p.__private__.getPageFormat=function(g){return S[g]};a=a||"a4";var V="compat";function N(){this.saveGraphicsState(),G(new ot(Ue,0,0,-Ue,0,Nn()*Ue).toString()+" cm"),this.setFontSize(this.getFontSize()/Ue),d="n",V="advanced"}function j(){this.restoreGraphicsState(),d="S",V="compat"}var Q=p.__private__.combineFontStyleAndFontWeight=function(g,A){if("bold"==g&&"normal"==A||"bold"==g&&400==A||"normal"==g&&"italic"==A||"bold"==g&&"italic"==A)throw new Error("Invalid Combination of fontweight and fontstyle");return A&&(g=400==A||"normal"===A?"italic"===g?"italic":"normal":700!=A&&"bold"!==A||"normal"!==g?(700==A?"bold":A)+""+g:"bold"),g};p.advancedAPI=function(g){var A="compat"===V;return A&&N.call(this),"function"!=typeof g||(g(this),A&&j.call(this)),this},p.compatAPI=function(g){var A="advanced"===V;return A&&j.call(this),"function"!=typeof g||(g(this),A&&N.call(this)),this},p.isAdvancedAPI=function(){return"advanced"===V};var q,k=function(g){if("advanced"!==V)throw new Error(g+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},se=p.roundToPrecision=p.__private__.roundToPrecision=function(g,A){var Z=e||A;if(isNaN(g)||isNaN(Z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return g.toFixed(Z).replace(/0+$/,"")};q=p.hpf=p.__private__.hpf="number"==typeof l?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return se(g,l)}:"smart"===l?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return se(g,g>-1&&g<1?16:5)}:function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return se(g,16)};var he=p.f2=p.__private__.f2=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f2");return se(g,2)},F=p.__private__.f3=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f3");return se(g,3)},P=p.scale=p.__private__.scale=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.scale");return"compat"===V?g*Ue:"advanced"===V?g:void 0},K=function(g){return P(function(g){return"compat"===V?Nn()-g:"advanced"===V?g:void 0}(g))};p.__private__.setPrecision=p.setPrecision=function(g){"number"==typeof parseInt(g,10)&&(e=parseInt(g,10))};var ge,ue="00000000000000000000000000000000",xe=p.__private__.getFileId=function(){return ue},ce=p.__private__.setFileId=function(g){return ue=void 0!==g&&/^[a-fA-F0-9]{32}$/.test(g)?g.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==u&&(er=new yo(u.userPermissions,u.userPassword,u.ownerPassword,ue)),ue};p.setFileId=function(g){return ce(g),this},p.getFileId=function(){return xe()};var Te=p.__private__.convertDateToPDFDate=function(g){var A=g.getTimezoneOffset(),Z=A<0?"+":"-",J=Math.floor(Math.abs(A/60)),de=Math.abs(A%60),De=[Z,$(J),"'",$(de),"'"].join("");return["D:",g.getFullYear(),$(g.getMonth()+1),$(g.getDate()),$(g.getHours()),$(g.getMinutes()),$(g.getSeconds()),De].join("")},Ie=p.__private__.convertPDFDateToDate=function(g){var A=parseInt(g.substr(2,4),10),Z=parseInt(g.substr(6,2),10)-1,J=parseInt(g.substr(8,2),10),de=parseInt(g.substr(10,2),10),De=parseInt(g.substr(12,2),10),Ve=parseInt(g.substr(14,2),10);return new Date(A,Z,J,de,De,Ve,0)},Me=p.__private__.setCreationDate=function(g){var A;if(void 0===g&&(g=new Date),g instanceof Date)A=Te(g);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(g))throw new Error("Invalid argument passed to jsPDF.setCreationDate");A=g}return ge=A},D=p.__private__.getCreationDate=function(g){var A=ge;return"jsDate"===g&&(A=Ie(ge)),A};p.setCreationDate=function(g){return Me(g),this},p.getCreationDate=function(g){return D(g)};var H,$=p.__private__.padd2=function(g){return("0"+parseInt(g)).slice(-2)},ee=p.__private__.padd2Hex=function(g){return("00"+(g=g.toString())).substr(g.length)},oe=0,_e=[],me=[],be=0,ke=[],Be=[],je=!1,Xe=me;p.__private__.setCustomOutputDestination=function(g){je=!0,Xe=g};var Oe=function(g){je||(Xe=g)};p.__private__.resetCustomOutputDestination=function(){je=!1,Xe=me};var G=p.__private__.out=function(g){return g=g.toString(),be+=g.length+1,Xe.push(g),Xe},Ct=p.__private__.write=function(g){return G(1===arguments.length?g.toString():Array.prototype.join.call(arguments," "))},tt=p.__private__.getArrayBuffer=function(g){for(var A=g.length,Z=new ArrayBuffer(A),J=new Uint8Array(Z);A--;)J[A]=g.charCodeAt(A);return Z},Ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ne};var Ze=r.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(g){return Ze="advanced"===V?g/Ue:g,this};var Ge,$e=p.__private__.getFontSize=p.getFontSize=function(){return"compat"===V?Ze:Ze*Ue},it=r.R2L||!1;p.__private__.setR2L=p.setR2L=function(g){return it=g,this},p.__private__.getR2L=p.getR2L=function(){return it};var _t,yt=p.__private__.setZoomMode=function(g){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(g))Ge=g;else if(isNaN(g)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(g))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+g+'" is not recognized.');Ge=g}else Ge=parseInt(g,10)};p.__private__.getZoomMode=function(){return Ge};var Et,Nt=p.__private__.setPageMode=function(g){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(g))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+g+'" is not recognized.');_t=g};p.__private__.getPageMode=function(){return _t};var Ut=p.__private__.setLayoutMode=function(g){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(g))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+g+'" is not recognized.');Et=g};p.__private__.getLayoutMode=function(){return Et},p.__private__.setDisplayMode=p.setDisplayMode=function(g,A,Z){return yt(g),Ut(A),Nt(Z),this};var ct={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(g){if(-1===Object.keys(ct).indexOf(g))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ct[g]},p.__private__.getDocumentProperties=function(){return ct},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(g){for(var A in ct)ct.hasOwnProperty(A)&&g[A]&&(ct[A]=g[A]);return this},p.__private__.setDocumentProperty=function(g,A){if(-1===Object.keys(ct).indexOf(g))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ct[g]=A};var It,Ue,Qi,Mt,Yr,Qt={},oi={},Ta=[],Zt={},Ts={},fi={},Xr={},en=null,vi=0,mt=[],zt=new AE(p),Ds=r.hotfixes||[],Ki={},Da={},Oa=[],ot=function g(A,Z,J,de,De,Ve){if(!(this instanceof g))return new g(A,Z,J,de,De,Ve);isNaN(A)&&(A=1),isNaN(Z)&&(Z=0),isNaN(J)&&(J=0),isNaN(de)&&(de=1),isNaN(De)&&(De=0),isNaN(Ve)&&(Ve=0),this._matrix=[A,Z,J,de,De,Ve]};Object.defineProperty(ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ot.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),ot.prototype.join=function(g){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(q).join(g)},ot.prototype.multiply=function(g){return new ot(g.sx*this.sx+g.shy*this.shx,g.sx*this.shy+g.shy*this.sy,g.shx*this.sx+g.sy*this.shx,g.shx*this.shy+g.sy*this.sy,g.tx*this.sx+g.ty*this.shx+this.tx,g.tx*this.shy+g.ty*this.sy+this.ty)},ot.prototype.decompose=function(){var g=this.sx,A=this.shy,Z=this.shx,J=this.sy,de=this.tx,De=this.ty,Ve=Math.sqrt(g*g+A*A),qe=(g/=Ve)*Z+(A/=Ve)*J;Z-=g*qe,J-=A*qe;var rt=Math.sqrt(Z*Z+J*J);return qe/=rt,g*(J/=rt)<A*(Z/=rt)&&(g=-g,A=-A,qe=-qe,Ve=-Ve),{scale:new ot(Ve,0,0,rt,0,0),translate:new ot(1,0,0,1,de,De),rotate:new ot(g,A,-A,g,0,0),skew:new ot(1,0,qe,1,0,0)}},ot.prototype.toString=function(g){return this.join(" ")},ot.prototype.inversed=function(){var g=this.sx,A=this.shy,Z=this.shx,J=this.sy,de=this.tx,De=this.ty,Ve=1/(g*J-A*Z),qe=J*Ve,rt=-A*Ve,wt=-Z*Ve,xt=g*Ve;return new ot(qe,rt,wt,xt,-qe*de-wt*De,-rt*de-xt*De)},ot.prototype.applyToPoint=function(g){return new Ko(g.x*this.sx+g.y*this.shx+this.tx,g.x*this.shy+g.y*this.sy+this.ty)},ot.prototype.applyToRectangle=function(g){var A=this.applyToPoint(g),Z=this.applyToPoint(new Ko(g.x+g.w,g.y+g.h));return new yd(A.x,A.y,Z.x-A.x,Z.y-A.y)},ot.prototype.clone=function(){return new ot(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},p.Matrix=ot;var Jr=p.matrixMult=function(g,A){return A.multiply(g)},Ra=new ot(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ra;var pr=function(g,A){if(!Ts[g]){var Z=(A instanceof Es?"Sh":"P")+(Object.keys(Zt).length+1).toString(10);A.id=Z,Ts[g]=Z,Zt[Z]=A,zt.publish("addPattern",A)}};p.ShadingPattern=Es,p.TilingPattern=So,p.addShadingPattern=function(g,A){return k("addShadingPattern()"),pr(g,A),this},p.beginTilingPattern=function(g){k("beginTilingPattern()"),ic(g.boundingBox[0],g.boundingBox[1],g.boundingBox[2]-g.boundingBox[0],g.boundingBox[3]-g.boundingBox[1],g.matrix)},p.endTilingPattern=function(g,A){k("endTilingPattern()"),A.stream=Be[H].join("\n"),pr(g,A),zt.publish("endTilingPattern",A),Oa.pop().restore()};var g,Ri=p.__private__.newObject=function(){var g=Ei();return xr(g,!0),g},Ei=p.__private__.newObjectDeferred=function(){return oe++,_e[oe]=function(){return be},oe},xr=function(g,A){return A="boolean"==typeof A&&A,_e[g]=be,A&&G(g+" 0 obj"),g},Ro=p.__private__.newAdditionalObject=function(){var g={objId:Ei(),content:""};return ke.push(g),g},tn=Ei(),Qr=Ei(),ea=p.__private__.decodeColorString=function(g){var A=g.split(" ");if(2!==A.length||"g"!==A[1]&&"G"!==A[1])5===A.length&&("k"===A[4]||"K"===A[4])&&(A=[(1-A[0])*(1-A[3]),(1-A[1])*(1-A[3]),(1-A[2])*(1-A[3]),"r"]);else{var Z=parseFloat(A[0]);A=[Z,Z,Z,"r"]}for(var J="#",de=0;de<3;de++)J+=("0"+Math.floor(255*parseFloat(A[de])).toString(16)).slice(-2);return J},ta=p.__private__.encodeColorString=function(g){var A;"string"==typeof g&&(g={ch1:g});var Z=g.ch1,J=g.ch2,de=g.ch3,De=g.ch4,Ve="draw"===g.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof Z&&"#"!==Z.charAt(0)){var qe=new xE(Z);if(qe.ok)Z=qe.toHex();else if(!/^\d*\.?\d*$/.test(Z))throw new Error('Invalid color "'+Z+'" passed to jsPDF.encodeColorString.')}if("string"==typeof Z&&/^#[0-9A-Fa-f]{3}$/.test(Z)&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),"string"==typeof Z&&/^#[0-9A-Fa-f]{6}$/.test(Z)){var rt=parseInt(Z.substr(1),16);Z=rt>>16&255,J=rt>>8&255,de=255&rt}if(void 0===J||void 0===De&&Z===J&&J===de)A="string"==typeof Z?Z+" "+Ve[0]:2===g.precision?he(Z/255)+" "+Ve[0]:F(Z/255)+" "+Ve[0];else if(void 0===De||"object"===(0,Xt.Z)(De)){if(De&&!isNaN(De.a)&&0===De.a)return["1.","1.","1.",Ve[1]].join(" ");A="string"==typeof Z?[Z,J,de,Ve[1]].join(" "):2===g.precision?[he(Z/255),he(J/255),he(de/255),Ve[1]].join(" "):[F(Z/255),F(J/255),F(de/255),Ve[1]].join(" ")}else A="string"==typeof Z?[Z,J,de,De,Ve[2]].join(" "):2===g.precision?[he(Z),he(J),he(de),he(De),Ve[2]].join(" "):[F(Z),F(J),F(de),F(De),Ve[2]].join(" ");return A},La=p.__private__.getFilters=function(){return s},Nr=p.__private__.putStream=function(g){var A=(g=g||{}).data||"",Z=g.filters||La(),J=g.alreadyAppliedFilters||[],de=g.addLength1||!1,De=A.length,Ve=g.objectId,qe=function(tr){return tr};if(null!==u&&void 0===Ve)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(qe=er.encryptor(Ve,0));var rt={};!0===Z&&(Z=["FlateEncode"]);var wt=g.additionalKeyValues||[],xt=(rt=void 0!==st.API.processDataByFilters?st.API.processDataByFilters(A,Z):{data:A,reverseChain:[]}).reverseChain+(Array.isArray(J)?J.join(" "):J.toString());if(0!==rt.data.length&&(wt.push({key:"Length",value:rt.data.length}),!0===de&&wt.push({key:"Length1",value:De})),0!=xt.length)if(xt.split("/").length-1==1)wt.push({key:"Filter",value:xt});else{wt.push({key:"Filter",value:"["+xt+"]"});for(var Pt=0;Pt<wt.length;Pt+=1)if("DecodeParms"===wt[Pt].key){for(var ui=[],gi=0;gi<rt.reverseChain.split("/").length-1;gi+=1)ui.push("null");ui.push(wt[Pt].value),wt[Pt].value="["+ui.join(" ")+"]"}}G("<<");for(var Ii=0;Ii<wt.length;Ii++)G("/"+wt[Ii].key+" "+wt[Ii].value);G(">>"),0!==rt.data.length&&(G("stream"),G(qe(rt.data)),G("endstream"))},Pa=p.__private__.putPage=function(g){var A=g.number,Z=g.data,J=g.objId,de=g.contentsObjId;xr(J,!0),G("<</Type /Page"),G("/Parent "+g.rootDictionaryObjId+" 0 R"),G("/Resources "+g.resourceDictionaryObjId+" 0 R"),G("/MediaBox ["+parseFloat(q(g.mediaBox.bottomLeftX))+" "+parseFloat(q(g.mediaBox.bottomLeftY))+" "+q(g.mediaBox.topRightX)+" "+q(g.mediaBox.topRightY)+"]"),null!==g.cropBox&&G("/CropBox ["+q(g.cropBox.bottomLeftX)+" "+q(g.cropBox.bottomLeftY)+" "+q(g.cropBox.topRightX)+" "+q(g.cropBox.topRightY)+"]"),null!==g.bleedBox&&G("/BleedBox ["+q(g.bleedBox.bottomLeftX)+" "+q(g.bleedBox.bottomLeftY)+" "+q(g.bleedBox.topRightX)+" "+q(g.bleedBox.topRightY)+"]"),null!==g.trimBox&&G("/TrimBox ["+q(g.trimBox.bottomLeftX)+" "+q(g.trimBox.bottomLeftY)+" "+q(g.trimBox.topRightX)+" "+q(g.trimBox.topRightY)+"]"),null!==g.artBox&&G("/ArtBox ["+q(g.artBox.bottomLeftX)+" "+q(g.artBox.bottomLeftY)+" "+q(g.artBox.topRightX)+" "+q(g.artBox.topRightY)+"]"),"number"==typeof g.userUnit&&1!==g.userUnit&&G("/UserUnit "+g.userUnit),zt.publish("putPage",{objId:J,pageContext:mt[A],pageNumber:A,page:Z}),G("/Contents "+de+" 0 R"),G(">>"),G("endobj");var De=Z.join("\n");return"advanced"===V&&(De+="\nQ"),xr(de,!0),Nr({data:De,filters:La(),objectId:de}),G("endobj"),J},Os=p.__private__.putPages=function(){var g,A,Z=[];for(g=1;g<=vi;g++)mt[g].objId=Ei(),mt[g].contentsObjId=Ei();for(g=1;g<=vi;g++)Z.push(Pa({number:g,data:Be[g],objId:mt[g].objId,contentsObjId:mt[g].contentsObjId,mediaBox:mt[g].mediaBox,cropBox:mt[g].cropBox,bleedBox:mt[g].bleedBox,trimBox:mt[g].trimBox,artBox:mt[g].artBox,userUnit:mt[g].userUnit,rootDictionaryObjId:tn,resourceDictionaryObjId:Qr}));xr(tn,!0),G("<</Type /Pages");var J="/Kids [";for(A=0;A<vi;A++)J+=Z[A]+" 0 R ";G(J+"]"),G("/Count "+vi),G(">>"),G("endobj"),zt.publish("postPutPages")},Lo=function(g){zt.publish("putFont",{font:g,out:G,newObject:Ri,putStream:Nr}),!0!==g.isAlreadyPutted&&(g.objectNumber=Ri(),G("<<"),G("/Type /Font"),G("/BaseFont /"+xo(g.postScriptName)),G("/Subtype /Type1"),"string"==typeof g.encoding&&G("/Encoding /"+g.encoding),G("/FirstChar 32"),G("/LastChar 255"),G(">>"),G("endobj"))},Fo=function(g){g.objectNumber=Ri();var A=[];A.push({key:"Type",value:"/XObject"}),A.push({key:"Subtype",value:"/Form"}),A.push({key:"BBox",value:"["+[q(g.x),q(g.y),q(g.x+g.width),q(g.y+g.height)].join(" ")+"]"}),A.push({key:"Matrix",value:"["+g.matrix.toString()+"]"});var Z=g.pages[1].join("\n");Nr({data:Z,additionalKeyValues:A,objectId:g.objectNumber}),G("endobj")},Yv=function(g,A){A||(A=21);var Z=Ri(),J=function(g,A){var Z,J=[],de=1/(A-1);for(Z=0;Z<1;Z+=de)J.push(Z);J.push(1),0!=g[0].offset&&g.unshift({offset:0,color:g[0].color}),1!=g[g.length-1].offset&&g.push({offset:1,color:g[g.length-1].color});for(var qe="",rt=0,wt=0;wt<J.length;wt++){for(Z=J[wt];Z>g[rt+1].offset;)rt++;var xt=g[rt].offset,Pt=(Z-xt)/(g[rt+1].offset-xt),ui=g[rt].color,gi=g[rt+1].color;qe+=ee(Math.round((1-Pt)*ui[0]+Pt*gi[0]).toString(16))+ee(Math.round((1-Pt)*ui[1]+Pt*gi[1]).toString(16))+ee(Math.round((1-Pt)*ui[2]+Pt*gi[2]).toString(16))}return qe.trim()}(g.colors,A),de=[];de.push({key:"FunctionType",value:"0"}),de.push({key:"Domain",value:"[0.0 1.0]"}),de.push({key:"Size",value:"["+A+"]"}),de.push({key:"BitsPerSample",value:"8"}),de.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),de.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nr({data:J,additionalKeyValues:de,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Z}),G("endobj"),g.objectNumber=Ri(),G("<< /ShadingType "+g.type),G("/ColorSpace /DeviceRGB");var De="/Coords ["+q(parseFloat(g.coords[0]))+" "+q(parseFloat(g.coords[1]))+" ";De+=2===g.type?q(parseFloat(g.coords[2]))+" "+q(parseFloat(g.coords[3])):q(parseFloat(g.coords[2]))+" "+q(parseFloat(g.coords[3]))+" "+q(parseFloat(g.coords[4]))+" "+q(parseFloat(g.coords[5])),G(De+="]"),g.matrix&&G("/Matrix ["+g.matrix.toString()+"]"),G("/Function "+Z+" 0 R"),G("/Extend [true true]"),G(">>"),G("endobj")},Xv=function(g,A){var Z=Ei(),J=Ri();A.push({resourcesOid:Z,objectOid:J}),g.objectNumber=J;var de=[];de.push({key:"Type",value:"/Pattern"}),de.push({key:"PatternType",value:"1"}),de.push({key:"PaintType",value:"1"}),de.push({key:"TilingType",value:"1"}),de.push({key:"BBox",value:"["+g.boundingBox.map(q).join(" ")+"]"}),de.push({key:"XStep",value:q(g.xStep)}),de.push({key:"YStep",value:q(g.yStep)}),de.push({key:"Resources",value:Z+" 0 R"}),g.matrix&&de.push({key:"Matrix",value:"["+g.matrix.toString()+"]"}),Nr({data:g.stream,additionalKeyValues:de,objectId:g.objectNumber}),G("endobj")},Mh=function(g){for(var A in g.objectNumber=Ri(),G("<<"),g)switch(A){case"opacity":G("/ca "+he(g[A]));break;case"stroke-opacity":G("/CA "+he(g[A]))}G(">>"),G("endobj")},xi=function(g){xr(g.resourcesOid,!0),G("<<"),G("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var g in G("/Font <<"),Qt)Qt.hasOwnProperty(g)&&(!1===c||!0===c&&f.hasOwnProperty(g))&&G("/"+g+" "+Qt[g].objectNumber+" 0 R");G(">>")}(),function(){if(Object.keys(Zt).length>0){for(var g in G("/Shading <<"),Zt)Zt.hasOwnProperty(g)&&Zt[g]instanceof Es&&Zt[g].objectNumber>=0&&G("/"+g+" "+Zt[g].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),G(">>")}}(),function(g){if(Object.keys(Zt).length>0){for(var A in G("/Pattern <<"),Zt)Zt.hasOwnProperty(A)&&Zt[A]instanceof p.TilingPattern&&Zt[A].objectNumber>=0&&Zt[A].objectNumber<g&&G("/"+A+" "+Zt[A].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),G(">>")}}(g.objectOid),function(){if(Object.keys(fi).length>0){var g;for(g in G("/ExtGState <<"),fi)fi.hasOwnProperty(g)&&fi[g].objectNumber>=0&&G("/"+g+" "+fi[g].objectNumber+" 0 R");zt.publish("putGStateDict"),G(">>")}}(),function(){for(var g in G("/XObject <<"),Ki)Ki.hasOwnProperty(g)&&Ki[g].objectNumber>=0&&G("/"+g+" "+Ki[g].objectNumber+" 0 R");zt.publish("putXobjectDict"),G(">>")}(),G(">>"),G("endobj")},Wh=function(g){oi[g.fontName]=oi[g.fontName]||{},oi[g.fontName][g.fontStyle]=g.id},pd=function(g,A,Z,J,de){var De={id:"F"+(Object.keys(Qt).length+1).toString(10),postScriptName:g,fontName:A,fontStyle:Z,encoding:J,isStandardFont:de||!1,metadata:{}};return zt.publish("addFont",{font:De,instance:this}),Qt[De.id]=De,Wh(De),De.id},fr=p.__private__.pdfEscape=p.pdfEscape=function(g,A){return function(g,A){var Z,J,de,De,Ve,qe,rt,wt,xt;if(de=(A=A||{}).sourceEncoding||"Unicode",Ve=A.outputEncoding,(A.autoencode||Ve)&&Qt[It].metadata&&Qt[It].metadata[de]&&Qt[It].metadata[de].encoding&&(De=Qt[It].metadata[de].encoding,!Ve&&Qt[It].encoding&&(Ve=Qt[It].encoding),!Ve&&De.codePages&&(Ve=De.codePages[0]),"string"==typeof Ve&&(Ve=De[Ve]),Ve)){for(rt=!1,qe=[],Z=0,J=g.length;Z<J;Z++)(wt=Ve[g.charCodeAt(Z)])?qe.push(String.fromCharCode(wt)):qe.push(g[Z]),qe[Z].charCodeAt(0)>>8&&(rt=!0);g=qe.join("")}for(Z=g.length;void 0===rt&&0!==Z;)g.charCodeAt(Z-1)>>8&&(rt=!0),Z--;if(!rt)return g;for(qe=A.noBOM?[]:[254,255],Z=0,J=g.length;Z<J;Z++){if((xt=(wt=g.charCodeAt(Z))>>8)>>8)throw new Error("Character at position "+Z+" of string '"+g+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");qe.push(xt),qe.push(wt-(xt<<8))}return String.fromCharCode.apply(void 0,qe)}(g,A).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fd=p.__private__.beginPage=function(g){Be[++vi]=[],mt[vi]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(g[0]),topRightY:Number(g[1])}},$h(vi),Oe(Be[H])},Kh=function(g,A){var Z,J,de;switch(t=A||t,"string"==typeof g&&(Z=x(g.toLowerCase()),Array.isArray(Z)&&(J=Z[0],de=Z[1])),Array.isArray(g)&&(J=g[0]*Ue,de=g[1]*Ue),isNaN(J)&&(J=a[0],de=a[1]),(J>14400||de>14400)&&(Jt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),J=Math.min(14400,J),de=Math.min(14400,de)),a=[J,de],t.substr(0,1)){case"l":de>J&&(a=[de,J]);break;case"p":J>de&&(a=[de,J])}fd(a),Xh(md),G(ra),0!==wd&&G(wd+" J"),0!==bd&&G(bd+" j"),zt.publish("addPage",{pageNumber:vi})},rg=function(g){g>0&&g<=vi&&(Be.splice(g,1),mt.splice(g,1),vi--,H>vi&&(H=vi),this.setPage(H))},$h=function(g){g>0&&g<=vi&&(H=g)},ag=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Be.length-1},Gh=function(g,A,Z){var J,de=void 0;return Z=Z||{},A=void 0!==A?A:Qt[It].fontStyle,J=(g=void 0!==g?g:Qt[It].fontName).toLowerCase(),void 0!==oi[J]&&void 0!==oi[J][A]?de=oi[J][A]:void 0!==oi[g]&&void 0!==oi[g][A]?de=oi[g][A]:!1===Z.disableWarning&&Jt.warn("Unable to look up font label for font '"+g+"', '"+A+"'. Refer to getFontList() for available fonts."),de||Z.noFallback||null==(de=oi.times[A])&&(de=oi.times.normal),de},ng=p.__private__.putInfo=function(){var g=Ri(),A=function(J){return J};for(var Z in null!==u&&(A=er.encryptor(g,0)),G("<<"),G("/Producer ("+fr(A("jsPDF "+st.version))+")"),ct)ct.hasOwnProperty(Z)&&ct[Z]&&G("/"+Z.substr(0,1).toUpperCase()+Z.substr(1)+" ("+fr(A(ct[Z]))+")");G("/CreationDate ("+fr(A(ge))+")"),G(">>"),G("endobj")},vd=p.__private__.putCatalog=function(g){var A=(g=g||{}).rootDictionaryObjId||tn;switch(Ri(),G("<<"),G("/Type /Catalog"),G("/Pages "+A+" 0 R"),Ge||(Ge="fullwidth"),Ge){case"fullwidth":G("/OpenAction [3 0 R /FitH null]");break;case"fullheight":G("/OpenAction [3 0 R /FitV null]");break;case"fullpage":G("/OpenAction [3 0 R /Fit]");break;case"original":G("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Z=""+Ge;"%"===Z.substr(Z.length-1)&&(Ge=parseInt(Ge)/100),"number"==typeof Ge&&G("/OpenAction [3 0 R /XYZ null null "+he(Ge)+"]")}switch(Et||(Et="continuous"),Et){case"continuous":G("/PageLayout /OneColumn");break;case"single":G("/PageLayout /SinglePage");break;case"two":case"twoleft":G("/PageLayout /TwoColumnLeft");break;case"tworight":G("/PageLayout /TwoColumnRight")}_t&&G("/PageMode /"+_t),zt.publish("putCatalog"),G(">>"),G("endobj")},sg=p.__private__.putTrailer=function(){G("trailer"),G("<<"),G("/Size "+(oe+1)),G("/Root "+oe+" 0 R"),G("/Info "+(oe-1)+" 0 R"),null!==u&&G("/Encrypt "+er.oid+" 0 R"),G("/ID [ <"+ue+"> <"+ue+"> ]"),G(">>")},og=p.__private__.putHeader=function(){G("%PDF-"+_),G("%\xba\xdf\xac\xe0")},lg=p.__private__.putXRef=function(){var g="0000000000";G("xref"),G("0 "+(oe+1)),G("0000000000 65535 f ");for(var A=1;A<=oe;A++)G("function"==typeof _e[A]?(g+_e[A]()).slice(-10)+" 00000 n ":void 0!==_e[A]?(g+_e[A]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},rn=p.__private__.buildDocument=function(){oe=0,be=0,me=[],_e=[],ke=[],tn=Ei(),Qr=Ei(),Oe(me),zt.publish("buildDocument"),og(),Os(),function(){zt.publish("putAdditionalObjects");for(var g=0;g<ke.length;g++){var A=ke[g];xr(A.objId,!0),G(A.content),G("endobj")}zt.publish("postPutAdditionalObjects")}(),function(){var g=[];(function(){for(var g in Qt)Qt.hasOwnProperty(g)&&(!1===c||!0===c&&f.hasOwnProperty(g))&&Lo(Qt[g])})(),function(){var g;for(g in fi)fi.hasOwnProperty(g)&&Mh(fi[g])}(),function(){for(var g in Ki)Ki.hasOwnProperty(g)&&Fo(Ki[g])}(),function(g){var A;for(A in Zt)Zt.hasOwnProperty(A)&&(Zt[A]instanceof Es?Yv(Zt[A]):Zt[A]instanceof So&&Xv(Zt[A],g))}(g),zt.publish("putResources"),g.forEach(xi),xi({resourcesOid:Qr,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")}(),null!==u&&(er.oid=Ri(),G("<<"),G("/Filter /Standard"),G("/V "+er.v),G("/R "+er.r),G("/U <"+er.toHexString(er.U)+">"),G("/O <"+er.toHexString(er.O)+">"),G("/P "+er.P),G(">>"),G("endobj")),ng(),vd();var g=be;return lg(),sg(),G("startxref"),G(""+g),G("%%EOF"),Oe(Be[H]),me.join("\n")},Mo=p.__private__.getBlob=function(g){return new Blob([tt(g)],{type:"application/pdf"})},Ho=p.output=p.__private__.output=((g=function(g,A){switch("string"==typeof(A=A||{})?A={filename:A}:A.filename=A.filename||"generated.pdf",g){case void 0:return rn();case"save":p.save(A.filename);break;case"arraybuffer":return tt(rn());case"blob":return Mo(rn());case"bloburi":case"bloburl":if(void 0!==dt.URL&&"function"==typeof dt.URL.createObjectURL)return dt.URL&&dt.URL.createObjectURL(Mo(rn()))||void 0;Jt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Z="",J=rn();try{Z=Mv(J)}catch{Z=Mv(unescape(encodeURIComponent(J)))}return"data:application/pdf;filename="+A.filename+";base64,"+Z;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(dt)){var de="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",De=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';A.pdfObjectUrl&&(de=A.pdfObjectUrl,De="");var Ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+de+'"'+De+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(A)+");<\/script></body></html>",qe=dt.open();return null!==qe&&qe.document.write(Ve),qe}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(dt)){var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(A.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+A.filename+'" width="500px" height="400px" /></body></html>',wt=dt.open();if(null!==wt){wt.document.write(rt);var xt=this;wt.document.documentElement.querySelector("#pdfViewer").onload=function(){wt.document.title=A.filename,wt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(xt.output("bloburl"))}}return wt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(dt))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",A)+'"></iframe></body></html>',ui=dt.open();if(null!==ui&&(ui.document.write(Pt),ui.document.title=A.filename),ui||typeof safari>"u")return ui;break;case"datauri":case"dataurl":return dt.document.location.href=this.output("datauristring",A);default:return null}}).foo=function(){try{return g.apply(this,arguments)}catch(J){var A=J.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var Z="Error in function "+A.split("\n")[0].split("<")[0]+": "+J.message;if(!dt.console)throw new Error(Z);dt.console.error(Z,J),dt.alert&&alert(Z)}},g.foo.bar=g,g.foo),Uh=function(g){return!0===Array.isArray(Ds)&&Ds.indexOf(g)>-1};switch(i){case"pt":Ue=1;break;case"mm":Ue=72/25.4;break;case"cm":Ue=72/2.54;break;case"in":Ue=72;break;case"px":Ue=1==Uh("px_scaling")?.75:96/72;break;case"pc":case"em":Ue=12;break;case"ex":Ue=6;break;default:if("number"!=typeof i)throw new Error("Invalid unit: "+i);Ue=i}var er=null;Me(),ce();var jh=p.__private__.getPageInfo=p.getPageInfo=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mt[g].objId,pageNumber:g,pageContext:mt[g]}},vt=p.__private__.getPageInfoByObjId=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var A in mt)if(mt[A].objId===g)break;return jh(A)},ug=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:mt[H].objId,pageNumber:H,pageContext:mt[H]}};p.addPage=function(){return Kh.apply(this,arguments),this},p.setPage=function(){return $h.apply(this,arguments),Oe.call(this,Be[H]),this},p.insertPage=function(g){return this.addPage(),this.movePage(H,g),this},p.movePage=function(g,A){var Z,J;if(g>A){Z=Be[g],J=mt[g];for(var de=g;de>A;de--)Be[de]=Be[de-1],mt[de]=mt[de-1];Be[A]=Z,mt[A]=J,this.setPage(A)}else if(g<A){Z=Be[g],J=mt[g];for(var De=g;De<A;De++)Be[De]=Be[De+1],mt[De]=mt[De+1];Be[A]=Z,mt[A]=J,this.setPage(A)}return this},p.deletePage=function(){return rg.apply(this,arguments),this},p.__private__.text=p.text=function(g,A,Z,J,de){var De,Ve,qe,rt,wt,xt,Pt,ui,gi,Ii=(J=J||{}).scope||this;if("number"==typeof g&&"number"==typeof A&&("string"==typeof Z||Array.isArray(Z))){var tr=Z;Z=A,A=g,g=tr}if(arguments[3]instanceof ot?(k("The transform parameter of text() with a Matrix value"),gi=de):(qe=arguments[4],rt=arguments[5],"object"===(0,Xt.Z)(Pt=arguments[3])&&null!==Pt||("string"==typeof qe&&(rt=qe,qe=null),"string"==typeof Pt&&(rt=Pt,Pt=null),"number"==typeof Pt&&(qe=Pt,Pt=null),J={flags:Pt,angle:qe,align:rt})),isNaN(A)||isNaN(Z)||null==g)throw new Error("Invalid arguments passed to jsPDF.text");if(0===g.length)return Ii;var aa,Mi="",Sr="number"==typeof J.lineHeightFactor?J.lineHeightFactor:Ls,nn=Ii.internal.scaleFactor;function rc(ri){return ri=ri.split("\t").join(Array(J.TabLen||9).join(" ")),fr(ri,Pt)}function Id(ri){for(var ai,Si=ri.concat(),Li=[],dn=Si.length;dn--;)"string"==typeof(ai=Si.shift())?Li.push(ai):Array.isArray(ri)&&(1===ai.length||void 0===ai[1]&&void 0===ai[2])?Li.push(ai[0]):Li.push([ai[0],ai[1],ai[2]]);return Li}function Ad(ri,ai){var Si;if("string"==typeof ri)Si=ai(ri)[0];else if(Array.isArray(ri)){for(var Li,dn,Zn=ri.concat(),el=[],nc=Zn.length;nc--;)"string"==typeof(Li=Zn.shift())?el.push(ai(Li)[0]):Array.isArray(Li)&&"string"==typeof Li[0]&&(dn=ai(Li[0],Li[1],Li[2]),el.push([dn[0],dn[1],dn[2]]));Si=el}return Si}var Go=!1,Td=!0;if("string"==typeof g)Go=!0;else if(Array.isArray(g)){var Dd=g.concat();Ve=[];for(var Uo,vr=Dd.length;vr--;)("string"!=typeof(Uo=Dd.shift())||Array.isArray(Uo)&&"string"!=typeof Uo[0])&&(Td=!1);Go=Td}if(!1===Go)throw new Error('Type of text must be string or Array. "'+g+'" is not recognized.');"string"==typeof g&&(g=g.match(/[\r?\n]/)?g.split(/\r\n|\r|\n/g):[g]);var jo=Ze/Ii.internal.scaleFactor,qo=jo*(Sr-1);switch(J.baseline){case"bottom":Z-=qo;break;case"top":Z+=jo-qo;break;case"hanging":Z+=jo-2*qo;break;case"middle":Z+=jo/2-qo}if((xt=J.maxWidth||0)>0&&("string"==typeof g?g=Ii.splitTextToSize(g,xt):"[object Array]"===Object.prototype.toString.call(g)&&(g=g.reduce(function(ri,ai){return ri.concat(Ii.splitTextToSize(ai,xt))},[]))),zt.publish("preProcessText",De={text:g,x:A,y:Z,options:J,mutex:{pdfEscape:fr,activeFontKey:It,fonts:Qt,activeFontSize:Ze}}),g=De.text,qe=(J=De.options).angle,gi instanceof ot||!qe||"number"!=typeof qe)qe&&qe instanceof ot&&(gi=qe);else{qe*=Math.PI/180,0===J.rotationDirection&&(qe=-qe),"advanced"===V&&(qe=-qe);var Yo=Math.cos(qe),Od=Math.sin(qe);gi=new ot(Yo,Od,-Od,Yo,0,0)}"advanced"!==V||gi||(gi=Ra),void 0!==(wt=J.charSpace||Wo)&&(Mi+=q(P(wt))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(ui=J.horizontalScale)&&(Mi+=q(100*ui)+" Tz\n");var gr=-1,wg=void 0!==J.renderingMode?J.renderingMode:J.stroke,Rd=Ii.internal.getCurrentPageInfo().pageContext;switch(wg){case 0:case!1:case"fill":gr=0;break;case 1:case!0:case"stroke":gr=1;break;case 2:case"fillThenStroke":gr=2;break;case 3:case"invisible":gr=3;break;case 4:case"fillAndAddForClipping":gr=4;break;case 5:case"strokeAndAddPathForClipping":gr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gr=6;break;case 7:case"addToPathForClipping":gr=7}-1!==gr?Mi+=gr+" Tr\n":-1!==(void 0!==Rd.usedRenderingMode?Rd.usedRenderingMode:-1)&&(Mi+="0 Tr\n"),-1!==gr&&(Rd.usedRenderingMode=gr),rt=J.align||"left";var na,Ld=Ze*Sr,bg=Ii.internal.pageSize.getWidth(),yg=Qt[It];wt=J.charSpace||Wo,xt=J.maxWidth||0,Pt=Object.assign({autoencode:!0,noBOM:!0},J.flags);var Bn=[];if("[object Array]"===Object.prototype.toString.call(g)){var Br;Ve=Id(g),"left"!==rt&&(na=Ve.map(function(ri){return Ii.getStringUnitWidth(ri,{font:yg,charSpace:wt,fontSize:Ze,doKerning:!1})*Ze/nn}));var sa,kn=0;if("right"===rt){A-=na[0],g=[],vr=Ve.length;for(var Va=0;Va<vr;Va++)0===Va?(sa=an(A),Br=Fn(Z)):(sa=P(kn-na[Va]),Br=-Ld),g.push([Ve[Va],sa,Br]),kn=na[Va]}else if("center"===rt){A-=na[0]/2,g=[],vr=Ve.length;for(var sn=0;sn<vr;sn++)0===sn?(sa=an(A),Br=Fn(Z)):(sa=P((kn-na[sn])/2),Br=-Ld),g.push([Ve[sn],sa,Br]),kn=na[sn]}else if("left"===rt){g=[],vr=Ve.length;for(var Xo=0;Xo<vr;Xo++)g.push(Ve[Xo])}else{if("justify"!==rt)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');g=[],vr=Ve.length,xt=0!==xt?xt:bg;for(var oa=0;oa<vr;oa++)Br=0===oa?Fn(Z):-Ld,sa=0===oa?an(A):0,Bn.push(oa<vr-1?q(P((xt-na[oa])/(Ve[oa].split(" ").length-1))):0),g.push([Ve[oa],sa,Br])}}!0===("boolean"==typeof J.R2L?J.R2L:it)&&(g=Ad(g,function(ri,ai,Si){return[ri.split("").reverse().join(""),ai,Si]})),zt.publish("postProcessText",De={text:g,x:A,y:Z,options:J,mutex:{pdfEscape:fr,activeFontKey:It,fonts:Qt,activeFontSize:Ze}}),g=De.text,aa=De.mutex.isHex||!1;var Pd=Qt[It].encoding;"WinAnsiEncoding"!==Pd&&"StandardEncoding"!==Pd||(g=Ad(g,function(ri,ai,Si){return[rc(ri),ai,Si]})),Ve=Id(g),g=[];for(var Mn,la,on,Ns=Array.isArray(Ve[0])?1:0,Hn="",Fd=function(ri,ai,Si){var Li="";return Si instanceof ot?(Si="number"==typeof J.angle?Jr(Si,new ot(1,0,0,1,ri,ai)):Jr(new ot(1,0,0,1,ri,ai),Si),"advanced"===V&&(Si=Jr(new ot(1,0,0,-1,0,0),Si)),Li=Si.join(" ")+" Tm\n"):Li=q(ri)+" "+q(ai)+" Td\n",Li},kr=0;kr<Ve.length;kr++){switch(Hn="",Ns){case 1:on=(aa?"<":"(")+Ve[kr][0]+(aa?">":")"),Mn=parseFloat(Ve[kr][1]),la=parseFloat(Ve[kr][2]);break;case 0:on=(aa?"<":"(")+Ve[kr]+(aa?">":")"),Mn=an(A),la=Fn(Z)}void 0!==Bn&&void 0!==Bn[kr]&&(Hn=Bn[kr]+" Tw\n"),0===kr?g.push(Hn+Fd(Mn,la,gi)+on):0===Ns?g.push(Hn+on):1===Ns&&g.push(Hn+Fd(Mn,la,gi)+on)}g=g.join(0===Ns?" Tj\nT* ":" Tj\n"),g+=" Tj\n";var ln="BT\n/";return ln+=It+" "+Ze+" Tf\n",ln+=q(Ze*Sr)+" TL\n",ln+=Ps+"\n",ln+=Mi,ln+=g,G(ln+="ET"),f[It]=!0,Ii};var hg=p.__private__.clip=p.clip=function(g){return G("evenodd"===g?"W*":"W"),this};p.clipEvenOdd=function(){return hg("evenodd")},p.__private__.discardPath=p.discardPath=function(){return G("n"),this};var Fa=p.__private__.isValidStyle=function(g){var A=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(g)&&(A=!0),A};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(g){return Fa(g)&&(d=g),this};var qh=p.__private__.getStyle=p.getStyle=function(g){var A=d;switch(g){case"D":case"S":A="S";break;case"F":A="f";break;case"FD":case"DF":A="B";break;case"f":case"f*":case"B":case"B*":A=g}return A},Yh=p.close=function(){return G("h"),this};p.stroke=function(){return G("S"),this},p.fill=function(g){return Zo("f",g),this},p.fillEvenOdd=function(g){return Zo("f*",g),this},p.fillStroke=function(g){return Zo("B",g),this},p.fillStrokeEvenOdd=function(g){return Zo("B*",g),this};var Zo=function(g,A){"object"===(0,Xt.Z)(A)?pg(A,g):G(g)},gd=function(g){null===g||"advanced"===V&&void 0===g||(g=qh(g),G(g))};function cg(g,A,Z,J,de){var De=new So(A||this.boundingBox,Z||this.xStep,J||this.yStep,this.gState,de||this.matrix);De.stream=this.stream;var Ve=g+"$$"+this.cloneIndex+++"$$";return pr(Ve,De),De}var pg=function(g,A){var Z=Ts[g.key],J=Zt[Z];if(J instanceof Es)G("q"),G(fg(A)),J.gState&&p.setGState(J.gState),G(g.matrix.toString()+" cm"),G("/"+Z+" sh"),G("Q");else if(J instanceof So){var de=new ot(1,0,0,-1,0,Nn());g.matrix&&(de=de.multiply(g.matrix||Ra),Z=cg.call(J,g.key,g.boundingBox,g.xStep,g.yStep,de).id),G("q"),G("/Pattern cs"),G("/"+Z+" scn"),J.gState&&p.setGState(J.gState),G(A),G("Q")}},fg=function(g){switch(g){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},_d=p.moveTo=function(g,A){return G(q(P(g))+" "+q(K(A))+" m"),this},Rs=p.lineTo=function(g,A){return G(q(P(g))+" "+q(K(A))+" l"),this},Pn=p.curveTo=function(g,A,Z,J,de,De){return G([q(P(g)),q(K(A)),q(P(Z)),q(K(J)),q(P(de)),q(K(De)),"c"].join(" ")),this};p.__private__.line=p.line=function(g,A,Z,J,de){if(isNaN(g)||isNaN(A)||isNaN(Z)||isNaN(J)||!Fa(de))throw new Error("Invalid arguments passed to jsPDF.line");return"compat"===V?this.lines([[Z-g,J-A]],g,A,[1,1],de||"S"):this.lines([[Z-g,J-A]],g,A,[1,1]).stroke()},p.__private__.lines=p.lines=function(g,A,Z,J,de,De){var Ve,qe,rt,wt,xt,tr,Mi,aa;if("number"==typeof g&&(aa=Z,Z=A,A=g,g=aa),J=J||[1,1],De=De||!1,isNaN(A)||isNaN(Z)||!Array.isArray(g)||!Array.isArray(J)||!Fa(de)||"boolean"!=typeof De)throw new Error("Invalid arguments passed to jsPDF.lines");for(_d(A,Z),Ve=J[0],qe=J[1],wt=g.length,tr=A,Mi=Z,rt=0;rt<wt;rt++)2===(xt=g[rt]).length?Rs(tr=xt[0]*Ve+tr,Mi=xt[1]*qe+Mi):Pn(xt[0]*Ve+tr,xt[1]*qe+Mi,xt[2]*Ve+tr,xt[3]*qe+Mi,tr=xt[4]*Ve+tr,Mi=xt[5]*qe+Mi);return De&&Yh(),gd(de),this},p.path=function(g){for(var A=0;A<g.length;A++){var Z=g[A],J=Z.c;switch(Z.op){case"m":_d(J[0],J[1]);break;case"l":Rs(J[0],J[1]);break;case"c":Pn.apply(this,J);break;case"h":Yh()}}return this},p.__private__.rect=p.rect=function(g,A,Z,J,de){if(isNaN(g)||isNaN(A)||isNaN(Z)||isNaN(J)||!Fa(de))throw new Error("Invalid arguments passed to jsPDF.rect");return"compat"===V&&(J=-J),G([q(P(g)),q(K(A)),q(P(Z)),q(P(J)),"re"].join(" ")),gd(de),this},p.__private__.triangle=p.triangle=function(g,A,Z,J,de,De,Ve){if(isNaN(g)||isNaN(A)||isNaN(Z)||isNaN(J)||isNaN(de)||isNaN(De)||!Fa(Ve))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Z-g,J-A],[de-Z,De-J],[g-de,A-De]],g,A,[1,1],Ve,!0),this},p.__private__.roundedRect=p.roundedRect=function(g,A,Z,J,de,De,Ve){if(isNaN(g)||isNaN(A)||isNaN(Z)||isNaN(J)||isNaN(de)||isNaN(De)||!Fa(Ve))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qe=4/3*(Math.SQRT2-1);return de=Math.min(de,.5*Z),De=Math.min(De,.5*J),this.lines([[Z-2*de,0],[de*qe,0,de,De-De*qe,de,De],[0,J-2*De],[0,De*qe,-de*qe,De,-de,De],[2*de-Z,0],[-de*qe,0,-de,-De*qe,-de,-De],[0,2*De-J],[0,-De*qe,de*qe,-De,de,-De]],g+de,A,[1,1],Ve,!0),this},p.__private__.ellipse=p.ellipse=function(g,A,Z,J,de){if(isNaN(g)||isNaN(A)||isNaN(Z)||isNaN(J)||!Fa(de))throw new Error("Invalid arguments passed to jsPDF.ellipse");var De=4/3*(Math.SQRT2-1)*Z,Ve=4/3*(Math.SQRT2-1)*J;return _d(g+Z,A),Pn(g+Z,A-Ve,g+De,A-J,g,A-J),Pn(g-De,A-J,g-Z,A-Ve,g-Z,A),Pn(g-Z,A+Ve,g-De,A+J,g,A+J),Pn(g+De,A+J,g+Z,A+Ve,g+Z,A),gd(de),this},p.__private__.circle=p.circle=function(g,A,Z,J){if(isNaN(g)||isNaN(A)||isNaN(Z)||!Fa(J))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(g,A,Z,Z,J)},p.setFont=function(g,A,Z){return Z&&(A=Q(A,Z)),It=Gh(g,A,{disableWarning:!1}),this};var vg=p.__private__.getFont=p.getFont=function(){return Qt[Gh.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var g,A,Z={};for(g in oi)if(oi.hasOwnProperty(g))for(A in Z[g]=[],oi[g])oi[g].hasOwnProperty(A)&&Z[g].push(A);return Z},p.addFont=function(g,A,Z,J,de){var De=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==De.indexOf(arguments[3])?de=arguments[3]:arguments[3]&&-1==De.indexOf(arguments[3])&&(Z=Q(Z,J)),pd.call(this,g,A,Z,de=de||"Identity-H")};var Ls,md=r.lineWidth||.200025,zo=p.__private__.getLineWidth=p.getLineWidth=function(){return md},Xh=p.__private__.setLineWidth=p.setLineWidth=function(g){return md=g,G(q(P(g))+" w"),this};p.__private__.setLineDash=st.API.setLineDash=st.API.setLineDashPattern=function(g,A){if(g=g||[],A=A||0,isNaN(A)||!Array.isArray(g))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return g=g.map(function(Z){return q(P(Z))}).join(" "),A=q(P(A)),G("["+g+"] "+A+" d"),this};var Jh=p.__private__.getLineHeight=p.getLineHeight=function(){return Ze*Ls};p.__private__.getLineHeight=p.getLineHeight=function(){return Ze*Ls};var Qh=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(g){return"number"==typeof(g=g||1.15)&&(Ls=g),this},ec=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Ls};Qh(r.lineHeight);var an=p.__private__.getHorizontalCoordinate=function(g){return P(g)},Fn=p.__private__.getVerticalCoordinate=function(g){return"advanced"===V?g:mt[H].mediaBox.topRightY-mt[H].mediaBox.bottomLeftY-P(g)},gg=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(g){return q(an(g))},Vn=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(g){return q(Fn(g))},ra=r.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ea(ra)},p.__private__.setStrokeColor=p.setDrawColor=function(g,A,Z,J){return ra=ta({ch1:g,ch2:A,ch3:Z,ch4:J,pdfColorType:"draw",precision:2}),G(ra),this};var Cd=r.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ea(Cd)},p.__private__.setFillColor=p.setFillColor=function(g,A,Z,J){return Cd=ta({ch1:g,ch2:A,ch3:Z,ch4:J,pdfColorType:"fill",precision:2}),G(Cd),this};var Ps=r.textColor||"0 g",_g=p.__private__.getTextColor=p.getTextColor=function(){return ea(Ps)};p.__private__.setTextColor=p.setTextColor=function(g,A,Z,J){return Ps=ta({ch1:g,ch2:A,ch3:Z,ch4:J,pdfColorType:"text",precision:3}),this};var Wo=r.charSpace,mg=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Wo||0)};p.__private__.setCharSpace=p.setCharSpace=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Wo=g,this};var wd=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(g){var A=p.CapJoinStyles[g];if(void 0===A)throw new Error("Line cap style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wd=A,G(A+" J"),this};var bd=0;p.__private__.setLineJoin=p.setLineJoin=function(g){var A=p.CapJoinStyles[g];if(void 0===A)throw new Error("Line join style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bd=A,G(A+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(g){if(g=g||0,isNaN(g))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return G(q(P(g))+" M"),this},p.GState=Dh,p.setGState=function(g){(g="string"==typeof g?fi[Xr[g]]:tc(null,g)).equals(en)||(G("/"+g.id+" gs"),en=g)};var tc=function(g,A){if(!g||!Xr[g]){var Z=!1;for(var J in fi)if(fi.hasOwnProperty(J)&&fi[J].equals(A)){Z=!0;break}if(Z)A=fi[J];else{var de="GS"+(Object.keys(fi).length+1).toString(10);fi[de]=A,A.id=de}return g&&(Xr[g]=A.id),zt.publish("addGState",A),A}};p.addGState=function(g,A){return tc(g,A),this},p.saveGraphicsState=function(){return G("q"),Ta.push({key:It,size:Ze,color:Ps}),this},p.restoreGraphicsState=function(){G("Q");var g=Ta.pop();return It=g.key,Ze=g.size,Ps=g.color,en=null,this},p.setCurrentTransformationMatrix=function(g){return G(g.toString()+" cm"),this},p.comment=function(g){return G("#"+g),this};var Ko=function(g,A){var Z=g||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Z},set:function(De){isNaN(De)||(Z=parseFloat(De))}});var J=A||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return J},set:function(De){isNaN(De)||(J=parseFloat(De))}});var de="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return de},set:function(De){de=De.toString()}}),this},yd=function(g,A,Z,J){Ko.call(this,g,A),this.type="rect";var de=Z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return de},set:function(Ve){isNaN(Ve)||(de=parseFloat(Ve))}});var De=J||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return De},set:function(Ve){isNaN(Ve)||(De=parseFloat(Ve))}}),this},xd=function(){this.page=vi,this.currentPage=H,this.pages=Be.slice(0),this.pagesContext=mt.slice(0),this.x=Qi,this.y=Mt,this.matrix=Yr,this.width=Fs(H),this.height=Nn(H),this.outputDestination=Xe,this.id="",this.objectNumber=-1};xd.prototype.restore=function(){vi=this.page,mt=this.pagesContext,Be=this.pages,Qi=this.x,Mt=this.y,Yr=this.matrix,Sd(H=this.currentPage,this.width),Ed(H,this.height),Xe=this.outputDestination};var ic=function(g,A,Z,J,de){Oa.push(new xd),vi=H=0,Be=[],Qi=g,Mt=A,Yr=de,fd([Z,J])};for(var $o in p.beginFormObject=function(g,A,Z,J,de){return ic(g,A,Z,J,de),this},p.endFormObject=function(g){return function(g){if(Da[g])Oa.pop().restore();else{var A=new xd,Z="Xo"+(Object.keys(Ki).length+1).toString(10);A.id=Z,Da[g]=Z,Ki[Z]=A,zt.publish("addFormObject",A),Oa.pop().restore()}}(g),this},p.doFormObject=function(g,A){var Z=Ki[Da[g]];return G("q"),G(A.toString()+" cm"),G("/"+Z.id+" Do"),G("Q"),this},p.getFormObject=function(g){var A=Ki[Da[g]];return{x:A.x,y:A.y,width:A.width,height:A.height,matrix:A.matrix}},p.save=function(g,A){return g=g||"generated.pdf",(A=A||{}).returnPromise=A.returnPromise||!1,!1===A.returnPromise?(Ss(Mo(rn()),g),"function"==typeof Ss.unload&&dt.setTimeout&&setTimeout(Ss.unload,911),this):new Promise(function(Z,J){try{var de=Ss(Mo(rn()),g);"function"==typeof Ss.unload&&dt.setTimeout&&setTimeout(Ss.unload,911),Z(de)}catch(De){J(De.message)}})},st.API)st.API.hasOwnProperty($o)&&("events"===$o&&st.API.events.length?function(g,A){var J,de;for(de=A.length-1;-1!==de;de--)g.subscribe.apply(g,[A[de][0]].concat("function"==typeof(J=A[de][1])?[J]:J))}(zt,st.API.events):p[$o]=st.API[$o]);var Fs=p.getPageWidth=function(g){return(mt[g=g||H].mediaBox.topRightX-mt[g].mediaBox.bottomLeftX)/Ue},Sd=p.setPageWidth=function(g,A){mt[g].mediaBox.topRightX=A*Ue+mt[g].mediaBox.bottomLeftX},Nn=p.getPageHeight=function(g){return(mt[g=g||H].mediaBox.topRightY-mt[g].mediaBox.bottomLeftY)/Ue},Ed=p.setPageHeight=function(g,A){mt[g].mediaBox.topRightY=A*Ue+mt[g].mediaBox.bottomLeftY};return p.internal={pdfEscape:fr,getStyle:qh,getFont:vg,getFontSize:$e,getCharSpace:mg,getTextColor:_g,getLineHeight:Jh,getLineHeightFactor:ec,getLineWidth:zo,write:Ct,getHorizontalCoordinate:an,getVerticalCoordinate:Fn,getCoordinateString:gg,getVerticalCoordinateString:Vn,collections:{},newObject:Ri,newAdditionalObject:Ro,newObjectDeferred:Ei,newObjectDeferredBegin:xr,getFilters:La,putStream:Nr,events:zt,scaleFactor:Ue,pageSize:{getWidth:function(){return Fs(H)},setWidth:function(g){Sd(H,g)},getHeight:function(){return Nn(H)},setHeight:function(g){Ed(H,g)}},encryptionOptions:u,encryption:er,getEncryptor:function(g){return null!==u?er.encryptor(g,0):function(A){return A}},output:Ho,getNumberOfPages:ag,pages:Be,out:G,f2:he,f3:F,getPageInfo:jh,getPageInfoByObjId:vt,getCurrentPageInfo:ug,getPDFVersion:w,Point:Ko,Rectangle:yd,Matrix:ot,hasHotfix:Uh},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Fs(H)},set:function(g){Sd(H,g)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Nn(H)},set:function(g){Ed(H,g)},enumerable:!0,configurable:!0}),function(g){for(var A=0,Z=Ne.length;A<Z;A++){var J=pd.call(this,g[A][0],g[A][1],g[A][2],Ne[A][3],!0);!1===c&&(f[J]=!0);var de=g[A][0].split("-");Wh({id:J,fontName:de[0],fontStyle:de[1]||""})}zt.publish("addFonts",{fonts:Qt,dictionary:oi})}.call(p,Ne),It="F1",Kh(a,t),zt.publish("initialized"),p}yo.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},yo.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yo.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},yo.prototype.processOwnerPassword=function(r,e){return zv(Zv(e).substr(0,5),r)},yo.prototype.encryptor=function(r,e){var t=Zv(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return zv(t,i)}},Dh.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||(0,Xt.Z)(r)!==(0,Xt.Z)(this))return!1;var i=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;i++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&i--;return 0===i},st.API={events:[]},st.version="2.5.1";var pi=st.API,Wv=1,Is=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Eo=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},gt=function(r){return r.toFixed(2)},Rn=function(r){return r.toFixed(5)};pi.__acroform__={};var cr=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},DE=function(r){return r*Wv},Ea=function(r){var e=new RE,t=et.internal.getHeight(r)||0,i=et.internal.getWidth(r)||0;return e.BBox=[0,0,Number(gt(i)),Number(gt(t))],e},P8=pi.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},F8=pi.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},V8=pi.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},wi=pi.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return V8(r,e-1)},bi=pi.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return P8(r,e-1)},yi=pi.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return F8(r,e-1)},N8=pi.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,a=r[0],n=r[1],s=r[2],o=r[3],l={};return l.lowerLeft_X=t(a)||0,l.lowerLeft_Y=i(n+o)||0,l.upperRight_X=t(a+s)||0,l.upperRight_Y=i(n)||0,[Number(gt(l.lowerLeft_X)),Number(gt(l.lowerLeft_Y)),Number(gt(l.upperRight_X)),Number(gt(l.upperRight_Y))]},B8=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],i=Kv(r,r._V||r.DV),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+a+" "+gt(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var n=Ea(r);return n.scope=r.scope,n.stream=e.join("\n"),n}},Kv=function(r,e){var t=0===r.fontSize?r.maxFontSize:r.fontSize,i={text:"",fontSize:""},a=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");a=a.map(r.multiline?function(F){return F.split("\n")}:function(F){return[F]});var n=t,s=et.internal.getHeight(r)||0;s=s<0?-s:s;var F,o=et.internal.getWidth(r)||0;o=o<0?-o:o,n++;e:for(;n>0;){e="",n--;var d,u,c=Oh("3",r,n).height,f=r.multiline?s-n:(s-c)/2,p=f+=2,_=0,w=0,S=0;if(n<=0){e="(...) Tj\n",e+="% Width of Text: "+Oh(e,r,n=12).width+", FieldWidth:"+o+"\n";break}for(var x="",E=0,V=0;V<a.length;V++)if(a.hasOwnProperty(V)){var N=!1;if(1!==a[V].length&&S!==a[V].length-1){if((c+2)*(E+2)+2>s)continue e;x+=a[V][S],N=!0,w=V,V--}else{x=" "==(x+=a[V][S]+" ").substr(x.length-1)?x.substr(0,x.length-1):x;var j=parseInt(V),Q=(F=j)+1<a.length&&Oh(x+" "+a[F+1][0],r,n).width<=o-4,q=V>=a.length-1;if(Q&&!q){x+=" ",S=0;continue}if(Q||q){if(q)w=j;else if(r.multiline&&(c+2)*(E+2)+2>s)continue e}else{if(!r.multiline||(c+2)*(E+2)+2>s)continue e;w=j}}for(var k="",se=_;se<=w;se++){var he=a[se];if(r.multiline){if(se===w){k+=he[S]+" ",S=(S+1)%he.length;continue}if(se===_){k+=he[he.length-1]+" ";continue}}k+=he[0]+" "}switch(k=" "==k.substr(k.length-1)?k.substr(0,k.length-1):k,u=Oh(k,r,n).width,r.textAlign){case"right":d=o-u-2;break;case"center":d=(o-u)/2;break;default:d=2}e+=gt(d)+" "+gt(p)+" Td\n",e+="("+Is(k)+") Tj\n",e+=-gt(d)+" 0 Td\n",p=-(n+2),u=0,_=N?w:w+1,E++,x=""}break}return i.text=e,i.fontSize=n,i},Oh=function(r,e,t){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(r,{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},k8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},M8=function(r,e){var t={type:"reference",object:r};void 0===e.internal.getPageInfo(r.page).pageContext.annotations.find(function(i){return i.type===t.type&&i.object===t.object})&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},OE=pi.__acroform__.arrayToPdfArray=function(r,e,t){var i=function(s){return s};if(Array.isArray(r)){for(var a="[",n=0;n<r.length;n++)switch(0!==n&&(a+=" "),(0,Xt.Z)(r[n])){case"boolean":case"number":case"object":a+=r[n].toString();break;case"string":"/"!==r[n].substr(0,1)?(void 0!==e&&t&&(i=t.internal.getEncryptor(e)),a+="("+Is(i(r[n].toString()))+")"):a+=r[n].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},$v=function(r,e,t){var i=function(a){return a};return void 0!==e&&t&&(i=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+Is(i(r))+")"},Ia=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ia.prototype.toString=function(){return this.objId+" 0 R"},Ia.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},Ia.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(n){return"content"!=n&&"appearanceStreamContent"!=n&&"scope"!=n&&"objId"!=n&&"_"!=n.substring(0,1)});for(var t in e)if(!1===Object.getOwnPropertyDescriptor(this,e[t]).configurable){var i=e[t],a=this[i];a&&(Array.isArray(a)?r.push({key:i,value:OE(a,this.objId,this.scope)}):a instanceof Ia?(a.scope=this.scope,r.push({key:i,value:a.objId+" 0 R"})):"function"!=typeof a&&r.push({key:i,value:a}))}return r};var RE=function(){Ia.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};cr(RE,Ia);var LE=function(){Ia.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(i){return i};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Is(t(r))+")"}},set:function(t){r=t}})};cr(LE,Ia);var Ur=function r(){Ia.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!wi(e,3)},set:function(x){this.F=x?bi(e,3):yi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');t=x}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==i.length)return i},set:function(x){i=void 0!==x?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(x){i[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(x){i[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(x){i[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(x){i[3]=x}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var n=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!n||n.length<1){if(this instanceof Ph)return;n="FieldObject"+r.FieldNum++}var x=function(E){return E};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Is(x(n))+")"},set:function(x){n=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return n},set:function(x){n=x}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(x){s=x}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===d?50/Wv:d},set:function(x){d=x}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(x){u=x}});var c="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!c||this instanceof Ph||this instanceof As))return $v(c,this.objId,this.scope)},set:function(x){x=x.toString(),c=x}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ki?f:$v(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=this instanceof ki?x:"("===x.substr(0,1)?Eo(x.substr(1,x.length-2)):Eo(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ki?Eo(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof ki?"/"+x:x}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ki?p:$v(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=this instanceof ki?x:"("===x.substr(0,1)?Eo(x.substr(1,x.length-2)):Eo(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ki?Eo(p.substr(1,p.length-1)):p},set:function(x){x=x.toString(),p=this instanceof ki?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(x){w=x=!!x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(x){_=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,1)},set:function(x){this.Ff=x?bi(this.Ff,1):yi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,2)},set:function(x){this.Ff=x?bi(this.Ff,2):yi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,3)},set:function(x){this.Ff=x?bi(this.Ff,3):yi(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==S)return S},set:function(x){if(-1===[0,1,2].indexOf(x))throw new Error('Invalid value "'+x+'" for attribute Q supplied.');S=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(S){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};cr(Ur,Ia);var Io=function(){Ur.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return OE(e,this.objId,this.scope)},set:function(t){var i,a;a=[],"string"==typeof(i=t)&&(a=function(n,s,o){o||(o=1);for(var l,d=[];l=s.exec(n);)d.push(l[o]);return d}(i,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,i){for(i=i||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==i););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,18)},set:function(t){this.Ff=t?bi(this.Ff,18):yi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,19)},set:function(t){!0===this.combo&&(this.Ff=t?bi(this.Ff,19):yi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,20)},set:function(t){t?(this.Ff=bi(this.Ff,20),e.sort()):this.Ff=yi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,22)},set:function(t){this.Ff=t?bi(this.Ff,22):yi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,23)},set:function(t){this.Ff=t?bi(this.Ff,23):yi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,27)},set:function(t){this.Ff=t?bi(this.Ff,27):yi(this.Ff,27)}}),this.hasAppearanceStream=!1};cr(Io,Ur);var Ao=function(){Io.call(this),this.fontName="helvetica",this.combo=!1};cr(Ao,Io);var To=function(){Ao.call(this),this.combo=!0};cr(To,Ao);var Rh=function(){To.call(this),this.edit=!0};cr(Rh,To);var ki=function(){Ur.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,15)},set:function(t){this.Ff=t?bi(this.Ff,15):yi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,16)},set:function(t){this.Ff=t?bi(this.Ff,16):yi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,17)},set:function(t){this.Ff=t?bi(this.Ff,17):yi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,26)},set:function(t){this.Ff=t?bi(this.Ff,26):yi(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(n){return n};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var i,a=[];for(i in a.push("<<"),e)a.push("/"+i+" ("+Is(t(e[i]))+")");return a.push(">>"),a.join("\n")}},set:function(t){"object"===(0,Xt.Z)(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};cr(ki,Ur);var Lh=function(){ki.call(this),this.pushButton=!0};cr(Lh,ki);var Do=function(){ki.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=void 0!==e?e:[]}})};cr(Do,ki);var Ph=function(){var r,e;Ur.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var n,s=[];for(n in s.push("<<"),i)s.push("/"+n+" ("+Is(a(i[n]))+")");return s.push(">>"),s.join("\n")},set:function(a){"object"===(0,Xt.Z)(a)&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){"string"==typeof a&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};cr(Ph,Ur),Do.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Do.prototype.createOption=function(r){var e=new Ph;return e.Parent=this,e.optionName=r,this.Kids.push(e),z8.call(this.scope,e),e};var Fh=function(){ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=et.CheckBox.createAppearanceStream()};cr(Fh,ki);var As=function(){Ur.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,13)},set:function(e){this.Ff=e?bi(this.Ff,13):yi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,21)},set:function(e){this.Ff=e?bi(this.Ff,21):yi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,23)},set:function(e){this.Ff=e?bi(this.Ff,23):yi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,24)},set:function(e){this.Ff=e?bi(this.Ff,24):yi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,25)},set:function(e){this.Ff=e?bi(this.Ff,25):yi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,26)},set:function(e){this.Ff=e?bi(this.Ff,26):yi(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};cr(As,Ur);var Vh=function(){As.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!wi(this.Ff,14)},set:function(r){this.Ff=r?bi(this.Ff,14):yi(this.Ff,14)}}),this.password=!0};cr(Vh,As);var et={CheckBox:{createAppearanceStream:function(){return{N:{On:et.CheckBox.YesNormal},D:{On:et.CheckBox.YesPushDown,Off:et.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=Ea(r);e.scope=r.scope;var t=[],i=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),n=Kv(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+gt(et.internal.getWidth(r))+" "+gt(et.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+i+" "+gt(n.fontSize)+" Tf "+a),t.push("BT"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join("\n"),e},YesNormal:function(r){var e=Ea(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),a=[],n=et.internal.getHeight(r),s=et.internal.getWidth(r),o=Kv(r,r.caption);return a.push("1 g"),a.push("0 0 "+gt(s)+" "+gt(n)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+gt(s-1)+" "+gt(n-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+gt(o.fontSize)+" Tf "+i),a.push(o.text),a.push("ET"),a.push("Q"),e.stream=a.join("\n"),e},OffPushDown:function(r){var e=Ea(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+gt(et.internal.getWidth(r))+" "+gt(et.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:et.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=et.RadioButton.Circle.YesNormal,e.D[r]=et.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=Ea(r);e.scope=r.scope;var t=[],i=et.internal.getWidth(r)<=et.internal.getHeight(r)?et.internal.getWidth(r)/4:et.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var n=Number((i*et.internal.Bezier_C).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Rn(et.internal.getWidth(r)/2)+" "+Rn(et.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+n+" "+n+" "+i+" 0 "+i+" c"),t.push("-"+n+" "+i+" -"+i+" "+n+" -"+i+" 0 c"),t.push("-"+i+" -"+n+" -"+n+" -"+i+" 0 -"+i+" c"),t.push(n+" -"+i+" "+i+" -"+n+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e},YesPushDown:function(r){var e=Ea(r);e.scope=r.scope;var t=[],i=et.internal.getWidth(r)<=et.internal.getHeight(r)?et.internal.getWidth(r)/4:et.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),n=Number((a*et.internal.Bezier_C).toFixed(5)),s=Number((i*et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Rn(et.internal.getWidth(r)/2)+" "+Rn(et.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+n+" "+n+" "+a+" 0 "+a+" c"),t.push("-"+n+" "+a+" -"+a+" "+n+" -"+a+" 0 c"),t.push("-"+a+" -"+n+" -"+n+" -"+a+" 0 -"+a+" c"),t.push(n+" -"+a+" "+a+" -"+n+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Rn(et.internal.getWidth(r)/2)+" "+Rn(et.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e},OffPushDown:function(r){var e=Ea(r);e.scope=r.scope;var t=[],i=et.internal.getWidth(r)<=et.internal.getHeight(r)?et.internal.getWidth(r)/4:et.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),n=Number((a*et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Rn(et.internal.getWidth(r)/2)+" "+Rn(et.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+n+" "+n+" "+a+" 0 "+a+" c"),t.push("-"+n+" "+a+" -"+a+" "+n+" -"+a+" 0 c"),t.push("-"+a+" -"+n+" -"+n+" -"+a+" 0 -"+a+" c"),t.push(n+" -"+a+" "+a+" -"+n+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join("\n"),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:et.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=et.RadioButton.Cross.YesNormal,e.D[r]=et.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=Ea(r);e.scope=r.scope;var t=[],i=et.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+gt(et.internal.getWidth(r)-2)+" "+gt(et.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(gt(i.x1.x)+" "+gt(i.x1.y)+" m"),t.push(gt(i.x2.x)+" "+gt(i.x2.y)+" l"),t.push(gt(i.x4.x)+" "+gt(i.x4.y)+" m"),t.push(gt(i.x3.x)+" "+gt(i.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join("\n"),e},YesPushDown:function(r){var e=Ea(r);e.scope=r.scope;var t=et.internal.calculateCross(r),i=[];return i.push("0.749023 g"),i.push("0 0 "+gt(et.internal.getWidth(r))+" "+gt(et.internal.getHeight(r))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+gt(et.internal.getWidth(r)-2)+" "+gt(et.internal.getHeight(r)-2)+" re"),i.push("W"),i.push("n"),i.push(gt(t.x1.x)+" "+gt(t.x1.y)+" m"),i.push(gt(t.x2.x)+" "+gt(t.x2.y)+" l"),i.push(gt(t.x4.x)+" "+gt(t.x4.y)+" m"),i.push(gt(t.x3.x)+" "+gt(t.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(r){var e=Ea(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+gt(et.internal.getWidth(r))+" "+gt(et.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join("\n"),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};et.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=et.internal.getWidth(r),t=et.internal.getHeight(r),i=Math.min(e,t);return{x1:{x:(e-i)/2,y:(t-i)/2+i},x2:{x:(e-i)/2+i,y:(t-i)/2},x3:{x:(e-i)/2,y:(t-i)/2},x4:{x:(e-i)/2+i,y:(t-i)/2+i}}}},et.internal.getWidth=function(r){var e=0;return"object"===(0,Xt.Z)(r)&&(e=DE(r.Rect[2])),e},et.internal.getHeight=function(r){var e=0;return"object"===(0,Xt.Z)(r)&&(e=DE(r.Rect[3])),e};var z8=pi.addField=function(r){if(function(r,e){if(e.scope=r,void 0!==r.internal&&(void 0===r.internal.acroformPlugin||!1===r.internal.acroformPlugin.isInitialized)){if(Ur.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(k8)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Wv=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new LE,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){!function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}(r)}),r.internal.events.subscribe("buildDocument",function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var n=i[a];n.objId=void 0,n.hasAnnotation&&M8(n,t)}}(r)}),r.internal.events.subscribe("putCatalog",function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(r)}),r.internal.events.subscribe("postPutPages",function(t){!function(i,a){var n=!i;for(var s in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(s)){var o=i[s],l=[],d=o.Rect;if(o.Rect&&(o.Rect=N8(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=et.createDefaultAppearanceStream(o),"object"===(0,Xt.Z)(o)&&"function"==typeof o.getKeyValueListForStream&&(l=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=B8(o);l.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var c="";for(var f in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(f)){var p=o.appearanceStreamContent[f];if(c+="/"+f+" ",c+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var s in p)if(p.hasOwnProperty(s)){var _=p[s];"function"==typeof _&&(_=_.call(a,o)),c+="/"+s+" "+_+" ",a.internal.acroformPlugin.xForms.indexOf(_)>=0||a.internal.acroformPlugin.xForms.push(_)}}else"function"==typeof(_=p)&&(_=_.call(a,o)),c+="/"+s+" "+_,a.internal.acroformPlugin.xForms.indexOf(_)>=0||a.internal.acroformPlugin.xForms.push(_);c+=">>"}l.push({key:"AP",value:"<<\n"+c+">>"})}a.internal.putStream({additionalKeyValues:l,objectId:o.objId}),a.internal.out("endobj")}n&&function(r,e){for(var t in r)if(r.hasOwnProperty(t)){var i=t,a=r[t];e.internal.newObjectDeferredBegin(a.objId,!0),"object"===(0,Xt.Z)(a)&&"function"==typeof a.putStream&&a.putStream(),delete r[i]}}(a.internal.acroformPlugin.xForms,a)}(t,r)}),r.internal.acroformPlugin.isInitialized=!0}}(this,r),!(r instanceof Ur))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};function PE(r){return r.reduce(function(e,t,i){return e[t]=i,e},{})}pi.AcroFormChoiceField=Io,pi.AcroFormListBox=Ao,pi.AcroFormComboBox=To,pi.AcroFormEditBox=Rh,pi.AcroFormButton=ki,pi.AcroFormPushButton=Lh,pi.AcroFormRadioButton=Do,pi.AcroFormCheckBox=Fh,pi.AcroFormTextField=As,pi.AcroFormPasswordField=Vh,pi.AcroFormAppearance=et,pi.AcroForm={ChoiceField:Io,ListBox:Ao,ComboBox:To,EditBox:Rh,Button:ki,PushButton:Lh,RadioButton:Do,CheckBox:Fh,TextField:As,PasswordField:Vh,Appearance:et},st.AcroForm={ChoiceField:Io,ListBox:Ao,ComboBox:To,EditBox:Rh,Button:ki,PushButton:Lh,RadioButton:Do,CheckBox:Fh,TextField:As,PasswordField:Vh,Appearance:et},function(r){r.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(F,P){var U,K,ge,ue,xe,ce=e;if("RGBA"===(P=P||e)||void 0!==F.data&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(Q(F))for(xe in t)for(ge=t[xe],U=0;U<ge.length;U+=1){for(ue=!0,K=0;K<ge[U].length;K+=1)if(void 0!==ge[U][K]&&ge[U][K]!==F[K]){ue=!1;break}if(!0===ue){ce=xe;break}}else for(xe in t)for(ge=t[xe],U=0;U<ge.length;U+=1){for(ue=!0,K=0;K<ge[U].length;K+=1)if(void 0!==ge[U][K]&&ge[U][K]!==F.charCodeAt(K)){ue=!1;break}if(!0===ue){ce=xe;break}}return ce===e&&P!==e&&(ce=P),ce},a=function F(P){for(var U=this.internal.write,K=this.internal.putStream,ge=(0,this.internal.getFilters)();-1!==ge.indexOf("FlateEncode");)ge.splice(ge.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:P.width}),ue.push({key:"Height",value:P.height}),P.colorSpace===S.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&void 0!==P.sMask?P.objectId+2:P.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===S.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&void 0!==P.decodeParameters&&ue.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var xe="",ce=0,Te=P.transparency.length;ce<Te;ce++)xe+=P.transparency[ce]+" "+P.transparency[ce]+" ";ue.push({key:"Mask",value:"["+xe+"]"})}if(void 0!==P.sMask&&ue.push({key:"SMask",value:P.objectId+1+" 0 R"}),K({data:P.data,additionalKeyValues:ue,alreadyAppliedFilters:void 0!==P.filter?["/"+P.filter]:void 0,objectId:P.objectId}),U("endobj"),"sMask"in P&&void 0!==P.sMask){var D={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:"/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,data:P.sMask};"filter"in P&&(D.filter=P.filter),F.call(this,D)}if(P.colorSpace===S.INDEXED){var H=this.internal.newObject();K({data:k(new Uint8Array(P.palette)),objectId:H}),U("endobj")}},n=function(){var F=this.internal.collections.addImage_images;for(var P in F)a.call(this,F[P])},s=function(){var F,P=this.internal.collections.addImage_images,U=this.internal.write;for(var K in P)U("/I"+(F=P[K]).index,F.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",n),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var F=this.internal.collections.addImage_images;return o.call(this),F},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(F){return"function"==typeof r["process"+F.toUpperCase()]},c=function(F){return"object"===(0,Xt.Z)(F)&&1===F.nodeType},f=function(F,P){if("IMG"===F.nodeName&&F.hasAttribute("src")){var U=""+F.getAttribute("src");if(0===U.indexOf("data:image/"))return hd(unescape(U).split("base64,").pop());var K=r.loadFile(U,!0);if(void 0!==K)return K}if("CANVAS"===F.nodeName){if(0===F.width||0===F.height)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var ge;switch(P){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;default:ge="image/jpeg"}return hd(F.toDataURL(ge,1).split("base64,").pop())}},p=function(F){var P=this.internal.collections.addImage_images;if(P)for(var U in P)if(F===P[U].alias)return P[U]},_=function(F,P,U){return F||P||(F=-96,P=-96),F<0&&(F=-1*U.width*72/F/this.internal.scaleFactor),P<0&&(P=-1*U.height*72/P/this.internal.scaleFactor),0===F&&(F=P*U.width/U.height),0===P&&(P=F*U.height/U.width),[F,P]},w=function(F,P,U,K,ge,ue){var xe=_.call(this,U,K,ge),ce=this.internal.getCoordinateString,Te=this.internal.getVerticalCoordinateString,Ie=l.call(this);if(U=xe[0],K=xe[1],Ie[ge.index]=ge,ue){ue*=Math.PI/180;var Me=Math.cos(ue),D=Math.sin(ue),H=function(ee){return ee.toFixed(4)},$=[H(Me),H(D),H(-1*D),H(Me),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,ce(F),Te(P+K),"cm"].join(" ")),this.internal.write($.join(" ")),this.internal.write([ce(U),"0","0",ce(K),"0","0","cm"].join(" "))):this.internal.write([ce(U),"0","0",ce(K),ce(F),Te(P+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},S=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=r.__addimage__.sHashCode=function(F){var P,U,K=0;if("string"==typeof F)for(U=F.length,P=0;P<U;P++)K=(K<<5)-K+F.charCodeAt(P),K|=0;else if(Q(F))for(U=F.byteLength/2,P=0;P<U;P++)K=(K<<5)-K+F[P],K|=0;return K},V=r.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var P=!0;return 0===F.length&&(P=!1),F.length%4!=0&&(P=!1),!1===/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))&&(P=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))&&(P=!1),P},N=r.__addimage__.extractImageFromDataUrl=function(F){var P=(F=F||"").split("base64,"),U=null;if(2===P.length){var K=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(P[0]);Array.isArray(K)&&(U={mimeType:K[1],charset:K[2],data:P[1]})}return U},j=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(F){return j()&&F instanceof ArrayBuffer};var Q=r.__addimage__.isArrayBufferView=function(F){return j()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},q=r.__addimage__.binaryStringToUint8Array=function(F){for(var P=F.length,U=new Uint8Array(P),K=0;K<P;K++)U[K]=F.charCodeAt(K);return U},k=r.__addimage__.arrayBufferToBinaryString=function(F){for(var P="",U=Q(F)?F:new Uint8Array(F),K=0;K<U.length;K+=8192)P+=String.fromCharCode.apply(null,U.subarray(K,K+8192));return P};r.addImage=function(){var F,P,U,K,ge,ue,xe,ce,Te;if("number"==typeof arguments[1]?(P=e,U=arguments[1],K=arguments[2],ge=arguments[3],ue=arguments[4],xe=arguments[5],ce=arguments[6],Te=arguments[7]):(P=arguments[1],U=arguments[2],K=arguments[3],ge=arguments[4],ue=arguments[5],xe=arguments[6],ce=arguments[7],Te=arguments[8]),"object"===(0,Xt.Z)(F=arguments[0])&&!c(F)&&"imageData"in F){var Ie=F;F=Ie.imageData,P=Ie.format||P||e,U=Ie.x||U||0,K=Ie.y||K||0,ge=Ie.w||Ie.width||ge,ue=Ie.h||Ie.height||ue,xe=Ie.alias||xe,ce=Ie.compression||ce,Te=Ie.rotation||Ie.angle||Te}var Me=this.internal.getFilters();if(void 0===ce&&-1!==Me.indexOf("FlateEncode")&&(ce="SLOW"),isNaN(U)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var D=se.call(this,F,P,xe,ce);return w.call(this,U,K,ge,ue,D,Te),this};var se=function(F,P,U,K){var ge,ue,xe,Te;if("string"==typeof F&&i(F)===e){F=unescape(F);var ce=he(F,!1);(""!==ce||void 0!==(ce=r.loadFile(F,!0)))&&(F=ce)}if(c(F)&&(F=f(F,P)),P=i(F,P),!u(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if((null==(xe=U)||0===xe.length)&&(U="string"==typeof(Te=F)||Q(Te)?E(Te):Q(Te.data)?E(Te.data):null),(ge=p.call(this,U))||(j()&&(F instanceof Uint8Array||"RGBA"===P||(ue=F,F=q(F))),ge=this["process"+P.toUpperCase()](F,d.call(this),U,function(Te){return Te&&"string"==typeof Te&&(Te=Te.toUpperCase()),Te in r.image_compression?Te:x.NONE}(K),ue)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},he=r.__addimage__.convertBase64ToBinaryString=function(F,P){var U;P="boolean"!=typeof P||P;var K,ge="";if("string"==typeof F){K=null!==(U=N(F))?U.data:F;try{ge=hd(K)}catch(ue){if(P)throw V(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ge};r.getImageProperties=function(F){var P,U,K="";if(c(F)&&(F=f(F)),"string"==typeof F&&i(F)===e&&(""===(K=he(F,!1))&&(K=r.loadFile(F)||""),F=K),U=i(F),!u(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!j()||F instanceof Uint8Array||(F=q(F)),!(P=this["process"+U.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=U,P}}(st.API),
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){var e=function(t){if(void 0!==t&&""!=t)return!0};st.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var i,a,n,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,u=!1,c=0;c<d.length&&!u;c++)switch((i=d[c]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(0!=u){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){i=d[f];var p=this.internal.pdfEscape,_=this.internal.getEncryptor(t.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(w.objId),E=i.title||"Note";n="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(i.bounds.x)+" "+o(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y)+"] ")+"/Contents ("+p(x(i.contents))+")",n+=" /Popup "+S.objId+" 0 R",n+=" /P "+l.objId+" 0 R",n+=" /T ("+p(x(E))+") >>",w.content=n;var V=w.objId+" 0 R";n="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(i.bounds.x+30)+" "+o(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w+30)+" "+o(i.bounds.y)+"] ")+" /Parent "+V,i.open&&(n+=" /Open true"),S.content=n+=" >>",this.internal.write(w.objId,"0 R",S.objId,"0 R");break;case"freetext":a="/Rect ["+s(i.bounds.x)+" "+o(i.bounds.y)+" "+s(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y+i.bounds.h)+"] ";var N=i.color||"#000000";n="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(_(i.contents))+")",n+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",n+=" /Border [0 0 0]",this.internal.write(n+=" >>");break;case"link":if(i.options.name){var j=this.annotations._nameMap[i.options.name];i.options.pageNumber=j.page,i.options.top=j.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",n="",i.options.url)n="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(_(i.options.url))+") >>";else if(i.options.pageNumber)switch(n="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":n+=" /Fit]";break;case"FitH":n+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,n+=" /FitV "+i.options.left+"]";break;default:var Q=o(i.options.top);i.options.left=i.options.left||0,void 0===i.options.zoom&&(i.options.zoom=0),n+=" /XYZ "+i.options.left+" "+Q+" "+i.options.zoom+"]"}""!=n&&this.internal.write(n+=" >>")}}this.internal.write("]")}}]),r.createAnnotation=function(t){var i=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":i.pageContext.annotations.push(t)}},r.link=function(t,i,a,n,s){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(t),y:d(i),w:l(t+a),h:d(i+n)},options:s,type:"link"})},r.textWithLink=function(t,i,a,n){var s,o,l=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==n.maxWidth){var u=this.splitTextToSize(t,o=n.maxWidth).length;s=Math.ceil(d*u)}else o=l,s=d;return this.text(t,i,a,n),"center"===n.align&&(i-=l/2),"right"===n.align&&(i-=l),this.link(i,(a+=.2*d)-d,o,s,n),l},r.getTextWidth=function(t){var i=this.internal.getFontSize();return this.getStringUnitWidth(t)*i/this.internal.scaleFactor}}(st.API),
/**
       * @license
       * Copyright (c) 2017 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var n=r.__arabicParser__.isInArabicSubstitutionA=function(w){return void 0!==e[w.charCodeAt(0)]},s=r.__arabicParser__.isArabicLetter=function(w){return"string"==typeof w&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=r.__arabicParser__.isArabicEndLetter=function(w){return s(w)&&n(w)&&e[w.charCodeAt(0)].length<=2},l=r.__arabicParser__.isArabicAlfLetter=function(w){return s(w)&&a.indexOf(w.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return s(w)&&n(w)&&e[w.charCodeAt(0)].length>=1};var d=r.__arabicParser__.arabicLetterHasFinalForm=function(w){return s(w)&&n(w)&&e[w.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(w){return s(w)&&n(w)&&e[w.charCodeAt(0)].length>=3};var u=r.__arabicParser__.arabicLetterHasMedialForm=function(w){return s(w)&&n(w)&&4==e[w.charCodeAt(0)].length},c=r.__arabicParser__.resolveLigatures=function(w){var S=0,x=t,E="",V=0;for(S=0;S<w.length;S+=1)void 0!==x[w.charCodeAt(S)]?(V++,"number"==typeof(x=x[w.charCodeAt(S)])&&(E+=String.fromCharCode(x),x=t,V=0),S===w.length-1&&(x=t,E+=w.charAt(S-(V-1)),S-=V-1,V=0)):(x=t,E+=w.charAt(S-V),S-=V,V=0);return E};r.__arabicParser__.isArabicDiacritic=function(w){return void 0!==w&&void 0!==i[w.charCodeAt(0)]};var f=r.__arabicParser__.getCorrectForm=function(w,S,x){return s(w)?!1===n(w)?-1:!d(w)||!s(S)&&!s(x)||!s(x)&&o(S)||o(w)&&!s(S)||o(w)&&l(S)||o(w)&&o(S)?0:u(w)&&s(S)&&!o(S)&&s(x)&&d(x)?3:o(w)||!s(x)?1:2:-1},p=function(w){var S=0,x=0,E=0,V="",N="",j="",Q=(w=w||"").split("\\s+"),q=[];for(S=0;S<Q.length;S+=1){for(q.push(""),x=0;x<Q[S].length;x+=1)N=Q[S][x-1],j=Q[S][x+1],s(V=Q[S][x])?(E=f(V,N,j),q[S]+=-1!==E?String.fromCharCode(e[V.charCodeAt(0)][E]):V):q[S]+=V;q[S]=c(q[S])}return q.join(" ")},_=r.__arabicParser__.processArabic=r.processArabic=function(){var w,S="string"==typeof arguments[0]?arguments[0]:arguments[0].text,x=[];if(Array.isArray(S)){var E=0;for(x=[],E=0;E<S.length;E+=1)Array.isArray(S[E])?x.push([p(S[E][0]),S[E][1],S[E][2]]):x.push([p(S[E])]);w=x}else w=p(S);return"string"==typeof arguments[0]?w:(arguments[0].text=w,arguments[0])};r.events.push(["preProcessText",_])}(st.API),st.API.autoPrint=function(r){var e;return"javascript"===((r=r||{}).variant=r.variant||"non-conform",r.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(o){i=isNaN(o)||!1===Number.isInteger(o)||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||!1===Number.isInteger(o)||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var n=[];Object.defineProperty(this,"childNodes",{get:function(){return n},set:function(o){n=o}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,i){var a;if("2d"!==(t=t||"2d"))return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(st.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,i=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new n,this.internal.__cell__.pages=1},n=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var c=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(w){_=w}}),this};n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},n.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction="function"==typeof l?l:void 0,this},r.getTextDimensions=function(l,d){i.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),c=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,p=0,_=0,w=0,S=this;if(!Array.isArray(l)&&"string"!=typeof l){if("number"!=typeof l)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=d.maxWidth;x>0?"string"==typeof l?l=this.splitTextToSize(l,x):"[object Array]"===Object.prototype.toString.call(l)&&(l=l.reduce(function(V,N){return V.concat(S.splitTextToSize(N,x))},[])):l=Array.isArray(l)?l:[l];for(var E=0;E<l.length;E++)p<(w=this.getStringUnitWidth(l[E],{font:c})*u)&&(p=w);return 0!==p&&(_=l.length),{w:p/=f,h:Math.max((_*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},r.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new n(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=r.cell=function(){var l;l=arguments[0]instanceof n?arguments[0]:new n(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,c=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return void 0!==d.lineNumber&&(d.lineNumber===l.lineNumber?(l.x=(d.x||0)+(d.width||0),l.y=d.y||0):d.y+d.height+l.height+c.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=c.top,p&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=d.y+d.height||l.y),void 0!==l.text[0]&&(this.rect(l.x,l.y,l.width,l.height,!0===t?"FD":void 0),"right"===l.align?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):"center"===l.align?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};r.table=function(l,d,u,c,f){if(i.call(this),!u)throw new Error("No data for PDF table.");var p,_,w,S,x=[],E=[],V=[],N={},j={},Q=[],q=[],k=(f=f||{}).autoSize||!1,se=!1!==f.printHeaders,he=f.css&&void 0!==f.css["font-size"]?16*f.css["font-size"]:f.fontSize||12,F=f.margins||Object.assign({width:this.getPageWidth()},e),P="number"==typeof f.padding?f.padding:3,U=f.headerBackgroundColor||"#c8c8c8",K=f.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=se,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=he,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=K,this.setFontSize(he),null==c)E=x=Object.keys(u[0]),V=x.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,Xt.Z)(c[0]))for(x=c.map(function(Ie){return Ie.name}),E=c.map(function(Ie){return Ie.prompt||Ie.name||""}),V=c.map(function(Ie){return Ie.align||"left"}),p=0;p<c.length;p+=1)j[c[p].name]=c[p].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(E=x=c,V=x.map(function(){return"left"}));if(k||Array.isArray(c)&&"string"==typeof c[0])for(p=0;p<x.length;p+=1){for(N[S=x[p]]=u.map(function(Ie){return Ie[S]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(E[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=N[S],this.setFont(void 0,"normal"),w=0;w<_.length;w+=1)Q.push(this.getTextDimensions(_[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[S]=Math.max.apply(null,Q)+P+P,Q=[]}if(se){var ge={};for(p=0;p<x.length;p+=1)ge[x[p]]={},ge[x[p]].text=E[p],ge[x[p]].align=V[p];var ue=o.call(this,ge,j);q=x.map(function(Ie){return new n(l,d,j[Ie],ue,ge[Ie].text,void 0,ge[Ie].align)}),this.setTableHeaderRow(q),this.printHeaderRow(1,!1)}var xe=c.reduce(function(Ie,Me){return Ie[Me.name]=Me.align,Ie},{});for(p=0;p<u.length;p+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:p,data:u[p]},this);var ce=o.call(this,u[p],j);for(w=0;w<x.length;w+=1){var Te=u[p][x[w]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:p,col:w,data:Te},this),s.call(this,new n(l,d,j[x[w]],ce,Te,p+2,xe[x[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=d,this};var o=function(l,d){var u=this.internal.__cell__.padding,c=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(p){var _=l[p];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*c/f+u+u},this).reduce(function(p,_){return Math.max(p,_)},0)};r.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},r.printHeaderRow=function(l,d){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(t=!0,"function"==typeof this.internal.__cell__.headerFunction){var c=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new n(c[0],c[1],c[2],c[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(_)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),t=!1}}(st.API);var FE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},VE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Gv=PE(VE),NE=[100,200,300,400,500,600,700,800,900],W8=PE(NE);function Uv(r){var n,e=r.family.replace(/"|'/g,"").toLowerCase(),t=FE[n=(n=r.style)||"normal"]?n:"normal",i=function(n){return n?"number"==typeof n?n>=100&&n<=900&&n%100==0?n:400:/^\d00$/.test(n)?parseInt(n):"bold"===n?700:400:400}(r.weight),a=function(n){return"number"==typeof Gv[n=n||"normal"]?n:"normal"}(r.stretch);return{family:e,style:t,weight:i,stretch:a,src:r.src||[],ref:r.ref||{name:e,style:[a,t,i].join(" ")}}}function BE(r,e,t,i){var a;for(a=t;a>=0&&a<e.length;a+=i)if(r[e[a]])return r[e[a]];for(a=t;a>=0&&a<e.length;a-=i)if(r[e[a]])return r[e[a]]}var K8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kE={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ME(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function HE(r){return r.trimLeft()}function G8(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function U8(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],r.substring(e[0].length)]}var Nh,ZE,zE,jv=["times"];(function(r){var e,t,i,a,n,s,o,l,d,u=function(D){return this.isStrokeTransparent=(D=D||{}).isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=void 0!==D.transform?D.transform.clone():new l,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new s,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new s,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof D.ignoreClearRect||D.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new c(this),e=this.internal.f2,t=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,n=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,d=new u}]);var c=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=D;Object.defineProperty(this,"pdf",{get:function(){return H}});var $=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $},set:function(Oe){$=!!Oe}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(Oe){ee=!!Oe}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(Oe){isNaN(Oe)||(oe=Oe)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(Oe){isNaN(Oe)||(_e=Oe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Oe){var G;"number"==typeof Oe?G=[Oe,Oe,Oe,Oe]:((G=new Array(4))[0]=Oe[0],G[1]=Oe.length>=2?Oe[1]:G[0],G[2]=Oe.length>=3?Oe[2]:G[0],G[3]=Oe.length>=4?Oe[3]:G[1]),d.margin=G}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(Oe){me=Oe}});var be=0;Object.defineProperty(this,"lastBreak",{get:function(){return be},set:function(Oe){be=Oe}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(Oe){ke=Oe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Oe){Oe instanceof u&&(d=Oe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Oe){d.path=Oe}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(Oe){Be=Oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Oe){var G;G=f(Oe),this.ctx.fillStyle=G.style,this.ctx.isFillTransparent=0===G.a,this.ctx.fillOpacity=G.a,this.pdf.setFillColor(G.r,G.g,G.b,{a:G.a}),this.pdf.setTextColor(G.r,G.g,G.b,{a:G.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Oe){var G=f(Oe);this.ctx.strokeStyle=G.style,this.ctx.isStrokeTransparent=0===G.a,this.ctx.strokeOpacity=G.a,0===G.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(G.r,G.g,G.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Oe){-1!==["butt","round","square"].indexOf(Oe)&&(this.ctx.lineCap=Oe,this.pdf.setLineCap(Oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Oe){isNaN(Oe)||(this.ctx.lineWidth=Oe,this.pdf.setLineWidth(Oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Oe){-1!==["bevel","round","miter"].indexOf(Oe)&&(this.ctx.lineJoin=Oe,this.pdf.setLineJoin(Oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Oe){isNaN(Oe)||(this.ctx.miterLimit=Oe,this.pdf.setMiterLimit(Oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Oe){this.ctx.textBaseline=Oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Oe){-1!==["right","end","center","left","start"].indexOf(Oe)&&(this.ctx.textAlign=Oe)}});var je=null,ut=null;Object.defineProperty(this,"fontFaces",{get:function(){return ut},set:function(Oe){je=null,ut=Oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Oe){var G;if(this.ctx.font=Oe,null!==(G=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Oe))){var Ct=G[1],tt=G[3],Ne=G[4],Ze=G[6],Ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor("px"===Ge?parseFloat(Ne)*this.pdf.internal.scaleFactor:"em"===Ge?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var $e=function(ct){var It,Ue,Qi=[],Mt=ct.trim();if(""===Mt)return jv;if(Mt in kE)return[kE[Mt]];for(;""!==Mt;){switch(Ue=null,It=(Mt=HE(Mt)).charAt(0)){case'"':case"'":Ue=G8(Mt.substring(1),It);break;default:Ue=U8(Mt)}if(null===Ue||(Qi.push(Ue[0]),""!==(Mt=HE(Ue[1]))&&","!==Mt.charAt(0)))return jv;Mt=Mt.replace(/^,/,"")}return Qi}(Ze);if(this.fontFaces){var it=function $8(r,e,t){for(var i=(t=t||{}).defaultFontFamily||"times",a=Object.assign({},K8,t.genericFontFamilies||{}),n=null,s=null,o=0;o<e.length;++o)if(a[(n=Uv(e[o])).family]&&(n.family=a[n.family]),r.hasOwnProperty(n.family)){s=r[n.family];break}if(!(s=s||r[i]))throw new Error("Could not find a font-family for the rule '"+ME(n)+"' and default family '"+i+"'.");if(s=function(l,d){if(d[l])return d[l];var u=Gv[l],f=BE(d,VE,u,u<=Gv.normal?-1:1);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(n.stretch,s),s=function(l,d){if(d[l])return d[l];for(var u=FE[l],c=0;c<u.length;++c)if(d[u[c]])return d[u[c]];throw new Error("Could not find a matching font-style for "+l)}(n.style,s),!(s=function(l,d){if(d[l])return d[l];if(400===l&&d[500])return d[500];if(500===l&&d[400])return d[400];var c=BE(d,NE,W8[l],l<400?-1:1);if(!c)throw new Error("Could not find a matching font-weight for value "+l);return c}(n.weight,s)))throw new Error("Failed to resolve a font for the rule '"+ME(n)+"'.");return s}(function Xe(Oe,G){if(null===je){var Ct=(tt=Oe.getFontList(),Ne=[],Object.keys(tt).forEach(function(Ze){tt[Ze].forEach(function(Ge){var $e=null;switch(Ge){case"bold":$e={family:Ze,weight:"bold"};break;case"italic":$e={family:Ze,style:"italic"};break;case"bolditalic":$e={family:Ze,weight:"bold",style:"italic"};break;case"":case"normal":$e={family:Ze}}null!==$e&&($e.ref={name:Ze,style:Ge},Ne.push($e))})}),Ne);je=function(tt){for(var Ne={},Ze=0;Ze<tt.length;++Ze){var Ge=Uv(tt[Ze]),$e=Ge.family,it=Ge.stretch,_t=Ge.style,yt=Ge.weight;Ne[$e]=Ne[$e]||{},Ne[$e][it]=Ne[$e][it]||{},Ne[$e][it][_t]=Ne[$e][it][_t]||{},Ne[$e][it][_t][yt]=Ge}return Ne}(Ct.concat(G))}var tt,Ne;return je}(this.pdf,this.fontFaces),$e.map(function(ct){return{family:ct,stretch:"normal",weight:tt,style:Ct}}));this.pdf.setFont(it.ref.name,it.ref.style)}else{var _t="";("bold"===tt||parseInt(tt,10)>=700||"bold"===Ct)&&(_t="bold"),"italic"===Ct&&(_t+="italic"),0===_t.length&&(_t="normal");for(var yt="",Et={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Nt=0;Nt<$e.length;Nt++){if(void 0!==this.pdf.internal.getFont($e[Nt],_t,{noFallback:!0,disableWarning:!0})){yt=$e[Nt];break}if("bolditalic"===_t&&void 0!==this.pdf.internal.getFont($e[Nt],"bold",{noFallback:!0,disableWarning:!0}))yt=$e[Nt],_t="bold";else if(void 0!==this.pdf.internal.getFont($e[Nt],"normal",{noFallback:!0,disableWarning:!0})){yt=$e[Nt],_t="normal";break}}if(""===yt)for(var Ut=0;Ut<$e.length;Ut++)if(Et[$e[Ut]]){yt=Et[$e[Ut]];break}this.pdf.setFont(yt=""===yt?"Times":yt,_t)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Oe){this.ctx.globalCompositeOperation=Oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Oe){this.ctx.globalAlpha=Oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Oe){this.ctx.lineDashOffset=Oe,Me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Oe){this.ctx.lineDash=Oe,Me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Oe){this.ctx.ignoreClearRect=!!Oe}})};c.prototype.setLineDash=function(D){this.lineDash=D},c.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},c.prototype.fill=function(){N.call(this,"fill",!1)},c.prototype.stroke=function(){N.call(this,"stroke",!1)},c.prototype.beginPath=function(){this.path=[{type:"begin"}]},c.prototype.moveTo=function(D,H){if(isNaN(D)||isNaN(H))throw Jt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $=this.ctx.transform.applyToPoint(new s(D,H));this.path.push({type:"mt",x:$.x,y:$.y}),this.ctx.lastPoint=new s(D,H)},c.prototype.closePath=function(){var D=new s(0,0),H=0;for(H=this.path.length-1;-1!==H;H--)if("begin"===this.path[H].type&&"object"===(0,Xt.Z)(this.path[H+1])&&"number"==typeof this.path[H+1].x){D=new s(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(D.x,D.y)},c.prototype.lineTo=function(D,H){if(isNaN(D)||isNaN(H))throw Jt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $=this.ctx.transform.applyToPoint(new s(D,H));this.path.push({type:"lt",x:$.x,y:$.y}),this.ctx.lastPoint=new s($.x,$.y)},c.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},c.prototype.quadraticCurveTo=function(D,H,$,ee){if(isNaN($)||isNaN(ee)||isNaN(D)||isNaN(H))throw Jt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new s($,ee)),_e=this.ctx.transform.applyToPoint(new s(D,H));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new s(oe.x,oe.y)},c.prototype.bezierCurveTo=function(D,H,$,ee,oe,_e){if(isNaN(oe)||isNaN(_e)||isNaN(D)||isNaN(H)||isNaN($)||isNaN(ee))throw Jt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new s(oe,_e)),be=this.ctx.transform.applyToPoint(new s(D,H)),ke=this.ctx.transform.applyToPoint(new s($,ee));this.path.push({type:"bct",x1:be.x,y1:be.y,x2:ke.x,y2:ke.y,x:me.x,y:me.y}),this.ctx.lastPoint=new s(me.x,me.y)},c.prototype.arc=function(D,H,$,ee,oe,_e){if(isNaN(D)||isNaN(H)||isNaN($)||isNaN(ee)||isNaN(oe))throw Jt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new s(D,H));D=me.x,H=me.y;var be=this.ctx.transform.applyToPoint(new s(0,$)),ke=this.ctx.transform.applyToPoint(new s(0,0));$=Math.sqrt(Math.pow(be.x-ke.x,2)+Math.pow(be.y-ke.y,2))}Math.abs(oe-ee)>=2*Math.PI&&(ee=0,oe=2*Math.PI),this.path.push({type:"arc",x:D,y:H,radius:$,startAngle:ee,endAngle:oe,counterclockwise:_e})},c.prototype.arcTo=function(D,H,$,ee,oe){throw new Error("arcTo not implemented.")},c.prototype.rect=function(D,H,$,ee){if(isNaN(D)||isNaN(H)||isNaN($)||isNaN(ee))throw Jt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,H),this.lineTo(D+$,H),this.lineTo(D+$,H+ee),this.lineTo(D,H+ee),this.lineTo(D,H),this.lineTo(D+$,H),this.lineTo(D,H)},c.prototype.fillRect=function(D,H,$,ee){if(isNaN(D)||isNaN(H)||isNaN($)||isNaN(ee))throw Jt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var oe={};"butt"!==this.lineCap&&(oe.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,H,$,ee),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},c.prototype.strokeRect=function(D,H,$,ee){if(isNaN(D)||isNaN(H)||isNaN($)||isNaN(ee))throw Jt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(D,H,$,ee),this.stroke())},c.prototype.clearRect=function(D,H,$,ee){if(isNaN(D)||isNaN(H)||isNaN($)||isNaN(ee))throw Jt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,H,$,ee))},c.prototype.save=function(D){D="boolean"!=typeof D||D;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},c.prototype.restore=function(D){D="boolean"!=typeof D||D;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,$=0;$<this.pdf.internal.getNumberOfPages();$++)this.pdf.setPage($+1),this.pdf.internal.out("Q");this.pdf.setPage(H),D&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},c.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(D){var H,$,ee,oe;if(!0===D.isCanvasGradient&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))H=0,$=0,ee=0,oe=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(null!==_e)H=parseInt(_e[1]),$=parseInt(_e[2]),ee=parseInt(_e[3]),oe=1;else if(null!==(_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D)))H=parseInt(_e[1]),$=parseInt(_e[2]),ee=parseInt(_e[3]),oe=parseFloat(_e[4]);else{if(oe=1,"string"==typeof D&&"#"!==D.charAt(0)){var me=new xE(D);D=me.ok?me.toHex():"#000000"}4===D.length?(H=D.substring(1,2),H+=H,$=D.substring(2,3),$+=$,ee=D.substring(3,4),ee+=ee):(H=D.substring(1,3),$=D.substring(3,5),ee=D.substring(5,7)),H=parseInt(H,16),$=parseInt($,16),ee=parseInt(ee,16)}}return{r:H,g:$,b:ee,a:oe,style:D}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},_=function(){return!(!this.ctx.isStrokeTransparent&&0!=this.globalAlpha)};c.prototype.fillText=function(D,H,$,ee){if(isNaN(H)||isNaN($)||"string"!=typeof D)throw Jt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!p.call(this)){var oe=ce(this.ctx.transform.rotation);P.call(this,{text:D,x:H,y:$,scale:this.ctx.transform.scaleX,angle:oe,align:this.textAlign,maxWidth:ee})}},c.prototype.strokeText=function(D,H,$,ee){if(isNaN(H)||isNaN($)||"string"!=typeof D)throw Jt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){ee=isNaN(ee)?void 0:ee;var oe=ce(this.ctx.transform.rotation);P.call(this,{text:D,x:H,y:$,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:ee})}},c.prototype.measureText=function(D){if("string"!=typeof D)throw Jt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,$=this.pdf.internal.scaleFactor,ee=H.internal.getFontSize(),oe=H.getStringUnitWidth(D)*ee/H.internal.scaleFactor;return new function(me){var be=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return be}}),this}({width:oe*=Math.round(96*$/72*1e4)/1e4})},c.prototype.scale=function(D,H){if(isNaN(D)||isNaN(H))throw Jt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $=new l(D,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply($)},c.prototype.rotate=function(D){if(isNaN(D))throw Jt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new l(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},c.prototype.translate=function(D,H){if(isNaN(D)||isNaN(H))throw Jt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $=new l(1,0,0,1,D,H);this.ctx.transform=this.ctx.transform.multiply($)},c.prototype.transform=function(D,H,$,ee,oe,_e){if(isNaN(D)||isNaN(H)||isNaN($)||isNaN(ee)||isNaN(oe)||isNaN(_e))throw Jt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new l(D,H,$,ee,oe,_e);this.ctx.transform=this.ctx.transform.multiply(me)},c.prototype.setTransform=function(D,H,$,ee,oe,_e){D=isNaN(D)?1:D,H=isNaN(H)?0:H,$=isNaN($)?0:$,ee=isNaN(ee)?1:ee,oe=isNaN(oe)?0:oe,_e=isNaN(_e)?0:_e,this.ctx.transform=new l(D,H,$,ee,oe,_e)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};c.prototype.drawImage=function(D,H,$,ee,oe,_e,me,be,ke){var Be=this.pdf.getImageProperties(D),je=1,Xe=1,ut=1,Oe=1;void 0!==ee&&void 0!==be&&(ut=be/ee,Oe=ke/oe,je=Be.width/ee*be/ee,Xe=Be.height/oe*ke/oe),void 0===_e&&(_e=H,me=$,H=0,$=0),void 0!==ee&&void 0===be&&(be=ee,ke=oe),void 0===ee&&void 0===be&&(be=Be.width,ke=Be.height);for(var G,Ct=this.ctx.transform.decompose(),tt=ce(Ct.rotate.shx),Ne=new l,Ze=(Ne=(Ne=(Ne=Ne.multiply(Ct.translate)).multiply(Ct.skew)).multiply(Ct.scale)).applyToRectangle(new o(_e-H*ut,me-$*Oe,ee*je,oe*Xe)),Ge=S.call(this,Ze),$e=[],it=0;it<Ge.length;it+=1)-1===$e.indexOf(Ge[it])&&$e.push(Ge[it]);if(V($e),this.autoPaging)for(var _t=$e[0],yt=$e[$e.length-1],Et=_t;Et<yt+1;Et++){this.pdf.setPage(Et);var Nt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ut=1===Et?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ue=1===Et?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Et-2)*It;if(0!==this.ctx.clip_path.length){var Qi=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(G,this.posX+this.margin[3],-Ue+Ut+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Qi}var Mt=JSON.parse(JSON.stringify(Ze));Mt=E([Mt],this.posX+this.margin[3],-Ue+Ut+this.ctx.prevPageLastElemOffset)[0];var Yr=(Et>_t||Et<yt)&&w.call(this);Yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Nt,It,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Mt.x,Mt.y,Mt.w,Mt.h,null,null,tt),Yr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,tt)};var S=function(D,H,$){var ee=[];H=H||this.pdf.internal.pageSize.width,$=$||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":ee.push(Math.floor((D.y+oe)/$)+1);break;case"arc":ee.push(Math.floor((D.y+oe-D.radius)/$)+1),ee.push(Math.floor((D.y+oe+D.radius)/$)+1);break;case"qct":var _e=Te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);ee.push(Math.floor((_e.y+oe)/$)+1),ee.push(Math.floor((_e.y+_e.h+oe)/$)+1);break;case"bct":var me=Ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);ee.push(Math.floor((me.y+oe)/$)+1),ee.push(Math.floor((me.y+me.h+oe)/$)+1);break;case"rect":ee.push(Math.floor((D.y+oe)/$)+1),ee.push(Math.floor((D.y+D.h+oe)/$)+1)}for(var be=0;be<ee.length;be+=1)for(;this.pdf.internal.getNumberOfPages()<ee[be];)x.call(this);return ee},x=function(){var D=this.fillStyle,H=this.strokeStyle,$=this.font,ee=this.lineCap,oe=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=H,this.font=$,this.lineCap=ee,this.lineWidth=oe,this.lineJoin=_e},E=function(D,H,$){for(var ee=0;ee<D.length;ee++)switch(D[ee].type){case"bct":D[ee].x2+=H,D[ee].y2+=$;case"qct":D[ee].x1+=H,D[ee].y1+=$;default:D[ee].x+=H,D[ee].y+=$}return D},V=function(D){return D.sort(function(H,$){return H-$})},N=function(D,H){for(var $,ee,oe=this.fillStyle,_e=this.strokeStyle,me=this.lineCap,be=this.lineWidth,ke=Math.abs(be*this.ctx.transform.scaleX),Be=this.lineJoin,je=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),ut=[],Oe=0;Oe<Xe.length;Oe++)if(void 0!==Xe[Oe].x)for(var G=S.call(this,Xe[Oe]),Ct=0;Ct<G.length;Ct+=1)-1===ut.indexOf(G[Ct])&&ut.push(G[Ct]);for(var tt=0;tt<ut.length;tt++)for(;this.pdf.internal.getNumberOfPages()<ut[tt];)x.call(this);if(V(ut),this.autoPaging)for(var Ne=ut[0],Ze=ut[ut.length-1],Ge=Ne;Ge<Ze+1;Ge++){this.pdf.setPage(Ge),this.fillStyle=oe,this.strokeStyle=_e,this.lineCap=me,this.lineWidth=ke,this.lineJoin=Be;var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],it=1===Ge?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Et=1===Ge?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Ge-2)*yt;if(0!==this.ctx.clip_path.length){var Nt=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E($,this.posX+this.margin[3],-Et+it+this.ctx.prevPageLastElemOffset),j.call(this,D,!0),this.path=Nt}if(ee=JSON.parse(JSON.stringify(je)),this.path=E(ee,this.posX+this.margin[3],-Et+it+this.ctx.prevPageLastElemOffset),!1===H||0===Ge){var Ut=(Ge>Ne||Ge<Ze)&&w.call(this);Ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,yt,null).clip().discardPath()),j.call(this,D,H),Ut&&this.pdf.restoreGraphicsState()}this.lineWidth=be}else this.lineWidth=ke,j.call(this,D,H),this.lineWidth=be;this.path=je},j=function(D,H){if(("stroke"!==D||H||!_.call(this))&&("stroke"===D||H||!p.call(this))){for(var $,ee,oe=[],_e=this.path,me=0;me<_e.length;me++){var be=_e[me];switch(be.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:be,deltas:[],abs:[]});break;case"lt":var ke=oe.length;if(_e[me-1]&&!isNaN(_e[me-1].x)&&($=[be.x-_e[me-1].x,be.y-_e[me-1].y],ke>0))for(;ke>=0;ke--)if(!0!==oe[ke-1].close&&!0!==oe[ke-1].begin){oe[ke-1].deltas.push($),oe[ke-1].abs.push(be);break}break;case"bct":oe[oe.length-1].deltas.push($=[be.x1-_e[me-1].x,be.y1-_e[me-1].y,be.x2-_e[me-1].x,be.y2-_e[me-1].y,be.x-_e[me-1].x,be.y-_e[me-1].y]);break;case"qct":oe[oe.length-1].deltas.push($=[_e[me-1].x+2/3*(be.x1-_e[me-1].x)-_e[me-1].x,_e[me-1].y+2/3*(be.y1-_e[me-1].y)-_e[me-1].y,be.x+2/3*(be.x1-be.x)-_e[me-1].x,be.y+2/3*(be.y1-be.y)-_e[me-1].y,be.x-_e[me-1].x,be.y-_e[me-1].y]);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(be)}}ee=H?null:"stroke"===D?"stroke":"fill";for(var Ct=!1,tt=0;tt<oe.length;tt++)if(oe[tt].arc)for(var Ne=oe[tt].abs,Ze=0;Ze<Ne.length;Ze++){var Ge=Ne[Ze];"arc"===Ge.type?k.call(this,Ge.x,Ge.y,Ge.radius,Ge.startAngle,Ge.endAngle,Ge.counterclockwise,void 0,H,!Ct):U.call(this,Ge.x,Ge.y),Ct=!0}else!0===oe[tt].close?(this.pdf.internal.out("h"),Ct=!1):!0!==oe[tt].begin&&(K.call(this,oe[tt].deltas,oe[tt].start.x,oe[tt].start.y),Ct=!0);ee&&se.call(this,ee),H&&he.call(this)}},Q=function(D){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-$;case"top":return D+H-$;case"hanging":return D+H-2*$;case"middle":return D+H/2-$;default:return D}},q=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};c.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(H,$){this.colorStops.push([H,$])},D.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},c.prototype.createPattern=function(){return this.createLinearGradient()},c.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(D,H,$,ee,oe,_e,me,be,ke){for(var Be=ue.call(this,$,ee,oe,_e),je=0;je<Be.length;je++){var Xe=Be[je];0===je&&(ke?F.call(this,Xe.x1+D,Xe.y1+H):U.call(this,Xe.x1+D,Xe.y1+H)),ge.call(this,D,H,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}be?he.call(this):se.call(this,me)},se=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},he=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(D,H){this.pdf.internal.out(t(D)+" "+i(H)+" m")},P=function(D){var H;switch(D.align){case"right":case"end":H="right";break;case"center":H="center";break;default:H="left"}var $=this.pdf.getTextDimensions(D.text),ee=Q.call(this,D.y),oe=q.call(this,ee)-$.h,_e=this.ctx.transform.applyToPoint(new s(D.x,ee)),me=this.ctx.transform.decompose(),be=new l;be=(be=(be=be.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var ke,Be,je,Xe=this.ctx.transform.applyToRectangle(new o(D.x,ee,$.w,$.h)),ut=be.applyToRectangle(new o(D.x,oe,$.w,$.h)),Oe=S.call(this,ut),G=[],Ct=0;Ct<Oe.length;Ct+=1)-1===G.indexOf(Oe[Ct])&&G.push(Oe[Ct]);if(V(G),this.autoPaging)for(var tt=G[0],Ne=G[G.length-1],Ze=tt;Ze<Ne+1;Ze++){this.pdf.setPage(Ze);var Ge=1===Ze?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.margin[2],_t=it-this.margin[0],yt=this.pdf.internal.pageSize.width-this.margin[1],Et=yt-this.margin[3],Nt=1===Ze?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Ze-2)*_t;if(0!==this.ctx.clip_path.length){var Ut=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(ke,this.posX+this.margin[3],-1*Nt+Ge),j.call(this,"fill",!0),this.path=Ut}var ct=E([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-Nt+Ge+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*D.scale),this.lineWidth=(je=this.lineWidth)*D.scale);var It="text"!==this.autoPaging;if(It||ct.y+ct.h<=it){if(It||ct.y>=Ge&&ct.x<=yt){var Ue=It?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||yt-ct.x)[0],Qi=E([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-Nt+Ge+this.ctx.prevPageLastElemOffset)[0],Mt=It&&(Ze>tt||Ze<Ne)&&w.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Et,_t,null).clip().discardPath()),this.pdf.text(Ue,Qi.x,Qi.y,{angle:D.angle,align:H,renderingMode:D.renderingMode}),Mt&&this.pdf.restoreGraphicsState()}}else ct.y<it&&(this.ctx.prevPageLastElemOffset+=it-ct.y);D.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=je)}else D.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*D.scale),this.lineWidth=(je=this.lineWidth)*D.scale),this.pdf.text(D.text,_e.x+this.posX,_e.y+this.posY,{angle:D.angle,align:H,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=je)},U=function(D,H,$,ee){ee=ee||0,this.pdf.internal.out(t(D+($=$||0))+" "+i(H+ee)+" l")},K=function(D,H,$){return this.pdf.lines(D,H,$,null,null)},ge=function(D,H,$,ee,oe,_e,me,be){this.pdf.internal.out([e(a($+D)),e(n(ee+H)),e(a(oe+D)),e(n(_e+H)),e(a(me+D)),e(n(be+H)),"c"].join(" "))},ue=function(D,H,$,ee){for(var oe=2*Math.PI,_e=Math.PI/2;H>$;)H-=oe;var me=Math.abs($-H);me<oe&&ee&&(me=oe-me);for(var be=[],ke=ee?-1:1,Be=H;me>1e-5;){var je=Be+ke*Math.min(me,_e);be.push(xe.call(this,D,Be,je)),me-=Math.abs(je-Be),Be=je}return be},xe=function(D,H,$){var ee=($-H)/2,oe=D*Math.cos(ee),_e=D*Math.sin(ee),me=oe,be=-_e,ke=me*me+be*be,Be=ke+me*oe+be*_e,je=4/3*(Math.sqrt(2*ke*Be)-Be)/(me*_e-be*oe),Xe=me-je*be,ut=be+je*me,Oe=Xe,G=-ut,Ct=ee+H,tt=Math.cos(Ct),Ne=Math.sin(Ct);return{x1:D*Math.cos(H),y1:D*Math.sin(H),x2:Xe*tt-ut*Ne,y2:Xe*Ne+ut*tt,x3:Oe*tt-G*Ne,y3:Oe*Ne+G*tt,x4:D*Math.cos($),y4:D*Math.sin($)}},ce=function(D){return 180*D/Math.PI},Te=function(D,H,$,ee,oe,_e){var me=D+.5*($-D),be=H+.5*(ee-H),ke=oe+.5*($-oe),Be=_e+.5*(ee-_e),je=Math.min(D,oe,me,ke),Xe=Math.max(D,oe,me,ke),ut=Math.min(H,_e,be,Be),Oe=Math.max(H,_e,be,Be);return new o(je,ut,Xe-je,Oe-ut)},Ie=function(D,H,$,ee,oe,_e,me,be){var ke,Be,je,Xe,ut,Oe,G,Ct,tt,Ne,Ze,Ge,$e,it,_t=$-D,yt=ee-H,Et=oe-$,Nt=_e-ee,Ut=me-oe,ct=be-_e;for(Be=0;Be<41;Be++)tt=(G=(je=D+(ke=Be/40)*_t)+ke*((ut=$+ke*Et)-je))+ke*(ut+ke*(oe+ke*Ut-ut)-G),Ne=(Ct=(Xe=H+ke*yt)+ke*((Oe=ee+ke*Nt)-Xe))+ke*(Oe+ke*(_e+ke*ct-Oe)-Ct),0==Be?(Ze=tt,Ge=Ne,$e=tt,it=Ne):(Ze=Math.min(Ze,tt),Ge=Math.min(Ge,Ne),$e=Math.max($e,tt),it=Math.max(it,Ne));return new o(Math.round(Ze),Math.round(Ge),Math.round($e-Ze),Math.round(it-Ge))},Me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var $=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==$&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$)}}})(st.API),
/**
       * @license
       * jsPDF filters PlugIn
       * Copyright (c) 2014 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){var e=function(n){var s,o,l,d,u,c,f,p,_,w;for(/[^\x00-\xFF]/.test(n),o=[],l=0,d=(n+=s="\0\0\0\0".slice(n.length%4||4)).length;d>l;l+=4)0!==(u=(n.charCodeAt(l)<<24)+(n.charCodeAt(l+1)<<16)+(n.charCodeAt(l+2)<<8)+n.charCodeAt(l+3))?(c=(u=((u=((u=((u=(u-(w=u%85))/85)-(_=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)%85,o.push(c+33,f+33,p+33,_+33,w+33)):o.push(122);return function(S,x){for(var E=x;E>0;E--)S.pop()}(o,s.length),String.fromCharCode.apply(String,o)+"~>"},t=function(n){var s,o,l,d,u,c=String,f="length",p=255,_="charCodeAt",w="slice",S="replace";for(n[w](-2),n=n[w](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),l=[],d=0,u=(n+=s="uuuuu"[w](n[f]%5||5))[f];u>d;d+=5)o=52200625*(n[_](d)-33)+614125*(n[_](d+1)-33)+7225*(n[_](d+2)-33)+85*(n[_](d+3)-33)+(n[_](d+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(x,E){for(var V=E;V>0;V--)x.pop()}(l,s[f]),c.fromCharCode.apply(c,l)},i=function(n){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(n=n.replace(/\s/g,"")).indexOf(">")&&(n=n.substr(0,n.indexOf(">"))),n.length%2&&(n+="0"),!1===s.test(n))return"";for(var o="",l=0;l<n.length;l+=2)o+=String.fromCharCode("0x"+(n[l]+n[l+1]));return o},a=function(n){for(var s=new Uint8Array(n.length),o=n.length;o--;)s[o]=n.charCodeAt(o);return(s=ud(s)).reduce(function(l,d){return l+String.fromCharCode(d)},"")};r.processDataByFilters=function(n,s){var o=0,l=n||"",d=[];for("string"==typeof(s=s||[])&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:l,reverseChain:d.reverse().join(" ")}}}(st.API),
/**
       * @license
       * jsPDF fileloading PlugIn
       * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){r.loadFile=function(e,t,i){return function(a,n,s){n=!1!==n,s="function"==typeof s?s:function(){};var o=void 0;try{o=function(l,d,u){var c=new XMLHttpRequest,f=0,p=function(_){var w=_.length,S=[],x=String.fromCharCode;for(f=0;f<w;f+=1)S.push(x(255&_.charCodeAt(f)));return S.join("")};if(c.open("GET",l,!d),c.overrideMimeType("text/plain; charset=x-user-defined"),!1===d&&(c.onload=function(){u(200===c.status?p(this.responseText):void 0)}),c.send(null),d&&200===c.status)return p(c.responseText)}(a,n,s)}catch{}return o}(e,t,i)},r.loadImageFile=r.loadFile}(st.API),function(r){function e(){return(dt.html2canvas?Promise.resolve(dt.html2canvas):ve.e(456).then(ve.t.bind(ve,4456,23))).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(dt.DOMPurify?Promise.resolve(dt.DOMPurify):ve.e(896).then(ve.t.bind(ve,896,23))).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var i=function(s){var o=(0,Xt.Z)(s);return"undefined"===o?"undefined":"string"===o||s instanceof String?"string":"number"===o||s instanceof Number?"number":"function"===o||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&1===s.nodeType?"element":"object"===o?"object":"unknown"},a=function(s,o){var l=document.createElement(s);for(var d in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[d]=o.style[d];return l},n=function s(o){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),d=s.convert(Promise.resolve(),l);return(d=d.setProgress(1,s,1,[s])).set(o)};(n.prototype=Object.create(Promise.prototype)).constructor=n,n.convert=function(s,o){return s.__proto__=o||n.prototype,s},n.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},n.prototype.from=function(s,o){return this.then(function(){switch(o=o||function(l){switch(i(l)){case"string":return"string";case"element":return"canvas"===l.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(l){return this.set({src:a("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},n.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},n.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(d,u){for(var c=3===d.nodeType?document.createTextNode(d.nodeValue):d.cloneNode(!1),f=d.firstChild;f;f=f.nextSibling)!0!==u&&1===f.nodeType&&"SCRIPT"===f.nodeName||c.appendChild(l(f,u));return 1===d.nodeType&&("CANVAS"===d.nodeName?(c.width=d.width,c.height=d.height,c.getContext("2d").drawImage(d,0,0)):"TEXTAREA"!==d.nodeName&&"SELECT"!==d.nodeName||(c.value=d.value),c.addEventListener("load",function(){c.scrollTop=d.scrollTop,c.scrollLeft=d.scrollLeft},!0)),c}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===o.tagName&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},n.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},n.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(e).then(function(o){var l=this.opt.jsPDF,d=this.opt.fontFaces,u="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,c=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete c.onrendered,l.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var p=d[f],_=p.src.find(function(w){return"truetype"===w.format});_&&l.addFont(_.url,p.ref.name,p.ref.style)}return c.windowHeight=c.windowHeight||0,c.windowHeight=0==c.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):c.windowHeight,l.context2d.save(!0),o(this.prop.container,c)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},n.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},n.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},n.prototype.output=function(s,o,l){return"img"===(l=l||"pdf").toLowerCase()||"image"===l.toLowerCase()?this.outputImg(s,o):this.outputPdf(s,o)},n.prototype.outputPdf=function(s,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,o)})},n.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},n.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},n.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},n.prototype.set=function(s){if("object"!==i(s))return this;var o=Object.keys(s||{}).map(function(l){if(l in n.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(o)})},n.prototype.get=function(s,o){return this.then(function(){var l=s in n.template.prop?this.prop[s]:this.opt[s];return o?o(l):l})},n.prototype.setMargin=function(s){return this.then(function(){switch(i(s)){case"number":s=[s,s,s,s];case"array":if(2===s.length&&(s=[s[0],s[1],s[0],s[1]]),4===s.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},n.prototype.setPageSize=function(s){function o(l,d){return Math.floor(l*d/72*96)}return this.then(function(){(s=s||st.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:o(s.inner.width,s.k),height:o(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},n.prototype.setProgress=function(s,o,l,d){return null!=s&&(this.progress.val=s),null!=o&&(this.progress.state=o),null!=l&&(this.progress.n=l),null!=d&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},n.prototype.updateProgress=function(s,o,l,d){return this.setProgress(s?this.progress.val+s:null,o||null,l?this.progress.n+l:null,d?this.progress.stack.concat(d):null)},n.prototype.then=function(s,o){var l=this;return this.thenCore(s,o,function(d,u){return l.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(c){return l.updateProgress(null,d),c}).then(d,u).then(function(c){return l.updateProgress(1),c})})},n.prototype.thenCore=function(s,o,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),o&&(o=o.bind(this));var d=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:n.convert(Object.assign({},this),Promise.prototype),u=l.call(d,s,o);return n.convert(u,this.__proto__)},n.prototype.thenExternal=function(s,o){return Promise.prototype.then.call(this,s,o)},n.prototype.thenList=function(s){var o=this;return s.forEach(function(l){o=o.thenCore(l)}),o},n.prototype.catch=function(s){s&&(s=s.bind(this));var o=Promise.prototype.catch.call(this,s);return n.convert(o,this)},n.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},n.prototype.error=function(s){return this.then(function(){throw new Error(s)})},n.prototype.using=n.prototype.set,n.prototype.saveAs=n.prototype.save,n.prototype.export=n.prototype.output,n.prototype.run=n.prototype.then,st.getPageSize=function(s,o,l){if("object"===(0,Xt.Z)(s)){var d=s;s=d.orientation,o=d.unit||o,l=d.format||l}o=o||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var u,c=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var p,_=0,w=0;if(f.hasOwnProperty(c))_=f[c][1]/u,w=f[c][0]/u;else try{_=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if("p"===s||"portrait"===s)s="p",w>_&&(p=w,w=_,_=p);else{if("l"!==s&&"landscape"!==s)throw"Invalid orientation: "+s;s="l",_>w&&(p=w,w=_,_=p)}return{width:w,height:_,unit:o,k:u,orientation:s}},r.html=function(s,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(Uv):null;var l=new n(o);return o.worker?l:l.from(s).doCallback()}}(st.API),st.API.addJS=function(r){return zE=r,this.internal.events.subscribe("postPutResources",function(){Nh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Nh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ZE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+zE+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Nh&&void 0!==ZE&&this.internal.out("/Names <</JavaScript "+Nh+" 0 R>>")}),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){var e;r.events.push(["postPutResources",function(){var t=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),n=0;n<a.length;n++){var s=a[n],o=i.exec(s);null!=o&&t.internal.newObjectDeferredBegin(o[1],!1),t.internal.write(s)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(n=0;n<d;n++){var c=t.internal.newObject();u.push(c);var f=t.internal.getPageInfo(n+1);t.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),n=0;n<u.length;n++)t.internal.write("(page_"+(n+1)+")"+u[n]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(i,a,n){var s={title:a,options:n,children:[]};return null==i&&(i=this.root),i.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(i){i.id=t.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},t.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},t.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,n=0;n<i.children.length;n++){var s=i.children[n];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(i)),n>0&&this.line("/Prev "+this.makeRef(i.children[n-1])),n<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[n+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var o=this.count=this.count_r({count:0},s);if(o>0&&this.line("/Count "+o),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<i.children.length;d++)this.renderItems(i.children[d])},t.outline.line=function(i){this.ctx.val+=i+"\r\n"},t.outline.makeRef=function(i){return i.id+" 0 R"},t.outline.makeString=function(i){return"("+t.internal.pdfEscape(i)+")"},t.outline.objStart=function(i){this.ctx.val+="\r\n"+i.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(i,a){for(var n=0;n<a.children.length;n++)i.count++,this.count_r(i,a.children[n]);return i.count}}])}(st.API),
/**
       * @license
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,i,a,n,s,o){var l,d=this.decode.DCT_DECODE,u=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=this.__addimage__.isArrayBuffer(t=s||t)?new Uint8Array(t):t,(l=function(c){for(var f,p=256*c.charCodeAt(4)+c.charCodeAt(5),_=c.length,w={width:0,height:0,numcomponents:1},S=4;S<_;S+=2){if(-1!==e.indexOf(c.charCodeAt((S+=p)+1))){f=256*c.charCodeAt(S+5)+c.charCodeAt(S+6),w={width:256*c.charCodeAt(S+7)+c.charCodeAt(S+8),height:f,numcomponents:c.charCodeAt(S+9)};break}p=256*c.charCodeAt(S+2)+c.charCodeAt(S+3)}return w}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:t,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:d,index:i,alias:a}}return u}}(st.API);var Oo,Bh,WE,KE,$E,j8=function(){var r,e,t;function i(n){var s,l,d,u,c,f,p,_,w,S,x,E,V;for(this.data=n,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},c=null;;){switch(s=this.readUInt32(),_=function(){var N,j;for(j=[],N=0;N<4;++N)j.push(String.fromCharCode(this.data[this.pos++]));return j}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":c&&this.animation.frames.push(c),this.pos+=4,c={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,c.delay=1e3*u/d,c.disposeOp=this.data[this.pos++],c.blendOp=this.data[this.pos++],c.data=[];break;case"IDAT":case"fdAT":for("fdAT"===_&&(this.pos+=4,s-=4),n=c?.data||this.imgData,x=0;0<=s?x<s:x>s;0<=s?++x:--x)n.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(E=0;0<=w?E<w:E>w;0<=w?++E:--E)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":f=(S=this.read(s)).indexOf(0),p=String.fromCharCode.apply(String,S.slice(0,f)),this.text[p]=String.fromCharCode.apply(String,S.slice(f+1));break;case"IEND":return c&&this.animation.frames.push(c),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(V=this.colorType)||6===V,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(n){var s,o;for(o=[],s=0;0<=n?s<n:s>n;0<=n?++s:--s)o.push(this.data[this.pos++]);return o},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(n){var s=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*s),l=0,d=this;if(null==n&&(n=this.imgData),0===n.length)return new Uint8Array(0);function u(c,f,p,_){var w,S,x,E,V,N,j,Q,k,se,he,F,P,U,K,ge,ue,xe,ce,Te,Ie=Math.ceil((d.width-c)/p),Me=Math.ceil((d.height-f)/_),D=d.width==Ie&&d.height==Me;for(P=s*Ie,he=D?o:new Uint8Array(P*Me),N=n.length,F=0,S=0;F<Me&&l<N;){switch(n[l++]){case 0:for(E=ge=0;ge<P;E=ge+=1)he[S++]=n[l++];break;case 1:for(E=ue=0;ue<P;E=ue+=1)w=n[l++],V=E<s?0:he[S-s],he[S++]=(w+V)%256;break;case 2:for(E=xe=0;xe<P;E=xe+=1)w=n[l++],x=(E-E%s)/s,he[S++]=((U=F&&he[(F-1)*P+x*s+E%s])+w)%256;break;case 3:for(E=ce=0;ce<P;E=ce+=1)w=n[l++],x=(E-E%s)/s,V=E<s?0:he[S-s],U=F&&he[(F-1)*P+x*s+E%s],he[S++]=(w+Math.floor((V+U)/2))%256;break;case 4:for(E=Te=0;Te<P;E=Te+=1)w=n[l++],x=(E-E%s)/s,0===F?U=K=0:(U=he[(F-1)*P+x*s+E%s],K=x&&he[(F-1)*P+(x-1)*s+E%s]),j=(V=E<s?0:he[S-s])+U-K,Q=Math.abs(j-V),k=Math.abs(j-U),se=Math.abs(j-K),he[S++]=(w+(Q<=k&&Q<=se?V:k<=se?U:K))%256;break;default:throw new Error("Invalid filter algorithm: "+n[l-1])}if(!D){var H=((f+F*_)*d.width+c)*s,$=F*P;for(E=0;E<Ie;E+=1){for(var ee=0;ee<s;ee+=1)o[H++]=he[$++];H+=(p-1)*s}}F++}}return n=Eh(n),1==d.interlaceMethod?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},i.prototype.decodePalette=function(){var n,s,o,l,d,u,c,f,p;for(o=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+o.length),l=0,n=0,s=c=0,f=o.length;c<f;s=c+=3)d[l++]=o[s],d[l++]=o[s+1],d[l++]=o[s+2],d[l++]=null!=(p=u[n++])?p:255;return d},i.prototype.copyToImageData=function(n,s){var o,l,d,u,c,f,p,_,w,S,x;if(l=this.colors,w=null,o=this.hasAlphaChannel,this.palette.length&&(w=null!=(x=this._decodedPalette)?x:this._decodedPalette=this.decodePalette(),l=4,o=!0),_=(d=n.data||n).length,c=w||s,u=f=0,1===l)for(;u<_;)p=w?4*s[u/4]:f,S=c[p++],d[u++]=S,d[u++]=S,d[u++]=S,d[u++]=o?c[p++]:255,f=p;else for(;u<_;)p=w?4*s[u/4]:f,d[u++]=c[p++],d[u++]=c[p++],d[u++]=c[p++],d[u++]=o?c[p++]:255,f=p},i.prototype.decode=function(){var n;return n=new Uint8Array(this.width*this.height*4),this.copyToImageData(n,this.decodePixels()),n};var a=function(){if("[object Window]"===Object.prototype.toString.call(dt)){try{e=dt.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return a(),r=function(n){var s;if(!0===a())return t.width=n.width,t.height=n.height,t.clearRect(0,0,n.width,n.height),t.putImageData(n,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(n){var s,o,l,d,u,c,f,p;if(this.animation){for(p=[],o=u=0,c=(f=this.animation.frames).length;u<c;o=++u)l=n.createImageData((s=f[o]).width,s.height),d=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,d),s.imageData=l,p.push(s.image=r(l));return p}},i.prototype.renderFrame=function(n,s){var o,l,d;return o=(l=this.animation.frames)[s],d=l[s-1],0===s&&n.clearRect(0,0,this.width,this.height),1===d?.disposeOp?n.clearRect(d.xOffset,d.yOffset,d.width,d.height):2===d?.disposeOp&&n.putImageData(d.imageData,d.xOffset,d.yOffset),0===o.blendOp&&n.clearRect(o.xOffset,o.yOffset,o.width,o.height),n.drawImage(o.image,o.xOffset,o.yOffset)},i.prototype.animate=function(n){var s,o,l,d,u,c,f=this;return o=0,d=(c=this.animation).numFrames,l=c.frames,u=c.numPlays,(s=function(){var p,_;if(p=o++%d,_=l[p],f.renderFrame(n,p),d>1&&o/d<u)return f.animation._timeout=setTimeout(s,_.delay)})()},i.prototype.stopAnimation=function(){var n;return clearTimeout(null!=(n=this.animation)?n._timeout:void 0)},i.prototype.render=function(n){var s,o;return n._png&&n._png.stopAnimation(),n._png=this,n.width=this.width,n.height=this.height,s=n.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(o=s.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),s.putImageData(o,0,0))},i}();function q8(r){var e=0;if(71!==r[e++]||73!==r[e++]||70!==r[e++]||56!==r[e++]||56!=(r[e++]+1&253)||97!==r[e++])throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,i=r[e++]|r[e++]<<8,a=r[e++],s=1<<1+(7&a);e++,e++;var o=null,l=null;a>>7&&(o=e,l=s,e+=3*s);var d=!0,u=[],c=0,f=null,p=0,_=null;for(this.width=t,this.height=i;d&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(11!==r[e]||78==r[e+1]&&69==r[e+2]&&84==r[e+3]&&83==r[e+4]&&67==r[e+5]&&65==r[e+6]&&80==r[e+7]&&69==r[e+8]&&50==r[e+9]&&46==r[e+10]&&48==r[e+11]&&3==r[e+12]&&1==r[e+13]&&0==r[e+16])e+=14,_=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((F=r[e++])>=0))throw Error("Invalid block size");if(0===F)break;e+=F}break;case 249:if(4!==r[e++]||0!==r[e+4])throw new Error("Invalid graphics extension block.");var w=r[e++];c=r[e++]|r[e++]<<8,f=r[e++],!(1&w)&&(f=null),p=w>>2&7,e++;break;case 254:for(;;){if(!((F=r[e++])>=0))throw Error("Invalid block size");if(0===F)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var S=r[e++]|r[e++]<<8,x=r[e++]|r[e++]<<8,E=r[e++]|r[e++]<<8,V=r[e++]|r[e++]<<8,N=r[e++],j=N>>6&1,Q=1<<1+(7&N),q=o,k=l,se=!1;N>>7&&(se=!0,q=e,k=Q,e+=3*Q);var he=e;for(e++;;){var F;if(!((F=r[e++])>=0))throw Error("Invalid block size");if(0===F)break;e+=F}u.push({x:S,y:x,width:E,height:V,has_local_palette:se,palette_offset:q,palette_size:k,data_offset:he,data_length:e-he,transparent_index:f,interlaced:!!j,delay:c,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return _},this.frameInfo=function(P){if(P<0||P>=u.length)throw new Error("Frame index out of range.");return u[P]},this.decodeAndBlitFrameBGRA=function(P,U){var K=this.frameInfo(P),ge=K.width*K.height,ue=new Uint8Array(ge);GE(r,K.data_offset,ue,ge);var xe=K.palette_offset,ce=K.transparent_index;null===ce&&(ce=256);var Te=K.width,Ie=t-Te,Me=Te,D=4*(K.y*t+K.x),H=4*((K.y+K.height)*t+K.x),$=D,ee=4*Ie;!0===K.interlaced&&(ee+=4*t*7);for(var oe=8,_e=0,me=ue.length;_e<me;++_e){var be=ue[_e];if(0===Me&&(Me=Te,($+=ee)>=H&&(ee=4*Ie+4*t*(oe-1),$=D+(Te+Ie)*(oe<<1),oe>>=1)),be===ce)$+=4;else{var ke=r[xe+3*be],Be=r[xe+3*be+1];U[$++]=r[xe+3*be+2],U[$++]=Be,U[$++]=ke,U[$++]=255}--Me}},this.decodeAndBlitFrameRGBA=function(P,U){var K=this.frameInfo(P),ge=K.width*K.height,ue=new Uint8Array(ge);GE(r,K.data_offset,ue,ge);var xe=K.palette_offset,ce=K.transparent_index;null===ce&&(ce=256);var Te=K.width,Ie=t-Te,Me=Te,D=4*(K.y*t+K.x),H=4*((K.y+K.height)*t+K.x),$=D,ee=4*Ie;!0===K.interlaced&&(ee+=4*t*7);for(var oe=8,_e=0,me=ue.length;_e<me;++_e){var be=ue[_e];if(0===Me&&(Me=Te,($+=ee)>=H&&(ee=4*Ie+4*t*(oe-1),$=D+(Te+Ie)*(oe<<1),oe>>=1)),be===ce)$+=4;else{var Be=r[xe+3*be+1],je=r[xe+3*be+2];U[$++]=r[xe+3*be],U[$++]=Be,U[$++]=je,U[$++]=255}--Me}}}function GE(r,e,t,i){for(var a=r[e++],n=1<<a,s=n+1,o=s+1,l=a+1,d=(1<<l)-1,u=0,c=0,f=0,p=r[e++],_=new Int32Array(4096),w=null;;){for(;u<16&&0!==p;)c|=r[e++]<<u,u+=8,1===p?p=r[e++]:--p;if(u<l)break;var S=c&d;if(c>>=l,u-=l,S!==n){if(S===s)break;for(var x=S<o?S:w,E=0,V=x;V>n;)V=_[V]>>8,++E;var N=V;if(f+E+(x!==S?1:0)>i)return void Jt.log("Warning, gif stream longer than expected.");t[f++]=N;var j=f+=E;for(x!==S&&(t[f++]=N),V=x;E--;)t[--j]=255&(V=_[V]),V>>=8;null!==w&&o<4096&&(_[o++]=w<<8|N,o>=d+1&&l<12&&(++l,d=d<<1|1)),w=S}else o=s+1,d=(1<<(l=a+1))-1,w=null}return f!==i&&Jt.log("Warning, gif stream shorter than expected."),t}function qv(r){var e,t,i,a,n,s=Math.floor,o=new Array(64),l=new Array(64),d=new Array(64),u=new Array(64),c=new Array(65535),f=new Array(65535),p=new Array(64),_=new Array(64),w=[],S=0,x=7,E=new Array(64),V=new Array(64),N=new Array(64),j=new Array(256),Q=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],se=[0,1,2,3,4,5,6,7,8,9,10,11],he=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(D,H){for(var $=0,ee=0,oe=new Array,_e=1;_e<=16;_e++){for(var me=1;me<=D[_e];me++)oe[H[ee]]=[],oe[H[ee]][0]=$,oe[H[ee]][1]=_e,ee++,$++;$*=2}return oe}function xe(D){for(var H=D[0],$=D[1]-1;$>=0;)H&1<<$&&(S|=1<<x),$--,--x<0&&(255==S?(ce(255),ce(0)):ce(S),x=7,S=0)}function ce(D){w.push(D)}function Te(D){ce(D>>8&255),ce(255&D)}function Ie(D,H,$,ee,oe){for(var _e,me=oe[0],be=oe[240],ke=function(Ne,Ze){var Ge,$e,it,_t,yt,Et,Nt,Ut,ct,It,Ue=0;for(ct=0;ct<8;++ct){var Qi=(Ge=Ne[Ue])+(Ut=Ne[Ue+7]),Mt=Ge-Ut,Yr=($e=Ne[Ue+1])+(Nt=Ne[Ue+6]),Qt=$e-Nt,oi=(it=Ne[Ue+2])+(Et=Ne[Ue+5]),Ta=it-Et,Zt=(_t=Ne[Ue+3])+(yt=Ne[Ue+4]),Ts=_t-yt,fi=Qi+Zt,Xr=Qi-Zt,en=Yr+oi,vi=Yr-oi;Ne[Ue]=fi+en,Ne[Ue+4]=fi-en;var mt=.707106781*(vi+Xr);Ne[Ue+2]=Xr+mt,Ne[Ue+6]=Xr-mt;var zt=.382683433*((fi=Ts+Ta)-(vi=Qt+Mt)),Ds=.5411961*fi+zt,Ki=1.306562965*vi+zt,Da=.707106781*(en=Ta+Qt),Oa=Mt+Da,ot=Mt-Da;Ne[Ue+5]=ot+Ds,Ne[Ue+3]=ot-Ds,Ne[Ue+1]=Oa+Ki,Ne[Ue+7]=Oa-Ki,Ue+=8}for(Ue=0,ct=0;ct<8;++ct){var Jr=(Ge=Ne[Ue])+(Ut=Ne[Ue+56]),Ra=Ge-Ut,pr=($e=Ne[Ue+8])+(Nt=Ne[Ue+48]),Ri=$e-Nt,Ei=(it=Ne[Ue+16])+(Et=Ne[Ue+40]),xr=it-Et,Ro=(_t=Ne[Ue+24])+(yt=Ne[Ue+32]),tn=_t-yt,Qr=Jr+Ro,ea=Jr-Ro,ta=pr+Ei,La=pr-Ei;Ne[Ue]=Qr+ta,Ne[Ue+32]=Qr-ta;var Nr=.707106781*(La+ea);Ne[Ue+16]=ea+Nr,Ne[Ue+48]=ea-Nr;var Pa=.382683433*((Qr=tn+xr)-(La=Ri+Ra)),Os=.5411961*Qr+Pa,Lo=1.306562965*La+Pa,Po=.707106781*(ta=xr+Ri),Fo=Ra+Po,Vo=Ra-Po;Ne[Ue+40]=Vo+Os,Ne[Ue+24]=Vo-Os,Ne[Ue+8]=Fo+Lo,Ne[Ue+56]=Fo-Lo,Ue++}for(ct=0;ct<64;++ct)p[ct]=(It=Ne[ct]*Ze[ct])>0?It+.5|0:It-.5|0;return p}(D,H),Be=0;Be<64;++Be)_[q[Be]]=ke[Be];var je=_[0]-$;$=_[0],0==je?xe(ee[0]):(xe(ee[f[_e=32767+je]]),xe(c[_e]));for(var Xe=63;Xe>0&&0==_[Xe];)Xe--;if(0==Xe)return xe(me),$;for(var ut,Oe=1;Oe<=Xe;){for(var G=Oe;0==_[Oe]&&Oe<=Xe;)++Oe;var Ct=Oe-G;if(Ct>=16){ut=Ct>>4;for(var tt=1;tt<=ut;++tt)xe(be);Ct&=15}xe(oe[(Ct<<4)+f[_e=32767+_[Oe]]]),xe(c[_e]),Oe++}return 63!=Xe&&xe(me),$}function Me(D){D=Math.min(Math.max(D,1),100),n!=D&&(function(H){for(var $=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var oe=s(($[ee]*H+50)/100);oe=Math.min(Math.max(oe,1),255),o[q[ee]]=oe}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var be=s((_e[me]*H+50)/100);be=Math.min(Math.max(be,1),255),l[q[me]]=be}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,je=0;je<8;je++)for(var Xe=0;Xe<8;Xe++)d[Be]=1/(o[q[Be]]*ke[je]*ke[Xe]*8),u[Be]=1/(l[q[Be]]*ke[je]*ke[Xe]*8),Be++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),n=D)}this.encode=function(D,H){var $e,it;H&&Me(H),w=new Array,S=0,x=7,Te(65496),Te(65504),Te(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),Te(1),Te(1),ce(0),ce(0),function(){Te(65499),Te(132),ce(0);for(var $e=0;$e<64;$e++)ce(o[$e]);ce(1);for(var it=0;it<64;it++)ce(l[it])}(),$e=D.width,it=D.height,Te(65472),Te(17),ce(8),Te(it),Te($e),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1),function(){Te(65476),Te(418),ce(0);for(var $e=0;$e<16;$e++)ce(k[$e+1]);for(var it=0;it<=11;it++)ce(se[it]);ce(16);for(var _t=0;_t<16;_t++)ce(he[_t+1]);for(var yt=0;yt<=161;yt++)ce(F[yt]);ce(1);for(var Et=0;Et<16;Et++)ce(P[Et+1]);for(var Nt=0;Nt<=11;Nt++)ce(U[Nt]);ce(17);for(var Ut=0;Ut<16;Ut++)ce(K[Ut+1]);for(var ct=0;ct<=161;ct++)ce(ge[ct])}(),Te(65498),Te(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var $=0,ee=0,oe=0;S=0,x=7,this.encode.displayName="_encode_";for(var _e,me,be,ke,Be,je,Xe,ut,Oe,G=D.data,tt=D.height,Ne=4*D.width,Ze=0;Ze<tt;){for(_e=0;_e<Ne;){for(Be=Ne*Ze+_e,Xe=-1,ut=0,Oe=0;Oe<64;Oe++)je=Be+(ut=Oe>>3)*Ne+(Xe=4*(7&Oe)),Ze+ut>=tt&&(je-=Ne*(Ze+1+ut-tt)),_e+Xe>=Ne&&(je-=_e+Xe-Ne+4),me=G[je++],be=G[je++],ke=G[je++],E[Oe]=(Q[me]+Q[be+256>>0]+Q[ke+512>>0]>>16)-128,V[Oe]=(Q[me+768>>0]+Q[be+1024>>0]+Q[ke+1280>>0]>>16)-128,N[Oe]=(Q[me+1280>>0]+Q[be+1536>>0]+Q[ke+1792>>0]>>16)-128;$=Ie(E,d,$,e,i),ee=Ie(V,u,ee,t,a),oe=Ie(N,u,oe,t,a),_e+=32}Ze+=8}if(x>=0){var Ge=[];Ge[1]=x+1,Ge[0]=(1<<x+1)-1,xe(Ge)}return Te(65497),new Uint8Array(w)},r=r||50,function(){for(var D=String.fromCharCode,H=0;H<256;H++)j[H]=D(H)}(),e=ue(k,se),t=ue(P,U),i=ue(he,F),a=ue(K,ge),function(){for(var D=1,H=2,$=1;$<=15;$++){for(var ee=D;ee<H;ee++)f[32767+ee]=$,c[32767+ee]=[],c[32767+ee][1]=$,c[32767+ee][0]=ee;for(var oe=-(H-1);oe<=-D;oe++)f[32767+oe]=$,c[32767+oe]=[],c[32767+oe][1]=$,c[32767+oe][0]=H-1+oe;D<<=1,H<<=1}}(),function(){for(var D=0;D<256;D++)Q[D]=19595*D,Q[D+256>>0]=38470*D,Q[D+512>>0]=7471*D+32768,Q[D+768>>0]=-11059*D,Q[D+1024>>0]=-21709*D,Q[D+1280>>0]=32768*D+8421375,Q[D+1536>>0]=-27439*D,Q[D+1792>>0]=-5329*D}(),Me(r)}function jr(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function UE(r){function e(k){if(!k)throw Error("assert :P")}function t(k,se,he){for(var F=0;4>F;F++)if(k[se+F]!=he.charCodeAt(F))return!0;return!1}function i(k,se,he,F,P){for(var U=0;U<P;U++)k[se+U]=he[F+U]}function a(k,se,he,F){for(var P=0;P<F;P++)k[se+P]=he}function n(k){return new Int32Array(k)}function s(k,se){for(var he=[],F=0;F<k;F++)he.push(new se);return he}function o(k,se){var he=[];return function F(P,U,K){for(var ge=K[U],ue=0;ue<ge&&(P.push(K.length>U+1?[]:new se),!(K.length<U+1));ue++)F(P[ue],U+1,K)}(he,0,k),he}var l=function(){var k=this;function se(h,v){for(var m=1<<v-1>>>0;h&m;)m>>>=1;return m?(h&m-1)+m:h}function he(h,v,m,y,I){e(!(y%m));do{h[v+(y-=m)]=I}while(0<y)}function F(h,v,m,y,I){if(e(2328>=I),512>=I)var T=n(512);else if(null==(T=n(I)))return 0;return function(O,R,L,M,te,pe){var fe,ne,Pe=R,Se=1<<L,ie=n(16),re=n(16);for(e(0!=te),e(null!=M),e(null!=O),e(0<L),ne=0;ne<te;++ne){if(15<M[ne])return 0;++ie[M[ne]]}if(ie[0]==te)return 0;for(re[1]=0,fe=1;15>fe;++fe){if(ie[fe]>1<<fe)return 0;re[fe+1]=re[fe]+ie[fe]}for(ne=0;ne<te;++ne)fe=M[ne],0<M[ne]&&(pe[re[fe]++]=ne);if(1==re[15])return(M=new P).g=0,M.value=pe[0],he(O,Pe,1,Se,M),Se;var Re,Fe=-1,Le=Se-1,Ye=0,ze=1,nt=1,Ke=1<<L;for(ne=0,fe=1,te=2;fe<=L;++fe,te<<=1){if(ze+=nt<<=1,0>(nt-=ie[fe]))return 0;for(;0<ie[fe];--ie[fe])(M=new P).g=fe,M.value=pe[ne++],he(O,Pe+Ye,te,Ke,M),Ye=se(Ye,fe)}for(fe=L+1,te=2;15>=fe;++fe,te<<=1){if(ze+=nt<<=1,0>(nt-=ie[fe]))return 0;for(;0<ie[fe];--ie[fe]){if(M=new P,(Ye&Le)!=Fe){for(Pe+=Ke,Re=1<<(Fe=fe)-L;15>Fe&&!(0>=(Re-=ie[Fe]));)++Fe,Re<<=1;Se+=Ke=1<<(Re=Fe-L),O[R+(Fe=Ye&Le)].g=Re+L,O[R+Fe].value=Pe-R-Fe}M.g=fe-L,M.value=pe[ne++],he(O,Pe+(Ye>>L),te,Ke,M),Ye=se(Ye,fe)}}return ze!=2*re[15]-1?0:Se}(h,v,m,y,I,T)}function P(){this.value=this.g=0}function U(){this.value=this.g=0}function K(){this.G=s(5,P),this.H=n(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(vr,U)}function ge(h,v,m,y){e(null!=h),e(null!=v),e(2147483648>y),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=v,h.pa=m,h.Jd=v,h.Yc=m+y,h.Zc=4<=y?m+y-4+1:m,_e(h)}function ue(h,v){for(var m=0;0<v--;)m|=be(h,128)<<v;return m}function xe(h,v){var m=ue(h,v);return me(h)?-m:m}function ce(h,v,m,y){var I,T=0;for(e(null!=h),e(null!=v),e(4294967288>y),h.Sb=y,h.Ra=0,h.u=0,h.h=0,4<y&&(y=4),I=0;I<y;++I)T+=v[m+I]<<8*I;h.Ra=T,h.bb=y,h.oa=v,h.pa=m}function Te(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Yo-8>>>0,++h.bb,h.u-=8;$(h)&&(h.h=1,h.u=0)}function Ie(h,v){if(e(0<=v),!h.h&&v<=qo){var m=H(h)&jo[v];return h.u+=v,Te(h),m}return h.h=1,h.u=0}function Me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(h){return h.Ra>>>(h.u&Yo-1)>>>0}function $(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Yo}function ee(h,v){h.u=v,h.h=$(h)}function oe(h){h.u>=Od&&(e(h.u>=Od),Te(h))}function _e(h){e(null!=h&&null!=h.oa),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(null!=h&&null!=h.oa),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function me(h){return ue(h,1)}function be(h,v){var m=h.Ca;0>h.b&&_e(h);var y=h.b,I=m*v>>>8,T=(h.I>>>y>I)+0;for(T?(m-=I,h.I-=I+1<<y>>>0):m=I+1,y=m,I=0;256<=y;)I+=8,y>>=8;return h.b-=y=7^I+gr[y],h.Ca=(m<<y)-1,T}function ke(h,v,m){h[v+0]=m>>24&255,h[v+1]=m>>16&255,h[v+2]=m>>8&255,h[v+3]=m>>0&255}function Be(h,v){return h[v+0]<<0|h[v+1]<<8}function je(h,v){return Be(h,v)|h[v+2]<<16}function Xe(h,v){return Be(h,v)|Be(h,v+2)<<16}function ut(h,v){var m=1<<v;return e(null!=h),e(0<v),h.X=n(m),null==h.X?0:(h.Mb=32-v,h.Xa=v,1)}function Oe(h,v){e(null!=h),e(null!=v),e(h.Xa==v.Xa),i(v.X,0,h.X,0,1<<v.Xa)}function G(){this.X=[],this.Xa=this.Mb=0}function Ct(h,v,m,y){e(null!=m),e(null!=y);var I=m[0],T=y[0];return 0==I&&(I=(h*T+v/2)/v),0==T&&(T=(v*I+h/2)/h),0>=I||0>=T?0:(m[0]=I,y[0]=T,1)}function tt(h,v){return h+(1<<v)-1>>>v}function Ne(h,v){return((4278255360&h)+(4278255360&v)>>>0&4278255360)+((16711935&h)+(16711935&v)>>>0&16711935)>>>0}function Ze(h,v){k[v]=function(m,y,I,T,O,R,L){var M;for(M=0;M<O;++M){var te=k[h](R[L+M-1],I,T+M);R[L+M]=Ne(m[y+M],te)}}}function Ge(){this.ud=this.hd=this.jd=0}function $e(h,v){return((4278124286&(h^v))>>>1)+(h&v)>>>0}function it(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function _t(h,v){return it(h+(h-v+.5>>1))}function yt(h,v,m){return Math.abs(v-m)-Math.abs(h-m)}function Et(h,v,m,y,I,T,O){for(y=T[O-1],m=0;m<I;++m)T[O+m]=y=Ne(h[v+m],y)}function Nt(h,v,m,y,I){var T;for(T=0;T<m;++T){var O=h[v+T],R=O>>8&255,L=16711935&(L=(L=16711935&O)+((R<<16)+R));y[I+T]=(4278255360&O)+L>>>0}}function Ut(h,v){v.jd=h>>0&255,v.hd=h>>8&255,v.ud=h>>16&255}function ct(h,v,m,y,I,T){var O;for(O=0;O<y;++O){var R=v[m+O],L=R>>>8,M=R,te=255&(te=(te=R>>>16)+((h.jd<<24>>24)*(L<<24>>24)>>>5));M=255&(M=(M+=(h.hd<<24>>24)*(L<<24>>24)>>>5)+((h.ud<<24>>24)*(te<<24>>24)>>>5)),I[T+O]=(4278255360&R)+(te<<16)+M}}function It(h,v,m,y,I){k[v]=function(T,O,R,L,M,te,pe,fe,ne){for(L=pe;L<fe;++L)for(pe=0;pe<ne;++pe)M[te++]=I(R[y(T[O++])])},k[h]=function(T,O,R,L,M,te,pe){var fe=8>>T.b,ne=T.Ea,Pe=T.K[0],Se=T.w;if(8>fe)for(T=(1<<T.b)-1,Se=(1<<fe)-1;O<R;++O){var ie,re=0;for(ie=0;ie<ne;++ie)ie&T||(re=y(L[M++])),te[pe++]=I(Pe[re&Se]),re>>=fe}else k["VP8LMapColor"+m](L,M,Pe,Se,te,pe,O,R,ne)}}function Ue(h,v,m,y,I){for(m=v+m;v<m;){var T=h[v++];y[I++]=T>>16&255,y[I++]=T>>8&255,y[I++]=T>>0&255}}function Qi(h,v,m,y,I){for(m=v+m;v<m;){var T=h[v++];y[I++]=T>>16&255,y[I++]=T>>8&255,y[I++]=T>>0&255,y[I++]=T>>24&255}}function Mt(h,v,m,y,I){for(m=v+m;v<m;){var T=(O=h[v++])>>16&240|O>>12&15,O=O>>0&240|O>>28&15;y[I++]=T,y[I++]=O}}function Yr(h,v,m,y,I){for(m=v+m;v<m;){var T=(O=h[v++])>>16&248|O>>13&7,O=O>>5&224|O>>3&31;y[I++]=T,y[I++]=O}}function Qt(h,v,m,y,I){for(m=v+m;v<m;){var T=h[v++];y[I++]=T>>0&255,y[I++]=T>>8&255,y[I++]=T>>16&255}}function oi(h,v,m,y,I,T){if(0==T)for(m=v+m;v<m;)ke(y,((T=h[v++])[0]>>24|T[1]>>8&65280|T[2]<<8&16711680|T[3]<<24)>>>0),I+=32;else i(y,I,h,v,m)}function Ta(h,v){k[v][0]=k[h+"0"],k[v][1]=k[h+"1"],k[v][2]=k[h+"2"],k[v][3]=k[h+"3"],k[v][4]=k[h+"4"],k[v][5]=k[h+"5"],k[v][6]=k[h+"6"],k[v][7]=k[h+"7"],k[v][8]=k[h+"8"],k[v][9]=k[h+"9"],k[v][10]=k[h+"10"],k[v][11]=k[h+"11"],k[v][12]=k[h+"12"],k[v][13]=k[h+"13"],k[v][14]=k[h+"0"],k[v][15]=k[h+"0"]}function Zt(h){return h==Eg||h==Ig||h==hc||h==Ag}function Ts(){this.eb=[],this.size=this.A=this.fb=0}function fi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ts,this.f.kb=new fi,this.sd=null}function en(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vi(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function zt(h,v){var m=h.T,y=v.ba.f.RGBA,I=y.eb,T=y.fb+h.ka*y.A,O=Hr[v.ba.S],R=h.y,L=h.O,M=h.f,te=h.N,pe=h.ea,fe=h.W,ne=v.cc,Pe=v.dc,Se=v.Mc,ie=v.Nc,re=h.ka,Re=h.ka+h.T,Fe=h.U,Le=Fe+1>>1;for(0==re?O(R,L,null,null,M,te,pe,fe,M,te,pe,fe,I,T,null,null,Fe):(O(v.ec,v.fc,R,L,ne,Pe,Se,ie,M,te,pe,fe,I,T-y.A,I,T,Fe),++m);re+2<Re;re+=2)O(R,(L+=2*h.fa)-h.fa,R,L,ne=M,Pe=te,Se=pe,ie=fe,M,te+=h.Rc,pe,fe+=h.Rc,I,(T+=2*y.A)-y.A,I,T,Fe);return L+=h.fa,h.j+Re<h.o?(i(v.ec,v.fc,R,L,Fe),i(v.cc,v.dc,M,te,Le),i(v.Mc,v.Nc,pe,fe,Le),m--):1&Re||O(R,L,null,null,M,te,pe,fe,M,te,pe,fe,I,T+y.A,null,null,Fe),m}function Ds(h,v,m){var y=h.F,I=[h.J];if(null!=y){var T=h.U,O=v.ba.S,R=O==uc||O==hc;v=v.ba.f.RGBA;var L=[0],M=h.ka;L[0]=h.T,h.Kb&&(0==M?--L[0]:(--M,I[0]-=h.width),h.j+h.ka+h.T==h.o&&(L[0]=h.o-h.j-M));var te=v.eb;h=nc(y,I[0],h.width,T,L,te,(M=v.fb+M*v.A)+(R?0:3),v.A),e(m==L),h&&Zt(O)&&Zn(te,M,R,T,L,v.A)}return 0}function Ki(h){var v=h.ma,m=v.ba.S,y=11>m,I=m==lc||m==dc||m==uc||m==Sg||12==m||Zt(m);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!Td(v.Oa,h,I?11:12))return 0;if(I&&Zt(m)&&Ve(),h.da)alert("todo:use_scaling");else{if(y){if(v.Ib=mt,h.Kb){if(v.memory=n(h.U+2*(m=h.U+1>>1)),null==v.memory)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+h.U,v.Mc=v.cc,v.Nc=v.dc+m,v.Ib=zt,Ve()}}else alert("todo:EmitYUV");I&&(v.Jb=Ds,y&&de())}if(y&&!v1){for(h=0;256>h;++h)jW[h]=89858*(h-128)+pc>>cc,XW[h]=-22014*(h-128)+pc,YW[h]=-45773*(h-128),qW[h]=113618*(h-128)+pc>>cc;for(h=Nd;h<Og;++h)JW[h-Nd]=Sr(v=76283*(h-16)+pc>>cc,255),QW[h-Nd]=Sr(v+8>>4,15);v1=1}return 1}function Da(h){var v=h.ma,m=h.U,y=h.T;return e(!(1&h.ka)),0>=m||0>=y?0:(m=v.Ib(h,v),null!=v.Jb&&v.Jb(h,v,m),v.Dc+=m,1)}function Oa(h){h.ma.memory=null}function ot(h,v,m,y){return 47!=Ie(h,8)?0:(v[0]=Ie(h,14)+1,m[0]=Ie(h,14)+1,y[0]=Ie(h,1),0!=Ie(h,3)?0:!h.h)}function Jr(h,v){if(4>h)return h+1;var m=h-2>>1;return(2+(1&h)<<m)+Ie(v,m)+1}function Ra(h,v){return 120<v?v-120:1<=(m=((m=FW[v-1])>>4)*h+(8-(15&m)))?m:1;var m}function pr(h,v,m){var y=H(m),I=h[v+=255&y].g-8;return 0<I&&(ee(m,m.u+8),y=H(m),v+=h[v].value,v+=y&(1<<I)-1),ee(m,m.u+h[v].g),h[v].value}function Ri(h,v,m){return m.g+=h.g,m.value+=h.value<<v>>>0,e(8>=m.g),h.g}function Ei(h,v,m){var y=h.xc;return e((v=0==y?0:h.vc[h.md*(m>>y)+(v>>y)])<h.Wb),h.Ya[v]}function xr(h,v,m,y){var I=h.ab,T=h.c*v,O=h.C;v=O+v;var R=m,L=y;for(y=h.Ta,m=h.Ua;0<I--;){var M=h.gc[I],te=O,pe=v,fe=R,ne=L,Pe=(L=y,R=m,M.Ea);switch(e(te<pe),e(pe<=M.nc),M.hc){case 2:ac(fe,ne,(pe-te)*Pe,L,R);break;case 0:var Se=te,ie=pe,re=L,Re=R,Fe=(Ke=M).Ea;0==Se&&(wg(fe,ne,null,null,1,re,Re),Et(fe,ne+1,0,0,Fe-1,re,Re+1),ne+=Fe,Re+=Fe,++Se);for(var Le=1<<Ke.b,Ye=Le-1,ze=tt(Fe,Ke.b),nt=Ke.K,Ke=Ke.w+(Se>>Ke.b)*ze;Se<ie;){var Ht=nt,Kt=Ke,Bt=1;for(Rd(fe,ne,re,Re-Fe,1,re,Re);Bt<Fe;){var Dt=(Bt&~Ye)+Le;Dt>Fe&&(Dt=Fe),(0,Bn[Ht[Kt++]>>8&15])(fe,ne+ +Bt,re,Re+Bt-Fe,Dt-Bt,re,Re+Bt),Bt=Dt}ne+=Fe,Re+=Fe,++Se&Ye||(Ke+=ze)}pe!=M.nc&&i(L,R-Pe,L,R+(pe-te-1)*Pe,Pe);break;case 1:for(Pe=fe,ie=ne,Fe=(fe=M.Ea)-(Re=fe&~(re=(ne=1<<M.b)-1)),Se=tt(fe,M.b),Le=M.K,M=M.w+(te>>M.b)*Se;te<pe;){for(Ye=Le,ze=M,nt=new Ge,Ke=ie+Re,Ht=ie+fe;ie<Ke;)Ut(Ye[ze++],nt),Br(nt,Pe,ie,ne,L,R),ie+=ne,R+=ne;ie<Ht&&(Ut(Ye[ze++],nt),Br(nt,Pe,ie,Fe,L,R),ie+=Fe,R+=Fe),++te&re||(M+=Se)}break;case 3:if(fe==L&&ne==R&&0<M.b){for(ie=L,fe=Pe=R+(pe-te)*Pe-(Re=(pe-te)*tt(M.Ea,M.b)),ne=L,re=R,Se=[],Re=(Fe=Re)-1;0<=Re;--Re)Se[Re]=ne[re+Re];for(Re=Fe-1;0<=Re;--Re)ie[fe+Re]=Se[Re];na(M,te,pe,L,Pe,L,R)}else na(M,te,pe,fe,ne,L,R)}R=y,L=m}L!=m&&i(y,m,R,L,T)}function Ro(h,v){var m=h.V,y=h.Ba+h.c*h.C,I=v-h.C;if(e(v<=h.l.o),e(16>=I),0<I){var T=h.l,O=h.Ta,R=h.Ua,L=T.width;if(xr(h,I,m,y),I=R=[R],e((m=h.C)<(y=v)),e(T.v<T.va),y>T.o&&(y=T.o),m<T.j){var M=T.j-m;m=T.j,I[0]+=M*L}if(m>=y?m=0:(I[0]+=4*T.v,T.ka=m-T.j,T.U=T.va-T.v,T.T=y-m,m=1),m){if(R=R[0],11>(m=h.ca).S){var te=m.f.RGBA,pe=(y=m.S,I=T.U,T=T.T,M=te.eb,te.A),fe=T;for(te=te.fb+h.Ma*te.A;0<fe--;){var ne=O,Pe=R,Se=I,ie=M,re=te;switch(y){case oc:sa(ne,Pe,Se,ie,re);break;case lc:kn(ne,Pe,Se,ie,re);break;case Eg:kn(ne,Pe,Se,ie,re),Zn(ie,re,0,Se,1,0);break;case n1:Xo(ne,Pe,Se,ie,re);break;case dc:oi(ne,Pe,Se,ie,re,1);break;case Ig:oi(ne,Pe,Se,ie,re,1),Zn(ie,re,0,Se,1,0);break;case uc:oi(ne,Pe,Se,ie,re,0);break;case hc:oi(ne,Pe,Se,ie,re,0),Zn(ie,re,1,Se,1,0);break;case Sg:Va(ne,Pe,Se,ie,re);break;case Ag:Va(ne,Pe,Se,ie,re),el(ie,re,Se,1,0);break;case s1:sn(ne,Pe,Se,ie,re);break;default:e(0)}R+=L,te+=pe}h.Ma+=T}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=m.height)}}h.C=v,e(h.C<=h.i)}function tn(h){var v;if(0<h.ua)return 0;for(v=0;v<h.Wb;++v){var m=h.Ya[v].G,y=h.Ya[v].H;if(0<m[1][y[1]+0].g||0<m[2][y[2]+0].g||0<m[3][y[3]+0].g)return 0}return 1}function Qr(h,v,m,y,I,T){if(0!=h.Z){var O=h.qd,R=h.rd;for(e(null!=Wn[h.Z]);v<m;++v)Wn[h.Z](O,R,y,I,y,I,T),O=y,R=I,I+=T;h.qd=O,h.rd=R}}function ea(h,v){var m=h.l.ma,y=0==m.Z||1==m.Z?h.l.j:h.C;if(y=h.C<y?y:h.C,e(v<=h.l.o),v>y){var I=h.l.width,T=m.ca,O=m.tb+I*y,R=h.V,L=h.Ba+h.c*y,M=h.gc;e(1==h.ab),e(3==M[0].hc),bg(M[0],y,v,R,L,T,O),Qr(m,y,v,T,O,I)}h.C=h.Ma=v}function ta(h,v,m,y,I,T,O){var R=h.$/y,L=h.$%y,M=h.m,te=h.s,pe=m+h.$,fe=pe;I=m+y*I;var ne=m+y*T,Pe=280+te.ua,Se=h.Pb?R:16777216,ie=0<te.ua?te.Wa:null,re=te.wc,Re=pe<ne?Ei(te,L,R):null;e(h.C<T),e(ne<=I);var Fe=!1;e:for(;;){for(;Fe||pe<ne;){var Le=0;if(R>=Se){var Ye=pe-m;e((Se=h).Pb),Se.wd=Se.m,Se.xd=Ye,0<Se.s.ua&&Oe(Se.s.Wa,Se.s.vb),Se=R+NW}if(L&re||(Re=Ei(te,L,R)),e(null!=Re),Re.Qb&&(v[pe]=Re.qb,Fe=!0),!Fe)if(oe(M),Re.jc){Ye=v;var ze=pe,nt=Re.pd[H(Le=M)&vr-1];e(Re.jc),256>nt.g?(ee(Le,Le.u+nt.g),Ye[ze]=nt.value,Le=0):(ee(Le,Le.u+nt.g-256),e(256<=nt.value),Le=nt.value),0==Le&&(Fe=!0)}else Le=pr(Re.G[0],Re.H[0],M);if(M.h)break;if(Fe||256>Le){if(!Fe)if(Re.nd)v[pe]=(Re.qb|Le<<8)>>>0;else{if(oe(M),Fe=pr(Re.G[1],Re.H[1],M),oe(M),Ye=pr(Re.G[2],Re.H[2],M),ze=pr(Re.G[3],Re.H[3],M),M.h)break;v[pe]=(ze<<24|Fe<<16|Le<<8|Ye)>>>0}if(Fe=!1,++pe,++L>=y&&(L=0,++R,null!=O&&R<=T&&!(R%16)&&O(h,R),null!=ie))for(;fe<pe;)Le=v[fe++],ie.X[(506832829*Le&4294967295)>>>ie.Mb]=Le}else if(280>Le){if(Le=Jr(Le-256,M),Ye=pr(Re.G[4],Re.H[4],M),oe(M),Ye=Ra(y,Ye=Jr(Ye,M)),M.h)break;if(pe-m<Ye||I-pe<Le)break e;for(ze=0;ze<Le;++ze)v[pe+ze]=v[pe+ze-Ye];for(pe+=Le,L+=Le;L>=y;)L-=y,++R,null!=O&&R<=T&&!(R%16)&&O(h,R);if(e(pe<=I),L&re&&(Re=Ei(te,L,R)),null!=ie)for(;fe<pe;)Le=v[fe++],ie.X[(506832829*Le&4294967295)>>>ie.Mb]=Le}else{if(!(Le<Pe))break e;for(Fe=Le-280,e(null!=ie);fe<pe;)Le=v[fe++],ie.X[(506832829*Le&4294967295)>>>ie.Mb]=Le;Le=pe,e(!(Fe>>>(Ye=ie).Xa)),v[Le]=Ye.X[Fe],Fe=!0}Fe||e(M.h==$(M))}if(h.Pb&&M.h&&pe<I)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Oe(h.s.vb,h.s.Wa);else{if(M.h)break e;O?.(h,R>T?T:R),h.a=0,h.$=pe-m}return 1}return h.a=3,0}function La(h){e(null!=h),h.vc=null,h.yc=null,h.Ya=null;var v=h.Wa;null!=v&&(v.X=null),h.vb=null,e(null!=h)}function Nr(){var h=new Cg;return null==h?null:(h.a=0,h.xb=d1,Ta("Predictor","VP8LPredictors"),Ta("Predictor","VP8LPredictors_C"),Ta("PredictorAdd","VP8LPredictorsAdd"),Ta("PredictorAdd","VP8LPredictorsAdd_C"),ac=Nt,Br=ct,sa=Ue,kn=Qi,Va=Mt,sn=Yr,Xo=Qt,k.VP8LMapColor32b=Ld,k.VP8LMapColor8b=yg,h)}function Pa(h,v,m,y,I){var T=1,O=[h],R=[v],L=y.m,M=y.s,te=null,pe=0;e:for(;;){if(m)for(;T&&Ie(L,1);){var fe=O,ne=R,Pe=y,Se=1,ie=Pe.m,re=Pe.gc[Pe.ab],Re=Ie(ie,2);if(Pe.Oc&1<<Re)T=0;else{switch(Pe.Oc|=1<<Re,re.hc=Re,re.Ea=fe[0],re.nc=ne[0],re.K=[null],++Pe.ab,e(4>=Pe.ab),Re){case 0:case 1:re.b=Ie(ie,3)+2,Se=Pa(tt(re.Ea,re.b),tt(re.nc,re.b),0,Pe,re.K),re.K=re.K[0];break;case 3:var Fe,Le=Ie(ie,8)+1,Ye=16<Le?0:4<Le?1:2<Le?2:3;if(fe[0]=tt(re.Ea,Ye),re.b=Ye,Fe=Se=Pa(Le,1,0,Pe,re.K)){var ze,nt=Le,Ke=re,Ht=1<<(8>>Ke.b),Kt=n(Ht);if(null==Kt)Fe=0;else{var Bt=Ke.K[0],Dt=Ke.w;for(Kt[0]=Ke.K[0][0],ze=1;ze<1*nt;++ze)Kt[ze]=Ne(Bt[Dt+ze],Kt[ze-1]);for(;ze<4*Ht;++ze)Kt[ze]=0;Ke.K[0]=null,Ke.K[0]=Kt,Fe=1}}Se=Fe;break;case 2:break;default:e(0)}T=Se}}if(O=O[0],R=R[0],T&&Ie(L,1)&&!(T=1<=(pe=Ie(L,4))&&11>=pe)){y.a=3;break e}var ei;if(ei=T)t:{var jt,bt,Ai,_r=y,Ti=O,mr=R,$t=pe,Ir=m,Ar=_r.m,Hi=_r.s,$i=[null],ar=1,Zr=0,Na=VW[$t];i:for(;;){if(Ir&&Ie(Ar,1)){var Zi=Ie(Ar,3)+2,hn=tt(Ti,Zi),Bs=tt(mr,Zi),tl=hn*Bs;if(!Pa(hn,Bs,0,_r,$i))break i;for($i=$i[0],Hi.xc=Zi,jt=0;jt<tl;++jt){var Kn=$i[jt]>>8&65535;$i[jt]=Kn,Kn>=ar&&(ar=Kn+1)}}if(Ar.h)break i;for(bt=0;5>bt;++bt){var _i=o1[bt];!bt&&0<$t&&(_i+=1<<$t),Zr<_i&&(Zr=_i)}var Rg=s(ar*Na,P),m1=ar,C1=s(m1,K);if(null==C1)var vc=null;else e(65536>=m1),vc=C1;var Bd=n(Zr);if(null==vc||null==Bd||null==Rg){_r.a=1;break i}var gc=Rg;for(jt=Ai=0;jt<ar;++jt){var ua=vc[jt],il=ua.G,rl=ua.H,w1=0,_c=1,b1=0;for(bt=0;5>bt;++bt){_i=o1[bt],il[bt]=gc,rl[bt]=Ai,!bt&&0<$t&&(_i+=1<<$t);a:{var mc,Lg=_i,Cc=_r,kd=Bd,i7=gc,r7=Ai,Pg=0,$n=Cc.m,a7=Ie($n,1);if(a(kd,0,0,Lg),a7){var n7=Ie($n,1)+1,s7=Ie($n,1),y1=Ie($n,0==s7?1:8);kd[y1]=1,2==n7&&(kd[y1=Ie($n,8)]=1);var wc=1}else{var x1=n(19),S1=Ie($n,4)+4;if(19<S1){Cc.a=3;var bc=0;break a}for(mc=0;mc<S1;++mc)x1[PW[mc]]=Ie($n,3);var Fg=void 0,Md=void 0,E1=Cc,o7=x1,yc=Lg,I1=kd,Vg=0,Gn=E1.m,A1=8,T1=s(128,P);r:for(;F(T1,0,7,o7,19);){if(Ie(Gn,1)){var l7=2+2*Ie(Gn,3);if((Fg=2+Ie(Gn,l7))>yc)break r}else Fg=yc;for(Md=0;Md<yc&&Fg--;){oe(Gn);var D1=T1[0+(127&H(Gn))];ee(Gn,Gn.u+D1.g);var al=D1.value;if(16>al)I1[Md++]=al,0!=al&&(A1=al);else{var d7=16==al,O1=al-16,u7=RW[O1],R1=Ie(Gn,OW[O1])+u7;if(Md+R1>yc)break r;for(var h7=d7?A1:0;0<R1--;)I1[Md++]=h7}}Vg=1;break r}Vg||(E1.a=3),wc=Vg}(wc=wc&&!$n.h)&&(Pg=F(i7,r7,8,kd,Lg)),wc&&0!=Pg?bc=Pg:(Cc.a=3,bc=0)}if(0==bc)break i;if(_c&&1==LW[bt]&&(_c=0==gc[Ai].g),w1+=gc[Ai].g,Ai+=bc,3>=bt){var Hd,Ng=Bd[0];for(Hd=1;Hd<_i;++Hd)Bd[Hd]>Ng&&(Ng=Bd[Hd]);b1+=Ng}}if(ua.nd=_c,ua.Qb=0,_c&&(ua.qb=(il[3][rl[3]+0].value<<24|il[1][rl[1]+0].value<<16|il[2][rl[2]+0].value)>>>0,0==w1&&256>il[0][rl[0]+0].value&&(ua.Qb=1,ua.qb+=il[0][rl[0]+0].value<<8)),ua.jc=!ua.Qb&&6>b1,ua.jc){var xc,cn=ua;for(xc=0;xc<vr;++xc){var Un=xc,jn=cn.pd[Un],Sc=cn.G[0][cn.H[0]+Un];256<=Sc.value?(jn.g=Sc.g+256,jn.value=Sc.value):(jn.g=0,jn.value=0,Un>>=Ri(Sc,8,jn),Un>>=Ri(cn.G[1][cn.H[1]+Un],16,jn),Un>>=Ri(cn.G[2][cn.H[2]+Un],0,jn),Ri(cn.G[3][cn.H[3]+Un],24,jn))}}}Hi.vc=$i,Hi.Wb=ar,Hi.Ya=vc,Hi.yc=Rg,ei=1;break t}ei=0}if(!(T=ei)){y.a=3;break e}if(0<pe){if(M.ua=1<<pe,!ut(M.Wa,pe)){y.a=1,T=0;break e}}else M.ua=0;var Bg=y,L1=O,c7=R,kg=Bg.s,Mg=kg.xc;if(Bg.c=L1,Bg.i=c7,kg.md=tt(L1,Mg),kg.wc=0==Mg?-1:(1<<Mg)-1,m){y.xb=WW;break e}if(null==(te=n(O*R))){y.a=1,T=0;break e}T=(T=ta(y,te,0,O,R,R,null))&&!L.h;break e}return T?(null!=I?I[0]=te:(e(null==te),e(m)),y.$=0,m||La(M)):La(M),T}function Os(h,v){var m=h.c*h.i,y=m+v+16*v;return e(h.c<=v),h.V=n(y),null==h.V?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+m+v,1)}function Lo(h,v){var m=h.C,y=v-m,I=h.V,T=h.Ba+h.c*m;for(e(v<=h.l.o);0<y;){var O=16<y?16:y,R=h.l.ma,L=h.l.width,M=L*O,te=R.ca,pe=R.tb+L*m,fe=h.Ta,ne=h.Ua;xr(h,O,I,T),QE(fe,ne,te,pe,M),Qr(R,m,m+O,te,pe,L),y-=O,I+=O*h.c,m+=O}e(m==v),h.C=h.Ma=v}function Po(){this.ub=this.yd=this.td=this.Rb=0}function Fo(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Vo(){this.Fb=this.Bb=this.Cb=0,this.Zb=n(4),this.Lb=n(4)}function kh(){var h;this.Yb=(function v(m,y,I){for(var T=I[y],O=0;O<T&&(m.push(I.length>y+1?[]:0),!(I.length<y+1));O++)v(m[O],y+1,I)}(h=[],0,[3,11]),h)}function Yv(){this.jb=n(3),this.Wc=o([4,8],kh),this.Xc=o([4,17],kh)}function Xv(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new n(4),this.od=new n(4)}function No(){this.ld=this.La=this.dd=this.tc=0}function Mh(){this.Na=this.la=0}function Jv(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function cd(){this.ad=n(384),this.Za=0,this.Ob=n(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Qv(){this.uc=this.M=this.Nb=0,this.wa=Array(new No),this.Y=0,this.ya=Array(new cd),this.aa=0,this.l=new Bo}function Hh(){this.y=n(16),this.f=n(8),this.ea=n(8)}function eg(){this.cb=this.a=0,this.sc="",this.m=new Me,this.Od=new Po,this.Kc=new Fo,this.ed=new Xv,this.Qa=new Vo,this.Ic=this.$c=this.Aa=0,this.D=new Qv,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,Me),this.ia=0,this.pb=s(4,Jv),this.Pa=new Yv,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Hh),this.Hd=0,this.rb=Array(new Mh),this.sb=0,this.wa=Array(new No),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new cd),this.L=this.aa=0,this.gd=o([4,2],No),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Bo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function tg(){var h=new eg;return null!=h&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Vd||(Vd=Wh)),h}function xi(h,v,m){return 0==h.a&&(h.a=v,h.sc=m,h.cb=0),0}function Zh(h,v,m){return 3<=m&&157==h[v+0]&&1==h[v+1]&&42==h[v+2]}function zh(h,v){if(null==h)return 0;if(h.a=0,h.sc="OK",null==v)return xi(h,2,"null VP8Io passed to VP8GetHeaders()");var m=v.data,y=v.w,I=v.ha;if(4>I)return xi(h,7,"Truncated header.");var T=m[y+0]|m[y+1]<<8|m[y+2]<<16,O=h.Od;if(O.Rb=!(1&T),O.td=T>>1&7,O.yd=T>>4&1,O.ub=T>>5,3<O.td)return xi(h,3,"Incorrect keyframe parameters.");if(!O.yd)return xi(h,4,"Frame not displayable.");y+=3,I-=3;var R=h.Kc;if(O.Rb){if(7>I)return xi(h,7,"cannot parse picture header");if(!Zh(m,y,I))return xi(h,3,"Bad code word");R.c=16383&(m[y+4]<<8|m[y+3]),R.Td=m[y+4]>>6,R.i=16383&(m[y+6]<<8|m[y+5]),R.Ud=m[y+6]>>6,y+=7,I-=7,h.za=R.c+15>>4,h.Ub=R.i+15>>4,v.width=R.c,v.height=R.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,a((T=h.Pa).jb,0,255,T.jb.length),e(null!=(T=h.Qa)),T.Cb=0,T.Bb=0,T.Fb=1,a(T.Zb,0,0,T.Zb.length),a(T.Lb,0,0,T.Lb)}if(O.ub>I)return xi(h,7,"bad partition length");ge(T=h.m,m,y,O.ub),y+=O.ub,I-=O.ub,O.Rb&&(R.Ld=me(T),R.Kd=me(T)),R=h.Qa;var L,M=h.Pa;if(e(null!=T),e(null!=R),R.Cb=me(T),R.Cb){if(R.Bb=me(T),me(T)){for(R.Fb=me(T),L=0;4>L;++L)R.Zb[L]=me(T)?xe(T,7):0;for(L=0;4>L;++L)R.Lb[L]=me(T)?xe(T,6):0}if(R.Bb)for(L=0;3>L;++L)M.jb[L]=me(T)?ue(T,8):255}else R.Bb=0;if(T.Ka)return xi(h,3,"cannot parse segment header");if((R=h.ed).zd=me(T),R.Tb=ue(T,6),R.wb=ue(T,3),R.Pc=me(T),R.Pc&&me(T)){for(M=0;4>M;++M)me(T)&&(R.vd[M]=xe(T,6));for(M=0;4>M;++M)me(T)&&(R.od[M]=xe(T,6))}if(h.L=0==R.Tb?0:R.zd?1:2,T.Ka)return xi(h,3,"cannot parse filter header");var te=I;if(I=L=y,y=L+te,R=te,h.Xb=(1<<ue(h.m,2))-1,te<3*(M=h.Xb))m=7;else{for(L+=3*M,R-=3*M,te=0;te<M;++te){var pe=m[I+0]|m[I+1]<<8|m[I+2]<<16;pe>R&&(pe=R),ge(h.Jc[+te],m,L,pe),L+=pe,R-=pe,I+=3}ge(h.Jc[+M],m,L,R),m=L<y?0:5}if(0!=m)return xi(h,m,"cannot parse partitions");for(m=ue(L=h.m,7),I=me(L)?xe(L,4):0,y=me(L)?xe(L,4):0,R=me(L)?xe(L,4):0,M=me(L)?xe(L,4):0,L=me(L)?xe(L,4):0,te=h.Qa,pe=0;4>pe;++pe){if(te.Cb){var fe=te.Zb[pe];te.Fb||(fe+=m)}else{if(0<pe){h.pb[pe]=h.pb[0];continue}fe=m}var ne=h.pb[pe];ne.Sc[0]=Tg[Sr(fe+I,127)],ne.Sc[1]=Dg[Sr(fe+0,127)],ne.Eb[0]=2*Tg[Sr(fe+y,127)],ne.Eb[1]=101581*Dg[Sr(fe+R,127)]>>16,8>ne.Eb[1]&&(ne.Eb[1]=8),ne.Qc[0]=Tg[Sr(fe+M,117)],ne.Qc[1]=Dg[Sr(fe+L,127)],ne.lc=fe+L}if(!O.Rb)return xi(h,4,"Not a key frame.");for(me(T),O=h.Pa,m=0;4>m;++m){for(I=0;8>I;++I)for(y=0;3>y;++y)for(R=0;11>R;++R)M=be(T,ZW[m][I][y][R])?ue(T,8):MW[m][I][y][R],O.Wc[m][I].Yb[y][R]=M;for(I=0;17>I;++I)O.Xc[m][I]=O.Wc[m][zW[I]]}return h.kc=me(T),h.kc&&(h.Bd=ue(T,8)),h.cb=1}function Wh(h,v,m,y,I,T,O){var R=v[I].Yb[m];for(m=0;16>I;++I){if(!be(h,R[m+0]))return I;for(;!be(h,R[m+1]);)if(R=v[++I].Yb[0],m=0,16==I)return 16;var L=v[I+1].Yb;if(be(h,R[m+2])){var M=h,te=0;if(be(M,(fe=R)[(pe=m)+3]))if(be(M,fe[pe+6])){for(R=0,pe=2*(te=be(M,fe[pe+8]))+(fe=be(M,fe[pe+9+te])),te=0,fe=BW[pe];fe[R];++R)te+=te+be(M,fe[R]);te+=3+(8<<pe)}else be(M,fe[pe+7])?(te=7+2*be(M,165),te+=be(M,145)):te=5+be(M,159);else te=be(M,fe[pe+4])?3+be(M,fe[pe+5]):2;R=L[2]}else te=1,R=L[1];L=O+kW[I],0>(M=h).b&&_e(M);var pe,fe=M.b,ne=(pe=M.Ca>>1)-(M.I>>fe)>>31;--M.b,M.Ca+=ne,M.Ca|=1,M.I-=(pe+1&ne)<<fe,T[L]=((te^ne)-ne)*y[(0<I)+0]}return 16}function pd(h){var v=h.rb[h.sb-1];v.la=0,v.Na=0,a(h.zc,0,0,h.zc.length),h.ja=0}function ia(h,v,m,y,I){h[v+m+32*y]=-256&(I=h[v+m+32*y]+(I>>3))?0>I?0:255:I}function ko(h,v,m,y,I,T){ia(h,v,0,m,y+I),ia(h,v,1,m,y+T),ia(h,v,2,m,y-T),ia(h,v,3,m,y-I)}function fr(h){return(20091*h>>16)+h}function fd(h,v,m,y){var I,T=0,O=n(16);for(I=0;4>I;++I){var R=h[v+0]+h[v+8],L=h[v+0]-h[v+8],M=(35468*h[v+4]>>16)-fr(h[v+12]),te=fr(h[v+4])+(35468*h[v+12]>>16);O[T+0]=R+te,O[T+1]=L+M,O[T+2]=L-M,O[T+3]=R-te,T+=4,v++}for(I=T=0;4>I;++I)R=(h=O[T+0]+4)+O[T+8],L=h-O[T+8],M=(35468*O[T+4]>>16)-fr(O[T+12]),ia(m,y,0,0,R+(te=fr(O[T+4])+(35468*O[T+12]>>16))),ia(m,y,1,0,L+M),ia(m,y,2,0,L-M),ia(m,y,3,0,R-te),T++,y+=32}function Kh(h,v,m,y){var I=h[v+0]+4,T=35468*h[v+4]>>16,O=fr(h[v+4]),R=35468*h[v+1]>>16;ko(m,y,0,I+O,h=fr(h[v+1]),R),ko(m,y,1,I+T,h,R),ko(m,y,2,I-T,h,R),ko(m,y,3,I-O,h,R)}function rg(h,v,m,y,I){fd(h,v,m,y),I&&fd(h,v+16,m,y+4)}function $h(h,v,m,y){Jo(h,v+0,m,y,1),Jo(h,v+32,m,y+128,1)}function ag(h,v,m,y){var I;for(h=h[v+0]+4,I=0;4>I;++I)for(v=0;4>v;++v)ia(m,y,v,I,h)}function Gh(h,v,m,y){h[v+0]&&la(h,v+0,m,y),h[v+16]&&la(h,v+16,m,y+4),h[v+32]&&la(h,v+32,m,y+128),h[v+48]&&la(h,v+48,m,y+128+4)}function ng(h,v,m,y){var I,T=n(16);for(I=0;4>I;++I){var O=h[v+0+I]+h[v+12+I],R=h[v+4+I]+h[v+8+I],L=h[v+4+I]-h[v+8+I],M=h[v+0+I]-h[v+12+I];T[0+I]=O+R,T[8+I]=O-R,T[4+I]=M+L,T[12+I]=M-L}for(I=0;4>I;++I)O=(h=T[0+4*I]+3)+T[3+4*I],L=T[1+4*I]-T[2+4*I],M=h-T[3+4*I],m[y+0]=O+(R=T[1+4*I]+T[2+4*I])>>3,m[y+16]=M+L>>3,m[y+32]=O-R>>3,m[y+48]=M-L>>3,y+=64}function vd(h,v,m){var y,I=v-32,T=Er,O=255-h[I-1];for(y=0;y<m;++y){var R,L=T,M=O+h[v-1];for(R=0;R<m;++R)h[v+R]=L[M+h[I+R]];v+=32}}function sg(h,v){vd(h,v,4)}function og(h,v){vd(h,v,8)}function lg(h,v){vd(h,v,16)}function rn(h,v){var m;for(m=0;16>m;++m)i(h,v+32*m,h,v-32,16)}function Mo(h,v){var m;for(m=16;0<m;--m)a(h,v,h[v-1],16),v+=32}function Ho(h,v,m){var y;for(y=0;16>y;++y)a(v,m+32*y,h,16)}function Uh(h,v){var m,y=16;for(m=0;16>m;++m)y+=h[v-1+32*m]+h[v+m-32];Ho(y>>5,h,v)}function er(h,v){var m,y=8;for(m=0;16>m;++m)y+=h[v-1+32*m];Ho(y>>4,h,v)}function dg(h,v){var m,y=8;for(m=0;16>m;++m)y+=h[v+m-32];Ho(y>>4,h,v)}function jh(h,v){Ho(128,h,v)}function vt(h,v,m){return h+2*v+m+2>>2}function ug(h,v){var m,y=v-32;for(y=new Uint8Array([vt(h[y-1],h[y+0],h[y+1]),vt(h[y+0],h[y+1],h[y+2]),vt(h[y+1],h[y+2],h[y+3]),vt(h[y+2],h[y+3],h[y+4])]),m=0;4>m;++m)i(h,v+32*m,y,0,y.length)}function hg(h,v){var m=h[v-1],y=h[v-1+32],I=h[v-1+64],T=h[v-1+96];ke(h,v+0,16843009*vt(h[v-1-32],m,y)),ke(h,v+32,16843009*vt(m,y,I)),ke(h,v+64,16843009*vt(y,I,T)),ke(h,v+96,16843009*vt(I,T,T))}function Fa(h,v){var m,y=4;for(m=0;4>m;++m)y+=h[v+m-32]+h[v-1+32*m];for(y>>=3,m=0;4>m;++m)a(h,v+32*m,y,4)}function qh(h,v){var m=h[v-1+0],y=h[v-1+32],I=h[v-1+64],T=h[v-1-32],O=h[v+0-32],R=h[v+1-32],L=h[v+2-32],M=h[v+3-32];h[v+0+96]=vt(y,I,h[v-1+96]),h[v+1+96]=h[v+0+64]=vt(m,y,I),h[v+2+96]=h[v+1+64]=h[v+0+32]=vt(T,m,y),h[v+3+96]=h[v+2+64]=h[v+1+32]=h[v+0+0]=vt(O,T,m),h[v+3+64]=h[v+2+32]=h[v+1+0]=vt(R,O,T),h[v+3+32]=h[v+2+0]=vt(L,R,O),h[v+3+0]=vt(M,L,R)}function Yh(h,v){var m=h[v+1-32],y=h[v+2-32],I=h[v+3-32],T=h[v+4-32],O=h[v+5-32],R=h[v+6-32],L=h[v+7-32];h[v+0+0]=vt(h[v+0-32],m,y),h[v+1+0]=h[v+0+32]=vt(m,y,I),h[v+2+0]=h[v+1+32]=h[v+0+64]=vt(y,I,T),h[v+3+0]=h[v+2+32]=h[v+1+64]=h[v+0+96]=vt(I,T,O),h[v+3+32]=h[v+2+64]=h[v+1+96]=vt(T,O,R),h[v+3+64]=h[v+2+96]=vt(O,R,L),h[v+3+96]=vt(R,L,L)}function Zo(h,v){var m=h[v-1+0],y=h[v-1+32],I=h[v-1+64],T=h[v-1-32],O=h[v+0-32],R=h[v+1-32],L=h[v+2-32],M=h[v+3-32];h[v+0+0]=h[v+1+64]=T+O+1>>1,h[v+1+0]=h[v+2+64]=O+R+1>>1,h[v+2+0]=h[v+3+64]=R+L+1>>1,h[v+3+0]=L+M+1>>1,h[v+0+96]=vt(I,y,m),h[v+0+64]=vt(y,m,T),h[v+0+32]=h[v+1+96]=vt(m,T,O),h[v+1+32]=h[v+2+96]=vt(T,O,R),h[v+2+32]=h[v+3+96]=vt(O,R,L),h[v+3+32]=vt(R,L,M)}function gd(h,v){var m=h[v+0-32],y=h[v+1-32],I=h[v+2-32],T=h[v+3-32],O=h[v+4-32],R=h[v+5-32],L=h[v+6-32],M=h[v+7-32];h[v+0+0]=m+y+1>>1,h[v+1+0]=h[v+0+64]=y+I+1>>1,h[v+2+0]=h[v+1+64]=I+T+1>>1,h[v+3+0]=h[v+2+64]=T+O+1>>1,h[v+0+32]=vt(m,y,I),h[v+1+32]=h[v+0+96]=vt(y,I,T),h[v+2+32]=h[v+1+96]=vt(I,T,O),h[v+3+32]=h[v+2+96]=vt(T,O,R),h[v+3+64]=vt(O,R,L),h[v+3+96]=vt(R,L,M)}function cg(h,v){var m=h[v-1+0],y=h[v-1+32],I=h[v-1+64],T=h[v-1+96];h[v+0+0]=m+y+1>>1,h[v+2+0]=h[v+0+32]=y+I+1>>1,h[v+2+32]=h[v+0+64]=I+T+1>>1,h[v+1+0]=vt(m,y,I),h[v+3+0]=h[v+1+32]=vt(y,I,T),h[v+3+32]=h[v+1+64]=vt(I,T,T),h[v+3+64]=h[v+2+64]=h[v+0+96]=h[v+1+96]=h[v+2+96]=h[v+3+96]=T}function pg(h,v){var m=h[v-1+0],y=h[v-1+32],I=h[v-1+64],T=h[v-1+96],O=h[v-1-32],R=h[v+0-32],L=h[v+1-32],M=h[v+2-32];h[v+0+0]=h[v+2+32]=m+O+1>>1,h[v+0+32]=h[v+2+64]=y+m+1>>1,h[v+0+64]=h[v+2+96]=I+y+1>>1,h[v+0+96]=T+I+1>>1,h[v+3+0]=vt(R,L,M),h[v+2+0]=vt(O,R,L),h[v+1+0]=h[v+3+32]=vt(m,O,R),h[v+1+32]=h[v+3+64]=vt(y,m,O),h[v+1+64]=h[v+3+96]=vt(I,y,m),h[v+1+96]=vt(T,I,y)}function fg(h,v){var m;for(m=0;8>m;++m)i(h,v+32*m,h,v-32,8)}function _d(h,v){var m;for(m=0;8>m;++m)a(h,v,h[v-1],8),v+=32}function Rs(h,v,m){var y;for(y=0;8>y;++y)a(v,m+32*y,h,8)}function Pn(h,v){var m,y=8;for(m=0;8>m;++m)y+=h[v+m-32]+h[v-1+32*m];Rs(y>>4,h,v)}function vg(h,v){var m,y=4;for(m=0;8>m;++m)y+=h[v+m-32];Rs(y>>3,h,v)}function Ls(h,v){var m,y=4;for(m=0;8>m;++m)y+=h[v-1+32*m];Rs(y>>3,h,v)}function md(h,v){Rs(128,h,v)}function zo(h,v,m){var y=h[v-m],I=h[v+0],T=3*(I-y)+xg[1020+h[v-2*m]-h[v+m]],O=sc[112+(T+4>>3)];h[v-m]=Er[255+y+sc[112+(T+3>>3)]],h[v+0]=Er[255+I-O]}function Xh(h,v,m,y){return Mr[255+h[v-2*m]-h[v-m]]>y||Mr[255+h[v+m]-h[v+0]]>y}function Jh(h,v,m,y){return 4*Mr[255+h[v-m]-h[v+0]]+Mr[255+h[v-2*m]-h[v+m]]<=y}function Qh(h,v,m,y,I){var T=h[v-3*m],O=h[v-2*m],R=h[v-m],L=h[v+0],M=h[v+m],te=h[v+2*m];return 4*Mr[255+R-L]+Mr[255+O-M]>y?0:Mr[255+h[v-4*m]-T]<=I&&Mr[255+T-O]<=I&&Mr[255+O-R]<=I&&Mr[255+h[v+3*m]-te]<=I&&Mr[255+te-M]<=I&&Mr[255+M-L]<=I}function ec(h,v,m,y){var I=2*y+1;for(y=0;16>y;++y)Jh(h,v+y,m,I)&&zo(h,v+y,m)}function an(h,v,m,y){var I=2*y+1;for(y=0;16>y;++y)Jh(h,v+y*m,1,I)&&zo(h,v+y*m,1)}function Fn(h,v,m,y){var I;for(I=3;0<I;--I)ec(h,v+=4*m,m,y)}function gg(h,v,m,y){var I;for(I=3;0<I;--I)an(h,v+=4,m,y)}function Vn(h,v,m,y,I,T,O,R){for(T=2*T+1;0<I--;){if(Qh(h,v,m,T,O))if(Xh(h,v,m,R))zo(h,v,m);else{var L=h,M=v,te=m,pe=L[M-2*te],fe=L[M-te],ne=L[M+0],Pe=L[M+te],Se=L[M+2*te],ie=27*(Re=xg[1020+3*(ne-fe)+xg[1020+pe-Pe]])+63>>7,re=18*Re+63>>7,Re=9*Re+63>>7;L[M-3*te]=Er[255+L[M-3*te]+Re],L[M-2*te]=Er[255+pe+re],L[M-te]=Er[255+fe+ie],L[M+0]=Er[255+ne-ie],L[M+te]=Er[255+Pe-re],L[M+2*te]=Er[255+Se-Re]}v+=y}}function ra(h,v,m,y,I,T,O,R){for(T=2*T+1;0<I--;){if(Qh(h,v,m,T,O))if(Xh(h,v,m,R))zo(h,v,m);else{var L=h,M=v,te=m,pe=L[M-te],fe=L[M+0],ne=L[M+te],Pe=sc[112+(4+(Se=3*(fe-pe))>>3)],Se=sc[112+(Se+3>>3)],ie=Pe+1>>1;L[M-2*te]=Er[255+L[M-2*te]+ie],L[M-te]=Er[255+pe+Se],L[M+0]=Er[255+fe-Pe],L[M+te]=Er[255+ne-ie]}v+=y}}function Cd(h,v,m,y,I,T){Vn(h,v,m,1,16,y,I,T)}function Ps(h,v,m,y,I,T){Vn(h,v,1,m,16,y,I,T)}function _g(h,v,m,y,I,T){var O;for(O=3;0<O;--O)ra(h,v+=4*m,m,1,16,y,I,T)}function Wo(h,v,m,y,I,T){var O;for(O=3;0<O;--O)ra(h,v+=4,1,m,16,y,I,T)}function mg(h,v,m,y,I,T,O,R){Vn(h,v,I,1,8,T,O,R),Vn(m,y,I,1,8,T,O,R)}function wd(h,v,m,y,I,T,O,R){Vn(h,v,1,I,8,T,O,R),Vn(m,y,1,I,8,T,O,R)}function bd(h,v,m,y,I,T,O,R){ra(h,v+4*I,I,1,8,T,O,R),ra(m,y+4*I,I,1,8,T,O,R)}function tc(h,v,m,y,I,T,O,R){ra(h,v+4,1,I,8,T,O,R),ra(m,y+4,1,I,8,T,O,R)}function Ko(){this.ba=new Xr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vi,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function yd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function xd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ic(){this.ua=0,this.Wa=new G,this.vb=new G,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new P}function Cg(){this.xb=this.a=0,this.l=new Bo,this.ca=new Xr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ic,this.ab=0,this.gc=s(4,xd),this.Oc=0}function $o(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Bo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fs(h,v,m,y,I,T,O){for(h=null==h?0:h[v+0],v=0;v<O;++v)I[T+v]=h+m[y+v]&255,h=I[T+v]}function Sd(h,v,m,y,I,T,O){var R;if(null==h)Fs(null,null,m,y,I,T,O);else for(R=0;R<O;++R)I[T+R]=h[v+R]+m[y+R]&255}function Nn(h,v,m,y,I,T,O){if(null==h)Fs(null,null,m,y,I,T,O);else{var R,L=h[v+0],M=L,te=L;for(R=0;R<O;++R)M=te+(L=h[v+R])-M,te=m[y+R]+(-256&M?0>M?0:255:M)&255,M=L,I[T+R]=te}}function Ed(h,v,m,y){var I=v.width,T=v.o;if(e(null!=h&&null!=v),0>m||0>=y||m+y>T)return null;if(!h.Cc){if(null==h.ga){var O;if(h.ga=new $o,(O=null==h.ga)||(O=v.width*v.o,e(0==h.Gb.length),h.Gb=n(O),h.Uc=0,null==h.Gb?O=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,O=1),O=!O),!O){var R=h.Fa,L=h.P,M=h.qc,te=h.mb,pe=h.nb,fe=L+1,ne=M-1,Pe=(O=h.ga).l;if(e(null!=R&&null!=te&&null!=v),Wn[0]=null,Wn[1]=Fs,Wn[2]=Sd,Wn[3]=Nn,O.ca=te,O.tb=pe,O.c=v.width,O.i=v.height,e(0<O.c&&0<O.i),1>=M)v=0;else if(O.$a=R[L+0]>>0&3,O.Z=R[L+0]>>2&3,O.Lc=R[L+0]>>4&3,L=R[L+0]>>6&3,0>O.$a||1<O.$a||4<=O.Z||1<O.Lc||L)v=0;else if(Pe.put=Da,Pe.ac=Ki,Pe.bc=Oa,Pe.ma=O,Pe.width=v.width,Pe.height=v.height,Pe.Da=v.Da,Pe.v=v.v,Pe.va=v.va,Pe.j=v.j,Pe.o=v.o,O.$a)e:{e(1==O.$a),v=Nr();t:for(;;){if(null==v){v=0;break e}if(e(null!=O),O.mc=v,v.c=O.c,v.i=O.i,v.l=O.l,v.l.ma=O,v.l.width=O.c,v.l.height=O.i,v.a=0,ce(v.m,R,fe,ne),!Pa(O.c,O.i,1,v,null)||(1==v.ab&&3==v.gc[0].hc&&tn(v.s)?(O.ic=1,R=v.c*v.i,v.Ta=null,v.Ua=0,v.V=n(R),v.Ba=0,null==v.V?(v.a=1,v=0):v=1):(O.ic=0,v=Os(v,O.c)),!v))break t;v=1;break e}O.mc=null,v=0}else v=ne>=O.c*O.i;O=!v}if(O)return null;1!=h.ga.Lc?h.Ga=0:y=T-m}e(null!=h.ga),e(m+y<=T);e:{if(v=(R=h.ga).c,T=R.l.o,0==R.$a){if(fe=h.rc,ne=h.Vc,Pe=h.Fa,M=h.mb,te=h.nb+m*v,e((L=h.P+1+m*v)<=h.P+h.qc),0!=R.Z)for(e(null!=Wn[R.Z]),O=0;O<y;++O)Wn[R.Z](fe,ne,Pe,L,M,te,v),fe=M,ne=te,te+=v,L+=v;else for(O=0;O<y;++O)i(M,te,Pe,L,v),fe=M,ne=te,te+=v,L+=v;h.rc=fe,h.Vc=ne}else{if(e(null!=R.mc),v=m+y,e(null!=(O=R.mc)),e(v<=O.i),O.C>=v)v=1;else if(R.ic||de(),R.ic){R=O.V,fe=O.Ba;var Se=O.i,ie=(Pe=1,L=O.$/(ne=O.c),M=O.$%ne,te=O.m,pe=O.s,O.$),re=ne*Se,Re=ne*v,Fe=pe.wc,Le=ie<Re?Ei(pe,M,L):null;e(ie<=re),e(v<=Se),e(tn(pe));t:for(;;){for(;!te.h&&ie<Re;){if(M&Fe||(Le=Ei(pe,M,L)),e(null!=Le),oe(te),256>(Se=pr(Le.G[0],Le.H[0],te)))R[fe+ie]=Se,++ie,++M>=ne&&(M=0,++L<=v&&!(L%16)&&ea(O,L));else{if(!(280>Se)){Pe=0;break t}Se=Jr(Se-256,te);var Ye,ze=pr(Le.G[4],Le.H[4],te);if(oe(te),!(ie>=(ze=Ra(ne,ze=Jr(ze,te)))&&re-ie>=Se)){Pe=0;break t}for(Ye=0;Ye<Se;++Ye)R[fe+ie+Ye]=R[fe+ie+Ye-ze];for(ie+=Se,M+=Se;M>=ne;)M-=ne,++L<=v&&!(L%16)&&ea(O,L);ie<Re&&M&Fe&&(Le=Ei(pe,M,L))}e(te.h==$(te))}ea(O,L>v?v:L);break t}!Pe||te.h&&ie<re?(Pe=0,O.a=te.h?5:3):O.$=ie,v=Pe}else v=ta(O,O.V,O.Ba,O.c,O.i,v,Lo);if(!v){y=0;break e}}m+y>=T&&(h.Cc=1),y=1}if(!y)return null;if(h.Cc&&(null!=(y=h.ga)&&(y.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+m*I}function g(h,v,m,y,I,T){for(;0<I--;){var O,R=h,L=v+(m?1:0),M=h,te=v+(m?0:3);for(O=0;O<y;++O){var pe=M[te+4*O];255!=pe&&(R[L+4*O+0]=R[L+4*O+0]*(pe*=32897)>>23,R[L+4*O+1]=R[L+4*O+1]*pe>>23,R[L+4*O+2]=R[L+4*O+2]*pe>>23)}v+=T}}function A(h,v,m,y,I){for(;0<y--;){var T;for(T=0;T<m;++T){var O=h[v+2*T+0],R=15&(M=h[v+2*T+1]),L=4369*R,M=(240&M|M>>4)*L>>16;h[v+2*T+0]=(240&O|O>>4)*L>>16&240|(15&O|O<<4)*L>>16>>4&15,h[v+2*T+1]=240&M|R}v+=I}}function Z(h,v,m,y,I,T,O,R){var L,M,te=255;for(M=0;M<I;++M){for(L=0;L<y;++L){var pe=h[v+L];T[O+4*L]=pe,te&=pe}v+=m,O+=R}return 255!=te}function J(h,v,m,y,I){var T;for(T=0;T<I;++T)m[y+T]=h[v+T]>>8}function de(){Zn=g,el=A,nc=Z,QE=J}function De(h,v,m){k[h]=function(y,I,T,O,R,L,M,te,pe,fe,ne,Pe,Se,ie,re,Re,Fe){var Le,Ye=Fe-1>>1,ze=R[L+0]|M[te+0]<<16,nt=pe[fe+0]|ne[Pe+0]<<16;e(null!=y);var Ke=3*ze+nt+131074>>2;for(v(y[I+0],255&Ke,Ke>>16,Se,ie),null!=T&&v(T[O+0],255&(Ke=3*nt+ze+131074>>2),Ke>>16,re,Re),Le=1;Le<=Ye;++Le){var Ht=R[L+Le]|M[te+Le]<<16,Kt=pe[fe+Le]|ne[Pe+Le]<<16,Bt=ze+Ht+nt+Kt+524296,Dt=Bt+2*(Ht+nt)>>3;Ke=Dt+ze>>1,ze=(Bt=Bt+2*(ze+Kt)>>3)+Ht>>1,v(y[I+2*Le-1],255&Ke,Ke>>16,Se,ie+(2*Le-1)*m),v(y[I+2*Le-0],255&ze,ze>>16,Se,ie+(2*Le-0)*m),null!=T&&(ze=Dt+Kt>>1,v(T[O+2*Le-1],255&(Ke=Bt+nt>>1),Ke>>16,re,Re+(2*Le-1)*m),v(T[O+2*Le+0],255&ze,ze>>16,re,Re+(2*Le+0)*m)),ze=Ht,nt=Kt}1&Fe||(v(y[I+Fe-1],255&(Ke=3*ze+nt+131074>>2),Ke>>16,Se,ie+(Fe-1)*m),null!=T&&v(T[O+Fe-1],255&(Ke=3*nt+ze+131074>>2),Ke>>16,re,Re+(Fe-1)*m))}}function Ve(){Hr[oc]=KW,Hr[lc]=u1,Hr[n1]=$W,Hr[dc]=h1,Hr[uc]=c1,Hr[Sg]=p1,Hr[s1]=GW,Hr[Eg]=u1,Hr[Ig]=h1,Hr[hc]=c1,Hr[Ag]=p1}function qe(h){return h&~UW?0>h?0:255:h>>f1}function rt(h,v){return qe((19077*h>>8)+(26149*v>>8)-14234)}function wt(h,v,m){return qe((19077*h>>8)-(6419*v>>8)-(13320*m>>8)+8708)}function xt(h,v){return qe((19077*h>>8)+(33050*v>>8)-17685)}function Pt(h,v,m,y,I){y[I+0]=rt(h,m),y[I+1]=wt(h,v,m),y[I+2]=xt(h,v)}function ui(h,v,m,y,I){y[I+0]=xt(h,v),y[I+1]=wt(h,v,m),y[I+2]=rt(h,m)}function gi(h,v,m,y,I){var T=wt(h,v,m);v=T<<3&224|xt(h,v)>>3,y[I+0]=248&rt(h,m)|T>>5,y[I+1]=v}function Ii(h,v,m,y,I){var T=240&xt(h,v)|15;y[I+0]=240&rt(h,m)|wt(h,v,m)>>4,y[I+1]=T}function tr(h,v,m,y,I){y[I+0]=255,Pt(h,v,m,y,I+1)}function Mi(h,v,m,y,I){ui(h,v,m,y,I),y[I+3]=255}function aa(h,v,m,y,I){Pt(h,v,m,y,I),y[I+3]=255}function Sr(h,v){return 0>h?0:h>v?v:h}function nn(h,v,m){k[h]=function(y,I,T,O,R,L,M,te,pe){for(var fe=te+(-2&pe)*m;te!=fe;)v(y[I+0],T[O+0],R[L+0],M,te),v(y[I+1],T[O+0],R[L+0],M,te+m),I+=2,++O,++L,te+=2*m;1&pe&&v(y[I+0],T[O+0],R[L+0],M,te)}}function rc(h,v,m){return 0==m?0==h?0==v?6:5:0==v?4:0:m}function Id(h,v,m,y,I){switch(h>>>30){case 3:Jo(v,m,y,I,0);break;case 2:Pd(v,m,y,I);break;case 1:la(v,m,y,I)}}function Ad(h,v){var m,y,I=v.M,T=v.Nb,O=h.oc,R=h.pc+40,L=h.oc,M=h.pc+584,te=h.oc,pe=h.pc+600;for(m=0;16>m;++m)O[R+32*m-1]=129;for(m=0;8>m;++m)L[M+32*m-1]=129,te[pe+32*m-1]=129;for(0<I?O[R-1-32]=L[M-1-32]=te[pe-1-32]=129:(a(O,R-32-1,127,21),a(L,M-32-1,127,9),a(te,pe-32-1,127,9)),y=0;y<h.za;++y){var fe=v.ya[v.aa+y];if(0<y){for(m=-1;16>m;++m)i(O,R+32*m-4,O,R+32*m+12,4);for(m=-1;8>m;++m)i(L,M+32*m-4,L,M+32*m+4,4),i(te,pe+32*m-4,te,pe+32*m+4,4)}var ne=h.Gd,Pe=h.Hd+y,Se=fe.ad,ie=fe.Hc;if(0<I&&(i(O,R-32,ne[Pe].y,0,16),i(L,M-32,ne[Pe].f,0,8),i(te,pe-32,ne[Pe].ea,0,8)),fe.Za){var re=O,Re=R-32+16;for(0<I&&(y>=h.za-1?a(re,Re,ne[Pe].y[15],4):i(re,Re,ne[Pe+1].y,0,4)),m=0;4>m;m++)re[Re+128+m]=re[Re+256+m]=re[Re+384+m]=re[Re+0+m];for(m=0;16>m;++m,ie<<=2)da[fe.Ob[m]](re=O,Re=R+g1[m]),Id(ie,Se,16*+m,re,Re)}else if(re=rc(y,I,fe.Ob[0]),zn[re](O,R),0!=ie)for(m=0;16>m;++m,ie<<=2)Id(ie,Se,16*+m,O,R+g1[m]);for(m=fe.Gc,re=rc(y,I,fe.Dd),un[re](L,M),un[re](te,pe),ie=Se,re=L,Re=M,255&(fe=m>>0)&&(170&fe?Mn(ie,256,re,Re):on(ie,256,re,Re)),fe=te,ie=pe,255&(m>>=8)&&(170&m?Mn(Se,320,fe,ie):on(Se,320,fe,ie)),I<h.Ub-1&&(i(ne[Pe].y,0,O,R+480,16),i(ne[Pe].f,0,L,M+224,8),i(ne[Pe].ea,0,te,pe+224,8)),ne=h.sa,Pe=h.ta+16*y+16*T*h.R,Se=h.qa,fe=h.ra+8*y+(m=8*T*h.B),ie=h.Ha,re=h.Ia+8*y+m,m=0;16>m;++m)i(ne,Pe+m*h.R,O,R+32*m,16);for(m=0;8>m;++m)i(Se,fe+m*h.B,L,M+32*m,8),i(ie,re+m*h.B,te,pe+32*m,8)}}function Go(h,v,m,y,I,T,O,R,L){var M=[0],te=[0],pe=0,fe=null!=L?L.kd:0,ne=L??new yd;if(null==h||12>m)return 7;ne.data=h,ne.w=v,ne.ha=m,v=[v],m=[m],ne.gb=[ne.gb];e:{var Pe=v,Se=m,ie=ne.gb;if(e(null!=h),e(null!=Se),e(null!=ie),ie[0]=0,12<=Se[0]&&!t(h,Pe[0],"RIFF")){if(t(h,Pe[0]+8,"WEBP")){ie=3;break e}var re=Xe(h,Pe[0]+4);if(12>re||4294967286<re){ie=3;break e}if(fe&&re>Se[0]-8){ie=7;break e}ie[0]=re,Pe[0]+=12,Se[0]-=12}ie=0}if(0!=ie)return ie;for(re=0<ne.gb[0],m=m[0];;){e:{var Re=h;Se=v,ie=m;var Fe=M,Le=te,Ye=Pe=[0];if((Ke=pe=[pe])[0]=0,8>ie[0])ie=7;else{if(!t(Re,Se[0],"VP8X")){if(10!=Xe(Re,Se[0]+4)){ie=3;break e}if(18>ie[0]){ie=7;break e}var ze=Xe(Re,Se[0]+8),nt=1+je(Re,Se[0]+12);if(2147483648<=nt*(Re=1+je(Re,Se[0]+15))){ie=3;break e}null!=Ye&&(Ye[0]=ze),null!=Fe&&(Fe[0]=nt),null!=Le&&(Le[0]=Re),Se[0]+=18,ie[0]-=18,Ke[0]=1}ie=0}}if(pe=pe[0],0!=ie)return ie;if(Se=!!(2&(Pe=Pe[0])),!re&&pe)return 3;if(null!=T&&(T[0]=!!(16&Pe)),null!=O&&(O[0]=Se),null!=R&&(R[0]=0),O=M[0],Pe=te[0],pe&&Se&&null==L){ie=0;break}if(4>m){ie=7;break}if(re&&pe||!re&&!pe&&!t(h,v[0],"ALPH")){m=[m],ne.na=[ne.na],ne.P=[ne.P],ne.Sa=[ne.Sa];e:{ie=v,re=m;var Ke=ne.gb;Fe=ne.na,Le=ne.P,Ye=ne.Sa,nt=22,e(null!=(ze=h)),e(null!=re),Re=ie[0];var Ht=re[0];for(e(null!=Fe),e(null!=Ye),Fe[0]=null,Le[0]=null,Ye[0]=0;;){if(ie[0]=Re,re[0]=Ht,8>Ht){ie=7;break e}var Kt=Xe(ze,Re+4);if(4294967286<Kt){ie=3;break e}var Bt=8+Kt+1&-2;if(nt+=Bt,0<Ke&&nt>Ke){ie=3;break e}if(!t(ze,Re,"VP8 ")||!t(ze,Re,"VP8L")){ie=0;break e}if(Ht[0]<Bt){ie=7;break e}t(ze,Re,"ALPH")||(Fe[0]=ze,Le[0]=Re+8,Ye[0]=Kt),Re+=Bt,Ht-=Bt}}if(m=m[0],ne.na=ne.na[0],ne.P=ne.P[0],ne.Sa=ne.Sa[0],0!=ie)break}m=[m],ne.Ja=[ne.Ja],ne.xa=[ne.xa];e:if(Ke=h,ie=v,re=m,Fe=ne.gb[0],Le=ne.Ja,Ye=ne.xa,ze=ie[0],Re=!t(Ke,ze,"VP8 "),nt=!t(Ke,ze,"VP8L"),e(null!=Ke),e(null!=re),e(null!=Le),e(null!=Ye),8>re[0])ie=7;else{if(Re||nt){if(Ke=Xe(Ke,ze+4),12<=Fe&&Ke>Fe-12){ie=3;break e}if(fe&&Ke>re[0]-8){ie=7;break e}Le[0]=Ke,ie[0]+=8,re[0]-=8,Ye[0]=nt}else Ye[0]=5<=re[0]&&47==Ke[ze+0]&&!(Ke[ze+4]>>5),Le[0]=re[0];ie=0}if(m=m[0],ne.Ja=ne.Ja[0],ne.xa=ne.xa[0],v=v[0],0!=ie)break;if(4294967286<ne.Ja)return 3;if(null==R||Se||(R[0]=ne.xa?2:1),O=[O],Pe=[Pe],ne.xa){if(5>m){ie=7;break}R=O,fe=Pe,Se=T,null==h||5>m?h=0:5<=m&&47==h[v+0]&&!(h[v+4]>>5)?(re=[0],Ke=[0],Fe=[0],ce(Le=new D,h,v,m),ot(Le,re,Ke,Fe)?(null!=R&&(R[0]=re[0]),null!=fe&&(fe[0]=Ke[0]),null!=Se&&(Se[0]=Fe[0]),h=1):h=0):h=0}else{if(10>m){ie=7;break}R=Pe,null==h||10>m||!Zh(h,v+3,m-3)?h=0:(fe=h[v+0]|h[v+1]<<8|h[v+2]<<16,Se=16383&(h[v+7]<<8|h[v+6]),h=16383&(h[v+9]<<8|h[v+8]),1&fe||3<(fe>>1&7)||!(fe>>4&1)||fe>>5>=ne.Ja||!Se||!h?h=0:(O&&(O[0]=Se),R&&(R[0]=h),h=1))}if(!h||(O=O[0],Pe=Pe[0],pe&&(M[0]!=O||te[0]!=Pe)))return 3;null!=L&&(L[0]=ne,L.offset=v-L.w,e(4294967286>v-L.w),e(L.offset==L.ha-m));break}return 0==ie||7==ie&&pe&&null==L?(null!=T&&(T[0]|=null!=ne.na&&0<ne.na.length),null!=y&&(y[0]=O),null!=I&&(I[0]=Pe),0):ie}function Td(h,v,m){var y=v.width,I=v.height,T=0,O=0,R=y,L=I;if(v.Da=null!=h&&0<h.Da,v.Da&&(R=h.cd,L=h.bd,T=h.v,O=h.j,11>m||(T&=-2,O&=-2),0>T||0>O||0>=R||0>=L||T+R>y||O+L>I))return 0;if(v.v=T,v.j=O,v.va=T+R,v.o=O+L,v.U=R,v.T=L,v.da=null!=h&&0<h.da,v.da){if(!Ct(R,L,m=[h.ib],T=[h.hb]))return 0;v.ib=m[0],v.hb=T[0]}return v.ob=null!=h&&h.ob,v.Kb=null==h||!h.Sd,v.da&&(v.ob=v.ib<3*y/4&&v.hb<3*I/4,v.Kb=0),1}function Dd(h){if(null==h)return 2;if(11>h.S){var v=h.f.RGBA;v.fb+=(h.height-1)*v.A,v.A=-v.A}else(v=h.f.kb).O+=((h=h.height)-1)*v.fa,v.fa=-v.fa,v.N+=(h-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(h-1>>1)*v.Db,v.Db=-v.Db,null!=v.F&&(v.J+=(h-1)*v.lb,v.lb=-v.lb);return 0}function Uo(h,v,m,y){if(null==y||0>=h||0>=v)return 2;if(null!=m){if(m.Da){var I=m.cd,T=m.bd,O=-2&m.v,R=-2&m.j;if(0>O||0>R||0>=I||0>=T||O+I>h||R+T>v)return 2;h=I,v=T}if(m.da){if(!Ct(h,v,I=[m.ib],T=[m.hb]))return 2;h=I[0],v=T[0]}}y.width=h,y.height=v;e:{var L=y.width,M=y.height;if(h=y.S,0>=L||0>=M||!(h>=oc&&13>h))h=2;else{if(0>=y.Rd&&null==y.sd){O=T=I=v=0;var te=(R=L*_1[h])*M;if(11>h||(T=(M+1)/2*(v=(L+1)/2),12==h&&(O=(I=L)*M)),null==(M=n(te+2*T+O))){h=1;break e}y.sd=M,11>h?((L=y.f.RGBA).eb=M,L.fb=0,L.A=R,L.size=te):((L=y.f.kb).y=M,L.O=0,L.fa=R,L.Fd=te,L.f=M,L.N=0+te,L.Ab=v,L.Cd=T,L.ea=M,L.W=0+te+T,L.Db=v,L.Ed=T,12==h&&(L.F=M,L.J=0+te+2*T),L.Tc=O,L.lb=I)}if(v=1,T=y.width,O=y.height,(I=y.S)>=oc&&13>I)if(11>I)h=y.f.RGBA,v&=(R=Math.abs(h.A))*(O-1)+T<=h.size,v&=R>=T*_1[I],v&=null!=h.eb;else{h=y.f.kb,R=(T+1)/2,te=(O+1)/2,L=Math.abs(h.fa),M=Math.abs(h.Ab);var pe=Math.abs(h.Db),fe=Math.abs(h.lb);v&=L*(O-1)+T<=h.Fd,v&=M*(te-1)+R<=h.Cd,v=(v&=pe*(te-1)+R<=h.Ed)&L>=T&M>=R&pe>=R,v&=null!=h.y,v&=null!=h.f,v&=null!=h.ea,12==I&&(v&=fe>=T,v&=fe*(O-1)+T<=h.Tc,v&=null!=h.F)}else v=0;h=v?0:2}}return 0!=h||null!=m&&m.fd&&(h=Dd(y)),h}var vr=64,jo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qo=24,Yo=32,Od=8,gr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ze("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(h){return h},k.Predictor2=function(h,v,m){return v[m+0]},k.Predictor3=function(h,v,m){return v[m+1]},k.Predictor4=function(h,v,m){return v[m-1]},k.Predictor5=function(h,v,m){return $e($e(h,v[m+1]),v[m+0])},k.Predictor6=function(h,v,m){return $e(h,v[m-1])},k.Predictor7=function(h,v,m){return $e(h,v[m+0])},k.Predictor8=function(h,v,m){return $e(v[m-1],v[m+0])},k.Predictor9=function(h,v,m){return $e(v[m+0],v[m+1])},k.Predictor10=function(h,v,m){return $e($e(h,v[m-1]),$e(v[m+0],v[m+1]))},k.Predictor11=function(h,v,m){var y=v[m+0];return 0>=yt(y>>24&255,h>>24&255,(v=v[m-1])>>24&255)+yt(y>>16&255,h>>16&255,v>>16&255)+yt(y>>8&255,h>>8&255,v>>8&255)+yt(255&y,255&h,255&v)?y:h},k.Predictor12=function(h,v,m){var y=v[m+0];return(it((h>>24&255)+(y>>24&255)-((v=v[m-1])>>24&255))<<24|it((h>>16&255)+(y>>16&255)-(v>>16&255))<<16|it((h>>8&255)+(y>>8&255)-(v>>8&255))<<8|it((255&h)+(255&y)-(255&v)))>>>0},k.Predictor13=function(h,v,m){var y=v[m-1];return(_t((h=$e(h,v[m+0]))>>24&255,y>>24&255)<<24|_t(h>>16&255,y>>16&255)<<16|_t(h>>8&255,y>>8&255)<<8|_t(h>>0&255,y>>0&255))>>>0};var wg=k.PredictorAdd0;k.PredictorAdd1=Et,Ze("Predictor2","PredictorAdd2"),Ze("Predictor3","PredictorAdd3"),Ze("Predictor4","PredictorAdd4"),Ze("Predictor5","PredictorAdd5"),Ze("Predictor6","PredictorAdd6"),Ze("Predictor7","PredictorAdd7"),Ze("Predictor8","PredictorAdd8"),Ze("Predictor9","PredictorAdd9"),Ze("Predictor10","PredictorAdd10"),Ze("Predictor11","PredictorAdd11"),Ze("Predictor12","PredictorAdd12"),Ze("Predictor13","PredictorAdd13");var Rd=k.PredictorAdd2;It("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),It("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var ac,na=k.ColorIndexInverseTransform,Ld=k.MapARGB,bg=k.VP8LColorIndexInverseTransformAlpha,yg=k.MapAlpha,Bn=k.VP8LPredictorsAdd=[];Bn.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Br,sa,kn,Va,sn,Xo,oa,Jo,Pd,Mn,la,on,Vs,Qo,Ns,Hn,Fd,kr,ln,ri,ai,Si,Li,dn,Zn,el,nc,QE,e1=n(511),t1=n(2041),i1=n(225),r1=n(767),a1=0,xg=t1,sc=i1,Er=r1,Mr=e1,oc=0,lc=1,n1=2,dc=3,uc=4,Sg=5,s1=6,Eg=7,Ig=8,hc=9,Ag=10,OW=[2,3,7],RW=[3,3,11],o1=[280,256,256,256,40],LW=[0,1,1,1,0],PW=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],FW=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],VW=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],NW=8,Tg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Dg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vd=null,BW=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],kW=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],l1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],MW=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],HW=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ZW=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],zW=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],zn=[],da=[],un=[],WW=1,d1=2,Wn=[],Hr=[];De("UpsampleRgbLinePair",Pt,3),De("UpsampleBgrLinePair",ui,3),De("UpsampleRgbaLinePair",aa,4),De("UpsampleBgraLinePair",Mi,4),De("UpsampleArgbLinePair",tr,4),De("UpsampleRgba4444LinePair",Ii,2),De("UpsampleRgb565LinePair",gi,2);var KW=k.UpsampleRgbLinePair,$W=k.UpsampleBgrLinePair,u1=k.UpsampleRgbaLinePair,h1=k.UpsampleBgraLinePair,c1=k.UpsampleArgbLinePair,p1=k.UpsampleRgba4444LinePair,GW=k.UpsampleRgb565LinePair,cc=16,pc=1<<cc-1,Nd=-227,Og=482,f1=6,UW=(256<<f1)-1,v1=0,jW=n(256),qW=n(256),YW=n(256),XW=n(256),JW=n(Og-Nd),QW=n(Og-Nd);nn("YuvToRgbRow",Pt,3),nn("YuvToBgrRow",ui,3),nn("YuvToRgbaRow",aa,4),nn("YuvToBgraRow",Mi,4),nn("YuvToArgbRow",tr,4),nn("YuvToRgba4444Row",Ii,2),nn("YuvToRgb565Row",gi,2);var g1=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fc=[0,2,8],e7=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(h,v,m,y,I){var T=lc,O=new Ko,R=new Xr;O.ba=R,R.S=T,R.width=[R.width],R.height=[R.height];var L=R.width,M=R.height,te=new en;if(null==te||null==h)var pe=2;else e(null!=te),pe=Go(h,v,m,te.width,te.height,te.Pd,te.Qd,te.format,null);if(0!=pe?L=0:(null!=L&&(L[0]=te.width[0]),null!=M&&(M[0]=te.height[0]),L=1),L){R.width=R.width[0],R.height=R.height[0],null!=y&&(y[0]=R.width),null!=I&&(I[0]=R.height);e:{if(y=new Bo,(I=new yd).data=h,I.w=v,I.ha=m,I.kd=1,v=[0],e(null!=I),(0==(h=Go(I.data,I.w,I.ha,null,null,null,v,null,I))||7==h)&&v[0]&&(h=4),0==(v=h)){if(e(null!=O),y.data=I.data,y.w=I.w+I.offset,y.ha=I.ha-I.offset,y.put=Da,y.ac=Ki,y.bc=Oa,y.ma=O,I.xa){if(null==(h=Nr())){O=1;break e}if(function(fe,ne){var Pe=[0],Se=[0],ie=[0];t:for(;;){if(null==fe)return 0;if(null==ne)return fe.a=2,0;if(fe.l=ne,fe.a=0,ce(fe.m,ne.data,ne.w,ne.ha),!ot(fe.m,Pe,Se,ie)){fe.a=3;break t}if(fe.xb=d1,ne.width=Pe[0],ne.height=Se[0],!Pa(Pe[0],Se[0],1,fe,null))break t;return 1}return e(0!=fe.a),0}(h,y)){if(y=0==(v=Uo(y.width,y.height,O.Oa,O.ba))){t:{y=h;i:for(;;){if(null==y){y=0;break t}if(e(null!=y.s.yc),e(null!=y.s.Ya),e(0<y.s.Wb),e(null!=(m=y.l)),e(null!=(I=m.ma)),0!=y.xb){if(y.ca=I.ba,y.tb=I.tb,e(null!=y.ca),!Td(I.Oa,m,dc)){y.a=2;break i}if(!Os(y,m.width)||m.da)break i;if((m.da||Zt(y.ca.S))&&de(),11>y.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=y.ca.f.kb.F&&de()),y.Pb&&0<y.s.ua&&null==y.s.vb.X&&!ut(y.s.vb,y.s.Wa.Xa)){y.a=1;break i}y.xb=0}if(!ta(y,y.V,y.Ba,y.c,y.i,m.o,Ro))break i;I.Dc=y.Ma,y=1;break t}e(0!=y.a),y=0}y=!y}y&&(v=h.a)}else v=h.a}else{if(null==(h=new tg)){O=1;break e}if(h.Fa=I.na,h.P=I.P,h.qc=I.Sa,zh(h,y)){if(0==(v=Uo(y.width,y.height,O.Oa,O.ba))){if(h.Aa=0,m=O.Oa,e(null!=(I=h)),null!=m){if(0<(L=0>(L=m.Md)?0:100<L?255:255*L/100)){for(M=te=0;4>M;++M)12>(pe=I.pb[M]).lc&&(pe.ia=L*e7[0>pe.lc?0:pe.lc]>>3),te|=pe.ia;te&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=m.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}(function ig(h,v){if(null==h)return 0;if(null==v)return xi(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!zh(h,v))return 0;if(e(h.cb),null==v.ac||v.ac(v)){v.ob&&(h.L=0);var m=fc[h.L];if(2==h.L?(h.yb=0,h.zb=0):(h.yb=v.v-m>>4,h.zb=v.j-m>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=v.o+15+m>>4,h.Hb=v.va+15+m>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var y=h.ed;for(m=0;4>m;++m){var I;if(h.Qa.Cb){var T=h.Qa.Lb[m];h.Qa.Fb||(T+=y.Tb)}else T=y.Tb;for(I=0;1>=I;++I){var O=h.gd[m][I],R=T;if(y.Pc&&(R+=y.vd[0],I&&(R+=y.od[0])),0<(R=0>R?0:63<R?63:R)){var L=R;0<y.wb&&(L=4<y.wb?L>>2:L>>1)>9-y.wb&&(L=9-y.wb),1>L&&(L=1),O.dd=L,O.tc=2*R+L,O.ld=40<=R?2:15<=R?1:0}else O.tc=0;O.La=I}}}m=0}else xi(h,6,"Frame setup failed"),m=h.a;if(m=0==m){if(m){h.$c=0,0<h.Aa||(h.Ic=1);e:{y=4*(L=h.za);var M=32*L,te=L+1,pe=0<h.L?L*(0<h.Aa?2:1):0,fe=(2==h.Aa?2:1)*L;if((O=y+832+(I=3*(16*(m=h.Ic)+fc[h.L])/2*M)+(T=null!=h.Fa&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=O)m=0;else{if(O>h.Vb){if(h.Vb=0,h.Ec=n(O),h.Fc=0,null==h.Ec){m=xi(h,1,"no memory during frame initialization.");break e}h.Vb=O}R=h.Fc,h.Ac=O=h.Ec,h.Bc=R,R+=y,h.Gd=s(M,Hh),h.Hd=0,h.rb=s(te+1,Mh),h.sb=1,h.wa=pe?s(pe,No):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=L),e(!0),h.oc=O,h.pc=R,R+=832,h.ya=s(fe,cd),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,2==h.Aa&&(h.D.aa+=L),h.R=16*L,h.B=8*L,L=(M=fc[h.L])*h.R,M=M/2*h.B,h.sa=O,h.ta=R+L,h.qa=h.sa,h.ra=h.ta+16*m*h.R+M,h.Ha=h.qa,h.Ia=h.ra+8*m*h.B+M,h.$c=0,R+=I,h.mb=T?O:null,h.nb=T?R:null,e(R+T<=h.Fc+h.Vb),pd(h),a(h.Ac,h.Bc,0,y),m=1}}if(m){if(v.ka=0,v.y=h.sa,v.O=h.ta,v.f=h.qa,v.N=h.ra,v.ea=h.Ha,v.Vd=h.Ia,v.fa=h.R,v.Rc=h.B,v.F=null,v.J=0,!a1){for(m=-255;255>=m;++m)e1[255+m]=0>m?-m:m;for(m=-1020;1020>=m;++m)t1[1020+m]=-128>m?-128:127<m?127:m;for(m=-112;112>=m;++m)i1[112+m]=-16>m?-16:15<m?15:m;for(m=-255;510>=m;++m)r1[255+m]=0>m?0:255<m?255:m;a1=1}oa=ng,Jo=rg,Mn=$h,la=ag,on=Gh,Pd=Kh,Vs=Cd,Qo=Ps,Ns=mg,Hn=wd,Fd=_g,kr=Wo,ln=bd,ri=tc,ai=ec,Si=an,Li=Fn,dn=gg,da[0]=Fa,da[1]=sg,da[2]=ug,da[3]=hg,da[4]=qh,da[5]=Zo,da[6]=Yh,da[7]=gd,da[8]=pg,da[9]=cg,zn[0]=Uh,zn[1]=lg,zn[2]=rn,zn[3]=Mo,zn[4]=er,zn[5]=dg,zn[6]=jh,un[0]=Pn,un[1]=og,un[2]=fg,un[3]=_d,un[4]=Ls,un[5]=vg,un[6]=md,m=1}else m=0}m&&(m=function(ne,Pe){for(ne.M=0;ne.M<ne.Va;++ne.M){var Se,ie=ne.Jc[ne.M&ne.Xb],re=ne.m,Re=ne;for(Se=0;Se<Re.za;++Se){var Fe=re,Le=Re,Ye=Le.Ac,ze=Le.Bc+4*Se,nt=Le.zc,Ke=Le.ya[Le.aa+Se];if(Ke.$b=Le.Qa.Bb?be(Fe,Le.Pa.jb[0])?2+be(Fe,Le.Pa.jb[2]):be(Fe,Le.Pa.jb[1]):0,Le.kc&&(Ke.Ad=be(Fe,Le.Bd)),Ke.Za=!be(Fe,145)+0,Ke.Za){var Ht=Ke.Ob,Kt=0;for(Le=0;4>Le;++Le){var Bt,Dt=nt[0+Le];for(Bt=0;4>Bt;++Bt){for(var ei=l1[be(Fe,(Dt=HW[Ye[ze+Bt]][Dt])[0])];0<ei;)ei=l1[2*ei+be(Fe,Dt[ei])];Ye[ze+Bt]=Dt=-ei}i(Ht,Kt,Ye,ze,4),Kt+=4,nt[0+Le]=Dt}}else Dt=be(Fe,156)?be(Fe,128)?1:3:be(Fe,163)?2:0,Ke.Ob[0]=Dt,a(Ye,ze,Dt,4),a(nt,0,Dt,4);Ke.Dd=be(Fe,142)?be(Fe,114)?be(Fe,183)?1:3:2:0}if(Re.m.Ka)return xi(ne,7,"Premature end-of-partition0 encountered.");for(;ne.ja<ne.za;++ne.ja){if(Re=ie,Fe=(re=ne).rb[re.sb-1],Ye=re.rb[re.sb+re.ja],Se=re.ya[re.aa+re.ja],ze=re.kc?Se.Ad:0)Fe.la=Ye.la=0,Se.Za||(Fe.Na=Ye.Na=0),Se.Hc=0,Se.Gc=0,Se.ia=0;else{var jt,bt;if(Fe=Ye,Ye=Re,ze=re.Pa.Xc,Ke=re.pb[(nt=re.ya[re.aa+re.ja]).$b],Kt=re.rb[re.sb-1],Dt=Bt=0,a(Le=nt.ad,Ht=0,0,384),nt.Za)var Ai=0,_r=ze[3];else{ei=n(16);var Ti=Fe.Na+Kt.Na;if(Ti=Vd(Ye,ze[1],Ti,Ke.Eb,0,ei,0),Fe.Na=Kt.Na=(0<Ti)+0,1<Ti)oa(ei,0,Le,Ht);else{var mr=ei[0]+3>>3;for(ei=0;256>ei;ei+=16)Le[Ht+ei]=mr}Ai=1,_r=ze[0]}var $t=15&Fe.la,Ir=15&Kt.la;for(ei=0;4>ei;++ei){var Ar=1&Ir;for(mr=bt=0;4>mr;++mr)$t=$t>>1|(Ar=(Ti=Vd(Ye,_r,Ti=Ar+(1&$t),Ke.Sc,Ai,Le,Ht))>Ai)<<7,bt=bt<<2|(3<Ti?3:1<Ti?2:0!=Le[Ht+0]),Ht+=16;$t>>=4,Ir=Ir>>1|Ar<<7,Bt=(Bt<<8|bt)>>>0}for(_r=$t,Ai=Ir>>4,jt=0;4>jt;jt+=2){for(bt=0,$t=Fe.la>>4+jt,Ir=Kt.la>>4+jt,ei=0;2>ei;++ei){for(Ar=1&Ir,mr=0;2>mr;++mr)$t=$t>>1|(Ar=0<(Ti=Vd(Ye,ze[2],Ti=Ar+(1&$t),Ke.Qc,0,Le,Ht)))<<3,bt=bt<<2|(3<Ti?3:1<Ti?2:0!=Le[Ht+0]),Ht+=16;$t>>=2,Ir=Ir>>1|Ar<<5}Dt|=bt<<4*jt,_r|=$t<<4<<jt,Ai|=(240&Ir)<<jt}Fe.la=_r,Kt.la=Ai,nt.Hc=Bt,nt.Gc=Dt,nt.ia=43690&Dt?0:Ke.ia,ze=!(Bt|Dt)}if(0<re.L&&(re.wa[re.Y+re.ja]=re.gd[Se.$b][Se.Za],re.wa[re.Y+re.ja].La|=!ze),Re.Ka)return xi(ne,7,"Premature end-of-file encountered.")}if(pd(ne),re=Pe,Re=1,Se=(ie=ne).D,Fe=0<ie.L&&ie.M>=ie.zb&&ie.M<=ie.Va,0==ie.Aa)e:{if(Se.M=ie.M,Se.uc=Fe,Ad(ie,Se),Re=1,Se=(bt=ie.D).Nb,Fe=(Dt=fc[ie.L])*ie.R,ze=ie.sa,nt=ie.ta-Fe+(ei=16*Se*ie.R),Ke=ie.qa,Le=ie.ra-(Ye=Dt/2*ie.B)+(mr=8*Se*ie.B),Ht=ie.Ha,Kt=ie.Ia-Ye+mr,Ir=0==($t=bt.M),Bt=$t>=ie.Va-1,2==ie.Aa&&Ad(ie,bt),bt.uc)for(Ar=(Ti=ie).D.M,e(Ti.D.uc),bt=Ti.yb;bt<Ti.Hb;++bt){_r=Ar;var Hi=($i=(_i=Ti).D).Nb,$i=$i.wa[$i.Y+(Ai=bt)],ar=_i.sa,Zr=_i.ta+16*Hi*(jt=_i.R)+16*Ai,Na=$i.dd,Zi=$i.tc;if(0!=Zi)if(e(3<=Zi),1==_i.L)0<Ai&&Si(ar,Zr,jt,Zi+4),$i.La&&dn(ar,Zr,jt,Zi),0<_r&&ai(ar,Zr,jt,Zi+4),$i.La&&Li(ar,Zr,jt,Zi);else{var hn=_i.B,Bs=_i.qa,tl=_i.ra+8*Hi*hn+8*Ai,Kn=_i.Ha,_i=_i.Ia+8*Hi*hn+8*Ai;Hi=$i.ld,0<Ai&&(Qo(ar,Zr,jt,Zi+4,Na,Hi),Hn(Bs,tl,Kn,_i,hn,Zi+4,Na,Hi)),$i.La&&(kr(ar,Zr,jt,Zi,Na,Hi),ri(Bs,tl,Kn,_i,hn,Zi,Na,Hi)),0<_r&&(Vs(ar,Zr,jt,Zi+4,Na,Hi),Ns(Bs,tl,Kn,_i,hn,Zi+4,Na,Hi)),$i.La&&(Fd(ar,Zr,jt,Zi,Na,Hi),ln(Bs,tl,Kn,_i,hn,Zi,Na,Hi))}}if(ie.ia&&alert("todo:DitherRow"),null!=re.put){if(bt=16*$t,$t=16*($t+1),Ir?(re.y=ie.sa,re.O=ie.ta+ei,re.f=ie.qa,re.N=ie.ra+mr,re.ea=ie.Ha,re.W=ie.Ia+mr):(bt-=Dt,re.y=ze,re.O=nt,re.f=Ke,re.N=Le,re.ea=Ht,re.W=Kt),Bt||($t-=Dt),$t>re.o&&($t=re.o),re.F=null,re.J=null,null!=ie.Fa&&0<ie.Fa.length&&bt<$t&&(re.J=Ed(ie,re,bt,$t-bt),re.F=ie.mb,null==re.F&&0==re.F.length)){Re=xi(ie,3,"Could not decode alpha data.");break e}bt<re.j&&(Dt=re.j-bt,bt=re.j,e(!(1&Dt)),re.O+=ie.R*Dt,re.N+=ie.B*(Dt>>1),re.W+=ie.B*(Dt>>1),null!=re.F&&(re.J+=re.width*Dt)),bt<$t&&(re.O+=re.v,re.N+=re.v>>1,re.W+=re.v>>1,null!=re.F&&(re.J+=re.v),re.ka=bt-re.j,re.U=re.va-re.v,re.T=$t-bt,Re=re.put(re))}Se+1!=ie.Ic||Bt||(i(ie.sa,ie.ta-Fe,ze,nt+16*ie.R,Fe),i(ie.qa,ie.ra-Ye,Ke,Le+8*ie.B,Ye),i(ie.Ha,ie.Ia-Ye,Ht,Kt+8*ie.B,Ye))}if(!Re)return xi(ne,6,"Output aborted.")}return 1}(h,v)),null!=v.bc&&v.bc(v),m&=1}return m?(h.cb=0,m):0})(h,y)||(v=h.a)}}else v=h.a}0==v&&null!=O.Oa&&O.Oa.fd&&(v=Dd(O.ba))}O=v}T=0!=O?null:11>T?R.f.RGBA.eb:R.f.kb.y}else T=null;return T};var _1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(k,se){for(var he="",F=0;F<4;F++)he+=String.fromCharCode(k[se++]);return he}function u(k,se){return(k[se+0]<<0|k[se+1]<<8|k[se+2]<<16)>>>0}function c(k,se){return(k[se+0]<<0|k[se+1]<<8|k[se+2]<<16|k[se+3]<<24)>>>0}new l;var f=[0],p=[0],_=[],w=new l,S=r,x=function(k,se){var he={},F=0,P=!1,U=0,K=0;if(he.frames=[],!
/** @license
             * Copyright (c) 2017 Dominik Homberger
            Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
            The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
            https://webpjs.appspot.com
            WebPRiffParser dominikhlbg@gmail.com
            */
function(H,$,ee,oe){for(var _e=0;_e<4;_e++)if(H[$+_e]!="RIFF".charCodeAt(_e))return!0;return!1}(k,se)){var ge,ue;for(c(k,se+=4),se+=8;se<k.length;){var xe=d(k,se),ce=c(k,se+=4);se+=4;var Te=ce+(1&ce);switch(xe){case"VP8 ":case"VP8L":void 0===he.frames[F]&&(he.frames[F]={}),(D=he.frames[F]).src_off=P?K:se-8,D.src_size=U+ce+8,F++,P&&(P=!1,U=0,K=0);break;case"VP8X":(D=he.header={}).feature_flags=k[se];var Ie=se+4;D.canvas_width=1+u(k,Ie),D.canvas_height=1+u(k,Ie+=3),Ie+=3;break;case"ALPH":P=!0,U=Te+8,K=se-8;break;case"ANIM":(D=he.header).bgcolor=c(k,se),D.loop_count=(ge=k)[(ue=Ie=se+4)+0]<<0|ge[ue+1]<<8,Ie+=2;break;case"ANMF":var Me,D;(D=he.frames[F]={}).offset_x=2*u(k,se),D.offset_y=2*u(k,se+=3),D.width=1+u(k,se+=3),D.height=1+u(k,se+=3),D.duration=u(k,se+=3),se+=3,Me=k[se++],D.dispose=1&Me,D.blend=Me>>1&1}"ANMF"!=xe&&(se+=Te)}return he}}(S,0);x.response=S,x.rgbaoutput=!0,x.dataurl=!1;var E=x.header?x.header:null,V=x.frames?x.frames:null;if(E){E.loop_counter=E.loop_count,f=[E.canvas_height],p=[E.canvas_width];for(var N=0;N<V.length&&0!=V[N].blend;N++);}var j=V[0],Q=w.WebPDecodeRGBA(S,j.src_off,j.src_size,p,f);j.rgba=Q,j.imgwidth=p[0],j.imgheight=f[0];for(var q=0;q<p[0]*f[0]*4;q++)_[q]=Q[q];return this.width=p,this.height=f,this.data=_,this}(function(r){var t=function(f,p,_,w){var S=4,x=s;switch(w){case r.image_compression.FAST:S=1,x=n;break;case r.image_compression.MEDIUM:S=6,x=o;break;case r.image_compression.SLOW:S=9,x=l}var E=ud(f=i(f,p,_,x),{level:S});return r.__addimage__.arrayBufferToBinaryString(E)},i=function(f,p,_,w){for(var S,x,E,V=f.length/p,N=new Uint8Array(f.length+V),j=u(),Q=0;Q<V;Q+=1){if(S=f.subarray(E=Q*p,E+p),w)N.set(w(S,_,x),E+Q);else{for(var q,k=j.length,se=[];q<k;q+=1)se[q]=j[q](S,_,x);var he=c(se.concat());N.set(se[he],E+Q)}x=S}return N},a=function(f){var p=Array.apply([],f);return p.unshift(0),p},n=function(f,p){var w=[],S=f.length;w[0]=1;for(var x=0;x<S;x+=1)w[x+1]=f[x]-(f[x-p]||0)+256&255;return w},s=function(f,p,_){var S=[],x=f.length;S[0]=2;for(var E=0;E<x;E+=1)S[E+1]=f[E]-(_&&_[E]||0)+256&255;return S},o=function(f,p,_){var x=[],E=f.length;x[0]=3;for(var V=0;V<E;V+=1)x[V+1]=f[V]+256-((f[V-p]||0)+(_&&_[V]||0)>>>1)&255;return x},l=function(f,p,_){var E,V=[],N=f.length;V[0]=4;for(var j=0;j<N;j+=1)E=d(f[j-p]||0,_&&_[j]||0,_&&_[j-p]||0),V[j+1]=f[j]-E+256&255;return V},d=function(f,p,_){if(f===p&&p===_)return f;var w=Math.abs(p-_),S=Math.abs(f-_),x=Math.abs(f+p-_-_);return w<=S&&w<=x?f:S<=x?p:_},u=function(){return[a,n,s,o,l]},c=function(f){var p=f.map(function(_){return _.reduce(function(w,S){return w+Math.abs(S)},0)});return p.indexOf(Math.min.apply(null,p))};r.processPNG=function(f,p,_,w){var S,x,E,V,N,j,Q,q,k,se,he,F,P,U,K,ge=this.decode.FLATE_DECODE,ue="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(E=new j8(f)).imgData,x=E.bits,S=E.colorSpace,N=E.colors,-1!==[4,6].indexOf(E.colorType)){if(8===E.bits){k=(q=32==E.pixelBitlength?new Uint32Array(E.decodePixels().buffer):16==E.pixelBitlength?new Uint16Array(E.decodePixels().buffer):new Uint8Array(E.decodePixels().buffer)).length,he=new Uint8Array(k*E.colors),se=new Uint8Array(k);var xe,ce=E.pixelBitlength-E.bits;for(U=0,K=0;U<k;U++){for(P=q[U],xe=0;xe<ce;)he[K++]=P>>>xe&255,xe+=E.bits;se[U]=P>>>xe&255}}if(16===E.bits){k=(q=new Uint32Array(E.decodePixels().buffer)).length,he=new Uint8Array(k*(32/E.pixelBitlength)*E.colors),se=new Uint8Array(k*(32/E.pixelBitlength)),F=E.colors>1,U=0,K=0;for(var Te=0;U<k;)P=q[U++],he[K++]=P>>>0&255,F&&(he[K++]=P>>>16&255,P=q[U++],he[K++]=P>>>0&255),se[Te++]=P>>>16&255;x=8}w!==r.image_compression.NONE?(f=t(he,E.width*E.colors,E.colors,w),Q=t(se,E.width,1,w)):(f=he,Q=se,ge=void 0)}if(3===E.colorType&&(S=this.color_spaces.INDEXED,j=E.palette,E.transparency.indexed)){var Ie=E.transparency.indexed,Me=0;for(U=0,k=Ie.length;U<k;++U)Me+=Ie[U];if((Me/=255)==k-1&&-1!==Ie.indexOf(0))V=[Ie.indexOf(0)];else if(Me!==k){for(q=E.decodePixels(),se=new Uint8Array(q.length),U=0,k=q.length;U<k;U++)se[U]=Ie[q[U]];Q=t(se,E.width,1)}}var D=function(H){var $;switch(H){case r.image_compression.FAST:$=11;break;case r.image_compression.MEDIUM:$=13;break;case r.image_compression.SLOW:$=14;break;default:$=12}return $}(w);return ge===this.decode.FLATE_DECODE&&(ue="/Predictor "+D+" "),ue+="/Colors "+N+" /BitsPerComponent "+x+" /Columns "+E.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(Q&&this.__addimage__.isArrayBuffer(Q)||this.__addimage__.isArrayBufferView(Q))&&(Q=this.__addimage__.arrayBufferToBinaryString(Q)),{alias:_,data:f,index:p,filter:ge,decodeParameters:ue,transparency:V,palette:j,sMask:Q,predictor:D,width:E.width,height:E.height,bitsPerComponent:x,colorSpace:S}}}})(st.API),function(r){r.processGIF89A=function(e,t,i,a){var n=new q8(e),s=n.width,o=n.height,l=[];n.decodeAndBlitFrameRGBA(0,l);var d={data:l,width:s,height:o},u=new qv(100).encode(d,100);return r.processJPEG.call(this,u,t,i,a)},r.processGIF87A=r.processGIF89A}(st.API),jr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:i,blue:t,quad:n}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},jr.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[r]()}catch(t){Jt.log("bit decode error:"+t)}},jr.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<e;a++)for(var n=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[n>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}0!==t&&(this.pos+=4-t)}},jr.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,a=0;a<r;a++){var n=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+2*a*4,l=15&n,d=this.palette[n>>4];if(this.data[s]=d.blue,this.data[s+1]=d.green,this.data[s+2]=d.red,this.data[s+3]=255,2*a+1>=this.width)break;this.data[s+4]=(d=this.palette[l]).blue,this.data[s+4+1]=d.green,this.data[s+4+2]=d.red,this.data[s+4+3]=255}0!==e&&(this.pos+=4-e)}},jr.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),n=t*this.width*4+4*i;if(a<this.palette.length){var s=this.palette[a];this.data[n]=s.red,this.data[n+1]=s.green,this.data[n+2]=s.blue,this.data[n+3]=255}else this.data[n]=255,this.data[n+1]=255,this.data[n+2]=255,this.data[n+3]=255}0!==r&&(this.pos+=4-r)}},jr.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var n=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(n&e)/e*255|0,o=(n>>5&e)/e*255|0,d=n>>15?255:0,u=i*this.width*4+4*a;this.data[u]=(n>>10&e)/e*255|0,this.data[u+1]=o,this.data[u+2]=s,this.data[u+3]=d}this.pos+=r}},jr.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,n=0;n<this.width;n++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,u=a*this.width*4+4*n;this.data[u]=(s>>11)/e*255|0,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=r}},jr.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=n,this.data[s+1]=a,this.data[s+2]=i,this.data[s+3]=255}this.pos+=this.width%4}},jr.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=n,this.data[o+1]=a,this.data[o+2]=i,this.data[o+3]=s}},jr.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2018 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){r.processBMP=function(e,t,i,a){var n=new jr(e,!1),s=n.width,o=n.height,l={data:n.getData(),width:s,height:o},d=new qv(100).encode(l,100);return r.processJPEG.call(this,d,t,i,a)}}(st.API),UE.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2019 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){r.processWEBP=function(e,t,i,a){var n=new UE(e,!1),s=n.width,o=n.height,l={data:n.getData(),width:s,height:o},d=new qv(100).encode(l,100);return r.processJPEG.call(this,d,t,i,a)}}(st.API),st.API.processRGBA=function(r,e,t){for(var i=r.data,a=i.length,n=new Uint8Array(a/4*3),s=new Uint8Array(a/4),o=0,l=0,d=0;d<a;d+=4){var c=i[d+1],f=i[d+2],p=i[d+3];n[o++]=i[d],n[o++]=c,n[o++]=f,s[l++]=p}var _=this.__addimage__.arrayBufferToBinaryString(n);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:_,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},st.API.setLanguage=function(r){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]&&(this.internal.languageSettings.languageCode=r,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bh=(Oo=st.API).getCharWidthsArray=function(r,e){var t,i,a=(e=e||{}).font||this.internal.getFont(),n=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,d=e.kerning?e.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,c=!1!==e.doKerning,f=0,p=r.length,_=0,w=o[0]||l,S=[];for(t=0;t<p;t++)i=r.charCodeAt(t),"function"==typeof a.metadata.widthOfString?S.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+s*(1e3/n)||0)/1e3):(f=c&&"object"===(0,Xt.Z)(d[i])&&!isNaN(parseInt(d[i][_],10))?d[i][_]/u:0,S.push((o[i]||w)/l+f)),_=i;return S},WE=Oo.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Oo.processArabic&&(r=Oo.processArabic(r)),"function"==typeof i.metadata.widthOfString?i.metadata.widthOfString(r,t,a)/t:Bh.apply(this,arguments).reduce(function(n,s){return n+s},0)},KE=function(r,e,t,i){for(var a=[],n=0,s=r.length,o=0;n!==s&&o+e[n]<t;)o+=e[n],n++;a.push(r.slice(0,n));var l=n;for(o=0;n!==s;)o+e[n]>i&&(a.push(r.slice(l,n)),o=0,l=n),o+=e[n],n++;return l!==n&&a.push(r.slice(l,n)),a},$E=function(r,e,t){t||(t={});var i,a,n,s,o,l,u=[],c=[u],f=t.textIndent||0,p=0,_=0,w=r.split(" "),S=Bh.apply(this,[" ",t])[0];if(l=-1===t.lineIndent?w[0].length+2:t.lineIndent||0){var x=Array(l).join(" "),E=[];w.map(function(N){(N=N.split(/\s*\n/)).length>1?E=E.concat(N.map(function(j,Q){return(Q&&j.length?"\n":"")+j})):E.push(N[0])}),w=E,l=WE.apply(this,[x,t])}for(n=0,s=w.length;n<s;n++){var V=0;if(i=w[n],l&&"\n"==i[0]&&(i=i.substr(1),V=1),f+p+(_=(a=Bh.apply(this,[i,t])).reduce(function(N,j){return N+j},0))>e||V){if(_>e){for(o=KE.apply(this,[i,a,e-(f+p),e]),u.push(o.shift()),u=[o.pop()];o.length;)c.push([o.shift()]);_=a.slice(i.length-(u[0]?u[0].length:0)).reduce(function(N,j){return N+j},0)}else u=[i];c.push(u),f=_+l,p=S}else u.push(i),f+=p+_,p=S}return c.map(l?function(N,j){return(j?x:"")+N.join(" ")}:function(N){return N.join(" ")})},Oo.splitTextToSize=function(r,e,t){var i,a=(t=t||{}).fontSize||this.internal.getFontSize(),n=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var c=this.internal.getFont(u.fontName,u.fontStyle);return c.metadata.Unicode?{widths:c.metadata.Unicode.widths||{0:1},kerning:c.metadata.Unicode.kerning||{}}:{font:c.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);i=Array.isArray(r)?r:String(r).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/a;n.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,n.lineIndent=t.lineIndent;var o,l,d=[];for(o=0,l=i.length;o<l;o++)d=d.concat($E.apply(this,[i[o],s,n]));return d},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},i={},a=0;a<16;a++)t[e[a]]="0123456789abcdef"[a],i["0123456789abcdef"[a]]=e[a];var n=function(c){return"0x"+parseInt(c,10).toString(16)},s=r.__fontmetrics__.compress=function(c){var f,p,_,w,S=["{"];for(var x in c){if(f=c[x],isNaN(parseInt(x,10))?p="'"+x+"'":(x=parseInt(x,10),p=(p=n(x).slice(2)).slice(0,-1)+i[p.slice(-1)]),"number"==typeof f)f<0?(_=n(f).slice(3),w="-"):(_=n(f).slice(2),w=""),_=w+_.slice(0,-1)+i[_.slice(-1)];else{if("object"!==(0,Xt.Z)(f))throw new Error("Don't know what to do with value type "+(0,Xt.Z)(f)+".");_=s(f)}S.push(p+_)}return S.push("}"),S.join("")},o=r.__fontmetrics__.uncompress=function(c){if("string"!=typeof c)throw new Error("Invalid argument passed to uncompress.");for(var f,p,_,w,S={},x=1,E=S,V=[],N="",j="",Q=c.length-1,q=1;q<Q;q+=1)"'"==(w=c[q])?f?(_=f.join(""),f=void 0):f=[]:f?f.push(w):"{"==w?(V.push([E,_]),E={},_=void 0):"}"==w?((p=V.pop())[0][p[1]]=E,_=void 0,E=p[0]):"-"==w?x=-1:void 0===_?t.hasOwnProperty(w)?(N+=t[w],_=parseInt(N,16)*x,x=1,N=""):N+=w:t.hasOwnProperty(w)?(j+=t[w],E[_]=parseInt(j,16)*x,x=1,_=void 0,j=""):j+=w;return S},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(c){var f=c.font,p=u.Unicode[f.postScriptName];p&&(f.metadata.Unicode={},f.metadata.Unicode.widths=p.widths,f.metadata.Unicode.kerning=p.kerning);var _=d.Unicode[f.postScriptName];_&&(f.metadata.Unicode.encoding=_,f.encoding=_.codePages[0])}])}(st.API),
/**
       * @license
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){var e=function(t){for(var i=t.length,a=new Uint8Array(i),n=0;n<i;n++)a[n]=t.charCodeAt(n);return a};r.API.events.push(["addFont",function(t){var s,o,i=void 0,a=t.font,n=t.instance;if(!a.isStandardFont){if(void 0===n)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(i=!1===n.existsFileInVFS(a.postScriptName)?n.loadFile(a.postScriptName):n.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");s=a,o=/^\x00\x01\x00\x00/.test(o=i)?e(o):e(hd(o)),s.metadata=r.API.TTFFont.open(o),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]}}])}(st),st.API.addSvgAsImage=function(t,i,a,n,s,o,l,d){if(isNaN(i)||isNaN(a))throw Jt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw Jt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=n,u.height=s;var c=u.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return function e(){return(dt.canvg?Promise.resolve(dt.canvg):ve.e(484).then(ve.bind(ve,9484))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}().then(function(_){return _.fromString(c,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(f)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),i,a,n,s,l,d)})},st.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(e,t);return this},st.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var i,a,n,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],d=0,u=0,c=0;function f(_,w){var S,x=!1;for(S=0;S<_.length;S+=1)_[S]===w&&(x=!0);return x}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,"reset"===r||!0===e){var p=o.length;for(c=0;c<p;c+=1)t[o[c]].value=t[o[c]].defaultValue,t[o[c]].explicitSet=!1}if("object"===(0,Xt.Z)(r))for(a in r)if(n=r[a],f(o,a)&&void 0!==n){if("boolean"===t[a].type&&"boolean"==typeof n)t[a].value=n;else if("name"===t[a].type&&f(t[a].valueSet,n))t[a].value=n;else if("integer"===t[a].type&&Number.isInteger(n))t[a].value=n;else if("array"===t[a].type){for(d=0;d<n.length;d+=1)if(i=!0,1===n[d].length&&"number"==typeof n[d][0])l.push(String(n[d]-1));else if(n[d].length>1){for(u=0;u<n[d].length;u+=1)"number"!=typeof n[d][u]&&(i=!1);!0===i&&l.push([n[d][0]-1,n[d][1]-1].join(" "))}t[a].value="["+l.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var _,w=[];for(_ in t)!0===t[_].explicitSet&&w.push("name"===t[_].type?"/"+_+" /"+t[_].value:"/"+_+" "+t[_].value);0!==w.length&&this.internal.write("/ViewerPreferences\n<<\n"+w.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},
/** ====================================================================
       * @license
       * jsPDF XMP metadata plugin
       * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
       *
       * Permission is hereby granted, free of charge, to any person obtaining
       * a copy of this software and associated documentation files (the
       * "Software"), to deal in the Software without restriction, including
       * without limitation the rights to use, copy, modify, merge, publish,
       * distribute, sublicense, and/or sell copies of the Software, and to
       * permit persons to whom the Software is furnished to do so, subject to
       * the following conditions:
       *
       * The above copyright notice and this permission notice shall be
       * included in all copies or substantial portions of the Software.
       *
       * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
       * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
       * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
       * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
       * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
       * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
       * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
       * ====================================================================
       */
function(r){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(i)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),d=n.length+s.length+o.length+a.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+n+s+o+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(i,a){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:i,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(st.API),function(r){var e=r.API,t=e.pdfEscape16=function(n,s){for(var o,l=s.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],c=0,f=n.length;c<f;++c){if(o=s.metadata.characterToGlyph(n.charCodeAt(c)),s.metadata.glyIdsUsed.push(o),s.metadata.toUnicode[o]=n.charCodeAt(c),-1==l.indexOf(o)&&(l.push(o),l.push([parseInt(s.metadata.widthOfGlyph(o),10)])),"0"==o)return u.join("");o=o.toString(16),u.push(d[4-o.length],o)}return u.join("")},i=function(n){var s,o,l,d,u,c,f;for(u="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",l=[],c=0,f=(o=Object.keys(n).sort(function(p,_){return p-_})).length;c<f;c++)s=o[c],l.length>=100&&(u+="\n"+l.length+" beginbfchar\n"+l.join("\n")+"\nendbfchar",l=[]),null!=n[s]&&"function"==typeof n[s].toString&&(d=("0000"+n[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+d+">"));return l.length&&(u+="\n"+l.length+" beginbfchar\n"+l.join("\n")+"\nendbfchar\n"),u+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(n){!function(s){var o=s.font,l=s.out,d=s.newObject,u=s.putStream;if(o.metadata instanceof r.API.TTFFont&&"Identity-H"===o.encoding){for(var c=o.metadata.Unicode.widths,f=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",_=0;_<f.length;_++)p+=String.fromCharCode(f[_]);var w=d();u({data:p,addLength1:!0,objectId:w}),l("endobj");var S=d();u({data:i(o.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var x=d();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+xo(o.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var E=d();l("<<"),l("/Type /Font"),l("/BaseFont /"+xo(o.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+r.API.PDFObject.convert(c)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=d(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+S+" 0 R"),l("/BaseFont /"+xo(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+E+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}}(n)}]),e.events.push(["putFont",function(n){!function(s){var o=s.font,l=s.out,d=s.newObject,u=s.putStream;if(o.metadata instanceof r.API.TTFFont&&"WinAnsiEncoding"===o.encoding){for(var c=o.metadata.rawData,f="",p=0;p<c.length;p++)f+=String.fromCharCode(c[p]);var _=d();u({data:f,addLength1:!0,objectId:_}),l("endobj");var w=d();u({data:i(o.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var S=d();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+xo(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=d();for(var x=0;x<o.metadata.hmtx.widths.length;x++)o.metadata.hmtx.widths[x]=parseInt(o.metadata.hmtx.widths[x]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+xo(o.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}}(n)}]);var a=function(n){var s,o=n.text||"",l=n.x,d=n.y,u=n.options||{},c=n.mutex||{},f=c.pdfEscape,p=c.activeFontKey,_=c.fonts,w=p,S="",x=0,E="",V=_[w].encoding;if("Identity-H"!==_[w].encoding)return{text:o,x:l,y:d,options:u,mutex:c};for(E=o,w=p,Array.isArray(o)&&(E=o[0]),x=0;x<E.length;x+=1)_[w].metadata.hasOwnProperty("cmap")&&(s=_[w].metadata.cmap.unicode.codeMap[E[x].charCodeAt(0)]),s||E[x].charCodeAt(0)<256&&_[w].metadata.hasOwnProperty("Unicode")?S+=E[x]:S+="";var N="";return parseInt(w.slice(1))<14||"WinAnsiEncoding"===V?N=f(S,w).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):"Identity-H"===V&&(N=t(S,_[w])),c.isHex=!0,{text:N,x:l,y:d,options:u,mutex:c}};e.events.push(["postProcessText",function(n){var s=n.text||"",o=[],l={text:s,x:n.x,y:n.y,options:n.options,mutex:n.mutex};if(Array.isArray(s)){var d=0;for(d=0;d<s.length;d+=1)Array.isArray(s[d])&&3===s[d].length?o.push([a(Object.assign({},l,{text:s[d][0]})).text,s[d][1],s[d][2]]):o.push(a(Object.assign({},l,{text:s[d]})).text);n.text=o}else n.text=a(Object.assign({},l,{text:s})).text}])}(st),
/**
       * @license
       * jsPDF virtual FileSystem functionality
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(r){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},r.addFileToVFS=function(t,i){return e.call(this),this.internal.vFS[t]=i,this},r.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(st.API),
/**
       * @license
       * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
       * MIT License
       */
function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(i){var a,n,s,o,l,d,u,c=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,V=0;this.__bidiEngine__={};var N=function(F){var P=F.charCodeAt(),U=P>>8,K=w[U];return void 0!==K?c[256*K+(255&P)]:252===U||253===U?"AL":x.test(U)?"L":8===U?"R":"N"},j=function(F){for(var P,U=0;U<F.length;U++){if("L"===(P=N(F.charAt(U))))return!1;if("R"===P)return!0}return!1},Q=function(F,P,U,K){var ge,ue,xe,ce,Te=P[K];switch(Te){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(Te="AN");break;case"AL":E=!0,Te="R";break;case"WS":case"BN":Te="N";break;case"CS":K<1||K+1>=P.length||"EN"!==(ge=U[K-1])&&"AN"!==ge||"EN"!==(ue=P[K+1])&&"AN"!==ue?Te="N":E&&(ue="AN"),Te=ue===ge?ue:"N";break;case"ES":Te="EN"===(ge=K>0?U[K-1]:"B")&&K+1<P.length&&"EN"===P[K+1]?"EN":"N";break;case"ET":if(K>0&&"EN"===U[K-1]){Te="EN";break}if(E){Te="N";break}for(xe=K+1,ce=P.length;xe<ce&&"ET"===P[xe];)xe++;Te=xe<ce&&"EN"===P[xe]?"EN":"N";break;case"NSM":if(s&&!o){for(ce=P.length,xe=K+1;xe<ce&&"NSM"===P[xe];)xe++;if(xe<ce){var Ie=F[K];if(ge=P[xe],(Ie>=1425&&Ie<=2303||64286===Ie)&&("R"===ge||"AL"===ge)){Te="R";break}}}Te=K<1||"B"===(ge=P[K-1])?"N":U[K-1];break;case"B":E=!1,a=!0,Te=V;break;case"S":n=!0,Te="N"}return Te},q=function(F,P,U){var K=F.split("");return U&&k(K,U,{hiLevel:V}),K.reverse(),P&&P.reverse(),K.join("")},k=function(F,P,U){var K,ge,ue,xe,ce,Te=-1,Ie=F.length,Me=0,D=[],H=V?p:f,$=[];for(E=!1,a=!1,n=!1,ge=0;ge<Ie;ge++)$[ge]=N(F[ge]);for(ue=0;ue<Ie;ue++){if(ce=Me,D[ue]=Q(F,$,D,ue),K=240&(Me=H[ce][_[D[ue]]]),P[ue]=xe=H[Me&=15][5],K>0)if(16===K){for(ge=Te;ge<ue;ge++)P[ge]=1;Te=-1}else Te=-1;if(H[Me][6])-1===Te&&(Te=ue);else if(Te>-1){for(ge=Te;ge<ue;ge++)P[ge]=xe;Te=-1}"B"===$[ue]&&(P[ue]=0),U.hiLevel|=xe}n&&function(ee,oe,_e){for(var me=0;me<_e;me++)if("S"===ee[me]){oe[me]=V;for(var be=me-1;be>=0&&"WS"===ee[be];be--)oe[be]=V}}($,P,Ie)},se=function(F,P,U,K,ge){if(!(ge.hiLevel<F)){if(1===F&&1===V&&!a)return P.reverse(),void(U&&U.reverse());for(var ue,xe,ce,Te,Ie=P.length,Me=0;Me<Ie;){if(K[Me]>=F){for(ce=Me+1;ce<Ie&&K[ce]>=F;)ce++;for(Te=Me,xe=ce-1;Te<xe;Te++,xe--)ue=P[Te],P[Te]=P[xe],P[xe]=ue,U&&(ue=U[Te],U[Te]=U[xe],U[xe]=ue);Me=ce}Me++}}},he=function(F,P,U){var K=F.split(""),ge={hiLevel:V};return U||(U=[]),k(K,U,ge),function(ue,xe,ce){if(0!==ce.hiLevel&&u)for(var Te,Ie=0;Ie<ue.length;Ie++)1===xe[Ie]&&(Te=S.indexOf(ue[Ie]))>=0&&(ue[Ie]=S[Te+1])}(K,U,ge),se(2,K,P,U,ge),se(1,K,P,U,ge),K.join("")};return this.__bidiEngine__.doBidiReorder=function(F,P,U){if(function(ge,ue){if(ue)for(var xe=0;xe<ge.length;xe++)ue[xe]=xe;void 0===o&&(o=j(ge)),void 0===d&&(d=j(ge))}(F,P),s||!l||d)if(s&&l&&o^d)V=o?1:0,F=q(F,P,U);else if(!s&&l&&d)V=o?1:0,F=he(F,P,U),F=q(F,P);else if(!s||o||l||d){if(s&&!l&&o^d)F=q(F,P),o?(V=0,F=he(F,P,U)):(V=1,F=he(F,P,U),F=q(F,P));else if(s&&o&&!l&&d)V=1,F=he(F,P,U),F=q(F,P);else if(!s&&!l&&o^d){var K=u;o?(V=1,F=he(F,P,U),V=0,u=!1,F=he(F,P,U),u=K):(V=0,F=he(F,P,U),F=q(F,P),V=1,u=!1,F=he(F,P,U),u=K,F=q(F,P))}}else V=0,F=he(F,P,U);else V=o?1:0,F=he(F,P,U);return F},this.__bidiEngine__.setOptions=function(F){F&&(s=F.isInputVisual,l=F.isOutputVisual,o=F.isInputRtl,d=F.isOutputRtl,u=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(i){var a=i.text,n=i.options||{},s=[];if(n.isInputVisual="boolean"!=typeof n.isInputVisual||n.isInputVisual,t.setOptions(n),"[object Array]"===Object.prototype.toString.call(a)){var o=0;for(s=[],o=0;o<a.length;o+=1)"[object Array]"===Object.prototype.toString.call(a[o])?s.push([t.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):s.push([t.doBidiReorder(a[o])]);i.text=s}else i.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])}(st),st.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Ln(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new uW(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new Y8(this.contents),this.head=new J8(this),this.name=new rW(this),this.cmap=new qE(this),this.toUnicode={},this.hhea=new Q8(this),this.maxp=new aW(this),this.hmtx=new nW(this),this.post=new tW(this),this.os2=new eW(this),this.loca=new dW(this),this.glyf=new sW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,i,a,n;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,o,l,d;for(d=[],s=0,o=(l=this.bbox).length;s<o;s++)d.push(Math.round(l[s]*this.scaleFactor));return d}.call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(n=this.familyClass)||2===n||3===n||4===n||5===n||7===n,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,i){var a,n,s,o;for(s=0,n=0,o=(e=""+e).length;0<=o?n<o:n>o;n=0<=o?++n:--n)a=e.charCodeAt(n),s+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/t)||0;return s*(t/1e3)},r.prototype.lineHeight=function(e,t){return null==t&&(t=!1),(this.ascender+(t?this.lineGap:0)-this.decender)/1e3*e},r}();var qr,Ln=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,i;for(i=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)i[t]=String.fromCharCode(this.readByte());return i.join("")},r.prototype.writeString=function(e){var t,i,a;for(a=[],t=0,i=e.length;0<=i?t<i:t>i;t=0<=i?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,i,a,n,s,o,l;return e=this.readByte(),t=this.readByte(),i=this.readByte(),a=this.readByte(),n=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^n)+65536*(255^s)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*i+4294967296*a+16777216*n+65536*s+256*o+l},r.prototype.writeLongLong=function(e){var t,i;return t=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,i;for(t=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)t.push(this.readByte());return t},r.prototype.write=function(e){var i,a,n;for(n=[],i=0,a=e.length;i<a;i++)n.push(this.writeByte(e[i]));return n},r}(),Y8=function(){var r;function e(t){var i,a,n;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,n=this.tableCount;0<=n?a<n:a>n;a=0<=n?++a:--a)i={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(t){var i,a,s,o,l,d,u,c,f,p,_,w;for(w in p=Object.keys(t).length,l=Math.log(2),c=16*Math.floor(Math.log(p)/l),s=Math.floor(c/l),u=16*p-c,(a=new Ln).writeInt(this.scalarType),a.writeShort(p),a.writeShort(c),a.writeShort(s),a.writeShort(u),d=a.pos+16*p,o=null,_=[],t)for(f=t[w],a.writeString(w),a.writeInt(r(f)),a.writeInt(d),a.writeInt(f.length),_=_.concat(f),"head"===w&&(o=d),d+=f.length;d%4;)_.push(0),d++;return a.write(_),i=2981146554-r(a.data),a.pos=o+8,a.writeUInt32(i),a.data},r=function(t){var i,a,n,s;for(t=YE.call(t);t.length%4;)t.push(0);for(n=new Ln(t),a=0,i=0,s=t.length;i<s;i=i+=4)a+=n.readUInt32();return 4294967295&a},e}(),X8={}.hasOwnProperty,Aa=function(r,e){for(var t in e)X8.call(e,t)&&(r[t]=e[t]);function i(){this.constructor=r}return i.prototype=e.prototype,r.prototype=new i,r.__super__=e.prototype,r};qr=function(){function r(e){var t;this.file=e,this.exists=!!(t=this.file.directory.tables[this.tag]),t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var J8=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,qr),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var i;return(i=new Ln).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(t),i.writeShort(this.glyphDataFormat),i.data},e}(),jE=function(){function r(e,t){var i,a,n,s,o,l,d,u,c,f,p,_,w,S,x,E,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),c=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),f=p/2,e.pos+=6,n=function(){var N,j;for(j=[],l=N=0;0<=f?N<f:N>f;l=0<=f?++N:--N)j.push(e.readUInt16());return j}(),e.pos+=2,w=function(){var N,j;for(j=[],l=N=0;0<=f?N<f:N>f;l=0<=f?++N:--N)j.push(e.readUInt16());return j}(),d=function(){var N,j;for(j=[],l=N=0;0<=f?N<f:N>f;l=0<=f?++N:--N)j.push(e.readUInt16());return j}(),u=function(){var N,j;for(j=[],l=N=0;0<=f?N<f:N>f;l=0<=f?++N:--N)j.push(e.readUInt16());return j}(),a=(this.length-e.pos+this.offset)/2,o=function(){var N,j;for(j=[],l=N=0;0<=a?N<a:N>a;l=0<=a?++N:--N)j.push(e.readUInt16());return j}(),l=x=0,V=n.length;x<V;l=++x)for(S=n[l],i=E=_=w[l];_<=S?E<=S:E>=S;i=_<=S?++E:--E)0===u[l]?s=i+d[l]:0!==(s=o[u[l]/2+(i-_)-(f-l)]||0)&&(s+=d[l]),this.codeMap[i]=65535&s}e.pos=c}return r.encode=function(e,t){var i,a,n,s,o,l,d,u,c,f,p,_,w,S,x,E,V,j,Q,q,k,se,he,F,P,U,K,ge,ue,xe,ce,Te,Ie,Me,D,H,$,ee,oe,_e,me,be,ke,Be,je;switch(K=new Ln,s=Object.keys(e).sort(function(Xe,ut){return Xe-ut}),t){case"macroman":for(w=0,S=function(){var Xe=[];for(_=0;_<256;++_)Xe.push(0);return Xe}(),E={0:0},n={},ge=0,Te=s.length;ge<Te;ge++)null==E[be=e[a=s[ge]]]&&(E[be]=++w),n[a]={old:e[a],new:E[e[a]]},S[a]=E[e[a]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(S),{charMap:n,subtable:K.data,maxGlyphID:w+1};case"unicode":for(P=[],c=[],V=0,E={},i={},x=d=null,ue=0,Ie=s.length;ue<Ie;ue++)null==E[j=e[a=s[ue]]]&&(E[j]=++V),i[a]={old:j,new:E[j]},o=E[j]-a,null!=x&&o===d||(x&&c.push(x),P.push(a),d=o),x=a;for(x&&c.push(x),c.push(65535),P.push(65535),he=2*(se=P.length),k=2*Math.pow(Math.log(se)/Math.LN2,2),f=Math.log(k/2)/Math.LN2,q=2*se-k,l=[],Q=[],p=[],_=xe=0,Me=P.length;xe<Me;_=++xe){if(u=c[_],65535===(F=P[_])){l.push(0),Q.push(0);break}if(F-(U=i[F].new)>=32768)for(l.push(0),Q.push(2*(p.length+se-_)),a=ce=F;F<=u?ce<=u:ce>=u;a=F<=u?++ce:--ce)p.push(i[a].new);else l.push(U-F),Q.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*se+2*p.length),K.writeUInt16(0),K.writeUInt16(he),K.writeUInt16(k),K.writeUInt16(f),K.writeUInt16(q),_e=0,D=c.length;_e<D;_e++)K.writeUInt16(a=c[_e]);for(K.writeUInt16(0),me=0,H=P.length;me<H;me++)K.writeUInt16(a=P[me]);for(ke=0,$=l.length;ke<$;ke++)K.writeUInt16(o=l[ke]);for(Be=0,ee=Q.length;Be<ee;Be++)K.writeUInt16(Q[Be]);for(je=0,oe=p.length;je<oe;je++)K.writeUInt16(w=p[je]);return{charMap:i,subtable:K.data,maxGlyphID:V+1}}},r}(),qE=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,qr),e.prototype.tag="cmap",e.prototype.parse=function(t){var i,a,n;for(t.pos=this.offset,this.version=t.readUInt16(),n=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)i=new jE(t,this.offset),this.tables.push(i),i.isUnicode&&null==this.unicode&&(this.unicode=i);return!0},e.encode=function(t,i){var a,n;return null==i&&(i="macroman"),a=jE.encode(t,i),(n=new Ln).writeUInt16(0),n.writeUInt16(1),a.table=n.data.concat(a.subtable),a},e}(),Q8=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,qr),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),eW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,qr),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var i,a;for(a=[],i=0;i<10;++i)a.push(t.readByte());return a}(),this.charRange=function(){var i,a;for(a=[],i=0;i<4;++i)a.push(t.readInt());return a}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var i,a;for(a=[],i=0;i<2;i=++i)a.push(t.readInt());return a}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),tW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,qr),e.prototype.tag="post",e.prototype.parse=function(t){var i,a,n;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(a=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],n=[];t.pos<this.offset+this.length;)i=t.readByte(),n.push(this.names.push(t.readString(i)));return n;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 262144:return this.map=function(){var o,l,d;for(d=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)d.push(t.readUInt32());return d}.call(this)}},e}(),iW=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},rW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,qr),e.prototype.tag="name",e.prototype.parse=function(t){var i,a,n,s,o,l,d,u,c,f,p;for(t.pos=this.offset,t.readShort(),i=t.readShort(),l=t.readShort(),a=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(d={},s=c=0,f=a.length;c<f;s=++c)t.pos=(n=a[s]).offset,u=t.readString(n.length),o=new iW(u,n),null==d[p=n.nameID]&&(d[p]=[]),d[n.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),aW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,qr),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),nW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,qr),e.prototype.tag="hmtx",e.prototype.parse=function(t){var i,a,n,o,l,d;for(t.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,c;for(c=[],i=u=0;0<=n?u<n:u>n;i=0<=n?++u:--u)c.push(t.readInt16());return c}(),this.widths=function(){var u,c,f,p;for(p=[],u=0,c=(f=this.metrics).length;u<c;u++)p.push(f[u].advance);return p}.call(this),a=this.widths[this.widths.length-1],d=[],i=o=0;0<=n?o<n:o>n;i=0<=n?++o:--o)d.push(this.widths.push(a));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),YE=[].slice,sW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,qr),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var i,a,n,s,o,l,d,u,c,f;return t in this.cache?this.cache[t]:(i=this.file.contents,a=(s=this.file.loca).indexOf(t),0===(n=s.lengthOf(t))?this.cache[t]=null:(i.pos=this.offset+a,o=(l=new Ln(i.read(n))).readShort(),u=l.readShort(),f=l.readShort(),d=l.readShort(),c=l.readShort(),this.cache[t]=-1===o?new lW(l,u,f,d,c):new oW(l,o,u,f,d,c),this.cache[t]))},e.prototype.encode=function(t,i,a){var n,s,o,l,d;for(o=[],s=[],l=0,d=i.length;l<d;l++)n=t[i[l]],s.push(o.length),n&&(o=o.concat(n.encode(a)));return s.push(o.length),{table:o,offsets:s}},e}(),oW=function(){function r(e,t,i,a,n,s){this.raw=e,this.numberOfContours=t,this.xMin=i,this.yMin=a,this.xMax=n,this.yMax=s,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),lW=function(){function r(e,t,i,a,n){var s,o;for(this.raw=e,this.xMin=t,this.yMin=i,this.xMax=a,this.yMax=n,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return r.prototype.encode=function(){var e,t,i;for(t=new Ln(YE.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),dW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Aa(e,qr),e.prototype.tag="loca",e.prototype.parse=function(t){var a;return t.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?function(){var n,s;for(s=[],a=0,n=this.length;a<n;a+=2)s.push(2*t.readUInt16());return s}.call(this):function(){var n,s;for(s=[],a=0,n=this.length;a<n;a+=4)s.push(t.readUInt32());return s}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,i){for(var a=new Uint32Array(this.offsets.length),n=0,s=0,o=0;o<a.length;++o)if(a[o]=n,s<i.length&&i[s]==o){++s,a[o]=n;var d=this.offsets[o+1]-this.offsets[o];d>0&&(n+=d)}for(var u=new Array(4*a.length),c=0;c<a.length;++c)u[4*c+3]=255&a[c],u[4*c+2]=(65280&a[c])>>8,u[4*c+1]=(16711680&a[c])>>16,u[4*c]=(4278190080&a[c])>>24;return u},e}(),uW=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,a,n;for(t in a=this.font.cmap.tables[0].codeMap,e={},n=this.subset)e[t]=a[n[t]];return e},r.prototype.glyphsFor=function(e){var t,i,a,n,s,o,l;for(a={},s=0,o=e.length;s<o;s++)a[n=e[s]]=this.font.glyf.glyphFor(n);for(n in t=[],a)null!=(i=a[n])&&i.compound&&t.push.apply(t,i.glyphIDs);if(t.length>0)for(n in l=this.glyphsFor(t))a[n]=i=l[n];return a},r.prototype.encode=function(e,t){var i,a,n,s,l,d,u,c,f,p,_,w,S,x;for(a in i=qE.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),p={0:0},x=i.charMap)p[(l=x[a]).old]=l.new;for(_ in f=i.maxGlyphID,s)_ in p||(p[_]=f++);return u=function(E){var V,N;for(V in N={},E)N[E[V]]=V;return N}(p),c=Object.keys(u).sort(function(E,V){return E-V}),w=function(){var E,V,N;for(N=[],E=0,V=c.length;E<V;E++)N.push(u[c[E]]);return N}(),n=this.font.glyf.encode(s,w,p),d=this.font.loca.encode(n.offsets,w),S={cmap:this.font.cmap.raw(),glyf:n.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},r}();st.API.PDFObject=function(){var r;function e(){}return r=function(t,i){return(Array(i+1).join("0")+t).slice(-i)},e.convert=function(t){var a,n;if(Array.isArray(t))return"["+function(){var o,l,d;for(d=[],o=0,l=t.length;o<l;o++)d.push(e.convert(t[o]));return d}().join(" ")+"]";if("string"==typeof t)return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(t)){for(a in n=["<<"],t)n.push("/"+a+" "+e.convert(t[a]));return n.push(">>"),n.join("\n")}return""+t},e}();const hW=st;var cW=ve(8607),pW=ve(1880);const fW=["projectsGrid"],vW=["usersGrid"];function gW(r,e){if(1&r&&(W.TgZ(0,"div",31)(1,"div",32),W._uU(2),W.qZA()()),2&r){const t=e.$implicit;W.xp6(1),W.Q6J("ngClass","name"),W.xp6(1),W.hij(" ",t.value," ")}}function _W(r,e){if(1&r&&(W.TgZ(0,"div"),W._uU(1),W.TgZ(2,"span",35),W._uU(3),W.qZA()()),2&r){const t=e.$implicit;W.xp6(1),W.hij(" ",t.technology," "),W.xp6(2),W.hij(" ",t.engineeringScore," ")}}function mW(r,e){if(1&r&&(W.TgZ(0,"div")(1,"div",33),W.YNc(2,_W,4,2,"div",34),W.qZA()()),2&r){const t=e.$implicit;W.xp6(2),W.Q6J("ngForOf",t.data.skills)}}const CW=function(){return["pdf"]};function wW(r,e){if(1&r){const t=W.EpF();W.TgZ(0,"dx-data-grid",37,38),W.NdJ("onExporting",function(a){W.CHM(t);const n=W.oxw(2);return W.KtG(n.onExporting(a))}),W._UZ(2,"dxi-column",39)(3,"dxi-column",40)(4,"dxi-column",41)(5,"dxo-export",42),W.qZA()}if(2&r){const t=W.oxw(2);W.Q6J("dataSource",t.userHistory)("showBorders",!0),W.xp6(5),W.Q6J("enabled",!0)("formats",W.DdM(4,CW))}}function bW(r,e){if(1&r&&(W.TgZ(0,"div"),W.YNc(1,wW,6,5,"dx-data-grid",36),W.qZA()),2&r){const t=W.oxw();W.xp6(1),W.Q6J("ngIf",t.selectedUser)}}function yW(r,e){if(1&r&&(W.TgZ(0,"div"),W._uU(1),W.qZA()),2&r){const t=e.$implicit,i=W.oxw().$implicit,a=W.oxw();W.xp6(1),W.hij(" ",a.intersectedSkills(t.value,i.data.technologies)," ")}}function xW(r,e){if(1&r){const t=W.EpF();W.TgZ(0,"div")(1,"div",43)(2,"div"),W._uU(3),W.qZA(),W.TgZ(4,"div"),W._uU(5),W.qZA()(),W.TgZ(6,"dx-data-grid",44,45),W.NdJ("onEditingStart",function(a){W.CHM(t);const n=W.oxw();return W.KtG(n.onEditingStart(a))})("onRowUpdating",function(a){W.CHM(t);const n=W.oxw();return W.KtG(n.onRowUpdating(a))})("onCellPrepared",function(a){W.CHM(t);const n=W.oxw();return W.KtG(n.onCellPrepared(a))}),W._UZ(8,"dxo-row-dragging",46)(9,"dxo-editing",47)(10,"dxi-column",48),W.TgZ(11,"dxi-column",49),W._UZ(12,"dxo-lookup",50),W.qZA(),W._UZ(13,"dxi-column",51),W.YNc(14,yW,2,1,"div",13),W.TgZ(15,"dxi-column",52),W._UZ(16,"dxi-button",53),W.qZA()()()}if(2&r){const t=e.$implicit,i=W.oxw();W.xp6(3),W.AsE(" Aplicari pt. ",t.data.company," - ",t.data.project," "),W.xp6(2),W.AsE(" Open: ",i.calculateOpenAllocations(t.data.applications)," - Available: ",t.data.availablePositions," "),W.xp6(1),W.Q6J("dataSource",t.data.applications)("showBorders",!0)("columnAutoWidth",!0)("filterSyncEnabled",!0)("filterValue",i.dynamicFilterValue),W.xp6(2),W.MGl("data","applications-",t.data.id,""),W.Q6J("showDragIcons",!1)("onDragStart",i.onProjectDragStart),W.xp6(1),W.Q6J("allowUpdating",!0)("allowDeleting",!0),W.xp6(1),W.Q6J("allowEditing",!1),W.xp6(1),W.Q6J("calculateCellValue",i.calculateStatus)("allowEditing",!0),W.xp6(1),W.Q6J("dataSource",i.statuses),W.xp6(1),W.Q6J("allowEditing",!1),W.xp6(1),W.Q6J("dxTemplateOf","skillsTemplate")}}const SW=function(){return{enabled:!0}},XE=function(r){return{dataSource:r}},EW=function(){return{mode:"virtual"}},JE=r=>`${r.technology}(${r.engineeringScore})`,IW=[{path:"",component:(()=>{class r{onCellPrepared(t){"data"===t.rowType&&"statusArray"===t.column.dataField&&(t.cellElement.style.backgroundColor=this.getColorForStatus(t.data.statusArray))}onUserClick(t){this.selectedUser=t,this.getUserStatusHistory(this.selectedUser),this.popupVisible=!0}getUserStatusHistory(t){const i=[];for(const a of this.projects)for(const n of a.applications)if(n.user.id===t.id&&n.statusArray)for(const s of n.statusArray)i.push({project:`${a.company} - ${a.project}`,status:s.status,timestamp:s.timestamp});this.userHistory=i}constructor(t,i){this.projectService=t,this.userService=i,this.popupVisible=!1,this.style={},this.statuses=Object.values(hr.YG),this.statusArrayOnEditStart=[],this.users=this.userService.users(),this.projects=this.projectService.projects(),this.skillsSet=new Set(this.users.flatMap(a=>a.skills)),this.skills=[...this.skillsSet].map(JE).sort(),this.technologiesSet=new Set(this.projects.flatMap(a=>a.technologies)),this.technologies=[...this.technologiesSet],this.dynamicFilterValue=null,this.isToggled=!1,this.isBindingToggled=!0,this.userHistory=[],this.selectedUser=null,this.onUserDragEnd=this.onUserDragEnd.bind(this)}toggleFilterAttributes(){this.dynamicFilterValue=this.isToggled?[]:["statusArray","noneof",[hr.YG.rejectedByCandidate,hr.YG.rejectedByClient,hr.YG.impossibleAllocation]],this.isToggled=!this.isToggled}toggleBindingProjects(){this.isBindingToggled?this.projectsGrid.instance.filter(["binding","=",!0]):this.projectsGrid.instance.clearFilter(),this.isBindingToggled=!this.isBindingToggled}isStatusActive(t){return[hr.YG.new,hr.YG.proposedToBl,hr.YG.proposedToClient,hr.YG.possibleAllocation].includes(t)}intersectedSkills(t,i){return t.map(a=>a.technology).filter(a=>i.includes(a))}calculateFilterExpression(t,i){return[this.calculateCellValue,"contains",t]}calculateCellValue(t){return function _8(r){return"id"in r&&"name"in r&&"cc"in r&&"skills"in r&&"type"in r}(t)?0===t.skills.length?"":t.skills.map(JE).join(", "):(0,hr.W1)(t)?t.technologies.join(", "):t}calculateDisplayValue(t){return(0,hr.zQ)(t)?t.user.skills.join(", "):t}onProjectDragStart(t){t.cancel=!0}onUserDragEnd(t){var i=this;return(0,JZ.Z)(function*(){if("users"!==t.fromData)return void(t.cancel=!0);if("projects"===t.toData&&!t.toData.startsWith("applications")&&!1===t.dropInsideItem)return t.cancel=!0,void Av("You cannot drop users here. Please drop the user inside a project.","error");let a;if("projects"===t.toData||t.toData.startsWith("applications")){if(a=0===t.toIndex?i.projects[0]?.id:i.projectsGrid.instance.getKeyByRowIndex(+t.toIndex),!a)return void console.error("Project ID not found.");i.projectsGrid.instance.expandRow(a)}const n=t.itemData,s=i.projects.find(o=>o.id===a);if(s){if(s.applications.find(u=>u.user.id===n.id))return void Av(`User ${n.name} is already allocated in project ${s.company} - ${s.project}`,"warning");(i.intersectedSkills(n.skills,s.technologies).length>0?yield Mp(`Are you sure you want to add ${n.name} to project ${s.company} - ${s.project}`,"Confirm"):yield Mp(`User ${n.name} does not have any relevant skills for project ${s.company} - ${s.project}. Are you sure you want to add him?`,"Skills mismatch"))&&(i.projectService.addUserToProject(n,s),Av(`User ${n.name} added to project ${s.company} - ${s.project}`,"success"))}})()}calculateStatus(t){return t.statusArray&&t.statusArray.length>0?t.statusArray[t.statusArray.length-1].status:hr.YG.new}onEditingStart(t){this.statusArrayOnEditStart=t.data.statusArray}onRowUpdating(t){t.newData.statusArray&&(t.oldData.statusArray.push({status:t.newData.statusArray,timestamp:new Date}),delete t.newData.statusArray)}calculateOpenAllocations(t){return t.filter(i=>{const a=this.calculateStatus(i);return a!==hr.YG.rejectedByCandidate&&a!==hr.YG.rejectedByClient&&a!==hr.YG.impossibleAllocation}).length}onExporting(t){const i=new hW;(function jz(r){return ZS_export(function Uz(r){if(!(0,C.$K)(r)||!(0,C.Kn)(r))throw Error('The "exportDataGrid" method requires a configuration object.');if(!(0,C.$K)(r.component)||!(0,C.Kn)(r.component)||"dxDataGrid"!==r.component.NAME)throw Error('The "component" field must contain a DataGrid instance.');if(!(0,C.$K)(r.jsPDFDocument)||!(0,C.Kn)(r.jsPDFDocument))throw Error('The "jsPDFDocument" field must contain a jsPDF instance.');return(0,C.$K)(r.autoTableOptions)&&mp.Z.log("W0001","Export","autoTableOptions","22.1","You can migrate from exporting to PDF with the AutoTable plugin to a new export system. See the following topic for more information: ".concat("https://supportcenter.devexpress.com/ticket/details/t1077554")),ZS_getFullOptions(r)}(r))})({jsPDFDocument:i,component:t.component,indent:5}).then(()=>{i.save(`${this.selectedUser?.name}'s Profile.pdf`)})}getColorForStatus(t){switch(t[t.length-1]?.status){case"NEW":return"rgba(52, 152, 219, 0.2)";case"Propus BL":return"rgba(241, 196, 15, 0.2)";case"Propus Client":return"rgba(243, 156, 18, 0.2)";case"Alocare imposibila":case"Alocare respinsa client":case"Alocare respinsa candidat":return"rgba(231, 76, 60, 0.3)";case"Alocare posibila":case"Acceptat":return"rgba(46, 204, 113, 0.2)";default:return"rgba(211, 211, 211, 0.2)"}}static#e=this.\u0275fac=function(i){return new(i||r)(W.Y36(cW.Y),W.Y36(pW.K))};static#t=this.\u0275cmp=W.Xpm({type:r,selectors:[["app-staffing-up"]],viewQuery:function(i,a){if(1&i&&(W.Gf(fW,5),W.Gf(vW,5)),2&i){let n;W.iGM(n=W.CRH())&&(a.projectsGrid=n.first),W.iGM(n=W.CRH())&&(a.usersGrid=n.first)}},decls:44,vars:54,consts:[[1,"overflow-hidden"],["id","wrapper",1,"flex","gap-1","p-3","h-[calc(100vh-60px)]","overflow-hidden"],["leftElement",""],["handles","right",1,"h-full","flex","flex-col","gap-1"],["height","70%","keyExpr","id",1,"border-b-2",3,"showBorders","dataSource","allowColumnReordering","onRowClick"],["usersGrid",""],["data","users","group","sameGroup",3,"allowReordering","allowDropInsideItem","onDragEnd"],[3,"visible","search"],["mode","select",3,"enabled"],["dataField","name","caption","Name","cellTemplate","nameTemplate"],["title","Display user history",4,"dxTemplate","dxTemplateOf"],["dataField","cc","caption","CC"],["dataField","skills","caption","Skills","cellTemplate","skillsCellTemplate",3,"lookup","calculateCellValue","calculateFilterExpression"],[4,"dxTemplate","dxTemplateOf"],["dataField","type","caption","Type","sortIndex","0","sortOrder","desc",1,"text-center"],["location","after","name","columnChooserButton"],[3,"width","height","showTitle","title","dragEnabled","hideOnOutsideClick","visible","showCloseButton","visibleChange"],[1,"flex-2"],["rightElement",""],["height","100%","keyExpr","id",3,"dataSource","showBorders","scrolling","allowColumnReordering"],["projectsGrid",""],["data","projects","group","sameGroup",3,"allowDropInsideItem","allowReordering","showDragIcons","onDragStart"],[3,"visible"],["expandMode","rowClick",3,"autoExpandAll"],["dataField","company","sortOrder","asc",3,"groupIndex"],["dataField","project"],["dataField","technologies","caption","Technologies",3,"lookup","calculateCellValue","calculateFilterExpression"],["dataField","availablePositions"],["location","before","name","groupPanel"],["height","36px",3,"switchedOnText","switchedOffText","width","onValueChanged"],["template","detail",3,"enabled"],["title","Display user history"],[3,"ngClass"],[1,"skills-container"],[4,"ngFor","ngForOf"],[1,"skill-bubble"],[3,"dataSource","showBorders","onExporting",4,"ngIf"],[3,"dataSource","showBorders","onExporting"],["userHistoryGrid",""],["dataField","project","caption","Project"],["dataField","status","caption","Status"],["dataField","timestamp","caption","Timestamp","dataType","datetime"],[3,"enabled","formats"],[1,"mb-1","font-semibold","flex","justify-between"],["keyExpr","id",3,"dataSource","showBorders","columnAutoWidth","filterSyncEnabled","filterValue","onEditingStart","onRowUpdating","onCellPrepared"],["targetGrid",""],["group","sameGroup",3,"data","showDragIcons","onDragStart"],["mode","cell",3,"allowUpdating","allowDeleting"],["dataField","user.name","caption","Name",3,"allowEditing"],["dataField","statusArray","caption","Status",3,"calculateCellValue","allowEditing"],[3,"dataSource"],["dataField","user.skills","caption","Relevant skills","cellTemplate","skillsTemplate",3,"allowEditing"],["type","buttons"],["id","deleteBtn","name","delete","icon","trash"]],template:function(i,a){1&i&&(W.TgZ(0,"div",0)(1,"div",1)(2,"div",null,2)(4,"dx-resizable",3)(5,"dx-data-grid",4,5),W.NdJ("onRowClick",function(s){return a.onUserClick(s.data)}),W._uU(7," > "),W._UZ(8,"dxo-row-dragging",6)(9,"dxo-header-filter",7)(10,"dxo-column-chooser",8)(11,"dxi-column",9),W.YNc(12,gW,3,2,"div",10),W._UZ(13,"dxi-column",11),W.TgZ(14,"dxi-column",12),W.YNc(15,mW,3,1,"div",13),W.qZA(),W._UZ(16,"dxi-column",14),W.TgZ(17,"dxo-toolbar"),W._UZ(18,"dxi-item",15),W.qZA()(),W.TgZ(19,"dx-popup",16),W.NdJ("visibleChange",function(s){return a.popupVisible=s}),W.YNc(20,bW,2,1,"div",13),W.qZA()()(),W.TgZ(21,"div",17,18)(23,"dx-data-grid",19,20),W._UZ(25,"dxo-row-dragging",21)(26,"dxo-filter-row",22)(27,"dxo-header-filter",22)(28,"dxo-group-panel",22)(29,"dxo-grouping",23)(30,"dxo-column-chooser",8)(31,"dxi-column",24)(32,"dxi-column",25)(33,"dxi-column",26)(34,"dxi-column",27),W.TgZ(35,"dxo-toolbar"),W._UZ(36,"dxi-item",28),W.TgZ(37,"dxi-item")(38,"dx-switch",29),W.NdJ("onValueChanged",function(){return a.toggleBindingProjects()}),W.qZA()(),W.TgZ(39,"dxi-item")(40,"dx-switch",29),W.NdJ("onValueChanged",function(){return a.toggleFilterAttributes()}),W.qZA()(),W._UZ(41,"dxi-item",15),W.qZA(),W._UZ(42,"dxo-master-detail",30),W.YNc(43,xW,17,20,"div",13),W.qZA()()()()),2&i&&(W.xp6(5),W.Q6J("showBorders",!0)("dataSource",a.users)("allowColumnReordering",!0),W.xp6(3),W.Q6J("allowReordering",!1)("allowDropInsideItem",!1)("onDragEnd",a.onUserDragEnd),W.xp6(1),W.Q6J("visible",!0)("search",W.DdM(48,SW)),W.xp6(1),W.Q6J("enabled",!0),W.xp6(2),W.Q6J("dxTemplateOf","nameTemplate"),W.xp6(2),W.Q6J("lookup",W.VKq(49,XE,a.skills))("calculateCellValue",a.calculateCellValue)("calculateFilterExpression",a.calculateFilterExpression),W.xp6(1),W.Q6J("dxTemplateOf","skillsCellTemplate"),W.xp6(4),W.Q6J("width",660)("height",540)("showTitle",!0)("title",(null==a.selectedUser?null:a.selectedUser.name)+" - Allocation History")("dragEnabled",!1)("hideOnOutsideClick",!0)("visible",a.popupVisible)("showCloseButton",!0),W.xp6(1),W.Q6J("dxTemplateOf","content"),W.xp6(3),W.Q6J("dataSource",a.projects)("showBorders",!0)("scrolling",W.DdM(51,EW))("allowColumnReordering",!0),W.xp6(2),W.Q6J("allowDropInsideItem",!0)("allowReordering",!1)("showDragIcons",!1)("onDragStart",a.onProjectDragStart),W.xp6(1),W.Q6J("visible",!0),W.xp6(1),W.Q6J("visible",!0),W.xp6(1),W.Q6J("visible",!0),W.xp6(1),W.Q6J("autoExpandAll",!1),W.xp6(1),W.Q6J("enabled",!0),W.xp6(1),W.Q6J("groupIndex",0),W.xp6(2),W.Q6J("lookup",W.VKq(52,XE,a.technologies))("calculateCellValue",a.calculateCellValue)("calculateFilterExpression",a.calculateFilterExpression),W.xp6(5),W.Q6J("switchedOnText","Non-Binding")("switchedOffText","Binding")("width",140),W.xp6(2),W.Q6J("switchedOnText","Aplicari active")("switchedOffText","Toate aplicarile")("width",140),W.xp6(2),W.Q6J("enabled",!0),W.xp6(1),W.Q6J("dxTemplateOf","detail"))},dependencies:[pn.mk,pn.sg,pn.O5,VZ,Ce.Auv,Ce.qvW,Ce.k4o,Ce.tZE,Ce.w3U,Ce.Uo8,Ce.ZT3,Ce.Ak0,Ce.I62,Ce.uCj,Ce.Een,Ce.N_X,Ce.CRh,Ce.y1f,Tt.p6,TS,HZ,ES.x],styles:[".dx-switch-container{height:36px}  .dx-switch-inner{height:36px}  .dx-switch-handle{height:30px}  .dx-switch-on,   .dx-switch-off{font-size:14px;line-height:36px}  .dx-datagrid .dx-link{color:#ef4444}.name[_ngcontent-%COMP%]:hover{cursor:pointer;color:#63a0d4;text-decoration:underline}.skills-container[_ngcontent-%COMP%]{white-space:normal}.skill-bubble[_ngcontent-%COMP%]{display:inline-block;background-color:#007bff3f;color:#000;padding:1px 6px;border-radius:50%;margin:5px;font-size:12px}"]})}return r})()}];let AW=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=W.oAB({type:r});static#i=this.\u0275inj=W.cJS({imports:[DS.Bz.forChild(IW),DS.Bz]})}return r})();var TW=ve(6208);let DW=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=W.oAB({type:r});static#i=this.\u0275inj=W.cJS({imports:[pn.ez,AW,NZ,BZ.e,XZ,ZZ,TW.m,ES.C,Tt.ie]})}return r})()},1002:(P1,Zd,ve)=>{function pn(nl){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(W){return typeof W}:function(W){return W&&"function"==typeof Symbol&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W})(nl)}ve.d(Zd,{Z:()=>pn})}}]);